<app-subscriber-menu [responseFromIssuse]="apiCallDone"></app-subscriber-menu>
<form target="LocalGui" method="POST" id="connectDeviceForm" action="" class="dis-none">
  <input type="text" id="connectDeviceUN" name="Username" />
  <input type="text" id="connectDeviceAuth" name="auth" />
  <input type="text" id="connectDeviceNonce" name="nonce" />
</form>
<div *ngIf="deviceData?.length || ontData?.length; else errorModal" id="routerContentDiv">
  <section>
    <div class="row">
      <div class="col-md-12 ccl-tabs router-content-tab">
        <ul id="tabs" class="nav nav-tabs routerDeviceList">
          <li class="nav-item" *ngFor="let device of ontData; let i = index"
            (click)="loadOntData(device?.serialNumber, device)">
            <ng-container
              *ngIf="device.hasOwnProperty('ont') && ssoService.getEntitlementsArr().indexOf('102') > -1 && ssoService.getCscType() !== 'DME'">
              <a href="javascript:void(0)" data-target="#issue" [attr.some]="device.ont.serialNo" data-toggle="tab"
                class="nav-link small" [ngClass]="{
                  active: (isOnt && ontSn === device?.serialNumber)
                }">
                <span class="small-text">ONT {{ device?.ont?.model ? ('-' + device?.ont?.model) : '' }}</span>
                <span class="big-text">{{device?.serialNumber || ''}}</span>
                <span class="small-text">{{language['Optical Network Terminal']}}</span>
              </a>
            </ng-container>
          </li>
          <li class="nav-item" *ngFor="let device of deviceData; let i = index"
            (click)="loadData(device.serialNumber, device)">
            <ng-container>
              <a href="javascript:void(0)" data-target="#issue" data-toggle="tab" [attr.id]="'routerDevice' + i"
                class="nav-link small" [ngClass]="{
                  active: routerSerialNumber === device.serialNumber && !isOnt
                }">
                <span class="small-text">{{ device.modelName }}</span>
                <span class="big-text">{{ device.serialNumber }}</span>
                <span class="small-text">{{
                  device.opMode == "RG"
                  ? language.Residential_Gateway
                  : device.opMode
                  .replace("WAP-IGMP", "Mesh(SAT)")
                  .replace("WAP", "Mesh(SAT)")
                  }}</span>
              </a>
            </ng-container>
          </li>

        </ul>

        <div id="tabsContent" class="tab-content">
          <div id="issue" class="tab-pane fade active show">
            <div class="row"></div>
          </div>
          <div id="topology" class="tab-pane fade">
            <div class="row"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="w-100 alert alert alert-danger fade show" *ngIf="isError">
    <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
    <button type="button" class="close" (click)="isError = false">
      <span></span>
    </button>
    <div class="d-inline-flex" [innerHtml]="warningMessage"></div>
  </div>

  <div class="col-12" *ngIf="!isOnt && !newRouterView">
    <div class="loader" *ngIf="loader">
      <div class="d-flex justify-content-center">
        <div class="spinner-border text-primary">
          <span class="sr-only">{{ language.Loading }}</span>
        </div>
      </div>
    </div>



    <div class="row justify-content-between my-3">
      <div class="col-lg-6 col-md-12 col-sm-12">
        <div class="row my-4">
          <div class="col-md-12 d-inline-flex p-0">
            <button type="button" class="btn-default primary px-3 mr-2" data-toggle="modal" data-target="#reboot"
              *ngIf="scopeFlag.rebootRead && metaData?.Reboot?.config?.supported" id="routerRebootId"
              (click)="openOutModal(reboot, true)" [disabled]="!scopeFlag.reboot">
              {{ language.Reboot }}
            </button>
            <button type="button" class="btn-default btn-dft px-3 mx-2" id="routerConnectToDevice" *ngIf="
                scopeFlag.connectToDeviceWrite &&
                deviceSelected.modelName !== '804Mesh' &&
                metaData?.ConnectToDevice
              " (click)="connectToDevice()">
              {{ language.Connect_to_Device }}
            </button>
            <div class="cus-dd dropdown-button custom-dropdown dropdown">
              <button class="dropdown-toggle mr-2" id="dropdownExchange" data-toggle="dropdown"
                [disabled]="checkSupportMenu()">
                <p class="listdata mb0">
                  ...
                  <!--<span></span>-->
                </p>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownExchange" id="supportListId">
                <button class="dropdown-item greyaa" id="routerPing" *ngIf="
                    scopeFlag.pingRead &&
                    deviceSelected.modelName !== '804Mesh' &&
                    metaData?.Ping?.supported
                  " (click)="
                    ipAddress = ''; openOutModal(pingModel); (metaData?.SplitWan?.supported || (!objectExistence(this.metaData?.SplitWan) && deviceSelected?.modelName && deviceSelected?.modelName.indexOf('GS') != 0))?dropDownWanInfo():'';
                  ">
                  <span>{{language.Ping}}</span>
                </button>
                <button class="dropdown-item greyaa" id="routerTraceroute" *ngIf="
                    scopeFlag.tracerouteRead &&
                    deviceSelected.modelName !== '804Mesh' &&
                    metaData?.TraceRoute?.supported
                  " (click)="
                    ipAddress = ''; openOutModal(tracerouteModel); (metaData?.SplitWan?.supported || (!objectExistence(this.metaData?.SplitWan) && deviceSelected?.modelName && deviceSelected?.modelName.indexOf('GS') != 0))?dropDownWanInfo():'';
                  ">
                  <span>{{ language.Traceroute }}</span>
                </button>
                <button class="dropdown-item greyaa" id="routerBackupRestore" *ngIf="
                    scopeFlag.backupRead &&
                    deviceSelected.modelName !== '804Mesh' &&
                    metaData?.BackupRestore?.supported
                  " (click)="dataObj.BRselected = 0; openOutModal(backup)">
                  <span>{{ language.Backup_Restore }}</span>
                </button>
                <button class="dropdown-item greyaa" *ngIf="scopeFlag.communicationLogRead" (click)="
                    dataObj.commLogExpanded = []; openOutModal(communicationModel)
                  " id="routerCommLog">
                  <span>{{ language.Communication_Logs }}</span>
                </button>
                <button class="dropdown-item greyaa" id="routerDeviceLog" *ngIf="
                    scopeFlag.deviceLogRead &&
                    deviceSelected.modelName !== '804Mesh' &&
                    metaData?.DeviceLog?.supported
                  " (click)="openOutModal(devicelogsModal)">
                  <span>{{ language.Device_Logs }}</span>
                </button>
                <button class="dropdown-item greyaa" id="routerDataModal" *ngIf="
                    scopeFlag.dataModalRead &&
                    metaData?.DataModel?.supported &&
                    deviceSelected.modelName !== '804Mesh' &&
                    deviceSelected.modelName !== 'VMG9823-B10A'
                  " (click)="openOutModal(dataModal); initDataModel()">
                  <span>{{ language.Data_Model }}</span>
                </button>
                <button class="dropdown-item greyaa" *ngIf="scopeFlag.eventHistoryRead"
                  (click)="openOutModal(eventhistoryModal)" id="routerEventHistory">
                  <span>{{ language.Event_History }}</span>
                </button>
                <button class="dropdown-item greyaa" *ngIf="
                    scopeFlag.factoryResetRead &&
                    metaData?.FactoryReset?.config?.supported
                  " (click)="factoryResetViaDeviceInfo();" id="routerFactoryReset">
                  <span>{{ language.Factory_Reset }}</span>
                </button>
                <button class="dropdown-item greyaa" *ngIf="
                    scopeFlag.updateSWRead && metaData?.UpgradeSoftware?.supported
                  " id="routerUpdateSW" (click)="openOutModal(updateSoftwareModal); updateToList()">
                  <span>{{ language.Update_Software }}</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="loader" *ngIf="refreshLoader">
          <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary">
              <span class="sr-only">{{ language.Loading }}</span>
            </div>
          </div>
        </div>
        <div class="d-flex">
          <div class="col-lg-12 col-md-12 col-sm-12 px-0 border-bottom">
            <div class="ccl-Secondary-title user-name d-inline-flex " id="routedGatewayHeader">
              {{
              deviceInfo?.opMode == "RG"
              ? language.Residential_Gateway
              : deviceInfo?.opMode
              ? deviceInfo.opMode
              .replace("WAP-IGMP", "Mesh(SAT)")
              .replace("WAP", "Mesh(SAT)")
              : language.Residential_Gateway
              }}
              {{ routerSerialNumber ? "- " + routerSerialNumber : "" }}
            </div>
            <div class="d-inline-flex float-right text-right">
              <span class="cursor-pointer" id="refreshicon" (click)="RouterGatewayLoader()">
                <i class="fas fa-sync refreshicon"></i>
              </span>
            </div>
          </div>

        </div>
        <div class="row">
          <div class="col-md-12 support-key-value">
            <table class="" id="routedGatewayBody">
              <tbody>
                <tr>
                  <th scope="row">{{ language.Connectivity_Status }}</th>
                  <td [ngClass]="connected && connected != false ? 'green' : 'red'">
                    <span>{{
                      connected
                      ? language.Online
                      : connected == false
                      ? language.Offline
                      : "-"
                      }}</span>
                  </td>
                </tr>
                <tr *ngIf="metaData?.DeviceStatus?.Uptime">
                  <th scope="row">{{ language.Uptime }}</th>
                  <td class="green">
                    <span *ngIf="connected?.Uptime; else nullValue">{{
                      connected?.Uptime
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Last_Inform_Time }}</th>
                  <td [ngClass]="
                          connected && connected != false ? 'green' : 'red'
                        ">
                    <span *ngIf="deviceInfo?.lastInformTime; else nullValue">{{
                      deviceInfo?.lastInformTime | date: "MM/dd/yyyy, h:mm:ss a"
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Software_Version }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.softwareVersion; else nullValue">{{
                      deviceInfo?.softwareVersion
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.manufacturer }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.manufacturer; else nullValue">{{
                      deviceInfo?.manufacturer
                      }}</span>
                  </td>
                </tr>

                <tr>
                  <th scope="row">{{ language.Model }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.modelName; else nullValue">{{
                      deviceInfo?.modelName
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.FSAN_Serial_Number }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.serialNumber; else nullValue">{{
                      deviceInfo?.serialNumber
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Hardware_Serial_Number }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.hardwareSerialNumber; else nullValue">{{
                      deviceInfo?.hardwareSerialNumber
                      }}</span>
                  </td>
                </tr>
                <tr *ngIf="deviceSelected.opMode == 'RG'">
                  <th scope="row">{{ language["Registration ID"] }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.registrationId; else nullValue">{{
                      deviceInfo?.registrationId
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.IP_Address }}</th>
                  <td>
                    <!-- <span>{{
                          
                            deviceInfo?.ipAddress ? deviceInfo.ipAddress : deviceInfo?.secondIpAddress
                          }}</span> -->
                    <span>
                      {{
                      checkIpAddress(
                      deviceInfo?.ipAddress,
                      "v4"
                      ) ||
                      checkIpAddress(
                      deviceInfo?.ipAddress,
                      "v6"
                      ) ||
                      checkIpAddress(
                      deviceInfo?.secondIpAddress,
                      "v4"
                      ) ||
                      checkIpAddress(
                      deviceInfo?.secondIpAddress,
                      "v6"
                      ) ||
                      "-"
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Subnet_Mask }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.subnetMask; else nullValue">{{
                      deviceInfo?.subnetMask
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Default_Gateway }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.defaultGateway; else nullValue">
                      {{ deviceInfo?.defaultGateway }}
                    </span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.MAC_Address }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.macAddress; else nullValue">
                      {{ deviceInfo?.macAddress }}
                    </span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language["STUN Binding"] }}</th>
                  <td>
                    <span *ngIf="
                            deviceInfo?.udpConnectionRequestAddr;
                            else nullValue
                          ">
                      {{ deviceInfo?.udpConnectionRequestAddr }}
                    </span>
                  </td>
                </tr>
                <tr *ngIf="metaData?.DeviceStatus?.PeriodicInformInterval">
                  <th scope="row">{{ language.Inform_Interval }}</th>
                  <td>
                    <span *ngIf="deviceInfo?.periodicInformInterval; else nullValue">{{
                      deviceInfo?.periodicInformInterval }}
                      {{ language.Seconds }}</span>
                  </td>
                </tr>
                <tr *ngIf="metaData?.RouterTemperature?.supported">
                  <th scope="row">{{ language.System_Temperature }}</th>
                  <td>
                    <span *ngIf="isNumber(dataObj?.maxTemp) && dataObj?.maxTemp!=''; else nullValue">{{
                      ((dataObj?.maxTemp * 9/5) + 32) }}
                      °F / {{dataObj?.maxTemp}}
                      °C</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{language.Wan_Access_Type}}</th>
                  <td>
                    <span *ngIf="deviceInfo?.wanAccessType; else nullValue">
                      {{ deviceInfo?.wanAccessType }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
            <ng-template #nullValue> - </ng-template>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-md-12 col-sm-12" *ngIf="
              deviceSelected.opMode == 'RG' &&
              connected &&
              objectExistence(metaData?.DHCP)
            ">
        <div class="d-flex border-bottom">
          <div class="col-lg-6 col-md-6 col-sm-12 p-0">
            <div class="ccl-Secondary-title user-name" id="dhcpHeader">
              {{ language.DHCP_Server }}
            </div>
          </div>
          <div class="col-lg-6 col-md-6 text-right" *ngIf="deviceSelected.opMode != 'WAP' && scopeFlag.settingWrite">
            <span class="cursor-pointer" title="{{language.Edit}}" id="dhcpEditId" *ngIf="scopeFlag.cpeWrite"
              (click)="openOutModal(dhcpserverModal)">
              <i class="fas fa-pencil-alt"></i>
            </span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 support-key-value">
            <table class="" id="dhcpBody">
              <tbody>
                <tr>
                  <th scope="row">{{ language.DHCP_Server }}</th>
                  <td [ngClass]="{
                          green: toogle == 'true',
                          red: toogle == 'false'
                        }">
                    <span>{{
                      toogle == "true" ? language.on : language.off
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Host_Name }}</th>
                  <td>
                    <span *ngIf="dhcpData?.HostName; else nullValue">{{
                      dhcpData?.HostName
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Domain_Name }}</th>
                  <td>
                    <span *ngIf="dhcpData?.DomainName; else nullValue">{{
                      language[dhcpData?.DomainName] || dhcpData?.DomainName
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Device_IP_Address }}</th>
                  <td>
                    <span *ngIf="dhcpData?.DeviceIPAddress; else nullValue">{{
                      dhcpData?.DeviceIPAddress
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Beginning_IP_Address }}</th>
                  <td>
                    <span *ngIf="dhcpData?.BeginningIPAddress; else nullValue">{{ dhcpData?.BeginningIPAddress
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Ending_IP_Address }}</th>
                  <td>
                    <span *ngIf="dhcpData?.EndingIPAddress; else nullValue">{{
                      dhcpData?.EndingIPAddress
                      }}</span>
                  </td>
                </tr>

                <tr>
                  <th scope="row">{{ language.Subnet_Mask }}</th>
                  <td>
                    <span *ngIf="dhcpData?.SubnetMask; else nullValue">{{
                      dhcpData?.SubnetMask
                      }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.DHCP_Lease_Time }}</th>
                  <td>
                    <span *ngIf="dhcpData?.DHCPLeaseTimeConvertion; else nullValue">{{
                      dhcpData?.DHCPLeaseTimeConvertion
                      }}</span>
                  </td>
                </tr>

                <tr>
                  <th scope="row">{{ language.Primary_DNS_Server }}</th>
                  <td>
                    <span>{{ dhcpData.primaryDNSServer || "N/A" }}</span>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Secondary_DNS_Server }}</th>
                  <td>
                    <span>{{ dhcpData.secondaryDNSServer || "N/A" }}</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="row" *ngIf="objectExistence(metaData?.LanPort) && connected">
      <div class="loader load" *ngIf="loading1">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="col-lg-12 col-md-12 col-sm-12 p-0 border-bottom mb-3">
        <div class="ccl-Secondary-title user-name lan-port-title" id="router-Lan-Ports">{{
          language.Lan_Ports }}</div>
        <div class="d-inline-flex float-right text-right">
          <span class="cursor-pointer" id="refreshLanPort" (click)="getLandport(routerSerialNumber)">
            <i class="fas fa-sync refreshicon"></i>
          </span>
        </div>
      </div>

      <!-- *ngIf="port.Operational != 'NotPresent'"
          [ngClass]='port.Enable == "true" || port.Operational == "Up" ?"connected-true":"connected-false" -->
      <div class="lanport-list-wrapper">
        <div class="lanport-list-details" *ngFor="let port of landportDetail; let i = index">
          <div class="lanport-list">
            <div class="d-flex">
              <div class="float-left mr-2 lanport-icon">
                <i class="fa fa-building" aria-hidden="true"></i>
              </div>
              <div class="float-right line-height-ini">
                <!-- <div>{{port.Name?modifylastChar(port.Name,i):"--"}}</div> -->
                <div>{{ language.port + " " }}{{ lanportKey[i] }}</div>
                <span *ngIf="port?.Enable == 'true' || port?.Enable == 'false'" class="small"
                  [ngClass]="port?.Enable == 'false' ? 'disconnect' : 'connect'">
                  {{
                  port?.Enable ? language.Connected : language.Disconnected
                  }}</span>
                <span *ngIf="port?.Operational" class="small" [ngClass]="
                        port?.Operational == 'Up' ||
                        port?.Operational == 'up' ||
                        port?.Operational == 'UP'
                          ? 'connect'
                          : 'disconnect'
                      ">
                  {{
                  port?.Operational == "Up" ||
                  port?.Operational == "up" ||
                  port?.Operational == "UP"
                  ? language.Connected
                  : language.Disconnected
                  }}</span>
              </div>
            </div>
            <div class="my-2">
              <table class="lan-port-table" id="Lan-port">
                <tbody>
                  <tr>
                    <th>{{ language.MAC_Address }}</th>
                    <td>{{ port?.MACAddress }}</td>
                  </tr>
                  <tr>
                    <th>{{ language.MAX_Bit_Rate }}</th>
                    <td>
                      {{
                      port.MaxBitRate
                      ? port.MaxBitRate == "Auto"
                      ? port.MaxBitRate
                      : port.MaxBitRate + " Mbps"
                      : " "
                      }}
                    </td>
                  </tr>
                  <tr>
                    <th>{{ language.Duplex_Mode }}</th>
                    <td>{{ port?.DuplexMode }}</td>
                  </tr>
                  <tr>
                    <th>{{ language.Admin }}</th>
                    <td *ngIf="port?.Status">{{ port?.Status }}</td>
                    <td *ngIf="port?.AdminStatus">
                      {{
                      port?.AdminStatus == "true"
                      ? language.UP
                      : language.DOWN
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!--end-->
    </div>
    <div class="row my-2" *ngIf="
            deviceSelected.opMode == 'RG' &&
            connected && scopeFlag.settingRead && 
            (objectExistence(metaData?.DMZ) ||
              objectExistence(metaData?.PortMapping))
          ">
      <div class="col-md-12 px-0">
        <div class="ccl-Secondary-title" id="router-security">{{ language.Security }}</div>
      </div>
    </div>

    <div class="row justify-content-between mb-5"
      *ngIf="deviceSelected.opMode == 'RG' && connected && scopeFlag.settingRead">
      <div class="col-lg-5 col-md-12 col-sm-12" *ngIf="objectExistence(metaData?.DMZ)">
        <div class="row border-bottom mb-4">
          <div class="col-md-12 px-0">
            <div class="port-add-new">
              <div class="ccl-Secondary-title user-name" id="router-dmz">{{ language.DMZ }}</div>
              <span class="cursor-pointer" title="{{language.Edit}}" id="dmzEditId"
                (click)="openOutModal(dmzModal); newDMZ()"
                *ngIf="deviceSelected.opMode != 'WAP' && scopeFlag.settingWrite">
                <i class="fas fa-pencil-alt"></i>
              </span>
            </div>
          </div>
        </div>
        <div class="w-100 alert alert alert-success fade show mt-2" *ngIf="isSuccess">
          <span class="success-img"><img src="./assets/img/success-icon.svg" /></span>
          <button type="button" class="close" (click)="isSuccess = false">
            <span></span>
          </button>
          {{ language.Operation_Successful }}
        </div>
        <div class="row">
          <div class="w-100 alert-note d-flex p-2">
            <span class="success-img h-float"><img src="./assets/img/ic_info.svg" /></span>
            <!-- <button type="button" class="close" (click)="isError = false;">&times;</button> -->
            <p class="mb-0 text-break">{{ language.DMZ_LAN_Placing }}</p>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 px-0 support-key-value">
            <table class="" id="dmzBody">
              <tbody>
                <tr>
                  <th scope="row">{{ language.DMZ_State }}</th>
                  <td>
                    {{ (dmzData?.Enable == "true" || dmzData?.Enable == true) ? language.On : language.Off }}
                  </td>
                </tr>
                <tr *ngIf="dmzData.Enable == 'true' ? true : false">
                  <th scope="row">{{ language.IPAddress }}</th>
                  <td>
                    <span *ngIf="dmzData.IPAddress; else nullValue"></span>{{ dmzData.IPAddress }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-md-12 col-sm-12" *ngIf="objectExistence(metaData?.PortMapping)">
        <div class="row border-bottom">
          <div class="col-md-12 p-0">
            <div class="port-add-new">
              <div class="ccl-Secondary-title user-name" id="Port-Forwarding">{{ language.Port_Forwarding }}</div>
              <button class="btn-default primary" *ngIf="scopeFlag.settingWrite" id="newPFid"
                (click)="openOutModal(newportModal); newPortForward()">
                {{ language.New }}
              </button>
            </div>
          </div>
        </div>
        <div class="alert-warning p-2 pb-3" *ngIf="pfDeleteModalRef">

          <span class="warning-img"><img src="./assets/img/warning-icon.svg" /></span>
          {{language['Are you sure you want to delete']}}
          <strong class="d-inline-flex f-size-18">{{
            portObj?.value?.PortMappingDescription
            }}</strong>
          ?
          <div class="btn-con-sec d-inline-flex float-right">
            <button type="button" class="btn warn-btn mr-2" id="cancel-btn" (click)="closeDeleteConfirmation()">
              {{ language.Cancel }}
            </button>
            <button type="button" class="btn warn-btn" ngbAutofocus id="confirm-btn"
              (click)="deletePortForwarding(portObj.key, 'delete')">
              {{ language.Confirm }}
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 ccl-tables px-0">
            <div class="w-100 alert alert alert-success fade show" *ngIf="showSuccess">

              <span class="success-img"><img src="./assets/img/success-icon.svg" /></span>
              <button type="button" class="close" (click)="hideSuccess()">
                <span></span>
              </button>
              <div class="d-inline-flex" [innerHtml]="language[successMsg]"></div>

            </div>
            <table class="table table-borderless" id="portforwardingBody">
              <thead>
                <tr class="py-0">
                  <th scope="col">{{ language.Name }}</th>
                  <th scope="col">{{ language.LAN_Host }}</th>
                  <th scope="col">{{ language.Ports }}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let port of portForwardingData | keyvalue">
                  <th scope="row">{{ port.value.PortMappingDescription }}</th>
                  <td>{{ port.value.InternalClient }}</td>
                  <td>
                    {{ port.value.portName }}
                  </td>
                  <td>
                    <span class="primary cursor-pointer" *ngIf="scopeFlag.settingWrite">
                      <i class="fas fa-trash-alt" (click)="deletePortForwarding(port)" title="{{language.Delete}}"></i>
                    </span>
                  </td>
                  <td>
                    <!-- <span class="primary cursor-pointer"
                          (click)="newPortModel = port.value; portIndex = port.key; openOutModal(editportModal)">
                          <i class="fas fa-pencil-alt"></i>
                        </span> -->
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>



  </div>

  <ng-template #pingModel id="pingModel" let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title modal-title mx-3" id="add-ping-label">{{ language.Ping }}</div>
      <button type="button" id="modal-close-btn" class="close" data-dismiss="modal" aria-label="Close"
        (click)="confirmClose('ping')">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="py-3 warning-msg" *ngIf="confirmPingMessage">
      <span class="warning-img"><img src="./assets/img/warning-icon.svg" /></span>
      <span>{{ language.Termination_Confirmation }}</span>
      <div class="btn-con-sec float-right">
        <button class="btn warn-btn mr-2" id="router-ping-confirm-Btn" (click)="closePing_Traceroute()">
          {{ language.Confirm }}
        </button>
        <button class="btn warn-btn" id="router_ping_confirm_cancel" (click)="confirmPingMessage = !confirmPingMessage">
          {{ language.Cancel }}
        </button>
      </div>
    </div>
    <div class="py-3 alert alert-danger" *ngIf="isModalError">
      <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
      <button type="button" id="close-error-btn" class="close" data-dismiss="alert" aria-label="Close"
        (click)="isModalError = !isModalError">
        <span></span>
      </button>
      <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
    </div>
    <div class="modal-body notes-modal-body Ping-content-info">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <form>
        <p class="mt-1"></p>

        <div class="mb-3 dd-ref"
          *ngIf="metaData?.SplitWan?.supported || (!objectExistence(this.metaData?.SplitWan) && deviceSelected?.modelName && deviceSelected?.modelName.indexOf('GS') != 0)">
          <p class="listdata mb0">
            {{ language.WAN_Connection }}
            <span></span>
          </p>

          <div class="custom-selectbox">
            <ng-select id="group" [items]="dataObj?.pingTracerouteDropData" bindLabel="label" [multiple]="false"
              placeholder="" [(ngModel)]="groupSelected" [ngModelOptions]="{ standalone: true }" [clearable]="false"
              [searchable]="false">
            </ng-select>
          </div>
        </div>
        <div class="mb-3 dd-ref">
          <p class="listdata mb0">
            {{ language.Host_IP_Address }}
            <span class="error">*</span>
          </p>
          <form>
            <div class="ccl-form">
              <input type="text" class="form-control" id="pingTracerouteId" (keyup)="pingTracerouteChange($event)"
                aria-describedby="emailHelp" placeholder="" [(ngModel)]="ipAddress"
                [ngModelOptions]="{ standalone: true }" />
              <small id="PTValidationMessage" class="PTValidationMessage"></small>
            </div>
          </form>
          <!-- <div class="dropdown-button custom-dropdown-btn" ngbDropdown>
          <div class="mr-2" id="dropdownPeriod" ngbDropdownToggle aria-haspopup="true" aria-expanded="false">
            <p class="listdata mb0"> IP Address
              <span></span>
            </p>
          </div>

          <div ngbDropdownMenu aria-labelledby="dropdownPeriod">
            <button ngbDropdownItem class="greyaa">168.2.34.12</button>
            <button ngbDropdownItem class="greyaa">168.2.34.12</button>
            <button ngbDropdownItem class="greyaa">168.2.34.12</button>
          </div>
        </div> -->
        </div>

        <div class="add-bnt">
          <button type="button" class="btn btn-primary br-26 b-none" id="PTSubmitId" disabled=""
            (click)="submitPingTraceRoute(pingComplete, 'ping', true)">
            {{ language.Start_ping }}
          </button>
          <!--<button type="button" id="router_ping_cancel" class="btn-sm btn-default greyaa ml-2 br-26 transparant"
            (click)="modal.close('Save click')">{{language.Cancel}}</button>-->
        </div>
      </form>
    </div>
  </ng-template>

  <ng-template #pingComplete id="pingComplete" let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title modal-title mx-3" id="ping-complete-Modal-label">
        {{ language.Ping }}
      </div>
      <button type="button" id="close-modal-btn" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.close('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div class="modal-body notes-modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <form *ngIf="pingTraceRouteDetails" id="router_ping_form" class="Ping-content-info">
        <div class="result-channel">
          <p>
            {{ language.Last_Ping_Result
            }}{{
            pingTraceRouteDetails?.CompleteTime
            | date: "MM/dd/yyyy, hh:mm:ssa"
            }}
          </p>
          <ul class="total-result">
            <li>
              <div class="total-name">
                {{ language.host }}
              </div>
              {{ pingTraceRouteDetails?.Host }}
            </li>
            <li>
              <div class="total-name">
                {{ language.Success }}
              </div>
              {{ pingTraceRouteDetails?.SuccessCount }}
            </li>
            <li>
              <div class="total-name">
                {{ language.Failure }}
              </div>
              {{ pingTraceRouteDetails?.FailureCount }}
            </li>
            <li>
              <div class="total-name">
                {{ language.Min_Response_Time }}
              </div>
              {{ pingTraceRouteDetails?.MinimumResponseTime }}ms
            </li>
            <li>
              <div class="total-name">
                {{ language.Avg_Response_Time }}
              </div>
              {{ pingTraceRouteDetails?.AverageResponseTime }}ms
            </li>
            <li>
              <div class="total-name">
                {{ language.Max_Response_Time }}
              </div>
              {{ pingTraceRouteDetails?.MaximumResponseTime }}ms
            </li>
          </ul>
        </div>
        <div class="add-bnt">
          <button type="button" id="router_ping_back" class="btn btn-primary br-26 b-none" (click)="
              modal.close('Save click'); ipAddress = ''; openOutModal(pingModel)
            ">
            {{ language.back }}
          </button>
          <!--<button type="button" id="router_ping_cancel" class="btn-sm btn-default transparant ml-2 br-26 "
            (click)="modal.close('Save click')">{{language.Cancel}}</button>-->
        </div>
      </form>
    </div>
  </ng-template>

  <ng-template #tracerouteModel id="tracerouteModel" let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="tracerouteModel-label">{{language["Traceroute"]}} </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="confirmClose('Traceroute')">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="py-3 warning-msg" *ngIf="confirmTraceRouteMessage">
      <span class="warning-img"><img src="./assets/img/warning-icon.svg" /></span>
      <span>{{ language.Termination_Confirmation }}</span>
      <div class="btn-con-sec float-right">
        <button class="btn warn-btn mr-2" id="router-traceroute-confirm-Btn" (click)="closePing_Traceroute()">
          {{language.Confirm}}
        </button>
        <button class="btn warn-btn" id="router_traceroute_confirm_cancel"
          (click)="confirmTraceRouteMessage = !confirmTraceRouteMessage">
          {{language.Cancel}}
        </button>
      </div>
    </div>
    <div class="py-3 alert alert-danger" *ngIf="isModalError">
      <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
      <button type="button" class="close" id="router-traceroute-error-Btn" data-dismiss="alert" aria-label="Close"
        (click)="isModalError = !isModalError">
        <span></span>
      </button>
      <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
    </div>
    <div class="modal-body notes-modal-body traceroute-content-info">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <form id="router-traceroute-form">
        <p class="mt-1"></p>

        <div class="mb-3 dd-ref"
          *ngIf="metaData?.SplitWan?.supported || (!objectExistence(this.metaData?.SplitWan) && deviceSelected?.modelName && deviceSelected?.modelName.indexOf('GS') != 0)">
          <!-- <div class="form-group ccl-form "> -->
          <label class="col-form-label">{{ language.WAN_Connection }} </label>

          <div class="custom-selectbox">
            <ng-select id="group" [items]="dataObj?.pingTracerouteDropData" bindLabel="label" [multiple]="false"
              placeholder="" [(ngModel)]="groupSelected" [ngModelOptions]="{ standalone: true }" [clearable]="false"
              [searchable]="false">
            </ng-select>
          </div>
        </div>

        <div class="mb-3 dd-ref">
          <p class="listdata mb0">
            {{ language.Host_IP_Address }}
            <span class="error">*</span>
          </p>
          <form>
            <div class="ccl-form">
              <input type="text" class="form-control" id="pingTracerouteId" (keyup)="pingTracerouteChange($event)"
                aria-describedby="emailHelp" placeholder="" [(ngModel)]="ipAddress"
                [ngModelOptions]="{ standalone: true }" />
              <small id="PTValidationMessage" class="PTValidationMessage"></small>
            </div>
          </form>
        </div>

        <div class="add-bnt">
          <button type="button" class="btn btn-primary br-26 b-none" id="PTSubmitId" disabled="" (click)="
              submitPingTraceRoute(tracerouteComplete, 'traceroute', true)
            ">
            {{ language.Start_Traceroute }}
          </button>
          <!--<button type="button" id="router_traceroute_cancel" class="btn-sm btn-default transparant ml-2 br-26"
            (click)="modal.close('Save click')">{{language.Cancel}}</button>-->
        </div>
      </form>
    </div>
  </ng-template>

  <ng-template #tracerouteComplete id="router-traceroute-complete-model" let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="router-traceroute-complete-label">
        {{ language.Traceroute }}
      </div>
      <button type="button" id="model-close-btn" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.close('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div class="modal-body notes-modal-body traceroute-content-info">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <p class="" *ngIf="pingTraceRouteDetails">
        {{ language.Last_Traceroute_Result }} {{ pingTraceRouteDetails?.Host }}
        {{
        pingTraceRouteDetails?.CompleteTime
        | date: "MM/dd/yyyy, hh:mm:ssa"
        }}
      </p>

      <div class="event-details-table" *ngIf="pingTraceRouteDetails">
        <table datatable [dtOptions]="tableOptions" id="router_traceroute_table" class="row-border hover table-alter">
          <thead>
            <tr>
              <th>{{ language.Hops }}</th>
              <th>{{ language.Time }}</th>
              <th>{{ language.Host_IP_Address }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let teace of pingTraceRouteDetails?.Hops; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ teace.HopRTTimes }}ms</td>
              <td>{{ teace.HopHost }} ({{ teace.HopHostAddress }})</td>
            </tr>
            <!-- <tr>
            <td>2</td>
            <td>4.567ms</td>
            <td>139.130.4.5</td>
          </tr>
          <tr>
            <td>3</td>
            <td>4.567ms</td>
            <td>139.130.4.5</td>
          </tr> -->
          </tbody>
        </table>
      </div>
      <div class="add-bnt" *ngIf="pingTraceRouteDetails">
        <button type="button" class="btn btn-primary br-26 b-none" id="router_traceroute_back" (click)="
            modal.close('Save click');
            ipAddress = '';
            openOutModal(tracerouteModel)
          ">
          {{ language.back }}
        </button>
        <!--<button type="button" id="router_traceroute_cancel" class="btn-sm btn-default transparant ml-2 br-26 "
          (click)="modal.close('Save click')">{{language.Cancel}}</button>-->
      </div>
    </div>
  </ng-template>

  <ng-template #backup id="backup-model" let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="backup-model-label">
        {{ language.Backup_Restore }}
      </div>
      <button type="button" class="close" id="backup-model-close-btn" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="col-12 ccl-tabs">
        <ul class="nav nav-tabs sub-tab mb-2" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link" [ngClass]="{ active: dataObj.BRselected == 0 }"
              (click)="dataObj.BRselected = 0; BackupRestoreTab('Backup')" aria-selected="true">{{ language.Backup
              }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" [ngClass]="{ active: dataObj.BRselected == 1 }"
              (click)="dataObj.BRselected = 1; BackupRestoreTab('Restore')" aria-selected="false">{{ language.Restore
              }}</a>
          </li>
        </ul>
      </div>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" *ngIf="dataObj.BRselected == 0" id="backup">
          <div id="backup" class="tab-pane">
            <div class="col-12 pb-2">
              <form id="backup-model-form" class="w-100">
                <label for="exampleInputDescription1">{{
                  language.Description
                  }}</label>
                <textarea class="mb-2 text-area-style" name="backupDescription" rows="6"
                  [(ngModel)]="backupDescription"></textarea>
                <div class="add-bnt">
                  <button type="button" class="btn btn-primary br-26 b-none" id="router_backup_start_bttn"
                    [disabled]="!scopeFlag.backup" (click)="
                      modal.close('Save click'); openOutModal(startBackup)
                    ">
                    {{ language.Start_Backup }}
                  </button>
                  <button type="button" id="router_backup_cancel_bttn" class="btn-sm btn-default transparant ml-2 br-26"
                    (click)="modal.close('Save click')">
                    {{ language.Cancel }}
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="tab-pane fade show active" id="restore" *ngIf="dataObj.BRselected == 1">
          <div id="restore" class="tab-pane">
            <br />
            <div class="col-12 pb-2">
              <div class="row">
                <div class="col-12">
                  <p>{{ language.Select_Files_From }}</p>
                </div>
                <div class="col-4">
                  <input type="radio" id="Backup" name="Restore" value="Backup" [checked]="isFile == 'Backup'"
                    (change)="OptionFiles('Backup')" />
                  <label for="Backup">{{ language.Backup }}</label><br />
                </div>
                <div class="col-4">
                  <input type="radio" id="Repository" name="Restore" value="Repository"
                    [checked]="isFile == 'Repository'" (change)="OptionFiles('Repository')" />
                  <label for="Repository">{{ language.Repository }}</label>
                </div>
              </div>
            </div>
            <div class="col-12 pb-2">
              <div class="event-details-table">
                <table datatable [dtOptions]="tableOptions" id="router_backup_table"
                  class="row-border hover table-alter" *ngIf="isFile == 'Backup'">
                  <thead>
                    <tr>
                      <th>{{ language.Time }}</th>
                      <th>{{ language.users }}</th>
                      <th>{{ language.Description }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let list of backupList; let index = i">
                      <td class="w-30">
                        <div class="cor-col">
                          <input type="radio" id="list{{ list._id }}" name="list" value="{{ list._id }}"
                            (change)="RestoreChecked($event.target.value)" />
                          <label for="list{{ list._id }}">{{
                            list.uploadTime | date: "MM/dd/yy h:mm:ss a"
                            }}</label>
                        </div>
                      </td>
                      <td class="w-35">{{ list.csrUsername }}</td>
                      <td class="w-35 content-wrapper">
                        {{ list.description }}
                      </td>
                    </tr>
                  </tbody>
                </table>
                <table datatable [dtOptions]="tableOptions" id="router_repository_table"
                  class="row-border hover table-alter" *ngIf="isFile == 'Repository'">
                  <thead>
                    <tr>
                      <th>{{ language.Name }}</th>
                      <th>{{ language.Description }}</th>
                      <th>{{ language.Type }}</th>
                      <th>{{ language.Version }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let list of configurationList; let index = i">
                      <td class="w-30">
                        <div class="cor-col">
                          <input type="radio" id="list{{ list._id }}" name="list" value="{{ list._id }}"
                            (change)="RestoreChecked($event.target.value)" />
                          <label for="list{{ list._id }}">{{
                            list?.name
                            }}</label>
                        </div>
                      </td>
                      <td class="w-35">{{ list?.description }}</td>
                      <td class="w-35">{{ list?.type }}</td>
                      <td class="w-35 content-wrapper">{{ list?.version }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="add-bnt">
                <button type="button" class="btn btn-primary br-26 b-none" id="router_restore_bttn"
                  [disabled]="!scopeFlag.backup || !isRestore" (click)="
                    modal.close('Save click'); openOutModal(restoreSelected)
                  ">
                  {{ language.Restore_Selected }}
                </button>
                <button type="button" id="router_cancel_bttn" class="btn-sm btn-default transparant ml-2 br-26"
                  (click)="modal.close('Save click')">
                  {{ language.Cancel }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  <ng-template #startBackup let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Backup-Restore-label">
        {{ language.Backup_Restore }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="col-12 ccl-tabs">
        <p class="font-weight-bold">{{ language.Backup }}</p>
      </div>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="backup" role="tabpanel" aria-labelledby="backup-tab">
          <div class="loader" *ngIf="loader">
            <div class="d-flex justify-content-center">
              <div class="spinner-border text-primary">
                <span class="sr-only">{{ language.Loading }}</span>
              </div>
            </div>
          </div>
          <div id="backup" class="tab-pane">
            <div class="col-12 pb-2">
              <ng-container *ngFor="let list of isLocalTimeResponse">
                <p>
                  [{{ list.isTime }}]
                  <span class="">{{ language[list.isResponse] || list.isResponse }}</span>
                </p>
              </ng-container>
            </div>
          </div>
          <div class="add-bnt">
            <button type="button" id="router_backup_done" class="btn btn-primary br-26 b-none"
              (click)="modal.close('Save click')">
              {{ language.Done }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #restoreSelected let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Backup-Restore-label">
        {{ language.Backup_Restore }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="col-12 ccl-tabs">
        <p class="font-weight-bold">{{ language.Restore }}</p>
      </div>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="restore" role="tabpanel" aria-labelledby="restore-tab">
          <div id="restore" class="tab-pane">
            <div class="col-12 pb-2">
              <div class="custom-content px-2">
                <h4>
                  {{ language.Restore_Service }}
                </h4>
                <p>{{ language.Proceed_Confirmation }}</p>
              </div>
              <div class="add-bnt">
                <button type="button" class="btn btn-primary br-26 b-none" id="router_restore_confirm_bttn" (click)="
                    modal.close('Save click'); openOutModal(Confirmrestore)
                  ">
                  {{ language.Confirm }}
                </button>
                <button type="button" class="btn-sm btn-default transparant ml-2 br-26" id="router_restore_cancel_bttn"
                  (click)="modal.close('Save click')">
                  {{ language.Cancel }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #Confirmrestore let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Backup-Restore-label">
        {{ language.Backup_Restore }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="col-12 ccl-tabs">
        <p class="font-weight-bold">{{ language.Restore }}</p>
      </div>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="restore" role="tabpanel" aria-labelledby="restore-tab">
          <div class="loader" *ngIf="loader">
            <div class="d-flex justify-content-center">
              <div class="spinner-border text-primary">
                <span class="sr-only">{{ language.Loading }}</span>
              </div>
            </div>
          </div>
          <div id="restore" class="tab-pane">
            <div class="col-12 pb-2">
              <ng-container *ngFor="let list of isLocalTimeResponse">
                <p>
                  [{{ list.isTime }}]
                  <span class="font-weight-bold">{{ language[list.isResponse] || list.isResponse }}</span>
                </p>
              </ng-container>
              <div class="add-bnt">
                <button type="button" class="btn btn-primary br-26 b-none" id="router_restore_again_bttn" (click)="
                    modal.close('Save click'); openOutModal(Confirmrestore)
                  ">
                  {{ language.Restore_Again }}
                </button>
                <button type="button" id="router_restore_close_bttn" class="btn-sm btn-default transparant ml-2 br-26"
                  (click)="modal.close('Save click')">
                  {{ language.Close }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template class="col-md-12 custom-modal" #communicationModel let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Communication-label">
        {{ language.Communication_Logs }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="py-3 warning-msg" *ngIf="commLogStatus">
        <span class="error-img"><img src="./assets/img/ic_warning-36px.svg" /></span>
        <span>{{ language.No_Record_Found }}</span>
      </div>
      <div class="event-details-table commication-body" *ngIf="countReceived">
        <table datatable width="100%" [dtOptions]="dtOptions1" id="router_commlog_table"
          class="row-border hover table-alter router_commlog_table">
          <thead>
            <tr>
              <th>{{ language.Time }}</th>
              <th>{{ language.Type }}</th>
              <th>{{ language.Summary }}</th>
              <th></th>
            </tr>
          </thead>
          <tbody *ngFor="let item of CLTableData; let i = index">
            <tr id="{{ item._id }}" [attr.id]="'accordion_' + i">
              <td>
                {{ item.timestamp | date: "MM/dd/yyyy, hh:mm:ss a" }}
              </td>
              <td>{{ item.type }}</td>
              <td>
                <!--<span class="expand-data expand-out">
                  <svg height="20px" viewBox="0 0 512 512" width="20px" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="m437.019531 74.980469c-48.351562-48.351563-112.640625-74.980469-181.019531-74.980469s-132.667969 26.628906-181.019531 74.980469c-48.351563 48.351562-74.980469 112.640625-74.980469 181.019531s26.628906 132.667969 74.980469 181.019531c48.351562 48.351563 112.640625 74.980469 181.019531 74.980469s132.667969-26.628906 181.019531-74.980469c48.351563-48.351562 74.980469-112.640625 74.980469-181.019531s-26.628906-132.667969-74.980469-181.019531zm-181.019531 397.019531c-119.101562 0-216-96.898438-216-216s96.898438-216 216-216 216 96.898438 216 216-96.898438 216-216 216zm20-236.019531h90v40h-90v90h-40v-90h-90v-40h90v-90h40zm0 0" />
                  </svg>
                </span>-->
                <!-- <span class="expand-data expand-in">

                      <svg version="1.1"  width="20px" height="20px" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                      <g>
                        <g>
                          <path d="M256,0C114.853,0,0,114.833,0,256s114.853,256,256,256c141.167,0,256-114.833,256-256S397.147,0,256,0z M256,472.341
                            c-119.295,0-216.341-97.046-216.341-216.341S136.705,39.659,256,39.659S472.341,136.705,472.341,256S375.295,472.341,256,472.341z
                            "/>
                        </g>
                      </g>
                      <g>
                        <g>
                          <path d="M355.148,234.386H156.852c-10.946,0-19.83,8.884-19.83,19.83s8.884,19.83,19.83,19.83h198.296
                            c10.946,0,19.83-8.884,19.83-19.83S366.094,234.386,355.148,234.386z"/>
                        </g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      <g>
                      </g>
                      </svg>

                      </span> -->
                <div class="sum-desc" *ngFor="let summary of item.summary | keyvalue">
                  {{ summary.key }}:{{ summary.value }}
                </div>
              </td>
              <td class="accordion-toggle collapsed" id="router_cl_expand_bttn" (click)="commLogAccordian(i, $event)">
                <a class="expand-button"></a>
              </td>
            </tr>
            <tr class="hide-table-padding" *ngIf="dataObj.commLogExpanded.indexOf(i) > -1">
              <td colspan="4" [attr.id]="'collapseOne_' + i" class="in p-3">
                <div class="accordionData">
                  <div class="gnorewhitespace">
                    <pre>{{ formatXml(item.xmlText) }}</pre>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="add-bnt">
        <button type="button" class="btn btn-primary br-26 b-none" [disabled]="commLogStatus" id="router_cl_export_bttn"
          (click)="clExportLog()">
          {{ language.Export_To_File }}
        </button>
        <button type="button" class="btn-sm btn-default transparant ml-2 br-26" id="router_cl_close_bttn"
          (click)="modal.close('Save click')">
          {{ language.Close }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #exportDetails let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Communication-log-label">
        {{ language.Communication_Logs }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div class="modal-body">
      <div class="ccl-communication-logs commication-body">
        <table datatable [dtOptions]="tableOptions" class="row-border hover table-alter">
          <thead>
            <tr>
              <th>{{ language.Time }}</th>
              <th>{{ language.Type }}</th>
              <th>{{ language.Summary }}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="30">Nov 18, 2020 13:22:12</td>
              <td class="w-30">{{ language.Parameter_Response }}</td>
              <td class="w-40 sum-desc-sec expand-dec" (click)="modal.dismiss('Cross click'); communicationModelOpen()">
                <!-- <span class="expand-data expand-out">
                      <svg height="20px" viewBox="0 0 512 512" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="m437.019531 74.980469c-48.351562-48.351563-112.640625-74.980469-181.019531-74.980469s-132.667969 26.628906-181.019531 74.980469c-48.351563 48.351562-74.980469 112.640625-74.980469 181.019531s26.628906 132.667969 74.980469 181.019531c48.351562 48.351563 112.640625 74.980469 181.019531 74.980469s132.667969-26.628906 181.019531-74.980469c48.351563-48.351562 74.980469-112.640625 74.980469-181.019531s-26.628906-132.667969-74.980469-181.019531zm-181.019531 397.019531c-119.101562 0-216-96.898438-216-216s96.898438-216 216-216 216 96.898438 216 216-96.898438 216-216 216zm20-236.019531h90v40h-90v90h-40v-90h-90v-40h90v-90h40zm0 0"/></svg>
                    </span> -->
                <span class="expand-data expand-in" (click)="modal.close('Save click'); exportDetailsOpen()">
                  <svg version="1.1" width="20px" height="20px" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512"
                    style="enable-background: new 0 0 512 512" xml:space="preserve">
                    <g>
                      <g>
                        <path d="M256,0C114.853,0,0,114.833,0,256s114.853,256,256,256c141.167,0,256-114.833,256-256S397.147,0,256,0z M256,472.341
                          c-119.295,0-216.341-97.046-216.341-216.341S136.705,39.659,256,39.659S472.341,136.705,472.341,256S375.295,472.341,256,472.341z
                          " />
                      </g>
                    </g>
                    <g>
                      <g>
                        <path d="M355.148,234.386H156.852c-10.946,0-19.83,8.884-19.83,19.83s8.884,19.83,19.83,19.83h198.296
                          c10.946,0,19.83-8.884,19.83-19.83S366.094,234.386,355.148,234.386z" />
                      </g>
                    </g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                    <g></g>
                  </svg>
                </span>
                <div class="sum-desc">
                  InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more parameters)
                </div>
              </td>
            </tr>

            <tr>
              <td colspan="3">
                <p>
                  InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more
                  parameters)InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more
                  parameters)InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more
                  parameters)InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more
                  parameters)InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more
                  parameters)InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more
                  parameters)InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more parameters)
                  InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more parameters)
                  InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more parameters)
                  InternetGatewayDevice.X_000631_Device.WiFi.Radio.1.ChannelUtilization
                  : 30 ( and 2455 more parameters)
                </p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="add-bnt">
        <button type="button" class="btn btn-primary br-26 b-none"
          (click)="modal.close('Save click'); openOutModal(exported)">
          {{ language.Export_To_File }}
        </button>
        <button type="button" class="btn-sm btn-default transparant ml-2 br-26" (click)="modal.close('Save click')">
          {{ language.Cancel }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #exported let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Factory-Reset-Label">
        {{ language.Factory_Reset }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="reset-confirm">
        <p>[11/18/2020 09:34:09 AM] {{ language.Exporting_File }}</p>
        <p>[11/18/2020 09:34:09 AM] {{ language.File_Ready }}</p>
      </div>
      <div class="add-bnt">
        <button type="button" id="router_export_reset_bttn" class="btn-default primary px-3 px-3">
          {{ language.Reset }}
        </button>
        <button type="button" id="router_export_close_bttn" class="btn-default transparant px-3 px-3 m-2"
          (click)="closeModal()" data-dismiss="modal">
          {{ language.Close }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #deviceLogs let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Device-Logs-label">{{ language.Device_Logs }}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="confirmCloseDeviceLog()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="py-3 warning-msg" *ngIf="confirmMessage">
      <span class="error-img"><img src="./assets/img/ic_warning-36px.svg" /></span>
      <span>{{ language.Termination_Confirmation }}</span>
      <div class="btn-con-sec float-right">
        <button class="btn warn-btn mr-2" id="deletePFBtn" (click)="modal.close('Save click')">
          {{language.Confirm}}
        </button>
        <button class="btn warn-btn" id="router_devicelog_cancel_bttn" (click)="confirmMessage = !confirmMessage">
          {{language.Cancel}}
        </button>
      </div>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <p>
        [{{ now | date: "MM/dd/yyyy, hh:mm:ss a" }}]
        {{ language.Retrieving_Logs }}
      </p>
      <p *ngIf="!dataObj.retrievedLog && !modalLoader">
        [{{ dataObj.retrievedDate | date: "MM/dd/yyyy, hh:mm:ss a" }}]
        {{ dataObj?.warningMessage }}
      </p>
      <p *ngIf="dataObj.retrievedLog && !modalLoader">
        [{{ dataObj.retrievedDate | date: "MM/dd/yyyy, hh:mm:ss a" }}]
        {{ language.Retrieve_Successfully }}
      </p>
      <button *ngIf="!dataObj.deviceLogError && !modalLoader" id="router_devicelog_download_bttn" type="button"
        class="btn btn-primary br-26 b-none" (click)="downloadLog()">
        {{language['Download Log']}}
      </button>
      <div class="add-bnt">
        <button type="button" class="btn btn-primary br-26 b-none" [disabled]="modalLoader"
          id="router_devicelog_retlog_bttn" (click)="
            reteriveDeviceLog();
            modal.close('Save click');
            openOutModal(deviceLogs)
          ">
          {{ language.Retrieve_Log }}
        </button>
        <!--<button type="button" class="btn btn-primary br-26 ml-2" id="router_devicelog_cancel_bttn"
            (click)="modal.close('Save click')">{{language.Cancel}}</button>-->
      </div>
    </div>
  </ng-template>

  <ng-template #reboot let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title" id="RebootLabel">{{ language.Reboot }}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div class="modal-body">
      <p class="">
        {{ language.Reboot_Warning }}
      </p>
      <p class="mb-2 f-size-14">
        {{ language.Reboot_Confirmation }}
      </p>
      <div class="add-bnt">
        <button #rebootDeviceBtn id="auto_trigger" type="button" id="router_reboot_confirm_bttn"
          class="btn btn-primary br-26 b-none" (click)="
            modal.close('Save click');
            openOutModal(rebootStatus);
            rebootDevice()
          ">
          {{ language.Confirm }}
        </button>
        <button type="button" class="btn-sm btn-default transparant ml-2 br-26" id="router_reboot_cancel_bttn"
          (click)="modal.close('Save click')">
          {{ language.Cancel }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #rebootAgain let-modal>
    <div class="modal-header">
      <div class="ccl-Secondary-title" id="RebootLabel">{{ language.Reboot }}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div class="modal-body">
      <div class="pb-2">
        <p class="mb-3 f-size-14">
          [11/18/2020 09:35:25 AM] {{ language.Starting_Reboot }}
        </p>
        <p>[11/18/2020 09:35:25 AM] {{ language.Reboot_Succeeded }}</p>

        <div class="add-bnt">
          <button type="button" class="btn btn-primary br-26 b-none"
            (click)="modal.close('Save click'); openOutModal(rebootAgain)">
            {{ language.Reboot_Again }}
          </button>
          <button type="button" class="btn-sm btn-default ml-2 br-26 transparant" (click)="modal.close('Save click')">
            {{ language.Cancel }}
          </button>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- // DeviceModal -->

  <ng-template #devicelogsModal let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Device-Logs-Label">{{ language.Device_Logs }}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body device-logs-content-info">
      <div class="custom-body">
        <p class="">
          {{ language.Log_Timing_Message }}
        </p>
      </div>
      <div class="add-bnt">
        <button type="button" class="btn-default primary px-3 px-3" id="router_devicelog_retreive_bttn" (click)="
            reteriveDeviceLog();
            modal.close('Save click');
            openOutModal(deviceLogs)
          ">
          {{ language.Retrieve_Log }}
        </button>
        <button type="button" class="btn-default transparant px-3 px-3 m-2" id="router_devicelog_close_bttn"
          (click)="closeModal()" data-dismiss="modal">
          {{ language.Close }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- // DataModal -->

  <ng-template #dataModal let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="Data-label">{{ language.Data_Model }}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="w-100 alert alert alert-note fade show" *ngIf="dataObj?.dataModelRanBefore">
        <span class="warning-img"><img src="./assets/img/ic_info.svg" /></span>
        <button type="button" id="router_dm_close_load_bttn" class="close" (click)="dataObj.dataModelRanBefore = ''">
          <img src="assets/img/ic_close-44px.svg">
        </button>
        <div class="d-inline-flex">{{ dataObj?.dataModelRanBefore }}</div>
      </div>
      <div class="w-100 alert alert alert-danger fade show" *ngIf="isModalError">
        <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
        <button type="button" id="router_dm_loaddata_bttn" class="btn-default primary mr-4 float-right"
          *ngIf="dataObj.dataModalLoadDevice" (click)="loadDataModel()">
          {{ language.Device_Data }}
        </button>
        <button type="button" id="router_dm_close_load_bttn" class="close" (click)="isModalError = false">
          &times;
        </button>
        <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
      </div>
      <div class="w-100 alert alert alert-note fade show" *ngIf="isModalSuccess">
        <span class="warning-img"><img src="./assets/img/ic_info.svg" /></span>
        <button type="button" id="router_dm_loaddata_bttn" class="btn-default primary mr-4 float-right"
          *ngIf="dataObj.dataModalLoadDevice" (click)="loadDataModel()">
          {{ language.Device_Data }}
        </button>
        <!-- <button type="button" id="router_dm_close_load_bttn" class="close" (click)="isModalSuccess = false">
          <span></span>
        </button> -->
        <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
      </div>
      <div class="img-content">
        <!-- <img src="assets/img/model-code.png"> -->
        <div id="jsonTree"></div>
      </div>
      <div class="add-bnt">
        <button type="button" class="btn-default primary px-3 px-3 d-none" id="createProfile"
          *ngIf="scopeFlag.dataModal" (click)="createProfile(); closeModal()">
          {{language['Create Profile with Selected Parameters']}}
        </button>
        <button type="button" class="btn-default primary px-3 px-3 ml-2" id="dataModelReload"
          (click)="initDataModel(false)">
          {{ language.Reload }}
        </button>
        <button type="button" class="btn-default transparant px-3 px-3 m-2" id="router_dm_close" (click)="closeModal()"
          data-dismiss="modal">
          {{ language.Close }}
        </button>
      </div>
    </div>
  </ng-template>

  <!-- // Event History -->

  <ng-template #eventhistoryModal let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title" id="Event-History-Label">{{ language.Event_History }}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="event-history" *ngIf="countReceived">
        <table id="eventTable" width="100%" class="row-border hover table-alter" datatable
          [dtOptions]="dtEventHistoryOptions">
          <thead>
            <tr>
              <th class="event-history-head">{{ language.Time }}</th>
              <th class="event-history-head">{{ language.Type }}</th>
              <th class="event-history-head">{{ language.Severity }}</th>
              <th class="event-history-head">{{ language.Source }}</th>
              <th class="event-history-head">{{ language.Details }}</th>
            </tr>
          </thead>
          <tbody *ngIf="eventTableData?.length != 0">
            <tr id="{{ item._id }}" *ngFor="let item of eventTableData">
              <td class="w-25">
                {{ item.timestamp | date: "MM/dd/yyyy, h:mm:ss a" }}
              </td>
              <td class="w-25">{{ item.type }}</td>
              <td class="w-10">{{ item.severity }}</td>
              <td class="w-10">{{ item.source }}</td>
              <!--<td class="w-30">{{item.details}}</td>-->
              <td class="w-30">
                <!--<ng-template *ngIf="(details.value!='' && details.value!=undefined)">{{details.key}}:{{details.value}}</ng-template> -->

                <p class="p-0 m-0" *ngFor="let details of item.details | keyvalue">
                  {{ details.key }} : {{ details.value }}
                </p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="add-bnt">
        <button type="button" class="btn-default primary px-3 px-3" id="router_eventhis_referesh_bttn"
          (click)="refereshData()">
          {{ language.Refresh_list }}
        </button>
        <button type="button" class="btn-default primary px-3 px-3 m-2" id="router_eventhis_close_bttn"
          (click)="closeModal()" data-dismiss="modal">
          {{ language.Close }}
        </button>
      </div>
    </div>
    <!-- <div class="add-bnt">
      <button type="button" class="btn-default primary px-3 px-3" (click)="refereshData();">Refresh list</button>
      <button type="button" class="btn-default transparant px-3 px-3 m-2" (click)="closeModal()"
        data-dismiss="modal">Close</button>
    </div> -->
  </ng-template>

  <!-- // factory Reset  -->

  <ng-template #factoryresetModal let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="modal-title ml-2" id="Factory-Reset-Label">
        {{ language.Factory_Reset }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="custom-content px-2">

        {{ language.notReachableFactoryReset }}

        <b *ngIf="routerNotReachable">{{ language.factoryResetSubConfirm }}</b>
        <p>{{ language.confirmation }}</p>
      </div>

      <button type="button" [disabled]="!scopeFlag.factoryReset" id="router_facres_confirm_bttn"
        class="btn-default primary px-3 px-3" (click)="closeModal(); openOutModal(resetconfirmModal); factoryReset()">
        {{ language.Confirm }}
      </button>
      <button type="button" id="router_facres_close_bttn" class="btn-default transparant px-3 px-3 m-2"
        (click)="closeModal()" data-dismiss="modal">
        {{ language.Cancel }}
      </button>
    </div>
  </ng-template>

  <ng-template #resetconfirmModal let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="modal-title ml-2" id="Factory-Reset-Label">{{language['Factory Reset']}}</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div id="backup" class="tab-pane">
        <div class="col-12 pb-2">
          <ng-container *ngFor="let list of completionStatus">
            <p>
              {{ list.isTime ? ('[' + list.isTime + ']') : '' }}
              <span class="font-weight-bold">{{ language[list.isResponse] || list.isResponse }}</span>
            </p>
          </ng-container>
        </div>
      </div>
      <div class="add-bnt">
        <!-- <button type="button" class="btn-default primary px-3 px-3">Reset</button> -->
        <button type="button" id="router_facres_done_bttn" class="btn-default primary px-3 px-3" (click)="closeModal()"
          data-dismiss="modal">
          {{ language.Done }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #dhcpserverModal let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="dhcp-modal-label">{{language['DHCP']}}</div>
      <button type="button" id="dhcp-close-modal-btn" class="close" data-dismiss="modal" aria-label="Close"
        (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="py-3 alert alert-danger" *ngIf="isModalError">
        <button type="button" class="close" id="router-traceroute-error-Btn" data-dismiss="alert" aria-label="Close"
          (click)="isModalError = !isModalError">
          <span></span>
        </button>
        <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
      </div>
      <form #myForm="ngForm" (ngSubmit)="myForm.form.valid && updateDhcp()" novalidate [ipOutside]="[
          'deviceIpAddress',
          'beginningIpAddress',
          'endingIpAddress'
        ]" [ipSameNetwork]="[
          'deviceIpAddress',
          'beginningIpAddress',
          'endingIpAddress',
          'subnetMaskIp'
        ]" [ipNetworkBroadcast]="['deviceIpAddress', 'subnetMaskIp']" [minNetworkBroadcast]="[
          'deviceIpAddress',
          'beginningIpAddress',
          'subnetMaskIp'
        ]" [maxNetworkBroadcast]="[
          'deviceIpAddress',
          'endingIpAddress',
          'subnetMaskIp'
        ]" [ipAddressBefore]="['beginningIpAddress', 'endingIpAddress']" class="form-group ccl-form">
        <div class="row">
          <div class="col-md-11 support-key-value dhcp-inputtable pl-4">
            <table class="pop-table-blocks" id="dhcp-form-table">
              <tbody>
                <tr>
                  <th scope="row">{{ language.DHCP_Server }}</th>
                  <td>
                    <!-- <div class="disabled"> ON </div> -->

                    <div class="toggle-swtbtn checkbox switcher mb-2">
                      <label for="dhcpCheckbox">
                        <input type="checkbox" id="dhcpCheckbox" [disabled]="
                            metaData?.DHCP?.DHCPServerEnable?.writable ==
                              false || !metaData?.DHCP?.DHCPServerEnable
                          " checked name="dhcpServer" #dhcpServer="ngModel" [(ngModel)]="dhcpModel.dhcpServer" />
                        <span><small></small></span>
                      </label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Host_Name }} <span class="error">*</span></th>
                  <td>
                    <!-- <div class="disabled"> DeviceDHCP </div> -->
                    <div class="ccl-form" [ngClass]="[
                        (hostname.errors?.required ||
                          hostname.errors?.pattern ||
                          hostname.errors?.customMax ||
                          hostname.errors?.customMin) &&
                        (myForm.submitted || hostname.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" class="form-control" id="hostname" name="hostname" #hostname="ngModel"
                        pattern="^([\w\-\.]*)$" customMin="1" customMax="32" [(ngModel)]="dhcpModel.hostName" required
                        aria-required="true" aria-describedby="hostname-error" aria-invalid="true"
                        autocomplete="new-password" [disabled]="
                          metaData?.DHCP?.HostName?.writable == false ||
                          !metaData?.DHCP?.HostName
                        " />
                      <label *ngIf="
                          (hostname.touched || myForm.submitted) &&
                          hostname.errors?.required
                        " id="hostname-error">
                        {{ language["This field is required"] }}</label>
                      <label *ngIf="hostname.touched && hostname.errors?.pattern" id="hostname-error">
                        {{language.support_router_validation1}}</label>
                      <label *ngIf="
                          hostname.touched &&
                          (hostname.errors?.customMax ||
                            hostname.errors?.customMin)
                        " id="hostname-error">
                        {{ language.Number_Hint_1_32 }}</label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Domain_Name }} <span class="error">*</span></th>
                  <td>
                    <!-- <div class="disabled"> Home </div> -->
                    <div class="ccl-form" [ngClass]="[
                        (domainName.errors?.required ||
                          domainName.errors?.pattern ||
                          domainName.errors?.customMax ||
                          domainName.errors?.customMin) &&
                        (myForm.submitted || domainName.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="test" class="form-control" id="domainName" name="domainName" #domainName="ngModel"
                        pattern="^([\w\-\.]*)$" customMin="1" customMax="32" [(ngModel)]="dhcpModel.domainName" required
                        aria-required="true" aria-describedby="domainName-error" aria-invalid="true"
                        autocomplete="new-password" [disabled]="
                          metaData?.DHCP?.DomainName?.writable == false ||
                          !metaData?.DHCP?.DomainName
                        " />
                      <label *ngIf="
                          (domainName.touched || myForm.submitted) &&
                          domainName.errors?.required
                        " id="domainName-error">
                        {{ language["This field is required"] }}</label>
                      <label *ngIf="domainName.touched && domainName.errors?.pattern" id="domainName-error">
                        {{language.support_router_validation2}}</label>
                      <label *ngIf="
                          domainName.touched &&
                          (domainName.errors?.customMax ||
                            domainName.errors?.customMin)
                        " id="domainName-error">
                        {{ language.Number_Hint_1_32 }}</label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Device_IP_Address }} <span class="error">*</span></th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (deviceIpAddress.errors?.required ||
                          deviceIpAddress.errors?.pattern ||
                          (deviceIpAddress.errors?.ipIsOutside &&
                            focusedDeviceIp) ||
                          deviceIpAddress.errors?.IpNetworkBroadcast ||
                          deviceIpAddress.errors?.maxNetworkBroadcast ||
                          deviceIpAddress.errors?.minNetworkBroadcast ||
                          deviceIpAddress.errors?.minNetworkBroadcast ||
                          deviceIpAddress.errors?.sameIpNetwork) &&
                        (myForm.submitted || deviceIpAddress.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" class="form-control" id="deviceIpAddress" name="deviceIpAddress"
                        #deviceIpAddress="ngModel" name="deviceIpAddress" (focus)="onFocusDeviceIP()"
                        [(ngModel)]="dhcpModel.deviceIpAddress" required aria-required="true"
                        aria-describedby="deviceIpAddress-error" aria-invalid="true" autocomplete="new-password"
                        [pattern]="ipPattern" [disabled]="
                          metaData?.DHCP?.DeviceIPAddress?.writable == false ||
                          !metaData?.DHCP?.DeviceIPAddress
                        " />
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.required
                        " id="deviceIpAddress-error">
                        {{ language["This field is required"] }}</label>
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.pattern
                        " id="deviceIpAddress-error">
                        {{ language["Please enter a valid IP address"] }}</label>
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.ipIsOutside &&
                          focusedDeviceIp
                        " id="deviceIpAddress-error">
                        {{language.support_router_validation3}}</label>
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.IpNetworkBroadcast
                        " id="deviceIpAddress-error">
                        {{language.support_router_validation4}}</label>
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.maxNetworkBroadcast
                        " id="deviceIpAddress-error">
                        {{language.support_router_validation5}}</label>
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.minNetworkBroadcast
                        " id="deviceIpAddress-error">
                        {{language.support_router_validation6}}</label>
                      <label *ngIf="
                          (deviceIpAddress.touched || myForm.submitted) &&
                          deviceIpAddress.errors?.sameIpNetwork
                        " id="deviceIpAddress-error">
                        {{language.support_router_validation7}} </label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Beginning_IP_Address }} <span class="error">*</span></th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (beginningIpAddress.errors?.required ||
                          beginningIpAddress.errors?.pattern ||
                          (beginningIpAddress.errors?.ipIsOutside &&
                            focusedBeginingIp) ||
                          (beginningIpAddress.errors?.ipBeforeValidate &&
                            focusedBeginingIp) ||
                          (beginningIpAddress.errors?.ipBeforeValidate &&
                            focusedDeviceIp) ||
                          beginningIpAddress.errors?.minNetworkBroadcast ||
                          beginningIpAddress.errors?.sameIpNetwork) &&
                        (myForm.submitted || beginningIpAddress.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" class="form-control" id="beginningIpAddress" name="beginningIpAddress"
                        #beginningIpAddress="ngModel" name="beginningIpAddress" (focus)="onFocusBeginningIP()"
                        [(ngModel)]="dhcpModel.beginningIpAddress" required aria-required="true"
                        aria-describedby="beginningIpAddress-error" aria-invalid="true" autocomplete="new-password"
                        [pattern]="ipPattern" [disabled]="
                          metaData?.DHCP?.BeginningIPAddress?.writable ==
                            false || !metaData?.DHCP?.BeginningIPAddress
                        " />
                      <label *ngIf="
                          (beginningIpAddress.touched || myForm.submitted) &&
                          beginningIpAddress.errors?.required
                        " id="beginningIpAddress-error">
                        {{ language["This field is required"] }}</label>
                      <label *ngIf="
                          (beginningIpAddress.touched || myForm.submitted) &&
                          beginningIpAddress.errors?.pattern
                        " id="beginningIpAddress-error">
                        {{ language["Please enter a valid IP address"] }}</label>
                      <label *ngIf="
                          (beginningIpAddress.touched || myForm.submitted) &&
                          beginningIpAddress.errors?.ipIsOutside &&
                          focusedBeginingIp
                        " id="beginningIpAddress-error">
                        {{language.support_router_validation3}} </label>
                      <label *ngIf="
                          (beginningIpAddress.touched || myForm.submitted) &&
                          ((beginningIpAddress.errors?.ipBeforeValidate &&
                            focusedBeginingIp) ||
                            (beginningIpAddress.errors?.ipBeforeValidate &&
                              focusedDeviceIp))
                        " id="beginningIpAddress-error">
                        {{language.support_router_validation8}} </label>
                      <label *ngIf="
                          (beginningIpAddress.touched || myForm.submitted) &&
                          beginningIpAddress.errors?.minNetworkBroadcast
                        " id="beginningIpAddress-error">
                        {{language.support_router_validation6}}</label>
                      <label *ngIf="
                          (beginningIpAddress.touched || myForm.submitted) &&
                          beginningIpAddress.errors?.sameIpNetwork
                        " id="beginningIpAddress-error">
                        {{language.support_router_validation7}}</label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Ending_IP_Address }} <span class="error">*</span></th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (endingIpAddress.errors?.required ||
                          endingIpAddress.errors?.pattern ||
                          (endingIpAddress.errors?.ipBeforeValidate &&
                            focusedEndingIp) ||
                          (endingIpAddress.errors?.ipIsOutside &&
                            focusedEndingIp) ||
                          endingIpAddress.errors?.maxNetworkBroadcast ||
                          endingIpAddress.errors?.sameIpNetwork) &&
                        (myForm.submitted || endingIpAddress.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" class="form-control" id="endingIpAddress" name="endingIpAddress"
                        #endingIpAddress="ngModel" required aria-required="true"
                        aria-describedby="endingIpAddress-error" aria-invalid="true" autocomplete="new-password"
                        [pattern]="ipPattern" (focus)="onFocusEndingIP()" [(ngModel)]="dhcpModel.endingIpAddress"
                        [disabled]="
                          metaData?.DHCP?.EndingIPAddress?.writable == false ||
                          !metaData?.DHCP?.EndingIPAddress
                        " />
                      <label *ngIf="
                          (endingIpAddress.touched || myForm.submitted) &&
                          endingIpAddress.errors?.required
                        " id="endingIpAddress-error">
                        {{ language["This field is required"] }}</label>
                      <label *ngIf="
                          (endingIpAddress.touched || myForm.submitted) &&
                          endingIpAddress.errors?.pattern
                        " id="endingIpAddress-error">
                        {{ language["Please enter a valid IP address"] }}</label>
                      <label *ngIf="
                          (endingIpAddress.touched || myForm.submitted) &&
                          endingIpAddress.errors?.ipIsOutside &&
                          focusedEndingIp
                        " id="endingIpAddress-error">
                        {{language.support_router_validation3}}</label>
                      <label *ngIf="
                          (endingIpAddress.touched || myForm.submitted) &&
                          endingIpAddress.errors?.ipBeforeValidate &&
                          focusedEndingIp
                        " id="endingIpAddress-error">
                        {{language.support_router_validation8}}</label>
                      <label *ngIf="
                          (endingIpAddress.touched || myForm.submitted) &&
                          endingIpAddress.errors?.maxNetworkBroadcast
                        " id="endingIpAddress-error">
                        {{language.support_router_validation5}}</label>
                      <label *ngIf="
                          (endingIpAddress.touched || myForm.submitted) &&
                          endingIpAddress.errors?.sameIpNetwork
                        " id="endingIpAddress-error">
                        {{language.support_router_validation7}}</label>
                    </div>
                  </td>
                </tr>

                <tr>
                  <th scope="row">{{ language.Subnet_Mask }} <span class="error">*</span></th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (subnetMaskIp.errors?.required ||
                          subnetMaskIp.errors?.pattern ||
                          subnetMaskIp.errors?.IpNetworkBroadcast ||
                          subnetMaskIp.errors?.maxNetworkBroadcast ||
                          subnetMaskIp.errors?.minNetworkBroadcast ||
                          subnetMaskIp.errors?.sameIpNetwork) &&
                        (myForm.submitted || subnetMaskIp.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" class="form-control" id="subnetMaskIp" name="subnetMaskIp"
                        [(ngModel)]="dhcpModel.subnetMask" #subnetMaskIp="ngModel" required aria-required="true"
                        aria-describedby="subnetMaskIp-error" aria-invalid="true" autocomplete="new-password"
                        [pattern]="ipPattern" [disabled]="
                          metaData?.DHCP?.SubnetMask?.writable == false ||
                          !metaData?.DHCP?.SubnetMask
                        " />
                      <label *ngIf="
                          (subnetMaskIp.touched || myForm.submitted) &&
                          subnetMaskIp.errors?.required
                        " id="subnetMaskIp-error">
                        {{ language["This field is required"] }}</label>
                      <label *ngIf="
                          (subnetMaskIp.touched || myForm.submitted) &&
                          subnetMaskIp.errors?.pattern
                        " id="subnetMaskIp-error">
                        {{language.New_Profile_Validation8}}</label>
                      <label *ngIf="
                          (subnetMaskIp.touched || myForm.submitted) &&
                          subnetMaskIp.errors?.IpNetworkBroadcast
                        " id="subnetMaskIp-error">
                        {{language.support_router_validation4}}</label>
                      <label *ngIf="
                          (subnetMaskIp.touched || myForm.submitted) &&
                          subnetMaskIp.errors?.maxNetworkBroadcast
                        " id="subnetMaskIp-error">
                        {{language.support_router_validation5}}</label>
                      <label *ngIf="
                          (subnetMaskIp.touched || myForm.submitted) &&
                          subnetMaskIp.errors?.minNetworkBroadcast
                        " id="subnetMaskIp-error">
                        {{language.support_router_validation6}}</label>
                      <label *ngIf="
                          (subnetMaskIp.touched || myForm.submitted) &&
                          subnetMaskIp.errors?.sameIpNetwork
                        " id="subnetMaskIp-error">
                        {{language.support_router_validation7}}</label>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.DHCP_Lease_Time }} <span class="error">*</span></th>
                  <td>
                    <!-- <div class="disabled"> 1 Days, 0 Hours, 0 Minutes </div> -->
                    <div class="row ">
                      <div class="col-4" [ngClass]="[
                          (DHCPLeaseDay.errors?.required ||
                            DHCPLeaseDay.errors?.customNumMin ||
                            DHCPLeaseDay.errors?.pattern ||
                            DHCPLeaseDay.errors?.custonNeg ||
                            DHCPLeaseDay.errors?.customNumMax) &&
                          (myForm.submitted || DHCPLeaseDay.touched)
                            ? ' errorMessage'
                            : ''
                        ]">
                        <input type="text" pattern="^[0-9]+$" class="form-control" id="DHCPLeaseDay" name="DHCPLeaseDay"
                          [(ngModel)]="dhcpModel.days" customNumMin="0" customNeg customNumMax="365" required
                          aria-required="true" aria-describedby="dailyPattern-error" aria-invalid="true"
                          #DHCPLeaseDay="ngModel" [disabled]="
                            metaData?.DHCP?.DHCPLeaseTime?.writable == false ||
                            !metaData?.DHCP?.DHCPLeaseTime
                          " />
                        <span class="black-clr d-block">{{ language.days }}</span>
                        <label *ngIf="
                            (DHCPLeaseDay.touched || myForm.submitted) &&
                            DHCPLeaseDay.errors?.required
                          " id="DHCPLeaseDay-error">
                          {{ language["This field is required"] }}</label>
                        <label *ngIf="
                            DHCPLeaseDay.touched &&
                            (DHCPLeaseDay.errors?.pattern ||
                              DHCPLeaseDay.errors?.custonNeg)
                          " id="DHCPLeaseDay-error">
                          {{language.Only_Digits}}.</label>
                        <label *ngIf="
                            DHCPLeaseDay.touched &&
                            (DHCPLeaseDay.errors?.customNumMax ||
                              DHCPLeaseDay.errors?.customNumMin)
                          " id="DHCPLeaseDay-error">
                          {{ language.Number_Hint_0_365 }}</label>
                      </div>
                      <div class="col-4" [ngClass]="[
                          (DHCPLeaseHours.errors?.required ||
                            DHCPLeaseHours.errors?.customNumMin ||
                            DHCPLeaseHours.errors?.pattern ||
                            DHCPLeaseHours.errors?.custonNeg ||
                            DHCPLeaseHours.errors?.customNumMax) &&
                          (myForm.submitted || DHCPLeaseHours.touched)
                            ? ' errorMessage'
                            : ''
                        ]">
                        <input type="text" class="form-control" pattern="^[0-9]+$" placeholder="" class=""
                          id="DHCPLeaseHours" name="DHCPLeaseHours" [(ngModel)]="dhcpModel.hours" customNumMin="0"
                          customNumMax="23" customNeg required aria-required="true"
                          aria-describedby="DHCPLeaseHours-error" aria-invalid="true" #DHCPLeaseHours="ngModel"
                          [disabled]="
                            metaData?.DHCP?.DHCPLeaseTime?.writable == false ||
                            !metaData?.DHCP?.DHCPLeaseTime
                          " />
                        <span class="black-clr d-block">{{ language.hours }}</span>
                        <label *ngIf="
                            (DHCPLeaseHours.touched || myForm.submitted) &&
                            DHCPLeaseHours.errors?.required
                          " id="DHCPLeaseHours-error">
                          {{ language["This field is required"] }}</label>
                        <label *ngIf="
                            (DHCPLeaseHours.errors?.pattern ||
                              DHCPLeaseHours.errors?.custonNeg) &&
                            DHCPLeaseHours.touched
                          " id="DHCPLeaseHours-error">
                          {{language.Only_Digits}}.</label>
                        <label *ngIf="
                            DHCPLeaseHours.touched &&
                            (DHCPLeaseHours.errors?.customNumMax ||
                              DHCPLeaseHours.errors?.customNumMin)
                          " id="DHCPLeaseHours-error">
                          {{ language.Number_Hint_0_23 }}</label>
                      </div>
                      <div class="col-4" [ngClass]="[
                          (DHCPLeaseMinutes.errors?.required ||
                            DHCPLeaseMinutes.errors?.customNumMin ||
                            DHCPLeaseMinutes.errors?.pattern ||
                            DHCPLeaseMinutes.errors?.custonNeg ||
                            DHCPLeaseMinutes.errors?.customNumMax) &&
                          (myForm.submitted || DHCPLeaseMinutes.touched)
                            ? ' errorMessage'
                            : ''
                        ]">
                        <input type="text" placeholder="" pattern="^[0-9]+$" class="" id="DHCPLeaseMinutes"
                          name="DHCPLeaseMinutes" [(ngModel)]="dhcpModel.minutes" customNumMin="0" customNeg required
                          aria-required="true" customNumMax="59" aria-describedby="every-error" aria-invalid="true"
                          #DHCPLeaseMinutes="ngModel" [disabled]="
                            metaData?.DHCP?.DHCPLeaseTime?.writable == false ||
                            !metaData?.DHCP?.DHCPLeaseTime
                          " />
                        <span class="black-clr d-block">{{ language.minutes }}</span>
                        <label *ngIf="
                            (DHCPLeaseMinutes.touched || myForm.submitted) &&
                            DHCPLeaseMinutes.errors?.required
                          " id="DHCPLeaseMinutes-error">
                          {{ language["This field is required"] }}</label>
                        <label *ngIf="
                            DHCPLeaseMinutes.touched &&
                            (DHCPLeaseMinutes.errors?.pattern ||
                              DHCPLeaseMinutes.errors?.custonNeg)
                          " id="DHCPLeaseMinutes-error">
                          {{language.Only_Digits}}.</label>
                        <label *ngIf="
                            DHCPLeaseMinutes.touched &&
                            (DHCPLeaseMinutes.errors?.customNumMax ||
                              DHCPLeaseMinutes.errors?.customNumMin)
                          " id="DHCPLeaseMinutes-error">
                          {{language['Please enter a value between 0 and 59']}}.</label>
                      </div>
                    </div>
                  </td>
                </tr>

                <tr>
                  <th scope="row">{{ language.Primary_DNS_Server }} </th>
                  <td>
                    <!-- <div class="disabled"> 0.0.0.0 </div> -->
                    <div class="ccl-form" [ngClass]="[
                        primaryDNSServer.errors?.custonDnsPattern &&
                        (myForm.submitted || primaryDNSServer.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input class="form-control" id="primaryDNSServer" #primaryDNSServer="ngModel" type="text"
                        name="primaryDNSServer" [(ngModel)]="dhcpModel.primaryDNSServer"
                        aria-describedby="primaryDNSServer-error" autocomplete="new-password" customDnsVal [disabled]="
                          metaData?.DHCP?.DNSServers?.writable == false ||
                          !metaData?.DHCP?.DNSServers
                        " />
                      <em *ngIf="
                          (primaryDNSServer.touched || myForm.submitted) &&
                          primaryDNSServer.errors?.custonDnsPattern
                        " id="primaryDNSServer-error">
                        {{language.Warning}}: {{language['No message defined for primaryDNSServer']}}</em>
                    </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">{{ language.Secondary_DNS_Server }}</th>
                  <td>
                    <!-- <div class="disabled"> 0.0.0.0 </div> -->
                    <div class="ccl-form" [ngClass]="[
                        secondaryDNSServer.errors?.custonDnsPattern &&
                        (myForm.submitted || secondaryDNSServer.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input class="form-control" id="secondaryDNSServer" #secondaryDNSServer="ngModel" type="text"
                        name="secondaryDNSServer" [(ngModel)]="dhcpModel.secondaryDNSServer"
                        aria-describedby="secondaryDNSServer-error" autocomplete="new-password" customDnsVal [disabled]="
                          metaData?.DHCP?.DNSServers?.writable == false ||
                          !metaData?.DHCP?.DNSServers
                        " />
                      <em *ngIf="
                          (secondaryDNSServer.touched || myForm.submitted) &&
                          secondaryDNSServer.errors?.custonDnsPattern
                        " id="secondaryDNSServer-error">
                        {{language.Warning}}: {{language['No message defined for secondaryDNSServer']}}</em>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="add-bnt">
          <button type="submit" id="dhcp-save-btn" class="btn-default primary px-3 px-3">
            {{ language.Save }}
          </button>
          <button type="button" id="dhcp-cancel-btn" class="btn-default transparant px-3 px-3 m-2"
            (click)="closeModal()" data-dismiss="modal">
            {{ language.Cancel }}
          </button>
        </div>
      </form>
    </div>
  </ng-template>

  <ng-template #dmzModal let-modal id="dmz-modal" class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="dmz-modal-label">DMZ</div>
      <button type="button" class="close" id="dmz-modal-close-btn" data-dismiss="modal" aria-label="Close"
        (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="loader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="dmz-modal-form-table-info col-md-11 support-key-value dhcp-inputtable pl-4">
          <table class="pop-table-blocks" id="dmz-modal-form-table">
            <tbody>
              <tr>
                <th scope="row">{{ language.DMZ_State }}</th>
                <td>
                  <!-- <div class="disabled"> ON </div> -->
                  <div class="toggle-swtbtn checkbox switcher mb-2">
                    <label for="selfHealCheckbox">
                      <input type="checkbox" id="selfHealCheckbox" [disabled]="metaData?.DMZ?.Enable?.writable == false"
                        checked (change)="newDMZRadioNew()" [(ngModel)]="dmzModel.Enable" name="dmzEnable" #dmzEnable />
                      <span><small></small></span>
                    </label>
                  </div>
                </td>
              </tr>
              <tr [hidden]="!dmzModel.Enable">
                <th scope="row"></th>
                <td>
                  <div class="ccl-form">
                    <div class="d-flex align-items-center">
                      <div class="align-self-start mr-3">
                        <input type="radio" id="dmzDevice" name="dmz" [disabled]="
                            metaData?.DMZ?.IPAddress?.writable == false
                          " (change)="newDMZRadioNew()" value="dev" [(ngModel)]="dmzModel.applicationInput" checked />
                        <label class="align-self-start" for="dmzDevice">{{
                          language.device
                          }}</label>
                      </div>
                      <div class="align-self-start">
                        <input class="align-self-center" type="radio" [disabled]="
                            metaData?.DMZ?.IPAddress?.writable == false
                          " id="dmzIp" name="dmz" (change)="newDMZRadioNew()" [(ngModel)]="dmzModel.applicationInput"
                          value="ip" />
                        <label class="align-self-start" for="dmzIp">{{
                          language.IP_Address
                          }} </label>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
              <tr [hidden]="!dmzModel.Enable">
                <th scope="row">
                  {{
                  dmzModel.applicationInput == "dev"
                  ? language.device
                  : language.IP_Address
                  }} <span class="error">*</span>
                </th>
                <td>
                  <div class="ccl-form">
                    <ng-select *ngIf="dmzModel.applicationInput == 'dev'" id="group"
                      [items]="dmzModel?.applicationDevice" bindLabel="displayName" bindValue="IPAddress"
                      [multiple]="false" (change)="dmzDropdownChange()" placeholder=""
                      [(ngModel)]="dmzModel.applicationDeviceSelected" [ngModelOptions]="{ standalone: true }"
                      [clearable]="false" [searchable]="false" [disabled]="metaData?.DMZ?.IPAddress?.writable == false">
                    </ng-select>
                    <input *ngIf="dmzModel.applicationInput == 'ip'" type="text" name="portProtocol"
                      class="form-control" placeholder="{{ language.IP_Address }}"
                      [(ngModel)]="dmzModel.applicationIpAddress" #portProtocol="ngModel"
                      (keyup)="ipValidationDMZ($event)" [disabled]="metaData?.DMZ?.IPAddress?.writable == false" />
                    <div id="ipValidationMessage" class="pl-2 PTValidationMessage"></div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="add-bnt">
        <button type="button" class="btn-default primary px-3 px-3" id="dmzSubmit" disabled="" (click)="updateDmz()">
          {{ language.Save }}
        </button>
        <button type="button" id="dmzCancelBtn" class="btn-default transparant px-3 px-3 m-2" (click)="closeModal()"
          data-dismiss="modal">
          {{ language.Cancel }}
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #newportModal id="port-forwarding-modal" let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title mb-3 ml-2" id="portforwarding-modal-label">
        {{ language.New_Port_Forwarding }}
      </div>
      <button type="button" class="close" id="portforwarding-modal-close-btn" data-dismiss="modal" aria-label="Close"
        (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="modalLoader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="w-100 alert alert alert-danger fade show" *ngIf="isModalError">
        <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
        <button type="button" id="modalError-btn" class="close" (click)="isModalError = false">
          <span></span>
        </button>
        <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
      </div>
      <div class="row">
        <div class="col-md-12 support-key-value dhcp-inputtable pl-4">
          <div class="w-100 alert alert alert-danger fade show" *ngIf="showError">
            <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
            <button type="button" class="close" id="hide-error-btn" (click)="hideError()">
              <span></span>
            </button>
            <div class="d-inline-flex" [innerHtml]="errorMsg"></div>
          </div>
          <form #myForm="ngForm" id="port-forwarding-form" (ngSubmit)="myForm.form.valid && addNewPortEntry()"
            novalidate [highLowValidate]="['remotePort', 'remoteEndPort', 'port-forward']" class="form-group ccl-form">
            <div class="row">
              <div class="col-12">
                {{ language.Application }}
              </div>
              <div class="col-12">
                <div class="ccl-form">
                  <ng-select id="group" [items]="dataObj?.application" bindLabel="PortMappingDescription"
                    [multiple]="false" placeholder="" [(ngModel)]="dataObj.applicationSelected"
                    [ngModelOptions]="{ standalone: true }" (change)="portForwardingChange()" [clearable]="false"
                    [searchable]="false">
                  </ng-select>
                </div>
              </div>
            </div>
            <table class="portforwarding">
              <tbody>

                <tr *ngIf="
                    dataObj.applicationSelected.PortMappingDescription !=
                    'New Entry'
                  ">
                  <td colspan="2">
                    <table class="row-border hover table-alter portforwardingPort table table-striped">
                      <thead>
                        <tr>
                          <th>{{ language.Remote_Start_Port }}</th>
                          <th>{{ language.Remote_End_port }}</th>
                          <th>{{ language.Local_Start_Port }}</th>
                          <th>{{ language.Local_End_Port }}</th>
                          <th>{{ language.Protocol }}</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="
                            let app of dataObj.applicationSelected.PortRange
                          ">
                          <td>{{ app.ExternalPort }}</td>
                          <td>{{ app.ExternalPortEnd }}</td>
                          <td>{{ app.InternalPort }}</td>
                          <td>{{ app.InternalPortEnd }}</td>
                          <td>{{ app.PortMappingProtocol }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
              <tbody class="flex-t-body">
                <tr *ngIf="
                    dataObj.applicationSelected.PortMappingDescription ==
                    'New Entry'
                  " class="pop-table-blocks-row">
                  <th scope="row">{{ language.Name }} <span class="error">*</span></th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (name.errors?.required ||
                          name.errors?.pattern ||
                          name.errors?.customMax ||
                          name.errors?.customMin) &&
                        (myForm.submitted || name.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" name="name" id="name" class="form-control" name="name" #name="ngModel"
                        [(ngModel)]="newPortForwarding.PortMappingDescription" pattern="^[a-zA-Z0-9._\-\ ]+"
                        customMin="4" customMax="20" placeholder="{{ language.Name }}" required aria-required="true"
                        aria-describedby="name-error" aria-invalid="true" autocomplete="new-password" [disabled]="
                          metaData?.PortMapping?.PortMappingDescription
                            ?.writable == false
                        " />
                      <div *ngIf="
                          (name.touched || myForm.submitted) &&
                          name.errors?.required
                        " id="name-error">
                        {{ language.Enter_A_Value }}
                      </div>
                      <div *ngIf="name.touched && name.errors?.pattern" id="name-error">
                        {{language.support_router_validation9}} <br />
                      </div>
                      <div *ngIf="
                          name.touched &&
                          (name.errors?.customMax || name.errors?.customMin)
                        " id="name-error">
                        {{language.Number_hint}}
                      </div>
                    </div>
                  </td>
                </tr>
                <tr *ngIf="
                    dataObj.applicationSelected.PortMappingDescription ==
                    'New Entry'
                  " class="pop-table-blocks-row">
                  <th scope="row">{{language.Protocol}}</th>
                  <td>
                    <div class="ccl-form">
                      <ng-select id="group" name="protocol" [items]="dataObj?.applicationProtocol" bindLabel="label"
                        bindValue="value" [multiple]="false" placeholder=""
                        [(ngModel)]="newPortForwarding.PortMappingProtocol" [clearable]="false" [searchable]="false"
                        [disabled]="
                          metaData?.PortMapping?.PortMappingProtocol
                            ?.writable == false
                        ">
                      </ng-select>
                    </div>
                  </td>
                </tr>
                <tr *ngIf="
                    dataObj.applicationSelected.PortMappingDescription ==
                    'New Entry'
                  " class="pop-table-blocks-row">
                  <th scope="row">{{language['Remote Port']}} <span class="error">*</span></th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (remotePort.errors?.required ||
                          remotePort.errors?.customNumMin ||
                          remotePort.errors?.pattern ||
                          remotePort.errors?.custonNeg ||
                          remotePort.errors?.customNumMax) &&
                        (myForm.submitted || remotePort.touched)
                          ? ' errorMessage'
                          : ''
                      ]">
                      <input type="text" name="remotePort" id="remotePort" class="form-control" #remotePort="ngModel"
                        customNeg [(ngModel)]="newPortForwarding.ExternalPort" pattern="[0-9]+" placeholder="1-65535"
                        customNumMax="65535" customNumMin="1" required aria-required="true"
                        aria-describedby="remotePort-error" aria-invalid="true" autocomplete="new-password" [disabled]="
                          metaData?.PortMapping?.ExternalPort?.writable == false
                        " />
                      <em *ngIf="
                          (remotePort.touched || myForm.submitted) &&
                          remotePort.errors?.required
                        " id="remotePort-error">
                        {{ language.Enter_A_Value }}</em>
                      <em *ngIf="
                          remotePort.touched &&
                          (remotePort.errors?.customNumMax ||
                            remotePort.errors?.customNumMin)
                        " id="remotePort-error">
                        {{ language.Enter_A_Value_Number }}</em>
                      <em *ngIf="
                          remotePort.touched &&
                          (remotePort.errors?.customNeg ||
                            remotePort.errors?.pattern)
                        " id="remotePort-error">
                        {{ language.Only_Digits }}<br />
                        {{ language.Enter_A_Value_Number }}</em>
                    </div>
                  </td>
                </tr>
                <tr *ngIf="
                    dataObj.applicationSelected.PortMappingDescription ==
                    'New Entry'
                  " class="pop-table-blocks-row">
                  <th scope="row">{{ language.Remote_End_port }}</th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (remoteEndPort.errors?.pattern ||
                          remoteEndPort.errors?.mustMatch ||
                          remoteEndPort.errors?.customNumMax ||
                          remoteEndPort.errors?.customNumMin) &&
                        (myForm.submitted || remoteEndPort.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" name="remoteEndPort" class="form-control" #remoteEndPort="ngModel" customNeg
                        [(ngModel)]="newPortForwarding.ExternalPortEnd" pattern="[0-9]+" customNumMax="65535"
                        customNumMin="1" aria-describedby="remoteEndPort-error" autocomplete="new-password"
                        placeholder="{{language['Leave blank to use the same value as the Remote Port']}}" [disabled]="
                          metaData?.PortMapping?.ExternalPortEnd?.writable ==
                          false
                        " />
                      <em *ngIf="
                          remoteEndPort.touched &&
                          remoteEndPort.errors?.mustMatch
                        " id="remoteEndPort-error">
                        {{ language.Remote_Validation }}</em>
                      <em *ngIf="
                          remoteEndPort.touched &&
                          (remoteEndPort.errors?.customNumMax ||
                            remoteEndPort.errors?.customNumMin)
                        " id="remoteEndPort-error">
                        {{ language.Enter_A_Value_Number }}</em>
                      <em *ngIf="
                          remoteEndPort.touched &&
                          (remoteEndPort.errors?.customNeg ||
                            remoteEndPort.errors?.pattern)
                        " id="remoteEndPort-error">
                        {{ language.Only_Digits }}</em>
                    </div>
                  </td>
                </tr>
                <tr *ngIf="
                    dataObj.applicationSelected.PortMappingDescription ==
                    'New Entry'
                  " class="pop-table-blocks-row">
                  <th scope="row">{{language['Local Port']}}</th>
                  <td>
                    <div class="ccl-form" [ngClass]="[
                        (localPort.errors?.pattern ||
                          localPort.errors?.customNumMax ||
                          localPort.errors?.customNumMin) &&
                        (myForm.submitted || localPort.touched)
                          ? 'errorMessage'
                          : ''
                      ]">
                      <input type="text" name="localPort" class="form-control"
                        placeholder="Leave blank to use the same range as the Remote" #localPort="ngModel" customNeg
                        [(ngModel)]="newPortForwarding.InternalPort" pattern="[0-9]+" customNumMax="65535"
                        customNumMin="1" aria-required="true" aria-describedby="localPort-error" aria-invalid="true"
                        autocomplete="new-password" placeholder="Leave blank to use the same value as the Remote Port"
                        [disabled]="
                          metaData?.PortMapping?.InternalPort?.writable == false
                        " />
                      <em *ngIf="
                          localPort.touched &&
                          (localPort.errors?.customNumMax ||
                            localPort.errors?.customNumMin)
                        " id="localPort-error">
                        {{ language.Enter_A_Value_Number }}</em>
                      <em *ngIf="
                          localPort.touched &&
                          (localPort.errors?.customNeg ||
                            localPort.errors?.pattern)
                        " id="localPort-error">
                        {{ language.Only_Digits }}</em>
                    </div>
                  </td>
                </tr>
              </tbody>
              <tbody>
                <tr>
                  <th scope="row"></th>
                  <td>
                    <div class="ccl-form">
                      <div class="d-flex align-items-center redio-but-align-center">
                        <div class="align-self-start mr-3">
                          <input type="radio" id="portForwardLAN" name="portForward" (click)="newPortForwardRadio()"
                            value="lan" [(ngModel)]="dataObj.applicationInput" checked [disabled]="
                              metaData?.PortMapping?.InternalClient?.writable ==
                              false
                            " />
                          <label class="align-self-start" for="portForwardLAN">{{ language.LAN_Host }} </label>
                        </div>
                        <div class="align-self-start">
                          <input class="align-self-center" type="radio" id="portForwardIp" name="portForward"
                            (click)="newPortForwardRadio()" [(ngModel)]="dataObj.applicationInput" value="ip"
                            [disabled]="
                              metaData?.PortMapping?.InternalClient?.writable ==
                              false
                            " />
                          <label class="align-self-start" for="portForwardIp">{{
                            language.IP_Address
                            }} </label>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="row">
              <div class="col-12">
                {{
                dataObj.applicationInput == "lan"
                ? language.LAN_Host
                : language.IP_Address
                }}
                <span class="error">*</span>
              </div>
              <div class="col-12">
                <div *ngIf="
                        dataObj.applicationSelected.PortMappingDescription ==
                          'New Entry';
                        else elseBlock
                      " class="ccl-form">
                  <div *ngIf="dataObj.applicationInput == 'lan'" [ngClass]="[
                          lanHost.errors?.required &&
                          (myForm.submitted || lanHost.touched)
                            ? 'errorMessage'
                            : ''
                        ]">
                    <ng-select id="lanHost" #lanHost="ngModel" [items]="lanHosting" bindLabel="displayName"
                      bindValue="IPAddress" [multiple]="false" placeholder=""
                      [(ngModel)]="newPortForwarding.InternalClient" name="lanHost" [clearable]="false"
                      [searchable]="false" required aria-required="true" aria-describedby="LanHost-error"
                      aria-invalid="true" [disabled]="
                            metaData?.PortMapping?.InternalClient?.writable ==
                            false
                          ">
                      <!--<ng-template ng-label-tmp let-item="item">
                            <span *ngIf="item.HostName">{{ item.HostName + ' (' + item.IPAddress +')'}}</span>
                          </ng-template>
                          <ng-template ng-option-tmp let-item="item" let-search="searchTerm" let-index="index">
                            <span *ngIf="item.HostName">{{ item.HostName + ' (' + item.IPAddress +')' }}</span>
                          </ng-template>-->
                    </ng-select>
                    <em *ngIf="
                            (lanHost.touched || myForm.submitted) &&
                            lanHost.errors?.required
                          " id="LanHost-error">
                      {{ language.Enter_A_Value }}</em>
                  </div>
                  <div *ngIf="dataObj.applicationInput == 'ip'" [ngClass]="[
                          (ipAddress.errors?.required ||
                            ipAddress.errors?.pattern ||
                            ipError) &&
                          (myForm.submitted || ipAddress.touched)
                            ? 'errorMessage'
                            : ''
                        ]">
                    <input type="text" name="portProtocol" class="form-control" id="ipAddress"
                      placeholder="{{language['IP Address']}}" [(ngModel)]="newPortForwarding.InternalClient"
                      #ipAddress="ngModel" [pattern]="ipPattern" required aria-required="true"
                      aria-describedby="ipAddress-error" aria-invalid="true" (keyup)="lastDigitIPValid()"
                      autocomplete="new-password" [disabled]="
                            metaData?.PortMapping?.InternalClient?.writable ==
                            false
                          " />
                    <div class="pl-2" *ngIf="
                            ((ipAddress.touched || myForm.submitted) &&
                              ipAddress.errors?.pattern) ||
                            (ipError && ipAddress.touched)
                          " id="ipAddress-error">
                      {{ language["Please enter a valid IP address"] }}
                    </div>
                    <div class="pl-2" *ngIf="
                            (ipAddress.touched || myForm.submitted) &&
                            ipAddress.errors?.required
                          " id="LanHost-error">
                      {{ language.Enter_A_Value }}
                    </div>
                  </div>
                </div>
                <ng-template #elseBlock>
                  <ng-select *ngIf="dataObj.applicationInput == 'lan'" id="group" [items]="dataObj?.applicationLanHost"
                    bindLabel="displayName" bindValue="IPAddress" [multiple]="false" placeholder=""
                    [(ngModel)]="dataObj.applicationLanHostSelected" [ngModelOptions]="{ standalone: true }"
                    [clearable]="false" [searchable]="false">
                  </ng-select>
                  <input *ngIf="dataObj.applicationInput == 'ip'" type="text" name="portProtocol" class="form-control"
                    placeholder="{{language['IP Address']}}" [(ngModel)]="dataObj.applicationIpAddress"
                    #portProtocol="ngModel" (keyup)="ipValidation($event)" />
                  <div class="pl-2" id="ipValidationMessage" *ngIf="dataObj.applicationInput == 'ip'"
                    class="PTValidationMessage"></div>
                </ng-template>
              </div>
            </div>
            <div *ngIf="
                dataObj.applicationSelected.PortMappingDescription !=
                  'New Entry';
                else newBlock
              " class="add-bnt">
              <button type="button" id="SubmitId" class="btn-default primary px-3 px-3" (click)="addNewPortForwarding()"
                [disabled]="!dataObj.applicationLanHostSelected">
                {{ language.submit }}
              </button>
              <button type="button" id="cancel-btn" class="btn-default transparant px-3 px-3 m-2" (click)="closeModal()"
                data-dismiss="modal">
                {{ language.cancel }}
              </button>
            </div>
            <ng-template #newBlock>
              <button type="submit" id="Submit-btn" [disabled]="!myForm.valid || ipError"
                class="btn-default primary px-3 px-3">
                {{ language.submit }}
              </button>
              <button type="button" id="cancel-btn" class="btn-default transparant px-3 px-3 m-2" (click)="closeModal()"
                data-dismiss="modal">
                {{ language.cancel }}
              </button>
            </ng-template>
          </form>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #editportModal id="edit-port-modal" let-modal class="col-md-12 custom-modal">
    <div class="modal-header">
      <div class="ccl-Secondary-title ml-2" id="edit-port-modal-label">
        {{ language.Edit_Port_Forwarding }}
      </div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="modal-body">
      <div class="loader" *ngIf="loader">
        <div class="d-flex justify-content-center">
          <div class="spinner-border text-primary">
            <span class="sr-only">{{ language.Loading }}</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-11 support-key-value dhcp-inputtable pl-4">
          <table id="edit-port-modal-tabel">
            <tbody>
              <tr>
                <th scope="row">{{ language.Application }}</th>
                <td>
                  <div class="ccl-form">
                    <input type="test" class="form-control" id="dhcp-device" aria-describedby="dhcp-device"
                      [(ngModel)]="newPortModel.PortMappingDescription" placeholder="{{ language.Application }}" />
                  </div>
                </td>
              </tr>
              <tr>
                <th scope="row">{{ language.LAN_Host }}</th>
                <td>
                  <div class="ccl-form">
                    <input type="text" name="internalClient" class="form-control" placeholder="{{ language.LAN_Host }}"
                      [(ngModel)]="newPortModel.InternalClient" #internalClient="ngModel" />
                  </div>
                </td>
              </tr>
              <tr>
                <th scope="row">{{ language.Ports }}</th>
                <td>
                  <div class="ccl-form">
                    <input type="text" name="portProtocol" class="form-control" placeholder="{{ language.Ports }}"
                      [(ngModel)]="newPortModel.PortMappingProtocol" #portProtocol="ngModel" />
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="add-bnt">
        <button type="button" id="save-Btn" class="btn-default primary px-3 px-3" (click)="updatePortData()">
          {{ language.Save }}
        </button>
        <button type="button" id="cancel-btn" class="btn-default transparant px-3 px-3 m-2" (click)="closeModal()"
          data-dismiss="modal">
          {{ language.Cancel }}
        </button>
      </div>
    </div>
  </ng-template>
</div>
<ng-template #errorModal>
  <div class="w-100 alert alert alert-danger fade show" *ngIf="isError">
    <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
    <button type="button" class="close" id="hide-error-btn" (click)="isError = false">
      <span></span>
    </button>
    <div class="d-inline-flex" [innerHtml]="warningMessage"></div>
  </div>
</ng-template>

<ng-template #rebootStatus id="rebootStatus" let-modal>
  <div class="modal-header">
    <div class="ccl-Secondary-title" id="rebootStatus-label">Reboot</div>
    <button type="button" class="close" id="rebootStatus-close-btn" data-dismiss="modal" aria-label="Close"
      (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="modal-body">
    <div class="col-12 ccl-tabs">
      <p class="font-weight-bold"></p>
    </div>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="backup" role="tabpanel" aria-labelledby="backup-tab">
        <div class="loader" *ngIf="modalLoader">
          <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary">
              <span class="sr-only">{{ language.Loading }}</span>
            </div>
          </div>
        </div>
        <div class="w-100 alert alert alert-danger fade show" *ngIf="isModalError">
          <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
          <button type="button" id="hide-error-btn" class="close" (click)="isModalError = false">
            <span></span>
          </button>
          <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
        </div>
        <div id="backup" class="tab-pane">
          <p class="" *ngIf="modalLoader && bootHappening">
            {{ language.Reboot_Warning }}
          </p>
          <div class="col-12 pb-2">
            <ng-container *ngFor="let list of completionStatus">
              <p>
                [{{ list.isTime }}]
                <span class="font-weight-bold">{{ language[list.isResponse] || list.isResponse }}</span>
              </p>
            </ng-container>
          </div>
          <div class="add-bnt">
            <button type="button" id="reboot-again" class="btn btn-primary br-26 b-none reboot-btn" (click)="
                modal.close('Save click');
                openOutModal(rebootStatus);
                rebootDevice()
              " [disabled]="completionStatus && completionStatus.length == 1">
              {{ language.Reboot_Again }}
            </button>
            <button type="button" id="reboot-cancel" class="btn-sm btn-default ml-2 br-26 transparant"
              (click)="modal.close('Save click')">
              {{ language.Cancel }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #updateSoftwareModal let-modal>
  <div class="modal-header">
    <div class="ccl-Secondary-title" id="Update-Software-Label">
      {{ language.Update_Software }}
    </div>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="modal-body notes-modal-body">
    <div class="loader" *ngIf="modalLoader">
      <div class="d-flex justify-content-center">
        <div class="spinner-border text-primary">
          <span class="sr-only">{{ language.Loading }}</span>
        </div>
      </div>
    </div>
    <div class="w-100 alert alert alert-danger fade show" *ngIf="isModalError">
      <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
      <button type="button" class="close" (click)="isModalError = false">
        <span></span>
      </button>
      <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
    </div>
    <form>
      <p class="mt-1"></p>

      <div class="mb-3 dd-ref">
        <p class="listdata mb0">
          {{ language.Current_Version }} :
          <span>{{ deviceSelected.softwareVersion }}</span>
        </p>
      </div>
      <div class="mb-3 dd-ref">
        <p class="listdata mb0">
          {{ language.Update_to }}
          <span></span>
        </p>
        <div class="custom-selectbox">
          <ng-select id="group" [items]="dataObj?.updateToSW" bindLabel="label" bindValue="value" [multiple]="false"
            placeholder="" (change)="onSoftwareChange($event)" [(ngModel)]="updateToSW"
            [ngModelOptions]="{ standalone: true }" [clearable]="false" [searchable]="false">
          </ng-select>
        </div>
      </div>

      <div class="add-bnt">
        <button type="button" [disabled]="!scopeFlag.updateSWWrite" class="btn btn-primary br-26 b-none"
          id="router_update_software_update_bttn" (click)="
            modal.close('Save click');
            openOutModal(updateSWStatus);
            updateSoftware()
          ">
          {{ language.Update }}
        </button>
        <button type="button" class="btn-sm btn-default greyaa ml-2 br-26 transparant"
          id="router_update_software_cancel_bttn" (click)="modal.close('Save click')">
          {{ language.Cancel }}
        </button>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #updateSWStatus let-modal>
  <div class="modal-header">
    <div class="ccl-Secondary-title" id="Update-Software-Label">
      {{ language.Update_Software }}
    </div>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="modal-body">
    <div class="col-12 ccl-tabs">
      <p class="font-weight-bold"></p>
    </div>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="backup" role="tabpanel" aria-labelledby="backup-tab">
        <div class="loader" *ngIf="modalLoader">
          <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary">
              <span class="sr-only">{{ language.Loading }}</span>
            </div>
          </div>
        </div>
        <div class="w-100 alert alert alert-danger fade show" *ngIf="isModalError">
          <span class="error-img"><img src="./assets/img/ic_error-36px.svg" /></span>
          <button type="button" class="close" (click)="isModalError = false">
            <span></span>
          </button>
          <div class="d-inline-flex" [innerHtml]="modalWarningMessage"></div>
        </div>
        <div id="backup" class="tab-pane">
          <div class="col-12 pb-2">
            <ng-container *ngFor="let list of completionStatus">
              <p>
                [{{ list.isTime }}]
                <span class="font-weight-bold">{{ language[list.isResponse] || list.isResponse }}</span>
              </p>
            </ng-container>
          </div>
          <div class="add-bnt">
            <button type="button" id="router_update_software_done_bttn" class="btn btn-primary br-26 b-none"
              (click)="modal.close('Save click'); RouterGatewayLoader()">
              {{ language.Done }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- ONT -716 Content  Start-->
<section *ngIf="isOnt && ssoService.getCscType() !== 'DME' && ssoService.getEntitlementsArr().indexOf('102') > -1">
  <div class="mt-2">
    <button type="button" class="btn-default primary px-3 mr-2" data-toggle="modal" data-target="#reboot"
      *ngIf="scopeFlag.rebootRead" id="ontRebootId" (click)="openOutModal(rebootDeviceBtn, true)">
      {{ language.Reboot }}
    </button> &nbsp;
    <span class="cursor-pointer primary" id="refreshicon" (click)="OntRefresh()">
      <i class="fas fa-sync refreshicon"></i>
    </span>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="ont-stats-container">
        <div class="ont-stats-list">
          <div class="ont-stats-lable">
            {{language['Status']}}
          </div>
          <div class="ont-stats-data-status" [ngClass]="ontStatus ? 'success' : 'failure'">{{ontStatus == undefined ?
            '-' : (ontStatus ? 'Up' : 'Down')}}
          </div>
        </div>
        <div class="ont-stats-list">
          <div class="ont-stats-lable">
            {{language['ONT_Rx_Power']}}
          </div>
          <div class="ont-stats-data">{{ontRxPower != undefined && ontStatus ? (ontRxPower ? (ontRxPower + 'dBm') :
            'NA') : '-'}}</div>
        </div>
        <div class="ont-stats-list">
          <div class="ont-stats-lable">
            {{language['OLT_Rx_Power']}}
          </div>
          <div class="ont-stats-data">{{oltRxPower != undefined && ontStatus ? (oltRxPower ? (oltRxPower + 'dBm') :
            'NA') : '-'}}</div>
        </div>
        <!---upstream and downstream octest-->
        <div class="ont-stats-list">
          <div class="ont-stats-lable">
            {{ language.Upstream_Octets }}
          </div>
          <div class="ont-stats-data">{{upstreamoctet == undefined ? '-' : upstreamoctet }}</div>
        </div>

        <div class="ont-stats-list">
          <div class="ont-stats-lable">
            {{ language.Downstream_Octets }}
          </div>
          <div class="ont-stats-data">{{downstramoctet == undefined ? '-' : downstramoctet }}</div>
        </div>

        <div class="loader" *ngIf="octetLoader">
          <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary">
              <span class="sr-only">{{ language.Loading }}</span>
            </div>
          </div>
        </div>
        <!--<div>
          <span class="cursor-pointer" id="refreshicon" (click)="OntRefresh()">
            <i class="fas fa-sync refreshicon"></i>
          </span>
        </div>-->

        <!-- <div class="ont-stats-list">
          <div class="ont-stats-lable">
            ONT Tx Power
          </div>
          <div class="ont-stats-data">0dBm</div>

        </div> -->
      </div>
    </div>
  </div>
  <!-- <div class="d-flex justify-content-between mb-4">
    <div class="ont-left-chart">
      <div class="d-flex justify-content-between border-bottom align-items-end  ">
        <div class="cco-secondary-title">Bit-Interleaved Parity(BIP) Errors</div>
        <div class="d-flex">

          <button id="bipErrorChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-dload"
            data-toggle="tooltip"></button>
          <button id="bipErrorfullScreenChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-expand"
            data-toggle="tooltip"></button>
        </div>


      </div>
      <div>
        <select style="float: right;">
          <option>1 Day</option>
        </select>
      </div>
      <br>
      <div id="bitIntervalleavedChart"></div>
    </div>
    <div class="ont-right-chart">
      <div class="d-flex justify-content-between border-bottom align-items-end  ">
        <div class="cco-secondary-title">Bit-Interleaved Parity(BIP) Errors(FEC)</div>
        <div class="d-flex">

          <button id="bipErrorFECChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-dload"
            data-toggle="tooltip"></button>
          <button id="bipErrorFECfullScreenChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-expand"
            data-toggle="tooltip"></button>
        </div>


      </div>
      <div>
        <select style="float: right;">
          <option>1 Day</option>
        </select>
      </div>
      <br>
      <div id="bitIntervalleavedChartFEC"></div>
    </div>
  </div>
  <div class="d-flex justify-content-between mb-4">
    <div class="ont-left-chart">
      <div class="d-flex justify-content-between border-bottom align-items-end  ">
        <div class="cco-secondary-title">Light Levels-ONT Rx Power</div>
        <div class="d-flex">

          <button id="rxPowerChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-dload"
            data-toggle="tooltip"></button>
          <button id="rxPowerfullScreenChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-expand"
            data-toggle="tooltip"></button>
        </div>


      </div>
      <div>
        <select style="float: right;">
          <option>1 Week</option>
        </select>
      </div>
      <br>
      <div id="rxPowerChart"></div>
    </div>
    <div class="ont-right-chart">
      <div class="d-flex justify-content-between border-bottom align-items-end  ">
        <div class="cco-secondary-title">Light Levels - ONT Tx Power</div>
        <div class="d-flex">

          <button id="txPowerChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-dload"
            data-toggle="tooltip"></button>
          <button id="txPowerfullScreenChartDownloadSection" class="mb-2 btn-round btn-small-24 btn-grey btn-expand"
            data-toggle="tooltip"></button>
        </div>


      </div>
      <div>
        <select style="float: right;">
          <option>1 Week</option>
        </select>
      </div>
      <br>
      <div id="txPowerChart"></div>
    </div>
  </div> -->

</section>


<!-- ONT -716 Content  End-->
<ng-container *ngIf="isOnt && ssoService.getCscType() !== 'DME' && ssoService.getEntitlementsArr().indexOf('102') > -1">

  <div *ngFor="let item of loadTimeseriesChart; let i=index">

    <app-timeserieschart [params]=item.params [paramname]=item.paramname [charttype]=item.charttype [divid]=item.divid
      [chartname]=item.chartname (valueChange)="clearChartContainer($event)" [page]=item.page
      (lastOntValue)="getValue($event)" (lastTxValue)="getTxLevel($event)">
    </app-timeserieschart><br>
  </div>
</ng-container>