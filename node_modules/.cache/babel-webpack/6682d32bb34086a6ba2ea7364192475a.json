{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { DataTableDirective } from 'angular-datatables';\nimport { Subject } from 'rxjs';\nimport { environment } from './../../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/common.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../shared/services/custom-translate.service\";\nimport * as i4 from \"../services/organizations.service\";\nimport * as i5 from \"../../shared/services/sso-auth.service\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i7 from \"@angular/common/http\";\nimport * as i8 from \"@angular/platform-browser\";\nimport * as i9 from \"../services/api-usage.service\";\nimport * as i10 from \"../services/organization-api.service\";\nimport * as i11 from \"@angular/common\";\nimport * as i12 from \"@angular/forms\";\nimport * as i13 from \"angular-datatables\";\nconst _c0 = [\"deleteModal\"];\nfunction OrganizationsListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵelementStart(1, \"div\", 22);\n    i0.ɵɵelementStart(2, \"div\", 23);\n    i0.ɵɵelementStart(3, \"span\", 24);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.language.Loading);\n  }\n}\nfunction OrganizationsListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelementStart(1, \"span\", 26);\n    i0.ɵɵelement(2, \"img\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.closeAlert();\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r1.errorInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction OrganizationsListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelementStart(1, \"div\", 31);\n    i0.ɵɵelementStart(2, \"div\", 32);\n    i0.ɵɵelement(3, \"img\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 34);\n    i0.ɵɵelement(5, \"span\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 36);\n    i0.ɵɵelementStart(7, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_3_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.closeAlert();\n    });\n    i0.ɵɵelement(8, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r2.successInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction OrganizationsListComponent_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.addOrg();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.language.addOrganization);\n  }\n}\nfunction OrganizationsListComponent_div_20_th_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\");\n  }\n}\nfunction OrganizationsListComponent_div_20_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r15.language.Action);\n  }\n}\nfunction OrganizationsListComponent_div_20_tbody_14_tr_1_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelementStart(1, \"input\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function OrganizationsListComponent_div_20_tbody_14_tr_1_td_1_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext(4);\n      return ctx_r23.selectedOrg = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r20 = i0.ɵɵnextContext().$implicit;\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", item_r20.id);\n    i0.ɵɵproperty(\"ngModel\", ctx_r21.selectedOrg);\n  }\n}\nfunction OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const item_r20 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r27 = i0.ɵɵnextContext(3);\n      return ctx_r27.gotoSecuredAccess(item_r20);\n    });\n    i0.ɵɵelement(1, \"img\", 55);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(5);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r26.language[\"securedaccess\"]);\n  }\n}\nfunction OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 46);\n    i0.ɵɵtemplate(1, OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_button_1_Template, 2, 1, \"button\", 47);\n    i0.ɵɵelementStart(2, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const item_r20 = i0.ɵɵnextContext().$implicit;\n      const ctx_r30 = i0.ɵɵnextContext(3);\n      return ctx_r30.gotoOrgDetail(item_r20);\n    });\n    i0.ɵɵelement(3, \"i\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const item_r20 = i0.ɵɵnextContext().$implicit;\n      const ctx_r33 = i0.ɵɵnextContext(3);\n      return ctx_r33.gotoUsers(item_r20);\n    });\n    i0.ɵɵelement(5, \"i\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const item_r20 = i0.ɵɵnextContext().$implicit;\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      return ctx_r35.deleteOrg(item_r20);\n    });\n    i0.ɵɵelement(7, \"i\", 53);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.showSecureAccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r22.language[\"entitlements\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r22.language[\"users\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r22.language[\"Delete\"]);\n  }\n}\nfunction OrganizationsListComponent_div_20_tbody_14_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 43);\n    i0.ɵɵtemplate(1, OrganizationsListComponent_div_20_tbody_14_tr_1_td_1_Template, 2, 2, \"td\", 40);\n    i0.ɵɵelementStart(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, OrganizationsListComponent_div_20_tbody_14_tr_1_td_10_Template, 8, 4, \"td\", 44);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r20 = ctx.$implicit;\n    const ctx_r19 = i0.ɵɵnextContext(3);\n    i0.ɵɵpropertyInterpolate(\"id\", item_r20._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.fromOrphanDevice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r20.name ? item_r20.name : \"\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r20.externalOrgRef ? item_r20.externalOrgRef : \"\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r20.oracleId ? item_r20.oracleId : \"\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r20.id ? item_r20.id : \"\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r19.fromOrphanDevice);\n  }\n}\nfunction OrganizationsListComponent_div_20_tbody_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtemplate(1, OrganizationsListComponent_div_20_tbody_14_tr_1_Template, 11, 7, \"tr\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r16.orgsTableData);\n  }\n}\nfunction OrganizationsListComponent_div_20_tbody_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"td\", 56);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r17.language[\"No matching records found\"]);\n  }\n}\nfunction OrganizationsListComponent_div_20_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 57);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_div_20_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return ctx_r37.assignOrg();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r18.language[\"Assign\"], \" \");\n  }\n}\nfunction OrganizationsListComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵelementStart(1, \"table\", 39);\n    i0.ɵɵelementStart(2, \"thead\");\n    i0.ɵɵelementStart(3, \"tr\");\n    i0.ɵɵtemplate(4, OrganizationsListComponent_div_20_th_4_Template, 1, 0, \"th\", 40);\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, OrganizationsListComponent_div_20_th_13_Template, 2, 1, \"th\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, OrganizationsListComponent_div_20_tbody_14_Template, 2, 1, \"tbody\", 40);\n    i0.ɵɵtemplate(15, OrganizationsListComponent_div_20_tbody_15_Template, 4, 1, \"tbody\", 40);\n    i0.ɵɵelement(16, \"tbody\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, OrganizationsListComponent_div_20_button_17_Template, 2, 1, \"button\", 41);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", !ctx_r5.dataAvailable);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"dtOptions\", ctx_r5.tableOptions);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.fromOrphanDevice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.language.organizationName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.language.accountNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.language.oracleId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r5.language.orgId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.fromOrphanDevice);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r5.orgsTableData == null ? null : ctx_r5.orgsTableData.length) != 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r5.orgsTableData == null ? null : ctx_r5.orgsTableData.length) == 0 || ctx_r5.orgsCount != undefined && ctx_r5.orgsCount === 0 || ctx_r5.filterCount != undefined && ctx_r5.filterCount === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.fromOrphanDevice);\n  }\n}\nfunction OrganizationsListComponent_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 58);\n    i0.ɵɵelementStart(1, \"h4\", 59);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_ng_template_21_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return ctx_r41.closeModal();\n    });\n    i0.ɵɵelement(4, \"span\", 61);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 62);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 63);\n    i0.ɵɵelementStart(8, \"button\", 64);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_ng_template_21_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r43 = i0.ɵɵnextContext();\n      return ctx_r43.confirmDeleteSecleted();\n    });\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 65);\n    i0.ɵɵlistener(\"click\", function OrganizationsListComponent_ng_template_21_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r44 = i0.ɵɵnextContext();\n      return ctx_r44.closeModal();\n    });\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.modalTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r7.language[\"Are you sure you want to delete\"], \" \", ctx_r7.modalInfo, \"? \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r7.language.yes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.language.no);\n  }\n}\nconst $ = require('jquery');\nclass DataTablesResponse {}\nexport let OrganizationsListComponent = /*#__PURE__*/(() => {\n  class OrganizationsListComponent {\n    constructor(commonOrgService, router, customTranslateService, api, sso, dialogService, http, titleService, apiUsageService, organizationApiService) {\n      this.commonOrgService = commonOrgService;\n      this.router = router;\n      this.customTranslateService = customTranslateService;\n      this.api = api;\n      this.sso = sso;\n      this.dialogService = dialogService;\n      this.http = http;\n      this.titleService = titleService;\n      this.apiUsageService = apiUsageService;\n      this.organizationApiService = organizationApiService;\n      this.pageAvailable = false;\n      this.tableOptions = {\n        pagingType: 'full_numbers',\n        dom: 'tipr',\n        columnDefs: [{\n          targets: [1, 2, 3, 4],\n          orderable: false\n        }, {\n          targets: [0],\n          orderable: true\n        }],\n        order: [0, 'asc'],\n        drawCallback: settings => {\n          let total = settings.aoData.length;\n          let length = settings._iDisplayLength;\n          if (total <= length) {\n            $(settings.nTableWrapper).find('#organizations-table_last').addClass('disabled');\n          }\n        }\n      };\n      this.orgsTableData = [];\n      this.dtTrigger = new Subject();\n      this.isRerender = false;\n      this.loading = true;\n      this.errorInfo = '';\n      this.successInfo = '';\n      this.showSecureAccess = false;\n      this.sysAdminRoute = 'systemAdministration';\n      this.searchTerm = '';\n      this.orgSelected = new EventEmitter();\n      this.selectedOrg = '';\n      this.searchClearable = false;\n      this.language = this.customTranslateService.defualtLanguage;\n      if (this.language) {\n        this.pageAvailable = true;\n      }\n      this.translateSubscribe = this.customTranslateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        this.reloadCurrentRoute();\n        this.titleService.setTitle(`${this.language['All Organizations']} - ${this.language['System Administration']} - ${this.language['Calix Cloud']}`);\n      });\n      this.commonOrgService.currentPageAdder('organizations');\n      //this.getOrgsData();\n      this.frTable = this.customTranslateService.fr;\n      this.sysAdminRoute = environment.SYS_ADMIN_ROUTE;\n      this.titleService.setTitle(`${this.language['All Organizations']} - ${this.language['System Administration']} - ${this.language['Calix Cloud']}`);\n    }\n    ngOnInit() {\n      this.getOrgsCount();\n      this.closeAlert();\n      this.tableLanguageOptions();\n      let roles = this.sso.getRoles();\n      if (roles && roles.indexOf('OrgAccess') !== -1) {\n        this.showSecureAccess = true;\n      }\n    }\n    ngOnDestroy() {\n      if (this.dtTrigger) {\n        this.dtTrigger.unsubscribe();\n      }\n      if (this.translateSubscribe) {\n        this.translateSubscribe.unsubscribe();\n      }\n      if (this.allOrgSubscribe) {\n        this.allOrgSubscribe.unsubscribe();\n      }\n      if (this.deleteSubs) {\n        this.deleteSubs.unsubscribe();\n      }\n      if (this.apiUsageSub) {\n        this.apiUsageSub.unsubscribe();\n      }\n    }\n    //New Sever-side rendering \n    getOrgsCount(redraw = false) {\n      let url = `${environment.CALIX_ADMIN_ORG_BASE_URL}organizations/count`;\n      this.http.get(url).subscribe(res => {\n        this.orgsCount = res;\n        this.countReceived = true;\n        if (redraw) {\n          this.redraw();\n        } else {\n          this.tableRender();\n        }\n      }, err => {\n        this.pageErrorHandle(err);\n        this.loading = false;\n      });\n    }\n    tableRender() {\n      let url = `${environment.CALIX_ADMIN_ORG_BASE_URL}organizations`;\n      const that = this;\n      this.tableOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 10,\n        lengthChange: false,\n        serverSide: true,\n        processing: false,\n        dom: 'tipr',\n        columnDefs: [{\n          targets: [this.fromOrphanDevice ? 0 : 1, 2, 3, 4],\n          orderable: false\n        }, {\n          targets: [this.fromOrphanDevice ? 1 : 0],\n          orderable: true\n        }],\n        order: [this.fromOrphanDevice ? 1 : 0, 'asc'],\n        ajax: (dataTablesParameters, callback) => {\n          this.sortBy = dataTablesParameters.order[0].column;\n          this.sortType = dataTablesParameters.order[0].dir;\n          that.getFilterCount(dataTablesParameters.search.value);\n          if (dataTablesParameters.search.value) {\n            dataTablesParameters.search.value = dataTablesParameters.search.value ? encodeURIComponent(dataTablesParameters.search.value.trim().replace(/\\s\\s+/g, ' ').replace(/ /g, \"%\")) : '';\n            url = `${environment.CALIX_ADMIN_ORG_BASE_URL}organizations?offset=${dataTablesParameters.start}&size=${dataTablesParameters.length}&filter=${dataTablesParameters.search.value}`;\n          } else {\n            url = `${environment.CALIX_ADMIN_ORG_BASE_URL}organizations?offset=${dataTablesParameters.start}&size=${dataTablesParameters.length}`;\n          }\n          that.http.get(url).subscribe(resp => {\n            that.orgsTableData = resp ? this.sortData(resp, that.sortBy, that.sortType) : [];\n            that.hideNoDataRow();\n            that.dataAvailable = true;\n            that.loading = false;\n            that.tableLanguageOptions();\n            setTimeout(() => {\n              callback({\n                recordsTotal: that.orgsCount != undefined ? that.orgsCount : 0,\n                recordsFiltered: that.filterCount != undefined ? that.filterCount : that.orgsCount,\n                data: []\n              });\n            }, 150);\n          }, err => {\n            if (err.status == 404) {\n              that.orgsTableData = [];\n              that.hideNoDataRow();\n              that.loading = false;\n              that.tableLanguageOptions();\n              setTimeout(() => {\n                callback({\n                  recordsTotal: that.orgsCount != undefined ? that.orgsCount : 0,\n                  recordsFiltered: that.filterCount != undefined ? that.filterCount : that.orgsCount,\n                  data: []\n                });\n              }, 100);\n            } else {\n              that.pageErrorHandle(err);\n              that.loading = false;\n            }\n          });\n        },\n        drawCallback: settings => {\n          this.tableLanguageOptions();\n          //this.changeTableStatusLanguage(settings);\n          let total = settings._iRecordsDisplay; // for server side rendering\n          let length = settings._iDisplayLength;\n          if (total <= length) {\n            $(settings.nTableWrapper).find('#organizations-table_last').addClass('disabled');\n          }\n        }\n      };\n      this.tableLanguageOptions();\n    }\n    getFilterCount(str) {\n      str = str ? encodeURIComponent(str.trim().replace(/\\s\\s+/g, ' ').replace(/ /g, \"%\")) : '';\n      this.http.get(`${environment.CALIX_ADMIN_ORG_BASE_URL}organizations/count?filter=${str}`).subscribe(res => {\n        this.filterCount = res;\n      }, err => {\n        this.pageErrorHandle(err);\n      });\n    }\n    hideNoDataRow() {\n      setTimeout(() => {\n        $('.odd').css('display', 'none');\n      }, 100);\n    }\n    rerender() {\n      this.dtElement.dtInstance.then(dtInstance => {\n        // Destroy the table first\n        dtInstance.destroy();\n        this.dtTrigger.next();\n      });\n    }\n    hideSearch() {\n      setTimeout(() => {\n        //$('#organizations-list .dataTables_wrapper .dataTables_filter').css('display', 'none');\n        $('#organizations-list .dataTables_wrapper .dataTables_length').css('display', 'none');\n      }, 100);\n    }\n    search(term) {\n      this.searchClearable = term.length ? true : false;\n      this.dtElement.dtInstance.then(dtInstance => {\n        dtInstance.search(term).draw();\n      });\n    }\n    onSearchClearing(searchBar) {\n      this.searchClearable = false;\n      searchBar.value = '';\n      this.dtElement.dtInstance.then(dtInstance => {\n        dtInstance.search(searchBar.value).draw();\n      });\n    }\n    gotoSecuredAccess(item) {\n      this.setOrganization(item);\n      this.router.navigate([`${this.sysAdminRoute}/orgSecuredAccess`]);\n    }\n    gotoOrgDetail(item) {\n      this.setOrganization(item);\n      this.router.navigate([`${this.sysAdminRoute}/orgDetail`]);\n    }\n    gotoUsers(item) {\n      var _a;\n      this.setOrganization(item);\n      (_a = this.commonOrgService.showAccountManagement) === null || _a === void 0 ? void 0 : _a.next(item.id);\n      this.getApiUsageQuota(item.id);\n    }\n    getApiUsageQuota(orgID) {\n      this.apiUsageSub = this.apiUsageService.getaApiQuotaDetails(orgID).subscribe(res => {\n        var _a, _b;\n        if (res && (res === null || res === void 0 ? void 0 : res.allowed_count) && (res === null || res === void 0 ? void 0 : res.allowed_count) != 0) {\n          (_a = this.commonOrgService.showApiUsage) === null || _a === void 0 ? void 0 : _a.next(true);\n          localStorage.setItem('apiUsage', \"true\");\n        } else {\n          (_b = this.commonOrgService.showApiUsage) === null || _b === void 0 ? void 0 : _b.next(false);\n          localStorage.setItem('apiUsage', 'false');\n        }\n        this.router.navigate([`${this.sysAdminRoute}/users`]);\n      }, error => {\n        var _a;\n        (_a = this.commonOrgService.showApiUsage) === null || _a === void 0 ? void 0 : _a.next(false);\n        localStorage.setItem('apiUsage', 'false');\n        this.router.navigate([`${this.sysAdminRoute}/users`]);\n      });\n    }\n    deleteOrg(item) {\n      this.deletedata = item;\n      this.modalTitle = this.language['Delete Organization'];\n      this.modalInfo = this.deletedata.name;\n      this.closeModal();\n      this.modalRef = this.dialogService.open(this.deleteModal, {\n        backdrop: 'static',\n        keyboard: false\n      });\n    }\n    confirmDeleteSecleted() {\n      this.closeModal();\n      this.deleteSubs = this.api.DeleteOrg(this.deletedata.id).subscribe(res => {\n        this.closeAlert();\n        this.successInfo = this.language['Organization deleted Successfully'];\n        this.success = true;\n        this.commonOrgService.pageScrollTop();\n        setTimeout(() => {\n          this.closeAlert();\n        }, 3000);\n        this.loading = true;\n        this.isRerender = true;\n        this.getOrgsCount(true);\n      }, err => {\n        this.loading = false;\n        this.pageErrorHandle(err);\n        this.commonOrgService.pageScrollTop();\n      }, () => {\n        this.loading = false;\n      });\n    }\n    setOrganization(org) {\n      sessionStorage.setItem('calixAdminOrgDetail', JSON.stringify(org));\n      sessionStorage.setItem('calixAdminOrgID', org.id);\n      this.commonOrgService.currentOrgAdder(org.name);\n    }\n    addOrg() {\n      this.router.navigate([`${this.sysAdminRoute}/addOrg`]);\n    }\n    goToOrgList() {\n      this.router.navigate([`${this.sysAdminRoute}/organizations`]);\n    }\n    openDeleteModal() {\n      document.getElementById(\"deleteModalHiddenButton\").click();\n    }\n    closeAlert() {\n      this.error = false;\n      this.success = false;\n    }\n    tableLanguageOptions() {\n      if (this.language.fileLanguage == 'fr') {\n        this.tableOptions.language = this.customTranslateService.fr;\n      } else if (this.language.fileLanguage == 'es') {\n        this.tableOptions.language = this.customTranslateService.es;\n      } else if (this.language.fileLanguage == 'de_DE') {\n        this.tableOptions.language = this.customTranslateService.de_DE;\n      } else if (this.language.fileLanguage == 'en' && this.tableOptions.language) {\n        delete this.tableOptions.language;\n      }\n    }\n    closeModal() {\n      if (this.modalRef) {\n        this.modalRef.close();\n      }\n    }\n    pageErrorHandle(err) {\n      if (err.status == 401) {\n        this.errorInfo = this.language['Access Denied'];\n      } else {\n        this.errorInfo = this.commonOrgService.pageErrorHandle(err);\n      }\n      this.closeAlert();\n      this.error = true;\n    }\n    changeTableStatusLanguage(dtObj) {\n      const nf = new Intl.NumberFormat();\n      this.tableCounts = {\n        searchText: encodeURIComponent(dtObj.oPreviousSearch.sSearch.trim()),\n        total: dtObj._iRecordsTotal,\n        displayCount: dtObj._iDisplayLength,\n        displayed: dtObj._iRecordsDisplay,\n        start: dtObj._iDisplayStart\n      };\n      const isFrench = sessionStorage.getItem('defaultLanguage') == 'fr',\n        filtered = `${dtObj.oPreviousSearch.sSearch.trim() ? isFrench ? `(filtrées à partir des ${nf.format(dtObj._iRecordsTotal)} entrées totales)` : `(filtered from ${nf.format(dtObj._iRecordsTotal)} total entries)` : ''}`;\n      const startCount = dtObj._iRecordsDisplay == 0 ? -1 : dtObj._iDisplayStart;\n      const showingCount = dtObj._iDisplayStart + dtObj._iDisplayLength > dtObj._iRecordsDisplay ? dtObj._iRecordsDisplay : dtObj._iDisplayStart + dtObj._iDisplayLength;\n      $('div [role=\"status\"]').text(isFrench ? `Affichage de ${nf.format(startCount + 1)} à ${nf.format(showingCount)} des ${nf.format(dtObj._iRecordsDisplay)} entrées ${filtered}` : `Showing ${nf.format(startCount + 1)} to ${nf.format(showingCount)} of ${nf.format(dtObj._iRecordsDisplay)} entries ${filtered}`);\n      $(\".first\").text(isFrench ? 'Le début' : 'First');\n      $(\".previous\").text(isFrench ? 'Précédent' : 'Previous');\n      $(\".next\").text(isFrench ? 'Suivant' : 'Next');\n      $(\".last\").text(isFrench ? 'Dernière' : 'Last');\n    }\n    sortData(data, by, type) {\n      let sorted = [];\n      sorted = this.sortByColumn(data, type, 'name');\n      return sorted;\n    }\n    sortByColumn(data, type, column) {\n      data.sort((a, b) => {\n        var nameA = a[column] ? a[column].toUpperCase() : '';\n        var nameB = b[column] ? b[column].toUpperCase() : '';\n        if (type == 'asc') {\n          if (nameA < nameB) {\n            return -1;\n          }\n          if (nameA > nameB) {\n            return 1;\n          }\n        } else {\n          if (nameA > nameB) {\n            return -1;\n          }\n          if (nameA < nameB) {\n            return 1;\n          }\n        }\n        // names must be equal\n        return 0;\n      });\n      return data;\n    }\n    redraw() {\n      if (this.searchTerm) {\n        this.search(this.searchTerm);\n      } else {\n        this.dtElement.dtInstance.then(dtInstance => {\n          dtInstance.draw();\n        });\n      }\n    }\n    onPaste() {}\n    reloadCurrentRoute() {\n      let currentUrl = this.router.url;\n      this.router.navigateByUrl('/', {\n        skipLocationChange: true\n      }).then(() => {\n        this.router.navigate([currentUrl]);\n      });\n    }\n    assignOrg() {\n      this.orgSelected.emit(this.selectedOrg);\n    }\n  }\n  OrganizationsListComponent.ɵfac = function OrganizationsListComponent_Factory(t) {\n    return new (t || OrganizationsListComponent)(i0.ɵɵdirectiveInject(i1.CommonService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CustomTranslateService), i0.ɵɵdirectiveInject(i4.OrganizationsService), i0.ɵɵdirectiveInject(i5.SsoAuthService), i0.ɵɵdirectiveInject(i6.NgbModal), i0.ɵɵdirectiveInject(i7.HttpClient), i0.ɵɵdirectiveInject(i8.Title), i0.ɵɵdirectiveInject(i9.ApiUsageService), i0.ɵɵdirectiveInject(i10.OrganizationApiService));\n  };\n  OrganizationsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrganizationsListComponent,\n    selectors: [[\"app-organizations-list\"]],\n    viewQuery: function OrganizationsListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(DataTableDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deleteModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dtElement = _t.first);\n      }\n    },\n    inputs: {\n      fromOrphanDevice: \"fromOrphanDevice\"\n    },\n    outputs: {\n      orgSelected: \"orgSelected\"\n    },\n    decls: 23,\n    vars: 9,\n    consts: [[1, \"container\", \"position-relative\"], [\"class\", \"loader\", 4, \"ngIf\"], [\"class\", \"w-100 alert alert-danger  fade show\", 4, \"ngIf\"], [\"class\", \"w-100 alert alert-success fade show\", 4, \"ngIf\"], [1, \"row\", \"mt-3\"], [1, \"col\", \"ccl-title\"], [1, \"row\", \"my-3\"], [1, \"col-md-6\", \"offset-md-6\", \"pr-0\"], [1, \"text-right\", \"flat-right\"], [1, \"row\"], [1, \"col-md-5\"], [\"class\", \"btn-default primary px-3\", 3, \"click\", 4, \"ngIf\"], [1, \"col-md-7\"], [1, \"ccl-form\"], [\"type\", \"text\", \"id\", \"org-list-search\", \"placeholder\", \"\", 1, \"ccl-input\", 3, \"ngModel\", \"placeholder\", \"ngModelChange\", \"paste\", \"search\", \"input\"], [\"searchBar\", \"\"], [1, \"clear-icon\", 3, \"hidden\", \"click\"], [\"src\", \"assets/img/close-icon.svg\"], [1, \"row\", \"my-3\", \"mh-65\"], [\"class\", \"col-md-12\", 3, \"hidden\", 4, \"ngIf\"], [\"deleteModal\", \"\"], [1, \"loader\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\"], [1, \"error-img\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [1, \"w-100\", \"alert\", \"alert-success\", \"fade\", \"show\"], [1, \"success-alert-wrapper\"], [1, \"success-alert-icon\"], [\"src\", \"../../../assets/img/success-icon.svg\", \"alt\", \"\"], [1, \"success-alert-msg\"], [3, \"innerHtml\"], [1, \"success-alert-close\"], [1, \"btn-default\", \"primary\", \"px-3\", 3, \"click\"], [1, \"col-md-12\", 3, \"hidden\"], [\"id\", \"organizations-table\", \"width\", \"100%\", \"datatable\", \"\", 1, \"row-border\", \"hover\", \"table-alter\", 3, \"dtOptions\"], [4, \"ngIf\"], [\"id\", \"assignOrg\", \"class\", \"btn-default primary px-3 mt-3\", 3, \"click\", 4, \"ngIf\"], [3, \"id\", 4, \"ngFor\", \"ngForOf\"], [3, \"id\"], [\"class\", \"actions\", 4, \"ngIf\"], [\"type\", \"radio\", \"id\", \"orgListSelection\", 1, \"ml-2\", 3, \"ngModel\", \"value\", \"ngModelChange\"], [1, \"actions\"], [\"class\", \"btn-user-access\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"id\", \"org-detail-btn\", 1, \"btn-action-icon\", 3, \"title\", \"click\"], [1, \"fas\", \"fa-pencil-alt\", \"primary\"], [\"id\", \"users-btn\", 1, \"btn-action-icon\", 3, \"title\", \"click\"], [1, \"fas\", \"fa-user\", \"primary\"], [\"id\", \"delete-org-btn\", 1, \"btn-action-icon\", 3, \"title\", \"click\"], [1, \"fas\", \"fa-trash-alt\", \"primary\"], [1, \"btn-user-access\", 3, \"title\", \"click\"], [\"src\", \"assets/images/user_secure_access_icon.png\"], [\"colspan\", \"5\", 1, \"no-data-available\"], [\"id\", \"assignOrg\", 1, \"btn-default\", \"primary\", \"px-3\", \"mt-3\", 3, \"click\"], [1, \"modal-header\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn-default\", \"primary\", \"px-3\", 3, \"click\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn-default\", \"btn-dft\", \"py-1\", \"px-3\", 3, \"click\"]],\n    template: function OrganizationsListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r45 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, OrganizationsListComponent_div_1_Template, 5, 1, \"div\", 1);\n        i0.ɵɵtemplate(2, OrganizationsListComponent_div_2_Template, 6, 1, \"div\", 2);\n        i0.ɵɵtemplate(3, OrganizationsListComponent_div_3_Template, 9, 1, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"div\", 8);\n        i0.ɵɵelementStart(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵtemplate(12, OrganizationsListComponent_button_12_Template, 2, 1, \"button\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 12);\n        i0.ɵɵelementStart(14, \"div\", 13);\n        i0.ɵɵelementStart(15, \"input\", 14, 15);\n        i0.ɵɵlistener(\"ngModelChange\", function OrganizationsListComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.searchTerm = $event;\n        })(\"paste\", function OrganizationsListComponent_Template_input_paste_15_listener($event) {\n          return ctx.search($event.target.value);\n        })(\"search\", function OrganizationsListComponent_Template_input_search_15_listener($event) {\n          return ctx.search($event.target.value);\n        })(\"input\", function OrganizationsListComponent_Template_input_input_15_listener($event) {\n          return ctx.search($event.target.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"span\", 16);\n        i0.ɵɵlistener(\"click\", function OrganizationsListComponent_Template_span_click_17_listener() {\n          i0.ɵɵrestoreView(_r45);\n          const _r4 = i0.ɵɵreference(16);\n          return ctx.onSearchClearing(_r4);\n        });\n        i0.ɵɵelement(18, \"img\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 18);\n        i0.ɵɵtemplate(20, OrganizationsListComponent_div_20_Template, 18, 11, \"div\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, OrganizationsListComponent_ng_template_21_Template, 12, 5, \"ng-template\", null, 20, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.success);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.language.allOrganizations);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !ctx.fromOrphanDevice);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.language.searchOrganizations);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchTerm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.searchClearable);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.countReceived);\n      }\n    },\n    directives: [i11.NgIf, i12.DefaultValueAccessor, i12.NgControlStatus, i12.NgModel, i13.DataTableDirective, i11.NgForOf, i12.RadioControlValueAccessor],\n    styles: [\"td.actions[_ngcontent-%COMP%]{white-space:nowrap}.btn-user-access[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}.btn-action-icon[_ngcontent-%COMP%]{background-color:transparent;font-size:13.5px;border:none}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:30px;top:5px;cursor:pointer;width:12px}\"]\n  });\n  return OrganizationsListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}