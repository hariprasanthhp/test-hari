{"ast":null,"code":"import { isArray } from 'jquery';\n// import { CustomTranslateService } from '../../../shared/services/custom-translate.service';\nimport { DataTableDirective } from 'angular-datatables';\nimport { Subject, forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/common-functions.service\";\nimport * as i2 from \"../../services/network-devices-api.service\";\nimport * as i3 from \"../../../shared/services/export-excel.service\";\nimport * as i4 from \"../../services/data-tablecreator.service\";\nimport * as i5 from \"src/app-services/translate.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"src/app/shared/services/sso-auth.service\";\nimport * as i8 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i9 from \"src/app/sys-admin/services/common.service\";\nimport * as i10 from \"@angular/platform-browser\";\nimport * as i11 from \"src/app/shared/services/common-functions.service\";\nimport * as i12 from \"@angular/common\";\nconst _c0 = [\"infoModal\"];\nconst _c1 = [\"deleteModal\"];\nconst _c2 = [\"multiDeleteModal\"];\nconst _c3 = [\"importModal\"];\nconst _c4 = function () {\n  return [\"active\"];\n};\nfunction DevicesComponent_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 3);\n    i0.ɵɵelementStart(1, \"a\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const menu_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", menu_r1.title);\n    i0.ɵɵpropertyInterpolate(\"routerLink\", menu_r1.link);\n    i0.ɵɵproperty(\"routerLinkActive\", i0.ɵɵpureFunction0(4, _c4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(menu_r1.title);\n  }\n}\nconst $ = require('jquery');\nexport let DevicesComponent = /*#__PURE__*/(() => {\n  class DevicesComponent {\n    constructor(commonFunctionsService, api, exportExcel,\n    // private elementRef: ElementRef,\n    dataTablecreatorService,\n    // private customTranslateService: CustomTranslateService,\n    translateService, router, sso, dialogService, commonOrgService, titleService, common) {\n      this.commonFunctionsService = commonFunctionsService;\n      this.api = api;\n      this.exportExcel = exportExcel;\n      this.dataTablecreatorService = dataTablecreatorService;\n      this.translateService = translateService;\n      this.router = router;\n      this.sso = sso;\n      this.dialogService = dialogService;\n      this.commonOrgService = commonOrgService;\n      this.titleService = titleService;\n      this.common = common;\n      this.infoTitle = '';\n      this.infoBody = '';\n      this.pageAvailable = false;\n      this.formVisible = false;\n      this.buttonVisible = true;\n      this.dataAvailable = false;\n      this.showingDeviceIpv6 = undefined || null;\n      this.selectOptions = [{\n        name: 'No',\n        value: false\n      }, {\n        name: 'Yes',\n        value: true\n      }];\n      this.flowType = [{\n        name: 'netflow'\n      }, {\n        name: 'cflow'\n      }, {\n        name: 'sflow'\n      }];\n      this.importTableOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 10,\n        order: [0, 'asc'],\n        \"scrollX\": true,\n        dom: 'tipr'\n      };\n      this.statusTableOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 10\n      };\n      this.tablePreview = false;\n      this.currentTableRowCount = 0;\n      this.tableOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 10,\n        rowId: '_id',\n        //\"dom\": '<\"top\"i>rt<\"bottom\"flp><\"clear\">',\n        \"scrollX\": true,\n        stateSave: true,\n        order: [1, 'asc'],\n        columnDefs: [{\n          targets: [0],\n          orderable: false\n        }],\n        drawCallback: settings => {\n          let col = settings.aaSorting[0][0] ? settings.aaSorting[0][0] : 1;\n          let type = settings.aaSorting[0][1] ? settings.aaSorting[0][1] : 'asc';\n          this.sortData = {\n            column: col,\n            type: type\n          };\n          setTimeout(() => {\n            this.resetDelete();\n          }, 0);\n          this.currentTableRowCount = settings.aiDisplay.length;\n          let total = settings.aoData.length;\n          let length = settings._iDisplayLength;\n          if (total <= length) {\n            $(settings.nTableWrapper).find(`#${settings.sTableId}_last`).addClass('disabled');\n          }\n        }\n      };\n      this.deviceData = [];\n      this.deviceIPError = false;\n      this.deviceIP6Error = false;\n      this.ignoreUpStream = false;\n      this.ignoreDownStream = false;\n      this.ignoreLocal = false;\n      this.samplingLimitError = false;\n      this.geoCoordinateError = false;\n      this.addressError = false;\n      // CCL-37642 & CCL-39112\n      // observationDomain: string = '';\n      // editObservationDomain: string = '';\n      this.validation = false;\n      this.empty = {\n        'Device IPv4': '',\n        'Device IPv6': '',\n        'Sampling': '',\n        'Receiving Port': '',\n        'Ignore Upstream': '',\n        'Ignore Downstream': '',\n        'Host Name': '',\n        'Ignore Local': '',\n        'Name': '',\n        /* CCL-42554 */\n        // orgId: '',\n        // tenantId: '',\n        'Rate Limit': '',\n        // CCL-37642 & CCL-39112\n        // observationId: '',\n        'Flow Type': ''\n      };\n      this.loading = true;\n      this.dtOptions = {};\n      this.dtTrigger = new Subject();\n      this.isRerender = false;\n      this.editIgnoreUpStream = false;\n      this.editIgnoreDownStream = false;\n      this.editIgnoreLocal = false;\n      this.storageData = {};\n      this.errorInfo = '';\n      this.successInfo = '';\n      this.importUpdateASCreate = [];\n      this.sortData = {\n        column: 1,\n        type: 'asc'\n      };\n      this.columnName = {\n        deviceIpV4: 'Device IPv4',\n        deviceIpV6: 'Device IPv6',\n        samplingRate: 'Sampling',\n        receivingPort: 'Receiving Port',\n        ignoreUpstream: 'Ignore Upstream',\n        ignoreDownstream: 'Ignore Downstream',\n        hostName: 'Host Name',\n        ignoreInternal: 'Ignore Local',\n        name: 'Name',\n        /* CCL-42554 */\n        // orgId: 'Org Id',\n        // tenantId: 'Tenant Id',\n        rateLimit: 'Rate Limit'\n      };\n      this.invalidImportDevice = [];\n      this.menus = [];\n      this.deleteIds = [];\n      this.deviceIps = [];\n      this.deleteDevices = [];\n      this.language = this.translateService.defualtLanguage;\n      if (this.language) {\n        this.pageAvailable = true;\n      }\n      this.menus = [{\n        title: this.language.Configuration,\n        link: 'devices-configuration',\n        subMenuLink: `/${this.MODULE}/flowAnalyze/network/devices/devices-configuration`\n      }, {\n        title: this.language.status,\n        link: 'devices-status',\n        subMenuLink: `/${this.MODULE}/flowAnalyze/network/devices/devices-status`\n      }];\n      this.translateSubscribe = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        this.menus[0].title = this.language.Configuration, this.menus[1].title = this.language.status;\n        this.dataAvailable = false;\n        this.isRerender = true;\n        this.titleService.setTitle(`${this.language['devices']} - ${this.language['Network']} - ${this.language['flowconfiguration']} - ${this.MODULE === 'systemAdministration' ? this.language['System Administration'] : this.language['administration']} - ${this.language['Calix Cloud']}`);\n        this.tableCreator('language');\n      });\n      this.commonOrgService.closeAlert();\n      let url = this.router.url;\n      this.frTable = this.translateService.fr;\n      this.ORG_ID = this.sso.getOrganizationID(url);\n      this.MODULE = this.sso.getRedirectModule(url);\n      this.titleService.setTitle(`${this.language['devices']} - ${this.language['Network']} - ${this.language['flowconfiguration']} - ${this.MODULE === 'systemAdministration' ? this.language['System Administration'] : this.language['administration']} - ${this.language['Calix Cloud']}`);\n    }\n    ngOnInit() {\n      this.apiLoader();\n      this.tableLanguageOptions();\n      const tokenData = JSON.parse(localStorage.getItem(\"calix.login_data\"));\n      this.storageData[\"clientIp\"] = tokenData === null || tokenData === void 0 ? void 0 : tokenData.clientIp;\n      this.storageData[\"UserId\"] = tokenData === null || tokenData === void 0 ? void 0 : tokenData.UserId;\n      // this.subscription = this.dataTablecreatorService.tableOptionsData.subscribe((res: any) => {\n      //   this.invalidImportDevice = []\n      //   try {\n      //     let importValidationFlag = true;\n      //     (res || []).forEach(el => {\n      //       this.commonFunctionsService.keysFromColumnName(el, this.columnName)\n      //       if (el.name.length && el.name.length > 64) {\n      //         this.invalidImportDevice.push(el)\n      //         this.infoTitle = this.language['Invalid Value'];\n      //         this.infoBody = `${this.language['Invalid Device Name']} - Name should not exceed 64 characters.`;\n      //         importValidationFlag = false;\n      //         this.openInfoModal(true);\n      //         return;\n      //       }\n      //       if (el.samplingRate) {\n      //         this.samplingRateValidator(Number(el.samplingRate));\n      //         if (this.samplingLimitError) {\n      //           this.infoTitle = this.language['Invalid value'];\n      //           this.infoBody = this.language['The sampling rate should be an integer value greater than 0 and less than 65536.'];\n      //           importValidationFlag = false;\n      //           this.openInfoModal(false);\n      //           return;\n      //         }\n      //       }\n      //     })\n      //     if (importValidationFlag) {\n      //       this.recreateTable = res;\n      //       this.importSubmit(true);\n      //     }\n      //   } catch (ex) {\n      //   }\n      // });\n      this.closeAlert();\n      this.removeState();\n    }\n    ngAfterViewInit() {\n      this.loaded = true;\n    }\n    ngOnDestroy() {\n      if (this.dtTrigger) {\n        this.dtTrigger.unsubscribe();\n      }\n      if (this.translateSubscribe) {\n        this.translateSubscribe.unsubscribe();\n      }\n      if (this.subscription) this.subscription.unsubscribe();\n      if (this.deviceListSubs) {\n        this.deviceListSubs.unsubscribe();\n      }\n      if (this.deviceAddSubs) {\n        this.deviceAddSubs.unsubscribe();\n      }\n      if (this.deviceUpdateSubs) {\n        this.deviceUpdateSubs.unsubscribe();\n      }\n      if (this.deviceDeleteSubs) {\n        this.deviceDeleteSubs.unsubscribe();\n      }\n      if (this.deviceExportSubs) {\n        this.deviceExportSubs.unsubscribe();\n      }\n      if (this.deviceImportSubs) {\n        this.deviceImportSubs.unsubscribe();\n      }\n    }\n    apiLoader() {\n      this.deviceListSubs = this.api.DeviceList(this.ORG_ID).subscribe(res => {\n        this.deviceData = [...res];\n        if (this.deviceData) {\n          this.deviceData = this.dataConvertor(this.deviceData);\n          this.deviceData = [...this.deviceData];\n          this.tableCreator();\n          if (this.isRerender) {\n            this.rerender();\n            this.isRerender = false;\n          } else {\n            this.dtTrigger.next();\n            this.loading = false;\n          }\n          setTimeout(() => {\n            this.resetDelete();\n          }, 100);\n        }\n      }, err => {\n        this.pageErrorHandle(err);\n        this.deviceData = [];\n        this.tableCreator();\n        if (this.isRerender) {\n          this.rerender();\n          this.isRerender = false;\n        } else {\n          this.dtTrigger.next();\n          this.loading = false;\n        }\n      });\n    }\n    dataConvertor(array) {\n      let check = isArray(array);\n      if (check) {\n        array.forEach(el => {\n          let deviceIp = el.deviceIpV4 == null || el.deviceIpV4 == '' ? el.deviceIpV6 == null || el.deviceIpV6 == '' ? '' : el.deviceIpV6 : el.deviceIpV4;\n          let hostName = el.hostName == null || el.deviceIpV4 == '' ? '' : el.hostName;\n          el.deviceIp = deviceIp;\n          el['address'] = el.address ? el.address : '';\n          el['flowType'] = el.flowType ? el.flowType : '';\n          el['observationName'] = '';\n        });\n      }\n      return array;\n    }\n    tableCreator(type) {\n      let that = this;\n      this.tableOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 10,\n        rowId: '_id',\n        \"scrollX\": true,\n        stateSave: true,\n        order: [that.sortData.column, that.sortData.type],\n        columnDefs: [{\n          targets: [0],\n          orderable: false\n        }],\n        drawCallback: settings => {\n          let col = settings.aaSorting[0][0] ? settings.aaSorting[0][0] : 1;\n          let type = settings.aaSorting[0][1] ? settings.aaSorting[0][1] : 'asc';\n          that.sortData = {\n            column: col,\n            type: type\n          };\n          setTimeout(() => {\n            this.resetDelete();\n          }, 0);\n          this.currentTableRowCount = settings.aiDisplay.length;\n          let total = settings.aoData.length;\n          let length = settings._iDisplayLength;\n          if (total <= length) {\n            $(settings.nTableWrapper).find('#device-table_last').addClass('disabled');\n          } else {\n            $(settings.nTableWrapper).find('#device-table_last').removeClass('disabled');\n          }\n        }\n      };\n      this.tableLanguageOptions();\n      if (type && type == 'language') {\n        setTimeout(() => {\n          this.dataAvailable = true;\n          this.rerender();\n        }, 200);\n      } else {\n        setTimeout(() => {\n          this.dataAvailable = true;\n          this.loading = false;\n        }, 500);\n      }\n    }\n    tableLanguageOptions() {\n      if (this.language.fileLanguage == 'fr') {\n        this.tableOptions.language = this.frTable;\n      } else if (this.language.fileLanguage == 'es') {\n        this.tableOptions.language = this.translateService.es;\n      } else if (this.language.fileLanguage == 'de_DE') {\n        this.tableOptions.language = this.translateService.de_DE;\n      } else if (this.language.fileLanguage == 'en' && this.tableOptions.language) {\n        delete this.tableOptions.language;\n      }\n    }\n    rerender() {\n      this.dtElement.dtInstance.then(dtInstance => {\n        dtInstance.destroy();\n        this.tableOptions.order = [this.sortData.column, this.sortData.type], setTimeout(() => {\n          this.dtTrigger.next();\n        }, 10);\n      });\n    }\n    search(term) {\n      this.dtElement.dtInstance.then(dtInstance => {\n        dtInstance.search(term).draw();\n      });\n    }\n    create() {\n      this.buttonVisible = false;\n      this.formVisible = true;\n    }\n    submit() {\n      this.validation = false;\n      this.deviceIPError = false;\n      this.deviceIP6Error = false;\n      this.ipv4 = undefined;\n      this.ipv6 = undefined;\n      this.name = this.name ? this.name.trim() : '';\n      if (this.name.length && this.name.length > 64) {\n        this.infoTitle = this.language['Invalid Value'];\n        this.infoBody = `${this.language['Invalid Device Name']} - Name should not exceed 64 characters.`;\n        this.openInfoModal(false);\n        return;\n      }\n      if (this.deviceIPV4) {\n        this.deviceIpValidatorIpv4(this.deviceIPV4);\n      }\n      if (this.deviceIPV6) {\n        this.deviceIpValidatorIpv6(this.deviceIPV6);\n      }\n      if (this.deviceIPError || this.deviceIP6Error || !this.deviceIPV4 && !this.deviceIPV6) {\n        this.infoTitle = this.language['Invalid request'];\n        this.infoBody = this.language['Invalid IP address'];\n        this.openInfoModal(false);\n        return;\n      }\n      this.samplingRateValidator(this.samplingLimit);\n      if (this.samplingLimitError) {\n        this.infoTitle = this.language['Invalid value'];\n        this.infoBody = this.language['The sampling rate should be an integer value greater than 0 and less than 65536.'];\n        /* if (this.samplingLimit) {\r\n          this.infoBody = 'Invalid Sampling rate value';\r\n        } else {\r\n          this.infoBody = this.language['Sampling rate must be in digits'];\r\n        } */\n        this.openInfoModal(false);\n        return;\n      }\n      let reqBodyObj = {\n        deviceIpV4: this.ipv4 ? this.ipv4 : '',\n        deviceIpV6: this.ipv6 ? this.ipv6 : '',\n        ignoreDownstream: this.ignoreDownStream,\n        ignoreInternal: this.ignoreLocal,\n        ignoreUpstream: this.ignoreUpStream,\n        // orgId: +localStorage.getItem('calix.org_id'),\n        orgId: this.ORG_ID ? this.ORG_ID : 50,\n        samplingRate: +this.samplingLimit,\n        //hostName: this.hostName ? this.hostName.trim() : '',\n        name: this.name ? this.name.trim() : '',\n        // CCL-37642 & CCL-39112\n        // observationId: this.observationDomain ? this.observationDomain.trim() : '',\n        rateLimit: 0,\n        receivingPort: 2058,\n        tenantId: 0,\n        address: this.address ? this.address.trim() : ''\n      };\n      this.loading = true;\n      this.deviceAddSubs = this.api.DeviceAdd(reqBodyObj, this.ORG_ID).subscribe(res => {\n        this.isRerender = true;\n        this.cancel();\n        this.apiLoader();\n      }, err => {\n        this.pageErrorHandle(err);\n      });\n    }\n    cancel() {\n      this.formVisible = false;\n      this.buttonVisible = true;\n      this.tablePreview = false;\n      this.reset();\n    }\n    edit(item) {\n      var _a;\n      this.editData = item;\n      this.editOnValue = item._id;\n      this.editName = item.name ? item.name : '';\n      this.editHostName = item.hostName ? item.hostName : '';\n      this.editDeviceIPV4 = item.deviceIpV4;\n      this.editDeviceIPV6 = item.deviceIpV6;\n      this.editIgnoreUpStream = item.ignoreUpstream ? true : false;\n      this.editIgnoreDownStream = item.ignoreDownstream ? true : false;\n      this.editIgnoreLocal = item.ignoreInternal ? true : false;\n      this.editSamplingLimit = item.samplingRate;\n      this.editGeoCoordinate = item.tenantId;\n      let ip = (_a = item.deviceIpV4) !== null && _a !== void 0 ? _a : item.deviceIpV6;\n      if (this.deleteIds.indexOf(item._id) !== -1) {\n        this.deleteIds.splice(this.deleteIds.indexOf(item._id), 1);\n        this.deviceIps.splice(this.deviceIps.indexOf(ip), 1);\n        this.deleteDevices = this.deleteDevices.filter(obj => obj._id !== item._id);\n        let tot = $('input[name^=\"delete_device_id\"]').length;\n        if (this.deleteIds.length) {\n          if (this.deleteIds.length != tot) {\n            $('#selectDeselectAll').prop('checked', false);\n            $('#selectDeselectAll-span').show();\n          } else {\n            $('#selectDeselectAll-span').hide();\n          }\n        } else {\n          $('#selectDeselectAll').prop('checked', false);\n          $('#selectDeselectAll-span').hide();\n        }\n        // CCL-37642 & CCL-39112\n        // this.editObservationDomain = item.observationId;\n      }\n    }\n\n    updateSave() {\n      this.deviceIPError = false;\n      this.deviceIP6Error = false;\n      this.ipv4 = \"\";\n      this.ipv6 = \"\";\n      // this.deviceIpValidator(this.editDeviceIP);\n      this.editDeviceIPV6 = this.editDeviceIPV6 ? this.editDeviceIPV6.trim() : \"\";\n      this.editDeviceIPV4 = this.editDeviceIPV4 ? this.editDeviceIPV4.trim() : \"\";\n      this.editName = this.editName ? this.editName.trim() : \"\";\n      if (this.editName.length && this.editName.length > 64) {\n        this.infoTitle = this.language['Invalid Value'];\n        this.infoBody = `${this.language['Invalid Device Name']} - Name should not exceed 64 characters.`;\n        this.openInfoModal(false);\n        return;\n      }\n      if (this.editDeviceIPV6) this.deviceIpValidatorIpv6(this.editDeviceIPV6);\n      if (this.editDeviceIPV4) this.deviceIpValidatorIpv4(this.editDeviceIPV4);\n      if (this.deviceIPError || this.deviceIP6Error || !this.editDeviceIPV4 && !this.editDeviceIPV6) {\n        this.infoTitle = this.language['Invalid request'];\n        this.infoBody = this.language['Invalid IP address'];\n        this.closeModal();\n        this.modalRef = this.dialogService.open(this.infoModal);\n        return;\n      }\n      this.samplingRateValidator(this.editSamplingLimit);\n      if (this.samplingLimitError) {\n        this.infoTitle = this.language['Invalid value'];\n        this.infoBody = this.language['The sampling rate should be an integer value greater than 0 and less than 65536.'];\n        /* if (this.editSamplingLimit) {\r\n          this.infoBody = 'Invalid Sampling rate value';\r\n        } else {\r\n          this.infoBody = this.language['Sampling rate must be in digits'];\r\n        } */\n        this.openInfoModal(false);\n        return;\n      }\n      let reqBodyObj = {\n        _id: this.editData._id,\n        deviceIpV4: this.ipv4 ? this.ipv4 : '',\n        deviceIpV6: this.ipv6 ? this.ipv6 : '',\n        ignoreDownstream: this.editIgnoreDownStream,\n        ignoreInternal: this.editIgnoreLocal,\n        ignoreUpstream: this.editIgnoreUpStream,\n        // orgId: +localStorage.getItem('calix.org_id'),\n        orgId: this.ORG_ID ? this.ORG_ID : 50,\n        samplingRate: +this.editSamplingLimit,\n        //hostName: this.editHostName ? this.editHostName.trim() : '',\n        name: this.editName ? this.editName.trim() : '',\n        // CCL-37642 & CCL-39112\n        // observationId: this.editObservationDomain ? this.editObservationDomain.trim() : '',\n        rateLimit: 0,\n        receivingPort: this.editData.receivingPort ? this.editData.receivingPort : 0,\n        tenantId: 0,\n        flowType: this.editData.flowType ? this.editData.flowType : \"\"\n      };\n      this.loading = true;\n      this.deviceUpdateSubs = this.api.DeviceUpdate(this.editData._id, reqBodyObj, this.ORG_ID).subscribe(res => {\n        this.isRerender = true;\n        this.apiLoader();\n        this.cancel();\n        this.editOnValue = undefined;\n      }, err => {\n        this.pageErrorHandle(err);\n      });\n    }\n    updateCancel() {\n      this.editOnValue = undefined;\n    }\n    hideShow(id) {\n      if (this.showingDeviceIp == id) {\n        this.showingDeviceIp = undefined;\n      } else {\n        this.showingDeviceIp = id;\n      }\n    }\n    hideShowV6(id) {\n      if (this.showingDeviceIpv6 == id) {\n        this.showingDeviceIpv6 = undefined;\n      } else {\n        this.showingDeviceIpv6 = id;\n      }\n    }\n    delete(item) {\n      let ip = '';\n      if (item.deviceIpV4) {\n        ip = item.deviceIpV4;\n      } else {\n        ip = item.deviceIpV6;\n      }\n      this.deleteData = item;\n      item.name = item.name ? this.strSub(item.name) : '';\n      item.hostName = item.hostName ? this.strSub(item.hostName) : '';\n      this.infoTitle = this.language['Delete device?'];\n      //this.infoBody = `<tr><td>${item.name}</td><td>&nbsp;</td><td>${ip}</td><td>&nbsp;</td><td>${item.hostName}</td></tr>`;\n      this.closeModal();\n      this.modalRef = this.dialogService.open(this.deleteModal, {\n        backdrop: 'static',\n        keyboard: false\n      });\n    }\n    confirmDelete() {\n      let id = this.deleteData._id;\n      this.loading = true;\n      this.closeModal();\n      this.deviceDeleteSubs = this.api.DeviceDelete(id, this.ORG_ID).subscribe(res => {\n        this.deleteIds = [];\n        this.deviceIps = [];\n        this.deleteDevices = [];\n        this.isRerender = true;\n        this.apiLoader();\n      }, err => {\n        this.pageErrorHandle(err);\n      });\n    }\n    cancelDelete() {\n      this.deleteData = undefined;\n      this.closeModal();\n    }\n    getDeleteIds(e, item) {\n      var that = this;\n      let ip = '';\n      if (item.deviceIpV4) {\n        ip = item.deviceIpV4;\n      } else {\n        ip = item.deviceIpV6;\n      }\n      let deleteDevices = this.deleteDevices;\n      if (e.target.checked) {\n        if (this.deleteIds.indexOf(item._id) === -1) {\n          this.deleteIds.push(item._id);\n          this.deviceIps.push(ip);\n          // let obj: any = {};\n          // obj['id'] = item;\n          this.deleteDevices.push(item);\n          let tot = $('input[name^=\"delete_device_id\"]').length;\n          if (this.deleteIds.length == tot) {\n            $('#selectDeselectAll').prop('checked', true);\n            $('#selectDeselectAll-span').hide();\n          } else {\n            $('#selectDeselectAll-span').show();\n          }\n        }\n      } else {\n        this.deleteIds.splice(this.deleteIds.indexOf(item._id), 1);\n        this.deviceIps.splice(this.deviceIps.indexOf(ip), 1);\n        deleteDevices = deleteDevices.filter(function (obj) {\n          return obj['_id'] !== item._id;\n        });\n        this.deleteDevices = deleteDevices;\n        let tot = $('input[name^=\"delete_device_id\"]').length;\n        if (this.deleteIds.length) {\n          if (this.deleteIds.length != tot) {\n            $('#selectDeselectAll').prop('checked', false);\n            $('#selectDeselectAll-span').show();\n          } else {\n            $('#selectDeselectAll-span').hide();\n          }\n        } else {\n          $('#selectDeselectAll').prop('checked', false);\n          $('#selectDeselectAll-span').hide();\n        }\n      }\n    }\n    selectDeselectAll(isChecked) {\n      let i = 0;\n      let tot = $('input[name^=\"delete_device_id\"]').length;\n      var that = this;\n      that.deleteIds = [];\n      that.deviceIps = [];\n      that.deleteDevices = [];\n      if (isChecked) {\n        $('input[name^=\"delete_device_id\"]').each(function () {\n          if (i >= tot) {\n            return false;\n          }\n          $(this).prop('checked', true);\n          var classes = $(this).attr('class').split(' ');\n          let id = classes[0].substring('delete_device_id_'.length);\n          let d = that.deviceData.filter(el => el._id === id);\n          let ip = '';\n          if (d[0].deviceIpV4) {\n            ip = d[0].deviceIpV4;\n          } else {\n            ip = d[0].deviceIpV6;\n          }\n          that.deleteIds.push(id);\n          that.deviceIps.push(ip);\n          that.deleteDevices.push(d[0]);\n          i++;\n        });\n      } else {\n        $('input[name^=\"delete_device_id\"]').each(function () {\n          if (i >= tot) {\n            return false;\n          }\n          $(this).prop('checked', false);\n          that.deleteIds = [];\n          that.deviceIps = [];\n          that.deleteDevices = [];\n          i++;\n        });\n      }\n    }\n    deleteAllSelected() {\n      if (this.deviceIps) {\n        this.infoTitle = this.language[this.deviceIps.length === 1 ? 'Delete selected device?' : 'Delete selected devices?']; /* CCL-43157 */\n        let html = '';\n        for (let i = 0; i < this.deviceIps.length; i++) {\n          this.deleteDevices[i].name = this.deleteDevices[i].name ? this.strSub(this.deleteDevices[i].name) : '';\n          this.deleteDevices[i].hostName = this.deleteDevices[i].hostName ? this.strSub(this.deleteDevices[i].hostName) : '';\n          html += `<tr><td>${this.deleteDevices[i].name && this.deleteDevices[i].name.length > 20 ? this.deleteDevices[i].name.slice(0, 20) + '...' : this.deleteDevices[i].name}</td><td>${this.deviceIps[i]}</td><td>${this.deleteDevices[i].hostName && this.deleteDevices[i].hostName.length > 20 ? this.deleteDevices[i].hostName.slice(0, 20) + '...' : this.deleteDevices[i].hostName}</td></tr><br>`;\n        }\n        this.infoBody = html;\n        this.closeModal();\n        this.modalRef = this.dialogService.open(this.multiDeleteModal, {\n          backdrop: 'static',\n          keyboard: false\n        });\n      }\n    }\n    confirmDeleteSecleted() {\n      this.closeModal();\n      const deleteCalls = [];\n      this.deleteIds.forEach(id => {\n        deleteCalls.push(this.api.DeviceDelete(id, this.ORG_ID));\n      });\n      forkJoin(deleteCalls).subscribe(resultArray => {\n        this.deleteIds = [];\n        this.deviceIps = [];\n        this.deleteDevices = [];\n        this.isRerender = true;\n        this.cancel();\n        this.apiLoader();\n      }, err => {\n        this.pageErrorHandle(err);\n      });\n    }\n    showAllInnerCheckBox(event) {\n      $('#' + event.target.id).hide();\n      $('#selectDeselectAll').prop(\"checked\", true);\n      this.deleteIds = [];\n      this.deviceIps = [];\n      this.deleteDevices = [];\n      this.selectDeselectAll(true);\n    }\n    resetDelete() {\n      this.selectDeselectAll(false);\n      $('#selectDeselectAll').prop(\"checked\", false);\n      $('#selectDeselectAll-span').hide();\n      this.deleteIds = [];\n      this.deviceIps = [];\n      this.deleteDevices = [];\n    }\n    exportDataConvertor(array) {\n      if (Array.isArray(array)) {\n        array.forEach(el => {\n          for (const key in el) {\n            if (typeof el[key] == 'boolean') {\n              if (el[key] == true) {\n                el[key] = 'Yes';\n              } else {\n                el[key] = 'No';\n              }\n            }\n          }\n          el = this.commonFunctionsService.columnNameFromKeys(el, this.columnName);\n          // el.deviceIp = el.deviceIpV6 == null ? el.deviceIpV4 : el.deviceIpV6;\n          // delete el.deviceIpV6\n          // delete el.deviceIpV4\n          // delete el.hostName\n          // delete el.name\n          delete el.flowType; /* CCL-44460 */\n          delete el.observationId;\n          delete el.orgId; /* CCL-42554 */\n          // delete el.receivingPort\n          delete el.tenantId; /* CCL-42554 */\n          delete el._id;\n        });\n      }\n      return array;\n    }\n    export() {\n      this.deviceExportSubs = this.api.Export('devices', this.ORG_ID).subscribe(res => {\n        let name = this.commonFunctionsService.generateExportName('device_file_export', true);\n        let exportData = this.exportDataConvertor(res);\n        if (exportData.length) {\n          this.exportExcel.downLoadCSV(name, exportData);\n        } else {\n          this.exportExcel.downLoadCSV(name, [this.empty]);\n        }\n      }, err => {\n        this.pageErrorHandle(err);\n      });\n    }\n    /*\r\n        //EXPORT PDF PROCESS\r\n    exportPdf() {\r\n      this.api.Export('devices', this.ORG_ID).subscribe((res: any) => {\r\n        let name = this.commonFunctionsService.generateExportName('device');\r\n        let exportData = this.exportDataConvertor(res);\r\n        const doc = new jsPDF('l');\r\n        //doc.addPage('a3', 'portrait');\r\n        let headerArray = [], bodyData = [];\r\n        exportData.forEach(obj => {\r\n          for (let key in obj) {\r\n            if (headerArray.indexOf(key) == -1) headerArray.push(key);\r\n          }\r\n        });\r\n            exportData.forEach(obj => {\r\n          let rowData = [];\r\n          headerArray.forEach(key => {\r\n            rowData.push(obj.hasOwnProperty(key) ? obj[key] : '');\r\n          });\r\n          bodyData.push(rowData);\r\n        });\r\n            doc.autoTable({\r\n          margin: { top: 0, right: 0, bottom: 0, left: 0 },\r\n          pageBreak: 'auto',\r\n          theme: 'striped',\r\n          head: [headerArray],\r\n          body: bodyData,\r\n          columnStyles: {\r\n            0: { columnWidth: 35 },\r\n            1: { columnWidth: 40 },\r\n            2: { columnWidth: 15 },\r\n            3: { columnWidth: 15 },\r\n            4: { columnWidth: 15 },\r\n            5: { columnWidth: 15 },\r\n            6: { columnWidth: 50 },\r\n            7: { columnWidth: 15 },\r\n            8: { columnWidth: 40 },\r\n            9: { columnWidth: 15 },\r\n            10: { columnWidth: 10 },\r\n            11: { columnWidth: 15 },\r\n            12: { columnWidth: 18 }\r\n          }\r\n        });\r\n            doc.save(`${name}.pdf`);\r\n      });\r\n    }\r\n    */\n    fullImportUpload() {\n      this.infoTitle = this.language.fullImport;\n      this.infoBody = this.language.fullImportPrompt;\n      this.closeModal();\n      this.modalRef = this.dialogService.open(this.importModal, {\n        backdrop: 'static',\n        keyboard: false\n      });\n    }\n    proceedImport() {\n      this.closeModal();\n      $(\"#fullImportUpload\").click();\n    }\n    fullImport(importType, file) {\n      sessionStorage.setItem('importType', importType);\n      this.dataTablecreatorService.generateJsonFromCsv(file, this.deviceData);\n    }\n    tableDataRecreate(excelData) {\n      let tempRecreateTable,\n        existingIPs = [],\n        checkedIPs = [],\n        noActionRequired = [],\n        tempDeviceData = Object.assign([], this.deviceData);\n      tempDeviceData.forEach(obj => {\n        if (obj.deviceIpV4 && obj.deviceIpV4.trim()) existingIPs.push(obj.deviceIpV4);else {\n          obj.deviceIpV4 = \"\";\n          existingIPs.push(\"@@@$@@@\"); //Temp value to fill gap of IPV4\n        }\n\n        if (obj.deviceIpV6 && obj.deviceIpV6.trim()) existingIPs.push(obj.deviceIpV6);else {\n          obj.deviceIpV6 = \"\";\n          existingIPs.push(\"@@@$@@@\"); //Temp value to fill gap of IPV6\n        }\n      });\n\n      const ipV4Regex = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\n      const ipV6Regex = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n      excelData.forEach((excelObj, i) => {\n        let index = existingIPs.indexOf(excelObj.deviceIpV4) > -1 ? existingIPs.indexOf(excelObj.deviceIpV4) : existingIPs.indexOf(excelObj.deviceIpV6) > -1 ? existingIPs.indexOf(excelObj.deviceIpV6) : -1;\n        if ((excelObj.deviceIpV4.trim() != \"\" || excelObj.deviceIpV6.trim() != \"\") && index + 1) {\n          const isOdd = index % 2 === 0 ? 0 : 1;\n          index = isOdd ? (index - 1) / 2 : index / 2;\n          if (excelObj.receivingPort != \"\" && excelObj.receivingPort > 0 && excelObj.receivingPort != tempDeviceData[index][\"receivingPort\"] && excelObj.receivingPort != 2058) excelObj[\"action\"] = \"Invalid receiving port, it should be 2058\";\n          if (excelObj.flowType && excelObj.flowType.trim() && ![\"netflow\", \"cflow\", \"sflow\"].includes(excelObj.flowType)) excelObj[\"action\"] = \"Invalid flow type, it should be [netflow, cflow, sflow]\";\n          if (checkedIPs.includes(excelObj[\"deviceIpV4\"]) || checkedIPs.includes(excelObj[\"deviceIpV6\"])) excelObj[\"action\"] = \"Device Ip already exist in File .This will be ignored.\";\n          if (excelObj.deviceIpV4.trim() != \"\" && !ipV4Regex.test(excelObj.deviceIpV4) || excelObj.deviceIpV6.trim() != \"\" && !ipV6Regex.test(excelObj.deviceIpV6)) excelObj[\"action\"] = \"Invalid Device IP\";\n          if (!excelObj.hasOwnProperty(\"action\")) {\n            Object.keys(excelObj).forEach(key => {\n              if (tempDeviceData[index][key] === true) tempDeviceData[index][key] = \"Yes\";else if (tempDeviceData[index][key] === false) tempDeviceData[index][key] = \"No\";\n              if (excelObj[key] != tempDeviceData[index][key]) {\n                excelObj[\"action\"] = \"Update\";\n                excelObj[\"_id\"] = tempDeviceData[index][\"_id\"];\n              }\n            });\n          }\n          if (!excelObj.hasOwnProperty(\"action\")) noActionRequired.push(i);\n          this.previewTableHeader.forEach(header => {\n            excelObj[`old_${header}`] = tempDeviceData[index][header];\n          });\n          if (tempDeviceData[index][\"deviceIpV4\"].trim()) checkedIPs.push(tempDeviceData[index][\"deviceIpV4\"]);\n          if (tempDeviceData[index][\"deviceIpV6\"].trim()) checkedIPs.push(tempDeviceData[index][\"deviceIpV6\"]);\n          existingIPs.splice(index * 2, 2);\n          tempDeviceData.splice(index, 1);\n        } else {\n          if (excelObj.flowType && excelObj.flowType.trim() && ![\"netflow\", \"cflow\", \"sflow\"].includes(excelObj.flowType)) excelObj[\"action\"] = \"Invalid flow type, it should be [netflow, cflow, sflow]\";\n          if (excelObj.deviceIpV4.trim() != \"\" && !ipV4Regex.test(excelObj.deviceIpV4) || excelObj.deviceIpV6.trim() != \"\" && !ipV6Regex.test(excelObj.deviceIpV6)) excelObj[\"action\"] = \"Invalid Device IP\";\n          if (!excelObj.hasOwnProperty(\"action\")) {\n            excelObj[\"action\"] = \"Create\";\n          }\n          if (excelObj[\"deviceIpV4\"].trim()) checkedIPs.push(excelObj[\"deviceIpV4\"]);\n          if (excelObj[\"deviceIpV6\"].trim()) checkedIPs.push(excelObj[\"deviceIpV6\"]);\n          this.previewTableHeader.forEach(header => {\n            excelObj[`old_${header}`] = \"\";\n          });\n        }\n        for (const [key, value] of Object.entries(excelObj)) {\n          if (value === true) excelObj[key] = \"Yes\";else if (value === false) excelObj[key] = \"No\";\n        }\n      });\n      tempRecreateTable = Object.assign([], excelData);\n      let previewResult = Object.assign([], excelData);\n      noActionRequired = noActionRequired.sort(function (a, b) {\n        return b - a;\n      });\n      noActionRequired.forEach(ind => {\n        previewResult.splice(ind, 1);\n      });\n      if (tempDeviceData.length && sessionStorage.getItem('importType') != \"IncImport\") {\n        tempDeviceData.forEach(element => {\n          element[\"action\"] = \"Delete\";\n          for (const [key, value] of Object.entries(element)) {\n            if (value === true) element[key] = \"Yes\";else if (value === false) element[key] = \"No\";\n          }\n          previewResult.push(element);\n        });\n      }\n      this.recreateTable = tempRecreateTable;\n      return previewResult;\n    }\n    appendOldPrefix(head) {\n      return `old_${head}`;\n    }\n    previewHeader() {\n      this.previewHeaderValue = [\n        /* { \"key\": \"rateLimit\", \"title\": `${this.language.name}` },\r\n        { \"key\": \"rateLimit\", \"title\": `${this.language.old} ${this.language.name}` },  */\n      ];\n    }\n    importSubmit(isDryRun = false) {\n      let importType = sessionStorage.getItem('importType');\n      let requestObject = {\n        \"clientIP\": this.storageData[\"clientIp\"],\n        \"dry_run\": isDryRun,\n        \"full_import\": importType == 'FullImport' ? true : false,\n        \"import_data\": [],\n        \"orgId\": this.ORG_ID,\n        \"userId\": this.storageData[\"UserId\"]\n      };\n      let action;\n      /* if (importType == 'FullImport') {\r\n        requestObject.full_import = true;\r\n        action = 'Create';\r\n      } else {\r\n        requestObject.full_import = false;\r\n        action = 'Update';\r\n      } */\n      let data = [],\n        deleteObj = [];\n      if (isDryRun) {\n        action = 'Create';\n        this.recreateTable.forEach(element => {\n          if ((element === null || element === void 0 ? void 0 : element.deviceIpV4) || (element === null || element === void 0 ? void 0 : element.deviceIpV6)) {\n            data.push(this.importTemplate(element, action));\n          }\n        });\n      } else {\n        this.recreateTable.forEach(element => {\n          data.push(this.importTemplate(element));\n        });\n        ;\n      }\n      if (isDryRun) {\n        const dataLength = data.length;\n        this.deviceData.forEach(existingObj => {\n          let isAvailable = false;\n          for (let i = 0; i < dataLength; i++) {\n            if (existingObj.deviceIpV4 && existingObj.deviceIpV4 == data[i].deviceIpV4 || existingObj.deviceIpV6 && existingObj.deviceIpV6 == data[i].deviceIpV6) {\n              isAvailable = true;\n              if (importType == 'FullImport') {\n                data[i][\"action\"] = \"Create\";\n                this.importUpdateASCreate.push(existingObj);\n              } else {\n                data[i][\"action\"] = \"Update\";\n              }\n            }\n          }\n          if (!isAvailable && requestObject.full_import) {\n            const tempObj = Object.assign({}, existingObj);\n            deleteObj.push(this.importTemplate(tempObj, \"Delete\"));\n          }\n        });\n      } else {\n        data = data.filter(obj => {\n          if ([\"Create\", \"Update\"].includes(obj.action)) return obj;\n        });\n        if (data.length == 0) {\n          this.cancel();\n          return;\n        }\n      }\n      if (!data.length) {\n        this.infoTitle = this.language.noAvailableChange;\n        this.infoBody = '';\n        this.openInfoModal(false);\n        return;\n      }\n      requestObject.import_data = data;\n      this.deviceImportSubs = this.api.Import('devices', requestObject, this.ORG_ID).subscribe(res => {\n        if (isDryRun) {\n          this.enableImportSubmit = false;\n          res = res.map(obj => {\n            obj[\"action\"] = obj[\"validationResult\"].toLowerCase() == \"ok\" ? obj[\"action\"] : obj[\"validationResult\"];\n            if (obj[\"validationResult\"].toLowerCase() == \"ok\") {\n              this.enableImportSubmit = true;\n            }\n            return obj;\n          });\n          this.recreateTable = res;\n          this.previewOrder([...res, ...deleteObj]);\n          this.buttonVisible = false;\n          this.tablePreview = true;\n        } else {\n          sessionStorage.removeItem('importType');\n          this.cancel();\n          this.isRerender = true;\n          this.apiLoader();\n        }\n      }, err => {\n        if (err.status == 400) {\n          if (isDryRun) {\n            this.infoTitle = this.language.objectNotFound;\n            this.infoBody = '';\n            this.closeModal();\n            this.modalRef = this.dialogService.open(this.infoModal);\n          } else {\n            sessionStorage.removeItem('importType');\n            this.pageErrorHandle(err);\n          }\n          this.loading = false;\n        } else {\n          this.pageErrorHandle(err);\n        }\n      });\n    }\n    importTemplate(element, action) {\n      return {\n        \"action\": action ? action : element.action,\n        \"deviceIpV4\": element.deviceIpV4,\n        \"deviceIpV6\": element.deviceIpV6,\n        //\"hostName\": element.hostName,\n        \"orgId\": this.ORG_ID,\n        \"tenantId\": 0,\n        \"ignoreDownstream\": element.ignoreDownstream === 'Yes' || element.ignoreDownstream === true ? true : false,\n        \"ignoreInternal\": element.ignoreInternal === 'Yes' || element.ignoreInternal === true ? true : false,\n        \"ignoreUpstream\": element.ignoreUpstream === 'Yes' || element.ignoreUpstream === true ? true : false,\n        \"name\": element.name,\n        // CCL-37642 & CCL-39112\n        // \"observationId\": element.observationId,\n        \"rateLimit\": element.rateLimit,\n        \"receivingPort\": element.receivingPort,\n        \"samplingRate\": element.samplingRate\n      };\n    }\n    previewOrder(res) {\n      if (!res || res.length == 0) {\n        this.infoTitle = this.language.noAvailableChange;\n        this.infoBody = '';\n        this.closeModal();\n        this.modalRef = this.dialogService.open(this.infoModal);\n        return;\n      }\n      let previewData = [];\n      const streamInputCheck = [\"ignoreDownstream\", \"ignoreInternal\", \"ignoreUpstream\"],\n        keysToExclude = [\"validationResult\"],\n        keysWithoutOld = [\"action\", \"deviceIpV4\", \"deviceIpV6\"];\n      //this.importTableOptions.columns = this.dataTablecreatorService.tableOptionsCreator(res[0], this.language, keysToExclude, keysWithoutOld);\n      res.forEach(resObj => {\n        let newObj = {};\n        Object.keys(resObj).forEach(keys => {\n          if (!keysToExclude.includes(keys)) {\n            if (streamInputCheck.includes(keys) && (resObj[keys] === \"true\" || resObj[keys] === true || resObj[keys] && resObj[keys].toString().toUpperCase == 'Y')) newObj[keys] = 'Yes';else if (streamInputCheck.includes(keys) && (resObj[keys] === \"false\" || resObj[keys] === false || resObj[keys] && resObj[keys].toString().toUpperCase == 'N')) newObj[keys] = 'No';else newObj[keys] = resObj[keys];\n            if (!keysWithoutOld.includes(keys)) newObj['Old ' + keys] = '';\n          }\n        });\n        this.deviceData.forEach(tableObj => {\n          if (resObj.deviceIpV4 == tableObj.deviceIpV4 && resObj.deviceIpV6 == tableObj.deviceIpV6) {\n            for (const [key, value] of Object.entries(newObj)) {\n              if (key.includes(\"Old\")) {\n                const exactKey = key.replace(\"Old \", \"\");\n                if (streamInputCheck.includes(exactKey) && (tableObj[exactKey] || tableObj[exactKey].toString().toUpperCase == 'Y')) newObj[key] = 'Yes';else if (streamInputCheck.includes(exactKey) && (!tableObj[exactKey] || tableObj[exactKey].toString().toUpperCase == 'N')) newObj[key] = 'No';else newObj[key] = tableObj[exactKey];\n              }\n            }\n            if (newObj[\"action\"] == \"Create\") newObj[\"action\"] = \"Update\";\n            return false;\n          }\n          //if (resObj.deviceIpV4 == tableObj.deviceIpV4 && resObj.deviceIpV6 == tableObj.deviceIpV6) newObj[\"action\"] = \"Update\";\n        });\n\n        previewData.push(newObj);\n      });\n      this.previewTableBody = previewData;\n    }\n    cancelImport() {}\n    reset() {\n      this.name = undefined;\n      this.hostName = undefined;\n      this.deviceIPV4 = undefined;\n      this.deviceIPV6 = undefined;\n      this.ignoreDownStream = false;\n      this.ignoreUpStream = false;\n      this.ignoreLocal = false;\n      this.geoCoordinate = undefined;\n      this.address = undefined;\n      this.samplingLimit = undefined;\n    }\n    resetEdit() {\n      this.editName = '';\n      this.editHostName = '';\n      // this.editDeviceIP = '';\n      this.editDeviceIPV4 = '';\n      this.editDeviceIPV6 = '';\n      this.editIgnoreUpStream = false;\n      this.editIgnoreDownStream = false;\n      this.editIgnoreLocal = false;\n      this.editSamplingLimit = undefined;\n      this.editGeoCoordinate = undefined;\n    }\n    samplingRateValidator(samplingLimit) {\n      this.samplingLimitError = false;\n      if (Number.isInteger(samplingLimit)) {\n        if (samplingLimit > 0 && samplingLimit <= 65535) {\n          this.samplingLimitError = false;\n        } else {\n          this.samplingLimitError = true;\n        }\n      } else {\n        this.samplingLimitError = true;\n      }\n    }\n    // validator() {\n    //   this.deviceIPError = false;\n    //   this.deviceIP6Error = false;\n    //   this.ipv4 = undefined;\n    //   this.ipv6 = undefined;\n    //   if (this.deviceIPV4) {\n    //     this.deviceIpValidatorIpv4(this.deviceIPV4);\n    //   }\n    //   if (this.deviceIPV6) {\n    //     this.deviceIpValidatorIpv6(this.deviceIPV6);\n    //   }\n    //   this.samplingRateValidator();\n    //   if (!this.deviceIPError && !this.deviceIP6Error && !this.samplingLimitError) {\n    //     this.validation = true;\n    //   } else {\n    //     this.validation = false;\n    //     this.infoTitle = this.language['Invalid request'];\n    //     if (this.deviceIPError) {\n    //       this.infoTitle = this.language['Invalid request'];\n    //       this.infoBody = this.language['Invalid IP address'];\n    //     } else if (this.samplingLimitError) {\n    //       this.infoTitle = this.language['Invalid value'];\n    //       this.infoBody = this.language['Sampling rate must be in digits'];\n    //       //this.infoBody = 'Please enter sampling limit';\n    //     }\n    //     if ((this.deviceIPV4 == undefined || this.deviceIPV4 == '') && (this.deviceIPV6 == undefined || this.deviceIPV6 == '')) {\n    //       this.infoTitle = this.language['Invalid request'];\n    //       this.infoBody = this.language['Invalid IP address'];\n    //     }\n    //     this.closeModal();\n    //     this.modalRef = this.dialogService.open(this.infoModal);\n    //   }\n    // }\n    deviceIpValidatorIpv4(ip) {\n      if (ip && ip.trim() != '') {\n        ip = ip.trim();\n        if (this.commonFunctionsService.isValidIpV4Addr(ip)) {\n          this.ipv4 = ip;\n          //this.deviceIPV6 = '';\n          this.deviceIPError = false;\n        } else {\n          this.deviceIPError = true;\n        }\n      } else {\n        this.deviceIPError = true;\n      }\n    }\n    deviceIpValidatorIpv6(ip) {\n      if (ip && ip.trim() != '') {\n        ip = ip.trim();\n        if (this.commonFunctionsService.isValidIpV6Addr(ip)) {\n          this.ipv6 = ip;\n          //this.deviceIPV4 = '';\n          this.deviceIP6Error = false;\n        } else {\n          this.deviceIP6Error = true;\n        }\n      } else {\n        this.deviceIPError = true;\n      }\n    }\n    sortingTable(colId, e) {\n      setTimeout(() => {\n        this.sortColumn = colId;\n        let element = e.target;\n        let sortAsc = $(element).hasClass('sorting_asc');\n        if (sortAsc) {\n          this.sortType = 'asc';\n        } else {\n          this.sortType = 'desc';\n        }\n      }, 500);\n    }\n    closeAlert() {\n      this.error = false;\n      this.success = false;\n    }\n    closeModal() {\n      if (this.modalRef) {\n        this.modalRef.close();\n      }\n    }\n    strSub(str, len) {\n      let length = len ? len : 20;\n      if (str.length <= 20) {\n        return str;\n      }\n      return `${str.substr(0, length)}...`;\n    }\n    pageErrorHandle(err) {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n      if (err.status == 400) {\n        let errString = (err === null || err === void 0 ? void 0 : err.error) ? this.commonOrgService.pageInvalidRqstErrorHandle(err) : '';\n        if (errString == \"object_already_exists\") {\n          this.infoBody = `${this.language['Conflict found with existing devices']} ${((_a = err === null || err === void 0 ? void 0 : err.error) === null || _a === void 0 ? void 0 : _a.info) ? (_b = err === null || err === void 0 ? void 0 : err.error) === null || _b === void 0 ? void 0 : _b.info : ''}`;\n        } else if (errString === \"Bad Request\" && (((_d = (_c = err === null || err === void 0 ? void 0 : err.error) === null || _c === void 0 ? void 0 : _c.message) === null || _d === void 0 ? void 0 : _d.split(':').length) && ((_f = (_e = err === null || err === void 0 ? void 0 : err.error) === null || _e === void 0 ? void 0 : _e.message) === null || _f === void 0 ? void 0 : _f.split(':')[0]) === \"object_already_exists\" || ((_h = (_g = err === null || err === void 0 ? void 0 : err.error) === null || _g === void 0 ? void 0 : _g.message) === null || _h === void 0 ? void 0 : _h.split(':')[0]) === \"invalid_request\")) {\n          /* CCL-42016 */\n          this.infoBody = (_j = err === null || err === void 0 ? void 0 : err.error) === null || _j === void 0 ? void 0 : _j.message.split(':')[1];\n        } else {\n          this.infoBody = errString;\n        }\n        this.infoTitle = this.language['Invalid request'];\n        this.loading = false;\n        this.closeModal();\n        this.modalRef = this.dialogService.open(this.infoModal);\n      } else {\n        if (err.status == 401) {\n          this.errorInfo = this.language['Access Denied'];\n        } else {\n          this.errorInfo = this.commonOrgService.pageErrorHandle(err);\n        }\n        this.commonOrgService.openErrorAlert(this.errorInfo);\n        this.commonOrgService.pageScrollTop();\n        this.loading = false;\n      }\n    }\n    openInfoModal(invalidImportDevice) {\n      if (!invalidImportDevice) this.invalidImportDevice = [];\n      this.closeModal();\n      this.modalRef = this.dialogService.open(this.infoModal, {\n        backdrop: 'static',\n        keyboard: false\n      });\n    }\n    removeState() {\n      if (localStorage.getItem(`DataTables_device-table_/${this.MODULE}/flowAnalyze/network/devices`)) {\n        localStorage.removeItem(`DataTables_device-table_/${this.MODULE}/flowAnalyze/network/devices`);\n      }\n    }\n    inputValidator(event) {\n      var key = event === null || event === void 0 ? void 0 : event.keyCode;\n      return key > 64 && key < 91 || key > 96 && key < 123 || key == 8 || key == 32 || key >= 48 && key <= 57;\n    }\n    removeUnwantedSpace(input, value) {\n      this[input] = this.common.trimSpaceFromNonObjectInputs(value);\n    }\n  }\n  DevicesComponent.ɵfac = function DevicesComponent_Factory(t) {\n    return new (t || DevicesComponent)(i0.ɵɵdirectiveInject(i1.CommonFunctionsService), i0.ɵɵdirectiveInject(i2.NetworkDevicesApiService), i0.ɵɵdirectiveInject(i3.ExportExcelService), i0.ɵɵdirectiveInject(i4.DataTablecreatorService), i0.ɵɵdirectiveInject(i5.TranslateService), i0.ɵɵdirectiveInject(i6.Router), i0.ɵɵdirectiveInject(i7.SsoAuthService), i0.ɵɵdirectiveInject(i8.NgbModal), i0.ɵɵdirectiveInject(i9.CommonService), i0.ɵɵdirectiveInject(i10.Title), i0.ɵɵdirectiveInject(i11.CommonFunctionsService));\n  };\n  DevicesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DevicesComponent,\n    selectors: [[\"app-devices\"]],\n    viewQuery: function DevicesComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 5);\n        i0.ɵɵviewQuery(_c3, 7);\n        i0.ɵɵviewQuery(DataTableDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.infoModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deleteModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.multiDeleteModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.importModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dtElement = _t.first);\n      }\n    },\n    decls: 4,\n    vars: 1,\n    consts: [[1, \"container\", \"px-0\", \"position-relative\"], [\"id\", \"deviceTabs\", \"role\", \"tablist\", 1, \"nav\", \"nav-tabs\", \"nav-tab-list\"], [\"class\", \"nav-item\", \"role\", \"presentation\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"role\", \"tab\", \"aria-controls\", \"device-configuration\", \"aria-selected\", \"true\", 1, \"btn\", \"btn-default\", 3, \"id\", \"routerLink\", \"routerLinkActive\"]],\n    template: function DevicesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"ul\", 1);\n        i0.ɵɵtemplate(2, DevicesComponent_li_2_Template, 3, 5, \"li\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"router-outlet\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.menus);\n      }\n    },\n    directives: [i12.NgForOf, i6.RouterOutlet, i6.RouterLinkWithHref, i6.RouterLinkActive],\n    styles: [\".modal-scrll[_ngcontent-%COMP%]{overflow-y:auto;max-height:500px}.list-two[_ngcontent-%COMP%]{list-style-type:disc;margin-left:30px}.min-w-250[_ngcontent-%COMP%]{min-width:250px}.min-w-170[_ngcontent-%COMP%]{min-width:170px}.min-w-130[_ngcontent-%COMP%]{min-width:130px}.w-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.w-nowrap-150[_ngcontent-%COMP%]{white-space:nowrap;min-width:150px}.f-size13[_ngcontent-%COMP%]{font-size:13px}.w-200px[_ngcontent-%COMP%]{width:200px}.w-150px[_ngcontent-%COMP%]{width:150px}.w-100px[_ngcontent-%COMP%]{width:100px}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding:3px 20px!important;border:1px solid #0279FF;color:#0279ff;font-size:14px;line-height:16.67px!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:not(.active):hover{background-color:#0279ff;color:#fff}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn.active[_ngcontent-%COMP%]{background-color:#0279ff;color:#fff}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{border-radius:0!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child   .btn[_ngcontent-%COMP%]{border-top-left-radius:12px!important;border-bottom-left-radius:12px!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child   .btn[_ngcontent-%COMP%]{border-top-right-radius:12px!important;border-bottom-right-radius:12px!important}.line-height-normal[_ngcontent-%COMP%]{line-height:normal}\"]\n  });\n  return DevicesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}