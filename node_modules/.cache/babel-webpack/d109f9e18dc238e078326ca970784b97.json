{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport { OutliersWorkflow } from '../outliers-workflow.constant';\nimport { SmsConsentComponent } from '../../workflow-shared/sms-consent/sms-consent.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"../outlier-workflow.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/sys-admin/services/common.service\";\nimport * as i6 from \"@angular/common/http\";\nimport * as i7 from \"../../workflow-shared/common-workflow.service\";\nimport * as i8 from \"src/app/shared-utils/date-utils.service\";\nimport * as i9 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"../../workflow-shared/details/details.component\";\nimport * as i12 from \"./system/system.component\";\nimport * as i13 from \"../../workflow-shared/recepients/recepients.component\";\nimport * as i14 from \"./summary/summary.component\";\nfunction OutliersWorkflowWizwardComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelementStart(1, \"span\", 20);\n    i0.ɵɵelement(2, \"img\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_div_0_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.closeAlert();\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r0.errorInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction OutliersWorkflowWizwardComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵelementStart(1, \"span\", 25);\n    i0.ɵɵelement(2, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.success = false;\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r1.language[ctx_r1.successInfo] || ctx_r1.successInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"step-current\": a0,\n    \"\": a1,\n    \"step-done\": a2\n  };\n};\nfunction OutliersWorkflowWizwardComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_li_12_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const i_r17 = restoredCtx.index;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.onTabChange(i_r17);\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r16 = ctx.$implicit;\n    const i_r17 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r2.language[tab_r16] || tab_r16);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(3, _c0, ctx_r2.activeTab === tab_r16, ctx_r2.tabs.length === 2, ctx_r2.levelsPassed > i_r17 && ctx_r2.activeTab !== tab_r16));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.language[tab_r16] || tab_r16);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    primary: a0\n  };\n};\nfunction OutliersWorkflowWizwardComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.onTabChange(ctx_r20.selectedTabIndex - 1);\n    });\n    i0.ɵɵelement(1, \"img\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r3.selectedTabIndex === 0)(\"ngClass\", i0.ɵɵpureFunction1(3, _c1, ctx_r3.selectedTabIndex !== 0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.language[\"Go back\"], \" \");\n  }\n}\nfunction OutliersWorkflowWizwardComponent_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.onTabChange(ctx_r22.selectedTabIndex + 1);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"img\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r4.disableNextBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.language[\"save_and_continue\"], \" \");\n  }\n}\nfunction OutliersWorkflowWizwardComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.deploy((ctx_r24.workflowObj == null ? null : ctx_r24.workflowObj.status) ? ctx_r24.workflowObj == null ? null : ctx_r24.workflowObj.status : \"DRAFT\");\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r5.disableFinishBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.language[\"save_and_pause\"], \" \");\n  }\n}\nfunction OutliersWorkflowWizwardComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function OutliersWorkflowWizwardComponent_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.deploy(\"RUN\");\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r6.disableFinishBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.language[\"save_and_activate\"], \" \");\n  }\n}\nfunction OutliersWorkflowWizwardComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵelementStart(1, \"div\", 35);\n    i0.ɵɵelementStart(2, \"div\", 36);\n    i0.ɵɵelementStart(3, \"span\", 37);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r7.language.Loading);\n  }\n}\nfunction OutliersWorkflowWizwardComponent_app_details_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-details\", 38);\n    i0.ɵɵlistener(\"isFormValid\", function OutliersWorkflowWizwardComponent_app_details_20_Template_app_details_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"workflowObj\", ctx_r8.workflowObj);\n  }\n}\nfunction OutliersWorkflowWizwardComponent_app_system_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-system\", 38);\n    i0.ɵɵlistener(\"isFormValid\", function OutliersWorkflowWizwardComponent_app_system_21_Template_app_system_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"workflowObj\", ctx_r9.workflowObj);\n  }\n}\nfunction OutliersWorkflowWizwardComponent_app_recepients_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-recepients\", 39);\n    i0.ɵɵlistener(\"isFormValid\", function OutliersWorkflowWizwardComponent_app_recepients_22_Template_app_recepients_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dynamicFields\", ctx_r10.recepientFormFields)(\"dynamicFieldsObj\", ctx_r10.recepientFormFieldsObj)(\"workflowObj\", ctx_r10.workflowObj);\n  }\n}\nfunction OutliersWorkflowWizwardComponent_app_summary_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-summary\", 38);\n    i0.ɵɵlistener(\"isFormValid\", function OutliersWorkflowWizwardComponent_app_summary_23_Template_app_summary_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r35);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return ctx_r34.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"workflowObj\", ctx_r11.workflowObj);\n  }\n}\nexport let OutliersWorkflowWizwardComponent = /*#__PURE__*/(() => {\n  class OutliersWorkflowWizwardComponent {\n    constructor(translateService, titleService, otlrWrkflwSrvc, route, commonOrgService, http, router, commonWorkflowService, dateUtils, modalService) {\n      this.translateService = translateService;\n      this.titleService = titleService;\n      this.otlrWrkflwSrvc = otlrWrkflwSrvc;\n      this.route = route;\n      this.commonOrgService = commonOrgService;\n      this.http = http;\n      this.router = router;\n      this.commonWorkflowService = commonWorkflowService;\n      this.dateUtils = dateUtils;\n      this.modalService = modalService;\n      this.titleObj = {\n        OPTICAL_OUTLIERS: 'Optical Outlier Notification',\n        EARLY_WARN_PON_CAP: 'Early Warning PON Capacity Notification',\n        EARLY_WARN_ETH_CAP: 'Early Warning Ethernet Capacity Notification',\n        EARLY_WARN_PON_LOSS: 'Early Warning PON Loss Notification'\n      };\n      this.recepientFormFields = [{\n        key: 'emailRecipients',\n        required: true\n      }, {\n        key: 'emailNotes',\n        required: false\n      }, {\n        key: 'sms',\n        required: true\n      }, {\n        key: 'webhooks',\n        required: true\n      }];\n      this.recepientFormFieldsObj = {\n        emailRecipients: 'emailRecipients',\n        emailNotes: 'emailNotes',\n        sms: 'sms',\n        webhooks: 'webhooks'\n      };\n      this.loader = false;\n      this.disableFinishBtn = false;\n      this.outliersWorkflow = OutliersWorkflow;\n      this.activeTab = OutliersWorkflow === null || OutliersWorkflow === void 0 ? void 0 : OutliersWorkflow.DETAILS_LABEL;\n      this.selectedTabIndex = 0;\n      this.isTabChange = true;\n      this.disableNextBtn = false;\n      this.error = false;\n      this.errorInfo = '';\n      this.tabs = [OutliersWorkflow === null || OutliersWorkflow === void 0 ? void 0 : OutliersWorkflow.DETAILS_LABEL, OutliersWorkflow === null || OutliersWorkflow === void 0 ? void 0 : OutliersWorkflow.SYSTEMS_LABEL, OutliersWorkflow === null || OutliersWorkflow === void 0 ? void 0 : OutliersWorkflow.RECEPIENTS_LABEL, OutliersWorkflow === null || OutliersWorkflow === void 0 ? void 0 : OutliersWorkflow.SUMMARY_LABEL];\n      this.workflowObj = {\n        \"isNew\": true,\n        \"active\": true,\n        // \"regions\": [\"6382c0b6-a4db-4342-9f74-31861b680cdd\", \"82cd3169-7b74-473b-9d04-0fb0966601a2\", \"5fda988a-eb93-4c50-9744-a2634827235d\", \"56764f50-1bf5-488b-8b10-e55dc6a76f3a\", \"58bad929-37cf-4418-a502-c85963d3365a\"], //['All']\n        // \"locations\": [\"95f04de8-96fe-4591-98b4-f9de327783db\", \"4980e86d-21d8-4824-b0f5-e88104c2f655\", \"1f2ba1be-cb00-497d-9612-6880bdaa83cc\", \"cf477d31-5bea-4c99-991c-899afa885ba3\"], //['All'],\n        // \"systems\": [\"33e73c0e-20a2-4e2d-bd92-6d1c3b7384ee\", \"01d2d8c0-d2fc-40aa-a26b-2134a53478eb\", \"3a361b89-6f94-47bb-b382-fb54da1f5adb\"],//['All'],\n        \"regions\": ['All'],\n        \"locations\": ['All'],\n        \"systems\": ['All'],\n        \"emailRecipients\": [],\n        \"emailNotes\": \"\",\n        \"uuid\": \"\",\n        \"name\": \"\",\n        \"description\": \"\",\n        \"status\": \"DRAFT\",\n        \"sms\": [],\n        \"webhooks\": [],\n        \"forms\": {\n          \"0\": {\n            valid: false\n          },\n          \"1\": {\n            valid: false\n          },\n          \"2\": {\n            valid: false\n          }\n        },\n        isConsentMsgSmsPopupAccepted: false,\n        isLoadConsentMsgSmsPopupApplicable: true\n      };\n      this.levelsPassed = 0;\n    }\n    ngOnInit() {\n      this.title = `New ${this.titleObj[this.otlrWrkflwSrvc.getType()]}`;\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        this.titleService.setTitle(`${this.titleObj[this.otlrWrkflwSrvc.getType()]} - ${this.language['Email Notifications']} - ${this.language['Network_Operations']} - ${this.language['Operations']} - ${this.language['Operations']} - ${this.language['Calix Cloud']}`);\n      });\n      this.titleService.setTitle(`${this.titleObj[this.otlrWrkflwSrvc.getType()]} - ${this.language['Email Notifications']} - ${this.language['Network_Operations']} - ${this.language['Operations']} - ${this.language['Operations']} - ${this.language['Calix Cloud']}`);\n      let id = this.route.snapshot.paramMap.get(\"id\");\n      console.log(this.route.snapshot.params);\n      // let type = this.route.snapshot.paramMap.get(\"type\");\n      // console.log(type);\n      // if (type) {\n      //   this.workflowObj.type = type;\n      // } else {\n      //   //this.router.navigate(['/cco/operations/alarms/health-alarm-notifications']);\n      // }\n      this.route.paramMap.subscribe(params => {\n        console.log(params.get('id'));\n        console.log(params.get('type'));\n      });\n      if (id) {\n        this.getRecordById(id);\n      }\n    }\n    openModal() {\n      const modalRef = this.modalService.open(SmsConsentComponent);\n      modalRef.componentInstance.workflowObj = this.workflowObj;\n      modalRef.result.then(result => {\n        if (result) {\n          console.log(result);\n          this.onTabChange(this.selectedTabIndex + 1);\n        }\n      }).catch(res => {});\n      ;\n    }\n    onTabChange(index, type = null) {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n      if (index > this.selectedTabIndex) {\n        let validNav = true;\n        this.commonWorkflowService.setTabChange();\n        for (let i = 0; i < index; i++) {\n          if (!((_c = (_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.forms) === null || _b === void 0 ? void 0 : _b[i]) === null || _c === void 0 ? void 0 : _c.valid)) {\n            validNav = false;\n            break;\n          }\n        }\n        if (!validNav) {\n          return;\n        }\n        if (this.selectedTabIndex == 2 && ((_d = this.workflowObj) === null || _d === void 0 ? void 0 : _d.isLoadConsentMsgSmsPopupApplicable) && !((_e = this.workflowObj) === null || _e === void 0 ? void 0 : _e.isConsentMsgSmsPopupAccepted) && ((_g = (_f = this.workflowObj) === null || _f === void 0 ? void 0 : _f.sms) === null || _g === void 0 ? void 0 : _g.length)) {\n          this.openModal();\n          return;\n        }\n        if (this.selectedTabIndex == 0 && ((_h = this.workflowObj) === null || _h === void 0 ? void 0 : _h.isNew)) {\n          let data = {\n            name: this.workflowObj.name,\n            description: this.workflowObj.description,\n            type: this.otlrWrkflwSrvc.getType(),\n            timeZone: this.dateUtils.getTImeZoneWithOffset()\n          };\n          this.create(data, index);\n        } else {\n          this.update(index);\n        }\n      } else {\n        this.updateTab(index);\n      }\n      // this.activeTab = this.tabs[index];\n      // this.disableNextBtn = false;\n      // this.selectedTabIndex = index;\n      // this.isTabChange = !this.isTabChange;\n      // if (this.levelsPassed < index) {\n      //   this.levelsPassed = index;\n      // }\n    }\n\n    closeAlert() {\n      this.error = false;\n      this.errorInfo = '';\n    }\n    validateForm(event) {\n      var _a, _b;\n      if ((_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.forms) === null || _b === void 0 ? void 0 : _b[this.selectedTabIndex]) {\n        this.workflowObj.forms[this.selectedTabIndex].valid = event;\n      }\n    }\n    getRecordById(id) {\n      this.loader = true;\n      let url = `${environment.API_BASE_URL}health/config/notifications/${encodeURIComponent(id)}`;\n      this.http.get(url).subscribe(json => {\n        var _a, _b;\n        if (json && Object.keys(json).length) {\n          //json = this.otlrWrkflwSrvc.updateRegLocToAll(json);\n          this.setFormStatus(json);\n          this.workflowObj = Object.assign(Object.assign({}, this.workflowObj), json);\n          this.workflowObj.isNew = false;\n          console.log(this.workflowObj);\n          if ((_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.sms) === null || _b === void 0 ? void 0 : _b.length) {\n            this.workflowObj.isConsentMsgSmsPopupAccepted = true;\n            this.workflowObj.isLoadConsentMsgSmsPopupApplicable = false;\n          }\n        }\n        this.loader = false;\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    pageErrorHandle(err) {\n      if (err.status == 401) {\n        this.errorInfo = this.language['Access Denied'];\n      } else {\n        this.errorInfo = this.commonOrgService.pageErrorHandle(err);\n      }\n      this.error = true;\n      this.loader = false;\n    }\n    create(data, index) {\n      //this.updateTab(index); return;\n      this.http.post(`${environment.API_BASE_URL}health/config/notifications`, data, {\n        responseType: 'text'\n      }).subscribe(res => {\n        console.log(res);\n        this.setSuccessInfo(\"Successfully Saved\");\n        this.workflowObj.isNew = false;\n        this.updateTab(index);\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    update(index) {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n      //this.updateTab(index); return;\n      let url = `${environment.API_BASE_URL}health/config/notifications/${encodeURIComponent(this.workflowObj.name)}`;\n      let data = {\n        name: this.workflowObj.name,\n        description: this.workflowObj.description,\n        status: ((_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.status) ? (_b = this.workflowObj) === null || _b === void 0 ? void 0 : _b.status : 'DRAFT',\n        type: this.otlrWrkflwSrvc.getType(),\n        timeZone: this.dateUtils.getTImeZoneWithOffset()\n      };\n      if ((_c = this.workflowObj.regions) === null || _c === void 0 ? void 0 : _c.length) {\n        let index = (_d = this.workflowObj.regions) === null || _d === void 0 ? void 0 : _d.indexOf('All');\n        if (index !== -1) {\n          (_e = this.workflowObj.regions) === null || _e === void 0 ? void 0 : _e.splice(index, 1);\n        }\n      }\n      if ((_f = this.workflowObj.locations) === null || _f === void 0 ? void 0 : _f.length) {\n        let index = (_g = this.workflowObj.locations) === null || _g === void 0 ? void 0 : _g.indexOf('All');\n        if (index !== -1) {\n          (_h = this.workflowObj.locations) === null || _h === void 0 ? void 0 : _h.splice(index, 1);\n        }\n      }\n      if ((_j = this.workflowObj.systems) === null || _j === void 0 ? void 0 : _j.length) {\n        let index = (_k = this.workflowObj.systems) === null || _k === void 0 ? void 0 : _k.indexOf('All');\n        if (index !== -1) {\n          (_l = this.workflowObj.systems) === null || _l === void 0 ? void 0 : _l.splice(index, 1);\n        }\n      }\n      if (this.selectedTabIndex == 1) {\n        data = Object.assign(Object.assign({}, data), {\n          regions: this.workflowObj.regions,\n          locations: this.workflowObj.locations,\n          systems: this.workflowObj.systems\n        });\n      } else if (this.selectedTabIndex == 2) {\n        data = Object.assign(Object.assign({}, data), {\n          regions: this.workflowObj.regions,\n          locations: this.workflowObj.locations,\n          systems: this.workflowObj.systems,\n          emailRecipients: this.workflowObj.emailRecipients,\n          emailNotes: this.workflowObj.emailNotes,\n          sms: this.workflowObj.sms,\n          webhooks: this.workflowObj.webhooks\n        });\n      }\n      //data['status'] = this.workflowObj.status;\n      // if (this.selectedTabIndex > 0) {\n      //   data = this.otlrWrkflwSrvc.updateRegLoc(data);\n      // }\n      this.http.put(url, data, {\n        responseType: 'text'\n      }).subscribe(res => {\n        console.log(res);\n        this.setSuccessInfo(\"Successfully Saved\");\n        // if (this.selectedTabIndex > 2) {\n        //   this.router.navigate(['/cco/operations/alarms/health-alarm-notifications']);\n        // }\n        this.updateTab(index);\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    deploy(status) {\n      let url = `${environment.API_BASE_URL}health/config/notifications/${encodeURIComponent(this.workflowObj.name)}`;\n      let data = {\n        name: this.workflowObj.name,\n        description: this.workflowObj.description,\n        regions: this.workflowObj.regions,\n        locations: this.workflowObj.locations,\n        systems: this.workflowObj.systems,\n        emailRecipients: this.workflowObj.emailRecipients,\n        emailNotes: this.workflowObj.emailNotes,\n        status: status,\n        type: this.otlrWrkflwSrvc.getType(),\n        sms: this.workflowObj.sms,\n        webhooks: this.workflowObj.webhooks,\n        timeZone: this.dateUtils.getTImeZoneWithOffset()\n      };\n      //data = this.otlrWrkflwSrvc.updateRegLoc(data);\n      this.http.put(url, data, {\n        responseType: 'text'\n      }).subscribe(res => {\n        console.log(res);\n        let msg = `${this.titleObj[this.otlrWrkflwSrvc.getType()]} Schedule successfully paused`;\n        if (status === 'RUN') {\n          msg = `${this.titleObj[this.otlrWrkflwSrvc.getType()]} Schedule successfully deployed`;\n        }\n        this.setSuccessInfo(msg);\n        setTimeout(() => {\n          if (this.selectedTabIndex > 2) {\n            this.router.navigate(['/cco/operations/alarms/health-alarm-notifications']);\n          }\n        }, 2000);\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    updateTab(index) {\n      this.activeTab = this.tabs[index];\n      this.disableNextBtn = false;\n      this.selectedTabIndex = index;\n      this.isTabChange = !this.isTabChange;\n      if (this.levelsPassed < index) {\n        this.levelsPassed = index;\n      }\n    }\n    setSuccessInfo(msg) {\n      this.success = true;\n      this.successInfo = msg;\n      setTimeout(() => {\n        this.success = false;\n      }, 2000);\n    }\n    setFormStatus(json) {\n      var _a, _b, _c;\n      if (json === null || json === void 0 ? void 0 : json.name) {\n        this.workflowObj.forms[0].valid = true;\n        this.levelsPassed = 1;\n      }\n      if (json === null || json === void 0 ? void 0 : json.name) {\n        this.workflowObj.forms[1].valid = true;\n        this.levelsPassed = 2;\n      }\n      if ((json === null || json === void 0 ? void 0 : json.name) && ((_a = json === null || json === void 0 ? void 0 : json.emailRecipients) === null || _a === void 0 ? void 0 : _a.length) || ((_b = json === null || json === void 0 ? void 0 : json.sms) === null || _b === void 0 ? void 0 : _b.length) || ((_c = json === null || json === void 0 ? void 0 : json.webhooks) === null || _c === void 0 ? void 0 : _c.length)) {\n        this.workflowObj.forms[2].valid = true;\n        this.levelsPassed = 3;\n      }\n      // if (json?.status === 'PAUSE' || json?.status === 'RUN') {\n      //   this.levelsPassed = 4;\n      // }\n    }\n  }\n\n  OutliersWorkflowWizwardComponent.ɵfac = function OutliersWorkflowWizwardComponent_Factory(t) {\n    return new (t || OutliersWorkflowWizwardComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i3.OutlierWorkflowService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.CommonService), i0.ɵɵdirectiveInject(i6.HttpClient), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i7.CommonWorkflowService), i0.ɵɵdirectiveInject(i8.DateUtilsService), i0.ɵɵdirectiveInject(i9.NgbModal));\n  };\n  OutliersWorkflowWizwardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OutliersWorkflowWizwardComponent,\n    selectors: [[\"app-outliers-workflow-wizward\"]],\n    decls: 24,\n    vars: 13,\n    consts: [[\"class\", \"w-100 alert alert-danger fade show my-3\", 4, \"ngIf\"], [\"class\", \"w-100 alert alert-success fade show my-3\", 4, \"ngIf\"], [\"id\", \"outage-workflow\", 1, \"outage-workflow\"], [1, \"d-flex\", \"w-100\", \"border-bottom\", \"justify-content-between\", \"align-items-center\", \"pb-1\"], [1, \"col\", \"px-0\"], [1, \"ccl-admin-title\", \"pr-3\"], [1, \"col-auto\", \"px-0\", \"text-right\"], [\"routerLink\", \"/cco/operations/alarms/health-alarm-notifications\", 1, \"close\", \"cursor-pointer\", \"mt-1\"], [1, \"stepper-main\", \"mt-3\", \"mb-3\"], [1, \"stepper-ui\"], [4, \"ngFor\", \"ngForOf\"], [1, \"pos-action-btn\"], [\"type\", \"button\", \"class\", \"btn-arrow btn-arr-prev btn-grey mr-2 float-left\", 3, \"disabled\", \"ngClass\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn-default primary mr-2\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn-default primary px-3 mr-2\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn-default primary px-3\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"class\", \"loader\", 4, \"ngIf\"], [3, \"workflowObj\", \"isFormValid\", 4, \"ngIf\"], [3, \"dynamicFields\", \"dynamicFieldsObj\", \"workflowObj\", \"isFormValid\", 4, \"ngIf\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\", \"my-3\"], [1, \"error-img\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [1, \"w-100\", \"alert\", \"alert-success\", \"fade\", \"show\", \"my-3\"], [1, \"success-img\"], [\"src\", \"./assets/img/success-icon.svg\"], [3, \"title\", \"ngClass\", \"click\"], [\"type\", \"button\", 1, \"btn-arrow\", \"btn-arr-prev\", \"btn-grey\", \"mr-2\", \"float-left\", 3, \"disabled\", \"ngClass\", \"click\"], [\"src\", \"assets/img/ic_chevronleft_grey.svg\"], [\"type\", \"button\", 1, \"btn-default\", \"primary\", \"mr-2\", 3, \"disabled\", \"click\"], [\"src\", \"assets/img/ic_chevron-r-w.svg\"], [\"type\", \"button\", 1, \"btn-default\", \"primary\", \"px-3\", \"mr-2\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn-default\", \"primary\", \"px-3\", 3, \"disabled\", \"click\"], [1, \"loader\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [3, \"workflowObj\", \"isFormValid\"], [3, \"dynamicFields\", \"dynamicFieldsObj\", \"workflowObj\", \"isFormValid\"]],\n    template: function OutliersWorkflowWizwardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, OutliersWorkflowWizwardComponent_div_0_Template, 6, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, OutliersWorkflowWizwardComponent_div_1_Template, 6, 1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"button\", 7);\n        i0.ɵɵelement(9, \"span\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"section\", 8);\n        i0.ɵɵelementStart(11, \"ul\", 9);\n        i0.ɵɵtemplate(12, OutliersWorkflowWizwardComponent_li_12_Template, 4, 7, \"li\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 11);\n        i0.ɵɵtemplate(14, OutliersWorkflowWizwardComponent_button_14_Template, 3, 5, \"button\", 12);\n        i0.ɵɵtemplate(15, OutliersWorkflowWizwardComponent_button_15_Template, 3, 2, \"button\", 13);\n        i0.ɵɵtemplate(16, OutliersWorkflowWizwardComponent_button_16_Template, 2, 2, \"button\", 14);\n        i0.ɵɵtemplate(17, OutliersWorkflowWizwardComponent_button_17_Template, 2, 2, \"button\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(18, OutliersWorkflowWizwardComponent_div_18_Template, 5, 1, \"div\", 16);\n        i0.ɵɵelementStart(19, \"div\");\n        i0.ɵɵtemplate(20, OutliersWorkflowWizwardComponent_app_details_20_Template, 1, 1, \"app-details\", 17);\n        i0.ɵɵtemplate(21, OutliersWorkflowWizwardComponent_app_system_21_Template, 1, 1, \"app-system\", 17);\n        i0.ɵɵtemplate(22, OutliersWorkflowWizwardComponent_app_recepients_22_Template, 1, 3, \"app-recepients\", 18);\n        i0.ɵɵtemplate(23, OutliersWorkflowWizwardComponent_app_summary_23_Template, 1, 1, \"app-summary\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.success);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate((ctx.workflowObj == null ? null : ctx.workflowObj.name) || ctx.title);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex + 1 !== (ctx.tabs == null ? null : ctx.tabs.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex + 1 === (ctx.tabs == null ? null : ctx.tabs.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex + 1 === (ctx.tabs == null ? null : ctx.tabs.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loader);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outliersWorkflow == null ? null : ctx.outliersWorkflow.DETAILS_LABEL));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outliersWorkflow == null ? null : ctx.outliersWorkflow.SYSTEMS_LABEL));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outliersWorkflow == null ? null : ctx.outliersWorkflow.RECEPIENTS_LABEL));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outliersWorkflow == null ? null : ctx.outliersWorkflow.SUMMARY_LABEL));\n      }\n    },\n    directives: [i10.NgIf, i4.RouterLink, i10.NgForOf, i10.NgClass, i11.DetailsComponent, i12.SystemComponent, i13.RecepientsComponent, i14.SummaryComponent],\n    styles: [\"#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]{width:100%;display:flex;flex:0 0 100%;position:relative}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{width:calc(100% / 5);padding:5px 25px;background:#ebeaef!important;color:gray;text-align:center;cursor:pointer!important;border-radius:20px}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:first-child{border-top-left-radius:20px;border-bottom-left-radius:20px}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%]{z-index:55!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%]{z-index:44!important;transform:translate(-20px)}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%]{z-index:33!important;transform:translate(-40px)}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%]{z-index:22!important;transform:translate(-60px)!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{z-index:11!important;transform:translate(-80px)!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step-active[_ngcontent-%COMP%]{background:#0279ff!important;color:#fff!important;z-index:99!important;border-radius:20px!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step-success[_ngcontent-%COMP%]{background:#82bf00!important;color:#fff!important;z-index:101!important;border-radius:20px!important}.outage-workflow[_ngcontent-%COMP%]{position:relative}.close-box[_ngcontent-%COMP%]{font-size:24px;font-weight:300;color:gray}.btn-arrow.btn-grey[_ngcontent-%COMP%]{border:1px solid #CCCCCC!important;background-color:#f8f8fa!important;color:#4c4c4c!important}.stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;position:relative}.stepper-ui[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0 0 10px;padding:0;overflow:hidden;width:100%}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px 0 30px;color:#1a1f22;position:relative;height:32px;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;border-right:0px!important;border-left:0px!important;outline:none!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:\\\"\\\";width:30px;height:100%;background:transparent;position:absolute;top:0;right:-10px;transform:rotate(48deg);z-index:1;border:1px ridge transparent;border-top-color:#0279ff;border-right-color:#0279ff;border-top-right-radius:5px}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{background-color:#0279ff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{background-color:#82bf00!important;border-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{background-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled{background-color:#82bf00!important;border-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{border-top-color:#fff!important;border-right-color:#fff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{border-top-color:#0279ff!important;border-right-color:#0279ff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   button[_ngcontent-%COMP%]{border-top-left-radius:30px;border-bottom-left-radius:30px}button[_ngcontent-%COMP%]:disabled{background:transparent!important;border-color:#0279ff!important;cursor:not-allowed;color:#4c4c4c}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f5faff;color:#0279ff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{background-color:#f5faff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;right:0;top:-1px;width:20px;height:32px;background-color:transparent;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;z-index:9}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:#1a1f22}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:after{background-color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{opacity:.8;color:#fff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:before, .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:before{display:none}.btn-arr-nxt[_ngcontent-%COMP%]:disabled{background:#0279ff!important;border:1px solid #0279ff!important;cursor:not-allowed;opacity:.5;color:#81bcff}.pos-action-btn[_ngcontent-%COMP%]{position:absolute;right:0px;top:0px}\"]\n  });\n  return OutliersWorkflowWizwardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}