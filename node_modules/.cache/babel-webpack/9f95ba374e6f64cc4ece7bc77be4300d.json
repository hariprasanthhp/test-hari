{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"src/app/shared/services/sso-auth.service\";\nimport * as i3 from \"./../shared/services/explore-data-common.service\";\nimport * as i4 from \"../shared/services/download-file-name.service\";\nimport * as i5 from \"src/app-services/translate.service\";\nexport let MarketingExploreDataServiceApiService = /*#__PURE__*/(() => {\n  class MarketingExploreDataServiceApiService {\n    constructor(httpClient, ssoAuthService, marketingExploreCommonService, downloadFileNameService, translateService) {\n      this.httpClient = httpClient;\n      this.ssoAuthService = ssoAuthService;\n      this.marketingExploreCommonService = marketingExploreCommonService;\n      this.downloadFileNameService = downloadFileNameService;\n      this.translateService = translateService;\n      this.baseURL = environment.cmcBaseURL;\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n      });\n      this.subscriberTierTech = this.baseURL + 'target-segmentation/service-tier-counts?';\n      this.houseHoldDeviceTrends = this.baseURL + 'insights/number-of-devices-and-wifiscore-trend-by-month?';\n      // this.serviceModuleAdoption = this.baseURL + 'insights/parental-control-and-network-security-usage-trend?';\n      this.ecoModuleAdoption = this.baseURL + 'insights/ecosystem-subscribers-usage-trend?';\n      this.wifiDeviceTrends = this.baseURL + 'marketing/device-category-trend?';\n      this.blockedThreatsInsights = this.baseURL + 'marketing/subscriber-protectiq-insight?';\n      this.commandIQinsights = this.baseURL + 'marketing/smart-home-candidate?';\n      // DRILL DOWN\n      this.subscriberTierTechDrillDown = this.baseURL + 'insights/user-list?';\n      this.blockedThreatsInsightsDrillDown = this.baseURL + 'marketing/protectiq-user-report-overall?';\n      // DRILL DOWN EXPORT \n      this.subscriberByServiceTierDrillDownExport = this.baseURL + 'insights/user-list?';\n      this.blockedThreatsInsightsExport = this.baseURL + 'marketing/protectiq-user-report-overall?';\n    }\n    SubscriberTierTech(twoMonths) {\n      if (twoMonths) {\n        let url = `${this.subscriberTierTech}org-id=${this.ssoAuthService.getOrgId()}&period=last-2m`;\n        return this.httpClient.get(url);\n      } else {\n        return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(this.subscriberTierTech));\n      }\n    }\n    HouseHoldDeviceTrends() {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.houseHoldDeviceTrends}limit=10&`));\n    }\n    ServiceModuleAdoption() {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(this.ecoModuleAdoption));\n    }\n    EcoModuleAdoption() {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(this.ecoModuleAdoption));\n    }\n    WifiDeviceTrends() {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.wifiDeviceTrends}month=6&`));\n    }\n    BlockedThreatsInsights() {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(this.blockedThreatsInsights));\n    }\n    CommandIQinsights() {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.commandIQinsights}page=1&size=10&output=json&`));\n    }\n    // DRILL DOWN\n    SubscriberTierTechDrillDown(clickData) {\n      let tier = clickData.tier.replace('+', '%2B');\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.subscriberTierTechDrillDown}tier=${tier}&tech=${clickData.tech}&page=${clickData.page}&size=${clickData.size}&`));\n    }\n    BlockedThreatsInsightsDrillDown(clickData) {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.blockedThreatsInsightsDrillDown}protectiqtype=${clickData.tech}&page=${clickData.page}&size=${clickData.size}&`));\n    }\n    // DRILL DOWN EXPORT\n    SubscriberByServiceTierDrillDownExport(clickData) {\n      let tier = clickData.tier.replace('+', '%2B');\n      // let fileNameTier = clickData.tier.replace('+', '');\n      let fileNameTier = clickData.tier.replace('<', 'lt');\n      let fileName = this.downloadFileNameService.generateDownloadNameForDrillDown(`${this.language.subscribers_by_service_tier_technology}-${fileNameTier}-${clickData.tech}`);\n      let downloadURL = this.marketingExploreCommonService.queryParamsAssigner(`${this.subscriberByServiceTierDrillDownExport}tier=${tier}&tech=${clickData.tech}&filename=subscribers-by-service-tier-technology-${fileNameTier}-${clickData.tech}&`);\n      return {\n        downloadURL: downloadURL,\n        fileName: fileName\n      };\n    }\n    HouseHoldDeviceTrendsExport(clickData) {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.houseHoldDeviceTrends}endpoint-id=${clickData.endPointId}&`));\n    }\n    ServiceModuleAdoptionRateExport() {\n      let fileName = this.downloadFileNameService.generateDownloadName(this.language.experienceiq_protectiq_report_ar);\n      let downloadURL = this.marketingExploreCommonService.queryParamsAssigner(`${this.ecoModuleAdoption}file=true&output=csv&month=6&`);\n      return {\n        downloadURL: downloadURL,\n        fileName: fileName\n      };\n    }\n    EcoModuleAdoptionRateExport() {\n      let fileName = this.downloadFileNameService.generateDownloadName(this.language.ecosubscribers_report_ar);\n      let downloadURL = this.marketingExploreCommonService.queryParamsAssigner(`${this.ecoModuleAdoption}file=true&output=csv&month=6&`);\n      return {\n        downloadURL: downloadURL,\n        fileName: fileName\n      };\n    }\n    CommandIqInsightsExport() {\n      let fileName = this.downloadFileNameService.generateDownloadNameForDrillDown(this.language.command_Chart_d);\n      let downloadURL = this.marketingExploreCommonService.queryParamsAssigner(`${this.commandIQinsights}file=true&output=csv&`);\n      return {\n        downloadURL: downloadURL,\n        fileName: fileName\n      };\n    }\n    BlockedThreatsInsightsDrillDownExport(clickData) {\n      return this.httpClient.get(this.marketingExploreCommonService.queryParamsAssigner(`${this.blockedThreatsInsightsExport}protectiqtype=${clickData.tech}&page=1&size=${clickData.yValue}&`));\n    }\n  }\n  MarketingExploreDataServiceApiService.ɵfac = function MarketingExploreDataServiceApiService_Factory(t) {\n    return new (t || MarketingExploreDataServiceApiService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.SsoAuthService), i0.ɵɵinject(i3.MarketingExploreCommonService), i0.ɵɵinject(i4.DownloadFileNameService), i0.ɵɵinject(i5.TranslateService));\n  };\n  MarketingExploreDataServiceApiService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: MarketingExploreDataServiceApiService,\n    factory: MarketingExploreDataServiceApiService.ɵfac,\n    providedIn: 'root'\n  });\n  return MarketingExploreDataServiceApiService;\n})();","map":null,"metadata":{},"sourceType":"module"}