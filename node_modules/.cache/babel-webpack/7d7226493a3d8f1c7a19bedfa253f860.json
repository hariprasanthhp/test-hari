{"ast":null,"code":"import inherits from 'inherits';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n\n/**\n * A behavior that unsets the Default property of\n * sequence flow source on element delete, if the\n * removed element is the Gateway or Task's default flow.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function DeleteSequenceFlowBehavior(eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n  this.preExecute('connection.delete', function (event) {\n    var context = event.context,\n      connection = context.connection,\n      source = connection.source;\n    if (isDefaultFlow(connection, source)) {\n      modeling.updateProperties(source, {\n        'default': null\n      });\n    }\n  });\n}\ninherits(DeleteSequenceFlowBehavior, CommandInterceptor);\nDeleteSequenceFlowBehavior.$inject = ['eventBus', 'modeling'];\n\n// helpers //////////////////////\n\nfunction isDefaultFlow(connection, source) {\n  if (!is(connection, 'bpmn:SequenceFlow')) {\n    return false;\n  }\n  var sourceBo = getBusinessObject(source),\n    sequenceFlow = getBusinessObject(connection);\n  return sourceBo.get('default') === sequenceFlow;\n}","map":null,"metadata":{},"sourceType":"module"}