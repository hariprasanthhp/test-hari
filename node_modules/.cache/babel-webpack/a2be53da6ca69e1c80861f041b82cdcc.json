{"ast":null,"code":"import { DataTableDirective } from 'angular-datatables';\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"src/app/shared/services/custom-translate.service\";\nimport * as i3 from \"./service/subscriber.service\";\nimport * as i4 from \"src/app/sys-admin/services/common.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"angular-datatables\";\nfunction SubscribersComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"div\", 14);\n    i0.ɵɵelementStart(3, \"span\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.language.Loading);\n  }\n}\nfunction SubscribersComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"span\", 17);\n    i0.ɵɵelement(2, \"img\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 19);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" ? \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 20);\n    i0.ɵɵelementStart(9, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SubscribersComponent_div_3_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.Deletesubscriber();\n    });\n    i0.ɵɵtext(10, \" Confirm \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function SubscribersComponent_div_3_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.closeModal();\n    });\n    i0.ɵɵtext(12, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.language[\"Are you sure you want to delete\"], \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.modalInfo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.btnDisabled);\n  }\n}\nfunction SubscribersComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelementStart(1, \"span\", 17);\n    i0.ɵɵelement(2, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function SubscribersComponent_div_5_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.error = false;\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r2.errorInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction SubscribersComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelementStart(1, \"span\", 28);\n    i0.ɵɵelement(2, \"img\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function SubscribersComponent_div_6_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.success = false;\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r3.successInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction SubscribersComponent_tr_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵelementStart(14, \"span\", 31);\n    i0.ɵɵelementStart(15, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function SubscribersComponent_tr_30_Template_a_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const list_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.editsubscriber(list_r12.name);\n    });\n    i0.ɵɵelement(16, \"i\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\", 31);\n    i0.ɵɵelementStart(18, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function SubscribersComponent_tr_30_Template_a_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const list_r12 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.deleteDeviceGrp(list_r12);\n    });\n    i0.ɵɵelement(19, \"i\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const list_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", list_r12.name ? list_r12.name : \"--\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(list_r12.serviceType ? list_r12.serviceType : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(list_r12[\"ceVlan\"] ? list_r12.ceVlan : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(list_r12.vlans ? list_r12.vlans : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(list_r12[\"vlanMode\"] ? list_r12.vlanMode == \"N2ONE\" ? \"N:1\" : \"1:1\" : \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(list_r12.subscribersPerVlan ? list_r12.subscribersPerVlan : \"\");\n  }\n}\nexport let SubscribersComponent = /*#__PURE__*/(() => {\n  class SubscribersComponent {\n    constructor(translateService, customTranslateService, subscriberService, commonOrgService, router) {\n      this.translateService = translateService;\n      this.customTranslateService = customTranslateService;\n      this.subscriberService = subscriberService;\n      this.commonOrgService = commonOrgService;\n      this.router = router;\n      this.subscriberList = [];\n      this.loading = false;\n      this.renderedOnce = false;\n      this.dtOptions = {};\n      this.dtTrigger = new Subject();\n      this.success = false;\n    }\n    ngOnInit() {\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        setTimeout(() => {\n          if (this.renderedOnce) this.renderTable(true);\n        }, 500);\n      });\n      this.renderedOnce = false;\n      this.dtOptions = {\n        pagingType: 'full_numbers',\n        pageLength: 10,\n        lengthChange: true,\n        processing: false,\n        dom: 'tipr',\n        columnDefs: [{\n          targets: [0],\n          orderable: true\n        }],\n        order: [0, 'asc']\n      };\n      this.tableLanguageOptions();\n      this.Getsubscriber();\n    }\n    Getsubscriber() {\n      this.loading = true;\n      this.subscriberService.getsubscriber().subscribe(data => {\n        if (data == 'Service template not found') this.subscriberList = [];else this.subscriberList = data;\n        this.renderTable(false);\n        this.loading = false;\n      }, err => {\n        this.error = true;\n        this.pageErrorHandle(err);\n        this.loading = false;\n        this.renderTable(false);\n        this.dataAvailable = true;\n      });\n    }\n    editsubscriber(name) {\n      this.router.navigate([`/cco/operations/cco-subscriber-operations/templates/subscriber-templates/edit/${name}`]);\n    }\n    deleteDeviceGrp(list) {\n      this.deletedata = list;\n      this.modalInfo = this.deletedata.name;\n      $(\"html, body\").animate({\n        scrollTop: 0\n      }, \"slow\");\n    }\n    Deletesubscriber() {\n      this.btnDisabled = true;\n      this.loading = true;\n      this.subscriberService.delsubscriber(this.deletedata.name).subscribe(data => {\n        this.loading = false;\n        this.success = true;\n        this.successInfo = this.language['Deleted Successfully'];\n        $(\"html, body\").animate({\n          scrollTop: 0\n        }, \"slow\");\n        setTimeout(() => {\n          this.Getsubscriber();\n        }, 500);\n        this.btnDisabled = false;\n        this.deletedata = \"\";\n      }, err => {\n        this.loading = false;\n        this.error = true;\n        this.pageErrorHandle(err);\n        this.btnDisabled = false;\n        this.deletedata = \"\";\n      }, () => {\n        this.btnDisabled = false;\n        this.deletedata = \"\";\n        this.loading = false;\n      });\n    }\n    closeModal() {\n      this.deletedata = \"\";\n    }\n    renderTable(rerender) {\n      this.tableLanguageOptions();\n      if (this.renderedOnce) {\n        this.dataAvailable = true;\n        this.rerender();\n      } else if (rerender) {\n        this.rerender();\n        this.renderedOnce = true;\n        this.dataAvailable = true;\n        this.loading = false;\n      } else {\n        this.rerender();\n        this.renderedOnce = true;\n        this.dataAvailable = true;\n        this.loading = false;\n      }\n    }\n    ngAfterViewInit() {\n      this.dtTrigger.next();\n    }\n    pageErrorHandle(err) {\n      if (err.status == 401) {\n        this.errorInfo = this.language['Access Denied'];\n      } else {\n        this.errorInfo = this.commonOrgService.pageErrorHandle(err);\n      }\n    }\n    closeAlert() {\n      this.error = false;\n    }\n    rerender() {\n      var _a;\n      (_a = this.dtElement) === null || _a === void 0 ? void 0 : _a.dtInstance.then(dtInstance => {\n        // Destroy the table first\n        dtInstance.destroy();\n        this.dtTrigger.next();\n      });\n    }\n    tableLanguageOptions() {\n      if (this.language.fileLanguage == 'fr') {\n        this.dtOptions.language = this.frTable;\n      } else if (this.language.fileLanguage == 'en' && this.dtOptions.language) {\n        delete this.dtOptions.language;\n      }\n    }\n  }\n  SubscribersComponent.ɵfac = function SubscribersComponent_Factory(t) {\n    return new (t || SubscribersComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.CustomTranslateService), i0.ɵɵdirectiveInject(i3.SubscriberService), i0.ɵɵdirectiveInject(i4.CommonService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n  SubscribersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SubscribersComponent,\n    selectors: [[\"app-subscribers\"]],\n    viewQuery: function SubscribersComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(DataTableDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dtElement = _t.first);\n      }\n    },\n    decls: 31,\n    vars: 16,\n    consts: [[1, \"container\"], [\"class\", \"loader load\", 4, \"ngIf\"], [\"class\", \"py-3 warning-msg\", 4, \"ngIf\"], [1, \"row\"], [\"class\", \"w-100 alert alert-danger  fade show my-3\", 4, \"ngIf\"], [\"class\", \"w-100 alert alert-success fade show my-3\", 4, \"ngIf\"], [1, \"row\", \"d-flex\", \"justify-content-end\"], [\"routerLink\", \"/cco/operations/cco-subscriber-operations/templates/subscriber-templates/add\"], [\"type\", \"button\", \"id\", \"add\", 1, \"btn-default\", \"primary\", \"px-3\", \"my-3\"], [1, \"col-md-12\", 3, \"hidden\"], [\"id\", \"subscriber-template\", \"width\", \"100%\", \"datatable\", \"\", 1, \"row-border\", \"hover\", \"table-alter\", 3, \"dtOptions\", \"dtTrigger\"], [4, \"ngFor\", \"ngForOf\"], [1, \"loader\", \"load\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [1, \"py-3\", \"warning-msg\"], [1, \"error-img\"], [\"src\", \"./assets/img/warning-icon.svg\"], [2, \"width\", \"500px\", \"word-wrap\", \"break-word\", \"display\", \"inline-block\"], [1, \"btn-con-sec\", \"float-right\"], [\"id\", \"deletePFBtn\", 1, \"btn\", \"warn-btn\", \"mr-2\", 3, \"disabled\", \"click\"], [1, \"btn\", \"warn-btn\", 3, \"click\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\", \"my-3\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [1, \"w-100\", \"alert\", \"alert-success\", \"fade\", \"show\", \"my-3\"], [1, \"success-img\"], [\"src\", \"./assets/img/success-icon.svg\"], [3, \"innerHtml\"], [\"title\", \"Delete\", 1, \"del\"], [\"href\", \"javascript:void(0)\", 2, \"cursor\", \"pointer\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-pencil-alt\", \"mx-2\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-trash-o\"]],\n    template: function SubscribersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, SubscribersComponent_div_2_Template, 5, 1, \"div\", 1);\n        i0.ɵɵtemplate(3, SubscribersComponent_div_3_Template, 13, 3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtemplate(5, SubscribersComponent_div_5_Template, 6, 1, \"div\", 4);\n        i0.ɵɵtemplate(6, SubscribersComponent_div_6_Template, 6, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"a\", 7);\n        i0.ɵɵelementStart(9, \"button\", 8);\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵelementStart(12, \"table\", 10);\n        i0.ɵɵelementStart(13, \"thead\");\n        i0.ɵɵelementStart(14, \"tr\");\n        i0.ɵɵelementStart(15, \"th\");\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\");\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\");\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\");\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"th\");\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"th\");\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"th\");\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"tbody\");\n        i0.ɵɵtemplate(30, SubscribersComponent_tr_30_Template, 20, 6, \"tr\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.deletedata);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.success);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"\", ctx.language[\"Add Template\"], \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", !ctx.dataAvailable);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"dtOptions\", ctx.dtOptions)(\"dtTrigger\", ctx.dtTrigger);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"\", ctx.language.Name, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.language[\"Service_Type\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.language[\"Ce-Vlan\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.language[\"Vlans\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.language[\"Vlan Mode\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.language[\"Subscribers Per Vlan\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.language.action);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.subscriberList);\n      }\n    },\n    directives: [i6.NgIf, i5.RouterLinkWithHref, i7.DataTableDirective, i6.NgForOf],\n    styles: [\".form-control-sm[_ngcontent-%COMP%]{min-height:38px!important;max-height:42px!important;padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:1.2rem!important;background-color:#f8f8fa!important;border:none!important}select[_ngcontent-%COMP%]{border-radius:20px;background:url(http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png) no-repeat right #f8f8fa10;-webkit-appearance:none;background-position:right 17px center}\"]\n  });\n  return SubscribersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}