{"ast":null,"code":"import { AcessModifiers } from \"../../shared/services/sso-auth.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../app-services/routing.services\";\nimport * as i2 from \"../service/block-page.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"../../shared/services/sso-auth.service\";\nimport * as i6 from \"src/app-services/translate.service\";\nimport * as i7 from \"src/app/sys-admin/services/common.service\";\nimport * as i8 from \"src/app/sys-admin/services/organization-api.service\";\nimport * as i9 from \"@angular/platform-browser\";\nimport * as i10 from \"@angular/common\";\nconst _c0 = [\"deleteModal\"];\nconst _c1 = [\"defaultModal\"];\nconst _c2 = [\"defaultSuccessModal\"];\nconst _c3 = [\"deleteSuccessModal\"];\nfunction BlockPageTemplateListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelementStart(1, \"div\", 14);\n    i0.ɵɵelementStart(2, \"div\", 15);\n    i0.ɵɵelementStart(3, \"span\", 16);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.language.Loading);\n  }\n}\nfunction BlockPageTemplateListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelementStart(1, \"span\", 18);\n    i0.ɵɵelement(2, \"img\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementStart(6, \"button\", 20);\n    i0.ɵɵelement(7, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.language.Error, \"!\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMsg, \". \");\n  }\n}\nfunction BlockPageTemplateListComponent_div_7_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_div_7_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.addBlockPage();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.language.Add_Block_Page, \" \");\n  }\n}\nfunction BlockPageTemplateListComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, BlockPageTemplateListComponent_div_7_button_1_Template, 2, 1, \"button\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showAddBtn);\n  }\n}\nfunction BlockPageTemplateListComponent_div_8_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 30);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r16.language[\"No Data Available\"]);\n  }\n}\nfunction BlockPageTemplateListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelementStart(1, \"table\", 26);\n    i0.ɵɵelementStart(2, \"thead\");\n    i0.ɵɵelementStart(3, \"tr\");\n    i0.ɵɵelementStart(4, \"th\", 27);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 27);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"tbody\", 28);\n    i0.ɵɵtemplate(13, BlockPageTemplateListComponent_div_8_tr_13_Template, 3, 1, \"tr\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", ctx_r3.loader);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r3.language.Name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.language.Block_Page_Template);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.language.Updated_On);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.language.Action);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.showNoDataAvail);\n  }\n}\nfunction BlockPageTemplateListComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵelementStart(1, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_div_9_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.loadRecords();\n    })(\"click\", function BlockPageTemplateListComponent_div_9_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.loadRecords();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", ctx_r4.loader);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.language.Show_More, \" \");\n  }\n}\nfunction BlockPageTemplateListComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelementStart(1, \"h4\", 34);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_10_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.close();\n    });\n    i0.ɵɵelement(4, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 36);\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 37);\n    i0.ɵɵelementStart(9, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_10_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.close();\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_10_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.deleteTemplate();\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r6.language.Delete_Template, \" - \", ctx_r6.templateName, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r6.language.Delete_Temp_Msg, \" - \", ctx_r6.templateName, \"?\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.language.No, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r6.disableDeleteBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.language.Yes, \" \");\n  }\n}\nfunction BlockPageTemplateListComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelementStart(1, \"h4\", 40);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_12_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.close();\n    });\n    i0.ɵɵelement(4, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 36);\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 37);\n    i0.ɵɵelementStart(9, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_12_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.close();\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_12_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.setDefaultTemplate();\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r8.language.Set_Default_Template, \" - \", ctx_r8.templateName, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r8.language.Set_Temp_Msg, \" - \", ctx_r8.templateName, \" ?\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.language.No, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r8.disableDefaultBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.language.Yes, \" \");\n  }\n}\nfunction BlockPageTemplateListComponent_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelementStart(1, \"h4\", 34);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_14_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r35);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return ctx_r34.close();\n    });\n    i0.ɵɵelement(4, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 36);\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 37);\n    i0.ɵɵelementStart(9, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_14_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r35);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return ctx_r36.close();\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r10.language.Set_Default_Template, \" - \", ctx_r10.templateName, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r10.templateName, \" \", ctx_r10.language.Update_Temp_Msg, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r10.language.Close, \" \");\n  }\n}\nfunction BlockPageTemplateListComponent_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelementStart(1, \"h4\", 34);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function BlockPageTemplateListComponent_ng_template_16_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return ctx_r39.close();\n    });\n    i0.ɵɵelement(4, \"span\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 36);\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"div\", 37);\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r12.language.Delete, \" - \", ctx_r12.templateName, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r12.language.Delete_Suc_Msg);\n  }\n}\nconst $ = require('jquery');\nexport let BlockPageTemplateListComponent = /*#__PURE__*/(() => {\n  class BlockPageTemplateListComponent {\n    constructor(routerService, service, router, dialogService, sso, translateService, zone, commonOrgService, organizationApiService, titleService) {\n      this.routerService = routerService;\n      this.service = service;\n      this.router = router;\n      this.dialogService = dialogService;\n      this.sso = sso;\n      this.translateService = translateService;\n      this.zone = zone;\n      this.commonOrgService = commonOrgService;\n      this.organizationApiService = organizationApiService;\n      this.titleService = titleService;\n      this.blockList = [];\n      this.showLoadMoreBtn = true;\n      this.templateData = {};\n      this.loader = true;\n      this.showDeleteBtn = false;\n      this.showUpdateBtn = false;\n      this.showAddBtn = false;\n      this.disableDeleteBtn = false;\n      this.isShad = true;\n      //REDIRECT_URL: string = 'cco-foundation/foundation-configuration/configuration-settings';\n      this.REDIRECT_URL = '/organization-admin';\n      this.scroll = event => {\n        let lastScrollTop = 0;\n        let st = $(\".ng-star-inserted\").scrollTop();\n        if (st > lastScrollTop) {\n          //this.loadRecords();\n        }\n        lastScrollTop = st;\n      };\n      this.disableDefaultBtn = false;\n      this.error = false;\n      this.errorMsg = '';\n      this.service.setIntialData();\n      this.commonOrgService.currentPageAdder('block_page');\n      let url = this.router.url;\n      if (url.indexOf('/shad/') === -1) {\n        this.isShad = false;\n        this.ADMIN_ORG_ID = this.sso.getOrganizationID(url);\n        this.REDIRECT_URL = this.sso.getRedirectModule(url);\n        this.SPID = this.sso.getAdminSPID(this.ADMIN_ORG_ID);\n        //this.SPID = this.sso.getSPID();\n      } else {\n        this.SPID = this.sso.getSPID();\n      }\n      if (url.indexOf('/foundation-configuration/') > -1) {\n        this.REDIRECT_URL = 'cco-foundation/foundation-configuration/configuration-settings';\n      }\n    }\n    ngOnInit() {\n      let scope = this.sso.getScopes();\n      let url = this.router.url;\n      // let validateScopeStage = false;\n      // let base = `${environment.API_BASE}`;\n      // if (base.indexOf('/dev.api.calix.ai') > -1) {\n      //   validateScopeStage = true;\n      // } else validateScopeStage = false;\n      if (url.indexOf('/shad/') !== -1) {\n        if (scope['cloud.shad.service'] && scope['cloud.shad.service'].indexOf('write') !== -1) {\n          this.showUpdateBtn = true;\n          this.showAddBtn = true;\n          this.showDeleteBtn = true;\n        }\n      } else {\n        //foundation scope check\n        if (this.sso.checkAdminScopes(AcessModifiers.WRITE)) {\n          this.showUpdateBtn = true;\n          this.showAddBtn = true;\n          this.showDeleteBtn = true;\n        }\n      }\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        //this.appendData();\n        this.titleService.setTitle(`${this.language['Block_Page_Temp']} - ${this.REDIRECT_URL === 'systemAdministration' ? this.language['System Administration'] : this.language['administration']} - ${this.language['Calix Cloud']}`);\n      });\n      this.titleService.setTitle(`${this.language['Block_Page_Temp']} - ${this.REDIRECT_URL === 'systemAdministration' ? this.language['System Administration'] : this.language['administration']} - ${this.language['Calix Cloud']}`);\n      this.loadRecords();\n      this.appendData();\n      this.windowScrollEvent();\n    }\n    onScroll(event) {\n      // visible height + pixel scrolled >= total height\n      if (event.target.offsetHeight + event.target.scrollTop + 10 >= event.target.scrollHeight) {\n        this.loadRecords();\n      }\n    }\n    addBlockPage() {\n      if (this.isShad) {\n        this.router.navigate([`/shad/block_page_template`]);\n      } else {\n        this.router.navigate([`/${this.REDIRECT_URL}/block_page_template`]);\n      }\n      //this.routerService.newBlockPageCreate();\n    }\n\n    viewBlockPage() {\n      this.routerService.blockPageView();\n    }\n    updateBlockPage(data) {\n      this.routerService.blockPageUpdate(data);\n    }\n    loadRecords() {\n      if (!this.showLoadMoreBtn) {\n        return;\n      }\n      if (!this.SPID && !this.isShad) {\n        this.getOrgInfoSubs = this.organizationApiService.getOrgInfo(this.ADMIN_ORG_ID).subscribe(res => {\n          this.orgIdResponse = res;\n          this.sso.setAdminOrgInfo(res);\n          if (res && res.spId) {\n            this.SPID = res.spId;\n            this.service.getList(this.SPID);\n          }\n        }, err => {});\n      } else {\n        this.service.getList(this.SPID);\n      }\n      //this.service.getList(this.SPID);\n    }\n\n    gotoView(templateId) {\n      let updateData = this.templateData[templateId];\n      if (!updateData) {\n        alert(this.language['No template found for template id'] + templateId);\n        return;\n      }\n      var params = {};\n      if (updateData.logoBgColor.indexOf('#') == -1) {\n        updateData.logoBgColor = \"#\" + updateData.logoBgColor;\n      }\n      if (updateData.bodyFontColor.indexOf('#') == -1) {\n        updateData.bodyFontColor = \"#\" + updateData.bodyFontColor;\n      }\n      params[\"header_bg\"] = updateData.logoBgColor;\n      params[\"bodyFontColor\"] = updateData.bodyFontColor;\n      params[\"logo\"] = updateData.logoImage;\n      params[\"body_bg_image\"] = updateData.bodyBgImage;\n      localStorage.setItem('original_params', JSON.stringify(params));\n      this.router.navigate([]).then(result => {\n        window.open(\"/block_page_template_view?id=\" + templateId, '_blank');\n      });\n    }\n    loadDeleteModal(id, name) {\n      this.deleteTemplateId = id.toString();\n      this.templateName = name;\n      this.modalRef = this.dialogService.open(this.deleteModal, {\n        backdrop: 'static',\n        keyboard: false\n      });\n    }\n    loadDefaultModal(id, name) {\n      this.defaultTemplateId = id;\n      this.templateName = name;\n      this.modalRef = this.dialogService.open(this.defaultModal);\n    }\n    loadDefaultSuccessModal() {\n      this.modalRef = this.dialogService.open(this.defaultSuccessModal);\n    }\n    loadDeleteSuccessModal() {\n      this.modalRef = this.dialogService.open(this.deleteSuccessModal);\n    }\n    setDefaultTemplate() {\n      this.disableDefaultBtn = true;\n      this.service.setDefaultTemplate(this.defaultTemplateId, this.SPID).subscribe(res => {\n        this.disableDefaultBtn = false;\n        this.close();\n        this.loadDefaultSuccessModal();\n        setTimeout(function () {\n          window.location.reload();\n        }, 1000);\n      }, err => {\n        this.disableDefaultBtn = false;\n      });\n    }\n    deleteTemplate() {\n      this.disableDeleteBtn = true;\n      this.service.deleteTemplate(this.deleteTemplateId, this.SPID).subscribe(res => {\n        var _a;\n        this.deleteBlockpageResponse = res;\n        this.disableDeleteBtn = false;\n        this.close();\n        this.loadDeleteSuccessModal();\n        // setTimeout(function () {\n        //   window.location.reload();\n        // }, 1000);\n        (_a = document === null || document === void 0 ? void 0 : document.getElementById(this.deleteTemplateId + '_row')) === null || _a === void 0 ? void 0 : _a.remove();\n      }, err => {\n        this.disableDeleteBtn = false;\n      });\n    }\n    close() {\n      var _a;\n      (_a = this === null || this === void 0 ? void 0 : this.modalRef) === null || _a === void 0 ? void 0 : _a.close();\n    }\n    gotoUpdate(templateId) {\n      // let updateData = this.templateData[templateId];\n      // if (!updateData) {\n      //     alert(\"No template found for template id : \" + templateId);\n      //     return;\n      // }\n      // var params = {};\n      // if (updateData.logoBgColor.indexOf('#') == -1) {\n      //   updateData.logoBgColor=\"#\"+updateData.logoBgColor;\n      // }\n      // if (updateData.bodyFontColor.indexOf('#') == -1) {\n      //   updateData.bodyFontColor=\"#\"+updateData.bodyFontColor;\n      // }\n      // params[\"header_bg\"] = updateData.logoBgColor;\n      // params[\"bodyFontColor\"] = updateData.bodyFontColor;\n      // params[\"logo\"] = updateData.logoImage;\n      // params[\"body_bg_image\"] = updateData.bodyBgImage;\n      // localStorage.setItem('original_params', JSON.stringify(params));\n      //this.router.navigate([]).then(result => { window.open(\"/shad/block_page_template_update/\" + templateId, '_self') });\n      if (this.isShad) {\n        this.router.navigate([`/shad/block_page_template_update/${templateId}`]);\n      } else {\n        this.router.navigate([`/${this.REDIRECT_URL}/block_page_template_update/${templateId}`]);\n      }\n    }\n    showError(errorMsg) {\n      this.error = true;\n      this.errorMsg = errorMsg;\n    }\n    hideError() {\n      this.error = false;\n      this.errorMsg = '';\n    }\n    appendData() {\n      this.serviceSubscription = this.service.result$.subscribe(jdata => {\n        if (jdata && jdata['error']) {\n          this.loader = false;\n          this.showLoadMoreBtn = false;\n          this.showError(jdata['errorMsg']);\n          return;\n        }\n        if (jdata && jdata.results) {\n          this.listBlockedPageData = jdata.results;\n          let data = jdata.results;\n          let length = data.length;\n          let i;\n          let name, ud, defaultStr, d, ld;\n          let updateButton = '';\n          let html = '';\n          let containersSelectedArr = [];\n          let tr;\n          let td;\n          let btn;\n          for (i = 0; i < length; i++) {\n            if (!data[i]) {\n              continue;\n            }\n            this.templateData[data[i].id] = data[i];\n            d = new Date(data[i].created);\n            ld = d.toLocaleString();\n            name = data[i].name;\n            if (name) {\n              name = name.replace(/['\"]+/g, '');\n            }\n            if (name == null) {\n              name = '';\n            }\n            if (data[i].updated) {\n              d = new Date(data[i].updated);\n              ud = d.toLocaleString();\n            } else {\n              ud = '-';\n            }\n            if (data[i].default) {\n              defaultStr = 'Yes';\n            } else {\n              defaultStr = 'No';\n            }\n            tr = document.createElement('tr');\n            tr.setAttribute('id', data[i].id + '_row');\n            td = document.createElement('td');\n            td.innerText = `${name}`;\n            tr.appendChild(td);\n            td = document.createElement('td');\n            td.innerText = `${ld}`;\n            tr.appendChild(td);\n            td = document.createElement('td');\n            td.innerText = `${ud}`;\n            tr.appendChild(td);\n            td = document.createElement('td');\n            btn = document.createElement('span');\n            btn.setAttribute('id', data[i].id);\n            btn.addEventListener('click', e => {\n              this.gotoView(e.target.id);\n            }, false);\n            btn.style.cursor = 'pointer';\n            btn.classList.add('view-btn');\n            btn.classList.add('btn');\n            btn.classList.add('btn-sm');\n            btn.classList.add('btn-success');\n            btn.classList.add('margin-left-10');\n            btn.innerText = this.language['View'];\n            td.appendChild(btn);\n            tr.appendChild(td);\n            btn = document.createElement('span');\n            btn.setAttribute('id', data[i].id + '_update');\n            btn.addEventListener('click', e => {\n              let arr = e.target.id.split('_');\n              this.gotoUpdate(arr[0]);\n            }, false);\n            btn.style.cursor = 'pointer';\n            btn.classList.add('update-btn');\n            btn.classList.add('btn');\n            btn.classList.add('btn-sm');\n            btn.classList.add('btn-warning');\n            btn.style.marginLeft = '3px';\n            btn.innerText = this.language['Update'];\n            if (this.showUpdateBtn) {\n              td.appendChild(btn);\n              tr.appendChild(td);\n            }\n            btn = document.createElement('span');\n            btn.setAttribute('id', data[i].id + '_' + data[i].name);\n            btn.style.cursor = 'pointer';\n            btn.classList.add('delete-btn');\n            btn.classList.add('btn');\n            btn.classList.add('btn-sm');\n            btn.classList.add('btn-danger');\n            btn.classList.add('margin-left-10');\n            btn.style.marginLeft = '3px';\n            btn.innerText = this.language['delete'];\n            btn.addEventListener('click', e => {\n              let arr = e.target.id.split('_');\n              this.loadDeleteModal(arr[0], arr[1]);\n            }, false);\n            if (this.showDeleteBtn) {\n              td.appendChild(btn);\n              tr.appendChild(td);\n            }\n            if (data[i].default) {\n              btn = document.createElement('span');\n              //btn.setAttribute('id', 'default-template');\n              btn.style.cursor = 'pointer';\n              btn.classList.add('default-btn');\n              btn.classList.add('btn');\n              btn.classList.add('btn-sm');\n              btn.classList.add('btn-light');\n              btn.style.marginLeft = '3px';\n              btn.innerText = this.language['Default Template'];\n              td.appendChild(btn);\n              tr.appendChild(td);\n            } else {\n              btn = document.createElement('span');\n              btn.style.cursor = 'pointer';\n              btn.setAttribute('id', data[i].id + '_' + data[i].name + '_default');\n              btn.classList.add('set-default-btn');\n              btn.classList.add('btn');\n              btn.classList.add('btn-sm');\n              btn.classList.add('btn-primary');\n              btn.style.marginLeft = '3px';\n              btn.innerText = this.language['Set Default'];\n              if (this.showAddBtn) {\n                btn.addEventListener('click', e => {\n                  let arr = e.target.id.split('_');\n                  this.loadDefaultModal(arr[0], arr[1]);\n                }, false);\n                td.appendChild(btn);\n                tr.appendChild(td);\n              }\n            }\n            document.getElementById('block-page-list').appendChild(tr);\n          }\n          localStorage.setItem(\"templateData\", JSON.stringify(this.templateData));\n        }\n        if (jdata && jdata.results && !jdata.results.length) {\n          if (jdata && jdata['start'] == 0) {\n            this.showNoDataAvail = true;\n          }\n        }\n        this.showLoadMoreBtn = jdata['showLoadMoreBtn'];\n        this.loader = false;\n      }, err => {\n        this.loader = false;\n      });\n    }\n    ngOnDestroy() {\n      if (this.serviceSubscription) {\n        this.serviceSubscription.unsubscribe();\n      }\n      this.service.undoService();\n      this.languageSubject.unsubscribe();\n      if (this.getOrgInfoSubs) this.getOrgInfoSubs.unsubscribe();\n      $(window).off(\"scroll\", this.pageScroll);\n    }\n    windowScrollEvent() {\n      this.pageScroll = () => {\n        if ($(window).scrollTop() + $(window).height() > $(document).height() - 320) {\n          this.loadRecords();\n        }\n      };\n      $(window).scroll(this.pageScroll);\n    }\n  }\n  BlockPageTemplateListComponent.ɵfac = function BlockPageTemplateListComponent_Factory(t) {\n    return new (t || BlockPageTemplateListComponent)(i0.ɵɵdirectiveInject(i1.RouterService), i0.ɵɵdirectiveInject(i2.BlockPageService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.NgbModal), i0.ɵɵdirectiveInject(i5.SsoAuthService), i0.ɵɵdirectiveInject(i6.TranslateService), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i7.CommonService), i0.ɵɵdirectiveInject(i8.OrganizationApiService), i0.ɵɵdirectiveInject(i9.Title));\n  };\n  BlockPageTemplateListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BlockPageTemplateListComponent,\n    selectors: [[\"app-block-page-template-list\"]],\n    viewQuery: function BlockPageTemplateListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n        i0.ɵɵviewQuery(_c3, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deleteModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.defaultModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.defaultSuccessModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deleteSuccessModal = _t.first);\n      }\n    },\n    hostBindings: function BlockPageTemplateListComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"scroll\", function BlockPageTemplateListComponent_scroll_HostBindingHandler($event) {\n          return ctx.onScroll($event);\n        });\n      }\n    },\n    decls: 18,\n    vars: 6,\n    consts: [[1, \"position-relative\"], [\"class\", \"loader\", 4, \"ngIf\"], [\"id\", \"main-div\", 1, \"main-card\"], [1, \"main-card-header\", \"text-center\", \"pt-3\"], [\"class\", \"alert alert-warning alert-dismissible fade show\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"pull-right mb1\", 4, \"ngIf\"], [3, \"hidden\", 4, \"ngIf\"], [\"class\", \"form-group text-center\", \"id\", \"load_more\", 3, \"hidden\", 4, \"ngIf\"], [\"class\", \"col-md-8\"], [\"deleteModal\", \"\"], [\"defaultModal\", \"\"], [\"defaultSuccessModal\", \"\"], [\"deleteSuccessModal\", \"\"], [1, \"loader\"], [1, \"d-flex\", \"justify-content-center\"], [\"role\", \"\", 1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\", \"alert-dismissible\", \"fade\", \"show\"], [1, \"success-img\"], [\"src\", \"./assets/img/error-icon.svg\"], [\"type\", \"button\", \"data-dismiss\", \"alert\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [1, \"pull-right\", \"mb1\"], [\"class\", \"btn-default primary \", \"id\", \"add-block-page-btn\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"add-block-page-btn\", 1, \"btn-default\", \"primary\", 3, \"click\"], [3, \"hidden\"], [\"id\", \"block-page-table\", 1, \"table\", \"table-bordered\", \"text-center\"], [2, \"width\", \"350px !important\"], [\"id\", \"block-page-list\", 2, \"word-break\", \"break-all\"], [4, \"ngIf\"], [\"colspan\", \"4\"], [\"id\", \"load_more\", 1, \"form-group\", \"text-center\", 3, \"hidden\"], [1, \"btn\", \"btn-lg\", \"font-medium-1\", \"btn-outline-success\", \"block-element\", 3, \"click\"], [1, \"modal-header\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-dark\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 2, \"margin-left\", \"3px\", 3, \"disabled\", \"click\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\", 2, \"margin-top\", \"20px !important\"]],\n    template: function BlockPageTemplateListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, BlockPageTemplateListComponent_div_1_Template, 5, 1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"h4\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, BlockPageTemplateListComponent_div_6_Template, 8, 2, \"div\", 4);\n        i0.ɵɵtemplate(7, BlockPageTemplateListComponent_div_7_Template, 2, 1, \"div\", 5);\n        i0.ɵɵtemplate(8, BlockPageTemplateListComponent_div_8_Template, 14, 6, \"div\", 6);\n        i0.ɵɵtemplate(9, BlockPageTemplateListComponent_div_9_Template, 3, 2, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, BlockPageTemplateListComponent_ng_template_10_Template, 13, 7, \"ng-template\", 8, 9, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(12, BlockPageTemplateListComponent_ng_template_12_Template, 13, 7, \"ng-template\", 8, 10, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(14, BlockPageTemplateListComponent_ng_template_14_Template, 11, 5, \"ng-template\", 8, 11, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(16, BlockPageTemplateListComponent_ng_template_16_Template, 9, 3, \"ng-template\", 8, 12, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loader);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.language.Block_Page_Template);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showLoadMoreBtn);\n      }\n    },\n    directives: [i10.NgIf],\n    styles: [\"button[_ngcontent-%COMP%]{cursor:pointer!important}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}\"]\n  });\n  return BlockPageTemplateListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}