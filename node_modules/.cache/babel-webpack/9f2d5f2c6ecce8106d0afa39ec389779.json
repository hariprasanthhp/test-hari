{"ast":null,"code":"import { of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared-utils/date-utils.service\";\nimport * as i2 from \"src/app-services/translate.service\";\nexport let HomeChartOptionsService = /*#__PURE__*/(() => {\n  class HomeChartOptionsService {\n    constructor(dateUtils, translateService) {\n      this.dateUtils = dateUtils;\n      this.translateService = translateService;\n      this.commonHighChartOptions = {\n        exporting: {\n          enabled: false\n        },\n        credits: {\n          enabled: false\n        },\n        title: {\n          text: ''\n        },\n        responsive: {\n          rules: [{\n            condition: {},\n            chartOptions: {\n              chart: {\n                color: '#4c4c4c'\n              },\n              subtitle: {\n                text: null\n              },\n              navigator: {\n                enabled: false\n              }\n            }\n          }]\n        }\n      };\n      this.lineChartColors = ['#5ACFEA', '#FF8238', '#FF489D'];\n      this.colors = ['#0027FF', '#5ACFEA', '#B926F0', '#FF8238', '#029A7C', '#F7C343', '#FF489D', '#F7500F', '#0279ff', '#82bf00', '#836ee8', '#DE428E', '#6574A6', '#41EAD4', '#BB8B1A', '#A44A3F', '#277DA1', '#FFC9B9', '#219EBC', '#7678ed', '#8a817c', '#7f7f7f', '#136f63', '#92b6b1', '#662e9b'];\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n      });\n    }\n    getNetworkAvailabilityOptions(cData, yLabel, showLegend) {\n      let categories = [],\n        outage = [],\n        degrade = [];\n      let chartData = [];\n      var that = this;\n      if (cData.length) {\n        cData = this.sortByTimestamp(cData, 'time');\n        cData.forEach(e => {\n          categories.push(this.dateUtils.getChartFormatDate(e.time, 'M/d/yy', true));\n          outage.push(e.outage);\n          degrade.push(e.degrade);\n        });\n        chartData;\n      }\n      let options = Object.assign(Object.assign({}, this.commonHighChartOptions), {\n        credits: {\n          enabled: false\n        },\n        chart: {\n          type: 'line',\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '12px',\n            color: '#4c4c4c'\n          },\n          plotBorderWidth: 1\n        },\n        colors: ['#0027FF', '#5ACFEA'],\n        title: {\n          text: null\n        },\n        xAxis: [{\n          min: 0,\n          gridLineWidth: 1,\n          categories: categories,\n          tickInterval: 5\n          //crosshair: true,\n        }],\n        yAxis: [{\n          min: 0,\n          allowDecimals: true,\n          // labels: {\n          //   formatter: function () {\n          //     //var maxElement = Math.abs(this.axis.min);\n          //     var maxElement = Math.abs(this.axis.max);\n          //     var unit = that.getStackedUnit(maxElement);\n          //     var m = this.value;\n          //     m = Math.abs(m);\n          //     let displayValue = (m / unit[0]).toFixed(2);\n          //     return (displayValue == '0.00' ? '0' : displayValue) + ' ' + unit[1];\n          //   },\n          // },\n          title: {\n            text: yLabel && this.language ? this.language[yLabel] : yLabel ? yLabel : '',\n            style: {\n              color: '#727272'\n            }\n          },\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '13px',\n            color: '#4c4c4c'\n          }\n        }],\n        legend: {\n          symbol: 'square',\n          enabled: showLegend ? true : false\n        },\n        tooltip: {\n          shared: true,\n          crosshairs: true\n        },\n        series: [{\n          name: `${this.language['Service Outage']}`,\n          data: outage\n          //color: '#35c7fc'\n        }, {\n          name: `${this.language['Service Degradation']}`,\n          data: degrade\n          //color: '#F7C343',\n          //yAxis: 1,\n        }],\n\n        plotOptions: {\n          series: {\n            // ...this.plotOptions,\n            cursor: 'pointer',\n            //pointPadding: 2, // Defaults to 0.1\n            // groupPadding: 0.1,\n            marker: {\n              enabled: false\n            },\n            pointPlacement: 'on',\n            point: {\n              events: {}\n            }\n          },\n          states: {\n            inactive: {\n              enabled: false\n            }\n          }\n        },\n        responsive: {\n          rules: [{\n            condition: {}\n          }]\n        }\n      });\n      return options;\n    }\n    getCommonSubscribersChartOptions(cData, yLabel, showLegend, chartName) {\n      let that = this;\n      let options = Object.assign(Object.assign({}, this.commonHighChartOptions), {\n        credits: {\n          enabled: false\n        },\n        chart: {\n          type: 'line',\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '12px',\n            color: '#4c4c4c'\n          },\n          plotBorderWidth: 1\n        },\n        colors: this.colors,\n        title: {\n          text: null\n        },\n        xAxis: [{\n          min: 0,\n          gridLineWidth: 1,\n          categories: cData.categories,\n          //tickInterval: 5,\n          tickmarkPlacement: 'on',\n          showLastLabel: true,\n          tickInterval: function () {\n            let sLength = cData.series ? cData.series.length : 0;\n            let xCategLength = cData.categories ? cData.categories.length : 0;\n            let xAxisLen = Math.floor(xCategLength / sLength);\n            let f = 1;\n            if (xCategLength <= 6) {\n              f = 1;\n            } else if (xCategLength > 6 && xCategLength < 13) {\n              f = 2;\n            } else {\n              f = Math.floor(xCategLength / 6) ? Math.floor(xCategLength / 6) : 1;\n            }\n            return f;\n          }(),\n          labels: {\n            rotation: -25\n          }\n          //crosshair: true,\n        }],\n        yAxis: [{\n          min: 0,\n          softMax: 1,\n          allowDecimals: false,\n          // labels: {\n          //   formatter: function () {\n          //     //var maxElement = Math.abs(this.axis.min);\n          //     var maxElement = Math.abs(this.axis.max);\n          //     var unit = that.getStackedUnit(maxElement);\n          //     var m = this.value;\n          //     m = Math.abs(m);\n          //     let displayValue = (m / unit[0]).toFixed(2);\n          //     return (displayValue == '0.00' ? '0' : displayValue) + ' ' + unit[1];\n          //   },\n          // },\n          title: {\n            text: yLabel ? this.language[yLabel] : yLabel ? yLabel : '',\n            style: {\n              color: '#727272'\n            }\n          },\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '13px',\n            color: '#4c4c4c'\n          }\n        }],\n        lang: {\n          noData: that.language[\"No Data Available\"]\n        },\n        legend: {\n          symbolRadius: 100,\n          enabled: showLegend ? true : false\n        },\n        tooltip: {\n          shared: true,\n          crosshairs: true\n        },\n        series: [...cData.series],\n        plotOptions: {\n          series: {\n            // ...this.plotOptions,\n            cursor: 'pointer',\n            //pointPadding: 2, // Defaults to 0.1\n            groupPadding: 0.1,\n            marker: {\n              enabled: cData.categories.length == 1 ? true : false,\n              symbol: 'circle',\n              radius: 2,\n              states: {\n                hover: {\n                  enabled: true\n                }\n              }\n            },\n            pointPlacement: 'on',\n            point: {\n              events: {}\n            }\n          },\n          states: {\n            inactive: {\n              enabled: false\n            }\n          }\n        },\n        responsive: {\n          rules: [{\n            condition: {}\n          }]\n        }\n      });\n      if (chartName && chartName == 'system_by_model') {\n        options = this.addTooltipformatter(options);\n      }\n      return of(options);\n    }\n    getCommonSubscribersChartOptionsfor30records(cData, yLabel, showLegend, chartName) {\n      let that = this;\n      let options = Object.assign(Object.assign({}, this.commonHighChartOptions), {\n        credits: {\n          enabled: false\n        },\n        chart: {\n          type: 'line',\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '12px',\n            color: '#4c4c4c'\n          },\n          plotBorderWidth: 1\n        },\n        colors: this.colors,\n        title: {\n          text: null\n        },\n        xAxis: [{\n          min: 0,\n          gridLineWidth: 1,\n          categories: cData.categories,\n          //tickInterval: 5,\n          tickmarkPlacement: 'on',\n          showLastLabel: true,\n          tickPositions: [0, 5, 10, 15, 20, 25, 29],\n          tickInterval: function () {\n            let sLength = cData.series ? cData.series.length : 0;\n            let xCategLength = cData.categories ? cData.categories.length : 0;\n            let xAxisLen = Math.floor(xCategLength / sLength);\n            let f = 1;\n            if (xCategLength <= 6) {\n              f = 1;\n            } else if (xCategLength > 6 && xCategLength < 13) {\n              f = 2;\n            } else {\n              f = Math.floor(xCategLength / 6) ? Math.floor(xCategLength / 6) : 1;\n            }\n            return f;\n          }(),\n          labels: {\n            rotation: -25\n          }\n          //crosshair: true,\n        }],\n        yAxis: [{\n          min: 0,\n          softMax: 1,\n          allowDecimals: false,\n          // labels: {\n          //   formatter: function () {\n          //     //var maxElement = Math.abs(this.axis.min);\n          //     var maxElement = Math.abs(this.axis.max);\n          //     var unit = that.getStackedUnit(maxElement);\n          //     var m = this.value;\n          //     m = Math.abs(m);\n          //     let displayValue = (m / unit[0]).toFixed(2);\n          //     return (displayValue == '0.00' ? '0' : displayValue) + ' ' + unit[1];\n          //   },\n          // },\n          title: {\n            text: yLabel && this.language ? this.language[yLabel] : yLabel ? yLabel : '',\n            style: {\n              color: '#727272'\n            }\n          },\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '13px',\n            color: '#4c4c4c'\n          }\n        }],\n        lang: {\n          noData: that.language[\"No Data Available\"]\n        },\n        legend: {\n          symbolRadius: 100,\n          enabled: showLegend ? true : false\n        },\n        tooltip: {\n          shared: true,\n          crosshairs: true\n        },\n        series: [...cData.series],\n        plotOptions: {\n          series: {\n            // ...this.plotOptions,\n            cursor: 'pointer',\n            //pointPadding: 2, // Defaults to 0.1\n            groupPadding: 0.1,\n            marker: {\n              enabled: cData.categories.length == 1 ? true : false,\n              symbol: 'circle',\n              radius: 2,\n              states: {\n                hover: {\n                  enabled: true\n                }\n              }\n            },\n            pointPlacement: 'on',\n            point: {\n              events: {}\n            }\n          },\n          states: {\n            inactive: {\n              enabled: false\n            }\n          }\n        },\n        responsive: {\n          rules: [{\n            condition: {}\n          }]\n        }\n      });\n      if (chartName && chartName == 'system_by_model') {\n        options = this.addTooltipformatter(options);\n      }\n      return of(options);\n    }\n    getColumnChartOption(cData, yLabel, showLegend) {\n      let options = Object.assign(Object.assign({}, this.commonHighChartOptions), {\n        credits: {\n          enabled: false\n        },\n        chart: {\n          type: 'column',\n          inverted: true,\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '12px',\n            color: '#4c4c4c'\n          }\n        },\n        colors: ['#0027FF', '#5ACFEA', '#fd9e4c', '#F7C343'],\n        title: {\n          text: this.language && this.language['Firmware Image Count (%) / Model'] ? this.language['Firmware Image Count (%) / Model'] : 'Firmware Image Count (%) / Model',\n          style: {\n            fontFamily: 'Source Sans Pro,Regular',\n            fontSize: '12px',\n            color: '#4c4c4c'\n          }\n        },\n        xAxis: {\n          categories: [...cData.categories],\n          title: {\n            text: 'Model'\n          }\n        },\n        yAxis: {\n          opposite: true,\n          min: 0,\n          title: {\n            text: null\n          },\n          stackLabels: {\n            enabled: true,\n            style: {\n              fontWeight: 'bold'\n              // color: ( // theme\n              //   Highcharts.defaultOptions.title.style &&\n              //   Highcharts.defaultOptions.title.style.color\n              // ) || 'gray'\n            }\n          }\n        },\n\n        legend: {\n          enabled: false\n        },\n        tooltip: {\n          headerFormat: '<b>{point.x}</b><br/>',\n          pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'\n        },\n        plotOptions: {\n          column: {\n            stacking: 'normal',\n            dataLabels: {\n              enabled: true\n            }\n          }\n        },\n        series: [{\n          data: [...cData.series]\n        }]\n      });\n      return of(options);\n    }\n    sortByTimestamp(list, key) {\n      list.sort(function (x, y) {\n        x[key] = x[key] ? parseInt(x[key]) : 0;\n        y[key] = y[key] ? parseInt(y[key]) : 0;\n        return x[key] - y[key];\n      });\n      return list;\n    }\n    addTooltipformatter(options) {\n      options['tooltip'] = {\n        shared: true,\n        crosshairs: true,\n        useHTML: true,\n        formatter: function () {\n          var s = this.x + '</br>';\n          var points = this.points;\n          s += '<table>';\n          s += '<tr>';\n          if (points && points.length > 24) {\n            $.each(this.points, function (i, point) {\n              if (i % 2 == 0) {\n                s += '<tr></tr>';\n              }\n              s += '<td style=\"width: 120px;padding-right: 20px;\"><span style=\"color:' + point.color + '\">\\u25CF</span> ' + point.series.name + ': <b>' + point.y + '</b> </td><td style=\"width: 30px;\"></td>';\n            });\n          } else {\n            $.each(this.points, function (i, point) {\n              s += '<tr></tr>';\n              s += '<td style=\"width: 120px;\"><span style=\"color:' + point.color + '\">\\u25CF</span> ' + point.series.name + ': <b>' + point.y + '</b> </td>';\n            });\n          }\n          s += '</tr>';\n          s += '</table>';\n          //console.log(s)\n          return s;\n        }\n      };\n      return options;\n    }\n  }\n  HomeChartOptionsService.ɵfac = function HomeChartOptionsService_Factory(t) {\n    return new (t || HomeChartOptionsService)(i0.ɵɵinject(i1.DateUtilsService), i0.ɵɵinject(i2.TranslateService));\n  };\n  HomeChartOptionsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: HomeChartOptionsService,\n    factory: HomeChartOptionsService.ɵfac,\n    providedIn: 'root'\n  });\n  return HomeChartOptionsService;\n})();","map":null,"metadata":{},"sourceType":"module"}