{"ast":null,"code":"import elementHelper from 'bpmn-js-properties-panel/lib/helper/ElementHelper';\nimport cmdHelper from 'bpmn-js-properties-panel/lib/helper/CmdHelper';\nimport entryFactory from 'bpmn-js-properties-panel/lib/factory/EntryFactory';\n\n/**\n * Creates 'bpmn:FormalExpression' element.\n *\n * @param {ModdleElement} parent\n * @param {string} body\n * @param {BpmnFactory} bpmnFactory\n *\n * @return {ModdleElement<bpmn:FormalExpression>} a formal expression\n */\nfunction createFormalExpression(parent, body = undefined, bpmnFactory) {\n  return elementHelper.createElement('bpmn:FormalExpression', {\n    body: body\n  }, parent, bpmnFactory);\n}\nexport default function (group, bpmnFactory, timerEventDefinition, translate) {\n  group.entries.push(entryFactory.textField(translate, {\n    id: 'timer-event-duration',\n    label: translate('Timer Duration'),\n    modelProperty: 'timerDefinition',\n    get: function (element, node) {\n      const type = 'timeDuration';\n      const definition = type && timerEventDefinition.get(type);\n      const value = definition && definition.get('body');\n      return {\n        timerDefinition: value\n      };\n    },\n    set: function (element, values) {\n      const type = 'timeDuration';\n      let definition = type && timerEventDefinition.get(type);\n      const commands = [];\n      if (!definition) {\n        definition = createFormalExpression(timerEventDefinition, {}, bpmnFactory);\n        commands.push(cmdHelper.updateBusinessObject(element, timerEventDefinition, {\n          'timeDuration': definition\n        }));\n      }\n      if (definition) {\n        commands.push(cmdHelper.updateBusinessObject(element, definition, {\n          body: values.timerDefinition || undefined\n        }));\n        return commands;\n      }\n    },\n    validate: function (element) {\n      const type = 'timeDuration';\n      const definition = type && timerEventDefinition.get(type);\n      if (definition) {\n        const value = definition.get('body');\n        if (!value) {\n          return {\n            timerDefinition: translate('Must provide a value')\n          };\n        }\n      }\n    }\n  }));\n}","map":null,"metadata":{},"sourceType":"module"}