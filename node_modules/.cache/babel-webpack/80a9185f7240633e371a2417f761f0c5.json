{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../data.service\";\nimport * as i2 from \"../../shared/services/sso-auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction SearchComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"span\", 4);\n    i0.ɵɵtext(4, \"Loading\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nexport let SearchComponent = /*#__PURE__*/(() => {\n  class SearchComponent {\n    constructor(service, sso, router) {\n      this.service = service;\n      this.sso = sso;\n      this.router = router;\n    }\n    ngOnInit() {\n      var _a, _b, _c;\n      const outUser = sessionStorage.getItem('outsideUser');\n      const locId = outUser ? decodeURIComponent((_a = JSON.parse(outUser) || {}) === null || _a === void 0 ? void 0 : _a.param.subscriberLocationId) : (_b = history === null || history === void 0 ? void 0 : history.state) === null || _b === void 0 ? void 0 : _b.subscriberLocationId;\n      localStorage.setItem('externalUser', outUser);\n      sessionStorage.removeItem('outsideUser');\n      let externalUserInfo = localStorage.getItem('externalUser');\n      if (externalUserInfo && JSON.parse(externalUserInfo) instanceof Object && ((_c = JSON.parse(externalUserInfo)) === null || _c === void 0 ? void 0 : _c.externalUser)) localStorage.removeItem('externalUser');\n      const orgId = this.sso.getOrgId();\n      this.loader = true;\n      this.service.performSearch(orgId, `subscriberlocationid:\"${decodeURIComponent(locId)}\"`, 1, 1).subscribe(res => {\n        var _a, _b;\n        this.loader = false;\n        if (res && res.records.length) {\n          const data = res.records[0];\n          sessionStorage.setItem(`calix.deviceData`, JSON.stringify(data.devices));\n          sessionStorage.setItem(`calix.subscriberId`, data.subscriberId);\n          this.service.setSubscriberInfo(undefined);\n          this.service.setSubscriberTabInfoData(undefined);\n          this.service.removeDataSaver();\n          this.service.multipleRegInstance = undefined;\n          const ticketId = outUser ? decodeURIComponent((_a = JSON.parse(outUser) || {}) === null || _a === void 0 ? void 0 : _a.param.ticketId) : (_b = history === null || history === void 0 ? void 0 : history.state) === null || _b === void 0 ? void 0 : _b.ticketId;\n          sessionStorage.setItem('calloutcomeSubmitted', 'false');\n          sessionStorage.setItem('extUserCheckModuleWise', JSON.stringify({\n            externalSearch: true,\n            ticketId: ticketId,\n            routeTo: '/support/overview'\n          }));\n          this.router.navigate(['/support/overview'], {\n            state: {\n              externalSearch: true,\n              ticketId: ticketId\n            }\n          });\n        } else {\n          this.router.navigate(['/support/home'], {\n            state: {\n              externalUser: true,\n              fromSearch: true\n            }\n          });\n        }\n      }, error => {\n        this.loader = false;\n        this.router.navigate(['/support/home'], {\n          state: {\n            externalUser: true,\n            fromSearch: true\n          }\n        });\n      });\n    }\n  }\n  SearchComponent.ɵfac = function SearchComponent_Factory(t) {\n    return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.DataServiceService), i0.ɵɵdirectiveInject(i2.SsoAuthService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  SearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SearchComponent,\n    selectors: [[\"app-search\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"loader\", 4, \"ngIf\"], [1, \"loader\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"]],\n    template: function SearchComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, SearchComponent_div_0_Template, 5, 0, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loader);\n      }\n    },\n    directives: [i4.NgIf],\n    styles: [\"\"]\n  });\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}