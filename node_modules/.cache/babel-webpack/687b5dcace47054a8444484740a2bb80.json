{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport { OutageWorkflow } from '../outage-workflow.constants';\nimport { SmsConsentComponent } from '../../workflow-shared/sms-consent/sms-consent.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"../outage-workflow.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"src/app/sys-admin/services/common.service\";\nimport * as i6 from \"@angular/common/http\";\nimport * as i7 from \"src/app/shared-utils/date-utils.service\";\nimport * as i8 from \"../../workflow-shared/common-workflow.service\";\nimport * as i9 from \"src/app/shared/services/common-functions.service\";\nimport * as i10 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i11 from \"@angular/common\";\nimport * as i12 from \"../../workflow-shared/details/details.component\";\nimport * as i13 from \"../outge-wrkflw-notification-trigger/outge-wrkflw-notification-trigger.component\";\nimport * as i14 from \"../../workflow-shared/recepients/recepients.component\";\nimport * as i15 from \"../outge-wrkflw-summary/outge-wrkflw-summary.component\";\nfunction OutgeWrkflwMainComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelementStart(1, \"span\", 23);\n    i0.ɵɵelement(2, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_div_0_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.closeAlert();\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r0.errorInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction OutgeWrkflwMainComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelementStart(1, \"span\", 28);\n    i0.ɵɵelement(2, \"img\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.success = false;\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r1.language[ctx_r1.successInfo] || ctx_r1.successInfo, i0.ɵɵsanitizeHtml);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"step-current\": a0,\n    \"\": a1,\n    \"step-done\": a2\n  };\n};\nfunction OutgeWrkflwMainComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_li_14_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const i_r17 = restoredCtx.index;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.onTabChange(i_r17);\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r16 = ctx.$implicit;\n    const i_r17 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r2.language[tab_r16]);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(3, _c0, ctx_r2.activeTab === tab_r16, ctx_r2.tabs.length === 2, ctx_r2.levelsPassed > i_r17 && ctx_r2.activeTab !== tab_r16));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.language[tab_r16] || tab_r16);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    primary: a0\n  };\n};\nfunction OutgeWrkflwMainComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.onTabChange(ctx_r20.selectedTabIndex - 1);\n    });\n    i0.ɵɵelement(1, \"img\", 32);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c1, ctx_r3.selectedTabIndex !== 0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.language[\"Go back\"], \" \");\n  }\n}\nfunction OutgeWrkflwMainComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.onTabChange(ctx_r22.selectedTabIndex + 1);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"img\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r4.disableNextBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.language[\"save_and_continue\"], \" \");\n  }\n}\nfunction OutgeWrkflwMainComponent_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.deploy(\"PAUSE\");\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r5.disableFinishBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.language[\"save_and_pause\"], \" \");\n  }\n}\nfunction OutgeWrkflwMainComponent_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function OutgeWrkflwMainComponent_button_19_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.deploy(\"RUN\");\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r6.disableFinishBtn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.language[\"save_and_activate\"], \" \");\n  }\n}\nfunction OutgeWrkflwMainComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵelementStart(1, \"div\", 38);\n    i0.ɵɵelementStart(2, \"div\", 39);\n    i0.ɵɵelementStart(3, \"span\", 40);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r7.language.Loading);\n  }\n}\nfunction OutgeWrkflwMainComponent_app_details_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-details\", 41);\n    i0.ɵɵlistener(\"isFormValid\", function OutgeWrkflwMainComponent_app_details_22_Template_app_details_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"workflowObj\", ctx_r8.workflowObj);\n  }\n}\nfunction OutgeWrkflwMainComponent_app_outge_wrkflw_notification_trigger_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-outge-wrkflw-notification-trigger\", 41);\n    i0.ɵɵlistener(\"isFormValid\", function OutgeWrkflwMainComponent_app_outge_wrkflw_notification_trigger_23_Template_app_outge_wrkflw_notification_trigger_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"workflowObj\", ctx_r9.workflowObj);\n  }\n}\nfunction OutgeWrkflwMainComponent_app_recepients_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-recepients\", 42);\n    i0.ɵɵlistener(\"isFormValid\", function OutgeWrkflwMainComponent_app_recepients_24_Template_app_recepients_isFormValid_0_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.validateForm($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dynamicFields\", ctx_r10.recepientFormFields)(\"dynamicFieldsObj\", ctx_r10.recepientFormFieldsObj)(\"workflowObj\", ctx_r10.workflowObj);\n  }\n}\nfunction OutgeWrkflwMainComponent_app_outge_wrkflw_summary_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-outge-wrkflw-summary\", 43);\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"workflowObj\", ctx_r11.workflowObj);\n  }\n}\nexport let OutgeWrkflwMainComponent = /*#__PURE__*/(() => {\n  class OutgeWrkflwMainComponent {\n    constructor(translateService, titleService, otgWrkflwSrvc, route, commonOrgService, http, router, dateUtils, commonWorkflowService, commonService, modalService) {\n      this.translateService = translateService;\n      this.titleService = titleService;\n      this.otgWrkflwSrvc = otgWrkflwSrvc;\n      this.route = route;\n      this.commonOrgService = commonOrgService;\n      this.http = http;\n      this.router = router;\n      this.dateUtils = dateUtils;\n      this.commonWorkflowService = commonWorkflowService;\n      this.commonService = commonService;\n      this.modalService = modalService;\n      this.recepientFormFields = [{\n        key: 'emails',\n        required: true\n      }, {\n        key: 'notes',\n        required: false\n      }, {\n        key: 'sms',\n        required: true\n      }, {\n        key: 'webhooks',\n        required: true\n      }];\n      this.recepientFormFieldsObj = {\n        emailRecipients: 'emails',\n        emailNotes: 'notes',\n        sms: 'sms',\n        webhooks: 'webhooks'\n      };\n      this.loader = false;\n      this.disableFinishBtn = false;\n      this.outageWorkflow = OutageWorkflow;\n      this.activeTab = OutageWorkflow === null || OutageWorkflow === void 0 ? void 0 : OutageWorkflow.DETAILS_LABEL;\n      this.selectedTabIndex = 0;\n      this.isTabChange = true;\n      this.disableNextBtn = false;\n      this.error = false;\n      this.errorInfo = '';\n      this.success = false;\n      this.successInfo = '';\n      this.tabs = [OutageWorkflow === null || OutageWorkflow === void 0 ? void 0 : OutageWorkflow.DETAILS_LABEL, OutageWorkflow === null || OutageWorkflow === void 0 ? void 0 : OutageWorkflow.NOTIFICATION_LABEL, OutageWorkflow === null || OutageWorkflow === void 0 ? void 0 : OutageWorkflow.RECEPIENTS_LABEL, OutageWorkflow === null || OutageWorkflow === void 0 ? void 0 : OutageWorkflow.SUMMARY_LABEL];\n      this.workflowObj = {\n        \"uuid\": \"\",\n        \"name\": \"\",\n        \"tenantId\": 0,\n        \"emails\": [],\n        \"notes\": \"\",\n        \"region\": ['All'],\n        \"location\": ['All'],\n        \"filter\": [],\n        \"schedule\": {\n          \"immediate\": true,\n          \"type\": null,\n          \"recurrencePattern\": null\n        },\n        \"notifyOnClear\": true,\n        \"outageThreshold\": 1,\n        \"outageDuration\": 1,\n        \"description\": \"\",\n        \"status\": \"DRAFT\",\n        \"format\": \"HTML\",\n        \"timezone\": \"\",\n        \"outagePollInterval\": 15,\n        \"sms\": [],\n        \"webhooks\": [],\n        \"forms\": {\n          \"0\": {\n            valid: false\n          },\n          \"1\": {\n            valid: false\n          },\n          \"2\": {\n            valid: false\n          }\n        },\n        isConsentMsgSmsPopupAccepted: false,\n        isLoadConsentMsgSmsPopupApplicable: true\n      };\n      this.levelsPassed = 0;\n    }\n    ngOnInit() {\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        this.titleService.setTitle(`${this.language['Service Disruption Notifications']} - ${this.language['Email Notifications']} - ${this.language['Network_Operations']} - ${this.language['Operations']} - ${this.language['Operations']} - ${this.language['Calix Cloud']}`);\n      });\n      this.titleService.setTitle(`${this.language['Service Disruption Notifications']} - ${this.language['Email Notifications']} - ${this.language['Network_Operations']} - ${this.language['Operations']} - ${this.language['Operations']} - ${this.language['Calix Cloud']}`);\n      console.log(`${this.language['Service Disruption Notifications']}`);\n      let id = this.route.snapshot.paramMap.get(\"id\");\n      if (id) {\n        this.getRecordById(id);\n      }\n    }\n    openModal() {\n      const modalRef = this.modalService.open(SmsConsentComponent);\n      modalRef.componentInstance.workflowObj = this.workflowObj;\n      modalRef.result.then(result => {\n        if (result) {\n          console.log(result);\n          this.onTabChange(this.selectedTabIndex + 1);\n        }\n      }).catch(res => {});\n      ;\n    }\n    onTabChange(index, type = null) {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n      if (index > this.selectedTabIndex) {\n        let validNav = true;\n        this.commonWorkflowService.setTabChange();\n        for (let i = 0; i < index; i++) {\n          if (!((_c = (_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.forms) === null || _b === void 0 ? void 0 : _b[i]) === null || _c === void 0 ? void 0 : _c.valid)) {\n            validNav = false;\n            break;\n          }\n        }\n        if (!validNav) {\n          return;\n        }\n        if (this.selectedTabIndex == 2 && ((_d = this.workflowObj) === null || _d === void 0 ? void 0 : _d.isLoadConsentMsgSmsPopupApplicable) && !((_e = this.workflowObj) === null || _e === void 0 ? void 0 : _e.isConsentMsgSmsPopupAccepted) && ((_g = (_f = this.workflowObj) === null || _f === void 0 ? void 0 : _f.sms) === null || _g === void 0 ? void 0 : _g.length)) {\n          this.openModal();\n          return;\n        }\n        if (this.selectedTabIndex == 0 && !((_h = this.workflowObj) === null || _h === void 0 ? void 0 : _h.uuid)) {\n          let data = {\n            name: this.workflowObj.name,\n            description: this.workflowObj.description,\n            timezone: this.dateUtils.getTImeZoneWithOffset()\n          };\n          this.create(data, index);\n        } else {\n          this.update(index);\n        }\n      } else {\n        this.updateTab(index);\n      }\n      // this.activeTab = this.tabs[index];\n      // this.disableNextBtn = false;\n      // this.selectedTabIndex = index;\n      // this.isTabChange = !this.isTabChange;\n      // if (this.levelsPassed < index) {\n      //   this.levelsPassed = index;\n      // }\n    }\n\n    closeAlert() {\n      this.error = false;\n      this.errorInfo = '';\n    }\n    validateForm(event) {\n      var _a, _b;\n      if ((_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.forms) === null || _b === void 0 ? void 0 : _b[this.selectedTabIndex]) {\n        this.workflowObj.forms[this.selectedTabIndex].valid = event;\n      }\n    }\n    getRecordById(id) {\n      this.loader = true;\n      let url = `${environment.API_BASE_URL}analytics-engine/outageworkflow?outageWorkflowId=${id}`;\n      this.http.get(url).subscribe(json => {\n        var _a, _b;\n        if (json && Object.keys(json).length) {\n          json = this.otgWrkflwSrvc.updateRegLocToAll(json);\n          this.setFormStatus(json);\n          if (!(json === null || json === void 0 ? void 0 : json.outagePollInterval)) {\n            json.outagePollInterval = 15;\n          }\n          this.workflowObj = Object.assign(Object.assign({}, this.workflowObj), json);\n          if ((_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a.sms) === null || _b === void 0 ? void 0 : _b.length) {\n            this.workflowObj.isConsentMsgSmsPopupAccepted = true;\n            this.workflowObj.isLoadConsentMsgSmsPopupApplicable = false;\n          }\n        }\n        this.loader = false;\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    pageErrorHandle(err) {\n      if (err.status == 401) {\n        this.errorInfo = this.language['Access Denied'];\n      } else {\n        this.errorInfo = this.commonOrgService.pageErrorHandle(err);\n      }\n      this.error = true;\n      this.loader = false;\n    }\n    create(data, index) {\n      this.http.post(`${environment.API_BASE_URL}analytics-engine/outageworkflow`, data, {\n        responseType: 'text'\n      }).subscribe(res => {\n        console.log(res);\n        this.setSuccessInfo(\"Successfully Saved\");\n        this.workflowObj.uuid = res;\n        this.updateTab(index);\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    update(index) {\n      let url = `${environment.API_BASE_URL}analytics-engine/outageworkflow/${this.workflowObj.uuid}`;\n      let data = {\n        //name: this.workflowObj.name,\n        description: this.workflowObj.description,\n        timezone: this.dateUtils.getTImeZoneWithOffset()\n      };\n      if (this.selectedTabIndex == 1) {\n        data = Object.assign(Object.assign({}, data), {\n          region: this.workflowObj.region,\n          location: this.workflowObj.location,\n          outagePollInterval: this.workflowObj.outagePollInterval\n        });\n      } else if (this.selectedTabIndex == 2) {\n        data = Object.assign(Object.assign({}, data), {\n          region: this.workflowObj.region,\n          location: this.workflowObj.location,\n          outagePollInterval: this.workflowObj.outagePollInterval,\n          emails: this.workflowObj.emails,\n          notes: this.workflowObj.notes,\n          webhooks: this.workflowObj.webhooks,\n          sms: this.workflowObj.sms\n        });\n      }\n      data['status'] = this.workflowObj.status;\n      if (this.selectedTabIndex > 0) {\n        data = this.otgWrkflwSrvc.updateRegLoc(data);\n      }\n      this.http.put(url, data, {\n        responseType: 'text'\n      }).subscribe(res => {\n        console.log(res);\n        this.setSuccessInfo(\"Successfully Saved\");\n        // if (this.selectedTabIndex > 2) {\n        //   this.router.navigate(['./cco/operations/alarms/health-alarm-notifications']);\n        // }\n        this.updateTab(index);\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    deploy(status) {\n      let url = `${environment.API_BASE_URL}analytics-engine/outagedeployWorkflow?workflowId=${this.workflowObj.uuid}&status=${status}`;\n      let data = {\n        //name: this.workflowObj.name,\n        description: this.workflowObj.description,\n        region: this.workflowObj.region,\n        location: this.workflowObj.location,\n        outagePollInterval: this.workflowObj.outagePollInterval,\n        emails: this.workflowObj.emails,\n        notes: this.workflowObj.notes,\n        status: status,\n        webhooks: this.workflowObj.webhooks,\n        sms: this.workflowObj.sms\n      };\n      data = this.otgWrkflwSrvc.updateRegLoc(data);\n      this.http.put(url, data, {\n        responseType: 'text'\n      }).subscribe(res => {\n        console.log(res);\n        let msg = 'Service Disruption Notification Schedule successfully deployed';\n        if (status === 'PAUSE') {\n          msg = 'Service Disruption Notification Schedule successfully paused';\n          this.commonService.trackPendoEvents('Operations_Cloud', 'Email notification modified');\n        } else this.commonService.trackPendoEvents('Operations_Cloud', 'Email notification saved');\n        this.setSuccessInfo(msg);\n        setTimeout(() => {\n          if (this.selectedTabIndex > 2) {\n            this.router.navigate(['./cco/operations/alarms/health-alarm-notifications']);\n          }\n        }, 2000);\n      }, err => {\n        console.log(err);\n        this.pageErrorHandle(err);\n      });\n    }\n    updateTab(index) {\n      this.activeTab = this.tabs[index];\n      this.disableNextBtn = false;\n      this.selectedTabIndex = index;\n      this.isTabChange = !this.isTabChange;\n      if (this.levelsPassed < index) {\n        this.levelsPassed = index;\n      }\n    }\n    setSuccessInfo(msg) {\n      this.success = true;\n      this.successInfo = msg;\n      setTimeout(() => {\n        this.success = false;\n      }, 2000);\n    }\n    setFormStatus(json) {\n      var _a, _b, _c;\n      if (json === null || json === void 0 ? void 0 : json.name) {\n        this.workflowObj.forms[0].valid = true;\n        this.levelsPassed = 1;\n      }\n      if ((json === null || json === void 0 ? void 0 : json.name) && (json === null || json === void 0 ? void 0 : json.outagePollInterval)) {\n        this.workflowObj.forms[1].valid = true;\n        this.levelsPassed = 2;\n      }\n      if ((json === null || json === void 0 ? void 0 : json.name) && (json === null || json === void 0 ? void 0 : json.outagePollInterval) && ((_a = json === null || json === void 0 ? void 0 : json.emails) === null || _a === void 0 ? void 0 : _a.length) || ((_b = json === null || json === void 0 ? void 0 : json.sms) === null || _b === void 0 ? void 0 : _b.length) || ((_c = json === null || json === void 0 ? void 0 : json.webhooks) === null || _c === void 0 ? void 0 : _c.length)) {\n        this.workflowObj.forms[2].valid = true;\n        this.levelsPassed = 3;\n      }\n      if ((json === null || json === void 0 ? void 0 : json.status) === 'PAUSE' || (json === null || json === void 0 ? void 0 : json.status) === 'RUN') {\n        this.levelsPassed = 4;\n      }\n    }\n  }\n  OutgeWrkflwMainComponent.ɵfac = function OutgeWrkflwMainComponent_Factory(t) {\n    return new (t || OutgeWrkflwMainComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i3.OutageWorkflowService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.CommonService), i0.ɵɵdirectiveInject(i6.HttpClient), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i7.DateUtilsService), i0.ɵɵdirectiveInject(i8.CommonWorkflowService), i0.ɵɵdirectiveInject(i9.CommonFunctionsService), i0.ɵɵdirectiveInject(i10.NgbModal));\n  };\n  OutgeWrkflwMainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OutgeWrkflwMainComponent,\n    selectors: [[\"app-outge-wrkflw-main\"]],\n    decls: 26,\n    vars: 13,\n    consts: [[\"class\", \"w-100 alert alert-danger fade show my-3\", 4, \"ngIf\"], [\"class\", \"w-100 alert alert-success fade show my-3\", 4, \"ngIf\"], [\"id\", \"outage-workflow\", 1, \"outage-workflow\"], [1, \"row\", \"mb-2\"], [1, \"col-md-12\", \"border-bottom\", \"pb-1\", \"pl-0\", \"pr-5\", \"position-relative\", \"min-h-58px\"], [1, \"ccl-admin-title\"], [1, \"close-icon\"], [\"routerLink\", \"/cco/operations/alarms/health-alarm-notifications\", \"routerLinkActive\", \"active\", 1, \"close\", \"cursor-pointer\"], [1, \"row\"], [1, \"col-md-12\", \"px-0\"], [1, \"stepper-main\", \"mt-3\"], [1, \"stepper-ui\", \"mb-4\"], [4, \"ngFor\", \"ngForOf\"], [1, \"pos-action-btn\"], [\"type\", \"button\", \"class\", \"btn-arrow btn-arr-prev btn-grey mr-2 float-left\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn-default primary\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn-default primary px-3 mr-2\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"btn-default primary px-3\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"class\", \"loader\", 4, \"ngIf\"], [3, \"workflowObj\", \"isFormValid\", 4, \"ngIf\"], [3, \"dynamicFields\", \"dynamicFieldsObj\", \"workflowObj\", \"isFormValid\", 4, \"ngIf\"], [3, \"workflowObj\", 4, \"ngIf\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\", \"my-3\"], [1, \"error-img\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [1, \"w-100\", \"alert\", \"alert-success\", \"fade\", \"show\", \"my-3\"], [1, \"success-img\"], [\"src\", \"./assets/img/success-icon.svg\"], [3, \"title\", \"ngClass\", \"click\"], [\"type\", \"button\", 1, \"btn-arrow\", \"btn-arr-prev\", \"btn-grey\", \"mr-2\", \"float-left\", 3, \"ngClass\", \"click\"], [\"src\", \"assets/img/ic_chevronleft_grey.svg\"], [\"type\", \"button\", 1, \"btn-default\", \"primary\", 3, \"disabled\", \"click\"], [\"src\", \"assets/img/ic_chevron-r-w.svg\", 1, \"ml-1\"], [\"type\", \"button\", 1, \"btn-default\", \"primary\", \"px-3\", \"mr-2\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn-default\", \"primary\", \"px-3\", 3, \"disabled\", \"click\"], [1, \"loader\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [3, \"workflowObj\", \"isFormValid\"], [3, \"dynamicFields\", \"dynamicFieldsObj\", \"workflowObj\", \"isFormValid\"], [3, \"workflowObj\"]],\n    template: function OutgeWrkflwMainComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, OutgeWrkflwMainComponent_div_0_Template, 6, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, OutgeWrkflwMainComponent_div_1_Template, 6, 1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"button\", 7);\n        i0.ɵɵelement(9, \"span\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵelementStart(12, \"section\", 10);\n        i0.ɵɵelementStart(13, \"ul\", 11);\n        i0.ɵɵtemplate(14, OutgeWrkflwMainComponent_li_14_Template, 4, 7, \"li\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 13);\n        i0.ɵɵtemplate(16, OutgeWrkflwMainComponent_button_16_Template, 3, 4, \"button\", 14);\n        i0.ɵɵtemplate(17, OutgeWrkflwMainComponent_button_17_Template, 3, 2, \"button\", 15);\n        i0.ɵɵtemplate(18, OutgeWrkflwMainComponent_button_18_Template, 2, 2, \"button\", 16);\n        i0.ɵɵtemplate(19, OutgeWrkflwMainComponent_button_19_Template, 2, 2, \"button\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, OutgeWrkflwMainComponent_div_20_Template, 5, 1, \"div\", 18);\n        i0.ɵɵelementStart(21, \"div\");\n        i0.ɵɵtemplate(22, OutgeWrkflwMainComponent_app_details_22_Template, 1, 1, \"app-details\", 19);\n        i0.ɵɵtemplate(23, OutgeWrkflwMainComponent_app_outge_wrkflw_notification_trigger_23_Template, 1, 1, \"app-outge-wrkflw-notification-trigger\", 19);\n        i0.ɵɵtemplate(24, OutgeWrkflwMainComponent_app_recepients_24_Template, 1, 3, \"app-recepients\", 20);\n        i0.ɵɵtemplate(25, OutgeWrkflwMainComponent_app_outge_wrkflw_summary_25_Template, 1, 1, \"app-outge-wrkflw-summary\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.success);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", (ctx.workflowObj == null ? null : ctx.workflowObj.name) || ctx.language[\"New Service Disruption\"], \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex + 1 !== (ctx.tabs == null ? null : ctx.tabs.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex + 1 === (ctx.tabs == null ? null : ctx.tabs.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedTabIndex + 1 === (ctx.tabs == null ? null : ctx.tabs.length));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loader);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outageWorkflow == null ? null : ctx.outageWorkflow.DETAILS_LABEL));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outageWorkflow == null ? null : ctx.outageWorkflow.NOTIFICATION_LABEL));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outageWorkflow == null ? null : ctx.outageWorkflow.RECEPIENTS_LABEL));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeTab === (ctx.outageWorkflow == null ? null : ctx.outageWorkflow.SUMMARY_LABEL));\n      }\n    },\n    directives: [i11.NgIf, i4.RouterLink, i4.RouterLinkActive, i11.NgForOf, i11.NgClass, i12.DetailsComponent, i13.OutgeWrkflwNotificationTriggerComponent, i14.RecepientsComponent, i15.OutgeWrkflwSummaryComponent],\n    styles: [\"#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]{width:100%;display:flex;flex:0 0 100%;position:relative}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{width:calc(100% / 5);padding:5px 25px;background:#ebeaef!important;color:gray;text-align:center;cursor:pointer!important;border-radius:20px}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:first-child{border-top-left-radius:20px;border-bottom-left-radius:20px}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%]{z-index:55!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%]{z-index:44!important;transform:translate(-20px)}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%]{z-index:33!important;transform:translate(-40px)}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%]{z-index:22!important;transform:translate(-60px)!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{z-index:11!important;transform:translate(-80px)!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step-active[_ngcontent-%COMP%]{background:#0279ff!important;color:#fff!important;z-index:99!important;border-radius:20px!important}#outage-workflow.outage-workflow[_ngcontent-%COMP%]   .step-success[_ngcontent-%COMP%]{background:#82bf00!important;color:#fff!important;z-index:101!important;border-radius:20px!important}.outage-workflow[_ngcontent-%COMP%]{position:relative}.close-box[_ngcontent-%COMP%]{font-size:24px;font-weight:300;color:gray}.btn-arrow.btn-grey[_ngcontent-%COMP%]{border:1px solid #CCCCCC!important;background-color:#f8f8fa!important;color:#4c4c4c!important}.stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;position:relative}.stepper-ui[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0 0 10px;padding:0;overflow:hidden;width:100%}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px 0 30px;color:#1a1f22;position:relative;height:32px;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;border-right:0px!important;border-left:0px!important;outline:none!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:\\\"\\\";width:30px;height:100%;background:transparent;position:absolute;top:0;right:-10px;transform:rotate(48deg);z-index:1;border:1px ridge transparent;border-top-color:#0279ff;border-right-color:#0279ff;border-top-right-radius:5px}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{background-color:#0279ff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{background-color:#82bf00!important;border-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{background-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled{background-color:#82bf00!important;border-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{border-top-color:#fff!important;border-right-color:#fff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{border-top-color:#0279ff!important;border-right-color:#0279ff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   button[_ngcontent-%COMP%]{border-top-left-radius:30px;border-bottom-left-radius:30px}button[_ngcontent-%COMP%]:disabled{background:transparent!important;border-color:#0279ff!important;cursor:not-allowed;color:#4c4c4c}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f5faff;color:#0279ff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{background-color:#f5faff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;right:0;top:-1px;width:20px;height:32px;background-color:transparent;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;z-index:9}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:#1a1f22}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:after{background-color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{opacity:.8;color:#fff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:before, .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:before{display:none}.btn-arr-nxt[_ngcontent-%COMP%]:disabled{background:#0279ff!important;border:1px solid #0279ff!important;cursor:not-allowed;opacity:.5;color:#81bcff}.pos-action-btn[_ngcontent-%COMP%]{position:absolute;right:0px;top:0px}.close-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:24px}.min-h-58px[_ngcontent-%COMP%]{min-height:58px}\"]\n  });\n  return OutgeWrkflwMainComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}