{"ast":null,"code":"import { assign } from 'min-dash';\nvar DEFAULT_CONFIG = {\n  moveSpeed: 50,\n  moveSpeedAccelerated: 200\n};\n\n/**\n * A feature that allows users to move the canvas using the keyboard.\n *\n * @param {Object} config\n * @param {number} [config.moveSpeed=50]\n * @param {number} [config.moveSpeedAccelerated=200]\n * @param {Keyboard} keyboard\n * @param {Canvas} canvas\n */\nexport default function KeyboardMove(config, keyboard, canvas) {\n  var self = this;\n  this._config = assign({}, DEFAULT_CONFIG, config || {});\n  keyboard.addListener(arrowsListener);\n  function arrowsListener(context) {\n    var event = context.keyEvent,\n      config = self._config;\n    if (!keyboard.isCmd(event)) {\n      return;\n    }\n    if (keyboard.isKey(['ArrowLeft', 'Left', 'ArrowUp', 'Up', 'ArrowDown', 'Down', 'ArrowRight', 'Right'], event)) {\n      var speed = keyboard.isShift(event) ? config.moveSpeedAccelerated : config.moveSpeed;\n      var direction;\n      switch (event.key) {\n        case 'ArrowLeft':\n        case 'Left':\n          direction = 'left';\n          break;\n        case 'ArrowUp':\n        case 'Up':\n          direction = 'up';\n          break;\n        case 'ArrowRight':\n        case 'Right':\n          direction = 'right';\n          break;\n        case 'ArrowDown':\n        case 'Down':\n          direction = 'down';\n          break;\n      }\n      self.moveCanvas({\n        speed: speed,\n        direction: direction\n      });\n      return true;\n    }\n  }\n  this.moveCanvas = function (opts) {\n    var dx = 0,\n      dy = 0,\n      speed = opts.speed;\n    var actualSpeed = speed / Math.min(Math.sqrt(canvas.viewbox().scale), 1);\n    switch (opts.direction) {\n      case 'left':\n        // Left\n        dx = actualSpeed;\n        break;\n      case 'up':\n        // Up\n        dy = actualSpeed;\n        break;\n      case 'right':\n        // Right\n        dx = -actualSpeed;\n        break;\n      case 'down':\n        // Down\n        dy = -actualSpeed;\n        break;\n    }\n    canvas.scroll({\n      dx: dx,\n      dy: dy\n    });\n  };\n}\nKeyboardMove.$inject = ['config.keyboardMove', 'keyboard', 'canvas'];","map":null,"metadata":{},"sourceType":"module"}