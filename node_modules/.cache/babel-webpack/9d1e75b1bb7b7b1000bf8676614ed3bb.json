{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"src/app/shared/services/sso-auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction OperationsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.language[\"Access denied due to RBAC. Please consult your Organization Administrator for access.\"], \"\\n\");\n  }\n}\nfunction OperationsComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.language.Operations, \"\\n\");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\nfunction OperationsComponent_div_2_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelementStart(1, \"a\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r3.menuConfig == null ? null : ctx_r3.menuConfig.systemonboarding == null ? null : ctx_r3.menuConfig.systemonboarding.urls == null ? null : ctx_r3.menuConfig.systemonboarding.urls[0])(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r3.activeMenus[\"system-onboarding\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.language[\"System Onboarding\"]);\n  }\n}\nfunction OperationsComponent_div_2_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelementStart(1, \"a\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r4.menuConfig == null ? null : ctx_r4.menuConfig.alarms == null ? null : ctx_r4.menuConfig.alarms.urls == null ? null : ctx_r4.menuConfig.alarms.urls[0])(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r4.activeMenus[\"alarms\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.language[\"Alarms\"]);\n  }\n}\nfunction OperationsComponent_div_2_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelementStart(1, \"a\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r5.menuConfig == null ? null : ctx_r5.menuConfig.health == null ? null : ctx_r5.menuConfig.health.urls == null ? null : ctx_r5.menuConfig.health.urls[0])(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r5.activeMenus[\"health\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r5.language[\"Health\"]);\n  }\n}\nfunction OperationsComponent_div_2_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelementStart(1, \"a\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r6.menuConfig == null ? null : ctx_r6.menuConfig.configuration == null ? null : ctx_r6.menuConfig.configuration.urls == null ? null : ctx_r6.menuConfig.configuration.urls[0])(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r6.activeMenus[\"configuration\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.language[\"Configuration\"]);\n  }\n}\nfunction OperationsComponent_div_2_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelementStart(1, \"a\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r7.menuConfig == null ? null : ctx_r7.menuConfig.report == null ? null : ctx_r7.menuConfig.report.urls == null ? null : ctx_r7.menuConfig.report.urls[0])(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r7.activeMenus[\"cco-reports\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r7.language.Reports);\n  }\n}\nfunction OperationsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"ul\", 7);\n    i0.ɵɵtemplate(2, OperationsComponent_div_2_li_2_Template, 3, 5, \"li\", 8);\n    i0.ɵɵtemplate(3, OperationsComponent_div_2_li_3_Template, 3, 5, \"li\", 8);\n    i0.ɵɵtemplate(4, OperationsComponent_div_2_li_4_Template, 3, 5, \"li\", 8);\n    i0.ɵɵtemplate(5, OperationsComponent_div_2_li_5_Template, 3, 5, \"li\", 8);\n    i0.ɵɵtemplate(6, OperationsComponent_div_2_li_6_Template, 3, 5, \"li\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.menus[\"system-onboarding\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.menus[\"alarms\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.menus[\"health\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.menus[\"configuration\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.menus[\"cco-reports\"]);\n  }\n}\nexport let OperationsComponent = /*#__PURE__*/(() => {\n  class OperationsComponent {\n    constructor(translateService, sso, router) {\n      this.translateService = translateService;\n      this.sso = sso;\n      this.router = router;\n      this.menus = {\n        'system-onboarding': false,\n        'alarms': false,\n        'health': false,\n        'configuration': false,\n        'cco-reports': false\n      };\n      this.menuConfig = {\n        'systemonboarding': {\n          urls: [],\n          scopes: ['axoscallhome.systems', 'axoscallhome.callhome', 'cmsexacallhome', 'regionsettings']\n        },\n        'alarms': {\n          urls: [],\n          scopes: ['transformalarmrules', 'alarmsandhealthnotifications', 'alarmsettings']\n        },\n        'health': {\n          urls: [],\n          scopes: ['monitoringthresholds']\n        },\n        'configuration': {\n          urls: [],\n          scopes: ['workflows', 'systemgroups', 'softwareimages', 'performancetesting', 'configurationfiles', 'axosmigration']\n        },\n        'report': {\n          urls: [],\n          scopes: ['mappedeplists', 'epcountbymapper', 'ontdevices', 'unmappedips', 'invreports', 'calloutcomereports', 'auditreports', 'auditreports', 'unassociatedsystems']\n        }\n      };\n      this.operationsUrl = '/cco/operations';\n      this.hasPageAccess = true;\n      this.isSubscriberOperationsActive = false;\n      this.activeMenus = {\n        'system-onboarding': false,\n        'alarms': false,\n        'health': false,\n        'configuration': false,\n        'cco-reports': false\n      };\n    }\n    ngOnInit() {\n      var _a, _b;\n      this.setActiveMenu();\n      if (this.router.url.indexOf('/cco/operations/cco-subscriber-operations/') !== -1) {\n        this.isSubscriberOperationsActive = true;\n      }\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n      });\n      this.pageAcceesObs = this.sso.hasPageAccess$.subscribe(json => {\n        if (json.access) {\n          this.hasPageAccess = true;\n        } else {\n          this.hasPageAccess = false;\n        }\n      });\n      let scopes = this.sso.getScopes();\n      let urlsInfo = this.sso.getCCOUrlInfo();\n      let enttlmnts = this.sso.getEntitlements();\n      if (enttlmnts[210] && !enttlmnts[102]) {\n        this.operationsUrl = '/cco/operations';\n      } else {\n        this.setOperationsUrl();\n      }\n      if (environment.VALIDATE_SCOPE) {\n        let validScopes = Object.keys(scopes);\n        if (validScopes) {\n          for (let i = 0; i < validScopes.length; i++) {\n            if (validScopes[i].indexOf('cloud.rbac.coc.operations.systemonboarding') !== -1) {\n              this.menus['system-onboarding'] = true;\n              continue;\n            }\n            if (validScopes[i].indexOf('cloud.rbac.coc.operations.alarms') !== -1) {\n              this.menus.alarms = true;\n              continue;\n            }\n            if (validScopes[i].indexOf('cloud.rbac.coc.operations.health') !== -1) {\n              this.menus.health = true;\n              continue;\n            }\n            if (validScopes[i].indexOf('cloud.rbac.coc.operations.configuration') !== -1) {\n              this.menus.configuration = true;\n              continue;\n            }\n            if (validScopes[i].indexOf('cloud.rbac.coc.operations.report') !== -1) {\n              this.menus['cco-reports'] = true;\n              continue;\n            }\n          }\n        }\n      } else {\n        this.menus = {\n          'system-onboarding': true,\n          'alarms': true,\n          'health': true,\n          'configuration': true,\n          'cco-reports': true\n        };\n      }\n      for (let menu in this.menuConfig) {\n        (_b = (_a = this.menuConfig[menu]) === null || _a === void 0 ? void 0 : _a.scopes) === null || _b === void 0 ? void 0 : _b.forEach(element => {\n          var _a, _b, _c, _d;\n          if (scopes[`cloud.rbac.coc.operations.${menu}.${element}`]) {\n            (_b = (_a = this.menuConfig[menu]) === null || _a === void 0 ? void 0 : _a.urls) === null || _b === void 0 ? void 0 : _b.push((_d = (_c = urlsInfo['operations']) === null || _c === void 0 ? void 0 : _c[`cloud.rbac.coc.operations.${menu}.${element}`]) === null || _d === void 0 ? void 0 : _d.path);\n          }\n        });\n      }\n      //console.log(this.menuConfig);\n    }\n\n    ngOnDestroy() {\n      if (this.pageAcceesObs) {\n        this.pageAcceesObs.unsubscribe();\n      }\n      if (this.languageSubject) {\n        this.languageSubject.unsubscribe();\n      }\n    }\n    setOperationsUrl() {\n      let scopes = this.sso.getScopes();\n      let urlsInfo = {\n        subcriber_operations: {\n          scope: 'cloud.rbac.coc.operations.subscriber.operations',\n          path: '/cco/operations/cco-subscriber-operations/operations/devices-groups'\n        },\n        subcriber_configurations: {\n          scope: 'cloud.rbac.coc.operations.subscriber.configurations',\n          path: '/cco/operations/cco-subscriber-operations/configurations/dial-plan'\n        }\n      };\n      let keys = Object.keys(urlsInfo);\n      for (let i = 0; i < keys.length; i++) {\n        if (scopes[urlsInfo[keys[i]].scope]) {\n          this.operationsUrl = urlsInfo[keys[i]].path;\n          break;\n        }\n      }\n    }\n    setActiveMenu() {\n      for (let menu in this.activeMenus) {\n        this.activeMenus[menu] = this.sso.isMenuActive(menu);\n      }\n    }\n  }\n  OperationsComponent.ɵfac = function OperationsComponent_Factory(t) {\n    return new (t || OperationsComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.SsoAuthService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  OperationsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OperationsComponent,\n    selectors: [[\"app-operations\"]],\n    decls: 5,\n    vars: 4,\n    consts: [[\"role\", \"alert\", \"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"class\", \"cco-title\", 4, \"ngIf\"], [\"class\", \"ccl-tabs my-3\", 4, \"ngIf\"], [1, \"col-sm-12\", \"col-md-12\", \"col-lg-12\", \"p-0\", 3, \"hidden\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\"], [1, \"cco-title\"], [1, \"ccl-tabs\", \"my-3\"], [\"id\", \"tabs\", 1, \"nav\", \"nav-tabs\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [1, \"nav-item\"], [\"data-toggle\", \"tab\", 1, \"nav-link\", \"small\", 3, \"routerLink\", \"ngClass\"], [\"id\", \"workFlows\", \"data-toggle\", \"tab\", 1, \"nav-link\", 3, \"routerLink\", \"ngClass\"]],\n    template: function OperationsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, OperationsComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, OperationsComponent_span_1_Template, 2, 1, \"span\", 1);\n        i0.ɵɵtemplate(2, OperationsComponent_div_2_Template, 7, 5, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelement(4, \"router-outlet\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.hasPageAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasPageAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasPageAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", !ctx.hasPageAccess);\n      }\n    },\n    directives: [i4.NgIf, i3.RouterOutlet, i3.RouterLinkWithHref, i4.NgClass],\n    styles: [\"\"]\n  });\n  return OperationsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}