{"ast":null,"code":"import { has } from 'min-dash';\nimport { getOutputParameters } from './InputOutputHelper';\nimport { getExtensionElements } from 'bpmn-js-properties-panel/lib/helper/ExtensionElementsHelper';\nimport { getBusinessObject } from 'bpmn-js/lib/util/ModelUtil';\nimport { is } from 'bpmn-js/lib/util/ModelUtil';\n\n/**\n  * Determine default value for propagateAllChildVariables attribute\n  * @param {Object} element representing a bpmn:CallActivity\n  *\n  * @returns {boolean}\n  */\nfunction determinePropAllChildVariablesDefault(element) {\n  const outputParameters = getOutputParameters(element);\n  if (outputParameters) {\n    return outputParameters.length > 0 ? false : true;\n  }\n}\n\n/**\n  * Get the 'zeebe:CalledElement' extension element for a given business Object\n  * @param {Object} bo businessObject\n  *\n  * @returns {Object} the calledElement Moddle Object or undefined if zeebe:CalledElement does not exist\n  */\nexport function getCalledElement(element) {\n  const calledElements = getCalledElements(element);\n  return calledElements && calledElements[0];\n}\nexport function getCalledElements(element) {\n  const bo = getBusinessObject(element);\n  const extElement = getExtensionElements(bo, 'zeebe:CalledElement');\n  return extElement;\n}\n\n/**\n  * Check whether the propagateAllChildVariables attribute is set on an element.\n  * Note that a default logic will be determine if it is not explicitly set.\n  * @param {Object} element\n  *\n  * @returns {boolean}\n  */\nexport function isPropagateAllChildVariables(element) {\n  if (!is(element, 'bpmn:CallActivity')) {\n    return undefined;\n  }\n  const bo = getBusinessObject(element),\n    calledElement = getCalledElement(bo);\n  return calledElement && has(calledElement, 'propagateAllChildVariables') ? calledElement.get('propagateAllChildVariables') : determinePropAllChildVariablesDefault(element);\n}","map":null,"metadata":{},"sourceType":"module"}