{"ast":null,"code":"import { Subject, timer } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/shared/services/sso-auth.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"src/app/sys-admin/services/common.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../issues/service/issue.service\";\nimport * as i8 from \"@angular/common\";\nfunction AlertsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.language[\"Access denied due to RBAC. Please consult your Organization Administrator for access.\"], \" \");\n  }\n}\nfunction AlertsComponent_section_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 11);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"div\", 13);\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵelementStart(4, \"span\", 15);\n    i0.ɵɵtext(5, \"Alerts\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\nfunction AlertsComponent_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵelementStart(1, \"a\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const menu_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", menu_r5 == null ? null : menu_r5.value == null ? null : menu_r5.value.urls[0])(\"ngClass\", i0.ɵɵpureFunction1(3, _c0, ctx_r2.activeMenus[menu_r5 == null ? null : menu_r5.value == null ? null : menu_r5.value.route]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", menu_r5 == null ? null : menu_r5.value == null ? null : menu_r5.value.title, \" \");\n  }\n}\nfunction AlertsComponent_section_10_div_3_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵelementStart(1, \"a\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/cco/alerts/\", ctx_r8.type.toLowerCase(), \"/realtime\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r8.language[\"Real Time\"]);\n  }\n}\nfunction AlertsComponent_section_10_div_3_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵelementStart(1, \"a\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/cco/alerts/\", ctx_r9.type.toLowerCase(), \"/active-reports\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r9.language[\"Active Reports\"]);\n  }\n}\nfunction AlertsComponent_section_10_div_3_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵelementStart(1, \"a\", 28);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/cco/alerts/\", ctx_r10.type.toLowerCase(), \"/history-reports\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r10.language[\"Historical Reports\"]);\n  }\n}\nfunction AlertsComponent_section_10_div_3_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵelementStart(1, \"a\", 29);\n    i0.ɵɵtext(2, \"System Events\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/cco/alerts/\", ctx_r11.type.toLowerCase(), \"/view\");\n  }\n}\nfunction AlertsComponent_section_10_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelementStart(1, \"ul\", 24);\n    i0.ɵɵtemplate(2, AlertsComponent_section_10_div_3_li_2_Template, 3, 2, \"li\", 25);\n    i0.ɵɵtemplate(3, AlertsComponent_section_10_div_3_li_3_Template, 3, 2, \"li\", 25);\n    i0.ɵɵtemplate(4, AlertsComponent_section_10_div_3_li_4_Template, 3, 2, \"li\", 25);\n    i0.ɵɵtemplate(5, AlertsComponent_section_10_div_3_li_5_Template, 3, 1, \"li\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r6.isToggleSidebar ? \"d-none\" : \"d-block\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.menus[\"realtime\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.menus[\"active\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.menus[\"history\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.menus[\"events\"]);\n  }\n}\nfunction AlertsComponent_section_10_section_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵelementStart(2, \"span\", 34);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 35);\n    i0.ɵɵelementStart(5, \"span\", 36);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 37);\n    i0.ɵɵelementStart(8, \"span\", 34);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 35);\n    i0.ɵɵelementStart(11, \"span\", 36);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 38);\n    i0.ɵɵelementStart(14, \"span\", 34);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 35);\n    i0.ɵɵelementStart(17, \"span\", 36);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 39);\n    i0.ɵɵelementStart(20, \"span\", 34);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 35);\n    i0.ɵɵelementStart(23, \"span\", 36);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 40);\n    i0.ɵɵelementStart(26, \"span\", 34);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 35);\n    i0.ɵɵelementStart(29, \"span\", 36);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 41);\n    i0.ɵɵelementStart(32, \"span\", 34);\n    i0.ɵɵtext(33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 35);\n    i0.ɵɵelementStart(35, \"span\", 36);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.language[\"total_alarms\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r12.totalAlarms ? ctx_r12.totalAlarms : 0, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.language[\"Critical Alarms\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r12.criticalAlarms ? ctx_r12.criticalAlarms : 0, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.language[\"Major Alarms\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.majorAlarms ? ctx_r12.majorAlarms : 0, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.language[\"Minor Alarms\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r12.minorAlarms ? ctx_r12.minorAlarms : 0, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.language[\"Warning Alarms\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r12.countData && ctx_r12.countData[\"warning\"] ? ctx_r12.countData[\"warning\"] : 0, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.language[\"Info Alarms\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.countData && ctx_r12.countData[\"info\"] ? ctx_r12.countData[\"info\"] : 0);\n  }\n}\nfunction AlertsComponent_section_10_section_7_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\", 42);\n    i0.ɵɵelementStart(2, \"span\", 34);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 35);\n    i0.ɵɵelementStart(5, \"span\", 36);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r13.language[\"total_events\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r13.totalEvents ? ctx_r13.totalEvents : 0);\n  }\n}\nfunction AlertsComponent_section_10_section_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\");\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"div\", 30);\n    i0.ɵɵtemplate(3, AlertsComponent_section_10_section_7_div_3_Template, 37, 12, \"div\", 31);\n    i0.ɵɵtemplate(4, AlertsComponent_section_10_section_7_div_4_Template, 7, 2, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.isEventsPage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.isEventsPage);\n  }\n}\nfunction AlertsComponent_section_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 2);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵtemplate(3, AlertsComponent_section_10_div_3_Template, 6, 5, \"div\", 18);\n    i0.ɵɵelementStart(4, \"div\", 19);\n    i0.ɵɵelementStart(5, \"a\", 20);\n    i0.ɵɵlistener(\"click\", function AlertsComponent_section_10_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.toggleSideBar();\n    });\n    i0.ɵɵelement(6, \"i\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AlertsComponent_section_10_section_7_Template, 5, 2, \"section\", 22);\n    i0.ɵɵelement(8, \"router-outlet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", !ctx_r3.hasPageAccess);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.hasPageAccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r3.isToggleSidebar ? \"col-12 col-md-12 px-0\" : \"\")(\"hidden\", !ctx_r3.hasPageAccess);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r3.isToggleSidebar ? \"fa-chevron-right\" : \"fa-chevron-left\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.hasPageAccess);\n  }\n}\nfunction AlertsComponent_section_11_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\", 42);\n    i0.ɵɵelementStart(2, \"span\", 34);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 35);\n    i0.ɵɵelementStart(5, \"span\", 36);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r16.language[\"total_events\"]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r16.totalEvents ? ctx_r16.totalEvents : 0);\n  }\n}\nfunction AlertsComponent_section_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"section\", 2);\n    i0.ɵɵelementStart(1, \"div\", 43);\n    i0.ɵɵelementStart(2, \"div\", 13);\n    i0.ɵɵelementStart(3, \"div\", 30);\n    i0.ɵɵtemplate(4, AlertsComponent_section_11_div_4_Template, 7, 2, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"router-outlet\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", !ctx_r4.hasPageAccess);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isEventsPage);\n  }\n}\nexport let AlertsComponent = /*#__PURE__*/(() => {\n  class AlertsComponent {\n    constructor(translateService, router, sso, http, commonOrgService, fb, issueService, route) {\n      this.translateService = translateService;\n      this.router = router;\n      this.sso = sso;\n      this.http = http;\n      this.commonOrgService = commonOrgService;\n      this.fb = fb;\n      this.issueService = issueService;\n      this.route = route;\n      this.fullContainerView = false;\n      this.baseUrl = `${environment.API_BASE_URL}analytics-engine/`;\n      this.last24hours = false;\n      this.reportRanges = [{\n        label: '1',\n        value: '1'\n      }, {\n        label: '2',\n        value: '2k'\n      }, {\n        label: '3',\n        value: '3'\n      }, {\n        label: '4',\n        value: '4'\n      }];\n      this.isToggleSidebar = false;\n      this.menus = {\n        realtime: false,\n        active: false,\n        history: false,\n        cloud: false,\n        connect: false,\n        issues: false,\n        'service-disruptions': false\n      };\n      this.hasPageAccess = true;\n      this.toggled = new Subject();\n      this.type = 'system';\n      this.topMenus = {\n        SYSTEM: false,\n        TRANSFORMED: false,\n        HEALTH: false,\n        CONNECTIVITY: false,\n        EVENTS: false,\n        DISRUPTION: false\n      };\n      this.menuConfig = {\n        'systemalarms': {\n          urls: [],\n          scopes: ['realtime', 'activereports', 'historicalreports'],\n          title: 'System Alarms',\n          route: 'system'\n        },\n        'transformalarms': {\n          urls: [],\n          scopes: ['realtime', 'activereports', 'historicalreports'],\n          title: 'Transform Alarms',\n          route: 'transformed'\n        },\n        'healthalerts': {\n          urls: [],\n          scopes: ['realtime', 'activereports', 'historicalreports'],\n          title: 'Health Alerts',\n          route: 'health'\n        },\n        'cloudconnectivity': {\n          urls: [],\n          scopes: ['realtime', 'activereports', 'historicalreports'],\n          title: 'Cloud Connectivity',\n          route: 'connectivity'\n        },\n        'servicedisruptions': {\n          urls: [],\n          scopes: [],\n          title: 'Service Disruptions',\n          route: 'disruption'\n        },\n        'events': {\n          urls: [],\n          scopes: [],\n          title: 'Events',\n          route: 'events'\n        }\n      };\n      this.activeMenus = {\n        system: false,\n        transformed: false,\n        health: false,\n        connectivity: false,\n        disruption: false,\n        events: false\n      };\n      this.filtersForm = this.fb.group({\n        startDate: [''],\n        endDate: [''],\n        alarmType: [''],\n        region: [''],\n        location: [''],\n        system: [''],\n        fsan: [''],\n        severity: [''],\n        category: [''],\n        eventName: [''],\n        customCategory: [''],\n        cco_ack: 'all'\n      });\n      this.loading = true;\n      this.url = this.router.url;\n      this.isEventsPage = false;\n      this.totalAlarms_cleared = 0;\n      this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n    }\n    ngOnInit() {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n      this.setTopMenus();\n      if (this.router.url.includes('/events/')) {\n        this.isEventsPage = true;\n      }\n      this.type = (_b = (_a = this.route.snapshot.params) === null || _a === void 0 ? void 0 : _a.type) === null || _b === void 0 ? void 0 : _b.toUpperCase();\n      this.issueService.setAlertType(this.type);\n      console.log(this.type);\n      let scopes = this.sso.getScopes();\n      let urlsInfo = this.sso.getCCOUrlInfo();\n      if (environment.VALIDATE_SCOPE) {\n        const alertScopes = this.issueService.getAlertScopes();\n        ['realtime', 'active', 'history'].forEach(element => {\n          var _a;\n          if (scopes === null || scopes === void 0 ? void 0 : scopes[(_a = alertScopes === null || alertScopes === void 0 ? void 0 : alertScopes[this.issueService.getAlertType()]) === null || _a === void 0 ? void 0 : _a[element]]) {\n            this.menus[element] = true;\n          }\n        });\n      } else {\n        this.menus = {\n          realtime: true,\n          active: true,\n          history: true,\n          cloud: true,\n          connect: true,\n          issues: true,\n          'service-disruptions': true\n        };\n      }\n      for (let menu in this.menuConfig) {\n        if ((_c = urlsInfo['issues']) === null || _c === void 0 ? void 0 : _c[`cloud.rbac.coc.issues.${menu}`]) {\n          (_e = (_d = this.menuConfig[menu]) === null || _d === void 0 ? void 0 : _d.urls) === null || _e === void 0 ? void 0 : _e.push((_g = (_f = urlsInfo['issues']) === null || _f === void 0 ? void 0 : _f[`cloud.rbac.coc.issues.${menu}`]) === null || _g === void 0 ? void 0 : _g.path);\n          continue;\n        }\n        (_j = (_h = this.menuConfig[menu]) === null || _h === void 0 ? void 0 : _h.scopes) === null || _j === void 0 ? void 0 : _j.forEach(element => {\n          var _a, _b, _c, _d;\n          if (scopes[`cloud.rbac.coc.issues.${menu}.${element}`]) {\n            (_b = (_a = this.menuConfig[menu]) === null || _a === void 0 ? void 0 : _a.urls) === null || _b === void 0 ? void 0 : _b.push((_d = (_c = urlsInfo['issues']) === null || _c === void 0 ? void 0 : _c[`cloud.rbac.coc.issues.${menu}.${element}`]) === null || _d === void 0 ? void 0 : _d.path);\n          }\n        });\n      }\n      console.log(this.menuConfig);\n      this.setActiveMenu();\n      if (this.type.toLowerCase() === 'events') {\n        this.menus['events'] = true;\n        this.menus['realtime'] = false;\n        this.menus['active'] = false;\n        this.menus['history'] = false;\n        this.menus['service-disruptions'] = false;\n        this.fullContainerView = true;\n      } else if (this.type.toLowerCase() === 'disruption') {\n        this.menus['events'] = false;\n        this.menus['realtime'] = false;\n        this.menus['active'] = false;\n        this.menus['history'] = false;\n        this.menus['service-disruptions'] = true;\n        this.fullContainerView = true;\n      }\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n      });\n      this.pageAcceesObs = this.sso.hasPageAccess$.subscribe(json => {\n        if (json.access) {\n          this.hasPageAccess = true;\n        } else {\n          this.hasPageAccess = false;\n        }\n      });\n      if (this.url.includes(\"/realtime/current-issues\")) {\n        this.timerSubscription = timer(0, 15000).pipe(map(() => {\n          this.alarmsCount();\n        })).subscribe();\n      } else {\n        this.countSubscription = this.issueService.filterCount$.subscribe(dateParams => {\n          this.dateParam = dateParams;\n          this.alarmsCount();\n        });\n      }\n    }\n    ngOnDestroy() {\n      if (this.pageAcceesObs) {\n        this.pageAcceesObs.unsubscribe();\n      }\n      this.languageSubject.unsubscribe();\n      if (this.timerSubscription) {\n        this.timerSubscription.unsubscribe();\n      }\n      if (this.countSubscription) {\n        this.countSubscription.unsubscribe();\n      }\n    }\n    toggleSideBar() {\n      this.isToggleSidebar = !this.isToggleSidebar;\n      this.sso.triggerToggle();\n    }\n    alarmsCount() {\n      let url = `${this.baseUrl}alarmCount?`; //reportType=ACTIVE${this.dateParam}\n      if (this.url.includes(\"/realtime/current-issues\")) {\n        url += `reportType=REALTIME`;\n      } else if (this.url.includes('/active-reports')) {\n        url += `reportType=ACTIVE${this.dateParam}`;\n      } else {\n        url += `reportType=HISTORY${this.dateParam}`;\n      }\n      let alarmTypes = this.issueService.getAlarmAlertTypes();\n      if ((alarmTypes === null || alarmTypes === void 0 ? void 0 : alarmTypes.indexOf(this.type)) !== -1) {\n        url += `&alertType=${this.type}`;\n      }\n      if (this.issueService.getAlertType() === 'EVENTS') {\n        url += `&notificationType=Event`;\n      }\n      this.countSubscribe = this.http.get(`${url}`).subscribe(res => {\n        this.setAlertsCount(res);\n        this.countData = res && res['alarm'] && res['alarm'].raised ? res['alarm'].raised : {};\n        this.criticalAlarms = this.countData.critical ? this.countData.critical.toLocaleString() : '0';\n        this.majorAlarms = this.countData.major ? this.countData.major.toLocaleString() : '0';\n        this.minorAlarms = this.countData.minor ? this.countData.minor.toLocaleString() : '0';\n        this.totalAlarms = this.countData.critical + this.countData.major + this.countData.minor + this.countData.warning + this.countData.info;\n        this.totalAlarms = this.totalAlarms ? this.totalAlarms.toLocaleString() : '0';\n        if (this.countData && this.countData['info']) {\n          this.countData['info'] = this.countData['info'].toLocaleString();\n        }\n        if (this.countData && this.countData['warning']) {\n          this.countData['warning'] = this.countData['warning'].toLocaleString();\n        }\n        this.totalEvents = res && res['event'] && res['event'].count ? res['event'].count.toLocaleString() : '0';\n        this.loading = false;\n      }, err => {\n        this.setAlertsCount({});\n        this.pageErrorHandle(err);\n        this.criticalAlarms = '0';\n        this.majorAlarms = '0';\n        this.minorAlarms = '0';\n        this.totalAlarms = '0';\n        this.loading = false;\n      });\n    }\n    pageErrorHandle(err) {\n      if (err.status == 401) {\n        this.errorInfo = this.language['Access Denied'];\n      } else {\n        this.errorInfo = this.commonOrgService.pageErrorHandle(err);\n      }\n      this.error = true;\n      this.loading = false;\n    }\n    findTopMenus() {\n      ['cloud.rbac.coc.issues.systemalarms', 'cloud.rbac.coc.issues.transformalarms', 'cloud.rbac.coc.issues.healthalerts', 'cloud.rbac.coc.issues.cloudconnectivity', 'cloud.rbac.coc.issues.events', 'cloud.rbac.coc.issues.servicedisruptions'];\n    }\n    originalOrder(a, b) {\n      return 0;\n    }\n    isMenuActive(menuName) {\n      if (window.location.pathname.indexOf(`/${menuName}/`) !== -1) {\n        return true;\n      }\n      return false;\n    }\n    setActiveMenu() {\n      for (let menu in this.activeMenus) {\n        this.activeMenus[menu] = this.isMenuActive(menu);\n      }\n    }\n    setTopMenus() {\n      var _a;\n      const scopes = this.sso.getScopes();\n      for (let menu in this.menuConfig) {\n        let hasScope = false;\n        if (scopes[`cloud.rbac.coc.issues.${menu}`]) {\n          hasScope = true;\n          continue;\n        }\n        for (let scope of (_a = this.menuConfig[menu]) === null || _a === void 0 ? void 0 : _a.scopes) {\n          if (scopes[`cloud.rbac.coc.issues.${menu}.${scope}`]) {\n            hasScope = true;\n            break;\n          }\n        }\n        if (!hasScope) {\n          delete this.menuConfig[menu];\n        }\n      }\n    }\n    setAlertsCount(res = {}) {\n      if (this.url.includes('/history-reports') || this.url.includes('/cco/alerts/events/view')) {\n        this.issueService.setAlertsCount(res);\n      }\n    }\n  }\n  AlertsComponent.ɵfac = function AlertsComponent_Factory(t) {\n    return new (t || AlertsComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.SsoAuthService), i0.ɵɵdirectiveInject(i4.HttpClient), i0.ɵɵdirectiveInject(i5.CommonService), i0.ɵɵdirectiveInject(i6.FormBuilder), i0.ɵɵdirectiveInject(i7.IssueService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n  AlertsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AlertsComponent,\n    selectors: [[\"app-alerts\"]],\n    decls: 12,\n    vars: 9,\n    consts: [[\"role\", \"alert\", \"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"class\", \"mb-4\", 4, \"ngIf\"], [3, \"hidden\"], [1, \"container\", \"mp-0\"], [1, \"row\", \"mm-0\"], [1, \"m-center\", \"col-sm-12\", \"col-md-12\", \"px-0\", \"mb-4\"], [1, \"ccl-tabs\"], [\"id\", \"tabs\", 1, \"nav\", \"nav-tabs\"], [\"class\", \"nav-item\", 4, \"ngFor\", \"ngForOf\"], [3, \"hidden\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\"], [1, \"mb-4\"], [1, \"container\"], [1, \"row\"], [1, \"col-12\", \"col-md-2\", \"px-0\", \"mobile-center\"], [1, \"cco-title\"], [1, \"nav-item\"], [\"data-toggle\", \"tab\", \"routerLinkActive\", \"active\", \"aria-controls\", \"alarms\", \"aria-selected\", \"true\", 1, \"nav-link\", 3, \"routerLink\", \"ngClass\"], [\"class\", \"col-12 col-md-2 pl-0 mpr-0\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"col-12\", \"col-md-10\", \"padl\", \"mp-0\", \"mmt-3\", \"pr-0\", \"position-relative\", 3, \"ngClass\", \"hidden\"], [1, \"sidebar-collapse\", 3, \"click\"], [1, \"fas\", 3, \"ngClass\"], [4, \"ngIf\"], [1, \"col-12\", \"col-md-2\", \"pl-0\", \"mpr-0\", 3, \"ngClass\"], [\"id\", \"netops-list-menu\", 1, \"nav\", \"flex-column\", \"left-menu\", \"tab-view-style\", \"mbr-none\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [\"id\", \"pendo-cco-real-time-menu-title\", \"routerLinkActive\", \"active\", 1, \"list-group-item\", \"list-group-item-action\", 3, \"routerLink\"], [\"id\", \"\", \"id\", \"pendo-cco-active-reports-menu-title\", \"routerLinkActive\", \"active\", 1, \"list-group-item\", \"list-group-item-action\", 3, \"routerLink\"], [\"id\", \"\", \"id\", \"pendo-cco-historical-reports-menu-title\", \"routerLinkActive\", \"active\", 1, \"list-group-item\", \"list-group-item-action\", 3, \"routerLink\"], [\"routerLinkActive\", \"active\", 1, \"list-group-item\", \"list-group-item-action\", 3, \"routerLink\"], [1, \"col-md-12\"], [\"class\", \"test-container\", 4, \"ngIf\"], [1, \"test-container\"], [\"id\", \"current-issues-Total-alarms\", 1, \"item\"], [1, \"stats-label\"], [1, \"d-flex\", \"align-content-around\", \"flex-wrap\"], [1, \"stats-value\"], [\"id\", \"current-issues-critical-alarms\", 1, \"item\"], [\"id\", \"current-issues-major-alarms\", 1, \"item\"], [\"id\", \"current-issues-minor-alarms\", 1, \"item\"], [\"id\", \"current-issues-warning-alarms\", 1, \"item\"], [\"id\", \"current-issues-info-alarms\", 1, \"item\"], [\"id\", \"historical-reports-Total-Events\", 1, \"item\"], [1, \"container\", \"mp-0\", \"p-0\"]],\n    template: function AlertsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, AlertsComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, AlertsComponent_section_1_Template, 6, 0, \"section\", 1);\n        i0.ɵɵelementStart(2, \"section\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"ul\", 7);\n        i0.ɵɵtemplate(8, AlertsComponent_li_8_Template, 3, 5, \"li\", 8);\n        i0.ɵɵpipe(9, \"keyvalue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, AlertsComponent_section_10_Template, 9, 6, \"section\", 9);\n        i0.ɵɵtemplate(11, AlertsComponent_section_11_Template, 6, 2, \"section\", 9);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.hasPageAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasPageAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", !ctx.hasPageAccess);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(9, 6, ctx.menuConfig, ctx.originalOrder));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.fullContainerView);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.fullContainerView);\n      }\n    },\n    directives: [i8.NgIf, i8.NgForOf, i2.RouterLinkWithHref, i2.RouterLinkActive, i8.NgClass, i2.RouterOutlet],\n    pipes: [i8.KeyValuePipe],\n    styles: [\".red[_ngcontent-%COMP%]{color:#c70000}.issue-left-menu[_ngcontent-%COMP%]{width:100%}.issue-right-content[_ngcontent-%COMP%]{width:100%;border-left:1px solid #dedede;padding:10px}.current-issue-menu-container[_ngcontent-%COMP%]{display:flex;margin:20px 0;justify-self:start}.current-issue-menu-item[_ngcontent-%COMP%]{flex-grow:0}.current-issue-menu-item[_ngcontent-%COMP%] + .current-issue-menu-item[_ngcontent-%COMP%]{margin-left:1%}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f7f8fa!important;border-color:#888!important}.current-issues-table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{font-size:14px}@media screen and (max-width: 767px){.cco-title[_ngcontent-%COMP%]{font-size:42px;line-height:60px;font-weight:300;margin:0}.mobile-center[_ngcontent-%COMP%]{text-align:center}.mp-0[_ngcontent-%COMP%]{padding:0!important}.mm-0[_ngcontent-%COMP%]{margin:0!important}.mpr-0[_ngcontent-%COMP%]{padding-right:0!important}.mbr-none[_ngcontent-%COMP%]{border-right:none!important}.mmt-3[_ngcontent-%COMP%]{margin-top:15px!important}#netops-list-menu[_ngcontent-%COMP%]   li.nav-item[_ngcontent-%COMP%]{margin-right:0!important}#netops-list-menu[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{text-align:center}}.padl[_ngcontent-%COMP%]{padding-left:32px}.sidebar-collapse[_ngcontent-%COMP%]{position:absolute;top:170px;background:#fff;width:25px;height:25px;border:1px solid #d3d3d3;border-radius:50%;text-align:center;left:-12px;cursor:pointer}.test-container[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:24px}.item[_ngcontent-%COMP%]{flex-grow:1;border-left:1px solid #EBEAEF;padding-left:12px;width:calc(100% / 4)}.item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-left:2%}\"]\n  });\n  return AlertsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}