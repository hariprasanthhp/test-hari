{"ast":null,"code":"import * as _ from 'lodash';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"src/app/shared/services/sso-auth.service\";\nimport * as i3 from \"../../services/category-config.service\";\nimport * as i4 from \"../../services/profile.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/platform-browser\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"./profile-start-wizard/profile-start-wizard.component\";\nimport * as i9 from \"./profile-build-wizard/profile-build-wizard.component\";\nimport * as i10 from \"./profile-review-wizard/profile-review-wizard.component\";\nfunction ProfileWizardComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.language[\"Access denied due to RBAC. Please consult your Organization Administrator for access.\"], \" \");\n  }\n}\nfunction ProfileWizardComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"div\", 7);\n    i0.ɵɵelementStart(3, \"span\", 8);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.language.Loading);\n  }\n}\nfunction ProfileWizardComponent_div_2_div_5_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_button_19_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return ctx_r11.onTabChange(ctx_r11.selectedTabIndex + 1);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"img\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.language.Next, \" \");\n  }\n}\nfunction ProfileWizardComponent_div_2_div_5_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(3);\n      return ctx_r13.onSave();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.language.Finish, \" \");\n  }\n}\nfunction ProfileWizardComponent_div_2_div_5_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelementStart(1, \"span\", 31);\n    i0.ɵɵelement(2, \"img\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_div_21_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(3);\n      return ctx_r15.onCloseError();\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 33);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r7.language[ctx_r7.errorMsg] || ctx_r7.errorMsg, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction ProfileWizardComponent_div_2_div_5_app_profile_start_wizard_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-profile-start-wizard\", 34);\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"addProfileObj\", ctx_r8.addProfileObj);\n  }\n}\nfunction ProfileWizardComponent_div_2_div_5_app_profile_build_wizard_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-profile-build-wizard\", 35);\n    i0.ɵɵlistener(\"CerrorMsg\", function ProfileWizardComponent_div_2_div_5_app_profile_build_wizard_23_Template_app_profile_build_wizard_CerrorMsg_0_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(3);\n      return ctx_r17.errorMsg = $event;\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"buildProfileObj\", ctx_r9.addProfileObj.buildProfile);\n  }\n}\nfunction ProfileWizardComponent_div_2_div_5_app_profile_review_wizard_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-profile-review-wizard\", 36);\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"isOverViewPage\", false)(\"addProfileObj\", ctx_r10.addProfileObj);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"step-current\": a0,\n    \"step-done\": a1\n  };\n};\nconst _c1 = function (a0) {\n  return {\n    \"step-current\": a0\n  };\n};\nfunction ProfileWizardComponent_div_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"section\", 15);\n    i0.ɵɵelementStart(2, \"ul\", 16);\n    i0.ɵɵelementStart(3, \"li\");\n    i0.ɵɵelementStart(4, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return ctx_r19.onTabChange(0);\n    });\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"li\");\n    i0.ɵɵelementStart(8, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return ctx_r21.onTabChange(1);\n    });\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"li\");\n    i0.ɵɵelementStart(12, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return ctx_r22.onTabChange(2);\n    });\n    i0.ɵɵelementStart(13, \"span\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 19);\n    i0.ɵɵelementStart(16, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_div_5_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return ctx_r23.onTabChange(ctx_r23.selectedTabIndex - 1);\n    });\n    i0.ɵɵelement(17, \"img\", 21);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, ProfileWizardComponent_div_2_div_5_button_19_Template, 3, 1, \"button\", 22);\n    i0.ɵɵtemplate(20, ProfileWizardComponent_div_2_div_5_button_20_Template, 2, 1, \"button\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, ProfileWizardComponent_div_2_div_5_div_21_Template, 6, 1, \"div\", 24);\n    i0.ɵɵtemplate(22, ProfileWizardComponent_div_2_div_5_app_profile_start_wizard_22_Template, 1, 1, \"app-profile-start-wizard\", 25);\n    i0.ɵɵtemplate(23, ProfileWizardComponent_div_2_div_5_app_profile_build_wizard_23_Template, 1, 1, \"app-profile-build-wizard\", 26);\n    i0.ɵɵtemplate(24, ProfileWizardComponent_div_2_div_5_app_profile_review_wizard_24_Template, 1, 2, \"app-profile-review-wizard\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r4.language.Start);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(19, _c0, ctx_r4.activeTab === \"Start\", ctx_r4.addProfileObj.start.name && ctx_r4.activeTab !== \"Start\" && !ctx_r4.addProfileObj.buildProfile.isStepperClicked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.language.Start);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r4.language.Build_Profile);\n    i0.ɵɵproperty(\"disabled\", !ctx_r4.addProfileObj.start.name || ctx_r4.addProfileObj.buildProfile.categoryList.length === 0)(\"ngClass\", i0.ɵɵpureFunction2(22, _c0, ctx_r4.activeTab === \"Build Profile\", ctx_r4.addProfileObj.start.name && ctx_r4.addProfileObj.buildProfile.categoryList.length > 0 && ctx_r4.activeTab !== \"Build Profile\" && !ctx_r4.addProfileObj.buildProfile.isStepperClicked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.language.Build_Profile);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r4.language.Review);\n    i0.ɵɵproperty(\"disabled\", !ctx_r4.addProfileObj.start.name || ctx_r4.addProfileObj.buildProfile.categoryList.length === 0)(\"ngClass\", i0.ɵɵpureFunction1(25, _c1, ctx_r4.activeTab === \"Review\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.language.Review);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r4.selectedTabIndex === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.language.Previous, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.selectedTabIndex + 1 !== (ctx_r4.addProfileTab == null ? null : ctx_r4.addProfileTab.length));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.selectedTabIndex + 1 === (ctx_r4.addProfileTab == null ? null : ctx_r4.addProfileTab.length));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.errorMsg);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.activeTab === \"Start\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.activeTab === \"Build Profile\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.activeTab === \"Review\");\n  }\n}\nfunction ProfileWizardComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelementStart(1, \"div\", 10);\n    i0.ɵɵelementStart(2, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProfileWizardComponent_div_2_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.close();\n    });\n    i0.ɵɵelement(3, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12);\n    i0.ɵɵtemplate(5, ProfileWizardComponent_div_2_div_5_Template, 25, 27, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.showOverViewPage);\n  }\n}\nfunction ProfileWizardComponent_app_profile_review_wizard_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-profile-review-wizard\", 36);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"isOverViewPage\", true)(\"addProfileObj\", ctx_r3.addProfileObj);\n  }\n}\nexport let ProfileWizardComponent = /*#__PURE__*/(() => {\n  class ProfileWizardComponent {\n    constructor(translateService, ssoService, categoryConfigService, service, router, titleService) {\n      this.translateService = translateService;\n      this.ssoService = ssoService;\n      this.categoryConfigService = categoryConfigService;\n      this.service = service;\n      this.router = router;\n      this.titleService = titleService;\n      this.selectedTabIndex = 0;\n      this.isTabChange = true;\n      this.categoryListData = [];\n      this.loading = false;\n      this.showOverViewPage = false;\n      this.profileTableData = [];\n      this.addProfileTab = ['Start', 'Build Profile', 'Review'];\n      this.addProfileObj = {\n        addProfileTab: this.addProfileTab,\n        start: {\n          name: undefined,\n          description: undefined,\n          isNameEntered: true\n        },\n        buildProfile: {\n          innerProfileCategory: [],\n          exisitingCategory: [],\n          categoryList: []\n        }\n      };\n      this.innerProfileCategory = [];\n      this.errorMsg = undefined;\n      this.isNewRecord = true;\n      this.activeTab = 'Start';\n      this.NEW_CATEGORY_BUTTON_DISABLE = ['Bandwidth', 'DHCP Option82', 'Video - Multicast Range Filters', 'Video - Multicast VLAN Registration (MVR)'];\n      this.hasScopeAccess = false;\n      this.profileID = {};\n    }\n    setTitle(url) {\n      if (!this.router.url.includes('cco-foundation') && !this.router.url.includes('/cco/services/service-profiles/profiles')) {\n        this.titleService.setTitle(`${this.language['Profiles']} - ${this.language['Operations']} - ${this.language['NetOps']} - ${this.language['Support']} - ${this.language['Calix Cloud']}`);\n      } else if (this.router.url.includes('/cco/services/service-profiles/profiles')) {\n        this.titleService.setTitle(`${this.language['RG Profiles']} - ${this.language['Services Profiles']} - ${this.language['Services']} - ${this.language['Operations']} - ${this.language['Calix Cloud']}`);\n      } else {\n        this.titleService.setTitle(`${this.language['RG Profiles']} - ${this.language['Profiles']} - ${this.language['Workflow Prerequisites']} - ${this.language['configuration']} - ${this.language['Deployment']} - ${this.language['Calix Cloud']}`);\n      }\n    }\n    ngOnInit() {\n      var _a, _b;\n      this.orgId = this.ssoService.getOrgId();\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        this.setTitle(this.router.url);\n      });\n      this.setTitle(this.router.url);\n      let scopes = this.ssoService.getScopes();\n      if (!this.router.url.includes('cco-foundation') && !this.router.url.includes('cco/services/service-profiles/profiles')) {\n        if (environment.VALIDATE_SCOPE) {\n          scopes['cloud.rbac.csc.netops.operations.profiles'] = scopes['cloud.rbac.csc.netops.operations.profiles'] ? scopes['cloud.rbac.csc.netops.operations.profiles'] : [];\n          if (scopes['cloud.rbac.csc.netops.operations.profiles'].length) {\n            this.hasScopeAccess = true;\n          }\n        } else {\n          this.hasScopeAccess = true;\n        }\n      } else if (this.router.url.includes('cco/services/service-profiles/profiles')) {\n        if (environment.VALIDATE_SCOPE) {\n          if (scopes['cloud.rbac.coc.services.serviceprofiles.rgprofiles'].length) {\n            this.hasScopeAccess = true;\n          }\n        } else {\n          this.hasScopeAccess = true;\n        }\n      } else {\n        if (environment.VALIDATE_SCOPE) {\n          scopes['cloud.rbac.foundation.configurations'] = scopes['cloud.rbac.foundation.configurations'] ? scopes['cloud.rbac.foundation.configurations'] : [];\n          if (scopes['cloud.rbac.foundation.configurations'].length) {\n            this.hasScopeAccess = true;\n          }\n        } else {\n          this.hasScopeAccess = true;\n        }\n      }\n      if (!this.hasScopeAccess) {\n        this.ssoService.setPageAccess(false);\n        return;\n      }\n      this.categoryConfigurationSubject = this.categoryConfigService.categoryConfigData().subscribe(data => {\n        this.categoryListData = data;\n        this.groupOfCategory = _.uniq(_.map(data, 'group')).sort();\n        this.categoryConfigData = _.mapValues(_.groupBy(data, 'group'), groupList => groupList.map(group => _.omit(group, 'group')));\n      });\n      delete this.categoryConfigData[\"undefined\"];\n      this.innerProfileConfigurationSubject = this.categoryConfigService.innerProfileCategory().subscribe(data => {\n        this.innerProfileCategory = data['result'];\n      });\n      this.onTabChange(0);\n      this.getProfileData();\n      this.profileWizardState = localStorage.getItem('profileWizardState') ? JSON.parse(localStorage.getItem('profileWizardState')) : (_a = history.state) === null || _a === void 0 ? void 0 : _a.isOverview;\n      if ((_b = this.profileWizardState) === null || _b === void 0 ? void 0 : _b.isOverview) {\n        this.patchValue();\n      }\n    }\n    getProfileData(isRerender) {\n      this.loading = true;\n      if (this.allProfileSubscribe) this.allProfileSubscribe.unsubscribe();\n      this.allProfileSubscribe = this.service.getProfileList(this.orgId).subscribe(res => {\n        if (res) {\n          this.profileTableData = res;\n          // if(!history.state.isOverview) {\n          //   this.patchValue();\n          // }\n          this.loading = false;\n          this.patchValue();\n        }\n      }, err => {\n        var _a;\n        this.loading = false;\n        this.profileTableData = [];\n        if (!((_a = this.profileWizardState) === null || _a === void 0 ? void 0 : _a.isOverview)) {\n          this.patchValue();\n        }\n        this.errorMsg = err.error.error;\n      }, () => {\n        this.loading = false;\n      });\n    }\n    patchValue() {\n      var _a, _b, _c, _d, _e, _f, _g;\n      const profileData = (_a = this.profileWizardState) === null || _a === void 0 ? void 0 : _a.editProfile;\n      const isFromDataModel = (_b = history.state) === null || _b === void 0 ? void 0 : _b.dataModel;\n      if (profileData) {\n        this.isNewRecord = false;\n        this.addProfileObj = {\n          addProfileTab: this.addProfileTab,\n          start: {\n            name: profileData.name,\n            description: profileData.description,\n            isNameEntered: false\n          },\n          buildProfile: {\n            allProfileData: this.profileTableData,\n            isStepperClicked: true,\n            innerProfileCategory: this.innerProfileCategory,\n            disableAddCategoryBtn: true,\n            isFromDataModel: (_c = history.state) === null || _c === void 0 ? void 0 : _c.isDataModel,\n            dataModelCategoryObj: {\n              isFormValid: false,\n              name: 'Set Parameter Value',\n              displayName: 'Set Parameter Value',\n              parameters: (_d = history.state) === null || _d === void 0 ? void 0 : _d.dataModel\n            },\n            exisitingCategory: [],\n            categoryList: [...this.getCategoryObj(profileData.configurations)],\n            reviewPageCategoryList: [...this.getCategoryObj(profileData.configurations)],\n            categoryConfigData: []\n          }\n        };\n        this.getCategoryObj(profileData.configurations);\n        this.showOverViewPage = (_e = this.profileWizardState) === null || _e === void 0 ? void 0 : _e.isOverview;\n      } else {\n        this.isNewRecord = true;\n        this.addProfileObj = {\n          addProfileTab: this.addProfileTab,\n          start: {\n            name: undefined,\n            description: undefined,\n            isNameEntered: true\n          },\n          buildProfile: {\n            allProfileData: this.profileTableData,\n            isStepperClicked: false,\n            innerProfileCategory: this.innerProfileCategory,\n            disableAddCategoryBtn: true,\n            isFromDataModel: (_f = history.state) === null || _f === void 0 ? void 0 : _f.isDataModel,\n            dataModelCategoryObj: {\n              isFormValid: false,\n              name: 'Set Parameter Value',\n              displayName: 'Set Parameter Value',\n              parameters: (_g = history.state) === null || _g === void 0 ? void 0 : _g.dataModel\n            },\n            exisitingCategory: [],\n            categoryList: [],\n            reviewPageCategoryList: []\n          }\n        };\n      }\n    }\n    onTabChange(index) {\n      var _a, _b;\n      this.errorMsg = undefined;\n      if (((_a = this.addProfileObj.start.name) === null || _a === void 0 ? void 0 : _a.trim()) && index < 2 || this.addProfileObj.buildProfile.categoryList.length > 0 && index === 2 || ((_b = history.state) === null || _b === void 0 ? void 0 : _b.isDataModel) && this.addProfileObj.buildProfile && this.addProfileObj.buildProfile.dataModelCategoryObj && this.addProfileObj.buildProfile.dataModelCategoryObj.isFormValid) {\n        this.activeTab = this.addProfileTab[index];\n        this.selectedTabIndex = index;\n        this.isTabChange = !this.isTabChange;\n        this.addProfileObj.start.isNameEntered = true;\n      } else if (this.addProfileObj.start.name && index == 2 && this.addProfileObj.buildProfile.categoryList.length == 0) {\n        this.errorMsg = \"Please add at least one category.\";\n      } else {\n        this.addProfileObj.start.isNameEntered = index !== 0 ? false : true;\n      }\n    }\n    buildConfigurationObj(categoryList) {\n      let categoryArray = [];\n      categoryList.forEach(item => {\n        if (item.category == \"Voice Service\" && typeof item.parameterValues === 'object' && item.parameterValues[\"Model\"] == \"GigaCenter\" && item.parameterValues[\"Type\"] == \"X_000631_TDMGW\") {\n          item.parameterValues[\"RTPCodec1st_TDMGW\"] = \"G.711MuLaw\";\n        }\n        if (typeof item.parameterValues === 'object' && item.parameterValues['VlanTagAction'] === false && item.category == \"Voice Service\") {\n          // delete item.parameterValues['X_000631_VlanMuxID'];\n          item.parameterValues['X_000631_VlanMuxID'] = -1;\n          //delete item.parameterValues['X_000631_VlanMux8021p'];\n        }\n        //RG L2 Bridged\n        if (typeof item.parameterValues === 'object' && (item.category == \"Data Service\" || item.category == \"Video Service\") && item.parameterValues[\"Mode\"] == \"RG L2 Bridged\" && item.parameterValues[\"productFamily\"] == \"EXOS\") {\n          if (item.parameterValues[\"AnyPortAnyServiceEnabled\"] == true) {\n            item.parameterValues[\"X_000631_OUI_Enable\"] = true;\n            // item.parameterValues.X_000631_OUI_Enable == true;\n          }\n          // else {\n          //   if (item.parameterValues[\"AnyPortAnyServiceEnabled\"] == false) {\n          //     item.parameterValues[\"X_000631_OUI_Enable\"] = false;\n          //   }\n          // }\n        }\n        // if ((item.category == \"Video Service\")\n        //   && item.parameterValues[\"productFamily\"] == \"GigaCenter\"\n        //   && item.parameterValues[\"Mode\"] == \"RG L2 Bridged\") {\n        //   if (item.parameterValues[\"AnyPortAnyServiceEnabled\"] == true) {\n        //     item.parameterValues[\"X_000631_OUI_Enable\"] == true;\n        //   }\n        //   else {\n        //     if (item.parameterValues[\"AnyPortAnyServiceEnabled\"] == false) {\n        //       item.parameterValues[\"OUI_Enable\"].setValue(false);\n        //     }\n        //   }\n        // }\n        const filteredObj = _.pick(item, ['category', 'parameterValues']);\n        categoryArray.push(filteredObj);\n      });\n      return categoryArray;\n    }\n    onSave() {\n      var _a;\n      // const formReqObj: any = {\n      //   name: this.addProfileObj.start.name ? this.addProfileObj.start.name.trim() : '',\n      //   description: this.addProfileObj.start.description,\n      //   configurations: (this.addProfileObj.buildProfile.isFromDataModel) ? this.buildDataModelReqObj() :\n      //     this.buildConfigurationObj(this.addProfileObj.buildProfile.categoryList)\n      // }\n      const formReqObj = {\n        name: this.addProfileObj.start.name ? this.addProfileObj.start.name.trim() : '',\n        description: this.addProfileObj.start.description,\n        configurations: this.addProfileObj.buildProfile.isFromDataModel ? this.buildDataModelReqObj() : this.buildConfigurationObj(this.addProfileObj.buildProfile.categoryList)\n      };\n      this.loading = true;\n      if (this.isNewRecord) {\n        this.AddProfileSubscribe = this.service.addProfile(this.orgId, formReqObj).subscribe(res => {\n          if (res) {\n            this.profileID = res;\n            this.loading = false;\n            this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']);\n          }\n        }, err => {\n          this.loading = false;\n          this.errorMsg = err.error.error;\n        }, () => {});\n      } else {\n        this.AddProfileSubscribe = this.service.updateProfile((_a = this.profileWizardState) === null || _a === void 0 ? void 0 : _a.editProfile._id, this.orgId, formReqObj).subscribe(res => {\n          this.loading = false;\n          this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']);\n        }, err => {\n          this.loading = false;\n          this.errorMsg = err.error.error;\n        }, () => {});\n      }\n    }\n    buildDataModelReqObj() {\n      const configuration = [];\n      this.addProfileObj.buildProfile.categoryList.forEach(item => {\n        for (let key of Object.keys(item.parameterValues)) {\n          const formObj = {};\n          const type = item.selectedCategory.filter(catgry => catgry.displayName == key).map(obj => obj.objectDefaultType);\n          formObj['SetParamValueProfileName'] = key;\n          formObj['SetParamValueProfileType'] = typeof item.parameterValues[key] === 'number' ? type && type.length ? type[0] : 'int' : typeof item.parameterValues[key];\n          formObj['SetParamValueProfileValue'] = item.parameterValues[key].toString();\n          configuration.push({\n            category: item.category,\n            parameterValues: formObj\n          });\n        }\n      });\n      return configuration;\n    }\n    onCloseError() {\n      this.errorMsg = undefined;\n    }\n    getCategoryObj(selectedCategory) {\n      selectedCategory.forEach(item => {\n        for (let key of Object.keys(this.categoryConfigData)) {\n          this.categoryConfigData[key].forEach(category => {\n            if (category.displayName === item.category || category.name === item.category) {\n              this.selectedCategoryType = category;\n              this.addProfileObj.buildProfile.exisitingCategory.push(category.displayName);\n              this.addProfileObj.buildProfile.exisitingCategory = this.addProfileObj.buildProfile.exisitingCategory.concat(this.NEW_CATEGORY_BUTTON_DISABLE);\n            }\n          });\n        }\n        item.selectedCategory = this.selectedCategoryType.parameters;\n      });\n      return selectedCategory;\n    }\n    ngOnDestroy() {\n      this.addProfileObj = undefined;\n      this.languageSubject.unsubscribe();\n    }\n    close() {\n      this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-operations/foundation-system-operation/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']);\n    }\n    profilesBack() {\n      this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-operations/foundation-system-operation/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles', './cco/services/service-profiles/profiles', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles', '/cco/operations/cco-subscriber-operations/operations/profiles']);\n    }\n  }\n  ProfileWizardComponent.ɵfac = function ProfileWizardComponent_Factory(t) {\n    return new (t || ProfileWizardComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.SsoAuthService), i0.ɵɵdirectiveInject(i3.CategoryConfigurationService), i0.ɵɵdirectiveInject(i4.ProfileService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.Title));\n  };\n  ProfileWizardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileWizardComponent,\n    selectors: [[\"app-profile-wizard\"]],\n    decls: 4,\n    vars: 4,\n    consts: [[\"role\", \"alert\", \"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"class\", \"loader\", 4, \"ngIf\"], [\"class\", \"row\", 4, \"ngIf\"], [3, \"isOverViewPage\", \"addProfileObj\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\"], [1, \"loader\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [1, \"row\"], [1, \"col-md-12\", \"my-3\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"col-md-12\"], [\"class\", \"profile-wizard\", \"id\", \"profileWizard\", 4, \"ngIf\"], [\"id\", \"profileWizard\", 1, \"profile-wizard\"], [1, \"stepper-main\", \"mb-3\"], [1, \"stepper-ui\"], [3, \"title\", \"ngClass\", \"click\"], [3, \"title\", \"disabled\", \"ngClass\", \"click\"], [2, \"position\", \"absolute\", \"right\", \"0px\", \"top\", \"0px\"], [\"type\", \"button\", \"id\", \"previousbtn\", 1, \"btn-arrow\", \"btn-arr-prev\", \"btn-grey\", \"mr-2\", 3, \"disabled\", \"click\"], [\"src\", \"assets/img/ic_chevronleft_grey.svg\"], [\"type\", \"button\", \"id\", \"nextbtn\", \"class\", \"btn-default btn-arr-nxt primary mr-2 nxt-btn\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"id\", \"finishbtn\", \"class\", \"btn-default primary px-3\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"w-100 alert alert-danger fade show ng-star-inserted\", 4, \"ngIf\"], [3, \"addProfileObj\", 4, \"ngIf\"], [3, \"buildProfileObj\", \"CerrorMsg\", 4, \"ngIf\"], [\"type\", \"button\", \"id\", \"nextbtn\", 1, \"btn-default\", \"btn-arr-nxt\", \"primary\", \"mr-2\", \"nxt-btn\", 3, \"click\"], [\"src\", \"assets/img/ic_chevron-r-w.svg\"], [\"type\", \"button\", \"id\", \"finishbtn\", 1, \"btn-default\", \"primary\", \"px-3\", 3, \"click\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\", \"ng-star-inserted\"], [1, \"error-img\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [3, \"addProfileObj\"], [3, \"buildProfileObj\", \"CerrorMsg\"], [3, \"isOverViewPage\", \"addProfileObj\"]],\n    template: function ProfileWizardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ProfileWizardComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, ProfileWizardComponent_div_1_Template, 5, 1, \"div\", 1);\n        i0.ɵɵtemplate(2, ProfileWizardComponent_div_2_Template, 6, 1, \"div\", 2);\n        i0.ɵɵtemplate(3, ProfileWizardComponent_app_profile_review_wizard_3_Template, 1, 2, \"app-profile-review-wizard\", 3);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.hasScopeAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading && ctx.hasScopeAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasScopeAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showOverViewPage);\n      }\n    },\n    directives: [i7.NgIf, i7.NgClass, i8.ProfileStartWizardComponent, i9.ProfileBuildWizardComponent, i10.ProfileReviewWizardComponent],\n    styles: [\"#profileWizard.profile-wizard[_ngcontent-%COMP%]   .stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{width:calc(100% / 5);padding:5px 25px;background:#ebeaef;color:gray;text-align:center;border-radius:20px!important;cursor:pointer!important}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%]{z-index:55!important}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%]{z-index:44!important;transform:translate(-20px)}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%]{z-index:33!important;transform:translate(-40px)}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%]{z-index:22!important;transform:translate(-60px)}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{z-index:11!important;transform:translate(-80px)}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step-active[_ngcontent-%COMP%]{background:#0279ff!important;color:#fff!important;z-index:99!important}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .step-success[_ngcontent-%COMP%]{background:#82bf00!important;color:#fff!important;z-index:101!important}#profileWizard.profile-wizard[_ngcontent-%COMP%]   .pb-4[_ngcontent-%COMP%]{padding-bottom:3.5rem!important}.stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;position:relative}.stepper-ui[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0 0 10px;padding:0;overflow:hidden;width:100%}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 10px 0 30px;color:#1a1f22;position:relative;height:32px;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;border-right:0px!important;border-left:0px!important;outline:none!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:\\\"\\\";width:30px;height:100%;background:transparent;position:absolute;top:0;right:-10px;transform:rotate(48deg);z-index:1;border:1px ridge transparent;border-top-color:#0279ff;border-right-color:#0279ff;border-top-right-radius:5px}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{background-color:#0279ff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{background-color:#82bf00!important;border-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{background-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled{background-color:#82bf00!important;border-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{border-top-color:#fff!important;border-right-color:#fff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{border-top-color:#0279ff!important;border-right-color:#0279ff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   button[_ngcontent-%COMP%]{border-top-left-radius:30px;border-bottom-left-radius:30px}button[_ngcontent-%COMP%]:disabled{background:transparent!important;border-color:#0279ff!important;cursor:not-allowed;color:#4c4c4c}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f5faff;color:#0279ff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{background-color:#f5faff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;right:0;top:-1px;width:20px;height:32px;background-color:transparent;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;z-index:9}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:#1a1f22}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:after{background-color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{opacity:.8;color:#fff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:before, .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:before{display:none}.nxt-btn[_ngcontent-%COMP%]{min-width:110px}.nxt-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:10px}\"]\n  });\n  return ProfileWizardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}