{"ast":null,"code":"import { DataTableDirective } from 'angular-datatables';\nimport { Subject } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport * as _ from 'lodash';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"src/app/shared/services/sso-auth.service\";\nimport * as i3 from \"../services/profile.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i6 from \"@angular/platform-browser\";\nimport * as i7 from \"src/app/sys-admin/services/common.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"angular-datatables\";\nconst _c0 = [\"deleteModal\"];\nfunction ProfilesComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.language[\"Access denied due to RBAC. Please consult your Organization Administrator for access.\"], \" \");\n  }\n}\nfunction ProfilesComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelementStart(1, \"span\", 21);\n    i0.ɵɵelement(2, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onCloseError();\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r2.errorMsg, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction ProfilesComponent_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelementStart(1, \"span\", 21);\n    i0.ɵɵelement(2, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 27);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"b\", 28);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" ?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 29);\n    i0.ɵɵelementStart(9, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_div_2_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.confirmDeleteSecleted();\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_div_2_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.closeModal();\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.language[\"Are you sure you want to delete\"], \" \", ctx_r3.language.The_Profile, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\\"\", ctx_r3.modalInfo, \"\\\"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.language.Confirm, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.language.Cancel, \" \");\n  }\n}\nfunction ProfilesComponent_div_1_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵelementStart(2, \"div\", 34);\n    i0.ɵɵelementStart(3, \"span\", 35);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r4.language.Loading);\n  }\n}\nfunction ProfilesComponent_div_1_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.onAddProfile();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.language.Add_Profile, \" \");\n  }\n}\nfunction ProfilesComponent_div_1_tbody_23_tr_1_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 39);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_td_5_Template_td_click_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const item_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return ctx_r22.showOverView(item_r16);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r16.configurations ? ctx_r18.language[item_r16.configurations[0].category] || item_r16.configurations[0].category : \"\", \" \");\n  }\n}\nfunction ProfilesComponent_div_1_tbody_23_tr_1_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 39);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_td_6_Template_td_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const item_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(3);\n      return ctx_r26.showOverView(item_r16);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r19 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r19.language[item_r16.configurations[0].category] || item_r16.configurations[0].category, \" \", ctx_r19.language.and, \" \", ctx_r19.language[item_r16.configurations[1].category] || item_r16.configurations[1].category, \" \");\n  }\n}\nfunction ProfilesComponent_div_1_tbody_23_tr_1_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 39);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_td_7_Template_td_click_0_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const item_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r30 = i0.ɵɵnextContext(3);\n      return ctx_r30.showOverView(item_r16);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r20 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate4(\" \", ctx_r20.language[item_r16.configurations[0].category] || item_r16.configurations[0].category, \" \", ctx_r20.language.and, \" \", item_r16.configurations.length - 1, \" \", ctx_r20.language[\"more categories\"], \" \");\n  }\n}\nfunction ProfilesComponent_div_1_tbody_23_tr_1_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵelementStart(1, \"a\", 43);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_div_9_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const item_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r34 = i0.ɵɵnextContext(3);\n      return ctx_r34.editProfile(item_r16);\n    });\n    i0.ɵɵelement(2, \"i\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 45);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_div_9_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const item_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r37 = i0.ɵɵnextContext(3);\n      return ctx_r37.deleteProfile(item_r16);\n    });\n    i0.ɵɵelement(4, \"i\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"editProfile-\", item_r16._id, \"\");\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r21.language.Edit);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"deleteProfile-\", item_r16._id, \"\");\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r21.language.delete);\n  }\n}\nfunction ProfilesComponent_div_1_tbody_23_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 38);\n    i0.ɵɵelementStart(1, \"td\", 39);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const item_r16 = restoredCtx.$implicit;\n      const ctx_r40 = i0.ɵɵnextContext(3);\n      return ctx_r40.showOverView(item_r16);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 39);\n    i0.ɵɵlistener(\"click\", function ProfilesComponent_div_1_tbody_23_tr_1_Template_td_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const item_r16 = restoredCtx.$implicit;\n      const ctx_r42 = i0.ɵɵnextContext(3);\n      return ctx_r42.showOverView(item_r16);\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ProfilesComponent_div_1_tbody_23_tr_1_td_5_Template, 2, 1, \"td\", 40);\n    i0.ɵɵtemplate(6, ProfilesComponent_div_1_tbody_23_tr_1_td_6_Template, 2, 3, \"td\", 40);\n    i0.ɵɵtemplate(7, ProfilesComponent_div_1_tbody_23_tr_1_td_7_Template, 2, 4, \"td\", 40);\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, ProfilesComponent_div_1_tbody_23_tr_1_div_9_Template, 5, 4, \"div\", 41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r16 = ctx.$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵpropertyInterpolate(\"id\", item_r16._id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r16.name ? item_r16.name : \"\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r16.description ? item_r16.description : \"\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (item_r16 == null ? null : item_r16.configurations == null ? null : item_r16.configurations.length) === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (item_r16 == null ? null : item_r16.configurations == null ? null : item_r16.configurations.length) === 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (item_r16 == null ? null : item_r16.configurations == null ? null : item_r16.configurations.length) > 2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r15.hasWriteAccess);\n  }\n}\nfunction ProfilesComponent_div_1_tbody_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtemplate(1, ProfilesComponent_div_1_tbody_23_tr_1_Template, 10, 7, \"tr\", 37);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.profileTableData);\n  }\n}\nfunction ProfilesComponent_div_1_tbody_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"td\", 47);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r7.language[\"No data available in table\"], \" \");\n  }\n}\nfunction ProfilesComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtemplate(1, ProfilesComponent_div_1_div_1_Template, 6, 1, \"div\", 4);\n    i0.ɵɵtemplate(2, ProfilesComponent_div_1_div_2_Template, 13, 5, \"div\", 5);\n    i0.ɵɵelementStart(3, \"div\", 6);\n    i0.ɵɵtext(4, \"Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 7);\n    i0.ɵɵtemplate(6, ProfilesComponent_div_1_div_6_Template, 5, 1, \"div\", 8);\n    i0.ɵɵelementStart(7, \"div\", 9);\n    i0.ɵɵelementStart(8, \"div\", 10);\n    i0.ɵɵtemplate(9, ProfilesComponent_div_1_button_9_Template, 2, 1, \"button\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 9);\n    i0.ɵɵelementStart(11, \"div\", 12);\n    i0.ɵɵelementStart(12, \"div\", 13);\n    i0.ɵɵelementStart(13, \"table\", 14);\n    i0.ɵɵelementStart(14, \"thead\");\n    i0.ɵɵelementStart(15, \"tr\");\n    i0.ɵɵelementStart(16, \"th\", 15);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\", 16);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\", 17);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"th\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, ProfilesComponent_div_1_tbody_23_Template, 2, 1, \"tbody\", 19);\n    i0.ɵɵtemplate(24, ProfilesComponent_div_1_tbody_24_Template, 4, 1, \"tbody\", 19);\n    i0.ɵɵelement(25, \"tbody\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMsg);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.deleteProfileData);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasWriteAccess);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"dtOptions\", ctx_r1.tableOptions);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.language.Name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.language.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.language.Type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.profileTableData == null ? null : ctx_r1.profileTableData.length) > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.profileTableData == null ? null : ctx_r1.profileTableData.length) === 0 && !ctx_r1.loading);\n  }\n}\nexport let ProfilesComponent = /*#__PURE__*/(() => {\n  class ProfilesComponent {\n    constructor(translateService, ssoService, service, router, dialogService, titleService, commonOrgService) {\n      this.translateService = translateService;\n      this.ssoService = ssoService;\n      this.service = service;\n      this.router = router;\n      this.dialogService = dialogService;\n      this.titleService = titleService;\n      this.commonOrgService = commonOrgService;\n      this.loading = true;\n      this.profileTableData = [];\n      this.addProfileObj = {};\n      this.tableOptions = {};\n      this.errorMsg = undefined;\n      this.modalTitle = '';\n      this.orgId = '';\n      this.profileCountt = {};\n      this.modalInfo = '';\n      this.dtTrigger = new Subject();\n      this.validateScopeStage = false;\n      this.isRerender = false;\n      this.hasWriteAccess = false;\n      this.hasScopeAccess = false;\n      this.isProfileDataAvailable = false;\n      this.deleteRes = {};\n      let entitlement = this.ssoService.getEntitlements();\n      if (entitlement && entitlement['214'] && entitlement['214'].apptype === 214) {\n        this.enableMyCommunity = true;\n      } else {\n        this.enableMyCommunity = false;\n      }\n      this.frTable = this.translateService.fr;\n    }\n    setTitle(url) {\n      if (!this.router.url.includes('cco-foundation') && !this.router.url.includes('/cco/services/service-profiles/profiles')) {\n        this.titleService.setTitle(`${this.language['Profiles']} - ${this.language['Operations']} - ${this.language['NetOps']} - ${this.language['Support']} - ${this.language['Calix Cloud']}`);\n      } else if (this.router.url.includes('/cco/services/service-profiles/profiles')) {\n        this.titleService.setTitle(`${this.language['RG Profiles']} - ${this.language['Services Profiles']} - ${this.language['Services']} - ${this.language['Operations']} - ${this.language['Calix Cloud']}`);\n      } else {\n        this.titleService.setTitle(`${this.language['RG Profiles']} - ${this.language['Profiles']} - ${this.language['Workflow Prerequisites']} - ${this.language['configuration']} - ${this.language['Deployment']} - ${this.language['Calix Cloud']}`);\n      }\n    }\n    ngOnInit() {\n      var _a, _b;\n      this.tableOptions = {\n        searching: false,\n        lengthChange: false,\n        ordering: true,\n        serverSide: true,\n        paging: false,\n        info: false,\n        order: [0, 'asc'],\n        columnDefs: [{\n          targets: [0, 1, 2],\n          orderable: true\n        }, {\n          targets: 3,\n          orderable: false\n        }],\n        ajax: (dataTablesParameters, callback) => {\n          if (!this.profileTableData.length || !dataTablesParameters.order[0]) return;\n          let tempData = this.profileTableData;\n          this.loading = true;\n          if (dataTablesParameters.order[0].column == 0) {\n            tempData = _.orderBy(tempData, obj => obj.name.trim().toLowerCase(), [dataTablesParameters.order[0].dir == 'asc' ? 'asc' : 'desc']);\n          }\n          if (dataTablesParameters.order[0].column == 1) {\n            tempData = _.orderBy(tempData, obj => obj.description ? obj.description.trim().toLowerCase() : '', [dataTablesParameters.order[0].dir == 'asc' ? 'asc' : 'desc']);\n          }\n          if (dataTablesParameters.order[0].column == 2) {\n            tempData = _.orderBy(tempData, obj => {\n              var _a;\n              return (_a = obj === null || obj === void 0 ? void 0 : obj.configurations[0]) === null || _a === void 0 ? void 0 : _a.category.trim().toLowerCase();\n            }, [dataTablesParameters.order[0].dir == 'asc' ? 'asc' : 'desc']);\n            // for feature if we need to concate string values sort..\n            // tempData = _.orderBy(tempData,obj => {\n            //   return obj?.configurations?.length > 2 ? `${obj?.configurations[0]?.category} and ${obj?.configurations?.length -1} more categories` :\n            //   obj?.configurations?.length == 2 ? (obj?.configurations[0]?.category + ' and '+ obj?.configurations[1]?.category) : obj.configurations[0]?.category;\n            // } ,[dataTablesParameters.order[0].dir == 'asc' ? 'asc' : 'desc']);\n          }\n          //to clear previous sort icon\n          if (this.activeSortElement) {\n            this.clearSort(this.activeSortElement);\n          }\n          //to set sort Icon\n          let setElement = document.querySelectorAll(`#profile-list-table thead tr th`)[dataTablesParameters.order[0].column];\n          this.setSorting(setElement, dataTablesParameters.order[0].dir);\n          this.activeSortElement = setElement; //after sort data reassigning\n          this.profileTableData = tempData;\n          this.loading = false;\n          callback({\n            recordsTotal: tempData === null || tempData === void 0 ? void 0 : tempData.length,\n            recordsFiltered: tempData === null || tempData === void 0 ? void 0 : tempData.length,\n            data: [],\n            draw: 0\n          });\n        }\n        // drawCallback:(settings:any)=>{\n        //   if(settings.aaSorting.length) this.loading = true;\n        //   setTimeout(() => {\n        //     this.loading = false;\n        //   }, 500);\n        // }\n      };\n      // this.titleService.setTitle('Calix Cloud - Operations - Profiles');\n      let scopes = this.ssoService.getScopes();\n      let base = `${environment.API_BASE}`;\n      if (base.indexOf('/dev.api.calix.ai') > -1) {\n        this.validateScopeStage = true;\n      } else this.validateScopeStage = false;\n      if (!this.router.url.includes('cco-foundation') && !this.router.url.includes('cco/services/service-profiles/profiles')) {\n        if (environment.VALIDATE_SCOPE) {\n          scopes['cloud.rbac.csc.netops.operations.profiles'] = scopes['cloud.rbac.csc.netops.operations.profiles'] ? scopes['cloud.rbac.csc.netops.operations.profiles'] : [];\n          if (scopes['cloud.rbac.csc.netops.operations.profiles'].length) {\n            this.hasScopeAccess = true;\n          }\n          if (scopes && scopes['cloud.rbac.csc.netops.operations.profiles'] && scopes['cloud.rbac.csc.netops.operations.profiles'].indexOf('write') !== -1) {\n            this.hasWriteAccess = true;\n          }\n        } else {\n          this.hasWriteAccess = true;\n          this.hasScopeAccess = true;\n        }\n      } else if (this.router.url.includes('cco/services/service-profiles/profiles')) {\n        if (environment.VALIDATE_SCOPE) {\n          if ((_a = scopes['cloud.rbac.coc.services.serviceprofiles.rgprofiles']) === null || _a === void 0 ? void 0 : _a.length) {\n            this.hasScopeAccess = true;\n          }\n          if (scopes && ((_b = scopes['cloud.rbac.coc.services.serviceprofiles.rgprofiles']) === null || _b === void 0 ? void 0 : _b.includes('write'))) {\n            this.hasWriteAccess = true;\n          }\n        } else {\n          this.hasWriteAccess = true;\n          this.hasScopeAccess = true;\n        }\n      } else {\n        if (environment.VALIDATE_SCOPE) {\n          scopes['cloud.rbac.foundation.configurations'] = scopes['cloud.rbac.foundation.configurations'] ? scopes['cloud.rbac.foundation.configurations'] : [];\n          if (scopes['cloud.rbac.foundation.configurations'].length) {\n            this.hasScopeAccess = true;\n          }\n          if (scopes && scopes['cloud.rbac.foundation.configurations'].includes('write')) {\n            this.hasWriteAccess = true;\n          }\n        } else {\n          this.hasWriteAccess = true;\n          this.hasScopeAccess = true;\n        }\n      }\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n        this.isRerender = true;\n        // this.setTableOptions('language');\n        this.setTitle(this.router.url);\n      });\n      this.setTitle(this.router.url);\n      if (!this.hasScopeAccess) {\n        this.ssoService.setPageAccess(false);\n        return;\n      }\n      this.orgId = this.ssoService.getOrgId();\n      this.getProfileCount();\n      this.getProfileData();\n      // setTimeout(() => {\n      //   this.getProfileData();\n      // }, 1000);\n    }\n\n    ngOnDestroy() {\n      this.languageSubject.unsubscribe();\n    }\n    getProfileData(isRerender) {\n      if (this.allProfileSubscribe) this.allProfileSubscribe.unsubscribe();\n      this.profileTableData = [];\n      this.loading = true;\n      this.allProfileSubscribe = this.service.getProfileList(this.orgId).subscribe(res => {\n        var _a, _b, _c, _d;\n        if (res) {\n          if (this.enableMyCommunity) {\n            for (var i = 0; i < (res === null || res === void 0 ? void 0 : res.length); i++) {\n              let data = (_a = res[i]) === null || _a === void 0 ? void 0 : _a.configurations;\n              data = data.filter(el => !(el === null || el === void 0 ? void 0 : el.isInvalid));\n              if (data === null || data === void 0 ? void 0 : data.length) {\n                res[i].configurations = data;\n              } else {\n                res.splice(i, 1);\n                i = 0;\n              }\n            }\n            this.profileTableData = res;\n          } else if (!this.enableMyCommunity) {\n            for (var i = 0; i < (res === null || res === void 0 ? void 0 : res.length); i++) {\n              let data = (_b = res[i]) === null || _b === void 0 ? void 0 : _b.configurations;\n              data = data.filter(el => !(el === null || el === void 0 ? void 0 : el.isInvalid));\n              if (data === null || data === void 0 ? void 0 : data.length) {\n                res[i].configurations = data;\n              } else {\n                res.splice(i, 1);\n                i = 0;\n              }\n            }\n            this.profileTableData = res.filter(item => (item === null || item === void 0 ? void 0 : item.configurations[0].category) !== 'myCommunityIQ Traffic');\n          }\n          (_d = (_c = this.dtElement) === null || _c === void 0 ? void 0 : _c.dtInstance) === null || _d === void 0 ? void 0 : _d.then(dtInstance => {\n            this.tableOptions.order = [0, 'asc'];\n            dtInstance.ajax.reload();\n          });\n          // this.loading = false;\n          //  this.setTableOptions();\n          // if (isRerender) {\n          //   this.rerender();\n          // } else {\n          //   this.dtTrigger.next();\n          // }\n        }\n\n        this.loading = false;\n      }, err => {\n        this.loading = false;\n        this.errorMsg = err.error.error;\n      }\n      //, () => {\n      //   this.loading = false;\n      // }\n      );\n\n      this.hideNoDataRow();\n    }\n    // setTableOptions(type?: string) {\n    //   // this.tableOptions = {\n    //   //   pagingType: 'full_numbers',\n    //   //   columnDefs: [\n    //   //     { targets: [-1], orderable: false },\n    //   //   ],\n    //   //   drawCallback: (settings) => {\n    //   //     let total = settings.aoData.length;\n    //   //     let length = settings._iDisplayLength;\n    //   //     if (total <= length) {\n    //   //       $(settings.nTableWrapper).find(`#${settings.sTableId}_last`).addClass('disabled');\n    //   //     }\n    //   //   }\n    //   // };\n    //   this.tableLanguageOptions();\n    //   if (type && type == 'language') {\n    //     setTimeout(() => {\n    //       this.rerender();\n    //       this.dataAvailable = true;\n    //       this.loading = false;\n    //     }, 200);\n    //   } else {\n    //     setTimeout(() => {\n    //       this.dataAvailable = true;\n    //       this.loading = false;\n    //     }, 200);\n    //   }\n    // }\n    getProfileCount() {\n      if (this.profileCountSubscribe) this.profileCountSubscribe.unsubscribe();\n      this.profileCountSubscribe = this.service.getProfileCount().subscribe(res => {\n        if (res) {\n          this.profileCountt = res;\n          // this.loading = false;\n        }\n      }, err => {\n        this.loading = false;\n        this.errorMsg = err.error.error;\n      });\n    }\n    editProfile(item) {\n      if (this.allProfileSubscribe) this.allProfileSubscribe.unsubscribe();\n      this.allProfileSubscribe = this.service.getProfileDataById(item._id).subscribe(res => {\n        if (res) {\n          localStorage.setItem('profileWizardState', JSON.stringify({\n            profileList: [],\n            editProfile: res,\n            isOverview: false\n          }));\n          this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles/profile-wizard', './cco/services/service-profiles/profiles/profile-wizard', './cco-foundation/foundation-operations/foundation-system-operation/profiles/profile-wizard', '/cco/operations/cco-subscriber-operations/operations/profiles/profile-wizard'], {\n            state: {\n              profileList: [],\n              editProfile: res,\n              isOverview: false\n            }\n          }) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles/profile-wizard', './cco/services/service-profiles/profiles/profile-wizard', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles/profile-wizard', '/cco/operations/cco-subscriber-operations/operations/profiles/profile-wizard'], {\n            state: {\n              profileList: [],\n              editProfile: res,\n              isOverview: false\n            }\n          });\n        }\n      }, err => {\n        this.errorMsg = err.error.error;\n      }, () => {});\n    }\n    showOverView(item) {\n      this.loading = true;\n      if (this.allProfileSubscribe) this.allProfileSubscribe.unsubscribe();\n      this.allProfileSubscribe = this.service.getProfileDataById(item._id).subscribe(res => {\n        if (res) {\n          this.loading = false;\n          localStorage.setItem('profileWizardState', JSON.stringify({\n            editProfile: res,\n            isOverview: true\n          }));\n          this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles/profile-wizard', './cco/services/service-profiles/profiles/profile-wizard', './cco-foundation/foundation-operations/foundation-system-operation/profiles/profile-wizard', '/cco/operations/cco-subscriber-operations/operations/profiles/profile-wizard'], {\n            state: {\n              editProfile: res,\n              isOverview: true\n            }\n          }) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles/profile-wizard', './cco/services/service-profiles/profiles/profile-wizard', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles/profile-wizard', '/cco/operations/cco-subscriber-operations/operations/profiles/profile-wizard'], {\n            state: {\n              editProfile: res,\n              isOverview: true\n            }\n          });\n        }\n      }, err => {\n        this.errorMsg = err.error.error;\n      }, () => {});\n    }\n    onAddProfile() {\n      localStorage.setItem('profileWizardState', JSON.stringify({\n        profileList: [],\n        editProfile: undefined,\n        isOverview: false\n      }));\n      this.router.url.includes('foundation-operations') ? this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles/profile-wizard', './cco/services/service-profiles/profiles/profile-wizard', './cco-foundation/foundation-operations/foundation-system-operation/profiles/profile-wizard', '/cco/operations/cco-subscriber-operations/operations/profiles/profile-wizard'], {\n        state: {\n          profileList: [],\n          editProfile: undefined,\n          isOverview: false\n        }\n      }) : this.ssoService.redirectByUrl(['/support/netops-management/operations/profiles/profile-wizard', './cco/services/service-profiles/profiles/profile-wizard', './cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/profiles/profile-wizard', '/cco/operations/cco-subscriber-operations/operations/profiles/profile-wizard'], {\n        state: {\n          profileList: [],\n          editProfile: undefined,\n          isOverview: false\n        }\n      });\n    }\n    deleteProfile(item) {\n      this.closeModal();\n      this.deleteProfileData = item;\n      this.modalTitle = this.language['Delete Profile'];\n      this.modalInfo = item.name;\n      $(\"html, body\").animate({\n        scrollTop: 0\n      }, \"slow\");\n    }\n    confirmDeleteSecleted() {\n      // this.loading = true;\n      if (this.allProfileSubscribe) this.allProfileSubscribe.unsubscribe();\n      this.allProfileSubscribe = this.service.deleteProfileById(this.deleteProfileData._id).subscribe(res => {\n        if (res) {\n          this.deleteRes = res;\n          this.getProfileData(true);\n          this.deleteProfileData = undefined;\n        }\n      }, err => {\n        this.loading = false;\n        this.pageErrorHandle(err);\n        //this.errorMsg = err.error.error;\n        this.deleteProfileData = undefined;\n      }, () => {\n        // this.loading = false;\n        this.closeModal();\n      });\n    }\n    pageErrorHandle(err) {\n      if (err.status == 401) {\n        this.errorMsg = this.language['Access Denied'];\n      } else {\n        this.errorMsg = this.ssoService.pageErrorHandle(err);\n      }\n    }\n    onCloseError() {\n      this.errorMsg = undefined;\n    }\n    closeModal() {\n      if (this.modalRef) {\n        this.modalRef.close();\n      }\n      this.deleteProfileData = undefined;\n    }\n    rerender() {\n      // this.dtElement.dtInstance.then((dtInstance: DataTables.Api) => {\n      //   dtInstance.destroy();\n      //   this.dtTrigger.next();\n      // });\n    }\n    tableLanguageOptions() {\n      // if (localStorage.getItem('defaultLanguage') && localStorage.getItem('defaultLanguage') == 'fr') {\n      //   this.tableOptions.language = this.frTable;\n      // } else if (localStorage.getItem('defaultLanguage') && localStorage.getItem('defaultLanguage') == 'en' && this.tableOptions.language) {\n      //   delete this.tableOptions.language;\n      // }\n    }\n    hideNoDataRow() {\n      setTimeout(() => {\n        $('.odd').css('display', 'none');\n      }, 500);\n    }\n    setSorting(element, dir) {\n      let addDir = dir == 'asc' ? 'sorting_asc' : 'sorting_desc';\n      let removeDir = dir == 'asc' ? 'sorting_desc' : 'sorting_asc';\n      element.classList.remove('sorting');\n      element.classList.remove(removeDir);\n      element.classList.add(addDir);\n    }\n    clearSort(element) {\n      if (element) {\n        element.classList.add('sorting');\n        element.classList.remove('sorting_asc', 'sorting_desc');\n      }\n    }\n  }\n  ProfilesComponent.ɵfac = function ProfilesComponent_Factory(t) {\n    return new (t || ProfilesComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.SsoAuthService), i0.ɵɵdirectiveInject(i3.ProfileService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.NgbModal), i0.ɵɵdirectiveInject(i6.Title), i0.ɵɵdirectiveInject(i7.CommonService));\n  };\n  ProfilesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfilesComponent,\n    selectors: [[\"app-profiles\"]],\n    viewQuery: function ProfilesComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(DataTableDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.deleteModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dtElement = _t.first);\n      }\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[\"role\", \"alert\", \"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"id\", \"profiles\", \"class\", \"tab-pane\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\"], [\"id\", \"profiles\", 1, \"tab-pane\"], [\"class\", \"w-100 alert alert-danger fade show ng-star-inserted\", 4, \"ngIf\"], [\"class\", \"py-3 warning-msg\", 4, \"ngIf\"], [1, \"d-block\", \"my-3\", \"d-sm-none\", \"ccl-Secondary-title\", \"mb-2\", \"col-md-12\", \"border-bottom\"], [1, \"w-100\", \"position-relative\"], [\"class\", \"loader pt-5 align-items-start\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-md-7\", \"text-left\", \"my-3\"], [\"type\", \"button\", \"id\", \"addProfile\", \"class\", \"btn-default primary px-3\", 3, \"click\", 4, \"ngIf\"], [1, \"col-md-12\"], [\"id\", \"netops-profile-list-table\", 1, \"netops-profile-list\"], [\"id\", \"profile-list-table\", \"datatable\", \"\", 1, \"row-border\", \"hover\", \"table-alter\", 3, \"dtOptions\"], [1, \"profile-name\"], [1, \"profile-description\"], [1, \"profile-type\"], [1, \"profile-edit-delete\"], [4, \"ngIf\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\", \"ng-star-inserted\"], [1, \"error-img\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [1, \"py-3\", \"warning-msg\"], [\"src\", \"./assets/img/warning-icon.svg\"], [1, \"d-inline-flex\", \"text-break\"], [1, \"pl-1\"], [1, \"btn-con-sec\", \"float-right\"], [\"id\", \"deletePFBtn\", 1, \"btn-default\", \"btn-primary\", \"px-3\", \"mr-2\", 3, \"click\"], [1, \"btn-default\", \"btn-dft\", \"py-1\", 3, \"click\"], [1, \"loader\", \"pt-5\", \"align-items-start\"], [1, \"d-flex\", \"align-items-start\", \"justify-content-center\"], [1, \"spinner-border\", \"text-primary\"], [1, \"sr-only\"], [\"type\", \"button\", \"id\", \"addProfile\", 1, \"btn-default\", \"primary\", \"px-3\", 3, \"click\"], [\"class\", \"cursor-pointer\", 3, \"id\", 4, \"ngFor\", \"ngForOf\"], [1, \"cursor-pointer\", 3, \"id\"], [3, \"click\"], [3, \"click\", 4, \"ngIf\"], [\"class\", \"d-flex ml-2\", 4, \"ngIf\"], [1, \"d-flex\", \"ml-2\"], [\"href\", \"javascript:void(0)\", 3, \"id\", \"title\", \"click\"], [\"aria-hidden\", \"true\", 1, \"cursor-pointer\", \"mx-2\", \"fa\", \"fa-pencil\"], [\"href\", \"javascript:void(0)\", 1, \"px-2\", \"cursor-pointer\", 3, \"id\", \"title\", \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-trash-o\"], [\"colspan\", \"5\", 1, \"no-data-available\"]],\n    template: function ProfilesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ProfilesComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, ProfilesComponent_div_1_Template, 26, 10, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.hasScopeAccess);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasScopeAccess);\n      }\n    },\n    directives: [i8.NgIf, i9.DataTableDirective, i8.NgForOf],\n    styles: [\".netops-profile-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.netops-profile-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%}.netops-profile-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{width:100%}.netops-profile-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 10px 10px 0!important;width:450px;word-break:break-all}.netops-profile-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){max-width:100px}\"]\n  });\n  return ProfilesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}