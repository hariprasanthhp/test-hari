{"ast":null,"code":"import { getDi } from '../../draw/BpmnRenderUtil';\nimport { getBusinessObject } from '../../util/ModelUtil';\nimport { filter, map } from 'min-dash';\nimport { selfAndAllChildren } from 'diagram-js/lib/util/Elements';\nvar HIGH_PRIORITY = 2000;\nexport default function BpmnDiOrdering(eventBus, canvas) {\n  eventBus.on('saveXML.start', HIGH_PRIORITY, orderDi);\n  function orderDi() {\n    var root = canvas.getRootElement(),\n      rootDi = getBusinessObject(root).di,\n      elements,\n      diElements;\n    elements = selfAndAllChildren([root], false);\n\n    // only bpmndi:Shape and bpmndi:Edge can be direct children of bpmndi:Plane\n    elements = filter(elements, function (element) {\n      return element !== root && !element.labelTarget;\n    });\n    diElements = map(elements, getDi);\n    rootDi.set('planeElement', diElements);\n  }\n}\nBpmnDiOrdering.$inject = ['eventBus', 'canvas'];","map":null,"metadata":{},"sourceType":"module"}