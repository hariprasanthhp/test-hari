{"ast":null,"code":"import eventDefinitionHelper from 'bpmn-js-properties-panel/lib/helper/EventDefinitionHelper';\nimport { getBusinessObject, is } from 'bpmn-js/lib/util/ModelUtil';\nimport { isEventSubProcess } from 'bpmn-js/lib/util/DiUtil';\nimport timerEventDefinitionImpl from './implementation/TimerEventDefinition';\nimport timerDurationDefinitionImpl from './implementation/TimerDurationDefinition';\nexport default function (group, element, bpmnFactory, translate) {\n  const timerEventDefinition = eventDefinitionHelper.getTimerEventDefinition(element);\n  const timerOptions = getTimerOptions(element);\n  if (!timerEventDefinition) {\n    return;\n  }\n  if (!timerOptions.length) {\n    return timerDurationDefinitionImpl(group, bpmnFactory, timerEventDefinition, translate);\n  }\n  timerEventDefinitionImpl(group, bpmnFactory, timerEventDefinition, timerOptions, translate);\n}\n\n// helper //////////\n\nconst cancelActivity = element => {\n  const bo = getBusinessObject(element);\n  return bo.cancelActivity;\n};\nconst isInterrupting = element => {\n  const bo = getBusinessObject(element);\n  return bo.isInterrupting !== false;\n};\nconst getTimerOptions = element => {\n  let timerOptions = [];\n  const isStartEvent = is(element, 'bpmn:StartEvent');\n  const isBoundaryEvent = is(element, 'bpmn:BoundaryEvent');\n  const hasEventSubprocessParent = isEventSubProcess(element.parent);\n  if (isBoundaryEvent || hasEventSubprocessParent) {\n    timerOptions = [...timerOptions, {\n      value: 'timeDuration',\n      name: 'Duration'\n    }];\n    if (!cancelActivity(element) && !(hasEventSubprocessParent && isInterrupting(element))) {\n      timerOptions = [...timerOptions, {\n        value: 'timeCycle',\n        name: 'Cycle'\n      }];\n    }\n  }\n  if (isStartEvent && !hasEventSubprocessParent) {\n    timerOptions = [...timerOptions, {\n      value: 'timeDate',\n      name: 'Date'\n    }, {\n      value: 'timeCycle',\n      name: 'Cycle'\n    }];\n  }\n  return timerOptions;\n};","map":null,"metadata":{},"sourceType":"module"}