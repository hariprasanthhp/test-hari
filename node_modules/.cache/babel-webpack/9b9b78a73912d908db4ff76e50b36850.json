{"ast":null,"code":"import { forEach } from 'min-dash';\nvar MARKER_HOVER = 'hover',\n  MARKER_SELECTED = 'selected';\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {EventBus} events\n * @param {SelectionService} selection\n * @param {Canvas} canvas\n */\nexport default function SelectionVisuals(events, canvas, selection, styles) {\n  this._multiSelectionBox = null;\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n  events.on('element.hover', function (event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n  events.on('element.out', function (event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n  events.on('selection.changed', function (event) {\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n    var oldSelection = event.oldSelection,\n      newSelection = event.newSelection;\n    forEach(oldSelection, function (e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n    forEach(newSelection, function (e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n  });\n}\nSelectionVisuals.$inject = ['eventBus', 'canvas', 'selection', 'styles'];","map":null,"metadata":{},"sourceType":"module"}