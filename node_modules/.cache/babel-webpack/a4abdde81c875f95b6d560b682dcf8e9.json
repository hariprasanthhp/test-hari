{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators, FormControl, FormGroup } from '@angular/forms';\nimport * as _ from 'lodash';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app-services/translate.service\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"../common-workflow.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"mail_recepients\"];\nfunction RecepientsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelementStart(1, \"span\", 18);\n    i0.ɵɵelement(2, \"img\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function RecepientsComponent_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.submitted = false;\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"innerHtml\", ctx_r0.language[ctx_r0.errorMessage] || ctx_r0.errorMessage, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction RecepientsComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\", 23);\n    i0.ɵɵlistener(\"click\", function RecepientsComponent_div_10_Template_span_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const i_r10 = restoredCtx.index;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.removeData(ctx_r11.dynamicFieldsObj[\"emailRecipients\"], i_r10);\n    });\n    i0.ɵɵelement(3, \"i\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r9, \" \");\n  }\n}\nfunction RecepientsComponent_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r13.language[\"This field is required.\"], \" \");\n  }\n}\nfunction RecepientsComponent_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.language[\"Please enter a valid email address\"], \" \");\n  }\n}\nfunction RecepientsComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtemplate(1, RecepientsComponent_div_13_div_1_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(2, RecepientsComponent_div_13_div_2_Template, 2, 1, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r3.workflowObj == null ? null : ctx_r3.workflowObj[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx_r3.workflowObj[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]].length) && (ctx_r3.formControls == null ? null : ctx_r3.formControls[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx_r3.formControls[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]].errors == null ? null : ctx_r3.formControls[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]].errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.formControls == null ? null : ctx_r3.formControls[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx_r3.formControls[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]].errors == null ? null : ctx_r3.formControls[ctx_r3.dynamicFieldsObj[\"emailRecipients\"]].errors.invalidEmail);\n  }\n}\nfunction RecepientsComponent_div_23_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\", 23);\n    i0.ɵɵlistener(\"click\", function RecepientsComponent_div_23_div_4_Template_span_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const i_r18 = restoredCtx.index;\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return ctx_r19.removeData(ctx_r19.dynamicFieldsObj[\"sms\"], i_r18);\n    });\n    i0.ɵɵelement(3, \"i\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r17, \" \");\n  }\n}\nfunction RecepientsComponent_div_23_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r21.language[\"This field is required.\"], \" \");\n  }\n}\nfunction RecepientsComponent_div_23_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \" Please enter valid Phone Number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RecepientsComponent_div_23_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtemplate(1, RecepientsComponent_div_23_div_6_div_1_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(2, RecepientsComponent_div_23_div_6_div_2_Template, 2, 0, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r16.workflowObj == null ? null : ctx_r16.workflowObj[ctx_r16.dynamicFieldsObj[\"sms\"]] == null ? null : ctx_r16.workflowObj[ctx_r16.dynamicFieldsObj[\"sms\"]].length) && (ctx_r16.formControls == null ? null : ctx_r16.formControls[ctx_r16.dynamicFieldsObj[\"sms\"]] == null ? null : ctx_r16.formControls[ctx_r16.dynamicFieldsObj[\"sms\"]].errors == null ? null : ctx_r16.formControls[ctx_r16.dynamicFieldsObj[\"sms\"]].errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.formControls == null ? null : ctx_r16.formControls[ctx_r16.dynamicFieldsObj[\"sms\"]] == null ? null : ctx_r16.formControls[ctx_r16.dynamicFieldsObj[\"sms\"]].errors == null ? null : ctx_r16.formControls[ctx_r16.dynamicFieldsObj[\"sms\"]].errors.pattern);\n  }\n}\nfunction RecepientsComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"label\", 5);\n    i0.ɵɵtext(2, \"Phone Number \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 6);\n    i0.ɵɵlistener(\"click\", function RecepientsComponent_div_23_Template_div_click_3_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.onCustomPasteClick(ctx_r23.dynamicFieldsObj[\"sms\"], $event);\n    });\n    i0.ɵɵtemplate(4, RecepientsComponent_div_23_div_4_Template, 4, 1, \"div\", 7);\n    i0.ɵɵelementStart(5, \"input\", 28);\n    i0.ɵɵlistener(\"keyup.enter\", function RecepientsComponent_div_23_Template_input_keyup_enter_5_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.makeList(ctx_r25.dynamicFieldsObj[\"sms\"]);\n    })(\"paste\", function RecepientsComponent_div_23_Template_input_paste_5_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.pasteMakeList(ctx_r26.dynamicFieldsObj[\"sms\"], $event);\n    })(\"keyup.Space\", function RecepientsComponent_div_23_Template_input_keyup_Space_5_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.makeList(ctx_r27.dynamicFieldsObj[\"sms\"]);\n    })(\"blur\", function RecepientsComponent_div_23_Template_input_blur_5_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.makeList(ctx_r28.dynamicFieldsObj[\"sms\"]);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, RecepientsComponent_div_23_div_6_Template, 3, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.workflowObj == null ? null : ctx_r4.workflowObj[ctx_r4.dynamicFieldsObj[\"sms\"]]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControlName\", ctx_r4.dynamicFieldsObj[\"sms\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r4.formControls == null ? null : ctx_r4.formControls[ctx_r4.dynamicFieldsObj[\"sms\"]] == null ? null : ctx_r4.formControls[ctx_r4.dynamicFieldsObj[\"sms\"]].invalid) && ((ctx_r4.formControls == null ? null : ctx_r4.formControls[ctx_r4.dynamicFieldsObj[\"sms\"]] == null ? null : ctx_r4.formControls[ctx_r4.dynamicFieldsObj[\"sms\"]].dirty) || (ctx_r4.formControls == null ? null : ctx_r4.formControls[ctx_r4.dynamicFieldsObj[\"sms\"]] == null ? null : ctx_r4.formControls[ctx_r4.dynamicFieldsObj[\"sms\"]].touched) || ctx_r4.submitted));\n  }\n}\nfunction RecepientsComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\", 23);\n    i0.ɵɵlistener(\"click\", function RecepientsComponent_div_28_Template_span_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r32);\n      const i_r30 = restoredCtx.index;\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.removeData(ctx_r31.dynamicFieldsObj[\"webhooks\"], i_r30);\n    });\n    i0.ɵɵelement(3, \"i\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r29 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r29, \" \");\n  }\n}\nfunction RecepientsComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r33.language[\"This field is required.\"], \" \");\n  }\n}\nfunction RecepientsComponent_div_30_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \" Please enter a valid URL \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RecepientsComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtemplate(1, RecepientsComponent_div_30_div_1_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(2, RecepientsComponent_div_30_div_2_Template, 2, 0, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r6.workflowObj == null ? null : ctx_r6.workflowObj[ctx_r6.dynamicFieldsObj[\"webhooks\"]] == null ? null : ctx_r6.workflowObj[ctx_r6.dynamicFieldsObj[\"webhooks\"]].length) && (ctx_r6.formControls == null ? null : ctx_r6.formControls[ctx_r6.dynamicFieldsObj[\"webhooks\"]] == null ? null : ctx_r6.formControls[ctx_r6.dynamicFieldsObj[\"webhooks\"]].errors == null ? null : ctx_r6.formControls[ctx_r6.dynamicFieldsObj[\"webhooks\"]].errors.required));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.formControls == null ? null : ctx_r6.formControls[ctx_r6.dynamicFieldsObj[\"webhooks\"]] == null ? null : ctx_r6.formControls[ctx_r6.dynamicFieldsObj[\"webhooks\"]].errors == null ? null : ctx_r6.formControls[ctx_r6.dynamicFieldsObj[\"webhooks\"]].errors.pattern);\n  }\n}\nexport let RecepientsComponent = /*#__PURE__*/(() => {\n  class RecepientsComponent {\n    constructor(translateService, dialogService, commonWorkflowService) {\n      this.translateService = translateService;\n      this.dialogService = dialogService;\n      this.commonWorkflowService = commonWorkflowService;\n      this.isFormValid = new EventEmitter();\n      this.dynamicFieldsObj = {};\n      this.errorMessage = 'At least one recipient must be entered';\n      this.phoneRegx = /^\\+[-0-9]*$/;\n      this.showSms = false;\n    }\n    set workflowObj(data) {\n      console.log(data);\n      this._workflowObj = data;\n    }\n    get workflowObj() {\n      return this._workflowObj;\n    }\n    ngOnInit() {\n      var _a;\n      if (((_a = environment.API_BASE_URL) === null || _a === void 0 ? void 0 : _a.indexOf('dev.api.calix.ai')) !== -1) {\n        this.showSms = true;\n      }\n      this.tabSub = this.commonWorkflowService.tabChanged$.subscribe(value => {\n        this.submitted = true;\n      });\n      this.emitFormStatus();\n      this.recepientForm = this.prepareForm();\n      this.addValidators();\n      let that = this;\n      let patchValue = _.pickBy(this.workflowObj, function (value, key) {\n        return key === that.dynamicFieldsObj['emailNotes'];\n      });\n      console.log(patchValue);\n      this.recepientForm.patchValue(patchValue);\n      this.formSub = this.recepientForm.valueChanges.subscribe(value => {\n        this.workflowObj[this.dynamicFieldsObj['emailNotes']] = value[this.dynamicFieldsObj['emailNotes']];\n        this.emitFormStatus();\n      });\n      this.language = this.translateService.defualtLanguage;\n      this.languageSubject = this.translateService.selectedLanguage.subscribe(data => {\n        this.language = data;\n      });\n    }\n    get formControls() {\n      return this.recepientForm.controls;\n    }\n    onCustomPasteClick(key, event) {\n      event.preventDefault();\n      //this.mail_recepients.nativeElement.focus();\n    }\n\n    removeData(key, index) {\n      var _a, _b, _c;\n      (_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a[key]) === null || _b === void 0 ? void 0 : _b.splice(index, 1);\n      this.workflowObj[key] = [...((_c = this.workflowObj) === null || _c === void 0 ? void 0 : _c[key])];\n      // if (!this.workflowObj?.[key]?.length) {\n      //   this.isFormValid.emit(false);\n      // }\n      this.emitFormStatus();\n    }\n    makeList(key, values) {\n      console.log(key);\n      this.validEmail = true;\n      let data = '',\n        newTags = '';\n      if (values) {\n        data = values;\n        newTags = values;\n        this.recepientForm.get(key).setValue('');\n      } else {\n        data = this.recepientForm.get(key).value;\n        newTags = this.recepientForm.get(key).value;\n      }\n      let items = [];\n      newTags = newTags.trim();\n      newTags = newTags.replace(/,/g, ' ');\n      newTags = newTags.replace(/,\\s+/g, ' ');\n      newTags = newTags.replace(/\\n/g, ' ');\n      newTags = newTags.replace(/\\s\\s+/g, ' ');\n      let regex = '';\n      if (key === this.dynamicFieldsObj['emailRecipients']) {\n        regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,20}$/i;\n      } else if (key === this.dynamicFieldsObj['webhooks']) {\n        regex = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\n      } else if (key === this.dynamicFieldsObj['sms']) {\n        regex = this.phoneRegx;\n      }\n      if (newTags === null || newTags === void 0 ? void 0 : newTags.length) {\n        this.recepientForm.get(key).setValue('');\n        Array.prototype.push.apply(items, newTags.split(' '));\n        items = items.filter(el => el);\n        if (items && items.length) {\n          items = this.getUniqueArr(items);\n          let filteredData = [];\n          items.forEach(element => {\n            if (!this.workflowObj[key].includes(element) && regex.test(element === null || element === void 0 ? void 0 : element.trim())) {\n              filteredData.push(element.trim());\n            }\n          });\n          this.workflowObj[key] = [...this.workflowObj[key], ...filteredData];\n          this.emitFormStatus();\n          console.log(this.workflowObj);\n        }\n      } else {\n        if (newTags && newTags != '') {\n          //this.validEmail = false;\n          // this.isFormValid.emit(false);\n          this.emitFormStatus();\n        }\n      }\n      // console.log(items)\n    }\n\n    pasteMakeList(key, event) {\n      event.preventDefault();\n      let clipboardData = event.clipboardData || window.clipboardData;\n      let values = clipboardData.getData('text');\n      this.makeList(key, values);\n    }\n    getUniqueArr(arr = []) {\n      var uniqueNames = [];\n      $.each(arr, function (i, el) {\n        if ($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);\n      });\n      return uniqueNames;\n    }\n    clearSearch() {\n      // const formControls =\n      //   this.workFlowScheduleData?.workFlowScheduleForm?.controls;\n      // formControls['emailNotes']?.setValue('');\n    }\n    validateEmail(text) {\n      var EMAIL_REGEXP = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,20}$/i;\n      return text && EMAIL_REGEXP.test(text);\n    }\n    prepareForm() {\n      var _a;\n      const group = {};\n      (_a = this.dynamicFields) === null || _a === void 0 ? void 0 : _a.forEach(field => {\n        group[field.key] = field.required ? new FormControl('') : new FormControl();\n      });\n      return new FormGroup(group);\n    }\n    ngOnDestroy() {\n      var _a, _b;\n      (_a = this.formSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      (_b = this.tabSub) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n    }\n    addValidators() {\n      var _a, _b, _c;\n      (_a = this.recepientForm.controls[this.dynamicFieldsObj['emailRecipients']]) === null || _a === void 0 ? void 0 : _a.addValidators([emailValidator.bind(this)]);\n      const urlRegex = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/;\n      (_b = this.recepientForm.controls[this.dynamicFieldsObj['webhooks']]) === null || _b === void 0 ? void 0 : _b.addValidators([Validators.pattern(urlRegex)]);\n      (_c = this.recepientForm.controls[this.dynamicFieldsObj['sms']]) === null || _c === void 0 ? void 0 : _c.addValidators([Validators.pattern(this.phoneRegx)]);\n    }\n    emitFormStatus() {\n      var _a, _b, _c, _d, _e, _f;\n      if (((_b = (_a = this.workflowObj) === null || _a === void 0 ? void 0 : _a[this.dynamicFieldsObj['emailRecipients']]) === null || _b === void 0 ? void 0 : _b.length) || ((_d = (_c = this.workflowObj) === null || _c === void 0 ? void 0 : _c[this.dynamicFieldsObj['sms']]) === null || _d === void 0 ? void 0 : _d.length) || ((_f = (_e = this.workflowObj) === null || _e === void 0 ? void 0 : _e[this.dynamicFieldsObj['webhooks']]) === null || _f === void 0 ? void 0 : _f.length)) {\n        this.isFormValid.emit(true);\n        this.errorMessage = '';\n      } else {\n        this.isFormValid.emit(false);\n        this.errorMessage = 'At least one recipient must be entered';\n      }\n    }\n  }\n  RecepientsComponent.ɵfac = function RecepientsComponent_Factory(t) {\n    return new (t || RecepientsComponent)(i0.ɵɵdirectiveInject(i1.TranslateService), i0.ɵɵdirectiveInject(i2.NgbModal), i0.ɵɵdirectiveInject(i3.CommonWorkflowService));\n  };\n  RecepientsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RecepientsComponent,\n    selectors: [[\"app-recepients\"]],\n    viewQuery: function RecepientsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.mail_recepients = _t.first);\n      }\n    },\n    inputs: {\n      dynamicFields: \"dynamicFields\",\n      dynamicFieldsObj: \"dynamicFieldsObj\",\n      workflowObj: \"workflowObj\"\n    },\n    outputs: {\n      isFormValid: \"isFormValid\"\n    },\n    decls: 31,\n    vars: 14,\n    consts: [[\"class\", \"w-100 alert alert-danger fade show my-3\", 4, \"ngIf\"], [1, \"row\", 3, \"formGroup\"], [1, \"col-md-6\"], [1, \"cco-secondary-title\", \"border-bottom\", \"pb-2\"], [1, \"form-group\", \"mt-3\"], [\"for\", \"recipients\"], [1, \"custom-paste-input\", 3, \"click\"], [\"class\", \"custom-paste-list\", 4, \"ngFor\", \"ngForOf\"], [\"autocomplete\", \"off\", \"id\", \"mail_recepients\", \"name\", \"emailRecipients\", \"type\", \"text\", \"aria-required\", \"true\", \"aria-describedby\", \"mail_recepients-error\", 1, \"w-100\", 3, \"formControlName\", \"placeholder\", \"keyup.enter\", \"paste\", \"keyup.Space\", \"blur\"], [\"mail_recepients\", \"\"], [\"class\", \"errorMessage\", 4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"emailNotes\"], [\"placeholder\", \"Add a note\", \"minlength\", \"0\", \"maxlength\", \"200\", \"id\", \"emailNotes\", \"rows\", \"3\", 1, \"form-control\", 2, \"border-radius\", \"22px 22px 2px 22px\", 3, \"formControlName\"], [1, \"text-right\"], [\"class\", \"form-group mt-3\", 4, \"ngIf\"], [\"autocomplete\", \"off\", \"name\", \"webhooks\", \"type\", \"text\", \"placeholder\", \"Add webhook URL(s)\", 1, \"w-100\", 3, \"formControlName\", \"keyup.enter\", \"paste\", \"keyup.Space\", \"blur\"], [1, \"w-100\", \"alert\", \"alert-danger\", \"fade\", \"show\", \"my-3\"], [1, \"error-img\"], [\"src\", \"./assets/img/ic_error-36px.svg\"], [\"type\", \"button\", 1, \"close\", 3, \"click\"], [1, \"d-inline-flex\", 3, \"innerHtml\"], [1, \"custom-paste-list\"], [\"data-key\", \"\", 1, \"remove-input-btn\", \"primary\", 3, \"click\"], [1, \"fa\", \"fa-times\"], [1, \"errorMessage\"], [\"class\", \"mt-1\", 4, \"ngIf\"], [1, \"mt-1\"], [\"autocomplete\", \"off\", \"name\", \"sms\", \"type\", \"text\", \"placeholder\", \"Add phone number(s) (for example: +9999999999)\", 1, \"w-100\", 3, \"formControlName\", \"keyup.enter\", \"paste\", \"keyup.Space\", \"blur\"]],\n    template: function RecepientsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\");\n        i0.ɵɵtemplate(1, RecepientsComponent_div_1_Template, 6, 1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtext(5, \"Send Notifications To\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"label\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵlistener(\"click\", function RecepientsComponent_Template_div_click_9_listener($event) {\n          return ctx.onCustomPasteClick(ctx.dynamicFieldsObj[\"emailRecipients\"], $event);\n        });\n        i0.ɵɵtemplate(10, RecepientsComponent_div_10_Template, 4, 1, \"div\", 7);\n        i0.ɵɵelementStart(11, \"input\", 8, 9);\n        i0.ɵɵlistener(\"keyup.enter\", function RecepientsComponent_Template_input_keyup_enter_11_listener() {\n          return ctx.makeList(ctx.dynamicFieldsObj[\"emailRecipients\"]);\n        })(\"paste\", function RecepientsComponent_Template_input_paste_11_listener($event) {\n          return ctx.pasteMakeList(ctx.dynamicFieldsObj[\"emailRecipients\"], $event);\n        })(\"keyup.Space\", function RecepientsComponent_Template_input_keyup_Space_11_listener() {\n          return ctx.makeList(ctx.dynamicFieldsObj[\"emailRecipients\"]);\n        })(\"blur\", function RecepientsComponent_Template_input_blur_11_listener() {\n          return ctx.makeList(ctx.dynamicFieldsObj[\"emailRecipients\"]);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, RecepientsComponent_div_13_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelementStart(15, \"label\", 12);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"textarea\", 13);\n        i0.ɵɵelementStart(18, \"div\", 14);\n        i0.ɵɵelementStart(19, \"span\");\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"span\");\n        i0.ɵɵtext(22, \"/200\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, RecepientsComponent_div_23_Template, 7, 3, \"div\", 15);\n        i0.ɵɵelementStart(24, \"div\", 4);\n        i0.ɵɵelementStart(25, \"label\", 5);\n        i0.ɵɵtext(26, \"Webhook \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 6);\n        i0.ɵɵlistener(\"click\", function RecepientsComponent_Template_div_click_27_listener($event) {\n          return ctx.onCustomPasteClick(ctx.dynamicFieldsObj[\"webhooks\"], $event);\n        });\n        i0.ɵɵtemplate(28, RecepientsComponent_div_28_Template, 4, 1, \"div\", 7);\n        i0.ɵɵelementStart(29, \"input\", 16);\n        i0.ɵɵlistener(\"keyup.enter\", function RecepientsComponent_Template_input_keyup_enter_29_listener() {\n          return ctx.makeList(ctx.dynamicFieldsObj[\"webhooks\"]);\n        })(\"paste\", function RecepientsComponent_Template_input_paste_29_listener($event) {\n          return ctx.pasteMakeList(ctx.dynamicFieldsObj[\"webhooks\"], $event);\n        })(\"keyup.Space\", function RecepientsComponent_Template_input_keyup_Space_29_listener() {\n          return ctx.makeList(ctx.dynamicFieldsObj[\"webhooks\"]);\n        })(\"blur\", function RecepientsComponent_Template_input_blur_29_listener() {\n          return ctx.makeList(ctx.dynamicFieldsObj[\"webhooks\"]);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(30, RecepientsComponent_div_30_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage && ctx.submitted);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.recepientForm);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\"\", ctx.language.Email, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.workflowObj == null ? null : ctx.workflowObj[ctx.dynamicFieldsObj[\"emailRecipients\"]]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", ctx.language[\"Add email address(es)\"]);\n        i0.ɵɵproperty(\"formControlName\", ctx.dynamicFieldsObj[\"emailRecipients\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ((ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]].invalid) || (ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]].errors == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]].errors.invalidEmail)) && ((ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]].dirty) || (ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"emailRecipients\"]].touched) || ctx.submitted));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.language[\"Email Notes\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControlName\", ctx.dynamicFieldsObj[\"emailNotes\"]);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate((ctx.recepientForm.get(ctx.dynamicFieldsObj[\"emailNotes\"]).value == null ? null : ctx.recepientForm.get(ctx.dynamicFieldsObj[\"emailNotes\"]).value.length) ? ctx.recepientForm.get(ctx.dynamicFieldsObj[\"emailNotes\"]).value == null ? null : ctx.recepientForm.get(ctx.dynamicFieldsObj[\"emailNotes\"]).value.length : 0);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.showSms);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.workflowObj == null ? null : ctx.workflowObj[ctx.dynamicFieldsObj[\"webhooks\"]]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControlName\", ctx.dynamicFieldsObj[\"webhooks\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"webhooks\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"webhooks\"]].invalid) && ((ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"webhooks\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"webhooks\"]].dirty) || (ctx.formControls == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"webhooks\"]] == null ? null : ctx.formControls[ctx.dynamicFieldsObj[\"webhooks\"]].touched) || ctx.submitted));\n      }\n    },\n    directives: [i4.NgIf, i5.NgControlStatusGroup, i5.FormGroupDirective, i4.NgForOf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.FormControlName, i5.MinLengthValidator, i5.MaxLengthValidator],\n    styles: [\".heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px;margin-bottom:16px}.info-text[_ngcontent-%COMP%]{font-size:16px;font-style:normal;font-weight:400;line-height:20px;letter-spacing:0em;text-align:left}.info-text[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:600!important}.exclusions-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.exclusions-item[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:3%}.exclusions-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.exclusions-item[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{width:80px!important}.exclusions-item[_ngcontent-%COMP%]   .p-calendar[_ngcontent-%COMP%]{width:80%!important}.exclusions-item[_ngcontent-%COMP%] + .exclusions-item[_ngcontent-%COMP%]{text-align:center}.mail-tags[_ngcontent-%COMP%]{border:1px solid transparent;background-color:#f8f8fa;min-height:89px!important;border-radius:12px 22px 2px}.mail-tags[_ngcontent-%COMP%]     .ng2-tag-input__text-input{border:1px solid transparent;background-color:#f8f8fa}.mail-tags[_ngcontent-%COMP%]     .ng2-tag-input--focused{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40;border:none!important}.mail-tags[_ngcontent-%COMP%]     .ng2-tag-input__text-input:focus{background-color:transparent}.mail-tags[_ngcontent-%COMP%]     tag{background-color:#ebeaef!important;margin-left:10px!important;border-radius:5px!important}.mail-tags[_ngcontent-%COMP%]     .ng2-tag-input{border:unset;min-height:89px!important}.schedule-container[_ngcontent-%COMP%]{display:flex}.schedule-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-left:10px}.schedule-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 28%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.week-container[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{width:35px;height:35px;color:#4c4c4c;background-color:#f8f8fa;text-align:center;line-height:35px;border-radius:50%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]   .select-day[_ngcontent-%COMP%]{width:35px;height:35px;color:#fff;background-color:#0279ff;text-align:center;line-height:35px;border-radius:50%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]   .week-circle[_ngcontent-%COMP%]{padding:4px}.month-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.month-container[_ngcontent-%COMP%]   .month-info[_ngcontent-%COMP%] + .month-info[_ngcontent-%COMP%]{margin-left:10px}.month-container[_ngcontent-%COMP%]   .month-info[_ngcontent-%COMP%]{flex:0 28%;margin-bottom:2%}.diable-div[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.timezone[_ngcontent-%COMP%]{width:205px}  .p-component::-webkit-input-placeholder{opacity:.6}.custom-paste-input[_ngcontent-%COMP%]{width:100%;min-height:86px;max-height:100px;line-height:inherit;border-radius:16px 16px 0!important;background:#f8f8fa;padding:0 15px;font-size:14px;font-weight:400;color:#646363;border:1px solid transparent;cursor:text;display:flex;flex-direction:row;flex-wrap:wrap;overflow:auto}.custom-paste-input[_ngcontent-%COMP%]   .custom-paste-list[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:29px;padding:3px 2px 0;font-size:14px;background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;margin:3px}.custom-paste-input[_ngcontent-%COMP%]   .custom-paste-list[_ngcontent-%COMP%]   .remove-input-btn[_ngcontent-%COMP%]{color:#7e8c94;float:right;margin-right:5px;margin-left:5px;cursor:pointer}.custom-paste-input[_ngcontent-%COMP%]   .custom-paste-list[_ngcontent-%COMP%]   .remove-input-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7e8c94}.custom-paste-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:29px!important;background:#f8f8fa;width:-moz-fit-content;width:fit-content;border:none}.custom-paste-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none!important}.note-clear[_ngcontent-%COMP%]{padding:10px 0 0 16px}.width-100[_ngcontent-%COMP%]{max-width:110px}.clear-div[_ngcontent-%COMP%]{padding-left:20px}.form-check-input[_ngcontent-%COMP%]{cursor:pointer}.privacymodal[_ngcontent-%COMP%]{padding:40px 64px}\"]\n  });\n  return RecepientsComponent;\n})();\nexport function emailValidator(control) {\n  if (!(control === null || control === void 0 ? void 0 : control.value)) {\n    return null;\n  }\n  if (!this.validateEmail(control.value)) {\n    return {\n      'invalidEmail': true\n    };\n  }\n  return null;\n}","map":null,"metadata":{},"sourceType":"module"}