"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[8851],{58851:function(e,t,a){a.r(t),a.d(t,{AlarmsModule:function(){return N}});var i=a(38583),s=a(39895),n=a(79765),l=a(37716),r=a(7450),o=a(38048);function c(e,t){if(1&e&&(l.TgZ(0,"div",6),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.hij(" ",e.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function g(e,t){if(1&e&&(l.TgZ(0,"li",10),l.TgZ(1,"a",11),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Oqu(e.language["Transform Alarm Rules"])}}function d(e,t){if(1&e&&(l.TgZ(0,"li",10),l.TgZ(1,"a",12),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Oqu(e.language["Alarm & Health Notifications"])}}function u(e,t){if(1&e&&(l.TgZ(0,"li",10),l.TgZ(1,"a",13),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Oqu(e.language["Alarm Settings"])}}function h(e,t){if(1&e&&(l.TgZ(0,"div",7),l.TgZ(1,"ul",8),l.YNc(2,g,3,1,"li",9),l.YNc(3,d,3,1,"li",9),l.YNc(4,u,3,1,"li",9),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.Q6J("ngIf",e.menus.transformalarmrules),l.xp6(1),l.Q6J("ngIf",e.menus.alarmsandhealthnotifications),l.xp6(1),l.Q6J("ngIf",e.menus.alarmsettings)}}let m=(()=>{class e{constructor(e,t,a){this.translateService=e,this.router=t,this.sso=a,this.menus={transformalarmrules:!1,alarmsandhealthnotifications:!1,alarmsettings:!1},this.hasPageAccess=!0,this.toggled=new n.xQ,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){var e,t;let a=this.sso.getScopes();a["cloud.rbac.coc.operations.alarms"]?null===(e=Object.keys(this.menus))||void 0===e||e.forEach(e=>{this.menus[e]=!0}):null===(t=Object.keys(this.menus))||void 0===t||t.forEach(e=>{this.menus[e]=a[`cloud.rbac.coc.operations.alarms.${e}`]}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.pageAcceesObs=this.sso.hasPageAccess$.subscribe(e=>{this.hasPageAccess=!!e.access})}ngOnDestroy(){var e,t;null===(e=this.pageAcceesObs)||void 0===e||e.unsubscribe(),null===(t=this.languageSubject)||void 0===t||t.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.s),l.Y36(s.F0),l.Y36(o.t6))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-alarms"]],decls:7,vars:4,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],[3,"hidden"],[1,"container","mp-0"],[1,"row","mm-0"],["class","col-12 col-md-2 pl-0 mpr-0",4,"ngIf"],[1,"col-12","col-md-10","padl","mp-0","mmt-3","pr-0","position-relative",3,"hidden"],["role","alert",1,"alert","alert-warning"],[1,"col-12","col-md-2","pl-0","mpr-0"],["id","netops-list-menu",1,"nav","flex-column","left-menu","tab-view-style","mbr-none"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/cco/operations/alarms/transform-alarm-rules","routerLinkActive","active","id","CcoAlarms-TransformAlarmRules",1,"list-group-item","list-group-item-action"],["routerLink","/cco/operations/alarms/health-alarm-notifications","routerLinkActive","active","id","CcoAlarms-Alarm-HealthNotifications",1,"list-group-item","list-group-item-action"],["routerLink","/cco/operations/alarms/settings","routerLinkActive","active","id","CcoAlarms-Alarm-Settings",1,"list-group-item","list-group-item-action"]],template:function(e,t){1&e&&(l.YNc(0,c,2,1,"div",0),l.TgZ(1,"section",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.YNc(4,h,5,3,"div",4),l.TgZ(5,"div",5),l._UZ(6,"router-outlet"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("ngIf",!t.hasPageAccess),l.xp6(1),l.Q6J("hidden",!t.hasPageAccess),l.xp6(3),l.Q6J("ngIf",t.hasPageAccess),l.xp6(1),l.Q6J("hidden",!t.hasPageAccess))},directives:[i.O5,s.lC,s.yS,s.Od],styles:[""]}),e})();var p=a(11060),v=a(92340),A=a(23771),f=a(91841),C=a(49342),b=a(39075),Z=a(86640),x=a(3679);function y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",28),l.TgZ(1,"span",29),l._UZ(2,"img",30),l.qZA(),l.TgZ(3,"span",31),l._uU(4),l.TgZ(5,"b"),l._uU(6),l.qZA(),l._uU(7,"? "),l.qZA(),l.TgZ(8,"div",32),l.TgZ(9,"button",33),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).deletePerceivedSeverity()}),l._uU(10),l.qZA(),l.TgZ(11,"button",34),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).closeModal()}),l._uU(12),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(4),l.hij(" ",e.language["Are you sure you want to delete Custom Alarm"]," "),l.xp6(2),l.Oqu(e.modalInfo),l.xp6(3),l.Q6J("disabled",e.btnDisabled),l.xp6(1),l.hij(" ",e.language.Confirm," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function _(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",35),l.TgZ(1,"span",29),l._UZ(2,"img",36),l.qZA(),l.TgZ(3,"button",37),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).errorInfo=""}),l._UZ(4,"span"),l.qZA(),l._UZ(5,"div",38),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(5),l.Q6J("innerHtml",e.errorInfo,l.oJD)}}function O(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",39),l.TgZ(1,"div",40),l.TgZ(2,"span",41),l._UZ(3,"img",42),l.qZA(),l._UZ(4,"div",43),l.TgZ(5,"button",37),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).successInfo=""}),l._UZ(6,"span"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(4),l.Q6J("innerHtml",e.successInfo,l.oJD)}}function T(e,t){if(1&e&&(l.TgZ(0,"div",44),l.TgZ(1,"div",21),l.TgZ(2,"div",45),l.TgZ(3,"div",46),l.TgZ(4,"div",47),l.TgZ(5,"span",48),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(6),l.Oqu(e.language.Loading)}}const w=function(e){return{cursornallow:e}},q=function(e){return{"diable-div":e}};function M(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",1),l.TgZ(6,"div",50),l.TgZ(7,"ng-select",51),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.severity=t})("change",function(t){const a=l.CHM(e).$implicit;return l.oxw(3).changeAlarmSeverity(t,a)}),l.TgZ(8,"ng-option",15),l._uU(9),l.qZA(),l.TgZ(10,"ng-option",16),l._uU(11),l.qZA(),l.TgZ(12,"ng-option",17),l._uU(13),l.qZA(),l.TgZ(14,"ng-option",18),l._uU(15),l.qZA(),l.TgZ(16,"ng-option",19),l._uU(17),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"td",1),l.TgZ(19,"div",1),l.TgZ(20,"span",52),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(3).changeVisibility(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"td",53),l.TgZ(22,"i",54),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(3).delete(t)}),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,a=l.oxw(3);l.xp6(2),l.hij(" ",e.alarm_name," "),l.xp6(2),l.hij(" ","CRITICAL"==(null==e||null==e.dispOriginalSeverity?null:e.dispOriginalSeverity.toUpperCase())||"MAJOR"==(null==e||null==e.dispOriginalSeverity?null:e.dispOriginalSeverity.toUpperCase())||"MINOR"==(null==e||null==e.dispOriginalSeverity?null:e.dispOriginalSeverity.toUpperCase())?a.language[null==e.dispOriginalSeverity?null:e.dispOriginalSeverity.toLowerCase()]:a.language[e.dispOriginalSeverity]||""," "),l.xp6(1),l.Q6J("ngClass",l.VKq(18,w,!a.hasWriteAccess)),l.xp6(1),l.Q6J("ngClass",l.VKq(20,q,!a.hasWriteAccess)),l.xp6(1),l.s9C("placeholder",a.language.Severity),l.Q6J("searchable",!1)("ngClass",a.colorClass[e.severity_class])("ngModel",e.severity)("clearable",!1),l.xp6(2),l.Oqu(a.language.critical),l.xp6(2),l.Oqu(a.language.major),l.xp6(2),l.Oqu(a.language.minor),l.xp6(2),l.Oqu(a.language.Warning),l.xp6(2),l.Oqu(a.language.Info),l.xp6(1),l.Q6J("ngClass",l.VKq(22,w,!a.hasWriteAccess)),l.xp6(1),l.Q6J("ngClass",l.VKq(24,q,!a.hasWriteAccess)),l.xp6(1),l.Q6J("ngClass",1==e.visibility?"password_view_blue":"password_hide"),l.xp6(2),l.s9C("title",a.language.Delete)}}function S(e,t){if(1&e&&(l.TgZ(0,"tbody"),l.YNc(1,M,23,26,"tr",49),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",null==e.opsCloudAlarms?null:e.opsCloudAlarms.customAlarmsData)}}function P(e,t){if(1&e&&(l.TgZ(0,"tbody"),l.TgZ(1,"tr"),l.TgZ(2,"td",55),l._uU(3),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(3),l.hij(" ",e.language["No data available in table"]," ")}}const U=function(e){return{"blur-bg":e}};function I(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section",1),l.TgZ(1,"div",2),l.YNc(2,y,13,5,"div",3),l.YNc(3,_,6,1,"div",4),l.YNc(4,O,7,1,"div",5),l.qZA(),l.TgZ(5,"div",6),l.TgZ(6,"div",7),l.TgZ(7,"div",8),l.TgZ(8,"ng-select",9),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().opsCloudAlarms.searchedAlarm=t})("change",function(t){return l.CHM(e),l.oxw().searchAlarmsFromMaster(t)}),l.qZA(),l.TgZ(9,"span",10),l.NdJ("click",function(){return l.CHM(e),l.oxw().clearAlarmFilter("")}),l._uU(10,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",11),l.TgZ(12,"div",12),l.TgZ(13,"ng-select",13),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().opsCloudAlarms.searchSeverity=t})("change",function(t){return l.CHM(e),l.oxw().searchCustomAlarms(t)}),l.TgZ(14,"ng-option",14),l._uU(15),l.qZA(),l.TgZ(16,"ng-option",15),l._uU(17),l.qZA(),l.TgZ(18,"ng-option",16),l._uU(19),l.qZA(),l.TgZ(20,"ng-option",17),l._uU(21),l.qZA(),l.TgZ(22,"ng-option",18),l._uU(23),l.qZA(),l.TgZ(24,"ng-option",19),l._uU(25),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"div",20),l.TgZ(27,"div",21),l.TgZ(28,"div",22),l.YNc(29,T,7,1,"div",23),l.TgZ(30,"div",24),l.TgZ(31,"table",25),l.TgZ(32,"thead"),l.TgZ(33,"tr"),l.TgZ(34,"th"),l._uU(35),l.qZA(),l.TgZ(36,"th"),l._uU(37),l.qZA(),l.TgZ(38,"th"),l._uU(39),l.qZA(),l.TgZ(40,"th",26),l._uU(41),l.qZA(),l.TgZ(42,"th"),l._uU(43),l.qZA(),l.qZA(),l.qZA(),l.YNc(44,S,2,1,"tbody",27),l.YNc(45,P,4,1,"tbody",27),l._UZ(46,"tbody"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.Q6J("ngClass",l.VKq(31,U,1==e.loading)),l.xp6(2),l.Q6J("ngIf",e.deletedata),l.xp6(1),l.Q6J("ngIf",e.errorInfo),l.xp6(1),l.Q6J("ngIf",e.successInfo),l.xp6(4),l.s9C("placeholder",e.language["Search alarms"]||"Search alarms"),l.Q6J("ngModel",e.opsCloudAlarms.searchedAlarm)("items",null==e.opsCloudAlarms?null:e.opsCloudAlarms.alarmsData)("clearable",!1),l.xp6(1),l.Q6J("ngClass",e.showcloseicon?"show-close-search":"hide-close-search"),l.xp6(4),l.s9C("placeholder",e.language["Search Severity"]||"Search Severity"),l.Q6J("searchable",!1)("clearable",!1)("ngModel",e.opsCloudAlarms.searchSeverity)("clearable",!1),l.xp6(2),l.Oqu(e.language["All Severities"]||"All Severities"),l.xp6(2),l.Oqu(e.language.critical),l.xp6(2),l.Oqu(e.language.major),l.xp6(2),l.Oqu(e.language.minor),l.xp6(2),l.Oqu(e.language.Warning),l.xp6(2),l.Oqu(e.language.Info),l.xp6(4),l.Q6J("ngIf",e.loading),l.xp6(1),l.Q6J("hidden",!e.dataAvailable),l.xp6(1),l.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),l.xp6(4),l.hij("",e.language.Name," "),l.xp6(2),l.hij("",e.language["Original Severity"]," "),l.xp6(2),l.hij("",e.language.Severity," "),l.xp6(2),l.Oqu(e.language["Visibility in Real-Time List"]),l.xp6(2),l.Oqu(e.language.Action),l.xp6(1),l.Q6J("ngIf",(null==e.opsCloudAlarms||null==e.opsCloudAlarms.customAlarmsData?null:e.opsCloudAlarms.customAlarmsData.length)>0),l.xp6(1),l.Q6J("ngIf",0===(null==e.opsCloudAlarms||null==e.opsCloudAlarms.customAlarmsData?null:e.opsCloudAlarms.customAlarmsData.length))}}const D=[{path:"",component:m,children:[{path:"transform-alarm-rules",component:p.M},{path:"health-alarm-notifications",loadChildren:()=>Promise.all([a.e(5835),a.e(5634),a.e(9642),a.e(8686)]).then(a.bind(a,38686)).then(e=>e.CcoAlarmNotificationsModule)},{path:"settings",component:(()=>{class e{constructor(e,t,a,i,s,l,r){this.translateService=e,this.http=t,this.commonOrgService=a,this.service=i,this.titleService=s,this.router=l,this.document=r,this.baseUrl=`${v.N.API_BASE_URL}analytics-engine/`,this.renderedOnce=!0,this.isDev=!1,this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,paging:!0,processing:!1,dom:"tipr",autoWidth:!1,columnDefs:[{targets:[0],orderable:!0,width:"30%"},{targets:[1],width:"20%",orderable:!0},{targets:[2],width:"20%",orderable:!0},{targets:[3],width:"20%",orderable:!1},{targets:[4],width:"10%",orderable:!1}],order:[0,"asc"]},this.dtTrigger=new n.xQ,this.opsCloudAlarms={alarmsData:[],searchedAlarm:void 0,searchedAlarmName:void 0,searchSeverity:"allseverities",customAlarmsData:[],customBackupAlarmsData:[]},this.loading=!1,this.errorInfo="",this.successInfo="",this.colorClass={MINOR:"minor-select-inp",MAJOR:"major-select-inp",CRITICAL:"critical-select-inp",WARNING:"warning-select-inp",INFO:"severity-info-select-inp"},this.severityList=[{name:"Critical",value:"critical"},{name:"Major",value:"major"},{name:"Minor",value:"minor"},{name:"Warning",value:"warning"},{name:"Info",value:"info"}],this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.germanTable=this.translateService.de_DE}ngOnInit(){var e,t;let a=this.service.getScopes();(null===(e=null==a?void 0:a["cloud.rbac.coc.operations.alarms.alarmsettings"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),-1!==(null===(t=null==a?void 0:a["cloud.rbac.coc.operations.alarms.alarmsettings"])||void 0===t?void 0:t.indexOf("write"))?this.hasWriteAccess=!0:this.dtOptions.columnDefs[4].visible=!1,-1!==v.N.API_BASE_URL.indexOf("dev.api.calix.ai")&&(this.isDev=!0),this.hasScopeAccess?(this.language=this.translateService.defualtLanguage,this.service.getRedirectModule(this.router.url),this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.loading=!0,this.language=e,this.titleService.setTitle(`${this.language["Alarm Settings"]} - ${this.language.Alarms} - ${this.language.Operations} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`),this.tableLanguageOptions(),setTimeout(()=>{this.rerender(!0)},200)}),this.titleService.setTitle(`${this.language["Alarm Settings"]} - ${this.language.Alarms} - ${this.language.Operations} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`),this.renderedOnce=!0,this.tableLanguageOptions(),this.getAlarmListData()):this.service.setPageAccess(!1)}rerender(e){var t,a;null===(a=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===a||a.then(e=>{e.destroy(),this.dtTrigger.next()}),this.loading=!1}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:this.language&&this.language.fileLanguage&&"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.germanTable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}renderTable(e){e?this.rerender():this.dtTrigger.next(),setTimeout(()=>{this.dataAvailable=!0,this.loading=!0,this.searchCustomAlarms(this.opsCloudAlarms.searchSeverity),this.searchAlarmsFromMaster({alarm_name:this.opsCloudAlarms.searchedAlarmName?this.opsCloudAlarms.searchedAlarmName:""}),this.loading=!1},500)}getAlarmListData(){this.loading=!0,this.http.get(`${this.baseUrl}alarmMasterDetails`).subscribe(e=>{let t=[];e&&e.length>0&&(e.forEach(e=>{var a,i,s,n,l,r;e.alarm_name=e.name?e.name:"",e.alarm_category=e.category?e.category:"",e.severity_class=e.perceivedSeverity?null===(a=e.perceivedSeverity)||void 0===a?void 0:a.toUpperCase():"",e.severity=e.perceivedSeverity?null===(i=e.perceivedSeverity)||void 0===i?void 0:i.toLowerCase():"",e.originalseverity=e.perceivedSeverity?null===(s=e.perceivedSeverity)||void 0===s?void 0:s.toUpperCase():"",e.dispOriginalSeverity=e.perceivedSeverity?(null===(n=e.perceivedSeverity)||void 0===n?void 0:n.charAt(0).toUpperCase())+(null===(r=null===(l=e.perceivedSeverity)||void 0===l?void 0:l.slice(1))||void 0===r?void 0:r.toLowerCase()):"",e.alarm_id=e.id?e.id:"",e.visibility=!0,t.push(e)}),t.sort((e,t)=>(e.alarm_name||"").toString().localeCompare((t.alarm_name||"").toString(),"en",{numeric:!1}))),this.opsCloudAlarms.alarmsData=[...t],this.getCustomAlarmListData()},e=>{this.getCustomAlarmListData(),this.loading=!1,this.error=!0,this.pageErrorHandle(e)})}getCustomAlarmListData(e){this.loading=!0,this.opsCloudAlarms.customAlarmsData=[],this.http.get(`${this.baseUrl}customAlarms`).subscribe(t=>{let a=[];t&&t.length>0&&t.forEach(e=>{var t,i,s,n,l;if(this.opsCloudAlarms.alarmsData&&this.opsCloudAlarms.alarmsData.length>0){let t=this.opsCloudAlarms.alarmsData.find(t=>t.alarm_name==e.alarmName);t&&(e.originalseverity=t.perceivedSeverity?t.perceivedSeverity:e.originalseverity)}e.alarm_name=e.alarmName?e.alarmName:"",e.alarm_id=e.alarmCustomId?e.alarmCustomId:"",e.severity_class=e.severity?null===(t=e.severity)||void 0===t?void 0:t.toUpperCase():"",e.severity=e.severity?null===(i=e.severity)||void 0===i?void 0:i.toLowerCase():"",e.dispOriginalSeverity=e.originalseverity?(null===(s=e.originalseverity)||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===(l=null===(n=e.originalseverity)||void 0===n?void 0:n.slice(1))||void 0===l?void 0:l.toLowerCase()):"",a.push(e)}),this.opsCloudAlarms.customAlarmsData=[...a],this.opsCloudAlarms.customBackupAlarmsData=[...a],this.loading=!1,setTimeout(()=>{this.renderTable(!!e)},200)},e=>{this.loading=!1,this.error=!0,this.renderTable(!1),this.pageErrorHandle(e)})}clearAlarmFilter(e){this.opsCloudAlarms.searchedAlarm=void 0,this.searchAlarmsFromMaster(e)}searchAlarmsFromMaster(e){var t;if(this.loading=!0,this.showcloseicon=!!(e&&(null===(t=null==e?void 0:e.alarm_name)||void 0===t?void 0:t.length)>0),e&&""!=(null==e?void 0:e.alarm_name)&&-1==this.opsCloudAlarms.customAlarmsData.findIndex(t=>{var a,i;return(null===(a=t.alarm_name)||void 0===a?void 0:a.toUpperCase())==(null===(i=null==e?void 0:e.alarm_name)||void 0===i?void 0:i.toUpperCase())})){(null==e?void 0:e.alarm_id)||(e=this.opsCloudAlarms.alarmsData.find(t=>{var a,i;return(null===(a=t.alarm_name)||void 0===a?void 0:a.toUpperCase())==(null===(i=null==e?void 0:e.alarm_name)||void 0===i?void 0:i.toUpperCase())}));let t=[...this.opsCloudAlarms.customAlarmsData];t.push(Object.assign({},e)),this.opsCloudAlarms.customAlarmsData=[...t],this.loading=!1,this.renderTable(!0)}setTimeout(()=>{var t,a;this.opsCloudAlarms.searchedAlarmName=e&&e.alarm_name?e.alarm_name:"",null===(a=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===a||a.then(e=>{e.columns(0).search(this.opsCloudAlarms.searchedAlarmName).draw()}),this.loading=!1},200)}searchCustomAlarms(e){var t,a,i;let s;this.loading=!0,e&&e.length>0&&"allseverities"!=e&&(s=e.charAt(0).toUpperCase()+(null===(t=e.slice(1))||void 0===t?void 0:t.toLowerCase())),e&&"allseverities"==e&&(s=""),null===(i=null===(a=this.dtElement)||void 0===a?void 0:a.dtInstance)||void 0===i||i.then(e=>{e.columns(2).search(s).draw()}),this.loading=!1}changeAlarmSeverity(e,t){this.loading=!0;let a=null==e?void 0:e.toUpperCase(),i="";i=`${this.baseUrl}customAlarm/${null==t?void 0:t.alarm_name}/customization?newPerceivedSeverity=${a}&originalSeverity=${null==t?void 0:t.originalseverity}`,this.http.put(i,{},{responseType:"text"}).subscribe(e=>{this.loading=!1,this.success=!0,this.successInfo=this.language["Updated Successfully"],setTimeout(()=>{this.success=!1,this.successInfo=""},4e3),this.getCustomAlarmListData(!0)},e=>{this.error=!0,this.loading=!1,this.pageErrorHandle(e)})}changeVisibility(e){var t;this.loading=!0;let a="";a=`${this.baseUrl}updateCustomAlarmVisibility/${null==e?void 0:e.alarm_name}?isVisible=${!e.visibility}&severity=${null===(t=null==e?void 0:e.severity)||void 0===t?void 0:t.toUpperCase()}&originalSeverity=${null==e?void 0:e.originalseverity}`,this.http.put(a,{},{responseType:"text"}).subscribe(e=>{this.success=!0,this.successInfo=this.language["Updated Successfully"],setTimeout(()=>{this.success=!1,this.successInfo=""},4e3),this.getCustomAlarmListData(!0)},e=>{this.error=!0,this.loading=!1,this.pageErrorHandle(e)})}deletePerceivedSeverity(){var e,t,a,i;this.error=!1,this.success=!1,this.errorInfo=void 0,this.successInfo=void 0,this.btnDisabled=!0,this.loading=!0,this.http.delete(`${this.baseUrl}customAlarm/${null===(e=this.deletedata)||void 0===e?void 0:e.alarm_name}/customization?newPerceivedSeverity=${null===(a=null===(t=this.deletedata)||void 0===t?void 0:t.severity)||void 0===a?void 0:a.toUpperCase()}&originalSeverity=${null===(i=this.deletedata)||void 0===i?void 0:i.originalseverity}`,{responseType:"text"}).subscribe(e=>{this.btnDisabled=!1,this.success=!0,this.successInfo=this.language["Custom Alarm deleted successfully"],this.closeModal(),setTimeout(()=>{this.success=!1,this.successInfo=void 0,this.getCustomAlarmListData(!0)},3e3)},e=>{this.btnDisabled=!1,this.error=!0,this.loading=!1,this.pageErrorHandle(e)})}delete(e){this.deletedata=e,this.modalInfo=this.deletedata.alarmName||this.deletedata.alarm_name,this.document.body.scrollIntoView({block:"start",behavior:"smooth"})}closeModal(){this.deletedata=""}pageErrorHandle(e){this.errorInfo=401==e.status?"Access Denied":this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1,this.success=!1}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.s),l.Y36(f.eN),l.Y36(C.v),l.Y36(o.t6),l.Y36(b.Dx),l.Y36(s.F0),l.Y36(i.K0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-operations-cloud-alarms"]],viewQuery:function(e,t){if(1&e&&l.Gf(A.G,5),2&e){let e;l.iGM(e=l.CRH())&&(t.dtElement=e.first)}},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"row"],["class","w-100 py-3 warning-msg",4,"ngIf"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"row","justify-content-between","filters-cl"],[1,"col-md-5"],[1,"search-box-input","ccl-form"],["bindValue","alarm_id","bindLabel","alarm_name",3,"ngModel","placeholder","items","clearable","ngModelChange","change"],[1,"pointer",3,"ngClass","click"],[1,"col-md-4"],[1,"d-inline-flex","align-items-center","justify-content-end","w-100"],[1,"max-w170-select",3,"searchable","clearable","ngModel","placeholder","ngModelChange","change"],["value","allseverities"],["value","critical"],["value","major"],["value","minor"],["value","warning"],["value","info"],[1,"row","position-relative"],[1,"col-md-12"],[1,"operations-cloud-alarms-table"],["class","row mb-3",4,"ngIf"],[3,"hidden"],["datatable","",1,"row-border","hover","table-alter","dataTable","no-footer",3,"dtOptions","dtTrigger"],[1,"min-width-130"],[4,"ngIf"],[1,"w-100","py-3","warning-msg"],[1,"error-img"],["src","./assets/img/warning-icon.svg"],[1,"warn-msg"],[1,"btn-con-sec","float-right"],["id","deletePFBtn",1,"btn-default","btn-primary","mr-2",3,"disabled","click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"w-100","alert","alert-danger","fade","show","my-3"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","close-icon-pos",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"d-flex","align-items-center"],[1,"success-img","d-inline-flex"],["src","./assets/img/success-icon.svg"],[1,"d-inline-flex","text-break","pr-4",3,"innerHtml"],[1,"row","mb-3"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[4,"ngFor","ngForOf"],[1,"severity-select",3,"ngClass"],[3,"searchable","ngClass","ngModel","placeholder","clearable","ngModelChange","change"],[1,"editDeviceClass","pointer",3,"ngClass","click"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","pointer","ml-2",3,"title","click"],["colspan","5",1,"no-data-available"]],template:function(e,t){1&e&&l.YNc(0,I,47,33,"section",0),2&e&&l.Q6J("ngIf",t.hasScopeAccess)},directives:[i.O5,i.mk,Z.w9,x.JJ,x.On,Z.xv,A.G,i.sg],styles:[".blur-bg[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.filters-cl[_ngcontent-%COMP%]{margin-top:32px;margin-bottom:21px}.operations-cloud-alarms-table[_ngcontent-%COMP%]{width:100%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;padding-bottom:7px;border-bottom:1px solid #CCCCCC}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   TH[_ngcontent-%COMP%]:nth-child(1){width:50%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   TH[_ngcontent-%COMP%]:nth-child(2){width:25%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   TH[_ngcontent-%COMP%]:nth-child(3){width:25%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:15px;line-height:24px;padding:7px 0}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#edf5ff}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f8f8fa}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even):hover{background-color:#edf5ff}.severity-select[_ngcontent-%COMP%]{width:100%;padding-right:20px;max-width:150px}.critical-select-inp[_ngcontent-%COMP%]   .ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{height:34px!important;box-shadow:none!important;outline:none!important}.hide-close-search[_ngcontent-%COMP%]{display:none}.show-close-search[_ngcontent-%COMP%]{color:gray;display:block;position:absolute;right:50px;font-size:22px;top:0px}.close-icon-pos[_ngcontent-%COMP%]{position:absolute;right:15px}.max-w170-select[_ngcontent-%COMP%]{max-width:210px;min-width:130px}.editDeviceClass[_ngcontent-%COMP%]{position:relative;top:8px;right:0}.min-width-130[_ngcontent-%COMP%]{min-width:130px}.diable-div[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.cursornallow[_ngcontent-%COMP%]{cursor:not-allowed}"]}),e})(),data:{title:"Calix Cloud - Alarms"}}]}];let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(D)],s.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,J]]}),e})()}}]);