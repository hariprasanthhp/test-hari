"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[2965],{21693:function(e,t,s){s.d(t,{v:function(){return b}});var r=s(79765),i=s(39897),a=s(40205),o=s(92340),n=s(88002),u=s(5304),c=s(23815),l=s(37716),m=s(91841),h=s(89097),d=s(3679),p=s(48483),v=s(39895);let b=(()=>{class e{constructor(e,t,s,i,a){this.httpClient=e,this.ssoAuthService=t,this.fb=s,this.dateUtilsService=i,this.router=a,this.appliedFilters={},this.alertType="",this.transformedAlarms=["multiple-onts-down-network","multiple-onts-down-pon","multiple-onts-down-olt"],this.baseURL=o.N.API_BASE_URL,this.issuesFilterChanged$=new r.xQ,this.geoMapFilterChanged$=new r.xQ,this.homegeomapNavigation$=new r.xQ,this.isIssueMap=!1,this.issuesGeoMapFiltersParams={},this.geoMapAppliedFilters={},this.filtersForm=this.fb.group({startDate:[""],endDate:[""],alarmType:[""],region:[""],location:[""],system:[""],fsan:[""],severity:[""],category:[""],customCategory:[""],eventName:"All",cco_ack:"all",cco_shelv:"all"}),this.selectedDate=new r.xQ,this.filterCount$=this.selectedDate.asObservable(),this.currentIssuesFilterParams={},this.geoMapHomeFilterParams={},this.alertsCount={alerts:0,events:0},this.mapViewFilters={},this.regions=this.baseURL+"nfa/regions?tenant=0",this.locations=this.baseURL+"nfa/locations?tenant=0",this.systems=this.baseURL+"nfa/systems?tenant=0"}filterCounts(e){return this.selectedDate.next(e),this.dateParams=e,this.dateParams}listen(e){return new i.y(e=>{})}emit(e,t){}getRegions(e=!1){let t="";return e&&(t+="&includeDeleted=true"),this.httpClient.get(`${this.regions}${t}`).pipe((0,n.U)(e=>(e.sort((e,t)=>(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})),e)),(0,u.K)(this.handleError))}getLocations(e){return this.httpClient.get(`${this.locations}${"&region="+e}`).pipe((0,n.U)(e=>(e.sort((e,t)=>(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})),e)),(0,u.K)(this.handleError))}getSystems(e,t){return this.httpClient.get(`${this.systems}${"&region="+e}${"&location="+t}`).pipe((0,n.U)(e=>(e.sort((e,t)=>(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})),e)),(0,u.K)(this.handleError))}prepareLocationRegionHierachy(e){let t=[],s={};return e.map(e=>{s.hasOwnProperty(e[0])||(t.push({value:e[0],parent:"All"}),s[e[0]]=!0),t.push({value:e[1],parent:e[0]})}),t}handleError(e){return(0,a._)(e)}getAlarmSubscriberInfo(e){return this.httpClient.get(`${this.baseURL}/analytics-engine/alarmSubscriberList?historyReport=false&alarmId=${e}`)}setCurrentIssuesFilterParams(e,t=!0,s){this.currentIssuesFilterParams=e,s||this.issuesFilterChanged$.next(t)}getCurrentIssuesFilterParams(){return this.currentIssuesFilterParams}setgeoMapHomeFilterParams(e,t=!0,s){this.geoMapHomeFilterParams=e,s||this.issuesFilterChanged$.next(t)}getgeoMapHomeFilterParams(){return this.geoMapHomeFilterParams}setGeoMapFilters(e){this.geoMapFilterChanged$.next(e)}callGotoHomeGeomap(){this.homegeomapNavigation$.next()}fromMapNavigation(e){this.isIssueMap=e}isMap(){return this.isIssueMap}setIssuesGeoMapFilters(e){this.issuesGeoMapFiltersParams=e}getIssuesGeoMapFilters(){return this.issuesGeoMapFiltersParams}ngOnDestroy(){this.issuesFilterChanged$&&this.issuesFilterChanged$.unsubscribe(),this.geoMapFilterChanged$&&this.geoMapFilterChanged$.unsubscribe(),this.homegeomapNavigation$&&this.homegeomapNavigation$.unsubscribe(),this.selectedDate.unsubscribe()}generateResourceForUI(e,t){var s,r,i,a,o,n,u,c;let l="",m="",h="";return e&&e.subject&&(e.subject.region&&(l+=`${e.subject.region}`),e.subject.location&&(m+=`${l?"/":""}${e.subject.location}`),e.subject.deviceName&&(h+=`${m?"/":""}${e.subject.deviceName}`)),t?(e.subject.resourceForUI=`(${l} ${m} ${h}) ${e.subject.source}`,"object"==typeof(null===(r=null===(s=e.subject)||void 0===s?void 0:s.additionalAttributes)||void 0===r?void 0:r["ring-name"])?e.subject.resourceForUI+=`(${null===(a=null===(i=e.subject)||void 0===i?void 0:i.additionalAttributes)||void 0===a?void 0:a["ring-name"].value})`:(null===(n=null===(o=e.subject)||void 0===o?void 0:o.additionalAttributes)||void 0===n?void 0:n["ring-name"])&&(e.subject.resourceForUI+=`(${null===(c=null===(u=e.subject)||void 0===u?void 0:u.additionalAttributes)||void 0===c?void 0:c["ring-name"]})`)):-1===this.transformedAlarms.indexOf(e.subject.alarmEventName)?e.subject.resourceForUI=`(${l} ${m} ${h}) ${e.subject.source}`:e.subject&&"multiple-onts-down-network"===e.subject.alarmEventName?e.subject.resourceForUI=`(${l} ${m})`:e.subject&&"multiple-onts-down-pon"===e.subject.alarmEventName?e.subject.resourceForUI=`(${l} ${m} ${h}) ${e.subject.source}`:e.subject&&"multiple-onts-down-olt"===e.subject.alarmEventName&&(e.subject.resourceForUI=`(${l} ${m} ${h})`),e.subject.resourceForUI}appendFqn(e){return(null==e?void 0:e.length)&&(null==e||e.forEach(t=>{if(this.findObjectsCountByValue(e,t.name)>1){let e="";if(t.fqn){let s=t.fqn.split(",");if(s.length){let t=s[0];if(t){let s=t.split("=");s.length&&s[1]&&(e=s[1])}}}t.tempName=`${t.name} ${e?`(${e})`:""}`}else t.tempName=t.name}),e.forEach(e=>{e.name=e.tempName})),e}findObjectsCountByValue(e,t){let s=0;if(e&&e.length)for(var r=0;r<e.length;r++)void 0!==e[r].isDeleted&&!e[r].isDeleted&&e[r].name.toLowerCase()==t.toLowerCase()&&s++;return s}getDateParam(e,t){var s;return(null===(s=null==e?void 0:e.date)||void 0===s?void 0:s.length)?(e.date[1]||(e.date[1]=new Date),t?`${this.dateUtilsService.getStartUtcTimeByDays(0)-864e5},${this.dateUtilsService.getUtCMilliSecByDateObj(e.date[1],!0)}`:`${this.dateUtilsService.getUtCMilliSecByDateObj(e.date[0])},${this.dateUtilsService.getUtCMilliSecByDateObj(e.date[1],!0)}`):""}setAlertType(e){this.alertType=e}getAlertType(){return this.alertType}getRemoveFiltersData(){return{SYSTEM:[],TRANSFORMED:["category","customCategory","fsan"],HEALTH:["category","customCategory"],CONNECTIVITY:["category","customCategory","fsan"],EVENTS:["severity","cco_ack","cco_shelv","customCategory"]}}getPageTitle(){return{SYSTEM:"System Alarms",TRANSFORMED:"Transform Alarms",HEALTH:"Health Alerts",CONNECTIVITY:"Cloud Connectivity",EVENTS:"Events"}}getAlarmAlertTypes(){return["SYSTEM","TRANSFORMED","HEALTH","CONNECTIVITY"]}buildQuery(e={}){let t="";for(var s in e)null==e[s]||""==e[s]||(""!=t&&(t+="&"),t+=s+"="+encodeURIComponent(e[s]));return t}getAppliedFilters(){return this.appliedFilters}setAppliedFilters(e,t=!1){this.appliedFilters=e,t&&this.issuesFilterChanged$.next(!1)}setGeomapAppliedFilters(e){this.geoMapAppliedFilters=e}getGeomapAppliedFilters(){return this.geoMapAppliedFilters}gotoHomeGeomap(){let e=c.pickBy(Object.assign(Object.assign({},this.getMapViewFilters()),this.getAppliedFilters()),function(e,t){return e});"DISRUPTION"===this.getAlertType()&&(e.fsan_serialno=e.fsan),this.router.navigate(["/cco/home/active-systems-geomap"],{state:{filters:e}})}getAlertScopes(){return{SYSTEM:{realtime:"cloud.rbac.coc.issues.systemalarms.realtime",active:"cloud.rbac.coc.issues.systemalarms.activereports",history:"cloud.rbac.coc.issues.systemalarms.historicalreports"},TRANSFORMED:{realtime:"cloud.rbac.coc.issues.transformalarms.realtime",active:"cloud.rbac.coc.issues.transformalarms.activereports",history:"cloud.rbac.coc.issues.transformalarms.historicalreports"},HEALTH:{realtime:"cloud.rbac.coc.issues.healthalerts.realtime",active:"cloud.rbac.coc.issues.healthalerts.activereports",history:"cloud.rbac.coc.issues.healthalerts.historicalreports"},CONNECTIVITY:{realtime:"cloud.rbac.coc.issues.cloudconnectivity.realtime",active:"cloud.rbac.coc.issues.cloudconnectivity.activereports",history:"cloud.rbac.coc.issues.cloudconnectivity.historicalreports"},EVENTS:"cloud.rbac.coc.issues.events",DISRUPTION:"cloud.rbac.coc.issues.servicedisruptions"}}setAlertsCount(e){var t;let s=0,r=0;if(null==e?void 0:e.alarm)for(let i in e.alarm)if(e.alarm[i])for(let t in e.alarm[i])s+=e.alarm[i][t];(null===(t=null==e?void 0:e.event)||void 0===t?void 0:t.count)&&(r=e.event.count),this.alertsCount={alerts:s,events:r}}getAlertsCount(){return this.alertsCount}setMapViewFilters(e){this.mapViewFilters=e}getMapViewFilters(){return this.mapViewFilters}getFileName(e,t){let s;try{s=e.headers.get("Content-Disposition").split("=")[1]}catch(r){s="subsciberDisruption"==t?"Subscriber Disruptions.csv":"ServiceDisruptions.csv"}return s}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(m.eN),l.LFG(h.t6),l.LFG(d.qu),l.LFG(p.s),l.LFG(v.F0))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},64432:function(e,t,s){s.d(t,{q:function(){return m}});var r=s(79765),i=s(26215),a=s(91841),o=s(92340),n=s(5304),u=s(37716),c=s(404),l=s(89097);let m=(()=>{class e{constructor(e,t,s){this.commonFunctionsService=e,this.http=t,this.sso=s,this.currentPageData=new r.xQ,this.ccoPageExport=new r.xQ,this.showCountStatus=new i.X(!1),this.showCountStatus$=this.showCountStatus.asObservable(),this.textSearch=new r.xQ}static save(e){throw new Error("Method not implemented.")}save(e){return this.productList=e,this.productList}savesubscriber(e){return this.subscriberValue=e,this.subscriberValue}savesevice1(e){return this.servicevalue1={pppoe:{username:e.username,password:e.password},VLanId:e.VLanId,Pbit:e.Pbit},this.servicevalue1}savesevice2(e){return this.servicevalue2={FaxT38:{Enable:e.FaxT38},ServiceType:e.ServiceType,DialPlan:e.DialPlan},this.servicevalue2}savesevice3(e){return this.servicevalue3=e,this.servicevalue3}savesevice4(e){return this.servicevalue4=e,this.servicevalue4}savesevice5(e){return this.servicevalue5=e,this.servicevalue5}savesevice6(e){return this.servicevalue6=e,this.servicevalue6}currentPageAdder(e){this.currentPageData.next(e)}doExport(e){this.ccoPageExport.next(e)}exportDataConvertor(e){return Array.isArray(e)&&e.forEach(e=>{delete e._id;for(const t in e)"boolean"==typeof e[t]&&(e[t]=1==e[t]?"Yes":"No")}),e}generateExportName(e){return this.commonFunctionsService.generateExportName(e)}showCount(e){this.showCountStatus.next(e)}performSearch(e,t,s,r){const i=(new a.LE).set("filter",t||"").set("pageNumber",s).set("pageSize",r);return this.sso.getOrg(e)&&i.set("orgId",e),this.http.get(`${o.N.SUPPORT_URL}/subscriber-search`,{params:i}).pipe((0,n.K)(this.handleError))}handleError(e){throw new Error("Method not implemented.")}searchTextEmit(e){this.textSearch.next(e)}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(c.i),u.LFG(a.eN),u.LFG(l.t6))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9534:function(e,t,s){s.d(t,{Q:function(){return o}});var r=s(25917),i=s(37716),a=s(404);let o=(()=>{class e{constructor(e){this.commonFunctionsService=e}getNetworkSystemList(){let e=[];return e=[{serielNumber:"KH912924",type:"OLT",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Pre-provisioned"},{serielNumber:"KH912924",type:"ASM",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Active"},{serielNumber:"KH912924",type:"OLT",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Offline"},{serielNumber:"KH912924",type:"OLT",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Active"},{serielNumber:"KH912924",type:"ASM",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Offline"}],(0,r.of)(e)}getSubscribersSystemList(){let e=[];return e=[{serielNumber:"KH912924",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912925",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912926",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912927",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912928",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912929",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"}],(0,r.of)(e)}exportDataConvertor(e){return Array.isArray(e)&&e.forEach(e=>{delete e._id;for(const t in e)"boolean"==typeof e[t]&&(e[t]=1==e[t]?"Yes":"No")}),e}generateExportName(e){return this.commonFunctionsService.generateExportName(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(a.i))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);