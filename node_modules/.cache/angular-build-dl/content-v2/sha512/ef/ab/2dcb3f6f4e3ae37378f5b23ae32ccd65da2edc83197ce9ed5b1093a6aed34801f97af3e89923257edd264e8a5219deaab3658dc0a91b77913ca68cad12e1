"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5691],{14306:function(e,t,n){n.d(t,{i:function(){return x}});class i{constructor(e,t){this.secureOnboarding=e||null,this.orgId=t||null}}var s=n(92340),r=n(37716),o=n(7450),a=n(89097),c=n(39075),l=n(40205),g=n(91841),u=n(76149),d=n(5304);let h=(()=>{class e{constructor(e,t){this.http=e,this.Sso=t}getSecureOnBoarding(e){const t=new g.LE;return this.Sso.getOrg(e)&&t.set("orgId",e),this.http.get(u.hF,{params:t}).pipe((0,d.K)(this.handleError))}updateSecureOnBoarding(e,t){return this.Sso.getOrg(t)&&(e.orgId=t),this.http.put(u.GB,e).pipe((0,d.K)(this.handleError))}handleError(e){return(0,l._)(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(g.eN),r.LFG(a.t6))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n(39895),f=n(38583),b=n(3679);function m(e,t){if(1&e&&(r.TgZ(0,"div",2),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",e.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function v(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",20),r.TgZ(1,"span",21),r._UZ(2,"img",22),r.qZA(),r.TgZ(3,"button",23),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).hideError()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",24),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",e.errorInfo,r.oJD)}}function Z(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25),r.TgZ(1,"span",26),r._UZ(2,"img",27),r.qZA(),r.TgZ(3,"button",28),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).hideSuccess()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",24),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",e.successMsg,r.oJD)}}function O(e,t){if(1&e&&(r.TgZ(0,"div",29),r.TgZ(1,"div",30),r.TgZ(2,"div",31),r.TgZ(3,"span",32),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.language.Loading)}}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.YNc(2,v,6,1,"div",5),r.YNc(3,Z,6,1,"div",6),r.YNc(4,O,5,1,"div",7),r.TgZ(5,"div",8),r._uU(6),r.qZA(),r.TgZ(7,"form",9),r.TgZ(8,"div",10),r.TgZ(9,"div",11),r.TgZ(10,"div",12),r.TgZ(11,"label",13),r.TgZ(12,"input",14),r.NdJ("change",function(){return r.CHM(e),r.oxw().onSecureOnBoardingChange()}),r.qZA(),r.TgZ(13,"span",15),r._UZ(14,"small"),r.qZA(),r.qZA(),r.TgZ(15,"span",16),r._uU(16),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"div",17),r.TgZ(18,"p",18),r._uU(19),r.TgZ(20,"b",19),r._uU(21),r.qZA(),r._uU(22),r.TgZ(23,"b",19),r._uU(24),r.qZA(),r._uU(25),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngIf",e.showError),r.xp6(1),r.Q6J("ngIf",e.showSuccess),r.xp6(1),r.Q6J("ngIf",e.loading),r.xp6(2),r.Oqu(e.language.Secure_Onboarding),r.xp6(6),r.Q6J("checked",e.secureOnBoardingObj.secureOnboarding)("disabled",!e.hasWriteAccess||e.disableSecureOnBoarding),r.xp6(1),r.Q6J("ngClass",e.hasWriteAccess?"":"opacity-50"),r.xp6(3),r.hij(" ",e.secureOnBoardingObj.secureOnboarding?e.language.Enabled:e.language.Disabled," "),r.xp6(3),r.hij("*",e.language["If enabled, a subscriber"]," "),r.xp6(2),r.Oqu(e.language["must enter their account ID"]),r.xp6(1),r.hij(" ",e.language["while onboarding their router or mesh(SAT) in CommandIQ. The account ID"]," "),r.xp6(2),r.Oqu(e.language["must match the billing information"]),r.xp6(1),r.hij(" ",e.language["on file in order for them to proceed with the onboarding process. Enable this feature if you want to add a layer of security for subscribers that will ensure that the person onboarding the system is the account owner."]," ")}}let x=(()=>{class e{constructor(e,t,n,s,r){this.translateService=e,this.SsoAuthService=t,this.titleService=n,this.secureOnBoardingService=s,this.router=r,this.secureOnBoardingObj=new i,this.showError=!1,this.showSuccess=!1,this.loading=!1,this.hasWriteAccess=!1,this.disableSecureOnBoarding=!1,this.hasScopeAccess=!1,this.errorInfo="",this.scopes=this.SsoAuthService.getScopes()}setTitle(e){this.router.url.includes("cco-foundation")?this.titleService.setTitle(`${this.language["Secure Onboarding"]} - ${this.language.settings} - ${this.language.configuration} - ${this.language.Deployment} - ${this.language["Calix Cloud"]}`):this.router.url.includes("/cco/services/configuration/secure-onboarding")?this.titleService.setTitle(`${this.language["Secure Onboarding"]} - ${this.language.Configuration} - ${this.language.Services} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`):this.router.url.includes("/support/netops-management")&&this.titleService.setTitle(`${this.language["Secure Onboarding"]} - ${this.language.Configurations} - ${this.language.NetOps} - ${this.language.Service} - ${this.language["Calix Cloud"]}`)}ngOnInit(){var e,t;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.setTitle(this.router.url)}),this.setTitle(this.router.url),this.orgId=this.SsoAuthService.getOrgId();let n=this.SsoAuthService.getEntitlements();if(this.router.url.includes("cco/services")&&n[210]&&!n[102]&&(this.disableSecureOnBoarding=!0),this.router.url.includes("cco-foundation")||this.router.url.includes("cco/services"))if(this.router.url.includes("cco/services/configuration/secure-onboarding")){let n=this.scopes;s.N.VALIDATE_SCOPE?((null===(e=n["cloud.rbac.coc.services.configuration.secureonboarding"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),n&&(null===(t=n["cloud.rbac.coc.services.configuration.secureonboarding"])||void 0===t?void 0:t.includes("write"))&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0)}else if(s.N.VALIDATE_SCOPE){let e=this.scopes;e["cloud.rbac.foundation.configurations"]=e["cloud.rbac.foundation.configurations"]?e["cloud.rbac.foundation.configurations"]:[],this.scopes["cloud.rbac.foundation.configurations"].length&&(this.hasScopeAccess=!0),e&&e["cloud.rbac.foundation.configurations"].includes("write")&&(this.hasWriteAccess=!0)}else this.hasWriteAccess=!0,this.hasScopeAccess=!0;else s.N.VALIDATE_SCOPE?(this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]=this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]?this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]:[],this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"].length&&(this.hasScopeAccess=!0),this.scopes&&this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]&&-1!==this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"].indexOf("write")&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0);this.hasScopeAccess?this.fetchSecureOnBoarding():this.SsoAuthService.setPageAccess(!1)}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.SsoAuthService.pageErrorHandle(e),this.showError=!0}fetchSecureOnBoarding(){this.loading=!0,this.secureOnBoardingService.getSecureOnBoarding(this.orgId).subscribe(e=>{this.secureOnBoardingObj=e,this.loading=!1},e=>{this.loading=!1,this.pageErrorHandle(e),this.showError=!0})}updateSecureOnBoarding(){this.loading=!0,this.secureOnBoardingService.updateSecureOnBoarding(this.secureOnBoardingObj,this.orgId).subscribe(e=>{this.loading=!1,this.fetchSecureOnBoarding()},e=>{this.loading=!1,this.errorMsg=e.statusText,this.showError=!0,this.secureOnBoardingObj.secureOnboarding=!this.secureOnBoardingObj.secureOnboarding})}onSecureOnBoardingChange(){this.secureOnBoardingObj.secureOnboarding=!this.secureOnBoardingObj.secureOnboarding,this.updateSecureOnBoarding()}onCancel(){this.fetchSecureOnBoarding()}hideError(){this.showError=!1,this.errorMsg=""}hideSuccess(){this.showSuccess=!1,this.successMsg=""}ngOnDestroy(){this.languageSubject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.s),r.Y36(a.t6),r.Y36(c.Dx),r.Y36(h),r.Y36(p.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-secure-onboarding"]],decls:2,vars:2,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],["id","secure-onboarding","class","tab-pane position-relative",4,"ngIf"],["role","alert",1,"alert","alert-warning"],["id","secure-onboarding",1,"tab-pane","position-relative"],[1,"pb-2"],["class","w-100 alert alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert alert-success  fade show",4,"ngIf"],["class","loader",4,"ngIf"],[1,"d-block","d-sm-none","ccl-Secondary-title","mb-2","col-md-12","border-bottom"],["id","secure-on-boarding-form"],[1,"row","p-0","my-3"],[1,"px-3","float-left"],[1,"checkbox","switcher"],["for","secureOnBoardingCheckbox"],["type","checkbox","id","secureOnBoardingCheckbox",3,"checked","disabled","change"],[3,"ngClass"],[1,"mx-2"],[1,"text-md-left","mt-2"],[1,"grey-p-text"],[1,"b-600"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button","id","hide-error-btn",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],["type","button","id","hide-success-btn",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(e,t){1&e&&(r.YNc(0,m,2,1,"div",0),r.YNc(1,_,26,13,"div",1)),2&e&&(r.Q6J("ngIf",!t.hasScopeAccess),r.xp6(1),r.Q6J("ngIf",t.hasScopeAccess))},directives:[f.O5,b._Y,b.JL,b.F,f.mk],styles:['div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}input[readonly][_ngcontent-%COMP%]{cursor:not-allowed!important}.opacity-50[_ngcontent-%COMP%]{opacity:.5}.checkbox.switcher[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled + span[_ngcontent-%COMP%]{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);-moz-opacity:.5;-khtml-opacity:.5}.grey-p-text[_ngcontent-%COMP%]{font-size:14px;line-height:17.6px;font-weight:400;color:#4c4c4c}']}),e})()},5399:function(e,t,n){n.d(t,{m:function(){return ne}});class i{constructor(e,t,n,i,r,o,a,c,l){this._id=e||null,this.orgId=t||null,this.name=i||null,this.type=r||"Device Purging",this.schedule=o||new s,this.description=a||null,this.maxInactiveDays=c||null,this.forceDeleteAssociatedDevices=l||!1,this.suspended=n||null}}class s{constructor(e,t,n,i){this.frequency=e||"",this.startTimeOfDay=t||this.setDefaultTime(),this.days=n||"",this.timezone=i||""}setDefaultTime(){let e,t=new Date;return e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),e}}var r=n(76149),o=n(92340),a=n(23771),c=n(37716),l=n(7450),g=n(89097),u=n(40205),d=n(5304),h=n(91841),p=n(37651);let f=(()=>{class e{constructor(e,t){this.http=e,this.sso=t}getStaleDevicePurgePolicy(e){const t=new h.LE;return this.sso.getOrg(e)&&t.set("orgId",e),this.http.get(r.B3,{params:t}).pipe((0,d.K)(this.handleError))}createStaleDevicePurgePolicy(e){const t=new h.LE;return e.maxInactiveDays=+e.maxInactiveDays,this.http.post(r.eq,e,{params:t}).pipe((0,d.K)(this.handleError))}updateStaleDevicePurgePolicy(e,t){const n=new h.LE;return e.maxInactiveDays=+e.maxInactiveDays,this.http.put(r.pq+"/"+t,e,{params:n}).pipe((0,d.K)(this.handleError))}getexcLogStaleDevicePurgePolicy(e,t,n){const i=(new h.LE).set("policyId",e);return t&&i.append("skip",t.toString()),n&&i.append("limit",n.toString()),this.http.get(r.FK,{params:i}).pipe((0,d.K)(this.handleError))}getLogCountStaleDevicePurgePolicy(e){const t=(new h.LE).set("policyId",e);return this.http.get(r.ek,{params:t}).pipe((0,d.K)(this.handleError))}suspendStaleDevicePurgePolicyById(e,t){const n=new h.LE;return this.sso.getOrg(t)&&n.set("orgId",t),this.http.put(r.jX+"/"+e+"/suspend","",{params:n}).pipe((0,d.K)(this.handleError))}resumeStaleDevicePurgePolicyById(e,t){const n=new h.LE;return this.sso.getOrg(t)&&n.set("orgId",t),this.http.put(r.jX+"/"+e+"/resume","",{params:n}).pipe((0,d.K)(this.handleError))}getAllTimeZone(){return(new p.l).timeZone}getDaysOfMonth(){return(new p.l).daysOfMonth}getDaysOfWeek(){return(new p.l).daysOfWeek}getFrequencyList(){return(new p.l).frequency}handleError(e){return(0,u._)(e)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(h.eN),c.LFG(g.t6))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=n(39075),m=n(48483),v=n(39895),Z=n(38583),O=n(3679),_=n(74062),x=n(28931),M=n(74375),P=n(86640),C=n(18638);function q(e,t){if(1&e&&(c.TgZ(0,"div",2),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" ",e.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function y(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",63),c.TgZ(1,"span",64),c._UZ(2,"img",65),c.qZA(),c.TgZ(3,"button",66),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).hideError()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",67),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",e.errorMsg,c.oJD)}}function A(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",68),c.TgZ(1,"span",69),c._UZ(2,"img",70),c.qZA(),c.TgZ(3,"div",71),c.TgZ(4,"strong"),c._UZ(5,"div",72),c.qZA(),c.qZA(),c.TgZ(6,"div",71),c.TgZ(7,"button",73),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).hideSuccess()}),c._UZ(8,"span"),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",e.successMsg,c.oJD)}}function T(e,t){if(1&e&&(c.TgZ(0,"div",74),c.TgZ(1,"div",75),c.TgZ(2,"div",76),c.TgZ(3,"span",77),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.language.Loading)}}function w(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"label",15),c._uU(2),c.qZA(),c.TgZ(3,"div",78),c.TgZ(4,"div",79),c.TgZ(5,"label",80),c.TgZ(6,"input",81),c.NdJ("change",function(){return c.CHM(e),c.oxw(2).OnToggleChange()})("ngModelChange",function(t){return c.CHM(e),c.oxw(2).policyStatus=t}),c.qZA(),c.TgZ(7,"span",82),c._UZ(8,"small"),c.qZA(),c.qZA(),c._uU(9,"\xa0\xa0\xa0\xa0 "),c.TgZ(10,"label"),c._uU(11),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(2),c.Oqu(e.language.Status),c.xp6(4),c.Q6J("disabled",!e.hasWriteAccess||!e.showStaleDevicePurgeForm)("ngModel",e.policyStatus),c.xp6(1),c.Q6J("ngClass",e.hasWriteAccess&&e.showStaleDevicePurgeForm?"":"opacity-50"),c.xp6(4),c.Oqu(e.policyStatus?e.language.Enabled:e.language.Disabled)}}function S(e,t){if(1&e&&(c.TgZ(0,"div",83),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"],"")}}function D(e,t){if(1&e&&(c.TgZ(0,"div",84),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"],"")}}function I(e,t){if(1&e&&(c.TgZ(0,"div",85),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}function j(e,t){if(1&e&&(c.TgZ(0,"div",85),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["Please enter a value greater than or equal to 1."]," ")}}function k(e,t){if(1&e&&c._uU(0),2&e){const e=t.item,n=c.oxw(2);c.hij(" ",n.language[e.name]," ")}}function U(e,t){if(1&e&&c._uU(0),2&e){const e=t.item,n=c.oxw(2);c.hij(" ",n.language[e.name]," ")}}function E(e,t){if(1&e&&(c.TgZ(0,"span",86),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}function J(e,t){if(1&e&&c._uU(0),2&e){const e=t.item,n=c.oxw(3);c.hij(" ",n.language[e.name]," ")}}function N(e,t){if(1&e&&c._uU(0),2&e){const e=t.item,n=c.oxw(3);c.hij(" ",n.language[e.name]," ")}}function L(e,t){if(1&e&&(c.TgZ(0,"span",91),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}const Q=function(e){return[e]};function F(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"label",87),c._uU(2),c.TgZ(3,"span",16),c._uU(4,"*"),c.qZA(),c.qZA(),c.TgZ(5,"div",17),c.TgZ(6,"ng-select",88,89),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw(2).staleDevicePurgeObj.schedule.days=t}),c.YNc(8,J,1,1,"ng-template",35),c.YNc(9,N,1,1,"ng-template",36),c.qZA(),c.YNc(10,L,2,1,"span",90),c.TgZ(11,"span",50),c.TgZ(12,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).staleDevicePurgeObj.schedule.days=null}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(7);c.oxw();const t=c.MAs(11),n=c.oxw();c.xp6(2),c.hij("",n.language.Day_of_Week," "),c.xp6(3),c.Q6J("ngClass",c.VKq(9,Q,null!=e.errors&&e.errors.required&&(t.submitted||e.touched)?"errorMessage":"")),c.xp6(1),c.s9C("title",n.language.Day_Policy),c.s9C("placeholder",n.language.Select_Days_Week),c.Q6J("items",n.daysOfWeek)("clearable",!1)("ngModel",n.staleDevicePurgeObj.schedule.days)("searchable",!1),c.xp6(4),c.Q6J("ngIf",(null==e.errors?null:e.errors.required)&&(t.submitted||e.touched))}}function Y(e,t){if(1&e&&(c.TgZ(0,"span",96),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}function B(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"label",92),c._uU(2),c.TgZ(3,"span",16),c._uU(4,"*"),c.qZA(),c.qZA(),c.TgZ(5,"div",17),c.TgZ(6,"ng-select",93,94),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw(2).staleDevicePurgeObj.schedule.days=t}),c.qZA(),c.YNc(8,Y,2,1,"span",95),c.TgZ(9,"span",50),c.TgZ(10,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).staleDevicePurgeObj.schedule.days=null}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(7);c.oxw();const t=c.MAs(11),n=c.oxw();c.xp6(2),c.Oqu(n.language.Day_of_Month),c.xp6(3),c.Q6J("ngClass",c.VKq(8,Q,null!=e.errors&&e.errors.required&&(t.submitted||e.touched)?"errorMessage":"")),c.xp6(1),c.s9C("title",n.language.Day_Month_Policy_Executes),c.Q6J("searchable",!1)("items",n.daysOfMonth)("clearable",!1)("ngModel",n.staleDevicePurgeObj.schedule.days),c.xp6(2),c.Q6J("ngIf",(null==e.errors?null:e.errors.required)&&(t.submitted||e.touched))}}function H(e,t){if(1&e&&(c.TgZ(0,"div",97),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}function W(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}function V(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",e.language["This field is required"]," ")}}function R(e,t){if(1&e&&(c.TgZ(0,"button",98),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.language.submit)}}function z(e,t){if(1&e&&(c.TgZ(0,"div",8),c.TgZ(1,"div",108),c._uU(2),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.Oqu(e)}}function K(e,t){if(1&e&&(c.TgZ(0,"div",8),c.TgZ(1,"div",108),c._uU(2),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(2),c.Oqu(e)}}function G(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"tr",103),c.TgZ(2,"td"),c._uU(3),c._UZ(4,"br"),c._uU(5),c.qZA(),c.TgZ(6,"td"),c._uU(7),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.qZA(),c.TgZ(12,"td",104),c._UZ(13,"a",105),c.qZA(),c.qZA(),c.TgZ(14,"tr",106),c.TgZ(15,"td"),c.TgZ(16,"div",107),c.TgZ(17,"div",8),c.TgZ(18,"div",108),c._uU(19),c.qZA(),c.qZA(),c._UZ(20,"br"),c.YNc(21,z,3,1,"div",109),c._UZ(22,"br"),c.TgZ(23,"div",8),c.TgZ(24,"div",108),c._uU(25),c.qZA(),c.qZA(),c._UZ(26,"br"),c.YNc(27,K,3,1,"div",109),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&e){const e=t.$implicit,n=t.index,i=c.oxw(3);c.xp6(1),c.uIk("id","accordion_"+n),c.xp6(2),c.Oqu(e.startTime),c.xp6(2),c.hij(" ",i.staleDevicePurgeObj.schedule.timezone," "),c.xp6(2),c.Oqu(null==e?null:e.successPurgeCount),c.xp6(2),c.Oqu(null==e?null:e.failurgePurgeCount),c.xp6(2),c.Oqu(null==e?null:e.details),c.xp6(2),c.uIk("data-parent","#accordion_"+n)("href","#collapseOne_"+n,c.LSH),c.xp6(3),c.uIk("id","collapseOne_"+n),c.xp6(3),c.Oqu(i.language.Successfully_Purged),c.xp6(2),c.Q6J("ngForOf",e.devices),c.xp6(4),c.Oqu(i.language.Failures_Purge),c.xp6(2),c.Q6J("ngForOf",e.failures)}}function X(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td",110),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(3);c.xp6(3),c.Oqu(e.language["No data available in table"])}}function ee(e,t){if(1&e&&(c.TgZ(0,"div",99),c.TgZ(1,"table",100),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"th",101),c._uU(5),c.qZA(),c.TgZ(6,"th",101),c._uU(7),c.qZA(),c.TgZ(8,"th",101),c._uU(9),c.qZA(),c.TgZ(10,"th",101),c._uU(11),c.qZA(),c._UZ(12,"th",101),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,G,28,13,"ng-container",102),c.qZA(),c.YNc(15,X,4,1,"tbody",49),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("dtOptions",e.tableOptions),c.xp6(4),c.Oqu(e.language.Time),c.xp6(2),c.Oqu(e.language.Success),c.xp6(2),c.Oqu(e.language.Failed),c.xp6(2),c.Oqu(e.language.Details),c.xp6(3),c.Q6J("ngForOf",e.excLogPolicObj),c.xp6(1),c.Q6J("ngIf",0==e.tableCount)}}function te(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",3),c.YNc(1,y,6,1,"div",4),c.YNc(2,A,9,1,"div",5),c.YNc(3,T,5,1,"div",6),c.TgZ(4,"div",7),c._uU(5),c.qZA(),c.TgZ(6,"div",8),c.TgZ(7,"div",9),c.TgZ(8,"div",10),c._uU(9),c.qZA(),c.TgZ(10,"form",11,12),c.NdJ("ngSubmit",function(){c.CHM(e);const t=c.MAs(11),n=c.oxw();return t.form.valid&&n.onSubmit()}),c.YNc(12,w,12,5,"div",13),c.TgZ(13,"div",14),c.TgZ(14,"label",15),c._uU(15),c.TgZ(16,"span",16),c._uU(17,"*"),c.qZA(),c.qZA(),c.TgZ(18,"div",17),c.TgZ(19,"input",18,19),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().staleDevicePurgeObj.name=t}),c.qZA(),c.TgZ(21,"span",20),c.TgZ(22,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw().staleDevicePurgeObj.name=null}),c.qZA(),c.qZA(),c.YNc(23,S,2,1,"div",22),c.qZA(),c.qZA(),c.TgZ(24,"div",23),c.TgZ(25,"label",24),c._uU(26),c.TgZ(27,"span",16),c._uU(28,"*"),c.qZA(),c.qZA(),c.TgZ(29,"div",17),c.TgZ(30,"input",25,26),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().staleDevicePurgeObj.description=t}),c.qZA(),c.TgZ(32,"span",20),c.TgZ(33,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw().staleDevicePurgeObj.description=null}),c.qZA(),c.qZA(),c.qZA(),c.YNc(34,D,2,1,"div",27),c.qZA(),c.TgZ(35,"div",14),c.TgZ(36,"label",28),c._uU(37),c.TgZ(38,"span",16),c._uU(39,"*"),c.qZA(),c.qZA(),c.TgZ(40,"div",17),c.TgZ(41,"input",29,30),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().staleDevicePurgeObj.maxInactiveDays=t}),c.qZA(),c.TgZ(43,"span",20),c.TgZ(44,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw().staleDevicePurgeObj.maxInactiveDays=null}),c.qZA(),c.qZA(),c.YNc(45,I,2,1,"div",31),c.YNc(46,j,2,1,"div",31),c.qZA(),c.qZA(),c.TgZ(47,"div",14),c.TgZ(48,"label",32),c._uU(49),c.qZA(),c.TgZ(50,"div",17),c.TgZ(51,"ng-select",33,34),c.NdJ("change",function(){return c.CHM(e),c.oxw().onFrequencyChange()})("ngModelChange",function(t){return c.CHM(e),c.oxw().staleDevicePurgeObj.schedule.frequency=t}),c.YNc(53,k,1,1,"ng-template",35),c.YNc(54,U,1,1,"ng-template",36),c.qZA(),c.YNc(55,E,2,1,"span",37),c.qZA(),c.qZA(),c.YNc(56,F,13,11,"div",38),c.YNc(57,B,11,10,"ng-template",null,39,c.W1O),c.TgZ(59,"div",14),c.TgZ(60,"label",40),c._uU(61),c.TgZ(62,"span",16),c._uU(63,"*"),c.qZA(),c.qZA(),c.TgZ(64,"div",17),c.TgZ(65,"div",41),c.TgZ(66,"p-calendar",42,43),c.NdJ("onSelect",function(t){return c.CHM(e),c.oxw().onSelectStartTime(t)})("ngModelChange",function(t){return c.CHM(e),c.oxw().startTime=t}),c.qZA(),c.qZA(),c.YNc(68,H,2,1,"div",44),c.TgZ(69,"span",45),c.TgZ(70,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw().startTime=null}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(71,"div",14),c.TgZ(72,"label",46),c._uU(73),c.TgZ(74,"span",16),c._uU(75,"*"),c.qZA(),c.qZA(),c.TgZ(76,"div",17),c.TgZ(77,"ng-select",47,48),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().staleDevicePurgeObj.schedule.timezone=t}),c.qZA(),c.YNc(79,W,2,1,"span",49),c.TgZ(80,"span",50),c.TgZ(81,"img",21),c.NdJ("click",function(){return c.CHM(e),c.oxw().staleDevicePurgeObj.schedule.timezone=null}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(82,"div",14),c.TgZ(83,"div",51),c.TgZ(84,"p"),c._uU(85),c.qZA(),c.qZA(),c.TgZ(86,"div",17),c.TgZ(87,"div",52),c.TgZ(88,"input",53,54),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().associateDeviceValue=t})("change",function(t){return c.CHM(e),c.oxw().changeRadio(t)}),c.qZA(),c.TgZ(90,"label",55),c._uU(91),c.qZA(),c.TgZ(92,"input",56,54),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().associateDeviceValue=t})("change",function(t){return c.CHM(e),c.oxw().changeRadio(t)}),c.qZA(),c.TgZ(94,"label",57),c._uU(95),c.qZA(),c.YNc(96,V,2,1,"span",49),c.qZA(),c.qZA(),c.qZA(),c.TgZ(97,"div",58),c.TgZ(98,"div",59),c.YNc(99,R,2,1,"button",60),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(100,"div",9),c.TgZ(101,"div",61),c._uU(102),c.qZA(),c.YNc(103,ee,16,7,"div",62),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(11),t=c.MAs(20),n=c.MAs(31),i=c.MAs(42),s=c.MAs(52),r=c.MAs(58),o=c.MAs(67),a=c.MAs(78),l=c.MAs(89),g=c.oxw();c.xp6(1),c.Q6J("ngIf",g.showError),c.xp6(1),c.Q6J("ngIf",g.showSuccess),c.xp6(1),c.Q6J("ngIf",g.loading),c.xp6(2),c.hij("",g.language["Stale System Purge"]," "),c.xp6(4),c.hij(" ",g.language.configuration,""),c.xp6(3),c.Q6J("ngIf",g.staleDevicePurgeObj._id),c.xp6(3),c.hij("",g.language.Name," "),c.xp6(3),c.Q6J("ngClass",c.VKq(61,Q,null!=t.errors&&t.errors.required&&(e.submitted||t.touched)?"errorMessage":"")),c.xp6(1),c.Q6J("ngModel",g.staleDevicePurgeObj.name)("formValue",g.staleDevicePurgeObj),c.xp6(4),c.Q6J("ngIf",(t.touched||e.submitted)&&(null==t.errors?null:t.errors.required)),c.xp6(3),c.hij("",g.language.description," "),c.xp6(3),c.Q6J("ngClass",c.VKq(63,Q,null!=n.errors&&n.errors.required&&(e.submitted||n.touched)?"errorMessage":"")),c.xp6(1),c.Q6J("ngModel",g.staleDevicePurgeObj.description)("formValue",g.staleDevicePurgeObj),c.xp6(4),c.Q6J("ngIf",(n.touched||e.submitted)&&(null==n.errors?null:n.errors.required)),c.xp6(3),c.hij("",g.language.Inactivity_Period," "),c.xp6(3),c.Q6J("ngClass",c.VKq(65,Q,(null!=i.errors&&i.errors.required||null!=i.errors&&i.errors.customNumMin||null!=i.errors&&i.errors.customNeg)&&(e.submitted||i.touched)?"errorMessage":"")),c.xp6(1),c.s9C("title",g.language.No_Of_Days_Device_Inactive),c.Q6J("ngModel",g.staleDevicePurgeObj.maxInactiveDays)("formValue",g.staleDevicePurgeObj),c.xp6(4),c.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&(e.submitted||i.touched)),c.xp6(1),c.Q6J("ngIf",((null==i.errors?null:i.errors.customNumMin)||(null==i.errors?null:i.errors.customNeg))&&(e.submitted||i.touched)),c.xp6(3),c.Oqu(g.language.Frequency),c.xp6(1),c.Q6J("ngClass",c.VKq(67,Q,null!=s.errors&&s.errors.required&&(e.submitted||s.touched)?"errorMessage":"")),c.xp6(1),c.s9C("title",g.language.Weekly_Policy),c.s9C("placeholder",g.language.Select_Frequency),c.Q6J("searchable",!1)("items",g.staleDeviceFrequency)("clearable",!1)("ngModel",g.staleDevicePurgeObj.schedule.frequency),c.xp6(4),c.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&(e.submitted||s.touched)),c.xp6(1),c.Q6J("ngIf","Weekly"==g.staleDevicePurgeObj.schedule.frequency)("ngIfElse",r),c.xp6(5),c.hij("",g.language.Start_Time," "),c.xp6(3),c.Q6J("ngClass",c.VKq(69,Q,null!=o.errors&&o.errors.required&&(e.submitted||o.touched)?"errorMessage":"")),c.xp6(2),c.s9C("title",g.language.Policy_Start_Time),c.Q6J("ngModel",g.startTime)("showIcon",!0),c.xp6(2),c.Q6J("ngIf",(null==o.errors?null:o.errors.required)&&(e.submitted||o.touched)),c.xp6(5),c.hij("",g.language["Time Zone"]," "),c.xp6(3),c.Q6J("ngClass",c.VKq(71,Q,null!=a.errors&&a.errors.required&&(e.submitted||a.touched)?"errorMessage":"")),c.xp6(1),c.s9C("title",g.language["Time Zone"]),c.s9C("placeholder",g.language.select_timezone),c.Q6J("items",g.timeZone)("searchable",!1)("clearable",!1)("ngModel",g.staleDevicePurgeObj.schedule.timezone),c.xp6(2),c.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&(e.submitted||a.touched)),c.xp6(6),c.Oqu(g.language["Include Associated Systems"]),c.xp6(1),c.Q6J("ngClass",c.VKq(73,Q,null!=l.errors&&l.errors.required&&(e.submitted||l.touched)?"errorMessage":"")),c.xp6(2),c.Q6J("ngModel",g.associateDeviceValue),c.xp6(2),c.s9C("title",g.language.Force_Device_Delete),c.xp6(1),c.hij(" ",g.language.No,""),c.xp6(1),c.Q6J("ngModel",g.associateDeviceValue),c.xp6(2),c.s9C("title",g.language.Force_Device_Delete),c.xp6(1),c.hij(" ",g.language.Yes,""),c.xp6(1),c.Q6J("ngIf",l.invalid&&(e.submitted||l.touched)),c.xp6(3),c.Q6J("ngIf",g.hasWriteAccess&&g.showStaleDevicePurgeForm),c.xp6(3),c.hij(" ",g.language.Execution_Log,""),c.xp6(1),c.Q6J("ngIf",g.viewExecutionLog)}}let ne=(()=>{class e{constructor(e,t,n,s,r,o,a){this.translateService=e,this.ssoAuthService=t,this.staleDevicePurgeService=n,this.http=s,this.titleService=r,this.dateUtils=o,this.router=a,this.showStaleDevicePurgeForm=!0,this.associateDeviceValue="No",this.viewExecutionLog=!1,this.startTime=new Date,this.timeZone=[],this.daysOfMonth=[],this.tableOptions={},this.staleDevicePurgeObj=new i,this.showError=!1,this.showSuccess=!1,this.loading=!1,this.hasWriteAccess=!1,this.hasScopeAccess=!1,this.timeZone=n.getAllTimeZone(),this.daysOfWeek=n.getDaysOfWeek(),this.daysOfMonth=n.getDaysOfMonth(),this.staleDeviceFrequency=n.getFrequencyList(),this.staleDevicePurgeObj.maxInactiveDays=30,this.staleDevicePurgeObj.schedule.frequency="Weekly",this.staleDevicePurgeObj.schedule.days="Mon",this.staleDevicePurgeObj.schedule.timezone="Etc/GMT+12",this.scopes=this.ssoAuthService.getScopes(),this.orgId=this.ssoAuthService.getOrgId()}setTitle(e){this.router.url.includes("cco-foundation")?this.titleService.setTitle(`${this.language["Stale System Purge"]} - ${this.language.settings} - ${this.language.configuration} - ${this.language.Deployment} - ${this.language["Calix Cloud"]}`):this.router.url.includes("cco/services/configuration/stale-system-purge")?this.titleService.setTitle(`${this.language["Stale System Purge"]} - ${this.language.configuration} - ${this.language.Services} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`):this.router.url.includes("/support/netops-management")&&this.titleService.setTitle(`${this.language["Stale System Purge"]} - ${this.language.Configurations} - ${this.language.NetOps} - ${this.language.Service} - ${this.language["Calix Cloud"]}`)}ngOnInit(){var e,t;if(this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.redraw(),this.setTitle(this.router.url)}),this.setTitle(this.router.url),this.router.url.includes("cco-foundation")||this.router.url.includes("cco/services/configuration/stale-system-purge"))if(this.router.url.includes("cco/services/configuration/stale-system-purge")){let n=this.ssoAuthService.getEntitlements();this.router.url.includes("cco/services")&&n[210]&&!n[102]&&(this.showStaleDevicePurgeForm=!1);let i=this.scopes;o.N.VALIDATE_SCOPE?((null===(e=i["cloud.rbac.coc.services.configuration.stalesystempurge"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),i&&(null===(t=i["cloud.rbac.coc.services.configuration.stalesystempurge"])||void 0===t?void 0:t.includes("write"))&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0)}else if(o.N.VALIDATE_SCOPE){let e=this.scopes;e["cloud.rbac.foundation.configurations"]=e["cloud.rbac.foundation.configurations"]?e["cloud.rbac.foundation.configurations"]:[],e["cloud.rbac.foundation.configurations"].length&&(this.hasScopeAccess=!0),e&&e["cloud.rbac.foundation.configurations"].includes("write")&&(this.hasWriteAccess=!0)}else this.hasWriteAccess=!0,this.hasScopeAccess=!0;else o.N.VALIDATE_SCOPE?(this.scopes["cloud.rbac.csc.netops.config.stale_purge"]=this.scopes["cloud.rbac.csc.netops.config.stale_purge"]?this.scopes["cloud.rbac.csc.netops.config.stale_purge"]:[],this.scopes["cloud.rbac.csc.netops.config.stale_purge"].length&&(this.hasScopeAccess=!0),this.scopes&&this.scopes["cloud.rbac.csc.netops.config.stale_purge"]&&-1!==this.scopes["cloud.rbac.csc.netops.config.stale_purge"].indexOf("write")&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0);this.hasScopeAccess?this.fetchPolicy():this.ssoAuthService.setPageAccess(!1)}getExcLogPolicy(e){const t=this;this.tableOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,ordering:!1,dom:"tip",responsive:!0,ajax:(n,i)=>{this.loading=!0,t.http.get(r.FK+"?policyId="+this.staleDevicePurgeObj._id+"&skip="+n.start+"&limit="+n.length).subscribe(n=>{n.forEach((e,t)=>{e.devices&&(n[t].successPurgeCount=e.devices.length),e.failures&&(n[t].failurgePurgeCount=e.failures.length),n[t].timeZone=this.getTimezoneName(e.endTime),n[t].startTime=this.dateUtils.getUserDateTime(n[t].startTime,this.staleDevicePurgeObj.schedule.timezone)}),this.loading=!1,t.excLogPolicObj=n,i({recordsTotal:e,recordsFiltered:e,data:[]}),$("html, body").animate({scrollTop:0},"slow")})},drawCallback:e=>{this.changeTableStatusLanguage(e),e._iRecordsDisplay<=e._iDisplayLength&&$(e.nTableWrapper).find("#users-table_last").addClass("disabled")}}}changeTableStatusLanguage(e){const t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.replace(/\s+/g,""),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};const n="fr"==sessionStorage.getItem("defaultLanguage"),i="es"==sessionStorage.getItem("defaultLanguage"),s="de_DE"==sessionStorage.getItem("defaultLanguage"),r=e.oPreviousSearch.sSearch.replace(/\s+/g,"")?n?`(filtr\xe9es \xe0 partir des ${t.format(e._iRecordsTotal)} entr\xe9es totales)`:i?`(filtrado de un total de ${t.format(e._iRecordsTotal)} entradas)`:s?`(gefiltert aus ${t.format(e._iRecordsTotal)} Eintr\xe4gen)`:`(filtered from ${t.format(e._iRecordsTotal)} total entries)`:"",o=0==e._iRecordsDisplay?-1:e._iDisplayStart,a=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;$('div [role="status"]').text(n?`Affichage de ${t.format(o+1)} \xe0 ${t.format(a)} des ${t.format(e._iRecordsDisplay)} entr\xe9es ${r}`:i?`Se muestran del ${t.format(o+1)} al ${t.format(a)} de ${t.format(e._iRecordsDisplay)} resultados ${r}`:s?`Angezeigt ${t.format(o+1)} bis ${t.format(a)} von ${t.format(e._iRecordsDisplay)} ergebnissen ${r}`:`Showing ${t.format(o+1)} to ${t.format(a)} of ${t.format(e._iRecordsDisplay)} entries ${r}`),$(".first").text(n?"Le d\xe9but":i?"Primero":s?"Erste Seite":"First"),$(".previous").text(n?"Pr\xe9c\xe9dent":i?"Anterior":s?"Zur\xfcck":"Previous"),$(".next").text(n?"Suivant":i?"Siguiente":s?"Weiter":"Next"),$(".last").text(n?"Derni\xe8re":i?"\xdaltimo":s?"Letzte":"Last")}redraw(){this.dtElement.dtInstance.then(e=>{e.draw()})}getTimezoneName(e){const t=new Date(e),n=t.toLocaleDateString(void 0),i=t.toLocaleDateString(void 0,{timeZoneName:"long"}),s=i.indexOf(n);return s>=0?(i.substring(0,s)+i.substring(s+n.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):i}fetchPolicy(){this.loading=!0,this.staleDevicePurgeService.getStaleDevicePurgePolicy(this.orgId).subscribe(e=>{this.loading=!1,0!=e.length&&(this.staleDevicePurgeObj=e[0],this.setTIme(this.staleDevicePurgeObj.schedule.startTimeOfDay),this.updateRadioButton(),this.updatePolicyStatus(),this.toggleExecutionLog())},e=>{this.loading=!1,this.showError=!0,this.errorMsg=e.statusText})}setTIme(e){this.startTime=new Date;let t=e.split(":");this.startTime.setHours(+t[0]),this.startTime.setMinutes(+t[1]),this.startTime.setMilliseconds(+t[2])}updateRadioButton(){this.associateDeviceValue=this.staleDevicePurgeObj.forceDeleteAssociatedDevices?"Yes":"No"}updatePolicyStatus(){this.policyStatus=!this.staleDevicePurgeObj.suspended}OnToggleChange(){!this.showStaleDevicePurgeForm||(this.policyStatus?this.resumePolicy():this.suspendPolicy())}changeRadio(e){this.staleDevicePurgeObj.forceDeleteAssociatedDevices="radio02-01"==e.srcElement.id}onCancel(){this.fetchPolicy()}onSubmit(){var e;this.loading=!0,this.staleDevicePurgeObj._id?(null===(e=this.staleDevicePurgeObj)||void 0===e||delete e.orgId,this.staleDevicePurgeService.updateStaleDevicePurgePolicy(this.staleDevicePurgeObj,this.staleDevicePurgeObj._id).subscribe(e=>{this.showSuccess=!0,this.successMsg=this.language.Updated_Successfully,setTimeout(()=>{this.showSuccess=!1,this.successMsg=""},1e3),this.fetchPolicy()},e=>{this.showError=!0,this.errorMsg=e.error.error,this.loading=!1})):this.staleDevicePurgeService.createStaleDevicePurgePolicy(this.staleDevicePurgeObj).subscribe(e=>{this.showSuccess=!0,this.successMsg=this.language["Successfully Created!"],this.fetchPolicy()},e=>{this.showError=!0,this.errorMsg=e.error.error,this.loading=!1})}resumePolicy(){this.staleDevicePurgeService.resumeStaleDevicePurgePolicyById(this.staleDevicePurgeObj._id,this.orgId).subscribe(e=>{this.showSuccess=!0,this.successMsg=this.language.Successfully_Resumed,setTimeout(()=>{this.fetchPolicy()},5e3)},e=>{this.showError=!0,this.errorMsg=e.error.error})}suspendPolicy(){this.staleDevicePurgeService.suspendStaleDevicePurgePolicyById(this.staleDevicePurgeObj._id,this.orgId).subscribe(e=>{this.showSuccess=!0,this.successMsg=this.language.Successfully_Suspended,setTimeout(()=>{this.fetchPolicy()},5e3)},e=>{this.showError=!0,this.errorMsg=e.error.error})}getExcLogPageCount(){this.staleDevicePurgeObj._id?this.staleDevicePurgeService.getLogCountStaleDevicePurgePolicy(this.staleDevicePurgeObj._id).subscribe(e=>{this.tableCount=e.count,this.viewExecutionLog?this.redraw():(this.getExcLogPolicy(e.count),this.viewExecutionLog=!0)}):(this.viewExecutionLog=!0,this.tableOptions={processing:!1,ordering:!1,dom:"t"})}hideError(){this.showError=!1,this.errorMsg=""}hideSuccess(){this.showSuccess=!1,this.successMsg=""}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}onSelectStartTime(e){let t=("0"+new Date(e).getHours()).substr(-2),n=("0"+new Date(e).getMinutes()).substr(-2),i=("0"+new Date(e).getSeconds()).substr(-2);this.staleDevicePurgeObj.schedule.startTimeOfDay=(t+":"+n+":"+i).toString()}onFrequencyChange(){this.staleDevicePurgeObj.schedule.days="Weekly"==this.staleDevicePurgeObj.schedule.frequency?"Mon":"1"}toggleExecutionLog(){this.getExcLogPageCount()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.s),c.Y36(g.t6),c.Y36(f),c.Y36(h.eN),c.Y36(b.Dx),c.Y36(m.s),c.Y36(v.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-stale-device-purge"]],viewQuery:function(e,t){if(1&e&&c.Gf(a.G,5),2&e){let e;c.iGM(e=c.CRH())&&(t.dtElement=e.first)}},decls:2,vars:2,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],["id","state-device-purge","class","tab-pane position-relative",4,"ngIf"],["role","alert",1,"alert","alert-warning"],["id","state-device-purge",1,"tab-pane","position-relative"],["class","w-100 alert alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert alert-success  fade show",4,"ngIf"],["class","loader",4,"ngIf"],[1,"d-block","d-sm-none","ccl-Secondary-title","mb-2","col-md-12","border-bottom"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-6","col-xl-6","pt-3"],["id","ssp-configuration",1,"title","border-bottom"],["id","stale-device-purge-form","novalidate","",1,"form-group","ccl-form",3,"ngSubmit"],["myForm","ngForm"],["class","form-group row ccl-form",4,"ngIf"],[1,"form-group","row","ccl-form","required"],["for","name",1,"col-md-12","col-form-label"],[1,"error"],[1,"col-md-12",3,"ngClass"],["id","name","type","text","name","name","required","","aria-required","true","aria-describedby","name-error","aria-invalid","true","autocomplete","new-password","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange"],["name","ngModel"],[1,"input-close"],["src","assets/img/ic_close-44px.svg","alt","",3,"click"],["class","errorMessage","id","name-error",4,"ngIf"],[1,"form-group","row","ccl-form"],["for","description",1,"col-md-12","col-form-label"],["id","description","type","text","name","description","required","","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange"],["description","ngModel"],["class","errorMessage pl-3","id","description-error",4,"ngIf"],["for","InactivityPeriod",1,"col-md-12","col-form-label"],["id","InactivityPeriod","type","","required","","customNumMin","1","customNeg","","name","InactivityPeriod","data-toggle","tooltip","data-placement","bottom","aria-required","true","aria-describedby","InactivityPeriod-error","aria-invalid","true","autocomplete","new-password","trimSpace","",1,"form-control",3,"ngModel","title","formValue","ngModelChange"],["InactivityPeriod","ngModel"],["class","errorMessage","id","InactivityPeriod-error",4,"ngIf"],["for","frequency",1,"col-md-12","col-form-label"],["required","","aria-required","true","aria-describedby","InactivityPeriod-error","aria-invalid","true","autocomplete","new-password","data-toggle","tooltip","data-placement","bottom","id","frequency","name","frequency","bindLabel","name","bindValue","id","aria-required","true","aria-describedby","frequency-error","aria-invalid","true",3,"title","searchable","items","placeholder","clearable","ngModel","change","ngModelChange"],["frequency","ngModel"],["ng-label-tmp",""],["ng-option-tmp",""],["id","frequency-error",4,"ngIf"],["class","form-group row ccl-form required",4,"ngIf","ngIfElse"],["monthlyBlock",""],["for","startTime",1,"col-md-12","col-form-label"],[1,"custom-datepicker"],["required","","name","startTime","data-toggle","tooltip","data-placement","bottom","id","startTime","hourFormat","12","readonlyInput","true","timeOnly","true","aria-required","true","aria-describedby","Time-error","aria-invalid","true",3,"title","ngModel","showIcon","onSelect","ngModelChange"],["Time","ngModel"],["id","Time-error",4,"ngIf"],[1,"dropdown-close","mr-3"],["for","timeZone",1,"col-md-12","col-form-label"],["id","timezone","name","timeZOne","required","","data-toggle","tooltip","data-placement","bottom","bindLabel","name","bindValue","name","aria-required","true","aria-describedby","Time-error","aria-invalid","true",3,"title","items","placeholder","searchable","clearable","ngModel","ngModelChange"],["timezone","ngModel"],[4,"ngIf"],[1,"dropdown-close"],[1,"col-md-12"],[1,"custom01"],["type","radio","id","radio02-02","name","associateDevices","value","No",3,"ngModel","ngModelChange","change"],["associateDevices","ngModel"],["for","radio02-02","data-toggle","tooltip","data-placement","bottom",1,"mr-3",3,"title"],["type","radio","id","radio02-01","required","","name","associateDevices","value","Yes",3,"ngModel","ngModelChange","change"],["for","radio02-01","data-toggle","tooltip","data-placement","bottom",1,"mr-3",3,"title"],[1,"form-group","row"],[1,"col-sm-12","text-md-left"],["type","submit","id","submit-btn","class","btn-default primary px-3 mr-3",4,"ngIf"],["id","execution-log",1,"title","border-bottom"],["class","table-responsive","class","form-group ccl-form",4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button","id","hide-error-btn",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"d-inline"],[1,"d-inline",3,"innerHtml"],["type","button","id","hide-successs-btn",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"float-left","px-3"],[1,"checkbox","switcher"],["for","status"],["type","checkbox","name","status","id","status",3,"disabled","ngModel","change","ngModelChange"],[3,"ngClass"],["id","name-error",1,"errorMessage"],["id","description-error",1,"errorMessage","pl-3"],["id","InactivityPeriod-error",1,"errorMessage"],["id","frequency-error"],["for","dayofweek",1,"col-md-12","col-form-label"],["required","","data-toggle","tooltip","data-placement","bottom","id","dayOfWeek","name","dayofweek","bindLabel","name","bindValue","id","aria-required","true","aria-describedby","dayOfWeek-error","aria-invalid","true",3,"title","items","placeholder","clearable","ngModel","searchable","ngModelChange"],["dayOfWeek","ngModel"],["id","dayOfWeek-error",4,"ngIf"],["id","dayOfWeek-error"],["for","dayOfMonth",1,"col-md-12","col-form-label"],["required","","data-toggle","tooltip","data-placement","bottom","id","dayOfMonth","name","dayofMonth","placeholder","Select Days of month","bindLabel","id","bindValue","id","aria-required","true","aria-describedby","dayOfMonth-error","aria-invalid","true",3,"title","searchable","items","clearable","ngModel","ngModelChange"],["dayOfMonth","ngModel"],["id","dayOfMonth-error",4,"ngIf"],["id","dayOfMonth-error"],["id","Time-error"],["type","submit","id","submit-btn",1,"btn-default","primary","px-3","mr-3"],[1,"form-group","ccl-form"],["datatable","","id","excLogTable",1,"table","table-hover","table-striped",3,"dtOptions"],["scope","col"],[4,"ngFor","ngForOf"],["id","accordionTable",1,"accordion-toggle","collapsed"],[1,"align-middle"],["data-toggle","collapse",1,"dropdown-toggle","align-middle"],[1,"hide-table-padding"],[1,"collapse","in","p-3"],[1,"col-2","ignorewhitespace"],["class","row",4,"ngFor","ngForOf"],["colspan","5",1,"no-data-available"]],template:function(e,t){1&e&&(c.YNc(0,q,2,1,"div",0),c.YNc(1,te,104,75,"div",1)),2&e&&(c.Q6J("ngIf",!t.hasScopeAccess),c.xp6(1),c.Q6J("ngIf",t.hasScopeAccess))},directives:[Z.O5,O._Y,O.JL,O.F,Z.mk,O.Fj,O.Q7,_.f,O.JJ,O.On,x.D,M.v,P.w9,P.bb,P.Z2,C.f,O._,O.Wl,a.G,Z.sg],styles:['.ignorewhitespace[_ngcontent-%COMP%]{white-space:nowrap;font-weight:bold}tr.hide-table-padding[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0}.expand-button[_ngcontent-%COMP%]{position:relative}.accordion-toggle[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]:after{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);content:"-"}.accordion-toggle.collapsed[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]:after{content:"+"}  .p-calendar-w-btn .p-datepicker-trigger{max-height:38px}[_nghost-%COMP%]     .dataTables_empty{display:none}.p-calendar[_ngcontent-%COMP%]{width:100%!important}.no-data-available[_ngcontent-%COMP%]{text-align:center}.errorMsg[_ngcontent-%COMP%]{color:#c70000}.errorMsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #C70000}input[readonly][_ngcontent-%COMP%]{cursor:not-allowed!important}table.dataTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#fff!important}.input-close[_ngcontent-%COMP%]{position:absolute;top:4px;right:30px;width:11px;cursor:pointer}.dropdown-close[_ngcontent-%COMP%]{position:absolute;top:4px;right:50px;width:11px;cursor:pointer}.title[_ngcontent-%COMP%]{border-bottom:1px solid #CCCCCC;padding-bottom:9px;margin-bottom:12px;color:#1a1f22;font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left}div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}.opacity-50[_ngcontent-%COMP%]{opacity:.5}.dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]:after{transform:rotate(180deg);-webkit-transform:rotate(180deg)}']}),e})()},76149:function(e,t,n){n.d(t,{nJ:function(){return s},bX:function(){return r},B3:function(){return o},eq:function(){return a},pq:function(){return c},FK:function(){return l},ek:function(){return g},jX:function(){return u},hF:function(){return d},GB:function(){return h},gn:function(){return p},ob:function(){return f},z9:function(){return b},L:function(){return m},VB:function(){return v},KU:function(){return Z},yz:function(){return O}});const i=n(92340).N.SUPPORT_URL,s=i+"/netops-selfheal/wifi-optimization/org/config",r=i+"/netops-selfheal/wifi-optimization/org/config",o=i+"/netops-stale-device-purge/policy",a=i+"/netops-stale-device-purge/policy",c=i+"/netops-stale-device-purge/policy",l=i+"/netops-stale-device-purge/policy-exec-logs",g=i+"/netops-stale-device-purge/policy-exec-logs/count",u=i+"/netops-stale-device-purge/policy",d=i+"/netops-secure/onboarding",h=i+"/netops-secure/onboarding/update",p=i+"/netops-exts/external-server",f=i+"/netops-exts/external-server",b=i+"/netops-exts/external-server",m=i+"/device-systools/site-scan/orgConfig",v=i+"/device-systools/site-scan/orgConfig",Z=i+"/orgIdReport/download",O=i+"/useraudit/downloadLogByNFS"}}]);