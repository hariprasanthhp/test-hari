"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[6854],{27107:function(e,t,s){s.d(t,{D:function(){return a}});var i=s(92340),n=s(37716),r=s(91841);let a=(()=>{class e{constructor(e){this.http=e}updateSettings(e,t){return this.http.put(`${i.N.FOUNDATION_BASE_URL}subscriber-systems/org-config/delete-and-factory-reset?orgId=${e}`,t)}getSettings(e){return this.http.get(`${i.N.FOUNDATION_BASE_URL}subscriber-systems/org-config/delete-and-factory-reset?orgId=${e}`)}updateIQSuitesConfigs(e,t){return this.http.put(`${i.N.FOUNDATION_BASE_URL}subscriber-systems/org-config/iq-suites?orgId=${e}`,t)}getIQSuitesConfigs(e){return this.http.get(`${i.N.FOUNDATION_BASE_URL}subscriber-systems/org-config/iq-suites?orgId=${e}`)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},86854:function(e,t,s){s.r(t),s.d(t,{FoundationModule:function(){return Z}});var i=s(38583),n=s(39895),r=s(5457),a=s(18202),o=s(96951),c=s(48705),l=s(46517),g=s(22098),u=s(99225),d=s(57556),h=s(37716);const p=[{path:"",component:u.y,children:[{path:"block_page_template_list",component:a.t,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template/:id",component:r.w,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template",component:r.w,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template_update/:id",component:o.U,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel",component:g.e,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel-create",component:c.x,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel-update",component:l.E,data:{title:"Calix Cloud - Org Admin"}},{path:"system_settings",component:d.d,data:{title:"Calix Cloud - Org Admin"}},{path:"",redirectTo:"system_settings",pathMatch:"full"}]}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[n.Bz.forChild(p)],n.Bz]}),e})();var m=s(3679);let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[i.ez,f,m.u5,m.UX]]}),e})()},57556:function(e,t,s){s.d(t,{d:function(){return Z}});var i=s(3679),n=s(89097),r=(s(92340),s(37716)),a=s(7450),o=s(12664),c=s(49342),l=s(27107),g=s(39895),u=s(38583);function d(e,t){if(1&e&&(r.TgZ(0,"div",6),r.TgZ(1,"div",7),r.TgZ(2,"div",8),r.TgZ(3,"div",9),r.TgZ(4,"span",10),r._uU(5),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(5),r.Oqu(e.language.Loading)}}function h(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11),r.TgZ(1,"span",12),r._UZ(2,"img",13),r.qZA(),r.TgZ(3,"button",14),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeAlert()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",15),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.Q6J("innerHtml",e.errorInfo,r.oJD)}}function p(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16),r.TgZ(1,"span",17),r._UZ(2,"img",18),r.qZA(),r.TgZ(3,"button",14),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeAlert()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",15),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.Q6J("innerHtml",e.successInfo,r.oJD)}}function f(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",25),r.TgZ(1,"div",37),r.TgZ(2,"button",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).reset()}),r._uU(3),r.qZA(),r.TgZ(4,"button",39),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).save()}),r._uU(5),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(3),r.Oqu(e.language.reset),r.xp6(2),r.Oqu(e.language.submit)}}function m(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"form",19),r.TgZ(1,"div",20),r.TgZ(2,"div",21),r.TgZ(3,"div",22),r.TgZ(4,"h4",23),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"div",24),r.TgZ(7,"div",25),r.TgZ(8,"label",26),r._uU(9),r.qZA(),r.TgZ(10,"div",27),r.TgZ(11,"div",28),r.TgZ(12,"label",29),r.TgZ(13,"input",30),r.NdJ("change",function(){return r.CHM(e),r.oxw().changeDeletSubscriber()}),r.qZA(),r.TgZ(14,"span",31),r._UZ(15,"small"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",25),r.TgZ(17,"label",26),r._uU(18),r.qZA(),r.TgZ(19,"div",27),r.TgZ(20,"div",28),r.TgZ(21,"label",32),r.TgZ(22,"input",33),r.NdJ("change",function(){return r.CHM(e),r.oxw().changeFactoryResetOnDelete()}),r.qZA(),r.TgZ(23,"span",31),r._UZ(24,"small"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(25,"div",25),r.TgZ(26,"label",26),r._uU(27),r.qZA(),r.TgZ(28,"div",27),r.TgZ(29,"div",28),r.TgZ(30,"label",34),r.TgZ(31,"input",35),r.NdJ("change",function(){return r.CHM(e),r.oxw().changeFactoryResetOnReplace()}),r.qZA(),r.TgZ(32,"span",31),r._UZ(33,"small"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(34,f,6,2,"div",36),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("formGroup",e.settingsForm),r.xp6(5),r.Oqu(e.language.Settings?e.language.Settings:""),r.xp6(4),r.hij(" ",e.language["Delete all associated system(s) when deleting a subscriber"],""),r.xp6(9),r.hij(" ",e.language["Factory Reset when deleting a system"],""),r.xp6(9),r.hij(" ",e.language["Factory Reset when replacing a system"],""),r.xp6(7),r.Q6J("ngIf",e.showSaveButtons)}}let Z=(()=>{class e{constructor(e,t,s,i,n,r){this.translateService=e,this.dialogService=t,this.ssoService=s,this.commonOrgService=i,this.service=n,this.router=r,this.showSaveButtons=!1,this.settings={deleteAssociatedSystems:!1,factoryResetOnDelete:!1,factoryResetOnRma:!1},this.hasWriteAccess=!1,this.ORG_ID=this.ssoService.getOrgId(),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}ngOnInit(){this.ssoService.getScopes(),this.router.url.includes("cco-foundation")?this.ssoService.checFoundationScope(n.Nc.WRITE)&&(this.hasWriteAccess=!0):this.hasWriteAccess=!0,this.settingsForm=new i.cw({deleteAssociatedSystems:new i.NI(!1),factoryResetOnDelete:new i.NI(!1),factoryResetOnRma:new i.NI(!1)}),this.closeAlert(),this.getSettings()}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.getListSubs&&this.getListSubs.unsubscribe(),this.updateListSubs&&this.updateListSubs.unsubscribe()}getSettings(){this.loading=!0,this.showSaveButtons=!1,this.getListSubs=this.service.getSettings(this.ORG_ID).subscribe(e=>{e&&0!==Object.keys(e).length?(this.settings=e,this.loading=!1):this.settings={deleteAssociatedSystems:!1,factoryResetOnDelete:!1,factoryResetOnRma:!1},this.settingsForm.patchValue(this.settings)},e=>{this.pageErrorHandle(e),this.settings={deleteAssociatedSystems:!1,factoryResetOnDelete:!1,factoryResetOnRma:!1},this.settingsForm.patchValue(this.settings),this.loading=!1})}changeDeletSubscriber(){this.changeForm()}changeFactoryResetOnDelete(){this.changeForm()}changeFactoryResetOnReplace(){this.changeForm()}changeForm(){let e=JSON.stringify(this.settingsForm.value),t=JSON.stringify(this.settings);this.showSaveButtons=e!==t}reset(){this.getSettings()}save(){this.loading=!0,this.updateListSubs=this.service.updateSettings(this.ORG_ID,this.settingsForm.value).subscribe(e=>{this.getSettings()},e=>{this.pageErrorHandle(e),this.loading=!1})}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),setTimeout(()=>{this.error=!0,this.loading=!1},500)}closeAlert(){this.error=!1,this.success=!1}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(a.s),r.Y36(o.FF),r.Y36(n.t6),r.Y36(c.v),r.Y36(l.D),r.Y36(g.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-system-delete-settings"]],decls:6,vars:4,consts:[[1,"loader-wrapper"],["class","loader-wrapper-info",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"container","sys-contain"],["class","ccl-form needs-validation",3,"formGroup",4,"ngIf"],[1,"loader-wrapper-info"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"ccl-form","needs-validation",3,"formGroup"],[1,"row"],[1,"col-md-10","col-md-4","col-sm-12","pr-5","pl-0"],[1,""],[1,"user-name"],[1,"ccl-form","mt-4","needs-validation","mt-3"],[1,"form-group","inline-input","row"],[1,"col-md-6","col-form-label"],[1,"col-md-6"],[1,"toggle-swtbtn","checkbox","switcher"],["for","delete_subscriber"],["type","checkbox","id","delete_subscriber","formControlName","deleteAssociatedSystems",3,"change"],[1,"enabled_button"],["for","factory_reset_delete"],["type","checkbox","id","factory_reset_delete","formControlName","factoryResetOnDelete",3,"change"],["for","factory_reset_repl"],["type","checkbox","id","factory_reset_repl","formControlName","factoryResetOnRma",3,"change"],["class","form-group inline-input row",4,"ngIf"],[1,"col-md-10","offset-md-2","text-right"],[1,"btn-default","primary","md-btn","mr-2",3,"click"],[1,"btn-default","primary","md-btn","px-0",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,d,6,1,"div",1),r.YNc(2,h,6,1,"div",2),r.YNc(3,p,6,1,"div",3),r.TgZ(4,"div",4),r.YNc(5,m,35,6,"form",5),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngIf",t.error),r.xp6(1),r.Q6J("ngIf",t.success),r.xp6(2),r.Q6J("ngIf",t.hasWriteAccess))},directives:[u.O5,i._Y,i.JL,i.sg,i.Wl,i.JJ,i.u],styles:[""]}),e})()}}]);