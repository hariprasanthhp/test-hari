"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[277],{30277:function(e,t,n){n.r(t),n.d(t,{FoundationReportsModule:function(){return f}});var o=n(38583),s=n(39895),i=n(89097),r=n(37716),c=n(7450);let a=(()=>{class e{constructor(e,t){this.translateService=e,this.sso=t,this.language={},this.showInventoryReport=!1,this.showUnassociatedDevices=!1,this.showCallOutcome=!1}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.sso.checFoundationScope(i.Nc.READ)&&(this.showCallOutcome=!0,this.showUnassociatedDevices=!0,this.showInventoryReport=!0)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(c.s),r.Y36(i.t6))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-foundation-reports"]],decls:3,vars:0,consts:[[1,"row"],[1,"col-sm-12","col-md-10","col-lg-10","pl-4"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"router-outlet"),r.qZA(),r.qZA())},directives:[s.lC],styles:[""]}),e})();var l=n(32964),u=n(95139),d=n(17507);const g=[{path:"",component:a,children:[{path:"inventory-report",component:l.g,data:{title:"Calix Cloud - Flow Configuration"}},{path:"call-outcome-report",component:u.S,data:{title:"Calix Cloud - Flow Configuration"}},{path:"unassociated-devices",component:d.k,data:{title:"Calix Cloud - Flow Configuration"}},{path:"",redirectTo:"inventory-report",pathMatch:"full"}]}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),e})();var h=n(86640);let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[o.ez,h.A0,p]]}),e})()},95139:function(e,t,n){n.d(t,{S:function(){return v}});var o=n(92340),s=n(37716),i=n(7450),r=n(90048),c=n(89097),a=n(44727),l=n(39895),u=n(39075),d=n(94802),g=n(38583),p=n(3679),h=n(86640);function f(e,t){if(1&e&&(s.TgZ(0,"div",2),s.TgZ(1,"div",3),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language.Call_Outcome_Report)}}function m(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"span",15),s._UZ(2,"img",16),s.qZA(),s.TgZ(3,"button",17),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(2);return t.isModalError=!t.isModalError}),s._UZ(4,"span"),s.qZA(),s.TgZ(5,"div",18),s._uU(6),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(6),s.Oqu(e.language["No data available"])}}function b(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"span",15),s._UZ(2,"img",16),s.qZA(),s.TgZ(3,"button",17),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(2);return t.isError=!t.isError}),s._UZ(4,"span"),s.qZA(),s.TgZ(5,"div",18),s._uU(6),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(6),s.Oqu(e.alertMessage)}}function _(e,t){if(1&e&&(s.TgZ(0,"div",19),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.hij(" ",e.language.Time_Period_Report_Error," ")}}const C=function(){return{standalone:!0}};function O(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",4),s.YNc(1,m,7,1,"div",5),s.YNc(2,b,7,1,"div",5),s.TgZ(3,"div",6),s.TgZ(4,"form",7),s.TgZ(5,"div",8),s.TgZ(6,"ng-select",9,10),s.NdJ("change",function(){return s.CHM(e),s.oxw().onChangeTimePeriod()})("ngModelChange",function(t){return s.CHM(e),s.oxw().selectedTimePeriod=t}),s.qZA(),s.YNc(8,_,2,1,"div",11),s.qZA(),s.TgZ(9,"div",12),s.TgZ(10,"button",13),s.NdJ("click",function(){return s.CHM(e),s.oxw().downloadReportFile()}),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(7),t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.isModalError),s.xp6(1),s.Q6J("ngIf",t.isError),s.xp6(4),s.s9C("placeholder",t.language.Time_Period),s.Q6J("searchable",!1)("clearable",!1)("items",t.timePeriod)("ngModel",t.selectedTimePeriod)("ngModelOptions",s.DdM(11,C)),s.xp6(2),s.Q6J("ngIf",(null==e?null:e.invalid)&&t.submit),s.xp6(2),s.Q6J("disabled",t.bttnDissable),s.xp6(1),s.Oqu(t.language.Download_Report)}}let v=(()=>{class e{constructor(e,t,n,o,s,i,r){this.translateService=e,this.downloadService=t,this.sso=n,this.callOutcomeReportService=o,this.router=s,this.titleService=i,this.service=r,this.timePeriod=[{name:"Last 30 days",id:"30D"},{name:"Last 60 days",id:"60D"},{name:"Last 90 days",id:"90D"}],this.hasWriteAccess=!1,this.isModalError=!1,this.hasScopeAccess=!1,this.bttnDissable=!1,this.submit=!1,this.alertMessage="",this.orgId=this.sso.getOrgId()}setTitle(){this.router.url.includes("support/netops-management/reports/call-outcome-report")?this.titleService.setTitle(`${this.language.Call_Outcome_Report} - ${this.language.Reports} - ${this.language.NetOps} - ${this.language.Service} - ${this.language["Calix Cloud"]}`):this.titleService.setTitle(`${this.language["Call Outcome"]} - ${this.language.Reports} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.setTitle(),this.timePeriod=[{name:this.language.Last_30_days,id:"30D"},{name:this.language.Last_60_days,id:"60D"},{name:this.language.Last_90_days,id:"90D"}]}),this.setTitle();let e=this.sso.getScopes();this.router.url.includes("cco/operations/cco-reports")?o.N.VALIDATE_SCOPE?(e["cloud.rbac.coc.operations.report.calloutcomereports"]=e["cloud.rbac.coc.operations.report.calloutcomereports"]?e["cloud.rbac.coc.operations.report.calloutcomereports"]:[],e&&e["cloud.rbac.coc.operations.report.calloutcomereports"].length&&(this.hasScopeAccess=!0),e&&e["cloud.rbac.coc.operations.report.calloutcomereports"]&&-1!==e["cloud.rbac.coc.operations.report.calloutcomereports"].indexOf("write")&&(this.hasWriteAccess=!0)):this.hasWriteAccess=!0:o.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.netops.reports.call_outcome"]=e["cloud.rbac.csc.netops.reports.call_outcome"]?e["cloud.rbac.csc.netops.reports.call_outcome"]:[],e&&e["cloud.rbac.csc.netops.reports.call_outcome"].length&&(this.hasScopeAccess=!0),e&&e["cloud.rbac.csc.netops.reports.call_outcome"]&&-1!==e["cloud.rbac.csc.netops.reports.call_outcome"].indexOf("write")&&(this.hasWriteAccess=!0)):this.hasWriteAccess=!0,this.hasScopeAccess&&(this.sso.setPageAccess(!0),this.timePeriod=[{name:this.language.Last_30_days,id:"30D"},{name:this.language.Last_60_days,id:"60D"},{name:this.language.Last_90_days,id:"90D"}])}downloadReportFile(){if(this.submit=!0,!this.selectedTimePeriod)return;this.isError=!1,this.isModalError=!1;let e=this.getTimezoneName();this.callOutcomeReportService.getCallOutcomeFilePath(this.orgId,this.selectedTimePeriod,e).subscribe(e=>{this.selectedTimePeriod=null,null!=(e=null==e?void 0:e.replace(/"/g,""))?this.downloadService.saveToDisk(e):this.isModalError=!0,this.isError=!1,this.submit=!1},e=>{this.isError=!0,this.pageErrorHandle(e)})}ngOnDestroy(){this.languageSubject.unsubscribe()}onChangeTimePeriod(){this.bttnDissable=!this.selectedTimePeriod}getTimezoneName(){return Intl.DateTimeFormat().resolvedOptions().timeZone}pageErrorHandle(e,t=""){if(401==e.status)this.alertMessage=this.language["Access Denied"];else if(500==e.status&&"callcoutcome"==t)this.alertMessage=this.language.internalServerError;else if(400==e.status){let t=JSON.parse(e.error);this.alertMessage=t.errorMessage}else this.alertMessage=this.sso.pageErrorHandle(e);this.isError=!0,$("body").scrollTop(0)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(i.s),s.Y36(r.K),s.Y36(c.t6),s.Y36(a.B),s.Y36(l.F0),s.Y36(u.Dx),s.Y36(d.Q))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-call-outcome-report"]],decls:2,vars:2,consts:[["class","row no-gutters my-3",4,"ngIf"],["id","call-outcome-report","class","tab-pane",4,"ngIf"],[1,"row","no-gutters","my-3"],[1,"d-block","d-sm-none","ccl-Secondary-title","mb-2","col-md-12","border-bottom"],["id","call-outcome-report",1,"tab-pane"],["class","py-3 alert alert-danger",4,"ngIf"],["id","netops_callOutcomeReport_formdiv",1,"row","pb-2"],[1,"w-100"],[1,"col-4","mb-3"],["id","timePeriod","name","timePeriod","bindLabel","name","autofocus","","bindValue","id","name","rttype","required","",3,"searchable","clearable","items","placeholder","ngModel","ngModelOptions","change","ngModelChange"],["rttype","ngModel"],["class","errorMessage",4,"ngIf"],[1,"col-md-12"],["type","button","id","netops_callOutcomeReport_download",1,"btn-default","primary","px-3","mb-2",3,"disabled","click"],[1,"py-3","alert","alert-danger"],[1,"success-img"],["src","./assets/img/error-icon.svg"],["type","button","id","close-error-btn","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],[1,"d-inline-flex"],[1,"errorMessage"]],template:function(e,t){1&e&&(s.YNc(0,f,3,1,"div",0),s.YNc(1,O,12,12,"div",1)),2&e&&(s.Q6J("ngIf",t.hasScopeAccess),s.xp6(1),s.Q6J("ngIf",t.hasScopeAccess))},directives:[g.O5,p._Y,p.JL,p.F,h.w9,p.Q7,p.JJ,p.On],styles:["div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}form[_ngcontent-%COMP%]{width:100%}"]}),e})()},44727:function(e,t,n){n.d(t,{B:function(){return l}});var o=n(91841),s=n(40205),i=n(5304),r=n(76149),c=n(37716),a=n(89097);let l=(()=>{class e{constructor(e,t){this.http=e,this.Sso=t}getCallOutcomeFilePath(e,t,n){const s=(new o.LE).set("duration",t).set("timezone",n);return this.Sso.getOrg(e)&&s.set("orgId",e),this.http.get(r.KU,{params:s,responseType:"text"}).pipe((0,i.K)(this.handleError))}getAuditReportFilePath(e,t,n){const s=(new o.LE).set("duration",t).set("timeZone",n);return this.Sso.getOrg(e)&&s.set("orgId",e),this.http.get(r.yz,{params:s,responseType:"text"}).pipe((0,i.K)(this.handleError))}handleError(e){return(0,s._)(e)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(o.eN),c.LFG(a.t6))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},76149:function(e,t,n){n.d(t,{nJ:function(){return s},bX:function(){return i},B3:function(){return r},eq:function(){return c},pq:function(){return a},FK:function(){return l},ek:function(){return u},jX:function(){return d},hF:function(){return g},GB:function(){return p},gn:function(){return h},ob:function(){return f},z9:function(){return m},L:function(){return b},VB:function(){return _},KU:function(){return C},yz:function(){return O}});const o=n(92340).N.SUPPORT_URL,s=o+"/netops-selfheal/wifi-optimization/org/config",i=o+"/netops-selfheal/wifi-optimization/org/config",r=o+"/netops-stale-device-purge/policy",c=o+"/netops-stale-device-purge/policy",a=o+"/netops-stale-device-purge/policy",l=o+"/netops-stale-device-purge/policy-exec-logs",u=o+"/netops-stale-device-purge/policy-exec-logs/count",d=o+"/netops-stale-device-purge/policy",g=o+"/netops-secure/onboarding",p=o+"/netops-secure/onboarding/update",h=o+"/netops-exts/external-server",f=o+"/netops-exts/external-server",m=o+"/netops-exts/external-server",b=o+"/device-systools/site-scan/orgConfig",_=o+"/device-systools/site-scan/orgConfig",C=o+"/orgIdReport/download",O=o+"/useraudit/downloadLogByNFS"}}]);