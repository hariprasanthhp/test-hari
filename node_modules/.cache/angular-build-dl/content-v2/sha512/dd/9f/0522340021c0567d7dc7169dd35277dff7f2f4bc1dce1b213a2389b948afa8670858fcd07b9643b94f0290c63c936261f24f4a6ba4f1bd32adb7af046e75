!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(a=n.key,s=void 0,"symbol"==typeof(s=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?s:String(s)),n)}var a,s}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[6873],{26873:function(e,n,a){a.r(n),a.d(n,{OrgAdminsModule:function(){return Q}});var s=a(38583),r=a(3679),o=a(39895),l=a(23771),c=a(79765),u=a(92340),d=a(37716),g=a(49342),f=a(30900),h=a(53668),m=a(91841),p=a(89097),v=a(12664),b=a(39075);function y(t,e){1&t&&(d.TgZ(0,"div",7),d.TgZ(1,"div",8),d.TgZ(2,"div",9),d.TgZ(3,"span",10),d._uU(4,"Loading..."),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function A(t,e){if(1&t){var i=d.EpF();d.TgZ(0,"div",11),d.TgZ(1,"span",12),d._UZ(2,"img",13),d.qZA(),d.TgZ(3,"button",14),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",15),d.qZA()}if(2&t){var n=d.oxw();d.xp6(5),d.Q6J("innerHtml",n.errorInfo,d.oJD)}}function Z(t,e){if(1&t){var i=d.EpF();d.TgZ(0,"div",16),d.TgZ(1,"span",17),d._UZ(2,"img",18),d.qZA(),d.TgZ(3,"button",14),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",15),d.qZA()}if(2&t){var n=d.oxw();d.xp6(5),d.Q6J("innerHtml",n.successInfo,d.oJD)}}function T(t,e){if(1&t&&(d.TgZ(0,"div",19),d.TgZ(1,"div",20),d._uU(2),d.qZA(),d.qZA()),2&t){var i=d.oxw();d.xp6(2),d.AsE("",i.ORG_NAME," ",i.language.adminsList,"")}}function C(t,e){if(1&t){var i=d.EpF();d.TgZ(0,"div",19),d.TgZ(1,"div",21),d.TgZ(2,"div",22),d.TgZ(3,"div",23),d._UZ(4,"div",24),d.TgZ(5,"div",25),d.TgZ(6,"div",26),d.TgZ(7,"input",27,28),d.NdJ("keyup",function(t){return d.CHM(i),d.oxw().search(t.target.value)})("search",function(t){return d.CHM(i),d.oxw().search(t.target.value)}),d.qZA(),d.TgZ(9,"span",29),d.NdJ("click",function(){d.CHM(i);var t=d.MAs(8);return d.oxw().onSearchClearing(t)}),d._UZ(10,"img",30),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){var n=d.oxw();d.xp6(7),d.s9C("placeholder",n.language.searchAdmins),d.xp6(2),d.Q6J("hidden",!n.searchClearable)}}function _(t,e){if(1&t&&(d.TgZ(0,"tr",38),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.qZA()),2&t){var i=e.$implicit;d.s9C("id",i._id),d.xp6(2),d.Oqu(i.firstName?i.firstName:""),d.xp6(2),d.Oqu(i.lastName?i.lastName:""),d.xp6(2),d.Oqu(i.email?i.email:"")}}function S(t,e){if(1&t&&(d.TgZ(0,"tbody"),d.YNc(1,_,7,4,"tr",37),d.qZA()),2&t){var i=d.oxw(3);d.xp6(1),d.Q6J("ngForOf",i.adminsTableData)}}function x(t,e){if(1&t&&(d.TgZ(0,"tbody"),d.TgZ(1,"tr"),d.TgZ(2,"td",39),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&t){var i=d.oxw(3);d.xp6(3),d.Oqu(i.searchClearable?i.language["No matching records found"]:i.language["No data available in table"])}}function O(t,e){if(1&t&&(d.TgZ(0,"div",33),d.TgZ(1,"table",34),d.TgZ(2,"thead",35),d.TgZ(3,"tr"),d.TgZ(4,"th"),d._uU(5),d.qZA(),d.TgZ(6,"th"),d._uU(7),d.qZA(),d.TgZ(8,"th"),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.YNc(10,S,2,1,"tbody",36),d.YNc(11,x,4,1,"tbody",36),d._UZ(12,"tbody"),d.qZA(),d.qZA()),2&t){var i=d.oxw(2);d.xp6(1),d.Q6J("dtOptions",i.dtOptions),d.xp6(4),d.Oqu(i.language.firstname),d.xp6(2),d.Oqu(i.language.lastname),d.xp6(2),d.Oqu(i.language.emailAddress),d.xp6(1),d.Q6J("ngIf",0!=(null==i.adminsTableData?null:i.adminsTableData.length)),d.xp6(1),d.Q6J("ngIf",0==(null==i.adminsTableData?null:i.adminsTableData.length)||"undefined"!=i.adminsCount&&0===i.adminsCount||"undefined"!=i.filterCount&&0===i.filterCount)}}function w(t,e){if(1&t&&(d.TgZ(0,"div",31),d.YNc(1,O,13,6,"div",32),d.qZA()),2&t){var i=d.oxw();d.xp6(1),d.Q6J("ngIf",i.dataAvailable)}}var D,q=a(91704),I=((D=function(){function e(i,n,a,s,r,o,l,u){var d=this;t(this,e),this.commonOrgService=i,this.router=n,this.customTranslateService=a,this.organizationApiService=s,this.http=r,this.sso=o,this.dialogService=l,this.titleService=u,this.pageAvailable=!1,this.adminsTableData=[],this.dtTrigger=new c.xQ,this.isCalixAdminModule=!1,this.errorInfo="",this.successInfo="",this.MODULE="systemAdministration",this.filterCount=0,this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!0,dom:"tipr",columnDefs:[{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:function(t){t._iRecordsDisplay<=t._iDisplayLength&&q(t.nTableWrapper).find("#admins-table_last").addClass("disabled")}},this.isLoggedUserSameOrganization=!1,this.loader=!1,this.loading=!0,this.ORG_NAME="",this.searchClearable=!1;var g=this.router.url;this.ORG_ID=this.sso.getOrgId(),this.ORG_NAME=this.sso.getOrgName(),this.MODULE=this.sso.getRedirectModule(g),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(t){d.language=t,setTimeout(function(){d.redraw()},500),d.titleService.setTitle("".concat(d.language["Organization Admins"]," - ").concat("systemAdministration"===d.MODULE?d.language["System Administration"]:d.language.administration," - ").concat(d.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language["Organization Admins"]," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.commonOrgService.currentPageAdder("org-admins"),this.getadminsCount(),this.frTable=this.customTranslateService.fr}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.closeAlert(),this.tableLanguageOptions(),q("body").off("click",".languageContent ul li a"),q("body").on("click",".languageContent ul li a",function(){t.changeTableStatusLanguage({_iDisplayStart:t.tableCounts.start,_iDisplayLength:t.tableCounts.displayCount,_iRecordsDisplay:t.tableCounts.displayed,_iRecordsTotal:t.tableCounts.total,oPreviousSearch:{sSearch:t.tableCounts.searchText}})})}},{key:"ngOnDestroy",value:function(){q("body").off("click",".languageContent ul li a"),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.rolesDeleteSubs&&this.rolesDeleteSubs.unsubscribe()}},{key:"getadminsCount",value:function(){var t=this;this.http.get("".concat(u.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/orgadmin/users/_count")).subscribe(function(e){t.adminsCount=e,t.dataAvailable=!0,t.tableRender()},function(e){t.pageErrorHandle(e),t.dataAvailable=!0,t.tableRender(),t.loading=!1})}},{key:"tableRender",value:function(){var t=this,e="".concat(u.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/orgadmin/users"),i=this;this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!1,dom:"tipr",columnDefs:[{targets:[0],orderable:!0}],order:[0,"asc"],ajax:function(n,a){t.sortBy=n.order[0].column,t.sortType=n.order[0].dir,i.callCount(n.search.value),i.http.get("".concat(e,"?offset=").concat(n.start,"&size=").concat(n.length,"&filter=").concat(n.search.value)).subscribe(function(e){i.adminsTableData=t.sortData(e,i.sortBy,i.sortType),i.hideNoDataRow(),i.loading=!1,t.tableLanguageOptions(),setTimeout(function(){a({recordsTotal:null!=i.adminsCount?i.adminsCount:0,recordsFiltered:null!=i.filterCount?i.filterCount:i.adminsCount,data:[]})},100)},function(e){404==e.status?(i.adminsTableData=[],i.hideNoDataRow(),i.loading=!1,t.tableLanguageOptions(),setTimeout(function(){a({recordsTotal:null!=i.adminsCount?i.adminsCount:0,recordsFiltered:null!=i.filterCount?i.filterCount:i.adminsCount,data:[]})},100)):(t.pageErrorHandle(e),i.loading=!1)})},drawCallback:function(e){t.changeTableStatusLanguage(e),e._iRecordsDisplay<=e._iDisplayLength&&q(e.nTableWrapper).find("#admins-table_last").addClass("disabled")}},this.tableLanguageOptions()}},{key:"callCount",value:function(t){var e=this;this.http.get("".concat(u.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/orgadmin/users/_count?filter=").concat(t)).subscribe(function(t){e.filterCount=t})}},{key:"hideNoDataRow",value:function(){setTimeout(function(){q(".odd").css("display","none")},100)}},{key:"search",value:function(t){this.searchClearable=!!t.length,this.dtElement.dtInstance.then(function(e){e.search(t).draw()})}},{key:"onSearchClearing",value:function(t){this.searchClearable=!1,t.value="",this.dtElement.dtInstance.then(function(e){e.search(t.value).draw()})}},{key:"gotoUserDetail",value:function(t){sessionStorage.setItem("calixAdminUserDetail",JSON.stringify(t)),this.router.navigate(["".concat(this.MODULE,"/usersDetail")])}},{key:"redraw",value:function(){this.dtElement.dtInstance.then(function(t){t.draw()})}},{key:"hideSearch",value:function(){setTimeout(function(){q("#admins-list-table .dataTables_wrapper .dataTables_filter").css("display","none"),q("#admins-list-table .dataTables_wrapper .dataTables_length").css("display","none")},50)}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"sortData",value:function(t,e,i){var n=[];return 0==e?n=this.sortByColumn(t,i,"firstName"):1==e?n=this.sortByColumn(t,i,"lastName"):2==e&&(n=this.sortByColumn(t,i,"email")),n}},{key:"sortByColumn",value:function(t,e,i){return t.sort(function(t,n){var a=t[i]?t[i].toUpperCase():"",s=n[i]?n[i].toUpperCase():"";if("asc"==e){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0}),t}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"changeTableStatusLanguage",value:function(t){var e=new Intl.NumberFormat;this.tableCounts={searchText:t.oPreviousSearch.sSearch.trim(),total:t._iRecordsTotal,displayCount:t._iDisplayLength,displayed:t._iRecordsDisplay,start:t._iDisplayStart};var i="fr"==sessionStorage.getItem("defaultLanguage"),n=t.oPreviousSearch.sSearch.trim()?i?"(filtr\xe9es \xe0 partir des ".concat(e.format(t._iRecordsTotal)," entr\xe9es totales)"):"(filtered from ".concat(e.format(t._iRecordsTotal)," total entries)"):"",a=0==t._iRecordsDisplay?-1:t._iDisplayStart,s=t._iDisplayStart+t._iDisplayLength>t._iRecordsDisplay?t._iRecordsDisplay:t._iDisplayStart+t._iDisplayLength;q('div [role="status"]').text(i?"Affichage de ".concat(e.format(a+1)," \xe0 ").concat(e.format(s)," des ").concat(e.format(t._iRecordsDisplay)," entr\xe9es ").concat(n):"Showing ".concat(e.format(a+1)," to ").concat(e.format(s)," of ").concat(e.format(t._iRecordsDisplay)," entries ").concat(n)),q(".first").text(i?"Le d\xe9but":"First"),q(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),q(".next").text(i?"Suivant":"Next"),q(".last").text(i?"Derni\xe8re":"Last")}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}]),e}()).\u0275fac=function(t){return new(t||D)(d.Y36(g.v),d.Y36(o.F0),d.Y36(f.d),d.Y36(h.F),d.Y36(m.eN),d.Y36(p.t6),d.Y36(v.FF),d.Y36(b.Dx))},D.\u0275cmp=d.Xpm({type:D,selectors:[["app-admins-list"]],viewQuery:function(t,e){var i;1&t&&d.Gf(l.G,5),2&t&&d.iGM(i=d.CRH())&&(e.dtElement=i.first)},decls:8,vars:6,consts:[["id","scrollTopId",1,"container","position-relative"],["scrollTopId",""],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["class","row my-3",4,"ngIf"],["class","row my-3","style","min-height: 65vh;",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"row","my-3"],[1,"col-md-12","ccl-title"],[1,"col-md-6","offset-md-6"],[1,"text-right","flat-right"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"ccl-form","admins-list"],["type","text","name","searchbox",1,"input-sm",3,"placeholder","keyup","search"],["searchBar",""],[1,"clear-icon",3,"hidden","click"],["src","assets/img/close-icon.svg"],[1,"row","my-3",2,"min-height","65vh"],["class","col",4,"ngIf"],[1,"col"],["id","admins-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,""],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["colspan","5",1,"no-data-available"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0,1),d.YNc(2,y,5,0,"div",2),d.YNc(3,A,6,1,"div",3),d.YNc(4,Z,6,1,"div",4),d.YNc(5,T,3,2,"div",5),d.YNc(6,C,11,2,"div",5),d.YNc(7,w,2,1,"div",6),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngIf",e.loading),d.xp6(1),d.Q6J("ngIf",e.error),d.xp6(1),d.Q6J("ngIf",e.success),d.xp6(1),d.Q6J("ngIf",e.pageAvailable),d.xp6(1),d.Q6J("ngIf",1),d.xp6(1),d.Q6J("ngIf",e.pageAvailable))},directives:[s.O5,l.G,s.sg],styles:[".admins-list[_ngcontent-%COMP%]{position:relative}.admins-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;width:15%;right:16px;top:5px}.admins-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:12px}"]}),D),k=a(93517),L=a(7450),N=function(){return["active"]},U=function(){var e=function(){function e(i){t(this,e),this.translateService=i}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){t.language=e})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(L.s))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-org-admins-side-menu"]],decls:5,vars:3,consts:[[1,""],[1,"nav","flex-column","left-menu"],[1,"nav-item"],["routerLink","all",1,"list-group-item","list-group-item-action",3,"routerLinkActive"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"ul",1),d.TgZ(2,"li",2),d.TgZ(3,"a",3),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("routerLinkActive",d.DdM(2,N)),d.xp6(1),d.Oqu(e.language["Organization Admins"]))},directives:[o.yS,o.Od],styles:[""]}),e}(),R=a(93702),M=["scrollTopId"],E=[{path:"",component:function(){var e=function(){function e(i,n){var a=this;t(this,e),this.common=i,this.router=n,this.rouerSubs=this.router.events.subscribe(function(t){t instanceof o.OD&&a.common.closeAlert()})}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.scrollSubs=this.common.scrollTop.subscribe(function(){try{t.scrollTop()}catch(e){}}),this.closeSubs=this.common.closeAlerts.subscribe(function(){t.closeAlert()}),this.successSubs=this.common.successAlert.subscribe(function(e){t.openSuccessAlert(e)}),this.errorSubs=this.common.errorAlert.subscribe(function(e){t.openErrorAlert(e)})}},{key:"ngOnDestroy",value:function(){this.scrollSubs&&this.scrollSubs.unsubscribe(),this.closeSubs&&this.closeSubs.unsubscribe(),this.successSubs&&this.successSubs.unsubscribe(),this.errorSubs&&this.errorSubs.unsubscribe(),this.rouerSubs&&this.rouerSubs.unsubscribe()}},{key:"scrollTop",value:function(){this.scrollTopId.nativeElement.scrollIntoView()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"openSuccessAlert",value:function(t){t&&(this.successInfo=t,this.success=!0)}},{key:"openErrorAlert",value:function(t){t&&(this.errorInfo=t,this.error=!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(g.v),d.Y36(o.F0))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-org-admins"]],viewQuery:function(t,e){var i;(1&t&&d.Gf(M,7),2&t)&&(d.iGM(i=d.CRH())&&(e.scrollTopId=i.first))},decls:9,vars:0,consts:[[1,"maximus","sys-admin-cont"],[1,"row"],[1,"col-md-2","col-sm-3","col-xs-12","pr-2"],[1,"col-md-10","col-sm-9","col-xs-12"],["scrollTopId",""]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"app-admin-header"),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d._UZ(4,"app-org-admins-side-menu"),d.qZA(),d.TgZ(5,"div",3,4),d._UZ(7,"router-outlet"),d.qZA(),d.qZA(),d.qZA(),d._UZ(8,"app-admin-footer"))},directives:[k.G,U,o.lC,R.c],styles:[""]}),e}(),data:{title:"Calix Cloud - Org Admins"},children:[{path:"all",component:I,data:{title:"Calix Cloud - Org Admins"}},{path:"",redirectTo:"all",pathMatch:"full"}]}],J=function(){var e=i(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.Bz.forChild(E)],o.Bz]}),e}(),Y=a(35555),Q=function(){var e=i(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[s.ez,r.u5,J,Y.SysAdminModule,l.T]]}),e}()}}])}();