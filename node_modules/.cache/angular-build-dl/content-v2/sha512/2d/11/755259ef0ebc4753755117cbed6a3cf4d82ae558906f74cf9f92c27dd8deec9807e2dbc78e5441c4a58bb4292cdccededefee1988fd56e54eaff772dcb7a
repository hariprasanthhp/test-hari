!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(n=s.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"))?a:String(a)),s)}var n,a}function n(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[3290],{43290:function(t,s,a){a.r(s),a.d(s,{RealtimeModule:function(){return ee}});var r=a(38583),o=a(86640),c=a(39895),l=a(46797),u=a(40205),h=a(88002),m=a(5304),d=a(92340),g=a(37716),p=a(7450),f=a(21693),v=a(89097),b=a(49342),y=a(91841),A=a(3679),x=a(13149),S=a(39075),O=a(14541),C=a(10298),M=a(35194),w=a(79765),_=a(25917),j=a(35758),N=a(87582);function k(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",14),g.TgZ(1,"span",15),g._UZ(2,"img",16),g.qZA(),g.TgZ(3,"button",17),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeAlert()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",18),g.qZA()}if(2&e){var s=g.oxw();g.xp6(5),g.Q6J("innerHtml",s.errorInfo,g.oJD)}}function F(e,t){1&e&&g._UZ(0,"div",19)}function P(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",20),g.NdJ("click",function(){return g.CHM(i),g.oxw().export()}),g._uU(1),g.qZA()}if(2&e){var s=g.oxw();g.xp6(1),g.Oqu(s.language.Export)}}function T(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",21),g.NdJ("click",function(){return g.CHM(i),g.oxw().gotoHomeGeomap()}),g._uU(1),g.qZA()}if(2&e){var s=g.oxw();g.xp6(1),g.Oqu(s.language.Map_View)}}function I(e,t){if(1&e&&(g.TgZ(0,"th",29),g._uU(1),g.qZA()),2&e){var i=g.oxw(2);g.xp6(1),g.Oqu(i.language["Subscriber Impact"])}}function Z(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",36),g.NdJ("click",function(){g.CHM(i);var e=g.oxw(2).$implicit;return g.oxw(2).gotoSubscriberImpactedPage(e)}),g._uU(1),g.qZA()}if(2&e){var s=g.oxw(2).$implicit;g.xp6(1),g.Oqu(null==s||null==s.subject?null:s.subject.impactedSubsCount)}}function U(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",30),g.NdJ("click",function(){g.CHM(i);var e=g.oxw(2),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g.TgZ(1,"span",37),g._uU(2),g.qZA(),g.qZA()}if(2&e){var s=g.oxw(2).$implicit;g.xp6(1),g.Q6J("ngClass",null!=s&&null!=s.subject&&s.subject.serviceAffecting?"subscriber-impact-red":""),g.xp6(1),g.hij(" ",null!=s&&null!=s.subject&&s.subject.serviceAffecting?"Yes":"No"," ")}}function R(e,t){if(1&e&&(g.TgZ(0,"td"),g.YNc(1,Z,2,1,"div",34),g.YNc(2,U,3,2,"div",35),g.qZA()),2&e){var i=g.oxw().$implicit;g.xp6(1),g.Q6J("ngIf",null==i||null==i.subject?null:i.subject.impactedSubsCount),g.xp6(1),g.Q6J("ngIf",!(null!=i&&null!=i.subject&&i.subject.impactedSubsCount))}}function E(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",30),g.NdJ("click",function(){var e=g.CHM(i),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g.TgZ(2,"div"),g._UZ(3,"span",31),g._uU(4),g.qZA(),g.qZA(),g.TgZ(5,"td",30),g.NdJ("click",function(){var e=g.CHM(i),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g._uU(6),g.qZA(),g.TgZ(7,"td",30),g.NdJ("click",function(){var e=g.CHM(i),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g._uU(8),g.qZA(),g.TgZ(9,"td",30),g.NdJ("click",function(){var e=g.CHM(i),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g._uU(10),g.qZA(),g.TgZ(11,"td",30),g.NdJ("click",function(){var e=g.CHM(i),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g._UZ(12,"div",32),g.qZA(),g.YNc(13,R,3,2,"td",9),g.TgZ(14,"td",30),g.NdJ("click",function(){var e=g.CHM(i),t=e.$implicit,s=e.index;return g.oxw(2).viewDetails(t,s)}),g.TgZ(15,"div",33),g._uU(16),g.qZA(),g.qZA(),g.qZA()}if(2&e){var s=t.$implicit,n=g.oxw(2);g.xp6(2),g.Tol(s.subject&&s.subject.perceivedSeverity&&n.colorClass[s.subject.perceivedSeverity]?n.colorClass[s.subject.perceivedSeverity]:"black clear-sev-but"),g.xp6(2),g.hij(" ",s.subject?n.language[s.subject.perceivedSeverity]||s.subject.perceivedSeverity:""," "),g.xp6(2),g.hij(" ",s.subject&&s.subject.timeRaised?n.convertToDateTime(s.subject.timeRaised):"",""),g.xp6(2),g.hij(" ",s.time?n.convertToDateTime(s.time):"",""),g.xp6(2),g.hij(" ",s.subject?s.subject.alarmEventName:""," "),g.xp6(2),g.Q6J("innerHtml",s.subject.resourceForUI?s.subject.resourceForUI:"",g.oJD),g.xp6(1),g.Q6J("ngIf",n.connected),g.xp6(3),g.Oqu(s.subject?s.subject.repairAction:"")}}function D(e,t){if(1&e&&(g.TgZ(0,"tr"),g.TgZ(1,"td",38),g._uU(2),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(2),g.Oqu(i.language["No data available in table"])}}function L(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"table",22),g.TgZ(2,"thead",23),g.TgZ(3,"tr"),g.TgZ(4,"th"),g._uU(5),g.qZA(),g.TgZ(6,"th",24),g._uU(7),g.qZA(),g.TgZ(8,"th"),g._uU(9),g.qZA(),g.TgZ(10,"th"),g._uU(11),g.qZA(),g.TgZ(12,"th",25),g._uU(13),g.qZA(),g.YNc(14,I,2,1,"th",26),g.TgZ(15,"th",27),g._uU(16),g.qZA(),g.qZA(),g.qZA(),g.TgZ(17,"tbody"),g.YNc(18,E,17,10,"tr",28),g.YNc(19,D,3,1,"tr",9),g.qZA(),g.qZA(),g.BQk()),2&e){var i=g.oxw();g.xp6(5),g.hij("",i.language.Severity," "),g.xp6(2),g.AsE("",i.language["Reported Time"],"(UTC/",i.timeZone,") "),g.xp6(2),g.AsE("",i.language["Synced Time"]," (UTC/",i.timeZone,") "),g.xp6(2),g.hij("",i.language["Alarm Name"]," "),g.xp6(2),g.Oqu(i.language.Resource),g.xp6(1),g.Q6J("ngIf",i.connected),g.xp6(2),g.Oqu(i.language.Recommendation),g.xp6(2),g.Q6J("ngForOf",i.list),g.xp6(1),g.Q6J("ngIf",!(null!=i.list&&i.list.length))}}var q,J=((q=function(){function e(t,s,n,a,r,o,c,l,u){i(this,e),this.translateService=t,this.issueService=s,this.http=n,this.route=a,this.commonOrgService=r,this.exportExcelService=o,this.chartOptionService=c,this.router=l,this.sso=u,this.hasWriteAccess=!1,this.transformedAlarms=["multiple-onts-down-network","multiple-onts-down-pon","multiple-onts-down-olt"],this.urls=this.router.url,this._apiUrl="",this.baseUrl="".concat(d.N.API_BASE_URL,"analytics-engine/"),this.list=[],this.hasScopeAccess=!1,this.count=0,this.loading=!0,this.locked=!1,this.colors={MINOR:"#F3B426",MAJOR:"#FC7235",CRITICAL:"#C70000",WARNING:"#f7e9c1",INFO:"#7cb5ec"},this.colorClass={MINOR:"minor-but",MAJOR:"major-but",CRITICAL:"critical-but",WARNING:"warning-but",INFO:"severity-info-but"},this.isDev=!1,this.severity={MINOR:"assets/img/outline-error-minor.svg",MAJOR:"assets/img/outline-error-major.svg",CRITICAL:"assets/img/outline-error-red.svg",WARNING:"assets/img/outline-error-warning.svg",INFO:"assets/img/outline-error-info.svg"},this.interval=15e3,this.filtersObj={region:"Region",location:"Location",system:"System",alarmCount:"Display Limit",alarmEventName:"Exclude Alarms",limit:"Display Limit",fsan_serialno:"FSAN",device_type:"System Type"},this.filtersValue=["region","location","system","alarmCount","limit"],this.filters=["region","location","system","fsan_serialno","device_type","alarmEventName","alarmCount","limit"],this.appliedParams={},this.tableType="Table",this.refreshMap=new w.xQ,this.showAllSystemsinMapSubject=new w.xQ,this.showAllSystemsinMap=!0,this.showAckShelveBtn=!1,this.fullData={},this.hideSource=!1,this.isDev="".concat(d.N.API_BASE).indexOf("/dev.api.calix.ai")>-1}return n(e,[{key:"apiUrl",get:function(){return this._apiUrl},set:function(e){var t;null===(t=this.listObs)||void 0===t||t.unsubscribe(),this._apiUrl=e,this.urls.includes("/cco/issues/device/realtime/current-issues")}},{key:"ngOnInit",value:function(){var e,t,i,s=this;console.log("page loaded at ".concat(new Date)),-1!==(null===(e=this.sso.getScopes()["cloud.rbac.coc.issues.current"])||void 0===e?void 0:e.indexOf("write"))&&(this.hasWriteAccess=!0),this.timeZone=null===(i=null===(t=(new Date).toString())||void 0===t?void 0:t.split(" ")[5])||void 0===i?void 0:i.replace(/(.{2})$/,":$1"),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){s.language=e}),this.urls.includes("/cco/issues/device/realtime/current-issues")||this.loadIntialData(),this.filterSubscription=this.issueService.issuesFilterChanged$.subscribe(function(e){console.log("received value"),"Map"!=s.tableType&&s.loadIntialData()}),this.timer=setInterval(function(){console.log("timer triggered at ".concat(new Date)),s.loadIntialData()},this.interval)}},{key:"viewDetails",value:function(e,t){this.hideSource=!1,this.index=t,this.showAckShelveBtn=!0,this.fullData=e}},{key:"loadIntialData",value:function(){var e=this;if(console.log("api triggered at ".concat(new Date)),!this.locked){this.listObs&&this.listObs.unsubscribe(),this.locked=!0;var t=Object.assign({},this.issueService.getCurrentIssuesFilterParams());this.connected?t.alarmCount||(t.alarmCount=20):t.limit||(t.limit=20);var i="";for(var s in t)null==t[s]||"systemStatus"===s||""==t[s]||this.connected&&"limit"===s||!this.connected&&("historyReport"===s||"severity"===s||"alarmCount"===s||"alarmEventName"===s)||(""!=i&&(i+="&"),i+=s+"="+encodeURIComponent(t[s]));this.connected&&this.urls.includes("/cco/issues/device/realtime/current-issues")&&(i+="&cco_ack=false&cco_shelv=false&historyReport=false"),this.appliedParams=t;var n={},a={top:"".concat(this.apiUrl)};this.connected&&this.urls.includes("/cco/issues/device/realtime/current-issues")&&(a.top="".concat(this.apiUrl,"?severity=CRITICAL%2CMAJOR%2CMINOR%2CINFO%2CWARNING&historyReport=false&alarmCount=10")),i&&(a.top="".concat(this.apiUrl,"?").concat(i)),i||(a.top="".concat(this.apiUrl,"?alarmCount=10")),["top"].forEach(function(t){var i=e.http.get("".concat(a[t])).pipe((0,m.K)(function(e){return e["api-error"]=!0,(0,_.of)(e)}));n[t]=i}),this.listObs=(0,j.D)(n).subscribe(function(t){if(null===t.top||!t.top)return e.loading=!1,e.locked=!1,void(e.list=[]);if(t.top&&t.top["api-error"])return e.pageErrorHandle(t.top),e.loading=!1,void(e.list=[]);(t&&"object"==typeof t.top&&!t.top||t&&t.top&&!t.top["api-error"])&&(e.locked=!1),e.connected||(t.top.alarms=t.top),e.loading=!1,e.count=0;var i=[];if(t&&t.top&&t.top.alarms&&t.top.alarms.length||t.top.nfaAlarm&&t.top.nfaAlarm.length){e.count=Number(t.top.alarmCount)+Number(t.top.disconnectDeviceCount);var s=[];null==(s=t.top.alarms)||s.forEach(function(t){t&&t.subject&&t.subject.deviceName&&(t.subject.deviceName=t.subject.deviceName.replace("device=",""),t.subject.deviceName=t.subject.deviceName.replace("DEVICE=","")),t.subject.resourceForUI=e.issueService.generateResourceForUI(t,"EXA"===t.type),i.push(t)})}e.list=i},function(t){e.count=0,e.pageErrorHandle(t)})}}},{key:"convertToDateTime",value:function(e){return e?(e=Number(e),new r.uU("en-US").transform(new Date(e),"short")):void 0}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.error=!0,this.loading=!1}},{key:"closeAlert",value:function(){this.error=!1}},{key:"export",value:function(){var e,t,i,s,n=this,a=[];null===(e=this.list)||void 0===e||e.forEach(function(e){var t={Severity:"".concat(e.subject&&e.subject.perceivedSeverity?e.subject.perceivedSeverity:""),"Reported Time":"".concat(e.subject&&e.subject.timeRaised?n.convertToDateTime(e.subject.timeRaised):""),"Synced Time":"".concat(e.time?n.convertToDateTime(e.time):""),"Alarm Name":"".concat(e.subject&&e.subject.alarmEventName?e.subject.alarmEventName:""),Resource:"".concat(e.subject&&e.subject.region?e.subject.region:"").concat(e.subject&&e.subject.location?"/".concat(e.subject.location):"").concat(e.subject&&e.subject.deviceName?"/".concat(e.subject.deviceName):"",", ").concat(e.subject&&e.subject.source?e.subject.source:""," "),Region:"".concat(e.subject&&e.subject.region?e.subject.region:""),Location:e.subject&&e.subject.location?"".concat(e.subject.location):"",System:e.subject&&e.subject.deviceName?"".concat(e.subject.deviceName):"",AID:"".concat(e.subject&&e.subject.source?e.subject.source:"")};n.connected&&(t["Subscriber Impact"]="".concat(e.subject&&e.subject.serviceAffecting?e.subject.impactedSubsCount?e.subject.impactedSubsCount:"Yes":"No")),t.Recommendation="".concat(e.subject&&e.subject.repairAction?e.subject.repairAction:""),a.push(t)}),this.urls.includes("/cco/issues/device/realtime/current-issues")?(s=this.connected?"Top Alarms":"Top Disconnected Device",i="".concat(s," \r\n").concat(this.getSubTitle(this.appliedParams),"\r\n")):this.urls.includes("/cco/issues/cloud-health/realtime/current-issues")?(s=this.connected?"Cloud Health Top Alarms":"Top Disconnected Device",i="".concat(s," \r\n").concat(this.getSubTitleForAlarms(this.appliedParams),"\r\n")):this.urls.includes("/cco/issues/connectivity/realtime/current-issues")&&(s=this.connected?"Cloud Connectivity Top Alarms":"Top Disconnected Device",i="".concat(s," \r\n").concat(this.getSubTitleForAlarms(this.appliedParams),"\r\n")),(null===(t=this.list)||void 0===t?void 0:t.length)||(i+="No data available"),this.exportExcelService.downLoadCSV(s,a,i)}},{key:"getSubTitle",value:function(e){var t,i=this,s=this.chartOptionService.getRegionsObj(),n=this.chartOptionService.getLocationsObj(),a=this.chartOptionService.getSystemsObj(),o=new r.rS,c="",l={ALL:"All",ONT:"ONT",OLT:"OLT"};return null===(t=this.filters)||void 0===t||t.forEach(function(t,r){if((!i.connected||"limit"!==t)&&(i.connected||"historyReport"!==t&&"severity"!==t&&"alarmCount"!==t)&&e[t]){var u=[];"device_type"===t?u=l[e[t]]:"region"===t?"object"==typeof e[t]?e[t].forEach(function(i,n){u.push(s[e[t][n]]?s[e[t][n]].name:e[t][n])}):u.push(s[e[t]]?s[e[t]].name:e[t]):"location"===t?"object"==typeof e[t]?e[t].forEach(function(i,s){u.push(n[e[t][s]]?n[e[t][s]].name:e[t][s])}):u.push(n[e[t]]?n[e[t]].name:e[t]):"system"===t?"object"==typeof e[t]?e[t].forEach(function(i,s){u.push(a[e[t][s]]?a[e[t][s]].name:e[t][s])}):u.push(a[e[t]]?a[e[t]].name:e[t]):u=e[t],u="object"==typeof u&&-1===["fsan_serialnumber","region","location","system","customCategory","alarmEventName","category","fsan_serialno"].indexOf(t)?u.map(function(e){return o.transform(e)}):[u],c+="".concat(i.filtersObj[t],": ").concat(u.join("&")," \r\n")}}),c}},{key:"getSubTitleForAlarms",value:function(e){var t,i=this,s=this.chartOptionService.getRegionsObj(),n=this.chartOptionService.getLocationsObj(),a=this.chartOptionService.getSystemsObj(),o=new r.rS,c="";return null===(t=this.filtersValue)||void 0===t||t.forEach(function(t,r){if((!i.connected||"limit"!==t)&&(i.connected||"historyReport"!==t&&"severity"!==t&&"alarmCount"!==t)&&e[t]){var l=[];"region"===t?"object"==typeof e[t]?e[t].forEach(function(i,n){l.push(s[e[t][n]]?s[e[t][n]].name:e[t][n])}):l.push(s[e[t]]?s[e[t]].name:e[t]):"location"===t?"object"==typeof e[t]?e[t].forEach(function(i,s){l.push(n[e[t][s]]?n[e[t][s]].name:e[t][s])}):l.push(n[e[t]]?n[e[t]].name:e[t]):"system"===t?"object"==typeof e[t]?e[t].forEach(function(i,s){l.push(a[e[t][s]]?a[e[t][s]].name:e[t][s])}):l.push(a[e[t]]?a[e[t]].name:e[t]):l=e[t],l="object"==typeof l&&-1===["region","location","system"].indexOf(t)?l.map(function(e){return o.transform(e)}):[l],c+="".concat(i.filtersObj[t],": ").concat(l.join("&")," \r\n")}}),c}},{key:"refreshIssuesGeoMap",value:function(){this.refreshMap.next(!0)}},{key:"gotoSubscriberImpactedPage",value:function(e){e&&this.urls.includes("/cco/issues/device/realtime/current-issues")?e.redirectUrl="/cco/issues/device/realtime/current-issues":e&&this.urls.includes("/cco/issues/cloud-health/realtime/current-issues")?e.redirectUrl="/cco/issues/cloud-health/realtime/current-issues":e&&this.urls.includes("/cco/issues/connectivity/realtime/current-issues")&&(e.redirectUrl="/cco/issues/connectivity/realtime/current-issues"),localStorage.setItem("calix.impactedSubsFSANData",JSON.stringify(e)),this.router.navigate(["/cco/system/subscribers-impact"])}},{key:"ngOnDestroy",value:function(){var e;this.languageSubject&&this.languageSubject.unsubscribe(),this.refreshMap&&this.refreshMap.unsubscribe(),this.showAllSystemsinMapSubject&&this.showAllSystemsinMapSubject.unsubscribe(),this.geoMapfilterSubscription&&this.geoMapfilterSubscription.unsubscribe(),null===(e=this.filterSubscription)||void 0===e||e.unsubscribe(),clearInterval(this.timer)}},{key:"changeshowAllSystems",value:function(){this.showAllSystemsinMap=!this.showAllSystemsinMap,this.showAllSystemsinMapSubject.next(this.showAllSystemsinMap)}},{key:"updateShowHealthySystemToggle",value:function(e){this.showAllSystemsinMap=e,this.showAllSystemsinMapSubject.next(this.showAllSystemsinMap)}},{key:"onAckShelve",value:function(e){var t,i,s,n;void 0!==(null==e?void 0:e.ack)?(null===(t=this.list[this.index])||void 0===t?void 0:t.subject)&&(this.list[this.index].subject.ccoAck=null==e?void 0:e.ack,(null==e?void 0:e.ack)&&(null===(i=this.list)||void 0===i||i.splice(this.index,1))):void 0!==(null==e?void 0:e.shelve)&&(null===(s=this.list[this.index])||void 0===s?void 0:s.subject)&&(this.list[this.index].subject.ccoShelved=null==e?void 0:e.shelve,(null==e?void 0:e.shelve)&&(null===(n=this.list)||void 0===n||n.splice(this.index,1)))}},{key:"onRefreshAckShelve",value:function(e){this.showAckShelveBtn=!1}},{key:"gotoHomeGeomap",value:function(){this.issueService.callGotoHomeGeomap()}}]),e}()).\u0275fac=function(e){return new(e||q)(g.Y36(p.s),g.Y36(f.v),g.Y36(y.eN),g.Y36(c.gz),g.Y36(b.v),g.Y36(x.O),g.Y36(O.t),g.Y36(c.F0),g.Y36(v.t6))},q.\u0275cmp=g.Xpm({type:q,selectors:[["app-common-alarms"]],inputs:{apiUrl:"apiUrl",connected:"connected"},decls:14,vars:12,consts:[["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],[1,"row","justify-content-end","mb-3"],[1,"col-md-6"],[1,"d-flex","justify-content-end"],["class","btn-action-view mr-2",4,"ngIf"],["id","issues-real-time-export","class","btn-default btn-dft h-24-btn",3,"click",4,"ngIf"],["id","issues-real-time-export","class","btn-default btn-dft h-24-btn ml-2",3,"click",4,"ngIf"],[1,"d-flex","w-100","justify-content-end","my-2"],[1,"col-sm-12","col-md-12","p-0"],[4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-backdrop","static","data-keyboard","false",1,"modal","fade","bd-example-modal-lg"],[1,"modal-dialog","modal-lg"],[1,"modal-content","p-0"],[3,"fullData","showAckShelveBtn","hasWriteAccess","hideSource","connected","clickedAlarmType","alarmType","ackShelveData","refreshAckShelveBtn"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"btn-action-view","mr-2"],["id","issues-real-time-export",1,"btn-default","btn-dft","h-24-btn",3,"click"],["id","issues-real-time-export",1,"btn-default","btn-dft","h-24-btn","ml-2",3,"click"],[1,"table","table-borderless","table-striped","tbl-border-bottom"],[1,"border-bottom"],[1,"sorting-th-custom"],[1,"col-resource"],["class","max-w-90 w-75px","id","pendo_subscriber_impact",4,"ngIf"],[1,"col-recom"],[4,"ngFor","ngForOf"],["id","pendo_subscriber_impact",1,"max-w-90","w-75px"],["data-toggle","modal","data-target",".bd-example-modal-lg",1,"pointer",3,"click"],[1,"dot"],[1,"col-res-data","subj-text",3,"innerHtml"],[1,"subj-text"],["class","action-info-u primary p-blue pointer",3,"click",4,"ngIf"],["class","pointer","data-toggle","modal","data-target",".bd-example-modal-lg",3,"click",4,"ngIf"],[1,"action-info-u","primary","p-blue","pointer",3,"click"],[3,"ngClass"],["colspan","7",1,"no-data-available"]],template:function(e,t){1&e&&(g.YNc(0,k,6,1,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.YNc(4,F,1,0,"div",4),g.YNc(5,P,2,1,"button",5),g.YNc(6,T,2,1,"button",6),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"div",7),g._UZ(8,"div",8),g.qZA(),g.YNc(9,L,20,11,"ng-container",9),g.TgZ(10,"div",10),g.TgZ(11,"div",11),g.TgZ(12,"div",12),g.TgZ(13,"app-alarm-details",13),g.NdJ("ackShelveData",function(e){return t.onAckShelve(e)})("refreshAckShelveBtn",function(e){return t.onRefreshAckShelve(e)}),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Q6J("ngIf",t.error),g.xp6(4),g.Q6J("ngIf",t.connected),g.xp6(1),g.Q6J("ngIf","Table"==t.tableType),g.xp6(1),g.Q6J("ngIf",t.urls.includes("/cco/issues/device/realtime/current-issues")),g.xp6(3),g.Q6J("ngIf","Table"==t.tableType),g.xp6(4),g.Q6J("fullData",t.fullData)("showAckShelveBtn",t.showAckShelveBtn)("hasWriteAccess",t.hasWriteAccess)("hideSource",t.hideSource)("connected",t.connected)("clickedAlarmType","Alarm")("alarmType","Alarm"))},directives:[r.O5,N.M,r.sg,r.mk],styles:[".btn-action-view[_ngcontent-%COMP%]{border-right:0}.btn-action-view[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 20px;background:#fff;color:#0279ff;line-height:16px;height:24px;font-size:14px;box-shadow:none;border:1px solid #0279ff}.btn-action-view[_ngcontent-%COMP%]   .btn-active[_ngcontent-%COMP%]{background:#0279ff;color:#fff}.btn-std[_ngcontent-%COMP%]{border-radius:12px 0 0 12px}.btn-comp[_ngcontent-%COMP%]{border-radius:0 12px 12px 0}.count-label[_ngcontent-%COMP%]{background:#f8f8fa;border-radius:29px;font-size:14px;padding:0 13px;min-width:131px;min-height:24px;margin-bottom:0;line-height:24px}.btn-refresh[_ngcontent-%COMP%]{border:none;background:none;outline:none;padding:0}.h-24-btn[_ngcontent-%COMP%]{height:24px;line-height:16px!important;padding:3px 20px!important;font-size:14px}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:67.68%!important}.col-recom[_ngcontent-%COMP%]   .subj-text[_ngcontent-%COMP%]{max-height:230px;overflow-y:auto}.white-space-preline[_ngcontent-%COMP%]{white-space:pre-line}.source-overflow-auto[_ngcontent-%COMP%]{max-height:275px;overflow-y:auto}.w-75px[_ngcontent-%COMP%]{width:75px!important}.maxh-overflow-auto[_ngcontent-%COMP%]{max-height:250px;overflow:auto}.c-auto[_ngcontent-%COMP%]{cursor:auto!important}.tbl-border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.subscriber-impact-red[_ngcontent-%COMP%]{color:#c70000}"]}),q),G=function(){var e=function(){function e(t){i(this,e),this.router=t,this.urls=this.router.url,this.apiUrl="".concat(d.N.API_BASE_URL,"analytics-engine/topAlarm")}return n(e,[{key:"ngOnInit",value:function(){this.urls.includes("/cco/issues/device/realtime/current-issues")&&(this.apiUrl="".concat(d.N.API_BASE_URL,"analytics-engine/topAlarm")),this.urls.includes("cloud-health/realtime/current-issues")&&(this.apiUrl="".concat(d.N.API_BASE_URL,"analytics-engine/cloudHealthRealTime")),this.urls.includes("connectivity/realtime/current-issues")&&(this.apiUrl="".concat(d.N.API_BASE_URL,"analytics-engine/cloudConnectivityRealTime"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(c.F0))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-connected-alarms"]],decls:1,vars:2,consts:[[3,"connected","apiUrl"]],template:function(e,t){1&e&&g._UZ(0,"app-common-alarms",0),2&e&&g.Q6J("connected",!0)("apiUrl",t.apiUrl)},directives:[J],styles:[""]}),e}();function Y(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",3),g.TgZ(1,"span",4),g._UZ(2,"img",5),g.qZA(),g.TgZ(3,"button",6),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeAlert()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",7),g.qZA()}if(2&e){var s=g.oxw();g.xp6(5),g.Q6J("innerHtml",s.errorInfo,g.oJD)}}function V(e,t){1&e&&g._UZ(0,"app-connected-alarms")}function H(e,t){if(1&e&&(g.TgZ(0,"div",8),g.TgZ(1,"div",9),g.TgZ(2,"div",10),g._UZ(3,"app-common-realtime-filter",11),g.qZA(),g.TgZ(4,"div",12),g.TgZ(5,"div",13),g.TgZ(6,"div",14),g.YNc(7,V,1,0,"app-connected-alarms",15),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var i=g.oxw();g.xp6(3),g.Q6J("activeTab",i.activeTab),g.xp6(4),g.Q6J("ngIf","alarms"===i.activeTab)}}function B(e,t){if(1&e&&(g.TgZ(0,"div",16),g._uU(1),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.hij(" ",i.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}var Q=function(){var t=function(){function t(e,s,n,a,r,o,c,l,u,h,m,g,p){i(this,t),this.translateService=e,this.issueService=s,this.ssoService=n,this.commonOrgService=a,this.http=r,this.fb=o,this.exportExcelService=c,this.titleService=l,this.chartOptionService=u,this.routerService=h,this.router=m,this.route=g,this.location=p,this.isDev=!1,this.baseUrl="".concat(d.N.API_BASE_URL,"analytics-engine/"),this.loading=!0,this.locked=!1,this.interval=15e3,this.regionsDataArray=["All"],this.regionArray=["All"],this.locationDataArray=["All"],this.systemDataArray=["All"],this.limit=10,this.systemStatusData=[{id:"connected",name:"Connected"},{id:"disconnected",name:"Disconnected"}],this.severity={MINOR:"assets/img/outline-error-minor.svg",MAJOR:"assets/img/outline-error-major.svg",CRITICAL:"assets/img/outline-error-red.svg",WARNING:"assets/img/outline-error-warning.svg",INFO:"assets/img/outline-error-info.svg"},this.filtersForm=this.fb.group({region:[""],location:[""],system:[""],limit:[20,[$]],systemStatus:"connected",alarmEventName:[""],fsan_serialno:"",device_type:"ALL"}),this.colors={MINOR:"#F3B426",MAJOR:"#FC7235",CRITICAL:"#C70000",WARNING:"#f7e9c1",INFO:"#7cb5ec"},this.colorClass={MINOR:"minor-but",MAJOR:"major-but",CRITICAL:"critical-but",WARNING:"warning-but",INFO:"severity-info-but"},this.filtersObj={region:"Region",location:"Location",system:"System",alarmCount:"Display Limit",alarmEventName:"Exclude Alarms"},this.filters=["region","location","system","alarmEventName","alarmCount"],this.userPreferenceObj={},this.geoMapFilters=!1,this.geoMapIssue="false",this.urls=this.router.url,this.hasScopeAccess=!1,this.alarmNames=[],this.activeTab="alarms",this.showFSAN=!0,this.fsanvalid=!0,this.location.onPopState(function(){})}return n(t,[{key:"setTitle",value:function(e){this.urls.includes("health/realtime/current-issues")?this.titleService.setTitle("".concat(this.language["Real Time"]," - ").concat(this.language["Cloud Health"]," - ").concat(this.language.Issues," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])):this.urls.includes("connectivity/realtime/current-issues")?this.titleService.setTitle("".concat(this.language["Real Time"]," - ").concat(this.language["Cloud Connectivity"]," - ").concat(this.language.Issues," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])):this.titleService.setTitle("".concat(this.language["Real Time"]," - ").concat(this.language.Alarms," - ").concat(this.language.Issues," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"]))}},{key:"ngOnInit",value:function(){var e=this;this.filtersForm.patchValue({region:["All"],location:["All"],system:["All"],limit:20,systemStatus:"connected",alarmEventName:["All"],fsan_serialno:"",device_type:"ALL"}),this.filtersForm.get("fsan_serialno").valueChanges.subscribe(function(t){t?12==t.length&&(e.fsanvalid=!0):e.fsanvalid=!0}),this.timeZone=(new Date).toString().split(" ")[5].replace(/(.{2})$/,":$1"),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.setTitle(e.router.url)}),this.setTitle(this.router.url);var t=this.ssoService.getScopes();if(d.N.VALIDATE_SCOPE){var i=Object.keys(t);if(i)for(var s=0;s<i.length;s++)if(-1!==i[s].indexOf("cloud.rbac.coc.issues.current")){this.hasScopeAccess=!0;break}}else this.hasScopeAccess=!0;this.hasScopeAccess?(this.ssoService.setPageAccess(!0),this.route.queryParams.subscribe(function(t){var i,s;e.geoMapIssue=t.geoMapIssue&&"true"==t.geoMapIssue?t.geoMapIssue:"false","true"==e.geoMapIssue&&(e.homeGeoMapFilters=e.issueService.getgeoMapHomeFilterParams(),e.issuesGeoMapFilters=e.homeGeoMapFilters?e.homeGeoMapFilters.geoMapFilterParams:{},e.issuesGeoMapFilters&&(e.filtersForm.get("device_type").setValue(e.issuesGeoMapFilters.device_type?null===(i=e.issuesGeoMapFilters.device_type)||void 0===i?void 0:i.toUpperCase():"ALL"),e.onAlarmGroupChange(e.filtersForm.get("device_type").value),"ONT"==(null===(s=e.issuesGeoMapFilters.device_type)||void 0===s?void 0:s.toUpperCase())&&e.filtersForm.get("fsan_serialno").setValue(e.issuesGeoMapFilters.fsan_serialno?e.issuesGeoMapFilters.fsan_serialno:"")))}),this.timerSubscription=(0,l.H)(0,15e3).pipe((0,h.U)(function(){e.alarmsCount()})).subscribe(),this.geoMapfilterSubscription=this.issueService.geoMapFilterChanged$.subscribe(function(t){e.geoMapFilters=t})):this.ssoService.setPageAccess(!1)}},{key:"Applybuttonfunction",value:function(){}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),clearInterval(this.timer),this.timerSubscription.unsubscribe()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.error=!0,this.loading=!1}},{key:"closeAlert",value:function(){this.error=!1}},{key:"regionsApiLoader",value:function(){var t=this;new Set,this.regionSelected="All",this.locationSelected="All",this.systemSelected="All",this.regionsSubject=this.issueService.getRegions().subscribe(function(i){if(i&&i.length&&(i=t.issueService.appendFqn(i)),t.chartOptionService.setRegionsInfo(i),i.sort(),t.regionsDataArray=[].concat(e(t.regionsDataArray),e(i)),"true"==t.geoMapIssue&&t.issuesGeoMapFilters){var s=["All"],n=["All"],a=["All"];t.issuesGeoMapFilters&&t.issuesGeoMapFilters.region&&(s=t.issuesGeoMapFilters.region||["All"]),t.issuesGeoMapFilters&&t.issuesGeoMapFilters.location&&(n=t.issuesGeoMapFilters.location),t.issuesGeoMapFilters&&t.issuesGeoMapFilters.system&&(a=t.issuesGeoMapFilters.system),t.filtersForm.get("region").setValue(s),setTimeout(function(){t.filtersForm.get("location").setValue(n),t.loadLocationValue(""),setTimeout(function(){t.filtersForm.get("system").setValue(a),t.selectSystem(""),t.loadSystemValue()},200)},200)}},function(e){})}},{key:"loadLocationValue",value:function(t){var i=this;this.clickedRegion="",this.locationSelected="All",this.systemSelected="All";var s=this.filtersForm.get("region").value,n=this.filtersForm.get("location").value;if(this.regionSelected=s,this.regionSelected&&this.regionSelected!=["All"]){var a="";if(s.length&&s!==["All"]){if(-1!==s.indexOf("All"))return this.regionName=null,this.locationName=null,this.systemName=null,this.locationDataArray=["All"],void(this.systemDataArray=["All"]);s.forEach(function(e){"All"!=e&&(a+="&region=".concat(e))}),this.locationsSubject=this.http.get("".concat(d.N.API_BASE_URL,"nfa/locations?tenant=0").concat(a)).pipe((0,h.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),i.issueService.appendFqn(e)}),(0,m.K)(this.handleError)).subscribe(function(t){if(i.chartOptionService.setLocationsInfo(t),i.locationDataArray=["All"],i.locationDataArray=[].concat(e(i.locationDataArray),e(t)),n&&n.length){var s=i.chartOptionService.getLocationsObj(),a=Object.keys(s).length?Object.keys(s):[],r=[];n.forEach(function(e){-1!==a.indexOf(e)&&r.push(e)}),r.length||(r=["All"]),i.filtersForm.get("location").setValue(r),i.loadSystemValue()}},function(e){}),this.regionName=s}else this.filtersForm.get("region").setValue(["All"]),this.filtersForm.get("location").setValue(["All"]),this.filtersForm.get("system").setValue(["All"]),this.regionName=null,this.locationName=null,this.systemName=null,this.locationDataArray=["All"],this.systemDataArray=["All"]}}},{key:"loadSystemValue",value:function(t){var i=this;this.clickedLocation="";var s=this.filtersForm.get("region").value,n=this.filtersForm.get("location").value,a=this.filtersForm.get("system").value;if(this.systemSelected=["All"],s.length&&n.length&&-1===n.indexOf("All")){var r="";s.forEach(function(e){"All"!=e&&(r+="&region=".concat(e))});var o="";n.forEach(function(e){"All"!=e&&(o+="&location=".concat(e))}),this.systemsSubject=this.http.get("".concat(d.N.API_BASE_URL,"nfa/systems?tenant=0").concat(r).concat(o)).pipe((0,h.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,m.K)(this.handleError)).subscribe(function(t){if(i.chartOptionService.setSystemsInfo(t),i.systemDataArray=["All"],i.systemDataArray=[].concat(e(i.systemDataArray),e(t)),a&&a.length){var s=i.chartOptionService.getSystemsObj(),n=Object.keys(s).length?Object.keys(s):[],r=[];a.forEach(function(e){-1!==n.indexOf(e)&&r.push(e)}),r.length||(r=["All"],i.systemName=null),i.filtersForm.get("system").setValue(r)}},function(e){}),this.locationName=n}else n.length||(this.filtersForm.get("location").setValue(["All"]),this.filtersForm.get("system").setValue(["All"]),this.locationName=null,this.systemName=null,this.systemDataArray=["All"])}},{key:"convertToDateTime",value:function(e){return e?(e=Number(e),new r.uU("en-US").transform(new Date(e),"short")):void 0}},{key:"validateLimit",value:function(e){this.filtersForm.get("limit").value>1e4&&this.filtersForm.get("limit").setValue(1e4)}},{key:"alarmsCount",value:function(){}},{key:"clearFilter",value:function(){this.locked=!1,this.showFSAN=!0,this.locationDataArray=["All"],this.systemDataArray=["All"],this.clickedRegion=void 0,this.clickedLocation=void 0,this.locationName=void 0,this.regionName=void 0,this.systemName=void 0,this.filtersForm.patchValue({region:["All"],location:["All"],system:["All"],limit:20,systemStatus:"connected",alarmEventName:["All"],fsan_serialno:"",device_type:"ALL"});var e={severity:"CRITICAL,MAJOR,MINOR,INFO,WARNING",historyReport:!1,alarmCount:20,limit:20};this.urls.includes("/cco/issues/connectivity/realtime/current-issues")&&(delete e.severity,delete e.historyReport,delete e.limit),this.appliedParams=e,"disconncted"==this.activeTab&&(this.geoMapFilters=!1),this.issueService.setCurrentIssuesFilterParams(e,this.geoMapFilters)}},{key:"validateRegion",value:function(e){var t=this.filtersForm.get("region").value;if("All"===e)t=["All"];else{var i=t.indexOf("All");i>-1&&t.splice(i,1)}this.filtersForm.get("region").setValue(t),this.loadLocationValue("")}},{key:"validateLocation",value:function(e){var t=this.filtersForm.get("location").value;if("All"===e)this.clickedLocation=void 0,this.locationName=void 0,t=["All"];else{var i=t.indexOf("All");i>-1&&t.splice(i,1)}this.filtersForm.get("location").setValue(t),this.loadSystemValue("")}},{key:"validateSystem",value:function(e){var t=this.filtersForm.get("system").value;if(t.length)if("All"===e)t=["All"];else{var i=t.indexOf("All");i>-1&&t.splice(i,1)}else t=["All"];this.filtersForm.get("system").setValue(t)}},{key:"selectSystem",value:function(e){var t=this.filtersForm.get("system").value;this.systemName=t,"All"==t&&(this.systemName=null)}},{key:"generateParams",value:function(e){var t,i,s;if(this.loading=!0,!(null===(i=null===(t=this.filtersForm)||void 0===t?void 0:t.controls)||void 0===i?void 0:i.limit.invalid)&&(this.validateFSAN(),this.fsanvalid)){this.locked=!1;var n;n=this.systemName&&this.systemName.length&&-1===this.systemName.indexOf("All")?this.systemName.filter(function(e){return e&&e.length&&"All"!==e}):void 0;var a={region:this.clickedRegion||this.regionName,location:this.clickedLocation||this.locationName,system:n,severity:"CRITICAL,MAJOR,MINOR,INFO,WARNING",historyReport:!1,alarmCount:this.filtersForm.get("limit").value?this.filtersForm.get("limit").value:0,limit:this.filtersForm.get("limit").value?this.filtersForm.get("limit").value:0,systemStatus:this.filtersForm.get("systemStatus").value};this.urls.includes("/cco/issues/device/realtime/current-issues")&&(a.fsan_serialno=this.filtersForm.get("fsan_serialno").value,a.device_type=this.filtersForm.get("device_type").value),"OLT"===this.filtersForm.get("device_type").value&&delete a.fsan_serialno;var r=[];null===(s=this.filtersForm.get("alarmEventName").value)||void 0===s||s.forEach(function(e){"All"!=e&&r.push(e)}),a.alarmEventName=r.join(","),this.appliedParams=a,"disconncted"==this.activeTab&&(this.geoMapFilters=!1),(this.urls.includes("cco/issues/connectivity/realtime/current-issues")||this.urls.includes("cco/issues/cloud-health/realtime/current-issues"))&&(delete a.severity,delete a.limit,delete a.customCategory,this.appliedParams=a,"disconncted"==this.activeTab&&(this.geoMapFilters=!1),this.issueService.setCurrentIssuesFilterParams(a,this.geoMapFilters,e)),this.issueService.setCurrentIssuesFilterParams(a,this.geoMapFilters,e)}}},{key:"handleError",value:function(e){return(0,u._)(e)}},{key:"getUserPreferences",value:function(){var e=this;this.http.get("".concat(d.N.API_BASE_URL,"cmc/pref/user-preferences/").concat(this.ssoService.getOrgId(),"/").concat(this.ssoService.getUserId())).subscribe(function(t){e.userPreferenceObj={}})}},{key:"setUserPreferences",value:function(){var e={filters:{cco_issues:{limit:this.appliedParams.limit}}};Object.keys(this.userPreferenceObj).length?this.userPreferenceObj.filters=Object.keys(this.userPreferenceObj.filters).length?Object.assign(Object.assign({},this.userPreferenceObj.filters),e.filters):e:this.userPreferenceObj=e,this.http.post("".concat(d.N.API_BASE_URL,"cmc/pref/user-preferences/").concat(this.ssoService.getOrgId(),"/").concat(this.ssoService.getUserId()),e).subscribe(function(e){})}},{key:"isNumber",value:function(e){var t=this.filtersForm.get("limit").value;return/^\d*\.?\d*$/.test(t)}},{key:"validateAlarmName",value:function(e){var t=this.filtersForm.get("alarmEventName").value;if(t.length)if("All"===e)t=["All"];else{var i=t.indexOf("All");i>-1&&t.splice(i,1)}else t=["All"];this.filtersForm.get("alarmEventName").setValue(t)}},{key:"getAlarmNames",value:function(){var e=this;this.http.get("".concat(this.baseUrl,"alarmEvent?historyalarm=false&notificationType=Alarm")).subscribe(function(t){var i=[{id:"All",name:"None"}],s=t.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});s&&s.forEach(function(e){!e||"multiple-onts-down"!==e&&i.push({id:e,name:e})}),e.alarmNames=i,e.urls.includes("/cco/issues/device/realtime/current-issues")&&e.getCustomAlarmsFunc()})}},{key:"getCustomAlarmsFunc",value:function(){var e=this;this.http.get("".concat(this.baseUrl,"customAlarms/false")).subscribe(function(t){if(t&&t.length>0&&e.urls.includes("/cco/issues/device/realtime/current-issues")){var i=e.alarmNames.filter(function(e){return-1!=t.findIndex(function(t){return t.alarmName==e.name})}).map(function(e){return e.id});i&&i.length>0&&e.filtersForm.get("alarmEventName").setValue(i)}e.generateParams()},function(t){e.error=!0,e.pageErrorHandle(t),e.generateParams()})}},{key:"onAlarmGroupChange",value:function(e){this.showFSAN="OLT"!==e}},{key:"validateFSAN",value:function(){this.fsanvalid=!0,0!==this.filtersForm.get("fsan_serialno").value.length&&12!==this.filtersForm.get("fsan_serialno").value.length&&(this.fsanvalid=!1)}},{key:"removespecialcharacter",value:function(e){var t;return(t=e.keyCode)>47&&t<58||t>64&&t<91||t>96&&t<123}},{key:"gotoHomeGeomap",value:function(){var e={geoMapFilterParams:this.filtersForm.value,fromIssuesGeoMap:"homeGeomap",reStoreMapViewDetails:this.homeGeoMapFilters&&this.homeGeoMapFilters.reStoreMapViewDetails?this.homeGeoMapFilters.reStoreMapViewDetails:{}};e.show_only_ont_outage_systems=this.issuesGeoMapFilters&&this.issuesGeoMapFilters.showOntNetOutage?this.issuesGeoMapFilters.showOntNetOutage:void 0,e.showAllSystems=this.issuesGeoMapFilters&&this.issuesGeoMapFilters.showAllSystems?this.issuesGeoMapFilters.showAllSystems:void 0,this.issueService.setgeoMapHomeFilterParams(e,!0,!0),this.router.navigate(["cco/home/active-systems-geomap"])}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(p.s),g.Y36(f.v),g.Y36(v.t6),g.Y36(b.v),g.Y36(y.eN),g.Y36(A.qu),g.Y36(x.O),g.Y36(S.Dx),g.Y36(O.t),g.Y36(C.c),g.Y36(c.F0),g.Y36(c.gz),g.Y36(r.lw))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-current-issues"]],decls:3,vars:3,consts:[["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],["class","tab-content","id","myTabContent",4,"ngIf"],["role","alert","class","alert alert-warning",4,"ngIf"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["id","myTabContent",1,"tab-content"],["id","Current-Issues","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["id","current-issues-filter",1,"filter-elemnts"],[3,"activeTab"],["id","current-issues-results",1,"row"],[1,"col-md-12","mt-3"],["id","current-issue-table",1,"current-issues-table","overflow-auto"],[4,"ngIf"],["role","alert",1,"alert","alert-warning"]],template:function(e,t){1&e&&(g.YNc(0,Y,6,1,"div",0),g.YNc(1,H,8,2,"div",1),g.YNc(2,B,2,1,"div",2)),2&e&&(g.Q6J("ngIf",t.error),g.xp6(1),g.Q6J("ngIf",t.hasScopeAccess),g.xp6(1),g.Q6J("ngIf",!t.hasScopeAccess))},directives:[r.O5,M.s,G],styles:['@charset "UTF-8";.red[_ngcontent-%COMP%]{color:#c70000}.issue-left-menu[_ngcontent-%COMP%]{width:100%}.issue-right-content[_ngcontent-%COMP%]{width:100%;border-left:1px solid #dedede;padding:10px}.current-issue-menu-item[_ngcontent-%COMP%]{flex-grow:0}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f7f8fa!important;border-color:#888!important}.current-issues-table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{font-size:14px}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f8f8fa!important;border-color:#f8f8fa!important;padding:3px \\200b 10px}.undo-icon[_ngcontent-%COMP%]{background-color:#f8f8fa;padding:3px;color:#9e9e9e;border-radius:15px;margin:2px;font-size:17px;cursor:pointer;width:30px;height:30px;text-align:center}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600!important;font-size:16px}.cco-secondary-title[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;color:#1a1f22}.mw-170[_ngcontent-%COMP%]{min-width:170px}.current-issue-menu-container[_ngcontent-%COMP%]{display:flex;margin:20px 0 0;align-items:center;flex-wrap:wrap;justify-self:start}.test-container[_ngcontent-%COMP%]{display:flex;width:100%}.item[_ngcontent-%COMP%]{flex-grow:1;border-left:1px solid #EBEAEF;padding-left:12px;width:calc(100% / 4)}.item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-left:2%}@media screen and (max-width: 767px){.mpl[_ngcontent-%COMP%]{padding-left:15px!important}.current-issue-menu-container[_ngcontent-%COMP%]{display:block}.current-issue-menu-item[_ngcontent-%COMP%]{margin-top:10px;margin-left:0!important}.mt-center[_ngcontent-%COMP%]{text-align:center!important}#current-issue-table[_ngcontent-%COMP%]{overflow-x:scroll}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{height:5px;background:#f1f1f1}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:5px;background:#ddd}}@media screen and (min-width: 768px) and (max-width: 1140px){#current-issue-table[_ngcontent-%COMP%]{overflow-x:scroll}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{height:5px;background:#f1f1f1}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:5px;background:#ddd}}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:70%!important}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:120px!important}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:120px!important}.max-w-90[_ngcontent-%COMP%]{max-width:90px}.col-recom[_ngcontent-%COMP%]{min-width:300px}.col-recom[_ngcontent-%COMP%]   .subj-text[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.col-resource[_ngcontent-%COMP%]{max-width:400px!important}.col-resource[_ngcontent-%COMP%]   .col-res-data[_ngcontent-%COMP%]{min-width:400px;max-width:400px;word-break:break-all}.btn-transparent[_ngcontent-%COMP%]{color:#0279ff;border:none;background:none;font-size:14px}.btn-transparent[_ngcontent-%COMP%]:hover{color:#0054b2}.btn-sm-primary[_ngcontent-%COMP%]{height:24px;line-height:16px!important;padding:3px 20px!important;font-size:14px}']}),t}();function $(e){return 0==(null==e?void 0:e.value)?(null==e||e.setValue(20),null):(null==e?void 0:e.value)?(null==e?void 0:e.value)>1e4?(null==e||e.setValue(1e4),null):(null==e?void 0:e.value)<1?(null==e||e.setValue(Math.abs(e.value)),null):/^\s*(\d{1,5}|-\d+)?\s*$/.test(e.value)?null:{invalidNumber:!0}:{isrequired:!0}}var z=[{path:"",component:function(){var e=function(){function e(t,s){i(this,e),this.translateService=t,this.sso=s,this.hasPageAccess=!0}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t}),this.pageAcceesObs=this.sso.hasPageAccess$.subscribe(function(t){e.hasPageAccess=!!t.access})}},{key:"ngOnDestroy",value:function(){this.languageSubject.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(p.s),g.Y36(v.t6))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-realtime"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"router-outlet")},directives:[c.lC],styles:["@media screen and (max-width: 767px){.m-center[_ngcontent-%COMP%]{width:50%;margin-left:25%}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{text-align:center}}"]}),e}(),children:[{path:"current-issues",component:Q,data:{title:"Calix Cloud - "}},{path:"",redirectTo:"current-issues",pathMatch:"full"}]}],W=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[c.Bz.forChild(z)],c.Bz]}),e}(),X=a(77750),K=a(23771),ee=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[r.ez,A.u5,o.A0,W,A.UX,X.r,K.T]]}),e}()}}])}();