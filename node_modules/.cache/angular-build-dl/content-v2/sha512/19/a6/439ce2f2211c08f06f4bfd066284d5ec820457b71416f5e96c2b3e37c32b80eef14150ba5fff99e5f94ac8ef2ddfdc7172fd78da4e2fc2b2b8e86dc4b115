!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var l=Object.prototype.toString.call(e).slice(8,-1);"Object"===l&&e.constructor&&(l=e.constructor.name);if("Map"===l||"Set"===l)return Array.from(e);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return t(e,a)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,(i=l.key,n=void 0,"symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?n:String(n)),l)}var i,n}function i(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[7750],{38218:function(e,t,l){l.d(t,{m:function(){return h}});var n=l(37716),s=l(92340),r=l(91841),o=l(89097),u=l(7450),c=l(49342),d=l(38583);function g(e,t){if(1&e){var a=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"button",1),n.NdJ("click",function(){n.CHM(a);var e=n.oxw();return e.doAck(null==e.fullData||null==e.fullData.subject?null:e.fullData.subject.ccoAck)}),n._uU(2),n.qZA(),n.TgZ(3,"button",1),n.NdJ("click",function(){n.CHM(a);var e=n.oxw();return e.doShelve(null==e.fullData||null==e.fullData.subject?null:e.fullData.subject.ccoShelved)}),n._uU(4),n.qZA(),n.qZA()}if(2&e){var l=n.oxw();n.xp6(1),n.Q6J("disabled",l.disableAckBtn),n.xp6(1),n.Oqu(l.fullData&&l.fullData.subject&&l.fullData.subject.ccoAck?l.language.Unacknowledge:l.language.Acknowledge),n.xp6(1),n.Q6J("disabled",l.disableShelveBtn),n.xp6(1),n.Oqu(l.fullData&&l.fullData.subject&&l.fullData.subject.ccoShelved?l.language.Unshelve:l.language.Shelve)}}function f(e,t){if(1&e){var a=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"button",2),n.NdJ("click",function(){n.CHM(a);var e=n.oxw();return e.doShelve(null==e.fullData||null==e.fullData.subject?null:e.fullData.subject.ccoShelved)}),n._uU(2),n.qZA(),n.qZA()}if(2&e){var l=n.oxw();n.xp6(1),n.Q6J("disabled",l.disableShelveBtn),n.xp6(1),n.Oqu(l.fullData&&l.fullData.subject&&l.fullData.subject.ccoShelved?l.language.Unshelve:"")}}var m,h=((m=function(){function e(t,l,i,s){a(this,e),this.http=t,this.sso=l,this.translateService=i,this.commonOrgService=s,this.ackShelveData=new n.vpe,this.disableAckBtn=!1,this.disableShelveBtn=!1,this.enableLoader=new n.vpe,this.errorMessage=new n.vpe}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t})}},{key:"doAck",value:function(e){var t,a,l=this;this.disableAckBtn=!0,this.enableLoader.emit(!0),e?this.deleteAck():this.http.put("".concat(s.N.API_BASE_URL,"analytics-engine/").concat(null===(a=null===(t=this.fullData)||void 0===t?void 0:t.subject)||void 0===a?void 0:a.alarmId,"/ack?ccoAck=true&ccoAckUser=").concat(this.sso.getUsername()),{}).subscribe(function(e){l.fullData.subject.ccoAck=!0,l.fullData.subject.ccoAckUser=l.sso.getUsername(),l.disableAckBtn=!1,l.ackShelveData.emit({ack:!0})},function(e){l.disableAckBtn=!1,l.resetActions(),l.handleError(e)},function(){l.resetActions()})}},{key:"deleteAck",value:function(){var e,t,a=this;this.enableLoader.emit(!0),this.http.delete("".concat(s.N.API_BASE_URL,"analytics-engine/").concat(null===(t=null===(e=this.fullData)||void 0===e?void 0:e.subject)||void 0===t?void 0:t.alarmId,"/ack?ccoAck=true&ccoAckUser=").concat(this.sso.getUsername()),{}).subscribe(function(e){a.fullData.subject.ccoAck=!1,a.disableAckBtn=!1,a.ackShelveData.emit({ack:!1})},function(e){a.disableAckBtn=!1,a.resetActions(),a.handleError(e)},function(){a.resetActions()})}},{key:"doShelve",value:function(e){var t,a,l=this;this.disableShelveBtn=!0,this.enableLoader.emit(!0),e?this.deleteShelve():this.http.put("".concat(s.N.API_BASE_URL,"analytics-engine/").concat(null===(a=null===(t=this.fullData)||void 0===t?void 0:t.subject)||void 0===a?void 0:a.alarmId,"/shelve?ccoShelved=true"),{}).subscribe(function(e){l.fullData.subject.ccoShelved=!0,l.disableShelveBtn=!1,l.ackShelveData.emit({shelve:!0})},function(e){l.disableShelveBtn=!1,l.resetActions(),l.handleError(e)},function(){l.resetActions()})}},{key:"deleteShelve",value:function(){var e,t,a=this;this.enableLoader.emit(!0),this.http.delete("".concat(s.N.API_BASE_URL,"analytics-engine/").concat(null===(t=null===(e=this.fullData)||void 0===e?void 0:e.subject)||void 0===t?void 0:t.alarmId,"/shelve?ccoShelved=true"),{}).subscribe(function(e){a.fullData.subject.ccoShelved=!1,a.disableShelveBtn=!1,a.ackShelveData.emit({shelve:!1})},function(e){a.disableShelveBtn=!1,a.resetActions(),a.handleError(e)},function(){a.resetActions()})}},{key:"resetActions",value:function(){this.enableLoader.emit(!1),this.errorMessage.emit("")}},{key:"handleError",value:function(e){this.errorMessage.emit(this.commonOrgService.pageErrorHandle(e))}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.languageSubject)||void 0===e||e.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||m)(n.Y36(r.eN),n.Y36(o.t6),n.Y36(u.s),n.Y36(c.v))},m.\u0275cmp=n.Xpm({type:m,selectors:[["app-alarm-ack-shelve"]],inputs:{fullData:"fullData"},outputs:{ackShelveData:"ackShelveData",enableLoader:"enableLoader",errorMessage:"errorMessage"},decls:2,vars:2,consts:[[4,"ngIf"],["type","button",1,"btn-default","btn-dft","mr-3",3,"disabled","click"],["type","button",1,"btn-default","btn-dft",3,"disabled","click"]],template:function(e,t){1&e&&(n.YNc(0,g,5,4,"div",0),n.YNc(1,f,3,2,"div",0)),2&e&&(n.Q6J("ngIf",!(null!=t.fullData&&t.fullData.isHistoryAlarmFromUI)),n.xp6(1),n.Q6J("ngIf",(null==t.fullData?null:t.fullData.isHistoryAlarmFromUI)&&(null==t.fullData||null==t.fullData.subject?null:t.fullData.subject.ccoShelved)))},directives:[d.O5],styles:[""]}),m)},87582:function(e,t,l){l.d(t,{M:function(){return D}});var n=l(38583),s=l(37716),r=l(7450),o=l(21693),u=l(38218);function c(e,t){if(1&e){var a=s.EpF();s.TgZ(0,"div",28),s.TgZ(1,"span",29),s._UZ(2,"img",30),s.qZA(),s.TgZ(3,"button",31),s.NdJ("click",function(){return s.CHM(a),s.oxw().errorMsg=""}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",32),s.qZA()}if(2&e){var l=s.oxw();s.xp6(5),s.Q6J("innerHtml",l.errorMsg,s.oJD)}}function d(e,t){if(1&e&&(s.TgZ(0,"div",33),s.TgZ(1,"div",34),s.TgZ(2,"div",35),s.TgZ(3,"span",36),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(4),s.Oqu(a.language.Loading)}}function g(e,t){if(1&e&&(s.TgZ(0,"div",37),s.TgZ(1,"div"),s._UZ(2,"span",38),s._uU(3),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(1),s.Tol(a.fullData.subject&&a.fullData.subject.perceivedSeverity&&a.colorClass[a.fullData.subject.perceivedSeverity]?a.colorClass[a.fullData.subject.perceivedSeverity]:"black clear-sev-but"),s.xp6(2),s.hij(" ",a.fullData.subject?a.language[a.fullData.subject.perceivedSeverity]||a.fullData.subject.perceivedSeverity:""," ")}}function f(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&e){var a=s.oxw();s.xp6(1),s.hij(" ",a.fullData.type," ")}}function m(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&e){var a=s.oxw();s.xp6(1),s.hij(" ",a.fullData&&a.fullData.subject?a.fullData.subject.alarmType:""," ")}}function h(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.Oqu(a.language.Acknowledger),s.xp6(2),s.Oqu(a.fullData&&a.fullData.subject&&a.fullData.subject.ccoAckUser?a.fullData.subject.ccoAckUser:"")}}function v(e,t){if(1&e&&(s.TgZ(0,"div",40),s._uU(1),s.qZA()),2&e){var a=s.oxw(2);s.xp6(1),s.hij(" ",a.fullData.subject.source," ")}}function p(e,t){if(1&e&&(s.TgZ(0,"div",40),s._uU(1),s.qZA()),2&e){var a=s.oxw(2);s.xp6(1),s.hij(" ",a.fullData&&a.fullData.subject?a.fullData.subject.source:"","")}}function b(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s.YNc(4,v,2,1,"div",39),s.YNc(5,p,2,1,"div",39),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.Oqu(a.language.Source),s.xp6(2),s.Q6J("ngIf",a.fullData&&a.fullData.subject&&a.fullData.subject.transformedAlarms),s.xp6(1),s.Q6J("ngIf",!(a.fullData&&a.fullData.subject&&a.fullData.subject.transformedAlarms))}}function A(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s.TgZ(4,"div",41),s._uU(5),s.qZA(),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.Oqu(a.language["Impacted ONTs Count"]),s.xp6(3),s.hij(" ",null==a.fullData.subject?null:a.fullData.subject.impacted_onts_count_ui,"")}}function Z(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._UZ(4,"div",42),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.Oqu(a.language["Related Alarms"]),s.xp6(2),s.Q6J("innerHtml",null==a.fullData.subject?null:a.fullData.subject.relatedAlarmsStr,s.oJD)}}function y(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.Oqu(a.language.Notes),s.xp6(2),s.Oqu(a.fullData&&a.fullData.subject?a.fullData.subject.notes:"")}}function x(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.qZA()),2&e){var a=t.$implicit;s.xp6(2),s.Oqu(a.key),s.xp6(2),s.Oqu(a.value)}}function _(e,t){if(1&e&&(s.TgZ(0,"table",22),s.TgZ(1,"tbody"),s.YNc(2,x,5,2,"tr",43),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.Q6J("ngForOf",a.fullData.subject.customAdditionalAttributes)}}function T(e,t){if(1&e){var a=s.EpF();s.TgZ(0,"app-alarm-ack-shelve",44),s.NdJ("ackShelveData",function(e){return s.CHM(a),s.oxw().onAckShelve(e)})("enableLoader",function(e){return s.CHM(a),s.oxw().onEnableLoader(e)})("errorMessage",function(e){return s.CHM(a),s.oxw().onErrorMsg(e)}),s.qZA()}if(2&e){var l=s.oxw();s.Q6J("fullData",l.fullData)}}var q,D=((q=function(){function e(t,l){a(this,e),this.translateService=t,this.issueService=l,this.transformedAlarms=["multiple-onts-down-network","multiple-onts-down-pon","multiple-onts-down-olt"],this.ackShelveData=new s.vpe,this.refreshAckShelveBtn=new s.vpe,this.loader=!1,this.errorMsg="",this.colors={MINOR:"#F3B426",MAJOR:"#FC7235",CRITICAL:"#C70000",WARNING:"#f7e9c1",INFO:"#7cb5ec"},this.colorClass={MINOR:"minor-but",MAJOR:"major-but",CRITICAL:"critical-but",WARNING:"warning-but",INFO:"severity-info-but"}}return i(e,[{key:"fullData",get:function(){return this._fullData},set:function(e){var t,a,l,i,n,s,r,o,u;console.log(e),e||(e={}),e.subject||(e.subject={});var c=[];if(e&&e.subject&&"object"==typeof e.subject.additionalAttributes&&e.subject.additionalAttributes){var d=Object.keys(e.subject.additionalAttributes),g=["phys-pon-shelf","phys-pon-slot","phys-pon-port","phys-dsl-shelf","phys-dsl-slot","phys-dsl-port"],f={"phys-pon-shelf":"phys-shelf","phys-pon-slot":"phys-slot","phys-pon-port":"phys-port"};null===(t=null==d?void 0:d.sort())||void 0===t||t.forEach(function(t){"index"!==t&&-1===g.indexOf(t)&&c.push({key:t,value:"object"==typeof e.subject.additionalAttributes[t]?e.subject.additionalAttributes[t].value:e.subject.additionalAttributes[t]})}),null==g||g.forEach(function(t){e.subject.additionalAttributes[t]&&c.push({key:"AEONT"===(null==e?void 0:e.type)?f[t]:t,value:"object"==typeof e.subject.additionalAttributes[t]?e.subject.additionalAttributes[t].value:e.subject.additionalAttributes[t]})})}if(e.subject.resourceForUI=this.issueService.generateResourceForUI(e,"EXA"===e.type),e.subject.customAdditionalAttributes=c,"multiple-onts-down-network"===(null===(a=e.subject)||void 0===a?void 0:a.alarmEventName)&&!(null===(l=e.subject)||void 0===l?void 0:l.source)&&(this.hideSource=!0),null===(i=e.subject)||void 0===i?void 0:i.transformedAlarms){var m="";null===(s=null===(n=e.subject)||void 0===n?void 0:n.relatedAlarms)||void 0===s||s.forEach(function(e){m+="".concat(e.deviceName," ").concat(e.ontId," ").concat(e.ponPort,"<br>")}),e.subject.relatedAlarmsStr=m||(null===(r=e.subject)||void 0===r?void 0:r.transformedAlarms),e.subject.impacted_onts_count_ui=(null===(u=null===(o=e.subject)||void 0===o?void 0:o.relatedAlarms)||void 0===u?void 0:u.length)?e.subject.relatedAlarms.length:0}this._fullData=e}},{key:"ngOnInit",value:function(){var e,t,a=this;this.timeZone=null===(t=null===(e=(new Date).toString())||void 0===e?void 0:e.split(" ")[5])||void 0===t?void 0:t.replace(/(.{2})$/,":$1"),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){a.language=e})}},{key:"onAckShelve",value:function(e){console.log(e),this.ackShelveData.emit(e)}},{key:"convertToDateTime",value:function(e){return e?(e=Number(e),new n.uU("en-US").transform(new Date(e),"short")):void 0}},{key:"refreshAckShelve",value:function(){this.refreshAckShelveBtn.emit(),this.showAckShelveBtn=!1,this.errorMsg=""}},{key:"onEnableLoader",value:function(e){this.loader=e}},{key:"onErrorMsg",value:function(e){this.errorMsg=e}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.languageSubject)||void 0===e||e.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||q)(s.Y36(r.s),s.Y36(o.v))},q.\u0275cmp=s.Xpm({type:q,selectors:[["app-alarm-details"]],inputs:{showAckShelveBtn:"showAckShelveBtn",hasWriteAccess:"hasWriteAccess",hideSource:"hideSource",connected:"connected",showNotes:"showNotes",clickedAlarmType:"clickedAlarmType",alarmType:"alarmType",fullData:"fullData"},outputs:{ackShelveData:"ackShelveData",refreshAckShelveBtn:"refreshAckShelveBtn"},decls:96,vars:38,consts:[[1,"modole-content-spacing"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","loader",4,"ngIf"],[1,"row"],[1,"col-12","px-0","text-right"],["aria-hidden","true","src","assets/img/ic_close-44px.svg","data-dismiss","modal","aria-label","Close",1,"pointer",3,"click"],[1,"col-12","d-inline-flex","align-items-center"],[1,"ccl-admin-title","d-inline-flex","pr-4"],["class","d-inline-flex align-items-center pt-2",4,"ngIf"],[1,"col-12","d-flex","flex-wrap","px-0","my-2"],[1,"col-auto","kbi-col"],[1,"kbi-content"],[1,"cco-list-label","mb-0"],[1,"stats-value","stats-value-24"],[1,"device-text"],[1,"col-12","kbi-col"],[1,"stats-value","stats-value-24",3,"innerHtml"],[1,"col-md-12","ccl-tabs"],["id","myTabContent",1,"tab-content"],["id","Title-1","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"col-lg-12","col-xl-12","col-md-12","col-sm-12"],[1,"support-key-value","pl-12"],[1,"table","table-borderless","mb-0"],[4,"ngIf"],[1,"white-space-preline"],["class","table table-borderless mb-0",4,"ngIf"],[1,"button-padding"],[3,"fullData","ackShelveData","enableLoader","errorMessage",4,"ngIf"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"d-inline-flex","align-items-center","pt-2"],[1,"dot"],["class","source-overflow-auto",4,"ngIf"],[1,"source-overflow-auto"],[1,"maxh-overflow-auto"],[1,"maxh-overflow-auto",3,"innerHtml"],[4,"ngFor","ngForOf"],[3,"fullData","ackShelveData","enableLoader","errorMessage"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,c,6,1,"div",1),s.YNc(2,d,5,1,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"img",5),s.NdJ("click",function(){return t.refreshAckShelve()}),s.qZA(),s.qZA(),s.TgZ(6,"div",6),s.TgZ(7,"div",7),s._uU(8),s.qZA(),s.YNc(9,g,4,4,"div",8),s.qZA(),s.qZA(),s.TgZ(10,"div",3),s.TgZ(11,"div",9),s.TgZ(12,"div",10),s.TgZ(13,"div",11),s.TgZ(14,"label",12),s._uU(15),s.qZA(),s.TgZ(16,"h3",13),s._uU(17),s.qZA(),s.TgZ(18,"div",14),s._uU(19),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",10),s.TgZ(21,"div",11),s.TgZ(22,"label",12),s._uU(23),s.qZA(),s.TgZ(24,"h3",13),s._uU(25),s.qZA(),s.TgZ(26,"div",14),s._uU(27),s.qZA(),s.qZA(),s.qZA(),s.TgZ(28,"div",10),s.TgZ(29,"div",11),s.TgZ(30,"label",12),s._uU(31),s.qZA(),s.TgZ(32,"h3",13),s._uU(33),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"div",15),s.TgZ(35,"div",11),s.TgZ(36,"label",12),s._uU(37),s.qZA(),s._UZ(38,"h3",16),s.qZA(),s.qZA(),s.qZA(),s.TgZ(39,"div",17),s.TgZ(40,"div",18),s.TgZ(41,"div",19),s.TgZ(42,"div",3),s.TgZ(43,"div",20),s.TgZ(44,"div",21),s.TgZ(45,"table",22),s.TgZ(46,"tbody"),s.TgZ(47,"tr"),s.TgZ(48,"td"),s._uU(49),s.qZA(),s.TgZ(50,"td"),s.YNc(51,f,2,1,"div",23),s.YNc(52,m,2,1,"div",23),s.qZA(),s.qZA(),s.TgZ(53,"tr"),s.TgZ(54,"td"),s._uU(55),s.qZA(),s.TgZ(56,"td"),s._uU(57),s.qZA(),s.qZA(),s.TgZ(58,"tr"),s.TgZ(59,"td"),s._uU(60),s.qZA(),s.TgZ(61,"td",24),s._uU(62),s.qZA(),s.qZA(),s.TgZ(63,"tr"),s.TgZ(64,"td"),s._uU(65),s.qZA(),s.TgZ(66,"td"),s._uU(67),s.qZA(),s.qZA(),s.YNc(68,h,5,2,"tr",23),s.TgZ(69,"tr"),s.TgZ(70,"td"),s._uU(71),s.qZA(),s.TgZ(72,"td"),s._uU(73),s.qZA(),s.qZA(),s.TgZ(74,"tr"),s.TgZ(75,"td"),s._uU(76),s.qZA(),s.TgZ(77,"td"),s._uU(78),s.qZA(),s.qZA(),s.TgZ(79,"tr"),s.TgZ(80,"td"),s._uU(81),s.qZA(),s.TgZ(82,"td"),s._uU(83),s.qZA(),s.qZA(),s.TgZ(84,"tr"),s.TgZ(85,"td"),s._uU(86),s.qZA(),s.TgZ(87,"td"),s._uU(88),s.qZA(),s.qZA(),s.YNc(89,b,6,3,"tr",23),s.YNc(90,A,6,2,"tr",23),s.YNc(91,Z,5,2,"tr",23),s.YNc(92,y,5,2,"tr",23),s.qZA(),s.qZA(),s.YNc(93,_,3,1,"table",25),s.qZA(),s.TgZ(94,"div",26),s.YNc(95,T,1,1,"app-alarm-ack-shelve",27),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.errorMsg),s.xp6(1),s.Q6J("ngIf",t.loader),s.xp6(6),s.hij(" ",t.fullData.subject?t.fullData.subject.alarmEventName:""," "),s.xp6(1),s.Q6J("ngIf","Alarm"===t.clickedAlarmType&&"Event"!==t.alarmType),s.xp6(6),s.hij("",t.language["Reported Time"]," "),s.xp6(2),s.Oqu(t.fullData.subject&&t.fullData.subject.timeRaised?t.convertToDateTime(t.fullData.subject.timeRaised):""),s.xp6(2),s.hij("(UTC/",t.timeZone,")"),s.xp6(4),s.Oqu(t.language["Synced Time"]),s.xp6(2),s.hij(" ",t.fullData.time?t.convertToDateTime(t.fullData.time):""," "),s.xp6(2),s.hij("(UTC/",t.timeZone,")"),s.xp6(4),s.hij(" ",t.language.Category," "),s.xp6(2),s.hij(" ",t.fullData.subject?t.fullData.subject.category:""," "),s.xp6(4),s.Oqu(t.language.Resource),s.xp6(1),s.Q6J("innerHtml",t.fullData.subject&&t.fullData.subject.resourceForUI?t.fullData.subject.resourceForUI:"",s.oJD),s.xp6(11),s.Oqu(t.language.Type),s.xp6(2),s.Q6J("ngIf",t.fullData.subject&&t.fullData.subject.transformedAlarms),s.xp6(1),s.Q6J("ngIf",!(t.fullData.subject&&t.fullData.subject.transformedAlarms)),s.xp6(3),s.Oqu(t.language.Description),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject?t.fullData.subject.description:""),s.xp6(3),s.Oqu(t.language.Details),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject?t.fullData.subject.details:""),s.xp6(3),s.Oqu(t.language["Cloud Acknowledged"]),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject&&t.fullData.subject.ccoAck?"Yes":"No"),s.xp6(1),s.Q6J("ngIf",null==t.fullData||null==t.fullData.subject?null:t.fullData.subject.ccoAck),s.xp6(3),s.Oqu(t.language["Cloud Shelved"]),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject&&t.fullData.subject.ccoShelved?"Yes":"No"),s.xp6(3),s.Oqu(t.language["Repair Action"]),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject?t.fullData.subject.repairAction:""),s.xp6(3),s.Oqu(t.language["Service Affecting"]),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject&&t.fullData.subject.serviceAffecting?"Yes":"No"),s.xp6(3),s.Oqu(t.language["Service Impacting"]),s.xp6(2),s.Oqu(t.fullData&&t.fullData.subject&&t.fullData.subject.serviceImpacting?"Yes":"No"),s.xp6(1),s.Q6J("ngIf",!t.hideSource),s.xp6(1),s.Q6J("ngIf",null==t.fullData.subject?null:t.fullData.subject.impacted_onts_count_ui),s.xp6(1),s.Q6J("ngIf",null==t.fullData.subject?null:t.fullData.subject.relatedAlarmsStr),s.xp6(1),s.Q6J("ngIf",t.showNotes),s.xp6(1),s.Q6J("ngIf",t.fullData&&t.fullData.subject&&t.fullData.subject.customAdditionalAttributes),s.xp6(2),s.Q6J("ngIf",t.hasWriteAccess&&t.showAckShelveBtn&&t.connected))},directives:[n.O5,n.sg,u.m],styles:[".stats-value-24[_ngcontent-%COMP%]{font-size:24px!important}.kbi-col[_ngcontent-%COMP%]{margin-right:23px;margin-bottom:16px}.kbi-col[_ngcontent-%COMP%]   .kbi-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;border-left:1px solid #EBEAEF;padding-left:12px}.support-key-value[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 12px 0 0!important;line-height:24px}.pl-12[_ngcontent-%COMP%]{padding-left:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){padding-right:0!important;width:153px!important}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){padding-left:56px!important;width:calc(100% - 153px)}.modole-content-spacing[_ngcontent-%COMP%]{padding:17px 62px 44px}.button-padding[_ngcontent-%COMP%]{margin-top:11px}.white-space-preline[_ngcontent-%COMP%]{white-space:pre-line}"]}),q)},77750:function(e,t,l){l.d(t,{r:function(){return c}});var n=l(38583),s=(l(38218),l(87582),l(35194),l(37716)),r=(l(40205),l(88002),l(5304),l(92340),l(91841),l(3679)),o=(l(14541),l(7450),l(21693),l(89097),l(49342),l(48483),l(18638)),u=l(86640),c=function(){var e=i(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.ez,u.A0,r.UX,o._8]]}),e}()},35194:function(t,l,n){n.d(l,{s:function(){return k}});var s=n(37716),r=n(40205),o=n(88002),u=n(5304),c=n(92340),d=n(91841),g=n(3679),f=n(14541),m=n(7450),h=n(21693),v=n(89097),p=n(39895),b=n(49342),A=n(86640),Z=n(38583);function y(e,t){if(1&e){var a=s.EpF();s.TgZ(0,"div",18),s.TgZ(1,"label",5),s._uU(2),s.qZA(),s.TgZ(3,"div",19),s.TgZ(4,"ng-select",20),s.NdJ("change",function(e){return s.CHM(a),s.oxw().onAlarmGroupChange(e)}),s.TgZ(5,"ng-option",21),s._uU(6),s.qZA(),s.TgZ(7,"ng-option",22),s._uU(8,"ONT"),s.qZA(),s.TgZ(9,"ng-option",23),s._uU(10,"OLT"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){var l=s.oxw();s.xp6(2),s.Oqu(l.language["System Type"]),s.xp6(2),s.Q6J("searchable",!1)("multiple",!1)("clearable",!1),s.xp6(2),s.Oqu(l.language.All)}}function x(e,t){if(1&e&&(s.TgZ(0,"small",26),s._uU(1),s.qZA()),2&e){var a=s.oxw(2);s.xp6(1),s.Oqu(a.language["Invalid FSAN"])}}function _(e,t){if(1&e){var a=s.EpF();s.TgZ(0,"div",18),s.TgZ(1,"label",5),s._uU(2),s.qZA(),s.TgZ(3,"div",19),s.TgZ(4,"input",24),s.NdJ("keypress",function(e){return s.CHM(a),s.oxw().removespecialcharacter(e)})("keyup",function(e){return s.CHM(a),s.oxw().validateFSAN(e)}),s.qZA(),s.YNc(5,x,2,1,"small",25),s.qZA(),s.qZA()}if(2&e){var l=s.oxw();s.xp6(2),s.Oqu(l.language.FSAN),s.xp6(2),s.s9C("placeholder",l.language.FSAN),s.xp6(1),s.Q6J("ngIf",!l.fsanvalid)}}function T(e,t){if(1&e){var a=s.EpF();s.TgZ(0,"div",4),s.TgZ(1,"label",5),s._uU(2),s.qZA(),s.TgZ(3,"div",27),s.TgZ(4,"ng-select",28),s.NdJ("add",function(e){return s.CHM(a),s.oxw().validateAlarmName(e)})("remove",function(e){return s.CHM(a),s.oxw().validateAlarmName(e)}),s.qZA(),s.qZA(),s.qZA()}if(2&e){var l=s.oxw();s.xp6(2),s.Oqu(l.language["Exclude Alarms"]),s.xp6(2),s.s9C("placeholder",l.language["Alarm Name"]),s.Q6J("searchable",!0)("clearable",!1)("multiple",!0)("items",l.alarmNames)}}function q(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&e){var a=s.oxw(3);s.xp6(1),s.hij(" ",a.language.New_Profile_Validation2," ")}}function D(e,t){if(1&e&&(s.TgZ(0,"div"),s._uU(1),s.qZA()),2&e){var a=s.oxw(3);s.xp6(1),s.hij(" ",a.language["Please enter the display limit"]," ")}}function M(e,t){if(1&e&&(s.TgZ(0,"div",32),s.YNc(1,q,2,1,"div",33),s.YNc(2,D,2,1,"div",33),s.qZA()),2&e){var a=s.oxw(2);s.xp6(1),s.Q6J("ngIf",null==a.filtersForm||null==a.filtersForm.controls||null==a.filtersForm.controls.limit.errors?null:a.filtersForm.controls.limit.errors.invalidNumber),s.xp6(1),s.Q6J("ngIf",null==a.filtersForm||null==a.filtersForm.controls||null==a.filtersForm.controls.limit.errors?null:a.filtersForm.controls.limit.errors.isrequired)}}function S(e,t){if(1&e&&(s.TgZ(0,"div",18),s.TgZ(1,"label",5),s._uU(2),s.TgZ(3,"span",29),s._uU(4,"*"),s.qZA(),s.qZA(),s.TgZ(5,"div",19),s._UZ(6,"input",30),s.YNc(7,M,3,2,"div",31),s.qZA(),s.qZA()),2&e){var a=s.oxw();s.xp6(2),s.hij("",a.language["Display Limit"]," "),s.xp6(4),s.s9C("placeholder",a.language["Display Limit"]),s.xp6(1),s.Q6J("ngIf",(null==a.filtersForm||null==a.filtersForm.controls?null:a.filtersForm.controls.limit.invalid)&&((null==a.filtersForm||null==a.filtersForm.controls?null:a.filtersForm.controls.limit.dirty)||(null==a.filtersForm||null==a.filtersForm.controls?null:a.filtersForm.controls.limit.touched)))}}var O,k=((O=function(){function t(e,l,i,n,r,o,u,c,d){a(this,t),this.http=e,this.fb=l,this.chartOptionService=i,this.translateService=n,this.issueService=r,this.ssoService=o,this.route=u,this.commonOrgService=c,this.router=d,this.filterData=new s.vpe,this.filtersForm=this.fb.group({region:[""],location:[""],system:[""],limit:[20,[j]],systemStatus:"connected",alarmEventName:[""],fsan_serialno:"",device_type:"ALL"}),this.regionsDataArray=["All"],this.locationDataArray=["All"],this.systemDataArray=["All"],this.geoMapFilters=!1,this.activeTab="alarms",this.geoMapIssue="false",this.alarmNames=[],this.hasScopeAccess=!1,this.showFSAN=!0,this.fsanvalid=!0,this.urls=this.router.url}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t}),this.filtersForm.patchValue({region:["All"],location:["All"],system:["All"],limit:20,systemStatus:"connected",fsan_serialno:"",device_type:"ALL"}),this.regionsApiLoader();var t=this.ssoService.getScopes();if(c.N.VALIDATE_SCOPE){var a=Object.keys(t);if(a)for(var l=0;l<a.length;l++)if(-1!==a[l].indexOf("cloud.rbac.coc.issues.current")){this.hasScopeAccess=!0;break}}else this.hasScopeAccess=!0;this.hasScopeAccess?(this.ssoService.setPageAccess(!0),this.route.queryParams.subscribe(function(t){var a,l,i;e.geoMapIssue=t.geoMapIssue&&"true"==t.geoMapIssue?t.geoMapIssue:"false","true"==e.geoMapIssue&&(e.homeGeoMapFilters=e.issueService.getgeoMapHomeFilterParams(),e.issuesGeoMapFilters=e.homeGeoMapFilters?e.homeGeoMapFilters.geoMapFilterParams:{},e.issuesGeoMapFilters&&(e.filtersForm.get("device_type").setValue(e.issuesGeoMapFilters.device_type?null===(a=e.issuesGeoMapFilters.device_type)||void 0===a?void 0:a.toUpperCase():"ALL"),e.onAlarmGroupChange(e.filtersForm.get("device_type").value),("ONT"==(null===(l=e.issuesGeoMapFilters.device_type)||void 0===l?void 0:l.toUpperCase())||"ALL"==(null===(i=e.issuesGeoMapFilters.device_type)||void 0===i?void 0:i.toUpperCase()))&&e.filtersForm.get("fsan_serialno").setValue(e.issuesGeoMapFilters.fsan_serialno?e.issuesGeoMapFilters.fsan_serialno:"")))}),this.geoMapfilterSubscription=this.issueService.homegeomapNavigation$.subscribe(function(){e.gotoHomeGeomap()}),this.urls.includes("/cco/issues/device/realtime/current-issues")?this.urls.includes("geoMapIssue=true")?setTimeout(function(){e.getAlarmNames()},2e3):this.getAlarmNames():this.generateParams()):this.ssoService.setPageAccess(!1)}},{key:"regionsApiLoader",value:function(){var t=this;this.systemSelected="All",this.regionsSubject=this.issueService.getRegions().subscribe(function(a){var l,i,n;if(a&&a.length&&(a=t.issueService.appendFqn(a)),t.chartOptionService.setRegionsInfo(a),a.sort(),t.regionsDataArray=[].concat(e(t.regionsDataArray),e(a)),"true"==t.geoMapIssue&&t.issuesGeoMapFilters){var s=["All"],r=["All"],o=["All"];t.issuesGeoMapFilters&&t.issuesGeoMapFilters.region&&(s=null===(l=t.issuesGeoMapFilters.region)||void 0===l?void 0:l.split(",")),t.issuesGeoMapFilters&&t.issuesGeoMapFilters.location&&(r=null===(i=t.issuesGeoMapFilters.location)||void 0===i?void 0:i.split(",")),t.issuesGeoMapFilters&&t.issuesGeoMapFilters.system&&(o=null===(n=t.issuesGeoMapFilters.system)||void 0===n?void 0:n.split(",")),t.filtersForm.get("region").setValue(s),setTimeout(function(){t.filtersForm.get("location").setValue(r),t.loadLocationValue(""),setTimeout(function(){t.filtersForm.get("system").setValue(o),t.selectSystem(""),t.loadSystemValue()},200)},200)}},function(e){})}},{key:"loadLocationValue",value:function(t){var a=this;this.systemSelected="All";var l=this.filtersForm.get("region").value,i=this.filtersForm.get("location").value;if(l){var n="";if(l.length&&l!==["All"]){if(-1!==l.indexOf("All"))return this.regionName=null,this.locationName=null,this.systemName=null,this.locationDataArray=["All"],void(this.systemDataArray=["All"]);l.forEach(function(e){"All"!=e&&(n+="&region=".concat(e))}),this.locationsSubject=this.http.get("".concat(c.N.API_BASE_URL,"nfa/locations?tenant=0").concat(n)).pipe((0,o.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),a.issueService.appendFqn(e)}),(0,u.K)(this.handleError)).subscribe(function(t){if(a.chartOptionService.setLocationsInfo(t),a.locationDataArray=["All"],a.locationDataArray=[].concat(e(a.locationDataArray),e(t)),i&&i.length){var l=a.chartOptionService.getLocationsObj(),n=Object.keys(l).length?Object.keys(l):[],s=[];i.forEach(function(e){-1!==n.indexOf(e)&&s.push(e)}),s.length||(s=["All"]),a.filtersForm.get("location").setValue(s),a.loadSystemValue()}},function(e){}),this.regionName=l}else this.filtersForm.get("region").setValue(["All"]),this.filtersForm.get("location").setValue(["All"]),this.filtersForm.get("system").setValue(["All"]),this.regionName=null,this.locationName=null,this.systemName=null,this.locationDataArray=["All"],this.systemDataArray=["All"]}}},{key:"handleError",value:function(e){return(0,r._)(e)}},{key:"loadSystemValue",value:function(t){var a=this;this.clickedLocation="";var l=this.filtersForm.get("region").value,i=this.filtersForm.get("location").value,n=this.filtersForm.get("system").value;if(this.systemSelected=["All"],l.length&&i.length&&-1===i.indexOf("All")){var s="";l.forEach(function(e){"All"!=e&&(s+="&region=".concat(e))});var r="";i.forEach(function(e){"All"!=e&&(r+="&location=".concat(e))}),this.systemsSubject=this.http.get("".concat(c.N.API_BASE_URL,"nfa/systems?tenant=0").concat(s).concat(r)).pipe((0,o.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,u.K)(this.handleError)).subscribe(function(t){if(a.chartOptionService.setSystemsInfo(t),a.systemDataArray=["All"],a.systemDataArray=[].concat(e(a.systemDataArray),e(t)),n&&n.length){var l=a.chartOptionService.getSystemsObj(),i=Object.keys(l).length?Object.keys(l):[],s=[];n.forEach(function(e){-1!==i.indexOf(e)&&s.push(e)}),s.length||(s=["All"],a.systemName=null),a.filtersForm.get("system").setValue(s)}},function(e){}),this.locationName=i}else i.length||(this.filtersForm.get("location").setValue(["All"]),this.filtersForm.get("system").setValue(["All"]),this.locationName=null,this.systemName=null,this.systemDataArray=["All"])}},{key:"clearFilter",value:function(){this.locationDataArray=["All"],this.systemDataArray=["All"],this.filtersForm.patchValue({region:["All"],location:["All"],system:["All"],limit:20,systemStatus:"connected",alarmEventName:["All"],fsan_serialno:"",device_type:"ALL"}),this.clickedRegion=void 0,this.clickedLocation=void 0,this.locationName=void 0,this.regionName=void 0,this.systemName=void 0,this.issueService.setCurrentIssuesFilterParams({alarmCount:20},this.geoMapFilters)}},{key:"validateRegion",value:function(e){var t=this.filtersForm.get("region").value;if("All"===e)t=["All"];else{var a=t.indexOf("All");a>-1&&t.splice(a,1)}this.filtersForm.get("region").setValue(t),this.loadLocationValue("")}},{key:"validateLocation",value:function(e){var t=this.filtersForm.get("location").value;if("All"===e)this.clickedLocation=void 0,this.locationName=void 0,t=["All"];else{var a=t.indexOf("All");a>-1&&t.splice(a,1)}this.filtersForm.get("location").setValue(t),this.loadSystemValue("")}},{key:"validateSystem",value:function(e){var t=this.filtersForm.get("system").value;if(t.length)if("All"===e)this.clickedSystem=void 0,this.systemName=void 0,t=["All"];else{var a=t.indexOf("All");a>-1&&t.splice(a,1)}else t=["All"];this.filtersForm.get("system").setValue(t)}},{key:"isNumber",value:function(e){var t=this.filtersForm.get("limit").value;return/^\d*\.?\d*$/.test(t)}},{key:"validateAlarmName",value:function(e){var t=this.filtersForm.get("alarmEventName").value;if(t.length)if("All"===e)t=["All"];else{var a=t.indexOf("All");a>-1&&t.splice(a,1)}else t=["All"];this.filtersForm.get("alarmEventName").setValue(t)}},{key:"selectSystem",value:function(e){var t=this.filtersForm.get("system").value;this.systemName=t,"All"==t&&(this.systemName=null)}},{key:"getAlarmNames",value:function(){var e=this;this.http.get("".concat(c.N.API_BASE_URL,"analytics-engine/alarmEvent?historyalarm=false&notificationType=Alarm")).subscribe(function(t){var a=[{id:"All",name:"None"}],l=t.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});l&&l.forEach(function(e){!e||"multiple-onts-down"!==e&&a.push({id:e,name:e})}),e.alarmNames=a,e.urls.includes("/cco/issues/device/realtime/current-issues")&&e.getCustomAlarmsFunc()})}},{key:"getCustomAlarmsFunc",value:function(){var e=this;this.http.get("".concat(c.N.API_BASE_URL,"analytics-engine/customAlarms/false")).subscribe(function(t){if(t&&t.length>0&&e.urls.includes("/cco/issues/device/realtime/current-issues")){var a=e.alarmNames.filter(function(e){return-1!=t.findIndex(function(t){return t.alarmName==e.name})}).map(function(e){return e.id});a&&a.length>0&&e.filtersForm.get("alarmEventName").setValue(a)}else e.filtersForm.get("alarmEventName").setValue(["All"]);e.generateParams()},function(t){e.error=!0,e.pageErrorHandle(t),e.filtersForm.get("alarmEventName").setValue(["All"]),e.generateParams()})}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.error=!0,this.loading=!1}},{key:"closeAlert",value:function(){this.error=!1}},{key:"onAlarmGroupChange",value:function(e){this.showFSAN="OLT"!==e}},{key:"validateFSAN",value:function(e){e?(0===this.filtersForm.get("fsan_serialno").value.length||12===this.filtersForm.get("fsan_serialno").value.length)&&(this.fsanvalid=!0):(this.fsanvalid=!0,0!==this.filtersForm.get("fsan_serialno").value.length&&12!==this.filtersForm.get("fsan_serialno").value.length&&(this.fsanvalid=!1))}},{key:"removespecialcharacter",value:function(e){var t;return(t=e.keyCode)>47&&t<58||t>64&&t<91||t>96&&t<123}},{key:"changeTab",value:function(e){this.issueService.fromMapNavigation(!1),this.activeTab=e,this.generateParams()}},{key:"generateParams",value:function(e){var t,a,l,i;if(!(null===(a=null===(t=this.filtersForm)||void 0===t?void 0:t.controls)||void 0===a?void 0:a.limit.invalid)&&(this.validateFSAN(),this.fsanvalid)){var n;this.systemName=this.filtersForm.get("system").value,n=this.systemName&&this.systemName.length&&-1===this.systemName.indexOf("All")?this.systemName.filter(function(e){return e&&e.length&&"All"!==e}):void 0;var s={region:this.clickedRegion||this.regionName,location:this.clickedLocation||this.locationName,system:n,alarmCount:this.filtersForm.get("limit").value?this.filtersForm.get("limit").value:0};if(this.urls.includes("/cco/issues/device/realtime/current-issues")){s.fsan_serialno=this.filtersForm.get("fsan_serialno").value,s.device_type=this.filtersForm.get("device_type").value,"OLT"===this.filtersForm.get("device_type").value&&delete s.fsan_serialno;var r=[];null===(i=null===(l=this.filtersForm.get("alarmEventName"))||void 0===l?void 0:l.value)||void 0===i||i.forEach(function(e){"All"!=e&&r.push(e)}),s.alarmEventName=r.join(",")}this.appliedParams=s,"disconncted"==this.activeTab&&(this.geoMapFilters=!1),this.issueService.setCurrentIssuesFilterParams(s,this.geoMapFilters,e)}}},{key:"gotoHomeGeomap",value:function(){var e={},t=Object.assign({},this.issueService.getCurrentIssuesFilterParams());e.geoMapFilterParams=Object.assign({},t),e.fromIssuesGeoMap="homeGeomap",e.reStoreMapViewDetails=this.homeGeoMapFilters&&this.homeGeoMapFilters.reStoreMapViewDetails?this.homeGeoMapFilters.reStoreMapViewDetails:{},e.geoMapFilterParams.show_only_ont_outage_systems=this.issuesGeoMapFilters&&(this.issuesGeoMapFilters.show_only_ont_outage_systems||0==this.issuesGeoMapFilters.show_only_ont_outage_systems)?this.issuesGeoMapFilters.show_only_ont_outage_systems:void 0,e.geoMapFilterParams.showAllSystems=this.issuesGeoMapFilters&&(this.issuesGeoMapFilters.showAllSystems||0==this.issuesGeoMapFilters.showAllSystems)?this.issuesGeoMapFilters.showAllSystems:void 0,e.geoMapFilterParams.modelNames=this.issuesGeoMapFilters&&this.issuesGeoMapFilters.modelNames?this.issuesGeoMapFilters.modelNames:void 0,e.geoMapFilterParams.vendorId=this.issuesGeoMapFilters&&this.issuesGeoMapFilters.vendorId?this.issuesGeoMapFilters.vendorId:"All",this.issueService.setgeoMapHomeFilterParams(e,!0,!0),this.router.navigate(["cco/home/active-systems-geomap"])}}]),t}()).\u0275fac=function(e){return new(e||O)(s.Y36(d.eN),s.Y36(g.qu),s.Y36(f.t),s.Y36(m.s),s.Y36(h.v),s.Y36(v.t6),s.Y36(p.gz),s.Y36(b.v),s.Y36(p.F0))},O.\u0275cmp=s.Xpm({type:O,selectors:[["app-common-realtime-filter"]],inputs:{geoMapFilters:"geoMapFilters",activeTab:"activeTab"},outputs:{filterData:"filterData"},decls:31,vars:25,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-12","pl-0","pr-0"],[1,"current-issue-menu-container","flex-wrap"],[1,"current-issue-menu-item","col-12","col-sm-12","col-md-3","col-lg-3"],["for","Name",1,"col-form-label","select-font"],["id","current-issues-interval",1,"w-100"],["formControlName","region","bindValue","id","bindLabel","name",1,"selectboxwidth",3,"multiple","items","clearable","searchable","placeholder","add","remove"],["formControlName","location","bindValue","id","bindLabel","name",1,"selectboxwidth",3,"multiple","items","placeholder","clearable","searchable","add","remove"],["formControlName","system","bindValue","uuid","bindLabel","name",1,"selectboxwidth",3,"multiple","items","placeholder","clearable","searchable","add","remove"],["class","current-issue-menu-item col-12 col-sm-6 col-md-3 col-lg-3",4,"ngIf"],["class","current-issue-menu-item col-12 col-sm-12 col-md-3 col-lg-3",4,"ngIf"],[1,"current-issue-menu-container"],[1,"row","mt-1"],[1,"col-md-12","text-left"],[1,"d-inline-flex"],["type","button",1,"btn-default","primary","btn-sm-primary",3,"click"],["type","button",1,"btn-transparent","ml-2",3,"click"],[1,"current-issue-menu-item","col-12","col-sm-6","col-md-3","col-lg-3"],["id","current-issues-interval",1,"w-100","ccl-form"],["formControlName","device_type",3,"searchable","multiple","clearable","change"],["value","ALL"],["value","ONT"],["value","OLT"],["formControlName","fsan_serialno","type","text","maxlength","12",1,"form-control",3,"placeholder","keypress","keyup"],["class","vald-tag red",4,"ngIf"],[1,"vald-tag","red"],["id","current-issues-interval",1,"custom-selectbox","w-100"],["formControlName","alarmEventName","id","alarmEventName","bindValue","id","bindLabel","name",3,"searchable","clearable","multiple","placeholder","items","add","remove"],[1,"error"],["formControlName","limit","type","number","min","1",1,"form-control",3,"placeholder"],["class","errorMessage",4,"ngIf"],[1,"errorMessage"],[4,"ngIf"]],template:function(e,t){1&e&&(s.TgZ(0,"form",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"label",5),s._uU(6),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"ng-select",7),s.NdJ("add",function(e){return t.validateRegion(e)})("remove",function(e){return t.loadLocationValue(e)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"div",4),s.TgZ(10,"label",5),s._uU(11),s.qZA(),s.TgZ(12,"div",6),s.TgZ(13,"ng-select",8),s.NdJ("add",function(e){return t.validateLocation(e)})("remove",function(e){return t.loadSystemValue(e)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",4),s.TgZ(15,"label",5),s._uU(16),s.qZA(),s.TgZ(17,"div",6),s.TgZ(18,"ng-select",9),s.NdJ("add",function(e){return t.validateSystem(e)})("remove",function(e){return t.validateSystem(e)}),s.qZA(),s.qZA(),s.qZA(),s.YNc(19,y,11,5,"div",10),s.YNc(20,_,6,3,"div",10),s.YNc(21,T,5,6,"div",11),s.YNc(22,S,8,3,"div",10),s.qZA(),s._UZ(23,"div",12),s.qZA(),s.qZA(),s.TgZ(24,"div",13),s.TgZ(25,"div",14),s.TgZ(26,"div",15),s.TgZ(27,"button",16),s.NdJ("click",function(){return t.generateParams()}),s._uU(28),s.qZA(),s.TgZ(29,"button",17),s.NdJ("click",function(){return t.clearFilter()}),s._uU(30),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.filtersForm),s.xp6(6),s.Oqu(t.language.region),s.xp6(2),s.s9C("placeholder",t.language.region),s.Q6J("multiple",!0)("items",t.regionsDataArray)("clearable",!1)("searchable",!0),s.xp6(3),s.Oqu(t.language.Location),s.xp6(2),s.s9C("placeholder",t.language.Location),s.Q6J("multiple",!0)("items",t.locationDataArray)("clearable",!1)("searchable",!0),s.xp6(3),s.Oqu(t.language.System),s.xp6(2),s.s9C("placeholder",t.language.System),s.Q6J("multiple",!0)("items",t.systemDataArray)("clearable",!1)("searchable",!0),s.xp6(1),s.Q6J("ngIf","alarms"===t.activeTab&&t.urls.includes("/cco/issues/device/realtime/current-issues")),s.xp6(1),s.Q6J("ngIf",t.showFSAN&&"alarms"===t.activeTab&&t.urls.includes("/cco/issues/device/realtime/current-issues")),s.xp6(1),s.Q6J("ngIf","alarms"===t.activeTab&&!t.geoMapFilters&&t.urls.includes("/cco/issues/device/realtime/current-issues")),s.xp6(1),s.Q6J("ngIf",!t.geoMapFilters),s.xp6(6),s.hij(" ",t.language.apply," "),s.xp6(2),s.hij(" ",t.language.Clear_Filters," "))},directives:[g._Y,g.JL,g.sg,A.w9,g.JJ,g.u,Z.O5,A.xv,g.Fj,g.nD,g.wV,g.qQ],styles:['@charset "UTF-8";.red[_ngcontent-%COMP%]{color:#c70000}.issue-left-menu[_ngcontent-%COMP%]{width:100%}.issue-right-content[_ngcontent-%COMP%]{width:100%;border-left:1px solid #dedede;padding:10px}.current-issue-menu-item[_ngcontent-%COMP%]{flex-grow:0}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f7f8fa!important;border-color:#888!important}.current-issues-table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{font-size:14px}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f8f8fa!important;border-color:#f8f8fa!important;padding:3px \\200b 10px}.undo-icon[_ngcontent-%COMP%]{background-color:#f8f8fa;padding:3px;color:#9e9e9e;border-radius:15px;margin:2px;font-size:17px;cursor:pointer;width:30px;height:30px;text-align:center}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600!important;font-size:16px}.cco-secondary-title[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;color:#1a1f22}.mw-170[_ngcontent-%COMP%]{min-width:170px}.current-issue-menu-container[_ngcontent-%COMP%]{display:flex;margin:20px 0 0;align-items:center;flex-wrap:wrap;justify-self:start}.test-container[_ngcontent-%COMP%]{display:flex;width:100%}.item[_ngcontent-%COMP%]{flex-grow:1;border-left:1px solid #EBEAEF;padding-left:12px;width:calc(100% / 4)}.item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-left:2%}@media screen and (max-width: 767px){.mpl[_ngcontent-%COMP%]{padding-left:15px!important}.current-issue-menu-container[_ngcontent-%COMP%]{display:block}.current-issue-menu-item[_ngcontent-%COMP%]{margin-top:10px;margin-left:0!important}.mt-center[_ngcontent-%COMP%]{text-align:center!important}#current-issue-table[_ngcontent-%COMP%]{overflow-x:scroll}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{height:5px;background:#f1f1f1}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:5px;background:#ddd}}@media screen and (min-width: 768px) and (max-width: 1140px){#current-issue-table[_ngcontent-%COMP%]{overflow-x:scroll}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{height:5px;background:#f1f1f1}#current-issue-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{height:5px;background:#ddd}}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:70%!important}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:120px!important}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:120px!important}.max-w-90[_ngcontent-%COMP%]{max-width:90px}.col-recom[_ngcontent-%COMP%]{min-width:300px}.col-recom[_ngcontent-%COMP%]   .subj-text[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.col-resource[_ngcontent-%COMP%]{max-width:400px!important}.col-resource[_ngcontent-%COMP%]   .col-res-data[_ngcontent-%COMP%]{min-width:400px;max-width:400px;word-break:break-all}.btn-transparent[_ngcontent-%COMP%]{color:#0279ff;border:none;background:none;font-size:14px}.btn-transparent[_ngcontent-%COMP%]:hover{color:#0054b2}.btn-sm-primary[_ngcontent-%COMP%]{height:24px;line-height:16px!important;padding:3px 20px!important;font-size:14px}']}),O);function j(e){return 0==(null==e?void 0:e.value)?(null==e||e.setValue(20),null):(null==e?void 0:e.value)?(null==e?void 0:e.value)>1e4?(null==e||e.setValue(1e4),null):(null==e?void 0:e.value)<1?(null==e||e.setValue(Math.abs(e.value)),null):/^\s*(\d{1,5}|-\d+)?\s*$/.test(e.value)?null:{invalidNumber:!0}:{isrequired:!0}}}}])}();