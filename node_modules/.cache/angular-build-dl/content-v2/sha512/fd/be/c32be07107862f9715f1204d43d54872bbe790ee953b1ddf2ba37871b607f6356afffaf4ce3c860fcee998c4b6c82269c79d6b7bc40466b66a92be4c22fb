!function(){"use strict";function o(o,n){for(var i=0;i<n.length;i++){var l=n[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(o,(e=l.key,t=void 0,"symbol"==typeof(t=function(o,n){if("object"!=typeof o||null===o)return o;var i=o[Symbol.toPrimitive];if(void 0!==i){var l=i.call(o,n||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(o)}(e,"string"))?t:String(t)),l)}var e,t}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5634],{55634:function(n,i,l){l.d(i,{C:function(){return _}});var e=l(25917),t=l(35758),r=l(5304),u=l(92340),a=l(37716),d=l(7450),s=l(91841),c=l(39895),v=l(49342),g=l(21693),f=l(39075),m=l(38583),p=l(1570);function h(o,n){if(1&o&&(a.TgZ(0,"div",15),a.TgZ(1,"div",16),a.TgZ(2,"div",17),a._uU(3),a.qZA(),a.TgZ(4,"div",18),a.TgZ(5,"a",19),a._UZ(6,"img",20),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&o){var i=a.oxw(2);a.xp6(2),a.s9C("title",null==i.workflowObj?null:i.workflowObj.name),a.xp6(1),a.hij(" ",null==i.workflowObj?null:i.workflowObj.name," ")}}function O(o,n){if(1&o&&(a.TgZ(0,"div",6),a.TgZ(1,"div",7),a.TgZ(2,"span",8),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",7),a.TgZ(5,"span",8),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"div",7),a.TgZ(8,"span",8),a._uU(9),a.qZA(),a.qZA(),a.qZA()),2&o){var i=a.oxw(2);a.xp6(3),a.Oqu(i.language["All Regions"]),a.xp6(3),a.Oqu(i.language["All Locations"]),a.xp6(3),a.Oqu(i.language["All Systems"]?i.language["All Systems"]:"All Systems")}}function b(o,n){if(1&o&&(a.TgZ(0,"div"),a.TgZ(1,"span",8),a._uU(2),a.qZA(),a.qZA()),2&o){var i=a.oxw().$implicit,l=a.oxw().$implicit,e=a.oxw(2);a.xp6(2),a.hij("",null==e.geoInfo[null==l?null:l.key][null==i?null:i.key]?null:e.geoInfo[null==l?null:l.key][null==i?null:i.key].length," System(s)")}}function w(o,n){if(1&o&&(a.TgZ(0,"div"),a.TgZ(1,"span",8),a._uU(2),a.qZA(),a.qZA()),2&o){var i=n.$implicit;a.xp6(2),a.Oqu(i)}}function y(o,n){if(1&o&&(a.TgZ(0,"div",9),a.TgZ(1,"div",10),a.TgZ(2,"div"),a.TgZ(3,"span",8),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"div",10),a.YNc(6,b,3,1,"div",0),a.YNc(7,w,3,1,"div",22),a.qZA(),a.qZA()),2&o){var i=n.$implicit,l=a.oxw().$implicit,e=a.oxw(2);a.xp6(4),a.Oqu(e.loctionsObj[null==i?null:i.key]),a.xp6(2),a.Q6J("ngIf",-1==(null==e.geoInfo[null==l?null:l.key][null==i?null:i.key]?null:e.geoInfo[null==l?null:l.key][null==i?null:i.key].indexOf("All Systems"))),a.xp6(1),a.Q6J("ngForOf",e.geoInfo[null==l?null:l.key][null==i?null:i.key])}}function Z(o,n){if(1&o&&(a.TgZ(0,"div",6),a.TgZ(1,"div",7),a.TgZ(2,"span",8),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",3),a.YNc(5,y,8,3,"div",21),a.ALo(6,"keyvalue"),a.qZA(),a.qZA()),2&o){var i=n.$implicit,l=a.oxw(2);a.xp6(3),a.Oqu(l.regionsObj[null==i?null:i.key]),a.xp6(2),a.Q6J("ngForOf",a.lcZ(6,2,l.geoInfo[null==i?null:i.key]))}}function x(o,n){if(1&o&&(a.TgZ(0,"section"),a.YNc(1,h,7,2,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a._uU(5),a.qZA(),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",7),a.TgZ(9,"span",8),a._uU(10),a.qZA(),a.qZA(),a.TgZ(11,"div",3),a.TgZ(12,"div",9),a.TgZ(13,"div",10),a.TgZ(14,"span",8),a._uU(15),a.qZA(),a.qZA(),a.TgZ(16,"div",10),a.TgZ(17,"span",8),a._uU(18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(19,O,10,3,"div",11),a.YNc(20,Z,7,4,"div",12),a.ALo(21,"keyvalue"),a.qZA(),a.qZA(),a.TgZ(22,"div",7),a.TgZ(23,"div",4),a._uU(24),a.qZA(),a.TgZ(25,"div",13),a._UZ(26,"app-summary-recepients",14),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&o){var i=a.oxw();a.xp6(1),a.Q6J("ngIf",i.showTitle),a.xp6(4),a.Oqu(i.language["OLT System"]),a.xp6(5),a.Oqu(i.language["Region(s)"]),a.xp6(5),a.Oqu(i.language["Location(s)"]),a.xp6(3),a.Oqu(i.language["System(s)"]),a.xp6(1),a.Q6J("ngIf",-1!==(null==i.workflowObj||null==i.workflowObj.regions?null:i.workflowObj.regions.indexOf("All"))||!(null!=i.workflowObj&&null!=i.workflowObj.regions&&i.workflowObj.regions.length)),a.xp6(1),a.Q6J("ngForOf",a.lcZ(21,9,i.geoInfo)),a.xp6(4),a.Oqu(i.language.Recipients),a.xp6(2),a.Q6J("workflowObj",i.workflowObj)}}function A(o,n){if(1&o&&(a.TgZ(0,"section"),a.TgZ(1,"div",23),a.TgZ(2,"div",24),a.TgZ(3,"div",25),a.TgZ(4,"div",26),a.TgZ(5,"div",27),a.TgZ(6,"div",28),a.TgZ(7,"span",29),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&o){var i=a.oxw();a.xp6(8),a.Oqu(i.language.Loading)}}var k,_=((k=function(){function n(o,i,l,e,t,r){!function(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.translateService=o,this.http=i,this.route=l,this.commonOrgService=e,this.issueService=t,this.titleService=r,this.regionsObj={},this.loctionsObj={All:"All Locations"},this.geoInfo={},this.showAllRegions=!1,this.regLocSysMapInfo=[]}var i,l,a;return i=n,(l=[{key:"workflowObj",get:function(){return this._workflowObj},set:function(o){var n;console.log(o),-1!==(null===(n=null==o?void 0:o.regions)||void 0===n?void 0:n.indexOf("All"))&&(this.showAllRegions=!0),this._workflowObj=o}},{key:"ngOnInit",value:function(){var o=this;this.loader=!0,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(n){o.language=n});var n=this.route.snapshot.paramMap.get("notificationId");n?(this.titleService.setTitle("Optical Outliers Notifications - Email Notifications - Network Operations - Operations - Operations - Calix Cloud"),this.showTitle=!0,this.getRecordById(n)):this.getRegions()}},{key:"getRegions",value:function(){var o=this;this.regionsSubject=this.issueService.getRegions().subscribe(function(n){var i,l;if(n){n=o.issueService.appendFqn(n);var e={};null==n||n.forEach(function(n){var i,l,t,r,u,a,d,s;if(e[null==n?void 0:n.id]=null==n?void 0:n.name,(null===(l=null===(i=o.workflowObj)||void 0===i?void 0:i.regions)||void 0===l?void 0:l.length)&&-1!==(null===(r=null===(t=o.workflowObj)||void 0===t?void 0:t.regions)||void 0===r?void 0:r.indexOf(null==n?void 0:n.id))&&(o.geoInfo[null==n?void 0:n.id]={}),(null===(a=null===(u=o.workflowObj)||void 0===u?void 0:u.locations)||void 0===a?void 0:a.length)&&-1!==(null===(s=null===(d=o.workflowObj)||void 0===d?void 0:d.locations)||void 0===s?void 0:s.indexOf("All"))){var c=o.geoInfo;for(var v in c)o.geoInfo[v].All=["All Systems"]}}),o.regionsObj=e,(null===(l=null===(i=o.workflowObj)||void 0===i?void 0:i.regions)||void 0===l?void 0:l.length)?o.loadLocationSystem():o.loader=!1}},function(o){console.log(o)})}},{key:"loadLocationValue",value:function(){var o=this,n=this.workflowObj.regions;if(null==n?void 0:n.length){var i="";if(n.length){if(-1!==n.indexOf("All"))return;n.forEach(function(o){"All"!=o&&(i+="&region=".concat(o))}),this.locationsSubject=this.http.get("".concat(u.N.API_BASE_URL,"nfa/locations?").concat(i)).subscribe(function(n){var i,l;if(null===(l=null===(i=o.workflowObj)||void 0===i?void 0:i.location)||void 0===l?void 0:l.length){var e=o.geoInfo;null==n||n.forEach(function(n){var i,l;-1!==(null===(l=null===(i=o.workflowObj)||void 0===i?void 0:i.location)||void 0===l?void 0:l.indexOf(null==n?void 0:n.id))&&(e[null==n?void 0:n.regionId]?e[null==n?void 0:n.regionId].push(null==n?void 0:n.name):e[null==n?void 0:n.regionId]=[null==n?void 0:n.name])}),console.log(e),o.geoInfo=e}},function(o){})}}}},{key:"generateSystemDetails",value:function(){var o=this.workflowObj.regions,n=this.workflowObj.locations,i="";null==o||o.forEach(function(o){"All"!=o&&(i&&(i+="&"),i+="region=".concat(o))});var l="";return null==n||n.forEach(function(o){"All"!=o&&(l+="&location=".concat(o))}),this.http.get("".concat(u.N.API_BASE_URL,"nfa/systems/details?").concat(i).concat(l,"&includeDeleted=true")).pipe((0,r.K)(function(o){return o["api-error"]=!0,(0,e.of)(o)}))}},{key:"mapRegLocSysInfo",value:function(o){var n,i,l,e,t=this;console.log(o);var r={},u={},a={};return(null===(n=null==o?void 0:o.devices)||void 0===n?void 0:n.length)&&(o.devices=null===(i=null==o?void 0:o.devices)||void 0===i?void 0:i.filter(function(o){var n;return-1!==(null===(n=t.workflowObj.systems)||void 0===n?void 0:n.indexOf(null==o?void 0:o.uuid))})),null===(l=null==o?void 0:o.devices)||void 0===l||l.sort(function(o,n){var i;return null===(i=null==o?void 0:o.regionName)||void 0===i?void 0:i.localeCompare(null==n?void 0:n.regionName)}),null===(e=null==o?void 0:o.devices)||void 0===e||e.forEach(function(o){void 0===r[null==o?void 0:o.regionuuid]&&(r[null==o?void 0:o.regionuuid]={},u[null==o?void 0:o.regionuuid]=null==o?void 0:o.regionName),void 0===r[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid]&&(r[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid]=[],a[null==o?void 0:o.locationuuid]=null==o?void 0:o.locationName),"object"==typeof r[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid]&&r[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid].push(null==o?void 0:o.name)}),r}},{key:"mapRegLocSysInfoOld",value:function(o){var n,i,l;console.log(o);var e={},t={},r={};null===(n=null==o?void 0:o.devices)||void 0===n||n.sort(function(o,n){var i;return null===(i=null==o?void 0:o.regionName)||void 0===i?void 0:i.localeCompare(null==n?void 0:n.regionName)}),null===(i=null==o?void 0:o.devices)||void 0===i||i.forEach(function(o){void 0===e[null==o?void 0:o.regionuuid]&&(e[null==o?void 0:o.regionuuid]={},t[null==o?void 0:o.regionuuid]=null==o?void 0:o.regionName),void 0===e[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid]&&(e[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid]=[],r[null==o?void 0:o.locationuuid]=null==o?void 0:o.locationName),"object"==typeof e[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid]&&e[null==o?void 0:o.regionuuid][null==o?void 0:o.locationuuid].push({id:null==o?void 0:o.uuid,name:null==o?void 0:o.name})}),console.log(e);var u=[],a=[];for(var d in e){var s={};s={name:t[d]?t[d]:d,locations:[]};var c=function(o){var n={};e[d][o]&&(n={name:r[o]?r[o]:o,systems:[]},null===(l=e[d][o])||void 0===l||l.forEach(function(o){n.systems.push(o)})),s.locations.push(n)};for(var v in e[d])c(v);u.push(s)}console.log(u),null==u||u.forEach(function(o,n){var i,l;o.locations=null===(i=null==o?void 0:o.locations)||void 0===i?void 0:i.sort(function(o,n){var i;return null===(i=null==o?void 0:o.name)||void 0===i?void 0:i.localeCompare(null==n?void 0:n.name)}),null===(l=null==o?void 0:o.locations)||void 0===l||l.forEach(function(o,n){var i,l;o.systems=null===(i=null==o?void 0:o.systems)||void 0===i?void 0:i.sort(function(o,n){var i;return null===(i=null==o?void 0:o.name)||void 0===i?void 0:i.localeCompare(null==n?void 0:n.name)});var e=[];null===(l=null==o?void 0:o.systems)||void 0===l||l.forEach(function(o){a.push(o.id),e.push(o.name)}),o.systems=e})}),console.log(u),this.regLocSysMapInfo=u}},{key:"loadLocationSystem",value:function(){var o,n,i,l,a=this,d=this.workflowObj.regions;if(null==d?void 0:d.length){var s="";if(d.length){if(-1!==d.indexOf("All"))return;d.forEach(function(o){"All"!=o&&(s&&(s+="&"),s+="region=".concat(o))});var c={};c.locations=this.http.get("".concat(u.N.API_BASE_URL,"nfa/locations?").concat(s)).pipe((0,r.K)(function(o){return o["api-error"]=!0,(0,e.of)(o)})),(null===(n=null===(o=this.workflowObj)||void 0===o?void 0:o.systems)||void 0===n?void 0:n.length)&&-1==(null===(l=null===(i=this.workflowObj)||void 0===i?void 0:i.systems)||void 0===l?void 0:l.indexOf())&&(c.systems=this.generateSystemDetails()),(0,t.D)(c).subscribe(function(o){var n,i,l,e,t,r;o.systems&&(r=a.mapRegLocSysInfo(o.systems),console.log(r));var u=a.geoInfo;for(var d in(null===(i=null===(n=a.workflowObj)||void 0===n?void 0:n.locations)||void 0===i?void 0:i.length)&&(o.locations=a.issueService.appendFqn(o.locations),null===(l=o.locations)||void 0===l||l.forEach(function(o){var n,i,l;a.loctionsObj[null==o?void 0:o.id]=null==o?void 0:o.name,-1!==(null===(i=null===(n=a.workflowObj)||void 0===n?void 0:n.locations)||void 0===i?void 0:i.indexOf(null==o?void 0:o.id))?(u[null==o?void 0:o.regionId][null==o?void 0:o.id]=[],u[null==o?void 0:o.regionId][null==o?void 0:o.id]=r&&r[null==o?void 0:o.regionId]&&r[null==o?void 0:o.regionId][null==o?void 0:o.id]?r[null==o?void 0:o.regionId][null==o?void 0:o.id]:["All Systems"]):null===(l=a.workflowObj.regions)||void 0===l||l.indexOf(null==o?void 0:o.regionId)})),null===(e=o.locations)||void 0===e||e.forEach(function(o){var n,i,l,e;a.loctionsObj[null==o?void 0:o.id]=null==o?void 0:o.name,-1===(null===(i=null===(n=a.workflowObj)||void 0===n?void 0:n.locations)||void 0===i?void 0:i.indexOf(null==o?void 0:o.id))&&-1!==(null===(l=a.workflowObj.regions)||void 0===l?void 0:l.indexOf(null==o?void 0:o.regionId))&&!(null===(e=Object.keys(u[null==o?void 0:o.regionId]))||void 0===e?void 0:e.length)&&(u[null==o?void 0:o.regionId].All=["All Systems"])}),u)(null===(t=Object.keys(u[d]))||void 0===t?void 0:t.length)||(u[d].All=["All Systems"]);console.log(u),a.geoInfo=u,a.loader=!1})}}}},{key:"getRecordById",value:function(o){var n=this;this.loader=!0;var i="".concat(u.N.API_BASE_URL,"health/config/notifications/").concat(encodeURIComponent(o));this.http.get(i).subscribe(function(o){o&&Object.keys(o).length&&(n.workflowObj=Object.assign(Object.assign({},n.workflowObj),o)),n.getRegions(),n.loader=!1},function(o){console.log(o),n.pageErrorHandle(o)})}},{key:"pageErrorHandle",value:function(o){this.errorInfo=401==o.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(o),this.error=!0,this.loader=!1}}])&&o(i.prototype,l),a&&o(i,a),Object.defineProperty(i,"prototype",{writable:!1}),n}()).\u0275fac=function(o){return new(o||k)(a.Y36(d.s),a.Y36(s.eN),a.Y36(c.gz),a.Y36(v.v),a.Y36(g.v),a.Y36(f.Dx))},k.\u0275cmp=a.Xpm({type:k,selectors:[["app-summary"]],inputs:{workflowObj:"workflowObj"},decls:2,vars:2,consts:[[4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-8"],[1,"border-bottom","cco-secondary-title","pb-1"],[1,"summary-info-table","summary-olt-table","px-3"],[1,"row","border-bottom"],[1,"col-md-4"],[1,"summary-label"],[1,"row"],[1,"col-md-6"],["class","row border-bottom",4,"ngIf"],["class","row border-bottom",4,"ngFor","ngForOf"],[1,"summary-info-table"],[3,"workflowObj"],[1,"row","mb-2"],[1,"col-md-12","pb-1","position-relative"],[1,"ccl-admin-title","text-truncate","pr-3",3,"title"],[1,"close-page"],["routerLink","/cco/operations/alarms/health-alarm-notifications","routerLinkActive","active",1,"cursor-pointer"],["src","assets/img/ic_close-44px.svg","alt",""],["class","row",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"container"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(o,n){1&o&&(a.YNc(0,x,27,11,"section",0),a.YNc(1,A,9,1,"section",0)),2&o&&(a.Q6J("ngIf",!n.loader),a.xp6(1),a.Q6J("ngIf",n.loader))},directives:[m.O5,m.sg,p.f,c.yS,c.Od],pipes:[m.Nd],styles:[".summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF!important}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400!important;line-height:24px;letter-spacing:0em;text-align:left;color:#4c4c4c;border:none!important;padding:0 10px 0 0}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF!important}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400!important;line-height:24px;letter-spacing:0em;text-align:left;color:gray;width:50%;border:none!important;padding:0 10px;word-break:break-word!important}.monitored[_ngcontent-%COMP%]{max-height:300px;overflow:auto}.monitored[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%}.alarm-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-size:42px;font-style:normal;font-weight:300;line-height:53px;letter-spacing:0em;text-align:left;overflow:hidden;text-overflow:ellipsis}.subgroups-but[_ngcontent-%COMP%]{background-color:#fff;border:none}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:950px!important}.modal-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px;word-wrap:break-word;color:#1a1f22}.alarm-name-list[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;height:26px}.alarm-name-list-box[_ngcontent-%COMP%]{max-height:550px;overflow-y:scroll}.hover-row[_ngcontent-%COMP%]{color:#0279ff!important}.hover-row[_ngcontent-%COMP%]:hover{text-decoration:underline}.width-60[_ngcontent-%COMP%]{width:60%!important}.min-height-div[_ngcontent-%COMP%]{min-height:15px}.marg-b-38px[_ngcontent-%COMP%]{margin-bottom:38px}.close-page[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px}.summary-label[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400;line-height:24px;text-align:left;color:gray}.summary-olt-table[_ngcontent-%COMP%]   .row.border-bottom[_ngcontent-%COMP%]{margin-bottom:-1px}.summary-olt-table[_ngcontent-%COMP%]   .row.border-bottom[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]}),k)}}])}();