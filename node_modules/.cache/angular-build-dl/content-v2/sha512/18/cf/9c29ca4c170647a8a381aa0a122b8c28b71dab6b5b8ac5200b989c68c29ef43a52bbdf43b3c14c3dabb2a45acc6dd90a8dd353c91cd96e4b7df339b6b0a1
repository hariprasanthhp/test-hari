"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[7280],{17280:function(t,e,n){n.r(e),n.d(e,{PonUtilizationModule:function(){return J}});var i=n(38583),o=n(39895),s=n(92340),r=n(79765),a=n(23771),l=n(37716),c=n(7450),g=n(43673),d=n(45834),u=n(38048),h=n(48483),p=n(51071),m=n(49342),f=n(56769),T=n(42313);function b(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"a",26),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).navigateThreshold()}),l._uU(1,"Edit Threshold"),l.qZA()}}function Z(t,e){if(1&t&&(l.TgZ(0,"section",6),l.TgZ(1,"div",7),l.TgZ(2,"div",8),l.TgZ(3,"div",9),l.TgZ(4,"div",10),l.TgZ(5,"span",11),l._uU(6),l.qZA(),l.TgZ(7,"div",12),l.TgZ(8,"h3",7),l._uU(9),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",13),l.TgZ(11,"span",14),l._uU(12),l.qZA(),l.TgZ(13,"div",12),l.TgZ(14,"h3"),l._uU(15),l.qZA(),l.qZA(),l.TgZ(16,"div",15),l._uU(17),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",16),l.TgZ(19,"span",17),l._UZ(20,"img",18),l._uU(21," Show Thresholds"),l.qZA(),l.TgZ(22,"div",19),l.TgZ(23,"button",20),l._UZ(24,"span"),l.qZA(),l.TgZ(25,"p",21),l._uU(26,"Upstream or Downstream PON Capacity Utilization"),l.qZA(),l.TgZ(27,"table",22),l.TgZ(28,"tr"),l.TgZ(29,"td",23),l._uU(30,"Set Threshold:"),l.qZA(),l.TgZ(31,"td",24),l._uU(32),l.qZA(),l.qZA(),l.TgZ(33,"tr"),l.TgZ(34,"td",23),l._uU(35,"Clear Threshold:"),l.qZA(),l.TgZ(36,"td",24),l._uU(37),l.qZA(),l.qZA(),l.qZA(),l.YNc(38,b,2,0,"a",25),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(6),l.hij(" ",t.language.TOTAL_PONS,""),l.xp6(3),l.Oqu(t.ponCounts?t.ponCounts:0),l.xp6(3),l.Oqu(t.language["PON Capacity Hits"]),l.xp6(3),l.Oqu(t.PONCAPACITY?t.PONCAPACITY:0),l.xp6(2),l.hij(" ",t.language.Past_24_hours,""),l.xp6(15),l.hij("",t.convert_number(null==t.thresholdData?null:t.thresholdData.ponPortHiUtilThreshold),"%"),l.xp6(5),l.hij("",t.convert_number(null==t.thresholdData?null:t.thresholdData.ponPortHiUtilThresholdClear),"%"),l.xp6(1),l.Q6J("ngIf",t.hasWriteAccess)}}function x(t,e){if(1&t&&(l.TgZ(0,"li",33),l.TgZ(1,"a",34),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw(2);l.xp6(2),l.Oqu(t.language["Real Time"])}}function v(t,e){if(1&t&&(l.TgZ(0,"li",35),l.TgZ(1,"a",36),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw(2);l.xp6(2),l.Oqu(t.language.Reports)}}function O(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",27),l.TgZ(1,"a",28),l.NdJ("click",function(){return l.CHM(t),l.oxw().toggleSideBar()}),l._UZ(2,"i",29),l.qZA(),l.TgZ(3,"ul",30),l.YNc(4,x,3,1,"li",31),l.YNc(5,v,3,1,"li",32),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("ngClass",t.isToggleSidebar?"d-none":"d-block"),l.xp6(2),l.Q6J("ngClass",t.isToggleSidebar?"fa-chevron-right":"fa-chevron-left"),l.xp6(2),l.Q6J("ngIf",t.menus.realtime),l.xp6(1),l.Q6J("ngIf",t.menus.report)}}function C(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"a",37),l.NdJ("click",function(){return l.CHM(t),l.oxw().toggleSideBar()}),l._UZ(1,"i",29),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("ngClass",t.isToggleSidebar?"SidebaCollapsedTrue":""),l.xp6(1),l.Q6J("ngClass",t.isToggleSidebar?"fa-chevron-right":"fa-chevron-left")}}let A=(()=>{class t{constructor(t,e,n,i,o,s,a,l,c,g){this.translateService=t,this.nfainventoryservice=e,this.ccochatservice=n,this.sso=i,this.dateUtils=o,this.websocketService=s,this.commonOrgService=a,this.ShortnumberPipe=l,this.router=c,this.service=g,this.ponCounts=0,this.dtTrigger=new r.xQ,this.count=0,this.PONCAPACITY=0,this.menus=[],this.isToggleSidebar=!1,this.topONTs=!1}ngOnInit(){var t;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.getData();let e=this.sso.getScopes();if(-1!==(null===(t=null==e?void 0:e["cloud.rbac.coc.operations.health.monitoringthresholds"])||void 0===t?void 0:t.indexOf("write"))&&(this.hasWriteAccess=!0),s.N.VALIDATE_SCOPE){let t=Object.keys(e);if(t)for(let e=0;e<t.length;e++)-1===t[e].indexOf("cloud.rbac.coc.health.pon.realtime")?-1===t[e].indexOf("cloud.rbac.coc.health.pon.report")||(this.menus.report=!0):this.menus.realtime=!0}else this.menus={realtime:!0,report:!0};this.totalcount=this.nfainventoryservice.GetPonCount("totalcount").subscribe(t=>{var e;this.ponCounts=null===(e=null==t?void 0:t.count)||void 0===e?void 0:e.toLocaleString()}),this.FromDate=Math.ceil((this.dateUtils.getStartUtcTimeByDaysseconds(0)-864e5)/1e3);let n=Math.ceil(this.dateUtils.getStartUtcTimeByDaysseconds(0)/1e3);this.ponutilizationchart=this.ccochatservice.Getutilizationthresholdexceededcount(`tenant=0&granularity=15min&startTime=${this.FromDate}&endTime=${n}`,"pon").subscribe(t=>{var e;if(t){let n=[];n=Object.values(t),n.forEach(t=>{t.dsUtilExcCnt&&"undefined"!=t.dsUtilExcCnt&&(this.PONCAPACITY=this.PONCAPACITY+t.dsUtilExcCnt),t.usUtilExcCnt&&"undefined"!=t.usUtilExcCnt&&(this.PONCAPACITY=this.PONCAPACITY+t.usUtilExcCnt)}),this.PONCAPACITY=null===(e=this.PONCAPACITY)||void 0===e?void 0:e.toLocaleString()}})}convert_number(t){return t&&parseFloat((100*t).toPrecision(12))}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtsub&&this.dtsub.unsubscribe(),this.totalcount&&this.totalcount.unsubscribe(),this.quarantinedcount&&this.quarantinedcount.unsubscribe(),this.dtTrigger.unsubscribe()}toggleSideBar(){this.isToggleSidebar=!this.isToggleSidebar,this.websocketService.shouldReflow=!0,this.sso.triggerToggle()}getData(){this.service.getThresholds().subscribe(t=>{this.loading=!1,this.thresholdData=t},t=>{this.loading=!1})}showPonModelOpen(){this.router.navigate(["/cco/health/pon-utilization/ONT"])}rerender(){var t,e;null===(e=null===(t=this.datatableElement)||void 0===t?void 0:t.dtInstance)||void 0===e||e.then(t=>{var e;null==t||t.destroy(),null===(e=this.dtTrigger)||void 0===e||e.next()})}close(){this.modalRef&&this.modalRef.close()}ngAfterViewInit(){this.dtTrigger.next()}GoBack(){this.topONTs=!1,this.ponCapacitytd=!0}countconvert(t){return this.ShortnumberPipe.transform(t,!0,5)}errorHandler(t){this.errormsg=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t)}navigateThreshold(){this.router.navigate(["/cco/operations/health/monitoring-thresholds"])}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(c.s),l.Y36(g.w),l.Y36(d.C),l.Y36(u.t6),l.Y36(h.s),l.Y36(p.i),l.Y36(m.v),l.Y36(f.J),l.Y36(o.F0),l.Y36(T.e))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-pon-utilization"]],viewQuery:function(t,e){if(1&t&&l.Gf(a.G,5),2&t){let t;l.iGM(t=l.CRH())&&(e.datatableElement=t.first)}},decls:8,vars:4,consts:[["class","my-3",4,"ngIf"],[1,"container"],[1,"row"],["class","col-md-2 pon-menu pl-0",3,"ngClass",4,"ngIf"],[1,"col-md-10","px-0","position-relative",3,"ngClass"],["class","sidebar-collapse",3,"ngClass","click",4,"ngIf"],[1,"my-3"],[1,""],[1,"d-flex","justify-content-between","align-items-center"],[1,"health-pon-menu-wrapper","col-8","p-0"],["id","PON-kpi-Total-PONs",1,"health-pon-menu-item","kbi-item"],["id","pendoCCOHealthTotalPONs",1,"menu-title"],[1,"d-flex","align-content-around","flex-wrap"],["id","PON-kpi-PON-Capacity-Hits",1,"health-pon-menu-item","kbi-item"],["id","pendoCCOHealthPONCapacityHits",1,"menu-title"],[1,"past-hours"],[1,"dropleft"],["data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"primary","dropdown-toggle","cursor-pointer"],["src","../../../../assets/img/ic_info.svg","alt","",1,"ic_info"],[1,"dropdown-menu","pop"],["type","button",1,"close"],[1,"title"],[1,"mb-4","ml-3"],[1,"text-right"],[1,"pl-3"],["class","text-decoration-none cursor-pointer",3,"click",4,"ngIf"],[1,"text-decoration-none","cursor-pointer",3,"click"],[1,"col-md-2","pon-menu","pl-0",3,"ngClass"],[1,"sidebar-collapse",3,"click"],[1,"fas",3,"ngClass"],["id","netops-list-menu",1,"nav","flex-column","left-menu","tab-view-style"],["class","nav-item","id","pon-Real-Time",4,"ngIf"],["class","nav-item","id","pon-Reports",4,"ngIf"],["id","pon-Real-Time",1,"nav-item"],["routerLink","/cco/health/pon-utilization/realtime","id","","routerLinkActive","active",1,"list-group-item","list-group-item-action"],["id","pon-Reports",1,"nav-item"],["id","","routerLink","/cco/health/pon-utilization/overview/basic","routerLinkActive","active",1,"list-group-item","list-group-item-action"],[1,"sidebar-collapse",3,"ngClass","click"]],template:function(t,e){1&t&&(l.YNc(0,Z,39,8,"section",0),l.TgZ(1,"section"),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.YNc(4,O,6,4,"div",3),l.TgZ(5,"div",4),l.YNc(6,C,2,2,"a",5),l._UZ(7,"router-outlet"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ngIf",e.menus.realtime||e.menus.report),l.xp6(4),l.Q6J("ngIf",e.menus.realtime||e.menus.report),l.xp6(1),l.Q6J("ngClass",e.isToggleSidebar?"col-12 col-md-12":""),l.xp6(1),l.Q6J("ngIf",e.isToggleSidebar))},directives:[i.O5,i.mk,o.lC,o.yS,o.Od],styles:['@charset "UTF-8";.health-pon-menu-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.kbi-item[_ngcontent-%COMP%]{padding:0 12px!important;border-left:1px solid #EBEAEF!important}.health-pon-menu-item[_ngcontent-%COMP%] + .health-pon-menu-item[_ngcontent-%COMP%]{margin-left:2%}.current-issue-menu-container[_ngcontent-%COMP%]{display:flex;margin:20px 0;justify-self:start}.current-issue-menu-item[_ngcontent-%COMP%]{flex-grow:0}.current-issue-menu-item[_ngcontent-%COMP%] + .current-issue-menu-item[_ngcontent-%COMP%]{margin-left:1%}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f8f8fa!important;border-color:#f8f8fa!important;padding:3px \\200b 10px}.subscriber-trends-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.subscriber-trends-item[_ngcontent-%COMP%]{flex-grow:1;width:calc(100% / 3)}.subscriber-trends-item[_ngcontent-%COMP%] + .subscriber-trends-item[_ngcontent-%COMP%]{margin-left:5%}.all-icon[_ngcontent-%COMP%]{font-size:10px;color:#9c9c9c;line-height:31px}.health-pon-menu-wrapper[_ngcontent-%COMP%]   .health-pon-menu-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px!important;color:#0054b2!important;line-height:32px!important;font-weight:300}.health-pon-menu-wrapper[_ngcontent-%COMP%]   .health-pon-menu-item[_ngcontent-%COMP%]   .menu-title[_ngcontent-%COMP%]{color:#1a1f22;font-size:14px;line-height:16.4px}.cco-secondary-title[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;color:#1a1f22}@media screen and (max-width: 767px){.health-pon-menu-wrapper[_ngcontent-%COMP%]{display:block}.health-pon-menu-item[_ngcontent-%COMP%]{border-left:3px solid #cdcdcd!important}.health-pon-menu-item[_ngcontent-%COMP%] + .health-pon-menu-item[_ngcontent-%COMP%]{margin-left:0!important;margin-top:10px}}.past-hours[_ngcontent-%COMP%]{color:#9e9e9e;font-size:12px;font-weight:400;line-height:12px}.sidebar-collapse[_ngcontent-%COMP%]{position:absolute;top:130px;background:#fff;width:25px;height:25px;border:1px solid #d3d3d3;border-radius:50%;text-align:center;left:2px;cursor:pointer;z-index:9}.pon-menu[_ngcontent-%COMP%]   .sidebar-collapse[_ngcontent-%COMP%]{left:auto;right:4px}.SidebaCollapsedTrue[_ngcontent-%COMP%]{left:-30px}.health-pon-menu-item.kbi-item[_ngcontent-%COMP%]{min-width:170px}.after-dnone[_ngcontent-%COMP%]:after{display:none}table.border-bottom-none.no-footer[_ngcontent-%COMP%]{border-bottom:none!important}.ic_info[_ngcontent-%COMP%]{width:13px;height:13px}.pop[_ngcontent-%COMP%]{padding:22px 24px 26px 26px;width:475px;filter:drop-shadow(0px 5px 15px rgba(128,128,128,.25));fill:#fff;border-radius:10px;border:none;transform:translate(-101%,-50%)!important}.pop[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#000;font-size:15px;font-weight:600;line-height:24px}.dropleft[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:before{display:none!important}.pop[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-size:12px 12px}']}),t})();var q=n(12664);const w=["showPonModel"];function _(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l.TgZ(4,"a",17),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw(2).showTopONTs(null==e?null:e.systemId,null==e?null:e.interface,null==e?null:e.system)}),l._uU(5),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(2),l.Oqu(null==t?null:t.system),l.xp6(3),l.Oqu(null==t?null:t.interface)}}function P(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"section",2),l.TgZ(1,"div",3),l.TgZ(2,"h2",4),l._uU(3),l.qZA(),l.TgZ(4,"button",5),l.NdJ("click",function(){return l.CHM(t),l.oxw().close()}),l._UZ(5,"span",6),l.qZA(),l.qZA(),l.TgZ(6,"div",7),l.TgZ(7,"table",8,9),l.TgZ(9,"thead",10),l.TgZ(10,"tr"),l.TgZ(11,"th"),l._uU(12),l.qZA(),l.TgZ(13,"th"),l._uU(14),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",11),l.TgZ(16,"div",12),l.TgZ(17,"div",13),l.TgZ(18,"span",14),l._uU(19),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"tbody",15),l.YNc(21,_,6,2,"tr",16),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("hidden",!t.ponCapacitytd),l.xp6(3),l.Oqu(t.language["PON Capacity Hits"]),l.xp6(4),l.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),l.xp6(5),l.Oqu(t.language.System),l.xp6(2),l.Oqu(t.language["Affected Interfaces"]),l.xp6(1),l.Q6J("hidden",!t.loading),l.xp6(4),l.Oqu(t.language.Loading),l.xp6(1),l.Q6J("hidden",!t.ponCapacitytd||t.loading),l.xp6(1),l.Q6J("ngForOf",t.affectedPorts)}}const y=["showTopONTs"];function U(t,e){if(1&t&&(l.TgZ(0,"div",21),l.TgZ(1,"div",22),l.TgZ(2,"div",23),l.TgZ(3,"span",24),l._uU(4),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw(3);l.xp6(4),l.Oqu(t.language.Loading)}}function M(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",25),l.TgZ(2,"div",26),l.TgZ(3,"div",27),l.TgZ(4,"span",28),l._UZ(5,"img",29),l.qZA(),l.TgZ(6,"button",30),l.NdJ("click",function(){return l.CHM(t),l.oxw(3).error=!1}),l._UZ(7,"span"),l.qZA(),l._UZ(8,"div",31),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw(3);l.xp6(8),l.Q6J("innerHtml",t.errorInfo,l.oJD)}}function N(t,e){if(1&t&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.qZA()),2&t){const t=e.$implicit,n=l.oxw(3);l.xp6(2),l.Oqu(null==t?null:t.ontId),l.xp6(2),l.hij("",n.AddTotalRate(null==t||null==t.ontUpstreamUsage?null:t.ontUpstreamUsage.rate,null==t||null==t.ontDownstreamUsage?null:t.ontDownstreamUsage.rate)," "),l.xp6(2),l.hij(" ",(null==t||null==t.ontUpstreamUsage?null:t.ontUpstreamUsage.byteCount)+(null==t||null==t.ontDownstreamUsage?null:t.ontDownstreamUsage.byteCount),""),l.xp6(2),l.Oqu((null==t||null==t.ontUpstreamUsage?null:t.ontUpstreamUsage.packetCount)+(null==t||null==t.ontDownstreamUsage?null:t.ontDownstreamUsage.packetCount))}}function S(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"section",3),l.TgZ(1,"div",4),l.TgZ(2,"div"),l.TgZ(3,"div",5),l.TgZ(4,"button",6),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).GoBack()}),l._UZ(5,"img",7),l._uU(6),l.qZA(),l.TgZ(7,"button",8),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).close()}),l._UZ(8,"span",9),l.qZA(),l.qZA(),l.TgZ(9,"h2",10),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",11),l.TgZ(12,"h3",12),l._uU(13),l.qZA(),l.TgZ(14,"p",13),l._uU(15),l.qZA(),l.TgZ(16,"table",14,15),l.TgZ(18,"thead",16),l.TgZ(19,"tr"),l.TgZ(20,"th",17),l._uU(21),l.qZA(),l.TgZ(22,"th"),l._uU(23),l.qZA(),l.TgZ(24,"th"),l._uU(25),l.qZA(),l.TgZ(26,"th"),l._uU(27),l.qZA(),l.qZA(),l.qZA(),l.YNc(28,U,5,1,"div",18),l.TgZ(29,"tbody"),l.YNc(30,M,9,1,"tr",19),l.YNc(31,N,9,4,"tr",20),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw(2);l.xp6(6),l.hij(" ",t.language.back,""),l.xp6(4),l.AsE("",t.interface," (",t.name,")"),l.xp6(3),l.Oqu(t.language["Top 5 ONTs"]),l.xp6(2),l.Oqu(t.language["Ranking based on upstream usage"]),l.xp6(1),l.Q6J("dtOptions",t.dtOptionsONT)("dtTrigger",t.dtTrigger1),l.xp6(5),l.Oqu(t.language.ONT_ID),l.xp6(2),l.hij("",t.language.Rate," (bps)"),l.xp6(2),l.Oqu(t.language["Total Octets"]),l.xp6(2),l.Oqu(t.language["Total Packets"]),l.xp6(1),l.Q6J("ngIf",t.loading),l.xp6(2),l.Q6J("ngIf",t.error),l.xp6(1),l.Q6J("ngForOf",t.TopONt)}}function k(t,e){if(1&t&&l.YNc(0,S,32,14,"section",2),2&t){const t=l.oxw();l.Q6J("ngIf",t.topONTs)}}const Y=[{path:"",component:A,children:[{path:"",redirectTo:"realtime",pathMatch:"full"},{path:"realtime",loadChildren:()=>Promise.all([n.e(6628),n.e(5825)]).then(n.bind(n,15825)).then(t=>t.RealtimeModule)},{path:"overview/basic",loadChildren:()=>Promise.all([n.e(1291),n.e(9450)]).then(n.bind(n,9450)).then(t=>t.ReportsModule)},{path:"overview",loadChildren:()=>Promise.all([n.e(1291),n.e(6778)]).then(n.bind(n,56778)).then(t=>t.OverviewModule)},{path:"ONT",component:(()=>{class t{constructor(t,e,n,i,o,s,a){this.translateService=t,this.ccochatservice=e,this.dateUtils=n,this.modalService=i,this.commonOrgService=o,this.ShortnumberPipe=s,this.router=a,this.dtTrigger=new r.xQ,this.dtTrigger1=new r.xQ,this.count=0,this.topONTs=!1,this.dtOptionsONT={info:!1,pageLength:10,lengthChange:!1,processing:!1,dom:"tipr",destroy:!0,columnDefs:[{targets:[0,1,2],orderable:!1}],order:[]},this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,processing:!1,dom:"tipr",columnDefs:[{targets:[1],orderable:!1}],order:[0,"asc"]}}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.FromDate=Math.ceil((this.dateUtils.getStartUtcTimeByDaysseconds(0)-864e5)/1e3),this.showPonModelOpen(this.showPonModel)}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtsub&&this.dtsub.unsubscribe(),this.totalcount&&this.totalcount.unsubscribe(),this.dtTrigger.unsubscribe(),this.dtTrigger1.unsubscribe()}rerender(){var t,e;null===(e=null===(t=this.datatableElement)||void 0===t?void 0:t.dtInstance)||void 0===e||e.then(t=>{var e,n;null==t||t.destroy(),null===(e=this.dtTrigger)||void 0===e||e.next(),null===(n=this.dtTrigger1)||void 0===n||n.next()})}close(){this.modalRef&&this.modalRef.close(),this.router.navigate(["/cco/health/pon-utilization/realtime"])}showPonModelOpen(t){var e;this.ponCapacitytd=!0,this.loading=!0,0!==(null===(e=this.affectedPorts)||void 0===e?void 0:e.length)&&this.isTableLoaded&&this.rerender();let n=new Date;this.dateUtils.getUtCSecondsByDateObj(n,!0),this.dtsub=this.ccochatservice.GetAffectedPorts(this.FromDate,this.dateUtils.getUtCSecondsByDateObj(n,!0),"pon").subscribe(t=>{this.affectedPorts=t||[],this.isTableLoaded?this.rerender():(this.isTableLoaded=!0,this.dtTrigger.next()),this.loading=!1},t=>{this.loading=!1,this.errorHandler(t)}),this.modalRef=this.modalService.open(t,{centered:!0,backdrop:"static",windowClass:"vid-med-modal"})}ngAfterViewInit(){this.dtTrigger.next()}GoBack(){this.topONTs=!1,this.ponCapacitytd=!0}countconvert(t){return this.ShortnumberPipe.transform(t,!0,5)}showTopONTs(t,e,n){this.modalRef&&this.modalRef.close(),this.router.navigate(["/cco/health/pon-utilization/TopOnt"],{queryParams:{system:t,interface:e,name:n}})}errorHandler(t){this.errormsg=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(c.s),l.Y36(d.C),l.Y36(h.s),l.Y36(q.FF),l.Y36(m.v),l.Y36(f.J),l.Y36(o.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-pon-kpi"]],viewQuery:function(t,e){if(1&t&&(l.Gf(w,7),l.Gf(a.G,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.showPonModel=t.first),l.iGM(t=l.CRH())&&(e.datatableElement=t.first)}},decls:2,vars:0,consts:[["class",""],["showPonModel",""],[1,"modal-content",3,"hidden"],[1,"modal-header","mb-3"],[1,"modal-title","eillips-text"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["datatable","",1,"w-100",3,"dtOptions","dtTrigger"],["table1",""],[1,""],[1,"loader",3,"hidden"],[1,"d-flex","justify-content-center"],["role","",1,"spinner-border","text-primary"],[1,"sr-only"],[3,"hidden"],[4,"ngFor","ngForOf"],[1,"text-decoration-none","cursor-pointer",3,"click"]],template:function(t,e){1&t&&l.YNc(0,P,22,10,"ng-template",0,1,l.W1O)},directives:[a.G,i.sg],styles:[""]}),t})()},{path:"TopOnt",component:(()=>{class t{constructor(t,e,n,i,o,s,a,l){this.translateService=t,this.ccochatservice=e,this.dateUtils=n,this.modalService=i,this.commonOrgService=o,this.ShortnumberPipe=s,this.router=a,this.route=l,this.dtTrigger1=new r.xQ,this.count=0,this.topONTs=!1,this.dtOptionsONT={info:!1,pageLength:10,lengthChange:!1,processing:!1,dom:"tipr",destroy:!0,columnDefs:[{targets:[0,1,2],orderable:!1}],order:[]},this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,processing:!1,dom:"tipr",columnDefs:[{targets:[1],orderable:!1}],order:[0,"asc"]}}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.route.queryParams.subscribe(t=>{t.system&&(this.system=t.system),t.interface&&(this.interface=t.interface),t.name&&(this.name=t.name)}),this.FromDate=Math.ceil((this.dateUtils.getStartUtcTimeByDaysseconds(0)-864e5)/1e3),this.showTopONTsModel(this.showTopONTs)}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtsub&&this.dtsub.unsubscribe(),this.totalcount&&this.totalcount.unsubscribe(),this.dtTrigger1.unsubscribe()}rerender(){var t,e;null===(e=null===(t=this.datatableElement)||void 0===t?void 0:t.dtInstance)||void 0===e||e.then(t=>{var e;null==t||t.destroy(),null===(e=this.dtTrigger1)||void 0===e||e.next()})}close(){this.modalRef&&this.modalRef.close(),this.router.navigate(["/cco/health/pon-utilization/realtime"])}ngAfterViewInit(){this.dtTrigger1.next()}GoBack(){this.modalRef&&this.modalRef.close(),this.topONTs=!1,this.router.navigate(["/cco/health/pon-utilization/ONT"])}countconvert(t){return this.ShortnumberPipe.transform(t,!0,5)}AddTotalRate(t,e){let n=t.slice(-1);return`${(parseFloat(t)+parseFloat(e)).toFixed(3)}${n}`}showTopONTsModel(t){this.loading=!0,this.topONTs=!0,this.ponCapacitytd=!1,this.ccochatservice.GetTop5ONTs(this.interface,this.system).subscribe(t=>{this.TopONt=t||[],this.tableFasn?this.rerender():(this.tableFasn=!0,this.dtTrigger1.next()),this.loading=!1},t=>{this.loading=!1,this.pageErrorHandle(t)}),this.modalRef=this.modalService.open(t,{centered:!0,backdrop:"static",windowClass:"vid-med-modal"})}pageErrorHandle(t){this.error=!0,this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(c.s),l.Y36(d.C),l.Y36(h.s),l.Y36(q.FF),l.Y36(m.v),l.Y36(f.J),l.Y36(o.F0),l.Y36(o.gz))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-pon-fsan"]],viewQuery:function(t,e){if(1&t&&(l.Gf(y,7),l.Gf(a.G,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.showTopONTs=t.first),l.iGM(t=l.CRH())&&(e.datatableElement=t.first)}},decls:2,vars:0,consts:[["class",""],["showTopONTs",""],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header","mb-3"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn-default","btn-dft","mr-4",3,"click"],["src","assets/img/ic_chevronleft_grey.svg","alt",""],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-title"],[1,"modal-body"],[1,"user-name"],[1,"text-muted","f-size-16px","mb-2"],["datatable","",1,"w-100","border-bottom-none",3,"dtOptions","dtTrigger"],["table2",""],[1,""],[1,"after-dnone"],["class","loader",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"loader"],[1,"d-flex","justify-content-center"],["role","",1,"spinner-border","text-primary"],[1,"sr-only"],["colspan","4"],[1,"row"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"]],template:function(t,e){1&t&&l.YNc(0,k,1,1,"ng-template",0,1,l.W1O)},directives:[i.O5,a.G,i.sg],styles:[""]}),t})()}]}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.Bz.forChild(Y)],o.Bz]}),t})();var D=n(94555);let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,I,D.kx,a.T]]}),t})()}}]);