"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[6513],{46513:function(e,t,i){i.r(t),i.d(t,{MobileAppModule:function(){return M}});var o=i(38583),n=i(39895),a=i(80431),r=i(32500),s=i(71205),l=i(87513),u=i(77465),c=i(70123),p=i(37716),m=i(49342),g=i(38048),d=i(53668),h=i(7450);function f(e,t){if(1&e&&(p.TgZ(0,"li",4),p.TgZ(1,"a",8),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngClass","commandWorx"==e.currentPage||"commandWorx-create"==e.currentPage||"commandWorx-update"==e.currentPage?"active":""),p.xp6(1),p.Oqu(e.language.CommandIQ_BIZ)}}let v=(()=>{class e{constructor(e,t,i,o,n){this.commonOrgService=e,this.sso=t,this.organizationApiService=i,this.router=o,this.translateService=n,this.currentPage="commandIq",this.showCommandIqBiz=!1;let a=this.router.url;this.currentPage=a.split("/").pop(),this.ORG_ID=this.sso.getOrganizationID(a),this.getorgInfoData()}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.commonOrgService.currentPageData.subscribe(e=>{this.currentPage=e||"commandIq"})}ngOnDestroy(){this.orgInfoSubs&&this.orgInfoSubs.unsubscribe()}getorgInfoData(){this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(e=>{var t;if(this.orgInfoEntitlementdata=e,e){let e={};for(let i=0;i<(null===(t=this.orgInfoEntitlementdata)||void 0===t?void 0:t.length);i++)e[this.orgInfoEntitlementdata[i].appType]=this.orgInfoEntitlementdata[i];this.showCommandIqBiz=!(!e[218]||"Expired"===e[218].status)}})}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(m.v),p.Y36(g.t6),p.Y36(d.F),p.Y36(n.F0),p.Y36(h.s))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-mobile-app"]],decls:12,vars:5,consts:[[1,"container","px-0"],[1,"row"],[1,"col-12","mobileapp-nav-tab"],[1,"nav"],[1,"nav-item"],["routerLink","commandiq",1,"nav-link",3,"ngClass"],["class","nav-item",4,"ngIf"],["routerLink","support-information",1,"nav-link",3,"ngClass"],["routerLink","commandWorx",1,"nav-link",3,"ngClass"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"ul",3),p.TgZ(4,"li",4),p.TgZ(5,"a",5),p._uU(6),p.qZA(),p.qZA(),p.YNc(7,f,3,2,"li",6),p.TgZ(8,"li",4),p.TgZ(9,"a",7),p._uU(10),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p._UZ(11,"router-outlet"),p.qZA()),2&e&&(p.xp6(5),p.Q6J("ngClass","commandiq-create"==t.currentPage||"commandiq-update"==t.currentPage||"commandiq"==t.currentPage?"active":""),p.xp6(1),p.Oqu(t.language.CommandIQ),p.xp6(1),p.Q6J("ngIf",t.showCommandIqBiz),p.xp6(2),p.Q6J("ngClass","support-information"==t.currentPage?"active":""),p.xp6(1),p.Oqu(t.language["Support Information"]))},directives:[n.yS,o.mk,o.O5,n.lC],styles:[".mobileapp-nav-tab[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{border-bottom:2px solid #CCCCCC}.mobileapp-nav-tab[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#1a1f22;font-size:18px;font-weight:300;cursor:pointer}.mobileapp-nav-tab[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0279ff;font-weight:400;margin-bottom:-2px;border-bottom:2px solid #0279FF}.mobileapp-nav-tab[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#0279ff}"]}),e})();var Z=i(3679),b=i(92340),A=i(12664),I=i(43721),C=i(67798),q=i(39075),x=i(74062);const S=["removecommandInfoModal"];function U(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",30),p.TgZ(1,"span",31),p._UZ(2,"img",32),p.qZA(),p.TgZ(3,"button",4),p.NdJ("click",function(){return p.CHM(e),p.oxw().success=!1}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"span",33),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.language[e.successInfo]||e.successInfo,p.oJD)}}function T(e,t){if(1&e&&(p.TgZ(0,"div",34),p.TgZ(1,"div",35),p.TgZ(2,"div",36),p.TgZ(3,"span",37),p._uU(4),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(4),p.Oqu(e.language.Loading)}}function w(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"p",38),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Oqu(e.language[e.emailmsg])}}function y(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"p",38),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Oqu(e.language["Please Enter a valid URL"])}}function D(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"p",38),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Oqu(e.language["Please Enter a valid URL"])}}function E(e,t){if(1&e&&(p.TgZ(0,"div",34),p.TgZ(1,"div",35),p.TgZ(2,"div",36),p.TgZ(3,"span",37),p._uU(4),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){const e=p.oxw(2);p.xp6(4),p.Oqu(e.language.Loading)}}function O(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",39),p.TgZ(1,"h5",40),p._uU(2),p.qZA(),p.TgZ(3,"button",41),p.NdJ("click",function(){return p.CHM(e).$implicit.dismiss("Cross click")}),p._UZ(4,"span",42),p.qZA(),p.qZA(),p.TgZ(5,"div",43),p.YNc(6,E,5,1,"div",7),p.TgZ(7,"div",44),p.TgZ(8,"div",45),p._uU(9),p.qZA(),p.qZA(),p.qZA(),p.TgZ(10,"div",46),p.TgZ(11,"button",47),p.NdJ("click",function(){return p.CHM(e),p.oxw().DeleteInfo()}),p._uU(12),p.qZA(),p.TgZ(13,"button",48),p.NdJ("click",function(){return p.CHM(e).$implicit.close("Save click")}),p._uU(14),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();p.xp6(2),p.Oqu(e.language["Delete Support Information"]),p.xp6(4),p.Q6J("ngIf",e.loading),p.xp6(3),p.hij(" ",e.language["Are you sure you want to delete Support information"]," ? "),p.xp6(3),p.hij(" ",e.language.Delete," "),p.xp6(2),p.hij(" ",e.language.Cancel," ")}}const _=[{path:"",component:v,children:[{path:"commandiq",component:c.A},{path:"commandiq-create",component:a.m},{path:"commandiq-update",component:u.v},{path:"commandWorx-create",component:r.Q},{path:"commandWorx-update",component:s.m},{path:"commandWorx",component:l.f},{path:"support-information",component:(()=>{class e{constructor(e,t,i,o,n,a,r,s,l){this.translateService=e,this.dialogService=t,this.validatorService=i,this.commonOrgService=o,this.service=n,this.titleService=a,this.sso=r,this.router=s,this.organizationApiService=l,this.show={update:!1,cancel:!1};let u=this.router.url;this.ADMIN_ORG_ID=this.sso.getOrganizationID(u),this.SPID=this.sso.getAdminSPID(this.ADMIN_ORG_ID),this.MODULE=this.sso.getRedirectModule(u),this.commonOrgService.currentPageAdder("support-information")}ngOnInit(){let e=window.location.host;this.isDev=`${b.N.API_BASE}`.indexOf("/dev.api.calix.ai")>-1||e.indexOf("localhost")>-1,this.SPID?this.getSupportInfo():this.getOrgInfoSubs=this.organizationApiService.orgInformation(this.ADMIN_ORG_ID).subscribe(e=>{this.sso.setAdminOrgInfo(e),e&&e.spId&&(this.SPID=e.spId,this.getSupportInfo())},e=>{}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language["Support Information"]} - ${this.language["Mobile App"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["Support Information"]} - ${this.language["Mobile App"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.CommanDIQForm=new Z.cw({companyAddress:new Z.NI(""),supportPhoneNumber:new Z.NI(""),supportEmail:new Z.NI(""),supportUrl:new Z.NI(""),billingUrl:new Z.NI(""),spid:new Z.NI(this.SPID)}),this.CommanDIQForm.valueChanges.subscribe(e=>{this.CommanDIQForm.dirty?(this.show.cancel=!0,this.show.update=!0):(this.show.cancel=!1,this.show.update=!1)})}get modalForm(){return this.CommanDIQForm.controls}updateInfo(){this.submitted=!0,this.CommanDIQForm.value.supportEmail&&this.Emailchange(this.CommanDIQForm.value.supportEmail),this.CommanDIQForm.value.supportUrl&&this.urlValidation(this.CommanDIQForm.value.supportUrl,"supportUrl"),this.CommanDIQForm.value.billingUrl&&this.urlValidation(this.CommanDIQForm.value.billingUrl,"billingUrl"),(!this.CommanDIQForm.value.supportUrl&&!this.CommanDIQForm.value.supportEmail||!(this.emailerror||this.UrLError||this.UrLErrorForBilling))&&(this.CommanDIQForm.patchValue({spid:this.SPID}),this.service.UpdateSupportInfo(this.CommanDIQForm.value).subscribe(e=>{this.loading=!1,this.showSuccessMessage("Successfully Updated"),this.success=!0,this.deleteDisabled=!0,this.getSupportInfo(),this.show.cancel=!1,this.show.update=!1,this.isError&&(this.isError=!1,this.warningMessage="")},e=>{this.loading=!1,this.pageErrorHandle(e)}))}showSuccessMessage(e){this.closeAlert(),this.successInfo=e,this.success=!0,setTimeout(()=>{this.success=!1},2500)}allowNumersOnly(){this.phonearray=this.CommanDIQForm.value.supportPhoneNumber.split("");var e=new RegExp("^[0-9+()-]+$");this.phonearray=this.phonearray.filter(t=>e.test(t));let t=this.phonearray.join("");return this.CommanDIQForm.patchValue({supportPhoneNumber:t}),!1}getSupportInfo(){this.loading=!0,this.service.fetchSupportInfo(this.SPID).subscribe(e=>{this.loading=!1,e&&(this.CommanDIQForm.patchValue({supportPhoneNumber:null==e?void 0:e.supportPhoneNumber,supportEmail:null==e?void 0:e.supportEmail,supportUrl:null==e?void 0:e.supportUrl,billingUrl:null==e?void 0:e.billingUrl,companyAddress:null==e?void 0:e.companyAddress}),this.show.cancel=!1,this.show.update=!1),this.emailerror=!1,this.UrLError=!1,this.UrLErrorForBilling=!1,this.supportInfo=e instanceof Array?e:[e],this.loading=!1},e=>{this.pageErrorHandle(e)})}pageErrorHandle(e){this.warningMessage=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.isError=!0,this.loading=!1}DeleteInfo(){this.loading=!0,this.submitted=!1,this.service.DeleteSupportInfo().subscribe(e=>{this.loading=!1,this.successInfo="Successfully Deleted",this.closeAllModal(),this.deleteDisabled=!1,this.success=!0,this.getSupportInfo()},e=>{this.pageErrorHandle(e)})}closeAllModal(){this.loading=!1,this.dialogService.dismissAll()}closeAlert(){this.isError=!1,this.success=!1}openDeletemodel(){this.CommanDIQForm.patchValue({supportPhoneNumber:"",supportEmail:"",supportUrl:"",billingUrl:"",companyAddress:""}),this.getSupportInfo()}Emailchange(e){return document.getElementById("email").value=document.getElementById("email").value.trim(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?(this.emailmsg="",void(this.emailerror=!1)):""!=e?(this.emailmsg="You have entered an invalid email address!",void(this.emailerror=!0)):(this.emailmsg="",void(this.emailerror=!1))}urlValidation(e,t){if("billingUrl"===t)if(e){let t=this.validatorService.urlValidation(e);this.UrLErrorForBilling=t.error}else this.UrLErrorForBilling=!!(e="");else if(e){let t=this.validatorService.urlValidation(e);this.UrLError=t.error}else this.UrLError=!!(e="")}clsAlphaNoOnly(e){var t=new RegExp("^[0-9:+()-]+$"),i=String.fromCharCode(e.charCode?e.charCode:e.which);return!!t.test(i)||(e.preventDefault(),!1)}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(h.s),p.Y36(A.FF),p.Y36(I.o),p.Y36(m.v),p.Y36(C.E),p.Y36(q.Dx),p.Y36(g.t6),p.Y36(n.F0),p.Y36(d.F))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-support-information"]],viewQuery:function(e,t){if(1&e&&p.Gf(S,7),2&e){let e;p.iGM(e=p.CRH())&&(t.removecommandInfoModal=e.first)}},decls:47,vars:25,consts:[["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"w-100","alert","alert-danger","fade","show",3,"hidden"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"my-3","position-relative"],["class","loader",4,"ngIf"],[1,"row","px-3"],[1,"col-9"],[3,"formGroup"],[1,"form-group","ccl-form","row","mt-3"],["for","address",1,"col","col-form-label","col-left-item"],[1,"col-sm-7"],["type","text","id","address","oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","supportPhoneNumber","trimSpace","",3,"placeholder","formValue","keypress","input"],[1,"form-group","ccl-form","row"],["for","PhoneNumber",1,"col","col-form-label","col-left-item"],["type","text","id","email","oninput","this.value = this.value.replace(/[^a-zA-Z0-9!@#:/\\$%\\^\\&*\\)\\(+=._-]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","supportEmail","trimSpace","",3,"placeholder","formValue","keyup"],["email",""],[4,"ngIf"],["for","email",1,"col","col-form-label","col-left-item"],["type","url","oninput","this.value = this.value.replace(/[^a-zA-Z0-9!@#:/\\$%\\^\\&*\\)\\(+=._-]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","supportUrl","trimSpace","",3,"placeholder","formValue","keyup"],["url",""],["type","url","oninput","this.value = this.value.replace(/[^a-zA-Z0-9!@#:/\\$%\\^\\&*\\)\\(+=._-]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","billingUrl","trimSpace","",3,"placeholder","formValue","keyup"],["Billurl",""],[1,"col-12","mt-4","pt-2"],["type","submit","id","ccoOrgAdminSubmitBtn",1,"btn-default","primary","mr-3",3,"disabled","click"],["type","button","id","ccoOrgAdminCancelBtn",1,"btn-default","btn-dft",3,"disabled","click"],["class","col-md-12"],["removecommandInfoModal",""],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mandatory-msg","mb-0"],[1,"modal-header","d-block"],["id","addModal",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"ccl-form","my-2"],[1,"del-dev"],[1,"modal-footer"],["type","button",1,"btn-default","primary","px-3","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","px-3","px-3","m-2",3,"click"]],template:function(e,t){if(1&e){const e=p.EpF();p.YNc(0,U,6,1,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"span",2),p._UZ(3,"img",3),p.qZA(),p.TgZ(4,"button",4),p.NdJ("click",function(){return t.closeAlert()}),p._UZ(5,"span"),p.qZA(),p._UZ(6,"div",5),p.qZA(),p.TgZ(7,"div",6),p.TgZ(8,"p"),p._uU(9),p.qZA(),p.YNc(10,T,5,1,"div",7),p.TgZ(11,"div",8),p.TgZ(12,"form",9),p.TgZ(13,"div",10),p.TgZ(14,"div",11),p.TgZ(15,"label",12),p._uU(16),p.qZA(),p.TgZ(17,"div",13),p.TgZ(18,"input",14),p.NdJ("keypress",function(e){return t.clsAlphaNoOnly(e)})("input",function(){return t.allowNumersOnly()}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(19,"div",15),p.TgZ(20,"label",16),p._uU(21),p.qZA(),p.TgZ(22,"div",13),p.TgZ(23,"input",17,18),p.NdJ("keyup",function(){p.CHM(e);const i=p.MAs(24);return t.Emailchange(i.value)}),p.qZA(),p.YNc(25,w,3,1,"div",19),p.qZA(),p.qZA(),p.TgZ(26,"div",15),p.TgZ(27,"label",20),p._uU(28),p.qZA(),p.TgZ(29,"div",13),p.TgZ(30,"input",21,22),p.NdJ("keyup",function(){p.CHM(e);const i=p.MAs(31);return t.urlValidation(i.value,"supportUrl")}),p.qZA(),p.YNc(32,y,3,1,"div",19),p.qZA(),p.qZA(),p.TgZ(33,"div",15),p.TgZ(34,"label",20),p._uU(35),p.qZA(),p.TgZ(36,"div",13),p.TgZ(37,"input",23,24),p.NdJ("keyup",function(){p.CHM(e);const i=p.MAs(38);return t.urlValidation(i.value,"billingUrl")}),p.qZA(),p.YNc(39,D,3,1,"div",19),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(40,"div",25),p.TgZ(41,"button",26),p.NdJ("click",function(){return t.updateInfo()}),p._uU(42),p.qZA(),p.TgZ(43,"button",27),p.NdJ("click",function(){return t.openDeletemodel()}),p._uU(44),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.YNc(45,O,15,5,"ng-template",28,29,p.W1O)}2&e&&(p.Q6J("ngIf",t.success),p.xp6(1),p.Q6J("hidden",!t.isError),p.xp6(5),p.Q6J("innerHtml",t.warningMessage,p.oJD),p.xp6(3),p.Oqu(t.language["Empty fields will not appear in mobile app"]),p.xp6(1),p.Q6J("ngIf",t.loading),p.xp6(3),p.Q6J("formGroup",t.CommanDIQForm),p.xp6(3),p.hij("",t.language["Support Phone Number"]," "),p.xp6(2),p.s9C("placeholder",t.language["Support Phone Number"]),p.Q6J("formValue",t.CommanDIQForm),p.xp6(3),p.hij("",t.language["Support Email"]," "),p.xp6(2),p.s9C("placeholder",t.language["Support Email"]),p.Q6J("formValue",t.CommanDIQForm),p.xp6(2),p.Q6J("ngIf",t.emailerror),p.xp6(3),p.hij("",t.language["Support URL"]," "),p.xp6(2),p.s9C("placeholder",t.language["Support URL"]),p.Q6J("formValue",t.CommanDIQForm),p.xp6(2),p.Q6J("ngIf",t.UrLError),p.xp6(3),p.hij("",t.language["Billing Portal URL"]," "),p.xp6(2),p.s9C("placeholder",t.language["Billing Portal URL"]),p.Q6J("formValue",t.CommanDIQForm),p.xp6(2),p.Q6J("ngIf",t.UrLErrorForBilling),p.xp6(2),p.Q6J("disabled",!t.show.update),p.xp6(1),p.hij(" ",t.language.Update," "),p.xp6(1),p.Q6J("disabled",!t.show.cancel),p.xp6(1),p.hij(" ",t.language.Cancel," "))},directives:[o.O5,Z._Y,Z.JL,Z.F,Z.sg,Z.Fj,Z.JJ,Z.u,x.f],styles:[".col-left-item[_ngcontent-%COMP%]{max-width:200px}"]}),e})()}]}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[n.Bz.forChild(_)],n.Bz]}),e})();var Q=i(44466),P=i(96718);let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[o.ez,N,Q.m,P.e4,Z.u5,Z.UX]]}),e})()}}]);