!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(i=a.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?r:String(r)),a)}var i,r}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[8851],{58851:function(t,a,r){r.r(a),r.d(a,{AlarmsModule:function(){return Q}});var o=r(38583),l=r(39895),s=r(79765),c=r(37716),u=r(7450),g=r(89097);function d(e,t){if(1&e&&(c.TgZ(0,"div",6),c._uU(1),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.hij(" ",n.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function m(e,t){if(1&e&&(c.TgZ(0,"li",10),c.TgZ(1,"a",11),c._uU(2),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language["Transform Alarm Rules"])}}function p(e,t){if(1&e&&(c.TgZ(0,"li",10),c.TgZ(1,"a",12),c._uU(2),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language["Alarm & Health Notifications"])}}function v(e,t){if(1&e&&(c.TgZ(0,"li",10),c.TgZ(1,"a",13),c._uU(2),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language["Alarm Settings"])}}function h(e,t){if(1&e&&(c.TgZ(0,"div",7),c.TgZ(1,"ul",8),c.YNc(2,m,3,1,"li",9),c.YNc(3,p,3,1,"li",9),c.YNc(4,v,3,1,"li",9),c.qZA(),c.qZA()),2&e){var n=c.oxw();c.xp6(2),c.Q6J("ngIf",n.menus.transformalarmrules),c.xp6(1),c.Q6J("ngIf",n.menus.alarmsandhealthnotifications),c.xp6(1),c.Q6J("ngIf",n.menus.alarmsettings)}}var f,A=((f=function(){function e(t,a,i){n(this,e),this.translateService=t,this.router=a,this.sso=i,this.menus={transformalarmrules:!1,alarmsandhealthnotifications:!1,alarmsettings:!1},this.hasPageAccess=!0,this.toggled=new s.xQ,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}return i(e,[{key:"ngOnInit",value:function(){var e,t,n=this,a=this.sso.getScopes();a["cloud.rbac.coc.operations.alarms"]?null===(e=Object.keys(this.menus))||void 0===e||e.forEach(function(e){n.menus[e]=!0}):null===(t=Object.keys(this.menus))||void 0===t||t.forEach(function(e){n.menus[e]=a["cloud.rbac.coc.operations.alarms.".concat(e)]}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){n.language=e}),this.pageAcceesObs=this.sso.hasPageAccess$.subscribe(function(e){n.hasPageAccess=!!e.access})}},{key:"ngOnDestroy",value:function(){var e,t;null===(e=this.pageAcceesObs)||void 0===e||e.unsubscribe(),null===(t=this.languageSubject)||void 0===t||t.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||f)(c.Y36(u.s),c.Y36(l.F0),c.Y36(g.t6))},f.\u0275cmp=c.Xpm({type:f,selectors:[["app-alarms"]],decls:7,vars:4,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],[3,"hidden"],[1,"container","mp-0"],[1,"row","mm-0"],["class","col-12 col-md-2 pl-0 mpr-0",4,"ngIf"],[1,"col-12","col-md-10","padl","mp-0","mmt-3","pr-0","position-relative",3,"hidden"],["role","alert",1,"alert","alert-warning"],[1,"col-12","col-md-2","pl-0","mpr-0"],["id","netops-list-menu",1,"nav","flex-column","left-menu","tab-view-style","mbr-none"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/cco/operations/alarms/transform-alarm-rules","routerLinkActive","active","id","CcoAlarms-TransformAlarmRules",1,"list-group-item","list-group-item-action"],["routerLink","/cco/operations/alarms/health-alarm-notifications","routerLinkActive","active","id","CcoAlarms-Alarm-HealthNotifications",1,"list-group-item","list-group-item-action"],["routerLink","/cco/operations/alarms/settings","routerLinkActive","active","id","CcoAlarms-Alarm-Settings",1,"list-group-item","list-group-item-action"]],template:function(e,t){1&e&&(c.YNc(0,d,2,1,"div",0),c.TgZ(1,"section",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.YNc(4,h,5,3,"div",4),c.TgZ(5,"div",5),c._UZ(6,"router-outlet"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",!t.hasPageAccess),c.xp6(1),c.Q6J("hidden",!t.hasPageAccess),c.xp6(3),c.Q6J("ngIf",t.hasPageAccess),c.xp6(1),c.Q6J("hidden",!t.hasPageAccess))},directives:[o.O5,l.lC,l.yS,l.Od],styles:[""]}),f),b=r(11060),C=r(92340),y=r(23771),Z=r(91841),x=r(49342),O=r(39075),_=r(86640),T=r(3679);function w(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"span",29),c._UZ(2,"img",30),c.qZA(),c.TgZ(3,"span",31),c._uU(4),c.TgZ(5,"b"),c._uU(6),c.qZA(),c._uU(7,"? "),c.qZA(),c.TgZ(8,"div",32),c.TgZ(9,"button",33),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).deletePerceivedSeverity()}),c._uU(10),c.qZA(),c.TgZ(11,"button",34),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).closeModal()}),c._uU(12),c.qZA(),c.qZA(),c.qZA()}if(2&e){var a=c.oxw(2);c.xp6(4),c.hij(" ",a.language["Are you sure you want to delete Custom Alarm"]," "),c.xp6(2),c.Oqu(a.modalInfo),c.xp6(3),c.Q6J("disabled",a.btnDisabled),c.xp6(1),c.hij(" ",a.language.Confirm," "),c.xp6(2),c.hij(" ",a.language.Cancel," ")}}function q(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",35),c.TgZ(1,"span",29),c._UZ(2,"img",36),c.qZA(),c.TgZ(3,"button",37),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).errorInfo=""}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",38),c.qZA()}if(2&e){var a=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",a.errorInfo,c.oJD)}}function M(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",39),c.TgZ(1,"div",40),c.TgZ(2,"span",41),c._UZ(3,"img",42),c.qZA(),c._UZ(4,"div",43),c.TgZ(5,"button",37),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).successInfo=""}),c._UZ(6,"span"),c.qZA(),c.qZA(),c.qZA()}if(2&e){var a=c.oxw(2);c.xp6(4),c.Q6J("innerHtml",a.successInfo,c.oJD)}}function S(e,t){if(1&e&&(c.TgZ(0,"div",44),c.TgZ(1,"div",21),c.TgZ(2,"div",45),c.TgZ(3,"div",46),c.TgZ(4,"div",47),c.TgZ(5,"span",48),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(6),c.Oqu(n.language.Loading)}}var P=function(e){return{cursornallow:e}},U=function(e){return{"diable-div":e}};function I(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td",1),c.TgZ(6,"div",50),c.TgZ(7,"ng-select",51),c.NdJ("ngModelChange",function(e){return c.CHM(n).$implicit.severity=e})("change",function(e){var t=c.CHM(n).$implicit;return c.oxw(3).changeAlarmSeverity(e,t)}),c.TgZ(8,"ng-option",15),c._uU(9),c.qZA(),c.TgZ(10,"ng-option",16),c._uU(11),c.qZA(),c.TgZ(12,"ng-option",17),c._uU(13),c.qZA(),c.TgZ(14,"ng-option",18),c._uU(15),c.qZA(),c.TgZ(16,"ng-option",19),c._uU(17),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"td",1),c.TgZ(19,"div",1),c.TgZ(20,"span",52),c.NdJ("click",function(){var e=c.CHM(n).$implicit;return c.oxw(3).changeVisibility(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"td",53),c.TgZ(22,"i",54),c.NdJ("click",function(){var e=c.CHM(n).$implicit;return c.oxw(3).delete(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var a=t.$implicit,i=c.oxw(3);c.xp6(2),c.hij(" ",a.alarm_name," "),c.xp6(2),c.hij(" ","CRITICAL"==(null==a||null==a.dispOriginalSeverity?null:a.dispOriginalSeverity.toUpperCase())||"MAJOR"==(null==a||null==a.dispOriginalSeverity?null:a.dispOriginalSeverity.toUpperCase())||"MINOR"==(null==a||null==a.dispOriginalSeverity?null:a.dispOriginalSeverity.toUpperCase())?i.language[null==a.dispOriginalSeverity?null:a.dispOriginalSeverity.toLowerCase()]:i.language[a.dispOriginalSeverity]||""," "),c.xp6(1),c.Q6J("ngClass",c.VKq(18,P,!i.hasWriteAccess)),c.xp6(1),c.Q6J("ngClass",c.VKq(20,U,!i.hasWriteAccess)),c.xp6(1),c.s9C("placeholder",i.language.Severity),c.Q6J("searchable",!1)("ngClass",i.colorClass[a.severity_class])("ngModel",a.severity)("clearable",!1),c.xp6(2),c.Oqu(i.language.critical),c.xp6(2),c.Oqu(i.language.major),c.xp6(2),c.Oqu(i.language.minor),c.xp6(2),c.Oqu(i.language.Warning),c.xp6(2),c.Oqu(i.language.Info),c.xp6(1),c.Q6J("ngClass",c.VKq(22,P,!i.hasWriteAccess)),c.xp6(1),c.Q6J("ngClass",c.VKq(24,U,!i.hasWriteAccess)),c.xp6(1),c.Q6J("ngClass",1==a.visibility?"password_view_blue":"password_hide"),c.xp6(2),c.s9C("title",i.language.Delete)}}function k(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,I,23,26,"tr",49),c.qZA()),2&e){var n=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",null==n.opsCloudAlarms?null:n.opsCloudAlarms.customAlarmsData)}}function D(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td",55),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(3),c.hij(" ",n.language["No data available in table"]," ")}}var J=function(e){return{"blur-bg":e}};function N(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"section",1),c.TgZ(1,"div",2),c.YNc(2,w,13,5,"div",3),c.YNc(3,q,6,1,"div",4),c.YNc(4,M,7,1,"div",5),c.qZA(),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c.TgZ(7,"div",8),c.TgZ(8,"ng-select",9),c.NdJ("ngModelChange",function(e){return c.CHM(n),c.oxw().opsCloudAlarms.searchedAlarm=e})("change",function(e){return c.CHM(n),c.oxw().searchAlarmsFromMaster(e)}),c.qZA(),c.TgZ(9,"span",10),c.NdJ("click",function(){return c.CHM(n),c.oxw().clearAlarmFilter("")}),c._uU(10,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",11),c.TgZ(12,"div",12),c.TgZ(13,"ng-select",13),c.NdJ("ngModelChange",function(e){return c.CHM(n),c.oxw().opsCloudAlarms.searchSeverity=e})("change",function(e){return c.CHM(n),c.oxw().searchCustomAlarms(e)}),c.TgZ(14,"ng-option",14),c._uU(15),c.qZA(),c.TgZ(16,"ng-option",15),c._uU(17),c.qZA(),c.TgZ(18,"ng-option",16),c._uU(19),c.qZA(),c.TgZ(20,"ng-option",17),c._uU(21),c.qZA(),c.TgZ(22,"ng-option",18),c._uU(23),c.qZA(),c.TgZ(24,"ng-option",19),c._uU(25),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",20),c.TgZ(27,"div",21),c.TgZ(28,"div",22),c.YNc(29,S,7,1,"div",23),c.TgZ(30,"div",24),c.TgZ(31,"table",25),c.TgZ(32,"thead"),c.TgZ(33,"tr"),c.TgZ(34,"th"),c._uU(35),c.qZA(),c.TgZ(36,"th"),c._uU(37),c.qZA(),c.TgZ(38,"th"),c._uU(39),c.qZA(),c.TgZ(40,"th",26),c._uU(41),c.qZA(),c.TgZ(42,"th"),c._uU(43),c.qZA(),c.qZA(),c.qZA(),c.YNc(44,k,2,1,"tbody",27),c.YNc(45,D,4,1,"tbody",27),c._UZ(46,"tbody"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var a=c.oxw();c.Q6J("ngClass",c.VKq(31,J,1==a.loading)),c.xp6(2),c.Q6J("ngIf",a.deletedata),c.xp6(1),c.Q6J("ngIf",a.errorInfo),c.xp6(1),c.Q6J("ngIf",a.successInfo),c.xp6(4),c.s9C("placeholder",a.language["Search alarms"]||"Search alarms"),c.Q6J("ngModel",a.opsCloudAlarms.searchedAlarm)("items",null==a.opsCloudAlarms?null:a.opsCloudAlarms.alarmsData)("clearable",!1),c.xp6(1),c.Q6J("ngClass",a.showcloseicon?"show-close-search":"hide-close-search"),c.xp6(4),c.s9C("placeholder",a.language["Search Severity"]||"Search Severity"),c.Q6J("searchable",!1)("clearable",!1)("ngModel",a.opsCloudAlarms.searchSeverity)("clearable",!1),c.xp6(2),c.Oqu(a.language["All Severities"]||"All Severities"),c.xp6(2),c.Oqu(a.language.critical),c.xp6(2),c.Oqu(a.language.major),c.xp6(2),c.Oqu(a.language.minor),c.xp6(2),c.Oqu(a.language.Warning),c.xp6(2),c.Oqu(a.language.Info),c.xp6(4),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("hidden",!a.dataAvailable),c.xp6(1),c.Q6J("dtOptions",a.dtOptions)("dtTrigger",a.dtTrigger),c.xp6(4),c.hij("",a.language.Name," "),c.xp6(2),c.hij("",a.language["Original Severity"]," "),c.xp6(2),c.hij("",a.language.Severity," "),c.xp6(2),c.Oqu(a.language["Visibility in Real-Time List"]),c.xp6(2),c.Oqu(a.language.Action),c.xp6(1),c.Q6J("ngIf",(null==a.opsCloudAlarms||null==a.opsCloudAlarms.customAlarmsData?null:a.opsCloudAlarms.customAlarmsData.length)>0),c.xp6(1),c.Q6J("ngIf",0===(null==a.opsCloudAlarms||null==a.opsCloudAlarms.customAlarmsData?null:a.opsCloudAlarms.customAlarmsData.length))}}var L=[{path:"",component:A,children:[{path:"transform-alarm-rules",component:b.M},{path:"health-alarm-notifications",loadChildren:function(){return Promise.all([r.e(5835),r.e(5634),r.e(9642),r.e(8686)]).then(r.bind(r,38686)).then(function(e){return e.CcoAlarmNotificationsModule})}},{path:"settings",component:function(){var t=function(){function t(e,a,i,r,o,l,c){n(this,t),this.translateService=e,this.http=a,this.commonOrgService=i,this.service=r,this.titleService=o,this.router=l,this.document=c,this.baseUrl="".concat(C.N.API_BASE_URL,"analytics-engine/"),this.renderedOnce=!0,this.isDev=!1,this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,paging:!0,processing:!1,dom:"tipr",autoWidth:!1,columnDefs:[{targets:[0],orderable:!0,width:"30%"},{targets:[1],width:"20%",orderable:!0},{targets:[2],width:"20%",orderable:!0},{targets:[3],width:"20%",orderable:!1},{targets:[4],width:"10%",orderable:!1}],order:[0,"asc"]},this.dtTrigger=new s.xQ,this.opsCloudAlarms={alarmsData:[],searchedAlarm:void 0,searchedAlarmName:void 0,searchSeverity:"allseverities",customAlarmsData:[],customBackupAlarmsData:[]},this.loading=!1,this.errorInfo="",this.successInfo="",this.colorClass={MINOR:"minor-select-inp",MAJOR:"major-select-inp",CRITICAL:"critical-select-inp",WARNING:"warning-select-inp",INFO:"severity-info-select-inp"},this.severityList=[{name:"Critical",value:"critical"},{name:"Major",value:"major"},{name:"Minor",value:"minor"},{name:"Warning",value:"warning"},{name:"Info",value:"info"}],this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.germanTable=this.translateService.de_DE}return i(t,[{key:"ngOnInit",value:function(){var e,t,n=this,a=this.service.getScopes();(null===(e=null==a?void 0:a["cloud.rbac.coc.operations.alarms.alarmsettings"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),-1!==(null===(t=null==a?void 0:a["cloud.rbac.coc.operations.alarms.alarmsettings"])||void 0===t?void 0:t.indexOf("write"))?this.hasWriteAccess=!0:this.dtOptions.columnDefs[4].visible=!1,-1!==C.N.API_BASE_URL.indexOf("dev.api.calix.ai")&&(this.isDev=!0),this.hasScopeAccess?(this.language=this.translateService.defualtLanguage,this.service.getRedirectModule(this.router.url),this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){n.loading=!0,n.language=e,n.titleService.setTitle("".concat(n.language["Alarm Settings"]," - ").concat(n.language.Alarms," - ").concat(n.language.Operations," - ").concat(n.language.Operations," - ").concat(n.language["Calix Cloud"])),n.tableLanguageOptions(),setTimeout(function(){n.rerender(!0)},200)}),this.titleService.setTitle("".concat(this.language["Alarm Settings"]," - ").concat(this.language.Alarms," - ").concat(this.language.Operations," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])),this.renderedOnce=!0,this.tableLanguageOptions(),this.getAlarmListData()):this.service.setPageAccess(!1)}},{key:"rerender",value:function(e){var t,n,a=this;null===(n=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===n||n.then(function(e){e.destroy(),a.dtTrigger.next()}),this.loading=!1}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:this.language&&this.language.fileLanguage&&"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.germanTable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"renderTable",value:function(e){var t=this;e?this.rerender():this.dtTrigger.next(),setTimeout(function(){t.dataAvailable=!0,t.loading=!0,t.searchCustomAlarms(t.opsCloudAlarms.searchSeverity),t.searchAlarmsFromMaster({alarm_name:t.opsCloudAlarms.searchedAlarmName?t.opsCloudAlarms.searchedAlarmName:""}),t.loading=!1},500)}},{key:"getAlarmListData",value:function(){var e=this;this.loading=!0,this.http.get("".concat(this.baseUrl,"alarmMasterDetails")).subscribe(function(t){var n=[];t&&t.length>0&&(t.forEach(function(e){var t,a,i,r,o,l;e.alarm_name=e.name?e.name:"",e.alarm_category=e.category?e.category:"",e.severity_class=e.perceivedSeverity?null===(t=e.perceivedSeverity)||void 0===t?void 0:t.toUpperCase():"",e.severity=e.perceivedSeverity?null===(a=e.perceivedSeverity)||void 0===a?void 0:a.toLowerCase():"",e.originalseverity=e.perceivedSeverity?null===(i=e.perceivedSeverity)||void 0===i?void 0:i.toUpperCase():"",e.dispOriginalSeverity=e.perceivedSeverity?(null===(r=e.perceivedSeverity)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===(l=null===(o=e.perceivedSeverity)||void 0===o?void 0:o.slice(1))||void 0===l?void 0:l.toLowerCase()):"",e.alarm_id=e.id?e.id:"",e.visibility=!0,n.push(e)}),n.sort(function(e,t){return(e.alarm_name||"").toString().localeCompare((t.alarm_name||"").toString(),"en",{numeric:!1})})),e.opsCloudAlarms.alarmsData=[].concat(n),e.getCustomAlarmListData()},function(t){e.getCustomAlarmListData(),e.loading=!1,e.error=!0,e.pageErrorHandle(t)})}},{key:"getCustomAlarmListData",value:function(e){var t=this;this.loading=!0,this.opsCloudAlarms.customAlarmsData=[],this.http.get("".concat(this.baseUrl,"customAlarms")).subscribe(function(n){var a=[];n&&n.length>0&&n.forEach(function(e){var n,i,r,o,l;if(t.opsCloudAlarms.alarmsData&&t.opsCloudAlarms.alarmsData.length>0){var s=t.opsCloudAlarms.alarmsData.find(function(t){return t.alarm_name==e.alarmName});s&&(e.originalseverity=s.perceivedSeverity?s.perceivedSeverity:e.originalseverity)}e.alarm_name=e.alarmName?e.alarmName:"",e.alarm_id=e.alarmCustomId?e.alarmCustomId:"",e.severity_class=e.severity?null===(n=e.severity)||void 0===n?void 0:n.toUpperCase():"",e.severity=e.severity?null===(i=e.severity)||void 0===i?void 0:i.toLowerCase():"",e.dispOriginalSeverity=e.originalseverity?(null===(r=e.originalseverity)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===(l=null===(o=e.originalseverity)||void 0===o?void 0:o.slice(1))||void 0===l?void 0:l.toLowerCase()):"",a.push(e)}),t.opsCloudAlarms.customAlarmsData=[].concat(a),t.opsCloudAlarms.customBackupAlarmsData=[].concat(a),t.loading=!1,setTimeout(function(){t.renderTable(!!e)},200)},function(e){t.loading=!1,t.error=!0,t.renderTable(!1),t.pageErrorHandle(e)})}},{key:"clearAlarmFilter",value:function(e){this.opsCloudAlarms.searchedAlarm=void 0,this.searchAlarmsFromMaster(e)}},{key:"searchAlarmsFromMaster",value:function(t){var n,a=this;if(this.loading=!0,this.showcloseicon=!!(t&&(null===(n=null==t?void 0:t.alarm_name)||void 0===n?void 0:n.length)>0),t&&""!=(null==t?void 0:t.alarm_name)&&-1==this.opsCloudAlarms.customAlarmsData.findIndex(function(e){var n,a;return(null===(n=e.alarm_name)||void 0===n?void 0:n.toUpperCase())==(null===(a=null==t?void 0:t.alarm_name)||void 0===a?void 0:a.toUpperCase())})){(null==t?void 0:t.alarm_id)||(t=this.opsCloudAlarms.alarmsData.find(function(e){var n,a;return(null===(n=e.alarm_name)||void 0===n?void 0:n.toUpperCase())==(null===(a=null==t?void 0:t.alarm_name)||void 0===a?void 0:a.toUpperCase())}));var i=e(this.opsCloudAlarms.customAlarmsData);i.push(Object.assign({},t)),this.opsCloudAlarms.customAlarmsData=e(i),this.loading=!1,this.renderTable(!0)}setTimeout(function(){var e,n;a.opsCloudAlarms.searchedAlarmName=t&&t.alarm_name?t.alarm_name:"",null===(n=null===(e=a.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===n||n.then(function(e){e.columns(0).search(a.opsCloudAlarms.searchedAlarmName).draw()}),a.loading=!1},200)}},{key:"searchCustomAlarms",value:function(e){var t,n,a,i;this.loading=!0,e&&e.length>0&&"allseverities"!=e&&(i=e.charAt(0).toUpperCase()+(null===(t=e.slice(1))||void 0===t?void 0:t.toLowerCase())),e&&"allseverities"==e&&(i=""),null===(a=null===(n=this.dtElement)||void 0===n?void 0:n.dtInstance)||void 0===a||a.then(function(e){e.columns(2).search(i).draw()}),this.loading=!1}},{key:"changeAlarmSeverity",value:function(e,t){var n=this;this.loading=!0;var a,i=null==e?void 0:e.toUpperCase();a="".concat(this.baseUrl,"customAlarm/").concat(null==t?void 0:t.alarm_name,"/customization?newPerceivedSeverity=").concat(i,"&originalSeverity=").concat(null==t?void 0:t.originalseverity),this.http.put(a,{},{responseType:"text"}).subscribe(function(e){n.loading=!1,n.success=!0,n.successInfo=n.language["Updated Successfully"],setTimeout(function(){n.success=!1,n.successInfo=""},4e3),n.getCustomAlarmListData(!0)},function(e){n.error=!0,n.loading=!1,n.pageErrorHandle(e)})}},{key:"changeVisibility",value:function(e){var t,n=this;this.loading=!0;var a;a="".concat(this.baseUrl,"updateCustomAlarmVisibility/").concat(null==e?void 0:e.alarm_name,"?isVisible=").concat(!e.visibility,"&severity=").concat(null===(t=null==e?void 0:e.severity)||void 0===t?void 0:t.toUpperCase(),"&originalSeverity=").concat(null==e?void 0:e.originalseverity),this.http.put(a,{},{responseType:"text"}).subscribe(function(e){n.success=!0,n.successInfo=n.language["Updated Successfully"],setTimeout(function(){n.success=!1,n.successInfo=""},4e3),n.getCustomAlarmListData(!0)},function(e){n.error=!0,n.loading=!1,n.pageErrorHandle(e)})}},{key:"deletePerceivedSeverity",value:function(){var e,t,n,a,i=this;this.error=!1,this.success=!1,this.errorInfo=void 0,this.successInfo=void 0,this.btnDisabled=!0,this.loading=!0,this.http.delete("".concat(this.baseUrl,"customAlarm/").concat(null===(e=this.deletedata)||void 0===e?void 0:e.alarm_name,"/customization?newPerceivedSeverity=").concat(null===(n=null===(t=this.deletedata)||void 0===t?void 0:t.severity)||void 0===n?void 0:n.toUpperCase(),"&originalSeverity=").concat(null===(a=this.deletedata)||void 0===a?void 0:a.originalseverity),{responseType:"text"}).subscribe(function(e){i.btnDisabled=!1,i.success=!0,i.successInfo=i.language["Custom Alarm deleted successfully"],i.closeModal(),setTimeout(function(){i.success=!1,i.successInfo=void 0,i.getCustomAlarmListData(!0)},3e3)},function(e){i.btnDisabled=!1,i.error=!0,i.loading=!1,i.pageErrorHandle(e)})}},{key:"delete",value:function(e){this.deletedata=e,this.modalInfo=this.deletedata.alarmName||this.deletedata.alarm_name,this.document.body.scrollIntoView({block:"start",behavior:"smooth"})}},{key:"closeModal",value:function(){this.deletedata=""}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?"Access Denied":this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.s),c.Y36(Z.eN),c.Y36(x.v),c.Y36(g.t6),c.Y36(O.Dx),c.Y36(l.F0),c.Y36(o.K0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-operations-cloud-alarms"]],viewQuery:function(e,t){var n;(1&e&&c.Gf(y.G,5),2&e)&&(c.iGM(n=c.CRH())&&(t.dtElement=n.first))},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"row"],["class","w-100 py-3 warning-msg",4,"ngIf"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"row","justify-content-between","filters-cl"],[1,"col-md-5"],[1,"search-box-input","ccl-form"],["bindValue","alarm_id","bindLabel","alarm_name",3,"ngModel","placeholder","items","clearable","ngModelChange","change"],[1,"pointer",3,"ngClass","click"],[1,"col-md-4"],[1,"d-inline-flex","align-items-center","justify-content-end","w-100"],[1,"max-w170-select",3,"searchable","clearable","ngModel","placeholder","ngModelChange","change"],["value","allseverities"],["value","critical"],["value","major"],["value","minor"],["value","warning"],["value","info"],[1,"row","position-relative"],[1,"col-md-12"],[1,"operations-cloud-alarms-table"],["class","row mb-3",4,"ngIf"],[3,"hidden"],["datatable","",1,"row-border","hover","table-alter","dataTable","no-footer",3,"dtOptions","dtTrigger"],[1,"min-width-130"],[4,"ngIf"],[1,"w-100","py-3","warning-msg"],[1,"error-img"],["src","./assets/img/warning-icon.svg"],[1,"warn-msg"],[1,"btn-con-sec","float-right"],["id","deletePFBtn",1,"btn-default","btn-primary","mr-2",3,"disabled","click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"w-100","alert","alert-danger","fade","show","my-3"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","close-icon-pos",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"d-flex","align-items-center"],[1,"success-img","d-inline-flex"],["src","./assets/img/success-icon.svg"],[1,"d-inline-flex","text-break","pr-4",3,"innerHtml"],[1,"row","mb-3"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[4,"ngFor","ngForOf"],[1,"severity-select",3,"ngClass"],[3,"searchable","ngClass","ngModel","placeholder","clearable","ngModelChange","change"],[1,"editDeviceClass","pointer",3,"ngClass","click"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","pointer","ml-2",3,"title","click"],["colspan","5",1,"no-data-available"]],template:function(e,t){1&e&&c.YNc(0,N,47,33,"section",0),2&e&&c.Q6J("ngIf",t.hasScopeAccess)},directives:[o.O5,o.mk,_.w9,T.JJ,T.On,_.xv,y.G,o.sg],styles:[".blur-bg[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.filters-cl[_ngcontent-%COMP%]{margin-top:32px;margin-bottom:21px}.operations-cloud-alarms-table[_ngcontent-%COMP%]{width:100%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;padding-bottom:7px;border-bottom:1px solid #CCCCCC}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   TH[_ngcontent-%COMP%]:nth-child(1){width:50%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   TH[_ngcontent-%COMP%]:nth-child(2){width:25%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   TH[_ngcontent-%COMP%]:nth-child(3){width:25%}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:15px;line-height:24px;padding:7px 0}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#edf5ff}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f8f8fa}.operations-cloud-alarms-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even):hover{background-color:#edf5ff}.severity-select[_ngcontent-%COMP%]{width:100%;padding-right:20px;max-width:150px}.critical-select-inp[_ngcontent-%COMP%]   .ng-select.ng-select-single[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{height:34px!important;box-shadow:none!important;outline:none!important}.hide-close-search[_ngcontent-%COMP%]{display:none}.show-close-search[_ngcontent-%COMP%]{color:gray;display:block;position:absolute;right:50px;font-size:22px;top:0px}.close-icon-pos[_ngcontent-%COMP%]{position:absolute;right:15px}.max-w170-select[_ngcontent-%COMP%]{max-width:210px;min-width:130px}.editDeviceClass[_ngcontent-%COMP%]{position:relative;top:8px;right:0}.min-width-130[_ngcontent-%COMP%]{min-width:130px}.diable-div[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.cursornallow[_ngcontent-%COMP%]{cursor:not-allowed}"]}),t}(),data:{title:"Calix Cloud - Alarms"}}]}],j=function(){var e=i(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild(L)],l.Bz]}),e}(),Q=function(){var e=i(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,j]]}),e}()}}])}();