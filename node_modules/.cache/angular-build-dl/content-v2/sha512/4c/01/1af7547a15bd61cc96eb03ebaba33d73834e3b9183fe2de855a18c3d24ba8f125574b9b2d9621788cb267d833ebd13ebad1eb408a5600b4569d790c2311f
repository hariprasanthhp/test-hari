!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?o:String(o)),i)}var r,o}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5691],{14306:function(e,i,r){r.d(i,{i:function(){return P}});var o,a=t(function e(t,i){n(this,e),this.secureOnboarding=t||null,this.orgId=i||null}),s=r(92340),c=r(37716),l=r(7450),u=r(38048),g=r(39075),d=r(40205),h=r(91841),p=r(76149),f=r(5304),v=((o=function(){function e(t,i){n(this,e),this.http=t,this.Sso=i}return t(e,[{key:"getSecureOnBoarding",value:function(e){var t=new h.LE;return this.Sso.getOrg(e)&&t.set("orgId",e),this.http.get(p.hF,{params:t}).pipe((0,f.K)(this.handleError))}},{key:"updateSecureOnBoarding",value:function(e,t){return this.Sso.getOrg(t)&&(e.orgId=t),this.http.put(p.GB,e).pipe((0,f.K)(this.handleError))}},{key:"handleError",value:function(e){return(0,d._)(e)}}]),e}()).\u0275fac=function(e){return new(e||o)(c.LFG(h.eN),c.LFG(u.t6))},o.\u0275prov=c.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o),b=r(39895),m=r(38583),Z=r(3679);function O(e,t){if(1&e&&(c.TgZ(0,"div",2),c._uU(1),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.hij(" ",n.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function y(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",20),c.TgZ(1,"span",21),c._UZ(2,"img",22),c.qZA(),c.TgZ(3,"button",23),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).hideError()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",24),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",i.errorInfo,c.oJD)}}function _(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",25),c.TgZ(1,"span",26),c._UZ(2,"img",27),c.qZA(),c.TgZ(3,"button",28),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).hideSuccess()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",24),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",i.successMsg,c.oJD)}}function x(e,t){if(1&e&&(c.TgZ(0,"div",29),c.TgZ(1,"div",30),c.TgZ(2,"div",31),c.TgZ(3,"span",32),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(4),c.Oqu(n.language.Loading)}}function M(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",3),c.TgZ(1,"div",4),c.YNc(2,y,6,1,"div",5),c.YNc(3,_,6,1,"div",6),c.YNc(4,x,5,1,"div",7),c.TgZ(5,"div",8),c._uU(6),c.qZA(),c.TgZ(7,"form",9),c.TgZ(8,"div",10),c.TgZ(9,"div",11),c.TgZ(10,"div",12),c.TgZ(11,"label",13),c.TgZ(12,"input",14),c.NdJ("change",function(){return c.CHM(n),c.oxw().onSecureOnBoardingChange()}),c.qZA(),c.TgZ(13,"span",15),c._UZ(14,"small"),c.qZA(),c.qZA(),c.TgZ(15,"span",16),c._uU(16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",17),c.TgZ(18,"p",18),c._uU(19),c.TgZ(20,"b",19),c._uU(21),c.qZA(),c._uU(22),c.TgZ(23,"b",19),c._uU(24),c.qZA(),c._uU(25),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("ngIf",i.showError),c.xp6(1),c.Q6J("ngIf",i.showSuccess),c.xp6(1),c.Q6J("ngIf",i.loading),c.xp6(2),c.Oqu(i.language.Secure_Onboarding),c.xp6(6),c.Q6J("checked",i.secureOnBoardingObj.secureOnboarding)("disabled",!i.hasWriteAccess||i.disableSecureOnBoarding),c.xp6(1),c.Q6J("ngClass",i.hasWriteAccess?"":"opacity-50"),c.xp6(3),c.hij(" ",i.secureOnBoardingObj.secureOnboarding?i.language.Enabled:i.language.Disabled," "),c.xp6(3),c.hij("*",i.language["If enabled, a subscriber"]," "),c.xp6(2),c.Oqu(i.language["must enter their account ID"]),c.xp6(1),c.hij(" ",i.language["while onboarding their router or mesh(SAT) in CommandIQ. The account ID"]," "),c.xp6(2),c.Oqu(i.language["must match the billing information"]),c.xp6(1),c.hij(" ",i.language["on file in order for them to proceed with the onboarding process. Enable this feature if you want to add a layer of security for subscribers that will ensure that the person onboarding the system is the account owner."]," ")}}var P=function(){var e=function(){function e(t,i,r,o,s){n(this,e),this.translateService=t,this.SsoAuthService=i,this.titleService=r,this.secureOnBoardingService=o,this.router=s,this.secureOnBoardingObj=new a,this.showError=!1,this.showSuccess=!1,this.loading=!1,this.hasWriteAccess=!1,this.disableSecureOnBoarding=!1,this.hasScopeAccess=!1,this.errorInfo="",this.scopes=this.SsoAuthService.getScopes()}return t(e,[{key:"setTitle",value:function(e){this.router.url.includes("cco-foundation")?this.titleService.setTitle("".concat(this.language["Secure Onboarding"]," - ").concat(this.language.settings," - ").concat(this.language.configuration," - ").concat(this.language.Deployment," - ").concat(this.language["Calix Cloud"])):this.router.url.includes("/cco/services/configuration/secure-onboarding")?this.titleService.setTitle("".concat(this.language["Secure Onboarding"]," - ").concat(this.language.Configuration," - ").concat(this.language.Services," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])):this.router.url.includes("/support/netops-management")&&this.titleService.setTitle("".concat(this.language["Secure Onboarding"]," - ").concat(this.language.Configurations," - ").concat(this.language.NetOps," - ").concat(this.language.Service," - ").concat(this.language["Calix Cloud"]))}},{key:"ngOnInit",value:function(){var e,t,n=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){n.language=e,n.setTitle(n.router.url)}),this.setTitle(this.router.url),this.orgId=this.SsoAuthService.getOrgId();var i=this.SsoAuthService.getEntitlements();if(this.router.url.includes("cco/services")&&i[210]&&!i[102]&&(this.disableSecureOnBoarding=!0),this.router.url.includes("cco-foundation")||this.router.url.includes("cco/services"))if(this.router.url.includes("cco/services/configuration/secure-onboarding")){var r=this.scopes;s.N.VALIDATE_SCOPE?((null===(e=r["cloud.rbac.coc.services.configuration.secureonboarding"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),r&&(null===(t=r["cloud.rbac.coc.services.configuration.secureonboarding"])||void 0===t?void 0:t.includes("write"))&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0)}else if(s.N.VALIDATE_SCOPE){var o=this.scopes;o["cloud.rbac.foundation.configurations"]=o["cloud.rbac.foundation.configurations"]?o["cloud.rbac.foundation.configurations"]:[],this.scopes["cloud.rbac.foundation.configurations"].length&&(this.hasScopeAccess=!0),o&&o["cloud.rbac.foundation.configurations"].includes("write")&&(this.hasWriteAccess=!0)}else this.hasWriteAccess=!0,this.hasScopeAccess=!0;else s.N.VALIDATE_SCOPE?(this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]=this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]?this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]:[],this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"].length&&(this.hasScopeAccess=!0),this.scopes&&this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"]&&-1!==this.scopes["cloud.rbac.csc.netops.config.secure_onboarding"].indexOf("write")&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0);this.hasScopeAccess?this.fetchSecureOnBoarding():this.SsoAuthService.setPageAccess(!1)}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.SsoAuthService.pageErrorHandle(e),this.showError=!0}},{key:"fetchSecureOnBoarding",value:function(){var e=this;this.loading=!0,this.secureOnBoardingService.getSecureOnBoarding(this.orgId).subscribe(function(t){e.secureOnBoardingObj=t,e.loading=!1},function(t){e.loading=!1,e.pageErrorHandle(t),e.showError=!0})}},{key:"updateSecureOnBoarding",value:function(){var e=this;this.loading=!0,this.secureOnBoardingService.updateSecureOnBoarding(this.secureOnBoardingObj,this.orgId).subscribe(function(t){e.loading=!1,e.fetchSecureOnBoarding()},function(t){e.loading=!1,e.errorMsg=t.statusText,e.showError=!0,e.secureOnBoardingObj.secureOnboarding=!e.secureOnBoardingObj.secureOnboarding})}},{key:"onSecureOnBoardingChange",value:function(){this.secureOnBoardingObj.secureOnboarding=!this.secureOnBoardingObj.secureOnboarding,this.updateSecureOnBoarding()}},{key:"onCancel",value:function(){this.fetchSecureOnBoarding()}},{key:"hideError",value:function(){this.showError=!1,this.errorMsg=""}},{key:"hideSuccess",value:function(){this.showSuccess=!1,this.successMsg=""}},{key:"ngOnDestroy",value:function(){this.languageSubject.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.s),c.Y36(u.t6),c.Y36(g.Dx),c.Y36(v),c.Y36(b.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-secure-onboarding"]],decls:2,vars:2,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],["id","secure-onboarding","class","tab-pane position-relative",4,"ngIf"],["role","alert",1,"alert","alert-warning"],["id","secure-onboarding",1,"tab-pane","position-relative"],[1,"pb-2"],["class","w-100 alert alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert alert-success  fade show",4,"ngIf"],["class","loader",4,"ngIf"],[1,"d-block","d-sm-none","ccl-Secondary-title","mb-2","col-md-12","border-bottom"],["id","secure-on-boarding-form"],[1,"row","p-0","my-3"],[1,"px-3","float-left"],[1,"checkbox","switcher"],["for","secureOnBoardingCheckbox"],["type","checkbox","id","secureOnBoardingCheckbox",3,"checked","disabled","change"],[3,"ngClass"],[1,"mx-2"],[1,"text-md-left","mt-2"],[1,"grey-p-text"],[1,"b-600"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button","id","hide-error-btn",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],["type","button","id","hide-success-btn",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(e,t){1&e&&(c.YNc(0,O,2,1,"div",0),c.YNc(1,M,26,13,"div",1)),2&e&&(c.Q6J("ngIf",!t.hasScopeAccess),c.xp6(1),c.Q6J("ngIf",t.hasScopeAccess))},directives:[m.O5,Z._Y,Z.JL,Z.F,m.mk],styles:['div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}input[readonly][_ngcontent-%COMP%]{cursor:not-allowed!important}.opacity-50[_ngcontent-%COMP%]{opacity:.5}.checkbox.switcher[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled + span[_ngcontent-%COMP%]{opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);-moz-opacity:.5;-khtml-opacity:.5}.grey-p-text[_ngcontent-%COMP%]{font-size:14px;line-height:17.6px;font-weight:400;color:#4c4c4c}']}),e}()},5399:function(e,i,r){r.d(i,{m:function(){return oe}});var o,a=t(function e(t,i,r,o,a,c,l,u,g){n(this,e),this._id=t||null,this.orgId=i||null,this.name=o||null,this.type=a||"Device Purging",this.schedule=c||new s,this.description=l||null,this.maxInactiveDays=u||null,this.forceDeleteAssociatedDevices=g||!1,this.suspended=r||null}),s=function(){function e(t,i,r,o){n(this,e),this.frequency=t||"",this.startTimeOfDay=i||this.setDefaultTime(),this.days=r||"",this.timezone=o||""}return t(e,[{key:"setDefaultTime",value:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}]),e}(),c=r(76149),l=r(92340),u=r(23771),g=r(37716),d=r(7450),h=r(38048),p=r(40205),f=r(5304),v=r(91841),b=r(37651),m=((o=function(){function e(t,i){n(this,e),this.http=t,this.sso=i}return t(e,[{key:"getStaleDevicePurgePolicy",value:function(e){var t=new v.LE;return this.sso.getOrg(e)&&t.set("orgId",e),this.http.get(c.B3,{params:t}).pipe((0,f.K)(this.handleError))}},{key:"createStaleDevicePurgePolicy",value:function(e){var t=new v.LE;return e.maxInactiveDays=+e.maxInactiveDays,this.http.post(c.eq,e,{params:t}).pipe((0,f.K)(this.handleError))}},{key:"updateStaleDevicePurgePolicy",value:function(e,t){var n=new v.LE;return e.maxInactiveDays=+e.maxInactiveDays,this.http.put(c.pq+"/"+t,e,{params:n}).pipe((0,f.K)(this.handleError))}},{key:"getexcLogStaleDevicePurgePolicy",value:function(e,t,n){var i=(new v.LE).set("policyId",e);return t&&i.append("skip",t.toString()),n&&i.append("limit",n.toString()),this.http.get(c.FK,{params:i}).pipe((0,f.K)(this.handleError))}},{key:"getLogCountStaleDevicePurgePolicy",value:function(e){var t=(new v.LE).set("policyId",e);return this.http.get(c.ek,{params:t}).pipe((0,f.K)(this.handleError))}},{key:"suspendStaleDevicePurgePolicyById",value:function(e,t){var n=new v.LE;return this.sso.getOrg(t)&&n.set("orgId",t),this.http.put(c.jX+"/"+e+"/suspend","",{params:n}).pipe((0,f.K)(this.handleError))}},{key:"resumeStaleDevicePurgePolicyById",value:function(e,t){var n=new v.LE;return this.sso.getOrg(t)&&n.set("orgId",t),this.http.put(c.jX+"/"+e+"/resume","",{params:n}).pipe((0,f.K)(this.handleError))}},{key:"getAllTimeZone",value:function(){return(new b.l).timeZone}},{key:"getDaysOfMonth",value:function(){return(new b.l).daysOfMonth}},{key:"getDaysOfWeek",value:function(){return(new b.l).daysOfWeek}},{key:"getFrequencyList",value:function(){return(new b.l).frequency}},{key:"handleError",value:function(e){return(0,p._)(e)}}]),e}()).\u0275fac=function(e){return new(e||o)(g.LFG(v.eN),g.LFG(h.t6))},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o),Z=r(39075),O=r(48483),y=r(39895),_=r(38583),x=r(3679),M=r(74062),P=r(28931),C=r(74375),q=r(86640),A=r(18638);function T(e,t){if(1&e&&(g.TgZ(0,"div",2),g._uU(1),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.hij(" ",n.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function w(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",63),g.TgZ(1,"span",64),g._UZ(2,"img",65),g.qZA(),g.TgZ(3,"button",66),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).hideError()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",67),g.qZA()}if(2&e){var i=g.oxw(2);g.xp6(5),g.Q6J("innerHtml",i.errorMsg,g.oJD)}}function S(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",68),g.TgZ(1,"span",69),g._UZ(2,"img",70),g.qZA(),g.TgZ(3,"div",71),g.TgZ(4,"strong"),g._UZ(5,"div",72),g.qZA(),g.qZA(),g.TgZ(6,"div",71),g.TgZ(7,"button",73),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).hideSuccess()}),g._UZ(8,"span"),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2);g.xp6(5),g.Q6J("innerHtml",i.successMsg,g.oJD)}}function D(e,t){if(1&e&&(g.TgZ(0,"div",74),g.TgZ(1,"div",75),g.TgZ(2,"div",76),g.TgZ(3,"span",77),g._uU(4),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(4),g.Oqu(n.language.Loading)}}function k(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",23),g.TgZ(1,"label",15),g._uU(2),g.qZA(),g.TgZ(3,"div",78),g.TgZ(4,"div",79),g.TgZ(5,"label",80),g.TgZ(6,"input",81),g.NdJ("change",function(){return g.CHM(n),g.oxw(2).OnToggleChange()})("ngModelChange",function(e){return g.CHM(n),g.oxw(2).policyStatus=e}),g.qZA(),g.TgZ(7,"span",82),g._UZ(8,"small"),g.qZA(),g.qZA(),g._uU(9,"\xa0\xa0\xa0\xa0 "),g.TgZ(10,"label"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2);g.xp6(2),g.Oqu(i.language.Status),g.xp6(4),g.Q6J("disabled",!i.hasWriteAccess||!i.showStaleDevicePurgeForm)("ngModel",i.policyStatus),g.xp6(1),g.Q6J("ngClass",i.hasWriteAccess&&i.showStaleDevicePurgeForm?"":"opacity-50"),g.xp6(4),g.Oqu(i.policyStatus?i.language.Enabled:i.language.Disabled)}}function I(e,t){if(1&e&&(g.TgZ(0,"div",83),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"],"")}}function j(e,t){if(1&e&&(g.TgZ(0,"div",84),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"],"")}}function E(e,t){if(1&e&&(g.TgZ(0,"div",85),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}function U(e,t){if(1&e&&(g.TgZ(0,"div",85),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["Please enter a value greater than or equal to 1."]," ")}}function J(e,t){if(1&e&&g._uU(0),2&e){var n=t.item,i=g.oxw(2);g.hij(" ",i.language[n.name]," ")}}function N(e,t){if(1&e&&g._uU(0),2&e){var n=t.item,i=g.oxw(2);g.hij(" ",i.language[n.name]," ")}}function L(e,t){if(1&e&&(g.TgZ(0,"span",86),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}function Q(e,t){if(1&e&&g._uU(0),2&e){var n=t.item,i=g.oxw(3);g.hij(" ",i.language[n.name]," ")}}function F(e,t){if(1&e&&g._uU(0),2&e){var n=t.item,i=g.oxw(3);g.hij(" ",i.language[n.name]," ")}}function Y(e,t){if(1&e&&(g.TgZ(0,"span",91),g._uU(1),g.qZA()),2&e){var n=g.oxw(3);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}var B=function(e){return[e]};function H(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",14),g.TgZ(1,"label",87),g._uU(2),g.TgZ(3,"span",16),g._uU(4,"*"),g.qZA(),g.qZA(),g.TgZ(5,"div",17),g.TgZ(6,"ng-select",88,89),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw(2).staleDevicePurgeObj.schedule.days=e}),g.YNc(8,Q,1,1,"ng-template",35),g.YNc(9,F,1,1,"ng-template",36),g.qZA(),g.YNc(10,Y,2,1,"span",90),g.TgZ(11,"span",50),g.TgZ(12,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).staleDevicePurgeObj.schedule.days=null}),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.MAs(7);g.oxw();var r=g.MAs(11),o=g.oxw();g.xp6(2),g.hij("",o.language.Day_of_Week," "),g.xp6(3),g.Q6J("ngClass",g.VKq(9,B,null!=i.errors&&i.errors.required&&(r.submitted||i.touched)?"errorMessage":"")),g.xp6(1),g.s9C("title",o.language.Day_Policy),g.s9C("placeholder",o.language.Select_Days_Week),g.Q6J("items",o.daysOfWeek)("clearable",!1)("ngModel",o.staleDevicePurgeObj.schedule.days)("searchable",!1),g.xp6(4),g.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&(r.submitted||i.touched))}}function W(e,t){if(1&e&&(g.TgZ(0,"span",96),g._uU(1),g.qZA()),2&e){var n=g.oxw(3);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}function V(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",14),g.TgZ(1,"label",92),g._uU(2),g.TgZ(3,"span",16),g._uU(4,"*"),g.qZA(),g.qZA(),g.TgZ(5,"div",17),g.TgZ(6,"ng-select",93,94),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw(2).staleDevicePurgeObj.schedule.days=e}),g.qZA(),g.YNc(8,W,2,1,"span",95),g.TgZ(9,"span",50),g.TgZ(10,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).staleDevicePurgeObj.schedule.days=null}),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.MAs(7);g.oxw();var r=g.MAs(11),o=g.oxw();g.xp6(2),g.Oqu(o.language.Day_of_Month),g.xp6(3),g.Q6J("ngClass",g.VKq(8,B,null!=i.errors&&i.errors.required&&(r.submitted||i.touched)?"errorMessage":"")),g.xp6(1),g.s9C("title",o.language.Day_Month_Policy_Executes),g.Q6J("searchable",!1)("items",o.daysOfMonth)("clearable",!1)("ngModel",o.staleDevicePurgeObj.schedule.days),g.xp6(2),g.Q6J("ngIf",(null==i.errors?null:i.errors.required)&&(r.submitted||i.touched))}}function R(e,t){if(1&e&&(g.TgZ(0,"div",97),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}function z(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}function K(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",n.language["This field is required"]," ")}}function G(e,t){if(1&e&&(g.TgZ(0,"button",98),g._uU(1),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.Oqu(n.language.submit)}}function X(e,t){if(1&e&&(g.TgZ(0,"div",8),g.TgZ(1,"div",108),g._uU(2),g.qZA(),g.qZA()),2&e){var n=t.$implicit;g.xp6(2),g.Oqu(n)}}function ee(e,t){if(1&e&&(g.TgZ(0,"div",8),g.TgZ(1,"div",108),g._uU(2),g.qZA(),g.qZA()),2&e){var n=t.$implicit;g.xp6(2),g.Oqu(n)}}function te(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"tr",103),g.TgZ(2,"td"),g._uU(3),g._UZ(4,"br"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA(),g.TgZ(8,"td"),g._uU(9),g.qZA(),g.TgZ(10,"td"),g._uU(11),g.qZA(),g.TgZ(12,"td",104),g._UZ(13,"a",105),g.qZA(),g.qZA(),g.TgZ(14,"tr",106),g.TgZ(15,"td"),g.TgZ(16,"div",107),g.TgZ(17,"div",8),g.TgZ(18,"div",108),g._uU(19),g.qZA(),g.qZA(),g._UZ(20,"br"),g.YNc(21,X,3,1,"div",109),g._UZ(22,"br"),g.TgZ(23,"div",8),g.TgZ(24,"div",108),g._uU(25),g.qZA(),g.qZA(),g._UZ(26,"br"),g.YNc(27,ee,3,1,"div",109),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&e){var n=t.$implicit,i=t.index,r=g.oxw(3);g.xp6(1),g.uIk("id","accordion_"+i),g.xp6(2),g.Oqu(n.startTime),g.xp6(2),g.hij(" ",r.staleDevicePurgeObj.schedule.timezone," "),g.xp6(2),g.Oqu(null==n?null:n.successPurgeCount),g.xp6(2),g.Oqu(null==n?null:n.failurgePurgeCount),g.xp6(2),g.Oqu(null==n?null:n.details),g.xp6(2),g.uIk("data-parent","#accordion_"+i)("href","#collapseOne_"+i,g.LSH),g.xp6(3),g.uIk("id","collapseOne_"+i),g.xp6(3),g.Oqu(r.language.Successfully_Purged),g.xp6(2),g.Q6J("ngForOf",n.devices),g.xp6(4),g.Oqu(r.language.Failures_Purge),g.xp6(2),g.Q6J("ngForOf",n.failures)}}function ne(e,t){if(1&e&&(g.TgZ(0,"tbody"),g.TgZ(1,"tr"),g.TgZ(2,"td",110),g._uU(3),g.qZA(),g.qZA(),g.qZA()),2&e){var n=g.oxw(3);g.xp6(3),g.Oqu(n.language["No data available in table"])}}function ie(e,t){if(1&e&&(g.TgZ(0,"div",99),g.TgZ(1,"table",100),g.TgZ(2,"thead"),g.TgZ(3,"tr"),g.TgZ(4,"th",101),g._uU(5),g.qZA(),g.TgZ(6,"th",101),g._uU(7),g.qZA(),g.TgZ(8,"th",101),g._uU(9),g.qZA(),g.TgZ(10,"th",101),g._uU(11),g.qZA(),g._UZ(12,"th",101),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,te,28,13,"ng-container",102),g.qZA(),g.YNc(15,ne,4,1,"tbody",49),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.Q6J("dtOptions",n.tableOptions),g.xp6(4),g.Oqu(n.language.Time),g.xp6(2),g.Oqu(n.language.Success),g.xp6(2),g.Oqu(n.language.Failed),g.xp6(2),g.Oqu(n.language.Details),g.xp6(3),g.Q6J("ngForOf",n.excLogPolicObj),g.xp6(1),g.Q6J("ngIf",0==n.tableCount)}}function re(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",3),g.YNc(1,w,6,1,"div",4),g.YNc(2,S,9,1,"div",5),g.YNc(3,D,5,1,"div",6),g.TgZ(4,"div",7),g._uU(5),g.qZA(),g.TgZ(6,"div",8),g.TgZ(7,"div",9),g.TgZ(8,"div",10),g._uU(9),g.qZA(),g.TgZ(10,"form",11,12),g.NdJ("ngSubmit",function(){g.CHM(n);var e=g.MAs(11),t=g.oxw();return e.form.valid&&t.onSubmit()}),g.YNc(12,k,12,5,"div",13),g.TgZ(13,"div",14),g.TgZ(14,"label",15),g._uU(15),g.TgZ(16,"span",16),g._uU(17,"*"),g.qZA(),g.qZA(),g.TgZ(18,"div",17),g.TgZ(19,"input",18,19),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().staleDevicePurgeObj.name=e}),g.qZA(),g.TgZ(21,"span",20),g.TgZ(22,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw().staleDevicePurgeObj.name=null}),g.qZA(),g.qZA(),g.YNc(23,I,2,1,"div",22),g.qZA(),g.qZA(),g.TgZ(24,"div",23),g.TgZ(25,"label",24),g._uU(26),g.TgZ(27,"span",16),g._uU(28,"*"),g.qZA(),g.qZA(),g.TgZ(29,"div",17),g.TgZ(30,"input",25,26),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().staleDevicePurgeObj.description=e}),g.qZA(),g.TgZ(32,"span",20),g.TgZ(33,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw().staleDevicePurgeObj.description=null}),g.qZA(),g.qZA(),g.qZA(),g.YNc(34,j,2,1,"div",27),g.qZA(),g.TgZ(35,"div",14),g.TgZ(36,"label",28),g._uU(37),g.TgZ(38,"span",16),g._uU(39,"*"),g.qZA(),g.qZA(),g.TgZ(40,"div",17),g.TgZ(41,"input",29,30),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().staleDevicePurgeObj.maxInactiveDays=e}),g.qZA(),g.TgZ(43,"span",20),g.TgZ(44,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw().staleDevicePurgeObj.maxInactiveDays=null}),g.qZA(),g.qZA(),g.YNc(45,E,2,1,"div",31),g.YNc(46,U,2,1,"div",31),g.qZA(),g.qZA(),g.TgZ(47,"div",14),g.TgZ(48,"label",32),g._uU(49),g.qZA(),g.TgZ(50,"div",17),g.TgZ(51,"ng-select",33,34),g.NdJ("change",function(){return g.CHM(n),g.oxw().onFrequencyChange()})("ngModelChange",function(e){return g.CHM(n),g.oxw().staleDevicePurgeObj.schedule.frequency=e}),g.YNc(53,J,1,1,"ng-template",35),g.YNc(54,N,1,1,"ng-template",36),g.qZA(),g.YNc(55,L,2,1,"span",37),g.qZA(),g.qZA(),g.YNc(56,H,13,11,"div",38),g.YNc(57,V,11,10,"ng-template",null,39,g.W1O),g.TgZ(59,"div",14),g.TgZ(60,"label",40),g._uU(61),g.TgZ(62,"span",16),g._uU(63,"*"),g.qZA(),g.qZA(),g.TgZ(64,"div",17),g.TgZ(65,"div",41),g.TgZ(66,"p-calendar",42,43),g.NdJ("onSelect",function(e){return g.CHM(n),g.oxw().onSelectStartTime(e)})("ngModelChange",function(e){return g.CHM(n),g.oxw().startTime=e}),g.qZA(),g.qZA(),g.YNc(68,R,2,1,"div",44),g.TgZ(69,"span",45),g.TgZ(70,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw().startTime=null}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(71,"div",14),g.TgZ(72,"label",46),g._uU(73),g.TgZ(74,"span",16),g._uU(75,"*"),g.qZA(),g.qZA(),g.TgZ(76,"div",17),g.TgZ(77,"ng-select",47,48),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().staleDevicePurgeObj.schedule.timezone=e}),g.qZA(),g.YNc(79,z,2,1,"span",49),g.TgZ(80,"span",50),g.TgZ(81,"img",21),g.NdJ("click",function(){return g.CHM(n),g.oxw().staleDevicePurgeObj.schedule.timezone=null}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(82,"div",14),g.TgZ(83,"div",51),g.TgZ(84,"p"),g._uU(85),g.qZA(),g.qZA(),g.TgZ(86,"div",17),g.TgZ(87,"div",52),g.TgZ(88,"input",53,54),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().associateDeviceValue=e})("change",function(e){return g.CHM(n),g.oxw().changeRadio(e)}),g.qZA(),g.TgZ(90,"label",55),g._uU(91),g.qZA(),g.TgZ(92,"input",56,54),g.NdJ("ngModelChange",function(e){return g.CHM(n),g.oxw().associateDeviceValue=e})("change",function(e){return g.CHM(n),g.oxw().changeRadio(e)}),g.qZA(),g.TgZ(94,"label",57),g._uU(95),g.qZA(),g.YNc(96,K,2,1,"span",49),g.qZA(),g.qZA(),g.qZA(),g.TgZ(97,"div",58),g.TgZ(98,"div",59),g.YNc(99,G,2,1,"button",60),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(100,"div",9),g.TgZ(101,"div",61),g._uU(102),g.qZA(),g.YNc(103,ie,16,7,"div",62),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.MAs(11),r=g.MAs(20),o=g.MAs(31),a=g.MAs(42),s=g.MAs(52),c=g.MAs(58),l=g.MAs(67),u=g.MAs(78),d=g.MAs(89),h=g.oxw();g.xp6(1),g.Q6J("ngIf",h.showError),g.xp6(1),g.Q6J("ngIf",h.showSuccess),g.xp6(1),g.Q6J("ngIf",h.loading),g.xp6(2),g.hij("",h.language["Stale System Purge"]," "),g.xp6(4),g.hij(" ",h.language.configuration,""),g.xp6(3),g.Q6J("ngIf",h.staleDevicePurgeObj._id),g.xp6(3),g.hij("",h.language.Name," "),g.xp6(3),g.Q6J("ngClass",g.VKq(61,B,null!=r.errors&&r.errors.required&&(i.submitted||r.touched)?"errorMessage":"")),g.xp6(1),g.Q6J("ngModel",h.staleDevicePurgeObj.name)("formValue",h.staleDevicePurgeObj),g.xp6(4),g.Q6J("ngIf",(r.touched||i.submitted)&&(null==r.errors?null:r.errors.required)),g.xp6(3),g.hij("",h.language.description," "),g.xp6(3),g.Q6J("ngClass",g.VKq(63,B,null!=o.errors&&o.errors.required&&(i.submitted||o.touched)?"errorMessage":"")),g.xp6(1),g.Q6J("ngModel",h.staleDevicePurgeObj.description)("formValue",h.staleDevicePurgeObj),g.xp6(4),g.Q6J("ngIf",(o.touched||i.submitted)&&(null==o.errors?null:o.errors.required)),g.xp6(3),g.hij("",h.language.Inactivity_Period," "),g.xp6(3),g.Q6J("ngClass",g.VKq(65,B,(null!=a.errors&&a.errors.required||null!=a.errors&&a.errors.customNumMin||null!=a.errors&&a.errors.customNeg)&&(i.submitted||a.touched)?"errorMessage":"")),g.xp6(1),g.s9C("title",h.language.No_Of_Days_Device_Inactive),g.Q6J("ngModel",h.staleDevicePurgeObj.maxInactiveDays)("formValue",h.staleDevicePurgeObj),g.xp6(4),g.Q6J("ngIf",(null==a.errors?null:a.errors.required)&&(i.submitted||a.touched)),g.xp6(1),g.Q6J("ngIf",((null==a.errors?null:a.errors.customNumMin)||(null==a.errors?null:a.errors.customNeg))&&(i.submitted||a.touched)),g.xp6(3),g.Oqu(h.language.Frequency),g.xp6(1),g.Q6J("ngClass",g.VKq(67,B,null!=s.errors&&s.errors.required&&(i.submitted||s.touched)?"errorMessage":"")),g.xp6(1),g.s9C("title",h.language.Weekly_Policy),g.s9C("placeholder",h.language.Select_Frequency),g.Q6J("searchable",!1)("items",h.staleDeviceFrequency)("clearable",!1)("ngModel",h.staleDevicePurgeObj.schedule.frequency),g.xp6(4),g.Q6J("ngIf",(null==s.errors?null:s.errors.required)&&(i.submitted||s.touched)),g.xp6(1),g.Q6J("ngIf","Weekly"==h.staleDevicePurgeObj.schedule.frequency)("ngIfElse",c),g.xp6(5),g.hij("",h.language.Start_Time," "),g.xp6(3),g.Q6J("ngClass",g.VKq(69,B,null!=l.errors&&l.errors.required&&(i.submitted||l.touched)?"errorMessage":"")),g.xp6(2),g.s9C("title",h.language.Policy_Start_Time),g.Q6J("ngModel",h.startTime)("showIcon",!0),g.xp6(2),g.Q6J("ngIf",(null==l.errors?null:l.errors.required)&&(i.submitted||l.touched)),g.xp6(5),g.hij("",h.language["Time Zone"]," "),g.xp6(3),g.Q6J("ngClass",g.VKq(71,B,null!=u.errors&&u.errors.required&&(i.submitted||u.touched)?"errorMessage":"")),g.xp6(1),g.s9C("title",h.language["Time Zone"]),g.s9C("placeholder",h.language.select_timezone),g.Q6J("items",h.timeZone)("searchable",!1)("clearable",!1)("ngModel",h.staleDevicePurgeObj.schedule.timezone),g.xp6(2),g.Q6J("ngIf",(null==u.errors?null:u.errors.required)&&(i.submitted||u.touched)),g.xp6(6),g.Oqu(h.language["Include Associated Systems"]),g.xp6(1),g.Q6J("ngClass",g.VKq(73,B,null!=d.errors&&d.errors.required&&(i.submitted||d.touched)?"errorMessage":"")),g.xp6(2),g.Q6J("ngModel",h.associateDeviceValue),g.xp6(2),g.s9C("title",h.language.Force_Device_Delete),g.xp6(1),g.hij(" ",h.language.No,""),g.xp6(1),g.Q6J("ngModel",h.associateDeviceValue),g.xp6(2),g.s9C("title",h.language.Force_Device_Delete),g.xp6(1),g.hij(" ",h.language.Yes,""),g.xp6(1),g.Q6J("ngIf",d.invalid&&(i.submitted||d.touched)),g.xp6(3),g.Q6J("ngIf",h.hasWriteAccess&&h.showStaleDevicePurgeForm),g.xp6(3),g.hij(" ",h.language.Execution_Log,""),g.xp6(1),g.Q6J("ngIf",h.viewExecutionLog)}}var oe=function(){var e=function(){function e(t,i,r,o,s,c,l){n(this,e),this.translateService=t,this.ssoAuthService=i,this.staleDevicePurgeService=r,this.http=o,this.titleService=s,this.dateUtils=c,this.router=l,this.showStaleDevicePurgeForm=!0,this.associateDeviceValue="No",this.viewExecutionLog=!1,this.startTime=new Date,this.timeZone=[],this.daysOfMonth=[],this.tableOptions={},this.staleDevicePurgeObj=new a,this.showError=!1,this.showSuccess=!1,this.loading=!1,this.hasWriteAccess=!1,this.hasScopeAccess=!1,this.timeZone=r.getAllTimeZone(),this.daysOfWeek=r.getDaysOfWeek(),this.daysOfMonth=r.getDaysOfMonth(),this.staleDeviceFrequency=r.getFrequencyList(),this.staleDevicePurgeObj.maxInactiveDays=30,this.staleDevicePurgeObj.schedule.frequency="Weekly",this.staleDevicePurgeObj.schedule.days="Mon",this.staleDevicePurgeObj.schedule.timezone="Etc/GMT+12",this.scopes=this.ssoAuthService.getScopes(),this.orgId=this.ssoAuthService.getOrgId()}return t(e,[{key:"setTitle",value:function(e){this.router.url.includes("cco-foundation")?this.titleService.setTitle("".concat(this.language["Stale System Purge"]," - ").concat(this.language.settings," - ").concat(this.language.configuration," - ").concat(this.language.Deployment," - ").concat(this.language["Calix Cloud"])):this.router.url.includes("cco/services/configuration/stale-system-purge")?this.titleService.setTitle("".concat(this.language["Stale System Purge"]," - ").concat(this.language.configuration," - ").concat(this.language.Services," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])):this.router.url.includes("/support/netops-management")&&this.titleService.setTitle("".concat(this.language["Stale System Purge"]," - ").concat(this.language.Configurations," - ").concat(this.language.NetOps," - ").concat(this.language.Service," - ").concat(this.language["Calix Cloud"]))}},{key:"ngOnInit",value:function(){var e,t,n=this;if(this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){n.language=e,n.redraw(),n.setTitle(n.router.url)}),this.setTitle(this.router.url),this.router.url.includes("cco-foundation")||this.router.url.includes("cco/services/configuration/stale-system-purge"))if(this.router.url.includes("cco/services/configuration/stale-system-purge")){var i=this.ssoAuthService.getEntitlements();this.router.url.includes("cco/services")&&i[210]&&!i[102]&&(this.showStaleDevicePurgeForm=!1);var r=this.scopes;l.N.VALIDATE_SCOPE?((null===(e=r["cloud.rbac.coc.services.configuration.stalesystempurge"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),r&&(null===(t=r["cloud.rbac.coc.services.configuration.stalesystempurge"])||void 0===t?void 0:t.includes("write"))&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0)}else if(l.N.VALIDATE_SCOPE){var o=this.scopes;o["cloud.rbac.foundation.configurations"]=o["cloud.rbac.foundation.configurations"]?o["cloud.rbac.foundation.configurations"]:[],o["cloud.rbac.foundation.configurations"].length&&(this.hasScopeAccess=!0),o&&o["cloud.rbac.foundation.configurations"].includes("write")&&(this.hasWriteAccess=!0)}else this.hasWriteAccess=!0,this.hasScopeAccess=!0;else l.N.VALIDATE_SCOPE?(this.scopes["cloud.rbac.csc.netops.config.stale_purge"]=this.scopes["cloud.rbac.csc.netops.config.stale_purge"]?this.scopes["cloud.rbac.csc.netops.config.stale_purge"]:[],this.scopes["cloud.rbac.csc.netops.config.stale_purge"].length&&(this.hasScopeAccess=!0),this.scopes&&this.scopes["cloud.rbac.csc.netops.config.stale_purge"]&&-1!==this.scopes["cloud.rbac.csc.netops.config.stale_purge"].indexOf("write")&&(this.hasWriteAccess=!0)):(this.hasWriteAccess=!0,this.hasScopeAccess=!0);this.hasScopeAccess?this.fetchPolicy():this.ssoAuthService.setPageAccess(!1)}},{key:"getExcLogPolicy",value:function(e){var t=this,n=this;this.tableOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,ordering:!1,dom:"tip",responsive:!0,ajax:function(i,r){t.loading=!0,n.http.get(c.FK+"?policyId="+t.staleDevicePurgeObj._id+"&skip="+i.start+"&limit="+i.length).subscribe(function(i){i.forEach(function(e,n){e.devices&&(i[n].successPurgeCount=e.devices.length),e.failures&&(i[n].failurgePurgeCount=e.failures.length),i[n].timeZone=t.getTimezoneName(e.endTime),i[n].startTime=t.dateUtils.getUserDateTime(i[n].startTime,t.staleDevicePurgeObj.schedule.timezone)}),t.loading=!1,n.excLogPolicObj=i,r({recordsTotal:e,recordsFiltered:e,data:[]}),$("html, body").animate({scrollTop:0},"slow")})},drawCallback:function(e){t.changeTableStatusLanguage(e),e._iRecordsDisplay<=e._iDisplayLength&&$(e.nTableWrapper).find("#users-table_last").addClass("disabled")}}}},{key:"changeTableStatusLanguage",value:function(e){var t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.replace(/\s+/g,""),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};var n="fr"==sessionStorage.getItem("defaultLanguage"),i="es"==sessionStorage.getItem("defaultLanguage"),r="de_DE"==sessionStorage.getItem("defaultLanguage"),o=e.oPreviousSearch.sSearch.replace(/\s+/g,"")?n?"(filtr\xe9es \xe0 partir des ".concat(t.format(e._iRecordsTotal)," entr\xe9es totales)"):i?"(filtrado de un total de ".concat(t.format(e._iRecordsTotal)," entradas)"):r?"(gefiltert aus ".concat(t.format(e._iRecordsTotal)," Eintr\xe4gen)"):"(filtered from ".concat(t.format(e._iRecordsTotal)," total entries)"):"",a=0==e._iRecordsDisplay?-1:e._iDisplayStart,s=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;$('div [role="status"]').text(n?"Affichage de ".concat(t.format(a+1)," \xe0 ").concat(t.format(s)," des ").concat(t.format(e._iRecordsDisplay)," entr\xe9es ").concat(o):i?"Se muestran del ".concat(t.format(a+1)," al ").concat(t.format(s)," de ").concat(t.format(e._iRecordsDisplay)," resultados ").concat(o):r?"Angezeigt ".concat(t.format(a+1)," bis ").concat(t.format(s)," von ").concat(t.format(e._iRecordsDisplay)," ergebnissen ").concat(o):"Showing ".concat(t.format(a+1)," to ").concat(t.format(s)," of ").concat(t.format(e._iRecordsDisplay)," entries ").concat(o)),$(".first").text(n?"Le d\xe9but":i?"Primero":r?"Erste Seite":"First"),$(".previous").text(n?"Pr\xe9c\xe9dent":i?"Anterior":r?"Zur\xfcck":"Previous"),$(".next").text(n?"Suivant":i?"Siguiente":r?"Weiter":"Next"),$(".last").text(n?"Derni\xe8re":i?"\xdaltimo":r?"Letzte":"Last")}},{key:"redraw",value:function(){this.dtElement.dtInstance.then(function(e){e.draw()})}},{key:"getTimezoneName",value:function(e){var t=new Date(e),n=t.toLocaleDateString(void 0),i=t.toLocaleDateString(void 0,{timeZoneName:"long"}),r=i.indexOf(n);return r>=0?(i.substring(0,r)+i.substring(r+n.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):i}},{key:"fetchPolicy",value:function(){var e=this;this.loading=!0,this.staleDevicePurgeService.getStaleDevicePurgePolicy(this.orgId).subscribe(function(t){e.loading=!1,0!=t.length&&(e.staleDevicePurgeObj=t[0],e.setTIme(e.staleDevicePurgeObj.schedule.startTimeOfDay),e.updateRadioButton(),e.updatePolicyStatus(),e.toggleExecutionLog())},function(t){e.loading=!1,e.showError=!0,e.errorMsg=t.statusText})}},{key:"setTIme",value:function(e){this.startTime=new Date;var t=e.split(":");this.startTime.setHours(+t[0]),this.startTime.setMinutes(+t[1]),this.startTime.setMilliseconds(+t[2])}},{key:"updateRadioButton",value:function(){this.associateDeviceValue=this.staleDevicePurgeObj.forceDeleteAssociatedDevices?"Yes":"No"}},{key:"updatePolicyStatus",value:function(){this.policyStatus=!this.staleDevicePurgeObj.suspended}},{key:"OnToggleChange",value:function(){!this.showStaleDevicePurgeForm||(this.policyStatus?this.resumePolicy():this.suspendPolicy())}},{key:"changeRadio",value:function(e){this.staleDevicePurgeObj.forceDeleteAssociatedDevices="radio02-01"==e.srcElement.id}},{key:"onCancel",value:function(){this.fetchPolicy()}},{key:"onSubmit",value:function(){var e,t=this;this.loading=!0,this.staleDevicePurgeObj._id?(null===(e=this.staleDevicePurgeObj)||void 0===e||delete e.orgId,this.staleDevicePurgeService.updateStaleDevicePurgePolicy(this.staleDevicePurgeObj,this.staleDevicePurgeObj._id).subscribe(function(e){t.showSuccess=!0,t.successMsg=t.language.Updated_Successfully,setTimeout(function(){t.showSuccess=!1,t.successMsg=""},1e3),t.fetchPolicy()},function(e){t.showError=!0,t.errorMsg=e.error.error,t.loading=!1})):this.staleDevicePurgeService.createStaleDevicePurgePolicy(this.staleDevicePurgeObj).subscribe(function(e){t.showSuccess=!0,t.successMsg=t.language["Successfully Created!"],t.fetchPolicy()},function(e){t.showError=!0,t.errorMsg=e.error.error,t.loading=!1})}},{key:"resumePolicy",value:function(){var e=this;this.staleDevicePurgeService.resumeStaleDevicePurgePolicyById(this.staleDevicePurgeObj._id,this.orgId).subscribe(function(t){e.showSuccess=!0,e.successMsg=e.language.Successfully_Resumed,setTimeout(function(){e.fetchPolicy()},5e3)},function(t){e.showError=!0,e.errorMsg=t.error.error})}},{key:"suspendPolicy",value:function(){var e=this;this.staleDevicePurgeService.suspendStaleDevicePurgePolicyById(this.staleDevicePurgeObj._id,this.orgId).subscribe(function(t){e.showSuccess=!0,e.successMsg=e.language.Successfully_Suspended,setTimeout(function(){e.fetchPolicy()},5e3)},function(t){e.showError=!0,e.errorMsg=t.error.error})}},{key:"getExcLogPageCount",value:function(){var e=this;this.staleDevicePurgeObj._id?this.staleDevicePurgeService.getLogCountStaleDevicePurgePolicy(this.staleDevicePurgeObj._id).subscribe(function(t){e.tableCount=t.count,e.viewExecutionLog?e.redraw():(e.getExcLogPolicy(t.count),e.viewExecutionLog=!0)}):(this.viewExecutionLog=!0,this.tableOptions={processing:!1,ordering:!1,dom:"t"})}},{key:"hideError",value:function(){this.showError=!1,this.errorMsg=""}},{key:"hideSuccess",value:function(){this.showSuccess=!1,this.successMsg=""}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}},{key:"onSelectStartTime",value:function(e){var t=("0"+new Date(e).getHours()).substr(-2),n=("0"+new Date(e).getMinutes()).substr(-2),i=("0"+new Date(e).getSeconds()).substr(-2);this.staleDevicePurgeObj.schedule.startTimeOfDay=(t+":"+n+":"+i).toString()}},{key:"onFrequencyChange",value:function(){this.staleDevicePurgeObj.schedule.days="Weekly"==this.staleDevicePurgeObj.schedule.frequency?"Mon":"1"}},{key:"toggleExecutionLog",value:function(){this.getExcLogPageCount()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(d.s),g.Y36(h.t6),g.Y36(m),g.Y36(v.eN),g.Y36(Z.Dx),g.Y36(O.s),g.Y36(y.F0))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-stale-device-purge"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(u.G,5),2&e)&&(g.iGM(n=g.CRH())&&(t.dtElement=n.first))},decls:2,vars:2,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],["id","state-device-purge","class","tab-pane position-relative",4,"ngIf"],["role","alert",1,"alert","alert-warning"],["id","state-device-purge",1,"tab-pane","position-relative"],["class","w-100 alert alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert alert-success  fade show",4,"ngIf"],["class","loader",4,"ngIf"],[1,"d-block","d-sm-none","ccl-Secondary-title","mb-2","col-md-12","border-bottom"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-6","col-xl-6","pt-3"],["id","ssp-configuration",1,"title","border-bottom"],["id","stale-device-purge-form","novalidate","",1,"form-group","ccl-form",3,"ngSubmit"],["myForm","ngForm"],["class","form-group row ccl-form",4,"ngIf"],[1,"form-group","row","ccl-form","required"],["for","name",1,"col-md-12","col-form-label"],[1,"error"],[1,"col-md-12",3,"ngClass"],["id","name","type","text","name","name","required","","aria-required","true","aria-describedby","name-error","aria-invalid","true","autocomplete","new-password","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange"],["name","ngModel"],[1,"input-close"],["src","assets/img/ic_close-44px.svg","alt","",3,"click"],["class","errorMessage","id","name-error",4,"ngIf"],[1,"form-group","row","ccl-form"],["for","description",1,"col-md-12","col-form-label"],["id","description","type","text","name","description","required","","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange"],["description","ngModel"],["class","errorMessage pl-3","id","description-error",4,"ngIf"],["for","InactivityPeriod",1,"col-md-12","col-form-label"],["id","InactivityPeriod","type","","required","","customNumMin","1","customNeg","","name","InactivityPeriod","data-toggle","tooltip","data-placement","bottom","aria-required","true","aria-describedby","InactivityPeriod-error","aria-invalid","true","autocomplete","new-password","trimSpace","",1,"form-control",3,"ngModel","title","formValue","ngModelChange"],["InactivityPeriod","ngModel"],["class","errorMessage","id","InactivityPeriod-error",4,"ngIf"],["for","frequency",1,"col-md-12","col-form-label"],["required","","aria-required","true","aria-describedby","InactivityPeriod-error","aria-invalid","true","autocomplete","new-password","data-toggle","tooltip","data-placement","bottom","id","frequency","name","frequency","bindLabel","name","bindValue","id","aria-required","true","aria-describedby","frequency-error","aria-invalid","true",3,"title","searchable","items","placeholder","clearable","ngModel","change","ngModelChange"],["frequency","ngModel"],["ng-label-tmp",""],["ng-option-tmp",""],["id","frequency-error",4,"ngIf"],["class","form-group row ccl-form required",4,"ngIf","ngIfElse"],["monthlyBlock",""],["for","startTime",1,"col-md-12","col-form-label"],[1,"custom-datepicker"],["required","","name","startTime","data-toggle","tooltip","data-placement","bottom","id","startTime","hourFormat","12","readonlyInput","true","timeOnly","true","aria-required","true","aria-describedby","Time-error","aria-invalid","true",3,"title","ngModel","showIcon","onSelect","ngModelChange"],["Time","ngModel"],["id","Time-error",4,"ngIf"],[1,"dropdown-close","mr-3"],["for","timeZone",1,"col-md-12","col-form-label"],["id","timezone","name","timeZOne","required","","data-toggle","tooltip","data-placement","bottom","bindLabel","name","bindValue","name","aria-required","true","aria-describedby","Time-error","aria-invalid","true",3,"title","items","placeholder","searchable","clearable","ngModel","ngModelChange"],["timezone","ngModel"],[4,"ngIf"],[1,"dropdown-close"],[1,"col-md-12"],[1,"custom01"],["type","radio","id","radio02-02","name","associateDevices","value","No",3,"ngModel","ngModelChange","change"],["associateDevices","ngModel"],["for","radio02-02","data-toggle","tooltip","data-placement","bottom",1,"mr-3",3,"title"],["type","radio","id","radio02-01","required","","name","associateDevices","value","Yes",3,"ngModel","ngModelChange","change"],["for","radio02-01","data-toggle","tooltip","data-placement","bottom",1,"mr-3",3,"title"],[1,"form-group","row"],[1,"col-sm-12","text-md-left"],["type","submit","id","submit-btn","class","btn-default primary px-3 mr-3",4,"ngIf"],["id","execution-log",1,"title","border-bottom"],["class","table-responsive","class","form-group ccl-form",4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button","id","hide-error-btn",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"d-inline"],[1,"d-inline",3,"innerHtml"],["type","button","id","hide-successs-btn",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"float-left","px-3"],[1,"checkbox","switcher"],["for","status"],["type","checkbox","name","status","id","status",3,"disabled","ngModel","change","ngModelChange"],[3,"ngClass"],["id","name-error",1,"errorMessage"],["id","description-error",1,"errorMessage","pl-3"],["id","InactivityPeriod-error",1,"errorMessage"],["id","frequency-error"],["for","dayofweek",1,"col-md-12","col-form-label"],["required","","data-toggle","tooltip","data-placement","bottom","id","dayOfWeek","name","dayofweek","bindLabel","name","bindValue","id","aria-required","true","aria-describedby","dayOfWeek-error","aria-invalid","true",3,"title","items","placeholder","clearable","ngModel","searchable","ngModelChange"],["dayOfWeek","ngModel"],["id","dayOfWeek-error",4,"ngIf"],["id","dayOfWeek-error"],["for","dayOfMonth",1,"col-md-12","col-form-label"],["required","","data-toggle","tooltip","data-placement","bottom","id","dayOfMonth","name","dayofMonth","placeholder","Select Days of month","bindLabel","id","bindValue","id","aria-required","true","aria-describedby","dayOfMonth-error","aria-invalid","true",3,"title","searchable","items","clearable","ngModel","ngModelChange"],["dayOfMonth","ngModel"],["id","dayOfMonth-error",4,"ngIf"],["id","dayOfMonth-error"],["id","Time-error"],["type","submit","id","submit-btn",1,"btn-default","primary","px-3","mr-3"],[1,"form-group","ccl-form"],["datatable","","id","excLogTable",1,"table","table-hover","table-striped",3,"dtOptions"],["scope","col"],[4,"ngFor","ngForOf"],["id","accordionTable",1,"accordion-toggle","collapsed"],[1,"align-middle"],["data-toggle","collapse",1,"dropdown-toggle","align-middle"],[1,"hide-table-padding"],[1,"collapse","in","p-3"],[1,"col-2","ignorewhitespace"],["class","row",4,"ngFor","ngForOf"],["colspan","5",1,"no-data-available"]],template:function(e,t){1&e&&(g.YNc(0,T,2,1,"div",0),g.YNc(1,re,104,75,"div",1)),2&e&&(g.Q6J("ngIf",!t.hasScopeAccess),g.xp6(1),g.Q6J("ngIf",t.hasScopeAccess))},directives:[_.O5,x._Y,x.JL,x.F,_.mk,x.Fj,x.Q7,M.f,x.JJ,x.On,P.D,C.v,q.w9,q.bb,q.Z2,A.f,x._,x.Wl,u.G,_.sg],styles:['.ignorewhitespace[_ngcontent-%COMP%]{white-space:nowrap;font-weight:bold}tr.hide-table-padding[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0}.expand-button[_ngcontent-%COMP%]{position:relative}.accordion-toggle[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]:after{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);content:"-"}.accordion-toggle.collapsed[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]:after{content:"+"}  .p-calendar-w-btn .p-datepicker-trigger{max-height:38px}[_nghost-%COMP%]     .dataTables_empty{display:none}.p-calendar[_ngcontent-%COMP%]{width:100%!important}.no-data-available[_ngcontent-%COMP%]{text-align:center}.errorMsg[_ngcontent-%COMP%]{color:#c70000}.errorMsg[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #C70000}input[readonly][_ngcontent-%COMP%]{cursor:not-allowed!important}table.dataTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#fff!important}.input-close[_ngcontent-%COMP%]{position:absolute;top:4px;right:30px;width:11px;cursor:pointer}.dropdown-close[_ngcontent-%COMP%]{position:absolute;top:4px;right:50px;width:11px;cursor:pointer}.title[_ngcontent-%COMP%]{border-bottom:1px solid #CCCCCC;padding-bottom:9px;margin-bottom:12px;color:#1a1f22;font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left}div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}.opacity-50[_ngcontent-%COMP%]{opacity:.5}.dropdown-toggle[aria-expanded=true][_ngcontent-%COMP%]:after{transform:rotate(180deg);-webkit-transform:rotate(180deg)}']}),e}()},76149:function(e,t,n){n.d(t,{nJ:function(){return r},bX:function(){return o},B3:function(){return a},eq:function(){return s},pq:function(){return c},FK:function(){return l},ek:function(){return u},jX:function(){return g},hF:function(){return d},GB:function(){return h},gn:function(){return p},ob:function(){return f},z9:function(){return v},L:function(){return b},VB:function(){return m},KU:function(){return Z},yz:function(){return O}});var i=n(92340).N.SUPPORT_URL,r=i+"/netops-selfheal/wifi-optimization/org/config",o=i+"/netops-selfheal/wifi-optimization/org/config",a=i+"/netops-stale-device-purge/policy",s=i+"/netops-stale-device-purge/policy",c=i+"/netops-stale-device-purge/policy",l=i+"/netops-stale-device-purge/policy-exec-logs",u=i+"/netops-stale-device-purge/policy-exec-logs/count",g=i+"/netops-stale-device-purge/policy",d=i+"/netops-secure/onboarding",h=i+"/netops-secure/onboarding/update",p=i+"/netops-exts/external-server",f=i+"/netops-exts/external-server",v=i+"/netops-exts/external-server",b=i+"/device-systools/site-scan/orgConfig",m=i+"/device-systools/site-scan/orgConfig",Z=i+"/orgIdReport/download",O=i+"/useraudit/downloadLogByNFS"}}])}();