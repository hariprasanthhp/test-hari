"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[6125],{66125:function(t,e,i){i.r(e),i.d(e,{ProtectIqNewModule:function(){return _t}});var n=i(38583),s=i(39895),a=i(92340),o=i(37716),r=i(39075),l=i(89097),c=i(7450),d=i(94802),g=i(27351);function u(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"div",3),o._UZ(2,"img",4),o.qZA(),o._UZ(3,"div",5),o.TgZ(4,"button",6),o.NdJ("click",function(){return o.CHM(t),o.oxw().errorMessage=""}),o._uU(5),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(3),o.Q6J("innerHtml",t.errorMessage,o.oJD),o.xp6(2),o.hij(" ",t.language.OK," ")}}function p(t,e){if(1&t&&(o.TgZ(0,"div",13),o.TgZ(1,"div",14),o.TgZ(2,"div",15),o.TgZ(3,"span",16),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw(2);o.xp6(4),o.Oqu(t.language.Loading)}}function h(t,e){if(1&t&&(o.TgZ(0,"li",18),o.TgZ(1,"a",19),o._uU(2),o.qZA(),o.qZA()),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.xp6(1),o.Tol("nav-link small "+(t.active?"active":"")),o.Q6J("id",t.name)("routerLink",t.routerLink)("state",t.state)("title",e.language[t.label]),o.xp6(1),o.hij(" ",e.language[t.label]," ")}}function v(t,e){if(1&t&&(o.ynx(0),o.YNc(1,h,3,7,"li",17),o.BQk()),2&t){const t=e.$implicit;o.xp6(1),o.Q6J("ngIf",t.display)}}function b(t,e){if(1&t&&(o.TgZ(0,"div",7),o.TgZ(1,"div",8),o.YNc(2,p,5,1,"div",9),o.TgZ(3,"ul",10),o.YNc(4,v,2,1,"ng-container",11),o.qZA(),o.qZA(),o.TgZ(5,"div",12),o._UZ(6,"router-outlet"),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.Q6J("ngIf",t.loading),o.xp6(2),o.Q6J("ngForOf",t.menus)}}let f=(()=>{class t{constructor(t,e,i,n,s,a){this.titleService=t,this.router=e,this.ssoAuthService=i,this.translateService=n,this.dataService=s,this.protectIqService=a,this.loading=!1,this.errorMessage="",this.scopeFlag={},this.undiscoveredGS=!1,this.preReqData={},this.newData={userId:""},this.menus=[{name:"details",label:"Details",routerLink:"./details",active:!0,display:!0,state:this.preReqData}],this.unitTesting=!1}ngOnInit(){this.ssoAuthService.setActionLog("CSC","pageHit","Application",this.router.url,"Application protectIQ page is loaded"),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t,this.titleService.setTitle(`${this.language.Security} - ${this.language["Managed Services"]} - ${this.language.Support} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.Security} - ${this.language["Managed Services"]} - ${this.language.Support} - ${this.language["Calix Cloud"]}`),this.protectIqService.subscribtionStatus.subscribe(t=>{this.subscribtionStatus=t,this.setLatestVersion(),this.initMenus(),this.formatMenus(),this.loading=!1}),this.currentSubscriberInfoSubscription=this.ssoAuthService.currentSubscriberInfo.subscribe(()=>{this.router.navigateByUrl("/support/application/protect-iq"),Object.keys(this.preReqData).length?this.protectIqService.availabilityInfo.next(this.preReqData):(this.loading=!0,this.initMenus(),this.onBoardedCheck())}),this.setLatestVersion(),this.getScopes(),this.loadContent()}ngOnDestory(){this.currentSubscriberInfoSubscription&&this.currentSubscriberInfoSubscription.unsubscribe(),this.availabilityApiSubscription&&this.availabilityApiSubscription.unsubscribe()}setLatestVersion(){var t,e;let i=null!==(e=null===(t=JSON.parse(sessionStorage.getItem("calix.deviceData")).find(t=>""!=t.softwareVersion))||void 0===t?void 0:t.softwareVersion)&&void 0!==e?e:"";this.isLatestVersion=parseFloat(i)>=23.3&&this.ssoAuthService.isSmbEnabled(!0)}getScopes(){let t=this.ssoAuthService.getScopes();if(a.N.VALIDATE_SCOPE){const e=Object.keys(t);if(e)for(let t=0;t<e.length;t++)-1===e[t].indexOf("cloud.rbac.csc.apps.experienceiq")?-1===e[t].indexOf("cloud.rbac.csc.apps.protectiq")||(this.scopeFlag.protectiq=!0):this.scopeFlag.experienceiq=!0;t["cloud.rbac.csc.apps.protectiq.configuration"]=t["cloud.rbac.csc.apps.protectiq.configuration"]?t["cloud.rbac.csc.apps.protectiq.configuration"]:[],t["cloud.rbac.csc.apps.protectiq.enablement"]=t["cloud.rbac.csc.apps.protectiq.enablement"]?t["cloud.rbac.csc.apps.protectiq.enablement"]:[],t&&t["cloud.rbac.csc.apps.protectiq.configuration"]&&(-1!==t["cloud.rbac.csc.apps.protectiq.configuration"].indexOf("read")&&(this.scopeFlag.configRead=!0),-1!==t["cloud.rbac.csc.apps.protectiq.configuration"].indexOf("write")&&(this.scopeFlag.configWrite=!0)),t&&t["cloud.rbac.csc.apps.protectiq.enablement"]&&(-1!==t["cloud.rbac.csc.apps.protectiq.enablement"].indexOf("read")&&(this.scopeFlag.enableRead=!0),-1!==t["cloud.rbac.csc.apps.protectiq.enablement"].indexOf("write")&&(this.scopeFlag.enableWrite=!0))}else this.scopeFlag.configRead=!0,this.scopeFlag.configWrite=!0,this.scopeFlag.enableRead=!0,this.scopeFlag.enableWrite=!0,this.scopeFlag.experienceiq=!0,this.scopeFlag.protectiq=!0}loadContent(){var t,e,i;if(this.unitTesting)return;this.deviceInfo=JSON.parse(sessionStorage.getItem("calix.deviceData"));let n=this.deviceInfo.filter(t=>"RG"==t.opMode&&t.hasOwnProperty("modelName")&&this.ssoAuthService.acceptGSModel(t.modelName));n=n.length?n:this.deviceInfo.map(t=>t.deviceId).includes(sessionStorage.getItem("undiscoveredSn"))?[{deviceId:sessionStorage.getItem("undiscoveredSn")}]:[],n=parseInt((null===(t=history.state)||void 0===t?void 0:t.containGS)||"0")||n.length,this.hasSubscriber=(null===(e=history.state)||void 0===e?void 0:e.hasSubscriber)||sessionStorage.getItem("calix.subscriberId")&&"undefined"!=sessionStorage.getItem("calix.subscriberId"),n?(null===(i=history.state)||void 0===i?void 0:i.iseiqfromissue)?this.router.navigate(["/support/application/experienceIQ"],{state:{ispriorities:!0}}):-1!=this.ssoAuthService.getEntitlementsArr().indexOf("203")||-1!=this.ssoAuthService.getEntitlementsArr().indexOf("205")||this.ssoAuthService.isSmbEnabled()&&this.ssoAuthService.getEntitlementsArr().includes("218")||this.scopeFlag.protectiq?(this.ssoAuthService.getEntitlementsArr().includes("203")||this.ssoAuthService.getEntitlementsArr().includes("205")||this.ssoAuthService.isSmbEnabled()&&this.ssoAuthService.getEntitlementsArr().includes("218"))&&this.scopeFlag.protectiq&&n?(this.router.navigate(["/support/application/protect-iq/details"]),this.undiscoveredGS=!this.deviceInfo.filter(t=>"RG"==t.opMode&&t.hasOwnProperty("modelName")&&this.ssoAuthService.acceptGSModel(t.modelName)).length&&this.deviceInfo.filter(t=>!t.hasOwnProperty("modelName")).length,this.deviceInfo=this.deviceInfo.filter(t=>"RG"==t.opMode),this.deviceInfo=this.deviceInfo&&this.deviceInfo.length?this.deviceInfo[0].serialNumber:"",this.orgId=this.ssoAuthService.getOrgId(),this.subscriberStructure=this.dataService.getStoredSubscriberInfo()||{subscriberLocationId:sessionStorage.getItem("calix.subLocationId"),_id:sessionStorage.getItem("calix.subscriberId")},this.onBoardedCheck()):(this.ssoAuthService.getEntitlementsArr().includes("204")||this.ssoAuthService.getEntitlementsArr().includes("205")||this.ssoAuthService.isSmbEnabled()&&this.ssoAuthService.getEntitlementsArr().includes("218"))&&this.scopeFlag.experienceiq&&n?this.router.navigate(["/support/application/experienceIQ"]):(this.ssoAuthService.getEntitlementsArr().includes("206")||this.ssoAuthService.getEntitlementsArr().includes("213")||this.ssoAuthService.getEntitlementsArr().includes("212"))&&this.scopeFlag.arlo?this.router.navigate(["/support/application/arlo-smart"]):this.ssoAuthService.getEntitlementsArr().includes("207")&&this.scopeFlag.servify?this.router.navigate(["/support/application/servify-care"]):this.ssoAuthService.getEntitlementsArr().includes("214")&&this.scopeFlag.mycommunityiq?this.router.navigate(["/support/application/SmartTownWiFi"]):(this.ssoAuthService.getEntitlementsArr().includes("219")||this.ssoAuthService.getEntitlementsArr().includes("220"))&&this.scopeFlag.bark?this.router.navigate(["/support/application/bark"]):this.isCaptivePortAvail()&&this.router.navigate(["/support/application/customer-portal"]):this.ssoAuthService.getEntitlementsArr().indexOf("204")>-1&&this.scopeFlag.experienceiq?this.router.navigate(["/support/application/experienceIQ"]):this.router.navigate(["/support/application/arlo-smart"]):this.router.navigate(["/support/application/arlo-smart"])}isCaptivePortAvail(){let t=0;for(let e=0;e<=15;e++){if(this.dataService.getStoredSubscriberInfo()){t=this.ssoAuthService.isSmbEnabled()?1:0;break}this.ssoAuthService.sleep(1e3)}return t}onBoardedCheck(){this.loading=!0,this.protectIqService.getUserId(this.deviceInfo).subscribe(t=>{t&&t.userId?(this.newData=t,this.protectIqService.routerOnboardInfo.next(t),this.showFeatureAvailability(t)):(this.loading=!1,this.setAvailabilityInfo())},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}showFeatureAvailability(t){this.loading=!0,this.availabilityApiSubscription=this.protectIqService.getFeatureAvailability(t.userId).subscribe(t=>{this.showSkippedDevice=t.psd,this.showSecuritySetting=t.securityByPass,this.showDetail=t.proofService,this.setAvailabilityInfo()},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}setAvailabilityInfo(){this.preReqData={showSkippedDevice:this.showSkippedDevice,showSecuritySetting:this.showSecuritySetting,showDetail:this.showDetail,deviceInfo:this.deviceInfo,undiscoveredGS:this.undiscoveredGS,subscriberStructure:this.subscriberStructure,scopeFlag:this.scopeFlag,hasSubscriber:this.hasSubscriber},this.protectIqService.availabilityInfo.next(this.preReqData)}initMenus(){this.menus=[{name:"details",label:"Details",routerLink:"./details",active:!0,display:!0,state:this.preReqData}]}formatMenus(){this.subscribtionStatus.deviceSubscription&&this.subscribtionStatus.deviceStatus&&this.menus.push({name:"alerts",label:"Alerts",routerLink:"./alerts",display:!this.subscribtionStatus.smbEnabled&&!this.isLatestVersion,state:{userId:this.newData.userId}},{name:"trusted-list",label:"Trusted_List",routerLink:"./trusted-list",display:!this.subscribtionStatus.smbEnabled&&!this.isLatestVersion,state:{userId:this.newData.userId,isLatestVersion:this.isLatestVersion}},{name:"skipped-devices",label:"Skipped_Devices",routerLink:"./skipped-devices",display:!this.subscribtionStatus.smbEnabled||this.isLatestVersion&&this.showSkippedDevice,state:{configWrite:this.scopeFlag.configWrite,userId:this.newData.userId,isLatestVersion:this.isLatestVersion}},{name:"security-settings",label:"Security_Settings",routerLink:"./security-settings",display:this.showSecuritySetting,state:{userId:this.newData.userId,isLatestVersion:this.isLatestVersion}})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.Dx),o.Y36(s.F0),o.Y36(l.t6),o.Y36(c.s),o.Y36(d.Q),o.Y36(g.a))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-protect-iq-new"]],decls:2,vars:2,consts:[["class","w-100 alert alert alert-danger fade show d-flex justify-content-between align-items-center",4,"ngIf"],["class","row my-3",4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show","d-flex","justify-content-between","align-items-center"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex","wrn-msg",3,"innerHtml"],["type","button",1,"btn-default","primary","ok",3,"click"],[1,"row","my-3"],[1,"col-lg-2","col-md-3","col-sm-12","tab-sec","border-right","smy-2"],["class","loader",4,"ngIf"],["id","tabs",1,"w-100","nav","nav-tabs","sub-tab","vertical-tab"],[4,"ngFor","ngForOf"],[1,"col-lg-10","col-md-9","col-sm-12","details-sec"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-toggle","tab","href","javascript:void(0)",3,"id","routerLink","state","title"]],template:function(t,e){1&t&&(o.YNc(0,u,6,2,"div",0),o.YNc(1,b,7,2,"div",1)),2&t&&(o.Q6J("ngIf",e.errorMessage),o.xp6(1),o.Q6J("ngIf",e.scopeFlag.configRead))},directives:[n.O5,n.sg,s.lC,s.yS],styles:[""]}),t})();var m=i(15257),Z=i(35758),S=i(3679);function x(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",22),o.TgZ(1,"div",23),o._UZ(2,"img",24),o.qZA(),o.TgZ(3,"div",25),o._uU(4),o.qZA(),o.TgZ(5,"button",26),o.NdJ("click",function(){return o.CHM(t),o.oxw().warningMessage=""}),o._uU(6),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language[t.warningMessage]||t.warningMessage),o.xp6(2),o.Oqu(t.language.OK)}}function A(t,e){if(1&t&&(o.TgZ(0,"div",27),o.TgZ(1,"div",28),o.TgZ(2,"div",29),o.TgZ(3,"span",30),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}function q(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"th",31),o._uU(2),o.qZA(),o.TgZ(3,"td",32),o.TgZ(4,"div",33),o.TgZ(5,"label",34),o.TgZ(6,"input",35),o.NdJ("change",function(){return o.CHM(t),o.oxw().toggleSubscription(!0)})("ngModelChange",function(e){return o.CHM(t),o.oxw().deviceSubscription=e}),o.qZA(),o.TgZ(7,"span",33),o._UZ(8,"small"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.Oqu(t.language.Subscribed),o.xp6(2),o.Q6J("ngClass",t.deviceSubscription?"toggle-swtbtn checkbox switcher mb-2":"toggle-swtbtn checkbox switcher-disabld mb-2"),o.xp6(2),o.Q6J("checked",t.deviceSubscription)("ngModel",t.deviceSubscription)("disabled",!t.scopeFlag.configWrite),o.xp6(1),o.Q6J("ngClass",t.scopeFlag.configWrite?"":"toggleDisabled")}}function I(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"th",31),o._uU(2),o.qZA(),o.TgZ(3,"td",32),o.TgZ(4,"div",33),o.TgZ(5,"label",36),o.TgZ(6,"input",37),o.NdJ("change",function(){return o.CHM(t),o.oxw().onSubscription(!0)})("ngModelChange",function(e){return o.CHM(t),o.oxw().deviceSubscription=e}),o.qZA(),o.TgZ(7,"span",38),o._UZ(8,"small"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.Oqu(t.language.enabled),o.xp6(2),o.Q6J("ngClass",t.deviceStatus?"toggle-swtbtn checkbox switcher mb-2":"toggle-swtbtn checkbox switcher-disabld mb-2"),o.xp6(2),o.Q6J("checked",t.deviceSubscription)("ngModel",t.deviceSubscription)("disabled",!0)}}function y(t,e){1&t&&o._UZ(0,"tr")}function _(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",39),o.TgZ(1,"div",4),o.TgZ(2,"div",40),o.TgZ(3,"div",41),o._uU(4),o.qZA(),o.TgZ(5,"a",42),o.NdJ("click",function(){return o.CHM(t),o.oxw().showStatusNotification()}),o._UZ(6,"i",43),o.qZA(),o.qZA(),o.TgZ(7,"table",44),o.TgZ(8,"tbody"),o.TgZ(9,"tr"),o.TgZ(10,"th",31),o._uU(11),o.qZA(),o.TgZ(12,"td",32),o._uU(13),o.qZA(),o.qZA(),o.TgZ(14,"tr"),o.TgZ(15,"th",45),o._uU(16),o.qZA(),o.TgZ(17,"td"),o._uU(18),o.ALo(19,"date"),o.qZA(),o.qZA(),o.TgZ(20,"tr"),o.TgZ(21,"th",45),o._uU(22),o.qZA(),o.TgZ(23,"td"),o._uU(24),o.qZA(),o.qZA(),o.TgZ(25,"tr"),o.TgZ(26,"th",45),o._uU(27),o.qZA(),o.TgZ(28,"td"),o._uU(29),o.qZA(),o.qZA(),o.TgZ(30,"tr"),o.TgZ(31,"th",45),o._uU(32),o.qZA(),o.TgZ(33,"td"),o._uU(34),o.qZA(),o.qZA(),o.TgZ(35,"tr"),o.TgZ(36,"th",45),o._uU(37),o.qZA(),o.TgZ(38,"td"),o._uU(39),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Status),o.xp6(7),o.hij("",t.language.Uptime,":"),o.xp6(2),o.Oqu(t.loading?"-":t.protectIQ_Uptime),o.xp6(3),o.hij("",t.language.Last_Updated,":"),o.xp6(2),o.Oqu(t.loading?"-":o.xi3(19,13,t.lastUpdated,"MMM dd yyyy, hh:mm:ss a")),o.xp6(4),o.hij("",t.language.Packets_Analyzed_Today,":"),o.xp6(2),o.Oqu(t.loading?"-":t.packetsAnalyzedToday),o.xp6(3),o.hij("",t.language.Total_Virus_Detected,":"),o.xp6(2),o.Oqu(t.loading?"-":t.totalVirusDetected),o.xp6(3),o.hij("",t.language.Total_Intrusions,":"),o.xp6(2),o.Oqu(t.loading?"-":t.totalIntrusions),o.xp6(3),o.hij("",t.language.Total_Web_Threats,":"),o.xp6(2),o.Oqu(t.loading?"-":t.totalWebThreats)}}let T=(()=>{class t{constructor(t,e,i,n){this.translateService=t,this.protectIqService=e,this.ssoService=i,this.dataService=n,this.loading=!0,this.newData={},this.deviceStatus=!1,this.deviceSubscription=!1,this.scopeFlag={},this.enabledUpdated=!1,this.subscriptionUpdated=!1,this.undiscoveredGS=!1,this.deviceStatusSet=0,this.isEduroamEnable=!1}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.getScopes(),this.orgId=this.ssoService.getOrgId(),this.protectIqService.routerOnboardInfo.subscribe(t=>{this.newData=t}),this.deviceStatusSet=0,this.protectIqService.availabilityInfo.subscribe(t=>{0!=Object.keys(t).length&&this.protectIqService.currentAvailabilityInfo.next(t)}),this.protectIqService.currentAvailabilityInfo.pipe((0,m.q)(2)).subscribe(t=>{0!=Object.keys(t).length&&(this.deviceStatusSet++,this.showDetail=t.showDetail,this.deviceInfo=t.deviceInfo,this.undiscoveredGS=t.undiscoveredGS,this.hasSubscriber=t.hasSubscriber,this.subscriberStructure=t.subscriberStructure,1==this.deviceStatusSet&&this.getSubsciberStatus())})}getScopes(){let t=this.ssoService.getScopes();if(a.N.VALIDATE_SCOPE){const e=Object.keys(t);if(e)for(let t=0;t<e.length;t++)-1===e[t].indexOf("cloud.rbac.csc.apps.experienceiq")?-1===e[t].indexOf("cloud.rbac.csc.apps.protectiq")||(this.scopeFlag.protectiq=!0):this.scopeFlag.experienceiq=!0;t["cloud.rbac.csc.apps.protectiq.configuration"]=t["cloud.rbac.csc.apps.protectiq.configuration"]?t["cloud.rbac.csc.apps.protectiq.configuration"]:[],t["cloud.rbac.csc.apps.protectiq.enablement"]=t["cloud.rbac.csc.apps.protectiq.enablement"]?t["cloud.rbac.csc.apps.protectiq.enablement"]:[],t&&t["cloud.rbac.csc.apps.protectiq.configuration"]&&(-1!==t["cloud.rbac.csc.apps.protectiq.configuration"].indexOf("read")&&(this.scopeFlag.configRead=!0),-1!==t["cloud.rbac.csc.apps.protectiq.configuration"].indexOf("write")&&(this.scopeFlag.configWrite=!0)),t&&t["cloud.rbac.csc.apps.protectiq.enablement"]&&(-1!==t["cloud.rbac.csc.apps.protectiq.enablement"].indexOf("read")&&(this.scopeFlag.enableRead=!0),-1!==t["cloud.rbac.csc.apps.protectiq.enablement"].indexOf("write")&&(this.scopeFlag.enableWrite=!0))}else this.scopeFlag.configRead=!0,this.scopeFlag.configWrite=!0,this.scopeFlag.enableRead=!0,this.scopeFlag.enableWrite=!0,this.scopeFlag.experienceiq=!0,this.scopeFlag.protectiq=!0}showStatusNotification(){var t;this.loading=!0,this.notificationUserId=null===(t=this.newData)||void 0===t?void 0:t.userId,this.notificationUserId&&this.protectIqService.getNotification(this.notificationUserId).subscribe(t=>{this.loading=!1,this.protectIQ_Uptime=this.timeConvert(t.active_since),this.myDate=new Date(t.last_updated),this.lastUpdated=this.myDate.toString(),this.packetsAnalyzedToday=t.packet_analyzed_today,this.totalVirusDetected=t.virus_detected,this.totalIntrusions=t.intrusions,this.totalWebThreats=t.web_based_threats},t=>{this.warningMessage=this.protectIqService.errorHandler(t),this.loading=!1})}timeConvert(t){let e=Math.floor(t/1440),i=Math.floor((t-1440*e)/60),n=Math.round(t%60);return e>0?e+" Days "+i+" Hrs , "+n+" Mins":i+(i>1?" Hrs ":" Hr, ")+n+" Mins"}getSubsciberStatus(t,e){var i;const n=sessionStorage.getItem("calix.subscriberId"),s=this.deviceInfo?1:n?2:0;let a,o=[],r=[];(s&&!t||s&&"system"==t)&&(o.push(this.protectIqService.getArloAccount(this.ssoService.getOrgId(),1==s?this.deviceInfo:n,s)),r.push("system")),this.deviceInfo&&!t||this.deviceInfo&&"device"==t?(o.push(this.protectIqService.getDeviceStatus(this.deviceInfo,"CIES")),r.push("device")):this.deviceStatus=(null===(i=JSON.parse(sessionStorage.getItem("iqStatus")))||void 0===i?void 0:i.protectIQEnabled)||!1,o.length>0&&(this.loading=!0,a=(0,Z.D)(o).subscribe(t=>{var i,n,s,a,o,l,c,d,g,u,p,h,v,b,f,m,Z,S,x,A,q,I,y,_,T,M,w,O,C,P,k,E,U,D,L,J,Q,N;let F,j;if(this.loading=!1,2==t.length&&(F=t[0],j=t[1]),1==t.length&&r.includes("system")&&(F=t[0]),1==t.length&&r.includes("device")&&(j=t[0]),r.includes("system")&&F.edgeSuites&&(this.experienceiqstatus=F.edgeSuites.experienceIQ.subscribed,this.smbOrSmarttownEnabled=(null===(s=null===(n=null===(i=null==F?void 0:F.edgeSuites)||void 0===i?void 0:i.myCommunityIQ)||void 0===n?void 0:n.passpoint)||void 0===s?void 0:s.enable)&&"failed"!==(null===(c=null===(l=null===(o=null===(a=null==F?void 0:F.edgeSuites)||void 0===a?void 0:a.myCommunityIQ)||void 0===o?void 0:o.passpoint)||void 0===l?void 0:l.status)||void 0===c?void 0:c.result)||(null===(u=null===(g=null===(d=null==F?void 0:F.edgeSuites)||void 0===d?void 0:d.myCommunityIQ)||void 0===g?void 0:g.eduroam)||void 0===u?void 0:u.enable)&&"failed"!==(null===(b=null===(v=null===(h=null===(p=null==F?void 0:F.edgeSuites)||void 0===p?void 0:p.myCommunityIQ)||void 0===h?void 0:h.eduroam)||void 0===v?void 0:v.status)||void 0===b?void 0:b.result)||(null===(m=null===(f=null==F?void 0:F.edgeSuites)||void 0===f?void 0:f.smallBizIQ)||void 0===m?void 0:m.enable)&&"failed"!==(null===(x=null===(S=null===(Z=null==F?void 0:F.edgeSuites)||void 0===Z?void 0:Z.smallBizIQ)||void 0===S?void 0:S.status)||void 0===x?void 0:x.result),this.isEduroamEnable=(null===(I=null===(q=null===(A=null==F?void 0:F.edgeSuites)||void 0===A?void 0:A.myCommunityIQ)||void 0===q?void 0:q.eduroam)||void 0===I?void 0:I.enable)&&"failed"!==(null===(M=null===(T=null===(_=null===(y=null==F?void 0:F.edgeSuites)||void 0===y?void 0:y.myCommunityIQ)||void 0===_?void 0:_.eduroam)||void 0===T?void 0:T.status)||void 0===M?void 0:M.result),this.isSmartTownActivated=(null===(C=null===(O=null===(w=null==F?void 0:F.edgeSuites)||void 0===w?void 0:w.myCommunityIQ)||void 0===O?void 0:O.passpoint)||void 0===C?void 0:C.enable)&&["pending","succeeded"].includes(null===(U=null===(E=null===(k=null===(P=null==F?void 0:F.edgeSuites)||void 0===P?void 0:P.myCommunityIQ)||void 0===k?void 0:k.passpoint)||void 0===E?void 0:E.status)||void 0===U?void 0:U.result),this.smbEnabled=(null===(L=null===(D=null==F?void 0:F.edgeSuites)||void 0===D?void 0:D.smallBizIQ)||void 0===L?void 0:L.enable)||"undefined"==sessionStorage["calix.subscriberId"]&&this.ssoService.isSmbEnabled(),F)){if(e)return void(this.subscriptionUpdated=this.deviceSubscription==F.edgeSuites.protectIQ.subscribed);this.deviceSubscription=this.smbEnabled||!!F.edgeSuites.protectIQ.subscribed,F.edgeSuites.protectIQ.subscribed&&!this.undiscoveredGS&&(this.deviceStatus=F.edgeSuites.protectIQ.enabled)}if(r.includes("device")){if(e)return this.enabledUpdated=this.deviceStatus==(null===(J=null==j?void 0:j.status)||void 0===J?void 0:J.installed),void(this.tempDeviceStatus=null===(Q=null==j?void 0:j.status)||void 0===Q?void 0:Q.installed);this.deviceStatus=null===(N=null==j?void 0:j.status)||void 0===N?void 0:N.installed,this.newData.userId?this.deviceStatus&&this.showStatusNotification():this.onBoardedCheck()}this.updatedSubscriptionStatus(),this.deviceStatusSet=0},t=>{this.loading=!1,this.deviceStatusSet=0,this.warningMessage=this.protectIqService.errorHandler(t)}))}onBoardedCheck(){this.protectIqService.getUserId(this.deviceInfo).subscribe(t=>{this.loading=!1,t&&t.userId&&(this.newData=t,this.deviceStatus&&this.showStatusNotification())},t=>{this.loading=!1,this.warningMessage=this.protectIqService.errorHandler(t)})}toggleSubscription(t){if(this.deviceSubscription!=t)if(this.deviceSubscription=t,this.updatedSubscriptionStatus(),this.advLoading=!0,this.hasSubscriber)this.protectIqService.toggleAppSubscription(this.orgId,"ProtectIQ",this.subscriberStructure.subscriberLocationId,this.deviceSubscription).subscribe(t=>{let e=0;this.getSubsciberStatus("system",!0);const i=setInterval(()=>{e++,this.subscriptionUpdated&&(this.undiscoveredGS||this.deviceSubscription==this.tempDeviceStatus)?(this.advLoading=!1,clearInterval(i),this.updateAppTile(),this.undiscoveredGS||this.getSubsciberStatus("device",!1)):12==e?(this.advLoading=!1,clearInterval(i),this.updateAppTile()):this.getSubsciberStatus(this.subscriptionUpdated?"device":"system",!0)},1e4)},t=>{var e,i;this.deviceSubscription=!this.deviceSubscription,this.updatedSubscriptionStatus(),this.advLoading=!1,this.warningMessage=(null===(i=null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.error)||void 0===i?void 0:i.msg.includes("not communicating with router"))?this.protectIqService.errorHandler("Device is offline"):this.protectIqService.errorHandler(t)});else{let t={protectIQ:{},experienceIQ:{}};t.experienceIQ={subscribed:this.experienceiqstatus},t.protectIQ={subscribed:this.deviceSubscription},this.protectIqService.toggleAppSubscriptionwithoutsubscriber(this.orgId,this.deviceInfo,t).subscribe(t=>{let e=0,i=2e3;t&&t.estimatedDelay&&(i+=1e3*t.estimatedDelay),setTimeout(()=>{this.getSubsciberStatus("system",!0)},i);const n=setInterval(()=>{e++,this.subscriptionUpdated&&(this.undiscoveredGS||this.deviceSubscription==this.tempDeviceStatus)?(this.advLoading=!1,clearInterval(n),this.updateAppTile(),this.undiscoveredGS||this.getSubsciberStatus("device",!1)):12==e?(this.advLoading=!1,clearInterval(n),this.updateAppTile()):this.getSubsciberStatus(this.subscriptionUpdated?"device":"system",!0)},1e4)},t=>{var e,i;this.deviceSubscription=!this.deviceSubscription,this.updatedSubscriptionStatus(),this.advLoading=!1,this.warningMessage=(null===(i=null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.error)||void 0===i?void 0:i.msg.includes("not communicating with router"))?this.protectIqService.errorHandler("Device is offline"):this.protectIqService.errorHandler(t)})}}onSubscription(t){if(this.deviceStatus==t)return;this.deviceStatus=t,this.advLoading=!0;let e={fsn:this.deviceInfo,appName:"CIES",orderId:this.newData.userId};this.deviceStatus?this.protectIqService.setInstall(e).subscribe(t=>{let e=0;this.getSubsciberStatus("device",!0);const i=setInterval(()=>{e++,this.enabledUpdated?(this.advLoading=!1,clearInterval(i),this.updateAppTile(),this.getSubsciberStatus("device",!1)):12==e?(this.advLoading=!1,this.deviceStatus=!this.deviceStatus,clearInterval(i)):this.getSubsciberStatus("device",!0)},1e4)},t=>{var e,i;this.deviceStatus=!1,this.updatedSubscriptionStatus(),this.warningMessage=(null===(i=null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.error)||void 0===i?void 0:i.msg.includes("not communicating with router"))?this.protectIqService.errorHandler("Device is offline"):this.protectIqService.errorHandler(t),this.advLoading=!1}):this.protectIqService.setUnInstall(e).subscribe(t=>{let e=0;this.getSubsciberStatus("device",!0);const i=setInterval(()=>{e++,this.enabledUpdated?(this.advLoading=!1,clearInterval(i),this.updateAppTile(),this.getSubsciberStatus("device",!1)):12==e?(this.advLoading=!1,this.deviceStatus=!this.deviceStatus,clearInterval(i)):this.getSubsciberStatus("device",!0)},1e4)},t=>{var e,i;this.deviceStatus=!0,this.updatedSubscriptionStatus(),this.warningMessage=(null===(i=null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.error)||void 0===i?void 0:i.msg.includes("not communicating with router"))?this.protectIqService.errorHandler("Device is offline"):this.protectIqService.errorHandler(t),this.advLoading=!1})}toggleEnable(t){this.deviceStatus!=t&&(this.deviceStatus=t,this.updatedSubscriptionStatus(),this.advLoading=!0,this.protectIqService.setEnableStatus(this.orgId,this.deviceInfo,{app:"protectIQ",enable:this.deviceStatus}).subscribe(t=>{setTimeout(()=>{let t=0;this.getSubsciberStatus("device",!0);const e=setInterval(()=>{t++,this.enabledUpdated?(this.advLoading=!1,clearInterval(e),this.updateAppTile(),this.getSubsciberStatus("device",!1)):12==t?(this.advLoading=!1,this.deviceStatus=!this.deviceStatus,this.updatedSubscriptionStatus(),clearInterval(e)):this.getSubsciberStatus("device",!0)},1e4)},1e3*((null==t?void 0:t.estimatedDelay)||0)+2e3)},t=>{var e,i;this.deviceStatus=!1,this.updatedSubscriptionStatus(),this.warningMessage=(null===(i=null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.error)||void 0===i?void 0:i.msg.includes("not communicating with router"))?this.protectIqService.errorHandler("Device is offline"):this.protectIqService.errorHandler(t),this.advLoading=!1}))}updateAppTile(){const t=this.deviceInfo||sessionStorage.getItem("undiscoveredSn")||"";t&&(this.advLoading=!0,this.protectIqService.tileStatus(this.orgId,t,this.subscriberStructure._id).subscribe(t=>{var e,i,n,s,a,o,r,l,c,d,g,u,p,h,v,b,f,m,Z;this.advLoading=!1,t=t||{};let S=0;const x=this.ssoService.getScopes(),A=(null===(i=null===(e=null==t?void 0:t.app)||void 0===e?void 0:e.servifyCare)||void 0===i?void 0:i.email)&&(this.getEntitlemnt("207")||this.getEntitlemnt("215")||this.getEntitlemnt("216")||this.getEntitlemnt("217"))&&x["cloud.rbac.csc.apps.servify"]?1:0,q=(null===(s=null===(n=null==t?void 0:t.app)||void 0===n?void 0:n.arloSmart)||void 0===s?void 0:s.email)&&(this.getEntitlemnt("206")||this.getEntitlemnt("212")||this.getEntitlemnt("213"))&&x["cloud.rbac.csc.apps.arlo"]?1:0,I=(null===(r=null===(o=null===(a=null==t?void 0:t.app)||void 0===a?void 0:a.myCommunityIQ)||void 0===o?void 0:o.subscriber)||void 0===r?void 0:r.enable)&&this.getEntitlemnt("214")&&x["cloud.rbac.csc.apps.mycommunityiq"]?1:0,y=(null===(c=null===(l=null==t?void 0:t.app)||void 0===l?void 0:l.bark)||void 0===c?void 0:c.email)&&(this.getEntitlemnt("219")||this.getEntitlemnt("220"))&&x["cloud.rbac.csc.apps.bark"]?1:0;(this.getEntitlemnt("203")||this.getEntitlemnt("205")||this.ssoService.isSmbEnabled()&&this.getEntitlemnt("218"))&&x["cloud.rbac.csc.apps.protectiq"]&&(null===(g=null===(d=null==t?void 0:t.app)||void 0===d?void 0:d.protectIQ)||void 0===g?void 0:g.subscribed)&&S++,(this.getEntitlemnt("204")||this.getEntitlemnt("205")||this.ssoService.isSmbEnabled()&&this.getEntitlemnt("218"))&&x["cloud.rbac.csc.apps.experienceiq"]&&(null===(p=null===(u=null==t?void 0:t.app)||void 0===u?void 0:u.experienceIQ)||void 0===p?void 0:p.subscribed)&&S++,$("#commandIQEmailId").text((null===(h=null==t?void 0:t.commandIQ)||void 0===h?void 0:h.fduser)?"-":(null===(v=null==t?void 0:t.commandIQ)||void 0===v?void 0:v.email)||"-"),$("#appSubscribedId").text(S+A+q+I+y!=0?S+A+q+I+y:"-"),$("#appInstalledId").text(null!=(null===(b=null==t?void 0:t.installed)||void 0===b?void 0:b.count)?null===(f=null==t?void 0:t.installed)||void 0===f?void 0:f.count:"-");let _=this.dataService.getSubscriberTabInfoData()||{};(null===(m=null==_?void 0:_.networkStatus)||void 0===m?void 0:m.appCount)||(_.networkStatus={appCount:{}}),_.networkStatus.appCount={subscriberAppCount:S+A+q+I+y,enabledAppCount:null===(Z=null==t?void 0:t.installed)||void 0===Z?void 0:Z.count},this.dataService.setSubscriberTabInfoData(_)},t=>{this.warningMessage=this.protectIqService.errorHandler(t),this.advLoading=!1}))}getEntitlemnt(t){return this.ssoService.getEntitlementsArr().includes(t)}updatedSubscriptionStatus(){this.protectIqService.subscribtionStatus.next({deviceSubscription:this.deviceSubscription,deviceStatus:this.deviceStatus,smbEnabled:this.smbEnabled})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.s),o.Y36(g.a),o.Y36(l.t6),o.Y36(d.Q))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-protect-iq-details"]],decls:39,vars:24,consts:[["class","w-100 alert alert alert-danger fade show d-flex justify-content-between align-items-center",4,"ngIf"],["id","details","role","tab","aria-labelledby","details",1,"row"],["class","loader",4,"ngIf"],[1,"col-lg-6","px-0","col-md-12","col-sm-12"],[1,"Protect-iq-table"],[1,"border-bottom"],["id","detail-settings",1,"ccl-Secondary-title"],[1,"col-12","col-lg-12","pl-1","mt-3","font-weight-bold"],[1,"col-12","col-lg-12","pl-1"],[1,"form-check","form-check-inline"],["type","radio","id","materialInline3","name","subscribed",3,"ngModel","value","disabled","ngModelChange","click"],["for","materialInline3",1,"form-check-label","mx-2"],["type","radio","id","materialInline4","name","subscribed",3,"ngModel","value","disabled","ngModelChange","click"],["for","materialInline4",1,"form-check-label","mx-2"],["type","radio","id","materialInline10","name","enabled",3,"ngModel","value","disabled","ngModelChange","click"],["for","materialInline10",1,"form-check-label","mx-2"],["type","radio","id","materialInline11","name","enabled",3,"ngModel","value","disabled","ngModelChange","click"],["for","materialInline11",1,"form-check-label","mx-2"],[1,"detail-list","mt-3","d-none"],[4,"ngIf"],["noSubScription",""],["class","col-lg-6 col-md-12 col-sm-12",4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show","d-flex","justify-content-between","align-items-center"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex","wrn-msg"],["type","button",1,"btn-default","primary","ok",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["scope","row",1,""],[1,""],[3,"ngClass"],["for","selfHealCheckbox"],["type","checkbox","id","selfHealCheckbox",3,"checked","ngModel","disabled","change","ngModelChange"],["for","selfHealCheckbox1"],["type","checkbox","id","selfHealCheckbox1",3,"checked","ngModel","disabled","change","ngModelChange"],[1,"toggleDisabled"],[1,"col-lg-6","col-md-12","col-sm-12"],[1,"flex-space-between","border-bottom"],["id","details-status",1,"ccl-Secondary-title"],["href","javascript:void(0)",3,"click"],[1,"fas","fa-sync","refreshicon"],["id","Protect-iq-status-table",1,"detail-list","detail-list-table"],["scope","row"]],template:function(t,e){1&t&&(o.YNc(0,x,7,2,"div",0),o.TgZ(1,"div",1),o.YNc(2,A,5,1,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"section"),o.TgZ(9,"div",7),o._uU(10),o.qZA(),o.TgZ(11,"div",8),o.TgZ(12,"div",9),o.TgZ(13,"input",10),o.NdJ("ngModelChange",function(t){return e.deviceSubscription=t})("click",function(){return e.toggleSubscription(!0)}),o.qZA(),o.TgZ(14,"label",11),o._uU(15),o.qZA(),o.qZA(),o.TgZ(16,"div",9),o.TgZ(17,"input",12),o.NdJ("ngModelChange",function(t){return e.deviceSubscription=t})("click",function(){return e.toggleSubscription(!1)}),o.qZA(),o.TgZ(18,"label",13),o._uU(19),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(20,"section"),o.TgZ(21,"div",7),o._uU(22),o.qZA(),o.TgZ(23,"div",8),o.TgZ(24,"div",9),o.TgZ(25,"input",14),o.NdJ("ngModelChange",function(t){return e.deviceStatus=t})("click",function(){return e.toggleEnable(!0)}),o.qZA(),o.TgZ(26,"label",15),o._uU(27),o.qZA(),o.qZA(),o.TgZ(28,"div",9),o.TgZ(29,"input",16),o.NdJ("ngModelChange",function(t){return e.deviceStatus=t})("click",function(){return e.toggleEnable(!1)}),o.qZA(),o.TgZ(30,"label",17),o._uU(31),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(32,"table",18),o.TgZ(33,"tbody"),o.YNc(34,q,9,6,"tr",19),o.YNc(35,I,9,5,"tr",19),o.YNc(36,y,1,0,"ng-template",null,20,o.W1O),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(38,_,40,16,"div",21),o.qZA()),2&t&&(o.Q6J("ngIf",e.warningMessage),o.xp6(2),o.Q6J("ngIf",e.loading||e.advLoading),o.xp6(5),o.hij(" ",e.language.Settings," "),o.xp6(3),o.hij(" ",e.language.Subscription," "),o.xp6(3),o.Q6J("ngModel",e.deviceSubscription)("value",!0)("disabled",!e.scopeFlag.configWrite||e.smbEnabled),o.xp6(2),o.hij(" ",e.language.Subscribed," "),o.xp6(2),o.Q6J("ngModel",e.deviceSubscription)("value",!1)("disabled",!e.scopeFlag.configWrite||!e.isSmartTownActivated&&!e.isEduroamEnable&&e.smbOrSmarttownEnabled||e.smbEnabled),o.xp6(2),o.hij(" ",e.language.Unsubscribed," "),o.xp6(3),o.hij(" ",e.language.SERVICE," "),o.xp6(3),o.Q6J("ngModel",e.deviceStatus)("value",!0)("disabled",!e.scopeFlag.enableWrite||!e.deviceSubscription||!e.deviceInfo||e.isSmartTownActivated||e.smbEnabled),o.xp6(2),o.hij(" ",e.language.enabled," "),o.xp6(2),o.Q6J("ngModel",e.deviceStatus)("value",!1)("disabled",!e.scopeFlag.enableWrite||!e.deviceSubscription||!e.deviceInfo||e.isSmartTownActivated||e.smbOrSmarttownEnabled||e.smbEnabled),o.xp6(2),o.hij(" ",e.language.Disabled," "),o.xp6(3),o.Q6J("ngIf",e.scopeFlag.configRead),o.xp6(1),o.Q6J("ngIf",e.scopeFlag.configRead),o.xp6(3),o.Q6J("ngIf",e.showDetail&&e.deviceStatus&&e.deviceSubscription))},directives:[n.O5,S._,S.Fj,S.JJ,S.On,n.mk,S.Wl],pipes:[n.uU],styles:[".Protect-iq-table[_ngcontent-%COMP%]{padding:0 10px;width:100%}.Protect-iq-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.flex-space-between[_ngcontent-%COMP%]{padding-bottom:0}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;padding:0}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF;line-height:24px;padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;margin-bottom:0}.detail-list[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600}.wrn-msg[_ngcontent-%COMP%]{width:85%}"]}),t})();var M=i(86640);function w(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",14),o.TgZ(1,"div",15),o._UZ(2,"img",16),o.qZA(),o._UZ(3,"div",17),o.TgZ(4,"button",18),o.NdJ("click",function(){return o.CHM(t),o.oxw().errorMessage=""}),o._uU(5),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(3),o.Q6J("innerHtml",t.errorMessage,o.oJD),o.xp6(2),o.hij(" ",t.language.OK," ")}}function O(t,e){if(1&t&&(o.TgZ(0,"div",19),o.TgZ(1,"div",20),o.TgZ(2,"div",21),o.TgZ(3,"span",22),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}function C(t,e){if(1&t&&o._uU(0),2&t){const t=e.item,i=o.oxw();o.hij(" ",i.language[t.label]||t.label," ")}}function P(t,e){if(1&t&&o._uU(0),2&t){const t=e.item,i=o.oxw();o.hij(" ",i.language[t.label]," ")}}function k(t,e){1&t&&(o.TgZ(0,"span",40),o._uU(1,"+"),o.qZA())}function E(t,e){if(1&t&&(o.TgZ(0,"span",41),o._uU(1,"-"),o.qZA()),2&t){const t=o.oxw().index;o.uIk("id","symbolMinus"+t)}}function U(t,e){if(1&t&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&t){const t=o.oxw().$implicit;o.xp6(1),o.AsE(" ",null==t||null==t.securityAlarm?null:t.securityAlarm.message," was ",null==t||null==t.securityAlarm?null:t.securityAlarm.action,"ED ")}}function D(t,e){if(1&t&&o._uU(0),2&t){const t=o.oxw().$implicit;o.AsE(" ",null==t||null==t.securityAlarm?null:t.securityAlarm.url," was ",null==t||null==t.securityAlarm?null:t.securityAlarm.action,"ED ")}}function L(t,e){if(1&t&&(o.TgZ(0,"div",42),o.TgZ(1,"table",43),o.TgZ(2,"tbody"),o.TgZ(3,"tr"),o._UZ(4,"th",9),o.TgZ(5,"th",44),o.TgZ(6,"table",45),o.TgZ(7,"tbody"),o.TgZ(8,"tr"),o.TgZ(9,"th",46),o._uU(10),o.qZA(),o.TgZ(11,"td",47),o._uU(12),o.ALo(13,"date"),o.qZA(),o.qZA(),o.TgZ(14,"tr"),o.TgZ(15,"th",46),o._uU(16),o.qZA(),o.TgZ(17,"td",47),o._uU(18),o.qZA(),o.qZA(),o.TgZ(19,"tr"),o.TgZ(20,"th",48),o._uU(21),o.qZA(),o.TgZ(22,"td"),o._uU(23),o.qZA(),o.qZA(),o.TgZ(24,"tr"),o.TgZ(25,"th",48),o._uU(26),o.qZA(),o.TgZ(27,"td"),o._uU(28),o.qZA(),o.qZA(),o.TgZ(29,"tr"),o.TgZ(30,"th",48),o._uU(31),o.qZA(),o.TgZ(32,"td"),o._uU(33),o.qZA(),o.qZA(),o.TgZ(34,"tr"),o.TgZ(35,"th",48),o._uU(36,"URL:"),o.qZA(),o.TgZ(37,"td"),o._uU(38),o.qZA(),o.qZA(),o.TgZ(39,"tr"),o.TgZ(40,"th",48),o._uU(41,"File:"),o.qZA(),o.TgZ(42,"td"),o._uU(43),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw(),e=t.index,i=t.$implicit,n=o.oxw();o.Q6J("id","collapseA"+e),o.xp6(10),o.hij(" ",n.language.Time," : "),o.xp6(2),o.hij(" ",o.xi3(13,13,i.timestamp,"MMM dd yyyy,hh:mm:s a")," "),o.xp6(4),o.hij(" ",n.language.Type," : "),o.xp6(2),o.hij(" ",n.getAlertLabel(null==i||null==i.securityAlarm?null:i.securityAlarm.type)," "),o.xp6(3),o.hij(" ",n.language.Source_IP," : "),o.xp6(2),o.hij(" ",(null==i||null==i.securityAlarm?null:i.securityAlarm.sourceIp)||"-"," "),o.xp6(3),o.hij(" ",n.language.Action," : "),o.xp6(2),o.hij(" ",(null==i||null==i.securityAlarm?null:i.securityAlarm.action)||"-"," "),o.xp6(3),o.hij(" ",n.language["Client Device"]," : "),o.xp6(2),o.hij(" ",(null==i||null==i.securityAlarm?null:i.securityAlarm.targetStaName)||"-"," "),o.xp6(5),o.hij(" ",(null==i||null==i.securityAlarm?null:i.securityAlarm.url)||"-"," "),o.xp6(5),o.hij(" ",(null==i||null==i.securityAlarm?null:i.securityAlarm.file)||"-"," ")}}function J(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td",23),o.TgZ(2,"div",24),o.TgZ(3,"div",25),o.TgZ(4,"div",26),o.TgZ(5,"div",27),o.TgZ(6,"ul",28),o.NdJ("click",function(){const e=o.CHM(t).index,i=o.oxw();return i.isExpanded[e]=!i.isExpanded[e]}),o.TgZ(7,"li",29),o.TgZ(8,"div",30),o.TgZ(9,"span",31),o.YNc(10,k,2,0,"span",32),o.YNc(11,E,2,1,"ng-template",null,33,o.W1O),o.qZA(),o._uU(13),o.ALo(14,"date"),o.qZA(),o.qZA(),o.TgZ(15,"li",34),o.YNc(16,U,2,2,"div",35),o.YNc(17,D,1,2,"ng-template",null,36,o.W1O),o.qZA(),o.TgZ(19,"li",37),o.TgZ(20,"button",38),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw().addToTrustList(e)}),o._uU(21),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(22,L,44,16,"div",39),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit,i=e.index,n=o.MAs(12),s=o.MAs(18),a=o.oxw();o.xp6(10),o.Q6J("ngIf",!a.isExpanded[i])("ngIfElse",n),o.xp6(3),o.hij(" ",o.xi3(14,8,t.timestamp,"MMM dd yyyy, hh:mm:s a")," "),o.xp6(3),o.Q6J("ngIf","WG"!=(null==t||null==t.securityAlarm?null:t.securityAlarm.type))("ngIfElse",s),o.xp6(4),o.Q6J("id","whitelabelbtn"+i),o.xp6(1),o.hij(" ",a.language.Add_To_trust," "),o.xp6(1),o.Q6J("ngIf",a.isExpanded[i])}}function Q(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td",49),o._uU(2),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.hij(" ",t.language["No data available"]," ")}}let N=(()=>{class t{constructor(t,e,i){this.translateService=t,this.ssoAuthService=e,this.protectIqService=i,this.alertTypes=[{label:"All",value:"All"},{label:"Intrusion",value:"IPS"},{label:"Virus",value:"AV"},{label:"Web Threat",value:"WG"}],this.loading=!0,this.isError=!0,this.userId="",this.errorMessage="",this.alerts=[],this.isExpanded=[]}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubscription=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.selectedType="All",this.userId=history.state.userId,this.loadData()}loadData(){this.loading=!0,this.isError=!1,this.alerts=[],this.isExpanded=[],this.protectIqService.getAlerts(this.userId,this.selectedType).subscribe(t=>{var e;this.loading=!1,this.alerts=(null===(e=null==t?void 0:t.body)||void 0===e?void 0:e.datas)||[],this.alerts.forEach(()=>{this.isExpanded.push(!1)})},t=>{404!=(null==t?void 0:t.status)&&this.ssoAuthService.pageErrorHandle(t),this.loading=!1})}addToTrustList(t){var e,i,n,s;this.loading=!0;let a={userId:this.userId,type:null===(e=null==t?void 0:t.securityAlarm)||void 0===e?void 0:e.type,signatureId:null===(i=null==t?void 0:t.securityAlarm)||void 0===i?void 0:i.signatureId,url:null===(n=null==t?void 0:t.securityAlarm)||void 0===n?void 0:n.url,message:null===(s=null==t?void 0:t.securityAlarm)||void 0===s?void 0:s.message,notifId:null==t?void 0:t.notifId};this.protectIqService.addWhitelistDetails(a).subscribe(()=>{this.loadData()},t=>{this.ssoAuthService.pageErrorHandle(t),this.loading=!1})}getAlertLabel(t){var e,i;return null!==(i=null===(e=this.alertTypes.find(e=>e.value==t))||void 0===e?void 0:e.label)&&void 0!==i?i:"-"}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.s),o.Y36(l.t6),o.Y36(g.a))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-protect-iq-alerts"]],decls:19,vars:9,consts:[["id","alert","role","tab","aria-labelledby","alert",1,"col-12","px-0"],["class","w-100 alert alert alert-danger fade show d-flex justify-content-between align-items-center",4,"ngIf"],["class","loader",4,"ngIf"],[1,"alerts"],[1,"w-20","ml-auto"],["name","alert","bindLabel","label","bindValue","value",1,"my-2",3,"ngModel","items","searchable","ngModelChange","change"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"detail-list","skip-device"],[1,"w-30"],["id","alert-occurred",1,"f-size-16","f-w-600","px-2"],["id","alert-details",1,"f-size-16","f-w-600","px-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show","d-flex","justify-content-between","align-items-center"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex","wrn-msg",3,"innerHtml"],["type","button",1,"btn-default","primary","ok",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["colspan","3"],[1,"protect-iq-accordion"],["id","accordion"],[1,"card"],[1,"row","mb-0"],[1,"alert-ul",3,"click"],[1,"occurr-date"],[1,"alerts-info"],[1,"plus-minus-toggle","mr-2"],["class","plus",4,"ngIf","ngIfElse"],["expanded",""],[1,"alert-details"],[4,"ngIf","ngIfElse"],["showUrl",""],[1,"alert-btn","opacityCheck"],[1,"btn","default-btn",3,"id","click"],[3,"id",4,"ngIf"],[1,"plus"],[1,"minus"],[3,"id"],[1,"table","table-borderless"],[1,"w-60","p-0"],[1,"detail-list","alerts-table"],["scope","row",1,""],[1,""],["scope","row"],["colspan","5",1,"no-data-available"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,w,6,2,"div",1),o.YNc(2,O,5,1,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"ng-select",5),o.NdJ("ngModelChange",function(t){return e.selectedType=t})("change",function(){return e.loadData()}),o.YNc(6,C,1,1,"ng-template",6),o.YNc(7,P,1,1,"ng-template",7),o.qZA(),o.qZA(),o.TgZ(8,"table",8),o.TgZ(9,"thead"),o.TgZ(10,"th",9),o.TgZ(11,"div",10),o._uU(12),o.qZA(),o.qZA(),o.TgZ(13,"th",9),o.TgZ(14,"div",11),o._uU(15),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"tbody"),o.YNc(17,J,23,11,"tr",12),o.YNc(18,Q,3,1,"tr",13),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",e.errorMessage),o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(3),o.Q6J("ngModel",e.selectedType)("items",e.alertTypes)("searchable",!1),o.xp6(7),o.Oqu(e.language.Occurred),o.xp6(3),o.Oqu(e.language.Alert_Details),o.xp6(2),o.Q6J("ngForOf",e.alerts),o.xp6(1),o.Q6J("ngIf",0==e.alerts.length))},directives:[n.O5,M.w9,S.JJ,S.On,M.bb,M.Z2,n.sg],pipes:[n.uU],styles:['@charset "UTF-8";.alerts[_ngcontent-%COMP%]{padding:0 10px;width:100%}.alerts[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;padding:0}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF;line-height:24px;padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;margin-bottom:0}.detail-list[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600}.skip-device[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.protect-iq-accordion[_ngcontent-%COMP%]{width:100%}.protect-iq-accordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none}.protect-iq-accordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#fff;box-shadow:none;border:none}.accordion[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:after{font-family:"FontAwesome";content:"\\f068";float:right}.accordion[_ngcontent-%COMP%]   .card-header.collapsed[_ngcontent-%COMP%]:after{content:"\\f067"}.card-header[_ngcontent-%COMP%]   .ccl-accordion-icon[_ngcontent-%COMP%]:after{content:"\\f078";font-family:FontAwesome;font-style:normal;font-weight:normal;text-decoration:inherit;color:#9e9e9e;font-size:18px;padding-right:.5em;position:absolute;top:10px;left:50px}.card-header.collapsed[_ngcontent-%COMP%]   .ccl-accordion-icon[_ngcontent-%COMP%]:after{transform:scaleY(-1)}.alert-ul[_ngcontent-%COMP%]{font-size:14px;padding:10px}.alert-ul[_ngcontent-%COMP%]   .alert-details[_ngcontent-%COMP%]{width:50%;word-break:break-all}.alerts-info[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.plus-minus-toggle[_ngcontent-%COMP%]{border:2px solid #000;width:18px;height:18px;display:flex;align-items:center;justify-content:center;border-radius:2px;font-size:20px;font-weight:600}.alert-btn.opacityCheck[_ngcontent-%COMP%]{opacity:1!important}.alerts-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 0;font-size:14px}.alerts-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;width:70%;word-break:break-all;font-size:14px}.alerts-table[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]{box-sizing:border-box!important;font-weight:normal!important;font-size:14px!important}.no-data-available[_ngcontent-%COMP%]{padding:15px;text-align:center}.wrn-msg[_ngcontent-%COMP%]{width:85%}']}),t})();class F{constructor(){this.display=!0,this.state="inactive"}}function j(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"li",3),o.TgZ(1,"a",4),o.NdJ("click",function(){o.CHM(t);const e=o.oxw().$implicit;return o.oxw().tabSelectedEvent(e.value)}),o._uU(2),o.qZA(),o.qZA()}if(2&t){const t=o.oxw().$implicit,e=o.oxw();o.xp6(1),o.Tol("nav-link small "+t.state),o.Q6J("id",t.value),o.xp6(1),o.hij(" ",e.language[t.label]," ")}}function Y(t,e){if(1&t&&(o.ynx(0),o.YNc(1,j,3,4,"li",2),o.BQk()),2&t){const t=e.$implicit;o.xp6(1),o.Q6J("ngIf",t.display)}}let H=(()=>{class t{constructor(t){this.translateService=t,this.menus=[],this.activeTab=new o.vpe}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubscription=this.translateService.selectedLanguage.subscribe(t=>{this.language=t,this.initMenus()}),this.initMenus()}ngOnDestroy(){this.languageSubscription&&this.languageSubscription.unsubscribe()}initMenus(){this.menus=this.menus.map(t=>{var e;let i=new F;return i.label=t.label,i.value=t.value,t.hasOwnProperty("display")&&(i.display=null!==(e=t.display)&&void 0!==e&&e),t.state&&(i.state=t.state),i})}tabSelectedEvent(t){this.activeTab.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.s))},t.\u0275cmp=o.Xpm({type:t,selectors:[["top-nav-bar"]],inputs:{menus:"menus"},outputs:{activeTab:"activeTab"},decls:2,vars:1,consts:[["id","tabs",1,"nav","nav-tabs","top-nav-border"],[4,"ngFor","ngForOf"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-toggle","tab",1,"nav-link",3,"id","click"]],template:function(t,e){1&t&&(o.TgZ(0,"ul",0),o.YNc(1,Y,2,1,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngForOf",e.menus))},directives:[n.sg,n.O5],styles:["#tabs[_ngcontent-%COMP%]{margin-bottom:24px!important}.top-nav-border[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc!important;width:-moz-fit-content;width:fit-content}.nav-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-bottom:5px;font-size:14px;font-weight:300;line-height:21px}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{margin-bottom:1px;border-bottom:2px solid transparent}.nav-tabs[_ngcontent-%COMP%]   a.nav-link.active[_ngcontent-%COMP%]{font-size:14px!important;font-weight:600!important;border-bottom:2px solid #0279ff!important}.nav-tabs[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]:hover{margin-bottom:1px!important;border-bottom:2px solid #0279ff!important}"]}),t})();var W=i(60943);function V(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"top-nav-bar",16),o.NdJ("activeTab",function(e){return o.CHM(t),o.oxw().selectedTab(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("menus",t.menus)}}function z(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",17),o.TgZ(1,"div",18),o._UZ(2,"img",19),o.qZA(),o.TgZ(3,"div",20),o._uU(4),o.qZA(),o.TgZ(5,"button",21),o.NdJ("click",function(){return o.CHM(t),o.oxw().warningMessage=""}),o._uU(6),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language[t.warningMessage]||t.warningMessage),o.xp6(2),o.Oqu(t.language.OK)}}function B(t,e){if(1&t&&(o.TgZ(0,"div",22),o.TgZ(1,"div",23),o.TgZ(2,"div",24),o.TgZ(3,"span",25),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}function R(t,e){if(1&t&&o._uU(0),2&t){const t=e.item,i=o.oxw();o.hij(" ",i.language[t.viewValue]||t.viewValue," ")}}function G(t,e){if(1&t&&o._uU(0),2&t){const t=e.item,i=o.oxw();o.hij(" ",i.language[t.viewValue]," ")}}function X(t,e){if(1&t&&(o.TgZ(0,"span",39),o._uU(1," + "),o.qZA()),2&t){const t=o.oxw().index;o.uIk("id","symbolPlus"+t)}}function K(t,e){if(1&t&&(o.TgZ(0,"span",40),o._uU(1,"-"),o.qZA()),2&t){const t=o.oxw().index;o.uIk("id","symbolMinus"+t)}}function tt(t,e){if(1&t&&(o.TgZ(0,"div",41),o.TgZ(1,"table",42),o.TgZ(2,"tbody"),o.TgZ(3,"tr"),o.TgZ(4,"th",43),o.TgZ(5,"table",44),o.TgZ(6,"tbody"),o.TgZ(7,"tr"),o.TgZ(8,"th",45),o._uU(9),o.qZA(),o.TgZ(10,"td",10),o._uU(11),o.ALo(12,"date"),o.qZA(),o.qZA(),o.TgZ(13,"tr"),o.TgZ(14,"th",45),o._uU(15),o.qZA(),o.TgZ(16,"td",10),o._uU(17),o.ALo(18,"alertType"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw(),e=t.index,i=t.$implicit,n=o.oxw();o.uIk("id","collapseOne_"+e),o.xp6(9),o.hij(" ",n.language.Time," : "),o.xp6(2),o.hij(" ",o.xi3(12,5,i.created,"MMM dd yyyy, hh:mm:sa")," "),o.xp6(4),o.hij(" ",n.language.Type," : "),o.xp6(2),o.hij(" ",o.lcZ(18,8,i.type)," ")}}function et(t,e){if(1&t&&(o._uU(0),o.ALo(1,"alertType")),2&t){const t=o.oxw().$implicit,e=o.oxw();o.AsE(" ",e.language["No Data is available for "]," ",o.lcZ(1,2,t.type)," type ")}}function it(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"tr",26),o.TgZ(2,"td",27),o.TgZ(3,"ul",28),o.NdJ("click",function(){const e=o.CHM(t).index,i=o.oxw();return i.isExpanded[e]=!i.isExpanded[e]}),o.TgZ(4,"li",29),o.TgZ(5,"div",30),o.TgZ(6,"span",31),o.YNc(7,X,2,1,"span",32),o.YNc(8,K,2,1,"ng-template",null,33,o.W1O),o.qZA(),o.TgZ(10,"div",34),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"li",35),o.TgZ(13,"button",36),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw().deleteWhiteListItem(e.signatureId)}),o._uU(14),o.qZA(),o.qZA(),o.qZA(),o.YNc(15,tt,19,10,"div",37),o.qZA(),o.qZA(),o.YNc(16,et,2,4,"ng-template",null,38,o.W1O),o.BQk()}if(2&t){const t=e.$implicit,i=e.index,n=o.MAs(9),s=o.oxw();o.xp6(1),o.uIk("id","accordion_"+i),o.xp6(6),o.Q6J("ngIf",!s.isExpanded[i])("ngIfElse",n),o.xp6(4),o.hij(" ",t.msg," "),o.xp6(2),o.Q6J("id","whitelabelbtn"+i),o.xp6(1),o.hij(" ",s.language.delete," "),o.xp6(1),o.Q6J("ngIf",s.isExpanded[i])}}function nt(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td",46),o._uU(2),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.hij(" ",t.language["No data available"]," ")}}let st=(()=>{class t{constructor(t,e,i){this.translateService=t,this.protectIqservices=e,this.ssoService=i,this.menus=[{label:"Primary Network",value:"primary-network",state:"active"},{label:"Staff Network",value:"staff-network"},{label:"Point of Sale",value:"point-of-sale"},{label:"Customer Portal",value:"customer-portal"}],this.alerts=[{value:"All",viewValue:"All"},{value:"IPS",viewValue:"Intrusion"},{value:"AV",viewValue:"Virus"},{value:"WG",viewValue:"Web Threat"}],this.loading=!0,this.isLatestVersion=!1,this.userId="",this.roleId=2,this.activeTab="primary-network",this.selectedType="All",this.isExpanded=[],this.isExpandedSkipDevice=[]}ngOnInit(){var t,e;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.userId=null===(t=history.state)||void 0===t?void 0:t.userId,this.isLatestVersion=null===(e=history.state)||void 0===e?void 0:e.isLatestVersion,this.showTrustList()}showTrustList(t=!1){this.isExpanded=[],this.loading=!0,this.trustListDetails={whitelist:[]},t&&(this.selectedType="All"),this.protectIqservices.getTrustList(this.selectedType,this.userId,this.activeTab,this.roleId).subscribe(t=>{this.loading=!1,this.trustListDetails=null==t?void 0:t.body,this.trustListDetails.whitelist.forEach(()=>{this.isExpanded.push(!1)})},t=>{this.loading=!1,404!=(null==t?void 0:t.status)&&(this.warningMessage=this.protectIqservices.errorHandler(t))})}deleteWhiteListItem(t){this.loading=!0,this.protectIqservices.removeItemInTrustList(t,this.userId,this.ssoService.isSmbEnabled()?this.activeTab:"",this.ssoService.isSmbEnabled()?this.roleId:"").subscribe(()=>{this.showTrustList()},t=>{this.loading=!1,this.warningMessage=this.protectIqservices.errorHandler(t)})}selectedTab(t){this.activeTab=t,this.selectedType="All","primary-network"==this.activeTab&&(this.roleId=1),"staff-network"==this.activeTab&&(this.roleId=2),"customer-portal"==this.activeTab&&(this.roleId=3),"point-of-sale"==this.activeTab&&(this.roleId=4),this.showTrustList()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.s),o.Y36(g.a),o.Y36(l.t6))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-protect-iq-trusted-list"]],decls:22,vars:10,consts:[[3,"menus","activeTab",4,"ngIf"],["class","w-100 alert alert alert-danger fade show d-flex justify-content-between align-items-center",4,"ngIf"],["class","loader",4,"ngIf"],["id","trusted_List","role","tab","aria-labelledby","alert",1,"col-12","px-0"],[1,"trusted_list_table","px-0"],[1,"ml-auto","w-20"],["name","alert","bindLabel","viewValue","bindValue","value",1,"my-2",3,"ngModel","items","searchable","ngModelChange","change"],["ng-label-tmp",""],["ng-option-tmp",""],["id","protect-iq-trusted-list",1,"detail-list","skip-device"],[1,""],["id","trusted-head-name",1,"f-size-16","f-w-600","px-2"],[1,"w-40"],["id","trustedList",1,"f-size-16","f-w-600","px-2"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"menus","activeTab"],[1,"w-100","alert","alert","alert-danger","fade","show","d-flex","justify-content-between","align-items-center"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex","wrn-msg"],["type","button",1,"btn-default","primary","ok",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["id","accordionTable",1,"accordion-toggle","collapsed"],["colspan","3"],[1,"px-0","dropdown-toggle","alert-ul","justify-content-between",3,"click"],[1,"occurr-date"],[1,"Protect-iq-info"],[1,"plus-minus-toggle","mr-2"],["class","plus",4,"ngIf","ngIfElse"],["expanded",""],[1,"trusted-title-info"],[1,"alert-btn","opacityCheck"],[1,"btn","btn-delete",3,"id","click"],["class","in p-3 w-40 ml-auto",4,"ngIf"],["showInfoMsg",""],[1,"plus"],[1,"minus"],[1,"in","p-3","w-40","ml-auto"],[1,"table","table-borderless"],[1,"w-60","p-0"],[1,"detail-list","protectiq-trusted-list-table"],["scope","row",1,""],["colspan","5",1,"no-data-available"]],template:function(t,e){1&t&&(o.YNc(0,V,1,1,"top-nav-bar",0),o.YNc(1,z,7,2,"div",1),o.TgZ(2,"section"),o.YNc(3,B,5,1,"div",2),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"ng-select",6),o.NdJ("ngModelChange",function(t){return e.selectedType=t})("change",function(){return e.warningMessage="",e.showTrustList()}),o.YNc(8,R,1,1,"ng-template",7),o.YNc(9,G,1,1,"ng-template",8),o.qZA(),o.qZA(),o.TgZ(10,"table",9),o.TgZ(11,"thead"),o.TgZ(12,"tr"),o.TgZ(13,"th",10),o.TgZ(14,"div",11),o._uU(15),o.qZA(),o.qZA(),o.TgZ(16,"th",12),o.TgZ(17,"div",13),o._uU(18),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(19,"tbody"),o.YNc(20,it,18,7,"ng-container",14),o.YNc(21,nt,3,1,"tr",15),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Q6J("ngIf",e.isLatestVersion),o.xp6(1),o.Q6J("ngIf",e.warningMessage),o.xp6(2),o.Q6J("ngIf",e.loading),o.xp6(4),o.Q6J("ngModel",e.selectedType)("items",e.alerts)("searchable",!1),o.xp6(8),o.hij("",e.language.Name," "),o.xp6(3),o.hij("",e.language.Trusted_List," "),o.xp6(2),o.Q6J("ngForOf",e.trustListDetails.whitelist),o.xp6(1),o.Q6J("ngIf",0==e.trustListDetails.whitelist))},directives:[n.O5,M.w9,S.JJ,S.On,M.bb,M.Z2,n.sg,H],pipes:[n.uU,W.P],styles:[".trusted_list_table[_ngcontent-%COMP%]{padding:0 10px;width:100%}.trusted_list_table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;padding:0}.detail-list[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF;line-height:24px;padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px}.list-ul[_ngcontent-%COMP%]{font-size:16px;padding:10px}.list-ul[_ngcontent-%COMP%]   .alert-details[_ngcontent-%COMP%]{width:50%;word-break:break-all}.Protect-iq-info[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.plus-minus-toggle[_ngcontent-%COMP%]{border:2px solid #000;width:18px;height:18px;display:flex;align-items:center;justify-content:center;border-radius:2px;font-size:20px;font-weight:600}.list-btn.opacityCheck[_ngcontent-%COMP%]{opacity:1!important}.protectiq-trusted-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 0;font-size:14px}.protectiq-trusted-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0;font-size:14px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.btn-delete[_ngcontent-%COMP%]{color:#000}.btn-delete[_ngcontent-%COMP%]:hover, .btn-delete[_ngcontent-%COMP%]:focus, .btn-delete[_ngcontent-%COMP%]:active{background:#0279ff;color:#fff;box-shadow:none!important;background-color:1px solid transparent}.no-data-available[_ngcontent-%COMP%]{padding:15px;text-align:center}.alert-ul[_ngcontent-%COMP%]:hover   li.alert-btn[_ngcontent-%COMP%]{visibility:visible;opacity:1}.trusted-title-info[_ngcontent-%COMP%]{word-break:break-all;white-space:break-spaces;min-width:600px}.wrn-msg[_ngcontent-%COMP%]{width:85%}"]}),t})();var at=i(86911),ot=i(35132);function rt(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"top-nav-bar",13),o.NdJ("activeTab",function(e){return o.CHM(t),o.oxw().selectedTab(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("menus",t.menus)}}function lt(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",14),o.TgZ(1,"div",15),o._UZ(2,"img",16),o.qZA(),o._UZ(3,"div",17),o.TgZ(4,"button",18),o.NdJ("click",function(){return o.CHM(t),o.oxw().errorMessage=""}),o._uU(5),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(3),o.Q6J("innerHtml",t.errorMessage,o.oJD),o.xp6(2),o.hij(" ",t.language.OK," ")}}function ct(t,e){if(1&t&&(o.TgZ(0,"div",19),o.TgZ(1,"div",20),o.TgZ(2,"div",21),o.TgZ(3,"span",22),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}function dt(t,e){1&t&&(o.TgZ(0,"span"),o._uU(1,"+"),o.qZA())}function gt(t,e){if(1&t&&(o.TgZ(0,"span"),o._uU(1,"-"),o.qZA()),2&t){const t=o.oxw().index;o.uIk("id","symbolMinus"+t)}}function ut(t,e){if(1&t&&(o.TgZ(0,"td",49),o._uU(1),o.qZA()),2&t){const t=o.oxw(4);o.xp6(1),o.hij(" ",t.language.Scanning," ")}}function pt(t,e){if(1&t&&(o.TgZ(0,"td",50),o._uU(1),o.qZA()),2&t){const t=o.oxw(4);o.xp6(1),o.hij(" ",t.language.Skipping," ")}}function ht(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",51),o.TgZ(1,"button",52),o.NdJ("click",function(){o.CHM(t);const e=o.oxw().$implicit;return o.oxw(3).toggleSkipStatus(e.deviceId,e.skip)}),o._uU(2),o.qZA(),o.qZA()}if(2&t){const t=o.oxw(4);o.xp6(1),o.Q6J("disabled",!t.scopeFlag.configWrite)("ngClass",t.scopeFlag.configWrite?"":"toggleDisabled"),o.xp6(1),o.hij(" ",t.language.Skipping," ")}}function vt(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"td",46),o.TgZ(1,"div",51),o.TgZ(2,"button",53),o.NdJ("click",function(){o.CHM(t);const e=o.oxw().$implicit;return o.oxw(3).toggleSkipStatus(e.deviceId,e.skip)}),o._uU(3),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw(4);o.xp6(2),o.Q6J("disabled",!t.scopeFlag.configWrite)("ngClass",t.scopeFlag.configWrite?"":"toggleDisabled"),o.xp6(1),o.hij(" ",t.language.Scanning," ")}}function bt(t,e){if(1&t&&(o.TgZ(0,"tbody"),o.TgZ(1,"tr"),o.TgZ(2,"th",39),o.TgZ(3,"div",40),o.TgZ(4,"h6",41),o._UZ(5,"img",42),o.ALo(6,"catogryImg"),o.TgZ(7,"span",43),o._uU(8),o.qZA(),o.qZA(),o.TgZ(9,"p"),o._uU(10),o.qZA(),o.qZA(),o.qZA(),o.YNc(11,ut,2,1,"td",44),o.YNc(12,pt,2,1,"ng-template",null,45,o.W1O),o.TgZ(14,"td",46),o.YNc(15,ht,3,3,"div",47),o.qZA(),o.YNc(16,vt,4,3,"ng-template",null,48,o.W1O),o.qZA(),o.qZA()),2&t){const t=e.$implicit,i=o.MAs(13),n=o.MAs(17),s=o.oxw(2).$implicit;o.xp6(5),o.Q6J("src",o.lcZ(6,7,s.key),o.LSH),o.xp6(3),o.Oqu(t.name),o.xp6(2),o.Oqu(t.mac),o.xp6(1),o.Q6J("ngIf",!t.skip)("ngIfElse",i),o.xp6(4),o.Q6J("ngIf",!t.skip)("ngIfElse",n)}}function ft(t,e){if(1&t&&(o.TgZ(0,"div",37),o.TgZ(1,"table",38),o.YNc(2,bt,18,9,"tbody",12),o.qZA(),o.qZA()),2&t){const t=o.oxw(),e=t.$implicit;o.Q6J("id","collapse"+t.index),o.xp6(2),o.Q6J("ngForOf",e.value)}}function mt(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"tbody"),o.TgZ(2,"tr",23),o.TgZ(3,"td",24),o.TgZ(4,"div",25),o.TgZ(5,"div",26),o.TgZ(6,"div",27),o.TgZ(7,"div",28),o.NdJ("click",function(){const e=o.CHM(t).index,i=o.oxw();return i.isExpandedSkipDevice[e]=!i.isExpandedSkipDevice[e]}),o.TgZ(8,"div",29),o.TgZ(9,"div",30),o.TgZ(10,"span",31),o.YNc(11,dt,2,0,"span",32),o.YNc(12,gt,2,1,"ng-template",null,33,o.W1O),o.qZA(),o.TgZ(14,"span",34),o._UZ(15,"img",35),o.ALo(16,"catogryImg"),o.qZA(),o._uU(17),o.ALo(18,"catogry"),o.qZA(),o.qZA(),o.qZA(),o.YNc(19,ft,3,2,"div",36),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.BQk()}if(2&t){const t=e.$implicit,i=e.index,n=o.MAs(13),s=o.oxw();o.xp6(2),o.uIk("id","accordion_"+i),o.xp6(9),o.Q6J("ngIf",!s.isExpandedSkipDevice[i])("ngIfElse",n),o.xp6(4),o.Q6J("src",o.lcZ(16,6,t.key),o.LSH),o.xp6(2),o.hij(" ",o.lcZ(18,8,t.key)," "),o.xp6(2),o.Q6J("ngIf",s.isExpandedSkipDevice[i])}}function Zt(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"top-nav-bar",11),o.NdJ("activeTab",function(e){return o.CHM(t),o.oxw().selectedTab(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("menus",t.menus)}}function St(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",12),o.TgZ(1,"div",13),o._UZ(2,"img",14),o.qZA(),o._UZ(3,"div",15),o.TgZ(4,"button",16),o.NdJ("click",function(){return o.CHM(t),o.oxw().errorMessage=""}),o._uU(5),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(3),o.Q6J("innerHtml",t.errorMessage,o.oJD),o.xp6(2),o.hij(" ",t.language.OK," ")}}function xt(t,e){if(1&t&&(o.TgZ(0,"div",17),o.TgZ(1,"div",18),o.TgZ(2,"div",19),o.TgZ(3,"span",20),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}const At=[{path:"",component:f,children:[{path:"",redirectTo:"details"},{path:"details",component:T},{path:"alerts",component:N},{path:"trusted-list",component:st},{path:"skipped-devices",component:(()=>{class t{constructor(t,e){this.translateService=t,this.protectIqService=e,this.loading=!0,this.isLatestVersion=!1,this.menus=[{label:"Primary Network",value:"primary-network",state:"active"}],this.scopeFlag={configWrite:!0},this.errorMessage="",this.skipDevicesDetails=[],this.isExpandedSkipDevice=[]}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubscription=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.scopeFlag.configWrite=history.state.configWrite,this.userId=history.state.userId,this.isLatestVersion=history.state.isLatestVersion,this.loadData()}loadData(t=!0){this.loading=!0,t&&(this.isExpandedSkipDevice=[]),this.protectIqService.getSkipList(this.userId).subscribe(t=>{this.loading=!1,this.skipDevicesDetails=t,Object.keys(this.skipDevicesDetails).forEach(()=>{this.isExpandedSkipDevice.push(!1)})},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}toggleSkipStatus(t,e){this.loading=!0,this.protectIqService.updateSkipStatus({userId:this.userId,deviceId:t,skip:!e}).subscribe(()=>{this.loadData(!1)},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}toggleDevicesSkipStatus(t){this.loading=!0,this.protectIqService.setAllSkipStatus({userId:this.userId,skip:t}).subscribe(()=>{this.loadData(!1)},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}selectedTab(t){this.loadData()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.s),o.Y36(g.a))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-protect-iq-skipped-devices"]],decls:21,vars:14,consts:[[3,"menus","activeTab",4,"ngIf"],["id","skipped-devices",1,"col-12","px-0"],["class","w-100 alert alert alert-danger fade show d-flex justify-content-between align-items-center",4,"ngIf"],["class","loader",4,"ngIf"],[1,"skipped-devices"],["type","button","id","skip-all",1,"btn","btn-primary","py-1","mr-3",3,"disabled","ngClass","click"],["type","button","id","scan-all",1,"btn","btn-primary","py-1",3,"disabled","ngClass","click"],[1,"detail-list","skip-device","mt-4"],[1,"w-40"],[1,"f-size-16","f-w-600","px-2"],[1,"w-50"],[1,"w-10"],[4,"ngFor","ngForOf"],[3,"menus","activeTab"],[1,"w-100","alert","alert","alert-danger","fade","show","d-flex","justify-content-between","align-items-center"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex","wrn-msg",3,"innerHtml"],["type","button",1,"btn-default","primary","ok",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["id","accordionTable",1,"accordion-toggle","collapsed"],["colspan","3"],[1,"protect-iq-accordion"],["id","accordion"],[1,""],[1,"dropdown-toggle","align-middle",3,"click"],[1,"mb-0"],[1,"device-info"],[1,"plus-minus-toggle"],[4,"ngIf","ngIfElse"],["expanded",""],[1,"lap-icon"],["alt","",3,"src"],["aria-labelledby","headingThree","data-parent","#accordion",3,"id",4,"ngIf"],["aria-labelledby","headingThree","data-parent","#accordion",3,"id"],[1,"table","device-detail","table-borderless","skipped-devices-table"],["scope","row",1,"w-40"],[1,"about-device"],[1,"d-flex","align-items-center"],["alt","",2,"width","25px","height","25px",3,"src"],[1,"text-break","ml-1"],["class","w-50 align-middle pl-2",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"w-10","align-middle","pr-1"],["class","skip-sec",4,"ngIf","ngIfElse"],["checkSkipping",""],[1,"w-50","align-middle","pl-2"],[1,"w-50","align-middle"],[1,"skip-sec"],["type","button",1,"btn-default","primary",3,"disabled","ngClass","click"],["type","button",1,"btn-default","primary","skip-btn",3,"disabled","ngClass","click"]],template:function(t,e){1&t&&(o.YNc(0,rt,1,1,"top-nav-bar",0),o.TgZ(1,"div",1),o.YNc(2,lt,6,2,"div",2),o.YNc(3,ct,5,1,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div"),o.TgZ(6,"button",5),o.NdJ("click",function(){return e.toggleDevicesSkipStatus(!0)}),o._uU(7),o.qZA(),o.TgZ(8,"button",6),o.NdJ("click",function(){return e.toggleDevicesSkipStatus(!1)}),o._uU(9),o.qZA(),o.qZA(),o.TgZ(10,"table",7),o.TgZ(11,"thead"),o.TgZ(12,"th",8),o.TgZ(13,"div",9),o._uU(14),o.qZA(),o.qZA(),o.TgZ(15,"th",10),o.TgZ(16,"div",9),o._uU(17),o.qZA(),o.qZA(),o._UZ(18,"th",11),o.qZA(),o.YNc(19,mt,20,10,"ng-container",12),o.ALo(20,"keyvalue"),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Q6J("ngIf",e.isLatestVersion),o.xp6(2),o.Q6J("ngIf",e.errorMessage),o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(3),o.Q6J("disabled",!e.scopeFlag.configWrite)("ngClass",e.scopeFlag.configWrite?"":"toggleDisabled"),o.xp6(1),o.hij(" ",e.language.Skip_All," "),o.xp6(1),o.Q6J("disabled",!e.scopeFlag.configWrite)("ngClass",e.scopeFlag.configWrite?"":"toggleDisabled"),o.xp6(1),o.hij(" ",e.language.Scan_All," "),o.xp6(5),o.Oqu(e.language.device),o.xp6(3),o.Oqu(e.language.Status),o.xp6(2),o.Q6J("ngForOf",o.lcZ(20,12,e.skipDevicesDetails)))},directives:[n.O5,n.mk,n.sg,H],pipes:[n.Nd,at.g,ot.q],styles:['@charset "UTF-8";.skipped-devices[_ngcontent-%COMP%]{padding:0 10px;width:100%}.skipped-devices[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;padding:0}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF;line-height:24px;padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 10px}.detail-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px}.detail-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;margin-bottom:0}.detail-list[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600}.skip-device[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.protect-iq-accordion[_ngcontent-%COMP%]{width:100%}.protect-iq-accordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none}.protect-iq-accordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#fff;box-shadow:none;border:none}.accordion[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:after{font-family:"FontAwesome";content:"\\f068";float:right}.accordion[_ngcontent-%COMP%]   .card-header.collapsed[_ngcontent-%COMP%]:after{content:"\\f067"}.device-info[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.plus-minus-toggle[_ngcontent-%COMP%]{border:2px solid #000;width:18px;height:18px;display:flex;align-items:center;justify-content:center;border-radius:2px;font-size:20px;font-weight:600}.lap-icon[_ngcontent-%COMP%]{margin:0 10px;width:3%}.skipped-devices-table[_ngcontent-%COMP%]{margin:10px 0}.skipped-devices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:10px 0}.skipped-devices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px 0;vertical-align:unset!important}.skipped-devices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 0}.device-detail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.device-detail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .skip-sec[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:all .3s}.device-detail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .skip-sec[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:all .3s}.device-detail.table-borderless[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .device-detail.table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 0}.device-detail.table-borderless[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-left:70px}.table-borderless[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-top:15px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.wrn-msg[_ngcontent-%COMP%]{width:85%}']}),t})()},{path:"security-settings",component:(()=>{class t{constructor(t,e){this.translateService=t,this.protectIqService=e,this.menus=[{label:"Primary Network",value:"primary-network",state:"active"},{label:"Staff Network",value:"staff-network"},{label:"Point of Sale",value:"point-of-sale"},{label:"Customer Portal",value:"customer-portal"}],this.loading=!0,this.isLatestVersion=!1,this.errorMessage="",this.userId="",this.roleId=0,this.securitySettings={protocolAnomaly:!1,portScanDefence:!1}}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubscription=this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.userId=history.state.userId,this.isLatestVersion=history.state.isLatestVersion,this.loadData()}loadData(){this.loading=!0;let t=this.protectIqService.getSecurityList(this.userId);this.roleId&&(t=this.protectIqService.getSecurityListByRole(this.userId,this.roleId)),t.subscribe(t=>{var e,i,n,s;let a=t.securitySettings;a.count&&(this.securitySettings={protocolAnomaly:null!==(i=null===(e=a.data.find(t=>"PA"==t.name))||void 0===e?void 0:e.enabled)&&void 0!==i&&i,portScanDefence:null!==(s=null===(n=a.data.find(t=>"PSD"==t.name))||void 0===n?void 0:n.enabled)&&void 0!==s&&s}),this.loading=!1},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}onSettingChange(t){this.loading=!0;let e={userId:this.userId,roleId:this.roleId,securitySettings:[{type:"PA"==t?1:2,enabled:"PA"==t?this.securitySettings.protocolAnomaly:this.securitySettings.portScanDefence}]},i=this.protectIqService.setSecuritySettings(e);this.roleId&&(e.roleId=this.roleId,i=this.protectIqService.setSecuritySettingsByRole(e)),i.subscribe(()=>{this.loadData()},t=>{this.loading=!1,this.errorMessage=this.protectIqService.errorHandler(t)})}selectedTab(t){this.roleId=0,"staff-network"==t&&(this.roleId=2),"customer-portal"==t&&(this.roleId=3),"point-of-sale"==t&&(this.roleId=4),this.loadData()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.s),o.Y36(g.a))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-protect-iq-security-settings"]],decls:22,vars:7,consts:[[3,"menus","activeTab",4,"ngIf"],[1,"security-settings","mt-4"],["class","w-100 alert alert alert-danger fade show d-flex justify-content-between align-items-center",4,"ngIf"],["class","loader",4,"ngIf"],[1,"row","col-5"],[1,"col-12","toggles-switch"],[1,"toggle-swtbtn","checkbox","switcher","d-flex","justify-content-between"],[1,"cco-list-label"],["type","checkbox","name","protocolAnomaly","id","protocol-anomaly",3,"ngModel","ngModelChange","change"],[1,"mr-1"],["type","checkbox","name","portScanDefence","id","port-scan-defence",3,"ngModel","ngModelChange","change"],[3,"menus","activeTab"],[1,"w-100","alert","alert","alert-danger","fade","show","d-flex","justify-content-between","align-items-center"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex","wrn-msg",3,"innerHtml"],["type","button",1,"btn-default","primary","ok",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&(o.YNc(0,Zt,1,1,"top-nav-bar",0),o.TgZ(1,"div",1),o.YNc(2,St,6,2,"div",2),o.YNc(3,xt,5,1,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"span",7),o._uU(8),o.qZA(),o.TgZ(9,"label"),o.TgZ(10,"input",8),o.NdJ("ngModelChange",function(t){return e.securitySettings.protocolAnomaly=t})("change",function(){return e.onSettingChange("PA")}),o.qZA(),o.TgZ(11,"span",9),o._UZ(12,"small"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",4),o.TgZ(14,"div",5),o.TgZ(15,"div",6),o.TgZ(16,"span",7),o._uU(17),o.qZA(),o.TgZ(18,"label"),o.TgZ(19,"input",10),o.NdJ("ngModelChange",function(t){return e.securitySettings.portScanDefence=t})("change",function(){return e.onSettingChange("PSD")}),o.qZA(),o.TgZ(20,"span",9),o._UZ(21,"small"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Q6J("ngIf",e.isLatestVersion),o.xp6(2),o.Q6J("ngIf",e.errorMessage),o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(5),o.Oqu(e.language["IPS Protocol Anomaly"]),o.xp6(2),o.Q6J("ngModel",e.securitySettings.protocolAnomaly),o.xp6(7),o.Oqu(e.language["IPS Port Scan Defense"]),o.xp6(2),o.Q6J("ngModel",e.securitySettings.portScanDefence))},directives:[n.O5,S.Wl,S.JJ,S.On,H],styles:[".wrn-msg[_ngcontent-%COMP%]{width:85%}"]}),t})()},{path:"",redirectTo:"details",pathMatch:"full"}]}];let qt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.Bz.forChild(At)],s.Bz]}),t})();var It=i(32610),yt=i(65681);let _t=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[n.ez,qt,It.SupportApplicationModule,yt.m,M.A0]]}),t})()}}]);