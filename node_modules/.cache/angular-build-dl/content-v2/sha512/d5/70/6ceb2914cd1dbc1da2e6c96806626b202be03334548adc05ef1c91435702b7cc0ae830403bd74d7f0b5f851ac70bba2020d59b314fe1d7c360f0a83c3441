!function(){"use strict";function t(t,a){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,a)}(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?o:String(o)),n)}var i,o}function i(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[9270],{9270:function(e,n,o){o.r(n),o.d(n,{ReportsModule:function(){return Bt}});var r=o(38583),s=o(39895),l=o(16738),c=o(37716),g=o(30900),h=o(82707),u=o(12664),p=o(49342),d=o(86922),f=o(51071),m=o(39075),v=o(38048),b=o(86640),w=o(3679),y=o(18638),D=o(94555),T=o(11067),C=o(70516),A=o(4954);function S(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"span",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._uU(5),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(5),c.hij(" ",n.errorInfo," ")}}function Z(t,e){if(1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"div",15),c.TgZ(3,"span",16),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw(2);c.xp6(4),c.Oqu(a.language.Loading)}}function x(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,S,6,1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.YNc(4,Z,5,1,"div",5),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c._UZ(7,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.error),c.xp6(3),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("ngClass",a.loading?"d-none":"d-block")}}var O=o(65424),M=o(53363);O(T),M(T),o(86295)(T);var I=function(){var t=function(){function t(e,n,i,o,r,s){var l=this;a(this,t),this.customTranslateService=e,this.faNetworkApiService=n,this.optionMngr=i,this.commonOrgService=o,this.activatedRoute=r,this.service=s,this.pageAvailable=!1,this.loading=!1,this.Highcharts=T,this.upUsage="",this.downUsage="",this.errorInfo="",this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0,this.upUsage=this.language.upUsageTitle,this.downUsage=this.language.downUsageTitle),this.languageSubs=this.customTranslateService.selectedLanguage.subscribe(function(t){l.language=t,l.renderChart(),l.upUsage=t.upUsageTitle,l.downUsage=t.downUsageTitle})}return i(t,[{key:"ngOnInit",value:function(){this.page={main_route:"endpoints",sub_route:"traffic",showStartDate:!0,showEndDate:!0,showDirection:!1},this.closeAlert()}},{key:"ngOnDestroy",value:function(){this.subscribe&&this.subscribe.unsubscribe(),this.languageSubs&&this.languageSubs.unsubscribe()}},{key:"loadChartData",value:function(t){var e=this;t.criteriaSelected="usage",this.filters=t,this.loading=!0,this.trafficChartOptions=null,this.trafficRateOtions=null;var a=sessionStorage.getItem("aggregate_Endpoint_Id")?JSON.parse(sessionStorage.getItem("aggregate_Endpoint_Id")):this.activatedRoute.snapshot.queryParamMap.get("id");!a||(this.subscribe=this.faNetworkApiService.getUsage(t,a).subscribe(function(a){e.data=a,e.service.btnDisabled=!1,e.trafficChartOptions=e.optionMngr.makeOptionsForTraffic(a,"bar",t),document.getElementById("container")&&e.Highcharts.chart("container",e.trafficChartOptions),e.loading=!1},function(t){e.pageErrorHandle(t),e.service.btnDisabled=!1}))}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.showError(this.errorInfo),this.loading=!1}},{key:"closeAlert",value:function(){this.error=!1}},{key:"showError",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0,$("html, body").animate({scrollTop:0},"slow")}},{key:"renderChart",value:function(){this.trafficChartOptions=null,this.trafficChartOptions=this.optionMngr.makeOptionsForTraffic(this.data,"bar",this.filters),this.Highcharts.chart("container",this.trafficChartOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.d),c.Y36(C._),c.Y36(A.D),c.Y36(p.v),c.Y36(s.gz),c.Y36(d.h))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-usage"]],decls:1,vars:1,consts:[["class","col-md-12 mt-4",4,"ngIf"],[1,"col-md-12","mt-4"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"",2,"height","auto"],["id","fa-chart-wrapper",1,"fa-chart-wrapper","chart-min-h"],["class","loader",4,"ngIf"],[1,"chart-sec",3,"ngClass"],[1,"fa-chart-container","mt-5","chart-min-h"],["id","container"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&c.YNc(0,x,8,3,"div",0),2&t&&c.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.mk],styles:[""]}),t}(),k=o(92340),U=o(91841),_=function(){var t=function(){function t(e,n,i,o){a(this,t),this.httpClient=e,this.sso=n,this.activatedRoute=i,this.router=o}return i(t,[{key:"getApplications",value:function(t){var e,a,n,i=new Date(t.startDate),o=new Date(t.endDate);i=this.getStartUTCDate(t.startDate,0),o=this.getEndUTCDate(t.endDate);var r=this.getGranularity(i,o,"topApplications");"usage"==t.criteriaSelected&&(i=this.getISOStartOfDay(i),o=this.getISOEndOfDay(o));var s,l={granularity:r,tenant:0,startTime:i,endpoint:null!==(n=null!==(a=null!==(e=t.endpointID)&&void 0!==e?e:sessionStorage.getItem("aggregate_Endpoint_Id"))&&void 0!==a?a:this.activatedRoute.snapshot.queryParamMap.get("id"))&&void 0!==n?n:"",output:t.criteriaSelected,direction:t.directionSelected.toLowerCase(),org:this.sso.getOrganizationID(this.router.url),count:t.limit,endTime:o},c="";for(var g in l)void 0!==l[g]&&(""!=c&&(c+="&"),c+=g+"="+encodeURIComponent(l[g]));return s="".concat(k.N.SUPPORT_URL,"/traffic/reports/topapplications?").concat(c),this.httpClient.get(s)}},{key:"getApplicationGroups",value:function(t){var e,a,n,i=new Date(t.startDate),o=new Date(t.endDate);i=this.getStartUTCDate(t.startDate,0),o=this.getEndUTCDate(t.endDate);var r=this.getGranularity(i,o,"topApplicationGroups");"usage"==t.criteriaSelected&&(i=this.getISOStartOfDay(i),o=this.getISOEndOfDay(o));var s,l={granularity:r,tenant:0,startTime:i,endpoint:null!==(n=null!==(a=null!==(e=t.endpointID)&&void 0!==e?e:sessionStorage.getItem("aggregate_Endpoint_Id"))&&void 0!==a?a:this.activatedRoute.snapshot.queryParamMap.get("id"))&&void 0!==n?n:"",output:t.criteriaSelected,direction:t.directionSelected.toLowerCase(),org:this.sso.getOrganizationID(this.router.url),count:t.limit,endTime:o},c="";for(var g in l)void 0!==l[g]&&(""!=c&&(c+="&"),c+=g+"="+encodeURIComponent(l[g]));return s="".concat(k.N.CCO_REPORTS_BASE_URL,"reports/topapplicationgroups?").concat(c),this.httpClient.get(s)}},{key:"getAppTraffic",value:function(t){var e,a,n,i=new Date(t.startDate),o=new Date(t.endDate);i=this.getStartUTCDate(t.startDate,0),o=this.getEndUTCDate(t.endDate),this.getGranularity(i,o);var r,s={granularity:"1hour",org:this.sso.getOrganizationID(this.router.url),tenant:0,startTime:i,endTime:o,endpoint:null!==(n=null!==(a=null!==(e=t.endpointID)&&void 0!==e?e:sessionStorage.getItem("aggregate_Endpoint_Id"))&&void 0!==a?a:this.activatedRoute.snapshot.queryParamMap.get("id"))&&void 0!==n?n:"",groupBy:"application",output:"rate",count:t.limit,direction:"both"},l="";for(var c in s)void 0!==s[c]&&(""!=l&&(l+="&"),l+=c+"="+encodeURIComponent(s[c]));return r="".concat(k.N.SUPPORT_URL,"/traffic/timeseries?").concat(l),this.httpClient.get(r)}},{key:"getRate",value:function(t,e){this.sso.getOrg(this.orgId);var a=new Date(t.startDate),n=new Date(t.endDate),i=this.getGranularity(a,n,"rate");a=this.getStartUTCDate(t.startDate,0),n=this.getEndUTCDate(t.endDate),t.startTime=t.startTime-1,t.endTime=t.endTime-1;var o=l(n).diff(l(a),"hour"),r=l(n).diff(l(a),"days");if(i=r<=31?"1hour":"24hour",o<=72&&r<=3){var s=new Date(t.startDate);a=this.getStartUTCDate(t.startDate,t.startTime),n=this.getStartUTCDate(s,t.endTime),i="1hour",t.APIStartDate=a,t.APIendDate=n}var c="".concat(k.N.SUPPORT_URL,"/traffic/timeseries?").concat(this.sso.getOrg(this.orgId),"tenant=0&granularity=").concat(i,"&startTime=").concat(a,"&endTime=").concat(n,"&output=rate&endpoint=").concat(e);return this.httpClient.get(c)}},{key:"getStartUTCDate",value:function(t,e){var a=new Date(t);a.setHours(e,0,0,0);var n=a.getUTCFullYear(),i="".concat(a.getUTCMonth()+1),o="".concat(a.getUTCDate()),r="".concat(a.getUTCHours()),s="".concat(a.getUTCMinutes());return i.length<2&&(i="0".concat(i)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),s.length<2&&(s="0".concat(s)),"".concat(n,"-").concat(i,"-").concat(o,"T").concat(r,":").concat(s,":00Z")}},{key:"getEndUTCDate",value:function(t){var e=new Date(t);e.setHours(0,0,0,0),e.setDate(new Date(e).getDate()+1);var a=e.getUTCFullYear(),n="".concat(e.getUTCMonth()+1),i="".concat(e.getUTCDate()),o="".concat(e.getUTCHours()),r="".concat(e.getUTCMinutes());return n.length<2&&(n="0".concat(n)),i.length<2&&(i="0".concat(i)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),"".concat(a,"-").concat(n,"-").concat(i,"T").concat(o,":").concat(r,":00Z")}},{key:"getISOStartOfDay",value:function(t){var e=new Date(t),a=e.getFullYear(),n="".concat(e.getMonth()+1),i="".concat(e.getDate());return n.length<2&&(n="0".concat(n)),i.length<2&&(i="0".concat(i)),"".concat(a,"-").concat(n,"-").concat(i,"T00:00:00Z")}},{key:"getISOEndOfDay",value:function(t){var e=new Date(t);e.setDate(new Date(e).getDate());var a=e.getFullYear(),n="".concat(e.getMonth()+1),i="".concat(e.getDate());return n.length<2&&(n="0".concat(n)),i.length<2&&(i="0".concat(i)),"".concat(a,"-").concat(n,"-").concat(i,"T00:00:00Z")}},{key:"getGranularity",value:function(t,e,a){return"24hour"}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.LFG(U.eN),c.LFG(v.t6),c.LFG(s.gz),c.LFG(s.F0))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function q(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"span",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._uU(5),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(5),c.hij(" ",n.errorInfo," ")}}function E(t,e){if(1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"div",15),c.TgZ(3,"span",16),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw(2);c.xp6(4),c.Oqu(a.language.Loading)}}function P(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,q,6,1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.YNc(4,E,5,1,"div",5),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c._UZ(7,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.error),c.xp6(3),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("ngClass",a.loading?"d-none":"d-block")}}var R=o(65424),H=o(53363);R(T),H(T),o(86295)(T);var N=function(){var t=function(){function t(e,n,i,o,r){var s=this;a(this,t),this.customTranslateService=e,this.apiService=n,this.optionsService=i,this.commonOrgService=o,this.activatedRoute=r,this.pageAvailable=!1,this.loading=!1,this.Highcharts=T,this.upUsage="",this.downUsage="",this.errorInfo="",this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0,this.upUsage=this.language.upUsageTitle,this.downUsage=this.language.downUsageTitle),this.languageSubs=this.customTranslateService.selectedLanguage.subscribe(function(t){s.language=t,s.renderChart(),s.upUsage=t.upUsageTitle,s.downUsage=t.downUsageTitle})}return i(t,[{key:"ngOnInit",value:function(){this.page={main_route:"endpoints",sub_route:"reports",showStartDate:!0,showEndDate:!0,showLimit:!1,showRate:!0},this.closeAlert()}},{key:"ngOnDestroy",value:function(){this.subscribe&&this.subscribe.unsubscribe(),this.languageSubs&&this.languageSubs.unsubscribe()}},{key:"loadChartData",value:function(t){var e=this;t.criteriaSelected="usage",this.filters=t,this.loading=!0,this.trafficChartOptions=null,this.trafficRateOtions=null;var a=sessionStorage.getItem("aggregate_Endpoint_Id")?JSON.parse(sessionStorage.getItem("aggregate_Endpoint_Id")):this.activatedRoute.snapshot.queryParamMap.get("id");a&&(t.granularity="1hour",this.subscribe=this.apiService.getRate(t,a).subscribe(function(a){e.data=a,e.optionsService.btnDisabled=!1,e.trafficChartOptions=e.optionsService.makeOptionsForEPLineChart(a,t),document.getElementById("container")&&e.Highcharts.chart("container",e.trafficChartOptions),e.loading=!1},function(t){e.pageErrorHandle(t),e.optionsService.btnDisabled=!1}))}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.showError(this.errorInfo),this.loading=!1}},{key:"closeAlert",value:function(){this.error=!1}},{key:"showError",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0,$("html, body").animate({scrollTop:0},"slow")}},{key:"renderChart",value:function(){this.trafficChartOptions=null,this.trafficChartOptions=this.optionsService.makeOptionsForEPLineChart(this.data,this.filters),this.Highcharts.chart("container",this.trafficChartOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.d),c.Y36(_),c.Y36(d.h),c.Y36(p.v),c.Y36(s.gz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-rate"]],decls:1,vars:1,consts:[["class","col-md-12 mt-4",4,"ngIf"],[1,"col-md-12","mt-4"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"",2,"height","auto"],["id","fa-chart-wrapper",1,"fa-chart-wrapper","chart-min-h"],["class","loader",4,"ngIf"],[1,"chart-sec",3,"ngClass"],[1,"fa-chart-container","mt-5"],["id","container"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&c.YNc(0,P,8,3,"div",0),2&t&&c.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.mk],styles:[""]}),t}();function J(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"span",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._uU(5),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(5),c.hij(" ",n.errorInfo," ")}}function Y(t,e){1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"div",15),c.TgZ(3,"span",16),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function F(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,J,6,1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.YNc(4,Y,5,0,"div",5),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c._UZ(7,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.error),c.xp6(3),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("ngClass",a.loading?"d-none":"d-block")}}var L=o(65424),Q=o(53363);L(T),Q(T),o(86295)(T);var G=function(){var t=function(){function t(e,n,i,o){var r=this;a(this,t),this.customTranslateService=e,this.service=n,this.commonOrgService=i,this.chartOptionsService=o,this.errorInfo="",this.pageAvailable=!1,this.loading=!1,this.Highcharts=T,this.upUsage="",this.downUsage="",this.chartType="bar",this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0,this.upUsage=this.language.upUsageTitle,this.downUsage=this.language.downUsageTitle),this.customTranslateService.selectedLanguage.subscribe(function(t){r.language=t,r.upUsage=t.upUsageTitle,r.downUsage=t.downUsageTitle,r.renderChart()})}return i(t,[{key:"ngOnInit",value:function(){this.page={main_route:"endpoints",sub_route:"applications",showCriteria:!0,showStartDate:!0,showEndDate:!0,showLimit:!0,showDirection:!0}}},{key:"ngOnDestroy",value:function(){this.subscribe&&this.subscribe.unsubscribe()}},{key:"loadChartData",value:function(t){var e=this;this.error=!1,t.groupBy="application",this.topAppsPieChartOptions=null,this.topAppsChartOptions=null,this.filters=t,this.loading=!0,this.subscribe=this.service.getApplications(t).subscribe(function(a){if(e.data=a,e.chartOptionsService.btnDisabled=!1,"bar"==e.chartType){var n=400;if(a&&a.length>0){var i=30*a.length;n=i<n?n:i}var o=e.chartOptionsService.makeOptionsEndpointTopApp(a,e.chartType,t,{title:e.language.Top_Appln,fileName:"top-applications"});o.chart.height=n,e.topAppsChartOptions=o,e.topAppsChartOptions=Object.assign({},e.topAppsChartOptions),document.getElementById("container")&&e.Highcharts.chart("container",e.topAppsChartOptions)}e.loading=!1},function(t){e.loading=!1,e.chartOptionsService.btnDisabled=!1,e.pageErrorHandle(t)})}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.closeAlert(),this.error=!0,$("html, body").animate({scrollTop:0},"slow")}},{key:"closeAlert",value:function(){this.error=!1}},{key:"showError",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0}},{key:"renderChart",value:function(){this.topAppsChartOptions=null;var t=400;if(this.data&&this.data.length>0){var e=30*this.data.length;t=e<t?t:e}this.topAppsChartOptions=this.chartOptionsService.makeOptionsEndpointTopApp(this.data,this.chartType,this.filters,{title:this.language.Top_Appln,fileName:"top-applications"}),this.Highcharts.chart("container",this.topAppsChartOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.d),c.Y36(_),c.Y36(p.v),c.Y36(d.h))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-applications"]],decls:1,vars:1,consts:[["class","col-md-12 mt-4",4,"ngIf"],[1,"col-md-12","mt-4"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"",2,"height","auto"],["id","fa-chart-wrapper",1,"fa-chart-wrapper","chart-min-h"],["class","loader",4,"ngIf"],[1,"chart-sec",3,"ngClass"],[1,"fa-chart-container"],["id","container"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&c.YNc(0,F,8,3,"div",0),2&t&&c.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.mk],styles:[""]}),t}();function j(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"span",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._uU(5),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(5),c.hij(" ",n.errorInfo," ")}}function z(t,e){1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"div",15),c.TgZ(3,"span",16),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function B(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,j,6,1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.YNc(4,z,5,0,"div",5),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c._UZ(7,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.error),c.xp6(3),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("ngClass",a.loading?"d-none":"d-block")}}var V=o(65424),X=o(53363);V(T),X(T),o(86295)(T);var W=function(){var t=function(){function t(e,n,i,o){var r=this;a(this,t),this.customTranslateService=e,this.service=n,this.commonOrgService=i,this.chartOptionsService=o,this.errorInfo="",this.pageAvailable=!1,this.loading=!1,this.Highcharts=T,this.upUsage="",this.downUsage="",this.chartType="bar",this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0,this.upUsage=this.language.upUsageTitle,this.downUsage=this.language.downUsageTitle),this.customTranslateService.selectedLanguage.subscribe(function(t){r.language=t,r.upUsage=t.upUsageTitle,r.downUsage=t.downUsageTitle,r.renderChart()})}return i(t,[{key:"ngOnInit",value:function(){this.page={main_route:"endpoints",sub_route:"applications",showCriteria:!0,showStartDate:!0,showEndDate:!0,showLimit:!0,showDirection:!0}}},{key:"ngOnDestroy",value:function(){this.subscribe&&this.subscribe.unsubscribe()}},{key:"loadChartData",value:function(t){var e=this;this.error=!1,t.groupBy="application",this.topAppGroupsPieChartOptions=null,this.topAppGroupsChartOptions=null,this.filters=t,this.loading=!0,this.subscribe=this.service.getApplicationGroups(t).subscribe(function(a){if(e.data=a,e.chartOptionsService.btnDisabled=!1,"bar"==e.chartType){var n=400;if(a&&a.length>0){var i=30*a.length;n=i<n?n:i}var o=e.chartOptionsService.makeOptionsEndpointTopApp(a,e.chartType,t,{title:e.language.Top_Application+" "+e.language.Groups,fileName:"top-application-groups"});o.chart.height=n,e.topAppGroupsChartOptions=o,e.topAppGroupsChartOptions=Object.assign({},e.topAppGroupsChartOptions),document.getElementById("container")&&e.Highcharts.chart("container",e.topAppGroupsChartOptions)}e.loading=!1},function(t){e.loading=!1,e.chartOptionsService.btnDisabled=!1,e.pageErrorHandle(t)})}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.closeAlert(),this.error=!0,$("html, body").animate({scrollTop:0},"slow")}},{key:"closeAlert",value:function(){this.error=!1}},{key:"showError",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0}},{key:"renderChart",value:function(){this.topAppGroupsChartOptions=null;var t=400;if(this.data&&this.data.length>0){var e=30*this.data.length;t=e<t?t:e}this.topAppGroupsChartOptions=this.chartOptionsService.makeOptionsEndpointTopApp(this.data,this.chartType,this.filters,{title:this.language.Top_Application+" "+this.language.Groups,fileName:"top-applications-groups"}),this.Highcharts.chart("container",this.topAppGroupsChartOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.d),c.Y36(_),c.Y36(p.v),c.Y36(d.h))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-application-groups"]],decls:1,vars:1,consts:[["class","col-md-12 mt-4",4,"ngIf"],[1,"col-md-12","mt-4"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"",2,"height","auto"],["id","fa-chart-wrapper",1,"fa-chart-wrapper","chart-min-h"],["class","loader",4,"ngIf"],[1,"chart-sec",3,"ngClass"],[1,"fa-chart-container"],["id","container"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&c.YNc(0,B,8,3,"div",0),2&t&&c.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.mk],styles:[""]}),t}();function K(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"span",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"button",12),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._uU(5),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(5),c.hij(" ",n.errorInfo," ")}}function tt(t,e){1&t&&(c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"div",15),c.TgZ(3,"span",16),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function et(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,K,6,1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.YNc(4,tt,5,0,"div",5),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c._UZ(7,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.error),c.xp6(3),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("ngClass",a.loading?"d-none":"d-block")}}var at=o(65424),nt=o(53363);at(T),nt(T),o(86295)(T);var it=function(){var t=function(){function t(e,n,i,o,r,s,l){var c=this;a(this,t),this.customTranslateService=e,this.faNetworkApiService=n,this.optionMngr=i,this.commonOrgService=o,this.sso=r,this.activatedRoute=s,this.service=l,this.pageAvailable=!1,this.loading=!1,this.Highcharts=T,this.upUsage="",this.downUsage="",this.errorInfo="",this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0,this.upUsage=this.language.upUsageTitle,this.downUsage=this.language.downUsageTitle),this.languageSubs=this.customTranslateService.selectedLanguage.subscribe(function(t){c.language=t,c.renderChart(),c.upUsage=t.upUsageTitle,c.downUsage=t.downUsageTitle})}return i(t,[{key:"ngOnInit",value:function(){this.page={main_route:"endpoints",sub_route:"reports",showLimit:!1,showDirection:!1,showMonthCount:!0},this.closeAlert()}},{key:"ngOnDestroy",value:function(){this.subscribe&&this.subscribe.unsubscribe(),this.languageSubs&&this.languageSubs.unsubscribe()}},{key:"loadChartData",value:function(t){var e=this;t.criteriaSelected="usage",this.filters=t,this.loading=!0,this.trafficChartOptions=null,this.trafficRateOtions=null;var a=sessionStorage.getItem("aggregate_Endpoint_Id")?JSON.parse(sessionStorage.getItem("aggregate_Endpoint_Id")):this.activatedRoute.snapshot.queryParamMap.get("id");a&&(t.granularity="1month",this.subscribe=this.faNetworkApiService.getMonthlyUsage(t,a).subscribe(function(a){e.data=a,e.service.btnDisabled=!1,e.trafficChartOptions=e.optionMngr.makeOptionsForMonthlyUsage(a,"bar",t),document.getElementById("container")&&e.Highcharts.chart("container",e.trafficChartOptions),e.loading=!1},function(t){e.loading=!1,e.pageErrorHandle(t),e.service.btnDisabled=!1}))}},{key:"pageErrorHandle",value:function(t){var e=this;this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.showError(this.errorInfo),this.loading=!1,setTimeout(function(){e.closeAlert()},4e3)}},{key:"closeAlert",value:function(){this.error=!1}},{key:"showError",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0,$("html, body").animate({scrollTop:0},"slow")}},{key:"renderChart",value:function(){this.trafficChartOptions=null,this.trafficChartOptions=this.optionMngr.makeOptionsForMonthlyUsage(this.data,"bar",this.filters),this.Highcharts.chart("container",this.trafficChartOptions)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.d),c.Y36(C._),c.Y36(A.D),c.Y36(p.v),c.Y36(v.t6),c.Y36(s.gz),c.Y36(d.h))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-monthly-usage"]],decls:1,vars:1,consts:[["class","col-md-12 mt-4",4,"ngIf"],[1,"col-md-12","mt-4"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"",2,"height","auto"],["id","fa-chart-wrapper",1,"row","fa-chart-wrapper","chart-min-h"],["class","loader",4,"ngIf"],[1,"chart-sec",3,"ngClass"],[1,"fa-chart-container","mt-5"],["id","container"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&c.YNc(0,et,8,3,"div",0),2&t&&c.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.mk],styles:[""]}),t}(),ot=o(49457);function rt(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"span",11),c._UZ(2,"img",12),c.qZA(),c.TgZ(3,"button",13),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._uU(5),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(5),c.hij(" ",n.errorInfo," ")}}function st(t,e){1&t&&(c.TgZ(0,"div",14),c.TgZ(1,"div",15),c.TgZ(2,"div",16),c.TgZ(3,"span",17),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function lt(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,rt,6,1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.YNc(4,st,5,0,"div",5),c.TgZ(5,"div",6),c.TgZ(6,"div",7),c._UZ(7,"div",8),c.qZA(),c.TgZ(8,"div",7),c._UZ(9,"div",9),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.error),c.xp6(3),c.Q6J("ngIf",a.loading),c.xp6(1),c.Q6J("ngClass",a.loading?"d-none":"d-block")}}var ct,gt=o(65424),ht=o(53363);gt(T),ht(T),o(86295)(T),(ct=T).exportEndpointCharts=function(t,e){(e=ct.merge(ct.getOptions().exporting,e)).url=k.N.highchartExportURL,ct.post(e.url,{filename:e.filename||"Subscriber-Top-Application-Traffic",type:e.type,width:e.width,svg:ct.getSVG(t)})},ct.getSVG=function(t){var e=[],a=0,n=0;return t.forEach(function(t){var i=t.chartWidth,o=t.chartHeight;t.setSize(i+100,o+(100*t.legend.pages.length|0)),t.options.legend.navigation.enabled=!1;var r=t.getSVG(),s=+r.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1],l=+r.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1];r=(r=r.replace("<svg",'<g transform="translate(0,'+a+')" ')).replace("</svg>","</g>"),a+=l,n=Math.max(n,s),e.push(r),t.options.legend.navigation.enabled=!0,t.setSize(i,o)}),'<svg height="'+a+'" width="'+n+'" version="1.1" xmlns="http://www.w3.org/2000/svg">'+e.join("")+"</svg>"};var ut=function(){var e=function(){function e(t,n,i,o,r){var s=this;a(this,e),this.customTranslateService=t,this.service=n,this.commonOrgService=i,this.sso=o,this.options=r,this.errorInfo="",this.pageAvailable=!1,this.loading=!1,this.Highcharts=T,this.upUsage="",this.downUsage="",this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0,this.upUsage=this.language.upUsageTitle,this.downUsage=this.language.downUsageTitle),this.customTranslateService.selectedLanguage.subscribe(function(t){s.language=t,s.renderChart(),s.upUsage=t.upUsageTitle,s.downUsage=t.downUsageTitle})}return i(e,[{key:"ngOnInit",value:function(){this.page={main_route:"endpoints",sub_route:"top-applications-traffic",showStartDate:!0,showEndDate:!0,showLimit:!0,showDirection:!1,showRate:!0}}},{key:"loadChartData",value:function(t){var e,a,n=this;t.groupBy="application",this.topAppsPieChartOptions=null,this.topAppsChartOptions=null,this.filters=t,this.loading=!0,this.subscribe=this.service.getAppTraffic(t).subscribe(function(i){n.data=i,n.options.btnDisabled=!1,"Average"==t.rateSelected?(e=n.makeAreaChartOptions(n.getData(i,"usRate"),"usRate","Up",n.filters),a=n.makeAreaChartOptions(n.getData(i,"dsRate"),"dsRate","Down",n.filters)):(n.filters.rateSelected="Max",e=n.makeAreaChartOptions(n.getData(i,"peakUsRate"),"peakUsRate","Up",n.filters),a=n.makeAreaChartOptions(n.getData(i,"peakDsRate"),"peakDsRate","Down",n.filters)),document.getElementById("container-up")&&document.getElementById("container-down")&&(n.upChart=n.Highcharts.chart("container-up",e),n.downChart=n.Highcharts.chart("container-down",a)),n.loading=!1},function(t){n.pageErrorHandle(t),n.options.btnDisabled=!1})}},{key:"makeAreaChartOptions",value:function(t,e,a,n){var i=this,o=this,s=new r.uU("en-US"),l=/\((.*)\)/.exec((new Date).toString())[1],c="";this.sso.getTrafficReportChartSubscriberInfo()&&(c='<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">'.concat(this.language.Subscriber,": ").concat(this.sso.getTrafficReportChartSubscriberInfo(),'</span><span style="font-size:16px; color:#ffffff">...</span>'));var g="".concat(c,'<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">Rate: ').concat("Max"===n.rateSelected?this.language.Peak:this.language.Average,'</span><span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.time_win,": ").concat(s.transform(n.startDate,"MM/dd/yyyy")," to ").concat(s.transform(n.endDate,"MM/dd/yyyy")," [").concat(l,']</span><span style="font-size:16px; color:#ffffff">...</span>'),h=[];t.length&&t.forEach(function(t){-1===t[e]&&(t[e]=0),t.name||(t.name="Other"),-1===h.indexOf(t.name)&&h.push(t.name)});var u=[],p=[];$.each(h,function(a,n){var o={};o.name=n,o.data=[],$.each(t,function(t,a){a.name||(a.name="Other"),a.name===n&&(o.data.push(a[e]),p.push(i.options.getDateTime(a.startPeriodSec,!0,"MM/dd HH:mm")))}),u.push(o)}),0==u.length&&(u=[{name:a,data:[]}]);var d=this.topApplicationTrafficColors(),f={credits:{enabled:!1},time:{useUTC:!1},chart:{type:"area",zoomType:"xy"},title:{text:"Down"===a?"":this.language.subscriberToponTraffic},subtitle:{text:"Down"===a?"":g,widthAdjust:-200},xAxis:{categories:p,labels:{formatter:function(){return this.value.length>23?this.value.substring(0,19)+"...":this.value},isFunction:!0},tickInterval:function(){var t=Math.floor(p.length/h.length);return t<=10?1:t>10&&t<20?2:Math.floor(t/8)?Math.floor(t/8):1}()},yAxis:{labels:{formatter:function(){var t=this,e=t.axis.series[0].dataMax,a=e>1e12?[1e12,"Tbps"]:e>1e9?[1e9,"Gbps"]:e>1e6?[1e6,"Mbps"]:e>1e3?[1e3,"Kbps"]:[1,"bps"];return(t.value/a[0]).toFixed(1)+(t.isFirst?" "+a[1]:"")}},title:{text:a},stackLabels:{enabled:!1,style:{fontWeight:"bold"}},tickPixelInterval:55},lang:{noData:o.language["No Data Available"]},tooltip:{formatter:function(){var t=o.topApplicationTrafficTooltip(this.y)[0];return"<p><strong>"+this.series.name+"</strong><br/><strong>"+this.x+"</strong><br/><span>"+n.rateSelected+" "+a+" Rate: <strong>"+(this.y/t).toFixed(2)+" "+o.topApplicationTrafficTooltip(this.y)[1]+"</strong><br/></span></p>"}},plotOptions:{area:{stacking:"normal",lineColor:"#ffffff",lineWidth:1,marker:{lineWidth:1,lineColor:"#ffffff"}}},series:u,legend:{align:"center",verticalAlign:"bottom",x:0,y:0,lineHeight:10,itemStyle:{width:"150px",textOverflow:"clip"}},interactive:!0,datetimeSupported:!0,treemapSupported:!0,colors:d};return f.exporting="Down"!==a?{filename:"Subscriber_Top_Application_Traffic",buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){o.exportTrafficChart()}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var e,a=[],i=[],r="Max"===n.rateSelected?o.language.Peak:o.language.Average,c="";o.sso.getTrafficReportChartSubscriberInfo()&&(c="Subscriber: ".concat(o.sso.getTrafficReportChartSubscriberInfo(),"\r\n")),e="Subscriber Top Application Traffic\r\n".concat(c).concat(o.language.rate,": ").concat(r,"\r\n").concat(o.language.criteria,": ").concat(o.language.rate,"\r\n").concat(o.language.time_win,": ").concat(s.transform(n.startDate,"MM/dd/yyyy")," - ").concat(s.transform(n.endDate,"MM/dd/yyyy")," [").concat(l,"]\r\nUpstream Traffic\r\n");for(var g=0;g<t.length;g++)t[g].name&&a.push({"Date Time":o.options.getDateTime(t[g].startPeriodSec,!0,"MM/dd HH:mm"),Name:t[g].name?t[g].name:"Other","Usage(Byte)":t[g].usOctets&&-1!==t[g].usOctets?t[g].usOctets.toLocaleString():0,"Max Up Rate(bps)":t[g].peakUsRate&&-1!==t[g].peakUsRate?t[g].peakUsRate.toLocaleString():0,"Average Up Rate(bps)":t[g].usRate&&-1!==t[g].usRate?t[g].usRate.toLocaleString():0});for(g=0;g<t.length;g++)t[g].name&&i.push({"Date Time":o.options.getDateTime(t[g].startPeriodSec,!0,"MM/dd HH:mm"),Name:t[g].name?t[g].name:"Other","Usage(Byte)":t[g].dsOctets&&-1!==t[g].dsOctets?t[g].dsOctets.toLocaleString():0,"Max Down Rate(bps)":t[g].peakDsRate&&-1!==t[g].peakDsRate?t[g].peakDsRate.toLocaleString():0,"Average Down Rate(bps)":t[g].dsRate&&-1!==t[g].dsRate?t[g].dsRate.toLocaleString():0});o.downLoadCSV("Subscriber_Top_Application_Traffic",a,i,e,"\r\nDownstream Traffic\r\n")}}],text:o.language.export,className:"export_menu"}}}:{enabled:!1},f}},{key:"topApplicationTrafficTooltip",value:function(t){return t>1e12?[1e12,"Tbps"]:t>1e9?[1e9,"Gbps"]:t>1e6?[1e6,"Mbps"]:t>1e3?[1e3,"Kbps"]:[1,"bps"]}},{key:"topApplicationTrafficColors",value:function(){return["#0279FF","#82BF00","#836EE8","#FF8238","#029A7C","#F7C343","#FF489D","#C74900","#2EC4B6","#0054B2"]}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.closeAlert(),this.error=!0,this.loading=!1,$("html, body").animate({scrollTop:0},"slow")}},{key:"closeAlert",value:function(){this.error=!1}},{key:"showError",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0}},{key:"exportTrafficChart",value:function(){T.exportEndpointCharts([this.upChart,this.downChart],{type:"application/pdf"})}},{key:"ngOnDestroy",value:function(){this.subscribe&&this.subscribe.unsubscribe()}},{key:"downLoadCSV",value:function(e,a,n,i,o){var r,s=a,l=[],c=0,g=0,h=0,u=t(s);try{for(u.s();!(r=u.n()).done;){var p=r.value,d=this.getSize(p);d>c&&(c=d,g=h),h++}}catch(y){u.e(y)}finally{u.f()}for(var f in s[g])-1===l.indexOf(f)&&l.push(f);var m=e+".csv",v=this.ConvertToCSV(s,l),b=this.ConvertToCSV(n,l),w=new Blob([i+v+o+b],{type:"text/csv;charset=utf-8"});(0,ot.saveAs)(w,m)}},{key:"ConvertToCSV",value:function(t,e){var a="object"!=typeof t?JSON.parse(t):t,n="",i="";for(var o in e)i+=e[o]+",";n+=(i=i.slice(0,-1))+"\r\n";for(var r=0;r<a.length;r++){var s="";for(var l in e){var c=e[l];s+='"'+(null!=a[r][c]?a[r][c]:"")+'",'}n+=s+"\r\n"}return n}},{key:"getSize",value:function(t){var e,a=0;for(e in t)t.hasOwnProperty(e)&&a++;return a}},{key:"renderChart",value:function(){var t,e;"Average"==this.filters.rateSelected?(t=this.makeAreaChartOptions(this.getData(this.data,"usRate"),"usRate","Up",this.filters),e=this.makeAreaChartOptions(this.getData(this.data,"dsRate"),"dsRate","Down",this.filters)):(this.filters.rateSelected="Max",t=this.makeAreaChartOptions(this.getData(this.data,"peakUsRate"),"peakUsRate","Up",this.filters),e=this.makeAreaChartOptions(this.getData(this.data,"peakDsRate"),"peakDsRate","Down",this.filters)),this.upChart=this.Highcharts.chart("container-up",t),this.downChart=this.Highcharts.chart("container-down",e)}},{key:"getData",value:function(t,e){return Array.isArray(t)&&t.length>0&&t.some(function(t){return t[e]>0})?t:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(g.d),c.Y36(_),c.Y36(p.v),c.Y36(v.t6),c.Y36(d.h))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-top-application-traffic"]],decls:1,vars:1,consts:[["class","col-md-12 mt-4",4,"ngIf"],[1,"col-md-12","mt-4"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"",2,"height","auto"],["id","fa-chart-wrapper",1,"fa-chart-wrapper","chart-min-h"],["class","loader",4,"ngIf"],[1,"chart-sec",3,"ngClass"],[1,"fa-chart-container"],["id","container-up"],["id","container-down"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,e){1&t&&c.YNc(0,lt,10,3,"div",0),2&t&&c.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.mk],styles:[""]}),e}(),pt=["UsageComponent"],dt=["TopApplicationTrafficComponent"],ft=["RateComponent"],mt=["MonthlyUsageComponent"],vt=["ApplicationsComponent"],bt=["ApplicationGroupsComponent"],wt=["showInfoModal"];function yt(t,e){if(1&t&&(c.TgZ(0,"div",6),c.TgZ(1,"div",7),c.TgZ(2,"div",8),c.TgZ(3,"span",9),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var a=c.oxw();c.xp6(4),c.Oqu(a.language.Loading)}}function Dt(t,e){if(1&t&&c._uU(0),2&t){var a=e.item,n=c.oxw(2);c.hij(" ",n.language[a.name]||a.name," ")}}function Tt(t,e){if(1&t&&c._uU(0),2&t){var a=e.item,n=c.oxw(2);c.hij(" ",n.language[a.name]||a.name," ")}}var Ct=function(){return{standalone:!0}};function At(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"ng-select",27),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).criteriaSelected=t})("change",function(){return c.CHM(a),c.oxw(2).changeCriteria()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language.criteria),c.xp6(1),c.s9C("placeholder",n.language["None Selected"]),c.Q6J("items",n.criteria)("multiple",!1)("ngModel",n.criteriaSelected)("ngModelOptions",c.DdM(8,Ct))("clearable",!1)("searchable",!1)}}function St(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"ng-select",28),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).monthSelected=t})("change",function(){return c.CHM(a),c.oxw(2).changeFilter()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language.month_title),c.xp6(1),c.s9C("placeholder",n.language["None Selected"]),c.Q6J("items",n.month)("multiple",!1)("ngModel",n.monthSelected)("ngModelOptions",c.DdM(8,Ct))("clearable",!1)("searchable",!1)}}function Zt(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",29),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"ng-select",30),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).monthCount=t}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language.Time_Range),c.xp6(1),c.Q6J("items",n.monthArray)("multiple",!1)("ngModel",n.monthCount)("ngModelOptions",c.DdM(7,Ct))("clearable",!1)("searchable",!1)}}function xt(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"ng-select",31),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).rateSelected=t})("change",function(){return c.CHM(a),c.oxw(2).changeFilter()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language.rate),c.xp6(1),c.s9C("placeholder",n.language["None Selected"]),c.Q6J("items",n.rate)("multiple",!1)("ngModel",n.rateSelected)("ngModelOptions",c.DdM(8,Ct))("clearable",!1)("searchable",!1)}}var Ot=function(){return{width:"100%",height:"36px"}},Mt=function(){return{height:"36px"}};function It(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",32),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"p-calendar",33),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).startDate=t})("onSelect",function(){return c.CHM(a),c.oxw(2).changeDate()})("onInput",function(){return c.CHM(a),c.oxw(2).changeDate()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language["From Date"]),c.xp6(1),c.Akn(c.DdM(11,Ot)),c.s9C("placeholder",n.language["Select Date"]),c.Q6J("inputStyle",c.DdM(12,Mt))("autoZIndex",!0)("ngModel",n.startDate)("showIcon",!0)("ngModelOptions",c.DdM(13,Ct))("maxDate",n.maxDate)("minDate",n.minDate)}}function kt(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",32),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"p-calendar",34),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).endDate=t})("onSelect",function(){return c.CHM(a),c.oxw(2).changeDate()})("onInput",function(){return c.CHM(a),c.oxw(2).changeDate()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language["To Date"]),c.xp6(1),c.Akn(c.DdM(11,Ot)),c.s9C("placeholder",n.language["Select Date"]),c.Q6J("inputStyle",c.DdM(12,Mt))("autoZIndex",!0)("ngModel",n.endDate)("showIcon",!0)("ngModelOptions",c.DdM(13,Ct))("maxDate",n.maxDate)("minDate",n.startDate)}}function Ut(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",35),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"input",36),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).limit=t})("blur",function(){return c.CHM(a),c.oxw(2).changelimit()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language.limit),c.xp6(1),c.Q6J("ngModel",n.limit)}}function _t(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"label",14),c._uU(2),c.qZA(),c.TgZ(3,"ng-select",37),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw(2).directionSelected=t})("change",function(){return c.CHM(a),c.oxw(2).changeFilter()}),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(2),c.Oqu(n.language.direction),c.xp6(1),c.s9C("placeholder",n.language["None Selected"]),c.Q6J("items",n.directions)("multiple",!1)("ngModel",n.directionSelected)("ngModelOptions",c.DdM(8,Ct))("clearable",!1)("searchable",!1)}}function qt(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",38),c.TgZ(1,"div",39),c.TgZ(2,"div",40),c._uU(3),c.TgZ(4,"ngx-slider",41),c.NdJ("valueChange",function(t){return c.CHM(a),c.oxw(2).startTime=t})("highValueChange",function(t){return c.CHM(a),c.oxw(2).endTime=t})("valueChange",function(){return c.CHM(a),c.oxw(2).changeTimeRange()}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var n=c.oxw(2);c.xp6(3),c.AsE(" ",n.language["Time Range (Hours)"],": ",n.timeRange," "),c.xp6(1),c.Q6J("value",n.startTime)("highValue",n.endTime)("options",n.slideOptions)}}function Et(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"div",11),c.TgZ(2,"div",12),c.TgZ(3,"div",13),c.TgZ(4,"label",14),c._uU(5),c.TgZ(6,"span",15),c._uU(7,"*"),c.qZA(),c.qZA(),c.TgZ(8,"ng-select",16),c.NdJ("ngModelChange",function(t){return c.CHM(a),c.oxw().typeSelected=t})("change",function(){return c.CHM(a),c.oxw().changeType()}),c.YNc(9,Dt,1,1,"ng-template",17),c.YNc(10,Tt,1,1,"ng-template",18),c.qZA(),c.qZA(),c.YNc(11,At,4,9,"div",19),c.YNc(12,St,4,9,"div",19),c.YNc(13,Zt,4,8,"div",20),c.YNc(14,xt,4,9,"div",19),c.YNc(15,It,4,14,"div",21),c.YNc(16,kt,4,14,"div",21),c.YNc(17,Ut,4,2,"div",22),c.YNc(18,_t,4,9,"div",19),c.qZA(),c.TgZ(19,"div",23),c.TgZ(20,"button",24),c.NdJ("click",function(){return c.CHM(a),c.oxw().loadChartData()}),c._uU(21),c.qZA(),c.TgZ(22,"button",25),c.NdJ("click",function(){return c.CHM(a),c.oxw().clearFilter()}),c._uU(23),c.qZA(),c.qZA(),c.qZA(),c.YNc(24,qt,5,5,"div",26),c.qZA()}if(2&t){var n=c.oxw();c.xp6(5),c.hij("",n.language.type," "),c.xp6(3),c.s9C("placeholder",n.language["None Selected"]),c.Q6J("items",n.types)("searchable",!1)("ngModel",n.typeSelected)("ngModelOptions",c.DdM(19,Ct)),c.xp6(3),c.Q6J("ngIf",n.pageDetails.showCriteria),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showMonth),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showMonthCount),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showRate),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showStartDate),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showEndDate),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showLimit),c.xp6(1),c.Q6J("ngIf",n.pageDetails.showDirection),c.xp6(2),c.Q6J("disabled",1==n.service.btnDisabled),c.xp6(1),c.Oqu(n.language.run),c.xp6(1),c.Q6J("disabled",1==n.service.btnDisabled),c.xp6(1),c.hij("",n.language.Clear_Filters," "),c.xp6(1),c.Q6J("ngIf","rate"==n.typeSelected&&n.isOneDate)}}function Pt(t,e){1&t&&c._UZ(0,"app-usage",null,42)}function Rt(t,e){1&t&&c._UZ(0,"app-rate",null,43)}function Ht(t,e){1&t&&c._UZ(0,"app-applications",null,44)}function Nt(t,e){1&t&&c._UZ(0,"app-application-groups",null,45)}function Jt(t,e){1&t&&c._UZ(0,"app-monthly-usage",null,46)}function Yt(t,e){1&t&&c._UZ(0,"app-top-application-traffic",null,47)}function Ft(t,e){if(1&t){var a=c.EpF();c.TgZ(0,"div",48),c.TgZ(1,"h5",49),c._uU(2),c.qZA(),c.TgZ(3,"div"),c._uU(4),c.qZA(),c.TgZ(5,"button",50),c.NdJ("click",function(){return c.CHM(a).$implicit.dismiss("Cross click")}),c._UZ(6,"span",51),c.qZA(),c.qZA(),c.TgZ(7,"div",52),c.TgZ(8,"button",53),c.NdJ("click",function(){return c.CHM(a).$implicit.close("Save click")}),c._uU(9),c.qZA(),c.qZA()}if(2&t){var n=c.oxw();c.xp6(2),c.Oqu(n.modalTitle),c.xp6(2),c.hij(" ",n.modalInfo," "),c.xp6(5),c.hij(" ",n.language.Ok," ")}}var Lt=[{path:"",component:function(){var t=function(){function t(e,n,i,o,r,s,l,c,g,h){var u=this;a(this,t),this.customTranslateService=e,this.canlenderConfig=n,this.dialogService=i,this.commonOrgService=o,this.service=r,this.websocketservice=s,this.router=l,this.activatedRoute=c,this.titleService=g,this.sso=h,this.criteria=[],this.maxDate=new Date,this.startDate=new Date,this.endDate=new Date,this.minDate=new Date,this.groups=[],this.directions=[],this.Initialloading=!1,this.monthSelected="2020-06-01",this.rateSelected="Average",this.monthCount=3,this.isRate=!1,this.types=[],this.typeSelected="usage",this.metricSelected="Rate",this.month=[],this.monthArray=[],this.rate=[{name:"Average",value:"Average"},{name:"Peak",value:"Peak"}],this.startTime=0,this.endTime=25,this.isOneDate=!1,this.timeRange="0 - 24",this.hasClickRun=!1,this.slideOptions={floor:1,ceil:25,translate:function(t,e){return"<b>".concat(t<=73&&t>=1?t-1:24,"</b>")}},this.endpointID=sessionStorage.getItem("aggregate_Endpoint_Id")?JSON.parse(sessionStorage.getItem("aggregate_Endpoint_Id")):this.activatedRoute.snapshot.queryParamMap.get("id"),this.websocketservice.previousURL=this.router.url;var p=new Date;this.startDate=new Date(p.getTime()-5184e5),this.minDate=new Date(p.getTime()-23328e6),this.language=this.customTranslateService.defualtLanguage,this.setHideShowFilter(),this.customTranslateService.selectedLanguage.subscribe(function(t){u.language=t,u.monthArray=[{value:1,name:u.language.PastMonths["Past 1 month"]},{value:2,name:u.language.PastMonths["Past 2 months"]},{value:3,name:u.language.PastMonths["Past 3 months"]},{value:4,name:u.language.PastMonths["Past 4 months"]},{value:5,name:u.language.PastMonths["Past 5 months"]},{value:6,name:u.language.PastMonths["Past 6 months"]},{value:7,name:u.language.PastMonths["Past 7 months"]},{value:8,name:u.language.PastMonths["Past 8 months"]},{value:9,name:u.language.PastMonths["Past 9 months"]},{value:10,name:u.language.PastMonths["Past 10 months"]},{value:11,name:u.language.PastMonths["Past 11 months"]},{value:12,name:u.language.PastMonths["Past 12 months"]}],u.changeClenderlang(),u.intializeValues(),u.setTitle(u.router.url)}),this.setMonthData(),this.service.btnDisabled=!1}return i(t,[{key:"setTitle",value:function(t){t.includes("/cco/traffic/endpoints/reports")&&this.titleService.setTitle("".concat(this.language.Reports," - ").concat(this.language.Endpoints," - ").concat(this.language.Traffic," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"],"  "))}},{key:"ngOnInit",value:function(){this.setTitle(this.router.url),this.sso.setPageAccess(!0),this.criteriaSelected="usage",this.intializeValues(),this.limit=10,this.groupSelected="no",this.directionSelected="Down",this.monthArray=[{value:1,name:this.language.PastMonths["Past 1 month"]},{value:2,name:this.language.PastMonths["Past 2 months"]},{value:3,name:this.language.PastMonths["Past 3 months"]},{value:4,name:this.language.PastMonths["Past 4 months"]},{value:5,name:this.language.PastMonths["Past 5 months"]},{value:6,name:this.language.PastMonths["Past 6 months"]},{value:7,name:this.language.PastMonths["Past 7 months"]},{value:8,name:this.language.PastMonths["Past 8 months"]},{value:9,name:this.language.PastMonths["Past 9 months"]},{value:10,name:this.language.PastMonths["Past 10 months"]},{value:11,name:this.language.PastMonths["Past 11 months"]},{value:12,name:this.language.PastMonths["Past 12 months"]}]}},{key:"ngOnDestroy",value:function(){}},{key:"intializeValues",value:function(){this.types=[{name:"Usage",value:"usage"},{name:"Rate",value:"rate"},{name:this.language.Monthly_Usage,value:"monthly_usage"},{name:"Applications",value:"applications"},{name:"Application Groups",value:"application_groups"},{name:"Top Application Traffic",value:"top_application_traffic"}],this.rate=[{name:this.language.Average,value:"Average"},{name:this.language.Peak,value:"Peak"}],this.criteria=[{name:this.language.usage,value:"usage"},{name:this.language.rate,value:"rate"}],this.groups=[{name:this.language.Yes,value:"yes"},{name:this.language.No,value:"no"}],this.directions=[{name:this.language.Down,value:"Down"},{name:this.language.Up,value:"Up"},{name:this.language["Both(Down+Up)"],value:"both"}]}},{key:"changeDate",value:function(){var t=l(this.getISOEndOfDay(this.endDate)).diff(l(this.getISODate(this.startDate)),"hour");if(t>0)this.slideChangeDate(t);else{this.isOneDate=!1;var e=new Date(this.startDate);this.endDate=new Date(e.getTime()+864e5),this.endDate>this.maxDate&&(this.endDate=this.maxDate),t=l(this.getISOEndOfDay(this.endDate)).diff(l(this.getISODate(this.startDate)),"hour"),this.slideChangeDate(t)}}},{key:"slideChangeDate",value:function(t){if(t<=72){this.isOneDate=!0;var e=Object.assign({},this.slideOptions);e.ceil=24==t?25:48==t?49:72==t?73:25,this.startTime=1,this.endTime=24==t?25:48==t?49:72==t?73:25,this.timeRange=24==t?"0 - 24":48==t?"0 - 48":72==t?"0 - 72":"0 - 24",this.slideOptions=e}else this.isOneDate=!1}},{key:"changeTimeRange",value:function(){var t=this;setTimeout(function(){t.timeRange=(t.startTime-1).toString()+" - "+(t.endTime-1).toString()},500)}},{key:"changeFilter",value:function(){}},{key:"changeCriteria",value:function(){"rate"==this.criteriaSelected?(this.isRate=!0,this.directions=[{name:this.language.Down,value:"Down"},{name:this.language.Up,value:"Up"}],this.directionSelected="Down"):(this.isRate=!1,this.directions=[{name:this.language.Down,value:"Down"},{name:this.language.Up,value:"Up"},{name:this.language["Both(Down+Up)"],value:"both"}])}},{key:"loadChartData",value:function(){var t,e,a,n,i,o;if(!this.typeSelected)return this.modalTitle=this.language["Invalid input"],this.modalInfo=this.language.Select_Type_Reports,void this.openModalInfo();if(!this.validateStartEndDates())return this.modalTitle=this.language.Time_Period,void this.openModalInfo();this.limit>500&&(this.limit=500);var r={};r.criteriaSelected=this.criteriaSelected,r.startDate=this.startDate,r.endDate=this.endDate,r.limit=0==this.limit||this.limit?this.limit:10,r.directionSelected=this.directionSelected,r.rateSelected=this.rateSelected,r.monthCount=this.monthCount,r.metric=this.metricSelected,r.monthSelected=this.monthSelected,r.endpointID=this.endpointID,r.startTime=this.startTime,r.endTime=this.endTime,this.service.btnDisabled=!0,this.hasClickRun=!0,"usage"==this.typeSelected?null===(t=this.UsageComponent)||void 0===t||t.loadChartData(r):"rate"==this.typeSelected?null===(e=this.RateComponent)||void 0===e||e.loadChartData(r):"monthly_usage"==this.typeSelected?null===(a=this.MonthlyUsageComponent)||void 0===a||a.loadChartData(r):"applications"==this.typeSelected?null===(n=this.ApplicationsComponent)||void 0===n||n.loadChartData(r):"application_groups"==this.typeSelected?null===(i=this.ApplicationGroupsComponent)||void 0===i||i.loadChartData(r):"top_application_traffic"==this.typeSelected&&(null===(o=this.TopApplicationTrafficComponent)||void 0===o||o.loadChartData(r))}},{key:"setMonthData",value:function(){this.month=[];var t=new Date;this.month.push({name:this.formatDate(t),value:this.formatDateFull(t)});for(var e=0;e<3;e++){var a=new Date(t.getFullYear()-(t.getMonth()>0?0:1),(t.getMonth()-1+12)%12,1);this.month.push({name:this.formatDate(a),value:this.formatDateFull(a)}),t=a}this.monthSelected=this.month[0].value}},{key:"formatDateFull",value:function(t){return t.getFullYear()+"-"+this.formatDateComponent(t.getMonth()+1)+"-"+this.formatDateComponent(t.getDate())}},{key:"formatDate",value:function(t){return t.getFullYear()+"-"+this.formatDateComponent(t.getMonth()+1)}},{key:"formatDateComponent",value:function(t){return(t<10?"0":"")+t}},{key:"changeClenderlang",value:function(){sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?this.canlenderConfig.setTranslation({monthNames:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","D\xe9cembre"],dayNamesMin:["D","L","M","M","J","V","S"]}):sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")&&this.canlenderConfig.setTranslation({monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNamesMin:["S","M","T","W","T","F","S"]})}},{key:"validateStartEndDates",value:function(){return!(this.pageDetails.showStartDate&&this.pageDetails.showEndDate&&(this.startDate&&this.endDate?this.getISODate(this.startDate)>this.getISODate(this.endDate)&&(this.modalInfo=this.language["Time range not valid, end time should be later than start time."],1):(this.modalInfo="Please enter the valid input dates.",1)))}},{key:"openModalInfo",value:function(){this.modalRef=this.dialogService.open(this.showInfoModal,{size:"lg",centered:!0,windowClass:"custom-modal"})}},{key:"changelimit",value:function(){this.limit<3&&(this.limit=3),this.limit>500&&(this.limit=500)}},{key:"pageErrorHandle",value:function(t){var e;e=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.commonOrgService.openErrorAlert(e),this.commonOrgService.pageScrollTop(),this.loading=!1}},{key:"getISODate",value:function(t){var e=new Date(t),a=e.getFullYear(),n="".concat(e.getMonth()+1),i="".concat(e.getDate());return n.length<2&&(n="0".concat(n)),i.length<2&&(i="0".concat(i)),new Date("".concat(a,"-").concat(n,"-").concat(i,"T00:00:00Z"))}},{key:"getISOEndOfDay",value:function(t){var e=new Date(t);e.setDate(new Date(e).getDate()+1);var a=e.getFullYear(),n="".concat(e.getMonth()+1),i="".concat(e.getDate());return n.length<2&&(n="0".concat(n)),i.length<2&&(i="0".concat(i)),"".concat(a,"-").concat(n,"-").concat(i,"T00:00:00Z")}},{key:"changeType",value:function(){this.hasClickRun=!1,this.service.btnDisabled&&(this.service.btnDisabled=!1),this.setHideShowFilter()}},{key:"setHideShowFilter",value:function(){var t=new Date;this.startDate=new Date(t.getTime()-5184e5),this.endDate=new Date,"usage"==this.typeSelected?this.pageDetails={main_route:"endpoints",sub_route:"traffic",showStartDate:!0,showEndDate:!0,showLimit:!1,showDirection:!1}:"rate"==this.typeSelected?this.pageDetails={main_route:"endpoints",sub_route:"rate",showStartDate:!0,showEndDate:!0,showDirection:!1,showRate:!0}:"monthly_usage"==this.typeSelected?this.pageDetails={mmain_route:"endpoints",sub_route:"monthly_usage",showDirection:!1,showMonthCount:!0}:"applications"==this.typeSelected||"application_groups"==this.typeSelected?this.pageDetails={main_route:"endpoints",sub_route:"applications"==this.typeSelected?"applications":"application_groups",showCriteria:!0,showStartDate:!0,showEndDate:!0,showLimit:!0,showDirection:!0}:"top_application_traffic"==this.typeSelected&&(this.pageDetails={main_route:"endpoints",sub_route:"top_application_traffic",showStartDate:!0,showEndDate:!0,showLimit:!0,showDirection:!1,showRate:!0}),this.changeCriteria()}},{key:"keyPress",value:function(t){var e=String.fromCharCode(null==t?void 0:t.charCode);8!=t.keyCode&&!/[0-9\+\-\ ]/.test(e)&&t.preventDefault()}},{key:"clearFilter",value:function(){this.rateSelected="Average",this.monthCount=3,this.metricSelected="Rate",this.timeRange="0 - 24",this.criteriaSelected="usage",this.limit=10,this.groupSelected="no",this.directionSelected="Down",this.startTime=0,this.endTime=25,this.isRate=!1,this.isOneDate=!1;var t=new Date;this.startDate=new Date(t.getTime()-5184e5),this.maxDate=new Date,this.endDate=new Date,this.setHideShowFilter(),this.hasClickRun&&this.loadChartData()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.d),c.Y36(h.b4),c.Y36(u.FF),c.Y36(p.v),c.Y36(d.h),c.Y36(f.i),c.Y36(s.F0),c.Y36(s.gz),c.Y36(m.Dx),c.Y36(v.t6))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-reports"]],viewQuery:function(t,e){var a;(1&t&&(c.Gf(pt,5),c.Gf(dt,5),c.Gf(ft,5),c.Gf(mt,5),c.Gf(vt,5),c.Gf(bt,5),c.Gf(wt,7)),2&t)&&(c.iGM(a=c.CRH())&&(e.UsageComponent=a.first),c.iGM(a=c.CRH())&&(e.TopApplicationTrafficComponent=a.first),c.iGM(a=c.CRH())&&(e.RateComponent=a.first),c.iGM(a=c.CRH())&&(e.MonthlyUsageComponent=a.first),c.iGM(a=c.CRH())&&(e.ApplicationsComponent=a.first),c.iGM(a=c.CRH())&&(e.ApplicationGroupsComponent=a.first),c.iGM(a=c.CRH())&&(e.showInfoModal=a.first))},decls:11,vars:8,consts:[[1,"col-md-12","mt-4"],["class","loader",4,"ngIf"],["class","main-div",4,"ngIf"],[4,"ngIf"],["class","col-md-12"],["showInfoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"main-div"],[1,"filter-section","filter-elemnts","pt-2"],[1,"filter-wrapper","mb-3"],[1,"custom-selectbox","col-12","ele-wrap","col-sm-6","col-md-3","col-lg-3"],[1,"filter-label"],[1,"error"],["id","type","bindLabel","name","bindValue","value",3,"items","placeholder","searchable","ngModel","ngModelOptions","ngModelChange","change"],["ng-label-tmp",""],["ng-option-tmp",""],["class","custom-selectbox col-12 ele-wrap col-sm-6 col-md-3 col-lg-3",4,"ngIf"],["class","col-6 col-lg-3 col-md-3 col-sm-4 col-xl-3 custom-selectbox ele-wrap",4,"ngIf"],["class","cal-pick col-12 ele-wrap col-sm-6 col-md-3 col-lg-3",4,"ngIf"],["class","round-corner  col-12 ele-wrap col-sm-6 col-md-3 col-lg-3",4,"ngIf"],[1,"col-md-12"],["id","filter-submit-btn","type","button",1,"btn-default","primary",3,"disabled","click"],["type","button",1,"btn-default","btn-dft","ml-2",3,"disabled","click"],["class","container",4,"ngIf"],["id","usage_criteria","bindLabel","name","bindValue","value",3,"items","multiple","placeholder","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["id","month","bindLabel","name","bindValue","value",3,"items","multiple","placeholder","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],[1,"col-6","col-lg-3","col-md-3","col-sm-4","col-xl-3","custom-selectbox","ele-wrap"],["id","monthCount","bindLabel","name","bindValue","value",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange"],["id","rate","bindLabel","name","bindValue","value",3,"items","multiple","placeholder","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],[1,"cal-pick","col-12","ele-wrap","col-sm-6","col-md-3","col-lg-3"],["id","start_date","appendTo","body","dateFormat","mm-dd-yy",3,"inputStyle","autoZIndex","placeholder","ngModel","showIcon","ngModelOptions","maxDate","minDate","ngModelChange","onSelect","onInput"],["id","end_date","appendTo","body","dateFormat","mm-dd-yy",3,"inputStyle","autoZIndex","ngModel","placeholder","showIcon","ngModelOptions","maxDate","minDate","ngModelChange","onSelect","onInput"],[1,"round-corner","col-12","ele-wrap","col-sm-6","col-md-3","col-lg-3"],["id","limit","name","limit","type","number","min","3","max","500",1,"form-control",3,"ngModel","ngModelChange","blur"],["id","direction","bindLabel","name","bindValue","value",3,"items","multiple","placeholder","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],[1,"container"],[1,"row","mt-2"],[1,"col-md-12","px-0"],[3,"value","highValue","options","valueChange","highValueChange"],["UsageComponent",""],["RateComponent",""],["ApplicationsComponent",""],["ApplicationGroupsComponent",""],["MonthlyUsageComponent",""],["TopApplicationTrafficComponent",""],[1,"modal-header","d-block"],["id","showInfoModal",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","add-device-model"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3","px-3",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.YNc(1,yt,5,1,"div",1),c.qZA(),c.YNc(2,Et,25,20,"div",2),c.YNc(3,Pt,2,0,"app-usage",3),c.YNc(4,Rt,2,0,"app-rate",3),c.YNc(5,Ht,2,0,"app-applications",3),c.YNc(6,Nt,2,0,"app-application-groups",3),c.YNc(7,Jt,2,0,"app-monthly-usage",3),c.YNc(8,Yt,2,0,"app-top-application-traffic",3),c.YNc(9,Ft,10,3,"ng-template",4,5,c.W1O)),2&t&&(c.xp6(1),c.Q6J("ngIf",e.Initialloading),c.xp6(1),c.Q6J("ngIf",!e.Initialloading),c.xp6(1),c.Q6J("ngIf","usage"==e.typeSelected),c.xp6(1),c.Q6J("ngIf","rate"==e.typeSelected),c.xp6(1),c.Q6J("ngIf","applications"==e.typeSelected),c.xp6(1),c.Q6J("ngIf","application_groups"==e.typeSelected),c.xp6(1),c.Q6J("ngIf","monthly_usage"==e.typeSelected),c.xp6(1),c.Q6J("ngIf","top_application_traffic"==e.typeSelected))},directives:[r.O5,b.w9,w.JJ,w.On,b.bb,b.Z2,y.f,w.qQ,w.Fd,w.wV,w.Fj,D.w5,I,N,G,W,it,ut],styles:[".run-btn[_ngcontent-%COMP%]{background-color:#6c757d!important;color:#fff!important}.run-btn-active[_ngcontent-%COMP%]{background-color:#0173bc!important;color:#fff!important}label[_ngcontent-%COMP%]{font-weight:normal!important}.filter-wrapper[_ngcontent-%COMP%]{min-width:250px;width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-start}.filter-wrapper[_ngcontent-%COMP%]   .ele-wrap[_ngcontent-%COMP%]{margin-bottom:20px}@media screen and (min-width: 1140px){.filter-wrapper[_ngcontent-%COMP%]   .ele-wrap[_ngcontent-%COMP%]:nth-child(4n+4){padding-right:0}}.custom-btn[_ngcontent-%COMP%]{background-color:#0173bc;border:1px solid #44367D;color:#fff;font-weight:bold;min-width:82px;height:2.4em;padding:0 15px;border-radius:20px;font-size:14px}.custom-btn[_ngcontent-%COMP%]:disabled{background-color:#6a6b6f;border:1px solid #44367D}.filter-section[_ngcontent-%COMP%]   .w-15[_ngcontent-%COMP%]{width:15%!important;min-width:18%!important;max-width:15%!important}.filter-elemnts[_ngcontent-%COMP%]{padding-left:15px!important}.filter-elemnts[_ngcontent-%COMP%]   .round-corner[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff!important}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:75%!important}.schedule-modal-title[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:22px;letter-spacing:0em;text-align:left}"]}),t}()}],Qt=function(){var t=i(function t(){a(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.ez,s.Bz.forChild(Lt)],s.Bz]}),t}(),Gt=o(25317),jt=o(23830),zt=o(23771),Bt=function(){var t=i(function t(){a(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.ez,Qt,b.A0,w.u5,y._8,Gt.l,jt.o,u.IJ,zt.T,D.kx]]}),t}()}}])}();