"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[7423],{37423:function(e,i,t){t.d(i,{t:function(){return x}});var r=t(3679),o=t(92340),s=t(37716),l=t(7450),n=t(12664),a=t(43721),u=t(49342),c=t(67798),p=t(39075),g=t(89097),d=t(39895),m=t(53668),h=t(38583);const f=["removecommandInfoModal"];function Z(e,i){if(1&e){const e=s.EpF();s.TgZ(0,"div",29),s.TgZ(1,"span",30),s._UZ(2,"img",31),s.qZA(),s.TgZ(3,"button",4),s.NdJ("click",function(){return s.CHM(e),s.oxw().success=!1}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"span",32),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.language[e.successInfo]||e.successInfo,s.oJD)}}function v(e,i){if(1&e&&(s.TgZ(0,"div",33),s.TgZ(1,"div",34),s.TgZ(2,"div",35),s.TgZ(3,"span",36),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function A(e,i){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p",37),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language[e.emailmsg])}}function I(e,i){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p",37),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language["Please Enter a valid URL"])}}function b(e,i){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p",37),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language["Please Enter a valid URL"])}}function q(e,i){if(1&e&&(s.TgZ(0,"div",33),s.TgZ(1,"div",34),s.TgZ(2,"div",35),s.TgZ(3,"span",36),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(4),s.Oqu(e.language.Loading)}}function U(e,i){if(1&e){const e=s.EpF();s.TgZ(0,"div",38),s.TgZ(1,"h5",39),s._uU(2),s.qZA(),s.TgZ(3,"button",40),s.NdJ("click",function(){return s.CHM(e).$implicit.dismiss("Cross click")}),s._UZ(4,"span",41),s.qZA(),s.qZA(),s.TgZ(5,"div",42),s.YNc(6,q,5,1,"div",8),s.TgZ(7,"div",43),s.TgZ(8,"div",44),s._uU(9),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",45),s.TgZ(11,"button",46),s.NdJ("click",function(){return s.CHM(e),s.oxw().DeleteInfo()}),s._uU(12),s.qZA(),s.TgZ(13,"button",47),s.NdJ("click",function(){return s.CHM(e).$implicit.close("Save click")}),s._uU(14),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language["Delete Support Information"]),s.xp6(4),s.Q6J("ngIf",e.loading),s.xp6(3),s.hij(" ",e.language["Are you sure you want to delete Support information"]," ? "),s.xp6(3),s.hij(" ",e.language.Delete," "),s.xp6(2),s.hij(" ",e.language.Cancel," ")}}let x=(()=>{class e{constructor(e,i,t,r,o,s,l,n,a){this.translateService=e,this.dialogService=i,this.validatorService=t,this.commonOrgService=r,this.service=o,this.titleService=s,this.sso=l,this.router=n,this.organizationApiService=a;let u=this.router.url;this.ADMIN_ORG_ID=this.sso.getOrganizationID(u),this.SPID=this.sso.getAdminSPID(this.ADMIN_ORG_ID);let c=this.sso.getRedirectModule(u);this.titleService.setTitle(`CommandIQ Support Information - ${"systemAdministration"===c?"System Administration":"Administration"} - Calix Cloud`),this.commonOrgService.currentPageAdder("commandIQ")}ngOnInit(){let e=window.location.host;this.isDev=`${o.N.API_BASE}`.indexOf("/dev.api.calix.ai")>-1||e.indexOf("localhost")>-1,this.SPID?this.getSupportInfo():this.getOrgInfoSubs=this.organizationApiService.orgInformation(this.ADMIN_ORG_ID).subscribe(e=>{this.sso.setAdminOrgInfo(e),e&&e.spId&&(this.SPID=e.spId,this.getSupportInfo())},e=>{}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.CommanDIQForm=new r.cw({companyAddress:new r.NI(""),supportPhoneNumber:new r.NI(""),supportEmail:new r.NI(""),supportUrl:new r.NI(""),billingUrl:new r.NI(""),spid:new r.NI(this.SPID)})}get modalForm(){return this.CommanDIQForm.controls}updateInfo(){this.submitted=!0,this.CommanDIQForm.value.supportEmail&&this.Emailchange(this.CommanDIQForm.value.supportEmail),this.CommanDIQForm.value.supportUrl&&this.urlValidation(this.CommanDIQForm.value.supportUrl,"supportUrl"),this.CommanDIQForm.value.billingUrl&&this.urlValidation(this.CommanDIQForm.value.billingUrl,"billingUrl"),(!this.CommanDIQForm.value.supportUrl&&!this.CommanDIQForm.value.supportEmail||!(this.emailerror||this.UrLError||this.UrLErrorForBilling))&&(this.CommanDIQForm.patchValue({spid:this.SPID}),this.service.UpdateSupportInfo(this.CommanDIQForm.value).subscribe(e=>{this.loading=!1,this.showSuccessMessage("Successfully Updated"),this.success=!0,this.deleteDisabled=!0,this.getSupportInfo(),this.isError&&(this.isError=!1,this.warningMessage="")},e=>{this.loading=!1,this.pageErrorHandle(e)}))}showSuccessMessage(e){this.closeAlert(),this.successInfo=e,this.success=!0,setTimeout(()=>{this.success=!1},2500)}allowNumersOnly(){this.phonearray=this.CommanDIQForm.value.supportPhoneNumber.split("");var e=new RegExp("^[0-9+()-]+$");this.phonearray=this.phonearray.filter(i=>e.test(i));let i=this.phonearray.join("");return this.CommanDIQForm.patchValue({supportPhoneNumber:i}),!1}getSupportInfo(){this.loading=!0,this.service.fetchSupportInfo(this.SPID).subscribe(e=>{this.loading=!1,e&&this.CommanDIQForm.patchValue({supportPhoneNumber:null==e?void 0:e.supportPhoneNumber,supportEmail:null==e?void 0:e.supportEmail,supportUrl:null==e?void 0:e.supportUrl,billingUrl:null==e?void 0:e.billingUrl,companyAddress:null==e?void 0:e.companyAddress}),this.emailerror=!1,this.UrLError=!1,this.UrLErrorForBilling=!1,this.supportInfo=e instanceof Array?e:[e],this.loading=!1},e=>{this.pageErrorHandle(e)})}pageErrorHandle(e){this.warningMessage=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.isError=!0,this.loading=!1}DeleteInfo(){this.loading=!0,this.submitted=!1,this.service.DeleteSupportInfo().subscribe(e=>{this.loading=!1,this.successInfo="Successfully Deleted",this.closeAllModal(),this.deleteDisabled=!1,this.success=!0,this.getSupportInfo()},e=>{this.pageErrorHandle(e)})}closeAllModal(){this.loading=!1,this.dialogService.dismissAll()}closeAlert(){this.isError=!1,this.success=!1}openDeletemodel(){this.getSupportInfo()}Emailchange(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?(this.emailmsg="",void(this.emailerror=!1)):""!=e?(this.emailmsg="You have entered an invalid email address!",void(this.emailerror=!0)):(this.emailmsg="",void(this.emailerror=!1))}urlValidation(e,i){if("billingUrl"===i)if(e){let i=this.validatorService.urlValidation(e);this.UrLErrorForBilling=i.error}else this.UrLErrorForBilling=!!(e="");else if(e){let i=this.validatorService.urlValidation(e);this.UrLError=i.error}else this.UrLError=!!(e="")}clsAlphaNoOnly(e){var i=new RegExp("^[0-9:+()-]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);return!!i.test(t)||(e.preventDefault(),!1)}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(s.Y36(l.s),s.Y36(n.FF),s.Y36(a.o),s.Y36(u.v),s.Y36(c.E),s.Y36(p.Dx),s.Y36(g.t6),s.Y36(d.F0),s.Y36(m.F))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-command-iq-white-label"]],viewQuery:function(e,i){if(1&e&&s.Gf(f,7),2&e){let e;s.iGM(e=s.CRH())&&(i.removecommandInfoModal=e.first)}},decls:46,vars:19,consts:[["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"w-100","alert","alert-danger","fade","show",3,"hidden"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"position-relative"],[1,"pr-2"],["class","loader",4,"ngIf"],[3,"formGroup"],[1,"form-group","ccl-form","row","mt-3"],["for","address",1,"col-sm-2","col-form-label","py-0"],[1,"col-sm-10"],["type","text","id","address","oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","supportPhoneNumber",3,"placeholder","keypress","input"],[1,"form-group","ccl-form","row"],["for","PhoneNumber",1,"col-sm-2","col-form-label"],["type","text","oninput","this.value = this.value.replace(/[^a-zA-Z0-9!@#:/\\$%\\^\\&*\\)\\(+=._-]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","supportEmail",3,"placeholder","keyup"],["email",""],[4,"ngIf"],["for","email",1,"col-sm-2","col-form-label"],["type","url","oninput","this.value = this.value.replace(/[^a-zA-Z0-9!@#:/\\$%\\^\\&*\\)\\(+=._-]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","supportUrl",3,"placeholder","keyup"],["url",""],["type","url","oninput","this.value = this.value.replace(/[^a-zA-Z0-9!@#:/\\$%\\^\\&*\\)\\(+=._-]/g, '').replace(/(\\..?)\\../g, '$1')","formControlName","billingUrl",3,"placeholder","keyup"],["Billurl",""],[1,"mt-4","pt-2"],["type","submit","id","ccoOrgAdminSubmitBtn",1,"btn-default","primary","mr-3",3,"click"],["type","button","id","ccoOrgAdminCancelBtn",1,"btn-default","btn-dft",3,"click"],["class","col-md-12"],["removecommandInfoModal",""],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mandatory-msg","mb-0"],[1,"modal-header","d-block"],["id","addModal",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"ccl-form","my-2"],[1,"del-dev"],[1,"modal-footer"],["type","button",1,"btn-default","primary","px-3","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","px-3","px-3","m-2",3,"click"]],template:function(e,i){if(1&e){const e=s.EpF();s.YNc(0,Z,6,1,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"span",2),s._UZ(3,"img",3),s.qZA(),s.TgZ(4,"button",4),s.NdJ("click",function(){return i.closeAlert()}),s._UZ(5,"span"),s.qZA(),s._UZ(6,"div",5),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"h4",7),s._uU(9),s.qZA(),s.YNc(10,v,5,1,"div",8),s.TgZ(11,"form"),s.TgZ(12,"div",9),s.TgZ(13,"div",10),s.TgZ(14,"label",11),s._uU(15),s.qZA(),s.TgZ(16,"div",12),s.TgZ(17,"input",13),s.NdJ("keypress",function(e){return i.clsAlphaNoOnly(e)})("input",function(){return i.allowNumersOnly()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",14),s.TgZ(19,"label",15),s._uU(20),s.qZA(),s.TgZ(21,"div",12),s.TgZ(22,"input",16,17),s.NdJ("keyup",function(){s.CHM(e);const t=s.MAs(23);return i.Emailchange(t.value)}),s.qZA(),s.YNc(24,A,3,1,"div",18),s.qZA(),s.qZA(),s.TgZ(25,"div",14),s.TgZ(26,"label",19),s._uU(27),s.qZA(),s.TgZ(28,"div",12),s.TgZ(29,"input",20,21),s.NdJ("keyup",function(){s.CHM(e);const t=s.MAs(30);return i.urlValidation(t.value,"supportUrl")}),s.qZA(),s.YNc(31,I,3,1,"div",18),s.qZA(),s.qZA(),s.TgZ(32,"div",14),s.TgZ(33,"label",19),s._uU(34),s.qZA(),s.TgZ(35,"div",12),s.TgZ(36,"input",22,23),s.NdJ("keyup",function(){s.CHM(e);const t=s.MAs(37);return i.urlValidation(t.value,"billingUrl")}),s.qZA(),s.YNc(38,b,3,1,"div",18),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(39,"div",24),s.TgZ(40,"button",25),s.NdJ("click",function(){return i.updateInfo()}),s._uU(41),s.qZA(),s.TgZ(42,"button",26),s.NdJ("click",function(){return i.openDeletemodel()}),s._uU(43),s.qZA(),s.qZA(),s.qZA(),s.YNc(44,U,15,5,"ng-template",27,28,s.W1O)}2&e&&(s.Q6J("ngIf",i.success),s.xp6(1),s.Q6J("hidden",!i.isError),s.xp6(5),s.Q6J("innerHtml",i.warningMessage,s.oJD),s.xp6(3),s.Oqu(i.language["CommandIQ Support Information"]),s.xp6(1),s.Q6J("ngIf",i.loading),s.xp6(2),s.Q6J("formGroup",i.CommanDIQForm),s.xp6(3),s.hij("",i.language["Support Phone Number"]," "),s.xp6(2),s.s9C("placeholder",i.language["Support Phone Number"]),s.xp6(3),s.hij("",i.language["Support Email"]," "),s.xp6(2),s.s9C("placeholder",i.language["Support Email"]),s.xp6(2),s.Q6J("ngIf",i.emailerror),s.xp6(3),s.hij("",i.language["Support URL"]," "),s.xp6(2),s.s9C("placeholder",i.language["Support URL"]),s.xp6(2),s.Q6J("ngIf",i.UrLError),s.xp6(3),s.hij("",i.language["Billing URL"]," "),s.xp6(2),s.s9C("placeholder",i.language["Billing URL"]),s.xp6(2),s.Q6J("ngIf",i.UrLErrorForBilling),s.xp6(3),s.hij(" ",i.language.Update," "),s.xp6(2),s.hij(" ",i.language.Cancel," "))},directives:[h.O5,r._Y,r.JL,r.F,r.sg,r.Fj,r.JJ,r.u],styles:[""]}),e})()}}]);