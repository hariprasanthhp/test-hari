!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(n=i.key,s=void 0,"symbol"==typeof(s=function(t,e){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"))?s:String(s)),i)}var n,s}function a(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[8370],{38023:function(t,e){var a,i,n;!function(s){"use strict";var r=s.setTimeout,o=s.clearTimeout,c=s.XMLHttpRequest,l=s.XDomainRequest,h=s.ActiveXObject,p=s.EventSource,u=s.document,d=s.Promise,g=s.fetch,f=s.Response,v=s.TextDecoder,b=s.TextEncoder,m=s.AbortController;if("undefined"!=typeof window&&!("readyState"in u)&&null==u.body&&(u.readyState="loading",window.addEventListener("load",function(t){u.readyState="complete"},!1)),null==c&&null!=h&&(c=function(){return new h("Microsoft.XMLHTTP")}),null==Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),Date.now||(Date.now=function(){return(new Date).getTime()}),null==m){var x=g;g=function(t,e){var a=e.signal;return x(t,{headers:e.headers,credentials:e.credentials,cache:e.cache}).then(function(t){var e=t.body.getReader();return a._reader=e,a._aborted&&a._reader.cancel(),{status:t.status,statusText:t.statusText,headers:t.headers,body:{getReader:function(){return e}}}})},m=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function y(){this.bitsNeeded=0,this.codePoint=0}y.prototype.decode=function(t){function e(t,e,a){if(1===a)return t>=128>>e&&t<<e<=2047;if(2===a)return t>=2048>>e&&t<<e<=55295||t>=57344>>e&&t<<e<=65535;if(3===a)return t>=65536>>e&&t<<e<=1114111;throw new Error}function a(t,e){if(6===t)return e>>6>15?3:e>31?2:1;if(12===t)return e>15?3:2;if(18===t)return 3;throw new Error}for(var i=65533,n="",s=this.bitsNeeded,r=this.codePoint,o=0;o<t.length;o+=1){var c=t[o];0!==s&&(c<128||c>191||!e(r<<6|63&c,s-6,a(s,r)))&&(s=0,r=i,n+=String.fromCharCode(r)),0===s?(c>=0&&c<=127?(s=0,r=c):c>=192&&c<=223?(s=6,r=31&c):c>=224&&c<=239?(s=12,r=15&c):c>=240&&c<=247?(s=18,r=7&c):(s=0,r=i),0!==s&&!e(r,s,a(s,r))&&(s=0,r=i)):(s-=6,r=r<<6|63&c),0===s&&(r<=65535?n+=String.fromCharCode(r):(n+=String.fromCharCode(55296+(r-65535-1>>10)),n+=String.fromCharCode(56320+(r-65535-1&1023))))}return this.bitsNeeded=s,this.codePoint=r,n},(null==v||null==b||!function(){try{return"test"===(new v).decode((new b).encode("test"),{stream:!0})}catch(t){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+t)}return!1}())&&(v=y);var T=function(){};function w(t){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=T,this.onload=T,this.onerror=T,this.onreadystatechange=T,this._contentType="",this._xhr=t,this._sendTimeout=0,this._abort=T}function C(t){return t.replace(/[A-Z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)+32)})}function D(t){for(var e=Object.create(null),a=t.split("\r\n"),i=0;i<a.length;i+=1){var n=a[i].split(": "),s=n.shift(),r=n.join(": ");e[C(s)]=r}this._map=e}function O(){}function A(t){this._headers=t}function k(){}function P(){this._listeners=Object.create(null)}function Z(t){r(function(){throw t},0)}function S(t){this.type=t,this.target=void 0}function M(t,e){S.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function _(t,e){S.call(this,t),this.status=e.status,this.statusText=e.statusText,this.headers=e.headers}function L(t,e){S.call(this,t),this.error=e.error}w.prototype.open=function(t,e){this._abort(!0);var a=this,i=this._xhr,n=1,s=0;this._abort=function(t){0!==a._sendTimeout&&(o(a._sendTimeout),a._sendTimeout=0),(1===n||2===n||3===n)&&(n=4,i.onload=T,i.onerror=T,i.onabort=T,i.onprogress=T,i.onreadystatechange=T,i.abort(),0!==s&&(o(s),s=0),t||(a.readyState=4,a.onabort(null),a.onreadystatechange())),n=0};var l=function(){if(1===n){var t=0,e="",s=void 0;if("contentType"in i)t=200,e="OK",s=i.contentType;else try{t=i.status,e=i.statusText,s=i.getResponseHeader("Content-Type")}catch(r){t=0,e="",s=void 0}0!==t&&(n=2,a.readyState=2,a.status=t,a.statusText=e,a._contentType=s,a.onreadystatechange())}},h=function(){if(l(),2===n||3===n){n=3;var t="";try{t=i.responseText}catch(e){}a.readyState=3,a.responseText=t,a.onprogress()}},p=function(t,e){if((null==e||null==e.preventDefault)&&(e={preventDefault:T}),h(),1===n||2===n||3===n){if(n=4,0!==s&&(o(s),s=0),a.readyState=4,"load"===t)a.onload(e);else if("error"===t)a.onerror(e);else{if("abort"!==t)throw new TypeError;a.onabort(e)}a.onreadystatechange()}},u=function t(){s=r(function(){t()},500),3===i.readyState&&h()};"onload"in i&&(i.onload=function(t){p("load",t)}),"onerror"in i&&(i.onerror=function(t){p("error",t)}),"onabort"in i&&(i.onabort=function(t){p("abort",t)}),"onprogress"in i&&(i.onprogress=h),"onreadystatechange"in i&&(i.onreadystatechange=function(t){!function(t){null!=i&&(4===i.readyState?(!("onload"in i)||!("onerror"in i)||!("onabort"in i))&&p(""===i.responseText?"error":"load",t):3===i.readyState?"onprogress"in i||h():2===i.readyState&&l())}(t)}),("contentType"in i||!("ontimeout"in c.prototype))&&(e+=(-1===e.indexOf("?")?"?":"&")+"padding=true"),i.open(t,e,!0),"readyState"in i&&(s=r(function(){u()},0))},w.prototype.abort=function(){this._abort(!1)},w.prototype.getResponseHeader=function(t){return this._contentType},w.prototype.setRequestHeader=function(t,e){var a=this._xhr;"setRequestHeader"in a&&a.setRequestHeader(t,e)},w.prototype.getAllResponseHeaders=function(){return null!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},w.prototype.send=function(){if("ontimeout"in c.prototype&&("sendAsBinary"in c.prototype||"mozAnon"in c.prototype)||null==u||null==u.readyState||"complete"===u.readyState){var t=this._xhr;"withCredentials"in t&&(t.withCredentials=this.withCredentials);try{t.send(void 0)}catch(a){throw a}}else{var e=this;e._sendTimeout=r(function(){e._sendTimeout=0,e.send()},4)}},D.prototype.get=function(t){return this._map[C(t)]},null!=c&&null==c.HEADERS_RECEIVED&&(c.HEADERS_RECEIVED=2),O.prototype.open=function(t,e,a,i,n,s,r){t.open("GET",n);var o=0;for(var l in t.onprogress=function(){var e=t.responseText.slice(o);o+=e.length,a(e)},t.onerror=function(t){t.preventDefault(),i(new Error("NetworkError"))},t.onload=function(){i(null)},t.onabort=function(){i(null)},t.onreadystatechange=function(){if(t.readyState===c.HEADERS_RECEIVED){var a=t.status,i=t.statusText,n=t.getResponseHeader("Content-Type"),s=t.getAllResponseHeaders();e(a,i,n,new D(s))}},t.withCredentials=s,r)Object.prototype.hasOwnProperty.call(r,l)&&t.setRequestHeader(l,r[l]);return t.send(),t},A.prototype.get=function(t){return this._headers.get(t)},k.prototype.open=function(t,e,a,i,n,s,r){var o=null,c=new m,l=c.signal,h=new v;return g(n,{headers:r,credentials:s?"include":"same-origin",signal:l,cache:"no-store"}).then(function(t){return o=t.body.getReader(),e(t.status,t.statusText,t.headers.get("Content-Type"),new A(t.headers)),new d(function(t,e){!function i(){o.read().then(function(e){if(e.done)t(void 0);else{var n=h.decode(e.value,{stream:!0});a(n),i()}}).catch(function(t){e(t)})}()})}).catch(function(t){if("AbortError"!==t.name)return t}).then(function(t){i(t)}),{abort:function(){null!=o&&o.cancel(),c.abort()}}},P.prototype.dispatchEvent=function(t){t.target=this;var e=this._listeners[t.type];if(null!=e)for(var a=e.length,i=0;i<a;i+=1){var n=e[i];try{"function"==typeof n.handleEvent?n.handleEvent(t):n.call(this,t)}catch(s){Z(s)}}},P.prototype.addEventListener=function(t,e){t=String(t);var a=this._listeners,i=a[t];null==i&&(a[t]=i=[]);for(var n=!1,s=0;s<i.length;s+=1)i[s]===e&&(n=!0);n||i.push(e)},P.prototype.removeEventListener=function(t,e){t=String(t);var a=this._listeners,i=a[t];if(null!=i){for(var n=[],s=0;s<i.length;s+=1)i[s]!==e&&n.push(i[s]);0===n.length?delete a[t]:a[t]=n}},M.prototype=Object.create(S.prototype),_.prototype=Object.create(S.prototype),L.prototype=Object.create(S.prototype);var E=/^text\/event\-stream(;.*)?$/i,j=function(t,e){var a=null==t?e:parseInt(t,10);return a!=a&&(a=e),U(a)},U=function(t){return Math.min(Math.max(t,1e3),18e6)},I=function(t,e,a){try{"function"==typeof e&&e.call(t,a)}catch(i){Z(i)}};function N(t,e){P.call(this),e=e||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,function(t,e,a){e=String(e);var i=Boolean(a.withCredentials),n=a.lastEventIdQueryParameterName||"lastEventId",s=U(1e3),h=j(a.heartbeatTimeout,45e3),p="",u=s,d=!1,g=0,f=a.headers||{},v=a.Transport,b=F&&null==v?void 0:new w(null!=v?new v:null!=c&&"withCredentials"in c.prototype||null==l?new c:new l),m=null!=v&&"string"!=typeof v?new v:null==b?new k:new O,x=void 0,y=0,T=-1,C="",D="",A="",P="",Z=0,S=0,N=0,R=function(e,a,i,n){if(0===T)if(200===e&&null!=i&&E.test(i)){T=1,d=Date.now(),u=s,t.readyState=1;var r=new _("open",{status:e,statusText:a,headers:n});t.dispatchEvent(r),I(t,t.onopen,r)}else{var o="";200!==e?(a&&(a=a.replace(/\s+/g," ")),o="EventSource's response has a status "+e+" "+a+" that is not 200. Aborting the connection."):o="EventSource's response has a Content-Type specifying an unsupported type: "+(null==i?"-":i.replace(/\s+/g," "))+". Aborting the connection.",V(),r=new _("error",{status:e,statusText:a,headers:n}),t.dispatchEvent(r),I(t,t.onerror,r),console.error(o)}},q=function(e){if(1===T){for(var a=-1,i=0;i<e.length;i+=1)((l=e.charCodeAt(i))==="\n".charCodeAt(0)||l==="\r".charCodeAt(0))&&(a=i);var n=(-1!==a?P:"")+e.slice(0,a+1);P=(-1===a?P:"")+e.slice(a+1),""!==e&&(d=Date.now(),g+=e.length);for(var c=0;c<n.length;c+=1){var l=n.charCodeAt(c);if(-1===Z&&l==="\n".charCodeAt(0))Z=0;else if(-1===Z&&(Z=0),l==="\r".charCodeAt(0)||l==="\n".charCodeAt(0)){if(0!==Z){1===Z&&(N=c+1);var f=n.slice(S,N-1),v=n.slice(N+(N<c&&n.charCodeAt(N)===" ".charCodeAt(0)?1:0),c);"data"===f?(C+="\n",C+=v):"id"===f?D=v:"event"===f?A=v:"retry"===f?(s=j(v,s),u=s):"heartbeatTimeout"===f&&(h=j(v,h),0!==y&&(o(y),y=r(function(){Y()},h)))}if(0===Z){if(""!==C){p=D,""===A&&(A="message");var b=new M(A,{data:C.slice(1),lastEventId:D});if(t.dispatchEvent(b),"open"===A?I(t,t.onopen,b):"message"===A?I(t,t.onmessage,b):"error"===A&&I(t,t.onerror,b),2===T)return}C="",A=""}Z=l==="\r".charCodeAt(0)?-1:0}else 0===Z&&(S=c,Z=1),1===Z?l===":".charCodeAt(0)&&(N=c+1,Z=2):2===Z&&(Z=3)}}},J=function(e){if(1===T||0===T){T=-1,0!==y&&(o(y),y=0),y=r(function(){Y()},u),u=U(Math.min(16*s,2*u)),t.readyState=0;var a=new L("error",{error:e});t.dispatchEvent(a),I(t,t.onerror,a),null!=e&&console.error(e)}},V=function(){T=2,null!=x&&(x.abort(),x=void 0),0!==y&&(o(y),y=0),t.readyState=2},Y=function a(){if(y=0,-1===T){d=!1,g=0,y=r(function(){a()},h),T=0,C="",A="",D=p,P="",S=0,N=0,Z=0;var i=e;"data:"!==e.slice(0,5)&&"blob:"!==e.slice(0,5)&&""!==p&&(i+=(-1===e.indexOf("?")?"?":"&")+n+"="+encodeURIComponent(p));var s=t.withCredentials,o={Accept:"text/event-stream"},c=t.headers;if(null!=c)for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(o[l]=c[l]);try{x=m.open(b,R,q,J,i,s,o)}catch(f){throw V(),f}}else if(d||null==x){var u=Math.max((d||Date.now())+h-Date.now(),1);d=!1,y=r(function(){a()},u)}else J(new Error("No activity within "+h+" milliseconds. "+(0===T?"No response received.":g+" chars received.")+" Reconnecting.")),null!=x&&(x.abort(),x=void 0)};t.url=e,t.readyState=0,t.withCredentials=i,t.headers=f,t._close=V,Y()}(this,t,e)}var F=null!=g&&null!=f&&"body"in f.prototype;(N.prototype=Object.create(P.prototype)).CONNECTING=0,N.prototype.OPEN=1,N.prototype.CLOSED=2,N.prototype.close=function(){this._close()},N.CONNECTING=0,N.OPEN=1,N.CLOSED=2,N.prototype.withCredentials=void 0;var R=p;null!=c&&(null==p||!("withCredentials"in p.prototype))&&(R=N),function(s){if("object"==typeof t.exports){var r=s(e);void 0!==r&&(t.exports=r)}else i=[e],void 0!==(n="function"==typeof(a=s)?a.apply(e,i):a)&&(t.exports=n)}(function(t){t.EventSourcePolyfill=N,t.NativeEventSource=p,t.EventSource=R})}("undefined"==typeof globalThis?"undefined"!=typeof window?window:"undefined"!=typeof self?self:this:globalThis)},18921:function(e,i,n){"use strict";n.d(i,{R:function(){return o}});var s,r=n(37716),o=((s=function(){function e(){t(this,e)}return a(e,[{key:"bytes",value:function(t,e,a){var i,n,s,r=[];return 0==t?0:(a&&(i=0),n=Math.floor(Math.log(t)/Math.log(1024)),s=(t/Math.pow(1024,Math.floor(n))).toFixed(2),r[i]=s,i>0&&Math.abs(r[i-1]-r[i])<1e-4&&(s=(t/Math.pow(1024,Math.floor(--n))).toFixed(2)),n=n<0?-n:n,e&&(s+=" "+["b","KB","MB","GB","TB","PB"][n]),i++,s)}},{key:"bits",value:function(t,e,a){var i,n,s,r=[];return 0==t?0:(a&&(i=0),n=Math.floor(Math.log(t)/Math.log(1024)),s=(t/Math.pow(1024,Math.floor(n))).toFixed(2),r[i]=s,i>0&&Math.abs(r[i-1]-r[i])<1e-4&&(s=(t/Math.pow(1024,Math.floor(--n))).toFixed(2)),n=n<0?-n:n,e&&(s+=" "+["bps","Kbps","Mbps","Gbps","Tbps","Pbps"][n]),i++,s)}},{key:"getStackedUnit",value:function(t){return t>1099511627776?[1099511627776,"TB"]:t>1073741824?[1073741824,"GB"]:t>1048576?[1048576,"MB"]:t>1024?[1024,"KB"]:[1,"KB"]}},{key:"getStackedUnitUpdate",value:function(t){return t>1099511627776?[1099511627776,"T"]:t>1073741824?[1073741824,"G"]:t>1048576?[1048576,"M"]:t>1024?[1024,"K"]:[1,""]}},{key:"kbpsTO",value:function(t,e,a){var i,n=[];return(t=parseInt(t))>1e9?(i=(t/1e9).toFixed(2)+"T",n=[(t/1e9).toFixed(2),"T"]):t>1e6?(i=(t/1e6).toFixed(2)+"G",n=[(t/1e6).toFixed(2),"G"]):t>1e3?(i=(t/1e3).toFixed(2)+"M",n=[(t/1e3).toFixed(2),"M"]):(i=t+"K",n=[t,"K"]),e?n[0]:a?n[1]:i}},{key:"getByteInfo",value:function(t,e){var a,i=(t/(a=e?this.getStackedUnitUpdate(t):this.getStackedUnit(t))[0]).toFixed(2);return("0.00"==i?"0":i)+" "+a[1]}}]),e}()).\u0275fac=function(t){return new(t||s)},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s)},8370:function(e,i,n){"use strict";n.r(i),n.d(i,{SupportTrafficReportsModule:function(){return yt}});var s,r=n(38583),o=n(3679),c=n(25317),l=n(86640),h=n(39895),p=n(92340),u=n(37716),d=n(7450),g=n(89097),f=n(38023),v=n(26215),b=n(11067),m=n(91841),x=((s=function(){function e(a,i){t(this,e),this.sso=a,this.http=i,this.data={graphType:"TRF",sendTime:(new Date).getTime(),usage:[0,0],maxRate:[0,0],packet:[0,0]},this.rtData$=new v.X(this.data),this.ratePacketStreamData$=new v.X(this.data),this.delay$=new v.X(!1),this.chartData=[0,0],this.lastData=[0,0],this.yAxixTitle="bps",this.chartDataPacket=[0,0],this.lastDataPacket=[0,0],this.yAxixTitlePacket="pps",this.cacheRateRTDataObj={},this.cachePacketRTDataObj={},this.inc=0,this.previousUrlData={},this.restoreChartObj={}}return a(e,[{key:"getData",value:function(){var t=this,e=this.sso.getOrgId(),a=this.sso.getSubscriberEndpointId();a?(this.source&&(this.source.close(),this.source=null),this.source=new f.EventSourcePolyfill("".concat(p.N.SUPPORT_URL,"/rt/sse/").concat(e,"/EP/").concat(a,"/TAPP,TEP,TRF"),{headers:{"X-Calix-ClientID":p.N.X_CALIX_CLIENTID,"X-Calix-AccessToken":this.sso.getAccessToken()}}),this.source.addEventListener("open",function(t){console.log(JSON.stringify(t)),console.log(t),console.log(new Date)}),this.source.addEventListener("state",function(e){if(console.log(JSON.stringify(e)),console.log("state",e),console.log(new Date),"s300"===JSON.parse(e.data).status.toLowerCase()){var a={graphType:"TRF",sendTime:(new Date).getTime(),usage:[0,0],maxRate:[0,0],packet:[0,0]};t.rtData$.next(a)}}),this.source.addEventListener("message",function(e){-1===window.location.pathname.indexOf("/traffic-reports/")&&(console.log("force closed"),t.source.close());var a=JSON.parse(e.data);"TRF"===a.graphType?(t.ratePacketStreamData$.next(a),t.data=JSON.parse(e.data),clearInterval(t.cacheInterval),clearInterval(t.cachePacketInterval),t.cacheRTData("rate"),t.cacheRTData("packet")):t.rtData$.next(a),console.log(JSON.parse(e.data))}),this.source.addEventListener("error",function(e){window.location.reload(),t.source.close(),t.source=null})):console.log("subscriber endpoint id not set")}},{key:"cacheRTData",value:function(t){var e=this;if("rate"===t){this.currentData?this.lastData=this.currentData:this.chartData=[0,0],this.currentData=this.data.maxRate,this.yAxixTitle="rate"===t?"bps":"pps";var a=(new Date).getTime(),i=0;this.cacheInterval=setInterval(function(){i++;var n=e.removeLast3Chars(a+1e3*i);e.cacheRateRTDataObj[n]=e.generateRTforCache(e.currentData,e.lastData,e.chartData,t),e.removeOldKeys(e.cacheRateRTDataObj,t)},1e3)}else{this.currentDataPacket?this.lastDataPacket=this.currentDataPacket:this.chartDataPacket=[0,0],this.currentDataPacket=this.data.packet,this.yAxixTitlePacket="rate"===t?"bps":"pps";var n=(new Date).getTime(),s=0;this.cachePacketInterval=setInterval(function(){s++;var a=e.removeLast3Chars(n+1e3*s);e.cachePacketRTDataObj[a]=e.generateRTforCache(e.currentDataPacket,e.lastDataPacket,e.chartDataPacket,t),e.removeOldKeys(e.cachePacketRTDataObj,t)},1e3)}}},{key:"generateRTforCache",value:function(t,e,a,i){var n=this.transformData(t,e,a,i);"rate"===i?this.chartData=n:this.chartDataPacket=n,n[0]||(n[0]=0),n[1]||(n[1]=0);var s=this.bitsToSize(n[0],i),r=this.bitsToSize(n[1],i),o=s.split(" "),c=r.split(" "),l=o[1]?o[1]:"rate"===i.toLowerCase()?"bps":"pps",h=c[1]?c[1]:"rate"===i.toLowerCase()?"bps":"pps",p="";if("undefined"==(p=n[0]||n[1]?n[0]>n[1]?o[1]:c[1]:"rate"===i.toLowerCase()?this.yAxixTitle?this.yAxixTitle:"rate"===i.toLowerCase()?"bps":"pps":this.yAxixTitlePacket?this.yAxixTitlePacket:"rate"===i.toLowerCase()?"bps":"pps")&&(p="rate"===i.toLowerCase()?this.yAxixTitle?this.yAxixTitle:"rate"===i.toLowerCase()?"bps":"pps":this.yAxixTitlePacket?this.yAxixTitlePacket:"rate"===i.toLowerCase()?"bps":"pps"),"string"==typeof p&&("rate"===i.toLowerCase()?this.yAxixTitle=p:this.yAxixTitlePacket=p),n)return"rate"===i.toLowerCase()?[n[0],n[1],this.yAxixTitle,l,h]:[n[0],n[1],this.yAxixTitlePacket,l,h]}},{key:"transformData",value:function(t,e,a,i){i.toLowerCase();for(var n=[],s=0;s<t.length;s++){var r=parseFloat(t[s])-parseFloat(e[s]);!parseFloat(t[s])&&!parseFloat(e[s])&&(a[s]=0);var o=r/15,c=Math.abs(parseFloat(a[s])+o);n.push(c)}return n}},{key:"bitsToSize",value:function(t,e){var a=parseFloat(t),i="rate"===e.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(0==a&&"rate"===e.toLowerCase())return"0 bps";if(0==a&&"packet"===e.toLowerCase())return"0 pps";var n=Math.floor(Math.log(a)/Math.log(1e3));return b.numberFormat(Math.abs(a/Math.pow(1e3,n)),2)+" "+i[n]}},{key:"removeLast3Chars",value:function(t){return t=(t=t.toString()).slice(0,-3),parseInt(t)}},{key:"removeOldKeys",value:function(t,e){var a=Object.keys(t),i=a.length;if(i>300){for(var n=t,s=i-300,r=0;r<s;r++)delete n[a[r]];"rate"===e?this.cacheRateRTDataObj=n:this.cachePacketRTDataObj=n}}},{key:"getCachedata",value:function(t){return"rate"===t?this.cacheRateRTDataObj:this.cachePacketRTDataObj}},{key:"getCurrrentUnit",value:function(t){return Object.keys(this.cachePacketRTDataObj),"rate"===t.toLowerCase()?this.yAxixTitle?this.yAxixTitle:"rate"===t.toLowerCase()?"bps":"pps":this.yAxixTitlePacket?this.yAxixTitlePacket:"rate"===t.toLowerCase()?"bps":"pps"}},{key:"clearData",value:function(){this.yAxixTitle="",this.yAxixTitlePacket="",this.cachePacketRTDataObj={},this.cacheRateRTDataObj={},this.source&&(this.source.close(),this.source=null),this.cacheInterval&&clearInterval(this.cacheInterval),this.cachePacketInterval&&clearInterval(this.cachePacketInterval)}},{key:"getLastData",value:function(){return this.data}},{key:"closeEventSource",value:function(){this.source&&this.source.close(),this.source=null,console.log("close event source")}},{key:"getRealtimeDelay",value:function(){var t=this,e=this.sso.getOrgId();this.http.get("".concat(p.N.API_BASE_URL,"fa/config/organization?org-id=").concat(e)).subscribe(function(e){t.sso.setRealtimeDelay(e&&null!==e?-1*(e.realtimeLateflowDelay?e.realtimeLateflowDelay:0)*1e3:0),t.delay$.next(!0)},function(e){t.sso.setRealtimeDelay(0),t.delay$.next(!0)})}},{key:"getPreviousUrlData",value:function(t){return!!this.previousUrlData.hasOwnProperty(t)&&this.previousUrlData[t]}},{key:"setPreviousUrlData",value:function(t,e,a){a?this.previousUrlData={}:this.previousUrlData[t]=e}},{key:"getRestoreChartData",value:function(t){return!!this.restoreChartObj.hasOwnProperty(t)&&this.restoreChartObj[t]}},{key:"setRestoreChartData",value:function(t,e,a){a?this.restoreChartObj={}:this.restoreChartObj[t]=e}}]),e}()).\u0275fac=function(t){return new(t||s)(u.LFG(g.t6),u.LFG(m.eN))},s.\u0275prov=u.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s),y=n(94802),T=n(4350);function w(t,e){if(1&t&&(u.TgZ(0,"li",17),u.TgZ(1,"a",18),u.NdJ("Click",function(t){return t.preventDefault()}),u.TgZ(2,"span",19),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&t){var a=u.oxw();u.xp6(3),u.Oqu(a.language.Data)}}function C(t,e){if(1&t&&(u.TgZ(0,"li",20),u.TgZ(1,"a",21),u.TgZ(2,"span",19),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&t){var a=u.oxw();u.xp6(3),u.Oqu(a.language.Video)}}function D(t,e){if(1&t&&(u.TgZ(0,"li",22),u.TgZ(1,"a",23),u.TgZ(2,"span",19),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&t){var a=u.oxw();u.xp6(3),u.Oqu(a.language.Voice)}}function O(t,e){if(1&t&&(u.TgZ(0,"li",24),u.TgZ(1,"a",25),u._uU(2),u.qZA(),u.qZA()),2&t){var a=u.oxw();u.xp6(1),u.MGl("routerLink","/",a.MODULE,"/traffic-reports/common-reports"),u.xp6(1),u.hij(" ",a.language.Reports,"")}}var A=function(){var e=function(){function e(a,i,n,s,r){t(this,e),this.translateService=a,this.sso=i,this.rtService=n,this.router=s,this.dataChartService=r,this.loader1=!1,this.loader2=!1,this.showDataService=!1,this.showVoiceService=!1,this.showVideoService=!1,this.deviceInfo={modelName:""},this.thirdPartyDevice=!1,this.checkDeviceManfacturer=JSON.parse(sessionStorage.getItem("calix.deviceData")),this.MODULE="support",this.metaData={},this.videoWan=!0,this.voiceWan=!0,this.MODULE=this.router.url.indexOf("/support/")>-1?"support":"cco"}return a(e,[{key:"ngOnInit",value:function(){var t=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){t.language=e}),this.sso.getSubscriberEndpointId()?this.getDataByNewToken():this.sbcbrEpSubcribe=this.sso.subscriberEndPointId$.subscribe(function(e){console.log("subscribe",e),e&&t.getDataByNewToken()}),this.thirdPartyDevice=!!this.checkDeviceManfacturer&&!!this.checkDeviceManfacturer.filter(function(t){return"Calix"!==(null==t?void 0:t.manufacturer)&&t.manufacturer}).length,this.orgId=this.sso.getOrgId();var e=this.sso.getScopes();if(this.getDevice(),p.N.VALIDATE_SCOPE){e["cloud.rbac.csc.services.video"]=e["cloud.rbac.csc.services.video"]?e["cloud.rbac.csc.services.video"]:[],e["cloud.rbac.csc.services.voice"]=e["cloud.rbac.csc.services.voice"]?e["cloud.rbac.csc.services.voice"]:[];var a=Object.keys(e);if(a)for(var i=0;i<a.length;i++)if(-1!==a[i].indexOf("cloud.rbac.csc.services.data")){this.showDataService=!0;break}e&&e["cloud.rbac.csc.services.video"]&&e["cloud.rbac.csc.services.video"].length&&(this.showVideoService=!0),e&&e["cloud.rbac.csc.services.voice"]&&e["cloud.rbac.csc.services.voice"].length&&(this.showVoiceService=!0)}else this.showDataService=!0,this.showVoiceService=!0,this.showVideoService=!0;this.apiCallDone=!0}},{key:"getDevice",value:function(){var t,e,a,i;this.deviceInfo=JSON.parse(sessionStorage.getItem("calix.deviceData")),this.deviceInfo=null===(t=this.deviceInfo)||void 0===t?void 0:t.filter(function(t){return t.serialNumber}).sort(function(t,e){return"RG"!=t.opMode?1:-1}),this.deviceInfo=null===(e=this.deviceInfo)||void 0===e?void 0:e.filter(function(t){return"RG"==t.opMode}),this.deviceInfo=(null===(a=this.deviceInfo)||void 0===a?void 0:a.length)?this.deviceInfo[0]:{},this.serialNumberSelected=null===(i=this.deviceInfo)||void 0===i?void 0:i.serialNumber,this.metaData=this.dataChartService.getMetaData(this.serialNumberSelected),this.metaData?this.checkWanStatus():this.getMetaData()}},{key:"getDataByNewToken",value:function(){}},{key:"ngOnDestroy",value:function(){this.languageSubject.unsubscribe(),this.source&&this.source.close(),this.sbcbrEpSubcribe&&this.sbcbrEpSubcribe.unsubscribe(),this.source=null,this.rtService.clearData()}},{key:"ngAfterViewInit",value:function(){-1!==window.location.pathname.indexOf("support/traffic-reports/")&&setTimeout(function(){console.log("trigger css"),$("#serviceDataTabHrefId").addClass("active")},500)}},{key:"objectExistence",value:function(t){return Object.keys(t||{}).length}},{key:"getMetaData",value:function(){var t=this;!this.serialNumberSelected||(this.loader1=!0,this.dataChartService.fetchMetaData(this.orgId,this.serialNumberSelected).subscribe(function(e){t.loader1=!1,t.metaData=e||{},e.properties.forEach(function(e){t.reStructureMeta(e)}),t.checkWanStatus(),t.dataChartService.setMetaData(t.serialNumberSelected,t.metaData)},function(e){t.loader1=!1}))}},{key:"reStructureMeta",value:function(t){var e=this;this.metaData[t.featureName.replace(/[.]/g,"")]={},t.hasOwnProperty("fields")?t.fields.forEach(function(a){e.metaData[t.featureName.replace(/[.]/g,"")][a.name.replace(/[.]/g,"")]=a}):t.hasOwnProperty("configuration")?this.metaData[t.featureName.replace(/[.]/g,"")].config=t.configuration:t.hasOwnProperty("supported")&&(this.metaData[t.featureName.replace(/[.]/g,"")].supported=t.supported)}},{key:"checkWanStatus",value:function(){var t,e=this;if(null===(t=this.metaData)||void 0===t?void 0:t.WANInfo){var a=[];this.loader1=!0,this.dataChartService.getWanInfo(this.orgId,this.serialNumberSelected).subscribe(function(t){e.loader1=!1,t&&t.length&&t.filter(function(t){t.bIsVideo&&a.push("video"),t.bIsVoice&&a.push("voice")}),e.videoWan=a.includes("video"),e.voiceWan=a.includes("voice")},function(t){e.loader1=!1,e.videoWan=!1,e.voiceWan=!1})}else this.videoWan=!1,this.voiceWan=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.s),u.Y36(g.t6),u.Y36(x),u.Y36(h.F0),u.Y36(y.Q))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-support-traffic-reports"]],decls:22,vars:6,consts:[[1,"mr-2","mb-2"],[1,"row"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["class","nav-item","id","serviceDataTabId",4,"ngIf"],["class","nav-item","id","serviceVideoTabId",4,"ngIf"],["id","serviceVoiceTabId","class","nav-item",4,"ngIf"],[1,"m-2"],[1,"row","mt-4"],[1,"col-md-12","px-1","ccl-tabs"],["id","data-realtime-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],["id","data-reports-time","class","nav-item",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["id","serviceDataTabId",1,"nav-item"],["routerLink","/support/service/data","data-toggle","tab","routerLinkActive","active","id","serviceDataTabHrefId",1,"nav-link","small",3,"Click"],[1,"big-text"],["id","serviceVideoTabId",1,"nav-item"],["routerLink","/support/service/video","data-toggle","tab","routerLinkActive","active",1,"big-text","nav-link","small"],["id","serviceVoiceTabId",1,"nav-item"],["routerLink","/support/service/voice","data-toggle","tab","routerLinkActive","active",1,"nav-link","small"],["id","data-reports-time",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"]],template:function(t,e){1&t&&(u._UZ(0,"app-subscriber-menu"),u.TgZ(1,"section",0),u.TgZ(2,"div",1),u.TgZ(3,"div",2),u.TgZ(4,"ul",3),u.YNc(5,w,4,1,"li",4),u.YNc(6,C,4,1,"li",5),u.YNc(7,D,4,1,"li",6),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"section",7),u.TgZ(9,"div",8),u.TgZ(10,"div",9),u.TgZ(11,"ul",3),u.TgZ(12,"li",10),u.TgZ(13,"a",11),u.NdJ("Click",function(t){return t.preventDefault()}),u._uU(14),u.qZA(),u.qZA(),u.YNc(15,O,3,2,"li",12),u.qZA(),u.TgZ(16,"div",13),u.TgZ(17,"div",14),u._UZ(18,"div",15),u.qZA(),u.TgZ(19,"div",16),u._UZ(20,"div",15),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(21,"router-outlet")),2&t&&(u.xp6(5),u.Q6J("ngIf",e.showDataService),u.xp6(1),u.Q6J("ngIf",e.showVideoService&&(e.objectExistence(null==e.metaData?null:e.metaData.VideoMulticastSystems)||e.videoWan)),u.xp6(1),u.Q6J("ngIf",e.deviceInfo.modelName&&0!=e.deviceInfo.modelName.indexOf("GS202")&&e.showVoiceService&&(e.objectExistence(null==e.metaData?null:e.metaData.VoiceStatus)||e.voiceWan)),u.xp6(6),u.MGl("routerLink","/",e.MODULE,"/traffic-reports/realtime"),u.xp6(1),u.Oqu(e.language.Real_time),u.xp6(1),u.Q6J("ngIf",!0))},directives:[T.e,r.O5,h.yS,h.Od,h.lC],styles:[".nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#fff;border-color:#dee2e6 #dee2e6 #fff;border:none;border-bottom:1px solid #2078fa}.nav-tabs[_ngcontent-%COMP%]{border-bottom:none}a[_ngcontent-%COMP%]{color:#333}.nav-link[_ngcontent-%COMP%]{font-size:18px;border-bottom:1px solid transparent;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus, .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border-color:#e9ecef #e9ecef #dee2e6;border:none;color:#4c4c4c;border-bottom:1px solid #9bc1f9}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4c4c4c}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:0}"]}),e}(),k=n(33439),P=n.n(k),Z=n(4954),S=function(){var e=function(){function e(a){t(this,e),this.router=a}return a(e,[{key:"getArrayIndex",value:function(t,e){return t.indexOf(e)}},{key:"removeorAddArray",value:function(t,e,a){var i=t.indexOf(e);return-1==i?(t.push(e),a.target.style.backgroundColor="#f0d20e"):(t.splice(i,1),a.target.style.backgroundColor="white"),t}},{key:"nagigationByUrl",value:function(t,e,a){"Locations"==a?this.router.navigateByUrl("/fa/location/realtime?name=".concat(t,"&id=").concat(e)):"Apps"==a?this.router.navigateByUrl("/fa/application/apprealtime?name=".concat(t,"&id=").concat(e)):"Endpoints"==a&&this.router.navigateByUrl("/fa/flowendpoint/realtime?name=".concat(t,"&id=").concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(h.F0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),M=n(94690),_=n(39075),L=n(65424),E=n.n(L),j=n(40006),U=n.n(j),I=n(18921),N=n(48483);function F(t,e){if(1&t&&(u.TgZ(0,"span",16),u._UZ(1,"i",17),u._uU(2),u.qZA()),2&t){var a=u.oxw(2);u.xp6(2),u.hij(" ",a.upRate," ")}}function R(t,e){if(1&t&&(u.TgZ(0,"span",18),u._UZ(1,"i",19),u._uU(2),u.qZA()),2&t){var a=u.oxw(2);u.xp6(2),u.hij(" ",a.downRate,"")}}function q(t,e){if(1&t&&u._UZ(0,"highcharts-chart",20),2&t){var a=u.oxw(2);u.Q6J("Highcharts",a.highcharts)("options",a.streamOptions)("callbackFunction",a.chartCallback)}}var J=function(t){return{"background-color":t}};function V(t,e){if(1&t){var a=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"div",2),u.TgZ(2,"div",3),u.TgZ(3,"div",4),u.TgZ(4,"span",5),u._uU(5),u.qZA(),u.TgZ(6,"a",6),u.NdJ("click",function(){return u.CHM(a),u.oxw().toggleUpStream()}),u._UZ(7,"span",7),u._uU(8),u.qZA(),u.TgZ(9,"a",8),u.NdJ("click",function(){return u.CHM(a),u.oxw().toggleDownStream()}),u._UZ(10,"span",7),u._uU(11),u.qZA(),u.TgZ(12,"span",9),u._uU(13),u.qZA(),u.qZA(),u.TgZ(14,"div",10),u.TgZ(15,"span",11),u.YNc(16,F,3,1,"span",12),u.YNc(17,R,3,1,"span",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(18,"div",14),u.YNc(19,q,1,3,"highcharts-chart",15),u.qZA(),u.qZA()}if(2&t){var i=u.oxw();u.xp6(4),u.s9C("title",i.chartName),u.xp6(1),u.hij(" ",i.chartName," "),u.xp6(2),u.Q6J("ngStyle",u.VKq(10,J,!0===i.isUpStreamVisible?"#0027FF":"grey")),u.xp6(1),u.hij(" ",i.language.up," "),u.xp6(2),u.Q6J("ngStyle",u.VKq(12,J,!0===i.isDownStreamVisible?"#00d0ff":"grey")),u.xp6(1),u.hij(" ",i.language.down," "),u.xp6(2),u.hij("",i.language.interval," 1 sec"),u.xp6(3),u.Q6J("ngIf",i.isUpStreamVisible),u.xp6(1),u.Q6J("ngIf",i.isDownStreamVisible),u.xp6(2),u.Q6J("ngIf",i.load)}}E()(b),U()(b);var Y=function(){var e=function(){function e(a,i,n,s,r){t(this,e),this.customTranslateService=a,this.http=i,this.convertorService=n,this.dateUtilsService=s,this.sso=r,this.load=!0,this.title="myHighchart",this.highcharts=b,this.yAxixTitle="",this.pageAvailable=!1,this.windowLen=5,this.lastData=[0,0],this.chartData=[0,0],this.lastChartDataObj={},this.triggerReloadChart=!1,this.msgLen=0,this.inc=0,this.isDownStreamVisible=!0,this.isUpStreamVisible=!0,this.conversions={bps:1,Kbps:1e3,Mbps:1e6,Gbps:1e9,Tbps:1e12,pps:1,Kpps:1e3,Mpps:1e6,Gpps:1e9,Tpps:1e12},this.reloadChart=!1,this.sizes={bps:1,Kbps:1e3,Mbps:1e6,Gbps:1e9,Tbps:1e12,pps:1,Kpps:1e3,Mpps:1e6,Gpps:1e9,Tpps:1e12}}return a(e,[{key:"ngOnInit",value:function(){var t=this;this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(e){t.language=e})}},{key:"ngOnChanges",value:function(t){if(this.chartName.toLowerCase(),t.data&&t.data.currentValue&&this.data){this.msgLen++,this.originalData=t.data.currentValue;var e=this.bitsToSize(this.data[0]),a=this.bitsToSize(this.data[1]);console.log(this.data),"rate"===this.chartName.toLowerCase()?(console.log("Up Rate - ",e),console.log("Down Rate - ",a)):(console.log("Up Packet Rate - ",e),console.log("Down Packer Rate - ",a)),this.currentData?(this.lastData=this.currentData,this.chartData=this.currentData):(this.lastData=[0,0],this.chartData=[0,0]),this.currentData=this.data}t.windowLen&&t.windowLen.currentValue&&this.data&&(this.time=1e3*this.dateUtilsService.getCurrentUtcTime(),this.triggerReloadChart=!1,this.load=!0,this.yAxixTitle="rate"===this.chartName.toLowerCase()?"bps":"pps",this.lastChartDataObj=this.history?this.history:{},Object.keys(this.lastChartDataObj).length?(this.lastData=this.data,this.chartData=this.data,this.rebuildData()):(console.log("intial call for load chart"),this.buildNewChart()))}},{key:"buildChart",value:function(){console.log("chart reloaded"),this.time=1e3*this.dateUtilsService.getCurrentUtcTime(),this.streamOptions={};var t=this.timezoneDetected(),e=this.time+t,a=this;this.streamOptions={time:{useUTC:!1},chart:{backgroundColor:"#FFFFFF",type:"areaspline",zoomType:"x",height:220,margin:{},animation:!1,renderTo:"custom-mirrot-chart",events:{load:function(){var t="rate"===a.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"],i=this.series;a.interval=setInterval(function(){a.inc++;var n=a.transformData(a.currentData,a.lastData,a.chartData);a.chartData=n,n[0]||(n[0]=0),n[1]||(n[1]=0);var s=a.bitsToSize(n[0]),r=a.bitsToSize(n[1]),o=s.split(" "),c=r.split(" "),l=o[0],h=c[0],p=o[1]?o[1]:"rate"===a.chartName.toLowerCase()?"bps":"pps",u=c[1]?c[1]:"rate"===a.chartName.toLowerCase()?"bps":"pps",d="";if("undefined"==(d=n[0]||n[1]?n[0]>n[1]?o[1]:c[1]:a.yAxixTitle?a.yAxixTitle:"rate"===a.chartName.toLowerCase()?"bps":"pps")&&(d=a.yAxixTitle?a.yAxixTitle:"rate"===a.chartName.toLowerCase()?"bps":"pps"),null!=d&&a.yAxixTitle!=d&&(n[0]||n[1]))return console.log("scale changed from ".concat(a.yAxixTitle," to ").concat(d)),a.yAxixTitle=d,a.streamOptions.yAxis.title.text=a.yAxixTitle,a.removeLast3Chars(w=e+1e3*a.inc),void a.rebuildData();"string"==typeof d&&(a.yAxixTitle=d);var g=parseFloat(o[0]),f=parseFloat(c[0]);if((n[0]||n[1])&&n[0]<n[1]&&o[1]!==c[1]){var v=t.indexOf(o[1]),m=t.indexOf(c[1])-v;if(m)for(var x=m;x>0;x--)g/=1e3}if((n[0]||n[1])&&n[0]>n[1]&&o[1]!==c[1]){var y=t.indexOf(o[1])-t.indexOf(c[1]);if(y)for(var T=y;T>0;T--)f/=1e3}if(n){var w=e+1e3*a.inc;parseFloat(b.numberFormat(Math.abs(g),2));a.upRate="".concat(l," ").concat(p),parseFloat(b.numberFormat(Math.abs(f),2)),a.downRate="".concat(h," ").concat(u),i[0].addPoint([w,g],!0,!0),i[1].addPoint([w,-f],!0,!0);var C=a.removeLast3Chars(w);a.lastChartDataObj[C]=[n[0],n[1],a.yAxixTitle,p,u],a.removeOldKeys()}},1e3)}}},colors:["#0027FF","#5ACFEA"],title:{text:""},xAxis:{type:"datetime",tickPixelInterval:150},yAxis:{gridLineDashStyle:"longdash",opposite:!1,startOnTick:!1,endOnTick:!1,title:{text:this.yAxixTitle,style:{fontWeight:"bold",textAlign:"left"}},labels:{align:"left",x:0,y:0,formatter:function(){return Math.abs(this.value)}}},credits:{enabled:!1},plotOptions:{areaspline:{lineWidth:1,marker:{enabled:!1},fillOpacity:.75},spline:{animation:!1,marker:{enabled:!1,radius:.9,lineWidth:.7}}},tooltip:{formatter:function(){var e=new Date(this.point.x-t),i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=parseFloat(b.numberFormat(Math.abs(this.point.y),2)),s=a.removeLast3Chars(this.point.x),r=a.lastChartDataObj[s]?a.lastChartDataObj[s][2]:"",o="rate"===a.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(n<1){var c=o.indexOf(a.yAxixTitle);c>=1&&(c-=1),-1===c&&(c=0);var l=a.yAxixTitle;if(this.point.y<0){var h=o.indexOf(a.yAxixTitle);l=a.lastChartDataObj[s]?a.lastChartDataObj[s][4]:a.yAxixTitle;var p=h-o.indexOf(l);if(p)for(var u=p;u>0;u--)n*=1e3}else{var d=o.indexOf(a.yAxixTitle);l=a.lastChartDataObj[s]?a.lastChartDataObj[s][3]:a.yAxixTitle;var g=d-o.indexOf(l);if(g)for(var f=g;f>0;f--)n*=1e3}return"<b> ".concat(e.getDate(),"-").concat(i[e.getMonth()]," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),"  </b><br/>\n                 ").concat(this.series.name,"stream: ").concat(n," ").concat(l)}var v=a.yAxixTitle;if(this.point.y<0&&Math.abs(this.point.y)>1e3){var m=o.indexOf(a.yAxixTitle);v=a.lastChartDataObj[s]?a.lastChartDataObj[s][4]:a.yAxixTitle;var x=o.indexOf(v)-m;if(x){for(var y=x;y>0;y--)n/=1e3;this.point.y=n}}else if(this.point.y>0&&Math.abs(this.point.y)>1e3){var T=o.indexOf(a.yAxixTitle);v=a.lastChartDataObj[s]?a.lastChartDataObj[s][3]:a.yAxixTitle;var w=o.indexOf(v)-T;if(w){for(var C=w;C>0;C--)n/=1e3;this.point.y=n}}return"<b> ".concat(e.getDate(),"-").concat(i[e.getMonth()]," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds(),"  </b><br/>\n                 ").concat(this.series.name,"stream: ").concat(b.numberFormat(Math.abs(this.point.y),2)," ").concat(r||a.yAxixTitle)}},legend:{enabled:!1},exporting:{enabled:!1},series:[{name:"Up",data:function(){var t,i=[],n=e;for(t=-300;t<=0;t+=1){var s=n+1e3*t,r=a.removeLast3Chars(s),o=void 0!==a.lastChartDataObj[r]?a.lastChartDataObj[r][0]:0;a.reloadChart&&!o&&(o=void 0!==a.lastChartDataObj[r-1]?a.lastChartDataObj[r-1][0]:0),o&&(o/=a.sizes[a.yAxixTitle]),i.push({x:s,y:o})}return i}()},{name:"Down",data:function(){var t,i=[],n=e;for(t=-300;t<=0;t+=1){var s=n+1e3*t,r=a.removeLast3Chars(s),o=a.lastChartDataObj[r]?a.lastChartDataObj[r][1]:0;a.reloadChart&&!o&&(o=a.lastChartDataObj[r-1]?a.lastChartDataObj[r-1][0]:0),o&&(o/=a.sizes[a.yAxixTitle]),o*=-1,i.push({x:s,y:o})}return i}()}]}}},{key:"chartCallback",value:function(t){}},{key:"toggleDownStream",value:function(){this.streamOptions.series[1].visible?(this.streamOptions.series[1].visible=!1,this.isDownStreamVisible=!1):(this.streamOptions.series[1].visible=!0,this.isDownStreamVisible=!0),this.rebuildData()}},{key:"toggleUpStream",value:function(){this.streamOptions.series[0].visible?(this.streamOptions.series[0].visible=!1,this.isUpStreamVisible=!1):(this.streamOptions.series[0].visible=!0,this.isUpStreamVisible=!0),this.rebuildData()}},{key:"ngOnDestroy",value:function(){this.streamOptions={},clearInterval(this.interval),clearInterval(this.interval2),this.interval=null,this.interval2=null}},{key:"transformData",value:function(t,e,a){this.chartName.toLowerCase(),(!e||!e.length)&&(e=[0,0]);for(var i=[],n=0;n<t.length;n++){var s=parseFloat(t[n])-parseFloat(e[n]);!parseFloat(t[n])&&!parseFloat(e[n])&&(a[n]=0);var r=s/15,o=parseFloat(a[n])+r;i.push(o)}return!i[0]&&!i[1]&&(t[0]||t[1])&&this.msgLen>2&&(i=t),i}},{key:"bitsToSize",value:function(t){var e=parseFloat(t),a="rate"===this.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(0==e&&"rate"===this.chartName.toLowerCase())return"0 bps";if(0==e&&"packet"===this.chartName.toLowerCase())return"0 pps";var i=Math.floor(Math.log(e)/Math.log(1e3));return b.numberFormat(Math.abs(e/Math.pow(1e3,i)),2)+" "+a[i]}},{key:"removeLast3Chars",value:function(t){return t=(t=t.toString()).slice(0,-3),parseInt(t)}},{key:"removeOldKeys",value:function(){var t=Object.keys(this.lastChartDataObj),e=t.length;if(e>300){for(var a=this.lastChartDataObj,i=e-300,n=0;n<i;n++)delete a[t[n]];this.lastChartDataObj=a,console.log("removal of old chart length",Object.keys(this.lastChartDataObj).length)}}},{key:"getPacketRate",value:function(t){var e=t,a="rate"===this.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(0==e&&"rate"===this.chartName.toLowerCase())return"0 bps";if(0==e&&"packet"===this.chartName.toLowerCase())return"0 pps";var i=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1e3,i))+" "+a[i]}},{key:"timezoneDetected",value:function(){var t,e=new Date("1/1/"+(new Date).getUTCFullYear()),a=1e4;for(t=0;t<12;t++)e.setUTCMonth(e.getUTCMonth()+1),a>-1*e.getTimezoneOffset()&&(a=-1*e.getTimezoneOffset());return 60*a*1e3}},{key:"rebuildData",value:function(){if(this.chartName.toLowerCase(),Object.keys(this.lastChartDataObj).length){var t,e=(new Date).getTime()+parseInt(this.sso.getRealtimeDelay());for(t=-299;t<=0;t+=1){var a=this.removeLast3Chars(e+1e3*t);void 0===this.lastChartDataObj[a]&&void 0!==this.lastChartDataObj[a-1]?this.lastChartDataObj[a]=this.lastChartDataObj[a-1]:void 0===this.lastChartDataObj[a]&&void 0!==this.lastChartDataObj[a-2]&&(this.lastChartDataObj[a]=this.lastChartDataObj[a-2])}this.reloadChart=!0,this.buildNewChart()}}},{key:"buildNewChart",value:function(){var t,e;console.log("chart reloaded"),this.time=1e3*this.dateUtilsService.getCurrentUtcTime(),this.streamOptions={};var a=parseInt(this.sso.getRealtimeDelay());(new Date).getTime();var i=this;this.streamOptions={time:{useUTC:!1},chart:{type:"areaspline",height:220,events:{load:function(){var t="rate"===i.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"],e=this.series;i.interval=setInterval(function(){i.inc++;var n=i.transformData(i.currentData,i.lastData,i.chartData);i.chartData=n,n[0]||(n[0]=0),n[1]||(n[1]=0);var s=i.bitsToSize(n[0]),r=i.bitsToSize(n[1]),o=s.split(" "),c=r.split(" "),l=o[0],h=c[0],p=o[1]?o[1]:"rate"===i.chartName.toLowerCase()?"bps":"pps",u=c[1]?c[1]:"rate"===i.chartName.toLowerCase()?"bps":"pps",d="";if(p="undefined"==p?"rate"===i.chartName.toLowerCase()?"bps":"pps":p,u="undefined"==u?"rate"===i.chartName.toLowerCase()?"bps":"pps":u,"undefined"==(d=n[0]||n[1]?n[0]>n[1]?o[1]:c[1]:i.yAxixTitle?i.yAxixTitle:"rate"===i.chartName.toLowerCase()?"bps":"pps")&&(d=i.yAxixTitle?i.yAxixTitle:"rate"===i.chartName.toLowerCase()?"bps":"pps"),null!=d&&i.yAxixTitle!=d&&(n[0]||n[1]))return console.log("scale changed from ".concat(i.yAxixTitle," to ").concat(d)),i.yAxixTitle=d,i.streamOptions.yAxis.title.text=i.yAxixTitle,void i.rebuildData();"string"==typeof d&&(i.yAxixTitle=d);var g=parseFloat(o[0]),f=parseFloat(c[0]);if((n[0]||n[1])&&n[0]<n[1]&&o[1]!==c[1]){var v=t.indexOf(o[1]),m=t.indexOf(c[1])-v;if(m)for(var x=m;x>0;x--)g/=1e3}if((n[0]||n[1])&&n[0]>n[1]&&o[1]!==c[1]){var y=t.indexOf(o[1])-t.indexOf(c[1]);if(y)for(var T=y;T>0;T--)f/=1e3}if(n){var w=(new Date).getTime()+a;parseFloat(b.numberFormat(Math.abs(g),2));i.upRate="".concat(l," ").concat(p),parseFloat(b.numberFormat(Math.abs(f),2)),i.removeOldKeys(),i.downRate="".concat(h," ").concat(u),e[0].addPoint([w,g],!0,!0),e[1].addPoint([w,-f],!0,!0);var C=i.removeLast3Chars(w);i.lastChartDataObj[C]=[n[0],n[1],i.yAxixTitle,p,u],i.lastChartDataObj[C+1]=[n[0],n[1],i.yAxixTitle,p,u]}},1e3)}}},title:{text:""},colors:["#0027FF","#5ACFEA"],xAxis:{type:"datetime",tickPixelInterval:120},yAxis:{gridLineDashStyle:"longdash",opposite:!1,startOnTick:!1,endOnTick:!1,title:{text:this.yAxixTitle,margin:40},labels:{align:"left",x:-35,formatter:function(){return Math.abs(this.value)}}},credits:{enabled:!1},plotOptions:{areaspline:{lineWidth:1,marker:{enabled:!1},fillOpacity:.75},spline:{animation:!1,marker:{enabled:!1,radius:.9,lineWidth:.7}}},tooltip:{formatter:function(){var t=i.dateUtilsService.getLocalRealtimeDateFormat(this.point.x);return i.removeLast3Chars(this.point.x),"up"==this.series.name?"<b> ".concat(t,"  </b><br/>\n  ").concat(i.language.Upstream,": ").concat(b.numberFormat(Math.abs(this.point.y),2)," ").concat(i.yAxixTitle):"down"==this.series.name?"<b> ".concat(t,"  </b><br/>\n  ").concat(i.language.Downstream,": ").concat(b.numberFormat(Math.abs(this.point.y),2)," ").concat(i.yAxixTitle):void 0}},legend:{enabled:!1},exporting:{enabled:!1},series:[{name:(null===(t=null==i?void 0:i.language)||void 0===t?void 0:t.upStream)?i.language.upStream:"up",data:function(){var t,e=[],n=(new Date).getTime()+a;for(t=-299;t<=0;t+=1){var s=n+1e3*t,r=i.removeLast3Chars(s),o=void 0!==i.lastChartDataObj[r]?i.lastChartDataObj[r][0]:i.lastChartDataObj[r-1]&&i.lastChartDataObj[r-1][0]?i.lastChartDataObj[r-1][0]:0;i.reloadChart&&!o&&(o=void 0!==i.lastChartDataObj[r-1]?i.lastChartDataObj[r-1][0]:i.lastChartDataObj[r-2]&&i.lastChartDataObj[r-2][0]?i.lastChartDataObj[r-2][0]:0),o&&(o/=i.sizes[i.yAxixTitle]),e.push({x:s,y:o})}return e}()},{name:(null===(e=null==i?void 0:i.language)||void 0===e?void 0:e.downStream)?i.language.downStream:"down",data:function(){var t,e=[],n=(new Date).getTime()+a;for(t=-299;t<=0;t+=1){var s=n+1e3*t,r=i.removeLast3Chars(s),o=void 0!==i.lastChartDataObj[r]?i.lastChartDataObj[r][1]:i.lastChartDataObj[r-1]&&i.lastChartDataObj[r-1][1]?i.lastChartDataObj[r-1][1]:0;i.reloadChart&&!o&&(o=void 0!==i.lastChartDataObj[r-1]?i.lastChartDataObj[r-1][1]:i.lastChartDataObj[r-2]&&i.lastChartDataObj[r-2][1]?i.lastChartDataObj[r-2][1]:0),i.lastChartDataObj[r]&&(i.lastChartDataObj[r][1]=o),o&&(o/=i.sizes[i.yAxixTitle]),o*=-1,e.push({x:s,y:o})}return e}()}]},this.streamOptions.series[0].visible=this.isUpStreamVisible,this.streamOptions.series[1].visible=this.isDownStreamVisible,this.streamOptions=Object.assign({},this.streamOptions)}},{key:"concatDateTime",value:function(t){var e=new Date(t);return"".concat(this.roundingDigit(e.getDate()),"-").concat(e.toLocaleString("default",{month:"short"})," ").concat(this.roundingDigit(e.getHours()),":").concat(this.roundingDigit(e.getMinutes()),":").concat(this.roundingDigit(e.getSeconds()))}},{key:"roundingDigit",value:function(t){return t<10?"0".concat(t):t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.s),u.Y36(m.eN),u.Y36(I.R),u.Y36(N.s),u.Y36(g.t6))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngx-stream-path-chart"]],inputs:{chartName:"chartName",yAxixTitle:"yAxixTitle",data:"data",windowLen:"windowLen",time:"time",history:"history"},features:[u.TTD],decls:1,vars:1,consts:[["class","analytic-widget",4,"ngIf"],[1,"analytic-widget"],[1,"analytic-widget-header"],[1,"d-flex","justify-content-between"],[1,"mx-2"],[1,"widget-title",3,"title"],[1,"legend-label","toggle-up",3,"click"],[1,"legend-glyph",3,"ngStyle"],[1,"legend-label","toggle-down",3,"click"],[1,"interval"],[1,"mx-2",2,"text-align","right"],[1,"traffic-volume","monitor-status-normal"],["style","color: #0027FF;",4,"ngIf"],["style","color: #5ACFEA;",4,"ngIf"],[1,"analytic-widget-body"],["id","custom-mirrot-chart","style","width: 100%; display: block;",3,"Highcharts","options","callbackFunction",4,"ngIf"],[2,"color","#0027FF"],["aria-hidden","true",1,"fa","fa-arrow-up"],[2,"color","#5ACFEA"],["aria-hidden","true",1,"fa","fa-arrow-down"],["id","custom-mirrot-chart",2,"width","100%","display","block",3,"Highcharts","options","callbackFunction"]],template:function(t,e){1&t&&u.YNc(0,V,20,14,"div",0),2&t&&u.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,r.PC,c.x],styles:[".highcharts-data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:320px;max-width:800px;margin:1em auto}.highcharts-data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Verdana,sans-serif;border-collapse:collapse;border:1px solid #EBEBEB;margin:10px auto;text-align:center;width:100%;max-width:500px}.highcharts-data-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:1em 0;font-size:1.2em;color:#555}.highcharts-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;padding:.5em}.highcharts-data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:.5em}.highcharts-data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background:#f8f8f8}.highcharts-data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f1f7ff}.analytic-widget[_ngcontent-%COMP%]   .analytic-widget-header[_ngcontent-%COMP%]{display:block}.analytic-widget[_ngcontent-%COMP%]   .analytic-widget-header-cell[_ngcontent-%COMP%]{display:block;padding:5px 5px 5px 10px;position:relative}.analytic-widget[_ngcontent-%COMP%]   .legend-glyph[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;margin-right:4px;width:10px;height:10px;border-radius:6px}.analytic-widget[_ngcontent-%COMP%]   .legend-label[_ngcontent-%COMP%]{display:inline-block;font-size:12px;padding-right:8px;margin-right:4px;border-color:#e1dfec;background-color:#eae8f3;border-width:1px;text-decoration:none;cursor:pointer}.analytic-widget[_ngcontent-%COMP%]   .interval[_ngcontent-%COMP%]{background:#efefef;padding:2px 7px;font-size:11px;border-radius:2px;color:#666;margin-right:20px}.analytic-widget[_ngcontent-%COMP%]   .traffic-volume.monitor-status-normal[_ngcontent-%COMP%]{margin-top:0;background-color:#eae8f3;border-color:#e1dfec;border-width:1px;font-size:12px}"]}),e}(),H=n(1282),Q=function(){var e=function(){function e(){t(this,e),this.barChartOptions={},this.type={},this.chartOptions={},this.updateFlag=!0,this.data=[{name:"Downstream",data:[107,31,635,203,2]}],this.highcharts=H}return a(e,[{key:"ngOnInit",value:function(){this.update=this.updateFlag}},{key:"ngOnChanges",value:function(t){t.chartOptions&&t.chartOptions.currentValue&&(this.barChartOptions=Object.assign({},this.chartOptions),this.updateFlag=!0,this.update=!0)}},{key:"chartCallback",value:function(t){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngx-barchart"]],inputs:{type:"type",chartOptions:"chartOptions",updateFlag:"updateFlag"},features:[u.TTD],decls:1,vars:4,consts:[[2,"width","100%","display","block",3,"Highcharts","options","update","callbackFunction","updateChange"]],template:function(t,e){1&t&&(u.TgZ(0,"highcharts-chart",0),u.NdJ("updateChange",function(t){return e.update=t}),u.qZA()),2&t&&u.Q6J("Highcharts",e.highcharts)("options",e.barChartOptions)("update",e.update)("callbackFunction",e.chartCallback)},directives:[c.x],styles:[""]}),e}(),X=["realtimeFavCreatePop"],B=["recordCreatePop"];function G(t,e){if(1&t&&(u.TgZ(0,"div",15),u._uU(1),u.qZA()),2&t){var a=u.oxw(2);u.xp6(1),u.AsE(" ",a.delay," ",a.language["minute delay"]," ")}}function K(t,e){if(1&t&&(u.TgZ(0,"div",3),u.TgZ(1,"div",16),u.TgZ(2,"div",17),u.TgZ(3,"div",18),u.TgZ(4,"span",19),u._uU(5),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){var a=u.oxw(2);u.xp6(5),u.Oqu(a.language.Loading)}}function z(t,e){if(1&t&&u._UZ(0,"ngx-stream-path-chart",26),2&t){var a=u.oxw(4);u.Q6J("chartName",a.rate)("yAxixTitle",a.rateUnit)("data",a.data.maxRate)("time",a.data.sendTime)("windowLen",a.windowLen)("history",a.cacheRateData)}}function W(t,e){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"div",24),u.YNc(2,z,1,6,"ngx-stream-path-chart",25),u.qZA(),u.qZA()),2&t){var a=u.oxw(3);u.xp6(2),u.Q6J("ngIf",a.data.maxRate&&a.showRealTime)}}function tt(t,e){if(1&t&&u._UZ(0,"ngx-stream-path-chart",26),2&t){var a=u.oxw(4);u.Q6J("chartName",a.packet)("yAxixTitle",a.packetUnit)("data",a.data.packet)("time",a.data.sendTime)("windowLen",a.windowLen)("history",a.cachePacketData)}}function et(t,e){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"div",27),u.YNc(2,tt,1,6,"ngx-stream-path-chart",25),u.qZA(),u.qZA()),2&t){var a=u.oxw(3);u.xp6(2),u.Q6J("ngIf",a.data.packet&&a.showRealTime)}}function at(t,e){if(1&t&&u._UZ(0,"ngx-barchart",48),2&t){var a=u.oxw(4);u.Q6J("chartOptions",a.topEndPointUpChartoptions)("type","up")("updateFlag",a.updateFlag)}}function it(t,e){if(1&t&&u._UZ(0,"ngx-barchart",49),2&t){var a=u.oxw(4);u.Q6J("chartOptions",a.topEndPointDownChartoptions)("type","down")("updateFlag",a.updateFlag)}}function nt(t,e){if(1&t&&u._UZ(0,"ngx-barchart",50),2&t){var a=u.oxw(4);u.Q6J("chartOptions",a.topAppsUpChartoptions)("type","up")("updateFlag",a.updateFlag)}}function st(t,e){if(1&t&&u._UZ(0,"ngx-barchart",51),2&t){var a=u.oxw(4);u.Q6J("chartOptions",a.topAppsDownChartoptions)("type","down")("updateFlag",a.updateFlag)}}function rt(t,e){if(1&t){var a=u.EpF();u.TgZ(0,"div",20),u.TgZ(1,"div",28),u.TgZ(2,"div",29),u.TgZ(3,"div",30),u.TgZ(4,"p",31),u._uU(5),u.qZA(),u.qZA(),u.TgZ(6,"span",32),u._uU(7),u.qZA(),u._uU(8,"\xa0\xa0 "),u.TgZ(9,"span",33),u.NdJ("click",function(){return u.CHM(a),u.oxw(3).fullscreen("TEP")}),u._uU(10,"\xa0 "),u._UZ(11,"i",34),u.qZA(),u.qZA(),u.TgZ(12,"div",35),u.TgZ(13,"div",36),u.TgZ(14,"div",37),u.TgZ(15,"span",38),u._uU(16),u.qZA(),u.qZA(),u.YNc(17,at,1,3,"ngx-barchart",39),u.qZA(),u.TgZ(18,"div",40),u.TgZ(19,"div",37),u.TgZ(20,"span",38),u._uU(21),u.qZA(),u.qZA(),u.YNc(22,it,1,3,"ngx-barchart",41),u.qZA(),u.qZA(),u.qZA(),u.TgZ(23,"div",42),u.TgZ(24,"div",29),u.TgZ(25,"div",30),u.TgZ(26,"p",31),u._uU(27),u.qZA(),u.qZA(),u.TgZ(28,"span",32),u._uU(29),u.qZA(),u._uU(30,"\xa0\xa0 "),u.TgZ(31,"span",43),u.NdJ("click",function(){return u.CHM(a),u.oxw(3).fullscreen("TAPP")}),u._uU(32,"\xa0 "),u._UZ(33,"i",34),u.qZA(),u.qZA(),u.TgZ(34,"div",35),u.TgZ(35,"div",44),u.TgZ(36,"div",37),u.TgZ(37,"span",38),u._uU(38),u.qZA(),u.qZA(),u.YNc(39,nt,1,3,"ngx-barchart",45),u.qZA(),u.TgZ(40,"div",46),u.TgZ(41,"div",37),u.TgZ(42,"span",38),u._uU(43),u.qZA(),u.qZA(),u.YNc(44,st,1,3,"ngx-barchart",47),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){var i=u.oxw(3);u.xp6(5),u.Oqu(i.language.top5Endpoints),u.xp6(2),u.hij("",i.language.interval,": 15 sec"),u.xp6(9),u.hij("",i.language.upRate," "),u.xp6(1),u.Q6J("ngIf",i.topEndPointUpChartoptions&&i.showRealTime),u.xp6(4),u.hij("",i.language.downRate," "),u.xp6(1),u.Q6J("ngIf",i.topEndPointDownChartoptions&&i.showRealTime),u.xp6(5),u.Oqu(i.language.top5Applications),u.xp6(2),u.hij("",i.language.interval,": 15 sec"),u.xp6(9),u.hij("",i.language.upRate," "),u.xp6(1),u.Q6J("ngIf",i.topAppsUpChartoptions&&i.showRealTime),u.xp6(4),u.hij("",i.language.downRate," "),u.xp6(1),u.Q6J("ngIf",i.topAppsDownChartoptions&&i.showRealTime)}}function ot(t,e){if(1&t&&(u.TgZ(0,"div",3),u.TgZ(1,"div",20),u.YNc(2,W,3,1,"div",21),u.YNc(3,et,3,1,"div",21),u.qZA(),u.YNc(4,rt,45,12,"div",22),u.qZA()),2&t){var a=u.oxw(2);u.xp6(2),u.Q6J("ngIf",a.data.maxRate.length||a.showRealTime),u.xp6(1),u.Q6J("ngIf",a.data.packet.length||a.showRealTime),u.xp6(1),u.Q6J("ngIf",!a.fsView)}}function ct(t,e){if(1&t&&u._UZ(0,"ngx-barchart",58),2&t){var a=u.oxw(3);u.Q6J("chartOptions",a.topEndPointUpChartoptions)("type","up")("updateFlag",a.updateFlag)}}function lt(t,e){if(1&t&&u._UZ(0,"ngx-barchart",59),2&t){var a=u.oxw(3);u.Q6J("chartOptions",a.topEndPointDownChartoptions)("type","down")("updateFlag",a.updateFlag)}}var ht=function(){return{standalone:!0}};function pt(t,e){if(1&t){var a=u.EpF();u.TgZ(0,"div",52),u.TgZ(1,"div",29),u.TgZ(2,"div",30),u.TgZ(3,"ng-select",53),u.NdJ("ngModelChange",function(t){return u.CHM(a),u.oxw(2).selectedTopLength=t})("change",function(){return u.CHM(a),u.oxw(2).changeTopLength()}),u.qZA(),u.qZA(),u.TgZ(4,"span",32),u._uU(5),u.qZA(),u.TgZ(6,"span",54),u.NdJ("click",function(){return u.CHM(a),u.oxw(2).closeFullscreen()}),u._uU(7,"\xa0 "),u._UZ(8,"i",34),u.qZA(),u.qZA(),u.TgZ(9,"div",55),u.TgZ(10,"div",40),u.TgZ(11,"div",37),u.TgZ(12,"span",38),u._uU(13),u.TgZ(14,"b"),u._uU(15),u.qZA(),u._uU(16),u.qZA(),u.qZA(),u.YNc(17,ct,1,3,"ngx-barchart",56),u.qZA(),u.TgZ(18,"div",40),u.TgZ(19,"div",37),u.TgZ(20,"span",38),u._uU(21),u.TgZ(22,"b"),u._uU(23),u.qZA(),u._uU(24),u.qZA(),u.qZA(),u.YNc(25,lt,1,3,"ngx-barchart",57),u.qZA(),u.qZA(),u.qZA()}if(2&t){var i=u.oxw(2);u.xp6(3),u.Q6J("items",i.topLengths)("multiple",!1)("ngModel",i.selectedTopLength)("ngModelOptions",u.DdM(15,ht))("clearable",!1)("searchable",!1),u.xp6(2),u.hij("",i.language.interval,": 15 sec"),u.xp6(8),u.hij("",i.language.upRate," ("),u.xp6(2),u.hij("",i.tEPrcntData.upPercentage,"%"),u.xp6(1),u.hij(" ",i.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0),u.xp6(4),u.hij("",i.language.downRate," ("),u.xp6(2),u.hij("",i.tEPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",i.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0)}}function ut(t,e){if(1&t&&u._UZ(0,"ngx-barchart",64),2&t){var a=u.oxw(3);u.Q6J("chartOptions",a.topAppsUpChartoptions)("type","up")("updateFlag",a.updateFlag)}}function dt(t,e){if(1&t&&u._UZ(0,"ngx-barchart",65),2&t){var a=u.oxw(3);u.Q6J("chartOptions",a.topAppsDownChartoptions)("type","down")("updateFlag",a.updateFlag)}}function gt(t,e){if(1&t){var a=u.EpF();u.TgZ(0,"div",52),u.TgZ(1,"div",29),u.TgZ(2,"div",30),u.TgZ(3,"ng-select",53),u.NdJ("ngModelChange",function(t){return u.CHM(a),u.oxw(2).selectedTopLength=t})("change",function(){return u.CHM(a),u.oxw(2).changeTopLength()}),u.qZA(),u.qZA(),u.TgZ(4,"span",32),u._uU(5),u.qZA(),u.TgZ(6,"span",60),u.NdJ("click",function(){return u.CHM(a),u.oxw(2).closeFullscreen()}),u._uU(7,"\xa0 "),u._UZ(8,"i",34),u.qZA(),u.qZA(),u.TgZ(9,"div",55),u.TgZ(10,"div",61),u.TgZ(11,"div",37),u.TgZ(12,"span",38),u._uU(13),u.qZA(),u.qZA(),u.YNc(14,ut,1,3,"ngx-barchart",62),u.qZA(),u.TgZ(15,"div",40),u.TgZ(16,"div",37),u.TgZ(17,"span",38),u._uU(18),u.qZA(),u.qZA(),u.YNc(19,dt,1,3,"ngx-barchart",63),u.qZA(),u.qZA(),u.qZA()}if(2&t){var i=u.oxw(2);u.xp6(3),u.Q6J("items",i.topLengths)("multiple",!1)("ngModel",i.selectedTopLength)("ngModelOptions",u.DdM(11,ht))("clearable",!1)("searchable",!1),u.xp6(2),u.hij("",i.language.interval,": 15 sec"),u.xp6(8),u.hij("",i.language.upRate," "),u.xp6(1),u.Q6J("ngIf",!0),u.xp6(4),u.hij("",i.language.downRate," "),u.xp6(1),u.Q6J("ngIf",!0)}}function ft(t,e){if(1&t&&(u.TgZ(0,"div",1),u.TgZ(1,"section",2),u.TgZ(2,"div",3),u.TgZ(3,"div",4),u.TgZ(4,"div",5),u.TgZ(5,"h5",6),u._uU(6),u.qZA(),u.qZA(),u._UZ(7,"div",7),u.qZA(),u.qZA(),u.YNc(8,G,2,2,"div",8),u.TgZ(9,"div",9),u.YNc(10,K,6,1,"div",10),u.YNc(11,ot,5,3,"div",10),u.qZA(),u.qZA(),u.TgZ(12,"section",2),u.TgZ(13,"div",3),u.TgZ(14,"h2",11),u._uU(15),u.qZA(),u.qZA(),u.TgZ(16,"div",12),u.TgZ(17,"div",3),u.TgZ(18,"div",13),u.YNc(19,pt,26,16,"div",14),u.YNc(20,gt,20,12,"div",14),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){var a=u.oxw();u.xp6(1),u.Q6J("hidden",a.fsView),u.xp6(5),u.Oqu(a.language.trafficMonitorOverall),u.xp6(2),u.Q6J("ngIf",!a.loading),u.xp6(2),u.Q6J("ngIf",a.loading),u.xp6(1),u.Q6J("ngIf",!a.loading),u.xp6(1),u.Q6J("hidden",!a.fsView),u.xp6(3),u.Oqu(a.language.trafficMonitorOverall),u.xp6(4),u.Q6J("ngIf","TEP"==a.fsChartDetails.topChart),u.xp6(1),u.Q6J("ngIf","TAPP"==a.fsChartDetails.topChart)}}P()(b);var vt=function(){var e=function(){function e(a,i,n,s,r,o,c,l){t(this,e),this.router=a,this.customTranslateService=i,this.sso=n,this.optnsMngr=s,this.realTimeCommonFunctionService=r,this.utils=o,this.rtService=c,this.titleService=l,this.pageAvailable=!1,this.topEndPointUpXaxisArray=[],this.topEndPointUpXaxisIdArray=[],this.topEndPointUpXaxisSelection=!1,this.topEndPointDownXaxisArray=[],this.topEndPointDownXaxisIdArray=[],this.topEndPointDownXaxisSelection=!1,this.topAppsUpXaxisArray=[],this.topAppsUpXaxisIdArray=[],this.topAppsUpXaxisSelection=!1,this.topAppsDownXaxisArray=[],this.topAppsDownXaxisIdArray=[],this.topAppsDownXaxisSelection=!1,this.topLocationsUpXaxisArray=[],this.topLocationsUpXaxisIdArray=[],this.topLocationsUpXaxisSelection=!1,this.topLocationsDownXaxisArray=[],this.topLocationsDownXaxisIdArray=[],this.topLocationsDownXaxisSelection=!1,this.selectedTopLength=5,this.topLengths=[],this.updateFlag=!0,this.fsView=!1,this.fsChartDetails={},this.showChart=!1,this.Highcharts=b,this.loading=!0,this.recordingComponent=u.wA2,this.favoriteComponent=u.wA2,this.startDate=new Date,this.rate="",this.packet="",this.createFavorite=!0,this.createRecord=!0,this.windowLen=5,this.fsName="",this.data={maxRate:[],packet:[]},this.showRealTime=!1,this.tAPrcntData={downPercentage:"",upPercentage:""},this.tLPrcntData={downPercentage:"",upPercentage:""},this.tEPrcntData={downPercentage:"",upPercentage:""},this.tAData={},this.tLData={},this.tEPData={},this.showBars=!1,this.showTEPBars=!1,this.cachePacketData={},this.cacheRateData={},this.rateUnit="bps",this.packetUnit="pps",this.tepUpDataObj={},this.tepDownDataObj={},this.tapUpDataObj={},this.tapDownDataObj={},this.tlocUpDataObj={},this.tlocDownDataObj={},this.titleService.setTitle("Realtime - Data - Service - Service - Calix Cloud"),this.loading=!0}return a(e,[{key:"ngOnInit",value:function(){var t=this;this.sso.setActionLog("CSC","pageHit","realtime",window.location.href,"realtime reports intiated"),this.rtService.delay$.subscribe(function(e){e&&(t.loading=!1,t.sso.getSubscriberEndpointId()?t.getDataByNewToken():t.sso.subscriberEndPointId$.subscribe(function(e){console.log("subscribe",e),e&&-1!==t.router.url.indexOf("traffic-reports")&&t.getDataByNewToken()}),t.getRtData(),t.delay=Math.abs(t.sso.getRealtimeDelay())/6e4,t.delay=Number.isInteger(t.delay)?t.delay:t.delay.toFixed(1))}),this.language=this.customTranslateService.defualtLanguage,this.rate=this.language.RATE,this.packet=this.language.PACKET,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(e){t.rate=e.RATE,t.packet=e.PACKET,t.language=e,t.fsView&&t.createTopLengthItems()}),this.topLengths=[{name:"Top 5",value:5}];var e=this.sso.getScopes();e&&e&&e["cloud.fa.network.realtime"]&&-1===e["cloud.fa.network.realtime"].indexOf("write")&&(this.createFavorite=!1,this.createRecord=!1)}},{key:"ngAfterViewInit",value:function(){this.favoriteComponent=this.realtimeFavCreatePop,this.recordingComponent=this.recordCreatePop}},{key:"getChartOptions",value:function(t){}},{key:"fullscreen",value:function(t){this.fsChartDetails={topChart:t},this.fsView=!0,this.fsName=t,this.modifyCurrentOptionsToFS(t),this.createTopLengthItems()}},{key:"closeFullscreen",value:function(){if(this.selectedTopLength=5,this.fsView=!1,"TEP"===this.fsName){var t=this.optnsMngr.getTopEP();this.makeTEPEvents(t)}else if("TAPP"===this.fsName){var e=this.optnsMngr.getTopApp();this.makeTAPPEvents(e)}else if("TLOC"===this.fsName){var a=this.optnsMngr.getTopLoc();this.makeTLOCEvents(a)}this.fsName="",this.fsChartDetails={}}},{key:"modifyCurrentOptionsToFS",value:function(t){switch(t){case"TEP":this.fsChartDetails={topChart:"TEP",title:"Endpoints"};var e=this.optnsMngr.getTopEP();this.makeTEPEvents(e);break;case"TAPP":this.fsChartDetails={topChart:"TAPP",title:"Applications"};var a=this.optnsMngr.getTopApp();this.makeTAPPEvents(a);break;case"TLOC":this.fsChartDetails={topChart:"TLOC",title:"Locations"};var i=this.optnsMngr.getTopLoc();this.makeTLOCEvents(i)}}},{key:"ipAddress",value:function(t){}},{key:"getFSPointWidth",value:function(t){var e=14;switch(t){case 5:e=60;break;case 10:e=30;break;case 20:e=15;break;case 30:e=10}return e}},{key:"createTopLengthItems",value:function(){this.topLengths=[{name:this.language["Top 5 "+this.fsChartDetails.title],value:5},{name:this.language["Top 10 "+this.fsChartDetails.title],value:10},{name:this.language["Top 20 "+this.fsChartDetails.title],value:20},{name:this.language["Top 30 "+this.fsChartDetails.title],value:30}]}},{key:"ngOnDestroy",value:function(){this.rtSubscription&&this.rtSubscription.unsubscribe(),this.ratePacketStreamSubscription&&this.ratePacketStreamSubscription.unsubscribe(),this.tASource&&this.tASource.close(),this.tESource&&this.tESource.close(),this.tLsource&&this.tLsource.close()}},{key:"checkAllOptions",value:function(){var t=this;this.checkAllOptionsInterval=setInterval(function(){t.topEndPointUpChartoptions&&t.topEndPointDownChartoptions&&t.topAppsUpChartoptions&&t.topAppsDownChartoptions&&t.topLocationsUpChartoptions&&t.topLocationsDownChartoptions&&(t.loading=!1,t.showChart=!0,clearInterval(t.checkAllOptionsInterval))},500)}},{key:"gotoHistory",value:function(){this.router.navigate(["fa/traffic-record"])}},{key:"getData",value:function(){var t=this,e=this.sso.getOrgId(),a=this.sso.getSubscriberEndpointId();a||alert("subscriber endpoint id not set"),this.source&&(this.source=null),this.source=new f.EventSourcePolyfill("".concat(p.N.SUPPORT_URL,"/rt/sse/").concat(e,"/EP/").concat(a,"/TRF,TAPP,TEP"),{headers:{"X-Calix-ClientID":p.N.X_CALIX_CLIENTID,"X-Calix-AccessToken":this.sso.getAccessToken()}}),this.source.addEventListener("open",function(t){console.log(JSON.stringify(t)),console.log(t),console.log(new Date)}),this.source.addEventListener("state",function(e){console.log(JSON.stringify(e)),console.log("state",e),console.log(new Date),"s300"===JSON.parse(e.data).status.toLowerCase()&&(t.data={sendTime:(new Date).getTime(),usage:[0,0],maxRate:[0,0],packet:[0,0]},t.loading=!1,t.showRealTime=!0)}),this.source.addEventListener("message",function(e){console.log(JSON.parse(e.data));var a=JSON.parse(e.data);"TRF"===a.graphType?t.data=JSON.parse(e.data):t.showBars=!1,"TAPP"===a.graphType&&(t.optnsMngr.setTopApp(a),t.makeTAPPEvents(a)),"TEP"===a.graphType&&(t.topEndPointUpChartoptions=null,t.optnsMngr.setTopEP(a),t.makeTEPEvents(a)),t.loading=!1,t.showRealTime=!0}),this.source.addEventListener("error",function(e){t.source.close(),t.source=null})}},{key:"getRtData",value:function(){var t=this;this.rtSubscription&&this.rtSubscription.unsubscribe(),this.ratePacketStreamSubscription&&this.ratePacketStreamSubscription.unsubscribe(),this.ratePacketStreamSubscription=this.rtService.ratePacketStreamData$.subscribe(function(e){if(console.log("subscription data",e),"TRF"===e.graphType){var a=e.monitorString?e.monitorString.split("/"):[];a[a.length-2]==t.sso.getSubscriberEndpointId()&&(t.data=e),t.showRealTime=!0}else t.showBars=!1;t.loading=!1}),this.rtSubscription=this.rtService.rtData$.subscribe(function(e){var a=e.monitorString?e.monitorString.split("/"):[];a[a.length-2]===t.sso.getSubscriberEndpointId()&&("TAPP"===e.graphType&&(t.optnsMngr.setTopApp(e),t.makeTAPPEvents(e)),"TEP"===e.graphType&&(t.topEndPointUpChartoptions=null,t.optnsMngr.setTopEP(e),t.makeTEPEvents(e)),t.loading=!1)})}},{key:"makeTEPEvents",value:function(t){this.tEPrcntData={downPercentage:t.downPercentage,upPercentage:t.upPercentage};var e=this.fsView&&"TEP"===this.fsName?this.selectedTopLength:5,a=t.upData.length,i=t.downData.length;a>=e&&(a=e),i>=e&&(i=e),this.settepUpDataObj(t.upData),this.settepDownDataObj(t.downData);var n=this.optnsMngr.makeOptionsForRTBC(t,"bar","upData",e,this.fsView),s=this.optnsMngr.makeOptionsForRTBC(t,"bar","downData",e,this.fsView);n.chart.height=this.fsView&&"TEP"===this.fsName?560:180,n.plotOptions.series.cursor="context-menu",s.plotOptions.series.cursor="context-menu",n.plotOptions.series.pointWidth=this.fsView&&"TEP"===this.fsName?this.getFSPointWidth(a):14,s.chart.height=this.fsView&&"TEP"===this.fsName?560:180,s.plotOptions.series.pointWidth=this.fsView&&"TEP"===this.fsName?this.getFSPointWidth(i):14;var r=this;n.xAxis.labels={useHTML:!0,formatter:function(){return'<span class="topEndPointUpChartXaxis text-primary" id="'.concat(r.tepUpDataObj[this.value],'" style="cursor:context-menu">').concat(this.value,"</span>")}},n.plotOptions.series.point.events={click:function(t){}},s.xAxis.labels={useHTML:!0,formatter:function(){return'<span class="topEndPointDownChartXaxis text-primary" id="'.concat(r.tepDownDataObj[this.value],'"  style=" cursor:context-menu">').concat(this.value,"</span>")}},s.plotOptions.series.point.events={click:function(t){}},s.plotOptions.series.color="#5ACFEA",this.topEndPointUpChartoptions=Object.assign({},n),this.topEndPointDownChartoptions=Object.assign({},s)}},{key:"makeTLOCEvents",value:function(t){this.tLPrcntData={downPercentage:t.downPercentage,upPercentage:t.upPercentage};var e=this.fsView&&"TLOC"===this.fsName?this.selectedTopLength:5,a=t.upData.length,i=t.downData.length;a>=e&&(a=e),i>=e&&(i=e),this.settlocUpDataObj(t.upData),this.settlocDownDataObj(t.downData);var n=this.optnsMngr.makeOptionsForRTBC(t,"bar","upData",e,this.fsView),s=this.optnsMngr.makeOptionsForRTBC(t,"bar","downData",e,this.fsView);n.chart.height=this.fsView&&"TLOC"===this.fsName?560:180,delete n.chart.width,n.plotOptions.series.pointWidth=this.fsView&&"TLOC"===this.fsName?this.getFSPointWidth(a):14,s.chart.height=this.fsView&&"TLOC"===this.fsName?560:180,delete s.chart.width,s.plotOptions.series.pointWidth=this.fsView&&"TLOC"===this.fsName?this.getFSPointWidth(i):14;var r=this;n.xAxis.labels={useHTML:!0,formatter:function(){return'<span class="topLocationsUpChartXaxis text-primary" id="'.concat(r.tlocUpDataObj[this.value],'"  style=" cursor:context-menu">').concat(this.value,"</span>")}},n.plotOptions.series.point.events={click:function(t){}},s.xAxis.labels={useHTML:!0,formatter:function(){return'<span class="topLocationsDownChartXaxis text-primary"   id="'.concat(r.tlocDownDataObj[this.value],'" style=" cursor:context-menu">').concat(this.value,"</span>")}},s.plotOptions.series.point.events={click:function(t){}},s.plotOptions.series.color="#5ACFEA",this.topLocationsUpChartoptions=Object.assign({},n),this.topLocationsDownChartoptions=Object.assign({},s)}},{key:"makeTAPPEvents",value:function(t){this.tAPrcntData={downPercentage:t.downPercentage,upPercentage:t.upPercentage};var e=this.fsView&&"TAPP"===this.fsName?this.selectedTopLength:5,a=t.upData.length,i=t.downData.length;a>=e&&(a=e),i>=e&&(i=e),this.settapUpDataObj(t.upData),this.settapDownDataObj(t.downData);var n=this.optnsMngr.makeOptionsForRTBC(t,"bar","upData",e,this.fsView),s=this.optnsMngr.makeOptionsForRTBC(t,"bar","downData",e,this.fsView);n.plotOptions.series.cursor="context-menu",s.plotOptions.series.cursor="context-menu",n.chart.height=this.fsView&&"TAPP"===this.fsName?560:180,delete n.chart.width,n.plotOptions.series.pointWidth=this.fsView&&"TAPP"===this.fsName?this.getFSPointWidth(a):14,s.chart.height=this.fsView&&"TAPP"===this.fsName?560:180,delete s.chart.width,s.plotOptions.series.pointWidth=this.fsView&&"TAPP"===this.fsName?this.getFSPointWidth(i):14;var r=this;n.xAxis.labels={useHTML:!0,formatter:function(){return'<span class="topAppsUpChartXaxis text-primary"  id="'.concat(r.tapUpDataObj[this.value],'"  style=" cursor:context-menu">').concat(this.value,"</span>")}},n.plotOptions.series.point.events={click:function(t){}},s.xAxis.labels={useHTML:!0,formatter:function(){return'<span class="topAppsDownChartXaxis text-primary "  id="'.concat(r.tapDownDataObj[this.value],'" style=" cursor:context-menu">').concat(this.value,"</span>")}},s.plotOptions.series.point.events={click:function(t){}},s.plotOptions.series.color="#5ACFEA",this.topAppsUpChartoptions=Object.assign({},n),this.topAppsDownChartoptions=Object.assign({},s)}},{key:"getDataByNewToken",value:function(){var t=this;this.cachePacketData=this.rtService.getCachedata("packet"),this.cacheRateData=this.rtService.getCachedata("rate"),Object.keys(this.cachePacketData),this.rateUnit=this.rtService.getCurrrentUnit("rate")?this.rtService.getCurrrentUnit("rate"):"bps",this.packetUnit=this.rtService.getCurrrentUnit("packet")?this.rtService.getCurrrentUnit("packet"):"pps",this.sso.getSubscriberEndpointId()!==window.localStorage.getItem("calix.temp_endpoint_id")&&(this.rtService.clearData(),this.cachePacketData={},this.cacheRateData={},this.rtSubscription&&this.rtSubscription.unsubscribe(),this.ratePacketStreamSubscription&&this.ratePacketStreamSubscription.unsubscribe()),window.localStorage.setItem("calix.temp_endpoint_id",this.sso.getSubscriberEndpointId()),Object.keys(this.cacheRateData).length||this.sso.getAuthTokenByRT().subscribe(function(e){t.sso.setLoginInfo(e),t.rtService.getData()},function(t){})}},{key:"changeTopLength",value:function(){if("TEP"===this.fsName){var t=this.optnsMngr.getTopEP();this.makeTEPEvents(t)}else if("TAPP"===this.fsName){var e=this.optnsMngr.getTopApp();this.makeTAPPEvents(e)}else if("TLOC"===this.fsName){var a=this.optnsMngr.getTopLoc();this.makeTLOCEvents(a)}}},{key:"settepUpDataObj",value:function(t){var e={};t.forEach(function(t){e[t.name]=t.id}),this.tepUpDataObj=e}},{key:"gettepUpDataObj",value:function(){return this.tepUpDataObj}},{key:"settepDownDataObj",value:function(t){var e={};t.forEach(function(t){e[t.name]=t.id}),this.tepDownDataObj=e}},{key:"gettepDownDataObj",value:function(){return this.tepDownDataObj}},{key:"settapUpDataObj",value:function(t){var e={};t.forEach(function(t){e[t.name]=t.id}),this.tapUpDataObj=e}},{key:"gettapUpDataObj",value:function(){return this.tapUpDataObj}},{key:"settapDownDataObj",value:function(t){var e={};t.forEach(function(t){e[t.name]=t.id}),this.tapDownDataObj=e}},{key:"gettapDownDataObj",value:function(){return this.tapDownDataObj}},{key:"settlocDownDataObj",value:function(t){var e={};t.forEach(function(t){e[t.name]=t.id}),this.tlocDownDataObj=e}},{key:"gettlocDownDataObj",value:function(){return this.tlocDownDataObj}},{key:"settlocUpDataObj",value:function(t){var e={};t.forEach(function(t){e[t.name]=t.id}),this.tlocUpDataObj=e}},{key:"gettlocUpDataObj",value:function(){return this.tlocUpDataObj}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(h.F0),u.Y36(d.s),u.Y36(g.t6),u.Y36(Z.D),u.Y36(S),u.Y36(M.e),u.Y36(x),u.Y36(_.Dx))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngx-realtime"]],viewQuery:function(t,e){var a;(1&t&&(u.Gf(X,7),u.Gf(B,7)),2&t)&&(u.iGM(a=u.CRH())&&(e.realtimeFavCreatePop=a.first),u.iGM(a=u.CRH())&&(e.recordCreatePop=a.first))},decls:1,vars:1,consts:[["class","col-md-12 col-12 mt-4",4,"ngIf"],[1,"col-md-12","col-12","mt-4"],[3,"hidden"],[1,"row"],[1,"col-md-7","col-lg-8","col-xl-8","col-12","row"],[1,"with-info"],["id","trafficMonitorOverall",1,"tab-content-title","pr-2"],[1,"with-select"],["class","text-right",4,"ngIf"],[1,"bg-light","mt-3",2,"height","auto"],["class","row",4,"ngIf"],[1,"tab-content-title","col-md-3"],[1,"bg-light",2,"height","auto"],[1,"col-md-12","col-12"],["class","card","style","height:auto;",4,"ngIf"],[1,"text-right"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"col-md-12","col-lg-6","col-xl-6","col-sm-12"],["class","card m-10",4,"ngIf"],["class","col-md-12 col-lg-6 col-xl-6 col-sm-12",4,"ngIf"],[1,"card","m-10"],["id","ngx-stream-path-chart-rate",1,"card-body"],[3,"chartName","yAxixTitle","data","time","windowLen","history",4,"ngIf"],[3,"chartName","yAxixTitle","data","time","windowLen","history"],["id","ngx-stream-path-chart-packet",1,"card-body"],[1,"card","m-10",2,"height","auto"],[1,"board_head"],[1,"orange-text-wrapper",2,"display","inline-block"],[1,"orange-text"],[1,"ml20"],["id","open-fullscreen-top-endpoints",1,"top5-fullscreen","pointer",3,"click"],[1,"fa","fa-expand"],[1,"card-body","row","board_body",2,"height","210px"],["id","top-endpoints-up-chart-div",1,"col-md-6","col-12"],[1,"chart-info"],[1,""],["id","top-endpoints-up-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],[1,"col-md-6","col-12"],["id","top-endpoints-down-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],[1,"card","mt-2","m-10",2,"height","auto"],["id","open-fullscreen-top-apps",1,"top5-fullscreen","pointer",3,"click"],["id","top-apps-up-chart-div",1,"col-md-6","col-12"],["id","top-apps-up-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-down-chart-div",1,"col-md-6","col-12"],["id","top-apps-down-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-endpoints-up-chart",3,"chartOptions","type","updateFlag"],["id","top-endpoints-down-chart",3,"chartOptions","type","updateFlag"],["id","top-apps-up-chart",3,"chartOptions","type","updateFlag"],["id","top-apps-down-chart",3,"chartOptions","type","updateFlag"],[1,"card",2,"height","auto"],["id","usage_criteria","bindLabel","name","bindValue","value","placeholder","",1,"realtime-custom-select",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["id","close-fullscreen-top-endpoints",1,"top5-fullscreen","pointer",3,"click"],[1,"card-body","row","board_body","mt20"],["id","top-endpoints-up-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-endpoints-down-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-endpoints-up-chart-fullscreen",3,"chartOptions","type","updateFlag"],["id","top-endpoints-down-chart-fullscreen",3,"chartOptions","type","updateFlag"],["id","close-fullscreen-top-apps",1,"top5-fullscreen","pointer",3,"click"],[1,"col-md-6","col-6"],["id","top-apps-up-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-down-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-up-chart-fullscreen",3,"chartOptions","type","updateFlag"],["id","top-apps-down-chart-fullscreen",3,"chartOptions","type","updateFlag"]],template:function(t,e){1&t&&u.YNc(0,ft,21,9,"div",0),2&t&&u.Q6J("ngIf",e.pageAvailable)},directives:[r.O5,Y,Q,l.w9,o.JJ,o.On],styles:[".board_head[_ngcontent-%COMP%]{padding:5px 10px 0}.orange-text[_ngcontent-%COMP%]{color:#ff7f00}.ml20[_ngcontent-%COMP%]{margin-left:20px}.mt20[_ngcontent-%COMP%]{margin-top:20px}.top5-fullscreen[_ngcontent-%COMP%]{float:right}.board_body[_ngcontent-%COMP%]{padding:0!important}.chart-info[_ngcontent-%COMP%]{padding:0 10px!important}.ng-select.realtime-custom-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{color:#ff7f00!important;border:none!important;border-radius:0!important}.topEndPointUpChartXaxis[_ngcontent-%COMP%]:hover{cursor:pointer!important}.with-info[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:20px}.with-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:0}.with-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .with-select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px}.with-select[_ngcontent-%COMP%]{display:flex;align-items:center}.deafult-select[_ngcontent-%COMP%]{border-radius:20px}.m-10[_ngcontent-%COMP%]{margin-bottom:10px}.highcharts-axis-line[_ngcontent-%COMP%]{display:none!important}@media only screen and (max-width: 500px){.discover-content[_ngcontent-%COMP%]{margin-left:0!important}}@media only screen and (min-width: 501px){.discover-content[_ngcontent-%COMP%]{margin-left:1.5rem!important}}"]}),e}(),bt=[{path:"",component:A,canActivateChild:[n(91643).a],children:[{path:"realtime",component:vt},{path:"reports",loadChildren:function(){return Promise.all([n.e(3363),n.e(3686)]).then(n.bind(n,73686)).then(function(t){return t.ReportsModule})}},{path:"common-reports",loadChildren:function(){return Promise.all([n.e(3363),n.e(5207)]).then(n.bind(n,55207)).then(function(t){return t.CommonReportsModule})}},{path:"",redirectTo:"realtime",pathMatch:"full"}]}],mt=function(){var e=a(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[h.Bz.forChild(bt)],h.Bz]}),e}(),xt=n(65681),yt=function(){var e=a(function e(a){t(this,e),this.service=a,this.service.getRealtimeDelay()});return e.\u0275fac=function(t){return new(t||e)(u.LFG(x))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.ez,o.u5,mt,c.l,l.A0,xt.m]]}),e}()}}])}();