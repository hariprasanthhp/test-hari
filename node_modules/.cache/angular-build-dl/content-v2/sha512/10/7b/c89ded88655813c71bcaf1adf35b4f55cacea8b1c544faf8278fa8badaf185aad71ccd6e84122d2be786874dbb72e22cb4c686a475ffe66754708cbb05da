!function(){"use strict";function e(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[1703],{91703:function(n,r,i){i.d(r,{z:function(){return m}});var a,l=i(40205),s=i(25917),o=i(5304),c=i(88002),u=i(92340),h=i(16738),g=i(37716),d=i(7450),f=i(48483),p=i(91841),E=i(89097),y=i(39895),m=((a=function(){function n(e,t,r,i,a){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.translateService=e,this.dateUtils=t,this.httpClient=r,this.ssoAuthService=i,this.activeRoute=a,this.baseURL=u.N.API_BASE_URL,this.previousUrl="",this.isReport=!1,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){l.language=e}),this.regions=this.baseURL+"nfa/regions?tenant=0",this.locations=this.baseURL+"nfa/locations?tenant=0",this.systems=this.baseURL+"nfa/systems?tenant=0",this.reports=this.baseURL+"health/reports/",this.ont=this.baseURL+"nfa/onts/count?tenant=0&reportType=DEVICE_CHECKED_IN&type=pon",this.ontBipError=this.baseURL+"health/reports/biperror/thresholdexceededcount?tenant=0&granularity=15min&direction=both&groupBy=ont",this.ontlowlightcount=this.baseURL+"health/reports/lowlightlevelcount?tenant=0&granularity=15min&groupBy=ont",this.Interface=this.baseURL+"nfa/interfaces/names?",this.OntNames=this.baseURL+"nfa/onts/names?"}var r,i,a;return r=n,(i=[{key:"ontBipErrornew",value:function(e){return this.httpClient.get("".concat(u.N.API_BASE_URL,"health/reports/biperror/count?").concat(e+"&countBy=ont")).pipe((0,o.K)(this.handleError))}},{key:"GetBipError",value:function(e){return this.httpClient.get(" ".concat(this.reports+"/biperror?").concat(e)).pipe((0,o.K)(this.handleError))}},{key:"ontname",value:function(e){return this.httpClient.get("".concat(u.N.API_BASE_URL,"nfa/onts?fsanMac=").concat(e)).pipe((0,o.K)(this.handleError))}},{key:"getfsan",value:function(){return this.httpClient.get("".concat(this.regions)).pipe((0,o.K)(this.handleError))}},{key:"timeseries",value:function(e,t){if("pon"==t)return this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=usOct&field=dsOct&field=rxPkt&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr&field=rxErrRate&field=txErrRate&field=rxDisRate&field=txDisRate&field=dsRate&field=usRate&interfaceCategory=pon")).pipe((0,o.K)(this.handleError));if("ont"==t)return this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=dsBipErr&field=usBipErr&field=usFecTotCodeWord&field=dsFecTotCodeWord&field=upTime&field=rxOptPwr&field=neOptSignalLvl&field=txOptLvl&field=usFecCor&field=dsFecCor&field=usFecUncorCodeWord&field=dsFecUncorCodeWord")).pipe((0,o.K)(this.handleError));if("ethernet"==t||"ae"==t){var n="&field=oct&field=pkt&field=rxPkt&field=rxOct&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr&field=txOct&field=rxErrRate&field=txErrRate&field=rxDisRate&field=txDisRate&field=dsRate&field=usRate";return"ae"==t?(n+="&format=grouped&groupBy=system&groupBy=interface&groupBy=ont&interfaceCategory=ae",this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e).concat(n)).pipe((0,o.K)(this.handleError))):(n+="&interfaceCategory=ethernet",this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e).concat(n)).pipe((0,o.K)(this.handleError)))}return"dsl"==t?this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e).concat("&field=rxPkt&field=rxOct&field=rxDis&field=rxErr&field=txPkt&field=txOct&field=usCurRate&field=dsCurRate&field=usAttRate&field=dsAttRate&field=usSnrMargin&field=dsSnrMargin&field=usTargetSnr&field=dsTargetSnr&field=upTime&field=retrainCnt&field=usRate&field=dsRate&field=rxDisRate&field=rxErrRate&interfaceCategory=dsl")).pipe((0,o.K)(this.handleError)):"ae_General"==t?this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=oct&field=pkt&field=rxPkt&field=rxOct&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr&field=txOct&field=rxErrRate&field=txErrRate&field=rxDisRate&field=txDisRate&field=dsRate&field=usRate&interfaceCategory=ae&aeMgmt=true&format=grouped&groupBy=region&groupBy=location&groupBy=system&groupBy=interface&groupBy=ont")).pipe((0,o.K)(this.handleError)):void 0}},{key:"timeseriesBipError",value:function(e,t){return"pon"==t?this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=dsBipErr&field=usBipErr")).pipe((0,o.K)(this.handleError)):"ont"==t?this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=dsBer&field=usBer")).pipe((0,o.K)(this.handleError)):void 0}},{key:"GetInterfaces",value:function(e,t){return this.httpClient.get("".concat(this.Interface).concat(e)).pipe((0,c.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!0})}),e}),(0,o.K)(this.handleError))}},{key:"GetOntNames",value:function(e){return this.httpClient.get("".concat(this.OntNames).concat(e))}},{key:"pontimeseries",value:function(e){return this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=usOct&field=dsOct&field=rxPkt&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr")).pipe((0,o.K)(this.handleError))}},{key:"ethernertimeseries",value:function(e){return this.httpClient.get("".concat(this.baseURL+"/health/timeseries?").concat(e,"&field=oct&field=pkt&field=rxPkt")).pipe((0,o.K)(this.handleError))}},{key:"Lowlightlevelcount",value:function(e){return this.httpClient.get("".concat(this.reports+"/lowlightlevelcount?").concat(e)).pipe((0,o.K)(this.handleError))}},{key:"getRegions",value:function(){return this.httpClient.get("".concat(this.regions)).pipe((0,o.K)(this.handleError))}},{key:"getLocations",value:function(e){return this.httpClient.get("".concat(this.locations).concat("&region="+e)).pipe((0,c.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,o.K)(this.handleError))}},{key:"getSystems",value:function(e,t,n){var r="&location="+t;return n&&(r+="&interfaceCategory=".concat(n)),this.httpClient.get("".concat(this.systems).concat("&region="+e).concat(r)).pipe((0,c.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,o.K)(this.handleError))}},{key:"handleError",value:function(e){return(0,l._)(e)}},{key:"getOnt",value:function(){return this.httpClient.get("".concat(this.ont))}},{key:"getOntBipError",value:function(e,t){return this.httpClient.get("".concat(this.ontBipError,"&startTime=").concat(e,"&endTime=").concat(t)).pipe((0,o.K)(this.handleError))}},{key:"getLowlightlevelcount",value:function(e,t){return this.httpClient.get("".concat(this.ontlowlightcount,"&startTime=").concat(e,"&endTime=").concat(t)).pipe((0,o.K)(this.handleError))}},{key:"formatTodayDate",value:function(){var e=new Date,t=""+(e.getMonth()+1),n=""+e.getDate(),r=e.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[r,t,n].join("-")}},{key:"chartDataFraming",value:function(t,n,r,i,a){var l=[],s="fsan"==r?"ont":r;if(r="ont"==r?"fsan":r,"Packet Dropped"==n)for(var o=0;o<(null==t?void 0:t.length);o++){var c,u=t[o][r]?t[o][r]:"other";l.push((e(c={},this.language[s],t[o].deleted?u+" (Deleted)":u),e(c,this.language["Received Discarded Packets"],t[o].rxDis?t[o].rxDis:0),e(c,this.language["Transmitted Discarded Packets"],t[o].txDis?t[o].txDis:0),c))}else if("ethernet_packet"==n||"ae_packet"==n)for(o=0;o<(null==t?void 0:t.length);o++){var h,g=t[o][r]?t[o][r]:"other";l.push((e(h={},this.language[s],t[o].deleted?g+" (Deleted)":g),e(h,this.language["Received Error Packets"],t[o].rxErr?t[o].rxErr:0),e(h,this.language["Transmitted Error Packets"],t[o].txErr?t[o].txErr:0),h))}else if("PON Port Courts"==n||"PON Interface Count"==n||"ae_threshold"==n){var d=this.language.Upstream,f=this.language.Downstream;for(o=0;o<(null==t?void 0:t.length);o++){var p,E=t[o][r]?t[o][r]:"other";l.push((e(p={},this.language[s],t[o].deleted?E+" (Deleted)":E),e(p,d,t[o].usUtilExcCnt?t[o].usUtilExcCnt:0),e(p,f,t[o].dsUtilExcCnt?t[o].dsUtilExcCnt:0),p))}}else if("DSL"===a&&(n.includes("Threshold")||n.includes("Not At Attainable")||n.includes("Not At Target"))){var y=this.language.Upstream,m=this.language.Downstream;if(n.includes("Not At Attainable"))for(o=0;o<(null==t?void 0:t.length);o++){var R,v=t[o][r]?t[o][r]:"other";l.push((e(R={},this.language[s],t[o].deleted?v+" (Deleted)":v),e(R,y,t[o].usCurRateBelowThresCnt?t[o].usCurRateBelowThresCnt:0),e(R,m,t[o].dsCurRateBelowThresCnt?t[o].dsCurRateBelowThresCnt:0),R))}else if(n.includes("Not At Target"))for(o=0;o<(null==t?void 0:t.length);o++){var C,L=t[o][r]?t[o][r]:"other";l.push((e(C={},this.language[s],t[o].deleted?L+" (Deleted)":L),e(C,y,t[o].usSnrBelowThresCnt?t[o].usSnrBelowThresCnt:0),e(C,m,t[o].dsSnrBelowThresCnt?t[o].dsSnrBelowThresCnt:0),C))}else for(o=0;o<(null==t?void 0:t.length);o++){var k,T=t[o][r]?t[o][r]:"other";l.push((e(k={},this.language[s],t[o].deleted?T+" (Deleted)":T),e(k,y,t[o].usUtilExcCnt?t[o].usUtilExcCnt:0),e(k,m,t[o].dsUtilExcCnt?t[o].dsUtilExcCnt:0),k))}}else if("PON Error Rate"==n||"BIP Error Rate"==n){var b;for(b=this.activeRoute.url.includes("health/ont")?this.language["BIP Error Count"]:this.language["BIP Error Interfaces"],o=0;o<(null==t?void 0:t.length);o++){var x,B=t[o][r]?t[o][r]:"other";l.push((e(x={},this.language[s],t[o].deleted?B+" (Deleted)":B),e(x,b,t[o].count?t[o].count:0),x))}}else if("low light"==n)for(o=0;o<(null==t?void 0:t.length);o++){var O,P=t[o][r]?t[o][r]:"other";l.push((e(O={},this.language[s],t[o].deleted?P+" (Deleted)":P),e(O,this.language["Optical Power Low Threshold Count"],t[o].count?t[o].count:0),O))}else if("systemUtilization"==n)for(o=0;o<(null==t?void 0:t.length);o++){var A,S=t[o][r]?t[o][r]:"other";l.push((e(A={},this.language[s],t[o].deleted?S+" (Deleted)":S),e(A,this.language.Upstream,t[o].usUtilizationPercent?t[o].usUtilizationPercent:0),e(A,this.language.Downstream,t[o].dsUtilizationPercent?t[o].dsUtilizationPercent:0),A))}return l.length||l.push(e({},this.language["No Data Available"]," ")),l}},{key:"stackedAreaChartOptions",value:function(){var e=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"area"},title:{text:"Stacked Area Chart"},colors:["#338107","#fbe936","#fa423b"],xAxis:{labels:{rotation:-45,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}},categories:["09/25 12:15","09/25 20:15","09/26 04:15","09/26 12:15","09/26 20:15","09/27 04:15","09/27 12:15","09/27 20:15","09/28 04:15","09/28 12:15","09/28 20:15","09/29 04:15","09/29 12:15","09/29 20:15","09/30 04:15","09/30 12:15","09/30 20:15","10/01 04:15","10/01 12:15","10/01 20:15","10/02 04:15"],tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{min:0,max:100,tickInterval:25,title:{text:"Percentage(%)"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.percentage:.1f}%"},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){console.log("Category: "+this.category+", Series:"+this.series.name+", value: "+this.y)}}}},area:{stacking:"normal",lineWidth:1,marker:{enabled:!1,symbol:"circle",radius:2,states:{hover:{enabled:!0}},lineWidth:1,lineColor:"#666666"}}},series:[{name:"Free",data:[100,100,100,100,100,100,null,null,null,null,null,null,100,100,100,100,100,100,null,null,null]},{name:"Used",data:[5,4,6,5,4,9,null,null,null,null,null,null,4,5,2,4,5,7,null,null,null]},{name:"Interference",data:[20,25,18,25,22,24,null,null,null,null,null,null,20,22,25,21,23,18,null,null,null]}]});return(0,s.of)(e)}},{key:"duplicateDataHandle",value:function(e,t,n){if(null==e?void 0:e.length){var r=[],i=[];e.forEach(function(e){(!e[t]||"       "==e[t])&&(e[t]="Other"),-1===r.indexOf(e[t])?r.push(e[t]):i.push(e[t])}),e.forEach(function(e){i.forEach(function(r){e[t]===r&&(e[t]=e[t]+"_"+e[n].slice(0,5))})})}return e}},{key:"generateDownloadName",value:function(e,t,n){var r;if(r="ont"==t||"fsan"==t?"ONT":t.charAt(0).toUpperCase()+t.slice(1),"PON Port Courts"==e||"PON Interface Count"==e)switch(r){case"Region":e=this.language[n]+" "+this.language["Threshold By Region"];break;case"Location":e=this.language[n]+" "+this.language["Threshold By Location"];break;case"System":e=this.language[n]+" "+this.language["Threshold By System"];break;case"Interface":e=this.language[n]+" "+this.language["Threshold By Interface"];break;case"ONT":e=this.language[n]+" "+this.language["Threshold Exceeded By Ont"]}else if("Packet Dropped"==e)switch(r){case"Region":e=this.language[n]+" "+this.language.HPacketDroppedByRegion;break;case"Location":e=this.language[n]+" "+this.language.HPacketDiscardsByLocation;break;case"System":e=this.language[n]+" "+this.language.HPacketDroppedBySystem;break;case"Interface":e=this.language[n]+" "+this.language.HPacketDroppedByInterface;break;case"ONT":e=this.language[n]+" "+this.language.HPacketDroppedByOnt}else if("low light"==e)switch(r){case"Region":e=this.language[n]+" "+this.language.HLowLightLevelbyregion;break;case"Location":e=this.language[n]+" "+this.language.HLowLightLevelByLocation;break;case"System":e=this.language[n]+" "+this.language.HLowLightLevelBySystem;break;case"Interface":e=this.language[n]+" "+this.language.HLowLightLevelByInterface;break;case"ONT":e=this.language[n]+" "+this.language["Low Level Light By Ont"]}else if("systemUtilization"==e)e=this.language[n]+" "+this.language.HUtilizationByInterface;else if("BIP Error Rate"==e&&"PON"==n)if("Interface"==r)e=this.language[n]+" "+this.language["Interfaces with BIP Errors"];else switch(r){case"Region":e=this.language[n]+" "+this.language["BIP Error Interfaces By Region"];break;case"Location":e=this.language[n]+" "+this.language["BIP Error Interfaces By Location"];break;case"System":e=this.language[n]+" "+this.language["BIP Error Interfaces By System"];break;case"Interface":e=this.language[n]+" "+this.language["Interfaces with BIP Errors"]}else if("BIP Error Rate"==e||"PON Error Rate"==e)switch(r){case"Region":e=this.language[n]+" "+this.language.HBIPErrorbyregion;break;case"Location":e=this.language[n]+" "+this.language.HBIPErrorByLocation;break;case"System":e=this.language[n]+" "+this.language.HBIPErrorBySystem;break;case"Interface":e=this.language[n]+" "+this.language.HBIPErrorByInterface;break;case"ONT":e=this.language[n]+" "+this.language["Bip Error By Ont"]}else e=this.language[n]+" "+this.language[e];var i=e.split(" ").join("_"),a=((new Date).getTime(),"");return this.formatTodayDate()&&this.formatTodayDate(),a+=i}},{key:"getGranularity",value:function(e,t){t=this.dateUtils.getCurrentUtcTime(),console.log(t);var n,r=h(1e3*t).diff(h(1e3*e),"days")+1;return n=r<=30?"15min":r>30&&r<=90?"1hour":r>90&&r<=182?"24hour":"1month",console.log(r),n}},{key:"chart_color",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"first";return(null==e?void 0:e.deleted)?u.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS[n]:u.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS[n]}},{key:"toolip_color",value:function(e){return e==u.N.OPERATIONS.HEALTH.DELETED_TRANSPARENT.first?u.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS.first:e==u.N.OPERATIONS.HEALTH.DELETED_TRANSPARENT.second?u.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS.second:e==u.N.OPERATIONS.HEALTH.BAR_TRANSPARENT.first?u.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS.first:e==u.N.OPERATIONS.HEALTH.BAR_TRANSPARENT.second?u.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS.second:e}},{key:"totalcoutsort",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Region",i=[],a=[],l=r.toLowerCase();return e.sort("interface"==l?function(e,t){return(e[l]||"").toString().localeCompare((t[l]||"").toString(),"en",{numeric:!0})}:function(e,t){return(e[l]||"").toString().localeCompare((t[l]||"").toString(),"en",{numeric:!1})}),e.forEach(function(e){e[t]||e[n]||0==e[t]||0==e[n]?i.push(e):a.push(e)}),i.sort(function(e,r){return(r[t]?r[t]:0)+(r[n]?r[n]:0)-((e[t]?e[t]:0)+(e[n]?e[n]:0))}),[].concat(i,a)}},{key:"totalcountsort",value:function(e,t,n,r,i,a){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Region",s=[],o=[],c=l.toLowerCase();return e.sort("interface"==c?function(e,t){return(e[c]||"").toString().localeCompare((t[c]||"").toString(),"en",{numeric:!0})}:function(e,t){return(e[c]||"").toString().localeCompare((t[c]||"").toString(),"en",{numeric:!1})}),e.forEach(function(e){e[t]||e[n]||e[r]||e[i]||e[a]||0==e[t]||0==e[n]||0==e[r]||0==e[i]||0==e[a]?s.push(e):o.push(e)}),s.sort(function(e,l){return(l[t]?l[t]:0)+(l[n]?l[n]:0)+(l[r]?l[r]:0)+(l[i]?l[i]:0)+(l[a]?l[a]:0)-((e[t]?e[t]:0)+(e[n]?e[n]:0)+(e[r]?e[r]:0)+(e[i]?e[i]:0)+(e[a]?e[a]:0))}),[].concat(s,o)}}])&&t(r.prototype,i),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),n}()).\u0275fac=function(e){return new(e||a)(g.LFG(d.s),g.LFG(f.s),g.LFG(p.eN),g.LFG(E.t6),g.LFG(y.F0))},a.\u0275prov=g.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a)}}])}();