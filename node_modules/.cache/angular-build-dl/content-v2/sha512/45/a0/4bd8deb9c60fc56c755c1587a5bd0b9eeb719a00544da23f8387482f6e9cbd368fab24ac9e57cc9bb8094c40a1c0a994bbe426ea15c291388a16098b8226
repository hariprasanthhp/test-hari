!function(){function t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,a){var i=n(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:a):r.value}}).apply(this,arguments)}function n(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(i=a.key,r=void 0,"symbol"==typeof(r=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?r:String(r)),a)}var i,r}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function s(t){var e=p();return function(){var n,a=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return c(this,n)}}function c(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return h(t,arguments,f(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),d(a,t)})(t)}function h(t,e,n){return(h=p()?Reflect.construct.bind():function(t,e,n){var a=[null];a.push.apply(a,e);var i=new(Function.bind.apply(t,a));return n&&d(i,n.prototype),i}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5865],{62036:function(t,e,n){var a;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(a++,"%c"===t&&(i=a))}),e.splice(i,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(a){}}(),e.destroy=(a=!1,function(){a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=n(19859)(e);var i=t.exports.formatters;i.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},19859:function(t,e,n){t.exports=function(t){function e(t){var n,i,r,o=null;function s(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];if(s.enabled){var r=s,o=Number(new Date);r.diff=o-(n||o),r.prev=n,r.curr=o,n=o,a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return"%";c++;var i=e.formatters[n];return"function"==typeof i&&(t=i.call(r,a[c]),a.splice(c,1),c--),t}),e.formatArgs.call(r,a),(r.log||e.log).apply(r,a)}}return s.namespace=t,s.useColors=e.useColors(),s.color=e.selectColor(t),s.extend=a,s.destroy=e.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(i!==e.namespaces&&(i=e.namespaces,r=e.enabled(t)),r)},set:function(t){o=t}}),"function"==typeof e.init&&e.init(s),s}function a(t,n){var a=e(this.namespace+(void 0===n?":":n)+t);return a.log=this.log,a}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(g(e.names.map(i)),g(e.skips.map(i).map(function(t){return"-"+t}))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];var a=("string"==typeof t?t:"").split(/[\s,]+/),i=a.length;for(n=0;n<i;n++)!a[n]||("-"===(t=a[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,a;for(n=0,a=e.skips.length;n<a;n++)if(e.skips[n].test(t))return!1;for(n=0,a=e.names.length;n<a;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(58862),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(function(n){e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,a=0;a<t.length;a++)n=(n<<5)-n+t.charCodeAt(a),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},58862:function(t){var e=1e3,n=60*e,a=60*n,i=24*a;function r(t,e,n,a){var i=e>=1.5*n;return Math.round(t/n)+" "+a+(i?"s":"")}t.exports=function(t,o){o=o||{};var s=typeof t;if("string"===s&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(r){var o=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*a;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(t);if("number"===s&&isFinite(t))return o.long?function(t){var o=Math.abs(t);return o>=i?r(t,o,i,"day"):o>=a?r(t,o,a,"hour"):o>=n?r(t,o,n,"minute"):o>=e?r(t,o,e,"second"):t+" ms"}(t):function(t){var r=Math.abs(t);return r>=i?Math.round(t/i)+"d":r>=a?Math.round(t/a)+"h":r>=n?Math.round(t/n)+"m":r>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},26877:function(t,e,n){"use strict";n.d(e,{C:function(){return a}});var a=function(t){return t?[new RegExp(/^(([0-9a-f]{0,4}:){1,7}[0-9a-f]{1,4}|([0-9]{1,3}\.){3}[0-9]{1,3})$/gi),new RegExp(/^static\x2D/gi),new RegExp(/^unknown subscriber/gi),new RegExp(/^resolving/gi)].some(function(e){return e.test(t)})?t:new RegExp(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/gi).test(t)?i(t):t.substring(0,2)+"*********":""},i=function(t){var e=t.split("@");return e[0].substring(0,2)+"***@"+e[1].substring(0,2)+"***"}},51071:function(n,a,h){"use strict";h.d(a,{i:function(){return Yt}});var p={};h.r(p),h.d(p,{Decoder:function(){return At},Encoder:function(){return _t},PacketType:function(){return Ct},protocol:function(){return xt}});var d=Object.create(null);d.open="0",d.close="1",d.ping="2",d.pong="3",d.message="4",d.upgrade="5",d.noop="6";var g=Object.create(null);Object.keys(d).forEach(function(t){g[d[t]]=t});var y,v={type:"error",data:"parser error"},m="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),b="function"==typeof ArrayBuffer,T=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},k=function(t,e,n){var a=t.type,i=t.data;return m&&i instanceof Blob?e?n(i):w(i,n):b&&(i instanceof ArrayBuffer||T(i))?e?n(i):w(new Blob([i]),n):n(d[a]+(i||""))},w=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+(t||""))},n.readAsDataURL(t)};function x(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_="undefined"==typeof Uint8Array?[]:new Uint8Array(256),O=0;O<C.length;O++)_[C.charCodeAt(O)]=O;var A,D="function"==typeof ArrayBuffer,S=function(t,e){if("string"!=typeof t)return{type:"message",data:R(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:P(t.substring(1),e)}:g[n]?t.length>1?{type:g[n],data:t.substring(1)}:{type:g[n]}:v},P=function(t,e){if(D){var n=function(t){var e,n,a,i,r,o=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),l=new Uint8Array(u);for(e=0;e<s;e+=4)n=_[t.charCodeAt(e)],a=_[t.charCodeAt(e+1)],i=_[t.charCodeAt(e+2)],r=_[t.charCodeAt(e+3)],l[c++]=n<<2|a>>4,l[c++]=(15&a)<<4|i>>2,l[c++]=(3&i)<<6|63&r;return u}(t);return R(n,e)}return{base64:!0,data:t}},R=function(t,e){switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},E=String.fromCharCode(30);function Z(t){return t.reduce(function(t,e){return t+e.length},0)}function M(t,e){if(t[0].length===e)return t.shift();for(var n=new Uint8Array(e),a=0,i=0;i<e;i++)n[i]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),n}var N=h(8946),F="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function L(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return n.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{})}var I=F.setTimeout,q=F.clearTimeout;function j(t,e){e.useNativeTimers?(t.setTimeoutFn=I.bind(F),t.clearTimeoutFn=q.bind(F)):(t.setTimeoutFn=F.setTimeout.bind(F),t.clearTimeoutFn=F.clearTimeout.bind(F))}function U(t){return"string"==typeof t?function(t){for(var e=0,n=0,a=0,i=t.length;a<i;a++)(e=t.charCodeAt(a))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(a++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))}var B,J=function(t){o(n,t);var e=s(n);function n(t,a,i){var o;return r(this,n),(o=e.call(this,t)).description=a,o.context=i,o.type="TransportError",o}return i(n)}(l(Error)),V=function(t){o(a,t);var n=s(a);function a(t){var e;return r(this,a),(e=n.call(this)).writable=!1,j(u(e),t),e.opts=t,e.query=t.query,e.socket=t.socket,e}return i(a,[{key:"onError",value:function(t,n,i){return e(f(a.prototype),"emitReserved",this).call(this,"error",new J(t,n,i)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,e(f(a.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){var e=S(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){e(f(a.prototype),"emitReserved",this).call(this,"packet",t)}},{key:"onClose",value:function(t){this.readyState="closed",e(f(a.prototype),"emitReserved",this).call(this,"close",t)}},{key:"pause",value:function(t){}},{key:"createUri",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}},{key:"_hostname",value:function(){var t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(t){var e=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}(t);return e.length?"?"+e:""}}]),a}(N.Emitter),Y="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),W={},H=0,Q=0;function z(t){var e="";do{e=Y[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function $(){var t=z(+new Date);return t!==B?(H=0,B=t):t+"."+z(H++)}for(;Q<64;Q++)W[Y[Q]]=Q;var K=!1;try{K="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(O){}var G=K;function X(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||G))return new XMLHttpRequest}catch(n){}if(!e)try{return new(F[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function tt(){}var et=null!=new X({xdomain:!1}).responseType,nt=function(){var t=function(t){o(n,t);var e=s(n);function n(t,a){var i;return r(this,n),j(u(i=e.call(this)),a),i.opts=a,i.method=a.method||"GET",i.uri=t,i.data=void 0!==a.data?a.data:null,i.create(),i}return i(n,[{key:"create",value:function(){var t,e=this,a=L(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this.opts.xd;var i=this.xhr=new X(a);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var r in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}catch(r){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{i.setRequestHeader("Accept","*/*")}catch(r){}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=function(){var t;3===i.readyState&&(null===(t=e.opts.cookieJar)||void 0===t||t.parseCookies(i)),4===i.readyState&&(200===i.status||1223===i.status?e.onLoad():e.setTimeoutFn(function(){e.onError("number"==typeof i.status?i.status:0)},0))},i.send(this.data)}catch(r){return void this.setTimeoutFn(function(){e.onError(r)},0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(null!=this.xhr){if(this.xhr.onreadystatechange=tt,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(N.Emitter);return t.requestsCount=0,t.requests={},t}();function at(){for(var t in nt.requests)nt.requests.hasOwnProperty(t)&&nt.requests[t].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",at):"function"==typeof addEventListener&&addEventListener("onpagehide"in F?"pagehide":"unload",at,!1));var it="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},rt=F.WebSocket||F.MozWebSocket,ot="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),st={websocket:function(t){o(n,t);var e=s(n);function n(t){var a;return r(this,n),(a=e.call(this,t)).supportsBinary=!t.forceBase64,a}return i(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=ot?{}:L(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=ot?new rt(t,e,n):e?new rt(t,e):new rt(t)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var a=n===t.length-1;k(t[n],e.supportsBinary,function(t){try{e.ws.send(t)}catch(n){}a&&it(function(){e.writable=!0,e.emitReserved("drain")},e.setTimeoutFn)})},a=0;a<t.length;a++)n(a)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=$()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},{key:"check",value:function(){return!!rt}}]),n}(V),webtransport:function(t){o(n,t);var e=s(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"name",get:function(){return"webtransport"}},{key:"doOpen",value:function(){var t=this;"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(function(){t.onClose()}).catch(function(e){t.onError("webtransport error",e)}),this.transport.ready.then(function(){t.transport.createBidirectionalStream().then(function(e){var n=function(t,e){A||(A=new TextDecoder);var n=[],a=0,i=-1,r=!1;return new TransformStream({transform:function(o,s){for(n.push(o);;){if(0===a){if(Z(n)<1)break;var c=M(n,1);r=128==(128&c[0]),i=127&c[0],a=i<126?3:126===i?1:2}else if(1===a){if(Z(n)<2)break;var u=M(n,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),a=3}else if(2===a){if(Z(n)<8)break;var l=M(n,8),h=new DataView(l.buffer,l.byteOffset,l.length),p=h.getUint32(0);if(p>Math.pow(2,21)-1){s.enqueue(v);break}i=p*Math.pow(2,32)+h.getUint32(4),a=3}else{if(Z(n)<i)break;var d=M(n,i);s.enqueue(S(r?d:A.decode(d),e)),a=0}if(0===i||i>t){s.enqueue(v);break}}}})}(Number.MAX_SAFE_INTEGER,t.socket.binaryType),a=e.readable.pipeThrough(n).getReader(),i=new TransformStream({transform:function(t,e){!function(t,e){m&&t.data instanceof Blob?t.data.arrayBuffer().then(x).then(e):b&&(t.data instanceof ArrayBuffer||T(t.data))?e(x(t.data)):k(t,!1,function(t){y||(y=new TextEncoder),e(y.encode(t))})}(t,function(n){var a,i=n.length;if(i<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,i);else if(i<65536){a=new Uint8Array(3);var r=new DataView(a.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{a=new Uint8Array(9);var o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}t.data&&"string"!=typeof t.data&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}});i.readable.pipeTo(e.writable),t.writer=i.writable.getWriter();!function e(){a.read().then(function(n){var a=n.done,i=n.value;a||(t.onPacket(i),e())}).catch(function(t){})}();var r={type:"open"};t.query.sid&&(r.data='{"sid":"'.concat(t.query.sid,'"}')),t.writer.write(r).then(function(){return t.onOpen()})})}))}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var a=n===t.length-1;e.writer.write(t[n]).then(function(){a&&it(function(){e.writable=!0,e.emitReserved("drain")},e.setTimeoutFn)})},a=0;a<t.length;a++)n(a)}},{key:"doClose",value:function(){var t;null===(t=this.transport)||void 0===t||t.close()}}]),n}(V),polling:function(t){o(n,t);var e=s(n);function n(t){var a;if(r(this,n),(a=e.call(this,t)).polling=!1,"undefined"!=typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),a.xd="undefined"!=typeof location&&t.hostname!==location.hostname||o!==t.port}return a.supportsBinary=et&&!(t&&t.forceBase64),a.opts.withCredentials&&(a.cookieJar=void 0),c(a)}return i(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var a=0;this.polling&&(a++,this.once("pollComplete",function(){--a||n()})),this.writable||(a++,this.once("drain",function(){--a||n()}))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(t){var e=this;(function(t,e){for(var n=t.split(E),a=[],i=0;i<n.length;i++){var r=S(n[i],e);if(a.push(r),"error"===r.type)break}return a})(t,this.socket.binaryType).forEach(function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose({description:"transport closed by the server"}),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,function(t,n){var a=t.length,i=new Array(a),r=0;t.forEach(function(t,n){k(t,!1,function(t){i[n]=t,++r===a&&function(t){e.doWrite(t,function(){e.writable=!0,e.emitReserved("drain")})}(i.join(E))})})}(t)}},{key:"uri",value:function(){var t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=$()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new nt(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,a=this.request({method:"POST",data:t});a.on("success",e),a.on("error",function(t,e){n.onError("xhr post error",t,e)})}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",function(e,n){t.onError("xhr poll error",e,n)}),this.pollXhr=e}}]),n}(V)},ct=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ut=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lt(t){var e=t,n=t.indexOf("["),a=t.indexOf("]");-1!=n&&-1!=a&&(t=t.substring(0,n)+t.substring(n,a).replace(/:/g,";")+t.substring(a,t.length));for(var i=ct.exec(t||""),r={},o=14;o--;)r[ut[o]]=i[o]||"";return-1!=n&&-1!=a&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(t,e){var n=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.slice(0,1)||0===e.length)&&n.splice(0,1),"/"==e.slice(-1)&&n.splice(n.length-1,1),n}(0,r.path),r.queryKey=function(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,a){e&&(n[e]=a)}),n}(0,r.query),r}var ht=function(){var t=function(t){o(n,t);var e=s(n);function n(t){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),(a=e.call(this)).binaryType="arraybuffer",a.writeBuffer=[],t&&"object"==typeof t&&(i=t,t=null),t?(t=lt(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=lt(i.host).host),j(u(a),i),a.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=a.secure?"443":"80"),a.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),a.port=i.port||("undefined"!=typeof location&&location.port?location.port:a.secure?"443":"80"),a.transports=i.transports||["polling","websocket","webtransport"],a.writeBuffer=[],a.prevBufferLen=0,a.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),a.opts.path=a.opts.path.replace(/\/$/,"")+(a.opts.addTrailingSlash?"/":""),"string"==typeof a.opts.query&&(a.opts.query=function(t){for(var e={},n=t.split("&"),a=0,i=n.length;a<i;a++){var r=n[a].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}(a.opts.query)),a.id=null,a.upgrades=null,a.pingInterval=null,a.pingTimeout=null,a.pingTimeoutTimer=null,"function"==typeof addEventListener&&(a.opts.closeOnBeforeunload&&(a.beforeunloadEventListener=function(){a.transport&&(a.transport.removeAllListeners(),a.transport.close())},addEventListener("beforeunload",a.beforeunloadEventListener,!1)),"localhost"!==a.hostname&&(a.offlineEventListener=function(){a.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",a.offlineEventListener,!1))),a.open(),a}return i(n,[{key:"createTransport",value:function(t){var e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);var n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new st[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){e.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(a){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(t){return e.onClose("transport close",t)})}},{key:"probe",value:function(t){var e=this,a=this.createTransport(t),i=!1;n.priorWebsocketSuccess=!1;var r=function(){i||(a.send([{type:"ping",data:"probe"}]),a.once("packet",function(t){if(!i)if("pong"===t.type&&"probe"===t.data){if(e.upgrading=!0,e.emitReserved("upgrading",a),!a)return;n.priorWebsocketSuccess="websocket"===a.name,e.transport.pause(function(){i||"closed"!==e.readyState&&(h(),e.setTransport(a),a.send([{type:"upgrade"}]),e.emitReserved("upgrade",a),a=null,e.upgrading=!1,e.flush())})}else{var r=new Error("probe error");r.transport=a.name,e.emitReserved("upgradeError",r)}}))};function o(){i||(i=!0,h(),a.close(),a=null)}var s=function(t){var n=new Error("probe error: "+t);n.transport=a.name,o(),e.emitReserved("upgradeError",n)};function c(){s("transport closed")}function u(){s("socket closed")}function l(t){a&&t.name!==a.name&&o()}var h=function(){a.removeListener("open",r),a.removeListener("error",s),a.removeListener("close",c),e.off("close",u),e.off("upgrading",l)};a.once("open",r),a.once("error",s),a.once("close",c),this.once("close",u),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(function(){i||a.open()},200):a.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){t.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var t=1,e=0;e<this.writeBuffer.length;e++){var n=this.writeBuffer[e].data;if(n&&(t+=U(n)),e>0&&t>this.maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,a){if("function"==typeof e&&(a=e,e=void 0),"function"==typeof n&&(a=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},a=function(){t.once("upgrade",n),t.once("upgradeError",n)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){t.upgrading?a():e()}):this.upgrading?a():e()),this}},{key:"onError",value:function(t){n.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,a=t.length;n<a;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}]),n}(N.Emitter);return t.protocol=4,t}(),pt="function"==typeof ArrayBuffer,dt=Object.prototype.toString,ft="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===dt.call(Blob),gt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===dt.call(File);function yt(t){return pt&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||ft&&t instanceof Blob||gt&&t instanceof File}function vt(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(var n=0,a=t.length;n<a;n++)if(vt(t[n]))return!0;return!1}if(yt(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return vt(t.toJSON(),!0);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&vt(t[i]))return!0;return!1}function mt(t){var e=[],n=t;return n.data=bt(t.data,e),n.attachments=e.length,{packet:n,buffers:e}}function bt(t,e){if(!t)return t;if(yt(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var a=new Array(t.length),i=0;i<t.length;i++)a[i]=bt(t[i],e);return a}if("object"==typeof t&&!(t instanceof Date)){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=bt(t[o],e));return r}return t}function Tt(t,e){return t.data=kt(t.data,e),delete t.attachments,t}function kt(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=kt(t[n],e);else if("object"==typeof t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(t[a]=kt(t[a],e));return t}var wt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xt=5,Ct=function(){return(t=Ct||(Ct={}))[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK",Ct;var t}(),_t=function(){function t(e){r(this,t),this.replacer=e}return i(t,[{key:"encode",value:function(t){return t.type!==Ct.EVENT&&t.type!==Ct.ACK||!vt(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===Ct.EVENT?Ct.BINARY_EVENT:Ct.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}},{key:"encodeAsString",value:function(t){var e=""+t.type;return(t.type===Ct.BINARY_EVENT||t.type===Ct.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}},{key:"encodeAsBinary",value:function(t){var e=mt(t),n=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(n),a}}]),t}();function Ot(t){return"[object Object]"===Object.prototype.toString.call(t)}var At=function(t){o(a,t);var n=s(a);function a(t){var e;return r(this,a),(e=n.call(this)).reviver=t,e}return i(a,[{key:"add",value:function(t){var n;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var i=(n=this.decodeString(t)).type===Ct.BINARY_EVENT;i||n.type===Ct.BINARY_ACK?(n.type=i?Ct.EVENT:Ct.ACK,this.reconstructor=new Dt(n),0===n.attachments&&e(f(a.prototype),"emitReserved",this).call(this,"decoded",n)):e(f(a.prototype),"emitReserved",this).call(this,"decoded",n)}else{if(!yt(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,e(f(a.prototype),"emitReserved",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(t){var e=0,n={type:Number(t.charAt(0))};if(void 0===Ct[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Ct.BINARY_EVENT||n.type===Ct.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var r=t.substring(i,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(e+1)){for(var o=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(o,e)}else n.nsp="/";var s=t.charAt(e+1);if(""!==s&&Number(s)==s){for(var c=e+1;++e;){var u=t.charAt(e);if(null==u||Number(u)!=u){--e;break}if(e===t.length)break}n.id=Number(t.substring(c,e+1))}if(t.charAt(++e)){var l=this.tryParse(t.substr(e));if(!a.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n}},{key:"tryParse",value:function(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case Ct.CONNECT:return Ot(e);case Ct.DISCONNECT:return void 0===e;case Ct.CONNECT_ERROR:return"string"==typeof e||Ot(e);case Ct.EVENT:case Ct.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===wt.indexOf(e[0]));case Ct.ACK:case Ct.BINARY_ACK:return Array.isArray(e)}}}]),a}(N.Emitter),Dt=function(){function t(e){r(this,t),this.packet=e,this.buffers=[],this.reconPack=e}return i(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=Tt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}();function St(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var Pt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Rt=function(n){o(c,n);var a=s(c);function c(t,e,n){var i;return r(this,c),(i=a.call(this)).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=t,i.nsp=e,n&&n.auth&&(i.auth=n.auth),i._opts=Object.assign({},n),i.io._autoConnect&&i.open(),i}return i(c,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[St(t,"open",this.onopen.bind(this)),St(t,"packet",this.onpacket.bind(this)),St(t,"error",this.onerror.bind(this)),St(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(Pt.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:Ct.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var r=this.ids++,o=n.pop();this._registerAckCallback(r,o),i.id=r}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n,a=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var r=this.io.setTimeoutFn(function(){delete a.acks[t];for(var n=0;n<a.sendBuffer.length;n++)a.sendBuffer[n].id===t&&a.sendBuffer.splice(n,1);e.call(a,new Error("operation has timed out"))},i);this.acks[t]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];a.io.clearTimeoutFn(r),e.apply(a,[null].concat(n))}}else this.acks[t]=e}},{key:"emitWithAck",value:function(t){for(var e=this,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(function(n,i){a.push(function(t,e){return r?t?i(t):n(e):n(t)}),e.emit.apply(e,[t].concat(a))})}},{key:"_addToQueue",value:function(t){var e,n=this;"function"==typeof t[t.length-1]&&(e=t.pop());var a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return a!==n._queue[0]?void 0:(null!==t?a.tryCount>n._opts.retries&&(n._queue.shift(),e&&e(t)):(n._queue.shift(),e&&e.apply(void 0,[null].concat(r))),a.pending=!1,n._drainQueue())}),this._queue.push(a),this._drainQueue()}},{key:"_drainQueue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth(function(e){t._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(t){this.packet({type:Ct.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Ct.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ct.EVENT:case Ct.BINARY_EVENT:this.onevent(t);break;case Ct.ACK:case Ct.BINARY_ACK:this.onack(t);break;case Ct.DISCONNECT:this.ondisconnect();break;case Ct.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(n){if(this._anyListeners&&this._anyListeners.length){var a,i=t(this._anyListeners.slice());try{for(i.s();!(a=i.n()).done;){a.value.apply(this,n)}}catch(r){i.e(r)}finally{i.f()}}e(f(c.prototype),"emit",this).apply(this,n),this._pid&&n.length&&"string"==typeof n[n.length-1]&&(this._lastOffset=n[n.length-1])}},{key:"ack",value:function(t){var e=this,n=!1;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];n||(n=!0,e.packet({type:Ct.ACK,id:t,data:i}))}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach(function(e){return t.emitEvent(e)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(e){t.notifyOutgoingListeners(e),t.packet(e)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(t){return t()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ct.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}},{key:"prependAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}},{key:"offAnyOutgoing",value:function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var n,a=t(this._anyOutgoingListeners.slice());try{for(a.s();!(n=a.n()).done;){n.value.apply(this,e.data)}}catch(i){a.e(i)}finally{a.f()}}}}]),c}(N.Emitter);function Et(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Et.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Et.prototype.reset=function(){this.attempts=0},Et.prototype.setMin=function(t){this.ms=t},Et.prototype.setMax=function(t){this.max=t},Et.prototype.setJitter=function(t){this.jitter=t};var Zt=function(t){o(n,t);var e=s(n);function n(t,a){var i,o;r(this,n),(i=e.call(this)).nsps={},i.subs=[],t&&"object"==typeof t&&(a=t,t=void 0),(a=a||{}).path=a.path||"/socket.io",i.opts=a,j(u(i),a),i.reconnection(!1!==a.reconnection),i.reconnectionAttempts(a.reconnectionAttempts||1/0),i.reconnectionDelay(a.reconnectionDelay||1e3),i.reconnectionDelayMax(a.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=a.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new Et({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==a.timeout?2e4:a.timeout),i._readyState="closed",i.uri=t;var s=a.parser||p;return i.encoder=new s.Encoder,i.decoder=new s.Decoder,i._autoConnect=!1!==a.autoConnect,i._autoConnect&&i.open(),i}return i(n,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new ht(this.uri,this.opts);var n=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;var i=St(n,"open",function(){a.onopen(),t&&t()}),r=function(n){e.cleanup(),e._readyState="closed",e.emitReserved("error",n),t?t(n):e.maybeReconnectOnOpen()},o=St(n,"error",r);if(!1!==this._timeout){var s=this.setTimeoutFn(function(){i(),r(new Error("timeout")),n.close()},this._timeout);this.opts.autoUnref&&s.unref(),this.subs.push(function(){e.clearTimeoutFn(s)})}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(St(t,"ping",this.onping.bind(this)),St(t,"data",this.ondata.bind(this)),St(t,"error",this.onerror.bind(this)),St(t,"close",this.onclose.bind(this)),St(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(t){var e=this;it(function(){e.emitReserved("packet",t)},this.setTimeoutFn)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Rt(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var a=n[e];if(this.nsps[a].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(t){return t()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var a=this.setTimeoutFn(function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()}))},n);this.opts.autoUnref&&a.unref(),this.subs.push(function(){t.clearTimeoutFn(a)})}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),n}(N.Emitter),Mt={};function Nt(t,e){"object"==typeof t&&(e=t,t=void 0);var n,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),a=lt(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";var i=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+e,a.href=a.protocol+"://"+i+(n&&n.port===a.port?"":":"+a.port),a}(t,(e=e||{}).path||"/socket.io"),i=a.source,r=a.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||Mt[r]&&a.path in Mt[r].nsps?n=new Zt(i,e):(Mt[r]||(Mt[r]=new Zt(i,e)),n=Mt[r]),a.query&&!e.query&&(e.query=a.queryKey),n.socket(a.path,e)}Object.assign(Nt,{Manager:Zt,Socket:Rt,io:Nt,connect:Nt});var Ft=h(79765),Lt=h(26215),It=h(1282),qt=h(92340),jt=h(37716),Ut=h(91841),Bt=h(89097),Jt=h(39895),Vt=h(41714).Manager,Yt=function(){var t=function(){function t(e,n,a){r(this,t),this.http=e,this.sso=n,this.router=a,this.delayTime$=new Ft.xQ,this.data={},this.rtData$=new Lt.X(this.data),this.ratePacketStreamData$=new Lt.X(this.data),this.multipleRatePacketStreamData$=new Lt.X(this.data),this.multipleStreamData$=new Lt.X(this.data),this.recordResponseData$=new Ft.xQ,this.stopRecordResponseData$=new Ft.xQ,this.recordErrorResponseData$=new Ft.xQ,this.cacheRateRTDataObj={},this.cachePacketRTDataObj={},this.lastChartDataObj={},this.cacheData$=new Ft.xQ,this.endPointSearch$=new Ft.xQ,this.endPointSearchError$=new Ft.xQ,this.connectWS$=new Lt.X(!1),this.showModalInfo$=new Ft.xQ,this.endPointSearchValue="",this.previousURL="",this.isUnmapped=!1,this.delay$=new Lt.X(!1),this.wsConnectionError$=new Lt.X(!1),this.wsNoResponse$=new Lt.X({isError:!1,type:""}),this.endPointName="",this.isAggregateMember$=new Lt.X({id:null}),this.baseUrl="".concat(qt.N.API_BASE_URL,"realtime/signed-url"),this.timezoneDetected=0,this.shouldReflow=!1,this.connectErrorCount=0,this.WebSocketServer={websocketPaths:["/SystemtryComponent","/cco/issues/realtime/current-issues","/cco/traffic/network/realtime","/cco/traffic/applications/realtime","/cco/traffic/locations/realtime","/cco/traffic/endpoints/realtime","/cco/home/network-trends"],isConnected:!1,socket:null,interval:null,isdisconnected:!1,hasDisconnectedOnce:!1,callmethod:function(t,e){var n=this,a=e;clearInterval(i);var i=setInterval(function(){3==++a?(clearInterval(i),i=null,n.callmethod(6e3,3)):6==a?(clearInterval(i),i=null,n.callmethod(25e3,6)):n.isConnected?(n.isdisconnected=!1,clearInterval(i),i=null):(n.socket.connect(),n.isConnected=!0)},t)},close:function(){this.socket.emit("eventclosed","closing from client side"),this.socket.disconnect(),this.socket=void 0},connect1:function(t){var e=this;if(this.socket&&(this.socket.destroy(),delete this.socket,this.socket=null),!this.socket)return this.socket=Nt(t,{transports:["websocket"],path:"/calix/socket-io/",autoConnect:!1,reconnection:!1}),0==this.isConnected&&this.callmethod(5e3,0),this.socket.on("connect",function(){e.isConnected=!0}),this.socket.on("ping",function(){setTimeout(function(){e.socket.emit("pong")},500)}),this.socket.on("disconnect",function(t){console.log(t),e.isConnected=!1,e.isdisconnected=!0,e.hasDisconnectedOnce=!0}),this.socket.on("connect_error",function(t){e.isConnected=!1,console.log(t.message)}),this.socket.on("isConnected",function(t,e){e({status:"true"})}),this.socket}},this.recordRatePacketStreamData$=new Lt.X(this.data),this.connectionTypes={},this.currentMonitorType="",this.lastData=[0,0],this.chartData=[0,0],this.searchEPval="",this.healthRtData$=new Lt.X(this.data),this.healthRatePacketStreamData$=new Lt.X(this.data),this.healthCacheData$=new Ft.xQ,this.cachePonportData$=new Ft.xQ,this.ponPortsStreamData$=new Lt.X(this.data),this.healthWSNoResponse$=new Lt.X({isError:!1,type:""}),this.healthCurrentMonitorType="",this.healthConnectionTypes={},this.ponPortsList=[],this.filterValues={},this.customAppSearch=function(t,e){return t=t.toLowerCase(),e.groupName&&e.groupName.toLowerCase().indexOf(t)>-1||e.label.toLowerCase().indexOf(t)>-1},this.customAppGroupSearch=function(t,e){return t=t.toLowerCase(),e.name&&e.name.toLowerCase().indexOf(t)>-1||e.name.toLowerCase().indexOf(t)>-1},this.customLocSearch=function(t,e){return t=t.toLowerCase(),e.region&&e.region.toLowerCase().indexOf(t)>-1||e.name.toLowerCase().indexOf(t)>-1}}return i(t,[{key:"openSocket",value:function(){var t=new Vt("".concat(qt.N.TRAFFIC_SOCKET_URL),{transports:["websocket"],reconnectionDelayMax:1e4,path:"/calix/socket-io/"});this.WebSocketServer.socket=t.socket("",{})}},{key:"removeExistingListeners",value:function(){this.WebSocketServer.socket.off()}},{key:"emit",value:function(t,e){if("object"==typeof e&&!e.replay&&"STOP_RECORDING"!=t&&"RECORDING"!=t&&this.setCurrentMonitorInfo(e),"object"==typeof e&&"STOP_RECORDING"!=t&&this.setRealtimeDelay(e),"object"==typeof e&&e.replay&&"true"==e.replay){var n=Math.abs(this.sso.getRealtimeDelay());e.startTime=parseInt(e.startTime)-(n||6e4)}if(this.WebSocketServer.isdisconnected)return console.log(JSON.stringify(e)),console.log("Web socket is disconnected"),void this.wsConnectionError$.next(!0);e?this.WebSocketServer.socket.emit(t,e):this.WebSocketServer.socket.emit(t)}},{key:"listen",value:function(t){var e=this;this.WebSocketServer.socket.on(t,function(n){var a,i=n;if("string"==typeof i&&(i=[i]),t.includes("error_traffic")&&"string"==typeof n&&e.wsNoResponse$.next({isError:!0,type:t}),"REPLAY"===t||"event"===t){if(e.cacheRateRTDataObj={},e.cachePacketRTDataObj={},e.clearRecordRtInfo(),i&&i.length){i=i.slice(),console.log("Replay data",i),i.forEach(function(t){var n;(n=e.IsJsonString(t)?JSON.parse(t):t).confData&&n.confData.monitorId==e.connectionTypes[e.currentMonitorType].monitorId&&(e.data=n,e.cacheRTData("rate","Traffic"),e.cacheRTData("packet","Traffic"))}),e.cacheData$.next({rate:e.getCachedata("rate"),packet:e.getCachedata("packet")});var r=Object.assign(Object.assign({},e.data),e.data.confData);"TRF"===r.graphType&&(console.log(r),e.ratePacketStreamData$.next(r))}}else if(i&&i[0]&&(e.IsJsonString(i[0])&&(i[0]=i[0].slice(),i[0]=JSON.parse(i[0])),i[0].confData&&i[0].confData.monitorType===e.currentMonitorType&&i[0].confData.monitorId==(null===(a=e.connectionTypes[e.currentMonitorType])||void 0===a?void 0:a.monitorId))){var o=Object.assign(Object.assign({},i[0]),i[0].confData);"TRF"===o.graphType?(console.log(o),e.connectionTypes[e.currentMonitorType].outputStartTimeDiffToCur||(e.connectionTypes[e.currentMonitorType].outputStartTimeDiffToCur=(new Date).getTime()-parseInt(o.sendTime),e.delayTime$.next(e.connectionTypes[e.currentMonitorType].outputStartTimeDiffToCur)),e.ratePacketStreamData$.next(o)):e.rtData$.next(o)}})}},{key:"multipleEmit",value:function(t,e){if("object"==typeof e&&this.setRealtimeDelay(e),"object"==typeof e&&e.replay&&"true"==e.replay){var n=Math.abs(this.sso.getRealtimeDelay());e.startTime=parseInt(e.startTime)-(n||6e4)}this.WebSocketServer.isdisconnected?this.wsConnectionError$.next(!0):e?this.WebSocketServer.socket.emit(t,e):this.WebSocketServer.socket.emit(t)}},{key:"listenMultiple",value:function(t){var e=this;this.WebSocketServer.socket.on(t,function(n){var a=n;if("string"==typeof a&&(a=[a]),"REPLAY"===t||"event"===t)e.multipleRatePacketStreamData$.next(a);else if(a&&a[0]&&(e.IsJsonString(a[0])&&(a[0]=a[0].slice(),a[0]=JSON.parse(a[0])),a[0].confData&&("LOC"===a[0].confData.monitorType||"APP"===a[0].confData.monitorType||"APPGRP"===a[0].confData.monitorType))){var i=Object.assign(Object.assign({},a[0]),a[0].confData);"TRF"===i.graphType&&e.multipleStreamData$.next(i)}})}},{key:"listenRecord",value:function(t){var e=this;this.WebSocketServer.socket.on(t,function(n){"RECORDING"==t?e.recordResponseData$.next(n):"STOP_RECORDING"==t?e.stopRecordResponseData$.next(n):"error"==t&&e.recordErrorResponseData$.next(n)})}},{key:"getRecordData",value:function(){var t=this,e={orgId:this.sso.getOrgId(),monitorType:"NET",networkId:"".concat(this.sso.getOrgId(),"_0"),monitorId:"".concat(this.sso.getOrgId(),"_0"),graphType:"TRF,TAPP,TLOC,TEP",outputStartTimeDiffToCur:0};this.setCurrentMonitorInfo(e);var n=['{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1669898,1531250],"maxRate":[890612,816666],"packet":[9605,9358],"sendTime":1632138060000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1758492,1685044],"maxRate":[937862,898690],"packet":[9818,9722],"sendTime":1632138075000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1921935,1778104],"maxRate":[1025032,948322],"packet":[11664,11644],"sendTime":1632138090000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1741112,1603827],"maxRate":[928593,855374],"packet":[11119,11088],"sendTime":1632138105000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1861596,1767668],"maxRate":[992850,942756],"packet":[10993,11235],"sendTime":1632138120000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2353828,2173871],"maxRate":[1255374,1159398],"packet":[13430,13640],"sendTime":1632138135000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2064040,1913536],"maxRate":[1100821,1020552],"packet":[12333,12217],"sendTime":1632138150000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1934139,1784486],"maxRate":[1031540,951725],"packet":[11808,11732],"sendTime":1632138165000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2390974,2200786],"maxRate":[1275186,1173752],"packet":[14370,14282],"sendTime":1632138180000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2364978,2200961],"maxRate":[1261322,1173846],"packet":[14272,14444],"sendTime":1632138195000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2028658,1846579],"maxRate":[1081950,984842],"packet":[12647,12695],"sendTime":1632138210000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1830408,1715952],"maxRate":[976217,915174],"packet":[11394,11461],"sendTime":1632138225000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1813494,1662066],"maxRate":[967196,886434],"packet":[11670,11701],"sendTime":1632138240000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1745935,1634533],"maxRate":[931164,871750],"packet":[11462,11510],"sendTime":1632138255000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1462256,1350103],"maxRate":[779869,720054],"packet":[10005,9897],"sendTime":1632138270000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1648829,1464350],"maxRate":[879375,780986],"packet":[10184,9786],"sendTime":1632138285000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2010853,1876954],"maxRate":[1072454,1001042],"packet":[11517,11479],"sendTime":1632138300000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2089170,1983216],"maxRate":[1114224,1057715],"packet":[11624,11582],"sendTime":1632138315000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2177269,1989227],"maxRate":[1161210,1060920],"packet":[12384,12246],"sendTime":1632138330000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2238716,2091218],"maxRate":[1193982,1115316],"packet":[12421,12446],"sendTime":1632138345000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2330046,2134872],"maxRate":[1242691,1138598],"packet":[12754,12722],"sendTime":1632138360000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2304012,2146061],"maxRate":[1228806,1144566],"packet":[13040,13164],"sendTime":1632138375000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2163364,2028615],"maxRate":[1153794,1081928],"packet":[12212,12284],"sendTime":1632138390000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2426284,2290174],"maxRate":[1294018,1221426],"packet":[13614,13579],"sendTime":1632138405000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2494918,2386645],"maxRate":[1330623,1272877],"packet":[13872,13843],"sendTime":1632138420000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2414894,2261934],"maxRate":[1287944,1206364],"packet":[13178,13052],"sendTime":1632138435000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2394889,2218582],"maxRate":[1277274,1183243],"packet":[13625,13604],"sendTime":1632138450000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2418611,2260147],"maxRate":[1289926,1205411],"packet":[13722,13698],"sendTime":1632138465000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2546804,2381377],"maxRate":[1358296,1270067],"packet":[14398,14260],"sendTime":1632138480000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2153924,2005231],"maxRate":[1148760,1069456],"packet":[12462,12364],"sendTime":1632138495000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1933706,1834662],"maxRate":[1031310,978486],"packet":[10964,10826],"sendTime":1632138510000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2017426,1849974],"maxRate":[1075960,986652],"packet":[12176,11707],"sendTime":1632138525000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[2135234,2001997],"maxRate":[1138791,1067731],"packet":[12734,12556],"sendTime":1632138540000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1637154,1551267],"maxRate":[873148,827342],"packet":[9790,9718],"sendTime":1632138555000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1684980,1584558],"maxRate":[898655,845097],"packet":[10104,10083],"sendTime":1632138570000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1859924,1717283],"maxRate":[991959,915884],"packet":[11204,11320],"sendTime":1632138585000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1953386,1780490],"maxRate":[1041805,949594],"packet":[11784,11482],"sendTime":1632138600000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1657301,1526030],"maxRate":[883893,813882],"packet":[9974,9822],"sendTime":1632138615000}','{"confData":{"monitorType":"NET","monitorId":"10001_0","graphType":"TRF"},"usage":[1839265,1667763],"maxRate":[980940,889473],"packet":[11200,11129],"sendTime":1632138630000}'];this.cacheRateRTDataObj={},this.cachePacketRTDataObj={},n&&n.length&&((n=n.slice()).forEach(function(e){var n;(n=t.IsJsonString(e)?JSON.parse(e):e).confData&&n.confData.monitorId&&(t.data=n,t.cacheRTData("rate","Traffic"),t.cacheRTData("packet","Traffic"))}),this.recordRatePacketStreamData$.next({rate:this.getCachedata("rate"),packet:this.getCachedata("packet")}))}},{key:"cacheRTData",value:function(t,e){if("rate"===t){var n;this.currentData?this.lastData=this.currentData:this.chartData=[0,0],this.currentData=this.data.maxRate?this.data.maxRate:[0,0],this.yAxixTitle="rate"===t?"bps":"pps",n="Traffic"===e?this.data.sendTime?this.data.sendTime+this.connectionTypes[this.currentMonitorType].outputStartTimeDiffToCur+this.timezoneDetected:0:this.data.sendTime?this.data.sendTime+this.healthConnectionTypes[this.healthCurrentMonitorType].outputStartTimeDiffToCur+this.timezoneDetected:0;for(var a=1;a<=15;a++){var i=this.removeLast3Chars(n+1e3*a);this.cacheRateRTDataObj[i]=this.generateRTforCache(this.currentData,this.lastData,this.chartData,t),this.removeOldKeys(this.cacheRateRTDataObj,t,e)}}else{var r;this.currentDataPacket?this.lastDataPacket=this.currentDataPacket:this.chartDataPacket=[0,0],this.currentDataPacket=this.data.packet?this.data.packet:[],this.yAxixTitlePacket="rate"===t?"bps":"pps",r="Traffic"===e?this.data.sendTime?this.data.sendTime+this.connectionTypes[this.currentMonitorType].outputStartTimeDiffToCur+this.timezoneDetected:0:this.data.sendTime?this.data.sendTime+this.healthConnectionTypes[this.healthCurrentMonitorType].outputStartTimeDiffToCur+this.timezoneDetected:0;for(var o=1;o<=15;o++){var s=this.removeLast3Chars(r+1e3*o);this.cachePacketRTDataObj[s]=this.generateRTforCache(this.currentDataPacket,this.lastDataPacket,this.chartDataPacket,t),this.removeOldKeys(this.cachePacketRTDataObj,t,e)}}}},{key:"bitsToSize",value:function(t,e){var n=parseFloat(t),a="rate"===e.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(0==n&&"rate"===e.toLowerCase())return"0 bps";if(0==n&&"packet"===e.toLowerCase())return"0 pps";var i=Math.floor(Math.log(n)/Math.log(1e3));return It.numberFormat(Math.abs(n/Math.pow(1e3,i)),2)+" "+a[i]}},{key:"removeLast3Chars",value:function(t){return t=(t=t.toString()).slice(0,-3),parseInt(t)}},{key:"removeOldKeys",value:function(t,e,n){if(-1===window.location.pathname.indexOf("/cco/record")&&-1===window.location.pathname.indexOf("/organization-admin/flowAnalyze/record-view")&&-1===window.location.pathname.indexOf("/systemAdministration/flowAnalyze/record-view")){var a=Object.keys(t),i=a.length,r=300*("health"===n?this.getHealthWindowLen():this.getWindowLen())+50;if(i>r){for(var o=t,s=i-r,c=0;c<s;c++)delete o[a[c]];"rate"===e?this.cacheRateRTDataObj=o:this.cachePacketRTDataObj=o}}}},{key:"generateRTforCache",value:function(t,e,n,a){var i=this.transformData(t,e,n,a);"rate"===a?this.chartData=i:this.chartDataPacket=i,i[0]||(i[0]=0),i[1]||(i[1]=0);var r=this.bitsToSize(i[0],a),o=this.bitsToSize(i[1],a),s=r.split(" "),c=o.split(" "),u=s[1]?s[1]:"rate"===a.toLowerCase()?"bps":"pps",l=c[1]?c[1]:"rate"===a.toLowerCase()?"bps":"pps",h="";if("undefined"==(h=i[0]||i[1]?i[0]>i[1]?s[1]:c[1]:"rate"===a.toLowerCase()?this.yAxixTitle?this.yAxixTitle:"rate"===a.toLowerCase()?"bps":"pps":this.yAxixTitlePacket?this.yAxixTitlePacket:"rate"===a.toLowerCase()?"bps":"pps")&&(h="rate"===a.toLowerCase()?this.yAxixTitle?this.yAxixTitle:"rate"===a.toLowerCase()?"bps":"pps":this.yAxixTitlePacket?this.yAxixTitlePacket:"rate"===a.toLowerCase()?"bps":"pps"),"string"==typeof h&&("rate"===a.toLowerCase()?this.yAxixTitle=h:this.yAxixTitlePacket=h),i)return"rate"===a.toLowerCase()?[i[0],i[1],this.yAxixTitle,u,l]:[i[0],i[1],this.yAxixTitlePacket,u,l]}},{key:"transformData",value:function(t,e,n,a){a.toLowerCase(),Array.isArray(t)?(null==t[0]&&(t[0]=0),null==t[1]&&(t[1]=0)):t=[0,0],Array.isArray(e)?(null==e[0]&&(e[0]=0),null==e[1]&&(e[1]=0)):e=[0,0];for(var i=[],r=0;r<t.length;r++){var o=parseFloat(t[r])-parseFloat(e[r]);!parseFloat(t[r])&&!parseFloat(e[r])&&(n[r]=0);var s=o/15,c=Math.abs(parseFloat(n[r])+s);i.push(c)}return!i[0]&&!i[1]&&(t[0]||t[1])&&(i=t),i}},{key:"Checkconnectornot",value:function(t){var e,n=this;0==this.WebSocketServer.isConnected&&t&&((e=this.WebSocketServer.connect1(t)).on("connect",function(){console.log("Web Socket connected"),n.WebSocketServer.isdisconnected=!1,n.connectWS$&&n.connectWS$.next(!0)}),e.on("disconnect",function(t){console.log(t),("transport close"==t||"ping timeout"==t)&&(e.close(),n.reconnectWebSocket())}),e.on("connect_error",function(t){console.log("error",t),n.connectErrorCount<2&&(n.connectErrorCount++,setTimeout(function(){n.reconnectWebSocket()},3e4)),n.wsConnectionError$.next(!0)}))}},{key:"reconnectWebSocket",value:function(){var t=this;this.getUnSignedUrl().subscribe(function(e){t.Checkconnectornot(e.signedurl)},function(e){"HttpErrorResponse"==e.name&&setTimeout(function(){t.reconnectWebSocket()},5e3)})}},{key:"setCurrentMonitorInfo",value:function(t){t.startTime||(t.startTime=(new Date).getTime()),this.connectionTypes[t.monitorType]=t}},{key:"getCurrentMonitorInfo",value:function(t){return this.connectionTypes[t]}},{key:"setMonitorType",value:function(t){this.currentMonitorType=t}},{key:"getMonitorType",value:function(){return this.currentMonitorType}},{key:"setWindowLen",value:function(t){this.connectionTypes[this.currentMonitorType]&&(this.connectionTypes[this.currentMonitorType].windowLen=t)}},{key:"getWindowLen",value:function(){return this.connectionTypes[this.currentMonitorType]&&this.connectionTypes[this.currentMonitorType].windowLen?this.connectionTypes[this.currentMonitorType].windowLen:1}},{key:"IsJsonString",value:function(t){try{JSON.parse(t)}catch(e){return!1}return!0}},{key:"clearReplayData",value:function(){this.cachePacketRTDataObj={},this.cacheRateRTDataObj={}}},{key:"getCachedata",value:function(t){return"rate"===t?this.cacheRateRTDataObj:this.cachePacketRTDataObj}},{key:"getCurrrentUnit",value:function(t){return"rate"===t.toLowerCase()?this.yAxixTitle?this.yAxixTitle:"rate"===t.toLowerCase()?"bps":"pps":this.yAxixTitlePacket?this.yAxixTitlePacket:"rate"===t.toLowerCase()?"bps":"pps"}},{key:"clearRtInfo",value:function(){this.currentMonitorType="",this.connectionTypes={},this.clearReplayData()}},{key:"clearRecordRtInfo",value:function(){this.lastData=[0,0],this.currentData=[0,0],this.chartData=[0,0],this.lastDataPacket=[0,0],this.currentDataPacket=[0,0],this.chartDataPacket=[0,0]}},{key:"setEndpointSearch",value:function(t){this.endPointSearchValue=t,this.endPointSearch$.next(t)}},{key:"setEndPointSearchError",value:function(t){this.endPointSearchError$.next(t)}},{key:"getEndpointValue",value:function(){return this.searchEPval}},{key:"setEndpointValue",value:function(t){this.searchEPval=t}},{key:"getMinutesByMillis",value:function(t){return t/6e4}},{key:"getUnSignedUrl",value:function(){return this.http.get("".concat(this.baseUrl))}},{key:"getRealtimeDelay",value:function(){var t=this,e=this.sso.getOrganizationID(this.router.url);this.http.get("".concat(qt.N.API_BASE_URL,"fa/config/organization?org-id=").concat(e)).subscribe(function(e){if(e&&null!==e){var n=-1*(e.realtimeLateflowDelay?e.realtimeLateflowDelay:0)*1e3;t.sso.setRealtimeDelay(n),t.timezoneDetected=n}else t.sso.setRealtimeDelay(0),t.timezoneDetected=0;t.delay$.next(!0)},function(e){t.sso.setRealtimeDelay(0),t.timezoneDetected=0,t.delay$.next(!0)})}},{key:"prepareAndGetRecordData",value:function(t,e){this.cacheRateRTDataObj={},this.cachePacketRTDataObj={};var n={},a={};if(t&&t.length){t.forEach(function(t){t.confData&&"TRF"===t.confData.graphType?a[t.sendTime]=t:("object"!=typeof n[t.sendTime]&&(n[t.sendTime]={}),n[t.sendTime][t.confData.graphType]=t)});var i=Object.keys(a);i.sort(function(t,e){return Number(t)-Number(e)});var r=Object.keys(a).length;if(r)for(var o=0;o<r;o++)this.data=a[i[o]],this.cacheRTDataForRecord("rate"),this.cacheRTDataForRecord("packet")}return{stream:{rate:this.getCachedata("rate"),packet:this.getCachedata("packet")},bar:n}}},{key:"cacheRTDataForRecord",value:function(t){if("rate"===t){this.currentData?this.lastData=this.currentData:this.chartData=[0,0],this.currentData=this.data.maxRate?this.data.maxRate:[0,0],this.yAxixTitle="rate"===t?"bps":"pps";for(var e=this.data.sendTime?this.data.sendTime:0,n=1;n<=15;n++){var a=this.removeLast3Chars(e+1e3*n);this.cacheRateRTDataObj[a]=this.generateRTforCache(this.currentData,this.lastData,this.chartData,t),this.removeOldKeys(this.cacheRateRTDataObj,t)}}else{this.currentDataPacket?this.lastDataPacket=this.currentDataPacket:this.chartDataPacket=[0,0],this.currentDataPacket=this.data.packet?this.data.packet:[],this.yAxixTitlePacket="rate"===t?"bps":"pps";for(var i=this.data.sendTime?this.data.sendTime:0,r=1;r<=15;r++){var o=this.removeLast3Chars(i+1e3*r);this.cachePacketRTDataObj[o]=this.generateRTforCache(this.currentDataPacket,this.lastDataPacket,this.chartDataPacket,t),this.removeOldKeys(this.cachePacketRTDataObj,t)}}}},{key:"healthEmit",value:function(t,e){if("object"==typeof e&&!e.replay&&this.setHealthCurrentMonitorInfo(e),"object"==typeof e&&this.setRealtimeDelay(e),"object"==typeof e&&e.replay&&"true"==e.replay){var n=Math.abs(this.sso.getRealtimeDelay());e.startTime=parseInt(e.startTime)-(n||6e4)}if(this.WebSocketServer.isdisconnected)return console.log(JSON.stringify(e)),console.log("Web socket is disconnected"),void this.wsConnectionError$.next(!0);e?this.WebSocketServer.socket.emit(t,e):this.WebSocketServer.socket.emit(t)}},{key:"healthListen",value:function(t){var e=this;this.WebSocketServer.socket.on(t,function(n){var a=n;if("string"==typeof a&&(a=[a]),t.includes("error_ipfix")&&"string"==typeof n&&!n.includes("replay")&&e.healthWSNoResponse$.next({isError:!0,type:t}),"IPFIX_REPLAY"===t){if(e.cacheRateRTDataObj={},e.cachePacketRTDataObj={},e.clearRecordRtInfo(),a&&a.length){a=a.slice(),console.log("Replay data",a),a.forEach(function(t){e.data=e.IsJsonString(t)?JSON.parse(t):t,e.cacheRTData("rate","health"),e.cacheRTData("packet","health")}),e.healthCacheData$.next({rate:e.getCachedata("rate"),packet:e.getCachedata("packet")});var i=Object.assign(Object.assign({},e.data),e.data.confData);"TRF"===i.graphType&&(console.log(i),e.healthRatePacketStreamData$.next(i))}}else if(a&&a[0]&&(e.IsJsonString(a[0])&&(a[0]=a[0].slice(),a[0]=JSON.parse(a[0])),a[0].confData&&a[0].confData.monitorType.includes(e.healthCurrentMonitorType))){var r=Object.assign(Object.assign({},a[0]),a[0].confData);"TRF"===r.graphType?(console.log(r),e.healthConnectionTypes[e.healthCurrentMonitorType].hasOwnProperty("outputStartTimeDiffToCur")||(e.healthConnectionTypes[e.healthCurrentMonitorType].outputStartTimeDiffToCur=(new Date).getTime()-parseInt(r.sendTime)),e.healthRatePacketStreamData$.next(r)):e.healthRtData$.next(r)}})}},{key:"listenPonPorts",value:function(t){var e=this;null!==this.WebSocketServer.socket&&this.WebSocketServer.socket.on(t,function(n){var a=n;if("string"==typeof a&&(a=[a]),t.includes("IPFIX_REPLAY")){if(e.cacheRateRTDataObj={},e.cachePacketRTDataObj={},e.clearRecordRtInfo(),a&&a.length){(a=a.slice()).forEach(function(t){e.data=e.IsJsonString(t)?JSON.parse(t):t,e.cacheRTData("rate","health"),e.cacheRTData("packet","health")}),e.cachePonportData$.next({monitorId:t,rate:e.getCachedata("rate"),packet:e.getCachedata("packet")});var i=Object.assign(Object.assign({},e.data),e.data.confData);"TRF"===i.graphType&&e.ponPortsStreamData$.next(i)}}else if(a&&a[0]&&(e.IsJsonString(a[0])&&(a[0]=a[0].slice(),a[0]=JSON.parse(a[0])),a[0].confData&&"PORT"===a[0].confData.monitorType)){var r=Object.assign(Object.assign({},a[0]),a[0].confData);"TRF"===r.graphType&&e.ponPortsStreamData$.next(r)}})}},{key:"setPonportsInfo",value:function(t){this.ponPortsList.push(t)}},{key:"getPonportsInfo",value:function(){return this.ponPortsList}},{key:"emitPonports",value:function(t,e){if(null!==this.WebSocketServer.socket){if("object"==typeof e&&this.setRealtimeDelay(e),"object"==typeof e&&e.replay&&"true"==e.replay){var n=Math.abs(this.sso.getRealtimeDelay());e.startTime=parseInt(e.startTime)-(n||6e4)}if(this.WebSocketServer.isdisconnected)return void this.wsConnectionError$.next(!0);e?this.WebSocketServer.socket.emit(t,e||{}):this.WebSocketServer.socket.emit(t)}}},{key:"setHealthCurrentMonitorInfo",value:function(t){t.startTime||(t.startTime=(new Date).getTime()),this.healthConnectionTypes[t.monitorType]=t}},{key:"getHealthCurrentMonitorInfo",value:function(t){return this.healthConnectionTypes[t]}},{key:"setHealthMonitorType",value:function(t){this.healthCurrentMonitorType=t}},{key:"getHealthMonitorType",value:function(){return this.healthCurrentMonitorType}},{key:"setHealthWindowLen",value:function(t){this.healthConnectionTypes[this.healthCurrentMonitorType]&&(this.healthConnectionTypes[this.healthCurrentMonitorType].windowLen=t)}},{key:"getHealthWindowLen",value:function(){return this.healthConnectionTypes[this.healthCurrentMonitorType]&&this.healthConnectionTypes[this.healthCurrentMonitorType].windowLen?this.healthConnectionTypes[this.healthCurrentMonitorType].windowLen:1}},{key:"setFilterValues",value:function(t,e,n,a){this.filterValues[n]=t,this.filterValues[a]=e}},{key:"getFilterValues",value:function(){return this.filterValues}},{key:"deleteFilterValues",value:function(t,e){delete this.filterValues[t],delete this.filterValues[e]}},{key:"clearHealthReplayData",value:function(){this.cachePacketRTDataObj={},this.cacheRateRTDataObj={}}},{key:"clearHealthInfo",value:function(){this.currentMonitorType=null,this.connectionTypes={},this.filterValues={}}},{key:"calculatePercentage",value:function(t,e,n){if(!t||0===e.length)return 0;var a=(e.slice(0,n).reduce(function(t,e){return t+e.value},0)/t*100).toFixed(2);return a&&"NaN"!==a?a&&parseFloat(a)>100?100:a:0}},{key:"setRealtimeDelay",value:function(t){t.delay=this.sso.getRealtimeDelay()?Math.abs(this.sso.getRealtimeDelay())/1e3:60}}]),t}();return t.\u0275fac=function(e){return new(e||t)(jt.LFG(Ut.eN),jt.LFG(Bt.t6),jt.LFG(Jt.F0))},t.\u0275prov=jt.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},54630:function(t,e,n){"use strict";n.d(e,{Z:function(){return W}});var a=n(23771),o=n(79765),s=n(39897),c=n(92340),u=n(54395),l=n(43190),h=n(37716),p=n(7450),d=n(39895),f=n(91841),g=n(49342),y=n(48483),v=n(89097),m=n(12664),b=n(51071),T=n(39075),k=n(404),w=n(38583),x=n(86640),C=n(3679),_=["deleteModal"],O=["stopModal"];function A(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",24),h.TgZ(1,"span",25),h._UZ(2,"img",26),h.qZA(),h.TgZ(3,"button",27),h.NdJ("click",function(){return h.CHM(n),h.oxw().closeAlert()}),h._UZ(4,"span"),h.qZA(),h._UZ(5,"div",28),h.qZA()}if(2&t){var a=h.oxw();h.xp6(5),h.Q6J("innerHtml",a.errorInfo,h.oJD)}}function D(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",29),h.TgZ(1,"span",30),h._UZ(2,"img",31),h.qZA(),h.TgZ(3,"button",27),h.NdJ("click",function(){return h.CHM(n),h.oxw().closeAlert()}),h._UZ(4,"span"),h.qZA(),h._UZ(5,"div",28),h.qZA()}if(2&t){var a=h.oxw();h.xp6(5),h.Q6J("innerHtml",a.successInfo,h.oJD)}}function S(t,e){if(1&t&&h._uU(0),2&t){var n=e.item,a=h.oxw();h.hij(" ",a.language[n.name]||n.name," ")}}function P(t,e){if(1&t&&h._uU(0),2&t){var n=e.item,a=h.oxw();h.hij(" ",a.language[n.name]||n.name," ")}}function R(t,e){if(1&t&&(h.TgZ(0,"div",32),h.TgZ(1,"div",33),h.TgZ(2,"div",34),h.TgZ(3,"span",35),h._uU(4),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){var n=h.oxw();h.xp6(4),h.Oqu(n.language.Loading)}}function E(t,e){1&t&&h._UZ(0,"span",54)}function Z(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"a",55),h.NdJ("click",function(){h.CHM(n);var t=h.oxw().$implicit;return h.oxw(3).deleteConfirmation(t)}),h._UZ(1,"span",56),h.qZA()}if(2&t){var a=h.oxw(4);h.s9C("title",a.language.Delete)}}function M(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"a",57),h.NdJ("click",function(){h.CHM(n);var t=h.oxw().$implicit;return h.oxw(3).gotoRecordView(t)}),h._UZ(1,"span",58),h._uU(2),h.qZA()}if(2&t){var a=h.oxw(4);h.s9C("title",a.language.Play),h.xp6(2),h.hij(" ",a.language.Play," ")}}function N(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"a",59),h.NdJ("click",function(){h.CHM(n);var t=h.oxw().$implicit;return h.oxw(3).stopRecordConfirm(t)}),h._UZ(1,"span",60),h._uU(2),h.qZA()}if(2&t){var a=h.oxw(4);h.s9C("title",a.language.Stop),h.xp6(2),h.hij(" ",a.language.Stop," ")}}function F(t,e){if(1&t&&(h.TgZ(0,"tr",48),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.ALo(5,"date"),h.qZA(),h.TgZ(6,"td"),h._uU(7),h.qZA(),h.TgZ(8,"td"),h.YNc(9,E,1,0,"span",49),h._uU(10),h.qZA(),h.TgZ(11,"td"),h._uU(12),h.qZA(),h.TgZ(13,"td"),h._uU(14),h.qZA(),h.TgZ(15,"td"),h._uU(16),h.qZA(),h.TgZ(17,"td"),h._uU(18),h.qZA(),h.TgZ(19,"td",50),h.YNc(20,Z,2,1,"a",51),h.YNc(21,M,3,2,"a",52),h.YNc(22,N,3,2,"a",53),h.qZA(),h.qZA()),2&t){var n=e.$implicit,a=h.oxw(3);h.s9C("id",n.id),h.xp6(2),h.Oqu(n.name?n.name:""),h.xp6(2),h.Oqu(n.startTime?h.xi3(5,13,n.startTime,"yyyy-MM-dd HH:mm:ss"):""),h.xp6(3),h.Oqu(n.length?a.convertSecondsToTime(n.length):""),h.xp6(2),h.Q6J("ngIf","Recording"==n.status||"recording"==n.status),h.xp6(1),h.hij(" ",n.status?n.status:""," "),h.xp6(2),h.Oqu(n.monitorType?n.monitorType:""),h.xp6(2),h.Oqu(n.trigger?n.trigger:""),h.xp6(2),h.Oqu(n.userName?n.userName:""),h.xp6(2),h.Oqu(n.description?n.description:""),h.xp6(2),h.Q6J("ngIf","Recording"!==n.status&&"recording"!==n.status&&1==(null==n?null:n.hasWriteAccess)),h.xp6(1),h.Q6J("ngIf","Completed"==n.status||"Stopped"==n.status||"completed"==n.status||"stopped"==n.status),h.xp6(1),h.Q6J("ngIf",("Recording"==n.status||"recording"==n.status)&&1==(null==n?null:n.hasWriteAccess))}}function L(t,e){if(1&t&&(h.TgZ(0,"tbody"),h.YNc(1,F,23,16,"tr",47),h.qZA()),2&t){var n=h.oxw(2);h.xp6(1),h.Q6J("ngForOf",n.recordData)}}function I(t,e){if(1&t&&(h.TgZ(0,"tbody"),h.TgZ(1,"tr"),h.TgZ(2,"td",61),h._uU(3),h.qZA(),h.qZA(),h.qZA()),2&t){var n=h.oxw(2);h.xp6(3),h.hij("",n.language["No data available in table"]," ")}}function q(t,e){if(1&t&&(h.TgZ(0,"div",36),h.TgZ(1,"table",37),h.TgZ(2,"thead",38),h.TgZ(3,"tr"),h.TgZ(4,"th",39),h._uU(5),h.qZA(),h.TgZ(6,"th",39),h._uU(7),h.qZA(),h.TgZ(8,"th",40),h._uU(9),h.qZA(),h.TgZ(10,"th",41),h._uU(11),h.qZA(),h.TgZ(12,"th",42),h._uU(13),h.qZA(),h.TgZ(14,"th",41),h._uU(15),h.qZA(),h.TgZ(16,"th",43),h._uU(17),h.qZA(),h.TgZ(18,"th",44),h._uU(19),h.qZA(),h.TgZ(20,"th",45),h._uU(21),h.qZA(),h.qZA(),h.qZA(),h.YNc(22,L,2,1,"tbody",46),h.YNc(23,I,4,1,"tbody",46),h._UZ(24,"tbody"),h.qZA(),h.qZA()),2&t){var n=h.oxw();h.xp6(1),h.Q6J("dtOptions",n.dtOptions),h.xp6(4),h.Oqu(n.language.Name),h.xp6(2),h.Oqu(n.language.timerecording),h.xp6(2),h.Oqu(n.language.length),h.xp6(2),h.Oqu(n.language.Status),h.xp6(2),h.Oqu(n.language.Type),h.xp6(2),h.Oqu(n.language.Trigger),h.xp6(2),h.Oqu(n.language.Creator),h.xp6(2),h.Oqu(n.language.Description),h.xp6(2),h.Oqu(n.language.Action),h.xp6(1),h.Q6J("ngIf",0!=(null==n.recordData?null:n.recordData.length)),h.xp6(1),h.Q6J("ngIf",!(null!=n.recordData&&n.recordData.length)||null!=n.tableCount&&0==n.tableCount||null!=n.filterCount&&0==n.filterCount)}}function j(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",62),h.TgZ(1,"h4",63),h._uU(2),h.qZA(),h.TgZ(3,"button",64),h.NdJ("click",function(){return h.CHM(n),h.oxw().close()}),h._UZ(4,"span",8),h.qZA(),h.qZA(),h.TgZ(5,"div",65),h.TgZ(6,"p"),h._uU(7),h.qZA(),h.qZA(),h.TgZ(8,"div",66),h.TgZ(9,"button",67),h.NdJ("click",function(){return h.CHM(n),h.oxw().deleteRecording()}),h._uU(10),h.qZA(),h.TgZ(11,"button",68),h.NdJ("click",function(){return h.CHM(n),h.oxw().close()}),h._uU(12),h.qZA(),h.qZA()}if(2&t){var a=h.oxw();h.xp6(2),h.Oqu(a.language.Delete),h.xp6(5),h.hij(" ",a.language["Are you sure you want to delete this recording"],"? "),h.xp6(2),h.Q6J("disabled",a.btnDisabled),h.xp6(1),h.hij(" ",a.language.Yes," "),h.xp6(2),h.hij(" ",a.language.No," ")}}function U(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",24),h.TgZ(1,"span",25),h._UZ(2,"img",26),h.qZA(),h.TgZ(3,"button",27),h.NdJ("click",function(){return h.CHM(n),h.oxw(2).closeAlert()}),h._UZ(4,"span"),h.qZA(),h._UZ(5,"div",28),h.qZA()}if(2&t){var a=h.oxw(2);h.xp6(5),h.Q6J("innerHtml",a.stopErrorInfo,h.oJD)}}function B(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",62),h.TgZ(1,"h4",63),h._uU(2),h.qZA(),h.TgZ(3,"button",64),h.NdJ("click",function(){return h.CHM(n),h.oxw().close()}),h._UZ(4,"span",8),h.qZA(),h.qZA(),h.YNc(5,U,6,1,"div",9),h.TgZ(6,"div",65),h.TgZ(7,"p"),h._uU(8),h.qZA(),h.qZA(),h.TgZ(9,"div",66),h.TgZ(10,"button",67),h.NdJ("click",function(){return h.CHM(n),h.oxw().stopRecording()}),h._uU(11),h.qZA(),h.TgZ(12,"button",68),h.NdJ("click",function(){return h.CHM(n),h.oxw().close()}),h._uU(13),h.qZA(),h.qZA()}if(2&t){var a=h.oxw();h.xp6(2),h.Oqu(a.language["Stop Recording"]),h.xp6(3),h.Q6J("ngIf",a.stopError),h.xp6(3),h.hij(" ",a.language["Are you sure you want to stop this recording"],"? "),h.xp6(2),h.Q6J("disabled",a.btnDisabled),h.xp6(1),h.hij(" ",a.language.Yes," "),h.xp6(2),h.hij(" ",a.language.No," ")}}var J,V=function(){return{standalone:!0}},Y=n(91704),W=((J=function(){function t(e,n,a,i,s,c,u,l,h,p){var d=this;r(this,t),this.translateService=e,this.router=n,this.http=a,this.commonOrgService=i,this.dateUtils=s,this.sso=c,this.dialogService=u,this.websocketservice=l,this.titleService=h,this.commonService=p,this.recordingList=[],this.recordData=[],this.showchart=!1,this.loading=!1,this.dtOptions={},this.dtTrigger=new o.xQ,this.renderedOnce=!1,this.errorInfo="",this.error=!1,this.success=!1,this.durations=[{name:"Last Month",value:"lastMonth"},{name:"Last 3 Months",value:"last3Months"},{name:"Older than 3 Months",value:"OlderThan3Months"}],this.durationSelected="lastMonth",this.tableCountAvailable=!1,this.btnDisabled=!1,this.showTable=!0,this.isCcoTraffic=!1,this.searchText$=new o.xQ,this.stopError=!1,this.stopErrorInfo="",this.titleService.setTitle("Traffic Recording - Traffic - Operations - Calix Cloud"),this.ORG_ID=this.sso.getOrganizationID(this.router.url),this.language=this.translateService.defualtLanguage,this.tableLanguageOptions(),this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){d.language=t,d.tableLanguageOptions(),d.showTable=!0,setTimeout(function(){d.showTable=!1,d.recordData=[],d.tableCount=0,d.filterCount=0,d.getTableCount()},100)}),this.frTable=this.translateService.fr,this.esTable=this.translateService.es}return i(t,[{key:"ngOnInit",value:function(){this.commonService.showTabMenu$.next(!1),window.location.pathname.indexOf("/cco/record/list")>-1?this.isCcoTraffic=!0:this.commonOrgService.currentPageAdder("flowAnalyze"),this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,processing:!1,dom:"tipr",order:[]},this.scopes=this.sso.getScopes(),this.getTableCount(),this.tableRender(),this.doSearch()}},{key:"ngOnDestroy",value:function(){this.languageSubject.unsubscribe(),this.countSubs&&this.countSubs.unsubscribe(),this.recordErrorSubscription&&this.recordErrorSubscription.unsubscribe(),this.recordStopSubscription&&this.recordStopSubscription.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.commonService.showTabMenu$.next(!0)}},{key:"performSearch",value:function(){this.searchText.length<2||(this.searchFilterByDateTime(this.searchText),this.loading=!0,this.searchText$.next(this.searchText?this.searchText:""))}},{key:"searchFilterByDateTime",value:function(t){if(/(?:[01]\d|2[0123]):(?:[012345]\d):(?:[012345]\d)/.test(t)&&!/[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]/.test(t)){var e=t.split(":");this.searchByDuration=60*e[0]*60*1e3+60*e[1]*1e3+1e3*e[2]}else this.searchByDuration=null;if(/[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]/.test(t)){var n=new Date(t);this.searchByDateTime=n.getTime().toString(),this.searchByDateTime=this.searchByDateTime.slice(0,-3),this.searchByDateTime=parseInt(this.searchByDateTime)}else this.searchByDateTime=null}},{key:"searchByCharacters",value:function(t){var e=Y(t.target).val().toString();e&&e.length<2||(this.searchFilterByDateTime(e),13!==t.keyCode&&(this.loading=!0),this.searchText$.next(e||""))}},{key:"getTableCount",value:function(){var t=this;this.countSubs=this.http.get("".concat(c.N.API_BASE_URL,"record/job/count?orgId=").concat(this.ORG_ID,"&tenentid=0&timeRange=").concat(this.durationSelected)).subscribe(function(e){t.tableCount=e||0,t.tableCountAvailable=!0,t.showTable=!0,t.renderedOnce?t.redraw():t.tableRender()},function(e){t.tableCountAvailable=!0,t.tableRender(),t.pageErrorHandle(e)})}},{key:"getFilterCount",value:function(t){var e=this;this.countSubs=this.http.get("".concat(c.N.API_BASE_URL,"record/job/count?orgId=").concat(this.ORG_ID,"&tenentid=0&").concat(t)).subscribe(function(t){e.filterCount=t||0},function(t){404==t.status?e.filterCount=0:e.pageErrorHandle(t)})}},{key:"redraw",value:function(){this.dtElement.dtInstance.then(function(t){t.draw()})}},{key:"doSearch",value:function(){var t=this;this.searchText$.pipe((0,u.b)(500),(0,l.w)(function(t){return new s.y(function(e){return e.next(t)})})).subscribe(function(e){t.redraw()})}},{key:"tableRender",value:function(){var t=this,e=this,n="";this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,order:[0,"asc"],columnDefs:[{targets:[8],orderable:!1}],dom:"tipr",ajax:function(a,i){t.sortBy=t.getSortColumn(a.order[0].column),t.sortType=a.order[0].dir,e.loading=!0,t.showTable=!0,t.filterCount=void 0;var r=t.durationSelected?"timeRange="+t.durationSelected:"",o=t.searchText?"&filter="+encodeURIComponent(t.searchText):"";t.searchByDuration&&t.searchText&&(o="&filter="+t.searchByDuration),t.searchByDateTime&&t.searchText&&(o="&filter="+t.searchByDateTime),r+=o;var s=0;0!==a.start&&(s=a.start/a.length),o&&t.getFilterCount(r),n="".concat(c.N.API_BASE_URL,"record/job/list?orgId=").concat(t.ORG_ID,"&tenentid=0&timeRange=").concat(t.durationSelected,"&offset=").concat(s,"&size=").concat(a.length).concat(o,"&column=").concat(t.sortBy,"&sortingOrder=").concat(t.sortType),e.http.get(n).subscribe(function(n){e.recordData=n||[],t.renderedOnce=!0,e.recordData=e.checkScopeAccess(e.recordData),e.loading=!1,t.error=!1,setTimeout(function(){i({recordsTotal:e.tableCount?e.tableCount:0,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount?e.tableCount:0,data:[]})},1e3)},function(n){404==n.status?(e.recordData=[],e.loading=!1,i({recordsTotal:e.tableCount?e.tableCount:0,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount?e.tableCount:0,data:[]})):t.pageErrorHandle(n)})},language:this.esTable,drawCallback:function(e){t.tableLanguageOptions()}},this.tableLanguageOptions()}},{key:"changeFilter",value:function(){this.getTableCount()}},{key:"getSortColumn",value:function(t){var e="startTime";return 0==t?e="name":1==t?e="startTime":2==t?e="length":3==t?e="status":4==t?e="monitorType":5==t?e="trigger":6==t?e="userName":7==t?e="description":8==t&&(e="name"),e}},{key:"sortData",value:function(t,e,n){var a=[];return 0==e?a=this.sortByColumn(t,n,"name"):1==e?a=this.sortByColumn(t,n,"startTime"):2==e?a=this.sortByColumn(t,n,"length"):3==e?a=this.sortByColumn(t,n,"status"):4==e?a=this.sortByColumn(t,n,"monitorType"):5==e?a=this.sortByColumn(t,n,"trigger"):6==e?a=this.sortByColumn(t,n,"userName"):7==e?a=this.sortByColumn(t,n,"description"):8==e&&(a=t),a}},{key:"sortByColumn",value:function(t,e,n){return t.sort(function(t,a){var i=t[n]?t[n].toString().toUpperCase():"",r=a[n]?a[n].toString().toUpperCase():"";if("asc"==e){if(i<r)return-1;if(i>r)return 1}else{if(i>r)return-1;if(i<r)return 1}return 0}),t}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"convertSecondsToTime",value:function(t){return new Date(t).toISOString().substr(11,8)}},{key:"goToRecording",value:function(t){this.router.navigate(["/cco/record"],{queryParams:{id:t.id}})}},{key:"stopRecordConfirm",value:function(t){this.modalRef&&this.close(),this.stopRecordData=t,this.stopErrorInfo="",this.stopError=!1,this.modalRef=this.dialogService.open(this.stopModal)}},{key:"stopRecording",value:function(){var t=this;this.recordErrorSubscription&&this.recordErrorSubscription.unsubscribe(),this.recordStopSubscription&&this.recordStopSubscription.unsubscribe();var e=this.sso.getOrganizationID(this.router.url);this.loading=!0,this.btnDisabled=!0;var n={orgId:e.toString(),tenentid:"0",recordingId:this.stopRecordData.id};this.websocketservice.WebSocketServer.isConnected||this.websocketservice.getUnSignedUrl().subscribe(function(e){t.websocketservice.Checkconnectornot(e.signedurl),t.send("STOP_RECORDING",n),t.websocketservice.listenRecord("STOP_RECORDING"),t.websocketservice.listenRecord("error")}),this.websocketservice.WebSocketServer.isConnected&&(this.send("STOP_RECORDING",n),this.websocketservice.listenRecord("STOP_RECORDING"),this.websocketservice.listenRecord("error")),this.recordStopSubscription=this.websocketservice.stopRecordResponseData$.subscribe(function(e){t.btnDisabled=!1,t.loading=!1,e.includes("Successfully")&&(t.close(),t.loading=!0,setTimeout(function(){t.getTableCount(),t.redraw()},2e3))},function(e){t.btnDisabled=!1,t.loading=!1,t.close()}),this.recordErrorSubscription=this.websocketservice.recordErrorResponseData$.subscribe(function(e){e&&e.message&&(t.stopErrorInfo=e.message,t.stopError=!0,t.loading=!1)})}},{key:"send",value:function(t,e){this.websocketservice.emit(t,e)}},{key:"deleteRecording",value:function(){var t=this,e="".concat(c.N.API_BASE_URL,"record/job/delete?orgId=").concat(this.ORG_ID,"&tenentid=0&recordingId=").concat(this.deleteData.id,"&monitorType=").concat(this.deleteData.monitorType,"&graphType=").concat(this.deleteData.graphType);this.btnDisabled=!0,this.deleteSubs=this.http.delete(e).subscribe(function(e){t.btnDisabled=!1,t.successInfo="Recording deleted successfully",t.success=!0,t.close(),t.getTableCount(),t.redraw()},function(e){t.btnDisabled=!1,t.close(),t.pageErrorHandle(e)})}},{key:"pageErrorHandle",value:function(t){this.errorInfo=this.commonOrgService.pageErrorHandle(t),this.error=!0,this.loading=!1}},{key:"goBack",value:function(){var t="/cco/traffic/network/realtime";if(localStorage.getItem("cco_record_list_history")&&(t=localStorage.getItem("cco_record_list_history")),t.indexOf("/endpoints/")>-1||t.indexOf("/endpoint/")>-1){var e=t.split("?"),n=e[1].split("=")[1];this.router.navigate([e[0]],{queryParams:{id:n}})}else this.router.navigate([t])}},{key:"deleteConfirmation",value:function(t){this.modalRef&&this.close(),this.deleteData=t,this.modalRef=this.dialogService.open(this.deleteModal)}},{key:"close",value:function(){this.modalRef&&this.modalRef.close(),this.btnDisabled=!1}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1,this.stopError=!1}},{key:"changeTableStatusLanguage",value:function(t){var e=new Intl.NumberFormat;this.tableCounts={searchText:this.searchText,total:t._iRecordsTotal,displayCount:t._iDisplayLength,displayed:t._iRecordsDisplay,start:t._iDisplayStart};var n="fr"==sessionStorage.getItem("defaultLanguage"),a=this.searchText?n?"(filtr\xe9es \xe0 partir des ".concat(e.format(t._iRecordsTotal)," entr\xe9es totales)"):"(filtered from ".concat(e.format(t._iRecordsTotal)," total entries)"):"",i=0==t._iRecordsDisplay?-1:t._iDisplayStart,r=t._iDisplayStart+t._iDisplayLength>t._iRecordsDisplay?t._iRecordsDisplay:t._iDisplayStart+t._iDisplayLength;Y('div [role="status"]').text(n?"Affichage de ".concat(e.format(i+1)," \xe0 ").concat(e.format(r)," des ").concat(e.format(t._iRecordsDisplay)," entr\xe9es ").concat(a):"Showing ".concat(e.format(i+1)," to ").concat(e.format(r)," of ").concat(e.format(t._iRecordsDisplay)," entries ").concat(a)),Y(".first").text(n?"Le d\xe9but":"First"),Y(".previous").text(n?"Pr\xe9c\xe9dent":"Previous"),Y(".next").text(n?"Suivant":"Next"),Y(".last").text(n?"Derni\xe8re":"Last")}},{key:"checkScopeAccess",value:function(t){var e=this;return t.forEach(function(t){t.hasWriteAccess=!1,window.location.pathname.indexOf("/cco/record/list")>-1?(("NET"===t.monitorType||"EP"===t.monitorType)&&e.scopes&&-1!==e.scopes["cloud.rbac.coc.traffic.network.realtime"].indexOf("write")&&(t.hasWriteAccess=!0),("LOC"===t.monitorType||"EP"===t.monitorType)&&e.scopes&&-1!==e.scopes["cloud.rbac.coc.traffic.location.realtime"].indexOf("write")&&(t.hasWriteAccess=!0),("APP"===t.monitorType||"EP"===t.monitorType)&&e.scopes&&-1!==e.scopes["cloud.rbac.coc.traffic.applications.realtime"].indexOf("write")&&(t.hasWriteAccess=!0)):t.hasWriteAccess=!0}),t}},{key:"gotoRecordView",value:function(t){var e="/cco/record";this.isCcoTraffic||(e=this.router.url.indexOf("/".concat(c.N.SYS_ADMIN_ROUTE,"/"))>-1?"/systemAdministration/flowAnalyze/record-view":"/organization-admin/flowAnalyze/record-view"),this.router.navigate([e],{queryParams:{id:t.id}})}}]),t}()).\u0275fac=function(t){return new(t||J)(h.Y36(p.s),h.Y36(d.F0),h.Y36(f.eN),h.Y36(g.v),h.Y36(y.s),h.Y36(v.t6),h.Y36(m.FF),h.Y36(b.i),h.Y36(T.Dx),h.Y36(k.i))},J.\u0275cmp=h.Xpm({type:J,selectors:[["app-record-list"]],viewQuery:function(t,e){var n;1&t&&(h.Gf(a.G,5),h.Gf(_,7),h.Gf(O,7)),2&t&&(h.iGM(n=h.CRH())&&(e.dtElement=n.first),h.iGM(n=h.CRH())&&(e.deleteModal=n.first),h.iGM(n=h.CRH())&&(e.stopModal=n.first))},decls:28,vars:16,consts:[[1,"row"],[1,"col-md-12"],[1,"home-wrapper","flex"],[1,"w-100"],[1,"mwc-header","flex","w-100","border-bottom","mb-2"],[1,"heading-title"],[1,"mwc-btns","flex","align-items-center"],["type","button","aria-label","Close",1,"close","m-2",3,"click"],["aria-hidden","true"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","flex","justify-content-end","mt-3"],[1,"col-md-2","col-sm-4","ccl-form"],["id","durations","bindLabel","name","bindValue","value",3,"items","multiple","placeholder","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"col-md-3","col-sm-4","ccl-form"],["type","search","aria-label","Search",1,"form-control","mr-sm-2",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"add-search-icon",3,"disabled","click"],["src","assets/img/ic_search_white.svg",1,"search-icon","primary"],["class","loader load",4,"ngIf"],["class","table-responsive home-table mt-3",4,"ngIf"],["deleteModal",""],["stopModal",""],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"table-responsive","home-table","mt-3"],["id","recordingList","datatable","",1,"table","w-100",3,"dtOptions"],[1,"border-bottom"],[1,"w-15"],[1,"w-7"],[1,"w-8"],[1,"w-5"],[1,"w-12"],[1,"w-20"],[1,"w-10"],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["class","fas fa-video-camera rec-icon",4,"ngIf"],[1,"text-nowrap"],["class","action-icon mr-1",3,"title","click",4,"ngIf"],["href","javascript:void(0)","class","action-icon ml-1",3,"title","click",4,"ngIf"],["class","action-icon ml-1",3,"title","click",4,"ngIf"],[1,"fas","fa-video-camera","rec-icon"],[1,"action-icon","mr-1",3,"title","click"],[1,"fa","fa-trash","primary","pl-1"],["href","javascript:void(0)",1,"action-icon","ml-1",3,"title","click"],[1,"fa","fa-play-circle","primary"],[1,"action-icon","ml-1",3,"title","click"],[1,"fa","fa-stop-circle","primary"],["colspan","9",1,"no-data-available","text-center"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","mr-2",3,"disabled","click"],["type","button",1,"btn-default","btn-dft",3,"click"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"h2",5),h._uU(6),h.qZA(),h.TgZ(7,"div",6),h.TgZ(8,"button",7),h.NdJ("click",function(){return e.goBack()}),h._UZ(9,"span",8),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"div",0),h.YNc(11,A,6,1,"div",9),h.YNc(12,D,6,1,"div",10),h.qZA(),h.TgZ(13,"div",11),h.TgZ(14,"div",12),h.TgZ(15,"ng-select",13),h.NdJ("ngModelChange",function(t){return e.durationSelected=t})("change",function(){return e.changeFilter()}),h.YNc(16,S,1,1,"ng-template",14),h.YNc(17,P,1,1,"ng-template",15),h.qZA(),h.qZA(),h.TgZ(18,"div",16),h.TgZ(19,"input",17),h.NdJ("ngModelChange",function(t){return e.searchText=t})("keyup",function(t){return e.searchByCharacters(t)}),h.qZA(),h.TgZ(20,"button",18),h.NdJ("click",function(){return e.performSearch()}),h._UZ(21,"img",19),h.qZA(),h.qZA(),h.qZA(),h.YNc(22,R,5,1,"div",20),h.YNc(23,q,25,12,"div",21),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(24,j,13,5,"ng-template",null,22,h.W1O),h.YNc(26,B,14,6,"ng-template",null,23,h.W1O)),2&t&&(h.xp6(6),h.hij(" ",e.language["Traffic Recording"],""),h.xp6(5),h.Q6J("ngIf",e.error),h.xp6(1),h.Q6J("ngIf",e.success),h.xp6(3),h.s9C("placeholder",e.language["None Selected"]),h.Q6J("items",e.durations)("multiple",!1)("ngModel",e.durationSelected)("ngModelOptions",h.DdM(15,V))("clearable",!1)("searchable",!1),h.xp6(4),h.s9C("placeholder",e.language["Search here"]),h.Q6J("ngModel",e.searchText),h.xp6(1),h.Q6J("disabled",e.loading),h.xp6(2),h.Q6J("ngIf",e.loading),h.xp6(1),h.Q6J("ngIf",e.showTable))},directives:[w.O5,x.w9,C.JJ,C.On,x.bb,x.Z2,C.Fj,a.G,w.sg],pipes:[w.uU],styles:[".home-wrapper[_ngcontent-%COMP%]{justify-content:space-between;align-items:flex-start}.border-bottom[_ngcontent-%COMP%]{border-color:#ccc!important}.heading-title[_ngcontent-%COMP%]{font-size:42px;font-weight:300;color:#1a1f22;padding-bottom:5px;line-height:53px}.add-search-icon[_ngcontent-%COMP%]{background-color:#0279ff;width:40px;height:100%;border-radius:25px;position:absolute;right:16px;top:0;padding:7px;border:none}.action-icon[_ngcontent-%COMP%]{cursor:pointer;color:#1a1f22}.rec-icon[_ngcontent-%COMP%]{color:#e51a1a;font-size:13px}.cco-secondary-title[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;color:#1a1f22}.mwc-btns[_ngcontent-%COMP%]{justify-content:flex-end}.mwc-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:20px}.w-5[_ngcontent-%COMP%]{width:5%}.w-7[_ngcontent-%COMP%]{width:7%}.w-8[_ngcontent-%COMP%]{width:8%}.w-10[_ngcontent-%COMP%]{width:10%}.w-12[_ngcontent-%COMP%]{width:12%}.w-15[_ngcontent-%COMP%]{width:15%}.w-20[_ngcontent-%COMP%]{width:20%}"]}),J)},35049:function(t,e,n){"use strict";n.d(e,{J:function(){return yt}});var a=n(1282),o=n(92340),s=n(79765),c=n(26877),u=n(37716),l=n(39895),h=n(7450),p=n(89097),d=n(85385),f=n(51071),g=n(91841),y=n(48483),v=n(49342),m=n(39075),b=n(404),T=n(38583),k=n(94555),w=n(11067),x=n(65424),C=n.n(x),_=n(40006),O=n.n(_),A=n(25317);function D(t,e){if(1&t&&(u.TgZ(0,"span",16),u._UZ(1,"i",17),u._uU(2),u.qZA()),2&t){var n=u.oxw(2);u.xp6(2),u.hij(" ",n.upRate," ")}}function S(t,e){if(1&t&&(u.TgZ(0,"span",18),u._UZ(1,"i",19),u._uU(2),u.qZA()),2&t){var n=u.oxw(2);u.xp6(2),u.hij(" ",n.downRate,"")}}function P(t,e){if(1&t&&u._UZ(0,"highcharts-chart",20),2&t){var n=u.oxw(2);u.Q6J("Highcharts",n.highcharts)("options",n.streamOptions)("callbackFunction",n.chartCallback)}}var R=function(t){return{"background-color":t}};function E(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"div",2),u.TgZ(2,"div",3),u.TgZ(3,"div",4),u.TgZ(4,"span",5),u._uU(5),u.qZA(),u.TgZ(6,"a",6),u.NdJ("click",function(){return u.CHM(n),u.oxw().toggleUpStream()}),u._UZ(7,"span",7),u._uU(8),u.qZA(),u.TgZ(9,"a",8),u.NdJ("click",function(){return u.CHM(n),u.oxw().toggleDownStream()}),u._UZ(10,"span",7),u._uU(11),u.qZA(),u.TgZ(12,"span",9),u._uU(13),u.qZA(),u.qZA(),u.TgZ(14,"div",10),u.TgZ(15,"span",11),u.YNc(16,D,3,1,"span",12),u.YNc(17,S,3,1,"span",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(18,"div",14),u.YNc(19,P,1,3,"highcharts-chart",15),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(4),u.s9C("title",a.chartName),u.xp6(1),u.hij(" ",a.chartName," "),u.xp6(2),u.Q6J("ngStyle",u.VKq(10,R,!0===a.isUpStreamVisible?"#0027FF":"grey")),u.xp6(1),u.hij(" ",a.language.up," "),u.xp6(2),u.Q6J("ngStyle",u.VKq(12,R,!0===a.isDownStreamVisible?"#00d0ff":"grey")),u.xp6(1),u.hij(" ",a.language.down," "),u.xp6(2),u.hij("",a.language.interval," 1 sec"),u.xp6(3),u.Q6J("ngIf",a.isUpStreamVisible),u.xp6(1),u.Q6J("ngIf",a.isDownStreamVisible),u.xp6(2),u.Q6J("ngIf",a.load)}}C()(w),O()(w);var Z,M=((Z=function(){function t(e,n){r(this,t),this.customTranslateService=e,this.dateUtilsService=n,this.load=!0,this.title="myHighchart",this.highcharts=w,this.yAxixTitle="",this.pageAvailable=!1,this.windowLen=5,this.selectedFilter=1,this.selectedLocation=[],this.selectedApplication=[],this.selectedRegion=[],this.selectedSystem=[],this.lastData=[0,0],this.chartData=[0,0],this.lastChartDataObj={},this.triggerReloadChart=!1,this.minutes=[5,10,15,20,25,30],this.msgLen=0,this.inc=0,this.isDownStreamVisible=!0,this.isUpStreamVisible=!0,this.conversions={bps:1,Kbps:1e3,Mbps:1e6,Gbps:1e9,Tbps:1e12,pps:1,Kpps:1e3,Mpps:1e6,Gpps:1e9,Tpps:1e12},this.reloadChart=!1,this.sizes={bps:1,Kbps:1e3,Mbps:1e6,Gbps:1e9,Tbps:1e12,pps:1,Kpps:1e3,Mpps:1e6,Gpps:1e9,Tpps:1e12}}return i(t,[{key:"play",get:function(){return this._play},set:function(t){this._play=t,t&&this.buildNewChart()}},{key:"reload",get:function(){return this._reload},set:function(t){this._reload=t,t&&this.buildNewChart()}},{key:"ngOnInit",value:function(){var t=this;this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(e){t.language=e})}},{key:"ngOnChanges",value:function(t){if(this.chartName.toLowerCase(),t.history&&t.history.currentValue)if(this.lastChartDataObj=this.history?this.history:{},Object.keys(this.lastChartDataObj).length){var e=Object.keys(this.lastChartDataObj);this.yAxixTitle=this.lastChartDataObj[e[e.length-1]][2],this.lastData=this.data,this.chartData=this.data,this.rebuildData()}else this.buildNewChart()}},{key:"chartCallback",value:function(t){}},{key:"toggleDownStream",value:function(){this.streamOptions.series[1].visible?(this.streamOptions.series[1].visible=!1,this.isDownStreamVisible=!1):(this.streamOptions.series[1].visible=!0,this.isDownStreamVisible=!0),this.rebuildData()}},{key:"toggleUpStream",value:function(){this.streamOptions.series[0].visible?(this.streamOptions.series[0].visible=!1,this.isUpStreamVisible=!1):(this.streamOptions.series[0].visible=!0,this.isUpStreamVisible=!0),this.rebuildData()}},{key:"ngOnDestroy",value:function(){this.streamOptions={},clearInterval(this.interval),clearInterval(this.interval2),this.interval=null,this.interval2=null}},{key:"transformData",value:function(t,e,n){this.chartName.toLowerCase(),(!e||!e.length)&&(e=[0,0]);for(var a=[],i=0;i<t.length;i++){var r=parseFloat(t[i])-parseFloat(e[i]);!parseFloat(t[i])&&!parseFloat(e[i])&&(n[i]=0);var o=r/15,s=parseFloat(n[i])+o;a.push(s)}return!a[0]&&!a[1]&&(t[0]||t[1])&&this.msgLen>2&&(a=t),a}},{key:"bitsToSize",value:function(t){var e=parseFloat(t),n="rate"===this.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(0==e&&"rate"===this.chartName.toLowerCase())return"0 bps";if(0==e&&"packet"===this.chartName.toLowerCase())return"0 pps";var a=Math.floor(Math.log(e)/Math.log(1e3));return w.numberFormat(Math.abs(e/Math.pow(1e3,a)),2)+" "+n[a]}},{key:"removeLast3Chars",value:function(t){return t=(t=t.toString()).slice(0,-3),parseInt(t)}},{key:"removeOldKeys",value:function(){var t=Object.keys(this.lastChartDataObj),e=t.length;if(e>300*this.selectedFilter){for(var n=this.lastChartDataObj,a=e-300*this.selectedFilter,i=0;i<a;i++)delete n[t[i]];this.lastChartDataObj=n}}},{key:"getPacketRate",value:function(t){var e=t,n="rate"===this.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"];if(0==e&&"rate"===this.chartName.toLowerCase())return"0 bps";if(0==e&&"packet"===this.chartName.toLowerCase())return"0 pps";var a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1e3,a))+" "+n[a]}},{key:"timezoneDetected",value:function(){var t,e=new Date("1/1/"+(new Date).getUTCFullYear()),n=1e4;for(t=0;t<12;t++)e.setUTCMonth(e.getUTCMonth()+1),n>-1*e.getTimezoneOffset()&&(n=-1*e.getTimezoneOffset());return 0}},{key:"rebuildData",value:function(){this.chartName.toLowerCase(),Object.keys(this.lastChartDataObj).length&&(this.reloadChart=!0,this.buildNewChart())}},{key:"buildNewChart",value:function(){this.time=1e3*this.dateUtilsService.getCurrentUtcTime(),this.streamOptions={};var t=this.timezoneDetected(),e=this.startTime+1e3*this.playedTime,n=this;this.streamOptions={chart:{type:"areaspline",height:200,events:{load:function(){var e="rate"===n.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"],a=this.series;n.interval=setInterval(function(){if(!(n.startTime+1e3*n.playedTime>n.endTime)&&n.play){var i=n.startTime+1e3*n.playedTime+t,r=n.removeLast3Chars(i),o=[0,0];void 0!==n.lastChartDataObj[r]&&(o=n.lastChartDataObj[r]),n.chartData=o,o[0]||(o[0]=0),o[1]||(o[1]=0);var s=n.bitsToSize(o[0]),c=n.bitsToSize(o[1]),u=s.split(" "),l=c.split(" "),h=u[0],p=l[0],d=u[1]?u[1]:"rate"===n.chartName.toLowerCase()?"bps":"pps",f=l[1]?l[1]:"rate"===n.chartName.toLowerCase()?"bps":"pps",g="";if(d="undefined"==d?"rate"===n.chartName.toLowerCase()?"bps":"pps":d,f="undefined"==f?"rate"===n.chartName.toLowerCase()?"bps":"pps":f,"undefined"==(g=o[0]||o[1]?o[0]>o[1]?u[1]:l[1]:n.yAxixTitle?n.yAxixTitle:"rate"===n.chartName.toLowerCase()?"bps":"pps")&&(g=n.yAxixTitle?n.yAxixTitle:"rate"===n.chartName.toLowerCase()?"bps":"pps"),null!=g&&n.yAxixTitle!=g&&(o[0]||o[1]))return n.yAxixTitle=g,n.streamOptions.yAxis.title.text=n.yAxixTitle,void n.rebuildData();"string"==typeof g&&(n.yAxixTitle=g);var y=parseFloat(u[0]),v=parseFloat(l[0]);if((o[0]||o[1])&&o[0]<o[1]&&u[1]!==l[1]){var m=e.indexOf(u[1]),b=e.indexOf(l[1])-m;if(b)for(var T=b;T>0;T--)y/=1e3}if((o[0]||o[1])&&o[0]>o[1]&&u[1]!==l[1]){var k=e.indexOf(u[1])-e.indexOf(l[1]);if(k)for(var x=k;x>0;x--)v/=1e3}o&&(parseFloat(w.numberFormat(Math.abs(y),2)),n.upRate="".concat(h," ").concat(d||("rate"===n.chartName.toLowerCase()?"bps":"pps")),parseFloat(w.numberFormat(Math.abs(v),2)),n.downRate="".concat(p," ").concat(f||("rate"===n.chartName.toLowerCase()?"bps":"pps")),a[0].addPoint([i,y],!0,!0),a[1].addPoint([i,-v],!0,!0))}},1e3)}}},time:{useUTC:!1},title:{text:""},colors:["#0027FF","#5ACFEA"],xAxis:{type:"datetime",tickPixelInterval:120},yAxis:{gridLineDashStyle:"longdash",opposite:!1,startOnTick:!1,endOnTick:!1,title:{text:this.yAxixTitle,margin:40},labels:{align:"left",x:-35,formatter:function(){return Math.abs(this.value)}}},credits:{enabled:!1},plotOptions:{areaspline:{lineWidth:1,marker:{enabled:!1},fillOpacity:.75},spline:{animation:!1,marker:{enabled:!1,radius:.9,lineWidth:.7}},series:{turboThreshold:1e6}},tooltip:{formatter:function(){var t=n.dateUtilsService.getLocalRealtimeDateFormat(this.point.x),e=n.removeLast3Chars(this.point.x),a=n.lastChartDataObj[e]?n.lastChartDataObj[e][2]:"";return"<b> ".concat(t,"  </b><br/>\n                 ").concat(this.series.name,"stream: ").concat(w.numberFormat(Math.abs(this.point.y),2)," ").concat(n.yAxixTitle?n.yAxixTitle:a)}},legend:{enabled:!1},exporting:{enabled:!1},series:[{name:"Up",data:function(){var a,i=[],r=e+t,o=n.totalTime;for(n._reload&&(o=300),a=-1*o;a<=0;a+=1){var s=r+1e3*a,c=n.removeLast3Chars(s),u=void 0!==n.lastChartDataObj[c]?n.lastChartDataObj[c][0]:n.lastChartDataObj[c-1]&&n.lastChartDataObj[c-1][0]?n.lastChartDataObj[c-1][0]:0;n.reloadChart&&!u&&(u=void 0!==n.lastChartDataObj[c-1]?n.lastChartDataObj[c-1][0]:n.lastChartDataObj[c-2]&&n.lastChartDataObj[c-2][0]?n.lastChartDataObj[c-2][0]:0),u&&(u/=n.sizes[n.yAxixTitle]),i.push({x:s,y:u})}return i}()},{name:"Down",data:function(){var a,i=[],r=e+t,o=n.totalTime;for(n._reload&&(o=300),a=-1*o;a<=0;a+=1){var s=r+1e3*a,c=n.removeLast3Chars(s),u=void 0!==n.lastChartDataObj[c]?n.lastChartDataObj[c][1]:n.lastChartDataObj[c-1]&&n.lastChartDataObj[c-1][1]?n.lastChartDataObj[c-1][1]:0;n.reloadChart&&!u&&(u=void 0!==n.lastChartDataObj[c-1]?n.lastChartDataObj[c-1][1]:n.lastChartDataObj[c-2]&&n.lastChartDataObj[c-2][1]?n.lastChartDataObj[c-2][1]:0),u&&(u/=n.sizes[n.yAxixTitle]),u*=-1,i.push({x:s,y:u})}return i}()}]},this.streamOptions.series[0].visible=this.isUpStreamVisible,this.streamOptions.series[1].visible=this.isDownStreamVisible,this.streamOptions=Object.assign({},this.streamOptions)}},{key:"bitsConversion",value:function(t){var e=!1;t<0&&(t=-t,e=!0);var n=parseFloat(t);if(0==n)return 0;var a=Math.floor(Math.log(n)/Math.log(1e3)),i=parseInt(w.numberFormat(Math.abs(n/Math.pow(1e3,a)),2));return e?-1*i:i}},{key:"getYAxisTitle",value:function(t){var e=t;return("rate"===this.chartName.toLowerCase()?["bps","Kbps","Mbps","Gbps","Tbps"]:["pps","Kpps","Mpps","Gpps","Tpps"])[Math.floor(Math.log(e)/Math.log(1024))]}},{key:"removePrevious",value:function(){this.lastChartDataObj=Object.keys(this.lastChartDataObj).reduce(function(t,e){return t[e]=[0,0,"bps","bps","bps"],t},{}),this.lastData=[0,0],this.currentData=[0,0],this.rebuildData()}}]),t}()).\u0275fac=function(t){return new(t||Z)(u.Y36(h.s),u.Y36(y.s))},Z.\u0275cmp=u.Xpm({type:Z,selectors:[["app-record-stream-chart"]],inputs:{startTime:"startTime",endTime:"endTime",totalTime:"totalTime",playedTime:"playedTime",play:"play",reload:"reload",chartName:"chartName",yAxixTitle:"yAxixTitle",xAxix:"xAxix",data:"data",windowLen:"windowLen",selectedFilter:"selectedFilter",selectedLocation:"selectedLocation",selectedApplication:"selectedApplication",selectedRegion:"selectedRegion",selectedSystem:"selectedSystem",monitorId:"monitorId",time:"time",history:"history"},features:[u.TTD],decls:1,vars:1,consts:[["class","analytic-widget",4,"ngIf"],[1,"analytic-widget"],[1,"analytic-widget-header"],[1,"d-flex","justify-content-between"],[1,"mx-2"],[1,"widget-title",3,"title"],[1,"legend-label","toggle-up",3,"click"],[1,"legend-glyph",3,"ngStyle"],[1,"legend-label","toggle-down",3,"click"],[1,"interval"],[1,"mr-2","text-right"],[1,"traffic-volume","monitor-status-normal"],["class","upRate",4,"ngIf"],["class","downRate",4,"ngIf"],[1,"analytic-widget-body"],["id","custom-mirrot-chart","class","analytic-widget-chart",3,"Highcharts","options","callbackFunction",4,"ngIf"],[1,"upRate"],["aria-hidden","true",1,"fa","fa-arrow-up"],[1,"downRate"],["aria-hidden","true",1,"fa","fa-arrow-down"],["id","custom-mirrot-chart",1,"analytic-widget-chart",3,"Highcharts","options","callbackFunction"]],template:function(t,e){1&t&&u.YNc(0,E,20,14,"div",0),2&t&&u.Q6J("ngIf",e.pageAvailable)},directives:[T.O5,T.PC,A.x],styles:[".highcharts-data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:320px;max-width:800px;margin:1em auto}.highcharts-data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Verdana,sans-serif;border-collapse:collapse;border:1px solid #EBEBEB;margin:10px auto;text-align:center;width:100%;max-width:500px}.highcharts-data-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:1em 0;font-size:1.2em;color:#555}.highcharts-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;padding:.5em}.highcharts-data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:.5em}.highcharts-data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .highcharts-data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background:#f8f8f8}.highcharts-data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f1f7ff}.analytic-widget[_ngcontent-%COMP%]   .analytic-widget-header[_ngcontent-%COMP%]{display:block}.analytic-widget[_ngcontent-%COMP%]   .analytic-widget-header-cell[_ngcontent-%COMP%]{display:block;padding:5px 5px 5px 10px;position:relative}.analytic-widget[_ngcontent-%COMP%]   .legend-glyph[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;margin-right:4px;width:10px;height:10px;border-radius:6px}.analytic-widget[_ngcontent-%COMP%]   .legend-label[_ngcontent-%COMP%]{display:inline-block;font-size:12px;padding-right:8px;margin-right:4px;border-color:#e1dfec;background-color:#eae8f3;border-width:1px;text-decoration:none;cursor:pointer}.analytic-widget[_ngcontent-%COMP%]   .interval[_ngcontent-%COMP%]{background:#efefef;padding:2px 6px;font-size:11px;border-radius:2px;color:#666;margin-right:15px}.analytic-widget[_ngcontent-%COMP%]   .traffic-volume.monitor-status-normal[_ngcontent-%COMP%]{margin-top:0;background-color:#eae8f3;border-color:#e1dfec;border-width:1px;font-size:12px}.upRate[_ngcontent-%COMP%]{color:#0027ff}.downRate[_ngcontent-%COMP%]{color:#5acfea}.analytic-widget-chart[_ngcontent-%COMP%]{width:100%;display:block}"]}),Z),N=n(98127),F=n(86640),L=n(3679);function I(t,e){if(1&t&&(u.TgZ(0,"div",22),u.TgZ(1,"div",23),u.TgZ(2,"div",24),u.TgZ(3,"span",25),u._uU(4),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t){var n=u.oxw();u.xp6(4),u.Oqu(n.language.Loading)}}function q(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"span",27),u._UZ(2,"img",28),u.qZA(),u.TgZ(3,"button",29),u.NdJ("click",function(){return u.CHM(n),u.oxw().errorInfo=""}),u._UZ(4,"span"),u.qZA(),u._UZ(5,"div",30),u.qZA()}if(2&t){var a=u.oxw();u.xp6(5),u.Q6J("innerHtml",a.errorInfo,u.oJD)}}function j(t,e){if(1&t&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&t){var n=u.oxw();u.xp6(1),u.hij(" - ",n.recordInfo.name,"")}}function U(t,e){1&t&&u._UZ(0,"span",41)}function B(t,e){1&t&&u._UZ(0,"span",42)}function J(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"span",43),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).pauseVideo()}),u._UZ(1,"img",44),u.qZA()}}function V(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"span",43),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).playVideo()}),u._UZ(1,"img",45),u.qZA()}}function Y(t,e){if(1&t&&(u.TgZ(0,"div",46),u.TgZ(1,"p"),u._uU(2),u.ALo(3,"date"),u.qZA(),u.qZA()),2&t){var n=u.oxw(2);u.xp6(2),u.AsE("",n.language.timerecording," - ",u.xi3(3,2,n.recordInfo.startTime,"yyyy-MM-dd HH:mm:ss"),"")}}function W(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",19),u.TgZ(1,"div",31),u.TgZ(2,"div",32),u.YNc(3,U,1,0,"span",33),u.YNc(4,B,1,0,"span",34),u._uU(5),u.qZA(),u.TgZ(6,"div",35),u.TgZ(7,"ngx-slider",36),u.NdJ("valueChange",function(t){return u.CHM(n),u.oxw().playedTime=t})("mouseup",function(){return u.CHM(n),u.oxw().sliderEvent()}),u.qZA(),u.qZA(),u.TgZ(8,"div",37),u.TgZ(9,"a",38),u.NdJ("click",function(){return u.CHM(n),u.oxw().toggleShowAction()}),u.YNc(10,J,2,0,"span",39),u.YNc(11,V,2,0,"span",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(12,Y,4,5,"div",40),u.qZA()}if(2&t){var a=u.oxw();u.xp6(3),u.Q6J("ngIf",a.showAction),u.xp6(1),u.Q6J("ngIf",!a.showAction),u.xp6(1),u.hij(" ",a.playedTimeStr," "),u.xp6(2),u.Q6J("value",a.playedTime)("options",a.options),u.xp6(3),u.Q6J("ngIf",a.showAction),u.xp6(1),u.Q6J("ngIf",!a.showAction),u.xp6(1),u.Q6J("ngIf",a.recordInfo)}}function H(t,e){if(1&t&&u._UZ(0,"app-record-stream-chart",50),2&t){var n=u.oxw(2);u.Q6J("reload",n.reload)("play",n.showAction)("totalTime",n.totalTime)("playedTime",n.playedTime)("startTime",n.startTime)("endTime",n.endTime)("chartName",n.rate)("yAxixTitle",n.rateUnit)("data",n.data.maxRate)("time",n.data.sendTime)("windowLen",n.windowLen)("history",n.cacheRateData)("selectedFilter",n.selectedTime)}}function Q(t,e){if(1&t&&(u.TgZ(0,"div",47),u.TgZ(1,"div",48),u.YNc(2,H,1,13,"app-record-stream-chart",49),u.qZA(),u.qZA()),2&t){var n=u.oxw();u.xp6(2),u.Q6J("ngIf",n.showRealTime)}}function z(t,e){if(1&t&&u._UZ(0,"app-record-stream-chart",50),2&t){var n=u.oxw(2);u.Q6J("reload",n.reload)("play",n.showAction)("totalTime",n.totalTime)("playedTime",n.playedTime)("startTime",n.startTime)("endTime",n.endTime)("chartName",n.packet)("yAxixTitle",n.packetUnit)("data",n.data.packet)("time",n.data.sendTime)("windowLen",n.windowLen)("history",n.cachePacketData)("selectedFilter",n.selectedTime)}}function $(t,e){if(1&t&&(u.TgZ(0,"div",51),u.TgZ(1,"div",52),u.YNc(2,z,1,13,"app-record-stream-chart",49),u.qZA(),u.qZA()),2&t){var n=u.oxw();u.xp6(2),u.Q6J("ngIf",n.showRealTime)}}function K(t,e){if(1&t&&u._UZ(0,"app-bar-chart",66),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topEndPointUpChartoptions)("type","up")("updateFlag",n.updateFlag)}}function G(t,e){if(1&t&&u._UZ(0,"app-bar-chart",67),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topEndPointDownChartoptions)("type","down")("updateFlag",n.updateFlag)}}function X(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",53),u.TgZ(1,"div",54),u.TgZ(2,"div",55),u.TgZ(3,"p",56),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"span",57),u._uU(6),u.qZA(),u.TgZ(7,"span",58),u.NdJ("click",function(){return u.CHM(n),u.oxw().fullscreen("TEP")}),u.qZA(),u.qZA(),u.TgZ(8,"div",59),u.TgZ(9,"div",60),u.TgZ(10,"div",61),u.TgZ(11,"span",62),u._uU(12),u.TgZ(13,"b"),u._uU(14),u.qZA(),u._uU(15),u.qZA(),u.qZA(),u.YNc(16,K,1,3,"app-bar-chart",63),u.qZA(),u.TgZ(17,"div",64),u.TgZ(18,"div",61),u.TgZ(19,"span",62),u._uU(20),u.TgZ(21,"b"),u._uU(22),u.qZA(),u._uU(23),u.qZA(),u.qZA(),u.YNc(24,G,1,3,"app-bar-chart",65),u.qZA(),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(4),u.Oqu(a.language.top5Endpoints),u.xp6(2),u.hij("",a.language.interval,": 15 sec"),u.xp6(1),u.s9C("title",a.language.lossofpon_fullscreen_tip),u.xp6(5),u.hij("",a.language.upRate," ("),u.xp6(2),u.hij("",a.tEPrcntData.upPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",a.tEPData.upData.length>0&&a.showRealTime),u.xp6(4),u.hij("",a.language.downRate," ("),u.xp6(2),u.hij("",a.tEPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",a.tEPData.downData.length>0&&a.showRealTime)}}function tt(t,e){if(1&t&&u._UZ(0,"app-bar-chart",73),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topAppsUpChartoptions)("type","up")("updateFlag",n.updateFlag)}}function et(t,e){if(1&t&&u._UZ(0,"app-bar-chart",74),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topAppsDownChartoptions)("type","down")("updateFlag",n.updateFlag)}}function nt(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",68),u.TgZ(1,"div",54),u.TgZ(2,"div",55),u.TgZ(3,"p",56),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"span",57),u._uU(6),u.qZA(),u.TgZ(7,"span",58),u.NdJ("click",function(){return u.CHM(n),u.oxw().fullscreen("TAPP")}),u.qZA(),u.qZA(),u.TgZ(8,"div",59),u.TgZ(9,"div",69),u.TgZ(10,"div",61),u.TgZ(11,"span",62),u._uU(12),u.TgZ(13,"b"),u._uU(14),u.qZA(),u._uU(15),u.qZA(),u.qZA(),u.YNc(16,tt,1,3,"app-bar-chart",70),u.qZA(),u.TgZ(17,"div",71),u.TgZ(18,"div",61),u.TgZ(19,"span",62),u._uU(20),u.TgZ(21,"b"),u._uU(22),u.qZA(),u._uU(23),u.qZA(),u.qZA(),u.YNc(24,et,1,3,"app-bar-chart",72),u.qZA(),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(4),u.Oqu(a.language.top5Applications),u.xp6(2),u.hij("",a.language.interval,": 15 sec"),u.xp6(1),u.s9C("title",a.language.lossofpon_fullscreen_tip),u.xp6(5),u.hij("",a.language.upRate," ("),u.xp6(2),u.hij("",a.tAPrcntData.upPercentage,"% "),u.xp6(1),u.hij("",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",a.tAData.upData.length>0&&a.showRealTime),u.xp6(4),u.hij("",a.language.downRate," ("),u.xp6(2),u.hij("",a.tAPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",a.tAData.downData.length>0&&a.showRealTime)}}function at(t,e){if(1&t&&u._UZ(0,"app-bar-chart",73),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topLocationsUpChartoptions)("type","up")("updateFlag",n.updateFlag)}}function it(t,e){if(1&t&&u._UZ(0,"app-bar-chart",74),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topLocationsDownChartoptions)("type","down")("updateFlag",n.updateFlag)}}function rt(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",75),u.TgZ(1,"div",54),u.TgZ(2,"div",55),u.TgZ(3,"p",56),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"span",57),u._uU(6),u.qZA(),u.TgZ(7,"span",58),u.NdJ("click",function(){return u.CHM(n),u.oxw().fullscreen("TLOC")}),u.qZA(),u.qZA(),u.TgZ(8,"div",59),u.TgZ(9,"div",69),u.TgZ(10,"div",61),u.TgZ(11,"span",62),u._uU(12),u.TgZ(13,"b"),u._uU(14),u.qZA(),u._uU(15),u.qZA(),u.qZA(),u.YNc(16,at,1,3,"app-bar-chart",70),u.qZA(),u.TgZ(17,"div",71),u.TgZ(18,"div",61),u.TgZ(19,"span",62),u._uU(20),u.TgZ(21,"b"),u._uU(22),u.qZA(),u._uU(23),u.qZA(),u.qZA(),u.YNc(24,it,1,3,"app-bar-chart",72),u.qZA(),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(4),u.Oqu(a.language.top5Locations),u.xp6(2),u.hij("",a.language.interval,": 15 sec"),u.xp6(1),u.s9C("title",a.language.lossofpon_fullscreen_tip),u.xp6(5),u.hij("",a.language.upRate," ("),u.xp6(2),u.hij("",a.tLPrcntData.upPercentage,"% "),u.xp6(1),u.hij("",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",a.tLData.upData.length>0&&!0),u.xp6(4),u.hij("",a.language.downRate," ("),u.xp6(2),u.hij("",a.tLPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",a.tLData.downData.length>0&&a.showRealTime)}}function ot(t,e){if(1&t&&u._UZ(0,"app-bar-chart",84),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topEndPointUpChartoptions)("type","up")("updateFlag",n.updateFlag)}}function st(t,e){if(1&t&&u._UZ(0,"app-bar-chart",85),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topEndPointDownChartoptions)("type","down")("updateFlag",n.updateFlag)}}var ct=function(){return{standalone:!0}};function ut(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",76),u.TgZ(1,"div",54),u.TgZ(2,"div",55),u.TgZ(3,"ng-select",77),u.NdJ("ngModelChange",function(t){return u.CHM(n),u.oxw().selectedTopLength=t})("change",function(){return u.CHM(n),u.oxw().changeTopLength("TEP")}),u.qZA(),u.qZA(),u.TgZ(4,"span",57),u._uU(5),u.qZA(),u.TgZ(6,"span",78),u.NdJ("click",function(){return u.CHM(n),u.oxw().closeFullscreen()}),u._uU(7,"\xa0 "),u._UZ(8,"i",79),u.qZA(),u.qZA(),u.TgZ(9,"div",80),u.TgZ(10,"div",64),u.TgZ(11,"div",61),u.TgZ(12,"span",81),u._uU(13),u.TgZ(14,"b"),u._uU(15),u.qZA(),u._uU(16),u.qZA(),u.qZA(),u.YNc(17,ot,1,3,"app-bar-chart",82),u.qZA(),u.TgZ(18,"div",64),u.TgZ(19,"div",61),u.TgZ(20,"span",81),u._uU(21),u.TgZ(22,"b"),u._uU(23),u.qZA(),u._uU(24),u.qZA(),u.qZA(),u.YNc(25,st,1,3,"app-bar-chart",83),u.qZA(),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(3),u.Q6J("items",a.topLengths)("multiple",!1)("ngModel",a.selectedTopLength)("ngModelOptions",u.DdM(16,ct))("clearable",!1)("searchable",!1),u.xp6(2),u.hij("",a.language.interval,": 15 sec"),u.xp6(1),u.s9C("title",a.language.lossofpon_fullscreen_close_tip),u.xp6(7),u.hij("",a.language.upRate," ("),u.xp6(2),u.hij("",a.tEPrcntData.upPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0),u.xp6(4),u.hij("",a.language.downRate," ("),u.xp6(2),u.hij("",a.tEPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0)}}function lt(t,e){if(1&t&&u._UZ(0,"app-bar-chart",90),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topAppsUpChartoptions)("type","up")("updateFlag",n.updateFlag)}}function ht(t,e){if(1&t&&u._UZ(0,"app-bar-chart",91),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topAppsDownChartoptions)("type","down")("updateFlag",n.updateFlag)}}function pt(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",76),u.TgZ(1,"div",54),u.TgZ(2,"div",55),u.TgZ(3,"ng-select",77),u.NdJ("ngModelChange",function(t){return u.CHM(n),u.oxw().selectedTopLength=t})("change",function(){return u.CHM(n),u.oxw().changeTopLength("TAPP")}),u.qZA(),u.qZA(),u.TgZ(4,"span",57),u._uU(5),u.qZA(),u.TgZ(6,"span",86),u.NdJ("click",function(){return u.CHM(n),u.oxw().closeFullscreen()}),u._UZ(7,"i",79),u.qZA(),u.qZA(),u.TgZ(8,"div",80),u.TgZ(9,"div",87),u.TgZ(10,"div",61),u.TgZ(11,"span",81),u._uU(12),u.TgZ(13,"b"),u._uU(14),u.qZA(),u._uU(15),u.qZA(),u.qZA(),u.YNc(16,lt,1,3,"app-bar-chart",88),u.qZA(),u.TgZ(17,"div",64),u.TgZ(18,"div",61),u.TgZ(19,"span",81),u._uU(20),u.TgZ(21,"b"),u._uU(22),u.qZA(),u._uU(23),u.qZA(),u.qZA(),u.YNc(24,ht,1,3,"app-bar-chart",89),u.qZA(),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(3),u.Q6J("items",a.topLengths)("multiple",!1)("ngModel",a.selectedTopLength)("ngModelOptions",u.DdM(16,ct))("clearable",!1)("searchable",!1),u.xp6(2),u.hij("",a.language.interval,": 15 sec"),u.xp6(1),u.s9C("title",a.language.lossofpon_fullscreen_close_tip),u.xp6(6),u.hij("",a.language.upRate," ("),u.xp6(2),u.hij("",a.tAPrcntData.upPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0),u.xp6(4),u.hij("",a.language.downRate," ("),u.xp6(2),u.hij("",a.tAPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0)}}function dt(t,e){if(1&t&&u._UZ(0,"app-bar-chart",96),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topLocationsUpChartoptions)("type","up")("updateFlag",n.updateFlag)}}function ft(t,e){if(1&t&&u._UZ(0,"app-bar-chart",96),2&t){var n=u.oxw(2);u.Q6J("chartOptions",n.topLocationsDownChartoptions)("type","down")("updateFlag",n.updateFlag)}}function gt(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",76),u.TgZ(1,"div",54),u.TgZ(2,"div",55),u.TgZ(3,"ng-select",77),u.NdJ("ngModelChange",function(t){return u.CHM(n),u.oxw().selectedTopLength=t})("change",function(){return u.CHM(n),u.oxw().changeTopLength("TLOC")}),u.qZA(),u.qZA(),u.TgZ(4,"span",57),u._uU(5),u.qZA(),u.TgZ(6,"span",92),u.NdJ("click",function(){return u.CHM(n),u.oxw().closeFullscreen()}),u._UZ(7,"i",93),u.qZA(),u.qZA(),u.TgZ(8,"div",94),u.TgZ(9,"div",64),u.TgZ(10,"div",61),u.TgZ(11,"span",81),u._uU(12),u.TgZ(13,"b"),u._uU(14),u.qZA(),u._uU(15),u.qZA(),u.qZA(),u.YNc(16,dt,1,3,"app-bar-chart",95),u.qZA(),u.TgZ(17,"div",64),u.TgZ(18,"div",61),u.TgZ(19,"span",81),u._uU(20),u.TgZ(21,"b"),u._uU(22),u.qZA(),u._uU(23),u.qZA(),u.qZA(),u.YNc(24,ft,1,3,"app-bar-chart",95),u.qZA(),u.qZA(),u.qZA()}if(2&t){var a=u.oxw();u.xp6(3),u.Q6J("items",a.topLengths)("multiple",!1)("ngModel",a.selectedTopLength)("ngModelOptions",u.DdM(16,ct))("clearable",!1)("searchable",!1),u.xp6(2),u.hij("",a.language.interval,": 15 sec"),u.xp6(2),u.s9C("title",a.language.lossofpon_fullscreen_close_tip),u.xp6(5),u.hij("",a.language.upRate," ("),u.xp6(2),u.hij("",a.tLPrcntData.upPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0),u.xp6(4),u.hij("",a.language.downRate," ("),u.xp6(2),u.hij("",a.tLPrcntData.downPercentage,"%"),u.xp6(1),u.hij(" ",a.language.ofTotal,")"),u.xp6(1),u.Q6J("ngIf",!0)}}var yt=function(){var t=function(){function t(e,n,i,o,c,u,l,h,p,d,f){var g=this;r(this,t),this.router=e,this.route=n,this.customTranslateService=i,this.sso=o,this.optnsMngr=c,this.websocketservice=u,this.http=l,this.dateUtils=h,this.commonOrgService=p,this.titleService=d,this.commonService=f,this.pageAvailable=!1,this.selectedTopLength=5,this.topLengths=[],this.updateFlag=!0,this.fsView=!1,this.Highcharts=a,this.rate="",this.packet="",this.windowLen=5,this.errorInfo="",this.ddoptions=[{id:1,name:"5 Minutes window"},{id:2,name:"10 Minutes window"},{id:3,name:"15 Minutes window"},{id:4,name:"20 Minutes window"},{id:5,name:"25 Minutes window"},{id:6,name:"30 Minutes window"}],this.selectedOption=1,this.selectedTime=1,this.hasLocationAccess=!1,this.hasApplicationAccess=!1,this.hasNetworkAccess=!1,this.discoveredCount=0,this.mappedCount=0,this.mappedPercentage=0,this.mappedPercentage$=new s.xQ,this.options={floor:0,ceil:100},this.totalTime=7200,this.playedTime=7200,this.totalTimeStr="",this.playedTimeStr="",this.startTime=1631005316e3,this.endTime=1631012516e3,this.play=!1,this.showAction=!1,this.topEPs=[{name:"Top 5 Endpoints",value:5},{name:"Top 10 Endpoints",value:10},{name:"Top 20 Endpoints",value:20},{name:"Top 30 Endpoints",value:30}],this.topAPPs=[{name:"Top 5 Applications",value:5},{name:"Top 10 Applications",value:10},{name:"Top 20 Applications",value:20},{name:"Top 30 Applications",value:30}],this.topLOCs=[{name:"Top 5 Locations",value:5},{name:"Top 10 Locations",value:10},{name:"Top 20 Locations",value:20},{name:"Top 30 Locations",value:30}],this.recordingId="",this.traffic={endpoints:!1,applications:!1,locations:!1},this.fsChartDetails={},this.showChart=!1,this.fsName="",this.reload=!1,this.data={maxRate:[],packet:[]},this.showRealTime=!1,this.tAPrcntData={downPercentage:"0",upPercentage:"0"},this.tLPrcntData={downPercentage:"0",upPercentage:"0"},this.tEPrcntData={downPercentage:"0",upPercentage:"0"},this.tAData={upData:[],downData:[]},this.tLData={upData:[],downData:[]},this.tEPData={upData:[],downData:[]},this.showBars=!1,this.showTEPBars=!1,this.tepSelectedTopLength=5,this.tappSelectedTopLength=5,this.tlocSelectedTopLength=5,this.cachePacketData={},this.cacheRateData={},this.rateUnit="bps",this.packetUnit="pps",this.tempTLOCData={},this.tempTAPPData={},this.tempTEPData={},this.barChartData={},this.streamChartData={},this.commonOrgService.recordView.show=!0,this.titleService.setTitle("Traffic Recording - Traffic - Operations - Calix Cloud"),this.route.queryParams.subscribe(function(t){t.id&&(g.recordingId=t.id,g.getRecordDataById())}),this.ORG_ID=this.sso.getOrganizationID(this.router.url),(window.location.pathname.includes("/organization-admin/flowAnalyze/")||window.location.pathname.includes("/systemAdministration/flowAnalyze/"))&&(this.commonService.showTabMenu$.next(!1),this.commonOrgService.currentPageAdder("flowAnalyze"))}return i(t,[{key:"toggleShowAction",value:function(){this.showAction=!this.showAction}},{key:"ngOnInit",value:function(){var t=this;this.totalTimeStr=this.dateUtils.convertSecondsToTime(this.totalTime),this.playedTimeStr=this.dateUtils.convertSecondsToTime(this.playedTime),this.options={floor:0,showSelectionBar:!0,ceil:this.totalTime},this.language=this.customTranslateService.defualtLanguage,this.rate=this.language.RATE,this.packet=this.language.PACKET,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(e){t.rate=e.RATE,t.packet=e.PACKET,t.language=e,t.ddoptions=[{id:1,name:t.language["5 Minutes window"]},{id:2,name:t.language["10 Minutes window"]},{id:3,name:t.language["15 Minutes window"]},{id:4,name:t.language["20 Minutes window"]},{id:5,name:t.language["25 Minutes window"]},{id:6,name:t.language["30 Minutes window"]}]});var e=this.sso.getScopes();if(o.N.VALIDATE_SCOPE){var n=Object.keys(e);if(n)for(var a=0;a<n.length;a++)-1!==n[a].indexOf("cloud.rbac.coc.traffic.network.realtime")&&(this.hasNetworkAccess=!0),-1!==n[a].indexOf("cloud.rbac.coc.traffic.location.realtime")&&(this.hasLocationAccess=!0),-1!==n[a].indexOf("cloud.rbac.coc.traffic.applications.realtime")&&(this.hasApplicationAccess=!0)}else this.hasNetworkAccess=!0,this.hasLocationAccess=!0,this.hasApplicationAccess=!0;this.topLengths=[{name:"Top 5",value:5}]}},{key:"createTopLengthItems",value:function(){this.topLengths=[{name:"Top 5 "+this.fsChartDetails.title,value:5},{name:"Top 10 "+this.fsChartDetails.title,value:10},{name:"Top 20 "+this.fsChartDetails.title,value:20},{name:"Top 30 "+this.fsChartDetails.title,value:30}]}},{key:"fullscreen",value:function(t){this.fsChartDetails={topChart:t},this.fsView=!0,this.fsName=t,this.modifyCurrentOptionsToFS(t),this.createTopLengthItems()}},{key:"closeFullscreen",value:function(){if(this.selectedTopLength=5,this.fsView=!1,"TEP"===this.fsName){var t=this.gettepData();this.makeTEPEvents(t)}else if("TAPP"===this.fsName){var e=this.gettapData();this.makeTAPPEvents(e)}else if("TLOC"===this.fsName){var n=this.gettlocData();this.makeTLOCEvents(n)}this.fsName="",this.fsChartDetails={}}},{key:"modifyCurrentOptionsToFS",value:function(t){switch(t){case"TEP":this.fsChartDetails={topChart:"TEP",title:"Endpoints"};var e=this.gettepData();this.makeTEPEvents(e);break;case"TAPP":this.fsChartDetails={topChart:"TAPP",title:"Applications"};var n=this.gettapData();this.makeTAPPEvents(n);break;case"TLOC":this.fsChartDetails={topChart:"TLOC",title:"Locations"};var a=this.gettlocData();this.makeTLOCEvents(a)}}},{key:"sliderEvent",value:function(){var t=this;this.reload=!1,this.playedTimeStr=this.dateUtils.convertSecondsToTime(this.playedTime),setTimeout(function(){t.reload=!0,t.startBarChartTimer()},500)}},{key:"playVideo",value:function(){var t=this;this.play=!0,this.reload=!0,this.totalTime&&this.totalTime===this.playedTime&&(this.playedTime=0),this.startBarChartTimer(),this.playInterval=setInterval(function(){if(t.totalTime&&t.totalTime===t.playedTime)return t.showAction=!1,void clearInterval(t.playInterval);t.playedTime++,t.playedTimeStr=t.dateUtils.convertSecondsToTime(t.playedTime)},1e3)}},{key:"pauseVideo",value:function(){this.play=!1,clearInterval(this.playInterval),this.stopBarChartTimer()}},{key:"clearFilter",value:function(){this.selectedOption=1,this.selectedTime=1}},{key:"getFSPointWidth",value:function(t){var e=14;return t<=5?e=14:t<=10?e=8:t<=20?e=4:t<=30&&(e=2),e}},{key:"ngOnDestroy",value:function(){this.stopBarChartTimer(),this.websocketservice.clearRecordRtInfo(),this.commonService.showTabMenu$.next(!0),this.commonOrgService.recordView.show=!1}},{key:"makeTEPEvents",value:function(t){var e,n;"true"!=sessionStorage.getItem("showSensitiveInfo")&&(null===(e=t.upData)||void 0===e||e.forEach(function(t){return t.name=(0,c.C)(t.name)}),null===(n=t.downData)||void 0===n||n.forEach(function(t){return t.name=(0,c.C)(t.name)})),this.tEPrcntData={downPercentage:t.downPercentage?t.downPercentage:0,upPercentage:t.upPercentage?t.upPercentage:0};var a=this.fsView&&"TEP"===this.fsName?this.selectedTopLength:this.tepSelectedTopLength,i=t.upData.length,r=t.downData.length;i>=a&&(i=a),r>=a&&(r=a),this.tEPrcntData.upPercentage=this.websocketservice.calculatePercentage(t.upTotal,t.upData,a),this.tEPrcntData.downPercentage=this.websocketservice.calculatePercentage(t.downTotal,t.downData,a),this.settepData(t),this.tEPData.upData=t.upData,this.tEPData.downData=t.downData;var o=this.optnsMngr.makeOptionsForRTBC(t,"bar","upData",a),s=this.optnsMngr.makeOptionsForRTBC(t,"bar","downData",a);o.chart.height=this.fsView&&"TEP"===this.fsName?560:160,o.plotOptions.series.pointWidth=this.fsView&&"TEP"===this.fsName?this.getFSPointWidth(i):14,s.chart.height=this.fsView&&"TEP"===this.fsName?560:160,s.plotOptions.series.pointWidth=this.fsView&&"TEP"===this.fsName?this.getFSPointWidth(r):14,s.plotOptions.series.color="#5ACFEA",s.plotOptions.series.cursor=null,o.plotOptions.series.cursor=null,o=Object.assign({},o),s=Object.assign({},s),this.topEndPointUpChartoptions=o,this.topEndPointDownChartoptions=s}},{key:"makeTLOCEvents",value:function(t){t.upData.findIndex(function(t){return"Unknown"===t.name&&"00000000-0000-0000-0000-000000000000"===t.id})>-1&&t.upData.splice(t.upData.findIndex(function(t){return"Unknown"===t.name&&"00000000-0000-0000-0000-000000000000"===t.id}),1),t.downData.findIndex(function(t){return"Unknown"===t.name&&"00000000-0000-0000-0000-000000000000"===t.id})>-1&&t.downData.splice(t.downData.findIndex(function(t){return"Unknown"===t.name&&"00000000-0000-0000-0000-000000000000"===t.id}),1),this.tLPrcntData={downPercentage:t.downPercentage?t.downPercentage:0,upPercentage:t.upPercentage?t.upPercentage:0};var e=this.fsView&&"TLOC"===this.fsName?this.selectedTopLength:this.tlocSelectedTopLength,n=t.upData.length,a=t.downData.length;n>=e&&(n=e),a>=e&&(a=e),this.tLPrcntData.upPercentage=this.websocketservice.calculatePercentage(t.upTotal,t.upData,e),this.tLPrcntData.downPercentage=this.websocketservice.calculatePercentage(t.downTotal,t.downData,e),this.settlocData(t),this.tLData.upData=t.upData,this.tLData.downData=t.downData;var i=this.optnsMngr.makeOptionsForRTBC(t,"bar","upData",e),r=this.optnsMngr.makeOptionsForRTBC(t,"bar","downData",e);i.chart.height=this.fsView&&"TLOC"===this.fsName?560:160,delete i.chart.width,i.plotOptions.series.pointWidth=this.fsView&&"TLOC"===this.fsName?this.getFSPointWidth(n):14,r.chart.height=this.fsView&&"TLOC"===this.fsName?560:160,delete r.chart.width,r.plotOptions.series.pointWidth=this.fsView&&"TLOC"===this.fsName?this.getFSPointWidth(a):14,r.plotOptions.series.color="#5ACFEA",i.plotOptions.series.cursor=null,r.plotOptions.series.cursor=null,this.topLocationsUpChartoptions=Object.assign({},i),this.topLocationsDownChartoptions=Object.assign({},r)}},{key:"makeTAPPEvents",value:function(t){this.tAPrcntData={downPercentage:t.downPercentage?t.downPercentage:0,upPercentage:t.upPercentage?t.upPercentage:0};var e=this.fsView&&"TAPP"===this.fsName?this.selectedTopLength:this.tappSelectedTopLength,n=t.upData.length,a=t.downData.length;n>=e&&(n=e),a>=e&&(a=e),this.tAPrcntData.upPercentage=this.websocketservice.calculatePercentage(t.upTotal,t.upData,e),this.tAPrcntData.downPercentage=this.websocketservice.calculatePercentage(t.downTotal,t.downData,e),this.settapData(t),this.tAData.upData=t.upData,this.tAData.downData=t.downData;var i=this.optnsMngr.makeOptionsForRTBC(t,"bar","upData",e),r=this.optnsMngr.makeOptionsForRTBC(t,"bar","downData",e);i.chart.height=this.fsView&&"TAPP"===this.fsName?560:160,delete i.chart.width,i.plotOptions.series.pointWidth=this.fsView&&"TAPP"===this.fsName?this.getFSPointWidth(n):14,r.chart.height=this.fsView&&"TAPP"===this.fsName?560:160,delete r.chart.width,r.plotOptions.series.pointWidth=this.fsView&&"TAPP"===this.fsName?this.getFSPointWidth(a):14,r.plotOptions.series.color="#5ACFEA",i.plotOptions.series.cursor=null,r.plotOptions.series.cursor=null,this.topAppsUpChartoptions=Object.assign({},i),this.topAppsDownChartoptions=Object.assign({},r)}},{key:"changeTopLength",value:function(t){"TEP"===t?this.makeTEPEvents(this.gettepData()):"TAPP"===t?this.makeTAPPEvents(this.gettapData()):"TLOC"===t&&this.makeTLOCEvents(this.gettlocData())}},{key:"settepData",value:function(t){window.sessionStorage.setItem("calix.record_tep_data",JSON.stringify(t))}},{key:"gettepData",value:function(){return window.sessionStorage.getItem("calix.record_tep_data")?JSON.parse(window.sessionStorage.getItem("calix.record_tep_data")):{}}},{key:"settapData",value:function(t){window.sessionStorage.setItem("calix.record_tap_data",JSON.stringify(t))}},{key:"gettapData",value:function(){return window.sessionStorage.getItem("calix.record_tap_data")?JSON.parse(window.sessionStorage.getItem("calix.record_tap_data")):{}}},{key:"settlocData",value:function(t){window.sessionStorage.setItem("calix.record_tloc_data",JSON.stringify(t))}},{key:"gettlocData",value:function(){return window.sessionStorage.getItem("calix.record_tloc_data")?JSON.parse(window.sessionStorage.getItem("calix.record_tloc_data")):{}}},{key:"check",value:function(t){}},{key:"navigationByUrl",value:function(t,e,n){e&&(this.sso.setEPRredirectFrom(window.location.pathname),this.router.navigate(["/cco/traffic/endpoints/realtime"],{queryParams:{id:e}}))}},{key:"onclickCopy",value:function(t){var e=document.createElement("input");e.style.position="fixed",e.value=t,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"processOtherGT",value:function(){var t=this,e=this.barChartData,n=Object.keys(e);if(n.length){var a=this.playedTime&&this.playedTime>14?Math.floor(this.playedTime/15):0,i=Number(n[0]);i=Number(this.showRealTime?n[a]:n[n.length-1]);var r=0;if(this.play)this.stopBarChartTimer(),this.barChartTimer=setInterval(function(){var n=i+1e3*r;e[n]&&(e[n].TAPP&&t.makeTAPPEvents(e[n].TAPP),e[n].TLOC&&t.makeTLOCEvents(e[n].TLOC),e[n].TEP&&t.makeTEPEvents(e[n].TEP)),r++},1e3);else{var o=i;e[o]&&(e[o].TAPP&&this.makeTAPPEvents(e[o].TAPP),e[o].TLOC&&this.makeTLOCEvents(e[o].TLOC),e[o].TEP&&this.makeTEPEvents(e[o].TEP))}}}},{key:"stopBarChartTimer",value:function(){this.barChartTimer&&clearInterval(this.barChartTimer)}},{key:"startBarChartTimer",value:function(){this.stopBarChartTimer(),this.processOtherGT()}},{key:"getRecordDataById",value:function(){var t=this;this.loading=!0;var e={recordingId:this.recordingId,orgId:this.sso.getOrganizationID(this.router.url)},n="";for(var a in e)null==e[a]||""==e[a]||e[a]===[]||(""!=n&&(n+="&"),n+=a+"="+encodeURIComponent(e[a]));this.http.get("".concat(o.N.API_BASE_URL,"record/download/files?").concat(n)).subscribe(function(e){t.http.get("".concat(e.url)).subscribe(function(e){t.loading=!1;var n=t.websocketservice.prepareAndGetRecordData(e);if(n&&n.stream&&(t.cachePacketData=n.stream.packet,t.cacheRateData=n.stream.rate,Object.keys(n.stream.packet).length)){var a=Object.keys(n.stream.packet);t.startTime=1e3*Number(a[0]),t.endTime=1e3*Number(a[a.length-1]),t.totalTime=Number(a[a.length-1])-Number(a[0])+1,t.playedTime=t.totalTime,t.totalTimeStr=t.dateUtils.convertSecondsToTime(t.totalTime),t.playedTimeStr=t.dateUtils.convertSecondsToTime(t.playedTime),t.options={floor:0,showSelectionBar:!0,ceil:t.totalTime}}n&&n.bar&&(t.barChartData=n.bar),t.getData(),t.processOtherGT()},function(e){t.loading=!1,t.setErrorInfo(t.commonOrgService.pageErrorHandle(e))})},function(e){t.loading=!1,t.setErrorInfo(t.commonOrgService.pageErrorHandle(e))})}},{key:"getData",value:function(){var t=this;this.http.get("".concat(o.N.API_BASE_URL,"record/job/list/").concat(this.recordingId,"?orgId=").concat(this.ORG_ID,"&tenentid=0")).subscribe(function(e){t.recordInfo=e;var n=Object.keys(t.cacheRateData);if(t.totalTime<n.length){if(Math.floor(e.length/1e3)>Math.floor((t.endTime-t.startTime)/1e3)){var a=Math.floor(e.length/1e3)-Math.floor((t.endTime-t.startTime)/1e3);t.endTime=t.endTime+1e3*a}t.totalTime=Math.floor(e.length/1e3),t.playedTime=t.totalTime,t.totalTimeStr=t.dateUtils.convertSecondsToTime(t.totalTime),t.playedTimeStr=t.dateUtils.convertSecondsToTime(t.playedTime),t.options={floor:0,showSelectionBar:!0,ceil:t.totalTime}}if(t.totalTime>n.length&&t.totalTime-n.length<=15){t.totalTime=Math.floor(e.length/1e3),t.playedTime=t.totalTime,t.totalTimeStr=t.dateUtils.convertSecondsToTime(t.totalTime),t.playedTimeStr=t.dateUtils.convertSecondsToTime(t.playedTime),t.options={floor:0,showSelectionBar:!0,ceil:t.totalTime};for(var i=t.totalTime-n.length,r=n[n.length-1],o=1;o<=i;o++){var s=parseInt(r)+o;t.cacheRateData[s]=t.cacheRateData[r],t.cachePacketData[s]=t.cachePacketData[r]}}t.totalTime==n.length&&(t.totalTime=Math.floor(e.length/1e3),t.playedTime=t.totalTime,t.totalTimeStr=t.dateUtils.convertSecondsToTime(t.totalTime),t.playedTimeStr=t.dateUtils.convertSecondsToTime(t.playedTime),t.options={floor:0,showSelectionBar:!0,ceil:t.totalTime}),e&&e.monitorType&&("LOC"===e.monitorType?t.traffic={endpoints:!0,applications:!0,locations:!1}:"APP"===e.monitorType?t.traffic={endpoints:!0,applications:!1,locations:!0}:"NET"===e.monitorType?t.traffic={endpoints:!0,applications:!0,locations:!0}:"EP"===e.monitorType&&(t.traffic={endpoints:!0,applications:!0,locations:!1})),t.showRealTime=!0},function(e){t.loading=!1,t.setErrorInfo(t.commonOrgService.pageErrorHandle(e))})}},{key:"setErrorInfo",value:function(t){this.errorInfo=t}},{key:"goToRecordList",value:function(){window.history.back()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(l.F0),u.Y36(l.gz),u.Y36(h.s),u.Y36(p.t6),u.Y36(d.p),u.Y36(f.i),u.Y36(g.eN),u.Y36(y.s),u.Y36(v.v),u.Y36(m.Dx),u.Y36(b.i))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-record-view"]],decls:27,vars:16,consts:[["class","loader load",4,"ngIf"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],[1,"section-rec"],[1,"col-md-12","p-0"],[1,"cco-title","border-bottom","mb-3","pb-1"],[4,"ngIf"],[1,"position-abslt"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","row",4,"ngIf"],[1,"container","px-0"],[1,"d-flex","justify-content-between","md-block"],[1,"col-12","col-md-12","pr-0","col-lg-6",3,"hidden"],["id","traffic-network-realtime-rate","class","card m-10",4,"ngIf"],["id","traffic-network-realtime-packet","class","card m-10",4,"ngIf"],["id","traffic-network-realtime-tep","class","card m-10 h-auto",4,"ngIf"],["id","traffic-network-realtime-tapp","class","card mt-2 m-10 h-auto",4,"ngIf"],["id","traffic-network-realtime-location","class","card mt-2 m-10 h-auto",4,"ngIf"],[1,"bg-light","full-screen-info",3,"hidden"],[1,"row"],[1,"col-md-12","col-12"],["class","card h-auto",4,"ngIf"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"col-md-6","track-slider"],[1,"item","duration"],["class","red",4,"ngIf"],["class","gray",4,"ngIf"],[1,"item","bar-slider"],[3,"value","options","valueChange","mouseup"],[1,"item","action-icon"],[1,"pr-5px",3,"click"],[3,"click",4,"ngIf"],["class","col-md-6 text-right",4,"ngIf"],[1,"red"],[1,"gray"],[3,"click"],["src","../../../../assets/img/ic_pause.svg"],["src","../../../../assets/img/ic_play.svg"],[1,"col-md-6","text-right"],["id","traffic-network-realtime-rate",1,"card","m-10"],["id","ngx-stream-path-chart-rate",1,""],[3,"reload","play","totalTime","playedTime","startTime","endTime","chartName","yAxixTitle","data","time","windowLen","history","selectedFilter",4,"ngIf"],[3,"reload","play","totalTime","playedTime","startTime","endTime","chartName","yAxixTitle","data","time","windowLen","history","selectedFilter"],["id","traffic-network-realtime-packet",1,"card","m-10"],["id","ngx-stream-path-chart-packet",1,""],["id","traffic-network-realtime-tep",1,"card","m-10","h-auto"],[1,"board_head"],[1,"orange-text-wrapper","d-inline-block"],[1,"orange-text"],[1,"ml20"],["id","open-fullscreen-top-apps",1,"top5-fullscreen","pointer","btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],[1,"card-body","row","board_body","no-gutters","h-210"],["id","top-endpoints-up-chart-div",1,"col-md-6","col-12"],[1,"chart-info"],[1,"ml-2"],["id","top-endpoints-up-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],[1,"col-md-6","col-12"],["id","top-endpoints-down-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-endpoints-up-chart",3,"chartOptions","type","updateFlag"],["id","top-endpoints-down-chart",3,"chartOptions","type","updateFlag"],["id","traffic-network-realtime-tapp",1,"card","mt-2","m-10","h-auto"],["id","top-apps-up-chart-div",1,"col-md-6","col-12"],["id","top-apps-up-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-down-chart-div",1,"col-md-6","col-12"],["id","top-apps-down-chart",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-up-chart",3,"chartOptions","type","updateFlag"],["id","top-apps-down-chart",3,"chartOptions","type","updateFlag"],["id","traffic-network-realtime-location",1,"card","mt-2","m-10","h-auto"],[1,"card","h-auto"],["id","usage_criteria","bindLabel","name","bindValue","value","placeholder","",1,"realtime-custom-select",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["id","close-fullscreen-top-endpoints",1,"top5-fullscreen","pointer","expand-icon",3,"title","click"],[1,"fa","fa-expand"],[1,"card-body","row","board_body","mt20","no-gutters"],[1,""],["id","top-endpoints-up-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-endpoints-down-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-endpoints-up-chart-fullscreen",3,"chartOptions","type","updateFlag"],["id","top-endpoints-down-chart-fullscreen",3,"chartOptions","type","updateFlag"],["id","close-fullscreen-top-apps",1,"top5-fullscreen","pointer","expand-icon",3,"title","click"],[1,"col-md-6","col-6"],["id","top-apps-up-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-down-chart-fullscreen",3,"chartOptions","type","updateFlag",4,"ngIf"],["id","top-apps-up-chart-fullscreen",3,"chartOptions","type","updateFlag"],["id","top-apps-down-chart-fullscreen",3,"chartOptions","type","updateFlag"],[1,"top5-fullscreen","pointer","expand-icon",3,"click"],[1,"fa","fa-expand",3,"title"],[1,"card-body","row","board_body","mt20"],[3,"chartOptions","type","updateFlag",4,"ngIf"],[3,"chartOptions","type","updateFlag"]],template:function(t,e){1&t&&(u.YNc(0,I,5,1,"div",0),u.YNc(1,q,6,1,"div",1),u.TgZ(2,"section",2),u.TgZ(3,"div",3),u.TgZ(4,"h1",4),u._uU(5),u.YNc(6,j,2,1,"span",5),u.qZA(),u.TgZ(7,"div",6),u.TgZ(8,"button",7),u.NdJ("click",function(){return e.goToRecordList()}),u._UZ(9,"span",8),u.qZA(),u.qZA(),u.qZA(),u.YNc(10,W,13,8,"div",9),u.qZA(),u.TgZ(11,"section"),u.TgZ(12,"div",10),u.TgZ(13,"div",11),u.TgZ(14,"div",12),u.YNc(15,Q,3,1,"div",13),u.YNc(16,$,3,1,"div",14),u.qZA(),u.TgZ(17,"div",12),u.YNc(18,X,25,11,"div",15),u.YNc(19,nt,25,11,"div",16),u.YNc(20,rt,25,11,"div",17),u.qZA(),u.TgZ(21,"div",18),u.TgZ(22,"div",19),u.TgZ(23,"div",20),u.YNc(24,ut,26,17,"div",21),u.YNc(25,pt,25,17,"div",21),u.YNc(26,gt,25,17,"div",21),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.Q6J("ngIf",e.loading),u.xp6(1),u.Q6J("ngIf",e.errorInfo),u.xp6(4),u.Oqu(e.language["Traffic Recording"]),u.xp6(1),u.Q6J("ngIf",e.recordInfo),u.xp6(4),u.Q6J("ngIf",e.showRealTime),u.xp6(4),u.Q6J("hidden",e.fsView),u.xp6(1),u.Q6J("ngIf",e.data.maxRate.length||e.showRealTime),u.xp6(1),u.Q6J("ngIf",e.data.packet.length||e.showRealTime),u.xp6(1),u.Q6J("hidden",e.fsView),u.xp6(1),u.Q6J("ngIf",e.traffic.endpoints),u.xp6(1),u.Q6J("ngIf",e.traffic.applications),u.xp6(1),u.Q6J("ngIf",e.traffic.locations),u.xp6(1),u.Q6J("hidden",!e.fsView),u.xp6(3),u.Q6J("ngIf","TEP"==e.fsChartDetails.topChart),u.xp6(1),u.Q6J("ngIf","TAPP"==e.fsChartDetails.topChart),u.xp6(1),u.Q6J("ngIf","TLOC"==e.fsChartDetails.topChart))},directives:[T.O5,k.w5,M,N.u,F.w9,L.JJ,L.On],pipes:[T.uU],styles:[".action-control[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;position:relative;max-width:205px;margin-bottom:24px;border:1px solid #ccc;z-index:1;border-radius:20px;padding-left:25px;display:flex;align-items:center;width:100%}.action-control[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;color:#0279ff}.action-control[_ngcontent-%COMP%]   div.total[_ngcontent-%COMP%]{padding-left:10px}.action-control[_ngcontent-%COMP%]   div.played[_ngcontent-%COMP%]{border-right:1px solid #ccc}.action-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;min-width:65px;margin:0;color:#848484}.action-control[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#0279ff;font-size:28px;cursor:pointer}.track-slider[_ngcontent-%COMP%]{margin-bottom:20px;display:flex}.track-slider[_ngcontent-%COMP%]   .bar-slider[_ngcontent-%COMP%]{min-width:215px}.track-slider[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{padding-left:10px;width:63px}.track-slider[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{min-width:85px;position:relative;padding-left:20px}.track-slider[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:100%;position:absolute;left:0;top:5px;border:1px solid #FFFFFF;box-sizing:border-box;box-shadow:2px 2px 8px #0000001a}.track-slider[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   .gray[_ngcontent-%COMP%]{background:#CCCCCC}.track-slider[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background:#E51A1A}.filter[_ngcontent-%COMP%]{background:#F8F8FA;border-top:1px solid #EBEAEF;border-bottom:1px solid #EBEAEF;margin-bottom:20px;padding:13px 30px 10px}.section-rec[_ngcontent-%COMP%]{padding-left:15px}  .track-slider .ngx-slider{margin-top:5px;border-radius:12px;border:1px solid #E51A1A;height:17px;overflow:hidden}  .track-slider .ngx-slider-bar{background:#ffffff!important;height:16px!important}  .track-slider .ngx-slider-selection{background:#E51A1A!important}  .track-slider span.ngx-slider-span.ngx-slider-bubble{display:none}  .track-slider .ngx-slider .ngx-slider-pointer{width:16px;height:16px;top:-5px;background-color:#5acfea;border-radius:50%;display:none}  .track-slider .ngx-slider .ngx-slider-pointer:after{width:8px;height:8px;top:4px;left:4px;background:#fff;border-radius:50%}  .track-slider .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#5acfea}  .white-select .ng-select-container{background:#fff!important}.board_head[_ngcontent-%COMP%]{padding:8px 6px 0}span.ml20[_ngcontent-%COMP%]{padding-left:8px}.btn-expand[_ngcontent-%COMP%]{background-image:url(ic_expand_grey.a00ec25dcedb0cff0b8c.svg)}.btn-expand[_ngcontent-%COMP%]:hover{background-image:url(ic_expand_grey.a00ec25dcedb0cff0b8c.svg)}.btn-expand[_ngcontent-%COMP%]:focus{background-image:url(ic_expand_grey.a00ec25dcedb0cff0b8c.svg)}@media screen and (max-width: 767px){.md-block[_ngcontent-%COMP%]{display:block!important}.board_body[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important}}.orange-text[_ngcontent-%COMP%]{color:#ff7f00}.ml20[_ngcontent-%COMP%]{margin-left:20px}.mt20[_ngcontent-%COMP%]{margin-top:20px}.top5-fullscreen[_ngcontent-%COMP%]{float:right}.board_body[_ngcontent-%COMP%]{padding:0!important}.expand-icon[_ngcontent-%COMP%]{background-color:#ebeaef;color:#ebeaef;width:25px;height:25px;border-radius:20px;font-size:1px;text-align:center;line-height:24px;font-weight:normal;justify-content:center;background-image:url(ic_expand_inverted_grey.044960530517ee37a1a9.svg);background-position:50%;background-repeat:no-repeat}.full-screen-info[_ngcontent-%COMP%]{width:100%;height:100%}.position-abslt[_ngcontent-%COMP%]{position:absolute;right:0;top:14px;padding:8px 0}.pr-5px[_ngcontent-%COMP%]{padding-right:5px}.h-210[_ngcontent-%COMP%]{height:210px}.action-icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}#usage_criteria[_ngcontent-%COMP%]{min-width:200px}"]}),t}()},98127:function(t,e,n){"use strict";n.d(e,{u:function(){return h}});var a=n(1282),o=n(33439),s=n.n(o),c=n(37716),u=n(25317);s()(a);var l,h=((l=function(){function t(){r(this,t),this.barChartOptions={},this.type={},this.chartOptions={},this.updateFlag=!0,this.data=[{name:"Downstream",data:[107,31,635,203,2]}],this.highcharts=a}return i(t,[{key:"ngOnInit",value:function(){this.update=this.updateFlag}},{key:"ngOnChanges",value:function(t){t.chartOptions&&t.chartOptions.currentValue&&(this.barChartOptions=Object.assign({},this.chartOptions),this.updateFlag=!0,this.update=!0)}},{key:"chartCallback",value:function(t){}}]),t}()).\u0275fac=function(t){return new(t||l)},l.\u0275cmp=c.Xpm({type:l,selectors:[["app-bar-chart"]],inputs:{type:"type",chartOptions:"chartOptions",updateFlag:"updateFlag"},features:[c.TTD],decls:1,vars:4,consts:[[2,"width","100%","display","block",3,"Highcharts","options","update","callbackFunction","updateChange"]],template:function(t,e){1&t&&(c.TgZ(0,"highcharts-chart",0),c.NdJ("updateChange",function(t){return e.update=t}),c.qZA()),2&t&&c.Q6J("Highcharts",e.highcharts)("options",e.barChartOptions)("update",e.update)("callbackFunction",e.chartCallback)},directives:[u.x],styles:[""]}),l)},85385:function(t,e,n){"use strict";n.d(e,{p:function(){return y}});var a=n(38583),o=n(16738),s=n(1282),c=n(37716),u=n(39895),l=n(94690),h=n(48483),p=n(13149),d=n(30900),f=n(89097);n(86295)(s);var g,y=((g=function(){function t(e,n,a,i,o,s){var c=this;r(this,t),this.router=e,this.utils=n,this.dateUtils=a,this.excel=i,this.customTranslateService=o,this.sso=s,this.defaultData={downData:[],downPercentage:"",downTotal:"",graphType:"",sendTime:(new Date).getTime(),upData:[],upPercentage:"",upTotal:""},this.restoreChartObj={},this.language=this.customTranslateService.defualtLanguage,this.customTranslateService.selectedLanguage.subscribe(function(t){c.language=t})}return i(t,[{key:"makeOptionsForTraffic",value:function(t,e,n){for(var i,r,s=this,c=new a.uU("en-US"),u=0,l=0,h=(o(n.endDate).diff(o(n.startDate),"hour"),""),p=[],d=[],f=[],g=0;g<t.length;g++){var y=this.dateUtils.getChartFormatDate(t[g].startPeriodSec);p.push(y),d.push(t[g].usOctets),f.push(t[g].dsOctets),u+=t[g].usOctets?t[g].usOctets:0,l+=t[g].dsOctets?t[g].dsOctets:0}var v=this.getStackedUnit(u),m=this.getStackedUnit(l);i=(u/v[0]).toFixed(2)+" "+v[1],r=(l/m[0]).toFixed(2)+" "+m[1];var b={chart:{type:"column",zoomType:"xy"},time:{useUTC:!1},title:{text:this.language.subscriberUsage},subtitle:{text:h},xAxis:{categories:p},yAxis:{min:0,title:{text:""},opposite:!1,tickLength:2},lang:{noData:s.language["No Data Available"]},legend:{reversed:!1},plotOptions:{column:{stacking:"normal"},series:{colors:["#E87B00","#44367D","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],cursor:"pointer",point:{events:{}}}},series:[],exporting:{buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var e,a=[];e="Subscriber Usage\r\nSubscriber:\r\n".concat(s.language.time_win,": ").concat(c.transform(n.startDate,"MM/dd/yyyy")," - ").concat(c.transform(n.endDate,"MM/dd/yyyy")," [UTC]\r\n").concat(s.language.upUsageTitle,": ").concat(i,"    ").concat(s.language.downUsageTitle,": ").concat(r,"\r\n");for(var o=0;o<t.length;o++)a.push({"Date Time":s.dateUtils.getChartFormatDate(t[o].startPeriodSec),"Up Usage(Byte)":t[o].usOctets?t[o].usOctets:0,"Down Usage(Byte)":t[o].dsOctets?t[o].dsOctets:0});s.excel.downLoadCSV("SubscriberUsageReport",a,e)}}],text:s.language.export}}},credits:{enabled:!1},tooltip:{formatter:function(){var t=this.x||this.point.name,e=s.getStackedUnit(this.y);return"<p><strong>"+t+"</strong><br/><span> "+this.series.name+": <strong>"+(this.y/e[0]).toFixed(2)+" "+e[1]+"</strong><br/></span></p>"}}};return b.series=[{name:this.language.upUsageTitle,data:d,color:"#E87B00"},{name:this.language.downUsageTitle,data:f,color:"#44367D"}],b.xAxis.categories=p,h='<span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> '.concat(this.language.time_win,": ").concat(c.transform(n.startDate,"MM/dd/yyyy")," to ").concat(c.transform(n.endDate,"MM/dd/yyyy"),' [UTC]</span><br/>\n    <span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">').concat(this.language.upUsageTitle,": ").concat(i,"    ").concat(this.language.downUsageTitle,": ").concat(r,"</span>"),b.subtitle.text=h,b}},{key:"dataFormingForRTBC",value:function(t,e){var n=[],a=[];if("upData"===e){t.upData=t.upData.slice(0,5);for(var i=0;i<t.upData.length;i++)n.push(t.upData[i].name),a.push({y:t.upData[i].value,id:t.upData[i].id,name:t.upData[i].name})}else{t.downData=t.downData.slice(0,5);for(var r=0;r<t.downData.length;r++)n.push(t.downData[r].name),a.push({y:t.downData[r].value,id:t.downData[r].id,name:t.downData[r].name})}}},{key:"makeOptionsForRTBC",value:function(t,e,n,a,i){var r=this;a=a||5;var o=[],s=[],c={chart:{type:"bar",zoomType:"xy",height:180,renderTo:"container"},title:{text:""},credits:{enabled:!1},xAxis:{categories:o,startOnTick:!1,endOnTick:!1,labels:{style:{color:"#007bff"},formatter:function(){return'<span  class="text-primary axis_label" title="'.concat(this.value[0],'" >').concat(this.value[0],"</span>")},events:{}}},yAxis:{title:{text:""},opposite:!0,tickLength:2,tickAmount:i?6:3,startOnTick:!1,endOnTick:!1,labels:{formatter:function(){return"".concat(r.bitsToSize(this.value,!1))},events:{},rotation:0}},legend:{enabled:!1},plotOptions:{column:{stacking:"normal"},series:{color:"#0027FF",cursor:"pointer",point:{events:{}}}},series:[],tooltip:{formatter:function(){return"".concat(this.x[0]," <br/> ").concat(r.utils.bitsToSize(this.y,!1))}},lang:{noData:this.language["No Data Available"]}},u=[],l=[];if("bar"===e){if("upData"===n){t.upData=t.upData.slice(0,a);for(var h=0;h<t.upData.length;h++){var p=[];p.push(t.upData[h].name,t.upData[h].id),o.push(p),s.push(t.upData[h].value),u.push(t.upData[h].name),l.push(t.upData[h].id)}}else{t.downData=t.downData.slice(0,a);for(var d=0;d<t.downData.length;d++){var f=[];f.push(t.downData[d].name,t.downData[d].id),o.push(f),s.push(t.downData[d].value),u.push(t.downData[d].name),l.push(t.downData[d].id)}}c.series=[{data:s}]}return c.xAxis.categories=o,c}},{key:"makeOptionsForAreaChart",value:function(t,e,n){for(var a={chart:{type:"area",zoomType:"xy"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:""}},legend:{reversed:!0},plotOptions:{area:{stacking:"normal",lineColor:"#666666",lineWidth:1,marker:{lineWidth:1,lineColor:"#666666"}}},series:[]},i=[],r=0;r<t.length;r++)i.push("up"==e?{name:t[r].name,data:[t[r].usOctets]}:{name:t[r].name,data:[t[r].dsOctets]});return a.xAxis.categories=[n.startDate],a.series=i,a}},{key:"makeOptionsForLineChart",value:function(t,e,n){var i=this.language.max_up_rate,r=this.language.max_down_rate,s=this,c=[],u=[],l=[],h="".concat(this.sso.getReportChartSubscriberInfo());"Average"==n.rateSelected&&(i=this.language.avg_up_rate,r=this.language.avg_down_rate);for(var p=new a.uU("en-US"),d=(o(n.endDate).diff(o(n.startDate),"hour"),'<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">Rate: '.concat(this.language[n.rateSelected],'</span><span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.time_win,": ").concat(p.transform(n.startDate,"MM/dd/yyyy")," to ").concat(p.transform(n.endDate,"MM/dd/yyyy")," [UTC]</span>")),f={chart:{type:"line"},time:{useUTC:!1},title:{text:this.language.subscriberRate},subtitle:{text:d},xAxis:{categories:[]},yAxis:{title:{text:""},labels:{formatter:function(){return s.utils.bitsToSize(this.value,!0)}}},lang:{noData:s.language["No Data Available"]},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal",symbolRadius:0},tooltip:{formatter:function(){return"<b>"+this.x+"<b><br/>"+this.series.name+": <b>"+s.utils.bitsToSize(this.y,!0)+"</b>"}},plotOptions:{series:{marker:{enabled:!1}},column:{stacking:"normal",dataLabels:{enabled:!1}}},series:[{name:i,color:"#E87B00",data:[]},{name:r,color:"#44367D",data:[]}],exporting:{buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var e,a=[];e="Subscriber Rate\r\nSubscriber: ".concat(h,"\r\n").concat(s.language.time_win,": ").concat(p.transform(n.startDate,"MM/dd/yyyy")," - ").concat(p.transform(n.endDate,"MM/dd/yyyy")," [UTC]\r\nRate: ").concat(n.rateSelected,"\r\n");for(var i=0;i<t.length;i++)a.push({"Date Time":s.dateUtils.getChartFormat(t[i].startPeriodSec),"Max Up Rate(bps)":t[i].peakUsRate?t[i].peakUsRate:0,"Max Down Rate(bps)":t[i].peakDsRate?t[i].peakDsRate:0,"Average Up Rate(bps)":t[i].usRate?t[i].usRate:0,"Average Down Rate(bps)":t[i].dsRate?t[i].dsRate:0});s.excel.downLoadCSV("Subscriber_Rate_Report",a,e)}}],text:s.language.export}}},credits:{enabled:!1}},g=0;g<t.length;g++)c.push(this.dateUtils.getChartFormat(t[g].startPeriodSec)),"Average"==n.rateSelected?(u.push(t[g].usRate),l.push(t[g].dsRate)):(u.push(t[g].peakUsRate),l.push(t[g].peakDsRate));return f.xAxis.categories=c,c&&c.length<=12?f.xAxis.tickInterval=1:c&&c.length>40&&(f.xAxis.tickInterval=Math.floor(c.length/25)+2),f.series[0].data=u,f.series[1].data=l,f}},{key:"makeOptionsForMonthlyUsage",value:function(t,e,n){var i=this;new a.uU("en-US");for(var r,o,s=new Date,c=n.monthCount?n.monthCount:1,u=new Date(s.getFullYear(),s.getMonth()-c,1),l=new Date(s.getFullYear(),s.getMonth(),0),h=this.dateUtils.getMonthYear(u),p=this.dateUtils.getMonthYear(l),d="",f=0,g=0,y=[],v=[],m=[],b=0;b<t.length;b++){var T=this.dateUtils.getChartFormatDateInUtc(t[b].startPeriodSec);y.push(T),v.push(t[b].usOctets),m.push(t[b].dsOctets),f+=t[b].usOctets?t[b].usOctets:0,g+=t[b].dsOctets?t[b].dsOctets:0}var k=this.getStackedUnit(f),w=this.getStackedUnit(g);r=(f/k[0]).toFixed(2)+" "+k[1],o=(g/w[0]).toFixed(2)+" "+w[1];var x={chart:{type:"column",zoomType:"xy"},title:{text:this.language.subscriberMonthlyUsage},subtitle:{text:d},xAxis:{categories:y},yAxis:{min:0,title:{text:""},labels:{formatter:function(){var t=i.getStackedUnit(this.value);return(this.value/t[0]).toFixed(2)+" "+t[1]}},opposite:!1,tickLength:2},lang:{noData:i.language["No Data Available"]},legend:{reversed:!1},plotOptions:{column:{stacking:"normal"},series:{colors:["#E87B00","#44367D","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],cursor:"pointer",point:{events:{}}}},series:[],exporting:{buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var e,n=[];e="".concat(i.language.subscriberMonthlyUsage,"\r\nSubscriber:\r\n").concat(i.language.time_win,": ").concat(h," - ").concat(p," [UTC]\r\n").concat(i.language.upUsageTitle,": ").concat(r,"    ").concat(i.language.downUsageTitle,": ").concat(o,"\r\n");for(var a=0;a<t.length;a++)n.push({"Date Time":i.dateUtils.getChartFormatDate(t[a].startPeriodSec,"yyyy-MM"),"Up Usage(Byte)":t[a].usOctets?t[a].usOctets:0,"Down Usage(Byte)":t[a].dsOctets?t[a].dsOctets:0});i.excel.downLoadCSV("SubscriberMonthlyUsageReport",n,e)}}],text:"Export"}}},credits:{enabled:!1},tooltip:{formatter:function(){var t=this.x||this.point.name,e=i.getStackedUnit(this.y);return"<p><strong>"+t+"</strong><br/><span> "+this.series.name+": <strong>"+(this.y/e[0]).toFixed(2)+" "+e[1]+"</strong><br/></span></p>"}}};return x.series=[{name:this.language.upUsageTitle,data:v,color:"#E87B00"},{name:this.language.downUsageTitle,data:m,color:"#44367D"}],x.xAxis.categories=y,d='<span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> '.concat(this.language.time_win,": ").concat(h," to ").concat(p,' [UTC]</span><br/>\n    <span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">').concat(this.language.upUsageTitle,": ").concat(r,"    ").concat(this.language.downUsageTitle,":  ").concat(o,"</span>"),x.subtitle.text=d,x}},{key:"convertDate",value:function(t){var e=new Date(t),n=(e.getMonth()+1).toString(),a=e.getDate().toString(),i=n.split(""),r=a.split("");return(i[1]?n:"0"+i[0])+"/"+(r[1]?a:"0"+r[0])}},{key:"setTopEP",value:function(t){t?localStorage.setItem("calix.topep_data",JSON.stringify(t)):localStorage.removeItem("calix.topep_data")}},{key:"getTopEP",value:function(){return localStorage.getItem("calix.topep_data")?JSON.parse(localStorage.getItem("calix.topep_data")):[]}},{key:"setTopApp",value:function(t){t?localStorage.setItem("calix.topapp_data",JSON.stringify(t)):localStorage.removeItem("calix.topapp_data")}},{key:"getTopApp",value:function(){return localStorage.getItem("calix.topapp_data")?JSON.parse(localStorage.getItem("calix.topapp_data")):[]}},{key:"setTopLoc",value:function(t){t?localStorage.setItem("calix.toploc_data",JSON.stringify(t)):localStorage.removeItem("calix.toploc_data")}},{key:"getTopLoc",value:function(){return localStorage.getItem("calix.toploc_data")?JSON.parse(localStorage.getItem("calix.toploc_data")):[]}},{key:"getStackedUnit",value:function(t){return t>1099511627776?[1099511627776,"TB"]:t>1073741824?[1073741824,"GB"]:t>1048576?[1048576,"MB"]:t>1024?[1024,"KB"]:[1,""]}},{key:"setNetworkRealTimeGraphData",value:function(t,e){e?localStorage.setItem(t,JSON.stringify(e)):localStorage.removeItem(t)}},{key:"getNetworkRealTimeGraphData",value:function(t){return this.defaultData.graphType=t,localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):this.defaultData}},{key:"getRealTimeGraphRestoreData",value:function(t){return!!this.restoreChartObj.hasOwnProperty(t)&&this.restoreChartObj[t]}},{key:"setRealTimeGraphRestoreData",value:function(t,e,n){n?this.restoreChartObj={}:this.restoreChartObj[t]=e}},{key:"removeTopNTrafficFromLS",value:function(){["TEP","TAPP","TLOC"].forEach(function(t){localStorage.removeItem(t)})}},{key:"bitsToSize",value:function(t,e){var n=t,a=["bps","Kbps","Mbps","Gbps","Tbps"];if(0==n)return"0";var i=Math.floor(Math.log(n)/Math.log(1e3));if(e)return Math.round(n/Math.pow(1e3,i))+" "+a[i];i<0&&(i=0);var r=1;return Number.isInteger(+s.numberFormat(Math.abs(n/Math.pow(1e3,i)),1))&&(r=0),s.numberFormat(Math.abs(n/Math.pow(1e3,i)),r)+" "+a[i]}}]),t}()).\u0275fac=function(t){return new(t||g)(c.LFG(u.F0),c.LFG(l.e),c.LFG(h.s),c.LFG(p.O),c.LFG(d.d),c.LFG(f.t6))},g.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g)},86773:function(t,e){"use strict";function n(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Object.defineProperty(e,"__esModule",{value:!0}),e.Backoff=void 0,e.Backoff=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},41714:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;var i=n(17298),r=n(24461);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return r.Manager}});var o=n(68695);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});var s=a(n(62036)).default("socket.io-client"),c={};function u(t,e){"object"==typeof t&&(e=t,t=void 0);var n,a=i.url(t,(e=e||{}).path||"/socket.io"),o=a.source,u=a.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||c[u]&&a.path in c[u].nsps?(s("ignoring socket cache for %s",o),n=new r.Manager(o,e)):(c[u]||(s("new io instance for %s",o),c[u]=new r.Manager(o,e)),n=c[u]),a.query&&!e.query&&(e.query=a.queryKey),n.socket(a.path,e)}e.io=u,e.connect=u,e.default=u,Object.assign(u,{Manager:r.Manager,Socket:o.Socket,io:u,connect:u});var l=n(57004);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return l.protocol}}),t.exports=u},24461:function(t,e,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(t,e,n,a){void 0===a&&(a=n),Object.defineProperty(t,a,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,a){void 0===a&&(a=n),t[a]=e[n]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(e,t,n);return c(e,t),e},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;var p=n(71999),d=n(68695),f=l(n(57004)),g=n(1350),y=n(86773),v=n(8946),m=h(n(62036)).default("socket.io-client:manager");e.Manager=function(t){o(n,t);var e=s(n);function n(t,a){var i,o;r(this,n),(i=e.call(this)).nsps={},i.subs=[],t&&"object"==typeof t&&(a=t,t=void 0),(a=a||{}).path=a.path||"/socket.io",i.opts=a,p.installTimerFunctions(u(i),a),i.reconnection(!1!==a.reconnection),i.reconnectionAttempts(a.reconnectionAttempts||1/0),i.reconnectionDelay(a.reconnectionDelay||1e3),i.reconnectionDelayMax(a.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=a.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new y.Backoff({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==a.timeout?2e4:a.timeout),i._readyState="closed",i.uri=t;var s=a.parser||f;return i.encoder=new s.Encoder,i.decoder=new s.Decoder,i._autoConnect=!1!==a.autoConnect,i._autoConnect&&i.open(),i}return i(n,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(m("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;m("opening %s",this.uri),this.engine=new p.Socket(this.uri,this.opts);var n=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;var i=g.on(n,"open",function(){a.onopen(),t&&t()}),r=function(n){m("error"),e.cleanup(),e._readyState="closed",e.emitReserved("error",n),t?t(n):e.maybeReconnectOnOpen()},o=g.on(n,"error",r);if(!1!==this._timeout){var s=this._timeout;m("connect attempt will timeout after %d",s);var c=this.setTimeoutFn(function(){m("connect attempt timed out after %d",s),i(),r(new Error("timeout")),n.close()},s);this.opts.autoUnref&&c.unref(),this.subs.push(function(){e.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){m("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(g.on(t,"ping",this.onping.bind(this)),g.on(t,"data",this.ondata.bind(this)),g.on(t,"error",this.onerror.bind(this)),g.on(t,"close",this.onclose.bind(this)),g.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(t){var e=this;p.nextTick(function(){e.emitReserved("packet",t)},this.setTimeoutFn)}},{key:"onerror",value:function(t){m("error",t),this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new d.Socket(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var a=n[e];if(this.nsps[a].active)return void m("socket %s is still active, skipping close",a)}this._close()}},{key:"_packet",value:function(t){m("writing packet %j",t);for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){m("cleanup"),this.subs.forEach(function(t){return t()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){m("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t,e){m("closed due to %s",t),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)m("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();m("will wait %dms before reconnect attempt",n),this._reconnecting=!0;var a=this.setTimeoutFn(function(){e.skipReconnect||(m("attempting reconnect"),t.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(function(n){n?(m("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):(m("reconnect success"),e.onreconnect())}))},n);this.opts.autoUnref&&a.unref(),this.subs.push(function(){t.clearTimeoutFn(a)})}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),n}(v.Emitter)},1350:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}},68695:function(n,a,c){"use strict";var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0}),a.Socket=void 0;var l=c(57004),h=c(1350),p=c(8946),d=u(c(62036)).default("socket.io-client:socket"),g=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});a.Socket=function(n){o(c,n);var a=s(c);function c(t,e,n){var i;return r(this,c),(i=a.call(this)).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=t,i.nsp=e,n&&n.auth&&(i.auth=n.auth),i._opts=Object.assign({},n),i.io._autoConnect&&i.open(),i}return i(c,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[h.on(t,"open",this.onopen.bind(this)),h.on(t,"packet",this.onpacket.bind(this)),h.on(t,"error",this.onerror.bind(this)),h.on(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(g.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:l.PacketType.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var r=this.ids++;d("emitting packet with ack id %d",r);var o=n.pop();this._registerAckCallback(r,o),i.id=r}return!this.flags.volatile||this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable&&this.connected?this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i):d("discard packet as the transport is not currently writable"),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n,a=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var r=this.io.setTimeoutFn(function(){delete a.acks[t];for(var n=0;n<a.sendBuffer.length;n++)a.sendBuffer[n].id===t&&(d("removing packet with ack id %d from the buffer",t),a.sendBuffer.splice(n,1));d("event with ack id %d has timed out after %d ms",t,i),e.call(a,new Error("operation has timed out"))},i);this.acks[t]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];a.io.clearTimeoutFn(r),e.apply(a,[null].concat(n))}}else this.acks[t]=e}},{key:"emitWithAck",value:function(t){for(var e=this,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(function(n,i){a.push(function(t,e){return r?t?i(t):n(e):n(t)}),e.emit.apply(e,[t].concat(a))})}},{key:"_addToQueue",value:function(t){var e,n=this;"function"==typeof t[t.length-1]&&(e=t.pop());var a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return a!==n._queue[0]?void 0:(null!==t?a.tryCount>n._opts.retries&&(d("packet [%d] is discarded after %d tries",a.id,a.tryCount),n._queue.shift(),e&&e(t)):(d("packet [%d] was successfully sent",a.id),n._queue.shift(),e&&e.apply(void 0,[null].concat(r))),a.pending=!1,n._drainQueue())}),this._queue.push(a),this._drainQueue()}},{key:"_drainQueue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d("draining queue"),this.connected&&0!==this._queue.length){var e=this._queue[0];!e.pending||t?(e.pending=!0,e.tryCount++,d("sending packet [%d] (try n\xb0%d)",e.id,e.tryCount),this.flags=e.flags,this.emit.apply(this,e.args)):d("packet [%d] has already been sent and is waiting for an ack",e.id)}}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;d("transport is open - connecting"),"function"==typeof this.auth?this.auth(function(e){t._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(t){this.packet({type:l.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t,e){d("close (%s)",t),this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case l.PacketType.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case l.PacketType.EVENT:case l.PacketType.BINARY_EVENT:this.onevent(t);break;case l.PacketType.ACK:case l.PacketType.BINARY_ACK:this.onack(t);break;case l.PacketType.DISCONNECT:this.ondisconnect();break;case l.PacketType.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}},{key:"onevent",value:function(t){var e=t.data||[];d("emitting event %j",e),null!=t.id&&(d("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(n){if(this._anyListeners&&this._anyListeners.length){var a,i=t(this._anyListeners.slice());try{for(i.s();!(a=i.n()).done;){a.value.apply(this,n)}}catch(r){i.e(r)}finally{i.f()}}e(f(c.prototype),"emit",this).apply(this,n),this._pid&&n.length&&"string"==typeof n[n.length-1]&&(this._lastOffset=n[n.length-1])}},{key:"ack",value:function(t){var e=this,n=!1;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];n||(n=!0,d("sending ack %j",i),e.packet({type:l.PacketType.ACK,id:t,data:i}))}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e?(d("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):d("bad ack %s",t.id)}},{key:"onconnect",value:function(t,e){d("socket connected with id %s",t),this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach(function(e){return t.emitEvent(e)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(e){t.notifyOutgoingListeners(e),t.packet(e)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){d("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(t){return t()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&(d("performing disconnect (%s)",this.nsp),this.packet({type:l.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}},{key:"prependAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}},{key:"offAnyOutgoing",value:function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var n,a=t(this._anyOutgoingListeners.slice());try{for(a.s();!(n=a.n()).done;){n.value.apply(this,e.data)}}catch(i){a.e(i)}finally{a.f()}}}}]),c}(p.Emitter)},17298:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;var i=n(71999),r=a(n(62036)).default("socket.io-client:url");e.url=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),r("parse %s",t),a=i.parse(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";var o=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+o+":"+a.port+e,a.href=a.protocol+"://"+o+(n&&n.port===a.port?"":":"+a.port),a}},9118:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasCORS=void 0;var n=!1;try{n="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(a){}e.hasCORS=n},2582:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0,e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),a=0,i=n.length;a<i;a++){var r=n[a].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},79919:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0;var n=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parse=function(t){var e=t,i=t.indexOf("["),r=t.indexOf("]");-1!=i&&-1!=r&&(t=t.substring(0,i)+t.substring(i,r).replace(/:/g,";")+t.substring(r,t.length));for(var o=n.exec(t||""),s={},c=14;c--;)s[a[c]]=o[c]||"";return-1!=i&&-1!=r&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(t,e){var n=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.slice(0,1)||0===e.length)&&n.splice(0,1),"/"==e.slice(-1)&&n.splice(n.length-1,1),n}(0,s.path),s.queryKey=function(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,a){e&&(n[e]=a)}),n}(0,s.query),s}},30652:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.yeast=e.decode=e.encode=void 0;var n,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},r=0,o=0;function s(t){var e="";do{e=a[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}for(e.encode=s,e.decode=function(t){var e=0;for(o=0;o<t.length;o++)e=64*e+i[t.charAt(o)];return e},e.yeast=function(){var t=s(+new Date);return t!==n?(r=0,n=t):t+"."+s(r++)};o<64;o++)i[a[o]]=o},32264:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalThisShim=void 0,e.globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},71999:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nextTick=e.parse=e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;var a=n(86720);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return a.Socket}}),e.protocol=a.Socket.protocol;var i=n(50383);Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return i.Transport}});var r=n(93939);Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return r.transports}});var o=n(59631);Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}});var s=n(79919);Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return s.parse}});var c=n(60941);Object.defineProperty(e,"nextTick",{enumerable:!0,get:function(){return c.nextTick}})},86720:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;var c=n(93939),l=n(59631),h=n(2582),p=n(79919),d=a(n(62036)),f=n(8946),g=n(32457),y=n(60941),v=(0,d.default)("engine.io-client:socket"),m=function(t){o(n,t);var e=s(n);function n(t){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,n),(a=e.call(this)).binaryType=y.defaultBinaryType,a.writeBuffer=[],t&&"object"==typeof t&&(i=t,t=null),t?(t=(0,p.parse)(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=(0,p.parse)(i.host).host),(0,l.installTimerFunctions)(u(a),i),a.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=a.secure?"443":"80"),a.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),a.port=i.port||("undefined"!=typeof location&&location.port?location.port:a.secure?"443":"80"),a.transports=i.transports||["polling","websocket","webtransport"],a.writeBuffer=[],a.prevBufferLen=0,a.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),a.opts.path=a.opts.path.replace(/\/$/,"")+(a.opts.addTrailingSlash?"/":""),"string"==typeof a.opts.query&&(a.opts.query=(0,h.decode)(a.opts.query)),a.id=null,a.upgrades=null,a.pingInterval=null,a.pingTimeout=null,a.pingTimeoutTimer=null,"function"==typeof addEventListener&&(a.opts.closeOnBeforeunload&&(a.beforeunloadEventListener=function(){a.transport&&(a.transport.removeAllListeners(),a.transport.close())},addEventListener("beforeunload",a.beforeunloadEventListener,!1)),"localhost"!==a.hostname&&(a.offlineEventListener=function(){a.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",a.offlineEventListener,!1))),a.open(),a}return i(n,[{key:"createTransport",value:function(t){v('creating transport "%s"',t);var e=Object.assign({},this.opts.query);e.EIO=g.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return v("options: %j",n),new c.transports[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){e.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(a){return v("error while creating transport: %s",a),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;v("setting transport %s",t.name),this.transport&&(v("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(t){return e.onClose("transport close",t)})}},{key:"probe",value:function(t){var e=this;v('probing transport "%s"',t);var a=this.createTransport(t),i=!1;n.priorWebsocketSuccess=!1;var r=function(){i||(v('probe transport "%s" opened',t),a.send([{type:"ping",data:"probe"}]),a.once("packet",function(r){if(!i)if("pong"===r.type&&"probe"===r.data){if(v('probe transport "%s" pong',t),e.upgrading=!0,e.emitReserved("upgrading",a),!a)return;n.priorWebsocketSuccess="websocket"===a.name,v('pausing current transport "%s"',e.transport.name),e.transport.pause(function(){i||"closed"!==e.readyState&&(v("changing transport and sending upgrade packet"),h(),e.setTransport(a),a.send([{type:"upgrade"}]),e.emitReserved("upgrade",a),a=null,e.upgrading=!1,e.flush())})}else{v('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=a.name,e.emitReserved("upgradeError",o)}}))};function o(){i||(i=!0,h(),a.close(),a=null)}var s=function(n){var i=new Error("probe error: "+n);i.transport=a.name,o(),v('probe transport "%s" failed because of error: %s',t,n),e.emitReserved("upgradeError",i)};function c(){s("transport closed")}function u(){s("socket closed")}function l(t){a&&t.name!==a.name&&(v('"%s" works - aborting "%s"',t.name,a.name),o())}var h=function(){a.removeListener("open",r),a.removeListener("error",s),a.removeListener("close",c),e.off("close",u),e.off("upgrading",l)};a.once("open",r),a.once("error",s),a.once("close",c),this.once("close",u),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(function(){i||a.open()},200):a.open()}},{key:"onOpen",value:function(){if(v("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){v("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(v('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}else v('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){t.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var t=this.getWritablePackets();v("flushing %d packets in socket",t.length),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var t=1,e=0;e<this.writeBuffer.length;e++){var n=this.writeBuffer[e].data;if(n&&(t+=(0,l.byteLength)(n)),e>0&&t>this.maxPayload)return v("only send %d out of %d packets",e,this.writeBuffer.length),this.writeBuffer.slice(0,e);t+=2}return v("payload size is %d (max: %d)",t,this.maxPayload),this.writeBuffer}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,a){if("function"==typeof e&&(a=e,e=void 0),"function"==typeof n&&(a=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),v("socket closing - telling transport to close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},a=function(){t.once("upgrade",n),t.once("upgradeError",n)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){t.upgrading?a():e()}):this.upgrading?a():e()),this}},{key:"onError",value:function(t){v("socket error %j",t),n.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(v('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,a=t.length;n<a;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}]),n}(f.Emitter);e.Socket=m,m.protocol=g.protocol},50383:function(t,n,a){"use strict";var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Transport=void 0;var h=a(32457),p=a(8946),d=a(59631),g=c(a(62036)),y=a(2582),v=(0,g.default)("engine.io-client:transport"),m=function(t){o(n,t);var e=s(n);function n(t,a,i){var o;return r(this,n),(o=e.call(this,t)).description=a,o.context=i,o.type="TransportError",o}return i(n)}(l(Error));n.Transport=function(t){o(a,t);var n=s(a);function a(t){var e;return r(this,a),(e=n.call(this)).writable=!1,(0,d.installTimerFunctions)(u(e),t),e.opts=t,e.query=t.query,e.socket=t.socket,e}return i(a,[{key:"onError",value:function(t,n,i){return e(f(a.prototype),"emitReserved",this).call(this,"error",new m(t,n,i)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState?this.write(t):v("transport is not open, discarding packets")}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,e(f(a.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){var e=(0,h.decodePacket)(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){e(f(a.prototype),"emitReserved",this).call(this,"packet",t)}},{key:"onClose",value:function(t){this.readyState="closed",e(f(a.prototype),"emitReserved",this).call(this,"close",t)}},{key:"pause",value:function(t){}},{key:"createUri",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}},{key:"_hostname",value:function(){var t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(t){var e=(0,y.encode)(t);return e.length?"?"+e:""}}]),a}(p.Emitter)},93939:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;var a=n(81830),i=n(14858),r=n(29282);e.transports={websocket:i.WS,webtransport:r.WT,polling:a.Polling}},81830:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.Polling=void 0;var l=n(50383),h=a(n(62036)),p=n(30652),d=n(32457),f=n(84891),g=n(8946),y=n(59631),v=n(32264),m=(0,h.default)("engine.io-client:polling");function b(){}var T=null!=new f.XHR({xdomain:!1}).responseType;e.Polling=function(t){o(n,t);var e=s(n);function n(t){var a;if(r(this,n),(a=e.call(this,t)).polling=!1,"undefined"!=typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),a.xd="undefined"!=typeof location&&t.hostname!==location.hostname||o!==t.port}return a.supportsBinary=T&&!(t&&t.forceBase64),a.opts.withCredentials&&(a.cookieJar=(0,f.createCookieJar)()),c(a)}return i(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){m("paused"),e.readyState="paused",t()};if(this.polling||!this.writable){var a=0;this.polling&&(m("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){m("pre-pause polling complete"),--a||n()})),this.writable||(m("we are currently writing - waiting to pause"),a++,this.once("drain",function(){m("pre-pause writing complete"),--a||n()}))}else n()}},{key:"poll",value:function(){m("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(t){var e=this;m("polling got data %s",t),(0,d.decodePayload)(t,this.socket.binaryType).forEach(function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose({description:"transport closed by the server"}),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this.poll():m('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){var t=this,e=function(){m("writing close packet"),t.write([{type:"close"}])};"open"===this.readyState?(m("transport open - closing"),e()):(m("transport not open - deferring close"),this.once("open",e))}},{key:"write",value:function(t){var e=this;this.writable=!1,(0,d.encodePayload)(t,function(t){e.doWrite(t,function(){e.writable=!0,e.emitReserved("drain")})})}},{key:"uri",value:function(){var t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,p.yeast)()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new k(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,a=this.request({method:"POST",data:t});a.on("success",e),a.on("error",function(t,e){n.onError("xhr post error",t,e)})}},{key:"doPoll",value:function(){var t=this;m("xhr poll");var e=this.request();e.on("data",this.onData.bind(this)),e.on("error",function(e,n){t.onError("xhr poll error",e,n)}),this.pollXhr=e}}]),n}(l.Transport);var k=function(t){o(n,t);var e=s(n);function n(t,a){var i;return r(this,n),i=e.call(this),(0,y.installTimerFunctions)(u(i),a),i.opts=a,i.method=a.method||"GET",i.uri=t,i.data=void 0!==a.data?a.data:null,i.create(),i}return i(n,[{key:"create",value:function(){var t,e=this,a=(0,y.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this.opts.xd;var i=this.xhr=new f.XHR(a);try{m("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var r in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this.opts.extraHeaders[r])}catch(r){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{i.setRequestHeader("Accept","*/*")}catch(r){}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=function(){var t;3===i.readyState&&(null===(t=e.opts.cookieJar)||void 0===t||t.parseCookies(i)),4===i.readyState&&(200===i.status||1223===i.status?e.onLoad():e.setTimeoutFn(function(){e.onError("number"==typeof i.status?i.status:0)},0))},m("xhr data %s",this.data),i.send(this.data)}catch(r){return void this.setTimeoutFn(function(){e.onError(r)},0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(null!=this.xhr){if(this.xhr.onreadystatechange=b,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(g.Emitter);function w(){for(var t in k.requests)k.requests.hasOwnProperty(t)&&k.requests[t].abort()}e.Request=k,k.requestsCount=0,k.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",w):"function"==typeof addEventListener&&addEventListener("onpagehide"in v.globalThisShim?"pagehide":"unload",w,!1))},60941:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;var a=n(32264);e.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},e.WebSocket=a.globalThisShim.WebSocket||a.globalThisShim.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"},14858:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;var c=n(50383),u=n(30652),l=n(59631),h=n(60941),p=a(n(62036)),d=n(32457),f=(0,p.default)("engine.io-client:websocket"),g="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();e.WS=function(t){o(n,t);var e=s(n);function n(t){var a;return r(this,n),(a=e.call(this,t)).supportsBinary=!t.forceBase64,a}return i(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=g?{}:(0,l.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=h.usingBrowserWebSocket&&!g?e?new h.WebSocket(t,e):new h.WebSocket(t):new h.WebSocket(t,e,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var a=t[n],i=n===t.length-1;(0,d.encodePacket)(a,e.supportsBinary,function(t){var n={};h.usingBrowserWebSocket||(a.options&&(n.compress=a.options.compress),e.opts.perMessageDeflate&&("string"==typeof t?Buffer.byteLength(t):t.length)<e.opts.perMessageDeflate.threshold&&(n.compress=!1));try{h.usingBrowserWebSocket?e.ws.send(t):e.ws.send(t,n)}catch(r){f("websocket closed before onclose event")}i&&(0,h.nextTick)(function(){e.writable=!0,e.emitReserved("drain")},e.setTimeoutFn)})},a=0;a<t.length;a++)n(a)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,u.yeast)()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},{key:"check",value:function(){return!!h.WebSocket}}]),n}(c.Transport)},29282:function(t,e,n){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WT=void 0;var c=n(50383),u=n(60941),l=n(32457),h=(0,a(n(62036)).default)("engine.io-client:webtransport");e.WT=function(t){o(n,t);var e=s(n);function n(){return r(this,n),e.apply(this,arguments)}return i(n,[{key:"name",get:function(){return"webtransport"}},{key:"doOpen",value:function(){var t=this;"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(function(){h("transport closed gracefully"),t.onClose()}).catch(function(e){h("transport closed due to %s",e),t.onError("webtransport error",e)}),this.transport.ready.then(function(){t.transport.createBidirectionalStream().then(function(e){var n=(0,l.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,t.socket.binaryType),a=e.readable.pipeThrough(n).getReader(),i=(0,l.createPacketEncoderStream)();i.readable.pipeTo(e.writable),t.writer=i.writable.getWriter();!function e(){a.read().then(function(n){var a=n.done,i=n.value;a?h("session is closed"):(h("received chunk: %o",i),t.onPacket(i),e())}).catch(function(t){h("an error occurred while reading: %s",t)})}();var r={type:"open"};t.query.sid&&(r.data='{"sid":"'.concat(t.query.sid,'"}')),t.writer.write(r).then(function(){return t.onOpen()})})}))}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var a=n===t.length-1;e.writer.write(t[n]).then(function(){a&&(0,u.nextTick)(function(){e.writable=!0,e.emitReserved("drain")},e.setTimeoutFn)})},a=0;a<t.length;a++)n(a)}},{key:"doClose",value:function(){var t;null===(t=this.transport)||void 0===t||t.close()}}]),n}(c.Transport)},84891:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCookieJar=e.XHR=void 0;var a=n(9118),i=n(32264);e.XHR=function(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||a.hasCORS))return new XMLHttpRequest}catch(n){}if(!e)try{return new(i.globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}},e.createCookieJar=function(){}},59631:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.byteLength=e.installTimerFunctions=e.pick=void 0;var a=n(32264);e.pick=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return n.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{})};var i=a.globalThisShim.setTimeout,r=a.globalThisShim.clearTimeout;e.installTimerFunctions=function(t,e){e.useNativeTimers?(t.setTimeoutFn=i.bind(a.globalThisShim),t.clearTimeoutFn=r.bind(a.globalThisShim)):(t.setTimeoutFn=a.globalThisShim.setTimeout.bind(a.globalThisShim),t.clearTimeoutFn=a.globalThisShim.clearTimeout.bind(a.globalThisShim))},e.byteLength=function(t){return"string"==typeof t?function(t){for(var e=0,n=0,a=0,i=t.length;a<i;a++)(e=t.charCodeAt(a))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(a++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))}},27948:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;var n=Object.create(null);e.PACKET_TYPES=n,n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";var a=Object.create(null);e.PACKET_TYPES_REVERSE=a,Object.keys(n).forEach(function(t){a[n[t]]=t}),e.ERROR_PACKET={type:"error",data:"parser error"}},44359:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<n.length;i++)a[n.charCodeAt(i)]=i;e.encode=function(t){var e,a=new Uint8Array(t),i=a.length,r="";for(e=0;e<i;e+=3)r+=n[a[e]>>2],r+=n[(3&a[e])<<4|a[e+1]>>4],r+=n[(15&a[e+1])<<2|a[e+2]>>6],r+=n[63&a[e+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},e.decode=function(t){var e,n,i,r,o,s=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),h=new Uint8Array(l);for(e=0;e<c;e+=4)n=a[t.charCodeAt(e)],i=a[t.charCodeAt(e+1)],r=a[t.charCodeAt(e+2)],o=a[t.charCodeAt(e+3)],h[u++]=n<<2|i>>4,h[u++]=(15&i)<<4|r>>2,h[u++]=(3&r)<<6|63&o;return l}},72877:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePacket=void 0;var a=n(27948),i=n(44359),r="function"==typeof ArrayBuffer;e.decodePacket=function(t,e){if("string"!=typeof t)return{type:"message",data:s(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:o(t.substring(1),e)}:a.PACKET_TYPES_REVERSE[n]?t.length>1?{type:a.PACKET_TYPES_REVERSE[n],data:t.substring(1)}:{type:a.PACKET_TYPES_REVERSE[n]}:a.ERROR_PACKET};var o=function(t,e){if(r){var n=(0,i.decode)(t);return s(n,e)}return{base64:!0,data:t}},s=function(t,e){switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}}},22345:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodePacket=e.encodePacketToBinary=void 0;var a=n(27948),i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),r="function"==typeof ArrayBuffer,o=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},s=function(t,e,n){var s=t.type,c=t.data;return i&&c instanceof Blob?e?n(c):u(c,n):r&&(c instanceof ArrayBuffer||o(c))?e?n(c):u(new Blob([c]),n):n(a.PACKET_TYPES[s]+(c||""))};e.encodePacket=s;var c,u=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+(t||""))},n.readAsDataURL(t)};function l(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}e.encodePacketToBinary=function(t,e){return i&&t.data instanceof Blob?t.data.arrayBuffer().then(l).then(e):r&&(t.data instanceof ArrayBuffer||o(t.data))?e(l(t.data)):void s(t,!1,function(t){c||(c=new TextEncoder),e(c.encode(t))})}},32457:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=e.createPacketDecoderStream=e.createPacketEncoderStream=void 0;var a=n(22345);Object.defineProperty(e,"encodePacket",{enumerable:!0,get:function(){return a.encodePacket}});var i=n(72877);Object.defineProperty(e,"decodePacket",{enumerable:!0,get:function(){return i.decodePacket}});var r,o=n(27948),s=String.fromCharCode(30);function c(t){return t.reduce(function(t,e){return t+e.length},0)}function u(t,e){if(t[0].length===e)return t.shift();for(var n=new Uint8Array(e),a=0,i=0;i<e;i++)n[i]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),n}e.encodePayload=function(t,e){var n=t.length,i=new Array(n),r=0;t.forEach(function(t,o){(0,a.encodePacket)(t,!1,function(t){i[o]=t,++r===n&&e(i.join(s))})})},e.decodePayload=function(t,e){for(var n=t.split(s),a=[],r=0;r<n.length;r++){var o=(0,i.decodePacket)(n[r],e);if(a.push(o),"error"===o.type)break}return a},e.createPacketEncoderStream=function(){return new TransformStream({transform:function(t,e){(0,a.encodePacketToBinary)(t,function(n){var a,i=n.length;if(i<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,i);else if(i<65536){a=new Uint8Array(3);var r=new DataView(a.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{a=new Uint8Array(9);var o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}t.data&&"string"!=typeof t.data&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}})},e.createPacketDecoderStream=function(t,e){r||(r=new TextDecoder);var n=[],a=0,s=-1,l=!1;return new TransformStream({transform:function(h,p){for(n.push(h);;){if(0===a){if(c(n)<1)break;var d=u(n,1);l=128==(128&d[0]),s=127&d[0],a=s<126?3:126===s?1:2}else if(1===a){if(c(n)<2)break;var f=u(n,2);s=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),a=3}else if(2===a){if(c(n)<8)break;var g=u(n,8),y=new DataView(g.buffer,g.byteOffset,g.length),v=y.getUint32(0);if(v>Math.pow(2,21)-1){p.enqueue(o.ERROR_PACKET);break}s=v*Math.pow(2,32)+y.getUint32(4),a=3}else{if(c(n)<s)break;var m=u(n,s);p.enqueue((0,i.decodePacket)(l?m:r.decode(m),e)),a=0}if(0===s||s>t){p.enqueue(o.ERROR_PACKET);break}}}})},e.protocol=4},12848:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;var a=n(51209);function i(t,e){if(!t)return t;if((0,a.isBinary)(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=i(t[o],e);return r}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(s[c]=i(t[c],e));return s}return t}function r(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=r(t[n],e);else if("object"==typeof t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(t[a]=r(t[a],e));return t}e.deconstructPacket=function(t){var e=[],n=t;return n.data=i(t.data,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=r(t.data,e),delete t.attachments,t}},57004:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Decoder=n.Encoder=n.PacketType=n.protocol=void 0;var c,u,l=a(8946),h=a(12848),p=a(51209),d=(0,a(62036).default)("socket.io-parser"),g=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];function y(t){return"[object Object]"===Object.prototype.toString.call(t)}n.protocol=5,(u=c=n.PacketType||(n.PacketType={}))[u.CONNECT=0]="CONNECT",u[u.DISCONNECT=1]="DISCONNECT",u[u.EVENT=2]="EVENT",u[u.ACK=3]="ACK",u[u.CONNECT_ERROR=4]="CONNECT_ERROR",u[u.BINARY_EVENT=5]="BINARY_EVENT",u[u.BINARY_ACK=6]="BINARY_ACK",n.Encoder=function(){function t(e){r(this,t),this.replacer=e}return i(t,[{key:"encode",value:function(t){return d("encoding packet %j",t),t.type!==c.EVENT&&t.type!==c.ACK||!(0,p.hasBinary)(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===c.EVENT?c.BINARY_EVENT:c.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}},{key:"encodeAsString",value:function(t){var e=""+t.type;return(t.type===c.BINARY_EVENT||t.type===c.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),d("encoded %j as %s",t,e),e}},{key:"encodeAsBinary",value:function(t){var e=(0,h.deconstructPacket)(t),n=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(n),a}}]),t}();var v=function(t){o(a,t);var n=s(a);function a(t){var e;return r(this,a),(e=n.call(this)).reviver=t,e}return i(a,[{key:"add",value:function(t){var n;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var i=(n=this.decodeString(t)).type===c.BINARY_EVENT;i||n.type===c.BINARY_ACK?(n.type=i?c.EVENT:c.ACK,this.reconstructor=new m(n),0===n.attachments&&e(f(a.prototype),"emitReserved",this).call(this,"decoded",n)):e(f(a.prototype),"emitReserved",this).call(this,"decoded",n)}else{if(!(0,p.isBinary)(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,e(f(a.prototype),"emitReserved",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(t){var e=0,n={type:Number(t.charAt(0))};if(void 0===c[n.type])throw new Error("unknown packet type "+n.type);if(n.type===c.BINARY_EVENT||n.type===c.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var r=t.substring(i,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===t.charAt(e+1)){for(var o=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(o,e)}else n.nsp="/";var s=t.charAt(e+1);if(""!==s&&Number(s)==s){for(var u=e+1;++e;){var l=t.charAt(e);if(null==l||Number(l)!=l){--e;break}if(e===t.length)break}n.id=Number(t.substring(u,e+1))}if(t.charAt(++e)){var h=this.tryParse(t.substr(e));if(!a.isPayloadValid(n.type,h))throw new Error("invalid payload");n.data=h}return d("decoded %s as %j",t,n),n}},{key:"tryParse",value:function(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case c.CONNECT:return y(e);case c.DISCONNECT:return void 0===e;case c.CONNECT_ERROR:return"string"==typeof e||y(e);case c.EVENT:case c.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===g.indexOf(e[0]));case c.ACK:case c.BINARY_ACK:return Array.isArray(e)}}}]),a}(l.Emitter);n.Decoder=v;var m=function(){function t(e){r(this,t),this.packet=e,this.buffers=[],this.reconPack=e}return i(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=(0,h.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}()},51209:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;var n="function"==typeof ArrayBuffer,a=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);function o(t){return n&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||i&&t instanceof Blob||r&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(var a=0,i=e.length;a<i;a++)if(t(e[a]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return!0;return!1}},8946:function(t,e,n){"use strict";function a(t){if(t)return function(t){for(var e in a.prototype)t[e]=a.prototype[e];return t}(t)}n.r(e),n.d(e,{Emitter:function(){return a}}),a.prototype.on=a.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},a.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var a,i=0;i<n.length;i++)if((a=n[i])===e||a.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},a.prototype.emitReserved=a.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(n){a=0;for(var i=(n=n.slice(0)).length;a<i;++a)n[a].apply(this,e)}return this},a.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},a.prototype.hasListeners=function(t){return!!this.listeners(t).length}}}])}();