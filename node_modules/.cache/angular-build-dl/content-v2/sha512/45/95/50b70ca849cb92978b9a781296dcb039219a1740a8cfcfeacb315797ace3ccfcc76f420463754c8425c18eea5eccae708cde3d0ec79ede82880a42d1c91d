"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[8203],{29884:function(e,t,o){o.d(t,{l:function(){return r}});var i=o(92340),n=o(37716),l=o(91841);let r=(()=>{class e{constructor(e){this.http=e}getLatLonglocations(e,t){var o;return o="address"==t?`https://dev.virtualearth.net/REST/v1/Locations/${e.latitude},${e.longitude}?key=${i.N.BING_API_KEY}`:`https://dev.virtualearth.net/REST/v1/Locations?query=${e.address?encodeURIComponent(e.address):e}&key=${i.N.BING_API_KEY}`,this.http.get(o)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(l.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},55533:function(e,t,o){o.d(t,{z:function(){return n}});var i=o(37716);let n=(()=>{class e{constructor(){}enforceMinMax(e){let t=null==e?void 0:e.target.min,o=null==e?void 0:e.target.max,i=null==e?void 0:e.target.value;return""!=i?(parseFloat(i)<parseFloat(t)&&(e.target.value=t),parseFloat(i)>parseFloat(o)&&(e.target.value=o),e.target.value):-1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},29513:function(e,t,o){o.d(t,{Dc:function(){return D}});var i=o(91841),n=o(92340),l=o(19549),r=o(3679),a=o(37716),s=o(89097),d=o(39895),u=o(49342),c=o(7450),g=o(29884),m=o(55533),h=o(39075),p=o(21693),f=o(38583),v=o(74062),Z=o(86640);function A(e,t){if(1&e&&(a.TgZ(0,"div",11),a.TgZ(1,"div",12),a.TgZ(2,"div",13),a.TgZ(3,"span",14),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.language.Loading)}}function x(e,t){if(1&e&&(a.TgZ(0,"div",15),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij(" ",e.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function b(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",16),a.TgZ(1,"span",17),a._UZ(2,"img",18),a.qZA(),a.TgZ(3,"button",19),a.NdJ("click",function(){return a.CHM(e),a.oxw().closeAlert()}),a._UZ(4,"span"),a.qZA(),a._uU(5),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.hij(" ",e.errorInfo," ")}}function C(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.hij(" ",e.language["please enter the Device Name Format"]," ")}}function w(e,t){if(1&e&&(a.TgZ(0,"div",53),a.YNc(1,C,2,1,"div",45),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.deviceNameFormat||null==e.formControls.deviceNameFormat.errors?null:e.formControls.deviceNameFormat.errors.isrequired)}}function T(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.hij(" ",e.language["Please enter the valid Mac /IP Address with Subnet"]," ")}}function q(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.hij(" ",e.language["Please enter the valid Mac /IP Address with Subnet"]," ")}}function _(e,t){if(1&e&&(a.TgZ(0,"div",54),a.YNc(1,T,2,1,"div",45),a.YNc(2,q,2,1,"div",45),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.id||null==e.formControls.id.errors?null:e.formControls.id.errors.isrequired),a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.id||null==e.formControls.id.errors?null:e.formControls.id.errors.invalidId)}}function O(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",55),a._uU(2),a.qZA(),a.BQk()),2&e){const e=t.item;a.xp6(1),a.s9C("title",e.name),a.xp6(1),a.Oqu(e.name)}}function I(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.hij(" ",e.language["Please enter the Region"]," ")}}function S(e,t){if(1&e&&(a.TgZ(0,"div",56),a.YNc(1,I,2,1,"div",45),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.region||null==e.formControls.region.errors?null:e.formControls.region.errors.isrequired)}}function U(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",55),a._uU(2),a.qZA(),a.BQk()),2&e){const e=t.item;a.xp6(1),a.s9C("title",e.name),a.xp6(1),a.Oqu(e.name)}}function N(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.hij(" ",e.language["Please enter the Location"]," ")}}function y(e,t){if(1&e&&(a.TgZ(0,"div",56),a.YNc(1,N,2,1,"div",45),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.networkGroupUuid||null==e.formControls.networkGroupUuid.errors?null:e.formControls.networkGroupUuid.errors.isrequired)}}function L(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.language["Please enter the Latitude"]," ")}}function M(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.language["Please enter the valid Latitude"]," ")}}function F(e,t){if(1&e&&(a.TgZ(0,"div",56),a.YNc(1,L,2,1,"div",45),a.YNc(2,M,2,1,"div",45),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.latitude||null==e.formControls.latitude.errors?null:e.formControls.latitude.errors.isrequired),a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.latitude||null==e.formControls.latitude.errors?null:e.formControls.latitude.errors.invalidValue)}}function k(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.language["Please enter the Longitude"]," ")}}function P(e,t){if(1&e&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&e){const e=a.oxw(4);a.xp6(1),a.hij(" ",e.language["Please enter the valid Longitude"]," ")}}function J(e,t){if(1&e&&(a.TgZ(0,"div",56),a.YNc(1,k,2,1,"div",45),a.YNc(2,P,2,1,"div",45),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.longitude||null==e.formControls.longitude.errors?null:e.formControls.longitude.errors.isrequired),a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.longitude||null==e.formControls.longitude.errors?null:e.formControls.longitude.errors.invalidValue)}}function E(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",22),a.TgZ(1,"div",57),a.TgZ(2,"div",58),a.TgZ(3,"label"),a._uU(4),a.TgZ(5,"span",42),a._uU(6,"*"),a.qZA(),a.qZA(),a.TgZ(7,"input",59),a.NdJ("keyup",function(t){return a.CHM(e),a.oxw(2).enforceMinMax(t,"latitude")}),a.qZA(),a.YNc(8,F,3,2,"div",32),a.qZA(),a.TgZ(9,"div",60),a.TgZ(10,"label"),a._uU(11),a.TgZ(12,"span",42),a._uU(13,"*"),a.qZA(),a.qZA(),a.TgZ(14,"input",61),a.NdJ("keyup",function(t){return a.CHM(e),a.oxw(2).enforceMinMax(t,"longitude")}),a.qZA(),a.YNc(15,J,3,2,"div",32),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(4),a.hij(" ",e.language.Latitude," "),a.xp6(3),a.s9C("placeholder",e.language.Latitude),a.Q6J("formValue",e.callHomeForm),a.xp6(1),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.latitude?null:e.formControls.latitude.invalid)&&((null==e.formControls||null==e.formControls.latitude?null:e.formControls.latitude.dirty)||(null==e.formControls||null==e.formControls.latitude?null:e.formControls.latitude.touched)||e.submitted)),a.xp6(3),a.hij(" ",e.language.Longitude," "),a.xp6(3),a.s9C("placeholder",e.language.Longitude),a.Q6J("formValue",e.callHomeForm),a.xp6(1),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.longitude?null:e.formControls.longitude.invalid)&&((null==e.formControls||null==e.formControls.longitude?null:e.formControls.longitude.dirty)||(null==e.formControls||null==e.formControls.longitude?null:e.formControls.longitude.touched)||e.submitted))}}function H(e,t){if(1&e&&(a.TgZ(0,"div",56),a.TgZ(1,"p"),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw(3);a.xp6(2),a.hij(" ",e.language[e.serviceAddressErrorMsg]," ")}}function Y(e,t){if(1&e&&(a.TgZ(0,"div",22),a.TgZ(1,"label",39),a._uU(2),a.qZA(),a._UZ(3,"input",62),a.YNc(4,H,3,1,"div",32),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.Oqu(e.language["Service Address"]),a.xp6(1),a.s9C("placeholder",e.language["Service Address"]),a.Q6J("formValue",e.callHomeForm),a.xp6(1),a.Q6J("ngIf",e.serviceAddressErrorMsg)}}function Q(e,t){if(1&e&&(a.TgZ(0,"div",56),a.TgZ(1,"div"),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.hij(" ",e.language["Please enter the Username"]," ")}}function j(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"span",63),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).showPass()}),a.qZA(),a.BQk()}if(2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngClass",e.hidepwd?"password_hide":"password_view")}}function $(e,t){if(1&e&&(a.TgZ(0,"div",56),a.TgZ(1,"div"),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.hij(" ",e.language["Please enter the Password"]," ")}}function V(e,t){if(1&e&&(a.TgZ(0,"div",56),a.TgZ(1,"div"),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.hij(" ",e.language.connect_timeout_error," ")}}function R(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",20),a.TgZ(1,"form",21),a.TgZ(2,"div",22),a.TgZ(3,"label",23),a._uU(4),a.TgZ(5,"span",24),a._uU(6,"*"),a.qZA(),a.qZA(),a._UZ(7,"input",25),a.YNc(8,w,2,1,"div",26),a.qZA(),a.TgZ(9,"div",22),a.TgZ(10,"label",23),a._uU(11),a.TgZ(12,"span",24),a._uU(13,"*"),a.qZA(),a.qZA(),a._UZ(14,"input",27),a.YNc(15,_,3,2,"div",28),a.qZA(),a.TgZ(16,"div",22),a.TgZ(17,"label",29),a._uU(18),a.TgZ(19,"span",24),a._uU(20,"*"),a.qZA(),a.qZA(),a.TgZ(21,"ng-select",30),a.NdJ("change",function(t){return a.CHM(e),a.oxw().loadLocationValue(t)}),a.YNc(22,O,3,2,"ng-template",31),a.qZA(),a.YNc(23,S,2,1,"div",32),a.qZA(),a.TgZ(24,"div",22),a.TgZ(25,"label",29),a._uU(26),a.TgZ(27,"span",24),a._uU(28,"*"),a.qZA(),a.qZA(),a.TgZ(29,"ng-select",33),a.YNc(30,U,3,2,"ng-template",31),a.qZA(),a.YNc(31,y,2,1,"div",32),a.qZA(),a.TgZ(32,"div",22),a.TgZ(33,"div",34),a.TgZ(34,"label",35),a.TgZ(35,"input",36),a.NdJ("change",function(){return a.CHM(e),a.oxw().showServiceAddress(!0)}),a.qZA(),a._uU(36),a.qZA(),a.qZA(),a.TgZ(37,"div",34),a.TgZ(38,"label",35),a.TgZ(39,"input",37),a.NdJ("change",function(){return a.CHM(e),a.oxw().showServiceAddress(!1)}),a.qZA(),a._uU(40),a.qZA(),a.qZA(),a.qZA(),a.YNc(41,E,16,8,"div",38),a.YNc(42,Y,5,4,"div",38),a.TgZ(43,"div",22),a.TgZ(44,"label",39),a._uU(45),a.qZA(),a._UZ(46,"input",40),a.qZA(),a.TgZ(47,"div",22),a.TgZ(48,"label",41),a._uU(49),a.TgZ(50,"span",42),a._uU(51,"*"),a.qZA(),a.qZA(),a._UZ(52,"input",43),a.YNc(53,Q,3,1,"div",32),a.qZA(),a.TgZ(54,"div",22),a.TgZ(55,"label",41),a._uU(56),a.TgZ(57,"span",42),a._uU(58,"*"),a.qZA(),a.qZA(),a.TgZ(59,"div",0),a._UZ(60,"input",44),a.YNc(61,j,2,1,"ng-container",45),a.qZA(),a.YNc(62,$,3,1,"div",32),a.qZA(),a.TgZ(63,"div",22),a.TgZ(64,"div",4),a.TgZ(65,"div",46),a.TgZ(66,"label",41),a._uU(67),a.qZA(),a.qZA(),a.TgZ(68,"div",47),a._UZ(69,"input",48),a.qZA(),a.TgZ(70,"div",49),a.TgZ(71,"label",50),a._uU(72),a.qZA(),a.qZA(),a.qZA(),a.YNc(73,V,3,1,"div",32),a.qZA(),a.TgZ(74,"button",51),a.NdJ("click",function(){return a.CHM(e),a.oxw().onSubmit()}),a._uU(75),a.qZA(),a.TgZ(76,"button",52),a.NdJ("click",function(){return a.CHM(e),a.oxw().goToList()}),a._uU(77),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("formGroup",e.callHomeForm),a.xp6(3),a.hij("",e.language["Device Name Format"]," "),a.xp6(3),a.Q6J("formValue",e.callHomeForm),a.xp6(1),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.deviceNameFormat?null:e.formControls.deviceNameFormat.invalid)&&((null==e.formControls||null==e.formControls.deviceNameFormat?null:e.formControls.deviceNameFormat.dirty)||(null==e.formControls||null==e.formControls.deviceNameFormat?null:e.formControls.deviceNameFormat.touched)||e.submitted)),a.xp6(3),a.hij("MAC/",e.language["IP Address with Subnet"]," "),a.xp6(3),a.s9C("placeholder",e.language["Mac/IP Address with Subnet"]),a.Q6J("readonly",e.isEditPage)("formValue",e.callHomeForm),a.xp6(1),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.id?null:e.formControls.id.invalid)&&((null==e.formControls||null==e.formControls.id?null:e.formControls.id.dirty)||(null==e.formControls||null==e.formControls.id?null:e.formControls.id.touched)||e.submitted)),a.xp6(3),a.hij("",e.language.Region," "),a.xp6(3),a.s9C("placeholder",e.isEditPage?e.data.region:e.language.Select),a.Q6J("bindLabel","name")("bindValue","id")("items",e.regionsDataArray)("clearable",!1)("searchable",!0),a.xp6(2),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.region?null:e.formControls.region.invalid)&&((null==e.formControls||null==e.formControls.region?null:e.formControls.region.dirty)||(null==e.formControls||null==e.formControls.region?null:e.formControls.region.touched)||e.submitted)),a.xp6(3),a.hij("",e.language.Location," "),a.xp6(3),a.s9C("placeholder",e.isEditPage?e.data.location:e.language.Select),a.Q6J("bindLabel","name")("bindValue","id")("items",e.locationDataArray)("clearable",!1)("searchable",!0),a.xp6(2),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.networkGroupUuid?null:e.formControls.networkGroupUuid.invalid)&&((null==e.formControls||null==e.formControls.networkGroupUuid?null:e.formControls.networkGroupUuid.dirty)||(null==e.formControls||null==e.formControls.networkGroupUuid?null:e.formControls.networkGroupUuid.touched)||e.submitted)),a.xp6(4),a.Q6J("checked",e.showServiceAddressInp)("formValue",e.callHomeForm),a.xp6(1),a.hij(" ",e.language["Service Address"]," "),a.xp6(3),a.Q6J("checked",!e.showServiceAddressInp),a.xp6(1),a.hij("",e.language["Latitude/Longitude"]," "),a.xp6(1),a.Q6J("ngIf",!e.showServiceAddressInp),a.xp6(1),a.Q6J("ngIf",e.showServiceAddressInp),a.xp6(3),a.Oqu(e.language["Distributed OLT Name"]),a.xp6(1),a.s9C("placeholder",e.language.Name),a.Q6J("readonly",e.isEditPage)("formValue",e.callHomeForm),a.xp6(3),a.hij("",e.language.Username," "),a.xp6(3),a.s9C("placeholder",e.language.Username),a.Q6J("formValue",e.callHomeForm),a.xp6(1),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.username?null:e.formControls.username.invalid)&&((null==e.formControls||null==e.formControls.username?null:e.formControls.username.dirty)||(null==e.formControls||null==e.formControls.username?null:e.formControls.username.touched)||e.submitted)),a.xp6(3),a.hij("",e.language.Password," "),a.xp6(4),a.s9C("placeholder",e.language.Password),a.Q6J("type",e.hidepwd?"password":"text"),a.xp6(1),a.Q6J("ngIf",null==e.formControls||null==e.formControls.password?null:e.formControls.password.value),a.xp6(1),a.Q6J("ngIf",(null==e.formControls||null==e.formControls.password?null:e.formControls.password.invalid)&&((null==e.formControls||null==e.formControls.password?null:e.formControls.password.dirty)||(null==e.formControls||null==e.formControls.password?null:e.formControls.password.touched)||e.submitted)),a.xp6(5),a.hij("",e.language["Connect Timeout"]," "),a.xp6(2),a.s9C("placeholder",e.language["Connect Timeout"]),a.xp6(3),a.Oqu(e.language.Seconds),a.xp6(1),a.Q6J("ngIf",((null==e.formControls||null==e.formControls.connectTimeoutSec?null:e.formControls.connectTimeoutSec.invalid)||(null==e.formControls||null==e.formControls.connectTimeoutSec||null==e.formControls.connectTimeoutSec.errors?null:e.formControls.connectTimeoutSec.errors.pattern))&&e.submitted),a.xp6(2),a.hij(" ",e.language.submit," "),a.xp6(2),a.hij(" ",e.language.Cancel," ")}}let D=(()=>{class e{constructor(e,t,o,i,n,l,a,s,d,u,c){this.http=e,this.sso=t,this.router=o,this.route=i,this.commonOrgService=n,this.translateServie=l,this.geoService=a,this.workflowService=s,this.fb=d,this.titleService=u,this.issueService=c,this.data={},this.isDev=!1,this.errorInfo="",this.successInfo="",this.idErrorMsg="",this.isEditPage=!1,this.id="",this.region="",this.location="",this.serviceAddressErrorMsg="",this.regionsDataArray=[],this.regions={},this.hidepwd=!0,this.submitted=!1,this.loading=!1,this.callHomeForm=this.fb.group({deviceNameFormat:["",[r.kI.required,G]],id:["",[r.kI.required,B.bind(this)]],region:[null,[r.kI.required,z]],networkGroupUuid:[null,[r.kI.required,W]],ufLocation:[""],latitude:["",[X.bind(this)]],longitude:["",[X.bind(this)]],distributedOltName:[""],username:["",[r.kI.required]],password:["",[r.kI.required]],connectTimeoutSec:[5,[r.kI.min(5),r.kI.max(90),r.kI.pattern("^[0-9]*$"),K]]}),this.validId=!0,this.validDeviceNameFormat=!0,this.deviceNameFormatErrorMsg="",this.showServiceAddressInp=!0}ngOnInit(){var e;let t=this.sso.getScopes();-1!==(null===(e=null==t?void 0:t["cloud.rbac.coc.operations.systemonboarding.axoscallhome"])||void 0===e?void 0:e.indexOf("write"))&&(this.hasWriteAccess=!0),-1!==n.N.API_BASE_URL.indexOf("dev.api.calix.ai")&&(this.isDev=!0),this.geoService.getLatLonglocations("chennai"),this.ORG_ID=this.sso.getOrganizationID(this.router.url),this.language=this.translateServie.defualtLanguage,this.languageSubject=this.translateServie.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`Call Home - AXOS Systems - ${this.language["System Onboarding"]} - ${this.language.Operations}  - ${this.language.Operations} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`Call Home - AXOS Systems - ${this.language["System Onboarding"]} - ${this.language.Operations}  - ${this.language.Operations} - ${this.language["Calix Cloud"]}`);let o=this.route.snapshot.paramMap.get("id");o&&(this.id=o,this.isEditPage=!0),this.getRegions(),this.data={deviceNameFormat:"",id:"",configUrl:"",format:"NETCONF_XML",operation:"MERGE",distributedOltName:"",username:"",password:"",sshKey:"",urlPassword:"",connectTimeoutSec:60,heartbeatIntervalSec:15,orgId:this.sso.getOrgId(),tenantId:"",deviceOrgId:"",deviceTenantId:"",ufLocation:"",latitude:"",longitude:""}}goToList(){-1!==window.location.href.indexOf("/system-onboarding/")?this.router.navigate(["/cco/operations/system-onboarding/axos-callhome/callhome/list"]):-1!==window.location.href.indexOf("/systemAdministration/")?this.router.navigate(["/systemAdministration/cco-admin/call-home"]):this.router.navigate(["/organization-admin/call-home"])}showPass(){this.hidepwd=!this.hidepwd}onSubmit(){var e;this.submitted=!0;let t=this.callHomeForm.value;if(this.clearErrors(),!this.callHomeForm.valid)return;let o,i,n={id:t.id,networkGroupUuid:`${t.networkGroupUuid.trim()}`,distributedOltName:t.distributedOltName,username:t.username,password:t.password,deviceNameFormat:t.deviceNameFormat,connectTimeoutSec:t.connectTimeoutSec?t.connectTimeoutSec:5,deviceLocation:{geoTypeUserSelection:this.showServiceAddressInp?"SERVICE_ADDRESS":"GEO_COORDINATES",ufLocation:t.ufLocation,point:{elevation:0,latitude:0,longitude:0}}};if((null===(e=t.ufLocation)||void 0===e?void 0:e.trim())&&this.showServiceAddressInp)o={address:t.ufLocation},i="coordinates";else{if(this.showServiceAddressInp||!t.latitude||!t.longitude)return n.deviceLocation=null,void this.save(n);o={latitude:t.latitude,longitude:t.longitude},i="address"}let l=!0;this.geoService.getLatLonglocations(o,i).subscribe(e=>{var o,i;let r=[];if(e&&e.resourceSets&&e.resourceSets.length>0&&(null===(o=e.resourceSets[0].resources)||void 0===o?void 0:o.length)>0){if(r=e.resourceSets[0].resources,r&&r.length)if((null===(i=t.ufLocation)||void 0===i?void 0:i.trim())&&this.showServiceAddressInp){if(r[0]&&r[0].geocodePoints&&r[0].geocodePoints.length>0){let e=[];e=r[0].geocodePoints.find(e=>-1!=e.usageTypes.findIndex(e=>"display"===(null==e?void 0:e.toLowerCase()))),e&&Object.entries(e).length>0&&(e=r[0].geocodePoints[0]),console.log(r[0].geocodePoints[0].coordinates),n.deviceLocation.point.latitude=e.coordinates[0],n.deviceLocation.point.longitude=e.coordinates[1]}}else!this.showServiceAddressInp&&t.latitude&&t.longitude&&(n.deviceLocation.point.latitude=t.latitude,n.deviceLocation.point.longitude=t.longitude,n.deviceLocation.ufLocation=r&&r[0]&&r[0].name?r[0].name:"")}else if(r=[],!this.showServiceAddressInp)return l=!1,this.error=!0,void(this.errorInfo=this.language["The co-ordinates(Latitude/Longitude) are invalid. Please enter valid co-ordinates."])},e=>{},()=>{l&&this.save(n)})}save(e){if(this.loading=!0,this.isEditPage){delete this.data.ufLocation,delete this.data.latitude,delete this.data.longitude;const t=new i.WM;this.callHomeForm.get("region").value&&(this.data.region=this.callHomeForm.get("region").value),this.callHomeForm.get("networkGroupUuid").value&&(this.data.location=this.callHomeForm.get("networkGroupUuid").value),console.log(e),e=Object.assign(Object.assign({},this.data),e),console.log(e),this.http.put(`${n.N.API_BASE_URL}cnap/invmgr/callhome/actions/${this.id}`,e,{headers:t,responseType:"text"}).subscribe(e=>{console.log(e),this.loading=!1,this.goToList()},e=>{this.pageErrorHandle(e)})}else this.http.get(`${n.N.API_BASE_URL}cnap/invmgr/callhome/actions/${encodeURIComponent(e.id)}`).subscribe(t=>{this.validId=!1,this.errorInfo=`${e.id} already exists`,this.error=!0,this.loading=!1},t=>{this.http.post(`${n.N.API_BASE_URL}cnap/invmgr/callhome/actions`,e).subscribe(e=>{console.log(e),this.goToList()},e=>{this.pageErrorHandle(e)})})}pageErrorHandle(e){this.loading=!1,this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1,this.success=!1}showSuccess(e){this.closeAlert(),this.successInfo=e,this.success=!0}showError(e){this.closeAlert(),this.errorInfo=e,this.error=!0}getRecordbyId(e){this.loading=!0,this.http.get(`${n.N.API_BASE_URL}cnap/invmgr/callhome/actions/${encodeURIComponent(e)}`).subscribe(t=>{var o,i,n,l,r,a,s,d;if(console.log(t),this.data=t,this.callHomeForm.patchValue({deviceNameFormat:null==t?void 0:t.deviceNameFormat,id:null==t?void 0:t.id,distributedOltName:null==t?void 0:t.distributedOltName,ufLocation:null===(o=null==t?void 0:t.deviceLocation)||void 0===o?void 0:o.ufLocation,latitude:null===(l=null===(n=null===(i=null==t?void 0:t.deviceLocation)||void 0===i?void 0:i.point)||void 0===n?void 0:n.latitude)||void 0===l?void 0:l.toString(),longitude:null===(s=null===(a=null===(r=null==t?void 0:t.deviceLocation)||void 0===r?void 0:r.point)||void 0===a?void 0:a.longitude)||void 0===s?void 0:s.toString(),username:null==t?void 0:t.username,connectTimeoutSec:null==t?void 0:t.connectTimeoutSec}),this.showServiceAddressInp="GEO_COORDINATES"!=(null===(d=null==t?void 0:t.deviceLocation)||void 0===d?void 0:d.geoTypeUserSelection),this.regionsDataArray.forEach(e=>{e.name==this.data.region&&this.callHomeForm.get("region").setValue(e.id)}),this.loadLocationValue(e),t.networkGroupPath){let e=t.networkGroupPath.split("/");this.callHomeForm.get("region").setValue(this.regions[e[0]]),this.callHomeForm.get("networkGroupUuid").setValue(e[1]?e[1]:null)}this.loading=!1},e=>{this.pageErrorHandle(e)})}validateIp(e){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}validateMAc(e){return!!/^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$/.test(e)}validateIpSubnet(e){let t=e?e.split("/"):[];return!(!t||!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t[0]))&&this.checkSubnet(e)}checkSubnet(e){if(e){var t=!0;return e.split(",").forEach(e=>{t=t&&l.v4(e)}),t}return!1}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}getRegions(){this.loading=!0,this.regionsSubject=this.http.get(`${n.N.API_BASE_URL}nfa/regions/details?offset=0&limit=5000&excludeMgmtSystem=true`).subscribe(e=>{if(e.regions.sort(),e.regions=this.issueService.appendFqn(e.regions),this.regionsDataArray=[...this.regionsDataArray,...e.regions],console.log(this.regionsDataArray),e.regions){let t={};e.regions.forEach(e=>{t[e.name]=e.id}),this.regions=t;let o=this.route.snapshot.paramMap.get("id");o&&this.getRecordbyId(decodeURIComponent(o))}this.loading=!1},e=>{this.loading=!1,console.log(e)})}loadLocationValue(e){this.callHomeForm.get("networkGroupUuid").setValue(null),this.callHomeForm.get("region").value&&(this.locationsSubject=this.http.get(`${n.N.API_BASE_URL}nfa/locations?tenant=0&region=${this.callHomeForm.get("region").value}`).subscribe(e=>{var t;this.locationDataArray=e,(null===(t=this.data)||void 0===t?void 0:t.location)&&this.locationDataArray.forEach(e=>{var t;e.name!=(null===(t=this.data)||void 0===t?void 0:t.location)||this.callHomeForm.get("networkGroupUuid").setValue(e.id)})},e=>{}))}showServiceAddress(e){this.showServiceAddressInp=e,e?(this.callHomeForm.controls.latitude.setValidators(null),this.callHomeForm.controls.latitude.updateValueAndValidity(),this.callHomeForm.controls.longitude.setValidators(null),this.callHomeForm.controls.longitude.updateValueAndValidity()):(this.callHomeForm.controls.latitude.setValidators([X.bind(this)]),this.callHomeForm.controls.latitude.updateValueAndValidity(),this.callHomeForm.controls.longitude.setValidators([X.bind(this)]),this.callHomeForm.controls.longitude.updateValueAndValidity())}enforceMinMax(e,t){setTimeout(()=>{let o=this.workflowService.enforceMinMax(e);-1!=o&&("latitude"==t?this.data.latitude=o:"longitude"==t&&(this.data.longitude=o))},1e3)}clearErrors(){this.serviceAddressErrorMsg="",this.error=!1}get formControls(){return this.callHomeForm.controls}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(i.eN),a.Y36(s.t6),a.Y36(d.F0),a.Y36(d.gz),a.Y36(u.v),a.Y36(c.s),a.Y36(g.l),a.Y36(m.z),a.Y36(r.qu),a.Y36(h.Dx),a.Y36(p.v))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-add"]],decls:12,vars:4,consts:[[1,"position-relative"],["class","loader",4,"ngIf"],["role","alert","class","alert alert-warning",4,"ngIf"],[1,"container","app-call-home"],[1,"row"],["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],["class","col-md-6 px-0 mt-2",4,"ngIf"],[1,"col-md-6","text-right","px-0"],[1,"w-100"],[1,"close-icon","pointer",3,"click"],["src","assets/img/close-icon.svg","alt",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["role","alert",1,"alert","alert-warning"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"col-md-6","px-0","mt-2"],[3,"formGroup"],[1,"form-group","ccl-form"],["for","inputEmail4",1,"mand-field"],[1,"required-field"],["type","text","id","deviceNameFormat","name","deviceNameFormat","formControlName","deviceNameFormat","placeholder","%DashedMAC","trimSpace","",1,"form-control",3,"formValue"],["id","deviceNameFormat_input-error","class","errorMessage",4,"ngIf"],["type","IP-Address","id","id","name","id","formControlName","id","trimSpace","",1,"form-control",3,"placeholder","readonly","formValue"],["id","id_input-error","class","errorMessage",4,"ngIf"],["for","inputPassword4"],["name","region","formControlName","region","id","region",1,"selectboxwidth",3,"bindLabel","bindValue","items","clearable","searchable","placeholder","change"],["ng-option-tmp",""],["class","errorMessage",4,"ngIf"],["name","location","formControlName","networkGroupUuid","id","location",1,"selectboxwidth",3,"bindLabel","bindValue","items","clearable","searchable","placeholder"],[1,"form-check-inline"],[1,"form-check-label","cursor-pointer"],["type","radio","name","serviceAddressOpt","value","address","trimSpace","",1,"form-check-input",3,"checked","formValue","change"],["type","radio","name","serviceAddressOpt","value","latlang",1,"form-check-input",3,"checked","change"],["class","form-group ccl-form",4,"ngIf"],["for","inputAddress"],["type","text","id","distributedOltName","name","distributedOltName","formControlName","distributedOltName","trimSpace","",1,"form-control",3,"placeholder","readonly","formValue"],["for","inputAddress2"],[1,"error"],["type","text","id","username","name","username","formControlName","username","trimSpace","",1,"form-control",3,"placeholder","formValue"],["type","Password","id","password","name","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"type","placeholder"],[4,"ngIf"],[1,"col-12"],[1,"col-6"],["type","number","id","connectTimeOut","name","connectTimeOut","formControlName","connectTimeoutSec","min","5","max","90",1,"form-control",3,"placeholder"],[1,"col-6","text-left","pl-0"],[1,"text-capitalize","pt-1","m-0"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","id","add-call-home","data-dismiss","modal",1,"btn-default","transparant","px-3","m-2",3,"click"],["id","deviceNameFormat_input-error",1,"errorMessage"],["id","id_input-error",1,"errorMessage"],[3,"title"],[1,"errorMessage"],[1,"d-flex","flex-wrap","w-100"],[1,"col-6","pl-0"],["type","text","formControlName","latitude","name","latitude","min","-90.00","max","90.00","trimSpace","",3,"placeholder","formValue","keyup"],[1,"col-6","pl-0","pr-0"],["type","text","formControlName","longitude","name","longitude","min","-180.00","max","180.00","trimSpace","",3,"placeholder","formValue","keyup"],["type","text","id","ufLocation","name","ufLocation","formControlName","ufLocation","trimSpace","",1,"form-control",3,"placeholder","formValue"],[1,"see_pass",3,"ngClass","click"]],template:function(e,t){1&e&&(a.TgZ(0,"section"),a.TgZ(1,"div",0),a.YNc(2,A,5,1,"div",1),a.YNc(3,x,2,1,"div",2),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.YNc(6,b,6,1,"div",5),a.YNc(7,R,78,51,"div",6),a.TgZ(8,"div",7),a.TgZ(9,"div",8),a.TgZ(10,"span",9),a.NdJ("click",function(){return t.goToList()}),a._UZ(11,"img",10),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",t.loading),a.xp6(1),a.Q6J("ngIf",!t.hasWriteAccess),a.xp6(3),a.Q6J("ngIf",t.error),a.xp6(1),a.Q6J("ngIf",t.hasWriteAccess))},directives:[f.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,v.f,Z.w9,Z.Z2,r.wV,r.qQ,r.Fd,f.mk],styles:[".mand-field[_ngcontent-%COMP%]{position:relative}.mand-field[_ngcontent-%COMP%]   .required-field[_ngcontent-%COMP%]{color:#d9001b;font-size:20px;position:absolute;top:-4px;right:-11px}.see_pass[_ngcontent-%COMP%]{position:absolute;top:13px;right:20px}"]}),e})();function G(e){return(null==e?void 0:e.value)?null:{isrequired:!0}}function B(e){return(null==e?void 0:e.value)?this.validateIp(e.value)||this.validateIpSubnet(e.value)||this.validateMAc(e.value)?null:{invalidId:!0}:{isrequired:!0}}function z(e){var t;return(null==e?void 0:e.value)&&(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.trim())?null:{isrequired:!0}}function W(e){var t;return(null==e?void 0:e.value)&&(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.trim())?null:{isrequired:!0}}function X(e){var t;return this.showServiceAddressInp||(null==e?void 0:e.value)&&(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.trim())?!this.showServiceAddressInp&&isNaN(null==e?void 0:e.value)?{invalidValue:!0}:null:{isrequired:!0}}function K(e){return(null==e?void 0:e.value)&&!isNaN(null==e?void 0:e.value)&&((null==e?void 0:e.value)<5||(null==e?void 0:e.value)>90)?{invalidValue:!0}:null}},38640:function(e,t,o){o.d(t,{s:function(){return U}});var i=o(92340),n=o(79765),l=o(23771),r=o(37716),a=o(89097),s=o(91841),d=o(39895),u=o(49342),c=o(12664),g=o(7450),m=o(39075),h=o(3679),p=o(38583),f=o(86640);const v=["deleteModal"],Z=["deleteSuccessModal"];function A(e,t){if(1&e&&(r.TgZ(0,"div",22),r.TgZ(1,"div",23),r.TgZ(2,"div",24),r.TgZ(3,"span",25),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(4),r.Oqu(e.language.Loading)}}function x(e,t){if(1&e&&(r.TgZ(0,"div",26),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",e.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function b(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",27),r.TgZ(1,"button",28),r.NdJ("click",function(){return r.CHM(e),r.oxw().goToAdd()}),r._uU(2),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.hij(" ",e.language["Add Call Home"]," ")}}function C(e,t){if(1&e&&r._uU(0),2&e){const e=t.item,o=r.oxw();r.hij(" ",o.language[e.label]," ")}}function w(e,t){if(1&e&&r._uU(0),2&e){const e=t.item,o=r.oxw();r.hij(" ",o.language[e.label]," ")}}function T(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",29),r.TgZ(1,"span",30),r._UZ(2,"img",31),r.qZA(),r.TgZ(3,"button",32),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeAlert()}),r._UZ(4,"span"),r.qZA(),r.TgZ(5,"div",33),r._uU(6),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(6),r.Oqu(e.errorInfo)}}function q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"td",39),r.TgZ(1,"a",40),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(2).gotoEdit(t.id)}),r._UZ(2,"i",41),r.qZA(),r.TgZ(3,"a",42),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(2).delete(t.id)}),r._UZ(4,"i",43),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(3);r.xp6(1),r.s9C("title",e.language.Edit),r.xp6(2),r.s9C("title",e.language.Delete)}}function _(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r._UZ(9,"td",37),r.TgZ(10,"td"),r._uU(11),r.qZA(),r.TgZ(12,"td"),r._uU(13),r.qZA(),r.TgZ(14,"td"),r._uU(15,"******"),r.qZA(),r.TgZ(16,"td"),r._uU(17),r.qZA(),r.YNc(18,q,5,2,"td",38),r.qZA()),2&e){const e=t.$implicit,o=r.oxw(2);r.xp6(2),r.Oqu(e.id),r.xp6(2),r.Oqu(e.deviceNameFormat),r.xp6(2),r.Oqu(e.region?e.region:""),r.xp6(2),r.Oqu(e.location?e.location:""),r.xp6(1),r.Q6J("innerHTML",null==e?null:e.ui_modified_service_address_latlong,r.oJD),r.xp6(2),r.Oqu(e.distributedOltName),r.xp6(2),r.Oqu(e.username),r.xp6(4),r.Oqu((null==e?null:e.connectTimeoutSec)||""),r.xp6(1),r.Q6J("ngIf",o.hasWriteAccess)}}function O(e,t){if(1&e&&(r.TgZ(0,"div",34),r.TgZ(1,"table",35),r.TgZ(2,"thead"),r.TgZ(3,"tr"),r.TgZ(4,"th"),r._uU(5),r.qZA(),r.TgZ(6,"th"),r._uU(7),r.qZA(),r.TgZ(8,"th"),r._uU(9),r.qZA(),r.TgZ(10,"th"),r._uU(11),r.qZA(),r.TgZ(12,"th"),r._uU(13),r.qZA(),r.TgZ(14,"th"),r._uU(15),r.qZA(),r.TgZ(16,"th"),r._uU(17),r.qZA(),r.TgZ(18,"th"),r._uU(19),r.qZA(),r.TgZ(20,"th"),r._uU(21),r.qZA(),r._UZ(22,"th"),r.qZA(),r.qZA(),r.TgZ(23,"tbody"),r.YNc(24,_,19,9,"tr",36),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.Q6J("hidden",!e.dataAvailable),r.xp6(1),r.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.xp6(4),r.Oqu(e.language.Id),r.xp6(2),r.Oqu(e.language["Device Name Format"]),r.xp6(2),r.Oqu(e.language.Region),r.xp6(2),r.Oqu(e.language.Location),r.xp6(2),r.Oqu(e.language["Address/Coordinates"]),r.xp6(2),r.Oqu(e.language["Distributed OLT Name"]),r.xp6(2),r.Oqu(e.language.Username),r.xp6(2),r.Oqu(e.language.Password),r.xp6(2),r.Oqu(e.language["Connect Timeout"]),r.xp6(3),r.Q6J("ngForOf",e.list)}}function I(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",44),r.TgZ(1,"div",45),r._UZ(2,"img",46),r.qZA(),r.TgZ(3,"div",47),r.TgZ(4,"div",48),r.TgZ(5,"button",49),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r._UZ(6,"span",50),r.qZA(),r.qZA(),r.TgZ(7,"div",51),r.TgZ(8,"h3",52),r._uU(9),r.TgZ(10,"b"),r._uU(11),r.qZA(),r._uU(12," ? "),r.qZA(),r.qZA(),r.TgZ(13,"div",53),r.TgZ(14,"button",54),r.NdJ("click",function(){return r.CHM(e),r.oxw().doDelete()}),r._uU(15),r.qZA(),r.TgZ(16,"button",55),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r._uU(17),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(9),r.hij(" ",e.language["Are you sure you want to delete the call home"]," "),r.xp6(2),r.Oqu(e.deleteId),r.xp6(4),r.hij(" ",e.language.Delete_Call_Home," "),r.xp6(2),r.hij(" ",e.language.Close," ")}}function S(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",48),r._UZ(1,"h4",56),r.TgZ(2,"button",49),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r._UZ(3,"span",50),r.qZA(),r.qZA(),r.TgZ(4,"div",51),r.TgZ(5,"p"),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"div",57),r.TgZ(8,"button",58),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r._uU(9),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(6),r.Oqu(e.language["Deleted Successfully"]),r.xp6(3),r.hij(" ",e.language.Close," ")}}let U=(()=>{class e{constructor(e,t,o,i,l,r,a,s){this.sso=e,this.http=t,this.router=o,this.commonOrgService=i,this.dialogService=l,this.translateService=r,this.titleService=a,this.fb=s,this.errorInfo="",this.successInfo="",this.deleteId="",this.list=[],this.loading=!0,this.dataAvailable=!1,this.dtTrigger=new n.xQ,this.dtOptions={},this.isRerender=!1,this.ngbModalOptions={backdrop:"static"},this.deleteNgbModalOptions={backdrop:"static",windowClass:"alert-del-modal"},this.geoLocationOptions=[],this.filtersForm=this.fb.group({geoLocationInfo:""}),this.hasScopeAccess=!1,this.hasWriteAccess=!1,this.showTable=!1,this.frTable=this.translateService.fr;let d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.MODULE=this.sso.getRedirectModule(d),this.commonOrgService.currentPageAdder("call-home")}ngOnInit(){var e,t;let o=this.sso.getScopes();(null===(e=null==o?void 0:o["cloud.rbac.coc.operations.systemonboarding.axoscallhome.callhome"])||void 0===e?void 0:e.length)&&(this.hasScopeAccess=!0),-1!==(null===(t=null==o?void 0:o["cloud.rbac.coc.operations.systemonboarding.axoscallhome.callhome"])||void 0===t?void 0:t.indexOf("write"))&&(this.hasWriteAccess=!0),this.ORG_ID=this.sso.getOrganizationID(this.router.url),this.getList(),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.tableLanguageOptions(),this.rerender(),this.titleService.setTitle(`Call Home - AXOS Systems - ${this.language["System Onboarding"]} - ${this.language.Operations}  - ${this.language.Operations} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`Call Home - AXOS Systems - ${this.language["System Onboarding"]} - ${this.language.Operations}  - ${this.language.Operations} - ${this.language["Calix Cloud"]}`),this.tableLanguageOptions(),this.geoLocationOptions=[{name:"All",value:"",label:"All"},{name:"Available",value:"exist",label:"Available"},{name:"Unavailable",value:"missing",label:"Unavailable"}],this.sso.setPageAccess(!!this.hasScopeAccess)}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next(),this.tableLanguageOptions()})}getList(){this.showTable=!0,this.dtOptions={paging:!1,lengthChange:!1,searching:!1,ordering:!1};let e=`${i.N.API_BASE_URL}cnap/invmgr/callhome/actions`;this.filtersForm.get("geoLocationInfo").value&&(e+=`?geoLocationInfo=${this.filtersForm.get("geoLocationInfo").value}`),this.listObs=this.http.get(e).subscribe(e=>{let t=[];e&&e.forEach(e=>{var o,i,n,l,r,a,s,d,u,c,g,m,h,p,f,v,Z;if(e.networkGroupPath){let t=e.networkGroupPath.split("/");e.region=t[0],e.location=t[1]?t[1]:""}e.ui_modified_service_address_latlong=(null===(i=null===(o=null==e?void 0:e.deviceLocation)||void 0===o?void 0:o.point)||void 0===i?void 0:i.latitude)&&(null===(n=null==e?void 0:e.deviceLocation)||void 0===n?void 0:n.ufLocation)?`<b>${null===(l=null==e?void 0:e.deviceLocation)||void 0===l?void 0:l.ufLocation}</b> <br> (${null===(a=null===(r=null==e?void 0:e.deviceLocation)||void 0===r?void 0:r.point)||void 0===a?void 0:a.latitude}, ${null===(d=null===(s=null==e?void 0:e.deviceLocation)||void 0===s?void 0:s.point)||void 0===d?void 0:d.longitude})`:(null===(c=null===(u=null==e?void 0:e.deviceLocation)||void 0===u?void 0:u.point)||void 0===c?void 0:c.latitude)&&!(null===(g=null==e?void 0:e.deviceLocation)||void 0===g?void 0:g.ufLocation)?`${null===(h=null===(m=null==e?void 0:e.deviceLocation)||void 0===m?void 0:m.point)||void 0===h?void 0:h.latitude}, ${null===(f=null===(p=null==e?void 0:e.deviceLocation)||void 0===p?void 0:p.point)||void 0===f?void 0:f.longitude}`:(null===(v=null==e?void 0:e.deviceLocation)||void 0===v?void 0:v.ufLocation)?`<b>${null===(Z=null==e?void 0:e.deviceLocation)||void 0===Z?void 0:Z.ufLocation}</b>`:"",t.push(e)}),this.list=t,this.loading=!1,this.isRerender?this.rerender():(this.dtTrigger.next(),setTimeout(()=>{this.dataAvailable=!0},200)),this.isRerender=!0},e=>{this.pageErrorHandle(e),this.dataAvailable=!0})}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.loading=!1}closeAlert(){this.error=!1,this.success=!1}showSuccess(e){this.closeAlert(),this.successInfo=e,this.success=!0}showError(e){this.closeAlert(),this.errorInfo=e,this.error=!0}cancelDelete(){this.deleteId=""}goToAdd(){-1!==window.location.href.indexOf("/system-onboarding/")?this.router.navigate(["/cco/operations/system-onboarding/axos-callhome/callhome/add"]):-1!==window.location.href.indexOf("/systemAdministration/")?this.router.navigate(["/systemAdministration/cco-admin/call-home/add"]):this.router.navigate(["/organization-admin/call-home/add"])}gotoEdit(e){-1!==window.location.href.indexOf("/system-onboarding/")?this.router.navigate([`/cco/operations/system-onboarding/axos-callhome/callhome/edit/${encodeURIComponent(e)}`]):-1!==window.location.href.indexOf("/systemAdministration/")?this.router.navigate([`/systemAdministration/cco-admin/call-home/edit/${encodeURIComponent(e)}`]):this.router.navigate([`/organization-admin/call-home/edit/${encodeURIComponent(e)}`])}delete(e){this.deleteId=e,this.modalRef&&this.close(),this.modalRef=this.dialogService.open(this.deleteModal,this.deleteNgbModalOptions)}close(){this.modalRef.close()}doDelete(){this.http.delete(`${i.N.API_BASE_URL}cnap/invmgr/callhome/actions/${encodeURIComponent(this.deleteId)}`).subscribe(e=>{this.close(),this.modalRef=this.dialogService.open(this.deleteSuccessModal,this.ngbModalOptions),this.deleteId="",this.isRerender=!0,this.getList()},e=>{this.close(),this.pageErrorHandle(e)})}clearFilter(){this.filtersForm.patchValue({geoLocationInfo:""}),this.getList()}ngOnDestroy(){this.listObs&&this.listObs.unsubscribe(),this.languageSubject&&this.languageSubject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(a.t6),r.Y36(s.eN),r.Y36(d.F0),r.Y36(u.v),r.Y36(c.FF),r.Y36(g.s),r.Y36(m.Dx),r.Y36(h.qu))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-call-home"]],viewQuery:function(e,t){if(1&e&&(r.Gf(v,7),r.Gf(Z,7),r.Gf(l.G,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.deleteModal=e.first),r.iGM(e=r.CRH())&&(t.deleteSuccessModal=e.first),r.iGM(e=r.CRH())&&(t.dtElement=e.first)}},decls:28,vars:15,consts:[[1,"position-relative"],["class","loader",4,"ngIf"],["role","alert","class","alert alert-warning",4,"ngIf"],[1,"container"],["class","row mb-3 mt-2",4,"ngIf"],[1,"row"],[1,"filter-section","filter-elemnts","pt-2","col-md-12"],[3,"formGroup"],[1,"filter-wrapper","mb-1","row"],[1,"custom-selectbox","state-filter"],["for","Name",1,"col-form-label","select-font"],["bindValue","value","bindLabel","label","formControlName","geoLocationInfo",1,"selectboxwidth",3,"items","placeholder","clearable","searchable"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"custom-selectbox","min-w24p","d-flex","align-items-center"],[1,"d-inline-flex","mt-4","pt-3"],["type","button",1,"btn-default","primary","ml-3",3,"title","click"],["type","button",1,"btn-default","btn-dft","ml-3","btn-overflow-ellip",3,"title","click"],["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],["class","col-md-12 px-0 call-home-table overflow-auto",3,"hidden",4,"ngIf"],["deleteModal",""],["deleteSuccessModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["role","alert",1,"alert","alert-warning"],[1,"row","mb-3","mt-2"],["type","button","id","add-call-home",1,"btn-default","primary","px-3",3,"click"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex"],[1,"col-md-12","px-0","call-home-table","overflow-auto",3,"hidden"],["datatable","",1,"table","table-borderless",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"innerHTML"],["class","text-right mw-45",4,"ngIf"],[1,"text-right","mw-45"],["href","javascript:void(0)",1,"mr-2","cursor",3,"title","click"],["aria-hidden","true",1,"fas","fa-pencil-alt"],["href","javascript:void(0)",1,"ml-1","cursor",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash-alt"],[1,"d-flex","w-100","mt-3"],[1,"dfl-icon","pr-4"],["src","../../../../assets/img/warning-icon-36px.svg"],[1,"dflex-item"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"cco-secondary-title"],[1,"modal-footer","justify-content-start","px-0","pb-0"],["type","button",1,"btn","btn-primary","mr-2","py-0",3,"click"],["type","button",1,"btn-default","btn-dft","py-1",3,"click"],["id","modal-basic-title",1,"modal-title"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"section"),r.TgZ(1,"div",0),r.YNc(2,A,5,1,"div",1),r.YNc(3,x,2,1,"div",2),r.TgZ(4,"div",3),r.YNc(5,b,3,1,"div",4),r.TgZ(6,"div",5),r.TgZ(7,"div",6),r.TgZ(8,"form",7),r.TgZ(9,"div",8),r.TgZ(10,"div",9),r.TgZ(11,"label",10),r._uU(12),r.qZA(),r.TgZ(13,"ng-select",11),r.YNc(14,C,1,1,"ng-template",12),r.YNc(15,w,1,1,"ng-template",13),r.qZA(),r.qZA(),r.TgZ(16,"div",14),r.TgZ(17,"div",15),r.TgZ(18,"button",16),r.NdJ("click",function(){return t.getList()}),r._uU(19),r.qZA(),r.TgZ(20,"button",17),r.NdJ("click",function(){return t.clearFilter()}),r._uU(21),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(22,T,7,1,"div",18),r.YNc(23,O,25,13,"div",19),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(24,I,18,4,"ng-template",null,20,r.W1O),r.YNc(26,S,10,2,"ng-template",null,21,r.W1O)),2&e&&(r.xp6(2),r.Q6J("ngIf",t.loading),r.xp6(1),r.Q6J("ngIf",!t.hasScopeAccess),r.xp6(2),r.Q6J("ngIf",t.hasWriteAccess),r.xp6(3),r.Q6J("formGroup",t.filtersForm),r.xp6(4),r.Oqu(t.language["Address/Coordinate Info"]),r.xp6(1),r.s9C("placeholder",t.language["Address/Coordinate Info"]),r.Q6J("items",t.geoLocationOptions)("clearable",!1)("searchable",!0),r.xp6(5),r.s9C("title",t.language.run),r.xp6(1),r.hij(" ",t.language.run," "),r.xp6(1),r.s9C("title",t.language.Clear_Filters),r.xp6(1),r.hij(" ",t.language.Clear_Filters," "),r.xp6(1),r.Q6J("ngIf",t.error),r.xp6(1),r.Q6J("ngIf",t.showTable))},directives:[p.O5,h._Y,h.JL,h.sg,f.w9,h.JJ,h.u,f.bb,f.Z2,l.G,p.sg],styles:[".call-home-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400;font-size:16px}.call-home-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{display:none}.call-home-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#EBEAEF!important}.call-home-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .remove[_ngcontent-%COMP%]{display:block;cursor:pointer;float:right;position:relative;top:11px}.btn-default[_ngcontent-%COMP%]   .btn-dft[_ngcontent-%COMP%]{border:1px solid #EBEAEF!important;background-color:none!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 5px 15px #80808040;-webkit-box-shadow:0px 5px 15px rgba(128,128,128,.25);border-color:#0000000d!important;min-width:175px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{width:100%!important;border-radius:0!important;text-align:left;padding:10px 25px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:hover{background-color:#edf5ff!important}  .alert-del-modal .modal-content{background:#FFF9F5!important;border-radius:24px!important;padding:36px!important}.dfl-icon[_ngcontent-%COMP%]{width:72px}.dfl-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;margin-top:5px}.dflex-item[_ngcontent-%COMP%]{width:calc(100% - 72px)}.mw-45[_ngcontent-%COMP%]{min-width:45px}.custom-selectbox.state-filter[_ngcontent-%COMP%]{min-width:160px}"]}),e})()}}]);