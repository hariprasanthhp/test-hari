"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[1703],{91703:function(e,t,r){r.d(t,{z:function(){return p}});var i=r(40205),a=r(25917),s=r(5304),n=r(88002),l=r(92340),o=r(16738),h=r(37716),g=r(7450),u=r(48483),d=r(91841),c=r(89097),f=r(39895);let p=(()=>{class e{constructor(e,t,r,i,a){this.translateService=e,this.dateUtils=t,this.httpClient=r,this.ssoAuthService=i,this.activeRoute=a,this.baseURL=l.N.API_BASE_URL,this.previousUrl="",this.isReport=!1,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.regions=this.baseURL+"nfa/regions?tenant=0",this.locations=this.baseURL+"nfa/locations?tenant=0",this.systems=this.baseURL+"nfa/systems?tenant=0",this.reports=this.baseURL+"health/reports/",this.ont=this.baseURL+"nfa/onts/count?tenant=0&reportType=DEVICE_CHECKED_IN&type=pon",this.ontBipError=this.baseURL+"health/reports/biperror/thresholdexceededcount?tenant=0&granularity=15min&direction=both&groupBy=ont",this.ontlowlightcount=this.baseURL+"health/reports/lowlightlevelcount?tenant=0&granularity=15min&groupBy=ont",this.Interface=this.baseURL+"nfa/interfaces/names?",this.OntNames=this.baseURL+"nfa/onts/names?"}ontBipErrornew(e){return this.httpClient.get(`${l.N.API_BASE_URL}health/reports/biperror/count?${e+"&countBy=ont"}`).pipe((0,s.K)(this.handleError))}GetBipError(e){return this.httpClient.get(` ${this.reports+"/biperror?"}${e}`).pipe((0,s.K)(this.handleError))}ontname(e){return this.httpClient.get(`${l.N.API_BASE_URL}nfa/onts?fsanMac=${e}`).pipe((0,s.K)(this.handleError))}getfsan(){return this.httpClient.get(`${this.regions}`).pipe((0,s.K)(this.handleError))}timeseries(e,t){if("pon"==t)return this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=usOct&field=dsOct&field=rxPkt&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr&field=rxErrRate&field=txErrRate&field=rxDisRate&field=txDisRate&field=dsRate&field=usRate&interfaceCategory=pon`).pipe((0,s.K)(this.handleError));if("ont"==t)return this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=dsBipErr&field=usBipErr&field=usFecTotCodeWord&field=dsFecTotCodeWord&field=upTime&field=rxOptPwr&field=neOptSignalLvl&field=txOptLvl&field=usFecCor&field=dsFecCor&field=usFecUncorCodeWord&field=dsFecUncorCodeWord`).pipe((0,s.K)(this.handleError));if("ethernet"==t||"ae"==t){let r="&field=oct&field=pkt&field=rxPkt&field=rxOct&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr&field=txOct&field=rxErrRate&field=txErrRate&field=rxDisRate&field=txDisRate&field=dsRate&field=usRate";return"ae"==t?(r+="&format=grouped&groupBy=system&groupBy=interface&groupBy=ont&interfaceCategory=ae",this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}${r}`).pipe((0,s.K)(this.handleError))):(r+="&interfaceCategory=ethernet",this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}${r}`).pipe((0,s.K)(this.handleError)))}if("dsl"==t){let t="&field=rxPkt&field=rxOct&field=rxDis&field=rxErr&field=txPkt&field=txOct&field=usCurRate&field=dsCurRate&field=usAttRate&field=dsAttRate&field=usSnrMargin&field=dsSnrMargin&field=usTargetSnr&field=dsTargetSnr&field=upTime&field=retrainCnt&field=usRate&field=dsRate&field=rxDisRate&field=rxErrRate";return t+="&interfaceCategory=dsl",this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}${t}`).pipe((0,s.K)(this.handleError))}return"ae_General"==t?this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=oct&field=pkt&field=rxPkt&field=rxOct&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr&field=txOct&field=rxErrRate&field=txErrRate&field=rxDisRate&field=txDisRate&field=dsRate&field=usRate&interfaceCategory=ae&aeMgmt=true&format=grouped&groupBy=region&groupBy=location&groupBy=system&groupBy=interface&groupBy=ont`).pipe((0,s.K)(this.handleError)):void 0}timeseriesBipError(e,t){return"pon"==t?this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=dsBipErr&field=usBipErr`).pipe((0,s.K)(this.handleError)):"ont"==t?this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=dsBer&field=usBer`).pipe((0,s.K)(this.handleError)):void 0}GetInterfaces(e,t){return this.httpClient.get(`${this.Interface}${e}`).pipe((0,n.U)(e=>(e.sort((e,t)=>(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!0})),e)),(0,s.K)(this.handleError))}GetOntNames(e){return this.httpClient.get(`${this.OntNames}${e}`)}pontimeseries(e){return this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=usOct&field=dsOct&field=rxPkt&field=rxDis&field=rxErr&field=txPkt&field=txDis&field=txErr`).pipe((0,s.K)(this.handleError))}ethernertimeseries(e){return this.httpClient.get(`${this.baseURL+"/health/timeseries?"}${e}&field=oct&field=pkt&field=rxPkt`).pipe((0,s.K)(this.handleError))}Lowlightlevelcount(e){return this.httpClient.get(`${this.reports+"/lowlightlevelcount?"}${e}`).pipe((0,s.K)(this.handleError))}getRegions(){return this.httpClient.get(`${this.regions}`).pipe((0,s.K)(this.handleError))}getLocations(e){return this.httpClient.get(`${this.locations}${"&region="+e}`).pipe((0,n.U)(e=>(e.sort((e,t)=>(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})),e)),(0,s.K)(this.handleError))}getSystems(e,t,r){let i="&location="+t;return r&&(i+=`&interfaceCategory=${r}`),this.httpClient.get(`${this.systems}${"&region="+e}${i}`).pipe((0,n.U)(e=>(e.sort((e,t)=>(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})),e)),(0,s.K)(this.handleError))}handleError(e){return(0,i._)(e)}getOnt(){return this.httpClient.get(`${this.ont}`)}getOntBipError(e,t){return this.httpClient.get(`${this.ontBipError}&startTime=${e}&endTime=${t}`).pipe((0,s.K)(this.handleError))}getLowlightlevelcount(e,t){return this.httpClient.get(`${this.ontlowlightcount}&startTime=${e}&endTime=${t}`).pipe((0,s.K)(this.handleError))}formatTodayDate(){var e=new Date,t=""+(e.getMonth()+1),r=""+e.getDate(),i=e.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[i,t,r].join("-")}chartDataFraming(e,t,r,i,a){let s=[],n="fsan"==r?"ont":r;if(r="ont"==r?"fsan":r,"Packet Dropped"==t)for(var l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[this.language["Received Discarded Packets"]]:e[l].rxDis?e[l].rxDis:0,[this.language["Transmitted Discarded Packets"]]:e[l].txDis?e[l].txDis:0})}else if("ethernet_packet"==t||"ae_packet"==t)for(l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[this.language["Received Error Packets"]]:e[l].rxErr?e[l].rxErr:0,[this.language["Transmitted Error Packets"]]:e[l].txErr?e[l].txErr:0})}else if("PON Port Courts"==t||"PON Interface Count"==t||"ae_threshold"==t){let t=this.language.Upstream,i=this.language.Downstream;for(l=0;l<(null==e?void 0:e.length);l++){let a=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?a+" (Deleted)":a,[t]:e[l].usUtilExcCnt?e[l].usUtilExcCnt:0,[i]:e[l].dsUtilExcCnt?e[l].dsUtilExcCnt:0})}}else if("DSL"===a&&(t.includes("Threshold")||t.includes("Not At Attainable")||t.includes("Not At Target"))){let i=this.language.Upstream,a=this.language.Downstream;if(t.includes("Not At Attainable"))for(l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[i]:e[l].usCurRateBelowThresCnt?e[l].usCurRateBelowThresCnt:0,[a]:e[l].dsCurRateBelowThresCnt?e[l].dsCurRateBelowThresCnt:0})}else if(t.includes("Not At Target"))for(l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[i]:e[l].usSnrBelowThresCnt?e[l].usSnrBelowThresCnt:0,[a]:e[l].dsSnrBelowThresCnt?e[l].dsSnrBelowThresCnt:0})}else for(l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[i]:e[l].usUtilExcCnt?e[l].usUtilExcCnt:0,[a]:e[l].dsUtilExcCnt?e[l].dsUtilExcCnt:0})}}else if("PON Error Rate"==t||"BIP Error Rate"==t){let t;for(t=this.activeRoute.url.includes("health/ont")?this.language["BIP Error Count"]:this.language["BIP Error Interfaces"],l=0;l<(null==e?void 0:e.length);l++){let i=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?i+" (Deleted)":i,[t]:e[l].count?e[l].count:0})}}else if("low light"==t)for(l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[this.language["Optical Power Low Threshold Count"]]:e[l].count?e[l].count:0})}else if("systemUtilization"==t)for(l=0;l<(null==e?void 0:e.length);l++){let t=e[l][r]?e[l][r]:"other";s.push({[this.language[n]]:e[l].deleted?t+" (Deleted)":t,[this.language.Upstream]:e[l].usUtilizationPercent?e[l].usUtilizationPercent:0,[this.language.Downstream]:e[l].dsUtilizationPercent?e[l].dsUtilizationPercent:0})}return s.length||s.push({[this.language["No Data Available"]]:" "}),s}stackedAreaChartOptions(){const e=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"area"},title:{text:"Stacked Area Chart"},colors:["#338107","#fbe936","#fa423b"],xAxis:{labels:{rotation:-45,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}},categories:["09/25 12:15","09/25 20:15","09/26 04:15","09/26 12:15","09/26 20:15","09/27 04:15","09/27 12:15","09/27 20:15","09/28 04:15","09/28 12:15","09/28 20:15","09/29 04:15","09/29 12:15","09/29 20:15","09/30 04:15","09/30 12:15","09/30 20:15","10/01 04:15","10/01 12:15","10/01 20:15","10/02 04:15"],tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{min:0,max:100,tickInterval:25,title:{text:"Percentage(%)"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.percentage:.1f}%"},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){console.log("Category: "+this.category+", Series:"+this.series.name+", value: "+this.y)}}}},area:{stacking:"normal",lineWidth:1,marker:{enabled:!1,symbol:"circle",radius:2,states:{hover:{enabled:!0}},lineWidth:1,lineColor:"#666666"}}},series:[{name:"Free",data:[100,100,100,100,100,100,null,null,null,null,null,null,100,100,100,100,100,100,null,null,null]},{name:"Used",data:[5,4,6,5,4,9,null,null,null,null,null,null,4,5,2,4,5,7,null,null,null]},{name:"Interference",data:[20,25,18,25,22,24,null,null,null,null,null,null,20,22,25,21,23,18,null,null,null]}]});return(0,a.of)(e)}duplicateDataHandle(e,t,r){if(null==e?void 0:e.length){let i=0,a=[],s=[];e.forEach(e=>{i+=1,(!e[t]||"       "==e[t])&&(e[t]="Other"),-1===a.indexOf(e[t])?a.push(e[t]):s.push(e[t])}),e.forEach(e=>{s.forEach(i=>{e[t]===i&&(e[t]=e[t]+"_"+e[r].slice(0,5))})})}return e}generateDownloadName(e,t,r){let i;if(i="ont"==t||"fsan"==t?"ONT":t.charAt(0).toUpperCase()+t.slice(1),"PON Port Courts"==e||"PON Interface Count"==e)switch(i){case"Region":e=this.language[r]+" "+this.language["Threshold By Region"];break;case"Location":e=this.language[r]+" "+this.language["Threshold By Location"];break;case"System":e=this.language[r]+" "+this.language["Threshold By System"];break;case"Interface":e=this.language[r]+" "+this.language["Threshold By Interface"];break;case"ONT":e=this.language[r]+" "+this.language["Threshold Exceeded By Ont"]}else if("Packet Dropped"==e)switch(i){case"Region":e=this.language[r]+" "+this.language.HPacketDroppedByRegion;break;case"Location":e=this.language[r]+" "+this.language.HPacketDiscardsByLocation;break;case"System":e=this.language[r]+" "+this.language.HPacketDroppedBySystem;break;case"Interface":e=this.language[r]+" "+this.language.HPacketDroppedByInterface;break;case"ONT":e=this.language[r]+" "+this.language.HPacketDroppedByOnt}else if("low light"==e)switch(i){case"Region":e=this.language[r]+" "+this.language.HLowLightLevelbyregion;break;case"Location":e=this.language[r]+" "+this.language.HLowLightLevelByLocation;break;case"System":e=this.language[r]+" "+this.language.HLowLightLevelBySystem;break;case"Interface":e=this.language[r]+" "+this.language.HLowLightLevelByInterface;break;case"ONT":e=this.language[r]+" "+this.language["Low Level Light By Ont"]}else if("systemUtilization"==e)e=this.language[r]+" "+this.language.HUtilizationByInterface;else if("BIP Error Rate"==e&&"PON"==r)if("Interface"==i)e=this.language[r]+" "+this.language["Interfaces with BIP Errors"];else switch(i){case"Region":e=this.language[r]+" "+this.language["BIP Error Interfaces By Region"];break;case"Location":e=this.language[r]+" "+this.language["BIP Error Interfaces By Location"];break;case"System":e=this.language[r]+" "+this.language["BIP Error Interfaces By System"];break;case"Interface":e=this.language[r]+" "+this.language["Interfaces with BIP Errors"]}else if("BIP Error Rate"==e||"PON Error Rate"==e)switch(i){case"Region":e=this.language[r]+" "+this.language.HBIPErrorbyregion;break;case"Location":e=this.language[r]+" "+this.language.HBIPErrorByLocation;break;case"System":e=this.language[r]+" "+this.language.HBIPErrorBySystem;break;case"Interface":e=this.language[r]+" "+this.language.HBIPErrorByInterface;break;case"ONT":e=this.language[r]+" "+this.language["Bip Error By Ont"]}else e=this.language[r]+" "+this.language[e];let a=e.split(" ").join("_"),s=((new Date).getTime(),"");return this.formatTodayDate()&&this.formatTodayDate(),s+=a,s}getGranularity(e,t){t=this.dateUtils.getCurrentUtcTime(),console.log(t);let r="24hour",i=o(1e3*t).diff(o(1e3*e),"days")+1;return r=i<=30?"15min":i>30&&i<=90?"1hour":i>90&&i<=182?"24hour":"1month",console.log(i),r}chart_color(e,t,r="first"){return(null==e?void 0:e.deleted)?l.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS[r]:l.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS[r]}toolip_color(e){return e==l.N.OPERATIONS.HEALTH.DELETED_TRANSPARENT.first?l.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS.first:e==l.N.OPERATIONS.HEALTH.DELETED_TRANSPARENT.second?l.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS.second:e==l.N.OPERATIONS.HEALTH.BAR_TRANSPARENT.first?l.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS.first:e==l.N.OPERATIONS.HEALTH.BAR_TRANSPARENT.second?l.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS.second:e}totalcoutsort(e,t,r,i="Region"){let a=[],s=[],n=i.toLowerCase();return e.sort("interface"==n?(e,t)=>(e[n]||"").toString().localeCompare((t[n]||"").toString(),"en",{numeric:!0}):(e,t)=>(e[n]||"").toString().localeCompare((t[n]||"").toString(),"en",{numeric:!1})),e.forEach(e=>{e[t]||e[r]||0==e[t]||0==e[r]?a.push(e):s.push(e)}),a.sort(function(e,i){return(i[t]?i[t]:0)+(i[r]?i[r]:0)-((e[t]?e[t]:0)+(e[r]?e[r]:0))}),[...a,...s]}totalcountsort(e,t,r,i,a,s,n="Region"){let l=[],o=[],h=n.toLowerCase();return e.sort("interface"==h?(e,t)=>(e[h]||"").toString().localeCompare((t[h]||"").toString(),"en",{numeric:!0}):(e,t)=>(e[h]||"").toString().localeCompare((t[h]||"").toString(),"en",{numeric:!1})),e.forEach(e=>{e[t]||e[r]||e[i]||e[a]||e[s]||0==e[t]||0==e[r]||0==e[i]||0==e[a]||0==e[s]?l.push(e):o.push(e)}),l.sort(function(e,n){return(n[t]?n[t]:0)+(n[r]?n[r]:0)+(n[i]?n[i]:0)+(n[a]?n[a]:0)+(n[s]?n[s]:0)-((e[t]?e[t]:0)+(e[r]?e[r]:0)+(e[i]?e[i]:0)+(e[a]?e[a]:0)+(e[s]?e[s]:0))}),[...l,...o]}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(g.s),h.LFG(u.s),h.LFG(d.eN),h.LFG(c.t6),h.LFG(f.F0))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);