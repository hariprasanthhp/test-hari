"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[10],{14813:function(e,t,i){i.d(t,{k:function(){return u}});var s=i(91841),o=i(79765),r=i(26215),n=i(40205),a=i(5304),l=i(92340),c=i(37716),d=i(38048);let u=(()=>{class e{constructor(e,t){this.http=e,this.sso=t,this.metaData={},this.staticGroupSubject=new o.xQ,this.showCountStatus=new r.X(!1),this.showCountStatus$=this.showCountStatus.asObservable(),this.removeNull=e=>(Object.keys(e).forEach(t=>e[t]&&"object"==typeof e[t]&&this.removeNull(e[t])||(""===e[t]||null===e[t])&&delete e[t]),e)}updateServiceData(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.FOUNDATION_BASE_URL}subscriber-systems/rg-service?${s}`;return t&&t.sn?o=`${o}systemId=${t.sn}`:t&&t.subscriberId&&(o=`${o}subscriberId=${t.subscriberId}`),this.http.put(o,i)}updateEdgeSuitsData(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites?${s}`;return t&&t.sn?o=`${o}systemId=${t.sn}`:t&&t.subscriberId&&(o=`${o}subscriberId=${t.subscriberId}`),this.http.put(o,i)}updateEdgeSuitsDataCOC(e,t,i){const s=this.sso.getOrg(e);return this.http.put(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites?${s}subscriberId=${t}`,i)}performSearch(e,t,i,o){const r=(new s.LE).set("filter",t||"").set("pageNumber",i).set("pageSize",o);return this.http.get(`${l.N.SUPPORT_URL}/subscriber-search`,{params:r}).pipe((0,a.K)(this.handleError))}handleError(e){return(0,n._)(e)}showCount(e){this.showCountStatus.next(e)}swapNewSystem(e,t){const i=this.sso.getOrg(e);return this.http.put(`${l.N.SUPPORT_URL}/device/swap?${i}isReloadSSID=true`,t)}updateNewSystem(e,t,i=!1){const s=this.sso.getOrg(e);let o=`${l.N.SUPPORT_URL}/device/swap?${s}`;return i&&(t.skipSSIDLoad=!0),this.http.put(o,t)}AddSystemSubscriberData(e,t){const i=this.sso.getOrg(e);return this.http.post(`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${i}`,t)}UpdateSystemSubscriberData(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${s}`;return i&&i.sn?o=`${o}systemId=${i.sn}`:i&&i.subscriberId&&(o=`${o}subscriberId=${i.subscriberId}`),this.http.put(o,t)}disassociateDevice(e,t){const i=this.sso.getOrg(e);return this.http.put(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/disassociate?${i}`,t)}deleteAndDisassociatedDevice(e,t){const i=this.sso.getOrg(e);return this.http.delete(`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${i}systemId=${t}`)}deleteWarningSubscriber(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/servify-contract?${i}subscriberId=${t}`)}deleteSubscriber(e,t){const i=this.sso.getOrg(t);return this.http.delete(`${l.N.SUPPORT_URL}/subscriber/${e}?${i}`)}getSubscribersSystemList(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${s}`;return t&&t.sn?o=`${o}systemId=${t.sn}`:t&&t.subscriberId&&(o=`${o}subscriberId=${t.subscriberId}`),i&&(o=`${o}&includeEnabledStatus=true`),this.http.get(o)}getSystemStatusData(e,t,i){const s=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${s}systemId=${t}&includeEnabledStatus=true`)}getedgesuiteData(e,t,i){const s=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${s}subscriberId=${t}&includeEnabledStatus=true`)}AddSubscriberData(e,t){const i=this.sso.getOrg(e);return this.http.post(`${l.N.SUPPORT_URL}/subscriber?${i}`,t)}UpdateSubscriberData(e,t,i){const s=this.sso.getOrg(e);return this.http.put(`${l.N.SUPPORT_URL}/subscriber/${i}?${s}`,t)}GetSubscriberData(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/subscriber/${t}?${i}queryByLocationId=false`)}UpdateSystemInfo(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${s}`;return i&&i.sn&&(o=`${o}systemId=${i.sn}`),this.http.put(o,t)}callRestApi(e,t){return this.http.get(`${e}`).pipe((0,a.K)(this.handleError))}getDeviceGroupCount(e){const t=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/netops-device/group/count?${t}`)}getDeviceGoupList(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/netops-device/group?${i}skip=0&limit=${t}`)}getRadioStatus(e,t){return this.sso.getOrg(e),this.http.get(`${l.N.SUPPORT_URL}/device/${e}/${t}/wifi/radioSummaries`)}getProvisionrecord(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/subscriber-provisioning/provisioning-record?${i}deviceId=${t}`)}updateStaticGroupsData(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.FOUNDATION_BASE_URL}subscriber-systems/static-group-memberships?${s}`;return t&&t.sn?o=`${o}systemId=${t.sn}`:t&&t.subscriberId&&(o=`${o}subscriberId=${t.subscriberId}`),this.http.put(o,i)}getModeFeature(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.CALIX_URL}/support/device/feature-properties?${i}modelName=${t}`)}getSearchResult(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/subscriber-search?${i}filter=device:${t}&pageNumber=1&pageSize=1`)}getDeviceInfo(e,t){return this.sso.getOrg(e),this.http.get(`${l.N.SUPPORT_URL}/device/${e}/${t}/deviceinfo`)}checkSwapStatus(e,t){return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/replacing?orgId=${t}&systemId=${e}`)}gerArloSmartData(e){return this.http.get(`${l.N.FOUNDATION_BASE_URL}feature/arlo/devices?userId=${e}`)}deleteArloSmartData(e,t){return this.http.delete(`${l.N.FOUNDATION_BASE_URL}feature/arlo/device?userId=${e}&deviceId=${t}`)}getDialPlan(e){const t=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/netops-dp/dial-plan?${t}`)}getRegIdInstance(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/device/deviceInfo?${i}registrationId=${t}`)}fetchMetaData(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.API_BASE_URL}calix/support/device/feature-properties?${i}serialNumber=${t}`)}getMetaData(e){return!!this.metaData.hasOwnProperty(e)&&this.metaData[e]}setMetaData(e,t,i=!1){i?this.metaData={}:this.metaData[e]=t}getServicesOfSubscriber(e,t){return this.http.get(`${l.N.FOUNDATION_SERVICES_URL}subscribers/${t}/services?summaryOnly=true`)}associateDevice(e,t){const i=this.sso.getOrg(e);return this.http.put(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/associate?${i}`,t)}getDeleteAndFactoryreset(e){const t=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/org-config/delete-and-factory-reset?${t}`)}DeleteAndFactoryreset(e,t){const i=this.sso.getOrg(e);return this.http.put(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/org-config/delete-and-factory-reset?${i}`,t)}getCommandIqOfSubscriber(e,t,i){const s=this.sso.getOrg(e);let o=`${l.N.SUPPORT_URL}/subscriber-summary/${t}?${s}`;return i&&(o=`${o}ontSerialNumber=${i}`),this.http.get(o)}getCommandIqOfSystem(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/unassociated-device-summary?${i}serialNumber=${t}`)}saveSubscriberSystem(e){return this.http.post(`${l.N.SUPPORT_URL}/subscriber-provisioning/provisioning-record`,e)}getStaticGroupData(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}/subscriber-systems/static-group-memberships?${i}systemId=${t}`)}getEdgeSuitesData(e,t){const i=this.sso.getOrg(e);let s=`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites?${i}`;return t&&t.sn?s=`${s}systemId=${t.sn}`:t&&t.subscriberId&&(s=`${s}subscriberId=${t.subscriberId}`),this.http.get(s)}updateSystemServiceData(e,t,i){const s=this.sso.getOrg(e);return this.http.put(`${l.N.FOUNDATION_BASE_URL}subscriber-systems?${s}systemId=${t}`,i)}getDeviceGoupCount(e){const t=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/netops-device/group/count?${t}`)}getDetailedSubscriberServices(e){return this.http.get(`${l.N.FOUNDATION_SERVICES_URL}subscribers/${e}?includeDeviceData=false&includeDecommissionedDevices=false`)}getSubscriberSystemList(e){return this.http.get(`${l.N.FOUNDATION_SERVICES_URL}subscribers/${e}/devices`)}addSubscriberSystemList(e,t){return this.http.post(`${l.N.FOUNDATION_SERVICES_URL}subscribers/${e}/devices?deviceId=${t}`,{})}getBWProfile(e){const t=this.sso.getOrg(e);return this.http.get(`${l.N.SUPPORT_URL}/netops-config/configuration-profile?${t}`)}updateEnableApp(e,t,i){const s=this.sso.getOrg(e);return this.http.put(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/iq-suites/container?${s}systemId=${t.sn}`,i)}getRadiosummary(e,t){return this.sso.getOrg(e),this.http.get(`${l.N.SUPPORT_URL}/device/${e}/${t}/wifi/radioSummaries`)}getSubscriberServices(e){return this.http.get(`${l.N.FOUNDATION_SERVICES_URL}subscribers/${e}/services`)}getPasspointStatus(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/mycommunityiq/passpoint?${i}systemId=${t}`)}getsmallBizStatus(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/smallbiziq?${i}systemId=${t}`)}getsmallBizStatusCOC(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/smallbiziq?${i}subscriberId=${t}`)}getPasspointcocStatus(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/mycommunityiq/passpoint?${i}subscriberId=${t}`)}deleteCommunitySubscriber(e,t){const i=this.sso.getOrg(e);return this.http.get(`${l.N.FOUNDATION_BASE_URL}subscriber-systems/edge-suites/mycommunityiq/subscriber?${i}subscriberId=${t}`)}getONTIpaddress(e,t){return this.http.get(`${l.N.CMC_API_BASE_URL}/search/prioritySearch?filter=${t}`).pipe((0,a.K)(this.handleError))}getONTIpAddresswithAggGroup(e,t){return this.sso.getOrg(t),this.http.get(`${l.N.faAdminCorrelatorURL}flowendpoint?agggroup=${e}&assigned=false&count=false&mappedby=NONE&orderby=name&org-id=${t}&pagenumber=0&pagesize=1000&sortdirection=asc`).pipe((0,a.K)(this.handleError))}getOntDetails(e,t){return this.http.get(`${l.N.API_BASE_URL}cnap/invmgr/devices/${e}/state/details?onuid=${t}`)}getAsmData(e,t,i){return this.http.get(i?`${l.N.API_BASE_URL}cnap/invmgr/subscriber/${e}?fsan=${t}`:`${l.N.API_BASE_URL}cnap/invmgr/subscriber/${e}?ont-interface-name=${t}`)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(s.eN),c.LFG(d.t6))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},90010:function(e,t,i){i.r(t),i.d(t,{MyCommunityIqModule:function(){return Ne}});var s=i(38583),o=i(39895),r=i(46916),n=i(3679),a=i(23771),l=i(79765),c=i(37716),d=i(7450),u=i(39075),g=i(38048),m=i(12664),p=i(49342),h=i(86451),f=i(43721),b=i(86640),Z=i(96718);const y=["deleteModal"],v=["microSiteModal"],_=["verifyMicrositeModel"];function T(e,t){if(1&e&&(c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"div",14),c.TgZ(3,"span",15),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(4),c.Oqu(e.language.Loading)}}function A(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",16),c.TgZ(1,"span",17),c._UZ(2,"img",18),c.qZA(),c.TgZ(3,"button",19),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeAlert()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",20),c.qZA()}if(2&e){const e=c.oxw();c.xp6(5),c.Q6J("innerHtml",e.language[e.errorInfo]||e.errorInfo,c.oJD)}}function x(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"span",22),c._UZ(2,"img",23),c.qZA(),c.TgZ(3,"button",19),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeAlert()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",20),c.qZA()}if(2&e){const e=c.oxw();c.xp6(5),c.Q6J("innerHtml",e.language[e.successInfo]||e.successInfo,c.oJD)}}function C(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"span",25),c.NdJ("click",function(){return c.CHM(e),c.oxw().GetMicrosites()}),c._UZ(2,"img",26),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.s9C("title",e.language.Refresh)}}function S(e,t){if(1&e&&(c.TgZ(0,"div",43),c._UZ(1,"span",44),c._uU(2),c.qZA()),2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.xp6(2),c.hij(" ",t.language[e.status],"")}}function q(e,t){if(1&e&&(c.TgZ(0,"div",45),c._UZ(1,"span",44),c._uU(2),c.qZA()),2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.xp6(2),c.hij(" ",t.language[e.status],"")}}function M(e,t){if(1&e&&(c.TgZ(0,"div",46),c._UZ(1,"span",44),c._uU(2),c.qZA()),2&e){const e=c.oxw().$implicit,t=c.oxw(2);c.xp6(2),c.hij(" ",t.language[e.status],"")}}function O(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",32),c._uU(2),c.qZA(),c.TgZ(3,"td",32),c._uU(4),c.qZA(),c.TgZ(5,"td",32),c._uU(6),c.qZA(),c.TgZ(7,"td",32),c._uU(8),c.qZA(),c.TgZ(9,"td",32),c._uU(10),c.qZA(),c.TgZ(11,"td",32),c.YNc(12,S,3,1,"div",33),c.YNc(13,q,3,1,"div",34),c.YNc(14,M,3,1,"div",35),c.qZA(),c.TgZ(15,"td",36),c.TgZ(16,"div",37),c.TgZ(17,"button",38),c.TgZ(18,"span"),c._uU(19,"..."),c.qZA(),c.qZA(),c.TgZ(20,"div",39),c.TgZ(21,"button",40),c.NdJ("click",function(){const t=c.CHM(e),i=t.$implicit,s=t.index,o=c.oxw(2);return o.editMicroSite(i,s),o.buttonText="Bsp_Update_Microsite "}),c._uU(22),c.qZA(),c.TgZ(23,"button",41),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).EditMicrositePreview(t)}),c._uU(24),c.qZA(),c.TgZ(25,"button",42),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).WarToDelMicrosite(t)}),c._uU(26),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(2);c.xp6(2),c.Oqu(e.communityName),c.xp6(2),c.Oqu(e.communityDesc),c.xp6(2),c.AsE(" ",e.isPredefinedCommunity?i.language["Bsp_Add_Micro__Community_Pre-Defined"]:i.language.Bsp_Add_Micro__Branding_Custom,", ",e.communityType?i.language[e.communityType]:e.communityType,""),c.xp6(2),c.Oqu(e.brandingType?i.language[e.brandingType]:e.brandingType),c.xp6(2),c.Oqu(i.language[e.restrictionLevel]),c.xp6(2),c.Q6J("ngIf","READY"===e.status),c.xp6(1),c.Q6J("ngIf","CREATING"===e.status),c.xp6(1),c.Q6J("ngIf","ERROR"===e.status),c.xp6(7),c.s9C("title",i.language.Edit),c.xp6(1),c.Oqu(i.language.Edit),c.xp6(2),c.Oqu(i.language.Preview),c.xp6(1),c.s9C("title",i.language.delete),c.xp6(1),c.Oqu(i.language.Delete)}}function N(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"table",27,28),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"th",29),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(5),c.qZA(),c.TgZ(6,"th",29),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(7),c.qZA(),c.TgZ(8,"th",29),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(9),c.qZA(),c.TgZ(10,"th",29),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(11),c.qZA(),c.TgZ(12,"th",29),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(13),c.qZA(),c.TgZ(14,"th",29),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(15),c.qZA(),c.TgZ(16,"th",30),c.NdJ("click",function(){return c.CHM(e),c.oxw().showNoDataAvailable()}),c._uU(17),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"tbody"),c.YNc(19,O,27,14,"tr",31),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("dtOptions",e.dtOptions),c.xp6(5),c.Oqu(e.language.Bsp_Microsite_Name),c.xp6(2),c.hij("",e.language.Bsp_Microsite_Description," "),c.xp6(2),c.Oqu(e.language.Bsp_Microsite_Type),c.xp6(2),c.hij("",e.language.Bsp_Microsite_Branding," "),c.xp6(2),c.hij("",e.language.Restrictions," "),c.xp6(2),c.hij("",e.language.Bsp_Microsite_Status," "),c.xp6(2),c.hij("",e.language.Action," "),c.xp6(2),c.Q6J("ngForOf",e.tableData)}}function w(e,t){if(1&e&&(c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"div",14),c.TgZ(3,"span",15),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.language.Loading)}}function U(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",85),c.TgZ(1,"span",17),c._UZ(2,"img",18),c.qZA(),c._UZ(3,"div",86),c.TgZ(4,"button",19),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).closeAlert()}),c._UZ(5,"span"),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("innerHtml",e.errorInfoMicrosite,c.oJD)}}function D(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.hij(" ",e.communityDesc," ")}}function I(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Oqu(e.language["This field is required"])}}function E(e,t){if(1&e&&(c.TgZ(0,"div",90),c.YNc(1,I,2,1,"span",88),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",e.addMicroSite.get("communityName").errors.required)}}const P=function(e,t){return{"ccl-error":e,"inp-disabled":t}};function L(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",52),c.TgZ(1,"label",53),c._uU(2),c.TgZ(3,"span",54),c._uU(4,"*"),c.qZA(),c._UZ(5,"br"),c.qZA(),c.TgZ(6,"div",70),c.TgZ(7,"div"),c.TgZ(8,"ng-select",87),c.NdJ("change",function(t){return c.CHM(e),c.oxw(2).patchCommunityDescription(t)}),c.qZA(),c.YNc(9,D,2,1,"div",88),c.YNc(10,E,2,1,"div",89),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(2),c.hij("",e.language.Bsp_Add_Micro__Community_Name," "),c.xp6(6),c.s9C("placeholder",e.language.Bsp_Add_Micro__Community_Name),c.Q6J("items",e.communityArr)("readonly",e.disblemicrosite)("ngClass",c.WLB(7,P,e.addMicroSiteFormSubmitted&&e.addMicroSite.get("communityName").errors,e.disblemicrosite)),c.xp6(1),c.Q6J("ngIf",e.addMicroSite.value.communityName),c.xp6(1),c.Q6J("ngIf",e.addMicroSiteFormSubmitted&&e.addMicroSite.get("communityName").errors)}}function k(e,t){if(1&e&&(c.TgZ(0,"div",90),c.TgZ(1,"span"),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(3);c.xp6(2),c.hij(" ",e.language.The_community_name_must_be_4_to_63_characters," ")}}function F(e,t){if(1&e&&(c.TgZ(0,"div",90),c.TgZ(1,"span"),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(3);c.xp6(2),c.AsE(" ",e.language["This field can only contain digits, lowercase letters, or hyphens(-), and should NOT start or end with a hyphen (-) and a single word."]," ",e.language["New community name cannot start with \u201cc-\u201d."],"")}}function J(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Oqu(e.language["This field is required"])}}function R(e,t){if(1&e&&(c.TgZ(0,"div",90),c.YNc(1,J,2,1,"span",88),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",e.addMicroSite.get("communityName").errors.required)}}function B(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",68),c.TgZ(1,"label",91),c._uU(2),c.TgZ(3,"span",54),c._uU(4,"*"),c.qZA(),c.qZA(),c.TgZ(5,"div",55),c.TgZ(6,"input",92,93),c.NdJ("keyup",function(t){c.CHM(e);const i=c.MAs(7),s=c.oxw(2);return s.checkMaxMin(i.value,"community"),s.clsAlphaNoOnly(i.value,"community"),s.checkSpace(t)}),c.qZA(),c.YNc(8,k,3,1,"div",89),c.YNc(9,F,3,2,"div",89),c.YNc(10,R,2,1,"div",89),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(2),c.Oqu(e.language.Bsp_Add_Micro__Community_Name),c.xp6(4),c.s9C("placeholder",e.language.Bsp_Microsite_Name_placeholder),c.Q6J("readonly",e.disblemicrosite)("ngClass",c.WLB(7,P,e.addMicroSiteFormSubmitted&&e.addMicroSite.get("communityName").errors,e.disblemicrosite)),c.xp6(2),c.Q6J("ngIf",e.minimumErr.community),c.xp6(1),c.Q6J("ngIf",e.communityError.community),c.xp6(1),c.Q6J("ngIf",e.addMicroSiteFormSubmitted&&e.addMicroSite.get("communityName").errors)}}function H(e,t){if(1&e&&(c.TgZ(0,"div",90),c.TgZ(1,"span"),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(3);c.xp6(2),c.hij(" ",e.language["The community description shall not exceed 32 characters."]," ")}}function Q(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Oqu(e.language["This field is required"])}}function Y(e,t){if(1&e&&(c.TgZ(0,"div",90),c.YNc(1,Q,2,1,"span",88),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",e.addMicroSite.get("communityDesc").errors.required)}}const j=function(e){return{"ccl-error":e}};function G(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",68),c.TgZ(1,"label",91),c._uU(2),c.TgZ(3,"span",54),c._uU(4,"*"),c.qZA(),c.qZA(),c.TgZ(5,"div",94),c.TgZ(6,"textarea",95,96),c.NdJ("keyup",function(){c.CHM(e);const t=c.MAs(7);return c.oxw(2).checkMaxMin(t.value,"description")}),c.qZA(),c.YNc(8,H,3,1,"div",89),c.YNc(9,Y,2,1,"div",89),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(2),c.hij("",e.language.Bsp_Microsite_Description," "),c.xp6(4),c.s9C("placeholder",e.language.Bsp_Microsite_Description_placeholder),c.Q6J("ngClass",c.VKq(5,j,e.addMicroSiteFormSubmitted&&e.addMicroSite.get("communityDesc").errors)),c.xp6(2),c.Q6J("ngIf",e.minimumErr.description),c.xp6(1),c.Q6J("ngIf",e.addMicroSiteFormSubmitted&&e.addMicroSite.get("communityDesc").errors)}}function z(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Oqu(e.language["This field is required"])}}function V(e,t){if(1&e&&(c.TgZ(0,"div",90),c.YNc(1,z,2,1,"span",88),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",e.addMicroSite.get("primaryColor").errors.required)}}function W(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=c.oxw(4);c.xp6(1),c.Oqu(e.language["This field is required"])}}function K(e,t){if(1&e&&(c.TgZ(0,"div",90),c.YNc(1,W,2,1,"span",88),c.qZA()),2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("ngIf",e.addMicroSite.get("secondaryColor").errors.required)}}const X=function(e,t,i){return{"ccl-error":e,"text-dark":t,"text-white":i}};function ee(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",97),c.TgZ(1,"div",4),c.TgZ(2,"div",98),c.TgZ(3,"div",99),c._uU(4),c._UZ(5,"span",54),c.TgZ(6,"div",100),c.TgZ(7,"div",101),c.TgZ(8,"div",102),c._UZ(9,"img",103),c.TgZ(10,"label",104),c.TgZ(11,"a"),c._uU(12),c.qZA(),c.qZA(),c.TgZ(13,"input",105,106),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(14);return c.oxw(2).convertIntoFileBase(t)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",107),c._uU(16),c.TgZ(17,"ul",108),c.TgZ(18,"li"),c._uU(19),c.qZA(),c.TgZ(20,"li"),c._uU(21),c.qZA(),c.TgZ(22,"li"),c._uU(23),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"div",109),c.TgZ(25,"div",110),c._uU(26),c.TgZ(27,"div",111),c.TgZ(28,"div",112),c.TgZ(29,"input",113),c.NdJ("colorPickerChange",function(t){return c.CHM(e),c.oxw(2).addMicroSite.value.primaryColor=t})("ngModelChange",function(t){return c.CHM(e),c.oxw(2).addMicroSite.value.primaryColor=t}),c.qZA(),c.YNc(30,V,2,1,"div",89),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div",114),c._uU(32),c.TgZ(33,"div",111),c.TgZ(34,"div",112),c.TgZ(35,"input",115),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw(2).addMicroSite.value.secondaryColor=t})("colorPickerChange",function(t){return c.CHM(e),c.oxw(2).addMicroSite.value.secondaryColor=t}),c.qZA(),c.YNc(36,K,2,1,"div",89),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.language.Add_Microsite_Image),c.xp6(5),c.s9C("src",e.Micrositelogo?e.Micrositelogo:"./assets/img/empty_gary.svg",c.LSH),c.xp6(3),c.hij(" ",e.EditmicrositeId?e.language.Replace_Image:e.language["Upload Image"],""),c.xp6(4),c.hij(" ",e.language.Logo_Guidelines," "),c.xp6(3),c.Oqu(e.language["Max File Size: 400kb"]),c.xp6(2),c.hij(" ",e.language["Format: .png, .jpeg"]," "),c.xp6(2),c.Oqu(e.language["Transparent background recommended"]),c.xp6(3),c.hij("",e.language.Primary_Color," "),c.xp6(3),c.Udp("background",e.addMicroSite.value.primaryColor),c.Q6J("colorPicker",e.addMicroSite.value.primaryColor)("ngModel",e.addMicroSite.value.primaryColor)("cpOutputFormat","hex")("ngClass",c.kEZ(23,X,e.addMicroSiteFormSubmitted&&e.addMicroSite.get("primaryColor").errors,e.getColorByBgColor(e.addMicroSite.value.primaryColor),!e.getColorByBgColor(e.addMicroSite.value.primaryColor))),c.xp6(1),c.Q6J("ngIf",e.addMicroSiteFormSubmitted&&e.addMicroSite.get("primaryColor").errors),c.xp6(2),c.hij("",e.language.Secondary_Color," "),c.xp6(3),c.Udp("background",e.addMicroSite.value.secondaryColor),c.Q6J("ngModel",e.addMicroSite.value.secondaryColor)("colorPicker",e.addMicroSite.value.secondaryColor)("cpOutputFormat","hex")("ngClass",c.kEZ(27,X,e.addMicroSiteFormSubmitted&&e.addMicroSite.get("secondaryColor").errors,e.getColorByBgColor(e.addMicroSite.value.secondaryColor),!e.getColorByBgColor(e.addMicroSite.value.secondaryColor))),c.xp6(1),c.Q6J("ngIf",e.addMicroSiteFormSubmitted&&e.addMicroSite.get("secondaryColor").errors)}}function te(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",116),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).onSubmit()}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("disabled",e.minimumErr.community||e.communityError.community||!e.addMicroSite.value.brandingType||!e.addMicroSite.value.communityName),c.xp6(1),c.Oqu(e.language[e.EditmicrositeId?"Edit_Communities":"Add Community"])}}function ie(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",117),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).onSubmit()}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.language.Save_changes)}}function se(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",118),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).AddMicrositePreview()}),c._uU(1),c._UZ(2,"img",119),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("disabled",e.minimumErr.community||e.communityError.community||!e.addMicroSite.value.brandingType||!e.addMicroSite.value.communityName),c.xp6(1),c.hij("",e.language.Preview," ")}}function oe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",118),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).EditMicroPreview()}),c._uU(1),c._UZ(2,"img",119),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("disabled",e.minimumErr.community||e.communityError.community||!e.addMicroSite.value.brandingType||!e.addMicroSite.value.communityName),c.xp6(1),c.hij("",e.language.Preview," ")}}const re=function(e){return{"inp-disabled":e}};function ne(e,t){if(1&e){const e=c.EpF();c.YNc(0,w,5,1,"div",1),c.YNc(1,U,6,1,"div",47),c.TgZ(2,"div",48),c.TgZ(3,"div",49),c._uU(4),c.qZA(),c.TgZ(5,"button",50),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeAllModal()}),c._UZ(6,"span"),c.qZA(),c.qZA(),c.TgZ(7,"form",51),c.TgZ(8,"div",52),c.TgZ(9,"label",53),c._uU(10),c.TgZ(11,"span",54),c._uU(12,"*"),c.qZA(),c.qZA(),c.TgZ(13,"div",55),c.TgZ(14,"div",56),c.TgZ(15,"input",57),c.NdJ("click",function(){return c.CHM(e),c.oxw().removeCommunity()}),c.qZA(),c.TgZ(16,"label",58),c._uU(17),c.qZA(),c.qZA(),c.TgZ(18,"div",56),c.TgZ(19,"input",59),c.NdJ("click",function(){return c.CHM(e),c.oxw().removeCommunity()}),c.qZA(),c.TgZ(20,"label",60),c._uU(21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"div",52),c.TgZ(23,"label",61),c._uU(24),c.TgZ(25,"span",54),c._uU(26,"*"),c.qZA(),c.qZA(),c.TgZ(27,"div",55),c.TgZ(28,"div",56),c.TgZ(29,"input",62),c.NdJ("click",function(){return c.CHM(e),c.oxw().removeCommunity()}),c.qZA(),c.TgZ(30,"label",63),c._uU(31),c.qZA(),c.qZA(),c.TgZ(32,"div",56),c.TgZ(33,"input",64),c.NdJ("click",function(){return c.CHM(e),c.oxw().removeCommunity()}),c.qZA(),c.TgZ(34,"label",65),c._uU(35),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(36,L,11,10,"div",66),c.YNc(37,B,11,10,"div",67),c.YNc(38,G,10,7,"div",67),c.TgZ(39,"div",68),c.TgZ(40,"label",69),c._uU(41),c.qZA(),c.TgZ(42,"div",70),c.TgZ(43,"div"),c._UZ(44,"ng-select",71),c.qZA(),c.qZA(),c.qZA(),c.TgZ(45,"div",72),c.TgZ(46,"label",53),c._uU(47),c.TgZ(48,"span",54),c._uU(49,"*"),c.qZA(),c.qZA(),c.TgZ(50,"div",55),c.TgZ(51,"div",73),c.TgZ(52,"input",74),c.NdJ("change",function(){return c.CHM(e),c.oxw().checkColor()}),c.qZA(),c.TgZ(53,"label",75),c._uU(54),c.qZA(),c.qZA(),c.TgZ(55,"div",56),c.TgZ(56,"input",76),c.NdJ("change",function(){return c.CHM(e),c.oxw().checkColor()}),c.qZA(),c.TgZ(57,"label",77),c._uU(58),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(59,ee,37,31,"div",78),c.TgZ(60,"div",79),c.TgZ(61,"div",80),c.YNc(62,te,2,2,"button",81),c.YNc(63,ie,2,1,"button",82),c.YNc(64,se,3,2,"button",83),c.YNc(65,oe,3,2,"button",83),c.TgZ(66,"button",84),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeAllModal()}),c._uU(67),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngIf",e.micrositeloader),c.xp6(1),c.Q6J("ngIf",e.iserror),c.xp6(3),c.hij(" ",e.language[e.EditmicrositeId?"Edit_Communities":"Add Community"]," "),c.xp6(3),c.Q6J("formGroup",e.addMicroSite),c.xp6(3),c.Oqu(e.language.Bsp_Add_Micro__Community),c.xp6(5),c.Q6J("value",!0),c.uIk("disabled",e.disableCommunity?"":null),c.xp6(2),c.hij("",e.language["Bsp_Add_Micro__Community_Pre-Defined"]," "),c.xp6(2),c.Q6J("value",!1),c.uIk("disabled",e.disblemicrosite?"":null),c.xp6(2),c.Oqu(e.language.Bsp_Add_Micro__Community_new),c.xp6(3),c.Oqu(e.language.Bsp_Microsite_Type),c.xp6(5),c.uIk("disabled",e.disblemicrosite?"":null),c.xp6(2),c.hij("",e.language.Permanent," "),c.xp6(2),c.uIk("disabled",e.disblemicrosite?"":null),c.xp6(2),c.Oqu(e.language["Non-permanent (events)"]),c.xp6(1),c.Q6J("ngIf",e.addMicroSite.value.isPredefinedCommunity),c.xp6(1),c.Q6J("ngIf",!e.addMicroSite.value.isPredefinedCommunity),c.xp6(1),c.Q6J("ngIf",!e.addMicroSite.value.isPredefinedCommunity),c.xp6(3),c.Oqu(e.language.Restrictions),c.xp6(3),c.s9C("placeholder",e.language.Restrictions),c.Q6J("items",e.restrictionArr)("readonly",e.addMicroSite.value.isPredefinedCommunity||e.disblemicrosite)("ngClass",c.VKq(33,re,e.addMicroSite.value.isPredefinedCommunity||e.disblemicrosite)),c.xp6(3),c.hij("",e.language.Bsp_Microsite_Branding," "),c.xp6(7),c.hij("",e.language.Bsp_Add_Micro__Branding_Default," "),c.xp6(4),c.hij("",e.language.Bsp_Add_Micro__Branding_Custom," "),c.xp6(1),c.Q6J("ngIf","Custom"==e.addMicroSite.value.brandingType),c.xp6(3),c.Q6J("ngIf",!e.disblemicrosite),c.xp6(1),c.Q6J("ngIf",e.disblemicrosite),c.xp6(1),c.Q6J("ngIf",!e.EditmicrositeId),c.xp6(1),c.Q6J("ngIf",e.EditmicrositeId),c.xp6(2),c.hij("",e.language.Bsp_Micro_Cancel," ")}}function ae(e,t){if(1&e&&(c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"div",14),c.TgZ(3,"span",15),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.language.Loading)}}function le(e,t){if(1&e){const e=c.EpF();c.YNc(0,ae,5,1,"div",1),c.TgZ(1,"div",120),c.TgZ(2,"div",121),c._uU(3),c.qZA(),c.TgZ(4,"button",122),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss()}),c._UZ(5,"span",123),c.qZA(),c.qZA(),c.TgZ(6,"div",124),c.TgZ(7,"div",125),c._uU(8),c.qZA(),c._uU(9),c.qZA(),c.TgZ(10,"div",126),c.TgZ(11,"button",127),c.NdJ("click",function(){return c.CHM(e),c.oxw().DeleteMicrosite()}),c._uU(12),c.qZA(),c.TgZ(13,"button",128),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss()}),c._uU(14),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngIf",e.micrositeloader),c.xp6(3),c.hij(" ",e.language.Delete_Communities,""),c.xp6(5),c.hij(" ",e.language.community_Delete_Mes_for_community," "),c.xp6(1),c.hij(" ",e.language.community_Delete_Mes," "),c.xp6(3),c.hij(" ",e.language.yes," "),c.xp6(2),c.hij("",e.language.no," ")}}function ce(e,t){if(1&e&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(null==e?null:e.name)}}function de(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",48),c.TgZ(1,"button",50),c.NdJ("click",function(){return c.CHM(e).$implicit.dismiss("Cross click")}),c._UZ(2,"span"),c.qZA(),c.qZA(),c.TgZ(3,"div",124),c.TgZ(4,"div",129),c.TgZ(5,"div",17),c._UZ(6,"img",18),c.qZA(),c.TgZ(7,"div",130),c.TgZ(8,"h1",131),c._uU(9),c.qZA(),c.TgZ(10,"p",132),c._uU(11),c.qZA(),c.TgZ(12,"ul",133),c.YNc(13,ce,2,1,"li",31),c.qZA(),c.TgZ(14,"p"),c._uU(15),c.qZA(),c.TgZ(16,"div",134),c.TgZ(17,"button",135),c.NdJ("click",function(){return c.CHM(e).$implicit.close("Save click")}),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(9),c.AsE("",e.language.Cannot_Delete," ",e.micrositeName,""),c.xp6(2),c.Oqu(e.language.VerifyCommunityTitle),c.xp6(2),c.Q6J("ngForOf",e.workFlowData),c.xp6(2),c.hij("",e.language.To_delete_this_community_msg,"."),c.xp6(3),c.Oqu(e.language.Okay)}}let ue=(()=>{class e{constructor(e,t,i,s,o,r,n,a,c){this.translateService=e,this.router=t,this.titleService=i,this.sso=s,this.formBuilder=o,this.dialogService=r,this.commonOrgService=n,this.communityService=a,this.validatorService=c,this.bspFormSubmitted=!1,this.submitted=!1,this.addMicroSiteFormSubmitted=!1,this.minimumErr={community:!1,bsp:!1,wifi:!1,description:!1,friendlyName:!1},this.communityError={community:!1,bsp:!1},this.dtOptions={pagingType:"full_numbers",dom:"tipr",lengthChange:!1,pageLength:10,destroy:!0,processing:!1,columnDefs:[{orderable:!1,targets:[5,6]},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{this._iDisplayStart=e._iDisplayStart,e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.dtTrigger=new l.xQ,this.tableData=[],this.buttonText="Bsp_Add_Microsite",this.refreshBack=!1,this.restrictionArr=[{name:"Child (0-9 yrs. old)",value:"Child"},{name:"Pre-Teen (9-12 yrs. old)",value:"Pre-Teen"},{name:"Teen (13-18 yrs. old)",value:"Teen"},{name:"None",value:"None"}],this.subscription=[],this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.de_DETable=this.translateService.de_DE,this.ORG_ID=this.sso.getOrgId(),this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("SmartTown Wi-Fi")}ngOnDestroy(){this.subscription.forEach(e=>null==e?void 0:e.unsubscribe())}ngOnInit(){this.language=this.translateService.defualtLanguage,this.subscription.push(this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.tableDataAvailable=!1,this.restrictionArr=[{name:this.language["Child (0-8 yrs Old)"],value:"Child"},{name:this.language["Pre-Teen (9-12 yrs Old)"],value:"Pre-Teen"},{name:this.language["Teen (13-18 yrs Old)"],value:"Teen"},{name:this.language.None,value:"None"}],this.tableLanguageOptions(),this.titleService.setTitle(`${this.language.Communities} - ${this.language["SmartTown Wi-Fi"]} - ${this.language.administration} - ${this.language["Calix Cloud"]}`),setTimeout(()=>{this.tableDataAvailable=!0},100)})),this.titleService.setTitle(`${this.language.Communities} - ${this.language["SmartTown Wi-Fi"]} - ${this.language.administration} - ${this.language["Calix Cloud"]}`),this.GetMicrosites(),this.getPredefinedCommunities(),this.addMicroSite=this.formBuilder.group({isPredefinedCommunity:[!0],communityType:["Permanent"],brandingType:["Default"],restrictionLevel:["None"],communityName:[null,[n.kI.required]],communityDesc:[""],logo:[""],primaryColor:["#0279FF",n.kI.required],secondaryColor:["#CCCCCC",n.kI.required]}),this.GetBspProvider(),this.restrictionArr=[{name:this.language["Child (0-8 yrs Old)"],value:"Child"},{name:this.language["Pre-Teen (9-12 yrs Old)"],value:"Pre-Teen"},{name:this.language["Teen (13-18 yrs Old)"],value:"Teen"},{name:this.language.None,value:"None"}]}GetBspProvider(){this.loader=!this.refreshBack,this.subscription.push(this.communityService.GetBspproviderInfo().subscribe(e=>{var t;this.BspData=e||{},this.bspId=null==e?void 0:e.id,this.BspData&&(this.refreshBack=!0,this.loader=!1),this.status=null==e?void 0:e.status,this.ShowMicrosite="READY"===this.status,this.defaultLogo=null===(t=this.BspData)||void 0===t?void 0:t.defaultLogo,this.bsploader=!1,this.loader=!1},e=>{this.loader=!1,this.bspId="",this.BspData="",this.status="",this.tableData=[],this.ShowMicrosite=!1,this.bspFormSubmitted=!1,this.defaultLogo="",this.bsploader=!1}))}showNoDataAvailable(){setTimeout(()=>{let e=document.querySelector(".dataTables_empty");e&&(e.style.display="table-cell",e.classList.add("text-center"))},100)}GetMicrosites(){this.micrositeloader=!0,this.subscription.push(this.communityService.GetMicrosite().subscribe(e=>{this.tableDataAvailable=!1,this.tableData=e||[],this.tableData||setTimeout(()=>{this.showNoDataAvailable()},300),this.dtOptions={pagingType:"full_numbers",dom:"tipr",lengthChange:!1,pageLength:10,destroy:!0,processing:!0,displayStart:this._iDisplayStart?this._iDisplayStart:0,columnDefs:[{orderable:!1,targets:[5,6]},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{this._iDisplayStart=e._iDisplayStart,e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.micrositeloader=!1,this.closeAllModal(),this.loadArloTables()},e=>{this.micrositeloader=!1,this.loadArloTables(),404==e.status&&setTimeout(()=>{this.showNoDataAvailable()},300),this.pageErrorHandle(e,!0)}))}closeAllModal(){this.error=!1,this.iserror=!1,this.dialogService.dismissAll()}addMicroSiteValue(){var e;this.disblemicrosite=!1,this.error=!1,this.iserror=!1,this.logo="",this.addMicroSiteFormSubmitted=!1,this.EditmicrositeId="",this.minimumErr.community=!1,this.minimumErr.description=!1,this.communityDesc="",this.communityError.community=!1,this.Micrositelogo="",0===(null===(e=this.communityArr)||void 0===e?void 0:e.length)?(this.disableCommunity=!0,this.addMicroSite.patchValue({isPredefinedCommunity:!1})):this.disableCommunity=!1,this.addMicroSite.reset({shortName:null,communityType:"Permanent",isPredefinedCommunity:!this.disableCommunity,brandingType:"Default",restrictionLevel:"None",communityName:null,communityDesc:"",logo:null,primaryColor:"#0279FF",secondaryColor:"#CCCCCC"}),this.dialogService.open(this.microSiteModal)}editMicroSite(e,t){this.error=!1,this.logo="",this.iserror=!1,this.EditmicrositeId=e.id,this.disblemicrosite=!0,this.disableCommunity=!0,this.minimumErr.description=!1,this.minimumErr.community=!1,this.editLoader=!0,this.subscription.push(this.communityService.GetMicrositeForEdit(this.EditmicrositeId).subscribe(e=>{this.addMicroSite.patchValue(e),this.Micrositelogo=null==e?void 0:e.logo,this.editLoader=!1,this.dialogService.open(this.microSiteModal)},e=>{this.pageErrorHandle(e,!1),this.editLoader=!1})),this.editIndex=t}EditMicrositePreview(e){this.editLoader=!0,this.subscription.push(this.communityService.GetMicrositeForEdit(null==e?void 0:e.id).subscribe(e=>{this.MicrositeData=e||{},this.editLoader=!1,localStorage.setItem("calix.micrositeDetails",JSON.stringify(this.MicrositeData)),this.router.navigate([]).then(e=>{window.open("/microsite_preview","_blank")})},e=>{this.pageErrorHandle(e,!1),this.editLoader=!1}))}WarToDelMicrosite(e){this.micrositeId=e.id,this.micrositeName=null==e?void 0:e.communityName;let t=this.micrositeId;this.micrositeloader=!0,this.subscription.push(this.communityService.WarToDelMicrosite(this.ORG_ID,JSON.stringify({orgId:this.ORG_ID,"actions.passpointConfig.communities.micrositeId":t})).subscribe(e=>{this.workFlowData=e||[],this.micrositeloader=!1,0!==(null==e?void 0:e.length)?this.dialogService.open(this.verifyMicrositeModel,{windowClass:"custom-alert-warn"}):this.dialogService.open(this.deleteModal)},e=>{this.pageErrorHandle(e,!1),this.dialogService.open(this.deleteModal),this.micrositeloader=!1}))}loadArloTables(){this.tableLanguageOptions(),setTimeout(()=>{this.tableDataAvailable=!0},0)}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.de_DETable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}pageErrorHandle(e,t){t?(this.iserror=!0,this.errorInfoMicrosite=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e)):(this.error=!0,this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e))}onSubmit(){this.addMicroSiteFormSubmitted=!0;let e=new FormData;if(this.EditmicrositeId){if(!this.addMicroSite.value.isPredefinedCommunity&&!this.addMicroSite.value.communityDesc||this.minimumErr.description)return;if("Custom"===this.addMicroSite.value.brandingType){let r;if(this.micrositeloader=!0,r=$("input[name='white_logo']").get(0).files,r.length){var t=r[0].name.split(".").pop(),i=r[0].size/1024;if(-1==(o=["jpeg","JPEG","PNG","png","jpg","JPG"]).indexOf(t)){var s=o.join(", ");return void this.addError(this.language.Image_extension_will_be+s+this.language.file_format,!0)}if(i>400)return void this.addError(this.language.LogoImage_uploaderror+" 400 KB",!0);$.each(r,function(t,i){e.append("logo",i),e.append("updateLogo","true")})}else e.append("logo",""),e.append("updateLogo","false");e.append("primaryColor",this.addMicroSite.value.primaryColor),e.append("secondaryColor",this.addMicroSite.value.secondaryColor),e.append("brandingType",this.addMicroSite.value.brandingType),e.append("communityDesc",this.addMicroSite.value.communityDesc),e.append("restrictionLevel",this.addMicroSite.value.restrictionLevel)}else e.append("logo",""),e.append("updateLogo","false"),e.append("primaryColor",""),e.append("secondaryColor",""),e.append("communityDesc",this.addMicroSite.value.communityDesc),e.append("brandingType",this.addMicroSite.value.brandingType),e.append("restrictionLevel",this.addMicroSite.value.restrictionLevel)}else{if(!this.addMicroSite.value.brandingType||!this.addMicroSite.value.communityName||!this.addMicroSite.value.isPredefinedCommunity&&!this.addMicroSite.value.communityDesc)return;if(this.micrositeloader=!0,"Custom"===this.addMicroSite.value.brandingType){let r;if(r=$("input[name='white_logo']").get(0).files,r.length){var o;if(t=r[0].name.split(".").pop(),i=r[0].size/1024,-1==(o=["jpeg","JPEG","PNG","png","jpg","JPG"]).indexOf(t))return s=o.join(", "),void this.addError(this.language.Image_extension_will_be+s+this.language.file_format,!0);if(i>400)return void this.addError(this.language.LogoImage_uploaderror+" 400 KB",!0);$.each(r,function(t,i){e.append("logo",i),e.append("updateLogo","true")})}else e.append("logo",""),e.append("updateLogo","false");e.append("primaryColor",this.addMicroSite.value.primaryColor),e.append("secondaryColor",this.addMicroSite.value.secondaryColor)}else e.append("logo",""),e.append("updateLogo","false"),e.append("primaryColor",""),e.append("secondaryColor","");if(this.addMicroSite.value.isPredefinedCommunity)e.append("communityDesc","");else if(e.append("communityDesc",this.addMicroSite.value.communityDesc),this.clsAlphaNoOnly(this.addMicroSite.value.communityName),this.checkMaxMin(this.addMicroSite.value.communityName,"community"),this.communityError.community||this.minimumErr.community||this.minimumErr.description)return void(this.micrositeloader=!1);e.append("isPredefinedCommunity",this.addMicroSite.value.isPredefinedCommunity),e.append("brandingType",this.addMicroSite.value.brandingType),e.append("communityName",this.addMicroSite.value.communityName.toLowerCase()),e.append("communityType",this.addMicroSite.value.communityType),e.append("restrictionLevel",this.addMicroSite.value.restrictionLevel)}this.subscription.push(this.EditmicrositeId?this.communityService.EditMicrosite(e,this.EditmicrositeId).subscribe(e=>{this.closeAllModal(),this.GetMicrosites(),this.getPredefinedCommunities()},e=>{this.pageErrorHandle(e,!0),this.micrositeloader=!1}):this.communityService.AddMicrosite(e).subscribe(e=>{this.closeAllModal(),this.GetMicrosites(),this.getPredefinedCommunities()},e=>{this.pageErrorHandle(e,!0),this.micrositeloader=!1}))}onChangecommunity(e){this.addMicroSite.patchValue({restrictionLevel:"None"})}getPredefinedCommunities(){this.loading=!0,this.subscription.push(this.communityService.GetpredefinedCommunities().subscribe(e=>{var t;this.communityArr=e||[],0===(null===(t=this.communityArr)||void 0===t?void 0:t.length)?(this.disableCommunity=!0,this.addMicroSite.patchValue({isPredefinedCommunity:!1})):this.disableCommunity=!1,this.loading=!1},e=>{this.loader=!1}))}addError(e,t){t?(this.errorInfoMicrosite=e,this.iserror=!0,this.error=!1):(this.errorInfo=e,this.error=!0,this.iserror=!1),this.micrositeloader=!1,$("html, body").animate({scrollTop:0},"slow")}clsAlphaNoOnly(e,t){if("community"===t){var i=new RegExp("^[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$");let t=e.substring(0,2);this.communityError.community=!i.test(e)||"c-"===t}else i=new RegExp("^[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$"),this.communityError.bsp=!i.test(e)}checkMaxMin(e,t){"community"===t?e.length>0&&(this.minimumErr.community=!(e.length>=4&&e.length<=31)):"bsp"===t?e.length>0&&(this.minimumErr.bsp=!(e.length>=4&&e.length<=31)):"description"===t?e.length>0&&(this.minimumErr.description=!(e.length<=32)):"friendlyName"===t?this.minimumErr.friendlyName=e.length>0&&!(e.length>=3&&e.length<=32):e.length>0&&(this.minimumErr.wifi=!(e.length>=3&&e.length<=32))}convertIntoFileBase(e){let t;if(this.Micrositelogo="",$("#logo-customimage-view").attr("src"," "),e.files&&e.files[0]){let i=new FileReader;i.onload=e=>{$("#logo-customimage-view").attr("src",e.target.result),this.logo=e.target.result,t=e.target.result},i.readAsDataURL(e.files[0])}}getColorByBgColor(e){return!e||parseInt(e.replace("#",""),16)>8388607.5}AddMicrositePreview(){var e,t;const i={communityDesc:this.addMicroSite.value.communityDesc&&!this.addMicroSite.value.isPredefinedCommunity?this.addMicroSite.value.communityDesc:this.communityDesc&&this.addMicroSite.value.isPredefinedCommunity?this.communityDesc:this.addMicroSite.value.communityDesc,logo:this.logo?this.logo:"Custom"!==this.addMicroSite.value.brandingType?this.defaultLogo:"",primaryColor:"Custom"===this.addMicroSite.value.brandingType?this.addMicroSite.value.primaryColor:null===(e=this.BspData)||void 0===e?void 0:e.defaultPrimaryColor,secondaryColor:"Custom"===this.addMicroSite.value.brandingType?this.addMicroSite.value.secondaryColor:null===(t=this.BspData)||void 0===t?void 0:t.defaultSecondaryColor};localStorage.setItem("calix.micrositeDetails",JSON.stringify(i)),this.router.navigate([]).then(e=>{window.open("/microsite_preview","_blank")})}EditMicroPreview(){var e,t;const i={communityDesc:this.communityDesc?this.communityDesc:this.addMicroSite.value.communityDesc,logo:this.logo?this.logo:"Custom"===this.addMicroSite.value.brandingType?this.Micrositelogo:this.defaultLogo,primaryColor:"Custom"===this.addMicroSite.value.brandingType?this.addMicroSite.value.primaryColor:null===(e=this.BspData)||void 0===e?void 0:e.defaultPrimaryColor,secondaryColor:"Custom"===this.addMicroSite.value.brandingType?this.addMicroSite.value.secondaryColor:null===(t=this.BspData)||void 0===t?void 0:t.defaultSecondaryColor};localStorage.setItem("calix.micrositeDetails",JSON.stringify(i)),this.router.navigate([]).then(e=>{window.open("/microsite_preview","_blank")})}removeCommunity(){this.addMicroSite.patchValue({communityName:null,description:null,restrictionLevel:"None"})}patchCommunityDescription(e){this.communityDesc=e.description,this.addMicroSite.patchValue("c-k12"===this.addMicroSite.value.communityName?{restrictionLevel:"Pre-Teen"}:{restrictionLevel:"None"})}closeAlert(){this.error=!1,this.iserror=!1,this.success=!1}checkSpace(e){0==e.value.toString().replace(/\ /g,"").length&&32==e.which&&e.preventDefault()}checkColor(){"Default"===this.addMicroSite.value.brandingType&&this.addMicroSite.patchValue({primaryColor:"#0279FF",secondaryColor:"#CCCCCC"})}deleteMicrosite(e,t,i){this.micrositeId=e.id,this.dialogService.open(i,{size:"md"})}DeleteMicrosite(){let e=this.micrositeId;this.micrositeloader=!0,this.subscription.push(this.communityService.DeleteMicrosite(e).subscribe(e=>{this.GetMicrosites(),this.getPredefinedCommunities()},e=>{this.pageErrorHandle(e,!1),this.micrositeloader=!1}))}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.s),c.Y36(o.F0),c.Y36(u.Dx),c.Y36(g.t6),c.Y36(n.qu),c.Y36(m.FF),c.Y36(p.v),c.Y36(h.l),c.Y36(f.o))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-communities"]],viewQuery:function(e,t){if(1&e&&(c.Gf(y,7),c.Gf(v,7),c.Gf(_,7),c.Gf(a.G,5)),2&e){let e;c.iGM(e=c.CRH())&&(t.deleteModal=e.first),c.iGM(e=c.CRH())&&(t.microSiteModal=e.first),c.iGM(e=c.CRH())&&(t.verifyMicrositeModel=e.first),c.iGM(e=c.CRH())&&(t.dtElements=e)}},decls:17,vars:8,consts:[[1,"row","relative-position"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"col-md-12"],["data-toggle","modal","data-target",".bd-example-modal-lg",1,"btn-default","primary","px-3","mt-1",3,"disabled","click"],["class","d-inline-flex ml-2",3,"title",4,"ngIf"],[1,"microsites-table","mt-3",3,"hidden"],["class","table","datatable","",3,"dtOptions",4,"ngIf"],["microSiteModal",""],["deleteModal",""],["verifyMicrositeModel",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"d-inline-flex","ml-2",3,"title"],["id","refreshicon",1,"cursor-pointer",3,"click"],["src","./assets/img/ic_refresh.svg"],["datatable","",1,"table",3,"dtOptions"],["table1",""],[3,"click"],[1,"Action-column",3,"click"],[4,"ngFor","ngForOf"],[1,"align-middle"],["class","active-but",4,"ngIf"],["class","draft-but",4,"ngIf"],["class","error-but",4,"ngIf"],[1,"actions","align-middle"],[1,"communities-action","dropdown","dropleft"],["type","button","id","actionDropBtn","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle","p-0"],["aria-labelledby","actionDropBtn",1,"dropdown-menu","mt-4","ml-5"],["data-toggle","modal","data-target",".bd-example-modal-lg",1,"dropdown-item",3,"title","click"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"title","click"],[1,"active-but"],[1,"dot"],[1,"draft-but"],[1,"error-but"],["class","w-100 alert alert-danger fade show d-flex align-items-center mt-4 mb-2",4,"ngIf"],[1,"modal-header","my-2"],[1,"communities-popup-title"],["type","button","aria-label","Close",1,"close","custom-close-btn",3,"click"],[3,"formGroup"],[1,"form-group","row"],["for","inputPassword",1,"col-sm-4","col-form-label"],[1,"error"],[1,"col-sm-8"],[1,"form-check","form-check-inline"],["type","radio","formControlName","isPredefinedCommunity","id","inlineRadio1",1,"form-check-input",3,"value","click"],["for","inlineRadio1",1,"form-check-label"],["type","radio","formControlName","isPredefinedCommunity","id","inlineRadio2",1,"form-check-input",3,"value","click"],["for","inlineRadio2",1,"form-check-label"],["for","Community",1,"col-sm-4","col-form-label"],["type","radio","formControlName","communityType","value","Permanent","id","communityType1",1,"form-check-input",3,"click"],["for","communityType1",1,"form-check-label"],["type","radio","formControlName","communityType","value","Non-permanent","id","communityType2",1,"form-check-input",3,"click"],["for","communityType2",1,"form-check-label"],["class","form-group row",4,"ngIf"],["class","form-group ccl-form row",4,"ngIf"],[1,"form-group","ccl-form","row"],["for","restrictionLevel",1,"col-sm-4","col-form-label"],[1,"col-md-8"],["formControlName","restrictionLevel","bindLabel","name","bindValue","value",3,"items","placeholder","readonly","ngClass"],[1,"form-group","row","my-2"],[1,"form-check","form-check-inline","branding-input"],["type","radio","formControlName","brandingType","id","inlineRadio11","value","Default",1,"form-check-input",3,"change"],["for","inlineRadio11",1,"form-check-label"],["type","radio","formControlName","brandingType","id","inlineRadio22","value","Custom",1,"form-check-input",3,"change"],["for","inlineRadio22",1,"form-check-label"],["class","row my-2",4,"ngIf"],[1,"row","my-3"],[1,"col-md-12","align-items-center"],["class","btn-default primary px-3 mr-3","type","button","id","addMicrosite",3,"disabled","click",4,"ngIf"],["class","btn-default primary px-3 mr-3","type","button","id","bsp-savechanges",3,"click",4,"ngIf"],["class","btn-default btn-dft px-3 mr-3","type","button","id","bsp-preview-btn",3,"disabled","click",4,"ngIf"],["id","bsp-cancel",1,"btn","primary","pointer",3,"click"],[1,"w-100","alert","alert-danger","fade","show","d-flex","align-items-center","mt-4","mb-2"],[1,"d-inline-flex","w-80",3,"innerHtml"],["formControlName","communityName","bindLabel","name","bindValue","name",3,"items","placeholder","readonly","ngClass","change"],[4,"ngIf"],["class","ccl-error",4,"ngIf"],[1,"ccl-error"],["for","staticEmail",1,"col-sm-4","col-form-label"],["type","text","formControlName","communityName","required","",1,"form-control",3,"readonly","placeholder","ngClass","keyup"],["inputPassword",""],[1,"col-sm-8","ccl-form"],["rows","3","formControlName","communityDesc","required","",1,"text-area-style",3,"placeholder","ngClass","keyup"],["description",""],[1,"row","my-2"],[1,"add-microsite-container"],[1,"add-microsite-item"],[1,"form-input-field"],[1,"input-field"],["id","logo-customimage-view-div ",1,"logo-customimage-view","mt-2"],["id","logo-customimage-view",1,"white-logo-image-box","default-microsite-image",3,"src"],["for","white_logo",1,"primary","m-0","pointer"],["type","file","id","white_logo","name","white_logo",1,"type-file",3,"change"],["white_logo",""],[1,"add-microsite-item","logo-guidelines"],[1,"mt-1"],[1,"add-microsite-item","mb-2"],[1,"w-100","mb-2"],[1,"form-input-field","ccl-form","mt-2"],[1,"input-field","color-input"],["id","primaryColor","formControlName","primaryColor",1,"form-control",2,"color","#faf9f5",3,"colorPicker","ngModel","cpOutputFormat","ngClass","colorPickerChange","ngModelChange"],[1,"w-100"],["id","secondaryColor","formControlName","secondaryColor",1,"form-control","ng-untouched","ng-pristine","ng-valid",2,"color","#faf9f5",3,"ngModel","colorPicker","cpOutputFormat","ngClass","ngModelChange","colorPickerChange"],["type","button","id","addMicrosite",1,"btn-default","primary","px-3","mr-3",3,"disabled","click"],["type","button","id","bsp-savechanges",1,"btn-default","primary","px-3","mr-3",3,"click"],["type","button","id","bsp-preview-btn",1,"btn-default","btn-dft","px-3","mr-3",3,"disabled","click"],["src","./assets/img/icon_expand.svg"],[1,"modal-header"],["id","modal-basic-title",1,"communities-popup-title","modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-2"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","px-3",3,"click"],[1,"d-flex"],[1,"custom-alert-content"],[1,"cco-secondary-title"],[1,"mb-0"],[1,"list-disc-type"],[1,"w-100","my-3"],["type","button","id","microErrorOkayBtn",1,"btn-default","btn-primary","mr-2",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,T,5,1,"div",1),c.YNc(2,A,6,1,"div",2),c.YNc(3,x,6,1,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"button",5),c.NdJ("click",function(){return t.addMicroSiteValue(),t.buttonText="Bsp_Add_Microsite"}),c._uU(6),c.qZA(),c.YNc(7,C,3,1,"div",6),c.qZA(),c.TgZ(8,"div",4),c.TgZ(9,"div",7),c.YNc(10,N,20,9,"table",8),c.qZA(),c.qZA(),c.qZA(),c.YNc(11,ne,68,35,"ng-template",null,9,c.W1O),c.YNc(13,le,15,6,"ng-template",null,10,c.W1O),c.YNc(15,de,19,6,"ng-template",null,11,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loader||t.micrositeloader||t.loading||t.editLoader||t.bsploader),c.xp6(1),c.Q6J("ngIf",t.error),c.xp6(1),c.Q6J("ngIf",t.success),c.xp6(2),c.Q6J("disabled",!t.ShowMicrosite),c.xp6(1),c.hij("",t.language.Add_Community_Btn," "),c.xp6(1),c.Q6J("ngIf",null==t.tableData?null:t.tableData.length),c.xp6(2),c.Q6J("hidden",!t.tableDataAvailable),c.xp6(1),c.Q6J("ngIf",t.tableDataAvailable))},directives:[s.O5,a.G,s.sg,n._Y,n.JL,n.sg,n._,n.Fj,n.JJ,n.u,b.w9,s.mk,n.Q7,Z.Kk],styles:[".communities-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:transparent!important}.communities-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{display:none}.communities-popup-title[_ngcontent-%COMP%]{font-style:normal;font-weight:300;font-size:42px;line-height:53px;color:#1a1f22;margin-bottom:25px}.ccl-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid transparent;background-color:#f8f8fa;width:100%;border-radius:26px;padding:10px 16px}.add-microsite-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.add-microsite-item[_ngcontent-%COMP%]{flex:1 25%;margin-bottom:2%}.logo-customimage-view[_ngcontent-%COMP%]{display:inline-block}.default-microsite-image[_ngcontent-%COMP%]{background-color:#ebeaef;margin-bottom:10px;padding:10px;max-width:200px;max-height:150px;display:block;min-width:200px;min-height:150px}.logo-customimage-view[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:-moz-max-content;width:max-content}.type-file[_ngcontent-%COMP%]{display:none}.logo-guidelines[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:7px;list-style:disc}.logo-guidelines[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:18px;margin:0 5px;color:#4c4c4c}.add-microsite-item[_ngcontent-%COMP%] + .add-microsite-item[_ngcontent-%COMP%]{margin-left:28px}.color-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #D9D9D9}.inp-disabled[_ngcontent-%COMP%]  *{cursor:no-drop!important}"]}),e})();var ge=i(92340),me=i(91841),pe=i(14813);function he(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",22),c.TgZ(1,"span",23),c._UZ(2,"img",24),c.qZA(),c.TgZ(3,"button",25),c.NdJ("click",function(){return c.CHM(e),c.oxw().errorInfo=""}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",26),c.qZA()}if(2&e){const e=c.oxw();c.xp6(5),c.Q6J("innerHtml",e.errorInfo,c.oJD)}}function fe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"span",28),c._UZ(2,"img",29),c.qZA(),c.TgZ(3,"div",30),c.TgZ(4,"strong"),c._uU(5),c.qZA(),c._uU(6),c.qZA(),c.TgZ(7,"div",30),c.TgZ(8,"button",25),c.NdJ("click",function(){return c.CHM(e),c.oxw().deleteSuccess=!1}),c._UZ(9,"span"),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(5),c.hij(" ",e.selectedUserForEditOrDelete.email,""),c.xp6(1),c.hij(" ",e.language["Successfully Deleted"]," ")}}function be(e,t){if(1&e&&(c.TgZ(0,"div",31),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.TgZ(3,"span",34),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(4),c.Oqu(e.language.Loading)}}function Ze(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){const e=t.$implicit,i=t.index,s=c.oxw().$implicit;c.xp6(1),c.AsE("",e.communityName,"",s.community.length-1!==i?", ":"","")}}function ye(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"a",41),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit,i=c.oxw(),s=c.MAs(40);return i.openEditOrDeleteUsersModal(t,s)}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Oqu(e.language["Delete user"])}}function ve(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td",35),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.YNc(10,Ze,2,2,"span",18),c.qZA(),c.TgZ(11,"td",17),c.TgZ(12,"div",36),c.TgZ(13,"div",37),c._uU(14," ... "),c.qZA(),c.TgZ(15,"div",38),c.TgZ(16,"a",39),c.NdJ("click",function(){const t=c.CHM(e).$implicit,i=c.oxw(),s=c.MAs(38);return i.openEditOrDeleteUsersModal(t,s)}),c._uU(17),c.qZA(),c.YNc(18,ye,2,1,"a",40),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw();c.xp6(2),c.Oqu(null==e?null:e.firstName),c.xp6(2),c.Oqu(null==e?null:e.lastName),c.xp6(2),c.Oqu(null==e?null:e.email),c.xp6(2),c.Oqu(i.language[null!=e&&e.isCommunitySubscriber?"No":"Yes"]),c.xp6(2),c.Q6J("ngForOf",null==e?null:e.community),c.xp6(7),c.Oqu(i.language["Edit access"]),c.xp6(1),c.Q6J("ngIf",null==e?null:e.isCommunitySubscriber)}}function _e(e,t){if(1&e&&(c.TgZ(0,"div",54),c.TgZ(1,"div",55),c._UZ(2,"img",56),c.qZA(),c.TgZ(3,"div",57),c._uU(4),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(4),c.hij(" ",e.replaceLimitValue(e.language["reduce the number of records"])," ")}}function Te(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"h3",44),c._uU(3),c.qZA(),c.TgZ(4,"button",45),c.NdJ("click",function(){return c.CHM(e),c.oxw().close()}),c._UZ(5,"span",46),c.qZA(),c.qZA(),c.YNc(6,_e,5,1,"div",47),c.TgZ(7,"div"),c._uU(8),c.TgZ(9,"ul",48),c.TgZ(10,"li"),c.TgZ(11,"b"),c._uU(12),c.qZA(),c.qZA(),c.TgZ(13,"li"),c.TgZ(14,"strong"),c._uU(15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"p"),c._uU(17),c.qZA(),c.TgZ(18,"div",49),c.TgZ(19,"div",14),c.TgZ(20,"table"),c.TgZ(21,"thead"),c.TgZ(22,"tr"),c.TgZ(23,"th"),c._uU(24),c.qZA(),c.TgZ(25,"th"),c._uU(26),c.qZA(),c.TgZ(27,"th"),c._uU(28),c.qZA(),c.TgZ(29,"th"),c._uU(30),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"tbody"),c.TgZ(32,"tr"),c.TgZ(33,"td"),c._uU(34,"John"),c.qZA(),c.TgZ(35,"td"),c._uU(36,"McClane"),c.qZA(),c.TgZ(37,"td"),c._uU(38,"Jmac@APD.gov"),c.qZA(),c.TgZ(39,"td"),c._uU(40,"station-wifi"),c.qZA(),c.qZA(),c.TgZ(41,"tr"),c.TgZ(42,"td"),c._uU(43,"James"),c.qZA(),c.TgZ(44,"td"),c._uU(45,"Smith"),c.qZA(),c.TgZ(46,"td"),c._uU(47,"Smith@APD.tgd"),c.qZA(),c.TgZ(48,"td"),c._uU(49,"c-library"),c.qZA(),c.qZA(),c.TgZ(50,"tr"),c.TgZ(51,"td"),c._uU(52,"Mary "),c.qZA(),c.TgZ(53,"td"),c._uU(54,"Smith"),c.qZA(),c.TgZ(55,"td"),c._uU(56,"Mary@gmail.com"),c.qZA(),c.TgZ(57,"td"),c._uU(58,"station-wifi"),c.qZA(),c.qZA(),c.TgZ(59,"tr"),c.TgZ(60,"td"),c._uU(61,"Maria "),c.qZA(),c.TgZ(62,"td"),c._uU(63,"Hernandez"),c.qZA(),c.TgZ(64,"td"),c._uU(65,"Hernande@gmail.com"),c.qZA(),c.TgZ(66,"td"),c._uU(67,"c-library, station-wifi"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(68,"div",50),c.TgZ(69,"div"),c.TgZ(70,"label",51),c._uU(71),c.qZA(),c.TgZ(72,"input",52),c.NdJ("change",function(t){return c.CHM(e),c.oxw().readSingleFile(t)}),c.qZA(),c.TgZ(73,"button",53),c.NdJ("click",function(){return c.CHM(e),c.oxw().close()}),c._uU(74),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(3),c.Oqu(e.language.addUsers),c.xp6(3),c.Q6J("ngIf",e.CSVLimitExceded),c.xp6(2),c.hij(" ",e.language["uploading a CSV file with their information"]," "),c.xp6(4),c.Oqu(e.language["Only .csv format is supported (Maximum 1000 users)"]),c.xp6(3),c.Oqu(e.language["Duplicate users will be appended upon upload"]),c.xp6(2),c.hij("",e.language["Please use the format exactly as shown below:"]," "),c.xp6(7),c.Oqu(e.language["First Name"]),c.xp6(2),c.Oqu(e.language.Last_Name),c.xp6(2),c.Oqu(e.language.emailAddess),c.xp6(2),c.hij("",e.language.Bsp_Microsite_Name,"(s)"),c.xp6(41),c.hij("",e.language.Browse," "),c.xp6(3),c.hij(" ",e.language.Cancel," ")}}function Ae(e,t){if(1&e&&(c.TgZ(0,"div",31),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.TgZ(3,"span",34),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.language.Loading)}}function xe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"span",28),c._UZ(2,"img",29),c.qZA(),c._UZ(3,"div",62),c.TgZ(4,"div",30),c.TgZ(5,"button",63),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).editSuccess=!1}),c._UZ(6,"span"),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("innerHTML",e.language.community_removed_successfully(e.removedCommunity[0].communityName),c.oJD)}}function Ce(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",64),c.TgZ(1,"div",65),c._UZ(2,"img",66),c.qZA(),c.TgZ(3,"div",67),c._uU(4),c.TgZ(5,"B"),c._uU(6),c.qZA(),c._uU(7),c.TgZ(8,"div",6),c.TgZ(9,"button",68),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).removeCommunity()}),c._uU(10),c.qZA(),c.TgZ(11,"button",69),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).selectedCommunityForRemove=void 0}),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(4),c.hij(" ",e.language["Are you sure you want to remove access to"]," "),c.xp6(2),c.Oqu(e.removeCommunityName),c.xp6(1),c.hij(" ",e.language["for this user?"]," "),c.xp6(3),c.hij("",e.language["Remove access"]," "),c.xp6(2),c.hij("",e.language.Cancel," ")}}function Se(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"img",70),c.NdJ("click",function(){const t=c.CHM(e).index,i=c.oxw(2);return i.selectedCommunityForRemove=t,i.removeCommunityName=null==i.selectedUserForEditOrDelete||null==i.selectedUserForEditOrDelete.community[t]?null:i.selectedUserForEditOrDelete.community[t].communityName}),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.xp6(2),c.hij(" ",e.communityName," ")}}function qe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",42),c.YNc(1,Ae,5,1,"div",2),c.TgZ(2,"div",43),c.TgZ(3,"h3",58),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.TgZ(6,"span",35),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"button",59),c.NdJ("click",function(){return c.CHM(e),c.oxw().close()}),c._UZ(9,"span",46),c.qZA(),c.qZA(),c.YNc(10,xe,7,1,"div",1),c.TgZ(11,"div",49),c.YNc(12,Ce,13,5,"div",60),c.TgZ(13,"p"),c._uU(14),c.qZA(),c.TgZ(15,"div",14),c.TgZ(16,"table"),c.TgZ(17,"thead"),c.TgZ(18,"tr"),c.TgZ(19,"th"),c._uU(20),c.qZA(),c._UZ(21,"th"),c.qZA(),c.qZA(),c.TgZ(22,"tbody"),c.YNc(23,Se,5,1,"tr",18),c.qZA(),c.qZA(),c.TgZ(24,"button",61),c.NdJ("click",function(){return c.CHM(e),c.oxw().close()}),c._uU(25),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.EditLoader),c.xp6(4),c.hij("",e.language.Edit,": "),c.xp6(2),c.hij('"',e.selectedUserForEditOrDelete.email,'"'),c.xp6(3),c.Q6J("ngIf",e.editSuccess),c.xp6(2),c.Q6J("ngIf",void 0!==e.selectedCommunityForRemove),c.xp6(2),c.hij("",e.language["This user has access to the following communities"],":"),c.xp6(6),c.Oqu(e.language["Community Access"]),c.xp6(3),c.Q6J("ngForOf",e.selectedUserForEditOrDelete.community),c.xp6(2),c.hij("",e.language.done," ")}}function Me(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",71),c.TgZ(2,"button",45),c.NdJ("click",function(){return c.CHM(e),c.oxw().close()}),c._UZ(3,"span",46),c.qZA(),c.qZA(),c.TgZ(4,"div",49),c.TgZ(5,"div",72),c.TgZ(6,"div",65),c._UZ(7,"img",73),c.qZA(),c.TgZ(8,"div",74),c.TgZ(9,"div",75),c._uU(10),c.qZA(),c._UZ(11,"p",76),c.TgZ(12,"div",6),c.TgZ(13,"button",77),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.deleteUser(t.selectedUserForEditOrDelete.subscriberId)}),c._uU(14),c.qZA(),c.TgZ(15,"button",78),c.NdJ("click",function(){return c.CHM(e),c.oxw().close()}),c._uU(16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(10),c.Oqu(e.language["Delete Community User Access"]),c.xp6(1),c.Q6J("innerHTML",e.language.Remove_Community_access(null==e.selectedUserForEditOrDelete?null:e.selectedUserForEditOrDelete.name,null==e.selectedUserForEditOrDelete?null:e.selectedUserForEditOrDelete.email),c.oJD),c.xp6(3),c.hij("",e.language.Delete," "),c.xp6(2),c.hij("",e.language.Cancel," ")}}let Oe=[{path:"bsp-information",component:r.A},{path:"communities",component:ue},{path:"community-users",component:(()=>{class e{constructor(e,t,i,s,o,r,n,a){this.dialogService=e,this.myCommunityIqService=t,this.router=i,this.translateService=s,this.http=o,this.commonOrgService=r,this.systemservice=n,this.titleService=a,this.subscriptions=[],this.communitySubscriberList=[],this.CSVLimitExceded=!1,this.dtOptions={pagingType:"full_numbers",dom:"tipr",lengthChange:!1,pageLength:10,processing:!0},this.loader=!1,this.disabledAddUser=!0,this.deleteSuccess=!1,this.count=0,this.filteredValueCount=0,this.dtTrigger=new l.xQ,this.microSiteList=[],this.selectedMicroSite="",this.editSuccess=!1,this.EditLoader=!1,this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.de_DETable=this.translateService.de_DE}ngAfterViewInit(){this.dtTrigger.next()}ngOnInit(){this.orgId=JSON.parse(localStorage.getItem("calix.org_id")),this.language=this.translateService.defualtLanguage,this.subscriptions.push(this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.tableLanguageOptions(),this.titleService.setTitle(`${this.language["Community Users"]} - ${this.language["SmartTown Wi-Fi"]} - ${this.language.administration} - ${this.language["Calix Cloud"]}`),this.changeTableStatusLanguage({_iDisplayStart:this.tableCounts.start,_iDisplayLength:this.tableCounts.displayCount,_iRecordsDisplay:this.tableCounts.displayed,_iRecordsTotal:this.tableCounts.total,oPreviousSearch:{sSearch:this.tableCounts.searchText}})})),this.titleService.setTitle(`${this.language["Community Users"]} - ${this.language["SmartTown Wi-Fi"]} - ${this.language.administration} - ${this.language["Calix Cloud"]}`),this.getCommunitySubscribers(),this.getCount(),this.GetBspProvider(),this.getMicroSites()}changeTableStatusLanguage(e){const t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.replace(/\s+/g,""),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};const i="fr"==sessionStorage.getItem("defaultLanguage"),s="es"==sessionStorage.getItem("defaultLanguage"),o="de_DE"==sessionStorage.getItem("defaultLanguage"),r=e._iRecordsTotal>1e4&&(""==e.oPreviousSearch.sSearch||""!=e.oPreviousSearch.sSearch)?i?`(filtr\xe9es \xe0 partir des  ${t.format(e._iRecordsTotal)} entr\xe9es totales)<br/>`+(this.show?`<b style="font-size: 14px;">${this.language.searchError}</b>`:""):s?`(filtrado de un total de  ${t.format(e._iRecordsTotal)} entradas)<br/>`+(this.show?`<b style="font-size: 14px;">${this.language.searchError}</b>`:""):o?`(gefiltert aus  ${t.format(e._iRecordsTotal)} Eintr\xe4gen)<br/>`+(this.show?`<b style="font-size: 14px;">${this.language.searchError}</b>`:""):`(filtered from  ${t.format(e._iRecordsTotal)} total entries)<br/>`+(this.show?`<b style="font-size: 14px;">${this.language.searchError}</b>`:""):"",n=0==e._iRecordsDisplay?-1:e._iDisplayStart,a=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;$('div [role="status"]').html(i?`Affichage de ${t.format(n+1)} \xe0 ${t.format(a)} des ${t.format(e._iRecordsDisplay)} entr\xe9es ${r}`:s?`Se muestran del ${t.format(n+1)} al ${t.format(a)} de ${t.format(e._iRecordsDisplay)} resultados ${r}`:o?`Angezeigt ${t.format(n+1)} bis ${t.format(a)} von ${t.format(e._iRecordsDisplay)} ergebnissen ${r}`:`Showing ${t.format(n+1)} to ${t.format(a)} of ${t.format(e._iRecordsDisplay)} entries ${r}`),$(".first").text(i?"Le d\xe9but":s?"Primero":o?"Erste Seite":"First"),$(".previous").text(i?"Pr\xe9c\xe9dent":s?"Anterior":o?"Zur\xfcck":"Previous"),$(".next").text(i?"Suivant":s?"Siguiente":o?"Weiter":"Next"),$(".last").text(i?"Derni\xe8re":s?"\xdaltimo":o?"Letzte":"Last")}getCount(){this.loader=!0,this.myCommunityIqService.getSmartTownUsersCount(this.selectedMicroSite,this.filter).subscribe(e=>{this[this.selectedMicroSite||this.filter?"filteredValueCount":"count"]=e,this.rerender()},e=>{this.loader=!1,this.pageErrorHandle(e)})}rerender(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(e=>{e.destroy(),this.dtTrigger.next()})}getMicroSites(){this.bspDataLoader=!0,this.subscriptions.push(this.myCommunityIqService.GetMicrosite().subscribe(e=>{this.microSiteList=[{communityName:this.language.All_communities,id:""},...e],this.bspDataLoader=!1},e=>{this.bspDataLoader=!1,"No BSP Provider Found."!==e.error.errorMessage&&this.pageErrorHandle(e)}))}getCommunitySubscribers(e){let t=this;this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,ordering:!1,search:!1,paging:!0,dom:"tipr",responsive:!0,drawCallback:e=>{this.dataTableSetting=e,this.changeTableStatusLanguage(e),this.count-e._iDisplayLength<=10&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")},ajax:(e,i)=>{let s,o,r;this.dataTableSetting&&9990==e.start?(this.show=!0,this.changeTableStatusLanguage(this.dataTableSetting)):this.show=!1,s=Math.round(e.start/10),r=this.count-10*s,o=r>10||!this.count?10:r,s*=10;let n=`${ge.N.FOUNDATION_BASE_URL}/subscriber-systems/passpoint-subscribers?org-id=${this.orgId}&offset=${s}&limit=${o}${this.selectedMicroSite?"&micrositeId="+this.selectedMicroSite:""}${this.filter?"&filter="+this.filter:""}`;t.loader=!0,t.http.get(n).subscribe(e=>{this.communitySubscriberList=e,t.loader=!1,i({recordsTotal:this.count,recordsFiltered:this.selectedMicroSite||this.filter?this.filteredValueCount:this.count,data:[]});let s=document.getElementsByClassName("dataTables_empty")[0];s&&(s.style.display=e.length?"none":"table-cell")},e=>{t.loader=!1,404==e.status?i({recordsTotal:0,recordsFiltered:0,data:[]}):this.pageErrorHandle(e)})}}}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e)}openAddUserPopup(e){this.CSVLimitExceded=!1,this.dialogService.open(e,{size:"xl",centered:!0,windowClass:"add-user-modal"})}openEditOrDeleteUsersModal(e,t){this.selectedUserForEditOrDelete=e,this.selectedCommunityForRemove=void 0,this.editSuccess=!1,this.dialogService.open(t,{size:"xl",centered:!0,windowClass:"edit-user-modal"})}close(){this.dialogService.dismissAll()}readSingleFile(e){var t,i=e.target.files[0];if(!i||!(null===(t=i.type)||void 0===t?void 0:t.includes("csv"))&&!/^(application\/vnd.ms-excel)$/.test(i.type))return;var s=new FileReader;let o=this;s.onload=function(e){o.displayContents(e.target.result)},s.readAsText(i)}displayContents(e){let t=e.split(/\r?\n/).map(e=>{let t=e.split(","),i={firstName:"",lastName:"",email:"",community:[]};return t.length&&(i.firstName=t[0],t[1]&&(i.lastName=t[1]),t[2]&&(i.email=t[2]),t[3]&&(i.community=[...new Set(t.slice(3).map(e=>JSON.stringify({communityName:e.replace(/"/g,"")})))].map(e=>JSON.parse(e)))),i});t=[...new Set(t.map(e=>JSON.stringify(e)))].map(e=>JSON.parse(e)).filter(e=>Object.keys(e).some(t=>Array.isArray(e[t])?e[t].length:e[t])),this.CSVLimitExceded=t.length>1e3,!this.CSVLimitExceded&&(this.myCommunityIqService.communityListSubject.next(t),this.close(),this.router.navigate(["/organization-admin/SmartTownWi-Fi/confirm-users"]))}removeCommunity(){var e,t,i,s;this.EditLoader=!0,this.removedCommunity=null===(t=null===(e=this.selectedUserForEditOrDelete)||void 0===e?void 0:e.community)||void 0===t?void 0:t.splice(this.selectedCommunityForRemove,1),this.subscriptions.push(this.myCommunityIqService.editCommunityAccess({enable:Boolean(null===(s=null===(i=this.selectedUserForEditOrDelete)||void 0===i?void 0:i.community)||void 0===s?void 0:s.length),communities:this.selectedUserForEditOrDelete.community},this.orgId,this.selectedUserForEditOrDelete.subscriberId).subscribe(e=>{var t,i;this.selectedCommunityForRemove=void 0,this.EditLoader=!1,(null===(i=null===(t=this.selectedUserForEditOrDelete)||void 0===t?void 0:t.community)||void 0===i?void 0:i.length)||(this.close(),this.getCount()),this.editSuccess=!0},e=>{var t,i;null===(i=null===(t=this.selectedUserForEditOrDelete)||void 0===t?void 0:t.community)||void 0===i||i.splice(this.selectedCommunityForRemove,0,this.removedCommunity[0]),this.selectedCommunityForRemove=void 0,this.EditLoader=!1,this.editSuccess=!1,this.close(),this.pageErrorHandle(e)}))}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.de_DETable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}GetBspProvider(){this.subscriptions.push(this.myCommunityIqService.GetBspproviderInfo().subscribe(e=>{this.disabledAddUser="READY"!==(null==e?void 0:e.status)},e=>{"No BSP Provider Found."!==e.error.errorMessage&&this.pageErrorHandle(e)}))}deleteUser(e){this.close(),this.loader=!0,this.subscriptions.push(this.systemservice.deleteSubscriber(e,this.orgId).subscribe(e=>{this.deleteSuccess=!0,setTimeout(()=>{this.deleteSuccess=!1,this.getCount()},3500)},e=>{this.loader=!1,this.pageErrorHandle(e)}))}filterValue(){clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>{this.getCount()},500)}ngOnDestroy(){var e;null===(e=this.subscriptions)||void 0===e||e.forEach(e=>e.unsubscribe())}replaceLimitValue(e){return e.replace("500","1000")}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(m.FF),c.Y36(h.l),c.Y36(o.F0),c.Y36(d.s),c.Y36(me.eN),c.Y36(p.v),c.Y36(pe.k),c.Y36(u.Dx))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-community-users"]],viewQuery:function(e,t){if(1&e&&c.Gf(a.G,5),2&e){let e;c.iGM(e=c.CRH())&&(t.dtElement=e.first)}},decls:41,vars:18,consts:[["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","loader",4,"ngIf"],[1,"container"],[1,"row","mb-3"],[1,"col-md-12"],[1,""],["data-toggle","modal","data-target",".bd-example-modal-lg",1,"btn-default","primary","px-3","mt-2",3,"disabled","click"],[1,"row","d-flex","justify-content-between","mt-3"],[1,"col-md-3","ccl-form"],["type","search","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"col-md-3"],["placeholder","Select","bindLabel","communityName","bindValue","id",3,"items","ngModel","ngModelChange","change"],[1,"row","my-3"],[1,"community-users-list"],["datatable","",1,"w-100",3,"dtOptions","dtTrigger"],[1,"email-with","text-break"],[1,"pl-4"],[4,"ngFor","ngForOf"],["AddUsersModal",""],["EditUsersModal",""],["DeleteUsersModal",""],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"mr-2"],["src","./assets/img/success-icon.svg",1,"wh-26"],[1,"d-inline"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"text-break"],[1,"dropdown"],["data-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","pointer"],[1,"dropdown-menu"],["data-toggle","modal","data-target",".bd-example-modal-lg",1,"dropdown-item","cursor-pointer",3,"click"],["class","dropdown-item cursor-pointer","data-target",".bd-example-modal-lg",3,"click",4,"ngIf"],["data-target",".bd-example-modal-lg",1,"dropdown-item","cursor-pointer",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","user-warning-meg d-flex",4,"ngIf"],[1,"pl-4","list-style-disc"],[1,"modal-body"],[1,"my-4"],["for","CSVFile","type","button",1,"usoc-upload-button","btn-default","primary","ml-1","mr-3"],["type","file","id","CSVFile","accept",".csv",1,"d-none",3,"change"],["id","cancel-add-role",1,"btn-default","btn-dft","py-1","md-btn",3,"click"],[1,"user-warning-meg","d-flex"],[1,"user-warning-img"],["src","../../../../assets/img/ic_error-outline.svg","alt",""],[1,"user-warning-content"],[1,"modal-title","d-flex"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","p-0",3,"click"],["class","edit-warning-info w-100 d-flex align-items-start",4,"ngIf"],[1,"btn-default","primary","px-2","mt-2",3,"click"],[1,"d-inline",3,"innerHTML"],["type","button",1,"close","close-btn",3,"click"],[1,"edit-warning-info","w-100","d-flex","align-items-start"],[1,"w-10","mr-2"],["src","../../../../assets/img/ic_warning-36px.svg","alt",""],[1,"w-90","m;-2"],[1,"btn-default","primary","px-3","mt-2","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1","md-btn",3,"click"],["src","../../../../assets/img/ic_close-24px.svg","alt","",1,"pointer",3,"click"],[1,"modal-header","mb-4"],[1,"d-flex","w-100","align-items-start"],["src","../../../../assets/img/ic_warning-36px.svg","alt","",1,"err-img"],[1,"w-90","ml-2"],[1,"stop-user-sub-title","chart-title"],[3,"innerHTML"],["id","",1,"btn-default","primary","mr-2",3,"click"],["type","button",1,"btn-default","btn-dft","py-1","md-btn","ml-1","mr-3",3,"click"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"section"),c.YNc(1,he,6,1,"div",0),c.YNc(2,fe,10,2,"div",1),c.YNc(3,be,5,1,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"button",7),c.NdJ("click",function(){c.CHM(e);const i=c.MAs(36);return t.openAddUserPopup(i)}),c._uU(9),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c.TgZ(12,"input",10),c.NdJ("ngModelChange",function(e){return t.filter=e})("ngModelChange",function(){return t.filterValue()}),c.qZA(),c.qZA(),c.TgZ(13,"div",11),c.TgZ(14,"ng-select",12),c.NdJ("ngModelChange",function(e){return t.selectedMicroSite=e})("change",function(){return t.getCount()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",13),c.TgZ(16,"div",5),c.TgZ(17,"div",14),c.TgZ(18,"table",15),c.TgZ(19,"thead"),c.TgZ(20,"tr"),c.TgZ(21,"th"),c._uU(22),c.qZA(),c.TgZ(23,"th"),c._uU(24),c.qZA(),c.TgZ(25,"th",16),c._uU(26),c.qZA(),c.TgZ(27,"th"),c._uU(28),c.qZA(),c.TgZ(29,"th"),c._uU(30),c.qZA(),c.TgZ(31,"th",17),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"tbody"),c.YNc(34,ve,19,7,"tr",18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(35,Te,75,12,"ng-template",null,19,c.W1O),c.YNc(37,qe,26,9,"ng-template",null,20,c.W1O),c.YNc(39,Me,17,4,"ng-template",null,21,c.W1O)}2&e&&(c.xp6(1),c.Q6J("ngIf",t.errorInfo),c.xp6(1),c.Q6J("ngIf",t.deleteSuccess),c.xp6(1),c.Q6J("ngIf",t.loader||t.bspDataLoader),c.xp6(5),c.Q6J("disabled",t.disabledAddUser||t.microSiteList.length<=1),c.xp6(1),c.hij("",t.language.addUsers," "),c.xp6(3),c.s9C("placeholder",t.language.Search),c.Q6J("ngModel",t.filter),c.xp6(2),c.Q6J("items",t.microSiteList)("ngModel",t.selectedMicroSite),c.xp6(4),c.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),c.xp6(4),c.Oqu(t.language.First_Name),c.xp6(2),c.Oqu(t.language.Last_Name),c.xp6(2),c.Oqu(t.language.Email),c.xp6(2),c.Oqu(t.language["BSP Subscriber"]),c.xp6(2),c.Oqu(t.language["Community Access"]),c.xp6(2),c.Oqu(t.language.Action),c.xp6(2),c.Q6J("ngForOf",t.communitySubscriberList))},directives:[s.O5,n.Fj,n.JJ,n.On,b.w9,a.G,s.sg],styles:['.community-users-list[_ngcontent-%COMP%]{width:100%}.community-users-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.community-users-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #CCCCCC}.community-users-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;color:#1a1f22;padding-bottom:7px}.community-users-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:15px;line-height:24px;padding:7px 0}.community-users-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){margin-right:30px}.community-users-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f8f8fa}.dropdown-toggle[_ngcontent-%COMP%]:after{content:"";border:0px!important}.dropdown-menu.show[_ngcontent-%COMP%]{position:absolute;transform:translate(-6px,24px);top:0px;left:-95px!important;will-change:transform}.usoc-upload-button[_ngcontent-%COMP%]{position:relative}.usoc-upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;top:0;width:100%;height:100%;opacity:0}.usoc-upload-button[_ngcontent-%COMP%]:focus{outline:none!important}  .add-user-modal .modal-content{background:#fff}  .add-user-modal .modal-dialog{max-width:45.73%!important}  .edit-user-modal .modal-content{background:#fff}  .edit-user-modal .modal-dialog{max-width:45.73%!important}.user-warning-meg[_ngcontent-%COMP%]{background-color:#fff5f5;padding:12px 24px;border-radius:12px;margin-bottom:24px;align-items:center}.user-warning-img[_ngcontent-%COMP%]{width:6%;margin-right:16px}.user-warning-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.user-warning-content[_ngcontent-%COMP%]{width:94%}  .delete-user-modal .modal-content{background:#FFF9F5}  .delete-user-modal .modal-dialog{max-width:35%!important}.edit-warning-info[_ngcontent-%COMP%]{background:#FFF8F5;border-radius:24px;padding:20px 24px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important}.no-drop[_ngcontent-%COMP%]{cursor:no-drop}.modal-content[_ngcontent-%COMP%]{position:relative}.wh-26[_ngcontent-%COMP%]{width:30px;height:30px}.err-img[_ngcontent-%COMP%]{height:48px;width:48px}.email-with[_ngcontent-%COMP%]{min-width:180px;min-width:200px;word-break:break-all}.close-btn[_ngcontent-%COMP%]{top:2px!important;right:0px!important}.list-style-disc[_ngcontent-%COMP%]{list-style-type:disc!important}']}),e})()},{path:"",redirectTo:"bsp-information"}],Ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.ez,o.Bz.forChild(Oe),a.T]]}),e})()}}]);