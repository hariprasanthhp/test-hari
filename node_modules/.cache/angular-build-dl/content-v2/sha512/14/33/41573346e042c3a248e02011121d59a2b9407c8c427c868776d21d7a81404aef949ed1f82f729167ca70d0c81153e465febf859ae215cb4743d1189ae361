!function(){"use strict";function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function a(t,a){for(var n=0;n<a.length;n++){var e=a[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(i=e.key,r=void 0,"symbol"==typeof(r=function(t,a){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,a||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(t)}(i,"string"))?r:String(r)),e)}var i,r}function n(t,n,e){return n&&a(t.prototype,n),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[4285],{54285:function(a,e,i){i.r(e),i.d(e,{IssuesModule:function(){return k}});var r=i(38583),o=i(18638),s=i(39895),c=i(92340),l=i(79765),u=i(46797),g=i(88002),m=i(37716),d=i(7450),h=i(89097),p=i(91841),f=i(49342),A=i(3679),v=i(48483),b=i(21693);function Z(t,a){if(1&t&&(m.TgZ(0,"div",11),m._uU(1),m.qZA()),2&t){var n=m.oxw();m.xp6(1),m.hij(" ",n.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function D(t,a){if(1&t&&(m.TgZ(0,"section",12),m.TgZ(1,"div",13),m.TgZ(2,"div",14),m.TgZ(3,"div",15),m.TgZ(4,"span",16),m._uU(5),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){var n=m.oxw();m.xp6(5),m.Oqu(n.language.Issues)}}function x(t,a){if(1&t&&(m.TgZ(0,"div",29),m.TgZ(1,"span",20),m._uU(2),m.qZA(),m.TgZ(3,"div",21),m.TgZ(4,"span",22),m._uU(5),m.qZA(),m.qZA(),m.qZA()),2&t){var n=m.oxw(2);m.xp6(2),m.Oqu(n.language.total_events),m.xp6(3),m.Oqu(n.totalEvents?n.totalEvents:0)}}function T(t,a){if(1&t&&(m.TgZ(0,"section"),m.TgZ(1,"div",14),m.TgZ(2,"div",17),m.TgZ(3,"div",18),m.TgZ(4,"div",19),m.TgZ(5,"span",20),m._uU(6),m.qZA(),m.TgZ(7,"div",21),m.TgZ(8,"span",22),m._uU(9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"div",23),m.TgZ(11,"span",20),m._uU(12),m.qZA(),m.TgZ(13,"div",21),m.TgZ(14,"span",22),m._uU(15),m.qZA(),m.qZA(),m.qZA(),m.TgZ(16,"div",24),m.TgZ(17,"span",20),m._uU(18),m.qZA(),m.TgZ(19,"div",21),m.TgZ(20,"span",22),m._uU(21),m.qZA(),m.qZA(),m.qZA(),m.TgZ(22,"div",25),m.TgZ(23,"span",20),m._uU(24),m.qZA(),m.TgZ(25,"div",21),m.TgZ(26,"span",22),m._uU(27),m.qZA(),m.qZA(),m.qZA(),m.TgZ(28,"div",26),m.TgZ(29,"span",20),m._uU(30),m.qZA(),m.TgZ(31,"div",21),m.TgZ(32,"span",22),m._uU(33),m.qZA(),m.qZA(),m.qZA(),m.TgZ(34,"div",27),m.TgZ(35,"span",20),m._uU(36),m.qZA(),m.TgZ(37,"div",21),m.TgZ(38,"span",22),m._uU(39),m.qZA(),m.qZA(),m.qZA(),m.YNc(40,x,6,2,"div",28),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){var n=m.oxw();m.xp6(6),m.Oqu(n.language.total_alarms),m.xp6(3),m.hij("",n.totalAlarms?n.totalAlarms:0," "),m.xp6(3),m.Oqu(n.language["Critical Alarms"]),m.xp6(3),m.hij("",n.criticalAlarms?n.criticalAlarms:0," "),m.xp6(3),m.Oqu(n.language["Major Alarms"]),m.xp6(3),m.hij(" ",n.majorAlarms?n.majorAlarms:0," "),m.xp6(3),m.Oqu(n.language["Minor Alarms"]),m.xp6(3),m.hij("",n.minorAlarms?n.minorAlarms:0," "),m.xp6(3),m.Oqu(n.language["Warning Alarms"]),m.xp6(3),m.hij("",n.countData&&n.countData.warning?n.countData.warning:0," "),m.xp6(3),m.Oqu(n.language["Info Alarms"]),m.xp6(3),m.Oqu(n.countData&&n.countData.info?n.countData.info:0),m.xp6(1),m.Q6J("ngIf",n.urls.includes("/cco/issues/health/history-reports")||n.urls.includes("/cco/issues/device/history-reports")||n.urls.includes("/cco/issues/connectivity/history-reports"))}}function C(t,a){if(1&t&&(m.TgZ(0,"li",30),m.TgZ(1,"a",31),m._uU(2),m.qZA(),m.qZA()),2&t){var n=m.oxw();m.xp6(2),m.hij(" ",n.language.Alarms," ")}}function _(t,a){if(1&t&&(m.TgZ(0,"li",30),m.TgZ(1,"a",32),m._uU(2),m.qZA(),m.qZA()),2&t){var n=m.oxw();m.xp6(2),m.hij(" ",n.language["Cloud Health"]," ")}}function O(t,a){if(1&t&&(m.TgZ(0,"li",30),m.TgZ(1,"a",33),m._uU(2),m.qZA(),m.qZA()),2&t){var n=m.oxw();m.xp6(2),m.hij(" ",n.language["Cloud Connectivity"]," ")}}var q,w=[{path:"",component:(q=function(){function a(n,e,i,r,o,s,u,g){t(this,a),this.translateService=n,this.router=e,this.sso=i,this.http=r,this.commonOrgService=o,this.fb=s,this.dateUtilsService=u,this.issueService=g,this.baseUrl="".concat(c.N.API_BASE_URL,"analytics-engine/"),this.last24hours=!1,this.reportRanges=[{label:"1",value:"1"},{label:"2",value:"2k"},{label:"3",value:"3"},{label:"4",value:"4"}],this.isToggleSidebar=!1,this.menus={realtime:!1,active:!1,historical:!1,cloud:!1,connect:!1,issues:!1},this.hasPageAccess=!0,this.toggled=new l.xQ,this.filtersForm=this.fb.group({startDate:[""],endDate:[""],alarmType:[""],region:[""],location:[""],system:[""],fsan:[""],severity:[""],category:[""],eventName:[""],customCategory:[""],cco_ack:"all"}),this.loading=!0,this.urls=this.router.url,this.totalAlarms_cleared=0,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}return n(a,[{key:"ngOnInit",value:function(){var t=this,a=this.sso.getScopes();if(c.N.VALIDATE_SCOPE){var n=Object.keys(a);if(n)for(var e=0;e<n.length;e++)-1===n[e].indexOf("cloud.rbac.coc.issues.current")?-1===n[e].indexOf("cloud.rbac.coc.issues.report.activealarm")?-1===n[e].indexOf("cloud.rbac.coc.issues.report.historyalarm")?-1===n[e].indexOf("cloud.rbac.coc.issues.current")?-1===n[e].indexOf("cloud.rbac.coc.issues.current")||(this.menus.connect=!0):this.menus.cloud=!0:(this.menus.realtime=!0,this.menus.historical=!0):(console.log("Scope"),this.menus.realtime=!0,this.menus.active=!0):(this.menus.realtime=!0,this.menus.connect=!0,this.menus.cloud=!0)}else this.menus={realtime:!0,active:!0,historical:!0,cloud:!0,connect:!0,issues:!0};this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(a){t.language=a}),this.pageAcceesObs=this.sso.hasPageAccess$.subscribe(function(a){a.access?(console.log("Issue Access"),t.hasPageAccess=!0):(console.log("No issue access"),t.hasPageAccess=!1)}),this.urls.includes("/cco/issues/device/realtime/current-issues")||this.urls.includes("/cco/issues/cloud-health/realtime/current-issues")||this.urls.includes("/cco/issues/connectivity/realtime/current-issues")?(this.timerSubscription=(0,u.H)(0,15e3).pipe((0,g.U)(function(){t.alarmsCount()})).subscribe(),console.log(this.timerSubscription)):(this.urls.includes("/cco/issues/device/active-reports")||this.urls.includes("/cco/issues/device/history-reports"))&&(this.countSubscription=this.issueService.filterCount$.subscribe(function(a){t.dateParam=a,t.alarmsCounts()}))}},{key:"ngOnDestroy",value:function(){this.pageAcceesObs&&this.pageAcceesObs.unsubscribe(),this.languageSubject.unsubscribe(),this.timerSubscription&&this.timerSubscription.unsubscribe(),this.countSubscription&&this.countSubscription.unsubscribe()}},{key:"toggleSideBar",value:function(){this.isToggleSidebar=!this.isToggleSidebar,this.sso.triggerToggle()}},{key:"alarmsCounts",value:function(){var t=this;this.urls.includes("/cco/issues/device/active-reports")&&setTimeout(function(){t.countSubscribe=t.http.get("".concat(t.baseUrl,"alarmCount?reportType=ACTIVE").concat(t.dateParam)).subscribe(function(a){t.countData=a&&a.alarm&&a.alarm.raised?a.alarm.raised:{},t.criticalAlarms=t.countData.critical?t.countData.critical.toLocaleString():"0",t.majorAlarms=t.countData.major?t.countData.major.toLocaleString():"0",t.minorAlarms=t.countData.minor?t.countData.minor.toLocaleString():"0",t.totalAlarms=t.countData.critical+t.countData.major+t.countData.minor+t.countData.warning+t.countData.info,t.totalAlarms=t.totalAlarms?t.totalAlarms.toLocaleString():"0",t.countData&&t.countData.info&&(t.countData.info=t.countData.info.toLocaleString()),t.countData&&t.countData.warning&&(t.countData.warning=t.countData.warning.toLocaleString()),t.loading=!1},function(a){t.pageErrorHandle(a),t.criticalAlarms="0",t.majorAlarms="0",t.minorAlarms="0",t.totalAlarms="0",t.loading=!1})},3e3),this.urls.includes("/cco/issues/device/history-reports")&&setTimeout(function(){t.countSubscribe=t.http.get("".concat(t.baseUrl,"alarmCount?reportType=HISTORY").concat(t.dateParam)).subscribe(function(a){t.clearedCountData=a&&a.alarm&&a.alarm.cleared?a.alarm.cleared:{},t.countData=a&&a.alarm&&a.alarm.raised?a.alarm.raised:{},t.eventCountData=a&&a.event&&a.event.count?a.event.count:"0",t.criticalAlarms=t.countData.critical?t.countData.critical.toLocaleString():"0",t.majorAlarms=t.countData.major?t.countData.major.toLocaleString():"0",t.minorAlarms=t.countData.minor?t.countData.minor.toLocaleString():"0",t.totalAlarms=t.countData.critical+t.countData.major+t.countData.minor+t.countData.warning+t.countData.info,t.totalAlarms_cleared=t.clearedCountData.critical+t.clearedCountData.major+t.clearedCountData.minor+t.clearedCountData.warning+t.clearedCountData.info,t.totalAlarms=t.totalAlarms?t.totalAlarms.toLocaleString():"0",t.totalEvents=t.eventCountData?t.eventCountData.toLocaleString():"0",t.warningData=t.countData&&t.countData.warning?t.countData.warning:"0",t.warningAlarms=t.warningData?t.warningData.toLocaleString():"0",t.countData&&t.countData.info&&(t.countData.info=t.countData.info.toLocaleString()),t.countData&&t.countData.warning&&(t.countData.warning=t.countData.warning.toLocaleString()),t.loading=!1},function(a){t.pageErrorHandle(a),t.criticalAlarms="0",t.majorAlarms="0",t.minorAlarms="0",t.totalAlarms="0",t.loading=!1})},3e3)}},{key:"alarmsCount",value:function(){var t=this;(this.urls.includes("/cco/issues/cloud-health/realtime/current-issues")||this.urls.includes("/cco/issues/device/realtime/current-issues")||this.urls.includes("/cco/issues/connectivity/realtime/current-issues"))&&(this.countSubscribe=this.http.get("".concat(c.N.API_BASE_URL,"analytics-engine/alarmCount?reportType=REALTIME")).subscribe(function(a){t.countData=a&&a.alarm&&a.alarm.raised?a.alarm.raised:{},t.criticalAlarms=t.countData.critical?t.countData.critical.toLocaleString():"0",t.majorAlarms=t.countData.major?t.countData.major.toLocaleString():"0",t.minorAlarms=t.countData.minor?t.countData.minor.toLocaleString():"0",t.totalAlarms=t.countData.critical+t.countData.major+t.countData.minor+t.countData.warning+t.countData.info,t.totalAlarms=t.totalAlarms?t.totalAlarms.toLocaleString():"0",t.countData&&t.countData.info&&(t.countData.info=t.countData.info.toLocaleString()),t.countData&&t.countData.warning&&(t.countData.warning=t.countData.warning.toLocaleString()),t.loading=!1},function(a){t.pageErrorHandle(a),t.criticalAlarms="0",t.majorAlarms="0",t.minorAlarms="0",t.totalAlarms="0",t.loading=!1}))}},{key:"pageErrorHandle",value:function(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.error=!0,this.loading=!1}}]),a}(),q.\u0275fac=function(t){return new(t||q)(m.Y36(d.s),m.Y36(s.F0),m.Y36(h.t6),m.Y36(p.eN),m.Y36(f.v),m.Y36(A.qu),m.Y36(v.s),m.Y36(b.v))},q.\u0275cmp=m.Xpm({type:q,selectors:[["app-issues"]],decls:14,vars:7,consts:[["role","alert","class","alert alert-warning",4,"ngIf"],["class","mb-4",4,"ngIf"],[4,"ngIf"],[3,"hidden"],[1,"container","mp-0"],[1,"row","mm-0"],[1,"m-center","col-sm-12","col-md-12","px-0","mb-4"],[1,"ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["class","nav-item",4,"ngIf"],["id","current-issue-table",1,"col-12","px-0"],["role","alert",1,"alert","alert-warning"],[1,"mb-4"],[1,"container"],[1,"row"],[1,"col-12","col-md-2","px-0","mobile-center"],[1,"cco-title"],[1,"col-md-12"],[1,"test-container"],["id","current-issues-Total-alarms",1,"item"],[1,"stats-label"],[1,"d-flex","align-content-around","flex-wrap"],[1,"stats-value"],["id","current-issues-critical-alarms",1,"item"],["id","current-issues-major-alarms",1,"item"],["id","current-issues-minor-alarms",1,"item"],["id","current-issues-warning-alarms",1,"item"],["id","current-issues-info-alarms",1,"item"],["class","item","id","historical-reports-Total-Events",4,"ngIf"],["id","historical-reports-Total-Events",1,"item"],[1,"nav-item"],["data-toggle","tab","routerLink","./device","routerLinkActive","active","aria-controls","alarms","aria-selected","true",1,"nav-link"],["data-toggle","tab","routerLink","./cloud-health","routerLinkActive","active","aria-controls","disconncted","aria-selected","true",1,"nav-link","small"],["data-toggle","tab","routerLink","./connectivity","routerLinkActive","active","aria-controls","disconncted","aria-selected","true",1,"nav-link","small"]],template:function(t,a){1&t&&(m.YNc(0,Z,2,1,"div",0),m.YNc(1,D,6,1,"section",1),m.YNc(2,T,41,13,"section",2),m.TgZ(3,"section",3),m.TgZ(4,"div",4),m.TgZ(5,"div",5),m.TgZ(6,"div",6),m.TgZ(7,"div",7),m.TgZ(8,"ul",8),m.YNc(9,C,3,1,"li",9),m.YNc(10,_,3,1,"li",9),m.YNc(11,O,3,1,"li",9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"div",10),m._UZ(13,"router-outlet"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.Q6J("ngIf",!a.hasPageAccess),m.xp6(1),m.Q6J("ngIf",a.hasPageAccess),m.xp6(1),m.Q6J("ngIf",a.hasPageAccess),m.xp6(1),m.Q6J("hidden",!a.hasPageAccess),m.xp6(6),m.Q6J("ngIf",a.menus.realtime),m.xp6(1),m.Q6J("ngIf",a.menus.cloud),m.xp6(1),m.Q6J("ngIf",a.menus.connect))},directives:[r.O5,s.lC,s.yS,s.Od],styles:[".red[_ngcontent-%COMP%]{color:#c70000}.issue-left-menu[_ngcontent-%COMP%]{width:100%}.issue-right-content[_ngcontent-%COMP%]{width:100%;border-left:1px solid #dedede;padding:10px}.current-issue-menu-container[_ngcontent-%COMP%]{display:flex;margin:20px 0;justify-self:start}.current-issue-menu-item[_ngcontent-%COMP%]{flex-grow:0}.current-issue-menu-item[_ngcontent-%COMP%] + .current-issue-menu-item[_ngcontent-%COMP%]{margin-left:1%}.btn-secondary[_ngcontent-%COMP%]{color:#5f6165!important;background-color:#f7f8fa!important;border-color:#888!important}.current-issues-table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{font-size:14px}.current-issues-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{font-size:14px}@media screen and (max-width: 767px){.cco-title[_ngcontent-%COMP%]{font-size:42px;line-height:60px;font-weight:300;margin:0}.mobile-center[_ngcontent-%COMP%]{text-align:center}.mp-0[_ngcontent-%COMP%]{padding:0!important}.mm-0[_ngcontent-%COMP%]{margin:0!important}.mpr-0[_ngcontent-%COMP%]{padding-right:0!important}.mbr-none[_ngcontent-%COMP%]{border-right:none!important}.mmt-3[_ngcontent-%COMP%]{margin-top:15px!important}#netops-list-menu[_ngcontent-%COMP%]   li.nav-item[_ngcontent-%COMP%]{margin-right:0!important}#netops-list-menu[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{text-align:center}}.padl[_ngcontent-%COMP%]{padding-left:32px}.sidebar-collapse[_ngcontent-%COMP%]{position:absolute;top:170px;background:#fff;width:25px;height:25px;border:1px solid #d3d3d3;border-radius:50%;text-align:center;left:-12px;cursor:pointer}.test-container[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:24px}.item[_ngcontent-%COMP%]{flex-grow:1;border-left:1px solid #EBEAEF;padding-left:12px;width:calc(100% / 4)}.item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-left:2%}"]}),q),children:[{path:"device",loadChildren:function(){return i.e(6436).then(i.bind(i,66436)).then(function(t){return t.DeviceAlarmsModule})}},{path:"cloud-health",loadChildren:function(){return i.e(1661).then(i.bind(i,81661)).then(function(t){return t.HealthAlarmsModule})}},{path:"connectivity",loadChildren:function(){return i.e(2943).then(i.bind(i,42943)).then(function(t){return t.ConnectivityAlarmsModule})}},{path:"realtime",redirectTo:"device/realtime/current-issues",pathMatch:"full"},{path:"",redirectTo:"device/realtime/current-issues",pathMatch:"full"}]}],S=function(){var a=n(function a(){t(this,a)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=m.oAB({type:a}),a.\u0275inj=m.cJS({imports:[[s.Bz.forChild(w)],s.Bz]}),a}(),y=i(86640),P=i(94555),M=i(25317),j=i(23771),L=i(77750),U=i(44466),k=function(){var a=n(function a(){t(this,a)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=m.oAB({type:a}),a.\u0275inj=m.cJS({imports:[[r.ez,S,A.u5,y.A0,P.kx,M.l,o._8,j.T,A.UX,L.r,U.m]]}),a}()}}])}();