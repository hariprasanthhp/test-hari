!function(){"use strict";function a(a){return function(a){if(Array.isArray(a))return o(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,t){if(!a)return;if("string"==typeof a)return o(a,t);var i=Object.prototype.toString.call(a).slice(8,-1);"Object"===i&&a.constructor&&(i=a.constructor.name);if("Map"===i||"Set"===i)return Array.from(a);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(a,t)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(a,o){(null==o||o>a.length)&&(o=a.length);for(var t=0,i=new Array(o);t<o;t++)i[t]=a[t];return i}function t(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function i(a,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,(e=i.key,n=void 0,"symbol"==typeof(n=function(a,o){if("object"!=typeof a||null===a)return a;var t=a[Symbol.toPrimitive];if(void 0!==t){var i=t.call(a,o||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(a)}(e,"string"))?n:String(n)),i)}var e,n}function e(a,o,t){return o&&i(a.prototype,o),t&&i(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5980],{35980:function(o,i,n){n.r(i),n.d(i,{AlarmNotificationsModule:function(){return fo}});var r,l=n(38583),s=n(39895),d=n(64762),c=n(3679),u=n(79765),m=n(92340),w=n(9128),h=n(2792),g=n(37716),v=n(7450),f=n(91841),k=n(49342),D=n(89097),p=n(75709),F=n(39075),A=n(21693),C=n(12664),y=((r=function(){function a(o){t(this,a),this.control=o,this.notApplied=!1,this._oldvalue="",this.regExpr=void 0}return e(a,[{key:"mask",set:function(a){"*"==a?this.notApplied=!0:this.regExpr=new RegExp(a)}},{key:"change",value:function(a){var o;if(!this.notApplied||this.regExpr){var t=a.target,i=t.value,e=t.selectionStart;i&&this.regExpr&&!(null===(o=this.regExpr)||void 0===o?void 0:o.test(i))?(t.selectionStart=t.selectionEnd=e-1,t.value.length<this._oldvalue.length&&0==e&&(e=2),this.control&&this.control.control.setValue(this._oldvalue,{emit:!1}),t.value=this._oldvalue,t.selectionStart=t.selectionEnd=e-1):this._oldvalue=i}}}]),a}()).\u0275fac=function(a){return new(a||r)(g.Y36(c.a5,8))},r.\u0275dir=g.lG2({type:r,selectors:[["input"]],hostBindings:function(a,o){1&a&&g.NdJ("input",function(a){return o.change(a)})},inputs:{mask:"mask"}}),r),b=n(74062),T=["notification_name"];function x(a,o){if(1&a&&(g.TgZ(0,"div",16),g.TgZ(1,"div",17),g.TgZ(2,"div",18),g.TgZ(3,"div",19),g.TgZ(4,"div",20),g.TgZ(5,"span",21),g._uU(6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&a){var t=g.oxw();g.xp6(6),g.Oqu(t.language.Loading)}}function Z(a,o){if(1&a&&(g.TgZ(0,"div",24),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["This field is required."]," ")}}function S(a,o){1&a&&(g.TgZ(0,"div",24),g._uU(1," Please fill out this field, 1-50 characters including letters, numbers and spaces only "),g.qZA())}function _(a,o){1&a&&(g.TgZ(0,"div",24),g._uU(1," Please fill out this field, 1-50 characters including letters, numbers and spaces only "),g.qZA())}function O(a,o){if(1&a&&(g.TgZ(0,"div",22),g.YNc(1,Z,2,1,"div",23),g.YNc(2,S,2,0,"div",23),g.YNc(3,_,2,0,"div",23),g.qZA()),2&a){var t=g.oxw();g.xp6(1),g.Q6J("ngIf",null==t.workFlowDetailsData||null==t.workFlowDetailsData.workFlowDetailsForm||null==t.workFlowDetailsData.workFlowDetailsForm.controls.name||null==t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors?null:t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.required),g.xp6(1),g.Q6J("ngIf",null==t.workFlowDetailsData||null==t.workFlowDetailsData.workFlowDetailsForm||null==t.workFlowDetailsData.workFlowDetailsForm.controls.name||null==t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors?null:t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.invalidName),g.xp6(1),g.Q6J("ngIf",!(null!=t.workFlowDetailsData&&null!=t.workFlowDetailsData.workFlowDetailsForm&&null!=t.workFlowDetailsData.workFlowDetailsForm.controls.name&&null!=t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors&&t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.invalidName)&&(null==t.workFlowDetailsData||null==t.workFlowDetailsData.workFlowDetailsForm||null==t.workFlowDetailsData.workFlowDetailsForm.controls.name||null==t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors?null:t.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.maxlength))}}var q=function(){var a=function(){function a(o,i){t(this,a),this.translateService=o,this.formBuilder=i,this._workFlowDetailsData={},this.getWorkFlowAPIEmitter=new g.vpe}return e(a,[{key:"workFlowDetailsData",get:function(){return this._workFlowDetailsData},set:function(a){var o,t,i;this._workFlowDetailsData=a,""!=(null==a?void 0:a.workflowId)&&(null===(i=null===(t=null===(o=this.workFlowDetailsData)||void 0===o?void 0:o.workFlowDetailsForm)||void 0===t?void 0:t.controls.name)||void 0===i||i.disable())}},{key:"ngOnInit",value:function(){var a=this;this.loadOnEdit&&this.loadOnEdit.subscribe(function(o){a.loading=o}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(o){a.language=o}),(!this.workFlowDetailsData||!this.workFlowDetailsData.workFlowDetailsForm||this.workFlowDetailsData.workFlowDetailsForm.controls)&&this.workFlowDetailsData.workFlowDetailsForm.valueChanges.subscribe(function(o){o.name&&(a.workFlowDetailsData.isNameEntered=!0)})}},{key:"callMultipleAPI",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.getWorkFlowAPIEmitter.emit(!0);case 1:case"end":return a.stop()}},a,this)}))}},{key:"avoidInitialSpacing",value:function(a){0===a.target.selectionStart&&"Space"===a.code&&a.preventDefault()}},{key:"keyPressAlphanumeric",value:function(a){var o=String.fromCharCode(a.keyCode);return!!/[a-zA-Z0-9]/.test(o)||(a.preventDefault(),!1)}},{key:"clearSearch",value:function(){this.workFlowDetailsData.description=""}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}}]),a}();return a.\u0275fac=function(o){return new(o||a)(g.Y36(v.s),g.Y36(c.qu))},a.\u0275cmp=g.Xpm({type:a,selectors:[["app-workflow-details"]],viewQuery:function(a,o){var t;(1&a&&g.Gf(T,7),2&a)&&(g.iGM(t=g.CRH())&&(o.notification_name=t.first))},inputs:{workFlowDetailsData:"workFlowDetailsData",loadOnEdit:"loadOnEdit"},outputs:{getWorkFlowAPIEmitter:"getWorkFlowAPIEmitter"},decls:24,vars:9,consts:[[1,"container"],["class","row mb-3",4,"ngIf"],[1,"row"],[1,"col-md-4","px-0"],[3,"formGroup"],[1,"ccl-form"],["for","notification_name"],[1,"error"],["type","text","id","notification_name","formControlName","name","aria-describedby","name","trimSpace","",1,"form-control",3,"placeholder"],["class","errorMessage",4,"ngIf"],[1,"form-group","ccl-form","mt-2"],["for","description"],["id","description","formControlName","description","rows","3","minlength","0","maxlength","200","trimSpace","",1,"form-control",3,"placeholder"],["id","the-count",1,"text-right"],["id","current"],["id","maximum"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"errorMessage"],["class","mt-1",4,"ngIf"],[1,"mt-1"]],template:function(a,o){1&a&&(g.TgZ(0,"section"),g.TgZ(1,"div",0),g.YNc(2,x,7,1,"div",1),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g.TgZ(5,"form",4),g.TgZ(6,"div",5),g.TgZ(7,"label",6),g._uU(8),g.TgZ(9,"span",7),g._uU(10,"*"),g.qZA(),g.qZA(),g._UZ(11,"input",8),g.YNc(12,O,4,3,"div",9),g.qZA(),g.TgZ(13,"div",10),g.TgZ(14,"label",11),g._uU(15),g.TgZ(16,"small"),g._uU(17),g.qZA(),g.qZA(),g._UZ(18,"textarea",12),g.TgZ(19,"div",13),g.TgZ(20,"span",14),g._uU(21),g.qZA(),g.TgZ(22,"span",15),g._uU(23,"/200"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&a&&(g.xp6(2),g.Q6J("ngIf",o.loading),g.xp6(3),g.Q6J("formGroup",null==o.workFlowDetailsData?null:o.workFlowDetailsData.workFlowDetailsForm),g.xp6(3),g.hij("",o.language.Name," "),g.xp6(3),g.s9C("placeholder",o.language.Name),g.xp6(1),g.Q6J("ngIf",(null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm||null==o.workFlowDetailsData.workFlowDetailsForm.controls.name?null:o.workFlowDetailsData.workFlowDetailsForm.controls.name.invalid)&&((null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm||null==o.workFlowDetailsData.workFlowDetailsForm.controls.name?null:o.workFlowDetailsData.workFlowDetailsForm.controls.name.dirty)||(null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm||null==o.workFlowDetailsData.workFlowDetailsForm.controls.name?null:o.workFlowDetailsData.workFlowDetailsForm.controls.name.touched))),g.xp6(3),g.Oqu(o.language.description),g.xp6(2),g.hij(" (",o.language.Optional,")"),g.xp6(1),g.s9C("placeholder",o.language.Decription),g.xp6(3),g.Oqu(null!=o.workFlowDetailsData&&null!=o.workFlowDetailsData.workFlowDetailsForm&&null!=o.workFlowDetailsData.workFlowDetailsForm.controls.description&&o.workFlowDetailsData.workFlowDetailsForm.controls.description.value?null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm?null:o.workFlowDetailsData.workFlowDetailsForm.controls.description.value.length:0))},directives:[l.O5,c._Y,c.JL,c.sg,y,c.Fj,c.JJ,c.u,b.f,c.wO,c.nD],styles:[".disable[_ngcontent-%COMP%]{pointer-events:none}.cursornallow[_ngcontent-%COMP%]{cursor:not-allowed}input[_ngcontent-%COMP%]:disabled{cursor:no-drop}"]}),a}(),M=n(23771),I=n(22759),P=n(45435),N=n(54395),E=n(87519),j=n(68307),J=n(30900),U=n(86640),V=["searchAlarmsInput"],Q=["checkAllViewChild"];function L(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"span",19),g.NdJ("click",function(){return g.CHM(t),g.oxw().clearSearch()}),g._uU(1,"\xd7"),g.qZA()}}function R(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",20),g.TgZ(1,"button",21),g.NdJ("click",function(){g.CHM(t);var a=g.oxw();return a.addRemoveSelectedAlarmList("add",null==a.alarmData?null:a.alarmData.table)}),g._uU(2),g._UZ(3,"img",22),g.qZA(),g.qZA()}if(2&a){var i=g.oxw();g.xp6(1),g.Q6J("disabled",!i.canAdd),g.xp6(1),g.hij(" ",i.language["Add Selected"]," ")}}function H(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",23),g.TgZ(1,"button",24),g.NdJ("click",function(){g.CHM(t);var a=g.oxw();return a.addRemoveSelectedAlarmList("remove",null==a.alarmData?null:a.alarmData.table)}),g._UZ(2,"img",25),g._uU(3),g.qZA(),g.qZA()}if(2&a){var i=g.oxw();g.xp6(1),g.Q6J("disabled",!i.canRemove),g.xp6(2),g.hij("",i.language["Remove Selected"]," ")}}function G(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",26),g.TgZ(1,"ng-select",27),g.NdJ("ngModelChange",function(a){return g.CHM(t),g.oxw().alarmData.searchCategory=a})("change",function(a){return g.CHM(t),g.oxw().searchAlarms(a,"category")})("input",function(a){return g.CHM(t),g.oxw().searchAlarms(a,"category")}),g.qZA(),g.qZA()}if(2&a){var i=g.oxw();g.xp6(1),g.s9C("placeholder",i.language[null==i.alarmData?null:i.alarmData.searchCategoryPlaceHolder]),g.Q6J("ngModel",i.alarmData.searchCategory)("items",null==i.alarmData?null:i.alarmData.categoryList)}}function Y(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",26),g.TgZ(1,"ng-select",28),g.NdJ("ngModelChange",function(a){return g.CHM(t),g.oxw().alarmData.searchSeverity=a})("change",function(a){return g.CHM(t),g.oxw().searchAlarms(a,"severity")})("input",function(a){return g.CHM(t),g.oxw().searchAlarms(a,"severity")}),g.TgZ(2,"ng-option",29),g._uU(3),g.qZA(),g.TgZ(4,"ng-option",30),g._uU(5),g.qZA(),g.TgZ(6,"ng-option",31),g._uU(7),g.qZA(),g.TgZ(8,"ng-option",32),g._uU(9),g.qZA(),g.TgZ(10,"ng-option",33),g._uU(11),g.qZA(),g.qZA(),g.qZA()}if(2&a){var i=g.oxw();g.xp6(1),g.s9C("placeholder",i.language[null==i.alarmData?null:i.alarmData.searchSeverityPlaceHolder]),g.Q6J("searchable",!1)("ngModel",i.alarmData.searchSeverity),g.xp6(2),g.Oqu(i.language.critical),g.xp6(2),g.Oqu(i.language.major),g.xp6(2),g.Oqu(i.language.minor),g.xp6(2),g.Oqu(i.language.Warning),g.xp6(2),g.Oqu(i.language.Info)}}function W(a,o){if(1&a&&(g.TgZ(0,"div",34),g.TgZ(1,"div",35),g.TgZ(2,"div",36),g.TgZ(3,"div",37),g.TgZ(4,"div",38),g.TgZ(5,"span",39),g._uU(6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&a){var t=g.oxw();g.xp6(6),g.Oqu(t.language.Loading)}}function B(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td"),g.TgZ(2,"div",15),g.TgZ(3,"input",40),g.NdJ("click",function(a){var o=g.CHM(t).index,i=g.oxw();return i.onCheckRow(null==i.alarmData?null:i.alarmData.tableType,a,o)})("ngModelChange",function(a){return g.CHM(t).$implicit.isChecked=a}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.TgZ(6,"td"),g._uU(7),g.qZA(),g.TgZ(8,"td",41),g._uU(9),g.qZA(),g.TgZ(10,"td"),g._uU(11),g.qZA(),g.TgZ(12,"td"),g._uU(13),g.qZA(),g.TgZ(14,"td"),g._uU(15),g.qZA(),g.TgZ(16,"td"),g._uU(17),g.qZA(),g.TgZ(18,"td"),g._uU(19),g.qZA(),g.qZA()}if(2&a){var i=o.$implicit;g.xp6(3),g.Q6J("ngModel",i.isChecked)("disabled",i.disabled),g.xp6(2),g.Oqu(i.alarm_name),g.xp6(2),g.Oqu(i.alarm_category),g.xp6(2),g.Oqu(i.group_name),g.xp6(2),g.Oqu(i.no_of_alarms),g.xp6(2),g.Oqu(i.severity),g.xp6(2),g.Oqu(i.alarm_id),g.xp6(2),g.Oqu(i.alarmRuleId),g.xp6(2),g.Oqu(i.group_id)}}var z=function(a){return{showHideTable:a}},K=function(){var o=function(){function o(a,i){var e=this;t(this,o),this.translateService=a,this.customTranslateService=i,this.searchAlarm=void 0,this.canAdd=!1,this.canRemove=!1,this.language={},this.dtOptions={},this.dtTrigger=new u.xQ,this.canShowTableBody=!1,this.addRemoveAlarmList=new g.vpe,this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.germanTable=this.translateService.de_DE,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(a){e.language=a,setTimeout(function(){e._alarmData=Object.assign({},e._alarmData),e.alarmData=Object.assign({},e.alarmData)},1e3),e.tableLanguageOptions(),e.rerender(!0,!0)})}return e(o,[{key:"alarmData",get:function(){return this._alarmData},set:function(a){this._alarmData=a}},{key:"ngOnInit",value:function(){var a=this;this.alarmData&&this.alarmData.table&&("individual"==this.alarmData.table||"monitoredIndividual"==this.alarmData.table)&&(jQuery.fn.dataTable.ext.type.detect.unshift(function(a){return"CRITICAL"===a||"MAJOR"===a||"MINOR"===a||"WARNING"===a||"INFO"===a?"severity-order":null}),jQuery.fn.dataTable.ext.type.order["severity-order-pre"]=function(a){switch(a){case"CRITICAL":return 1;case"MAJOR":return 2;case"MINOR":return 3;case"WARNING":return 4;case"INFO":return 5}return 0}),this.alarmData&&this.alarmData.rerenderSubject&&this.alarmData.rerenderSubject.subscribe(function(o){var t;a.rerender(!0),a.onCheckRow(null===(t=a.alarmData)||void 0===t?void 0:t.tableType,void 0,-1)}),this.renderTable(!0),this.canShowTableBodyInputSubject&&this.canShowTableBodyInputSubject.subscribe(function(o){a.canShowTableBody=!0}),this.tableLanguageOptions()}},{key:"ngAfterViewInit",value:function(){var a=this;(0,I.R)(this.searchAlarmsInput.nativeElement,"keyup").pipe((0,P.h)(Boolean),(0,N.b)(1500),(0,E.x)(),(0,j.b)(function(o){var t;a.searchAlarms(a.searchAlarmsInput.nativeElement.value,null===(t=a.alarmData)||void 0===t?void 0:t.table)})).subscribe()}},{key:"ngOnChanges",value:function(a){this.doSearch(a,"ngOnChange")}},{key:"doSearch",value:function(a,o){var t,i;this.alarmData="ngOnChange"==o?null===(t=a.alarmData)||void 0===t?void 0:t.currentValue:a,this.alarmData.searchCategory&&""!=this.alarmData.searchCategory&&this.searchAlarms(this.alarmData.searchCategory,"category"),this.alarmData.searchSeverity&&""!=this.alarmData.searchSeverity&&this.searchAlarms(this.alarmData.searchSeverity,"severity"),this.searchAlarm&&""!=this.searchAlarm&&this.searchAlarms(this.searchAlarm,null===(i=this.alarmData)||void 0===i?void 0:i.table)}},{key:"searchCategorySeverity",value:function(){this.alarmData.searchCategory&&""!=this.alarmData.searchCategory?(this.searchCategory=this.alarmData.searchCategory,this.searchAlarms(this.alarmData.searchCategory,"category")):this.alarmData.searchSeverity&&""!=this.alarmData.searchSeverity?(this.searchSeverity=this.alarmData.searchSeverity,this.searchAlarms(this.alarmData.searchSeverity,"severity")):!this.alarmData.searchCategory&&!this.alarmData.searchSeverity&&"individual"==this.alarmData.table&&this.rerender(!0)}},{key:"renderTable",value:function(a){var o=this;this.canShowTableBody=!1,this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!0,processing:!1,dom:"tipr",columnDefs:this.alarmData&&this.alarmData.columnDefs?this.alarmData.columnDefs:[],order:this.alarmData&&this.alarmData.order?this.alarmData.order:[]},setTimeout(function(){o.dtTrigger.next()},200),setTimeout(function(){o.handleCheckAll()},1500),setTimeout(function(){o.canShowTableBody=!0},2500)}},{key:"rerender",value:function(a,o){var t,i=this;a&&(this.canShowTableBody=!1),this.dtElement&&(null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)&&this.dtElement.dtInstance.then(function(a){a.destroy(),i.dtTrigger.next()}),a&&setTimeout(function(){i.canShowTableBody=!0},2e3),a&&setTimeout(function(){i.handleCheckAll()},1500),o&&this.doSearch(this.alarmData)}},{key:"handleCheckAll",value:function(){var a,o,t,i=this,e="";"group"==this.alarmData.table||"monitoredGroup"==this.alarmData.table?(e="group_id",t=8):"transform"==this.alarmData.table||"monitoredTransform"==this.alarmData.table?(e="alarmRuleId",t=7):("individual"==this.alarmData.table||"monitoredIndividual"==this.alarmData.table)&&(e="alarm_id",t=6),i.alarmData&&i.alarmData.data&&i.alarmData.data.length>0?(i.checkAllViewChild.nativeElement.checked=!0,o=!0):(i.checkAllViewChild.nativeElement.checked=!1,o=!1),this.dtElement&&(null===(a=this.dtElement)||void 0===a?void 0:a.dtInstance)&&this.dtElement.dtInstance.then(function(a){var n,r,l;(null===(n=a.rows({search:"applied"}))||void 0===n?void 0:n.data())&&(null===(l=null===(r=a.rows({search:"applied"}))||void 0===r?void 0:r.data())||void 0===l?void 0:l.length)>0?a.rows({search:"applied"}).every(function(){var a,n,r=this.data(),l=null===(n=null===(a=i._alarmData)||void 0===a?void 0:a.data)||void 0===n?void 0:n.find(function(a){return a[e].trim()==r[t].trim()});l&&!l.isChecked&&(i.checkAllViewChild.nativeElement.checked=!1),l.selectedAlready||(o=!1,!0)}):(i.checkAllViewChild.nativeElement.checked=!1,o=!1),i.alarmData.allSelected=o})}},{key:"tableLanguageOptions",value:function(){this.language&&this.language.fileLanguage&&"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:this.language&&this.language.fileLanguage&&"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:this.language&&this.language.fileLanguage&&"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.germanTable:this.language&&this.language.fileLanguage&&"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"checkUncheckAll",value:function(o,t){var i,e,n=this,r=this,l=t.target.checked,s=l,d="";"group"==this.alarmData.table||"monitoredGroup"==this.alarmData.table?(d="group_id",e=8):"transform"==this.alarmData.table||"monitoredTransform"==this.alarmData.table?(d="alarmRuleId",e=7):("individual"==this.alarmData.table||"monitoredIndividual"==this.alarmData.table)&&(d="alarm_id",e=6),this.dtElement&&(null===(i=this.dtElement)||void 0===i?void 0:i.dtInstance)&&this.dtElement.dtInstance.then(function(a){a.rows({search:"applied"}).every(function(){var a,o,t=this.data(),i=null===(o=null===(a=r._alarmData)||void 0===a?void 0:a.data)||void 0===o?void 0:o.find(function(a){var o;return a[d].trim()==(null===(o=t[e])||void 0===o?void 0:o.trim())});i&&(l||!l&&!i.disabled)&&(i.isChecked=l)}),a.rows().every(function(){var a,o,t=this.data(),i=null===(o=null===(a=r._alarmData)||void 0===a?void 0:a.data)||void 0===o?void 0:o.find(function(a){var o;return a[d].trim()==(null===(o=t[e])||void 0===o?void 0:o.trim())});i&&!i.selectedAlready&&i.isChecked&&(s=!0)})}),setTimeout(function(){"monitored"==o?n.canRemove=s:n.canAdd=s},500),this.alarmData.data=a(this._alarmData.data)}},{key:"onCheckRow",value:function(a,o,t){var i,e,n,r,l,s=this;o&&(this.alarmData.data[t].isChecked=!!(null===(i=null==o?void 0:o.target)||void 0===i?void 0:i.checked)&&o.target.checked),"monitored"==a?(this.canRemove=!1,(null===(n=null===(e=this.alarmData)||void 0===e?void 0:e.data)||void 0===n?void 0:n.some(function(a){return a.isChecked}))&&(this.canRemove=!0)):"non-monitored"==a&&(this.canAdd=!1,null===(l=null===(r=this.alarmData)||void 0===r?void 0:r.data)||void 0===l||l.forEach(function(a){!a.selectedAlready&&a.isChecked&&(s.canAdd=!0)}))}},{key:"searchAlarms",value:function(a,o){var t=this;this.canShowTableBody=!1;var i=0;"category"==o||"severity"==o?(a=a&&""!=a?"string"==typeof a?a:a.id:"","category"==o?(this.tempCategory=this.alarmData.searchCategory,i=2,this.alarmData.searchCategory=""!=a?a:void 0):(this.tempSeverity=this.alarmData.searchSeverity,i=5,this.alarmData.searchSeverity=""!=a?a:void 0,a=a&&""!=a?(a="string"==typeof a?a:a.id).toUpperCase():"")):(i="individual"!=o&&"monitoredIndividual"!=o?3:1,"group"==o&&"monitoredGroup"==o?i=3:("individual"==o||"monitoredIndividual"==o||"monitoredTransform"==o||"transform"==o)&&(i=1),this.searchAlarm=a),setTimeout(function(){var o;t.dtElement&&(null===(o=t.dtElement)||void 0===o?void 0:o.dtInstance)&&t.dtElement.dtInstance.then(function(o){o.columns(i).search(a).draw()})},200),setTimeout(function(){t.handleCheckAll(),t.canShowTableBody=!0},1500)}},{key:"clearSearch",value:function(){this.searchAlarms("",this.alarmData.table)}},{key:"addRemoveSelectedAlarmList",value:function(a,o){this.canShowTableBody=!1,this.addRemoveAlarmList.emit({mode:a,table:o})}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtTrigger.unsubscribe()}}]),o}();return o.\u0275fac=function(a){return new(a||o)(g.Y36(v.s),g.Y36(J.d))},o.\u0275cmp=g.Xpm({type:o,selectors:[["app-workflow-datatable"]],viewQuery:function(a,o){var t;(1&a&&(g.Gf(M.G,5),g.Gf(V,7),g.Gf(Q,7)),2&a)&&(g.iGM(t=g.CRH())&&(o.dtElement=t.first),g.iGM(t=g.CRH())&&(o.searchAlarmsInput=t.first),g.iGM(t=g.CRH())&&(o.checkAllViewChild=t.first))},inputs:{canShowTableBodyInputSubject:"canShowTableBodyInputSubject",alarmData:"alarmData"},outputs:{addRemoveAlarmList:"addRemoveAlarmList"},features:[g.TTD],decls:39,vars:23,consts:[[1,"row","justify-content-between","marg-27"],[1,"col-md-7","pl-0"],[1,"ccl-form","search-ccl"],["type","text","id","org-list-search",1,"ccl-input",3,"ngModel","placeholder","ngModelChange"],["searchAlarmsInput",""],["aria-hidden","true","class","custom-clear",3,"click",4,"ngIf"],["class","col-md-5 pr-0 text-right",4,"ngIf"],["class","col-md-5 text-right pr-0",4,"ngIf"],[1,"col-md-6","pl-0","mt-3"],["class","ccl-form",4,"ngIf"],[1,"col-md-6","pr-0","mt-3"],["class","row mb-3",4,"ngIf"],[1,"overflow-auto","w-100"],["datatable","",1,"row-border","hover","alarm-table-alt","table-alter","dataTable",3,"ngClass","dtTrigger","dtOptions"],["scope","col"],[1,"form-check"],["type","checkbox","name","alarmCheckAll","id","alarmCheckAll",3,"disabled","click"],["checkAllViewChild",""],[4,"ngFor","ngForOf"],["aria-hidden","true",1,"custom-clear",3,"click"],[1,"col-md-5","pr-0","text-right"],["type","button","id","nextbtn",1,"btn-arrow","btn-arr-nxt","primary","px-3","mr-2",3,"disabled","click"],["src","assets/img/ic_chevron-r-w.svg"],[1,"col-md-5","text-right","pr-0"],["type","button","id","nextbtn",1,"btn-arrow","btn-arr-nxt","px-3","ml-2","primary",3,"disabled","click"],["src","assets/img/ic_chevron-r-w.svg",1,"mr-2","ml-0","transform-180"],[1,"ccl-form"],["bindValue","id","bindLabel","name",3,"ngModel","placeholder","items","ngModelChange","change","input"],[3,"searchable","ngModel","placeholder","ngModelChange","change","input"],["value","critical"],["value","major"],["value","minor"],["value","warning"],["value","info"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["type","checkbox","name","alarm_name",3,"ngModel","disabled","click","ngModelChange"],[1,"text-break"]],template:function(a,o){1&a&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"input",3,4),g.NdJ("ngModelChange",function(a){return o.searchAlarm=a}),g.qZA(),g.YNc(5,L,2,0,"span",5),g.qZA(),g.qZA(),g.YNc(6,R,4,2,"div",6),g.YNc(7,H,4,2,"div",7),g.TgZ(8,"div",8),g.YNc(9,G,2,3,"div",9),g.qZA(),g.TgZ(10,"div",10),g.YNc(11,Y,12,8,"div",9),g.qZA(),g.qZA(),g.YNc(12,W,7,1,"div",11),g.TgZ(13,"div",12),g.TgZ(14,"table",13),g.TgZ(15,"thead"),g.TgZ(16,"tr"),g.TgZ(17,"th",14),g.TgZ(18,"div",15),g.TgZ(19,"input",16,17),g.NdJ("click",function(a){return o.checkUncheckAll(null==o.alarmData?null:o.alarmData.tableType,a)}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(21,"th",14),g._uU(22),g.qZA(),g.TgZ(23,"th",14),g._uU(24),g.qZA(),g.TgZ(25,"th",14),g._uU(26),g.qZA(),g.TgZ(27,"th",14),g._uU(28),g.qZA(),g.TgZ(29,"th",14),g._uU(30),g.qZA(),g.TgZ(31,"th",14),g._uU(32),g.qZA(),g.TgZ(33,"th",14),g._uU(34),g.qZA(),g.TgZ(35,"th",14),g._uU(36),g.qZA(),g.qZA(),g.qZA(),g.TgZ(37,"tbody"),g.YNc(38,B,20,10,"tr",18),g.qZA(),g.qZA(),g.qZA()),2&a&&(g.xp6(3),g.s9C("placeholder",(o.alarmData&&o.alarmData.searchPlaceHolder?o.language[o.alarmData.searchPlaceHolder]:o.alarmData&&o.alarmData.searchPlaceHolder?o.alarmData.searchPlaceHolder:"")||(o.alarmData&&o.alarmData.searchPlaceHolder?o.alarmData.searchPlaceHolder:"")),g.Q6J("ngModel",o.searchAlarm),g.xp6(2),g.Q6J("ngIf",o.searchAlarm&&o.searchAlarm.length>0),g.xp6(1),g.Q6J("ngIf","non-monitored"==(null==o.alarmData?null:o.alarmData.tableType)),g.xp6(1),g.Q6J("ngIf","monitored"==(null==o.alarmData?null:o.alarmData.tableType)),g.xp6(2),g.Q6J("ngIf","individual"==(null==o.alarmData?null:o.alarmData.table)||"monitoredIndividual"==(null==o.alarmData?null:o.alarmData.table)),g.xp6(2),g.Q6J("ngIf","individual"==(null==o.alarmData?null:o.alarmData.table)||"monitoredIndividual"==(null==o.alarmData?null:o.alarmData.table)),g.xp6(1),g.Q6J("ngIf",!o.canShowTableBody),g.xp6(2),g.Q6J("ngClass",g.VKq(21,z,!o.canShowTableBody))("dtTrigger",o.dtTrigger)("dtOptions",o.dtOptions),g.xp6(5),g.Q6J("disabled",o.alarmData&&o.alarmData.allSelected||o.alarmData&&o.alarmData.data&&0==o.alarmData.data.length),g.xp6(3),g.Oqu(o.language["Alarm Name"]),g.xp6(2),g.Oqu(o.language.Category),g.xp6(2),g.Oqu(o.language["Group Name"]),g.xp6(2),g.Oqu(o.language["Number of Alarms"]),g.xp6(2),g.Oqu(o.language.Severity),g.xp6(2),g.Oqu(o.language["Alarm Id"]),g.xp6(2),g.Oqu(o.language["Alarm Rule Id"]),g.xp6(2),g.Oqu(o.language["Group Id"]),g.xp6(2),g.Q6J("ngForOf",null==o.alarmData?null:o.alarmData.data))},directives:[y,c.Fj,c.JJ,c.On,l.O5,M.G,l.mk,l.sg,U.w9,U.xv,c.Wl],styles:[".dataTable[_ngcontent-%COMP%]{width:100%!important}.cursor-deft[_ngcontent-%COMP%]{cursor:default}.alarm-table-alt[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:5px!important;padding-bottom:5px!important}  .ng-clear-wrapper{display:block}.custom-clear[_ngcontent-%COMP%]{position:absolute;right:25px;top:7px;z-index:999;cursor:pointer;width:20px;height:20px;text-align:center}.showHideTable[_ngcontent-%COMP%]{visibility:hidden}.search-ccl[_ngcontent-%COMP%]   .custom-clear[_ngcontent-%COMP%]{top:2px;color:gray;font-size:22px}.marg-27[_ngcontent-%COMP%]{margin:27px 0 21px}.transform-180[_ngcontent-%COMP%]{transform:rotate(180deg)}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;cursor:pointer!important}input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed!important}"]}),o}(),X=["nonMonitoredView"],$=["monitoredView"],aa=["deleteModal"];function oa(a,o){}function ta(a,o){if(1&a&&g.YNc(0,oa,0,0,"ng-template",26),2&a){g.oxw();var t=g.MAs(52);g.Q6J("ngTemplateOutlet",t)}}function ia(a,o){}function ea(a,o){if(1&a&&g.YNc(0,ia,0,0,"ng-template",26),2&a){g.oxw();var t=g.MAs(50);g.Q6J("ngTemplateOutlet",t)}}function na(a,o){if(1&a&&(g.TgZ(0,"div",27),g.TgZ(1,"span"),g._uU(2),g.qZA(),g._UZ(3,"br"),g._UZ(4,"br"),g._UZ(5,"br"),g.TgZ(6,"span"),g._uU(7),g._UZ(8,"br"),g._uU(9),g.qZA(),g.qZA()),2&a){var t=g.oxw();g.xp6(2),g.hij(" ",t.language["There are no monitored alarms"],""),g.xp6(5),g.hij(" ",t.language["From the left panel, select and add"]," "),g.xp6(2),g.hij(" ",t.language["the alarms you wish to monitor"],"")}}function ra(a,o){if(1&a&&(g.TgZ(0,"div",27),g.TgZ(1,"span"),g._uU(2),g.qZA(),g._UZ(3,"br"),g._UZ(4,"br"),g._UZ(5,"br"),g.qZA()),2&a){var t=g.oxw();g.xp6(2),g.hij(" ",t.language["There are no alarms"],"")}}function la(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",28),g.TgZ(1,"h4",29),g._uU(2,"Remove"),g.qZA(),g.TgZ(3,"button",30),g.NdJ("click",function(){return g.CHM(t),g.oxw().close("No")}),g._UZ(4,"span",31),g.qZA(),g.qZA(),g.TgZ(5,"div",32),g._UZ(6,"p",33),g.qZA(),g.TgZ(7,"div",34),g.TgZ(8,"button",35),g.NdJ("click",function(){return g.CHM(t),g.oxw().close("No")}),g._uU(9),g.qZA(),g.TgZ(10,"button",36),g.NdJ("click",function(){return g.CHM(t),g.oxw().doRemoveAlarms()}),g._uU(11),g.qZA(),g.qZA()}if(2&a){var i=g.oxw();g.xp6(6),g.Q6J("innerHtml",i.removeName,g.oJD),g.xp6(3),g.hij(" ",i.language.no," "),g.xp6(2),g.hij(" ",i.language.Yes," ")}}var sa=function(a){return{active:a}},da=function(){var o=function(){function o(a,i,e){t(this,o),this.translateService=a,this.modalService=i,this.dialogService=e,this._workFlowAlarmsData={},this.alarmsActiveTab="individual_alarm",this.selectedAlarmsActiveTab="selected_individual_alarms",this.baseUrl="".concat(m.N.API_BASE_URL,"analytics-engine/"),this.getWorkFlowAPIEmitter=new g.vpe,this.errorMsg=new g.vpe,this.canShowTableBodySubject=new u.xQ}return e(o,[{key:"workFlowAlarmsData",get:function(){return this._workFlowAlarmsData},set:function(a){this._workFlowAlarmsData=a}},{key:"ngOnInit",value:function(){var a=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(o){a.language=o}),this.workFlowAlarmsData.alarmsFormEntered||(this.workFlowAlarmsData.individualAlarmData={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.data?this.workFlowAlarmsData.individualAlarmData.data:[],cols:["Alarm Name","Category"],table:"individual",tableType:"non-monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new u.xQ,searchCategory:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.searchCategory?this.workFlowAlarmsData.individualAlarmData.searchCategory:void 0,searchSeverity:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.searchSeverity?this.workFlowAlarmsData.individualAlarmData.searchSeverity:void 0,prevSearchCategory:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.prevSearchCategory?this.workFlowAlarmsData.individualAlarmData.prevSearchCategory:void 0,prevSearchSeverity:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity?this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity:void 0,categoryOrSeverity:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity?this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity:void 0,searchPlaceHolder:"Search Alarms",searchCategoryPlaceHolder:"Search Category",searchSeverityPlaceHolder:"Search Severity",severityList:[{id:"critical",name:"Critical"},{id:"major",name:"Major"},{id:"minor",name:"Minor"},{id:"warning",name:"Warning"},{id:"info",name:"Info"}],categoryList:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.categoryList?this.workFlowAlarmsData.individualAlarmData.categoryList:[],columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,4,6,7,8]},{type:"severity-order",targets:-1}],order:[5,"asc"]},this.workFlowAlarmsData.groupAlarmData={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.groupAlarmData&&this.workFlowAlarmsData.groupAlarmData.data?this.workFlowAlarmsData.groupAlarmData.data:[],cols:["Alarm Name"],table:"group",tableType:"non-monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new u.xQ,searchPlaceHolder:"Search Alarm Category Subgroups",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[1,2,5,6,7,8]}],order:[3,"asc"]},this.workFlowAlarmsData.transformAlarmData={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.transformAlarmData&&this.workFlowAlarmsData.transformAlarmData.data?this.workFlowAlarmsData.transformAlarmData.data:"",cols:["Alarm Name"],table:"transform",tableType:"non-monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new u.xQ,searchPlaceHolder:"Search Transformed Alarms",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,2,4,5,6,7,8]}],order:[1,"asc"]},this.workFlowAlarmsData.monitoredIndividualAlarm={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredIndividualAlarm&&this.workFlowAlarmsData.monitoredIndividualAlarm.data?this.workFlowAlarmsData.monitoredIndividualAlarm.data:[],cols:["Alarm Name","Category"],table:"monitoredIndividual",tableType:"monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new u.xQ,searchCategory:void 0,searchSeverity:void 0,searchPlaceHolder:"Search Alarms",searchCategoryPlaceHolder:"Search Category",searchSeverityPlaceHolder:"Search Severity",severityList:[{id:"critical",name:"Critical"},{id:"major",name:"Major"},{id:"minor",name:"Minor"},{id:"warning",name:"Warning"},{id:"info",name:"Info"}],categoryList:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredIndividualAlarm&&this.workFlowAlarmsData.monitoredIndividualAlarm.categoryList?this.workFlowAlarmsData.monitoredIndividualAlarm.categoryList:[],columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,4,6,7,8]},{type:"severity-order",targets:-1}],order:[5,"asc"]},this.workFlowAlarmsData.monitoredGroupAlarm={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredGroupAlarm&&this.workFlowAlarmsData.monitoredGroupAlarm.data?this.workFlowAlarmsData.monitoredGroupAlarm.data:[],cols:["Alarm Name"],table:"monitoredGroup",tableType:"monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new u.xQ,searchPlaceHolder:"Search Alarm Category Subgroups",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[1,2,5,6,7,8]}],order:[3,"asc"]},this.workFlowAlarmsData.monitoredTransformAlarm={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredTransformAlarm&&this.workFlowAlarmsData.monitoredTransformAlarm.data?this.workFlowAlarmsData.monitoredTransformAlarm.data:[],cols:["Alarm Name"],table:"monitoredTransform",tableType:"monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new u.xQ,searchPlaceHolder:"Search Transformed Alarms",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,2,4,5,6,7,8]}],order:[1,"asc"]},this.workFlowAlarmsData.alarmsFormEntered=!0),this.callMultipleAPI()}},{key:"callMultipleAPI",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.getWorkFlowAPIEmitter.emit(!0);case 1:case"end":return a.stop()}},a,this)}))}},{key:"removeDuplicate",value:function(a,o){return a.reduce(function(a,t){return 0==a.filter(function(a){return a[o]===t[o]}).length&&a.push(t),a},[])}},{key:"addSelectedIndividualAlarmList",value:function(){var o=JSON.parse(JSON.stringify(this.workFlowAlarmsData.individualAlarmData.data.filter(function(a){return 1==a.isChecked})));this.workFlowAlarmsData.monitoredIndividualAlarm.data=[].concat(a(this.workFlowAlarmsData.monitoredIndividualAlarm.data),a(o.map(function(a){return delete a.isChecked,delete a.disabled,delete a.selectedAlready,a}))),this.workFlowAlarmsData.monitoredIndividualAlarm.data=this.removeDuplicate(this.workFlowAlarmsData.monitoredIndividualAlarm.data,"alarm_id"),this.workFlowAlarmsData.individualAlarmData.data.forEach(function(a){1==a.isChecked&&(a.disabled=!0,a.selectedAlready=!0)}),this.workFlowAlarmsData.monitoredIndividualAlarm=Object.assign({},this.workFlowAlarmsData.monitoredIndividualAlarm),this.workFlowAlarmsData.monitoredIndividualAlarm.data=a(this.workFlowAlarmsData.monitoredIndividualAlarm.data),this.workFlowAlarmsData.individualAlarmData=Object.assign({},this.workFlowAlarmsData.individualAlarmData),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.monitoredIndividualAlarm.rerenderSubject.next(!0),this.workFlowAlarmsData.individualAlarmData.rerenderSubject.next(!0)}},{key:"addSelectedGroupAlarmList",value:function(){var o=JSON.parse(JSON.stringify(this.workFlowAlarmsData.groupAlarmData.data.filter(function(a){return 1==a.isChecked})));this.workFlowAlarmsData.monitoredGroupAlarm.data=[].concat(a(this.workFlowAlarmsData.monitoredGroupAlarm.data),a(o.map(function(a){return delete a.isChecked,delete a.disabled,delete a.selectedAlready,a}))),this.workFlowAlarmsData.monitoredGroupAlarm.data=this.removeDuplicate(this.workFlowAlarmsData.monitoredGroupAlarm.data,"group_id"),this.workFlowAlarmsData.groupAlarmData.data.forEach(function(a){1==a.isChecked&&(a.disabled=!0,a.selectedAlready=!0)}),this.workFlowAlarmsData.monitoredGroupAlarm=Object.assign({},this.workFlowAlarmsData.monitoredGroupAlarm),this.workFlowAlarmsData.monitoredGroupAlarm.data=a(this.workFlowAlarmsData.monitoredGroupAlarm.data),this.workFlowAlarmsData.groupAlarmData=Object.assign({},this.workFlowAlarmsData.groupAlarmData),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.monitoredGroupAlarm.rerenderSubject.next(!0),this.workFlowAlarmsData.groupAlarmData.rerenderSubject.next(!0)}},{key:"addSelectedTransformAlarmList",value:function(){var o=JSON.parse(JSON.stringify(this.workFlowAlarmsData.transformAlarmData.data.filter(function(a){return 1==a.isChecked})));this.workFlowAlarmsData.monitoredTransformAlarm.data=[].concat(a(this.workFlowAlarmsData.monitoredTransformAlarm.data),a(o.map(function(a){return delete a.isChecked,delete a.disabled,delete a.selectedAlready,a}))),this.workFlowAlarmsData.monitoredTransformAlarm.data=this.removeDuplicate(this.workFlowAlarmsData.monitoredTransformAlarm.data,"alarmRuleId"),this.workFlowAlarmsData.transformAlarmData.data.forEach(function(a){1==a.isChecked&&(a.disabled=!0,a.selectedAlready=!0)}),this.workFlowAlarmsData.monitoredTransformAlarm=Object.assign({},this.workFlowAlarmsData.monitoredTransformAlarm),this.workFlowAlarmsData.monitoredTransformAlarm.data=a(this.workFlowAlarmsData.monitoredTransformAlarm.data),this.workFlowAlarmsData.transformAlarmData=Object.assign({},this.workFlowAlarmsData.transformAlarmData),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.monitoredTransformAlarm.rerenderSubject.next(!0),this.workFlowAlarmsData.transformAlarmData.rerenderSubject.next(!0)}},{key:"removeSelectedIndividualAlarmList",value:function(){var o=this;this.workFlowAlarmsData.individualAlarmData.data.forEach(function(a){!a.selectedAlready&&a.isChecked&&(a.isChecked=!1,a.checkedTemporarily=!0)}),this.workFlowAlarmsData.monitoredIndividualAlarm.data.forEach(function(a){if(a.isChecked){var t=o.workFlowAlarmsData.individualAlarmData.data.filter(function(o){return o.alarm_id==a.alarm_id});t&&t.length>0&&t.forEach(function(a){a.disabled=!1,a.isChecked=!1,a.selectedAlready=!1})}}),this.workFlowAlarmsData.monitoredIndividualAlarm.data=this.workFlowAlarmsData.individualAlarmData.data.filter(function(a){return 1==a.isChecked}),this.workFlowAlarmsData.monitoredIndividualAlarm.data=JSON.parse(JSON.stringify(this.workFlowAlarmsData.monitoredIndividualAlarm.data)),this.workFlowAlarmsData.monitoredIndividualAlarm.data.forEach(function(a){a.disabled=!1,a.isChecked=!1,a.selectedAlready=!1}),this.workFlowAlarmsData.individualAlarmData.data.forEach(function(a){a.checkedTemporarily&&(a.isChecked=!0,a.checkedTemporarily=!1)}),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.individualAlarmData=Object.assign({},this.workFlowAlarmsData.individualAlarmData),this.workFlowAlarmsData.individualAlarmData.data=a(this.workFlowAlarmsData.individualAlarmData.data),this.workFlowAlarmsData.monitoredIndividualAlarm=Object.assign({},this.workFlowAlarmsData.monitoredIndividualAlarm),this.workFlowAlarmsData.monitoredIndividualAlarm.data=a(this.workFlowAlarmsData.monitoredIndividualAlarm.data),this.workFlowAlarmsData.individualAlarmData.rerenderSubject.next(!0),this.workFlowAlarmsData.monitoredIndividualAlarm.rerenderSubject.next(!0)}},{key:"removeSelectedGroupAlarmList",value:function(){var o=this;this.workFlowAlarmsData.groupAlarmData.data.forEach(function(a){!a.selectedAlready&&a.isChecked&&(a.isChecked=!1,a.checkedTemporarily=!0)}),this.workFlowAlarmsData.monitoredGroupAlarm.data.forEach(function(a){if(a.isChecked){var t=o.workFlowAlarmsData.groupAlarmData.data.find(function(o){return o.group_id==a.group_id});t&&(t.disabled=!1,t.selectedAlready=!1,t.isChecked=!1)}}),this.workFlowAlarmsData.monitoredGroupAlarm.data=this.workFlowAlarmsData.groupAlarmData.data.filter(function(a){return 1==a.isChecked}),this.workFlowAlarmsData.monitoredGroupAlarm.data=JSON.parse(JSON.stringify(this.workFlowAlarmsData.monitoredGroupAlarm.data)),this.workFlowAlarmsData.monitoredGroupAlarm.data.forEach(function(a){a.disabled=!1,a.selectedAlready=!1,a.isChecked=!1}),this.workFlowAlarmsData.groupAlarmData.data.forEach(function(a){a.checkedTemporarily&&(a.isChecked=!0,a.checkedTemporarily=!1)}),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.groupAlarmData=Object.assign({},this.workFlowAlarmsData.groupAlarmData),this.workFlowAlarmsData.groupAlarmData.data=a(this.workFlowAlarmsData.groupAlarmData.data),this.workFlowAlarmsData.monitoredGroupAlarm=Object.assign({},this.workFlowAlarmsData.monitoredGroupAlarm),this.workFlowAlarmsData.monitoredGroupAlarm.data=a(this.workFlowAlarmsData.monitoredGroupAlarm.data),this.workFlowAlarmsData.groupAlarmData.rerenderSubject.next(!0),this.workFlowAlarmsData.monitoredGroupAlarm.rerenderSubject.next(!0)}},{key:"removeSelectedTransformAlarmList",value:function(){var o=this;this.workFlowAlarmsData.transformAlarmData.data.forEach(function(a){!a.selectedAlready&&a.isChecked&&(a.isChecked=!1,a.checkedTemporarily=!0)}),this.workFlowAlarmsData.monitoredTransformAlarm.data.forEach(function(a){if(a.isChecked){var t=o.workFlowAlarmsData.transformAlarmData.data.find(function(o){return o.alarmRuleId==a.alarmRuleId});t&&(t.disabled=!1,t.isChecked=!1,t.selectedAlready=!1)}}),this.workFlowAlarmsData.monitoredTransformAlarm.data=this.workFlowAlarmsData.transformAlarmData.data.filter(function(a){return 1==a.isChecked}),this.workFlowAlarmsData.monitoredTransformAlarm.data=JSON.parse(JSON.stringify(this.workFlowAlarmsData.monitoredTransformAlarm.data)),this.workFlowAlarmsData.monitoredTransformAlarm.data.forEach(function(a){a.disabled=!1,a.isChecked=!1,a.selectedAlready=!1}),this.workFlowAlarmsData.transformAlarmData.data.forEach(function(a){a.checkedTemporarily&&(a.isChecked=!0,a.checkedTemporarily=!1)}),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.transformAlarmData=Object.assign({},this.workFlowAlarmsData.transformAlarmData),this.workFlowAlarmsData.transformAlarmData.data=a(this.workFlowAlarmsData.transformAlarmData.data),this.workFlowAlarmsData.monitoredTransformAlarm=Object.assign({},this.workFlowAlarmsData.monitoredTransformAlarm),this.workFlowAlarmsData.monitoredTransformAlarm.data=a(this.workFlowAlarmsData.monitoredTransformAlarm.data),this.workFlowAlarmsData.transformAlarmData.rerenderSubject.next(!0),this.workFlowAlarmsData.monitoredTransformAlarm.rerenderSubject.next(!0)}},{key:"calculateTotalMonitoredAlarms",value:function(){var a=this.workFlowAlarmsData.monitoredGroupAlarm.data.reduce(function(a,o){return a+Number(o.no_of_alarms)},0);this.workFlowAlarmsData.totMonitoredAlarms=this.workFlowAlarmsData.monitoredIndividualAlarm.data.length+a+this.workFlowAlarmsData.monitoredTransformAlarm.data.length}},{key:"callAddRemove",value:function(a){"group"==a.table&&"add"==a.mode?(this.selectedAlarmsActiveTab="selected_alarm_groups",this.addSelectedGroupAlarmList()):"transform"==a.table&&"add"==a.mode?(this.selectedAlarmsActiveTab="selected_transform_alarms",this.addSelectedTransformAlarmList()):"individual"==a.table&&"add"==a.mode?(this.selectedAlarmsActiveTab="selected_individual_alarms",this.checkrulesExist()):"monitoredGroup"==a.table&&"remove"==a.mode?(this.alarmsActiveTab="alarm_group",this.removeSelectedGroupAlarmList()):"monitoredTransform"==a.table&&"remove"==a.mode?(this.alarmsActiveTab="transform_alarm",this.removeSelectedTransformAlarmList()):"monitoredIndividual"==a.table&&"remove"==a.mode&&(this.alarmsActiveTab="individual_alarm",this.removeSelectedIndividualAlarmList())}},{key:"checkrulesExist",value:function(){var a=this,o=this.workFlowAlarmsData.individualAlarmData.data.filter(function(a){return a.alarm_name.includes("multiple-onts-down")&&"PON transformed"==a.alarm_category&&1==a.isChecked});if(0==o.length)this.errorMsg.emit(!1),this.addSelectedIndividualAlarmList();else{var t=!1,i="";if(o.forEach(function(o){o.rulesnotexist&&(i+=a.language.rulesNotExist(o.alarm_name),t=!0)}),t)return this.errorMsg.emit(i),this.canShowTableBodySubject.next(!0),!1;this.errorMsg.emit(!1),this.addSelectedIndividualAlarmList()}}},{key:"checkCategorySeverity",value:function(){var a,o=!1;!this.workFlowAlarmsData.individualAlarmData.prevSearchCategory&&!this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity&&this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory||!this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity&&!this.workFlowAlarmsData.individualAlarmData.prevSearchCategory&&this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity||this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory&&this.workFlowAlarmsData.individualAlarmData.prevSearchCategory==this.workFlowAlarmsData.individualAlarmData.searchCategory||this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity&&this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity==this.workFlowAlarmsData.individualAlarmData.searchSeverity?o=!0:"CATEGORY"==this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity&&this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity?a="Are you sure you want to remove the Monitored Alarms in Category <b> (".concat(this.workFlowAlarmsData.individualAlarmData.prevSearchCategory,"-").concat(this.workFlowAlarmsData.monitoredIndividualAlarm.data.length,") </b>?"):"SEVERITY"==this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity&&this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory?a="Are you sure you want to remove the Monitored Alarms in Severity <b> (".concat(this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.charAt(0).toUpperCase()+this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.slice(1),"-").concat(this.workFlowAlarmsData.monitoredIndividualAlarm.data.length,") </b> ?"):this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory&&this.workFlowAlarmsData.individualAlarmData.prevSearchCategory!=this.workFlowAlarmsData.individualAlarmData.searchCategory?a="Are you sure you want to remove the Monitored Alarms in Category <b> (".concat(this.workFlowAlarmsData.individualAlarmData.prevSearchCategory,"-").concat(this.workFlowAlarmsData.monitoredIndividualAlarm.data.length,") </b> ?"):this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity&&this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity!=this.workFlowAlarmsData.individualAlarmData.searchSeverity&&(a="Are you sure you want to remove the Monitored Alarms in Severity <b> (".concat(this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.charAt(0).toUpperCase()+this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.slice(1),"-").concat(this.workFlowAlarmsData.monitoredIndividualAlarm.data.length,") </b> ?")),o?(this.workFlowAlarmsData.individualAlarmData.searchCategory&&(this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity=void 0,this.workFlowAlarmsData.individualAlarmData.prevSearchCategory=this.workFlowAlarmsData.individualAlarmData.searchCategory,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="CATEGORY"),this.workFlowAlarmsData.individualAlarmData.searchSeverity&&(this.workFlowAlarmsData.individualAlarmData.prevSearchCategory=void 0,this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity=this.workFlowAlarmsData.individualAlarmData.searchSeverity,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="SEVERITY"),this.addSelectedIndividualAlarmList()):this.removeAlarms(a)}},{key:"changeNavPills",value:function(a,o,t){t.preventDefault(),"non-monitored"==o?this.alarmsActiveTab=a:this.selectedAlarmsActiveTab=a}},{key:"removeAlarms",value:function(a){this.alarmRemoveError="",this.removeName=a,this.modalRef&&this.close(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"close",value:function(a){this.modalLoader=!1,this.modalService.dismissAll(),this.modalRef.close(),"No"==a&&this.canShowTableBodySubject.next(!0)}},{key:"closeAlert",value:function(){this.canShowTableBodySubject.next(!0),this.alarmRemoveError=""}},{key:"doRemoveAlarms",value:function(){this.workFlowAlarmsData.individualAlarmData.searchCategory&&(this.workFlowAlarmsData.individualAlarmData.prevSearchCategory=this.workFlowAlarmsData.individualAlarmData.searchCategory,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="CATEGORY"),this.workFlowAlarmsData.individualAlarmData.searchSeverity&&(this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity=this.workFlowAlarmsData.individualAlarmData.searchSeverity,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="SEVERITY"),this.workFlowAlarmsData.individualAlarmData.data.forEach(function(a){1==a.selectedAlready&&(a.disabled=!1,a.selectedAlready=!1,a.isChecked=!1)}),this.workFlowAlarmsData.monitoredIndividualAlarm.data=[],this.addSelectedIndividualAlarmList(),this.close()}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}}]),o}();return o.\u0275fac=function(a){return new(a||o)(g.Y36(v.s),g.Y36(C.FF),g.Y36(C.FF))},o.\u0275cmp=g.Xpm({type:o,selectors:[["app-workflow-alarms"]],viewQuery:function(a,o){var t;(1&a&&(g.Gf(X,7),g.Gf($,7),g.Gf(aa,7)),2&a)&&(g.iGM(t=g.CRH())&&(o.nonMonitoredView=t.first),g.iGM(t=g.CRH())&&(o.monitoredView=t.first),g.iGM(t=g.CRH())&&(o.deleteModal=t.first))},inputs:{workFlowAlarmsData:"workFlowAlarmsData"},outputs:{getWorkFlowAPIEmitter:"getWorkFlowAPIEmitter",errorMsg:"errorMsg"},decls:55,vars:26,consts:[[1,"container"],[1,"row","justify-content-between"],[1,"col-md-6","pl-0"],[1,"row"],[1,"col-md-12"],[1,"heading-4"],[1,"Lists"],[1,"box-list"],[1,"alarm-menu-list"],[1,"nav","nav-pills"],["nonMonitoredView",""],["data-toggle","pill","href","#individual_alarms",3,"ngClass","click"],[1,"tab-content"],["id","individual_alarms",1,"tab-pane","alarm-menu-info",3,"ngClass"],[1,"alarm-menu-info"],[3,"alarmData","canShowTableBodyInputSubject","addRemoveAlarmList"],[4,"ngIf"],[1,"col-md-6","pr-0"],[1,"error"],["monitoredView",""],["data-toggle","pill","href","#individual_alarms_selected",3,"ngClass","click"],["id","individual_alarms_selected",1,"tab-pane","alarm-menu-info",3,"ngClass"],[3,"alarmData","addRemoveAlarmList"],["noMonitoredAlarmsTemplate",""],["noAlarmsTemplate",""],["deleteModal",""],[3,"ngTemplateOutlet"],[1,"text-center",2,"color","#808080","margin-top","100px"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHtml"],[1,"modal-footer"],["type","button",1,"btn-default","btn-dft",3,"click"],["type","button",1,"btn","btn-primary",2,"margin-left","3px",3,"click"]],template:function(a,o){1&a&&(g.TgZ(0,"section"),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g.TgZ(5,"div",4),g.TgZ(6,"div",5),g._uU(7),g.qZA(),g.TgZ(8,"span",6),g._uU(9),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",3),g.TgZ(11,"div",4),g.TgZ(12,"div",7),g.TgZ(13,"div",8),g.TgZ(14,"ul",9,10),g.TgZ(16,"li"),g.TgZ(17,"a",11),g.NdJ("click",function(a){return o.changeNavPills("individual_alarm","non-monitored",a)}),g._uU(18),g.qZA(),g.qZA(),g.qZA(),g.TgZ(19,"div",12),g.TgZ(20,"div",13),g.TgZ(21,"div",14),g.TgZ(22,"app-workflow-datatable",15),g.NdJ("addRemoveAlarmList",function(a){return o.callAddRemove(a)}),g.qZA(),g.qZA(),g.YNc(23,ta,1,1,void 0,16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(24,"div",17),g.TgZ(25,"div",3),g.TgZ(26,"div",4),g.TgZ(27,"div",5),g._uU(28),g.TgZ(29,"span",18),g._uU(30,"*"),g.qZA(),g._uU(31),g.ALo(32,"number"),g.qZA(),g.TgZ(33,"span",6),g._uU(34),g.qZA(),g.qZA(),g.qZA(),g.TgZ(35,"div",3),g.TgZ(36,"div",4),g.TgZ(37,"div",7),g.TgZ(38,"div",8),g.TgZ(39,"ul",9,19),g.TgZ(41,"li"),g.TgZ(42,"a",20),g.NdJ("click",function(a){return o.changeNavPills("selected_individual_alarms","monitored",a)}),g._uU(43),g.qZA(),g.qZA(),g.qZA(),g.TgZ(44,"div",12),g.TgZ(45,"div",21),g.TgZ(46,"div",14),g.TgZ(47,"app-workflow-datatable",22),g.NdJ("addRemoveAlarmList",function(a){return o.callAddRemove(a)}),g.qZA(),g.qZA(),g.YNc(48,ea,1,1,void 0,16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(49,na,10,3,"ng-template",null,23,g.W1O),g.YNc(51,ra,6,1,"ng-template",null,24,g.W1O),g.YNc(53,la,12,3,"ng-template",null,25,g.W1O),g.qZA()),2&a&&(g.xp6(7),g.Oqu(o.language["All Alarms"]),g.xp6(2),g.hij(" ",o.language["Select and add the alarms you wish to monitor"]," "),g.xp6(8),g.Q6J("ngClass",g.VKq(18,sa,"individual_alarm"==o.alarmsActiveTab)),g.xp6(1),g.Oqu(o.language.Alarms),g.xp6(2),g.Q6J("ngClass",g.VKq(20,sa,"individual_alarm"==o.alarmsActiveTab)),g.xp6(2),g.Q6J("alarmData",o.workFlowAlarmsData.individualAlarmData)("canShowTableBodyInputSubject",o.canShowTableBodySubject),g.xp6(1),g.Q6J("ngIf",(null==o.workFlowAlarmsData||null==o.workFlowAlarmsData.individualAlarmData||null==o.workFlowAlarmsData.individualAlarmData.data?null:o.workFlowAlarmsData.individualAlarmData.data.length)<=0),g.xp6(5),g.hij(" ",o.language["Monitored Alarms"],""),g.xp6(3),g.hij(" (",g.lcZ(32,16,o.workFlowAlarmsData.totMonitoredAlarms),") "),g.xp6(3),g.hij(" ",o.language["The following alarms will be monitored by this notification schedule"]," "),g.xp6(8),g.Q6J("ngClass",g.VKq(22,sa,"selected_individual_alarms"==o.selectedAlarmsActiveTab)),g.xp6(1),g.Oqu(o.language.Alarms),g.xp6(2),g.Q6J("ngClass",g.VKq(24,sa,"selected_individual_alarms"==o.selectedAlarmsActiveTab)),g.xp6(2),g.Q6J("alarmData",o.workFlowAlarmsData.monitoredIndividualAlarm),g.xp6(1),g.Q6J("ngIf",(null==o.workFlowAlarmsData||null==o.workFlowAlarmsData.monitoredIndividualAlarm||null==o.workFlowAlarmsData.monitoredIndividualAlarm.data?null:o.workFlowAlarmsData.monitoredIndividualAlarm.data.length)<=0))},directives:[l.mk,K,l.O5,l.tP],pipes:[l.JJ],styles:[".heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px}.Lists[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400;line-height:24px;letter-spacing:0em;text-align:left;color:gray}.box-list[_ngcontent-%COMP%]{border:1px solid #EBEAEF;box-sizing:border-box;box-shadow:2px 3px 43px -12px #4d4d4d26;border-radius:24px;padding:26px;height:940px;overflow-y:hidden;margin-top:16px;margin-bottom:24px}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;position:relative;border-radius:26px;background-color:#edf5ff;width:-moz-max-content;width:max-content}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;min-width:110px;text-align:center}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:4px 12px 4px 13px;color:#333;font-size:14px;line-height:18px;text-decoration:none}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#0054b2;color:#fff;border-radius:26px}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#0054b2;color:#fff;border-radius:26px}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.alarm-menu-info[_ngcontent-%COMP%]{width:100%}.add-search-icon[_ngcontent-%COMP%]{background-color:#0279ff;width:40px;height:100%;border-radius:25px;position:absolute;right:15px;top:0px;padding:7px}  .dataTables_length{display:none!important}  .dataTables_filter{display:none!important}"]}),o}(),ca=n(40205),ua=n(88002),ma=n(5304),wa=n(55533),ha=n(18638),ga=function(a){return{"mr-3":a}};function va(a,o){if(1&a&&(g.ynx(0),g.TgZ(1,"div",11),g._UZ(2,"input",12),g.TgZ(3,"label",13),g._uU(4),g.qZA(),g.qZA(),g.BQk()),2&a){var t=o.$implicit,i=g.oxw();g.xp6(1),g.Q6J("ngClass",g.VKq(5,ga,"immediately"==t.name)),g.xp6(1),g.s9C("id",t.value),g.s9C("value",t.value),g.xp6(1),g.s9C("for",t.value),g.xp6(1),g.hij(" ",i.language[t.name]," ")}}function fa(a,o){if(1&a&&(g.TgZ(0,"div",40),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["Please enter value less than or equal to"]," 10000. ")}}function ka(a,o){if(1&a&&(g.TgZ(0,"div",40),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["Please enter value greater than or equal to"]," 1. ")}}function Da(a,o){if(1&a&&(g.TgZ(0,"div",40),g.TgZ(1,"p",41),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}function pa(a,o){if(1&a&&(g.TgZ(0,"div",40),g.TgZ(1,"p",41),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}function Fa(a,o){if(1&a&&(g.TgZ(0,"div",42),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["Please enter value less than or equal to"]," 120. ")}}function Aa(a,o){if(1&a&&(g.TgZ(0,"div",42),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["Please enter value greater than or equal to"]," 1. ")}}function Ca(a,o){if(1&a&&(g.TgZ(0,"div",40),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["Please enter value less than or equal to"]," 240. ")}}function ya(a,o){if(1&a&&(g.TgZ(0,"div",40),g._uU(1),g.qZA()),2&a){var t=g.oxw(2);g.xp6(1),g.hij(" ",t.language["Please enter value greater than or equal to"]," 0. ")}}function ba(a,o){if(1&a&&(g.TgZ(0,"div",40),g.TgZ(1,"p",41),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}function Ta(a,o){}function xa(a,o){if(1&a&&(g.TgZ(0,"div",42),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}var Za=function(a){return{"mt-3":a}},Sa=function(){return{width:"100%",height:"36px"}},_a=function(){return{height:"36px"}};function Oa(a,o){if(1&a){var t=g.EpF();g.ynx(0,43),g.TgZ(1,"div",44),g.TgZ(2,"div",45),g.TgZ(3,"div",46),g.TgZ(4,"input",47),g.NdJ("click",function(a){var o=g.CHM(t).index;return g.oxw(2).onCheckExclusionDays(a,o)}),g.qZA(),g.TgZ(5,"label",13),g._uU(6),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"div",48),g.TgZ(8,"p-calendar",49),g.NdJ("input",function(a){var o=g.CHM(t).index;return g.oxw(2).onChangeExclusionTime(a,"dayFrom",o,"input")})("onSelect",function(a){var o=g.CHM(t).index;return g.oxw(2).onChangeExclusionTime(a,"dayFrom",o,"select")}),g.qZA(),g.qZA(),g.TgZ(9,"div",50),g._uU(10),g.qZA(),g.TgZ(11,"div",48),g.TgZ(12,"p-calendar",51),g.NdJ("input",function(a){var o=g.CHM(t).index;return g.oxw(2).onChangeExclusionTime(a,"dayTo",o,"input")})("onSelect",function(a){var o=g.CHM(t).index;return g.oxw(2).onChangeExclusionTime(a,"dayTo",o,"select")}),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&a){var i=o.index,e=g.oxw(2);g.Q6J("formGroupName",i),g.xp6(1),g.Q6J("ngClass",g.VKq(22,Za,0==i)),g.xp6(3),g.s9C("id",null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].value),g.Q6J("readonly","false"==(null==e.workFlowConditionsData||null==e.workFlowConditionsData.workFlowConditionsForm||null==e.workFlowConditionsData.workFlowConditionsForm.controls||null==e.workFlowConditionsData.workFlowConditionsForm.controls.immediate?null:e.workFlowConditionsData.workFlowConditionsForm.controls.immediate.value)),g.xp6(1),g.s9C("for",null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].value),g.xp6(1),g.hij("",e.language[null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].name]," "),g.xp6(2),g.Akn(g.DdM(24,Sa)),g.s9C("id",null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].dayFrom),g.Q6J("maxDate",e.workFlowConditionsData.weekDays[i].maxTime)("inputStyle",g.DdM(25,_a))("autoZIndex",!0)("showIcon",!1),g.xp6(2),g.Oqu(e.language.to),g.xp6(2),g.Akn(g.DdM(26,Sa)),g.s9C("id",null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].dayTo),g.Q6J("defaultDate",e.workFlowConditionsData.weekDays[i].defaultTime)("minDate",e.workFlowConditionsData.weekDays[i].minTime)("inputStyle",g.DdM(27,_a))("autoZIndex",!0)("showIcon",!1)}}var qa=function(a){return{cursornallow:a}},Ma=function(a){return{"diable-div":a}};function Ia(a,o){if(1&a){var t=g.EpF();g.ynx(0),g.TgZ(1,"div",14),g.TgZ(2,"div",15),g.TgZ(3,"div",16),g._uU(4),g.TgZ(5,"span",17),g._uU(6,"*"),g.qZA(),g.qZA(),g._UZ(7,"div",18),g.TgZ(8,"div",19),g.TgZ(9,"div",20),g.TgZ(10,"div",21),g.TgZ(11,"input",22),g.NdJ("keyup",function(a){return g.CHM(t),g.oxw().enforceMinMax(a,"raiseThreshold")})("keydown",function(a){return g.CHM(t),g.oxw().avoidInvalidValues(a)}),g.qZA(),g.qZA(),g.TgZ(12,"label",23),g._uU(13),g.qZA(),g.YNc(14,fa,2,1,"div",24),g.YNc(15,ka,2,1,"div",24),g.YNc(16,Da,3,1,"div",24),g.qZA(),g.qZA(),g.qZA(),g.TgZ(17,"div",15),g.TgZ(18,"div",16),g._uU(19),g.TgZ(20,"span",17),g._uU(21,"*"),g.qZA(),g.qZA(),g._UZ(22,"div",18),g.TgZ(23,"div",19),g.TgZ(24,"div",20),g.TgZ(25,"div",21),g.TgZ(26,"input",25),g.NdJ("keyup",function(a){return g.CHM(t),g.oxw().enforceMinMax(a,"duration")})("keydown",function(a){return g.CHM(t),g.oxw().avoidInvalidValues(a)}),g.qZA(),g.qZA(),g.TgZ(27,"label",26),g._uU(28),g.qZA(),g.YNc(29,pa,3,1,"div",24),g.YNc(30,Fa,2,1,"div",27),g.YNc(31,Aa,2,1,"div",27),g.qZA(),g.qZA(),g.qZA(),g.TgZ(32,"div",15),g.TgZ(33,"div",16),g._uU(34),g.TgZ(35,"span",17),g._uU(36,"*"),g.qZA(),g.qZA(),g._UZ(37,"div",28),g.TgZ(38,"div",19),g.TgZ(39,"div",20),g.TgZ(40,"div",21),g.TgZ(41,"input",29),g.NdJ("keyup",function(a){return g.CHM(t),g.oxw().enforceMinMax(a,"soakTime")})("keydown",function(a){return g.CHM(t),g.oxw().avoidInvalidValues(a)}),g.qZA(),g.qZA(),g.TgZ(42,"label",30),g._uU(43),g.qZA(),g.YNc(44,Ca,2,1,"div",24),g.YNc(45,ya,2,1,"div",24),g.YNc(46,ba,3,1,"div",24),g.qZA(),g.qZA(),g.qZA(),g.TgZ(47,"div",15),g.TgZ(48,"div",16),g._uU(49),g.qZA(),g.TgZ(50,"div",31),g._uU(51),g.qZA(),g.YNc(52,Ta,0,0,"ng-template",32),g.qZA(),g.TgZ(53,"div",33),g.TgZ(54,"div",16),g._uU(55),g.qZA(),g.TgZ(56,"div",34),g._UZ(57,"input",35),g._UZ(58,"label",36),g.qZA(),g.YNc(59,xa,3,1,"div",27),g.qZA(),g.TgZ(60,"div",15),g.TgZ(61,"div",37),g.TgZ(62,"div",16),g._uU(63),g.qZA(),g.qZA(),g._UZ(64,"div",28),g.ynx(65,38),g.YNc(66,Oa,13,28,"ng-container",39),g.BQk(),g.qZA(),g.qZA(),g.BQk()}if(2&a){var i=g.oxw(),e=g.MAs(14);g.xp6(4),g.AsE("",i.language.Alarm," ",i.language["Quantity Threshold"],""),g.xp6(3),g.Q6J("innerHtml",i.language.quantity_threshold_description,g.oJD),g.xp6(4),g.Q6J("min",i.workFlowConditionsData.minRaiseThreshold-1!=0?i.workFlowConditionsData.minRaiseThreshold-1:i.workFlowConditionsData.minRaiseThreshold)("max",1e4),g.xp6(2),g.Oqu(i.language["Alarm(s)"]),g.xp6(1),g.Q6J("ngIf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.max),g.xp6(1),g.Q6J("ngIf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.min),g.xp6(1),g.Q6J("ngIf",(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold?null:i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.touched)&&((null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold?null:i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.invalid)||(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold||null==i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.required))&&!(null!=i.workFlowConditionsData&&null!=i.workFlowConditionsData.workFlowConditionsForm&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors&&i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.max)&&!(null!=i.workFlowConditionsData&&null!=i.workFlowConditionsData.workFlowConditionsForm&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors&&i.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.min)),g.xp6(3),g.AsE("",i.language.Alarm," ",i.language["Duration Threshold"],""),g.xp6(3),g.Q6J("innerHtml",i.language.time_duration_description,g.oJD),g.xp6(6),g.Oqu(i.language["Minute(s)"]),g.xp6(1),g.Q6J("ngIf",(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration?null:i.workFlowConditionsData.workFlowConditionsForm.controls.duration.touched)&&((null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration?null:i.workFlowConditionsData.workFlowConditionsForm.controls.duration.invalid)||(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.required))&&!(null!=i.workFlowConditionsData&&null!=i.workFlowConditionsData.workFlowConditionsForm&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.duration&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors&&i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.max)&&!(null!=i.workFlowConditionsData&&null!=i.workFlowConditionsData.workFlowConditionsForm&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.duration&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors&&i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.min)),g.xp6(1),g.Q6J("ngIf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.max),g.xp6(1),g.Q6J("ngIf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration||null==i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.min),g.xp6(3),g.AsE("",i.language.Alarm," ",i.language["Soak Time"],""),g.xp6(3),g.Q6J("innerHTML",i.language["The duration for which all thresholds must be met in order to trigger this notification"],g.oJD),g.xp6(6),g.Oqu(i.language["Minute(s)"]),g.xp6(1),g.Q6J("ngIf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.max),g.xp6(1),g.Q6J("ngIf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.min),g.xp6(1),g.Q6J("ngIf",(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime?null:i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.touched)&&((null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime?null:i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.invalid)||(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime||null==i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.required))&&!(null!=i.workFlowConditionsData&&null!=i.workFlowConditionsData.workFlowConditionsForm&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors&&i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.max)&&!(null!=i.workFlowConditionsData&&null!=i.workFlowConditionsData.workFlowConditionsForm&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime&&null!=i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors&&i.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.min)),g.xp6(3),g.Oqu(i.language.Geography),g.xp6(2),g.hij(" ",i.language.immediate_geography_msg," "),g.xp6(1),g.Q6J("ngTemplateOutlet",e),g.xp6(1),g.Q6J("ngClass",g.VKq(35,qa,(null==i.workFlowConditionsData?null:i.workFlowConditionsData.soakTime)>0)),g.xp6(2),g.hij(" ",i.language["Cleared Alarm Notification"]," "),g.xp6(2),g.Q6J("ngClass",g.VKq(37,Ma,(null==i.workFlowConditionsData?null:i.workFlowConditionsData.soakTime)>0)),g.xp6(1),g.Q6J("ngClass",g.VKq(39,Ma,(null==i.workFlowConditionsData?null:i.workFlowConditionsData.soakTime)>0))("innerHTML",i.language.clearedAlarmNotificationLabel,g.oJD),g.xp6(1),g.Q6J("ngIf",(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold?null:i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.touched)&&((null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold?null:i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.invalid)||(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold||null==i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.errors.required))),g.xp6(4),g.Oqu(i.language.Exclusions),g.xp6(1),g.Q6J("innerHTML",i.language["Select the days that will not be included in this schedule"],g.oJD),g.xp6(2),g.Q6J("ngForOf",null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls||null==i.workFlowConditionsData.workFlowConditionsForm.controls.weekDays?null:i.workFlowConditionsData.workFlowConditionsForm.controls.weekDays.controls)}}function Pa(a,o){if(1&a&&g._uU(0),2&a){var t=o.item,i=g.oxw(2);g.hij(" ",i.language[t.name]," ")}}function Na(a,o){if(1&a&&g._uU(0),2&a){var t=o.item,i=g.oxw(2);g.hij(" ",i.language[t.name]," ")}}var Ea=function(a,o){return{"select-day":a,day:o}};function ja(a,o){if(1&a){var t=g.EpF();g.ynx(0,43),g.TgZ(1,"div",66),g.NdJ("click",function(){var a=g.CHM(t).index,o=g.oxw(3);return o.selectWeeklySchedule(null==o.workFlowConditionsData?null:o.workFlowConditionsData.weekDays[a])}),g.TgZ(2,"span",67),g._uU(3),g.qZA(),g.qZA(),g.BQk()}if(2&a){var i=o.index,e=g.oxw(3);g.Q6J("formGroupName",i),g.xp6(1),g.s9C("id",null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].scheduleWeekly),g.Q6J("ngClass",g.WLB(4,Ea,1==(null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].scheduleWeeklyStatus),0==(null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].scheduleWeeklyStatus))),g.xp6(2),g.hij("",null==e.workFlowConditionsData?null:e.workFlowConditionsData.weekDays[i].scheduleWeekly," ")}}function Ja(a,o){if(1&a&&(g.TgZ(0,"div",65),g.ynx(1,38),g.YNc(2,ja,4,7,"ng-container",39),g.BQk(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.Q6J("ngForOf",null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls||null==t.workFlowConditionsData.workFlowConditionsForm.controls.weekDays?null:t.workFlowConditionsData.workFlowConditionsForm.controls.weekDays.controls)}}function Ua(a,o){if(1&a){var t=g.EpF();g.ynx(0),g.TgZ(1,"label",68),g._uU(2),g.TgZ(3,"span",17),g._uU(4,"*"),g.qZA(),g.qZA(),g.TgZ(5,"div",69),g.TgZ(6,"input",70),g.NdJ("keyup",function(a){return g.CHM(t),g.oxw(2).enforceMinMax(a,"dayOfMonth")}),g.qZA(),g.qZA(),g.BQk()}if(2&a){var i=g.oxw(2);g.xp6(2),g.Oqu(i.language.Day)}}function Va(a,o){if(1&a&&(g.TgZ(0,"div",42),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}function Qa(a,o){}var La=function(a){return{"w-100":a}};function Ra(a,o){if(1&a&&(g.ynx(0),g.TgZ(1,"div",2),g.TgZ(2,"div",3),g.TgZ(3,"div",52),g._uU(4),g.qZA(),g.TgZ(5,"div",2),g.TgZ(6,"div",15),g.TgZ(7,"label",53),g._uU(8),g.qZA(),g.TgZ(9,"p"),g._uU(10),g.qZA(),g.TgZ(11,"div",54),g.TgZ(12,"ng-select",55),g.YNc(13,Pa,1,1,"ng-template",56),g.YNc(14,Na,1,1,"ng-template",57),g.qZA(),g.qZA(),g.YNc(15,Ja,3,1,"div",58),g.TgZ(16,"div",59),g.TgZ(17,"label",60),g._uU(18),g.qZA(),g.TgZ(19,"div",61),g.YNc(20,Ua,7,1,"ng-container",9),g.TgZ(21,"div",62),g._UZ(22,"p-calendar",63),g.qZA(),g.qZA(),g.YNc(23,Va,3,1,"div",27),g.qZA(),g.qZA(),g.TgZ(24,"div",15),g.TgZ(25,"label",64),g._uU(26),g.qZA(),g.TgZ(27,"div",31),g._uU(28),g.qZA(),g.YNc(29,Qa,0,0,"ng-template",32),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.BQk()),2&a){var t=g.oxw(),i=g.MAs(14);g.xp6(4),g.hij(" ",t.language.TOptions," "),g.xp6(4),g.Oqu(t.language.Schedule),g.xp6(2),g.Oqu(t.language.alarm_shedule_msg),g.xp6(2),g.Q6J("items",t.recurrenceList)("searchable",!0)("clearable",!1),g.xp6(3),g.Q6J("ngIf","weekly"==(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm.controls.recurrence?null:t.workFlowConditionsData.workFlowConditionsForm.controls.recurrence.value)),g.xp6(3),g.Oqu(t.language["Start Schedule"]),g.xp6(2),g.Q6J("ngIf","monthly"==(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm.controls.recurrence?null:t.workFlowConditionsData.workFlowConditionsForm.controls.recurrence.value)),g.xp6(1),g.Q6J("ngClass",g.VKq(18,La,"monthly"!=(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm.controls.recurrence?null:t.workFlowConditionsData.workFlowConditionsForm.controls.recurrence.value))),g.xp6(1),g.Q6J("autoZIndex",!0)("timeOnly",!0)("showTime",!0)("showIcon",!0),g.xp6(1),g.Q6J("ngIf",(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth?null:t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.touched)&&((null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth?null:t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.invalid)||(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth||null==t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.errors?null:t.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.errors.required))||(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime?null:t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.touched)&&((null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime?null:t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.invalid)||(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime||null==t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.errors?null:t.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.errors.required))),g.xp6(3),g.Oqu(t.language.Geography),g.xp6(2),g.hij(" ",t.language.alarm_geography_msg," "),g.xp6(1),g.Q6J("ngTemplateOutlet",i)}}function Ha(a,o){if(1&a&&(g.TgZ(0,"div",42),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}function Ga(a,o){if(1&a&&(g.TgZ(0,"div",42),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.qZA()),2&a){var t=g.oxw(2);g.xp6(2),g.hij("",t.language["This field is required"],".")}}function Ya(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",71),g.TgZ(1,"label",72),g._uU(2),g.qZA(),g.TgZ(3,"div",4),g.TgZ(4,"ng-select",73),g.NdJ("add",function(a){return g.CHM(t),g.oxw().validateRegion(a)})("remove",function(a){return g.CHM(t),g.oxw().loadLocationValue(a)}),g.qZA(),g.YNc(5,Ha,3,1,"div",27),g.qZA(),g.qZA(),g.TgZ(6,"div",71),g.TgZ(7,"label",72),g._uU(8),g.qZA(),g.TgZ(9,"div",4),g.TgZ(10,"ng-select",74),g.NdJ("add",function(a){return g.CHM(t),g.oxw().validateLocation(a)})("remove",function(a){return g.CHM(t),g.oxw().removeLocationValue(a)}),g.qZA(),g.YNc(11,Ga,3,1,"div",27),g.qZA(),g.qZA()}if(2&a){var i=g.oxw();g.xp6(2),g.Oqu(i.language["Region(s)"]),g.xp6(2),g.s9C("placeholder",i.language.region),g.Q6J("multiple",!0)("items",null==i.workFlowConditionsData?null:i.workFlowConditionsData.regionsDataArray)("clearable",!1)("searchable",!0),g.xp6(1),g.Q6J("ngIf",(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.region?null:i.workFlowConditionsData.workFlowConditionsForm.controls.region.touched)&&((null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.region?null:i.workFlowConditionsData.workFlowConditionsForm.controls.region.invalid)||(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.region||null==i.workFlowConditionsData.workFlowConditionsForm.controls.region.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.region.errors.required))),g.xp6(3),g.hij(" ",i.language["Location(s)"],""),g.xp6(2),g.s9C("placeholder",i.language.Location),g.Q6J("multiple",!0)("items",null==i.workFlowConditionsData?null:i.workFlowConditionsData.locationDataArray)("clearable",!1)("searchable",!0),g.xp6(1),g.Q6J("ngIf",(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.location?null:i.workFlowConditionsData.workFlowConditionsForm.controls.location.touched)&&((null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.location?null:i.workFlowConditionsData.workFlowConditionsForm.controls.location.invalid)||(null==i.workFlowConditionsData||null==i.workFlowConditionsData.workFlowConditionsForm||null==i.workFlowConditionsData.workFlowConditionsForm.controls.location||null==i.workFlowConditionsData.workFlowConditionsForm.controls.location.errors?null:i.workFlowConditionsData.workFlowConditionsForm.controls.location.errors.required)))}}var Wa=function(){var o=function(){function o(a,i,e,n,r){t(this,o),this.ssoService=a,this.http=i,this.translateService=e,this.workflowService=n,this.issueService=r,this.regionSelected="All",this.locationSelected="All",this.scheduleMinDate=new Date,this._workFlowConditionsData={},this.recurrenceList=[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"}],this.triggerType=[{value:"true",name:"immediately"},{value:"false",name:"On a schedule"}],this.getWorkFlowAPIEmitter=new g.vpe}return e(o,[{key:"workFlowConditionsData",get:function(){return this._workFlowConditionsData},set:function(a){this._workFlowConditionsData=a}},{key:"ngOnInit",value:function(){var a,o,t,i,e,n,r,l,s=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(a){s.language=a}),this.workFlowConditionsData.conditionsFormEntered||(this.workFlowConditionsData&&this.workFlowConditionsData.workFlowConditionsForm&&(this.workFlowConditionsData.workFlowConditionsForm.get("region").setValue(["All"]),this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(["All"])),this.workFlowConditionsData.conditionsFormEntered=!0);var d=this.workFlowConditionsData&&this.workFlowConditionsData.workFlowConditionsForm?this.workFlowConditionsData.workFlowConditionsForm.controls:{};d&&(this.onChangeRecurrenceSubject=null===(o=null===(a=d.recurrence)||void 0===a?void 0:a.valueChanges)||void 0===o?void 0:o.subscribe(function(a){s.onSelectReccurence()}),this.onChangeTriggerSubject=null===(i=null===(t=d.immediate)||void 0===t?void 0:t.valueChanges)||void 0===i?void 0:i.subscribe(function(a){s.onSelectReccurence()}),this.onChangeSoakTimeSubject=null===(n=null===(e=d.soakTime)||void 0===e?void 0:e.valueChanges)||void 0===n?void 0:n.subscribe(function(a){s.workFlowConditionsData.soakTime=a,s.workFlowConditionsData.soakTime&&s.workFlowConditionsData.soakTime>0?(s.workFlowConditionsData.soakTimeChanged||(s.workFlowConditionsData.oldNotifyOnClear=d.notifyOnClear.value,s.workFlowConditionsData.soakTimeChanged=!0),d.notifyOnClear.setValue(!0)):(d.notifyOnClear.setValue(!(!s.workFlowConditionsData.oldNotifyOnClear&&0!=s.workFlowConditionsData.oldNotifyOnClear)&&s.workFlowConditionsData.oldNotifyOnClear),s.workFlowConditionsData.soakTimeChanged=!1)}),null===(r=d.raiseThreshold)||void 0===r||r.setValidators([c.kI.required,c.kI.min(this.workFlowConditionsData.minRaiseThreshold-1!=0?this.workFlowConditionsData.minRaiseThreshold-1:this.workFlowConditionsData.minRaiseThreshold)])),this.conditionFormSubject=null===(l=this.conditionFormSubmitted)||void 0===l?void 0:l.subscribe(function(a){var o,t;null===(t=null===(o=s.workFlowConditionsData)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t||t.markAllAsTouched()}),this.callMultipleAPI()}},{key:"callMultipleAPI",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.getWorkFlowAPIEmitter.emit(!0);case 1:case"end":return a.stop()}},a,this)}))}},{key:"validateRegion",value:function(a){var o=this.workFlowConditionsData.workFlowConditionsForm.get("region").value;if("All"===a)o=["All"];else{var t=o.indexOf("All");t>-1&&o.splice(t,1)}this.workFlowConditionsData.workFlowConditionsForm.get("region").setValue(o),this.loadLocationValue("")}},{key:"loadLocationValue",value:function(o){var t=this;this.clickedRegion="",this.locationSelected="All";var i=this.workFlowConditionsData.workFlowConditionsForm.get("region").value;if(this.regionSelected=i,this.regionSelected&&this.regionSelected!=["All"]){var e="";if(i.length&&i!==["All"]){if(-1!==i.indexOf("All"))return this.regionName=null,this.locationName=null,void(this.workFlowConditionsData.locationDataArray=["All"]);i.forEach(function(a){"All"!=a&&(e+="&region=".concat(a))}),this.locationsSubject=this.http.get("".concat(m.N.API_BASE_URL,"nfa/locations?tenant=0").concat(e)).pipe((0,ua.U)(function(a){return(a=t.issueService.appendFqn(a)).sort(function(a,o){return(a.name||"").toString().localeCompare((o.name||"").toString(),"en",{numeric:!1})}),a}),(0,ma.K)(this.handleError)).subscribe(function(o){t.workFlowConditionsData.locationDataArray=["All"];var i=o.map(function(a){var o=a.fqn.split(",").find(function(a){return a.includes("REGION")});return o.split("=").length>0&&(a.region_name=o.split("=")[1]),a});i.forEach(function(a,o){var t;a.check_region_name=a.region_name+" ("+(null===(t=a.fqn)||void 0===t?void 0:t.split("=")[1].split(",")[0])+")"}),t.workFlowConditionsData.locationDataArray=[].concat(a(t.workFlowConditionsData.locationDataArray),a(i));var e=t.workFlowConditionsData.workFlowConditionsForm.get("location").value;e&&e.length>0&&e.forEach(function(a,o){var i;"All"!=a&&-1==(null===(i=t.workFlowConditionsData.locationDataArray)||void 0===i?void 0:i.findIndex(function(o){return o.id==a}))&&(e=null==e?void 0:e.filter(function(o){return o!=a}))}),(!e||0==e.length)&&(e=["All"]),t.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(e)},function(a){}),this.regionName=i}else this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(["All"]),this.workFlowConditionsData.workFlowConditionsForm.get("region").setValue(["All"]),this.regionName=null,this.locationName=null,this.workFlowConditionsData.locationDataArray=["All"]}}},{key:"removeLocationValue",value:function(a){var o=this.workFlowConditionsData.workFlowConditionsForm.get("location").value;o&&o!=["All"]&&(0==o.length||!o)&&this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(["All"])}},{key:"validateLocation",value:function(a){var o=this.workFlowConditionsData.workFlowConditionsForm.get("location").value;if("All"===a)o=["All"];else{var t=o.indexOf("All");t>-1&&o.splice(t,1)}this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(o)}},{key:"enforceMinMax",value:function(a,o){var t=this;setTimeout(function(){var i=t.workflowService.enforceMinMax(a);-1!=i&&t.workFlowConditionsData.workFlowConditionsForm.get(o).setValue(i)},1e3)}},{key:"onChangeExclusionTime",value:function(a,o,t,i){var e,n,r=this.workFlowConditionsData.workFlowConditionsForm.get("weekDays").at(t);if(r.value.dayFrom){var l=new Date(r.value.dayFrom);l.setSeconds(0),r.value.dayFrom=l}if(r.value.dayTo){var s=new Date(r.value.dayTo);s.setSeconds(0),r.value.dayTo=s}if("dayFrom"==o&&r.value.dayFrom&&(a&&a.target&&a.target.value&&(null===(e=a.target)||void 0===e?void 0:e.value.length)>=8||"select"==i)){var d=this.getDefaultMinDate(r.value.dayFrom,"min"),c=this.getDefaultMinDate(r.value.dayFrom,"default");r.value.dayTo&&r.value.dayFrom>=r.value.dayTo&&r.patchValue({dayTo:""}),this.workFlowConditionsData.weekDays[t].minTime=d,this.workFlowConditionsData.weekDays[t].defaultTime=c}else"dayTo"==o&&r.value.dayTo&&(a&&a.target&&a.target.value&&(null===(n=a.target)||void 0===n?void 0:n.value.length)>=8||"select"==i)&&r.value.dayFrom>=r.value.dayTo&&r.patchValue({dayTo:""})}},{key:"onCheckExclusionDays",value:function(a,o){var t=a.target.checked,i=this.workFlowConditionsData.workFlowConditionsForm.get("weekDays").at(o);if(t){if(!i.value.dayFrom&&!i.value.dayTo){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0);var n=new Date;n.setHours(23),n.setMinutes(59),n.setSeconds(0),i.patchValue({dayFrom:e,dayTo:n});var r=this.getDefaultMinDate(e,"min"),l=this.getDefaultMinDate(e,"default");this.workFlowConditionsData.weekDays[o].minTime=r,this.workFlowConditionsData.weekDays[o].defaultTime=l}}else i.patchValue({dayFrom:"",dayTo:""})}},{key:"getDefaultMinDate",value:function(a,o){var t=new Date(a);return"default"==o?(t.setHours(23),t.setMinutes(59),t.setSeconds(0)):t.setMinutes(t.getMinutes()+1),t}},{key:"onSelectReccurence",value:function(){var a,o,t,i,e,n,r=null===(i=null===(t=null===(o=null===(a=this.workFlowConditionsData)||void 0===a?void 0:a.workFlowConditionsForm)||void 0===o?void 0:o.controls)||void 0===t?void 0:t.recurrence)||void 0===i?void 0:i.value,l=null===(n=null===(e=this.workFlowConditionsData)||void 0===e?void 0:e.workFlowConditionsForm)||void 0===n?void 0:n.controls;l&&("false"==l.immediate.value?(("daily"==r||"weekly"==r||"monthly"==r)&&l.scheduleStartTime.setValidators([c.kI.required]),"monthly"==r&&l.dayOfMonth.setValidators([c.kI.required]),("daily"==r||"weekly"==r||""==r)&&(l.dayOfMonth.setErrors(null),l.dayOfMonth.clearValidators())):(l.dayOfMonth.setErrors(null),l.dayOfMonth.clearValidators(),l.scheduleStartTime.setErrors(null),l.scheduleStartTime.clearValidators()))}},{key:"selectWeeklySchedule",value:function(a){var o,t,i,e=this.workFlowConditionsData.weekDays.find(function(o){return o.value==a.value});e.scheduleWeeklyStatus=!e.scheduleWeeklyStatus,null===(i=(null===(t=null===(o=this.workFlowConditionsData)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t?void 0:t.controls).weekDays)||void 0===i||i.controls.forEach(function(o){var t;o.value.value==a.value&&(null===(t=null==o?void 0:o.controls.scheduleWeeklyStatus)||void 0===t||t.setValue(e.scheduleWeeklyStatus))})}},{key:"handleError",value:function(a){return(0,ca._)(a)}},{key:"avoidInvalidValues",value:function(a){("."===a.key||8!=(null==a?void 0:a.which)&&0!=(null==a?void 0:a.which)&&((null==a?void 0:a.which)<48||(null==a?void 0:a.which)>57)&&((null==a?void 0:a.which)<96||(null==a?void 0:a.which)>105))&&a.preventDefault()}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),this.locationsSubject&&this.locationsSubject.unsubscribe(),this.regionsSubject&&this.regionsSubject.unsubscribe(),this.onChangeRecurrenceSubject&&this.onChangeRecurrenceSubject.unsubscribe(),this.onChangeTriggerSubject&&this.onChangeTriggerSubject.unsubscribe(),this.onChangeSoakTimeSubject&&this.onChangeSoakTimeSubject.unsubscribe()}}]),o}();return o.\u0275fac=function(a){return new(a||o)(g.Y36(D.t6),g.Y36(f.eN),g.Y36(v.s),g.Y36(wa.z),g.Y36(A.v))},o.\u0275cmp=g.Xpm({type:o,selectors:[["app-workflow-conditions"]],inputs:{conditionFormSubmitted:"conditionFormSubmitted",workFlowConditionsData:"workFlowConditionsData"},outputs:{getWorkFlowAPIEmitter:"getWorkFlowAPIEmitter"},decls:15,vars:11,consts:[[3,"formGroup"],[1,"container","px-0"],[1,"row"],[1,"col-12"],[1,"w-100"],[1,"mb-0"],[3,"ngClass"],[1,"w-100","mb-3",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],["geographyTemplate",""],[1,"form-check","d-inline-flex","mr-3",3,"ngClass"],["formControlName","immediate","type","radio","name","immediate",1,"form-check-input",3,"id","value"],[1,"form-check-label",3,"for"],[1,"row","mb-3"],[1,"col-sm-6","col-md-4","col-lg-4","col-xl-4"],[1,"heading-4"],[1,"error"],[1,"info-text",3,"innerHtml"],[1,"my-3"],[1,"ccl-form","row"],[1,"col-sm-5"],["id","wf_raiseThreshold","name","wf_raiseThreshold","type","number","formControlName","raiseThreshold","aria-required","true","aria-describedby","wf_raiseThreshold-error","placeholder","1",1,"form-control",3,"min","max","keyup","keydown"],["for","wf_raiseThreshold",1,"col-form-label"],["class","errorMessage w-100",4,"ngIf"],["id","wf_duration","name","wf_duration","min","1","max","120","type","number","formControlName","duration","aria-required","true","aria-describedby","wf_duration-error","placeholder","0",1,"form-control",3,"keyup","keydown"],["for","wf_duration",1,"col-form-label"],["class","errorMessage",4,"ngIf"],[1,"info-text",3,"innerHTML"],["id","wf_soak_time","name","wf_soak_time","min","0","max","240","type","number","formControlName","soakTime","aria-required","true","aria-describedby","wf_soak_time-error","placeholder","0",1,"form-control",3,"keyup","keydown"],["for","wf_soak_time",1,"col-form-label"],[1,"info-text"],[3,"ngTemplateOutlet"],[1,"col-sm-6","col-md-4","col-lg-4","col-xl-4",3,"ngClass"],[1,"form-group","form-check"],["formControlName","notifyOnClear","type","checkbox","id","mailNotifyOnClear",1,"form-check-input",3,"ngClass"],["for","mailNotifyOnClear",1,"form-check-label","info-text","cursor-pointer",3,"ngClass","innerHTML"],[1,"d-flex","justify-content-between"],["formArrayName","weekDays"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"errorMessage","w-100"],[1,"pl-3"],[1,"errorMessage"],[3,"formGroupName"],[1,"exclusions-container","align-items-center",3,"ngClass"],[1,"exclusions-item"],[1,"form-group","form-check","mr-3"],["formControlName","checked","type","checkbox",1,"form-check-input",3,"readonly","id","click"],[1,"exclusions-item","w-100-imp","ccl-form"],["formControlName","dayFrom","placeholder","12:00 AM","appendTo","body","timeOnly","true","hourFormat","12",3,"maxDate","id","inputStyle","autoZIndex","showIcon","input","onSelect"],[1,"exclusions-item","mx-1"],["formControlName","dayTo","placeholder","11:59 PM","appendTo","body","timeOnly","true","hourFormat","12",3,"defaultDate","minDate","id","inputStyle","autoZIndex","showIcon","input","onSelect"],[1,"sectitle","border-bottom","mb-3","pb-1"],["id","options-schedule",1,"w-100","label-highlight"],[1,"w-100","max-w165"],["formControlName","recurrence","bindLabel","name","bindValue","id",3,"items","searchable","clearable"],["ng-label-tmp",""],["ng-option-tmp",""],["class","day-selection w-100 mt-3 week-container",4,"ngIf"],[1,"w-100","my-3"],[1,"mb-0","label-highlight"],[1,"d-flex"],[1,"ccl-form","position-relative",3,"ngClass"],["formControlName","scheduleStartTime","id","scheduleStartTimeId","appendTo","body","view","date","hourFormat","12",1,"start-item",3,"autoZIndex","timeOnly","showTime","showIcon"],[1,"w-100","label-highlight"],[1,"day-selection","w-100","mt-3","week-container"],["ngDefaultControl","","formControlName","scheduleWeeklyStatus",1,"cursor-pointer",3,"id","ngClass","click"],[1,"week-circle"],[1,"mb-0","mr-2","mt-1"],[1,"ccl-form","w-25"],["type","number","placeholder","1","id","dayOfMonthId","name","dayOfMonth","formControlName","dayOfMonth","min","1","max","31","aria-required","true",1,"form-control",3,"keyup"],[1,""],["for","inputEmail3",1,"col-form-label"],["formControlName","region","bindValue","id","bindLabel","name",3,"multiple","items","clearable","searchable","placeholder","add","remove"],["formControlName","location","bindValue","id","bindLabel","name",3,"multiple","items","placeholder","clearable","searchable","add","remove"]],template:function(a,o){1&a&&(g.TgZ(0,"section"),g.TgZ(1,"form",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g.TgZ(5,"div",4),g.TgZ(6,"label",5),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"div",6),g.TgZ(9,"div",7),g.YNc(10,va,5,7,"ng-container",8),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(11,Ia,67,41,"ng-container",9),g.YNc(12,Ra,30,20,"ng-container",9),g.YNc(13,Ya,12,14,"ng-template",null,10,g.W1O),g.qZA(),g.qZA(),g.qZA()),2&a&&(g.xp6(1),g.Q6J("formGroup",null==o.workFlowConditionsData?null:o.workFlowConditionsData.workFlowConditionsForm),g.xp6(6),g.Oqu(o.language["Notification Trigger"]),g.xp6(1),g.Q6J("ngClass",g.VKq(7,qa,"PAUSE"==o.workFlowConditionsData.workFlowStatus)),g.xp6(1),g.Q6J("ngClass",g.VKq(9,Ma,"PAUSE"==o.workFlowConditionsData.workFlowStatus)),g.xp6(1),g.Q6J("ngForOf",o.triggerType),g.xp6(1),g.Q6J("ngIf","true"==(null==o.workFlowConditionsData||null==o.workFlowConditionsData.workFlowConditionsForm.controls.immediate?null:o.workFlowConditionsData.workFlowConditionsForm.controls.immediate.value)),g.xp6(1),g.Q6J("ngIf","false"==(null==o.workFlowConditionsData||null==o.workFlowConditionsData.workFlowConditionsForm.controls.immediate?null:o.workFlowConditionsData.workFlowConditionsForm.controls.immediate.value)))},directives:[c._Y,c.JL,c.sg,l.mk,l.sg,l.O5,y,c.Fj,c._,c.JJ,c.u,c.wV,c.qQ,c.Fd,l.tP,c.Wl,c.CE,c.x0,ha.f,U.w9,U.bb,U.Z2],styles:['.heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px}.info-text[_ngcontent-%COMP%]{font-size:16px;font-style:normal;font-weight:400;line-height:20px;letter-spacing:0em;text-align:left}.info-text[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:600!important}.raise-note[_ngcontent-%COMP%]{padding:10px 10px 0 15px}.sectitle[_ngcontent-%COMP%]{font-size:18px;font-weight:400;color:#1a1f22}.max-w165[_ngcontent-%COMP%]{max-width:165px}.label-highlight[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1a1f22;line-height:20px}  .p-calendar{width:100%}  .p-datepicker-header{display:none!important}.icon-p-cal[_ngcontent-%COMP%]{position:absolute;z-index:1;right:15px;top:4px}.day-selection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:28px;height:28px;display:inline-block;font-weight:400;font-size:14px;line-height:28px;color:#4c4c4c;background:#F8F8FA;border-radius:26px;text-align:center;margin-bottom:0;margin-right:10px}.day-selection[_ngcontent-%COMP%]   .day-selected[_ngcontent-%COMP%]{background:#0279FF;color:#fff}.week-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.week-container[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{width:35px;height:35px;color:#4c4c4c;background-color:#f8f8fa;text-align:center;line-height:35px;border-radius:50%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]   .select-day[_ngcontent-%COMP%]{width:35px;height:35px;color:#fff;background-color:#0279ff;text-align:center;line-height:35px;border-radius:50%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]   .week-circle[_ngcontent-%COMP%]{padding:4px}.start-item[_ngcontent-%COMP%]{width:100%;height:"36px"}.exclusions-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.exclusions-item[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:3%}.exclusions-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.exclusions-item[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{width:80px!important}.exclusions-item[_ngcontent-%COMP%]   .p-calendar[_ngcontent-%COMP%]{width:80%!important}.exclusions-item[_ngcontent-%COMP%] + .exclusions-item[_ngcontent-%COMP%]{text-align:center}.diable-div[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.cursornallow[_ngcontent-%COMP%]{cursor:not-allowed}.p-button-icon[_ngcontent-%COMP%]{cursor:pointer}.w-100-imp[_ngcontent-%COMP%]{width:100px!important}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{cursor:pointer}']}),o}(),Ba=n(67236),za=n(15835);function Ka(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",26),g.TgZ(1,"span",27),g._UZ(2,"img",28),g.qZA(),g.TgZ(3,"button",29),g.NdJ("click",function(){return g.CHM(t),g.oxw().closeAlert()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",30),g.qZA()}if(2&a){var i=g.oxw();g.xp6(5),g.Q6J("innerHtml",i.language[i.errorInfo]||i.errorInfo,g.oJD)}}function Xa(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",31),g.TgZ(1,"span",32),g._UZ(2,"img",33),g.qZA(),g.TgZ(3,"button",29),g.NdJ("click",function(){return g.CHM(t),g.oxw().success=!1}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",30),g.qZA()}if(2&a){var i=g.oxw();g.xp6(5),g.Q6J("innerHtml",i.language[i.successInfo]||i.successInfo,g.oJD)}}function $a(a,o){if(1&a&&(g.TgZ(0,"div",34),g.TgZ(1,"div",35),g.TgZ(2,"div",36),g.TgZ(3,"div",37),g.TgZ(4,"div",38),g.TgZ(5,"span",39),g._uU(6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&a){var t=g.oxw();g.xp6(6),g.Oqu(t.language.Loading)}}var ao=function(a,o){return{"step-current":a,"step-done":o}};function oo(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"li"),g.TgZ(1,"button",40),g.NdJ("click",function(){var a=g.CHM(t).index;return g.oxw().onTabChange(a,"stepperClick")}),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.qZA(),g.qZA()}if(2&a){var i=o.$implicit,e=o.index,n=g.oxw();g.xp6(1),g.s9C("title",n.language[i.name]),g.Q6J("ngClass",g.WLB(3,ao,n.activeTab===i.value,n.levelsPassed>e&&n.activeTab!==i.value)),g.xp6(2),g.Oqu(n.language[i.name])}}var to=function(a){return{"pe-none":a}};function io(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"button",41),g.NdJ("click",function(){g.CHM(t);var a=g.oxw();return a.onTabChange(a.selectedTabIndex+1,"forward")}),g._uU(1),g._UZ(2,"img",42),g.qZA()}if(2&a){var i=g.oxw();g.MGl("title","  ",i.language.save_and_continue,""),g.Q6J("ngClass",g.VKq(3,to,1==i.btnDisabled)),g.xp6(1),g.hij(" ",i.language.save_and_continue," ")}}function eo(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"button",43),g.NdJ("click",function(){return g.CHM(t),g.oxw().pauseContinueWorkflow("pause")}),g._uU(1),g.qZA()}if(2&a){var i=g.oxw();g.MGl("title"," ",i.language.save_and_pause,""),g.Q6J("ngClass",g.VKq(3,to,1==i.btnDisabled)),g.xp6(1),g.hij(" ",i.language.save_and_pause," ")}}function no(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"button",44),g.NdJ("click",function(){return g.CHM(t),g.oxw().pauseContinueWorkflow("activate")}),g._uU(1),g.qZA()}if(2&a){var i=g.oxw();g.MGl("title"," ",i.language.save_and_activate,""),g.Q6J("ngClass",g.VKq(3,to,1==i.btnDisabled)),g.xp6(1),g.hij(" ",i.language.save_and_activate," ")}}function ro(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"div",45),g.TgZ(1,"span",27),g._UZ(2,"img",28),g.qZA(),g.TgZ(3,"button",29),g.NdJ("click",function(){return g.CHM(t),g.oxw().onCloseError()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",30),g.qZA()}if(2&a){var i=g.oxw();g.xp6(5),g.Q6J("innerHtml",i.language[i.errorMsg]||i.errorMsg,g.oJD)}}function lo(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"app-workflow-details",46),g.NdJ("getWorkFlowAPIEmitter",function(a){return g.CHM(t),g.oxw().getWorkflowData(a)}),g.qZA()}if(2&a){var i=g.oxw();g.Q6J("loadOnEdit",i.loadEditable.asObservable())("workFlowDetailsData",i.notificationsData.details)}}function so(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"app-workflow-alarms",47),g.NdJ("getWorkFlowAPIEmitter",function(a){return g.CHM(t),g.oxw().getWorkflowData(a)})("errorMsg",function(a){return g.CHM(t),g.oxw().getErrorMsg(a)}),g.qZA()}if(2&a){var i=g.oxw();g.Q6J("workFlowAlarmsData",i.notificationsData.alarms)}}function co(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"app-workflow-conditions",48),g.NdJ("getWorkFlowAPIEmitter",function(a){return g.CHM(t),g.oxw().getWorkflowData(a)}),g.qZA()}if(2&a){var i=g.oxw();g.Q6J("conditionFormSubmitted",i.conditionFormSubmit)("workFlowConditionsData",i.notificationsData.conditions)}}function uo(a,o){if(1&a&&g._UZ(0,"app-recepients",49),2&a){var t=g.oxw();g.Q6J("dynamicFields",t.recepientFormFields)("dynamicFieldsObj",t.recepientFormFieldsObj)("workflowObj",t.notificationsData.notification)}}function mo(a,o){if(1&a){var t=g.EpF();g.TgZ(0,"app-workflow-summary",50),g.NdJ("getWorkFlowAPIEmitter",function(a){return g.CHM(t),g.oxw().getWorkflowData(a)}),g.qZA()}if(2&a){var i=g.oxw();g.Q6J("workFlowSummaryData",i.notificationsData)}}var wo=[{path:"",component:function(){var o=function(){function o(a,i,e,n,r,l,s,d,h,g,v,f,k){t(this,o),this.translateService=a,this.http=i,this.commonOrgService=e,this.ssoService=n,this.router=r,this.route=l,this.formBuilder=s,this.apiPreDataSevice=d,this.titleService=h,this.issueService=g,this.document=v,this.commonWorkflowService=f,this.modalService=k,this.recepientFormFields=[{key:"mailRecepients",required:!0},{key:"notes",required:!1},{key:"sms",required:!0},{key:"webhooks",required:!0}],this.recepientFormFieldsObj={emailRecipients:"mailRecepients",emailNotes:"notes",sms:"sms",webhooks:"webhooks"},this.isDev=!1,this.loadEditable=new u.xQ,this.scheduleFormSubmit=new u.xQ,this.conditionFormSubmit=new u.xQ,this.errorInfo="",this.successInfo="",this.loading=!1,this.btnDisabled=!1,this.alarmNotificationsSteppers=[{name:"Details",value:"Details"},{name:"Alarms",value:"Alarms"},{name:"Notification Trigger",value:"Conditions"},{name:"Recipients",value:"notification"},{name:"Summary",value:"Summary"}],this.activeTab="Details",this.levelsPassed=0,this.selectedTabIndex=0,this.isTabChange=!0,this.errorMsg=void 0,this.notificationsData={alarm_notifications_summary:!0,workFlowData:{},workFlowTab:this.alarmNotificationsSteppers,workflowId:"",details:{name:void 0,description:void 0,isNameEntered:!0,workFlowSaved:!1,workflowId:"",workFlowDetailsForm:this.formBuilder.group({name:["",[c.kI.required,c.kI.maxLength(50),w.q]],description:[""]})},alarms:{workFlowSaved:!1,alarmSelectedList:[],exisitingAlarmSelectedList:[],workFlowAlarmsForm:void 0,alarmsFormEntered:!1,receiveAlert:"No",alert_threshold:0,clear_threshold:0,duration:0,totMonitoredAlarms:0,groupAlarmData:{data:[]},individualAlarmData:{data:[],categoryList:[],searchCategory:void 0,searchSeverity:void 0,prevSearchCategory:void 0,prevSearchSeverity:void 0,categoryOrSeverity:void 0},transformAlarmData:{data:[]},monitoredIndividualAlarm:{data:[],categoryList:[]},monitoredGroupAlarm:{data:[]},monitoredTransformAlarm:{data:[]}},conditions:{workFlowStatus:void 0,workFlowSaved:!1,isFormValid:!1,immediate:"true",exclusionsValid:"valid",weeklyScheduleValid:"valid",conditionsFormEntered:!1,regionsDataArray:["All"],locationDataArray:["All"],minRaiseThreshold:1,recurrence:"daily",weekDays:[],soakTime:0,minClearThreshold:0,oldNotifyOnClear:!1,soakTimeChanged:!1,workFlowConditionsForm:this.formBuilder.group({region:["",c.kI.required],location:["",c.kI.required],soakTime:[0,[c.kI.required,c.kI.max(240),c.kI.min(0)]],raiseThreshold:[1,[c.kI.required,c.kI.max(1e4)]],duration:[1,[c.kI.required,c.kI.max(120),c.kI.min(1)]],immediate:["true",c.kI.required],clearThreshold:[0],notifyOnClear:[!1],weekDays:new c.Oe([]),recurrence:["daily"],scheduleStartTime:[new Date((new Date).setMonth(11))],dayOfMonth:[1],timezone:[""]})},notification:{mailRecepients:[],mailEntered:!0,workFlowSaved:!1,isFormValid:!1,scheduleFormEntered:!1,isConsentMsgSmsPopupAccepted:!1,isLoadConsentMsgSmsPopupApplicable:!0,workFlowScheduleForm:this.formBuilder.group({notes:[""]}),sms:[],webhooks:[]},summary:{workFlowSaved:!1}},this.baseUrl="".concat(m.N.API_BASE_URL,"analytics-engine/"),window,this.isDev="".concat(m.N.API_BASE).indexOf("/dev.api.calix.ai")>-1}return e(o,[{key:"ngOnInit",value:function(){var a=this;this.route.params.subscribe(function(o){a.notificationsData.workflowId=o.workflowId?o.workflowId:"",a.notificationsData.details.workflowId=o.workflowId?o.workflowId:""}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(o){a.language=o,a.titleService.setTitle("".concat(a.language.alarm_notifications," - ").concat(a.language["Email Notifications"]," - ").concat(a.language.Network_Operations," - ").concat(a.language.Operations," - ").concat(a.language.Operations," - ").concat(a.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language.alarm_notifications," - ").concat(this.language["Email Notifications"]," - ").concat(this.language.Network_Operations," - ").concat(this.language.Operations," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])),this.setDefaultWeekDays(),this.callMultipleAPI()}},{key:"openModal",value:function(){var a=this,o=this.modalService.open(h.J);o.componentInstance.workflowObj=this.notificationsData.notification,o.result.then(function(o){o&&(console.log(o),a.onTabChange(a.selectedTabIndex+1,"forward"))}).catch(function(a){})}},{key:"callMultipleAPI",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all([this.getCategories(),this.getIndividualAlarmData(),this.getTransformAlarmData(),this.regionsApiLoader()]);case 2:this.mergeAlarmRules(),""!=this.notificationsData.workflowId&&this.getWorkflowData();case 4:case"end":return a.stop()}},a,this)}))}},{key:"getCategories",value:function(){var o=this;return new Promise(function(t,i){o.apiPreDataSevice.getCategories().then(function(i){o.notificationsData.alarms.individualAlarmData.categoryList=a(i),o.notificationsData.alarms.monitoredIndividualAlarm.categoryList=a(i),t()})})}},{key:"getIndividualAlarmData",value:function(){var o=this;return new Promise(function(t,i){o.apiPreDataSevice.getIndividualAlarmData().then(function(i){o.notificationsData.alarms.individualAlarmData.data=a(i),o.notificationsData.alarms.individualAlarmData=Object.assign({},o.notificationsData.alarms.individualAlarmData),t()})})}},{key:"getGroupAlarmData",value:function(){var o=this;return new Promise(function(t,i){o.apiPreDataSevice.getGroupAlarmData().then(function(i){o.notificationsData.alarms.groupAlarmData.data=a(i),o.notificationsData.alarms.groupAlarmData=Object.assign({},o.notificationsData.alarms.groupAlarmData),t()})})}},{key:"getTransformAlarmData",value:function(){var o=this;return new Promise(function(t,i){o.apiPreDataSevice.getTransformAlarmData().then(function(i){o.notificationsData.alarms.transformAlarmData.data=a(i),o.notificationsData.alarms.transformAlarmData=Object.assign({},o.notificationsData.alarms.transformAlarmData),t()})})}},{key:"regionsApiLoader",value:function(){var o=this;return new Promise(function(t,i){o.apiPreDataSevice.regionsApiLoader().then(function(i){o.notificationsData.conditions.regionsDataArray=[].concat(a(o.notificationsData.conditions.regionsDataArray),a(i)),t()})})}},{key:"mergeAlarmRules",value:function(){var a=this;if(this.notificationsData.alarms.individualAlarmData.data.length>0){var o=this.notificationsData.alarms.individualAlarmData.data.filter(function(a){return a.alarm_name.includes("multiple-onts-down")&&"PON transformed"==a.alarm_category});o.length>0&&o.forEach(function(o){var t=a.notificationsData.alarms.transformAlarmData.data.find(function(a){return a.alarm_name==o.alarm_name});t?(o.alarm_id=t.alarmRuleId,o.rulesexist=!0):o.rulesnotexist=!0})}}},{key:"patchNotificationFormValue",value:function(){var a=this.notificationsData.conditions.workFlowConditionsForm.get("weekDays");a.controls&&(a.controls.length=0),this.notificationsData.conditions.weekDays.forEach(function(o){o.scheduleWeeklyStatus=!!o.scheduleWeeklyStatus&&o.scheduleWeeklyStatus,a.push(new c.cw({name:new c.NI(o.name),short_name:new c.NI(o.short_name),value:new c.NI(o.value),dayFrom:new c.NI(o.dayFrom),dayTo:new c.NI(o.dayTo),defaultTime:new c.NI(o.defaultTime),minTime:new c.NI(o.minTime),maxTime:new c.NI(o.maxTime),checked:new c.NI(o.checked||!1),scheduleWeeklyStatus:new c.NI(o.scheduleWeeklyStatus)}))})}},{key:"onTabChange",value:function(a,o){var t,i,e,n,r,l,s,d,c,u,m,w,h,g,v,f,k,D,p,F,A,C,y,b,T,x,Z,S,_,O,q,M,I,P,N,E,j,J,U,V,Q,L,R,H,G,Y,W,B,z,K,X,$,aa,oa,ta,ia=this;if(this.errorMsg=void 0,this.notificationsData.notification.mailEntered=!0,this.notificationsData.conditions.exclusionsValid="valid",this.notificationsData.conditions.weeklyScheduleValid="valid","forward"==o)if((null===(e=null===(i=null===(t=this.notificationsData)||void 0===t?void 0:t.details)||void 0===i?void 0:i.workFlowDetailsForm)||void 0===e?void 0:e.valid)&&a<2&&"Details"==this.activeTab||((null===(n=this.notificationsData.alarms.monitoredIndividualAlarm)||void 0===n?void 0:n.data.length)>0||(null===(r=this.notificationsData.alarms.monitoredGroupAlarm)||void 0===r?void 0:r.data.length)>0||(null===(l=this.notificationsData.alarms.monitoredTransformAlarm)||void 0===l?void 0:l.data.length)>0)&&2==a&&"Alarms"==this.activeTab||3==a&&"Conditions"==this.activeTab&&this.exclusionValidations()&&!this.weeklyScheduleValidation()&&(null===(d=null===(s=this.notificationsData.conditions)||void 0===s?void 0:s.workFlowConditionsForm)||void 0===d?void 0:d.valid)||(null===(u=null===(c=this.notificationsData.notification)||void 0===c?void 0:c.mailRecepients)||void 0===u?void 0:u.length)>0||(null===(w=null===(m=this.notificationsData.notification)||void 0===m?void 0:m.sms)||void 0===w?void 0:w.length)>0||(null===(g=null===(h=this.notificationsData.notification)||void 0===h?void 0:h.webhooks)||void 0===g?void 0:g.length)>0&&4==a&&"notification"==this.activeTab){if((null===(v=this.notificationsData.notification)||void 0===v?void 0:v.isLoadConsentMsgSmsPopupApplicable)&&!(null===(f=this.notificationsData.notification)||void 0===f?void 0:f.isConsentMsgSmsPopupAccepted)&&(null===(D=null===(k=this.notificationsData.notification)||void 0===k?void 0:k.sms)||void 0===D?void 0:D.length))return void this.openModal();this.saveAndContinue(a)}else 4==a&&(null===(F=null===(p=this.notificationsData.notification)||void 0===p?void 0:p.mailRecepients)||void 0===F?void 0:F.length)<=0&&(null===(C=null===(A=this.notificationsData.notification)||void 0===A?void 0:A.sms)||void 0===C?void 0:C.length)<=0&&(null===(b=null===(y=this.notificationsData.notification)||void 0===y?void 0:y.webhooks)||void 0===b?void 0:b.length)<=0?this.commonWorkflowService.setTabChange():3!=a||this.notificationsData.conditions.workFlowConditionsForm.valid&&"not-valid"!=this.notificationsData.conditions.exclusionsValid&&"not-valid"!=this.notificationsData.conditions.weeklyScheduleValid?2==a&&(0==(null===(x=null===(T=this.notificationsData.alarms)||void 0===T?void 0:T.monitoredIndividualAlarm)||void 0===x?void 0:x.data.length)&&0==(null===(S=null===(Z=this.notificationsData.alarms)||void 0===Z?void 0:Z.monitoredGroupAlarm)||void 0===S?void 0:S.data.length)||0==(null===(O=null===(_=this.notificationsData.alarms)||void 0===_?void 0:_.monitoredTransformAlarm)||void 0===O?void 0:O.data.length))?this.errorMsg="Please add at least one alarm.":(this.notificationsData.details.workFlowDetailsForm.markAllAsTouched(),this.notificationsData.details.isNameEntered=0===a):("not-valid"==this.notificationsData.conditions.exclusionsValid?this.errorMsg="Please select start time and end time of all selected exclusion days.":"not-valid"==this.notificationsData.conditions.weeklyScheduleValid&&(this.errorMsg="Please select at least one day."),this.conditionFormSubmit.next(!0));else if("backward"==o)setTimeout(function(){ia.updateStepperCompleted(a)},1e3);else if("stepperClick"==o)if(a>this.selectedTabIndex){if((a-1==this.selectedTabIndex||this.notificationsData[this.alarmNotificationsSteppers[a].value.toLowerCase()].workFlowSaved)&&a!=this.selectedTabIndex)if(this.notificationsData.details.workFlowDetailsForm.valid&&"Details"==this.activeTab||((null===(q=this.notificationsData.alarms.monitoredIndividualAlarm)||void 0===q?void 0:q.data.length)>0||(null===(M=this.notificationsData.alarms.monitoredGroupAlarm)||void 0===M?void 0:M.data.length)>0||(null===(I=this.notificationsData.alarms.monitoredTransformAlarm)||void 0===I?void 0:I.data.length)>0)&&"Alarms"==this.activeTab||"Conditions"==this.activeTab&&(null===(N=null===(P=this.notificationsData.conditions)||void 0===P?void 0:P.workFlowConditionsForm)||void 0===N?void 0:N.valid)&&!this.weeklyScheduleValidation()&&this.exclusionValidations()||"notification"==this.activeTab&&(null===(E=this.notificationsData.notification)||void 0===E?void 0:E.mailRecepients.length)>0||(null===(J=null===(j=this.notificationsData.notification)||void 0===j?void 0:j.sms)||void 0===J?void 0:J.length)>0||(null===(V=null===(U=this.notificationsData.notification)||void 0===U?void 0:U.webhooks)||void 0===V?void 0:V.length)>0||"Summary"==this.activeTab){if((null===(Q=this.notificationsData.notification)||void 0===Q?void 0:Q.isLoadConsentMsgSmsPopupApplicable)&&!(null===(L=this.notificationsData.notification)||void 0===L?void 0:L.isConsentMsgSmsPopupAccepted)&&(null===(H=null===(R=this.notificationsData.notification)||void 0===R?void 0:R.sms)||void 0===H?void 0:H.length))return void this.openModal();this.saveAndContinue(a)}else"Alarms"==this.activeTab&&(0==(null===(Y=null===(G=this.notificationsData.alarms)||void 0===G?void 0:G.monitoredIndividualAlarm)||void 0===Y?void 0:Y.data.length)&&0==(null===(B=null===(W=this.notificationsData.alarms)||void 0===W?void 0:W.monitoredGroupAlarm)||void 0===B?void 0:B.data.length)||0==(null===(K=null===(z=this.notificationsData.alarms)||void 0===z?void 0:z.monitoredTransformAlarm)||void 0===K?void 0:K.data.length))?this.errorMsg="Please add at least one alarm.":"Conditions"!=this.activeTab||this.notificationsData.conditions.workFlowConditionsForm.valid&&"not-valid"!=this.notificationsData.conditions.exclusionsValid&&"not-valid"!=this.notificationsData.conditions.weeklyScheduleValid?"notification"==this.activeTab&&(null===(X=this.notificationsData.notification)||void 0===X?void 0:X.mailRecepients.length)<=0&&(null===(aa=null===($=this.notificationsData.notification)||void 0===$?void 0:$.sms)||void 0===aa?void 0:aa.length)<=0&&(null===(ta=null===(oa=this.notificationsData.notification)||void 0===oa?void 0:oa.webhooks)||void 0===ta?void 0:ta.length)<=0?this.commonWorkflowService.setTabChange():!this.notificationsData.details.workFlowDetailsForm.valid&&"Details"==this.activeTab&&(this.notificationsData.details.isNameEntered=!1):("not-valid"==this.notificationsData.conditions.exclusionsValid?this.errorMsg="Please select start time and end time of all selected exclusion days.":"not-valid"==this.notificationsData.conditions.weeklyScheduleValid&&(this.errorMsg="Please select atleast one day."),this.conditionFormSubmit.next(!0))}else setTimeout(function(){ia.updateStepperCompleted(a)},1e3)}},{key:"weeklyScheduleValidation",value:function(){var a,o,t,i=Object.assign({},null===(t=null===(o=null===(a=this.notificationsData)||void 0===a?void 0:a.conditions)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t?void 0:t.value),e=!1;return i.weekDays.length>0&&i.weekDays&&"false"==i.immediate&&"weekly"==i.recurrence&&((e=i.weekDays.every(function(a){return!a.scheduleWeeklyStatus}))&&(this.notificationsData.conditions.weeklyScheduleValid="not-valid")),e}},{key:"exclusionValidations",value:function(){var a,o,t,i=this,e=Object.assign({},null===(t=null===(o=null===(a=this.notificationsData)||void 0===a?void 0:a.conditions)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t?void 0:t.value),n=!0;return e.weekDays.length>0&&e.weekDays&&"true"==e.immediate&&(e.weekDays=e.weekDays.forEach(function(a){a.checked&&(""==a.dayFrom||""==a.dayTo)&&(i.notificationsData.conditions.exclusionsValid="not-valid",n=!1)})),n}},{key:"saveAndContinue",value:function(a){var o,t,i,e,n,r,l,s=this;if("Summary"==this.activeTab)this.updateStepperCompleted(a);else if("Details"==this.activeTab&&""==this.notificationsData.workflowId){var d=Object.assign({},null===(o=this.notificationsData.details.workFlowDetailsForm)||void 0===o?void 0:o.controls),c={name:null===(t=d.name)||void 0===t?void 0:t.value,description:(null===(i=d.description)||void 0===i?void 0:i.value)?d.description.value:""};this.loading=!0,this.btnDisabled=!0,this.errorMsg=void 0,this.error=!1,this.http.post("".concat(this.baseUrl,"workflow"),c,{responseType:"text"}).subscribe(function(o){o&&""!=o?(s.loading=!1,s.success=!0,setTimeout(function(){s.btnDisabled=!1,s.success=!1},2e3),s.notificationsData.workflowId=o,s.notificationsData.details.workflowId=o,s.successInfo="Successfully Saved",s.updateStepperCompleted(a)):(s.loading=!1,s.btnDisabled=!1,s.errorMsg=s.language.Error)},function(a){s.error=!0,s.loading=!1,s.btnDisabled=!1,s.pageErrorHandle(a)})}else{var u={};if("Details"==this.activeTab){var m=Object.assign({},null===(e=this.notificationsData.details.workFlowDetailsForm)||void 0===e?void 0:e.controls);u={name:null===(n=m.name)||void 0===n?void 0:n.value,description:(null===(r=m.description)||void 0===r?void 0:r.value)?m.description.value:""}}else if("Alarms"==this.activeTab){(u={alarmGroups:this.notificationsData.alarms.monitoredGroupAlarm.data.map(function(a){return a.group_id}),alarmNames:this.notificationsData.alarms.monitoredIndividualAlarm.data.filter(function(a){return!a.rulesexist}).map(function(a){return a.alarm_id}),transformAlarms:this.notificationsData.alarms.monitoredIndividualAlarm.data.filter(function(a){return a.rulesexist}).map(function(a){return a.alarm_id})}).workflowAlarmFilterValues=[],u.workflowAlarmFilter="CATEGORY"}else if("Conditions"==this.activeTab){var w=Object.assign({},null===(l=this.notificationsData.conditions.workFlowConditionsForm)||void 0===l?void 0:l.value);if((u={region:w.region&&w.region.length>0?-1!=w.region.indexOf("All")?["11111111-1111-1111-1111-111111111111"]:w.region:[],location:w.location&&w.location.length>0?-1!=w.location.indexOf("All")?["11111111-1111-1111-1111-111111111111"]:w.location:[]}).timezone=w.timezone,u.schedule={},"true"==w.immediate){u.raiseThreshold=w.raiseThreshold?w.raiseThreshold:1,u.duration=w.duration?w.duration:1,u.soakTime=w.soakTime?w.soakTime:0,1==w.notifyOnClear?(u.notifyOnClear=!0,u.clearThreshold=w.clearThreshold?w.clearThreshold:0):0==w.notifyOnClear&&(u.notifyOnClear=!1,u.clearThreshold=0);var h=[];w.weekDays.forEach(function(a){var o;if(a.checked){var t={};t.fromTime=(a.dayFrom.getHours()<10?"0":"")+a.dayFrom.getHours()+":"+(a.dayFrom.getMinutes()<10?"0":"")+a.dayFrom.getMinutes(),t.toTime=(a.dayTo.getHours()<10?"0":"")+a.dayTo.getHours()+":"+(a.dayTo.getMinutes()<10?"0":"")+a.dayTo.getMinutes(),t.daysOfWeek=null===(o=a.short_name)||void 0===o?void 0:o.toUpperCase(),h.push(t)}}),u.schedule.immediate=!0,u.filter=h}else if(u.schedule.immediate=!1,u.schedule.recurrencePattern={},u.schedule.type=w.recurrence,"daily"==w.recurrence){u.schedule.recurrencePattern.daily={};var g=new Date(w.scheduleStartTime);u.schedule.recurrencePattern.daily.startTime=(g.getHours()<10?"0":"")+g.getHours()+":"+(g.getMinutes()<10?"0":"")+g.getMinutes()}else if("weekly"==w.recurrence){var v=w.weekDays.map(function(a){if(a.scheduleWeeklyStatus&&a.short_name)return a.short_name.toUpperCase()}).filter(function(a){return void 0!==a});u.schedule.recurrencePattern.weekly={},u.schedule.recurrencePattern.weekly.days=v;var f=new Date(w.scheduleStartTime);u.schedule.recurrencePattern.weekly.startTime=(f.getHours()<10?"0":"")+f.getHours()+":"+(f.getMinutes()<10?"0":"")+f.getMinutes()}else if("monthly"==w.recurrence){u.schedule.recurrencePattern.monthly={},u.schedule.recurrencePattern.monthly.dayOfMonth=w.dayOfMonth?w.dayOfMonth:1;var k=new Date(w.scheduleStartTime);u.schedule.recurrencePattern.monthly.startTime=(k.getHours()<10?"0":"")+k.getHours()+":"+(k.getMinutes()<10?"0":"")+k.getMinutes()}}else"notification"==this.activeTab&&(u={notes:this.notificationsData.notification.notes,emails:this.notificationsData.notification.mailRecepients&&this.notificationsData.notification.mailRecepients.length>0?this.notificationsData.notification.mailRecepients.map(function(a){return a}):[],sms:this.notificationsData.notification.sms,webhooks:this.notificationsData.notification.webhooks});this.loading=!0,this.btnDisabled=!0,this.errorMsg=void 0,this.http.put("".concat(this.baseUrl,"workflow/").concat(this.notificationsData.workflowId),u,{responseType:"text"}).subscribe(function(o){o&&""!=o?(s.loading=!1,s.success=!0,setTimeout(function(){s.btnDisabled=!1,s.success=!1},2e3),s.successInfo="Successfully Saved",s.updateStepperCompleted(a)):(s.loading=!1,s.btnDisabled=!1,s.errorMsg=s.language.Error)},function(a){s.error=!0,s.loading=!1,s.btnDisabled=!1,s.pageErrorHandle(a)})}}},{key:"updateStepperCompleted",value:function(a){this.notificationsData[this.activeTab.toLowerCase()].workFlowSaved=!0,this.goToNextStepper(a)}},{key:"goToNextStepper",value:function(a){this.activeTab=this.alarmNotificationsSteppers[a].value,this.selectedTabIndex=a,this.isTabChange=!this.isTabChange,this.levelsPassed<a&&(this.levelsPassed=a)}},{key:"getWorkflowData",value:function(o){var t=this;this.loadEditable.next(!0),this.http.get("".concat(this.baseUrl,"workflow?workflowId=").concat(this.notificationsData.workflowId)).subscribe(function(o){var i,e,n,r,l,s,d,c,u,m,w,h,g,v,f,k,D,p,F,A,C,y,b;if(o&&Object.entries(o).length>0){t.notificationsData.workFlowData=JSON.parse(JSON.stringify(o)),t.notificationsData.details.workFlowSaved=!0,t.levelsPassed=1;var T=Object.assign({},null===(n=null===(e=null===(i=t.notificationsData)||void 0===i?void 0:i.details)||void 0===e?void 0:e.workFlowDetailsForm)||void 0===n?void 0:n.controls);T&&Object.entries(T).length>0&&(T.name.setValue(o.name?o.name:null===(r=T.name)||void 0===r?void 0:r.value),T.description.setValue(o.description?o.description:null===(l=T.description)||void 0===l?void 0:l.value)),(o.alarmGroups&&o.alarmGroups.length>0||o.transformAlarms&&o.transformAlarms.length>0||o.alarmNames&&o.alarmNames.length>0)&&(t.notificationsData.alarms.workFlowSaved=!0,t.levelsPassed=2),(null===(d=null===(s=t.notificationsData.alarms)||void 0===s?void 0:s.monitoredGroupAlarm)||void 0===d?void 0:d.data)&&(t.notificationsData.alarms.monitoredGroupAlarm.data=[]),t.notificationsData.alarms.groupAlarmData.data&&t.notificationsData.alarms.groupAlarmData.data.length>0&&t.notificationsData.alarms.groupAlarmData.data.forEach(function(a){a.isChecked=!1,a.disabled=!1,a.selectedAlready=!1}),o.alarmGroups&&o.alarmGroups.length>0&&o.alarmGroups.forEach(function(a){var o=t.notificationsData.alarms.groupAlarmData.data.find(function(o){return o.group_id==a});o&&(delete o.isChecked,delete o.disabled,delete o.selectedAlready,t.notificationsData.alarms.monitoredGroupAlarm.data.push(Object.assign({},o)),o.isChecked=!0,o.disabled=!0,o.selectedAlready=!0)}),(null===(u=null===(c=t.notificationsData.alarms)||void 0===c?void 0:c.monitoredGroupAlarm)||void 0===u?void 0:u.rerenderSubject)&&t.notificationsData.alarms.monitoredGroupAlarm.rerenderSubject.next(!0),(null===(w=null===(m=t.notificationsData.alarms)||void 0===m?void 0:m.monitoredTransformAlarm)||void 0===w?void 0:w.data)&&(t.notificationsData.alarms.monitoredTransformAlarm.data=[]),t.notificationsData.alarms.transformAlarmData.data&&t.notificationsData.alarms.transformAlarmData.data.length>0&&t.notificationsData.alarms.transformAlarmData.data.forEach(function(a){a.isChecked=!1,a.disabled=!1,a.selectedAlready=!1}),o.transformAlarms&&o.transformAlarms.length>0&&o.transformAlarms.forEach(function(a){var o=t.notificationsData.alarms.transformAlarmData.data.find(function(o){return o.alarmRuleId==a});o&&(delete o.isChecked,delete o.disabled,delete o.selectedAlready,t.notificationsData.alarms.monitoredTransformAlarm.data.push(Object.assign({},o)),o.isChecked=!0,o.disabled=!0,o.selectedAlready=!0)}),(null===(g=null===(h=t.notificationsData.alarms)||void 0===h?void 0:h.monitoredTransformAlarm)||void 0===g?void 0:g.rerenderSubject)&&t.notificationsData.alarms.monitoredTransformAlarm.rerenderSubject.next(!0),(null===(f=null===(v=t.notificationsData.alarms)||void 0===v?void 0:v.monitoredIndividualAlarm)||void 0===f?void 0:f.data)&&(t.notificationsData.alarms.monitoredIndividualAlarm.data=[]),t.notificationsData.alarms.individualAlarmData.data&&t.notificationsData.alarms.individualAlarmData.data.length>0&&t.notificationsData.alarms.individualAlarmData.data.forEach(function(a){a.isChecked=!1,a.disabled=!1,a.selectedAlready=!1}),(null===(p=null===(D=null===(k=t.notificationsData)||void 0===k?void 0:k.alarms)||void 0===D?void 0:D.individualAlarmData)||void 0===p?void 0:p.searchCategory)&&(t.notificationsData.alarms.individualAlarmData.searchCategory=void 0,t.notificationsData.alarms.individualAlarmData.prevSearchCategory=void 0),(null===(C=null===(A=null===(F=t.notificationsData)||void 0===F?void 0:F.alarms)||void 0===A?void 0:A.individualAlarmData)||void 0===C?void 0:C.searchSeverity)&&(t.notificationsData.alarms.individualAlarmData.searchSeverity=void 0,t.notificationsData.alarms.individualAlarmData.prevSearchSeverity=void 0),(o.alarmNames&&o.alarmNames.length>0||o.transformAlarms&&o.transformAlarms.length>0)&&(o.alarmNames=[].concat(a(o.alarmNames),a(o.transformAlarms)),t.notificationsData.alarms.monitoredTransformAlarm.data=[],o.alarmNames.forEach(function(a){var o=t.notificationsData.alarms.individualAlarmData.data.find(function(o){return o.alarm_id==a});o&&(delete o.isChecked,delete o.disabled,delete o.selectedAlready,t.notificationsData.alarms.monitoredIndividualAlarm.data.push(Object.assign({},o)),o.isChecked=!0,o.disabled=!0,o.selectedAlready=!0)})),(null===(b=null===(y=t.notificationsData.alarms)||void 0===y?void 0:y.monitoredIndividualAlarm)||void 0===b?void 0:b.rerenderSubject)&&t.notificationsData.alarms.monitoredIndividualAlarm.rerenderSubject.next(!0),setTimeout(function(){t.notificationsData.alarms.individualAlarmData&&(t.notificationsData.alarms.individualAlarmData=Object.assign({},t.notificationsData.alarms.individualAlarmData))},500),t.calculateTotalMonitoredAlarms(),t.setConditionPageData(o),t.loadEditable.next(!1)}},function(a){t.loadEditable.next(!1),t.error=!0,t.pageErrorHandle(a)})}},{key:"setConditionPageData",value:function(o){var t,i,e,n,r,l,s,c,u,m,w,h,g,v,f,k,D,p,F,A,C,y,b,T,x,Z,S,_,O,q,M,I,P,N,E,j,J;return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function d(){var U,V,Q,L,R,H,G,Y;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.setDefaultWeekDays(),o.region&&o.region.length>0&&(o.region=null===(i=null===(t=this.notificationsData.conditions.regionsDataArray)||void 0===t?void 0:t.filter(function(a){var t;return null===(t=o.region)||void 0===t?void 0:t.includes(a.id)}))||void 0===i?void 0:i.map(function(a){return a.id}),this.notificationsData.conditions.workFlowSaved=!0,this.levelsPassed=3),this.notificationsData.conditions.workFlowStatus=o&&o.status?o.status:void 0,!((U=Object.assign({},null===(r=null===(n=null===(e=this.notificationsData)||void 0===e?void 0:e.conditions)||void 0===n?void 0:n.workFlowConditionsForm)||void 0===r?void 0:r.controls))&&Object.entries(U).length>0)){d.next=14;break}if(!(o.region&&o.region.length>0)){d.next=11;break}return d.next=6,this.loadLocationValue(o.region);case 6:this.notificationsData.conditions.locationDataArray=d.sent,this.notificationsData.conditions.locationDataArray=this.issueService.appendFqn(this.notificationsData.conditions.locationDataArray),this.notificationsData.conditions.locationDataArray=this.notificationsData.conditions.locationDataArray.sort(function(a,o){return(a.name||"").toString().localeCompare((o.name||"").toString(),"en",{numeric:!1})}),V=this.notificationsData.conditions.locationDataArray.map(function(a){var o=a.fqn.split(",").find(function(a){return a.includes("REGION")});return o.split("=").length>0&&(a.region_name=o.split("=")[1]),a}),Q={},V.forEach(function(a,o){V.find(function(t,i){return t.region_name==a.region_name&&t.regionId!=a.regionId&&i!=o})&&(Q[a.region_name]=(Q[a.region_name]||0)+1)}),V.forEach(function(a,o){var t;a.check_region_name=a.region_name+" ("+(null===(t=a.fqn)||void 0===t?void 0:t.split("=")[1].split(",")[0])+")",Q[a.region_name]>1&&(a.region_name=a.check_region_name)}),this.notificationsData.conditions.locationDataArray=a(V),this.notificationsData.conditions.locationDataArray.unshift({name:"All",id:"All"}),-1==o.region.indexOf("11111111-1111-1111-1111-111111111111")?U.region.setValue(o.region):U.region.setValue(["All"]);case 11:o.location=null===(s=null===(l=this.notificationsData.conditions.locationDataArray)||void 0===l?void 0:l.filter(function(a){var t;return null===(t=o.location)||void 0===t?void 0:t.includes(a.id)}))||void 0===s?void 0:s.map(function(a){return a.id}),o.location&&o.location.length>0&&(-1==o.location.indexOf("11111111-1111-1111-1111-111111111111")?U.location.setValue(o.location):U.location.setValue(["All"])),U.duration.setValue(1),U.soakTime.setValue(0),U.raiseThreshold.setValue(1),U.notifyOnClear.setValue(!1),U.clearThreshold.setValue(0),U.recurrence.setValue("daily"),L=(new Date).toString().split(" "),U.timezone.setValue((L[5]?L[5]:"")+" "+(L[6]?L[6]:"")+" "+(L[7]?L[7]:"")+" "+(L[8]?L[8]:"")),o.timezone&&""!=o.timezone&&U.timezone.setValue(o.timezone),U.immediate.setValue((null==o?void 0:o.schedule)?(null===(c=null==o?void 0:o.schedule)||void 0===c?void 0:c.immediate)&&1==o.schedule.immediate?"true":this.notificationsData.conditions.workFlowSaved?"false":"true":"true"),(null===(u=null==o?void 0:o.schedule)||void 0===u?void 0:u.immediate)?(this.notificationsData.conditions.minClearThreshold=0,o.duration&&""!=o.duration&&U.duration.setValue(o.duration),(o.soakTime&&""!=o.soakTime||0==o.soakTime)&&(U.soakTime.setValue(o.soakTime),this.notificationsData.conditions.soakTime=o.soakTime),o.raiseThreshold&&""!=o.raiseThreshold&&(U.raiseThreshold.setValue(o.raiseThreshold),this.notificationsData.conditions.minClearThreshold=o.raiseThreshold),o&&null!=o.soakTime&&null!=o.soakTime&&o.soakTime>0?(U.notifyOnClear.setValue(!0),U.clearThreshold.setValue((null==o?void 0:o.clearThreshold)?o.clearThreshold:0)):o&&null!=o.soakTime&&null!=o.soakTime&&0==o.soakTime&&(U.notifyOnClear.setValue(1==(null==o?void 0:o.notifyOnClear)),U.clearThreshold.setValue((null==o?void 0:o.clearThreshold)?o.clearThreshold:0)),(null==o?void 0:o.filter)&&o.filter.length>0&&(null===(m=U.weekDays)||void 0===m?void 0:m.value)&&(null===(w=U.weekDays.value)||void 0===w?void 0:w.length)>0&&o.filter.forEach(function(a){var o=U.weekDays.value.findIndex(function(o){var t,i;return(null===(t=o.short_name)||void 0===t?void 0:t.toLowerCase())==(null===(i=a.daysOfWeek)||void 0===i?void 0:i.toLowerCase())});if(o>=0){var t=new Date,i=new Date,e=a.fromTime.split(":"),n=a.toTime.split(":");t.setHours(e[0]),t.setMinutes(e[1]),i.setHours(n[0]),i.setMinutes(n[1]),U.weekDays.controls[o].controls.dayFrom.setValue(t),U.weekDays.controls[o].controls.dayTo.setValue(i),U.weekDays.controls[o].controls.checked.setValue(!0)}})):(R=new Date,"daily"==(null===(h=null==o?void 0:o.schedule)||void 0===h?void 0:h.type)?((null===(f=null===(v=null===(g=null==o?void 0:o.schedule)||void 0===g?void 0:g.recurrencePattern)||void 0===v?void 0:v.daily)||void 0===f?void 0:f.startTime)&&(H=o.schedule.recurrencePattern.daily.startTime.split(":"),R.setHours(H[0]),R.setMinutes(H[1])),(null===(p=null===(D=null===(k=null==o?void 0:o.schedule)||void 0===k?void 0:k.recurrencePattern)||void 0===D?void 0:D.daily)||void 0===p?void 0:p.startTime)&&U.scheduleStartTime.setValue(R),U.recurrence.setValue("daily")):"weekly"==(null===(F=null==o?void 0:o.schedule)||void 0===F?void 0:F.type)&&(null===(y=null===(C=null===(A=null==o?void 0:o.schedule)||void 0===A?void 0:A.recurrencePattern)||void 0===C?void 0:C.weekly)||void 0===y?void 0:y.days)&&o.schedule.recurrencePattern.weekly.days.length>0?((null===(x=null===(T=null===(b=null==o?void 0:o.schedule)||void 0===b?void 0:b.recurrencePattern)||void 0===T?void 0:T.weekly)||void 0===x?void 0:x.startTime)&&(G=o.schedule.recurrencePattern.weekly.startTime.split(":"),R.setHours(G[0]),R.setMinutes(G[1])),U.scheduleStartTime.setValue(R),(null===(Z=U.weekDays)||void 0===Z?void 0:Z.value)&&(null===(S=U.weekDays.value)||void 0===S?void 0:S.length)>0&&(U.recurrence.setValue("weekly"),U.weekDays.value.forEach(function(a,t){a&&""!=a&&(-1!=o.schedule.recurrencePattern.weekly.days.findIndex(function(o){var t;return(null==o?void 0:o.toLowerCase())==(null===(t=a.short_name)||void 0===t?void 0:t.toLowerCase())})?U.weekDays.controls[t].controls.scheduleWeeklyStatus.setValue(!0):U.weekDays.controls[t].controls.scheduleWeeklyStatus.setValue(!1))}),this.notificationsData.conditions.weekDays&&(null===(q=null===(O=null===(_=this.notificationsData)||void 0===_?void 0:_.conditions)||void 0===O?void 0:O.weekDays)||void 0===q?void 0:q.length)>0&&this.notificationsData.conditions.weekDays.forEach(function(a,t){a&&""!=a&&(a.scheduleWeeklyStatus=-1!=o.schedule.recurrencePattern.weekly.days.findIndex(function(o){var t;return(null==o?void 0:o.toLowerCase())==(null===(t=a.short_name)||void 0===t?void 0:t.toLowerCase())}))}))):"monthly"==(null===(M=null==o?void 0:o.schedule)||void 0===M?void 0:M.type)&&(null===(N=null===(P=null===(I=null==o?void 0:o.schedule)||void 0===I?void 0:I.recurrencePattern)||void 0===P?void 0:P.monthly)||void 0===N?void 0:N.dayOfMonth)&&o.schedule.recurrencePattern.monthly.dayOfMonth>=0&&((null===(J=null===(j=null===(E=null==o?void 0:o.schedule)||void 0===E?void 0:E.recurrencePattern)||void 0===j?void 0:j.monthly)||void 0===J?void 0:J.startTime)&&(Y=o.schedule.recurrencePattern.monthly.startTime.split(":"),R.setHours(Y[0]),R.setMinutes(Y[1]),U.scheduleStartTime.setValue(R)),U.recurrence.setValue("monthly"),U.dayOfMonth.setValue(o.schedule.recurrencePattern.monthly.dayOfMonth)));case 14:this.setNotificationsPageData(o);case 15:case"end":return d.stop()}},d,this)}))}},{key:"setNotificationsPageData",value:function(o){var t,i,e,n,r,l;((null===(t=null==o?void 0:o.emails)||void 0===t?void 0:t.length)||(null===(i=null==o?void 0:o.sms)||void 0===i?void 0:i.length)||(null===(e=null==o?void 0:o.webhooks)||void 0===e?void 0:e.length))&&(this.notificationsData.notification.workFlowSaved=!0,this.notificationsData.summary.workFlowSaved=!0,this.levelsPassed=5);var s=Object.assign({},null===(n=this.notificationsData.notification.workFlowScheduleForm)||void 0===n?void 0:n.controls);s&&Object.entries(s).length>0&&(s.notes.setValue(""),o.notes&&""!=o.notes&&s.notes.setValue(o.notes),this.notificationsData.notification.mailRecepients=o.emails&&o.emails.length>0?a(o.emails):[],(null===(r=null==o?void 0:o.sms)||void 0===r?void 0:r.length)?(this.notificationsData.notification.sms=a(o.sms),this.notificationsData.notification.isConsentMsgSmsPopupAccepted=!0,this.notificationsData.notification.isLoadConsentMsgSmsPopupApplicable=!1):this.notificationsData.notification.sms=[],this.notificationsData.notification.webhooks=(null===(l=null==o?void 0:o.webhooks)||void 0===l?void 0:l.length)?a(o.webhooks):[],this.notificationsData.notification.notes=null==o?void 0:o.notes)}},{key:"setDefaultWeekDays",value:function(){var a=new Date;a.setHours(23),a.setMinutes(58),a.setSeconds(0),this.notificationsData.conditions.weekDays=[{name:"Monday",short_name:"Mon",value:"monday",dayFrom:"",dayTo:"",scheduleWeekly:"M",defaultTime:"",minTime:"",maxTime:a},{name:"Tuesday",short_name:"Tue",value:"tuesday",dayFrom:"",dayTo:"",scheduleWeekly:"T",defaultTime:"",minTime:"",maxTime:a},{name:"Wednesday",short_name:"Wed",value:"wednesday",dayFrom:"",dayTo:"",scheduleWeekly:"W",defaultTime:"",minTime:"",maxTime:a},{name:"Thursday",short_name:"Thu",value:"thursday",dayFrom:"",dayTo:"",scheduleWeekly:"Th",defaultTime:"",minTime:"",maxTime:a},{name:"Friday",short_name:"Fri",value:"friday",dayFrom:"",dayTo:"",scheduleWeekly:"F",defaultTime:"",minTime:"",maxTime:a},{name:"Saturday",short_name:"Sat",value:"saturday",dayFrom:"",dayTo:"",scheduleWeekly:"Sat",defaultTime:"",minTime:"",maxTime:a},{name:"Sunday",short_name:"Sun",value:"sunday",dayFrom:"",dayTo:"",scheduleWeekly:"Sun",defaultTime:"",minTime:"",maxTime:a}],this.patchNotificationFormValue()}},{key:"loadLocationValue",value:function(a){if(a&&a!=["All"]&&a!=["11111111-1111-1111-1111-111111111111"]&&a.length>0){var o="";return a.forEach(function(a){"All"==a||"11111111-1111-1111-1111-111111111111"==a||(o+="&region=".concat(a))}),""!=o?this.http.get("".concat(m.N.API_BASE_URL,"nfa/locations?tenant=0").concat(o)).toPromise():[]}}},{key:"calculateTotalMonitoredAlarms",value:function(){var a=this.notificationsData.alarms.monitoredGroupAlarm.data.reduce(function(a,o){return a+Number(o.no_of_alarms)},0);this.notificationsData.alarms.totMonitoredAlarms=this.notificationsData.alarms.monitoredIndividualAlarm.data.length+a+this.notificationsData.alarms.monitoredTransformAlarm.data.length}},{key:"onCloseError",value:function(){this.errorMsg=void 0}},{key:"pageErrorHandle",value:function(a){this.errorInfo=401==a.status?"Access Denied":this.commonOrgService.pageErrorHandle(a),this.closeAlert(),this.error=!0}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"pauseContinueWorkflow",value:function(a){var o,t=this,i="workflowId=".concat(this.notificationsData.workflowId),e=null===(o=null==history?void 0:history.state)||void 0===o?void 0:o.ccoAlarmNotificationsText;"pause"==a?i=i.concat("&status=PAUSE"):"activate"==a&&(i=i.concat("&status=RUN")),this.loading=!0,this.btnDisabled=!0,this.errorMsg=void 0,this.successInfo=void 0,this.http.put("".concat(this.baseUrl,"deployWorkflow?").concat(i),null,{responseType:"text"}).subscribe(function(a){"Workflow successfully deployed"==a||"Workflow successfully deployed!"==a?(t.success=!0,t.successInfo="Alarm Notification Schedule successfully deployed",setTimeout(function(){t.success=!1,t.loading=!1,t.btnDisabled=!1,t.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications",{state:{ccoAlarmNotificationsText:e||""}})},3e3)):"Workflow successfully paused"==a||"Workflow successfully paused!"==a?(t.success=!0,t.loading=!1,t.btnDisabled=!1,t.successInfo="Alarm Notification Schedule successfully paused",setTimeout(function(){t.success=!1,t.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications",{state:{ccoAlarmNotificationsText:e||""}})},3e3)):(t.error=!0,t.loading=!1,t.btnDisabled=!1,t.errorInfo="Something went wrong")},function(a){t.error=!0,t.loading=!1,t.btnDisabled=!1,t.pageErrorHandle(a)})}},{key:"goToListView",value:function(){var a,o=null===(a=null==history?void 0:history.state)||void 0===a?void 0:a.ccoAlarmNotificationsText;this.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications",{state:{ccoAlarmNotificationsText:o||""}})}},{key:"getErrorMsg",value:function(a){a?(this.errorMsg=a,this.document.body.scrollIntoView({block:"start",behavior:"smooth"})):this.errorMsg=void 0}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}}]),o}();return o.\u0275fac=function(a){return new(a||o)(g.Y36(v.s),g.Y36(f.eN),g.Y36(k.v),g.Y36(D.t6),g.Y36(s.F0),g.Y36(s.gz),g.Y36(c.qu),g.Y36(p.V),g.Y36(F.Dx),g.Y36(A.v),g.Y36(l.K0),g.Y36(w.Z),g.Y36(C.FF))},o.\u0275cmp=g.Xpm({type:o,selectors:[["app-alarm-notifications"]],decls:29,vars:17,consts:[[1,"container"],["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],["class","row mb-3",4,"ngIf"],[1,"row","border-bottom"],[1,"col-md-11","pl-0"],[1,"alarm-title"],[1,"col-md-1","d-flex","align-items-center","justify-content-end"],["href","javascript:void(0)",3,"click"],["src"," assets/img/close-icon.svg","alt",""],[1,"my-4"],[1,"col-md-12","px-0"],[1,"stepper-ui"],[4,"ngFor","ngForOf"],[1,"pos-abs-right"],["type","button","id","previousbtn",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2",3,"disabled","hidden","click"],["src","assets/img/ic_chevronleft_grey.svg"],["type","button","id","nextbtn","class","btn-default primary btn-arr-nxt px-3 mr-2","data-toggle","tooltip","data-placement","top",3,"ngClass","title","click",4,"ngIf"],["type","button","id","finishbtn","class","small-screen-but btn-default primary px-3 mr-2","data-toggle","tooltip","data-placement","top",3,"ngClass","title","click",4,"ngIf"],["type","button","id","finishbtn","class","small-screen-but btn-default primary px-3","data-toggle","tooltip","data-placement","top",3,"ngClass","title","click",4,"ngIf"],["class","w-100 alert alert-danger fade show ng-star-inserted",4,"ngIf"],[3,"loadOnEdit","workFlowDetailsData","getWorkFlowAPIEmitter",4,"ngIf"],[3,"workFlowAlarmsData","getWorkFlowAPIEmitter","errorMsg",4,"ngIf"],[3,"conditionFormSubmitted","workFlowConditionsData","getWorkFlowAPIEmitter",4,"ngIf"],[3,"dynamicFields","dynamicFieldsObj","workflowObj",4,"ngIf"],[3,"workFlowSummaryData","getWorkFlowAPIEmitter",4,"ngIf"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[3,"title","ngClass","click"],["type","button","id","nextbtn","data-toggle","tooltip","data-placement","top",1,"btn-default","primary","btn-arr-nxt","px-3","mr-2",3,"ngClass","title","click"],["src","assets/img/ic_chevron-r-w.svg"],["type","button","id","finishbtn","data-toggle","tooltip","data-placement","top",1,"small-screen-but","btn-default","primary","px-3","mr-2",3,"ngClass","title","click"],["type","button","id","finishbtn","data-toggle","tooltip","data-placement","top",1,"small-screen-but","btn-default","primary","px-3",3,"ngClass","title","click"],[1,"w-100","alert","alert-danger","fade","show","ng-star-inserted"],[3,"loadOnEdit","workFlowDetailsData","getWorkFlowAPIEmitter"],[3,"workFlowAlarmsData","getWorkFlowAPIEmitter","errorMsg"],[3,"conditionFormSubmitted","workFlowConditionsData","getWorkFlowAPIEmitter"],[3,"dynamicFields","dynamicFieldsObj","workflowObj"],[3,"workFlowSummaryData","getWorkFlowAPIEmitter"]],template:function(a,o){1&a&&(g.TgZ(0,"section"),g.TgZ(1,"div",0),g.YNc(2,Ka,6,1,"div",1),g.YNc(3,Xa,6,1,"div",2),g.YNc(4,$a,7,1,"div",3),g.TgZ(5,"div",4),g.TgZ(6,"div",5),g.TgZ(7,"div",6),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"div",7),g.TgZ(10,"a",8),g.NdJ("click",function(){return o.goToListView()}),g._UZ(11,"img",9),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"section",10),g.TgZ(13,"div",11),g.TgZ(14,"ul",12),g.YNc(15,oo,4,6,"li",13),g.qZA(),g.TgZ(16,"div",14),g.TgZ(17,"button",15),g.NdJ("click",function(){return o.onTabChange(o.selectedTabIndex-1,"backward")}),g._UZ(18,"img",16),g._uU(19),g.qZA(),g.YNc(20,io,3,5,"button",17),g.YNc(21,eo,2,5,"button",18),g.YNc(22,no,2,5,"button",19),g.qZA(),g.YNc(23,ro,6,1,"div",20),g.qZA(),g.qZA(),g.YNc(24,lo,1,2,"app-workflow-details",21),g.YNc(25,so,1,1,"app-workflow-alarms",22),g.YNc(26,co,1,2,"app-workflow-conditions",23),g.YNc(27,uo,1,3,"app-recepients",24),g.YNc(28,mo,1,1,"app-workflow-summary",25)),2&a&&(g.xp6(2),g.Q6J("ngIf",o.error),g.xp6(1),g.Q6J("ngIf",o.success),g.xp6(1),g.Q6J("ngIf",o.loading),g.xp6(4),g.hij(" ",""!=(null==o.notificationsData||null==o.notificationsData.details||null==o.notificationsData.details.workFlowDetailsForm||null==o.notificationsData.details.workFlowDetailsForm.controls||null==o.notificationsData.details.workFlowDetailsForm.controls.name?null:o.notificationsData.details.workFlowDetailsForm.controls.name.value)?null==o.notificationsData||null==o.notificationsData.details||null==o.notificationsData.details.workFlowDetailsForm||null==o.notificationsData.details.workFlowDetailsForm.controls||null==o.notificationsData.details.workFlowDetailsForm.controls.name?null:o.notificationsData.details.workFlowDetailsForm.controls.name.value:o.notificationsData.workflowId&&""!=o.notificationsData.workflowId?o.language["Notification Schedule"]||"Notification Schedule":o.language["New Notification Schedule"]," "),g.xp6(7),g.Q6J("ngForOf",o.alarmNotificationsSteppers),g.xp6(2),g.Q6J("disabled",0===o.selectedTabIndex)("hidden",0===o.selectedTabIndex),g.xp6(2),g.hij(" ",o.language["Go back"]," "),g.xp6(1),g.Q6J("ngIf",o.selectedTabIndex+1!==(null==o.alarmNotificationsSteppers?null:o.alarmNotificationsSteppers.length)),g.xp6(1),g.Q6J("ngIf",o.selectedTabIndex+1===(null==o.alarmNotificationsSteppers?null:o.alarmNotificationsSteppers.length)),g.xp6(1),g.Q6J("ngIf",o.selectedTabIndex+1===(null==o.alarmNotificationsSteppers?null:o.alarmNotificationsSteppers.length)),g.xp6(1),g.Q6J("ngIf",o.errorMsg),g.xp6(1),g.Q6J("ngIf","Details"===o.activeTab),g.xp6(1),g.Q6J("ngIf","Alarms"===o.activeTab),g.xp6(1),g.Q6J("ngIf","Conditions"===o.activeTab),g.xp6(1),g.Q6J("ngIf","notification"===o.activeTab),g.xp6(1),g.Q6J("ngIf","Summary"===o.activeTab))},directives:[l.O5,l.sg,l.mk,q,da,Wa,Ba.F,za.l],styles:['.stepper-ui[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0 0 10px;padding:0;overflow:hidden}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:2px 10px 0 30px;background:#ffffff;color:#1a1f22;position:relative;height:32px;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;border-right:0px!important;border-left:0px!important;outline:none!important;width:110px;overflow:hidden;text-overflow:ellipsis}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";width:30px;height:100%;background:transparent;position:absolute;top:0;right:-10px;transform:rotate(48deg);z-index:1;border:1px ridge transparent;border-top-color:#0279ff;border-right-color:#0279ff;border-top-right-radius:5px}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{background-color:#0279ff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{background-color:#82bf00;border-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{background-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled{background-color:#82bf00!important;border-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{border-top-color:#fff!important;border-right-color:#fff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{border-top-color:#0279ff!important;border-right-color:#0279ff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   button[_ngcontent-%COMP%]{border-top-left-radius:30px;border-bottom-left-radius:30px}button[_ngcontent-%COMP%]:disabled{background:transparent!important;border:1px solid #0279ff!important;cursor:not-allowed;color:#4c4c4c}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{opacity:.8;color:#fff!important}.alarm-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-size:42px;font-style:normal;font-weight:300;line-height:53px;letter-spacing:0em;text-align:left}.pe-none[_ngcontent-%COMP%]{pointer-events:none}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:0px;top:0px}.small-screen-but[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}']}),o}()}],ho=function(){var a=e(function a(){t(this,a)});return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=g.oAB({type:a}),a.\u0275inj=g.cJS({imports:[[s.Bz.forChild(wo)],s.Bz]}),a}(),go=n(44466),vo=n(89043),fo=function(){var a=e(function a(){t(this,a)});return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=g.oAB({type:a}),a.\u0275inj=g.cJS({imports:[[l.ez,ho,M.T,U.A0,c.u5,c.UX,ha._8,go.m,vo.R]]}),a}()},55533:function(a,o,i){i.d(o,{z:function(){return l}});var n,r=i(37716),l=((n=function(){function a(){t(this,a)}return e(a,[{key:"enforceMinMax",value:function(a){var o=null==a?void 0:a.target.min,t=null==a?void 0:a.target.max,i=null==a?void 0:a.target.value;return""!=i?(parseFloat(i)<parseFloat(o)&&(a.target.value=o),parseFloat(i)>parseFloat(t)&&(a.target.value=t),a.target.value):-1}}]),a}()).\u0275fac=function(a){return new(a||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)}}])}();