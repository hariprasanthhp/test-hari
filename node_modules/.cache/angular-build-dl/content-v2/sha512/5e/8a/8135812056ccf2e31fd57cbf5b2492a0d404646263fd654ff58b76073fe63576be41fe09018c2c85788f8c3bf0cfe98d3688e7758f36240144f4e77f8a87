!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?r:String(r)),o)}var i,r}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[277],{30277:function(t,o,i){i.r(o),i.d(o,{FoundationReportsModule:function(){return b}});var r,s=i(38583),a=i(39895),c=i(89097),l=i(37716),u=i(7450),d=((r=function(){function t(n,o){e(this,t),this.translateService=n,this.sso=o,this.language={},this.showInventoryReport=!1,this.showUnassociatedDevices=!1,this.showCallOutcome=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t}),this.sso.checFoundationScope(c.Nc.READ)&&(this.showCallOutcome=!0,this.showUnassociatedDevices=!0,this.showInventoryReport=!0)}}]),t}()).\u0275fac=function(e){return new(e||r)(l.Y36(u.s),l.Y36(c.t6))},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-foundation-reports"]],decls:3,vars:0,consts:[[1,"row"],[1,"col-sm-12","col-md-10","col-lg-10","pl-4"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"router-outlet"),l.qZA(),l.qZA())},directives:[a.lC],styles:[""]}),r),g=i(32964),p=i(95139),h=i(17507),f=[{path:"",component:d,children:[{path:"inventory-report",component:g.g,data:{title:"Calix Cloud - Flow Configuration"}},{path:"call-outcome-report",component:p.S,data:{title:"Calix Cloud - Flow Configuration"}},{path:"unassociated-devices",component:h.k,data:{title:"Calix Cloud - Flow Configuration"}},{path:"",redirectTo:"inventory-report",pathMatch:"full"}]}],v=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),t}(),m=i(86640),b=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.ez,m.A0,v]]}),t}()},95139:function(t,o,i){i.d(o,{S:function(){return w}});var r=i(92340),s=i(37716),a=i(7450),c=i(90048),l=i(89097),u=i(44727),d=i(39895),g=i(39075),p=i(94802),h=i(38583),f=i(3679),v=i(86640);function m(e,t){if(1&e&&(s.TgZ(0,"div",2),s.TgZ(1,"div",3),s._uU(2),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(2),s.Oqu(n.language.Call_Outcome_Report)}}function b(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"span",15),s._UZ(2,"img",16),s.qZA(),s.TgZ(3,"button",17),s.NdJ("click",function(){s.CHM(n);var e=s.oxw(2);return e.isModalError=!e.isModalError}),s._UZ(4,"span"),s.qZA(),s.TgZ(5,"div",18),s._uU(6),s.qZA(),s.qZA()}if(2&e){var o=s.oxw(2);s.xp6(6),s.Oqu(o.language["No data available"])}}function _(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"span",15),s._UZ(2,"img",16),s.qZA(),s.TgZ(3,"button",17),s.NdJ("click",function(){s.CHM(n);var e=s.oxw(2);return e.isError=!e.isError}),s._UZ(4,"span"),s.qZA(),s.TgZ(5,"div",18),s._uU(6),s.qZA(),s.qZA()}if(2&e){var o=s.oxw(2);s.xp6(6),s.Oqu(o.alertMessage)}}function C(e,t){if(1&e&&(s.TgZ(0,"div",19),s._uU(1),s.qZA()),2&e){var n=s.oxw(2);s.xp6(1),s.hij(" ",n.language.Time_Period_Report_Error," ")}}var O=function(){return{standalone:!0}};function M(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",4),s.YNc(1,b,7,1,"div",5),s.YNc(2,_,7,1,"div",5),s.TgZ(3,"div",6),s.TgZ(4,"form",7),s.TgZ(5,"div",8),s.TgZ(6,"ng-select",9,10),s.NdJ("change",function(){return s.CHM(n),s.oxw().onChangeTimePeriod()})("ngModelChange",function(e){return s.CHM(n),s.oxw().selectedTimePeriod=e}),s.qZA(),s.YNc(8,C,2,1,"div",11),s.qZA(),s.TgZ(9,"div",12),s.TgZ(10,"button",13),s.NdJ("click",function(){return s.CHM(n),s.oxw().downloadReportFile()}),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){var o=s.MAs(7),i=s.oxw();s.xp6(1),s.Q6J("ngIf",i.isModalError),s.xp6(1),s.Q6J("ngIf",i.isError),s.xp6(4),s.s9C("placeholder",i.language.Time_Period),s.Q6J("searchable",!1)("clearable",!1)("items",i.timePeriod)("ngModel",i.selectedTimePeriod)("ngModelOptions",s.DdM(11,O)),s.xp6(2),s.Q6J("ngIf",(null==o?null:o.invalid)&&i.submit),s.xp6(2),s.Q6J("disabled",i.bttnDissable),s.xp6(1),s.Oqu(i.language.Download_Report)}}var P,w=((P=function(){function t(n,o,i,r,s,a,c){e(this,t),this.translateService=n,this.downloadService=o,this.sso=i,this.callOutcomeReportService=r,this.router=s,this.titleService=a,this.service=c,this.timePeriod=[{name:"Last 30 days",id:"30D"},{name:"Last 60 days",id:"60D"},{name:"Last 90 days",id:"90D"}],this.hasWriteAccess=!1,this.isModalError=!1,this.hasScopeAccess=!1,this.bttnDissable=!1,this.submit=!1,this.alertMessage="",this.orgId=this.sso.getOrgId()}return n(t,[{key:"setTitle",value:function(){this.router.url.includes("support/netops-management/reports/call-outcome-report")?this.titleService.setTitle("".concat(this.language.Call_Outcome_Report," - ").concat(this.language.Reports," - ").concat(this.language.NetOps," - ").concat(this.language.Service," - ").concat(this.language["Calix Cloud"])):this.titleService.setTitle("".concat(this.language["Call Outcome"]," - ").concat(this.language.Reports," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"]))}},{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.setTitle(),e.timePeriod=[{name:e.language.Last_30_days,id:"30D"},{name:e.language.Last_60_days,id:"60D"},{name:e.language.Last_90_days,id:"90D"}]}),this.setTitle();var t=this.sso.getScopes();this.router.url.includes("cco/operations/cco-reports")?r.N.VALIDATE_SCOPE?(t["cloud.rbac.coc.operations.report.calloutcomereports"]=t["cloud.rbac.coc.operations.report.calloutcomereports"]?t["cloud.rbac.coc.operations.report.calloutcomereports"]:[],t&&t["cloud.rbac.coc.operations.report.calloutcomereports"].length&&(this.hasScopeAccess=!0),t&&t["cloud.rbac.coc.operations.report.calloutcomereports"]&&-1!==t["cloud.rbac.coc.operations.report.calloutcomereports"].indexOf("write")&&(this.hasWriteAccess=!0)):this.hasWriteAccess=!0:r.N.VALIDATE_SCOPE?(t["cloud.rbac.csc.netops.reports.call_outcome"]=t["cloud.rbac.csc.netops.reports.call_outcome"]?t["cloud.rbac.csc.netops.reports.call_outcome"]:[],t&&t["cloud.rbac.csc.netops.reports.call_outcome"].length&&(this.hasScopeAccess=!0),t&&t["cloud.rbac.csc.netops.reports.call_outcome"]&&-1!==t["cloud.rbac.csc.netops.reports.call_outcome"].indexOf("write")&&(this.hasWriteAccess=!0)):this.hasWriteAccess=!0,this.hasScopeAccess&&(this.sso.setPageAccess(!0),this.timePeriod=[{name:this.language.Last_30_days,id:"30D"},{name:this.language.Last_60_days,id:"60D"},{name:this.language.Last_90_days,id:"90D"}])}},{key:"downloadReportFile",value:function(){var e=this;if(this.submit=!0,this.selectedTimePeriod){this.isError=!1,this.isModalError=!1;var t=this.getTimezoneName();this.callOutcomeReportService.getCallOutcomeFilePath(this.orgId,this.selectedTimePeriod,t).subscribe(function(t){e.selectedTimePeriod=null,null!=(t=null==t?void 0:t.replace(/"/g,""))?e.downloadService.saveToDisk(t):e.isModalError=!0,e.isError=!1,e.submit=!1},function(t){e.isError=!0,e.pageErrorHandle(t)})}}},{key:"ngOnDestroy",value:function(){this.languageSubject.unsubscribe()}},{key:"onChangeTimePeriod",value:function(){this.bttnDissable=!this.selectedTimePeriod}},{key:"getTimezoneName",value:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"pageErrorHandle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(401==e.status)this.alertMessage=this.language["Access Denied"];else if(500==e.status&&"callcoutcome"==t)this.alertMessage=this.language.internalServerError;else if(400==e.status){var n=JSON.parse(e.error);this.alertMessage=n.errorMessage}else this.alertMessage=this.sso.pageErrorHandle(e);this.isError=!0,$("body").scrollTop(0)}}]),t}()).\u0275fac=function(e){return new(e||P)(s.Y36(a.s),s.Y36(c.K),s.Y36(l.t6),s.Y36(u.B),s.Y36(d.F0),s.Y36(g.Dx),s.Y36(p.Q))},P.\u0275cmp=s.Xpm({type:P,selectors:[["app-call-outcome-report"]],decls:2,vars:2,consts:[["class","row no-gutters my-3",4,"ngIf"],["id","call-outcome-report","class","tab-pane",4,"ngIf"],[1,"row","no-gutters","my-3"],[1,"d-block","d-sm-none","ccl-Secondary-title","mb-2","col-md-12","border-bottom"],["id","call-outcome-report",1,"tab-pane"],["class","py-3 alert alert-danger",4,"ngIf"],["id","netops_callOutcomeReport_formdiv",1,"row","pb-2"],[1,"w-100"],[1,"col-4","mb-3"],["id","timePeriod","name","timePeriod","bindLabel","name","autofocus","","bindValue","id","name","rttype","required","",3,"searchable","clearable","items","placeholder","ngModel","ngModelOptions","change","ngModelChange"],["rttype","ngModel"],["class","errorMessage",4,"ngIf"],[1,"col-md-12"],["type","button","id","netops_callOutcomeReport_download",1,"btn-default","primary","px-3","mb-2",3,"disabled","click"],[1,"py-3","alert","alert-danger"],[1,"success-img"],["src","./assets/img/error-icon.svg"],["type","button","id","close-error-btn","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],[1,"d-inline-flex"],[1,"errorMessage"]],template:function(e,t){1&e&&(s.YNc(0,m,3,1,"div",0),s.YNc(1,M,12,12,"div",1)),2&e&&(s.Q6J("ngIf",t.hasScopeAccess),s.xp6(1),s.Q6J("ngIf",t.hasScopeAccess))},directives:[h.O5,f._Y,f.JL,f.F,v.w9,f.Q7,f.JJ,f.On],styles:["div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}form[_ngcontent-%COMP%]{width:100%}"]}),P)},44727:function(t,o,i){i.d(o,{B:function(){return g}});var r,s=i(91841),a=i(40205),c=i(5304),l=i(76149),u=i(37716),d=i(89097),g=((r=function(){function t(n,o){e(this,t),this.http=n,this.Sso=o}return n(t,[{key:"getCallOutcomeFilePath",value:function(e,t,n){var o=(new s.LE).set("duration",t).set("timezone",n);return this.Sso.getOrg(e)&&o.set("orgId",e),this.http.get(l.KU,{params:o,responseType:"text"}).pipe((0,c.K)(this.handleError))}},{key:"getAuditReportFilePath",value:function(e,t,n){var o=(new s.LE).set("duration",t).set("timeZone",n);return this.Sso.getOrg(e)&&o.set("orgId",e),this.http.get(l.yz,{params:o,responseType:"text"}).pipe((0,c.K)(this.handleError))}},{key:"handleError",value:function(e){return(0,a._)(e)}}]),t}()).\u0275fac=function(e){return new(e||r)(u.LFG(s.eN),u.LFG(d.t6))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},76149:function(e,t,n){n.d(t,{nJ:function(){return i},bX:function(){return r},B3:function(){return s},eq:function(){return a},pq:function(){return c},FK:function(){return l},ek:function(){return u},jX:function(){return d},hF:function(){return g},GB:function(){return p},gn:function(){return h},ob:function(){return f},z9:function(){return v},L:function(){return m},VB:function(){return b},KU:function(){return _},yz:function(){return C}});var o=n(92340).N.SUPPORT_URL,i=o+"/netops-selfheal/wifi-optimization/org/config",r=o+"/netops-selfheal/wifi-optimization/org/config",s=o+"/netops-stale-device-purge/policy",a=o+"/netops-stale-device-purge/policy",c=o+"/netops-stale-device-purge/policy",l=o+"/netops-stale-device-purge/policy-exec-logs",u=o+"/netops-stale-device-purge/policy-exec-logs/count",d=o+"/netops-stale-device-purge/policy",g=o+"/netops-secure/onboarding",p=o+"/netops-secure/onboarding/update",h=o+"/netops-exts/external-server",f=o+"/netops-exts/external-server",v=o+"/netops-exts/external-server",m=o+"/device-systools/site-scan/orgConfig",b=o+"/device-systools/site-scan/orgConfig",_=o+"/orgIdReport/download",C=o+"/useraudit/downloadLogByNFS"}}])}();