!function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[8686],{38686:function(e,i,a){a.r(i),a.d(i,{CcoAlarmNotificationsModule:function(){return rt}});var r=a(38583),c=a(3679),l=a(39895),s=a(15835),u=a(19642),d=a(55634),g=a(23771),p=a(79765),h=a(25917),f=a(35758),m=a(5304),v=a(92340),_=a(37716),A=a(91841),b=a(7450),O=a(49342),Z=a(38048),y=a(39075),w=a(12664),C=a(48483),T=a(86640),x=["notificationModal"];function P(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",32),_.TgZ(1,"span",33),_._UZ(2,"img",34),_.qZA(),_.TgZ(3,"span",35),_._uU(4),_.TgZ(5,"b"),_._uU(6),_.qZA(),_._uU(7,"? "),_.qZA(),_.TgZ(8,"div",36),_.TgZ(9,"button",37),_.NdJ("click",function(){return _.CHM(n),_.oxw().deleteAlarmWorkflowId()}),_._uU(10),_.qZA(),_.TgZ(11,"button",38),_.NdJ("click",function(){return _.CHM(n),_.oxw().closeModal()}),_._uU(12),_.qZA(),_.qZA(),_.qZA()}if(2&t){var i=_.oxw();_.xp6(4),_.hij(" ",i.language[i.deleteWarnMsg]?i.language[i.deleteWarnMsg]:i.deleteWarnMsg," "),_.xp6(2),_.Oqu(i.modalInfo),_.xp6(3),_.Q6J("disabled",i.btnDisabled),_.xp6(1),_.hij(" ",i.language.Confirm," "),_.xp6(2),_.hij(" ",i.language.Cancel," ")}}function N(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",39),_.TgZ(1,"span",40),_._UZ(2,"img",41),_.qZA(),_.TgZ(3,"button",42),_.NdJ("click",function(){return _.CHM(n),_.oxw().closeAlert()}),_._UZ(4,"span"),_.qZA(),_._UZ(5,"div",43),_.qZA()}if(2&t){var i=_.oxw();_.xp6(5),_.Q6J("innerHtml",i.language[i.errorInfo]||i.errorInfo,_.oJD)}}function q(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",45),_.TgZ(1,"span",40),_._UZ(2,"img",41),_.qZA(),_.TgZ(3,"button",42),_.NdJ("click",function(){var t=_.CHM(n).index;return _.oxw(2).closeAlert(t)}),_._UZ(4,"span"),_.qZA(),_._UZ(5,"div",46),_.qZA()}if(2&t){var i=e.$implicit,o=_.oxw(2);_.xp6(5),_.Q6J("innerHtml",o.language[i]||i,_.oJD)}}function S(t,e){if(1&t&&(_.TgZ(0,"div"),_.YNc(1,q,6,1,"div",44),_.qZA()),2&t){var n=_.oxw();_.xp6(1),_.Q6J("ngForOf",n.errors)}}function M(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",47),_.TgZ(1,"span",48),_._UZ(2,"img",49),_.qZA(),_.TgZ(3,"button",42),_.NdJ("click",function(){return _.CHM(n),_.oxw().success=!1}),_._UZ(4,"span"),_.qZA(),_._UZ(5,"div",43),_.qZA()}if(2&t){var i=_.oxw();_.xp6(5),_.Q6J("innerHtml",i.language[i.successInfo]||i.successInfo,_.oJD)}}function k(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"button",50),_.NdJ("click",function(){return _.CHM(n),_.oxw().showNotification()}),_._uU(2),_.qZA(),_.qZA()}if(2&t){var i=_.oxw();_.xp6(2),_.hij(" ",i.language["New Notification"]," ")}}function R(t,e){1&t&&_._UZ(0,"div")}function E(t,e){if(1&t&&(_.TgZ(0,"div",51),_.TgZ(1,"div",29),_.TgZ(2,"div",52),_.TgZ(3,"div",53),_.TgZ(4,"div",54),_.TgZ(5,"span",55),_._uU(6),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){var n=_.oxw();_.xp6(6),_.Oqu(n.language.Loading)}}function I(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",56),_.NdJ("click",function(){return _.CHM(n),_.oxw().clearInput()}),_.TgZ(1,"button",57),_._UZ(2,"span"),_.qZA(),_.qZA()}}function L(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"button",67),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().$implicit;return _.oxw().getAlarmWorkflowId(t)}),_._uU(1),_.qZA()}if(2&t){var i=_.oxw(2);_.xp6(1),_.hij(" ",i.language.Edit," ")}}function U(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"button",67),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().$implicit;return _.oxw().pauseContinueWorkflow(t,"pause",t.ui_modified_notification_type)}),_._uU(1),_.qZA()}if(2&t){var i=_.oxw(2);_.xp6(1),_.hij(" ",i.language.Pause," ")}}function W(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"button",67),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().$implicit;return _.oxw().pauseContinueWorkflow(t,"activate",t.ui_modified_notification_type)}),_._uU(1),_.qZA()}if(2&t){var i=_.oxw(2);_.xp6(1),_.hij(" ",i.language.Activate," ")}}function Y(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"button",67),_.NdJ("click",function(){_.CHM(n);var t=_.oxw().$implicit;return _.oxw().getAlarmWorkflowId(t)}),_._uU(1),_.qZA()}if(2&t){var i=_.oxw(2);_.xp6(1),_.hij(" ",i.language.Edit," ")}}function J(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"tr"),_.TgZ(1,"td",58),_.TgZ(2,"a",59),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw().getAlarmNotificationSummary(t)}),_._uU(3),_.qZA(),_.qZA(),_.TgZ(4,"td"),_._uU(5),_.qZA(),_.TgZ(6,"td"),_._uU(7),_.qZA(),_.TgZ(8,"td"),_._uU(9),_.qZA(),_.TgZ(10,"td"),_._uU(11),_.qZA(),_.TgZ(12,"td"),_.TgZ(13,"div",60),_._UZ(14,"span",61),_._uU(15),_.qZA(),_.qZA(),_.TgZ(16,"td",62),_.TgZ(17,"div",63),_.TgZ(18,"button",64),_._uU(19," ... "),_.qZA(),_.TgZ(20,"div",65),_.YNc(21,L,2,1,"button",66),_.YNc(22,U,2,1,"button",66),_.YNc(23,W,2,1,"button",66),_.TgZ(24,"button",67),_.NdJ("click",function(){var t=_.CHM(n).$implicit;return _.oxw().delete(t)}),_._uU(25),_.qZA(),_.YNc(26,Y,2,1,"button",66),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){var i=e.$implicit,o=_.oxw();_.xp6(3),_.Oqu(i.name?i.name:""),_.xp6(2),_.Oqu(i.ui_modified_notification_type_display),_.xp6(2),_.hij(" ",i.trigger?i.trigger:""," "),_.xp6(2),_.Oqu(null!=i&&i.methods?i.methods:""),_.xp6(2),_.Oqu(i.description?i.description:""),_.xp6(2),_.Q6J("ngClass","Draft"==i.mod_status?"draft-but":"Running"==i.mod_status?"running-but":"paused-but"),_.xp6(2),_.hij(" ",i.mod_status?o.language[i.mod_status]||i.mod_status:""," "),_.xp6(6),_.Q6J("ngIf","DRAFT"==i.status||"PAUSE"==i.status),_.xp6(1),_.Q6J("ngIf","RUN"==i.status),_.xp6(1),_.Q6J("ngIf","PAUSE"==i.status),_.xp6(2),_.hij(" ",o.language.Delete," "),_.xp6(1),_.Q6J("ngIf",0==i.active)}}function H(t,e){if(1&t&&(_.TgZ(0,"div",79),_._uU(1),_.qZA(),_.TgZ(2,"div",80),_._uU(3),_.qZA()),2&t){var n=e.item,i=_.oxw(2);_.s9C("title",i.language[n.name]||n.name),_.xp6(1),_.hij(" ",i.language[n.name]||n.name," "),_.xp6(1),_.s9C("title",i.language[n.content]||n.content),_.xp6(1),_.hij(" ",i.language[n.content]||n.content," ")}}function F(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",68),_.TgZ(1,"button",69),_.NdJ("click",function(){return _.CHM(n),_.oxw().close()}),_._UZ(2,"span"),_.qZA(),_.qZA(),_.TgZ(3,"div",70),_.TgZ(4,"div",71),_._uU(5),_.qZA(),_.TgZ(6,"p",72),_._uU(7),_.qZA(),_.TgZ(8,"div",73),_.TgZ(9,"ng-select",74),_.YNc(10,H,4,4,"ng-template",75),_.qZA(),_.qZA(),_.TgZ(11,"div",76),_.TgZ(12,"button",77),_.NdJ("click",function(){return _.CHM(n),_.oxw().goto()}),_._uU(13),_.qZA(),_.TgZ(14,"button",78),_.NdJ("click",function(){return _.CHM(n),_.oxw().close()}),_._uU(15),_.qZA(),_.qZA(),_.qZA()}if(2&t){var i=_.oxw();_.xp6(5),_.Oqu(i.language["New Notification"]),_.xp6(2),_.Oqu(i.language["Notification Type"]),_.xp6(1),_.Q6J("formGroup",i.notificatonForm),_.xp6(1),_.Q6J("clearable",!1)("items",i.notificationTypes),_.xp6(3),_.Q6J("disabled",!i.notificatonForm.valid),_.xp6(1),_.hij(" ",i.language["Start Notification"]," "),_.xp6(2),_.hij(" ",i.language.Cancel," ")}}var D,j=function(t){return{showHideTable:t}},Q=((D=function(){function e(t,i,o,a,r,l,s,u,d,g){n(this,e),this.http=t,this.translateService=i,this.router=o,this.commonOrgService=a,this.service=r,this.titleService=l,this.document=s,this.modalService=u,this.fb=d,this.dateUtils=g,this.types=["OPTICAL_OUTLIERS","EARLY_WARN_PON_CAP","EARLY_WARN_ETH_CAP","EARLY_WARN_PON_LOSS","outage","optical"],this.healthTypes=["OPTICAL_OUTLIERS","EARLY_WARN_PON_CAP","EARLY_WARN_ETH_CAP","EARLY_WARN_PON_LOSS","outliers","optical"],this.urls={add:{outage:"/cco/outage-workflow",optical:"/cco/notifications/health/OPTICAL_OUTLIERS/add",outliers:"/cco/notifications/health/OPTICAL_OUTLIERS/add",OPTICAL_OUTLIERS:"/cco/notifications/health/OPTICAL_OUTLIERS/add",EARLY_WARN_PON_CAP:"/cco/notifications/health/EARLY_WARN_PON_CAP/add",EARLY_WARN_ETH_CAP:"/cco/notifications/health/EARLY_WARN_ETH_CAP/add",EARLY_WARN_PON_LOSS:"/cco/notifications/health/EARLY_WARN_PON_LOSS/add"},edit:{outage:"/cco/outage-workflow",optical:"/cco/notifications/health/OPTICAL_OUTLIERS/edit/",outliers:"/cco/notifications/health/OPTICAL_OUTLIERS/add",OPTICAL_OUTLIERS:"/cco/notifications/health/OPTICAL_OUTLIERS/edit/",EARLY_WARN_PON_CAP:"/cco/notifications/health/EARLY_WARN_PON_CAP/edit/",EARLY_WARN_ETH_CAP:"/cco/notifications/health/EARLY_WARN_ETH_CAP/edit/",EARLY_WARN_PON_LOSS:"/cco/notifications/health/EARLY_WARN_PON_LOSS/edit/"}},this.notificationTypes=[],this.map={outage:"Internet Outage",alarm:"Alarm",outliers:"Optical Outliers",OPTICAL_OUTLIERS:"Optical Outliers",EARLY_WARN_PON_CAP:"Early Warning PON Capacity",EARLY_WARN_ETH_CAP:"Early Warning Ethernet Capacity",EARLY_WARN_PON_LOSS:"Early Warning PON Loss"},this.showcloseicon=!1,this.renderedOnce=!0,this.errorMsg=void 0,this.errorInfo="",this.successInfo="",this.filterSelected="all",this.filterArray=[{id:"all",name:"All Types"},{id:"alarm",name:"Alarm"},{id:"outage",name:"Internet Outage"},{id:"OPTICAL_OUTLIERS",name:"Optical Outliers"},{id:"EARLY_WARN_PON_CAP",name:"Early Warning PON Capacity"},{id:"EARLY_WARN_ETH_CAP",name:"Early Warning Ethernet Capacity"},{id:"EARLY_WARN_PON_LOSS",name:"Early Warning PON Loss"}],this.dtOptions={},this.dtTrigger=new p.xQ,this.alarmWorkFlowList=[],this.baseUrl="".concat(v.N.API_BASE_URL,"analytics-engine/"),this.cco_entitlement=!1,this.hasWriteAccess=!1,this.notificatonForm=this.fb.group({notificaton:["alarm",c.kI.required]}),this.disableBtnForstrtNtfcn=!0,this.searchInput="",this.errors=[],this.showRecipients=!1,this.deleteWarnMsg="",this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.germanTable=this.translateService.de_DE}return o(e,[{key:"ngOnInit",value:function(){var t,e,n=this;this.notificatonForm.valueChanges.subscribe(function(t){console.log(t),n.disableBtnForstrtNtfcn=!1}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){n.loading=!0,n.language=t,n.tableLanguageOptions(),n.reloadTable(!0),n.titleService.setTitle("".concat(n.language.Notifications," - ").concat(n.language["Alarm & Health Notifications"]," - ").concat(n.language.Alarms," - ").concat(n.language.Operations," - ").concat(n.language.Operations," - ").concat(n.language["Calix Cloud"]))}),this.notificationTypes=[{id:"alarm",name:"Alarm",content:"Get notified when alarms are triggered"},{id:"outage",name:"Internet Outage",content:"Receive an immediate outage notification for monitored areas"},{id:"optical",name:"Optical Outliers",content:"Receive a weekly report on selected OLT systems"},{id:"EARLY_WARN_PON_CAP",name:"Early Warning PON Capacity",content:"Receive a weekly report on siginificant PON capacity changes"},{id:"EARLY_WARN_ETH_CAP",name:"Early Warning Ethernet Capacity",content:"Receive a weekly report on  siginificant Ethernet capacity changes"},{id:"EARLY_WARN_PON_LOSS",name:"Early Warning PON Loss",content:"Receive a weekly report on  siginificant PON Loss"}],this.titleService.setTitle("".concat(this.language.Notifications," - ").concat(this.language["Alarm & Health Notifications"]," - ").concat(this.language.Alarms," - ").concat(this.language.Operations," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"]));var i=this.service.getEntitlements();i[210]&&!i[102]&&(this.cco_entitlement=!0),this.renderedOnce=!0,this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,paging:!0,processing:!1,dom:"tipr",autoWidth:!1,columnDefs:[{targets:[0],orderable:!0,width:"23%"},{targets:[1],width:"23%"},{targets:[2],width:"23%"},{targets:[3],width:"16%"},{targets:[6],width:"15%",orderable:!1,className:"dt-right"}],order:[0,"asc"]},this.cco_entitlement&&(this.dtOptions.columnDefs[4].visible=!1),this.searchtext=(null===(t=null==history?void 0:history.state)||void 0===t?void 0:t.ccoAlarmNotificationsText)||"";var o=this.service.getScopes();v.N.VALIDATE_SCOPE&&(o&&-1!==(null===(e=o["cloud.rbac.coc.operations.alarms.alarmsandhealthnotifications"])||void 0===e?void 0:e.indexOf("write"))?this.hasWriteAccess=!0:this.dtOptions.columnDefs[4].visible=!1),this.tableLanguageOptions(),this.getAlarmWorkflowList()}},{key:"ngAfterViewInit",value:function(){this.dtTrigger.next()}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:this.language&&this.language.fileLanguage&&"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.germanTable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"closeicon",value:function(t){this.searchtext="",this.showcloseicon=!1,this.search(this.searchtext)}},{key:"search",value:function(t){this.showcloseicon=!!t.length,this.dtElement.dtInstance.then(function(e){e.columns(0).search(t).draw()}),this.loading=!1}},{key:"renderTable",value:function(t){var e=this;this.tableLanguageOptions(),this.renderedOnce?(this.rerender(),setTimeout(function(){e.dataAvailable=!0,e.renderedOnce=!1,e.loading=!1},200)):(this.rerender(),this.dataAvailable=!1,this.loading=!0,setTimeout(function(){e.dataAvailable=!0,e.loading=!1},200)),setTimeout(function(){e.searchtext&&e.search(e.searchtext)},200)}},{key:"rerender",value:function(t){var e=this;this.dtElement.dtInstance.then(function(t){t.clear(),t.destroy(),e.dtTrigger.next()}),setTimeout(function(){t&&e.search(e.searchtext)},1e3)}},{key:"reloadTable",value:function(t){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()}),setTimeout(function(){t&&e.search(e.searchtext)},1e3)}},{key:"closeAlert",value:function(e){this.error=!1,void 0!==e&&(this.errors.splice(e,1),this.errors=t(this.errors))}},{key:"getAlarmWorkflowList",value:function(){var e=this;if(this.alarmWorkFlowList=[],"all"!=this.filterSelected){var n={alarm:"".concat(this.baseUrl,"workflows"),outage:"".concat(this.baseUrl,"outageworkflows")};this.loading=!0,this.error=!1,this.errorInfo=void 0;var i=n[this.filterSelected];i=i||"".concat(v.N.API_BASE_URL,"health/config/notifications?type=").concat(this.filterSelected),this.http.get(i).subscribe(function(n){n&&n.length>0?((n=n.filter(function(t){return t})).forEach(function(t){var n,i,o;t&&(t.mod_status=t.status,t.ui_modified_notification_type_display=e.map[e.filterSelected],t.ui_modified_notification_type=(null==t?void 0:t.type)?null==t?void 0:t.type:e.filterSelected,"RUN"==t.status?t.mod_status="Running":"PAUSE"==t.status?t.mod_status="Paused":"DRAFT"==t.status&&(t.mod_status="Draft"),t.trigger="",(null===(n=null==t?void 0:t.schedule)||void 0===n?void 0:n.immediate)?t.schedule.immediate&&(t.trigger="Immediate"):(null==t?void 0:t.schedule)&&0==(null===(i=t.schedule)||void 0===i?void 0:i.immediate)&&(t.trigger="Scheduled"),"outage"===e.filterSelected&&(t.trigger="Immediate"),-1!==(null===(o=e.healthTypes)||void 0===o?void 0:o.indexOf(e.filterSelected))&&(t.trigger="Weekly"),t.methods=e.prepareMethods(t,e.filterSelected))}),e.alarmWorkFlowList=t(n.filter(function(t){return t}).reverse()),e.loading=!1,e.renderTable(!1)):(e.alarmWorkFlowList=[],e.loading=!1,e.renderTable(!1))},function(t){e.error=!0,e.pageErrorHandle(t),e.loading=!1,e.renderTable(!1)})}else this.getData()}},{key:"pageErrorHandle",value:function(t){return this.errorInfo=401==t.status?"Access Denied":this.commonOrgService.pageErrorHandle(t),this.closeAlert(),this.error=!0,this.errorInfo}},{key:"getAlarmWorkflowId",value:function(t){var e,n=(null==t?void 0:t.uuid)?t.uuid:null==t?void 0:t.name;-1!==(null===(e=this.healthTypes)||void 0===e?void 0:e.indexOf(null==t?void 0:t.ui_modified_notification_type))?this.router.navigateByUrl("".concat(this.urls.edit[null==t?void 0:t.ui_modified_notification_type]).concat(n),{state:{ccoAlarmNotificationsText:this.searchtext||""}}):this.router.navigateByUrl("outage"===(null==t?void 0:t.ui_modified_notification_type)?"/cco/outage-workflow/edit/".concat(n):"/cco/alarm-notifications/edit/".concat(n),{state:{ccoAlarmNotificationsText:this.searchtext||""}})}},{key:"deleteAlarmWorkflowId",value:function(){var t,e,n=this;this.error=!1,this.success=!1,this.errorInfo=void 0,this.successInfo=void 0,this.btnDisabled=!0;var i=this.deletedata.uuid;this.loading=!0;var o="".concat(this.baseUrl,"workflow/").concat(i);o="alarm"===(null===(t=this.deletedata)||void 0===t?void 0:t.ui_modified_notification_type)?"".concat(this.baseUrl,"workflow/").concat(i):"outage"===(null===(e=this.deletedata)||void 0===e?void 0:e.ui_modified_notification_type)?"".concat(this.baseUrl,"outageworkflow/").concat(i):"".concat(v.N.API_BASE_URL,"health/config/notifications/").concat(encodeURIComponent(this.deletedata.name));var a={alarm:"Alarm Notification Schedule successfully deleted",outage:"Internet Outage Notification Schedule successfully deleted",outliers:"Optical Outliers Notification Schedule successfully deleted",OPTICAL_OUTLIERS:"Optical Outliers Notification Schedule successfully deleted",EARLY_WARN_PON_CAP:"Early Warning PON Capacity Notification Schedule successfully deleted",EARLY_WARN_ETH_CAP:"Early Warning Ethernet Capacity Notification Schedule successfully deleted",EARLY_WARN_PON_LOSS:"Early Warning PON Loss Notification Schedule successfully deleted"};this.http.delete("".concat(o),{responseType:"text"}).subscribe(function(t){n.btnDisabled=!1,n.success=!0,n.successInfo=a[n.deletedata.ui_modified_notification_type],n.closeModal(),setTimeout(function(){n.success=!1,n.successInfo=void 0,n.getAlarmWorkflowList()},3e3)},function(t){n.btnDisabled=!1,n.error=!0,n.loading=!1,n.pageErrorHandle(t)})}},{key:"goto",value:function(){var t;this.close(),-1!==(null===(t=this.types)||void 0===t?void 0:t.indexOf(this.notificatonForm.get("notificaton").value))?this.router.navigate([this.urls.add[this.notificatonForm.get("notificaton").value]]):this.router.navigateByUrl("/cco/alarm-notifications/new",{state:{ccoAlarmNotificationsText:this.searchtext||""}})}},{key:"delete",value:function(t){this.deleteWarnMsg={alarm:"Are you sure you want to delete Alarm Notification",outage:"Are you sure you want to delete Internet Outage Notification",outliers:"Are you sure you want to delete Optical Outliers Notification",OPTICAL_OUTLIERS:"Are you sure you want to delete Optical Outliers Notification",EARLY_WARN_PON_CAP:"Are you sure you want to delete Early Warning PON Capacity Notification",EARLY_WARN_ETH_CAP:"Are you sure you want to delete Early Warning Ethernet Capacity Notification",EARLY_WARN_PON_LOSS:"Are you sure you want to delete Early Warning PON Loss Notification"}[null==t?void 0:t.ui_modified_notification_type],this.deletedata=t,this.modalInfo=this.deletedata.name,this.document.body.scrollIntoView({block:"start",behavior:"smooth"})}},{key:"closeModal",value:function(){this.deletedata=""}},{key:"pauseContinueWorkflow",value:function(t,e,n){var i,o=this,a={alarm:"".concat(this.baseUrl,"deployWorkflow"),outage:"".concat(this.baseUrl,"outagedeployWorkflow")},r={alarm:{pause:"Alarm Notification Schedule successfully paused",activate:"Alarm Notification Schedule successfully deployed"},outage:{pause:"Internet Outage Notification Schedule successfully paused",activate:"Internet Outage Notification Schedule successfully deployed"},outliers:{pause:"Optical Outliers Notification Schedule successfully paused",activate:"Optical Outliers Notification Schedule successfully deployed"},OPTICAL_OUTLIERS:{pause:"Optical Outliers Notification Schedule successfully paused",activate:"Optical Outliers Notification Schedule successfully deployed"},EARLY_WARN_PON_CAP:{pause:"".concat(this.map.EARLY_WARN_PON_CAP," Notification Schedule successfully paused"),activate:"".concat(this.map.EARLY_WARN_PON_CAP," Notification Schedule successfully deployed")},EARLY_WARN_ETH_CAP:{pause:"".concat(this.map.EARLY_WARN_ETH_CAP," Notification Schedule successfully paused"),activate:"".concat(this.map.EARLY_WARN_ETH_CAP," Notification Schedule successfully deployed")},EARLY_WARN_PON_LOSS:{pause:"".concat(this.map.EARLY_WARN_PON_LOSS," Notification Schedule successfully paused"),activate:"".concat(this.map.EARLY_WARN_PON_LOSS," Notification Schedule successfully deployed")}},c="workflowId=".concat(null==t?void 0:t.uuid);"pause"==e?c=c.concat("&status=PAUSE"):"activate"==e&&(c=c.concat("&status=RUN")),this.loading=!0,this.errorMsg=void 0,this.successInfo=void 0;var l=this.http.put("".concat(a[n],"?").concat(c),null,{responseType:"text"});if(-1!==(null===(i=this.healthTypes)||void 0===i?void 0:i.indexOf(n))){var s={name:null==t?void 0:t.name,description:null==t?void 0:t.description,status:"activate"==e?"RUN":"PAUSE",regions:null==t?void 0:t.regions,locations:null==t?void 0:t.locations,systems:null==t?void 0:t.systems,emailRecipients:null==t?void 0:t.emailRecipients,emailNotes:null==t?void 0:t.emailNotes,type:null==t?void 0:t.type,sms:null==t?void 0:t.sms,webhooks:null==t?void 0:t.webhooks,timeZone:this.dateUtils.getTImeZoneWithOffset()},u="".concat(v.N.API_BASE_URL,"health/config/notifications/").concat(encodeURIComponent(t.name));l=this.http.put(u,s,{responseType:"text"})}l.subscribe(function(t){o.success=!0,o.successInfo=r[n][e],setTimeout(function(){o.success=!1,o.getAlarmWorkflowList()},3e3),o.loading=!1},function(t){o.error=!0,o.loading=!1,o.btnDisabled=!1,o.pageErrorHandle(t)})}},{key:"getAlarmNotificationSummary",value:function(t){var e;-1!==(null===(e=this.healthTypes)||void 0===e?void 0:e.indexOf(null==t?void 0:t.ui_modified_notification_type))?this.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications/workflow/view/".concat(encodeURIComponent(t.name)),{state:{ccoAlarmNotificationsText:this.searchtext||""}}):this.router.navigateByUrl("outage"===(null==t?void 0:t.ui_modified_notification_type)?"/cco/operations/alarms/health-alarm-notifications/outage-workflow/view/".concat(t.uuid):"/cco/operations/alarms/health-alarm-notifications/alarm-notifications/view/".concat(t.uuid),{state:{ccoAlarmNotificationsText:this.searchtext||""}})}},{key:"avoidInitialSpacing",value:function(t){0===t.target.selectionStart&&"Space"===t.code&&t.preventDefault()}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtTrigger.unsubscribe()}},{key:"showNotification",value:function(){this.notificatonForm.patchValue({notificaton:"alarm"}),this.modalRef=this.modalService.open(this.notificationModal,{backdrop:"static",keyboard:!1,windowClass:"notification-large-modal"})}},{key:"close",value:function(){this.modalRef.close()}},{key:"clearInput",value:function(){this.searchtext="",this.search("")}},{key:"getData",value:function(){var e=this;if("all"===this.filterSelected){var n={alarm:"".concat(this.baseUrl,"workflows"),outage:"".concat(this.baseUrl,"outageworkflows"),outliers:"".concat(v.N.API_BASE_URL,"health/config/notifications")},i={};for(var o in n){var a=this.http.get("".concat(n[o])).pipe((0,m.K)(function(t){return t["api-error"]=!0,(0,h.of)(t)}));i[o]=a}this.loading=!0,this.error=!1,this.errorInfo=void 0,(0,f.D)(i).subscribe(function(n){var i=[].concat(t(e.modifyResponse(n.alarm,"alarm")),t(e.modifyResponse(n.outage,"outage")),t(e.modifyResponse(n.outliers,"outliers")));i&&i.length>0?(e.alarmWorkFlowList=t(i.filter(function(t){return t}).reverse()),e.loading=!1,e.renderTable(!1)):(e.alarmWorkFlowList=[],e.loading=!1,e.renderTable(!1))},function(t){e.error=!0,e.pageErrorHandle(t),e.loading=!1,e.renderTable(!1)})}}},{key:"modifyResponse",value:function(e,n){var i=this;if(null==e?void 0:e["api-error"]){var o=[this.commonOrgService.pageErrorHandle(e)];return this.errors=[].concat(t(this.errors),o),[]}return null==e||e.forEach(function(t){var e,o,a;t&&(t.ui_modified_notification_type=(null==t?void 0:t.type)?null==t?void 0:t.type:n,t.ui_modified_notification_type_display=i.map[t.ui_modified_notification_type],t.mod_status=t.status,"RUN"==t.status?t.mod_status="Running":"PAUSE"==t.status?t.mod_status="Paused":"DRAFT"==t.status&&(t.mod_status="Draft"),t.trigger="",(null===(e=null==t?void 0:t.schedule)||void 0===e?void 0:e.immediate)?t.schedule.immediate&&(t.trigger="Immediate"):(null==t?void 0:t.schedule)&&0==(null===(o=t.schedule)||void 0===o?void 0:o.immediate)&&(t.trigger="Scheduled"),"outage"===n&&(t.trigger="Immediate"),-1!==(null===(a=i.healthTypes)||void 0===a?void 0:a.indexOf(n))&&(t.trigger="Weekly"),t.methods=i.prepareMethods(t,n))}),e}},{key:"prepareMethods",value:function(t,e){var n,i,o,a,r=[];return((null===(n=null==t?void 0:t.emails)||void 0===n?void 0:n.length)||(null===(i=null==t?void 0:t.emailRecipients)||void 0===i?void 0:i.length))&&r.push("Email"),(null===(o=null==t?void 0:t.sms)||void 0===o?void 0:o.length)&&r.push("SMS"),(null===(a=null==t?void 0:t.webhooks)||void 0===a?void 0:a.length)&&r.push("Webhook"),r.join(", ")}}]),e}()).\u0275fac=function(t){return new(t||D)(_.Y36(A.eN),_.Y36(b.s),_.Y36(l.F0),_.Y36(O.v),_.Y36(Z.t6),_.Y36(y.Dx),_.Y36(r.K0),_.Y36(w.FF),_.Y36(c.qu),_.Y36(C.s))},D.\u0275cmp=_.Xpm({type:D,selectors:[["app-cco-alarm-notifications"]],viewQuery:function(t,e){var n;1&t&&(_.Gf(x,7),_.Gf(g.G,5)),2&t&&(_.iGM(n=_.CRH())&&(e.notificationModal=n.first),_.iGM(n=_.CRH())&&(e.dtElement=n.first))},decls:54,vars:29,consts:[[1,"ccl-tabs","my-3"],["id","tabs",1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/cco/operations/alarms/health-alarm-notifications","routerLinkActive","active","id","CcoAlarms-HealthNotifications-Notifications",1,"nav-link","small"],["routerLink","/cco/operations/alarms/health-alarm-notifications/recipients","id","CcoAlarms-HealthNotifications-Recipients",1,"nav-link","small"],[1,"container","px-0"],["class","py-3 warning-msg d-flex align-items-start",4,"ngIf"],["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],[4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"container"],[1,"row","mb-4"],[1,"col-md-12","px-0"],["class","row mb-3",4,"ngIf"],[1,"row","w-100","justify-content-between"],[1,"col-md-4","ccl-form","position-relative"],["type","text",3,"ngModel","placeholder","ngModelChange","keyup","search"],["class","close-clear",3,"click",4,"ngIf"],[1,"col-md-3","ccl-form","mb-2"],["bindValue","id","bindLabel","name",1,"w-100",3,"clearable","ngModel","items","ngModelChange","change"],["id","alarmNotificationsTable",1,"alarm-notifications-table","overflow-auto",3,"hidden"],["datatable","",1,"row-border","hover","table-alter","dataTable",3,"ngClass","dtOptions","dtTrigger"],["scope","col"],["scope","col",1,"min-w-230"],["scope","col","id","Opt-In-Status",1,"text-left","min-w-50"],["scope","col",1,"min-w-50"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12"],["class",""],["notificationModal",""],[1,"py-3","warning-msg","d-flex","align-items-start"],[1,"error-img","pr-2","pt-1"],["src","./assets/img/warning-icon.svg"],[1,"warn-msg","pt-2"],[1,"btn-con-sec","float-right"],["id","deletePFBtn",1,"btn-default","primary","py-1","mr-2",3,"disabled","click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["class","w-100 alert alert-danger fade show mt-4",4,"ngFor","ngForOf"],[1,"w-100","alert","alert-danger","fade","show","mt-4"],[1,"error-info-sec","d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],["type","button","id","add-device-group-btn",1,"btn-default","primary","px-3","mb-3",3,"click"],[1,"row","mb-3"],[1,"loader","mt-15"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"close-clear",3,"click"],[1,"close"],[1,"clickableRow"],[3,"click"],[3,"ngClass"],[1,"dot"],[1,""],[1,"dropdown","dropleft","text-center"],["type","button","id","anDropdownMenuBtn","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle","px-0"],["aria-labelledby","anDropdownMenuBtn",1,"dropdown-menu","mt-4","ml-5"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"notification-modal"],[1,"title","mb-3"],[1,"mb-2"],[1,"notification-list",3,"formGroup"],["width","100%","formControlName","notificaton","bindValue","id","bindLabel","name",1,"ng-select-datasource",3,"clearable","items"],["ng-option-tmp",""],[1,"modal-footer-button","mt-4"],["type","button",1,"my-2","mr-3","btn-default","primary","py-1",3,"disabled","click"],["type","button","id","callOutcomeBtnId",1,"btn-default","btn-dft","py-1",3,"click"],[1,"text-truncate",3,"title"],[1,"text-truncate","select-muted-text",3,"title"]],template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"ul",1),_.TgZ(2,"li",2),_.TgZ(3,"a",3),_._uU(4),_.qZA(),_.qZA(),_.TgZ(5,"li",2),_.TgZ(6,"a",4),_._uU(7),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(8,"section"),_.TgZ(9,"div",5),_.YNc(10,P,13,5,"div",6),_.YNc(11,N,6,1,"div",7),_.YNc(12,S,2,1,"div",8),_.YNc(13,M,6,1,"div",9),_.TgZ(14,"div",10),_.YNc(15,k,3,1,"div",8),_.YNc(16,R,1,0,"div",8),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"section"),_.TgZ(18,"div",11),_.TgZ(19,"div",12),_.TgZ(20,"div",13),_.YNc(21,E,7,1,"div",14),_.TgZ(22,"div",15),_.TgZ(23,"div",16),_.TgZ(24,"input",17),_.NdJ("ngModelChange",function(t){return e.searchtext=t})("keyup",function(t){return e.search(t.target.value)})("search",function(t){return e.search(t.target.value)}),_.qZA(),_.YNc(25,I,3,0,"div",18),_.qZA(),_.TgZ(26,"div",19),_.TgZ(27,"ng-select",20),_.NdJ("ngModelChange",function(t){return e.filterSelected=t})("change",function(){return e.getAlarmWorkflowList()}),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",21),_.TgZ(29,"table",22),_.TgZ(30,"thead"),_.TgZ(31,"tr"),_.TgZ(32,"th",23),_._uU(33),_.qZA(),_.TgZ(34,"th",23),_._uU(35),_.qZA(),_.TgZ(36,"th",23),_._uU(37),_.qZA(),_.TgZ(38,"th",23),_._uU(39),_.qZA(),_.TgZ(40,"th",24),_._uU(41),_.qZA(),_.TgZ(42,"th",25),_._uU(43),_.qZA(),_.TgZ(44,"th",26),_._uU(45),_.qZA(),_.qZA(),_.qZA(),_.TgZ(46,"tbody"),_.YNc(47,J,27,12,"tr",27),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(48,"section"),_.TgZ(49,"div",11),_.TgZ(50,"div",28),_._UZ(51,"div",29),_.qZA(),_.qZA(),_.qZA(),_.YNc(52,F,16,8,"ng-template",30,31,_.W1O)),2&t&&(_.xp6(4),_.Oqu(e.language.Notifications),_.xp6(3),_.Oqu(e.language.Recipients),_.xp6(3),_.Q6J("ngIf",e.deletedata),_.xp6(1),_.Q6J("ngIf",e.error),_.xp6(1),_.Q6J("ngIf",e.errors.length),_.xp6(1),_.Q6J("ngIf",e.success),_.xp6(2),_.Q6J("ngIf",!e.cco_entitlement&&e.hasWriteAccess),_.xp6(1),_.Q6J("ngIf",e.cco_entitlement||!e.hasWriteAccess),_.xp6(5),_.Q6J("ngIf",e.loading),_.xp6(3),_.s9C("placeholder",e.language["Search notifications"]),_.Q6J("ngModel",e.searchtext),_.xp6(1),_.Q6J("ngIf",e.searchtext),_.xp6(2),_.Q6J("clearable",!1)("ngModel",e.filterSelected)("items",e.filterArray),_.xp6(1),_.Q6J("hidden",!e.dataAvailable),_.xp6(1),_.Q6J("ngClass",_.VKq(27,j,e.loading))("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),_.xp6(4),_.Oqu(e.language.name),_.xp6(2),_.Oqu(e.language.type),_.xp6(2),_.Oqu(e.language.Schedule),_.xp6(2),_.Oqu(e.language.Method),_.xp6(2),_.Oqu(e.language.Decription),_.xp6(2),_.Oqu(e.language.Status),_.xp6(2),_.Oqu(e.language.Action),_.xp6(2),_.Q6J("ngForOf",e.alarmWorkFlowList))},directives:[l.yS,l.Od,r.O5,c.Fj,c.JJ,c.On,T.w9,g.G,r.mk,r.sg,c.JL,c.sg,c.u,T.Z2],styles:[".alarm-notifications-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.alarm-notifications-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border-bottom:1px solid #CCCCCC}.alarm-notifications-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px;word-break:break-all;font-size:16px;font-weight:600}.alarm-notifications-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;word-break:break-word;font-size:15px;font-style:normal;font-weight:400;line-height:24px;letter-spacing:0em}.alarm-notifications-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f8f8fa}.alarm-notifications-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){min-width:100px}.alarm-notifications-table[_ngcontent-%COMP%]   .mt-15[_ngcontent-%COMP%]{margin-top:15rem}.dropleft[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:before{display:none!important}.dropdown-toggle[_ngcontent-%COMP%]{outline:none!important;border:none!important;background-color:transparent!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 5px 15px #80808040;-webkit-box-shadow:0px 5px 15px rgba(128,128,128,.25);border-color:#0000000d!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]{width:100%!important;border-radius:0!important;text-align:left;padding:10px 25px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#edf5ff!important}.clickableRow[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0279ff;cursor:pointer}.clickableRow[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0054b2}.search-box[_ngcontent-%COMP%]{width:73%;padding-right:30px}.hide-close-search[_ngcontent-%COMP%]{display:none}.show-close-search[_ngcontent-%COMP%]{color:gray;display:block;position:absolute;right:40px;font-size:22px;top:2px}.showHideTable[_ngcontent-%COMP%]{visibility:hidden}.cco-med-title[_ngcontent-%COMP%]{font-weight:300;font-size:24px;line-height:30px;color:#1a1f22;margin-bottom:15px}.min-width-500[_ngcontent-%COMP%]{min-width:500px}.warn-msg[_ngcontent-%COMP%]{width:100%;word-wrap:break-word;display:inline-block}.close-clear[_ngcontent-%COMP%]{position:absolute;top:13px;right:25px;cursor:pointer}.close-clear[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:11.7px;height:11.7px;background-size:11.7px}.min-w-200[_ngcontent-%COMP%]{min-width:250px}.filter-select[_ngcontent-%COMP%]{min-width:200px}.notification-modal[_ngcontent-%COMP%]{padding:10px 38px}.notification-list[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .notification-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1a1f22;font-weight:400;font-size:14px;line-height:18px}.notification-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4c4c4c}  .notification-large-modal .modal-dialog{max-width:45.6%!important}.min-w-50[_ngcontent-%COMP%]{min-width:50px}.min-w-230[_ngcontent-%COMP%]{min-width:230px}.select-muted-text[_ngcontent-%COMP%]{color:gray}  .ng-select-datasource .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{height:auto!important}"]}),D),B=a(22759),z=a(54395),G=a(87519),V=a(43190);function $(t,e){if(1&t&&(_.TgZ(0,"div",25),_.TgZ(1,"div",26),_.TgZ(2,"div",27),_.TgZ(3,"span",28),_._uU(4),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){var n=_.oxw();_.xp6(4),_.Oqu(n.language.Loading)}}function K(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",29),_.TgZ(1,"span",30),_._UZ(2,"img",31),_.qZA(),_.TgZ(3,"button",32),_.NdJ("click",function(){return _.CHM(n),_.oxw().closeAlert()}),_._UZ(4,"span"),_.qZA(),_._UZ(5,"div",33),_.qZA()}if(2&t){var i=_.oxw();_.xp6(5),_.Q6J("innerHtml",i.errorInfo,_.oJD)}}function X(t,e){if(1&t&&(_.TgZ(0,"div",34),_._uU(1),_.qZA()),2&t){var n=_.oxw();_.xp6(1),_.hij(" ",n.language["Access denied due to RBAC. Please consult your Organization Administrator for access."]," ")}}function tt(t,e){if(1&t){var n=_.EpF();_.TgZ(0,"div",35),_.NdJ("click",function(){return _.CHM(n),_.oxw().clearSearchInp()}),_.TgZ(1,"button",36),_._UZ(2,"span"),_.qZA(),_.qZA()}}function et(t,e){if(1&t&&(_.TgZ(0,"tr"),_.TgZ(1,"td",39),_._uU(2),_.qZA(),_.TgZ(3,"td"),_._uU(4),_.qZA(),_.TgZ(5,"td",40),_._uU(6),_.qZA(),_.TgZ(7,"td"),_.TgZ(8,"button"),_._UZ(9,"span",44),_._uU(10),_.qZA(),_.qZA(),_.TgZ(11,"td"),_._uU(12),_.qZA(),_.qZA()),2&t){var n=e.$implicit,i=_.oxw(2);_.xp6(2),_.Oqu(n.recipient),_.xp6(2),_.Oqu(n.notificationType),_.xp6(2),_.Oqu(n.notificationName),_.xp6(2),_.Gre("",i.colorBtnMap[n.status]," border-0"),_.xp6(2),_.Oqu(n.status),_.xp6(2),_.Oqu(i.convertToDateTime(n.updatedTime))}}function nt(t,e){if(1&t&&(_.TgZ(0,"tbody"),_.TgZ(1,"tr"),_.TgZ(2,"td",45),_._uU(3),_.qZA(),_.qZA(),_.qZA()),2&t){var n=_.oxw(2);_.xp6(3),_.Oqu(n.language["No matching records found"])}}function it(t,e){if(1&t&&(_.TgZ(0,"div",37),_.TgZ(1,"table",38),_.TgZ(2,"thead"),_.TgZ(3,"tr"),_.TgZ(4,"th",39),_._uU(5),_.qZA(),_.TgZ(6,"th"),_._uU(7),_.qZA(),_.TgZ(8,"th",40),_._uU(9),_.qZA(),_.TgZ(10,"th",41),_._uU(11),_.qZA(),_.TgZ(12,"th"),_._uU(13),_.qZA(),_.qZA(),_.qZA(),_.TgZ(14,"tbody"),_.YNc(15,et,13,8,"tr",42),_.qZA(),_.YNc(16,nt,4,1,"tbody",43),_._UZ(17,"tbody"),_.qZA(),_.qZA()),2&t){var n=_.oxw();_.xp6(1),_.Q6J("dtOptions",n.dtOptions),_.xp6(4),_.Oqu(n.language.Recipient),_.xp6(2),_.Oqu(n.language.Type),_.xp6(2),_.Oqu(n.language.notification),_.xp6(2),_.Oqu(n.language["Opt-In Status"]),_.xp6(2),_.Oqu(n.language.lastUpdated),_.xp6(2),_.Q6J("ngForOf",n.list),_.xp6(1),_.Q6J("ngIf",0==(null==n.list?null:n.list.length)||0===n.count||0===n.filterCount)}}var ot=[{path:"",component:Q},{path:"recipients",component:function(){var t=function(){function t(e,i,o,a){n(this,t),this.translateService=e,this.http=i,this.commonOrgService=o,this.titleService=a,this.searchRec=new c.NI(""),this.optInStatus=new c.NI("All"),this.dtOptions={},this.dtTrigger=new p.xQ,this.loading=!1,this.showTable=!1,this.hasScopeAccess=!0,this.list=[],this.errorInfo="",this.successInfo="",this.optInStatusList=[{id:"All",name:"All recipients"},{id:"Cancelled",name:"Cancelled"},{id:"Confirmed",name:"Confirmed"},{id:"Expired",name:"Expired"},{id:"Pending",name:"Pending"}],this.colorBtnMap={Cancelled:"complete-but",Confirmed:"running-but",Expired:"expired-but",Pending:"paused-but"},this.count=0}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.language=this.translateService.defualtLanguage,this.tableLanguageOptions(),this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){t.language=e,t.titleService.setTitle("".concat(t.language.Recipients," - ").concat(t.language["Alarm & Health Notifications"]," - ").concat(t.language.Alarms," - ").concat(t.language.Operations," - ").concat(t.language.Operations," - ").concat(t.language["Calix Cloud"])),t.tableLanguageOptions(),t.showTable=!1,setTimeout(function(){t.showTable=!0,t.subscribeCount("")},100)}),this.titleService.setTitle("".concat(this.language.Recipients," - ").concat(this.language["Alarm & Health Notifications"]," - ").concat(this.language.Alarms," - ").concat(this.language.Operations," - ").concat(this.language.Operations," - ").concat(this.language["Calix Cloud"])),this.listenSearch(),this.subscribeCount("")}},{key:"listenSearch",value:function(){var t=this;this.searchSub=(0,B.R)(document.getElementById("search-rec"),"keyup").pipe((0,z.b)(200),(0,G.x)(),(0,V.w)(function(e){return console.log(e),t.list=[],t.getCount(e.target.value)})).subscribe(function(e){(null==e?void 0:e["api-error"])||(t.filterCount=e||0,t.redraw())})}},{key:"getCount",value:function(t){var e=this;this.loading=!0;var n="".concat(v.N.API_BASE_URL,"analytics-engine/subscriptionsCount?optInStatus=").concat(this.optInStatus.value);return t?n+="&recipientFilter=".concat(encodeURIComponent(t)):this.searchRec.value&&(n+="&recipientFilter=".concat(encodeURIComponent(this.searchRec.value))),this.http.get(n).pipe((0,m.K)(function(t){return t["api-error"]=!0,e.showErrorMessage(e.commonOrgService.pageErrorHandle(t)),(0,h.of)(t)}))}},{key:"subscribeCount",value:function(t,e){var n=this;e&&(this.searchRec.setValue(""),this.optInStatus.setValue("All")),this.getCount(t).subscribe(function(e){(null==e?void 0:e["api-error"])||(n.initLoad||(n.count=e||0),n.filterCount=e||0,n.initLoad?n.redraw():n.getData(t))})}},{key:"getData",value:function(t){var e=this;this.showTable=!0,this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,lengthChange:!1,dom:"tipr",columnDefs:[{orderable:!0,className:"reorder",targets:0},{orderable:!1,targets:"_all"}],ajax:function(t,n){var i,o,a,r,c;console.log(t);var l="".concat(v.N.API_BASE_URL,"analytics-engine/subscriptionsStatus?offset=").concat(t.start,"&pageSize=").concat(t.length,"&optInStatus=").concat(e.optInStatus.value,"&sortingOrder=").concat(null===(a=null===(o=null===(i=null==t?void 0:t.order)||void 0===i?void 0:i[0])||void 0===o?void 0:o.dir)||void 0===a?void 0:a.toUpperCase());(null===(r=t.search)||void 0===r?void 0:r.value)&&(l+="&recipientFilter=".concat(encodeURIComponent(null===(c=t.search)||void 0===c?void 0:c.value))),e.http.get(l).subscribe(function(t){e.list=t||[],e.loading=!1,n({recordsTotal:e.count?e.count:0,recordsFiltered:null!=e.filterCount?e.filterCount:e.count,data:[]})},function(t){e.loading=!1,e.showErrorMessage(e.commonOrgService.pageErrorHandle(t)),n({recordsTotal:e.count?e.count:0,recordsFiltered:null!=e.filterCount?e.filterCount:e.count,data:[]})},function(){e.initLoad=!0,e.loading=!1})},drawCallback:function(t){e.tableLanguageOptions()}},this.tableLanguageOptions()}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.searchSub)||void 0===t||t.unsubscribe()}},{key:"tableLanguageOptions",value:function(){"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"showErrorMessage",value:function(t){this.closeAlert(),this.errorInfo=t,this.error=!0,this.loading=!1}},{key:"clearSearchInp",value:function(){this.searchRec.setValue(""),this.subscribeCount("")}},{key:"redraw",value:function(){var t,e,n=this;null===(e=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===e||e.then(function(t){t.search(n.searchRec.value).draw()})}},{key:"convertToDateTime",value:function(t){return t?(t=Number(t),new r.uU("en-US").transform(new Date(t),"short")):void 0}},{key:"doRefresh",value:function(){var t=this;this.loading=!0,this.http.post("".concat(v.N.API_BASE_URL,"analytics-engine/synchronizeSubscriptionsStatus"),{},{responseType:"text"}).pipe((0,m.K)(function(e){return e["api-error"]=!0,t.loading=!1,t.showErrorMessage(t.commonOrgService.pageErrorHandle(e)),(0,h.of)(e)})).subscribe(function(e){t.subscribeCount("",!0)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(_.Y36(b.s),_.Y36(A.eN),_.Y36(O.v),_.Y36(y.Dx))},t.\u0275cmp=_.Xpm({type:t,selectors:[["app-recipients"]],viewQuery:function(t,e){var n;(1&t&&_.Gf(g.G,5),2&t)&&(_.iGM(n=_.CRH())&&(e.dtElement=n.first))},decls:33,vars:14,consts:[[1,"ccl-tabs","my-3"],["id","tabs",1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/cco/operations/alarms/health-alarm-notifications",1,"nav-link","small"],[1,"nav-link","small","active",3,"click"],[1,"row"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"col-md-6"],[1,"pull-left","sub-imp-title","d-flex","justify-content-between"],[1,"primary","text-decoration-none","mb-3","cursor-pointer",3,"click"],[1,"icon-btn"],["src","../../../../../assets/img/ic_refresh.svg","alt",""],[1,"pull-right","sub-imp-title","d-flex","justify-content-between"],[1,""],["role","alert","class","alert alert-warning",4,"ngIf"],[1,"col-md-12"],[1,"row","w-100","justify-content-between"],[1,"col-md-4","ccl-form","position-relative"],["id","search-rec","placeholder","Search Recipients",1,"ccl-input",3,"formControl"],["class","close-clear",3,"click",4,"ngIf"],[1,"col-md-3","ccl-form","mb-2","d-flex","align-items-center"],[1,"mr-2","mb-0"],["bindValue","id","bindLabel","name",1,"w-100",3,"clearable","items","formControl","searchable","change"],["class","sub-imp-table table-responsive",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["role","alert",1,"alert","alert-warning"],[1,"close-clear",3,"click"],[1,"close"],[1,"sub-imp-table","table-responsive"],["datatable","",1,"table","table-borderless","w-100",3,"dtOptions"],[1,"recipient"],[1,"notification"],["id","Opt-In-Status"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"dot","mr-2"],["colspan","5",1,"no-data-available"]],template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"ul",1),_.TgZ(2,"li",2),_.TgZ(3,"a",3),_._uU(4),_.qZA(),_.qZA(),_.TgZ(5,"li",2),_.TgZ(6,"a",4),_.NdJ("click",function(){return e.subscribeCount("",!0)}),_._uU(7),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(8,"div",5),_.YNc(9,$,5,1,"div",6),_.YNc(10,K,6,1,"div",7),_.TgZ(11,"div",8),_.TgZ(12,"div",9),_.TgZ(13,"a",10),_.NdJ("click",function(){return e.doRefresh()}),_.TgZ(14,"span",11),_._UZ(15,"img",12),_.qZA(),_._uU(16),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"div",8),_.TgZ(18,"div",13),_.TgZ(19,"div",14),_._uU(20),_.qZA(),_.qZA(),_.qZA(),_.YNc(21,X,2,1,"div",15),_.qZA(),_.TgZ(22,"div",5),_.TgZ(23,"div",16),_.TgZ(24,"div",17),_.TgZ(25,"div",18),_._UZ(26,"input",19),_.YNc(27,tt,3,0,"div",20),_.qZA(),_.TgZ(28,"div",21),_.TgZ(29,"label",22),_._uU(30,"Filter: "),_.qZA(),_.TgZ(31,"ng-select",23),_.NdJ("change",function(){return e.subscribeCount("")}),_.qZA(),_.qZA(),_.qZA(),_.YNc(32,it,18,8,"div",24),_.qZA(),_.qZA()),2&t&&(_.xp6(4),_.Oqu(e.language.Notifications),_.xp6(3),_.Oqu(e.language.Recipients),_.xp6(2),_.Q6J("ngIf",e.loading),_.xp6(1),_.Q6J("ngIf",e.error),_.xp6(6),_.hij(" ",e.language.Refresh,""),_.xp6(4),_.Oqu(e.language["Opt-in status is updated once a day."]),_.xp6(1),_.Q6J("ngIf",!e.hasScopeAccess),_.xp6(5),_.Q6J("formControl",e.searchRec),_.xp6(1),_.Q6J("ngIf",null==e.searchRec?null:e.searchRec.value),_.xp6(4),_.Q6J("clearable",!1)("items",e.optInStatusList)("formControl",e.optInStatus)("searchable",!1),_.xp6(1),_.Q6J("ngIf",e.showTable))},directives:[l.yS,r.O5,c.Fj,c.JJ,c.oH,T.w9,g.G,r.sg],styles:[".blue[_ngcontent-%COMP%]{color:#00f!important}.search-close[_ngcontent-%COMP%]{position:absolute;right:27px;top:10px;color:#cdcdcd;cursor:pointer}.expired-but[_ngcontent-%COMP%]{font-size:12px;font-weight:600;text-align:Center;padding:5px 12px 5px 8px;border-radius:20px;line-height:15.08px;margin:2px 0;border:1px solid #CCCCCC!important;background-color:transparent}  table.dataTable td.dataTables_empty{display:none}.icon-btn[_ngcontent-%COMP%]{width:20px;height:20px}.close-clear[_ngcontent-%COMP%]{position:absolute;top:13px;right:25px;cursor:pointer}.close-clear[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:11.7px;height:11.7px;background-size:11.7px}.sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:40%!important;word-break:break-all}.sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:14%!important}.sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:22%!important;word-wrap:break-word}.sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:16%!important}.sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .sub-imp-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:23%!important;white-space:nowrap}#Opt-In-Status[_ngcontent-%COMP%]{min-width:130px}"]}),t}()},{path:"alarm-notifications/view/:notificationId",component:s.l},{path:"outage-workflow/view/:notificationId",component:u.O},{path:"workflow/view/:notificationId",component:d.C}],at=function(){var t=o(function t(){n(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[l.Bz.forChild(ot)],l.Bz]}),t}(),rt=function(){var t=o(function t(){n(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=_.oAB({type:t}),t.\u0275inj=_.cJS({imports:[[r.ez,at,c.u5,c.UX,g.T,T.A0]]}),t}()}}])}();