!function(){"use strict";function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a,s,n,r,o=[],l=!0,c=!1;try{if(n=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(a=n.call(i)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(c)throw s}}return o}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(s=a.key,n=void 0,"symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"))?n:String(n)),a)}var s,n}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[164],{164:function(i,a,n){n.r(a),n.d(a,{SupportOverviewModule:function(){return at}});var o,l=n(38583),c=n(39895),d=n(37716),u=n(7450),h=n(89097),g=((o=function(){function e(t,i,a){s(this,e),this.translateService=t,this.sso=i,this.route=a}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t})}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||o)(d.Y36(u.s),d.Y36(h.t6),d.Y36(c.F0))},o.\u0275cmp=d.Xpm({type:o,selectors:[["app-support-overview"]],decls:1,vars:0,template:function(e,t){1&e&&d._UZ(0,"router-outlet")},directives:[c.lC],styles:['.string-slider[_ngcontent-%COMP%]   .ngx-slider-pointer[_ngcontent-%COMP%]{position:relative}  .string-slider{height:88px;margin-bottom:20px;position:relative}  .string-slider .ngx-slider-bubble{display:none!important}  .string-slider .ngx-slider-bar{background:linear-gradient(90deg,#FF734F 0%,#F7C343 47.94%,#82BF00 95.83%)!important;border-radius:26px!important;height:21px!important}  .string-slider [ng-reflect-value="0"] .ngx-slider-bar{background:#bcbcbc!important}  .string-slider .ngx-slider .ngx-slider-pointer{border-radius:100px;width:88px;height:88px;top:-30px;border:1px solid #82BF00;background-color:transparent!important}  .string-slider .ngx-slider-pointer:before{content:"";position:absolute;top:2.3px;left:2.3px;width:81.77px;height:81.77px;background:#fff;border-radius:100px;z-index:-1;border:1px solid #82BF00}  .string-slider .ngx-slider .ngx-slider-pointer:after{position:absolute;left:0;z-index:999;width:100%!important;height:100%!important;color:#000;background-color:transparent!important;text-align:center;line-height:56px;font-size:16px}  .string-slider [aria-valuetext="0"]{border-color:#ccc!important;display:none!important}  .string-slider [aria-valuetext="0"]:before{background-color:#f8f8fa!important;border-color:#ccc!important}  .string-slider [aria-valuetext="0"]:after{content:"No Data"!important;color:#bcbcbc!important}  .string-slider [aria-valuetext="1"]:after,   .string-slider [aria-valuetext="2"]:after{content:"Low"!important}  .string-slider [aria-valuetext="3"]:after{content:"Medium"!important}  .string-slider [aria-valuetext="4"]:after,   .string-slider [aria-valuetext="5"]:after{content:"High"!important}  .multi-point-slider{position:relative;z-index:1}  .multi-point-slider .ngx-slider-bar{height:5px!important;background:#EBEAEF!important;border-radius:6px}  .multi-point-slider .ngx-slider .ngx-slider-bubble{color:#4c4c4c!important;font-size:14px!important;font-weight:600;bottom:8px!important;padding:0 15px!important}  .multi-point-slider .ngx-slider-pointer{background-color:#0279ff!important;cursor:pointer;width:32px!important;height:12px!important;top:-3px!important}  .multi-point-slider .ngx-slider-pointer:after{display:none}  .multi-point-slider .left-most-slider-time,   .multi-point-slider .right-most-slider-time{position:absolute;color:#4c4c4c;font-size:12px;font-weight:normal;bottom:-16px}  .multi-point-slider .left-most-slider-time{left:0}  .multi-point-slider .right-most-slider-time{right:0}  .multi-point-slider .dir-arrows{cursor:pointer;position:absolute;top:5px;right:0;z-index:999;background-repeat:no-repeat!important;width:20px;height:15px}  .multi-point-slider #slider-click-next{background:url(ic_chevronright_blue.fd81c30020686fc07c55.svg);background-position:14px 0px!important}  .multi-point-slider #slider-click-prev{background:url(ic_chevronleft_blue.fe45f1210cc5f8e5cadf.svg);left:0}  .ce-modal .modal-dialog{width:75.5%!important;max-width:75.5%!important}  .ce-modal .modal-dialog .modal-content{width:100%!important;left:auto!important;float:none}']}),o),p=n(92340),m=n(25193),v=n(94802),f=n(39075),D=n(99608),y=n(4030),b=n(4350),T=n(86640),I=n(3679),A=n(23771);function x(e,t){if(1&e&&(d.TgZ(0,"li",24),d.TgZ(1,"a",25),d.TgZ(2,"span",8),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(1),d.MGl("routerLink","/",i.MODULE,"/overview/topology"),d.xp6(2),d.Oqu(i.language.Topology)}}function _(e,t){if(1&e&&(d.TgZ(0,"li",26),d.TgZ(1,"a",25),d.TgZ(2,"span",8),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(1),d.MGl("routerLink","/",i.MODULE,"/overview/quality-of-experience"),d.xp6(2),d.Oqu(i.language["Quality of Experience"])}}function w(e,t){if(1&e&&(d.TgZ(0,"div",27),d.TgZ(1,"div",28),d.TgZ(2,"div",29),d.TgZ(3,"span",30),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(4),d.Oqu(i.language.Loading)}}function S(e,t){if(1&e&&(d.TgZ(0,"div",40),d._uU(1),d.qZA()),2&e){var i=d.oxw().index,a=d.oxw(2);d.xp6(1),d.Oqu(a.Description[i]?a.Description[i]:"")}}function C(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"a",47),d.TgZ(1,"i",48),d.NdJ("click",function(){d.CHM(i);var e=d.oxw().index,t=d.oxw(2);return t.clickicon=t.clickicon==e?-1:e}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw().index,s=d.oxw(2);d.xp6(1),d.Q6J("ngClass",s.clickicon==a?"fa fa-minus-circle":"fa fa-plus-circle")}}function k(e,t){1&e&&(d.TgZ(0,"span",49),d._UZ(1,"img",50),d.qZA())}function E(e,t){1&e&&(d.TgZ(0,"span",49),d._UZ(1,"img",51),d.qZA())}function M(e,t){1&e&&(d.TgZ(0,"span",49),d._UZ(1,"img",52),d.qZA())}function O(e,t){1&e&&(d.TgZ(0,"span",49),d._UZ(1,"img",53),d.qZA())}function N(e,t){1&e&&(d.TgZ(0,"span",49),d._UZ(1,"img",54),d.qZA())}function P(e,t){if(1&e&&(d.TgZ(0,"span"),d.TgZ(1,"div",55),d._uU(2),d.qZA(),d.qZA()),2&e){var i=d.oxw(3);d.xp6(2),d.Oqu(i.language.Issue)}}function Z(e,t){if(1&e&&(d.TgZ(0,"span"),d.TgZ(1,"div",56),d._uU(2),d.qZA(),d.qZA()),2&e){var i=d.oxw(3);d.xp6(2),d.Oqu(i.language.Warning)}}function L(e,t){if(1&e&&(d.TgZ(0,"span"),d.TgZ(1,"div",57),d._uU(2),d.qZA(),d.qZA()),2&e){var i=d.oxw(3);d.xp6(2),d.Oqu(i.language.Resolved)}}function F(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"button",58),d.NdJ("click",function(){d.CHM(i);var e=d.oxw(2).$implicit;return d.oxw(2).routeforbutton(e)}),d._uU(2),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(2),s=a.$implicit,n=a.index,r=d.oxw(2);d.xp6(2),d.hij("",r.ReasonDescription(s.code,s,n)," ")}}function R(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,F,3,1,"div",38),d.qZA()),2&e){var i=d.oxw(),a=i.index,s=i.$implicit,n=d.oxw(2);d.xp6(1),d.Q6J("ngIf",1==n.primaryActionButton[a]&&s.isValid)}}function q(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"tr",39),d.NdJ("mouseover",function(){var e=d.CHM(i).index;return d.oxw(2).hoveredIndex=e}),d.TgZ(1,"td"),d.TgZ(2,"div",40),d._uU(3),d._UZ(4,"br"),d.qZA(),d.TgZ(5,"div",41),d.YNc(6,S,2,1,"div",42),d.qZA(),d.qZA(),d.TgZ(7,"td",43),d.YNc(8,C,2,1,"a",44),d.qZA(),d.TgZ(9,"td"),d.YNc(10,k,2,0,"span",45),d.YNc(11,E,2,0,"span",45),d.YNc(12,M,2,0,"span",45),d.YNc(13,O,2,0,"span",45),d.YNc(14,N,2,0,"span",45),d._uU(15),d.qZA(),d.TgZ(16,"td",46),d.YNc(17,P,3,1,"span",38),d.YNc(18,Z,3,1,"span",38),d.YNc(19,L,3,1,"span",38),d.qZA(),d.TgZ(20,"td",46),d.YNc(21,R,2,1,"div",38),d.qZA(),d.qZA()}if(2&e){var a=t.$implicit,s=t.index,n=d.oxw(2);d.xp6(3),d.AsE("",(n.ReasonDescription(a.code,a,s)," "),"",n.reason[s]?n.reason[s]:" "," "),d.xp6(2),d.s9C("id","collapseReason"+s),d.xp6(1),d.Q6J("ngIf",s==n.clickicon),d.xp6(2),d.Q6J("ngIf",s==n.hoveredIndex),d.xp6(2),d.Q6J("ngIf","SERVICE"==a.type||"Service"==a.type),d.xp6(1),d.Q6J("ngIf","Router/Satellite"==a.type||"ROUTER"==a.type||"Router"==a.type),d.xp6(1),d.Q6J("ngIf","WI-FI"==a.type||"WIFI"==a.type),d.xp6(1),d.Q6J("ngIf","DEVICE"==a.type||"CLIENT"==a.type||"Client"==a.type||"Device"==a.type),d.xp6(1),d.Q6J("ngIf","APPLICATION"==a.type||"Application"==a.type),d.xp6(1),d.hij("",a.source," "),d.xp6(2),d.Q6J("ngIf","0"==a.severity),d.xp6(1),d.Q6J("ngIf","1"==a.severity),d.xp6(1),d.Q6J("ngIf","0"!=a.severity&&"1"!=a.severity),d.xp6(2),d.Q6J("ngIf",s==n.hoveredIndex)}}function H(e,t){if(1&e&&(d.TgZ(0,"tbody"),d.TgZ(1,"tr"),d.TgZ(2,"td",59),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw(2);d.xp6(3),d.Oqu(i.language["No data available in table"])}}function B(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",31),d.TgZ(1,"table",32),d.NdJ("mouseleave",function(){return d.CHM(i),d.oxw().hoveredIndex=null}),d.TgZ(2,"thead"),d.TgZ(3,"tr"),d.TgZ(4,"th"),d._uU(5),d.qZA(),d._UZ(6,"th",33),d.TgZ(7,"th",34),d._uU(8),d.qZA(),d.TgZ(9,"th",35),d._uU(10),d.qZA(),d._UZ(11,"th",36),d.qZA(),d.qZA(),d.TgZ(12,"tbody"),d.YNc(13,q,22,15,"tr",37),d.qZA(),d.YNc(14,H,4,1,"tbody",38),d.qZA(),d.qZA()}if(2&e){var a=d.oxw();d.xp6(1),d.Q6J("dtOptions",a.dtOptions),d.xp6(4),d.Oqu(a.language.Issue),d.xp6(3),d.Oqu(a.language.Source),d.xp6(2),d.Oqu(a.language.Severity),d.xp6(3),d.Q6J("ngForOf",a.issueData),d.xp6(1),d.Q6J("ngIf",0==(null==a.issueData?null:a.issueData.length))}}var U=function(){var e=function(){function e(t,i,a,n,r,o,l,c,d){var u=this;s(this,e),this.translateService=t,this.ssoAuthService=i,this.issuseservice=a,this.router=n,this.route=r,this.service=o,this.titleService=l,this.marketingCommonService=c,this.supportWifiService=d,this.isIconClicked=[],this.serialNo=[],this.scopeFlag={},this.sample="/support/router",this.serialNumber=" ",this.Description=[],this.severity=[],this.isWifi=!1,this.loading=!1,this.isqosalert=!1,this.primaryActionButton=[],this.reason=[],this.allDeviceissues=[],this.clickicon=-1,this.searchText="",this.severityfilter="All",this.codelist=["LATENCY_HIGH","VIRUS_ATTACK","CLIENT_DEVICE_LOW_SIGNAL_DETECTED","CLIENT_DEVICE_LOW_EFFICIENCY_SCORE_DETECTED","CLIENT_DEVICE_LOW_PHY_RATE_DETECTED","CLIENT_DEVICE_LEGACY_DEVICE_DETECTED","REBOOT_ISSUE","SOFTWARE_UPGRADE_FAILED","STALE_SOFTWARE_VERSION","GATEWAY_FAILED","WIFI_RADIO_DISABLED_24G","WIFI_RADIO_DISABLED_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G","BACKHAUL_TOO_CLOSE","BACKHAUL_TOO_FAR","MESH_DEGRADE","ATTACK_DETECTED","GATEWAY_FAILED","WAP_FAILED","SPEED_LOW_75","SPEED_LOW_75_80","TRAFFIC_HIGH","QOS_DAMP_ALERT","WIFI_INTERFERENCE_HIGH_24G","WIFI_INTERFERENCE_HIGH_5G","DS_SPEED_LOW_85","US_SPEED_LOW_85","DS_SPEED_LOW_75","US_SPEED_LOW_75","SFP_THERMAL_TOO_HIGH","SFP_THERMAL_HIGH","ONT_OFFLINE","GC_MAX_DOWNSTREAM_ACHIEVED","GC_MAX_UPSTREAM_ACHIEVED","WFH_SSID_WITHOUT_CIQ","MAP_CONNECTIVITY_FAILED","WIFI_RADIO_DISABLED_6G","NOT_CERTIFIED_AND_SFP_NOT_SUPPORTED","LAN_DISABLED","CERTIFIED_BUT_SFP_NOT_SUPPORTED_IN_CURRENT_VERSION","THERMAL_HIGH","THERMAL_TOO_HIGH","UI_CREATED_ISSUE_FOR_TR069MAPDOWN","LOW_ONT_LIGHT_LEVELS","PON_ERRORS","LOW_ONT_LEVEL_ISSUE","ONT_DS_SDBER_ISSUE","ONT_US_SDBER_ISSUE","NETWORK_RESILIENCE_ACTIVE_WITH_TR69_CONNECTED","NETWORK_RESILIENCE_ACTIVE_WITH_TR69_DISCONNECTED","NETWORK_RESILIENCE_INACTIVE"],this.apiCallDone=!1,this.MODULE="support",this.scope={qoeRead:!1,topologyRead:!1},this.isExosModel=!1,this.SupportCloud=!1,this.opsCloud=!1,this.exosModelTemp={GM1028_h:85,GS2028E_h:85,"GM1028-2_h":85,"GS2028E-2_h":85,GM1028_vh:105,GS2028E_vh:105,"GM1028-2_vh":105,"GS2028E-2_vh":105,GS2020E_h:110,GS2026E_h:110,GS4220E_h:110,GS4227E_h:110,"GS4220E-2_h":110,"GS4227E-2_h":110,GS2020E_vh:135,GS2026E_vh:135,GS4220E_vh:135,GS4227E_vh:135,"GS4220E-2_vh":135,"GS4227E-2_vh":135,GM1020_h:110,GM1020_vh:135},this.showTopologyTab=!1,this.showQoeTab=!1,this.backupWifiStatus=null,this.isDevEnv=!1,this.dtOptions={},n.events.subscribe(function(e){"popstate"===e.navigationTrigger&&"/support/netops-management/subscriber-management"===e.url&&u.router.navigateByUrl("/support/netops-management/subscriber-management",{state:{searchText:u.searchText||""}})}),sessionStorage.setItem("qoeCheck",null);var h=this.router.url;"true"!=sessionStorage.getItem("stopOverviewActions")&&this.ssoAuthService.setActionLog("CSC","pageHit","ISSUE",h,"Issue page loaded"),this.MODULE=h.indexOf("/support/")>-1?"support":"cco"}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.qoeCheck(),this.commandIQDataSubs=this.ssoAuthService.commandIQData.subscribe(function(t){e.scope.qoeRead=!0,e.qoeCheck()}),this.isDevEnv=this.ssoAuthService.API.includes("dev"),JSON.parse(sessionStorage.getItem("calix.deviceData")),this.route.queryParams.subscribe(function(t){var i;if(history.state){var a=history.state.searchText?history.state.searchText:"";e.searchText=t.searchText||a||(null===(i=history.state)||void 0===i?void 0:i.subscriberId)}}),this.issuseservice.setIssues(""),this.dtOptions={paging:!1,info:!1,columnDefs:[{targets:[1,2,3,4],orderable:!1}],searching:!1},this.hiconplus="fa fa-plus-circle",this.hiconminus="fa fa-minus-circle",this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.Issues," - ").concat(e.language.Overview," - ").concat(e.language.Support," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language.Issues," - ").concat(this.language.Overview," - ").concat(this.language.Support," - ").concat(this.language["Calix Cloud"]));var t=this.ssoAuthService.getSerialNo();""!=t&&(this.Devices=JSON.parse(t)),localStorage.setItem("isqosalert",JSON.stringify(this.isqosalert)),!this.getScopes()&&(this.loading=!0,setTimeout(function(){e.qoeCheck()},2e3),this.service.showTopology.subscribe(function(t){e.showTopologyTab=t}),setTimeout(function(){e.qoeSubscribed=e.service.showQoe.subscribe(function(t){e.showQoeTab=t})},100))}},{key:"qoeCheck",value:function(){var e=this.ssoAuthService.getScopes();return Object.keys(e),this.scope.qoeRead=!1,p.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.qoe"]=e["cloud.rbac.csc.qoe"]?e["cloud.rbac.csc.qoe"]:[],e&&e["cloud.rbac.csc.qoe"]&&e["cloud.rbac.csc.qoe"].length&&-1!==e["cloud.rbac.csc.qoe"].indexOf("read")&&(this.scope.qoeRead=!0)):this.scope.qoeRead=!0,sessionStorage.getItem("calix.userFdUser"),this.isExosModel=this.ssoAuthService.exosVersionCheck("21.4")&&this.scope.qoeRead,sessionStorage.setItem("qoeCheck",this.isExosModel.toString()),sessionStorage.getItem("qoeCheck")}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),this.subscription&&this.subscription.unsubscribe(),this.commandIQDataSubs&&this.commandIQDataSubs.unsubscribe(),this.qoeSubscribed&&this.qoeSubscribed.unsubscribe()}},{key:"getScopes",value:function(){var e="DME"==this.ssoAuthService.getCscType(),t=this.ssoAuthService.getScopes(),i=Object.keys(t);if(p.N.VALIDATE_SCOPE?(t["cloud.rbac.csc.topology"]=t["cloud.rbac.csc.topology"]?t["cloud.rbac.csc.topology"]:[],t&&t["cloud.rbac.csc.topology"]&&t["cloud.rbac.csc.topology"].length&&-1!==t["cloud.rbac.csc.topology"].indexOf("read")&&(this.scope.topologyRead=!0)):this.scope.topologyRead=!0,e&&p.N.VALIDATE_SCOPE&&i){for(var a={},s=0;s<i.length;s++)-1===i[s].indexOf("cloud.rbac.csc.services")?-1===i[s].indexOf("cloud.rbac.csc.cpe")?-1===i[s].indexOf("cloud.rbac.csc.wifi")?-1===i[s].indexOf("cloud.rbac.csc.devices")||(a.devicesRead=!0):a.wifiRead=!0:a.routerTabRead=!0:a.serviceTabRead=!0;a.serviceTabRead||a.routerTabRead||a.wifiRead||a.devicesRead?a.serviceTabRead?this.router.navigate(["./".concat(this.MODULE,"/service")]):a.routerTabRead?this.router.navigate(["./".concat(this.MODULE,"/router")]):a.wifiRead?this.router.navigate(["./".concat(this.MODULE,"/wifi")]):a.devicesRead&&this.router.navigate(["./".concat(this.MODULE,"/device")]):this.router.navigate(["./".concat(this.MODULE,"/application")])}else e&&(!p.N.VALIDATE_SCOPE||!i)&&this.router.navigate(["./".concat(this.MODULE,"/service")]);return e}},{key:"getIssues",value:function(){var e=this;this.orgId=this.ssoAuthService.getOrgId(),this.Devices=JSON.parse(this.ssoAuthService.getSerialNo()),this.SubscriberId=this.ssoAuthService.getCSCSubscriberId(),this.Devices.forEach(function(t){if(t.serialNumber){var i={};i.serialNumber=t.serialNumber,i.opMode=t.opMode,e.serialNo.push(i)}});var t={subscriberId:this.SubscriberId,devices:this.serialNo};this.loading=!0,this.issuseservice.putissues(this.orgId,t).subscribe(function(t){e.apiCallDone=!0,e.issueData=t,e.issueData=e.issueData.filter(function(t){var i,a;return e.codelist.indexOf(t.hasOwnProperty("code")?null===(i=t.code)||void 0===i?void 0:i.toUpperCase():null===(a=t.Code)||void 0===a?void 0:a.toUpperCase())>-1}),e.issueData=e.issueData.sort(function(e,t){return e.severity<t.severity?1:e.severity>t.severity?-1:0}),e.issueList=e.issueData,e.issuseservice.setIssues(e.issueData),e.totalissues=e.issueList.length,e.initalize(),e.get(),e.loading=!1},function(t){e.apiCallDone=!0,e.loading=!1})}},{key:"initalize",value:function(){for(var e=0;e<this.totalissues;e++)this.isIconClicked[e]=!1,this.primaryActionButton[e]=!1,this.Description[e]=" ",this.reason[e]=" ",this.severity[e]=" "}},{key:"ReasonDescription",value:function(e,t,i){var a,s,n,r=this;switch(t&&(this.serialNumber=t?t.serialNumber:"",this.Devices.forEach(function(e){e.serialNumber==r.serialNumber&&e.serialNumber&&(a=e.opMode,s=e.modelName,n=e.manufacturer)}),this.macadd=t.sourceId?t.sourceId:" ",e=t.Code?t.Code.toUpperCase():t.code.toUpperCase()),e){case"ATTACK_DETECTED":case"VIRUS_ATTACK":this.path="/"+this.MODULE+"/application/protect-iq";var o=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(function(e){if("RG"==e.opMode&&e.hasOwnProperty("modelName")&&r.ssoAuthService.acceptGSModel(e.modelName))return e});return this.stateinfo={containGS:o.length,hasSubscriber:sessionStorage.getItem("calix.subscriberId")},"DEVICE"!==t.type?(this.Description[i]=this.language.Issue_Description1,this.reason[i]=this.language.Issue_Reason1):(this.Description[i]=this.language.Issue_Description_DEVICE1,this.reason[i]=this.language.Issue_Reason_DEVICE1),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Application"];case"CLIENT_DEVICE_LOW_SIGNAL_DETECTED":return sessionStorage.getItem("".concat(this.ssoAuthService.getTabId(),"calix.routerOnboard")),"RG"!=a?(this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason2,this.Description[i]=this.language.Issue_Description2,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To WiFi"]):(this.path="/"+this.MODULE+"/device",this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,ssR:!0,allDeviceissues:this.allDeviceissues},this.reason[i]=this.language.Issue_Reason_DEVICE2,this.Description[i]=this.language.Issue_Description_DEVICE2,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Client Detail"]);case"CLIENT_DEVICE_LOW_EFFICIENCY_SCORE_DETECTED":return this.path="/"+this.MODULE+"/device","DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason3,this.Description[i]=this.language.Issue_Description3):(this.reason[i]=this.language.Issue_Reason_DEVICE3,this.Description[i]=this.language.Issue_Description_DEVICE3),this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,dhyRW:!0,allDeviceissues:this.allDeviceissues},this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Client Detail"];case"CLIENT_DEVICE_LOW_PHY_RATE_DETECTED":return this.path="/"+this.MODULE+"/device",this.reason[i]=this.language.Issue_Reason_new4,this.Description[i]=this.language.Issue_Description_new4,this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,dhyRW:!0,allDeviceissues:this.allDeviceissues},this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Client Detail"];case"CLIENT_DEVICE_LEGACY_DEVICE_DETECTED":return this.path="/"+this.MODULE+"/device",this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,rmode:!0,allDeviceissues:this.allDeviceissues},"DEVICE"!==t.type?(this.Description[i]=this.language.Issue_Description4,this.reason[i]=this.language.Issue_Reason4):(this.Description[i]=this.language.Issue_Description_DEVICE4,this.reason[i]=this.language.Issue_Reason_DEVICE4),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Client Detail"];case"REBOOT_ISSUE":this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason5,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};var l=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(function(e){return e.serialNumber==r.serialNumber}).map(function(e){return e.opMode}),c=l.length&&"RG"==l[0]?l[0]:"Mesh";return this.Description[i]=this.language.Issue_Description5.replace(/RG/g,c),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"].replace("Router",c).replace("Routeur","Go To ".concat(c));case"SOFTWARE_UPGRADE_FAILED":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,modelName:s,isRouter:!0},"Device"!==t.type?(this.reason[i]=this.language.Issue_Reason6,this.Description[i]=this.language.Issue_Description6):(this.reason[i]=this.language.Issue_Reason_DEVICE6,this.Description[i]=this.language.Issue_Description_DEVICE6),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"STALE_SOFTWARE_VERSION":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,modelName:s,manufacturer:n,isUpgrade:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason7,this.Description[i]=this.language.Issue_Description7):(this.reason[i]=this.language.Issue_Reason_DEVICE7,this.Description[i]=this.language.Issue_Description_DEVICE7),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Upgrade Software"];case"WAP_FAILED":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason43,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,isFactoryReset:!0},this.Description[i]=this.language.Issue_Description43,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Mesh(SAT)"];case"GATEWAY_FAILED":this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,isFactoryReset:!0};var d={reason:"",description:""};return"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason44+" "+d.reason,this.Description[i]=this.language.Issue_Description44+" "+d.description):(this.reason[i]=this.language.Issue_Reason_DEVICE11+" "+d.reason,this.Description[i]=this.language.Issue_Description_DEVICE11+" "+d.description),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"SPEED_LOW_75_80":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason12,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description12,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"SPEED_LOW_75":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason13,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description13,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Speed Test"];case"TRAFFIC_HIGH":return this.service.getStoredSubscriberInfo(),this.path="/"+this.MODULE+"/insights",this.reason[i]=this.language.Issue_Reason14,this.stateinfo={id:this.ssoAuthService.getCSCSubscriberId(),value:"",isCSCResult:!0},this.marketingCommonService.setCSCtrueOrFalse(!0),this.marketingCommonService.setSubscriberID(this.ssoAuthService.getCSCSubscriberId()),this.Description[i]=this.language.Issue_Description14,this.primaryActionButton[i]=!0,this.severity[i]=1,this.ssoAuthService.getEntitlements()[119]||(t.isValid=!1),this.language["Go To Upsell"];case"LATENCY_HIGH":return this.path="/"+this.MODULE+"/service/data",this.reason[i]=this.language.Issue_Reason15,this.stateinfo={serialNumber:this.serialNumber,islatency:!0},this.Description[i]=this.language.Issue_Description15,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Latency"];case"WIFI_INTERFERENCE_HIGH_24G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Radiodisable2g:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason17,this.Description[i]=this.language.Issue_Description17):(this.reason[i]=this.language.Issue_Reason_DEVICE17,this.Description[i]=this.language.Issue_Reason_DEVICE17),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To WiFi"];case"QOS_DAMP_ALERT":return this.path="/"+this.MODULE+"/application",this.stateinfo={iseiqfromissue:!0},this.reason[i]=this.language.Issue_Reason41,this.Description[i]=this.language.Issue_Description41,this.primaryActionButton[i]=!0,this.severity[i]=0,this.isqosalert=!0,localStorage.setItem("isqosalert",JSON.stringify(this.isqosalert)),this.language.qos_issues;case"WIFI_INTERFERENCE_HIGH_5G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Radiodisable5g:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason18,this.Description[i]=this.language.Issue_Description18):(this.reason[i]=this.language.Issue_Reason_DEVICE18,this.Description[i]=this.language.Issue_Description_DEVICE18),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To WiFi"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0},this.reason[i]=this.language.Issue_Reason19,this.Description[i]=this.language.Issue_Description19,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0,Show5Gtab:!0},this.reason[i]=this.language.Issue_Reason20,this.Description[i]=this.language.Issue_Description20,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason21,this.Description[i]=this.language.Issue_Description21):(this.reason[i]=this.language.Issue_Reason_DEVICE21,this.Description[i]=this.language.Issue_Description_DEVICE21),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0,Show5Gtab:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason22,this.Description[i]=this.language.Issue_Description22):(this.reason[i]=this.language.Issue_Reason_DEVICE22,this.Description[i]=this.language.Issue_Description_DEVICE22),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"MESH_DEGRADE":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isReboot:!0,isRouter:!0},this.reason[i]=this.language.Issue_Reason23,this.Description[i]=this.language.Issue_Description23,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language.Reboot;case"BACKHAUL_TOO_CLOSE":return this.path="/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={backhaul:!0},this.reason[i]=this.language.Issue_Reason24,this.Description[i]=this.language.Issue_Description24,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go  To Backhaul"];case"BACKHAUL_TOO_FAR":return this.path="/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={backhaul:!0},this.reason[i]=this.language.Issue_Reason25,this.Description[i]=this.language.Issue_Description25,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go  To Backhaul"];case"WIFI_RADIO_DISABLED":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,isReboot:!0},this.reason[i]=this.language.Issue_Reason28,this.Description[i]=this.language.Issue_Description28,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"WIFI_RADIO_DISABLED_24G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason29,this.Description[i]=this.language.Issue_Description29,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"WIFI_RADIO_DISABLED_5G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason30,this.Description[i]=this.language.Issue_Description30,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"DS_SPEED_LOW_85":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason31,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description31,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"US_SPEED_LOW_85":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason32,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description32,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"DS_SPEED_LOW_75":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason33,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description33,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Speed Test"];case"US_SPEED_LOW_75":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason34,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description34,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Speed Test"];case"SFP_THERMAL_HIGH":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason35,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.Description[i]=this.language.Issue_Description35,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"SFP_THERMAL_TOO_HIGH":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason36,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.Description[i]=this.language.Issue_Description36,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"THERMAL_HIGH":this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.THERMAL_HIGH_Reason,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};var u=this.exosModelTemp[this.ssoAuthService.getModelWithSn(this.serialNumber)+"_h"];return this.Description[i]=this.language.THERMAL_HIGH_Description(u),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"THERMAL_TOO_HIGH":this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.THERMAL_TOO_HIGH_Reason,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};var h=this.exosModelTemp[this.ssoAuthService.getModelWithSn(this.serialNumber)+"_vh"];return this.Description[i]=this.language.THERMAL_TOO_HIGH_Description(h),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"ONT_OFFLINE":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.issue_reason37,this.stateinfo={serialNumber:this.serialNumber,isOnt:!0},this.Description[i]=this.language.issue_description37,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To ONT"];case"GC_MAX_DOWNSTREAM_ACHIEVED":return this.path="/"+this.MODULE+"/service",this.reason[i]=this.language.issue_reason38,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.issue_description38,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"GC_MAX_UPSTREAM_ACHIEVED":return this.path="/"+this.MODULE+"/service",this.reason[i]=this.language.issue_reason39,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.issue_description39,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"WFH_SSID_WITHOUT_CIQ":return this.path="/"+this.MODULE+"/wifi/ssid",this.reason[i]=this.language.issue_reason40,this.stateinfo={},this.Description[i]=this.language.issue_description40,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To SSID"];case"MAP_CONNECTIVITY_FAILED":this.path="/"+this.MODULE+"/router";var g=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(function(e){return e.serialNumber==r.serialNumber}).map(function(e){return e.opMode}),p=g.length&&"RG"==g[0]?"11":"10";return this.reason[i]=this.language["Issue_Reason".concat(p)],this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.Description[i]=this.language["Issue_Description".concat(p)],this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["10"==p?"Go To Mesh(SAT)":"Go To System"];case"WIFI_RADIO_DISABLED_6G":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason42,this.Description[i]=this.language.Issue_Description42,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"NOT_CERTIFIED_AND_SFP_NOT_SUPPORTED":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber},this.reason[i]=this.language.Issue_Reason45,this.Description[i]=this.language.Issue_Description45,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To System"];case"CERTIFIED_BUT_SFP_NOT_SUPPORTED_IN_CURRENT_VERSION":return this.path="RG"==a?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason46,this.Description[i]=this.language.Issue_Description46,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To WiFi"];case"LAN_DISABLED":return this.path=this.MODULE+"/service",this.stateinfo={},this.reason[i]=this.language.Issue_Reason47,this.Description[i]=this.language.Issue_Description47,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];case"UI_CREATED_ISSUE_FOR_TR069MAPDOWN":this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};var m=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(function(e){return e.serialNumber==r.serialNumber}).map(function(e){return e.opMode}),v=m.length&&"RG"==m[0]?"11":"10",f={reason:"",description:""};return this.reason[i]=this.language["Issue_Reason_mapNtr".concat(v)]+" "+f.reason,this.Description[i]=this.language["Issue_Description_mapNtr".concat(v)]+" "+f.description,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["10"==v?"Go To Mesh(SAT)":"Go To System"];case"LOW_ONT_LEVEL_ISSUE":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language["low power levels measured at the ONT"],this.stateinfo={serialNumber:this.serialNumber,isOnt:!0},this.Description[i]=this.language["ONT has low power level"],this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To ONT"];case"ONT_DS_SDBER_ISSUE":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language["ONT downstream SDBER rate exceeded"],this.stateinfo={serialNumber:this.serialNumber,isOnt:!0},this.Description[i]=this.language["Downstream Signal Degrade Bit Error Rate"],this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To ONT"];case"ONT_US_SDBER_ISSUE":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language["ONT upstream SDBER rate exceeded"],this.stateinfo={serialNumber:this.serialNumber,isOnt:!0},this.Description[i]=this.language["Upstream Signal Degrade Bit Error Rate"],this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To ONT"];case"NETWORK_RESILIENCE_ACTIVE_WITH_TR69_CONNECTED":return this.path=this.MODULE+"/service",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.reason[i]=this.language.Issue_Reason48,this.Description[i]=this.language.Issue_Description48,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];case"NETWORK_RESILIENCE_ACTIVE_WITH_TR69_DISCONNECTED":return this.path=this.MODULE+"/service",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.reason[i]=this.language.Issue_Reason49,this.Description[i]=this.language.Issue_Description49,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];case"NETWORK_RESILIENCE_INACTIVE":return this.path=this.MODULE+"/service",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.reason[i]=this.language.Issue_Reason50,this.Description[i]=this.language.Issue_Description50,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];default:return this.Description[i]=" ",this.reason[i]=" ",this.primaryActionButton[i]=!1,""}}},{key:"onIconClick",value:function(e,t){t&&this.ReasonDescription(t);for(var i=0;i<this.issueData.length;i++)this.isIconClicked[i]=e===i&&!this.isIconClicked[i]}},{key:"routeforissues",value:function(e,t){return 1==this.primaryActionButton[t]?" ":(i=e.Code?e.Code:e.code,this.ReasonDescription(i,e)," "==this.path?" ":void this.router.navigate([this.path],{state:this.stateinfo}));var i}},{key:"routeforbutton",value:function(e,t){var i;if(i=e.Code?e.Code:e.code,this.ReasonDescription(i,e)," "==this.path)return" ";this.router.navigate([this.path],{state:this.stateinfo})}},{key:"getdate",value:function(e){return new Date(e).getTime()}},{key:"sort",value:function(){var e=this;this.issueData=[],"All"==this.severityfilter?this.issueData=this.issueList:"Issues"==this.severityfilter?this.issueList.forEach(function(t){0==t.severity&&e.issueData.push(t)}):"Warning"==this.severityfilter&&this.issueList.forEach(function(t){1==t.severity&&e.issueData.push(t)})}},{key:"responseFromStatus",value:function(e){var t=this;this.loading=!1,this.severityfilter="All";var i=this.service.getSubscriberTabInfoData()?this.service.getSubscriberTabInfoData():"";if(i){var a=this.ssoAuthService.getEntitlements();a[118]&&(this.SupportCloud=!0),a[102]&&(this.opsCloud=!0);for(var s=null==i?void 0:i.allIssues,n=[],r=s.filter(function(e){return["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)}).map(function(e){return e.serialNumber}),o=(s=s.filter(function(e,t){if(!r.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;n.push(null==e?void 0:e.serialNumber)})).length-1;o>=0;o--)if(n.includes(s[o].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(s[o].code)){if(["GATEWAY_FAILED"].includes(s[o].code)){var l=JSON.parse(sessionStorage.getItem("calix.subscriberInfo"));this.isSmbOnboarded=((null==l?void 0:l.devices)||[]).filter(function(e){return e.bSmbMode}).length&&(null==l?void 0:l.isSmbOnboarded);var c=l.commandIQ?l.commandIQ.userId:"";c&&this.supportWifiService.getBackupWanStatus(c).subscribe(function(e){t.backupWifiStatus=e})}s.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:s[o].serialNumber,source:s[o].serialNumber,sourceId:s[o].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),s.splice(o,1)}this.issueData=s.filter(function(e){var i,a;return t.codelist.indexOf(e.hasOwnProperty("code")?null===(i=e.code)||void 0===i?void 0:i.toUpperCase():null===(a=e.Code)||void 0===a?void 0:a.toUpperCase())>-1}),this.issueData=this.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize()}}},{key:"get",value:function(){var e=this;if(this.issueData.length>0){var t=this.issueData.filter(function(e){return e.type.includes("CLIENT")||e.type.includes("Client")||e.type.includes("DEVICE")||e.type.includes("Device")});this.allDeviceissues=[],t.forEach(function(t){if("CLIENT_DEVICE_LOW_SIGNAL_DETECTED"==t.code)(i={}).serialNumber=t.sourceId,i.warning="ssR",e.allDeviceissues.push(i);else if("CLIENT_DEVICE_LOW_PHY_RATE_DETECTED"==t.code)(i={}).serialNumber=t.sourceId,i.warning="dhyRW",e.allDeviceissues.push(i);else if("CLIENT_DEVICE_LOW_Efficiency_SCORE_DETECTED"==t.code)(i={}).serialNumber=t.sourceId,i.warning="dhyRW",e.allDeviceissues.push(i);else if("CLIENT_DEVICE_LEGACY_DEVICE_DETECTED"==t.code){var i;(i={}).serialNumber=t.sourceId,i.warning="rmode",e.allDeviceissues.push(i)}}),this.issuseservice.setDeviceIssues(this.allDeviceissues?this.allDeviceissues:{})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.s),d.Y36(h.t6),d.Y36(m.F),d.Y36(c.F0),d.Y36(c.gz),d.Y36(v.Q),d.Y36(f.Dx),d.Y36(D._),d.Y36(y.O))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-issues"]],decls:36,vars:16,consts:[[3,"issues","responseFromIssuse","issuesAndReasons","apiCallDone"],[1,"row"],[1,"col-12"],[1,"m-2"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["id","iss-issues-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],[1,"big-text"],["class","nav-item","id","iss-topology-tab",4,"ngIf"],["class","nav-item","id","iss-qoe-tab",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["class","loader load",4,"ngIf"],[1,"col-sm-12","col-md-12","col-lg-10","col-xl-10"],[1,"ml-4"],[1,"col-sm-12","col-md-12","col-lg-2","col-xl-2"],[3,"ngModel","searchable","ngModelChange","change"],["value","All"],["value","Issues"],["value","Warning"],["class","accordion mb-5","id","accordion",4,"ngIf"],["id","iss-topology-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"],["id","iss-qoe-tab",1,"nav-item"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["id","accordion",1,"accordion","mb-5"],["id","scrolldi","data-ordering","false","datatable","",1,"row-border","hover",3,"dtOptions","mouseleave"],["width","3%"],["width","15%"],["width","6%"],["width","18%"],[3,"mouseover",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"mouseover"],[1,"mt-2","mb-2"],[3,"id"],["class","mt-2 mb-2",4,"ngIf"],["valign","center"],["class","primary","href","javascript:void(0)",4,"ngIf"],["class","img-float",4,"ngIf"],[1,"text-center"],["href","javascript:void(0)",1,"primary"],[3,"ngClass","click"],[1,"img-float"],["height","16","width","16","src","./assets/img/ic_cloud.svg","alt","warning",1,"mr-1"],["height","16","width","16","src","./assets/img/ic_modem.svg","alt","warning",1,"mr-1","modem-icon"],["height"," 16","width","16","src","./assets/img/ic_wifi.svg","alt","warning",1,"mr-1","ic-wifi"],["height"," 16","width","16","src","./assets/img/ic_alldevices.svg","alt","warning",1,"mr-1"],["height"," 16","width","16","src","./assets/img/ic_chart.svg","alt","warning",1,"mr-1"],[1,"issue"],[1,"warning"],[1,"resolved"],[1,"btn-default","primary","py-0",3,"click"],["colspan","8",1,"no-data-available"]],template:function(e,t){1&e&&(d.TgZ(0,"app-subscriber-menu",0),d.NdJ("apiCallDone",function(e){return t.responseFromStatus(e)}),d.qZA(),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"section",3),d.TgZ(4,"div",1),d.TgZ(5,"div",4),d.TgZ(6,"ul",5),d.TgZ(7,"li",6),d.TgZ(8,"a",7),d.NdJ("Click",function(e){return e.preventDefault()}),d.TgZ(9,"span",8),d._uU(10),d.qZA(),d.qZA(),d.qZA(),d.YNc(11,x,4,2,"li",9),d.YNc(12,_,4,2,"li",10),d.qZA(),d.TgZ(13,"div",11),d.TgZ(14,"div",12),d._UZ(15,"div",13),d.qZA(),d.TgZ(16,"div",14),d._UZ(17,"div",13),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"div",1),d.TgZ(19,"div",2),d.YNc(20,w,5,1,"div",15),d.TgZ(21,"div",1),d.TgZ(22,"div",16),d.TgZ(23,"span",17),d._uU(24),d.qZA(),d.qZA(),d.TgZ(25,"div",18),d.TgZ(26,"label"),d._uU(27),d.qZA(),d.TgZ(28,"ng-select",19),d.NdJ("ngModelChange",function(e){return t.severityfilter=e})("change",function(){return t.sort()}),d.TgZ(29,"ng-option",20),d._uU(30),d.qZA(),d.TgZ(31,"ng-option",21),d._uU(32),d.qZA(),d.TgZ(33,"ng-option",22),d._uU(34),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(35,B,15,6,"div",23),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.Q6J("issues",t.issueData)("responseFromIssuse",t.apiCallDone)("issuesAndReasons",t.reason),d.xp6(8),d.MGl("routerLink","/",t.MODULE,"/overview/issues"),d.xp6(2),d.Oqu(t.language.Issues),d.xp6(1),d.Q6J("ngIf",t.showTopologyTab),d.xp6(1),d.Q6J("ngIf",t.showQoeTab),d.xp6(8),d.Q6J("ngIf",t.loading),d.xp6(4),d.hij("",t.language["Hover over an issue and click available options to see more details"],"."),d.xp6(3),d.Oqu(t.language.Severity),d.xp6(1),d.Q6J("ngModel",t.severityfilter)("searchable",!1),d.xp6(2),d.hij("",t.language.all," "),d.xp6(2),d.Oqu(t.language.Issue),d.xp6(2),d.Oqu(t.language.Warning),d.xp6(1),d.Q6J("ngIf",!t.loading))},directives:[b.e,c.yS,c.Od,l.O5,T.w9,I.JJ,I.On,T.xv,A.G,l.sg,l.mk],styles:[".issue[_ngcontent-%COMP%]{color:#c70000}.warning[_ngcontent-%COMP%]{color:orange}.resolved[_ngcontent-%COMP%]{color:#000}[_nghost-%COMP%]     .dataTables_empty{display:none}.no-data-available[_ngcontent-%COMP%]{text-align:center}.btn-white[_ngcontent-%COMP%]{border-radius:16px;padding:5px;min-width:40px;text-align:center;font-size:16px;font-weight:400;color:#000;box-shadow:3px 3px 6px #00000026;border:0;background-color:#fff;margin:2px}i[_ngcontent-%COMP%]{font-size:16px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;font-weight:400;vertical-align:middle;border-top:0!important;border-bottom:1px solid #cccccc;word-break:break-word}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0!important}table.dataTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#4c4c4c;padding:0 10px;border-top:0!important;border-bottom:1px solid transparent;word-break:break-word;min-height:45px}.img-float[_ngcontent-%COMP%]{height:100%;float:left;width:20%;margin-right:10px;text-align:center}.img-float[_ngcontent-%COMP%]   .modem-icon[_ngcontent-%COMP%]{width:100%}.img-float[_ngcontent-%COMP%]   .ic-wifi[_ngcontent-%COMP%]{width:100%}"]}),e}(),W=n(81486),G=n(91841),Y=n(95593);function V(e,t){if(1&e&&(d.TgZ(0,"div",19),d.TgZ(1,"div",20),d.TgZ(2,"div",21),d.TgZ(3,"span",22),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(4),d.Oqu(i.language.Loading)}}var J=function(){var e=function(){function e(t,i,a,n,r,o,l){s(this,e),this.service=t,this.translateService=i,this.http=a,this.route=n,this.spinner=r,this.ssoAuthService=o,this.issuseservice=l,this.isIconClicked=[],this.primaryActionButton=[],this.Description=[],this.severity=[],this.reason=[],this.apiCallDone=!1,this.loading=!1,this.lastDeviceClickData={},this.uniqueDevices=[],this.uniqueHostnames=[],this.clientData={},this.codelist=["LATENCY_HIGH","VIRUS_ATTACK","CLIENT_DEVICE_LOW_SIGNAL_DETECTED","CLIENT_DEVICE_LOW_PHY_RATE_DETECTED","CLIENT_DEVICE_LEGACY_DEVICE_DETECTED","REBOOT_ISSUE","SOFTWARE_UPGRADE_FAILED","STALE_SOFTWARE_VERSION","GATEWAY_FAILED","WIFI_RADIO_DISABLED_24G","WIFI_RADIO_DISABLED_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G","BACKHAUL_TOO_CLOSE","BACKHAUL_TOO_FAR","MESH_DEGRADE","ATTACK_DETECTED","GATEWAY_FAILED","WAP_FAILED","SPEED_LOW_75","SPEED_LOW_75_80","TRAFFIC_HIGH","WIFI_INTERFERENCE_HIGH_24G","WIFI_INTERFERENCE_HIGH_5G","DS_SPEED_LOW_85","US_SPEED_LOW_85","DS_SPEED_LOW_75","US_SPEED_LOW_75","THERMAL_TOO_HIGH","THERMAL_HIGH"],this.twoHrsCategory=[],this.twoHrsData=[],this.sixHrsCategory=[{label:"6hrs ago"},{label:"5hrs 30mins ago"},{label:"5hrs ago"},{label:"4hrs 30mins ago"},{label:"4hrs ago"},{label:"3hrs 30mins ago"},{label:"3hrs ago"},{label:"2hrs 30mins ago"},{label:"2hrs ago"},{label:"1hrs 30mins ago"},{label:"1hrs ago"},{label:"30mins ago"}],this.sixHrsData=[],this.oneDayCategory=[{label:"24hrs ago"},{label:"22hrs ago"},{label:"20hrs ago"},{label:"18hrs ago"},{label:"16hrs ago"},{label:"14hrs ago"},{label:"12hrs ago"},{label:"10hrs ago"},{label:"8hrs ago"},{label:"6hrs ago"},{label:"4hrs ago"},{label:"2hrs ago"}],this.oneDayData=[],this.weekCategory=[{label:"7 days ago"},{label:"6 days ago"},{label:"5 days ago"},{label:"4 days ago"},{label:"3 days ago"},{label:"2 days ago"},{label:"1 day ago"}],this.data={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:this.twoHrsCategory}],dataset:this.twoHrsData},this.width="100%",this.height=400,this.type="msline",this.dataFormat="json",this.dataSource=this.data,this.menuActive="2 Hours",this.chartMenu=[{id:1,value:"2 Hours"},{id:2,value:"6 Hours"},{id:3,value:"1 Day"},{id:4,value:"1 Week"}],this.closeDevicesArray=[],this.mediumDevicesArray=[],this.farDevicesArray=[],this.dataArray=[],this.deviceDataWithAll=[],this.closeDevicesSplit=!1,this.mediumDevicesSplit=!1,this.farDevicesSplit=!1,this.allObject={type:"All",key4:"All",key6:"All"},this.routerTooltip="  IP Address: 192.168.1.65,\n  Device: Calix Router,\n  Connection: connected",this.accesPointTooltip="IP Address: 192.168.1.1,\n  Device:AccessPoint 1,\n  Connection: connected",this.isActive1=!0,this.isActive2=!1,this.isSingleClick=!0,this.clickCount=0,this.title="app",this.preventSingleClick=!1,this.dblcount=0,this.snglcount=0,this.showChart=!1,this.apInformtion="",this.VisitedPage="",this.routerKey="",this.nextVisitedPage="",this.nextRouterKey="",this.nextTabledataUniqueId="",this.currentPage="main",this.dblClkFired=!1,this.$=W.GraphObject.make,this.topologyData={phy:[],legacy:[],clientWifi:[]},this.topologyView=!0,this.tplgyType="",this.tableView=!1,this.legacyChecked=!1,this.phyChecked=!1,this.signalChecked=!1,this.filterEnabled=!1,this.successFilterEnabled=!1,this.deviceDatas=[],this.deviceDatasUpdated=[],this.backBtnDisabled=!0,this.accessPointId="",this.nodeDataArray=[],this.linkDataArray=[],this.hostnameFilterData=[],this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},actions:!1,columns:{accessPoint:{filter:!1,title:"Access Point"},image_url:{title:"DeviceType",type:"html",valuePrepareFunction:function(e){return'<img width="50%" src="'.concat(e,'"/>')},width:"50px",height:"10px"},hostname:{title:"HostName",filter:{type:"list",config:{selectText:"All"}}},"fingerprint-model":{filter:!1,title:"Model"},"fingerpint-vendor":{filter:!1,title:"Vendor"},"ip-address":{filter:!1,title:"Ip address"},ssid:{filter:!1,title:"SSID"},radio:{filter:!1,title:"Radio"},siganl_image:{title:"Signal",filter:!1,type:"html",valuePrepareFunction:function(e){return'<img width="100%" src="'.concat(e.url,'" title="').concat(e["signal-strength"],'"/>')},width:"50px",height:"50px"},"DS-phy-rate":{filter:!1,title:"DS PHY Rate"},"US-phy-rate":{filter:!1,title:"US PHY Rate"},"DS-packet-drops":{filter:!1,title:"Packets Dropped DS"},"client-efficiency-score":{filter:!1,title:"Wi-Fi Score Current (Average)"},"client-note":{filter:!1,title:"Reason for failure"}}},this.images=["assets/images/tv-all-clear.png","assets/images/printer-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png","assets/images/phone-all-clear-state.png","assets/images/camera-clear.png","assets/images/audiobox-clear.png","assets/images/gaming-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png"],this.imagesObj={Television:"assets/images/tv-all-clear.png",Tablet:"assets/images/ipad-all-clear.png",Phone:"assets/images/phone-all-clear-state.png",Camera:"assets/images/camera-clear.png","Media Player":"assets/images/audiobox-clear.png",Console:"assets/images/gaming-clear.png","Wi-Fi IoT":"assets/images/iot.png","Wi Fi IoT":"assets/images/iot.png","Wifi IoT":"assets/images/iot.png",Computer:"assets/images/computer.png",Printer:"assets/images/printer-clear.png",Network:"assets/images/network.png",Voip:"assets/images/voip.png",Fridge:"assets/images/iot.png","Television-red":"assets/images/tv-critical-issues.png","Tablet-red":"assets/images/ipad-critical.png","Phone-red":"assets/images/phone-critical-state.png","Camera-red":"assets/images/camera-critical.png","Media Player-red":"assets/images/audiobox-critical.png","Console-red":"assets/images/gaming-critical.png","Wi-Fi IoT-red":"assets/images/iot-critical.png","Wi Fi IoT-red":"assets/images/iot-critical.png","Wifi IoT-red":"assets/images/iot-critical.png","Computer-red":"assets/images/computer-critical.png","Printer-red":"assets/images/printer-critical.png","Network-red":"assets/images/network-critical.png","Voip-red":"assets/images/voip-critical.png","Fridge-red":"assets/images/iot-critical.png","iot-red":"assets/images/iot-critical.png"},this.ssid="",this.radio="",this.ethOrAPType="",this.ethOrAPImageUrl="",this.accessPointImages={yellow:"assets/images/access-point-minor-issues.mp4",green:"assets/images/access-point-clear.png",red:"assets/images/access-point-critical.mp4"},this.apData={},this.apImageUrl="",this.apNodeData=[],this.apLinkData=[],this.dataForUploadDownLoadChart=[],this.dataForSignalStrengthChart=[],this.dataForClientScoreChart=[],this.dataSource1={},this.dataSource2={},W.Diagram.licenseKey="73f04ee5b03c08c702d90776423d6af919a17564cf814aa4090413f6eb0d6b06329dee7159d08ec9d4aa4dfa137ec989ddc26f79c74a523fe633d7d947e283f0b13774e71409458bf31136c5ccaa2ca1ae2870e0d2b676a1db678eede9"}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t}),document.getElementById("myDiagramDiv2").style.display="none",this.backBtnDisabled=!0,this.route.queryParams.subscribe(function(t){e.routerMac=t.routerMac,e.getData(),e.getAllClientsData(e.routerMac)})}},{key:"ngAfterViewInit",value:function(){}},{key:"dataGenerator",value:function(){this.sixHrsData=[],this.oneDayData=[];var e={},t={};e.data=[],t.data=[];for(var i=0;i<=12;i++){var a={value:Math.floor(100*Math.random())},s={value:Math.floor(100*Math.random())};e.data.push(a),t.data.push(s)}}},{key:"chartTimeChange",value:function(e){this.menuActive=e,"2 Hours"==e?(this.data.categories=[{category:this.twoHrsCategory}],this.data.dataset=this.dataForUploadDownLoadChart):"6 Hours"==e?(this.data.categories=[{category:this.sixHrsCategory}],this.dataGenerator(),this.data.dataset=this.sixHrsData):"1 Day"==e?(this.data.categories=[{category:this.oneDayCategory}],this.dataGenerator(),this.data.dataset=this.oneDayData):"1 Week"==e&&(this.data.categories=[{category:this.weekCategory}],this.data.dataset=[])}},{key:"hideDDMenu",value:function(){document.getElementById("myDropdown")&&document.getElementById("myDropdown").classList.contains("show")&&document.getElementById("myDropdown").classList.remove("show")}},{key:"rangeFilter",value:function(e){var t=this;this.closeDevicesSplit=!1,this.mediumDevicesSplit=!1,this.farDevicesSplit=!1,this.closeDevicesArray=[],this.mediumDevicesArray=[],this.farDevicesArray=[],e.forEach(function(e){"close"==e["client-distance"]?t.closeDevicesArray.push(e):"medium"==e["client-distance"]?t.mediumDevicesArray.push(e):"far"==e["client-distance"]&&t.farDevicesArray.push(e)}),this.closeDevicesArray.length>4&&(this.closeDevicesSplit=!0),this.mediumDevicesArray.length>4&&(this.mediumDevicesSplit=!0),this.farDevicesArray.length>4&&(this.farDevicesSplit=!0)}},{key:"deviceTypeChange",value:function(e){var t=this;if(this.selectedDeviceType=null!=e?e["client-type"]:"All","All"==this.selectedDeviceType)this.rangeFilter(this.deviceDataWithAll);else{var i=this.deviceDataWithAll.filter(function(e){return e["client-type"]==t.selectedDeviceType});this.rangeFilter(i)}this.selectedHostName=void 0,this.selectedMacAddress=void 0}},{key:"hostNameChange",value:function(e){var t=this;if(this.selectedHostName=null!=e?e.hostname:"All","All"==this.selectedHostName)this.rangeFilter(this.deviceDataWithAll);else{var i=this.deviceDataWithAll.filter(function(e){return e.hostname==t.selectedHostName});this.rangeFilter(i)}this.selectedDeviceType=void 0,this.selectedMacAddress=void 0}},{key:"macAddressChange",value:function(e){var t=this;if(this.selectedMacAddress=null!=e?e.key6:"All","All"==this.selectedMacAddress)this.rangeFilter(this.deviceDataWithAll);else{var i=this.deviceDataWithAll.filter(function(e){return e.key6==t.selectedMacAddress});this.rangeFilter(i)}this.selectedHostName=void 0,this.selectedDeviceType=void 0}},{key:"imageDblClick",value:function(e){document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="block",this.topologyView=!1,this.tableView=!0,this.currentPage="table",this.VisitedPage="middle",this.nextVisitedPage="table",this.deviceDatasUpdated=[],0==e||this.deviceDatasUpdated.push(e),this.clientData=e,this.getClientData(e.mac)}},{key:"rangeDeviceFilter",value:function(e){0==e?(this.rangeFilter(this.deviceDatas),this.deviceDataWithAll=this.deviceDatas,this.deviceDataWithAll.unshift(this.allObject)):(this.dataArray=this.deviceDatas.filter(function(t){return t.key1==e}),this.rangeFilter(this.dataArray),this.deviceDataWithAll=this.dataArray,this.deviceDataWithAll.unshift(this.allObject))}},{key:"customSort",value:function(e,t){return"PASS"===e["signal-strength-test-result"]&&"PASS"===t["signal-strength-test-result"]&&"PASS"===e["legacy-device-test-result"]&&"PASS"===t["legacy-device-test-result"]?1:-1}},{key:"loadfirst",value:function(){var e=this;this.currentPage="main";var t=this.$;i&&(i.div=null);var i=t(W.Diagram,"myDiagramDiv1",{initialContentAlignment:W.Spot.Center,"undoManager.isEnabled":!0,initialAutoScale:W.Diagram.UniformToFill,layout:t(W.LayeredDigraphLayout,{direction:0,layerSpacing:110,columnSpacing:33,linkSpacing:7,isOngoing:!1})});function a(e,t){e.data.isCollapsed||(e.diagram.model.setDataProperty(e.data,"isCollapsed",!0),e!==t&&e.diagram.model.setDataProperty(e.data,"visible",!1),e.findNodesOutOf().each(a))}function s(e,t){!e.data.isCollapsed||(e.diagram.model.setDataProperty(e.data,"isCollapsed",!1),e!==t&&e.diagram.model.setDataProperty(e.data,"visible",!0),e.findNodesOutOf().each(s))}i.toolManager.toolTipDuration=6e4,i.toolManager.hoverDelay=500,W.Shape.getArrowheadGeometries().toKeySet().toArray(),t(W.Adornment,"Spot",{background:"transparent",mouseLeave:function(e,t){t.part.adornedPart.removeAdornment("mouseHover")}},t(W.Placeholder,{background:"transparent",isActionable:!0,click:function(e,t){var i=t.part.adornedPart;i.diagram.select(i)}}),t("Button",{alignment:W.Spot.TopCenter,alignmentFocus:W.Spot.TopCenter},{click:function(t,i){e.dblClkFired=!1,e.accessPointId=i.part.data.accessPointId,e.VisitedPage="main",e.routerKey=i.part.data.key,e.getAPData(i.part.data.key,!0,"")}},t(W.TextBlock,"+"))),i.nodeTemplate=t(W.Node,"Auto",new W.Binding("visible"),t(W.Shape,{width:150,height:130,margin:4,fill:null,strokeWidth:2}),{background:"white",fromSpot:W.Spot.RightSide,toSpot:W.Spot.LeftSide,selectionAdorned:!1},t(W.Panel,"Horizontal",t(W.Picture,{width:70,height:70},new W.Binding("source","source",function(e){return e||""}),new W.Binding("element","source-video",function(e){return e||""})),t(W.Panel,"Vertical",new W.Binding("width","label",function(e){return e?70:0}),new W.Binding("height","label",function(e){return e?110:0}),t(W.Panel,"Vertical",{margin:new W.Margin(40,0,0,0)},new W.Binding("background","label",function(e){return e?"#eaeaea":""}),new W.Binding("padding","label",function(e){return e?10:""}),t(W.TextBlock,{margin:new W.Margin(0,0,0,0),maxSize:new W.Size(100,30),isMultiline:!1},new W.Binding("text","label",function(e){return e||""}))),t("Button",{visible:!1,margin:new W.Margin(15,0,0,0)},new W.Binding("visible","isTreeLeaf",function(e){return!e}).ofObject(),t(W.Shape,{name:"ButtonIcon",figure:"MinusLine",desiredSize:new W.Size(8,8)},new W.Binding("figure","isCollapsed",function(e){return e?"PlusLine":"MinusLine"})),{click:function(e,t){e.diagram.startTransaction();var i=t.part;i.data.isCollapsed?s(i,i):a(i,i),e.diagram.commitTransaction("toggled visibility of dependencies")}}))),t(W.Panel,"Auto",new W.Binding("margin","label",function(e){return e?new W.Margin(-65,0,0,50):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),t(W.Shape,"Circle",{width:24,height:24,fill:"white",stroke:"green",strokeWidth:2,margin:5,visible:!1,click:function(t,i){"internet"!==i.part.data.key&&"ethernet"!==i.part.data.key&&(e.lastDeviceClickData=i.part.data,e.apInformtion=i.part.data["rg-tech-notes"],e.accessPointId=i.part.data.accessPointId,e.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",e.backBtnDisabled=!1,e.dblClkFired=!0,e.getAPData(i.part.data.key,"",!0),e.showChart=!1,e.phyChecked=i.part.data.customFilterObj.phyChecked,e.legacyChecked=i.part.data.customFilterObj.legacyChecked,e.successFilterEnabled=!0)}},new W.Binding("visible","passed-clients",function(e){return e||!1})),t(W.TextBlock,{click:function(t,i){"internet"!==i.part.data.key&&"ethernet"!==i.part.data.key&&(e.lastDeviceClickData=i.part.data,e.apInformtion=i.part.data["rg-tech-notes"],e.accessPointId=i.part.data.accessPointId,e.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",e.backBtnDisabled=!1,e.dblClkFired=!0,e.getAPData(i.part.data.key,"",!0),e.showChart=!1,e.phyChecked=i.part.data.customFilterObj.phyChecked,e.legacyChecked=i.part.data.customFilterObj.legacyChecked,e.successFilterEnabled=!0)},margin:5},new W.Binding("text","passed-clients",function(e){return e||""}))),t(W.Panel,"Auto",new W.Binding("margin","label",function(e){return e?new W.Margin(-45,0,0,90):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),t(W.Shape,"Circle",{width:24,height:24,fill:"white",stroke:"orange",strokeWidth:2,margin:5,visible:!1,click:function(t,i){"internet"!==i.part.data.key&&"ethernet"!==i.part.data.key&&(e.lastDeviceClickData=i.part.data,e.apInformtion=i.part.data["ap-tech-note"],e.accessPointId=i.part.data.accessPointId,e.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",e.backBtnDisabled=!1,e.dblClkFired=!0,e.getAPData(i.part.data.key,"",!0),e.showChart=!1,e.phyChecked=i.part.data.customFilterObj.phyChecked,e.legacyChecked=i.part.data.customFilterObj.legacyChecked,e.filterEnabled=!0)},toolTip:t("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},t(W.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new W.Binding("text","failedClientsNote")))},new W.Binding("visible","failed-clients",function(e){return e||!1})),t(W.TextBlock,{click:function(t,i){"internet"!==i.part.data.key&&"ethernet"!==i.part.data.key&&(e.lastDeviceClickData=i.part.data,e.apInformtion=i.part.data["ap-tech-note"],e.accessPointId=i.part.data.accessPointId,e.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",e.backBtnDisabled=!1,e.dblClkFired=!0,e.getAPData(i.part.data.key,"",!0),e.showChart=!1,e.phyChecked=i.part.data.customFilterObj.phyChecked,e.legacyChecked=i.part.data.customFilterObj.legacyChecked,e.filterEnabled=!0)},margin:5,toolTip:t("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},t(W.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new W.Binding("text","failedClientsNote")))},new W.Binding("text","failed-clients",function(e){return e||""}))),t(W.Panel,"Auto",new W.Binding("margin","label",function(e){return e?new W.Margin(-65,0,0,3):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),t(W.Shape,"Square",{width:15,height:15,fill:"#eaeaea",stroke:"black",strokeWidth:1,margin:5,visible:!1,click:function(t,i){e.dblClkFired=!1,e.accessPointId=i.part.data.accessPointId,e.lastDeviceClickData=i.part.data,e.VisitedPage="main",e.routerKey=i.part.data.key,e.getAPData(i.part.data.key,!0,"")}},new W.Binding("visible","showBtn",function(e){return e||!1})),t(W.TextBlock,{click:function(t,i){e.dblClkFired=!1,e.accessPointId=i.part.data.accessPointId,e.lastDeviceClickData=i.part.data,e.VisitedPage="main",e.routerKey=i.part.data.key,e.getAPData(i.part.data.key,!0,"")}},new W.Binding("text","showBtn",function(e){return e?"+":""}))),{click:function(t,i){e.apInformtion=i.part.data["ap-tech-note"]?i.part.data["ap-tech-note"]:i.part.data["rg-tech-notes"]},mouseHover:function(e,t){},contextClick:function(e,t){alert("Right Clicked on "+t.part.data.key)},doubleClick:function(t,i){"internet"!==i.part.data.key&&"ethernet"!==i.part.data.key&&(e.accessPointId=i.part.data.accessPointId,e.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",e.backBtnDisabled=!1,e.dblClkFired=!0,e.getAPData(i.part.data.key,"",!0),e.showChart=!1)},toolTip:t("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},t(W.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new W.Binding("text","text")))}),i.nodes.each(function(e){var t=e.part;"01:00:00:00:00:01"==e.part.key&&a(t,t)}),i.linkTemplate=t(W.Link,{curve:W.Link.Bezier,toShortLength:6,relinkableFrom:!0,relinkableTo:!0},t(W.Shape,{strokeWidth:3,width:200},new W.Binding("stroke","color"),new W.Binding("strokeWidth","thick")),{toolTip:t("ToolTip",t(W.TextBlock,{margin:2},new W.Binding("text","",function(e){return"".concat(e.name)})))}),i.model=new W.GraphLinksModel(this.nodeDataArray,this.linkDataArray),this.diagramRedrawInt=setInterval(function(){i.redraw()},600)}},{key:"second",value:function(e,t){var i=this;this.apInformtion="",this.VisitedPage="main",this.routerKey=e,this.currentPage="middle",t&&(this.nextVisitedPage="middle",this.nextRouterKey=e),this.topologyView=!0,this.tableView=!1,document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="block",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.myDiagramDiv2&&(this.myDiagramDiv2.div=null);var a=this.$;this.myDiagramDiv2=a(W.Diagram,"apTopologyView",{initialContentAlignment:W.Spot.Center,"undoManager.isEnabled":!0,initialAutoScale:W.Diagram.UniformToFill,layout:a(W.LayeredDigraphLayout,{direction:0,layerSpacing:100,columnSpacing:7})}),setInterval(function(){i.myDiagramDiv2.redraw()},60),this.myDiagramDiv2.nodeTemplate=a(W.Node,"Auto",{background:"white",selectionAdorned:!1},a(W.Panel,"Horizontal"),a(W.Picture,{width:65,height:65},new W.Binding("width","isClient",function(e){return e?35:65}),new W.Binding("height","isClient",function(e){return e?35:65}),new W.Binding("source","source",function(e){return e||""}),new W.Binding("element","source-video",function(e){return e||""})),a(W.Panel,"Vertical",new W.Binding("margin","label",function(e){return e?new W.Margin(110,0,0,0):""}),new W.Binding("background","label",function(e){return e?"#eaeaea":""}),new W.Binding("padding","label",function(e){return e?3:""}),a(W.TextBlock,{margin:new W.Margin(0,0,0,0),maxSize:new W.Size(100,30),isMultiline:!1},new W.Binding("text","label",function(e){return e||""}))),{click:function(e,t){"ethernet"===t.part.data.key||"ap"===t.part.data.key||(t.part.data.isClient?i.imageDblClick(t.part.data):i.showTableView("",!1))},toolTip:a("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},a(W.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new W.Binding("text","text")))}),this.myDiagramDiv2.linkTemplate=a(W.Link,{curve:W.Link.Bezier,toShortLength:6,relinkableFrom:!0,relinkableTo:!0},a(W.Shape,new W.Binding("stroke","color"),new W.Binding("strokeWidth","thick")),{toolTip:a("ToolTip",a(W.TextBlock,{margin:2},new W.Binding("text","",function(e){return"".concat(e.name)})))});var s=a(W.GraphLinksModel);s.nodeDataArray=this.apNodeData,s.linkDataArray=this.apLinkData,this.myDiagramDiv2.model=s}},{key:"goBack",value:function(){this.showChart=!1,this.hideDDMenu(),this.tableView?(this.tableView=!1,this.topologyView=!0):(this.tableView=!0,this.topologyView=!1),"main"===this.VisitedPage?(this.tableView=!1,this.topologyView=!0,this.getAllClientsData(this.routerMac),this.currentPage="main",document.getElementById("myDiagramDiv1").style.display="block",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!0,this.nextRouterKey=this.routerKey,this.nextVisitedPage=this.dblClkFired?"table":"middle"):"middle"===this.VisitedPage&&this.second(this.routerKey)}},{key:"goForward",value:function(){"middle"===this.nextVisitedPage?this.second(this.nextRouterKey):"table"===this.nextVisitedPage&&(document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.showTableView(this.nextTabledataUniqueId,this.dblClkFired))}},{key:"loadTabledata",value:function(e){if(this.deviceDatasUpdated=[],!e)if(this.accessPointId){this.deviceDatasUpdated=[];for(var t=0;t<this.deviceDatas.length;t++)this.deviceDatas[t].key1===this.accessPointId&&this.deviceDatasUpdated.push(this.deviceDatas[t])}else"All"==this.deviceDatas[0].type?(this.deviceDatas.shift(),this.deviceDatasUpdated=this.deviceDatas):this.deviceDatasUpdated=this.deviceDatas}},{key:"loadTopologyDataByType",value:function(e){this.tplgyType=e,this.deviceDatasUpdated=[];for(var t=0;t<this.deviceDatas.length;t++)this.deviceDatas[t].deviceType===e&&"All"!=this.deviceDatas[t].deviceType&&this.deviceDatasUpdated.push(this.deviceDatas[t])}},{key:"loadTopologydata",value:function(){if(event.stopImmediatePropagation(),this.hideDDMenu(),this.topologyView=!0,this.tableView=!1,this.deviceDatasUpdated=[],this.topologyData={phy:[],legacy:[],clientWifi:[]},this.deviceDatas.length){for(var e=0;e<this.deviceDatas.length;e++)"phy"===this.deviceDatas[e].deviceType?this.topologyData.phy.push(this.deviceDatas[e]):"legacy"===this.deviceDatas[e].deviceType?this.topologyData.legacy.push(this.deviceDatas[e]):this.topologyData.clientWifi.push(this.deviceDatas[e]);this.loadTopologyDataByType("phy")}this.VisitedPage=this.currentPage,document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="block",this.backBtnDisabled=!1}},{key:"filterByLegacyType",value:function(e){this.legacyChecked=!!e.target.checked,this.filterTableData()}},{key:"filterByPhyType",value:function(e){this.phyChecked=!!e.target.checked,this.filterTableData()}},{key:"filterTableData",value:function(){if(this.deviceDatasUpdated=this.deviceDatas,this.legacyChecked||this.phyChecked){this.deviceDatasUpdated=[];for(var e=0;e<this.deviceDatas.length;e++)("PASS"!==this.deviceDatas[e]["legacy-device-test-result"]&&this.legacyChecked||"PASS"!==this.deviceDatas[e]["signal-strength-test-result"]&&this.phyChecked||"PASS"!==this.deviceDatas[e]["phy-rate-test-result"]&&this.phyChecked)&&this.deviceDatasUpdated.push(this.deviceDatas[e])}this.setCustomFilterInTable()}},{key:"filterTableSuccessData",value:function(){this.deviceDatasUpdated=[];for(var e=0;e<this.deviceDatas.length;e++)"PASS"===this.deviceDatas[e]["legacy-device-test-result"]&&"PASS"===this.deviceDatas[e]["signal-strength-test-result"]&&this.deviceDatasUpdated.push(this.deviceDatas[e]);this.setCustomFilterInTable()}},{key:"showTableView",value:function(e,t){event.stopImmediatePropagation(),this.topologyView=!1,this.tableView=!0,this.currentPage="table",this.deviceDatasUpdated=this.deviceDatasUpdated.filter(function(e){return"All"!==e["client-type"]}),this.VisitedPage=t?"main":"middle",this.nextVisitedPage="table",this.nextTabledataUniqueId=e,document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="block",this.backBtnDisabled=!1}},{key:"openMenu",value:function(){event.stopImmediatePropagation(),document.getElementById("myDropdown").classList.toggle("show")}},{key:"play",value:function(){return!0}},{key:"getData",value:function(){var e=this;this.routerMac||(this.routerMac="01:00:00:00:00:01"),this.spinner.show();"http://52.12.71.176:8080/topology/landing/".concat(this.routerMac);this.orgId=this.ssoAuthService.getOrgId(),this.serialNo=this.ssoAuthService.getSerialNo(),this.http.get("assets/data/rg.json").subscribe(function(t){var i,a,s,n,r,o;e.spinner.hide();var l=[],c=[],d=e.accessPointImages,u={text:"MAC : ".concat(null===(a=null===(i=null==t?void 0:t.landing)||void 0===i?void 0:i.uplink)||void 0===a?void 0:a.mac," \n Download Rate : ").concat(null===(n=null===(s=null==t?void 0:t.landing)||void 0===s?void 0:s.uplink)||void 0===n?void 0:n.downloadRate," Mbps \n Upload Rate : ").concat(null===(o=null===(r=null==t?void 0:t.landing)||void 0===r?void 0:r.uplink)||void 0===o?void 0:o.uploadRate," Mbps "),source:"assets/images/internet.png",key:"internet",accessPointId:""},h={text:"Ethernet ",source:"assets/images/tar.png",key:"ethernet",accessPointId:""};if(t.landing&&t.landing.rg&&t.landing.rg.aps){var g;if(g=t.landing.rg.online?"green":"red",l.push(u),c.push({from:u.key,to:t.landing.rg.mac,color:g,thick:3,routing:W.Link.Normal,name:u.text}),t.landing.rg.text="Ip address : ".concat(t.landing.rg.ip," \n MAC : ").concat(t.landing.rg.mac," \n Version : ").concat(t.landing.rg.version," \n Device : ").concat(t.landing.rg.hostname," \n"),t.landing.rg.source=t.landing.rg.online?"assets/images/alarm-all-clear.png":"assets/images/router-critical-state.png",t.landing.rg.key=t.landing.rg.mac,t.landing.rg.accessPointId="",t.landing.rg.label="".concat(t.landing.rg.hostname),t.landing.rg.failedClientsNote="",t.landing.rg.showBtn=!0,t.landing.rg.customFilterObj={legacyChecked:!1,phyChecked:!1},t.landing.rg["failed-clients"]){for(var p="",m=1,v=0;v<t.landing.rg.clients.length;v++)("FAIL"==t.landing.rg.clients[v]["phy-rate-test-result"]||"FAIL"==t.landing.rg.clients[v]["signal-strength-test-result"]||"FAIL"==t.landing.rg.clients[v]["legacy-device-test-result"])&&("FAIL"==t.landing.rg.clients[v]["legacy-device-test-result"]?(t.landing.rg.customFilterObj.legacyChecked=!0,p+="".concat(m,") ").concat(t.landing.rg.clients[v].hostname," : ").concat(t.landing.rg.clients[v]["client-note"]," \n")):("FAIL"==t.landing.rg.clients[v]["signal-strength-test-result"]||"FAIL"==t.landing.rg.clients[v]["phy-rate-test-result"])&&(t.landing.rg.customFilterObj.phyChecked=!0,p+="".concat(m,") ").concat(t.landing.rg.clients[v].hostname," : ").concat(t.landing.rg.clients[v]["client-note"]," \n")),m++);t.landing.rg.failedClientsNote=p}l.push(t.landing.rg);for(var f=t.landing.rg.aps,D=0;D<f.length;D++)if(f[D]&&f[D]["int-type"]){if(f[D].text="Ip address : ".concat(f[D].ip,"\n MAC : ").concat(f[D].mac," \n Version : ").concat(f[D].version," \n Device : ").concat(f[D].hostname," \n Note : ").concat(f[D]["ap-tech-note"]," \n"),"green"===f[D]["ap-color"]&&(f[D].source=d[f[D]["ap-color"]]?d[f[D]["ap-color"]]:"assets/images/access-point-clear.png"),"green"!==f[D]["ap-color"]){var y=d[f[D]["ap-color"]],b=document.createElement("video");b.setAttribute("preload","auto"),b.setAttribute("type","video/mp4"),b.autoplay=!0,b.setAttribute("width","320"),b.setAttribute("height","240"),b.src=y,b.loop=!0,f[D]["source-video"]=b}if(f[D].key=f[D].mac,f[D].accessPointId="CXNK005A77E9",f[D].label="".concat(f[D].hostname),f[D].showBtn=!0,f[D].failedClientsNote="",f[D].customFilterObj={legacyChecked:!1,phyChecked:!1},f[D]["failed-clients"]){for(var T="",I=1,A=0;A<f[D].clients.length;A++)("FAIL"==f[D].clients[A]["phy-rate-test-result"]||"FAIL"==f[D].clients[A]["signal-strength-test-result"]||"FAIL"==f[D].clients[A]["legacy-device-test-result"])&&("FAIL"==f[D].clients[A]["legacy-device-test-result"]?(f[D].customFilterObj.legacyChecked=!0,T+="".concat(I,") ").concat(f[D].clients[A].hostname,": ").concat(f[D].clients[A]["client-note"]," \n")):("FAIL"==f[D].clients[A]["signal-strength-test-result"]||"FAIL"==f[D].clients[A]["phy-rate-test-result"])&&(f[D].customFilterObj.phyChecked=!0,T+="".concat(I,") ").concat(f[D].clients[A].hostname,": ").concat(f[D].clients[A]["client-note"]," \n")),I++);f[D].failedClientsNote=T}if("UNKNOWN"===f[D]["int-type"]&&(f[D].source="assets/images/cloud.png",f[D]["failed-clients"]=t.landing.rg["failed-clients"],f[D]["passed-clients"]=t.landing.rg["passed-clients"],f[D].failedClientsNote=t.landing.rg.failedClientsNote,f[D].customFilterObj=t.landing.rg.customFilterObj,f[D].label="Unknown",t.landing.rg["failed-clients"]=0,t.landing.rg["passed-clients"]=0,t.landing.rg.showBtn=!1),f[D].backhaul["rx-phy-rate"]=e.bytesToSize(f[D].backhaul["rx-phy-rate"]?f[D].backhaul["rx-phy-rate"]:0),f[D].backhaul["tx-phy-rate"]=e.bytesToSize(f[D].backhaul["tx-phy-rate"]?f[D].backhaul["tx-phy-rate"]:0),l.push(f[D]),"eth"===f[D]["int-type"]?(g="black",l.push(h),c.push({from:t.landing.rg.mac,to:h.key,color:g,thick:3,routing:W.Link.Normal,name:"".concat(t.landing.rg.hostname," to Ethernet")}),c.push({from:h.key,to:f[D].mac,color:g,thick:3,routing:W.Link.Normal,name:"Ethernet to ".concat(f[D].hostname)})):("yellow"===(g=f[D].backhaul["backhaul-color"])&&(g="#e0b34c"),c.push({from:t.landing.rg.mac,to:f[D].mac,color:g,thick:3,routing:W.Link.Normal,name:"Transmit rate: ".concat(f[D].backhaul["tx-phy-rate"]," \n Receive rate: ").concat(f[D].backhaul["rx-phy-rate"])})),f[D].aps.length)for(var x=0;x<f[D].aps.length;x++)if(f[D].aps[x]){if(f[D].aps[x].text="Ip address : ".concat(f[D].aps[x].ip," \n MAC : ").concat(f[D].aps[x].mac," \n Version : ").concat(f[D].aps[x].version," \n Device : ").concat(f[D].aps[x].hostname," \n Note : ").concat(f[D].aps[x]["ap-tech-note"]),"green"===f[D].aps[x]["ap-color"]&&(f[D].aps[x].source=d[f[D].aps[x]["ap-color"]]?d[f[D].aps[x]["ap-color"]]:"assets/images/access-point-clear.png"),"green"!==f[D].aps[x]["ap-color"]){var _=d[f[D].aps[x]["ap-color"]],w=document.createElement("video");w.setAttribute("preload","auto"),w.setAttribute("type","video/mp4"),w.autoplay=!0,w.setAttribute("width","320"),w.setAttribute("height","240"),w.src=_,w.loop=!0,f[D].aps[x]["source-video"]=w}if(f[D].aps[x].key=f[D].aps[x].mac,f[D].aps[x].accessPointId="CXNK005A77E9",f[D].aps[x].backhaul["rx-phy-rate"]=e.bytesToSize(f[D].aps[x].backhaul["rx-phy-rate"]?f[D].aps[x].backhaul["rx-phy-rate"]:0),f[D].aps[x].backhaul["tx-phy-rate"]=e.bytesToSize(f[D].aps[x].backhaul["tx-phy-rate"]?f[D].aps[x].backhaul["tx-phy-rate"]:0),f[D].aps[x].label="".concat(f[D].aps[x].hostname),f[D].aps[x].showBtn=!0,f[D].aps[x].failedClientsNote="",f[D].aps[x].customFilterObj={legacyChecked:!1,phyChecked:!1},f[D].aps[x]["failed-clients"]){for(var S="",C=1,k=0;k<f[D].aps[x].clients.length;k++)("FAIL"==f[D].aps[x].clients[k]["phy-rate-test-result"]||"FAIL"==f[D].aps[x].clients[k]["signal-strength-test-result"]||"FAIL"==f[D].aps[x].clients[k]["legacy-device-test-result"])&&("FAIL"==f[D].aps[x].clients[k]["legacy-device-test-result"]?(f[D].aps[x].customFilterObj.legacyChecked=!0,S+="".concat(C,") ").concat(f[D].aps[x].clients[k].hostname," :  ").concat(f[D].aps[x].clients[k]["client-note"]," \n")):("FAIL"==f[D].aps[x].clients[k]["signal-strength-test-result"]||"FAIL"==f[D].aps[x].clients[k]["phy-rate-test-result"])&&(f[D].aps[x].customFilterObj.phyChecked=!0,S+="".concat(C,") ").concat(f[D].aps[x].clients[k].hostname," :  ").concat(f[D].aps[x].clients[k]["client-note"]," \n")),C++);f[D].aps[x].failedClientsNote=S}if(l.push(f[D].aps[x]),"eth"===f[D].aps[x]["int-type"]?(g="black",l.push(h),c.push({from:f[D].mac,to:h.key,color:"#546caf",thick:3,routing:W.Link.Normal,name:"Internet to ".concat(t.landing.rg.hostname)}),c.push({from:h.key,to:f[D].aps[x].mac,color:g,thick:3,routing:W.Link.Normal,name:"".concat(f[D].hostname," to ").concat(f[D].aps[x].hostname)})):("yellow"===(g=f[D].aps[x].backhaul["backhaul-color"])&&(g="#e0b34c"),c.push({from:f[D].mac,to:f[D].aps[x].mac,color:g,thick:3,routing:W.Link.Normal,name:"Transmit rate: ".concat(f[D].aps[x].backhaul["tx-phy-rate"]," \n Receive rate: ").concat(f[D].aps[x].backhaul["rx-phy-rate"])})),f[D].aps[x].aps.length)for(var E=0;E<f[D].aps[x].aps.length;E++)if(f[D].aps[x].aps[E]){if(f[D].aps[x].aps[E].text="Ip address : ".concat(f[D].aps[x].aps[E].ip," \n MAC : ").concat(f[D].aps[x].aps[E].mac," \n Version : ").concat(f[D].aps[x].aps[E].version," \n Device : ").concat(f[D].aps[x].aps[E].hostname," \n Note : ").concat(f[D].aps[x].aps[E]["ap-tech-note"]),"green"===f[D].aps[x].aps[E]["ap-color"]&&(f[D].aps[x].aps[E].source=d[f[D].aps[x].aps[E]["ap-color"]]?d[f[D].aps[x].aps[E]["ap-color"]]:"assets/images/access-point-clear.png"),"green"!==f[D].aps[x].aps[E]["ap-color"]){var M=d[f[D].aps[x].aps[E]["ap-color"]],O=document.createElement("video");O.setAttribute("preload","auto"),O.setAttribute("type","video/mp4"),O.autoplay=!0,O.setAttribute("width","320"),O.setAttribute("height","240"),O.src=M,O.loop=!0,f[D].aps[x].aps[E]["source-video"]=O}if(f[D].aps[x].aps[E].key=f[D].aps[x].aps[E].mac,f[D].aps[x].aps[E].accessPointId="CXNK00207B91",f[D].aps[x].aps[E].backhaul["rx-phy-rate"]=e.bytesToSize(f[D].aps[x].aps[E].backhaul["rx-phy-rate"]?f[D].aps[x].aps[E].backhaul["rx-phy-rate"]:0),f[D].aps[x].aps[E].backhaul["tx-phy-rate"]=e.bytesToSize(f[D].aps[x].aps[E].backhaul["tx-phy-rate"]?f[D].aps[x].aps[E].backhaul["tx-phy-rate"]:0),f[D].aps[x].aps[E].label="".concat(f[D].aps[x].aps[E].hostname),f[D].aps[x].aps[E].showBtn=!0,f[D].aps[x].aps[E].failedClientsNote="",f[D].aps[x].aps[E].customFilterObj={legacyChecked:!1,phyChecked:!1},f[D].aps[x].aps[E]["failed-clients"]){for(var N="",P=1,Z=0;Z<f[D].aps[x].aps[E].clients.length;Z++)("FAIL"==f[D].aps[x].aps[E].clients[Z]["phy-rate-test-result"]||"FAIL"==f[D].aps[x].aps[E].clients[Z]["signal-strength-test-result"]||"FAIL"==f[D].aps[x].aps[E].clients[Z]["legacy-device-test-result"])&&("FAIL"==f[D].aps[x].aps[E].clients[Z]["legacy-device-test-result"]?(f[D].aps[x].aps[E].customFilterObj.legacyChecked=!0,N+="".concat(P,") ").concat(f[D].aps[x].aps[E].clients[Z].hostname," : ").concat(f[D].aps[x].aps[E].clients[Z]["client-note"]," \n")):("FAIL"==f[D].aps[x].aps[E].clients[Z]["signal-strength-test-result"]||"FAIL"==f[D].aps[x].aps[E].clients[Z]["phy-rate-test-result"])&&(f[D].aps[x].aps[E].customFilterObj.phyChecked=!0,N+="".concat(P,") ").concat(f[D].aps[x].aps[E].clients[Z].hostname," : ").concat(f[D].aps[x].aps[E].clients[Z]["client-note"]," \n")),P++);f[D].aps[x].aps[E].failedClientsNote=N}l.push(f[D].aps[x].aps[E]),"eth"===f[D].aps[x].aps[E]["int-type"]?(g="black",l.push(h),c.push({from:f[D].aps[x].mac,to:h.key,color:"#546caf",thick:3,routing:W.Link.Normal,name:"Internet to ".concat(t.landing.rg.hostname)}),c.push({from:h.key,to:f[D].aps[x].aps[E].mac,color:g,thick:3,routing:W.Link.Normal,name:"".concat(f[D].aps[x].hostname," to ").concat(f[D].aps[x].aps[E].hostname)})):("yellow"===(g=f[D].aps[x].aps[E].backhaul["backhaul-color"])&&(g="#e0b34c"),c.push({from:f[D].aps[x].mac,to:f[D].aps[x].aps[E].mac,color:g,thick:3,routing:W.Link.Normal,name:"Transmit rate: ".concat(f[D].aps[x].aps[E].backhaul["tx-phy-rate"]," \n Receive rate: ").concat(f[D].aps[x].aps[E].backhaul["rx-phy-rate"])}))}}}e.nodeDataArray=l,e.linkDataArray=c,e.loadfirst()}},function(e){})}},{key:"switchView",value:function(){if(event.stopImmediatePropagation(),this.topologyView)return this.deviceDatasUpdated=this.deviceDatas,this.showTableView("","main"==this.currentPage),this.phyChecked=!0,this.legacyChecked=!0,void this.filterTableData();this.tableView&&this.goBack()}},{key:"onUserRowSelect",value:function(e){this.deviceDatasUpdated=[],this.deviceDatasUpdated.push(e.data),this.clientData=e.data,this.getClientData(e.data.mac)}},{key:"getAPData",value:function(e,t,i){var a=this,s={0:"assets/images/no-wifi-signal.png",1:"assets/images/low-wifi-signal.png",2:"assets/images/all-green-wifi.png",3:"assets/images/all-green-wifi.png"};this.spinner.show(),this.apInformtion="","UNKNOWN"==this.lastDeviceClickData["int-type"]&&(e=this.routerMac),this.http.get("http://52.12.71.176:8080/topology/ap_view/".concat(e)).subscribe(function(n){if(a.spinner.hide(),n["ap-view"]){a.apData=n["ap-view"].ap;var r=[],o=[],l=a.accessPointImages;a.ethOrAPType=a.lastDeviceClickData["int-type"];var c="",d="",u=l[a.apData["ap-color"]];a.ethOrAPType?"eth"===a.ethOrAPType?(a.ethOrAPImageUrl="assets/images/tar.png",d="Ethernet",c="ethernet"):"UNKNOWN"===a.ethOrAPType?(a.ethOrAPImageUrl="assets/images/alarm-all-clear.png",d="Router",c="router",u="assets/images/cloud.png"):(a.ethOrAPImageUrl="assets/images/access-point-clear.png",d="AP",c="ap"):(a.ethOrAPImageUrl="assets/images/internet.png",d="Internet",c="internet",u=a.lastDeviceClickData.online?"assets/images/alarm-all-clear.png":"assets/images/router-critical-state.png");var h,g={text:d,source:a.ethOrAPImageUrl,key:c};if(h=a.apData["ap-color"],a.apLinkTooolTip=a.apData.backhaul["tx-phy-rate"]?"Transmit Rate ".concat(a.apData.backhaul["tx-phy-rate"]," \n Receive Rate ").concat(a.apData.backhaul["rx-phy-rate"]):"Ethernet to ".concat(a.apData.hostname),r.push(g),o.push({from:g.key,to:a.apData.mac,color:h,thick:"UNKNOWN"==a.lastDeviceClickData["int-type"]?0:3,routing:W.Link.Normal,name:a.apLinkTooolTip}),a.apData.text="Ip address : ".concat(a.apData.ip," \n MAC : ").concat(a.apData.mac," \n Version : ").concat(a.apData.version," \n Device : ").concat(a.apData.hostname," \n Note : ").concat(a.apData["ap-tech-note"]," \n "),a.apData.source=u,"green"!==a.apData["ap-color"]&&"ap"==c){var p=l[a.apData["ap-color"]],m=document.createElement("video");m.autoplay=!0,m.setAttribute("width","320"),m.setAttribute("height","240"),m.src=p,m.loop=!0,m.setAttribute("preload","auto"),a.apData["source-video"]=m}a.apData.key=a.apData.mac,a.apData.label="UNKNOWN"==a.lastDeviceClickData["int-type"]?"Unknown":"".concat(a.apData.hostname),r.push(a.apData);var v=n["ap-view"].clients;a.ethOrAPType=n["ap-view"].ap["int-type"],a.ethOrAPImageUrl="eth"===a.ethOrAPType?"assets/images/tar.png":"assets/images/access-point-clear.png",a.apImageUrl=l[n["ap-view"].ap["ap-color"]],a.apData=n["ap-view"].ap,a.apToolTip="Ip address : ".concat(a.apData.ip," \n MAC : ").concat(a.apData.mac," \n Version : ").concat(a.apData.version," \n Device : ").concat(a.apData.hostname," \n Note : ").concat(a.apData["ap-tech-note"]," \n "),a.apLinkTooolTip=a.apData.backhaul["tx-phy-rate"]?"Transmit Rate ".concat(a.apData.backhaul["tx-phy-rate"]," \n Receive Rate ").concat(a.apData.backhaul["rx-phy-rate"]):"Ethernet to ".concat(a.apData.hostname),a.ssid=n["ap-view"].ap["radio-info"][0].ssid,a.radio=n["ap-view"].ap["radio-info"][0]["freq-band"]+"GHZ",a.deviceDatasUpdated=[];for(var f=0;f<v.length;f++)!v[f]||(v[f].radio=a.radio,v[f].accessPoint=v[f]["ap-hostname"]?v[f]["ap-hostname"]:v[f]["access-point-hostname"],v[f].image_url="far"==v[f]["client-distance"]&&a.imagesObj[v[f]["client-type"]+"-red"]?a.imagesObj[v[f]["client-type"]+"-red"]:a.imagesObj[v[f]["client-type"]],v[f].siganl_image={url:s[v[f]["signal-bars"]]?s[v[f]["signal-bars"]]:"assets/images/all-green-wifi.png","signal-strength":v[f]["signal-strength"]+" dB"},v[f]["signal-strength"]=v[f]["signal-strength"]+"dB",a.deviceDatasUpdated.push(v[f]),"eth"===v[f]["intf-type"]&&(v[f].isClient=!0,v[f].text="Ip address : ".concat(v[f]["ip-address"]," \n MAC : ").concat(v[f].mac," \n Device : ").concat(v[f].hostname," \n Note : ").concat(v[f]["client-note"]," \n "),v[f].source=v[f].image_url,v[f].key=v[f].mac,v[f].label="".concat(v[f].hostname," - ").concat(v[f]["client-type"]),r.push(v[f]),o.push({from:a.apData.key,to:v[f].mac,color:"black",thick:3,routing:W.Link.Normal,name:"Ethernet to ".concat(v[f].hostname)})));a.apNodeData=r,a.apLinkData=o,a.deviceDatasUpdated=a.deviceDatasUpdated.sort(a.customSort),a.deviceDatas=a.deviceDatasUpdated;for(var D={},y=[{"client-type":"All"}],b=0;b<a.deviceDatas.length;b++)D[a.deviceDatas[b]["client-type"]]||(D[a.deviceDatas[b]["client-type"]]=!0,y.push(a.deviceDatas[b]));a.uniqueDevices=y;for(var T={},I=[{hostname:"All"}],A=0;A<a.deviceDatas.length;A++)T[a.deviceDatas[A].hostname]||(T[a.deviceDatas[A].hostname]=!0,I.push(a.deviceDatas[A]));a.uniqueHostnames=I,i&&a.showTableView("",!0),t&&(a.second(e,!0),a.rangeDeviceFilter(0)),a.deviceDatas&&"All"==a.deviceDatas[0].type?(a.deviceDatas.shift(),a.deviceDatasUpdated=a.deviceDatas):a.deviceDatasUpdated=a.deviceDatas,a.filterEnabled?(a.filterEnabled=!1,a.filterTableData()):a.successFilterEnabled?(a.successFilterEnabled=!1,a.legacyChecked=!1,a.phyChecked=!1,a.filterTableSuccessData()):(a.legacyChecked=!0,a.phyChecked=!0,a.filterTableData())}else a.goBack()})}},{key:"getClientData",value:function(e,t,i){var a=this,s={y_Client_Score:"Client Score","y_Downloaded MBytes":"Downloaded MBytes","y_Uploaded MBytes":"Uploaded MBytes","y_Signal Strength dBm":"Signal Strength dBm",time_value:"Time"};this.spinner.show(),this.http.get("http://52.12.71.176:8080/topology/client/".concat(e)).subscribe(function(e){a.spinner.hide();var t=e.clients.pm_data,i=t.length;if(i){a.twoHrsData=[];for(var n=0;n<i;n++)if("time_value"===t[n].series_name){a.twoHrsCategory=[];for(var r=t[n].series_data.split(","),o=0;o<r.length;o++)a.twoHrsCategory.push({label:r[o]})}else{for(var l=t[n].series_data.split(","),c=[],d=0;d<l.length;d++)c.push({value:l[d]});a.twoHrsData.push({seriesname:s[t[n].series_name]?s[t[n].series_name]:t[n].series_name,data:c})}a.dataForClientScoreChart=[],a.dataForSignalStrengthChart=[],a.dataForUploadDownLoadChart=[];for(var u=0;u<a.twoHrsData.length;u++)"Client Score"===a.twoHrsData[u].seriesname?a.dataForClientScoreChart.push(a.twoHrsData[u]):"Signal Strength dBm"===a.twoHrsData[u].seriesname?a.dataForSignalStrengthChart.push(a.twoHrsData[u]):a.dataForUploadDownLoadChart.push(a.twoHrsData[u]);a.data={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:a.twoHrsCategory}],dataset:a.dataForUploadDownLoadChart},a.dataSource=a.data,a.dataSource1={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:a.twoHrsCategory}],dataset:a.dataForClientScoreChart},a.dataSource2={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:a.twoHrsCategory}],dataset:a.dataForSignalStrengthChart},a.showChart=!0}})}},{key:"getAllClientsData",value:function(e,t,i){var a=this,s={0:"assets/images/no-wifi-signal.png",1:"assets/images/low-wifi-signal.png",2:"assets/images/all-green-wifi.png",3:"assets/images/all-green-wifi.png"};this.spinner.show(),this.http.get("http://52.12.71.176:8080/topology/subscriber_clients/".concat(e)).subscribe(function(n){a.spinner.hide();var r=n.clients;a.legacyChecked=!1,a.phyChecked=!1,a.deviceDatasUpdated=[];for(var o=0;o<r.length;o++)!r[o]||(r[o].ssid=a.ssid?a.ssid:"-",r[o].radio=a.radio?a.radio:"-",r[o].accessPoint=r[o]["ap-hostname"]?r[o]["ap-hostname"]:r[o]["access-point-hostname"],r[o].image_url=r[o]["signal-bars"]<2?a.imagesObj[r[o]["client-type"]+"-red"]?a.imagesObj[r[o]["client-type"]+"-red"]:a.imagesObj["iot-red"]:a.imagesObj[r[o]["client-type"]],r[o].siganl_image={url:s[r[o]["signal-bars"]]?s[r[o]["signal-bars"]]:"assets/images/all-green-wifi.png","signal-strength":r[o]["signal-strength"]+" dB"},r[o]["signal-strength"]=r[o]["signal-strength"]+"dB",a.deviceDatasUpdated.push(r[o]));a.deviceDatasUpdated=a.deviceDatasUpdated.sort(a.customSort),a.deviceDatas=a.deviceDatasUpdated,i&&a.showTableView("",!0),t&&(a.second(e,!0),a.rangeDeviceFilter(0))})}},{key:"setCustomFilterInTable",value:function(){for(var e={},t=[],i=0;i<this.deviceDatasUpdated.length;i++)e[this.deviceDatasUpdated[i].hostname]||(e[this.deviceDatasUpdated[i].hostname]=!0,t.push({value:this.deviceDatasUpdated[i].hostname,title:this.deviceDatasUpdated[i].hostname}));this.hostnameFilterData=t,this.settings.columns.hostname.filter.config.list=t,this.settings=Object.assign({},this.settings)}},{key:"bytesToSize",value:function(e){return e+" Bytes"}},{key:"ngOnDestroy",value:function(){this.diagramRedrawInt&&clearInterval(this.diagramRedrawInt)}},{key:"responseFromStatus",value:function(e){var t=this;this.loading=!1;var i=this.service.getSubscriberTabInfoData()?this.service.getSubscriberTabInfoData():"";if(i){var a=null==i?void 0:i.allIssues;this.issueData=null==a?void 0:a.filter(function(e){return t.codelist.indexOf(e.hasOwnProperty("code")?e.code.toUpperCase():e.Code.toUpperCase())>-1}),this.issueData=this.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize()}}},{key:"initalize",value:function(){for(var e=0;e<this.totalissues;e++)this.isIconClicked[e]=!1,this.primaryActionButton[e]=!1,this.Description[e]=" ",this.reason[e]=" ",this.severity[e]=" "}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(v.Q),d.Y36(u.s),d.Y36(G.eN),d.Y36(c.gz),d.Y36(Y.t2),d.Y36(h.t6),d.Y36(m.F))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-topology"]],decls:27,vars:5,consts:[[3,"issues","responseFromIssuse","apiCallDone"],[1,"row"],[1,"col-12"],["class","loader load",4,"ngIf"],[1,"m-2"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/support/overview/issues","data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"Click"],[1,"big-text"],["routerLink","/support/overview/topology","data-toggle","tab","routerLinkActive","active",1,"nav-link","small"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],[1,"col-md-12"],["id","myDiagramDiv1",2,"width","100%","height","800px"],[1,"col-sm-6"],["id","myDiagramDiv2",2,"width","100%","height","300px"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(e,t){1&e&&(d.TgZ(0,"app-subscriber-menu",0),d.NdJ("apiCallDone",function(e){return t.responseFromStatus(e)}),d.qZA(),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.YNc(3,V,5,1,"div",3),d.TgZ(4,"section",4),d.TgZ(5,"div",1),d.TgZ(6,"div",5),d.TgZ(7,"ul",6),d.TgZ(8,"li",7),d.TgZ(9,"a",8),d.NdJ("Click",function(e){return e.preventDefault()}),d.TgZ(10,"span",9),d._uU(11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"li",7),d.TgZ(13,"a",10),d.TgZ(14,"span",9),d._uU(15),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(16,"div",11),d.TgZ(17,"div",12),d._UZ(18,"div",13),d.qZA(),d.TgZ(19,"div",14),d._UZ(20,"div",13),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",1),d.TgZ(22,"div",15),d._UZ(23,"div",16),d.qZA(),d.qZA(),d.TgZ(24,"div",1),d.TgZ(25,"div",17),d._UZ(26,"div",18),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.Q6J("issues",t.issueData)("responseFromIssuse",t.apiCallDone),d.xp6(3),d.Q6J("ngIf",t.loading),d.xp6(8),d.Oqu(t.language.Issues),d.xp6(4),d.Oqu(t.language.Topology))},directives:[b.e,l.O5,c.yS,c.Od],styles:[""]}),e}(),z=n(65744),Q=n(64762),j=n(79765),K=n(54395),X=n(49342),$=n(91703),ee=["APDiagram"],te=["searchValue"],ie=["issueBox"];function ae(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",15),d.TgZ(1,"span",16),d._UZ(2,"img",17),d.qZA(),d.TgZ(3,"button",18),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",19),d.qZA()}if(2&e){var a=d.oxw();d.xp6(5),d.Q6J("innerHtml",a.errorInfo,d.oJD)}}function se(e,t){if(1&e&&(d.TgZ(0,"li",20),d.TgZ(1,"a",21),d.TgZ(2,"span",7),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(1),d.MGl("routerLink","/",i.MODULE,"/overview/topology"),d.xp6(2),d.Oqu(i.language.Topology)}}function ne(e,t){if(1&e&&(d.TgZ(0,"li",22),d.TgZ(1,"a",21),d.TgZ(2,"span",7),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(1),d.MGl("routerLink","/",i.MODULE,"/overview/quality-of-experience"),d.xp6(2),d.Oqu(i.language["Quality of Experience"])}}function re(e,t){if(1&e&&(d.TgZ(0,"div",52),d.TgZ(1,"div",53),d.TgZ(2,"div",54),d.TgZ(3,"span",55),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw(3);d.xp6(4),d.Oqu(i.language.Loading)}}function oe(e,t){if(1&e&&(d.TgZ(0,"div",49,50),d.YNc(2,re,5,1,"div",51),d.qZA()),2&e){var i=d.oxw(2);d.xp6(2),d.Q6J("ngIf",i.loading)}}function le(e,t){if(1&e&&(d.TgZ(0,"div",56),d._uU(1),d.qZA()),2&e){var i=d.oxw(2);d.xp6(1),d.Oqu(i.language.nodata)}}function ce(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"p",64),d.TgZ(2,"span",65),d._uU(3),d.qZA(),d._uU(4," - "),d.TgZ(5,"span"),d._uU(6),d.qZA(),d.qZA(),d.qZA()),2&e){var i=t.$implicit;d.xp6(3),d.Oqu(i.name),d.xp6(3),d.Oqu(i.note)}}function de(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"p"),d.TgZ(2,"span",65),d._uU(3),d.qZA(),d._uU(4," - "),d.TgZ(5,"span"),d._uU(6),d.qZA(),d.qZA(),d.qZA()),2&e){var i=t.$implicit;d.xp6(3),d.Oqu(i.name),d.xp6(3),d.Oqu(i.note)}}function ue(e,t){if(1&e&&(d.TgZ(0,"div",61),d.YNc(1,de,7,2,"div",62),d.qZA()),2&e){var i=d.oxw(4);d.xp6(1),d.Q6J("ngForOf",i.clientArr)}}function he(e,t){if(1&e&&(d.TgZ(0,"div",59),d.TgZ(1,"p",60),d._uU(2),d.qZA(),d.TgZ(3,"div",61),d.YNc(4,ce,7,2,"div",62),d.qZA(),d.YNc(5,ue,2,1,"div",63),d.qZA()),2&e){var i=d.oxw(3);d.xp6(2),d.hij("",i.language.issue,":"),d.xp6(2),d.Q6J("ngForOf",i.rgArr),d.xp6(1),d.Q6J("ngIf",i.selectedAPValue)}}function ge(e,t){if(1&e&&(d.TgZ(0,"div",null,57),d.YNc(2,he,6,3,"div",58),d.qZA()),2&e){var i=d.oxw(2);d.xp6(2),d.Q6J("ngIf",i.rgflag)}}var pe=function(){return{standalone:!0}};function me(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",1),d.TgZ(1,"div",23),d.TgZ(2,"div",24),d.TgZ(3,"div",25),d.TgZ(4,"label",26),d.TgZ(5,"span",27),d.NdJ("click",function(){return d.CHM(i),d.oxw().refreshClick()}),d._UZ(6,"i",28),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",29),d.TgZ(8,"div",30),d.TgZ(9,"div",31),d.TgZ(10,"input",32,33),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw().searchText=e})("ngModelChange",function(){return d.CHM(i),d.oxw().searchDiagram()}),d.qZA(),d.TgZ(12,"div",34),d.TgZ(13,"img",35),d.NdJ("click",function(){return d.CHM(i),d.oxw().searchDiagram()}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"label",36),d.TgZ(15,"input",37),d.NdJ("change",function(){return d.CHM(i),d.oxw().accessPoint()}),d.qZA(),d.TgZ(16,"span"),d._UZ(17,"small"),d.qZA(),d._uU(18),d.qZA(),d.TgZ(19,"div",38),d.TgZ(20,"div",39),d.TgZ(21,"span",40),d.NdJ("click",function(e){return d.CHM(i),d.oxw().changeScaleDiagram(e,"decrease")}),d._UZ(22,"img",41),d.qZA(),d.TgZ(23,"span",42),d.TgZ(24,"ng-select",43),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw().zoomScale=e})("ngModelChange",function(e){return d.CHM(i),d.oxw().changeScaleDiagram(e,"dropDown")}),d.qZA(),d.qZA(),d.TgZ(25,"span",44),d.NdJ("click",function(e){return d.CHM(i),d.oxw().changeScaleDiagram(e,"increase")}),d._UZ(26,"img",45),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(27,oe,3,1,"div",46),d.YNc(28,le,2,1,"div",47),d.YNc(29,ge,3,1,"div",48),d.qZA(),d.qZA()}if(2&e){var a=d.oxw();d.xp6(10),d.s9C("placeholder",a.language.Topology_Search),d.Q6J("ngModel",a.searchText),d.xp6(8),d.hij(" ",a.language.Show_Connectivity," "),d.xp6(6),d.Q6J("ngModel",a.zoomScale)("items",a.zoomFactorList)("clearable",!1)("searchable",!1)("ngModelOptions",d.DdM(11,pe)),d.xp6(3),d.Q6J("ngIf",!a.noData),d.xp6(1),d.Q6J("ngIf",a.noData),d.xp6(1),d.Q6J("ngIf",(null==a.rgArr?null:a.rgArr.length)>0||(null==a.clientArr?null:a.clientArr.length)>0)}}var ve=function(){var e=function(){function e(t,i,a,n,r,o,l,c,d,u,h,g,m){s(this,e),this.translateService=t,this.http=i,this.issuseservice=a,this.route=n,this.spinner=r,this.ssoAuthService=o,this.dataService=l,this.router=c,this.changeDetector=d,this.commonOrgService=u,this.api=h,this.healthService=g,this.titleService=m,this.expandedNodes=[],this.nodeLinkColor={green:"#c8d652",red:"#c7a9a2",yellow:"#ffeb3b"},this.nodeColor={green:"#f6f8e9",red:"#f6e6e8",yellow:"#fff17a8c"},this.searchSubject=new j.xQ,this.locationFixed=!1,this.MODULE="support",this.serialNumber=" ",this.isIconClicked=[],this.primaryActionButton=[],this.Description=[],this.severity=[],this.reason=[],this.apiCallDone=!1,this.loading=!1,this.lastDeviceClickData={},this.uniqueDevices=[],this.uniqueHostnames=[],this.clientData={},this.twoHrsCategory=[],this.twoHrsData=[],this.sixHrsData=[],this.oneDayData=[],this.width="100%",this.height=400,this.type="msline",this.title="app",this.apInformtion="",this.VisitedPage="",this.routerKey="",this.nextVisitedPage="",this.nextRouterKey="",this.nextTabledataUniqueId="",this.currentPage="main",this.dblClkFired=!1,this.$=W.GraphObject.make,this.apData={},this.apImageUrl="",this.apNodeData=[],this.apLinkData=[],this.topologyData={phy:[],legacy:[],clientWifi:[]},this.topologyView=!0,this.tplgyType="",this.tableView=!1,this.legacyChecked=!1,this.phyChecked=!1,this.signalChecked=!1,this.filterEnabled=!1,this.successFilterEnabled=!1,this.deviceDatas=[],this.deviceDatasUpdated=[],this.backBtnDisabled=!0,this.accessPointId="",this.nodeDataArray=[],this.linkDataArray=[],this.hostnameFilterData=[],this.topRow=!0,this.onClickClients="",this.clientArr=[],this.rgArr=[],this.clientDeviceSSID=!1,this.rgflag=!1,this.rgDetails=[],this.rgModel="",this.raManufacture="",this.ipv4="",this.ipv6="",this.pageNumber=1,this.pageSize=10,this.makemodel=[],this.zoomFactorList=[{factor:"25%",value:.25},{factor:"50%",value:.5},{factor:"75%",value:.75},{factor:"100%",value:1},{factor:"125%",value:1.25},{factor:"150%",value:1.5},{factor:"175%",value:1.75},{factor:"200%",value:2}],this.zoomScale=1,this.images=["assets/images/tv-all-clear.png","assets/images/printer-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png","assets/images/phone-all-clear-state.png","assets/images/camera-clear.png","assets/images/audiobox-clear.png","assets/images/gaming-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png"],this.clientDevicesImages=["assets/images/deviceicons/question_mark_grey_icon.png","assets/images/deviceicons/phone_grey_icon.png","assets/images/deviceicons/computer_grey_icon.png","assets/images/deviceicons/console_grey_icon.png","assets/images/deviceicons/media_player_grey_icon.png","assets/images/deviceicons/printer_grey_icon.png","assets/images/deviceicons/television_grey_icon.png","assets/images/deviceicons/network_icon_grey.png","assets/images/deviceicons/camera_grey_icon.png","assets/images/deviceicons/tablet_grey_icon.png","assets/images/deviceicons/voip_grey.png","assets/images/deviceicons/iot_grey.png","assets/images/deviceicons/ic_modem-24px.svg","assets/images/deviceicons/question_mark_grey_icon.png"],this.imagesObj={Television:"assets/images/tv-all-clear.png",Tablet:"assets/images/ipad-all-clear.png",Phone:"assets/images/phone-all-clear-state.png",Camera:"assets/images/camera-clear.png","Media Player":"assets/images/audiobox-clear.png",Console:"assets/images/gaming-clear.png","Wi-Fi IoT":"assets/images/iot.png","Wi Fi IoT":"assets/images/iot.png","Wifi IoT":"assets/images/iot.png",Computer:"assets/images/computer.png",Printer:"assets/images/printer-clear.png",Network:"assets/images/network.png",Voip:"assets/images/voip.png",Fridge:"assets/images/iot.png","Television-red":"assets/images/tv-critical-issues.png","Tablet-red":"assets/images/ipad-critical.png","Phone-red":"assets/images/phone-critical-state.png","Camera-red":"assets/images/camera-critical.png","Media Player-red":"assets/images/audiobox-critical.png","Console-red":"assets/images/gaming-critical.png","Wi-Fi IoT-red":"assets/images/iot-critical.png","Wi Fi IoT-red":"assets/images/iot-critical.png","Wifi IoT-red":"assets/images/iot-critical.png","Computer-red":"assets/images/computer-critical.png","Printer-red":"assets/images/printer-critical.png","Network-red":"assets/images/network-critical.png","Voip-red":"assets/images/voip-critical.png","Fridge-red":"assets/images/iot-critical.png","iot-red":"assets/images/iot-critical.png","wireless-excellent":"assets/img/wireless-excellent.svg","wireless-good":"assets/img/wireless-good.svg","wireless-toofar":"assets/img/wireless-toofar.svg","wireless-tooclose":"assets/img/wireless-tooclose.svg","wireless-unavailable":"assets/img/wireless-unavailable.svg"},this.accessPointImages={yellow:"assets/images/myRouter_yellow.svg",green:"assets/images/myRouter.svg",red:"assets/images/myRouter_red.svg"},this.ssid="",this.radio="",this.ethOrAPType="",this.ethOrAPImageUrl="",this.accesspoint=!1,this.noData=!1,this.noRG=!1,this.innerChildsNodes=[],this.isDevEnv=!1,this.ont_serialNo="",this.issue_reason="",this.aps_issue="",this.client_issue="",this.ont_issue="",this.isAPSNodeClicked=!1,this.issueCode="",this.issueType="",this.issueName="",this.bhissueCode="",this.bhissueType="",this.bhissueName="",this.isClientNodeClicked=!1,this.backhaul_issue="",this.isBHNodeClicked=!1,this.isrgWithIssue=!1,this.isapWithIssue=!1,this.scope={qoeRead:!1},this.showTopologyTab=!1,this.showQoeTab=!1,W.Diagram.licenseKey=p.N.GO_JS_KEY,W.Shape.defineFigureGenerator("Badge",function(e,t,i){var a=i/2,s=new W.Geometry;return s.add(new W.PathFigure(0,a).add(new W.PathSegment(W.PathSegment.Arc,90,180,a,a,a,a)).add(new W.PathSegment(W.PathSegment.Line,t-a,0)).add(new W.PathSegment(W.PathSegment.Arc,270,180,t-a,a,a,a)).add(new W.PathSegment(W.PathSegment.Line,a,i).close())),s.spot1=new W.Spot(0,0,.1*a,.1*a),s.spot2=new W.Spot(1,1,-.1*a,0),s}),this.MODULE=this.router.url.indexOf("/support/")>-1?"support":"cco"}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.isDevEnv=this.ssoAuthService.API.includes("dev"),this.commandIQDataSubs=this.ssoAuthService.commandIQData.subscribe(function(t){e.scope.qoeRead=!0}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.Topology," - ").concat(e.language.Overview," - ").concat(e.language.Support," - ").concat(e.language["Calix Cloud"])),e.rgArr=[],e.getData()}),this.titleService.setTitle("".concat(this.language.Topology," - ").concat(this.language.Overview," - ").concat(this.language.Support," - ").concat(this.language["Calix Cloud"])),this.backBtnDisabled=!0,this.route.queryParams.subscribe(function(t){e.routerMac=t.routerMac,e.getData(),e.getAllClientsData(e.routerMac)}),this.dataService.showTopology.subscribe(function(t){e.showTopologyTab=t}),setTimeout(function(){e.qoeSubscribed=e.dataService.showQoe.subscribe(function(t){e.showQoeTab=t})},100)}},{key:"ngAfterViewInit",value:function(){}},{key:"getData",value:function(){var e=this;this.loading=!0;var t=JSON.parse(this.ssoAuthService.getSerialNo()),i=this.ssoAuthService.getCSCSubscriberId(),a=[],s=JSON.parse(sessionStorage.getItem("".concat(this.ssoAuthService.getTabId(),"calix.deviceData"))),n="";t.forEach(function(t){if(t.serialNumber){var i={};i.serialNumber=t.serialNumber,i.opMode=t.opMode,s.forEach(function(t){if(t.hasOwnProperty("ont")){e.ont_serialNo=t.serialNumber;var a=t.ont;a.uuid,n=t.serialNumber,i.isOnt=!0,i.ontSerialNumber=a.serialNo,i.vendorId=a.vendorId}}),a.push(i)}});var r={subscriberId:i,devices:a},o=+localStorage.getItem("calix.org_id");this.issuseservice.topologyValue(o,r).subscribe(function(t){if(e.swVersion=parseFloat(t.landing.rg.version),Object.keys(t.landing.rg).length>0&&t.landing.rg.aps&&0==t.landing.rg.aps.length)return e.loading=!1,void(e.noData=!0);if(t.landing.ont&&e.ont_serialNo!=t.landing.rg.sn&&("red"==t.landing.ont["ont-color"]||"yellow"==t.landing.ont["ont-color"])){e.rgflag=!0;var i;i=e.ont_serialNo;for(var a=t.landing.ont["ont-issue-list"],s=[],r=a.filter(function(e){return["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)}).map(function(e){return e.serialNumber}),l=(a=a.filter(function(e,t){if(!r.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;s.push(null==e?void 0:e.serialNumber)})).length-1;l>=0;l--)s.includes(a[l].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(a[l].code)&&(a.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:a[l].serialNumber,source:a[l].serialNumber,sourceId:a[l].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),a.splice(l,1));if(e.issueData=a.filter(function(t){var i,a;return e.issueCode.indexOf(t.hasOwnProperty("code")?null===(i=t.code)||void 0===i?void 0:i.toUpperCase():null===(a=t.Code)||void 0===a?void 0:a.toUpperCase())>-1}),e.issueData=e.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),e.issueList=e.issueData,e.totalissues=e.issueList.length,e.initalize(),a.length>0){e.ont_issue="";for(var c=0;c<a.length;c++)e.issueDescription(a[c].code,"ont",i,"")}JSON.stringify(e.rgArr.push({name:i,note:e.ont_issue}))}if("red"==t.landing.rg["rg-color"]||"yellow"==t.landing.rg["rg-color"]){e.rgflag=!0;var d;d=t.landing.rg.hostname?t.landing.rg.hostname:t.landing.rg.sn;for(var u=t.landing.rg["rg-issue-list"],h=[],g=u.filter(function(e){return["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)}).map(function(e){return e.serialNumber}),p=(u=u.filter(function(e,t){if(!g.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;h.push(null==e?void 0:e.serialNumber)})).length-1;p>=0;p--)h.includes(u[p].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(u[p].code)&&(u.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:u[p].serialNumber,source:u[p].serialNumber,sourceId:u[p].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),u.splice(p,1));if(e.issueData=u.filter(function(t){var i,a;return e.issueCode.indexOf(t.hasOwnProperty("code")?null===(i=t.code)||void 0===i?void 0:i.toUpperCase():null===(a=t.Code)||void 0===a?void 0:a.toUpperCase())>-1}),e.issueData=e.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),e.issueList=e.issueData,e.totalissues=e.issueList.length,e.initalize(),u.length>0){e.issue_reason="";for(var m=0;m<u.length;m++)e.issueDescription(u[m].code,"rg",d,"");JSON.stringify(e.rgArr.push({name:d,note:e.issue_reason}))}}var v=new Date,f=new Date(v.getTime()-864e6),D=new Date,y={tenant:"0",granularity:"15min",fsan:n,startTime:"".concat(e.startISODate(f,!1)),endTime:"".concat(e.startISODate(D,!0))},b="";for(var T in y)null==y[T]||"undefined"==y[T]||""==y[T]||(""!=b&&(b+="&"),b+=T+"="+encodeURIComponent(y[T]));var I="";!t.landing.rg.mac&&t.landing.rg.aps&&t.landing.rg.aps.length>0?(I=t.landing.rg.aps[0].sn,e.noRG=!0):t.landing.rg.sn&&(I=t.landing.rg.sn),t.landing.ont?e.healthService.timeseries(b,"ont").subscribe(function(i){if(e.loading=!1,i&&i.length>0)for(var a="",s="",n=!1,r=!1,l=!1,c=!1,d=i.length-1;d>=0;d--)i[d].neOptSignalLvl&&i[d].neOptSignalLvl>-40&&!n&&(e.lightLevel=i[d].neOptSignalLvl.toFixed("2"),n=!0),i[d].rxOptPwr&&i[d].rxOptPwr>-40&&!r&&(e.rxPower=i[d].rxOptPwr.toFixed("2"),r=!0),(i[d].dsBipErr||0==i[d].dsBipErr)&&!l&&(a=a||""!=a?a:i[d].dsBipErr,e.downStream=a.toString(),l=!0),(i[d].usBipErr||0==i[d].usBipErr)&&!c&&(s=s||""!=s?s:i[d].usBipErr,e.upStream=s.toString(),c=!0);e.dataService.performSearch(o,I,1,10).subscribe(function(i){return(0,Q.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.loading=!1,this.rgDetails=i,a=0;a<this.rgDetails.records.length;a++)for(s=0;s<this.rgDetails.records[a].devices.length;s++)this.rgDetails.records[a].devices[s].serialNumber==I&&(this.rgModel=this.rgDetails.records[a].devices[s].modelName,this.raManufacture=this.rgDetails.records[a].devices[s].manufacturer,this.ipv4=this.rgDetails.records[a].devices[s].ipAddress,this.ipv6=this.rgDetails.records[a].devices[s].secondIpAddress),this.makemodel.push({model:this.rgDetails.records[a].devices[s].modelName,manufacture:this.rgDetails.records[a].devices[s].manufacturer,sno:this.rgDetails.records[a].devices[s].serialNumber});this.resValue=t,this.loadInitialDiagram(t);case 3:case"end":return e.stop()}},e,this)}))},function(t){e.pageErrorHandle(t),e.loading=!1})},function(t){e.pageErrorHandle(t),e.loading=!1}):e.dataService.performSearch(o,I,1,10).subscribe(function(i){return(0,Q.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.loading=!1,this.rgDetails=i,a=0;a<this.rgDetails.records.length;a++)for(s=0;s<this.rgDetails.records[a].devices.length;s++)this.rgDetails.records[a].devices[s].serialNumber==I&&(this.rgModel=this.rgDetails.records[a].devices[s].modelName,this.raManufacture=this.rgDetails.records[a].devices[s].manufacturer,this.ipv4=this.rgDetails.records[a].devices[s].ipAddress,this.ipv6=this.rgDetails.records[a].devices[s].secondIpAddress),this.makemodel.push({model:this.rgDetails.records[a].devices[s].modelName,manufacture:this.rgDetails.records[a].devices[s].manufacturer,sno:this.rgDetails.records[a].devices[s].serialNumber});this.resValue=t,this.loadInitialDiagram(t);case 3:case"end":return e.stop()}},e,this)}))},function(t){e.pageErrorHandle(t),e.loading=!1})},function(t){e.pageErrorHandle(t),e.loading=!1})}},{key:"loadInitialDiagram",value:function(e){var t;return(0,Q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var a,s,n,r,o,l,c,d,u,h,g,p,m,v,f,D,y,b,T,I,A,x,_,w,S,C,k,E,M,O,N,P,Z,L,F,R,q,H,B,U,G,Y,V,J,z,Q,j,K,X,$=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.nodeDataArray=[],this.linkDataArray=[],"",s="",n=[],r=[],o="",Object.keys(e.landing.uplink).length>0&&(a=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e.landing.uplink.mac&&(n=[{columns:[{attr:"property",text:this.language.MAC},{attr:"value",text:"".concat(e.landing.uplink.mac)}]}],r=[{columns:[{attr:"property",text:this.language.Download_Rate},{attr:"value",text:"".concat(e.landing.uplink.downloadRate," Mbps")}]},{columns:[{attr:"property",text:this.language.Upload_Rate},{attr:"value",text:"".concat(e.landing.uplink.uploadRate," Mbps")}]}])),l=!0,c={},d=this.ssoAuthService.getEntitlementsArr(),u=this.ssoAuthService.getCscType(),e.landing.ont&&Object.keys(e.landing.ont).length>0)if(d.indexOf("102")>-1&&"EME"==u){if(o=e.landing.ont.discoveredSerialNumber,e.landing.rg.ontSN=this.ont_serialNo,o==e.landing.rg.sn.substring(e.landing.rg.sn.indexOf("CXNK00")+6)?(e.landing.rg.category="ontNode",l=!0):(l=!1,c={isONT:!0,label:this.ont_serialNo,source:"assets/images/ic_ONT.svg",key:e.landing.ont.ontId,width:15,height:30,category:"otherNode"},e.landing.rg.category="otherNode"),"","true"==e.landing.ont["ont-online"]?"ONT ".concat(this.language.Connection,": ").concat(this.language.Online):"ONT ".concat(this.language.Connection,": ").concat(this.language.Offline),e.landing.rg.ontSourceIcon="assets/images/ic_ONT.svg",e.landing.rg.props="Serial Number \n CLEI \n Model \n Pon Port \n ONT Issues",e.landing.rg.values="".concat(e.landing.ont.discoveredVendorId).concat(o," \n ").concat(e.landing.ont.clei," \n ").concat(e.landing.ont.discoveredModel," \n ").concat(e.landing.ont.discoveredPonPort," \n ").concat(e.landing.ont["ont-tech-note"]),h=e.landing.ont.discoveredMacAddress?e.landing.ont.discoveredMacAddress:"-",g=e.landing.ont.discoveredVersion?e.landing.ont.discoveredVersion:"-",p=e.landing.ont.discoveredModel?e.landing.ont.discoveredModel:"-",m=e.landing.ont.discoveredPonPort?e.landing.ont.discoveredPonPort:"-",v=e.landing.ont.oltName?e.landing.ont.oltName:"-",f="".concat(e.landing.ont.region?e.landing.ont.region:"-","/").concat(e.landing.ont.location?e.landing.ont.location:"-"),D=e.landing.ont.ontId?e.landing.ont.ontId:"-",e.landing.ont["ont-tech-note"])for(this.ont_issue="",y=0;y<e.landing.ont["ont-issue-list"].length;y++)this.issueDescription(e.landing.ont["ont-issue-list"][y].code,"ont","","");b=e.landing.ont["ont-tech-note"]?this.ont_issue:"-",e.landing.rg.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],T=this.lightLevel?"".concat(this.lightLevel," dBm"):"-",I=this.rxPower?"".concat(this.rxPower," dBm"):"-",A=this.downStream?this.downStream:"-",x=this.upStream?this.upStream:"-",e.landing.rg.isontIssue=b,e.landing.rg["ont/rgData"]=[{columns:[{attr:"property",text:"ONT - ".concat(this.ont_serialNo)},{attr:"value",text:""}]},{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:this.ont_serialNo}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:h}]},{columns:[{attr:"property",text:this.language.Version},{attr:"value",text:g}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:p}]},{columns:[{attr:"property",text:this.language.Pon_Port},{attr:"value",text:m}]},{columns:[{attr:"property",text:this.language.ONT_Name},{attr:"value",text:v}]},{columns:[{attr:"property",text:this.language.Region_Location},{attr:"value",text:f}]},{columns:[{attr:"property",text:this.language.ONT_ID},{attr:"value",text:D}]},{columns:[{attr:"property",text:this.language.OLT_Rx_Power},{attr:"value",text:T}]},{columns:[{attr:"property",text:this.language.ONT_Rx_Power},{attr:"value",text:I}]},{columns:[{attr:"property",text:this.language.DS_BIP_Error_Count},{attr:"value",text:A}]},{columns:[{attr:"property",text:this.language.US_BIP_Error_Count},{attr:"value",text:x}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:b}]}],e.landing.rg.ontData=[{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:this.ont_serialNo}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:h}]},{columns:[{attr:"property",text:this.language.Version},{attr:"value",text:g}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:p}]},{columns:[{attr:"property",text:this.language.Pon_Port},{attr:"value",text:m}]},{columns:[{attr:"property",text:this.language.ONT_Name},{attr:"value",text:v}]},{columns:[{attr:"property",text:this.language.Region_Location},{attr:"value",text:f}]},{columns:[{attr:"property",text:this.language.ONT_ID},{attr:"value",text:D}]},{columns:[{attr:"property",text:this.language.OLT_Rx_Power},{attr:"value",text:T}]},{columns:[{attr:"property",text:this.language.ONT_Rx_Power},{attr:"value",text:I}]},{columns:[{attr:"property",text:this.language.DS_BIP_Error_Count},{attr:"value",text:A}]},{columns:[{attr:"property",text:this.language.US_BIP_Error_Count},{attr:"value",text:x}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:b}]}],c.columnDefinitions=e.landing.rg.columnDefinitions,c.rgData=e.landing.rg.ontData,"green"==e.landing.ont["ont-color"]?c.color=this.nodeColor.green:"red"==e.landing.ont["ont-color"]?c.color=this.nodeColor.red:"yellow"==e.landing.ont["ont-color"]&&(c.color="#fff17a8c")}else e.landing.rg.category="otherNode";else e.landing.rg.category="otherNode";if(_="",w="",w=this.ipv6&&this.ssoAuthService.isIpv6Address(this.ipv6?this.ipv6.split("/")[0]:"")?this.ipv6:w,"true"==e.landing.rg.online&&w?_="IPv4: ".concat(this.language.Connected," \n IPv6: ").concat(this.language.Connected):"true"!=e.landing.rg.online||w?"false"==e.landing.rg.online&&w&&(_="IPv4: ".concat(this.language.Disconnected," \n IPv6: ").concat(this.language.Connected),s=this.nodeLinkColor.red):(_="IPv4: ".concat(this.language.Connected," \n IPv6: ").concat(this.language.Disconnected),s=this.nodeLinkColor.red),"#f3f3f3",s="grey",("false"==e.landing.rg.online||(null===(t=e.landing.rg["rg-tech-notes"])||void 0===t?void 0:t.includes("The RG is not reachable")))&&(_="IPv4: ".concat(this.language.Disconnected," \n IPv6: ").concat(this.language.Disconnected),s=this.nodeLinkColor.red),S={isInternet:!0,columnDefinitions:a,rgData:n,label:_,source:"assets/images/global.svg",key:"Internet",accessPointId:"",width:30,height:30,color:"#f3f3f3",mac:"Internet",category:"otherNode"},C={text:"Ethernet Port",label:"Ethernet Port",source:"assets/images/ethernet.png",key:"ethernet",accessPointId:"",color:"#f3f3f3",width:17,height:30},!e.landing||!e.landing.rg.mac){i.next=29;break}if(e.landing.rg.online?"red":"green",l?this.linkDataArray.push({from:S.key,to:e.landing.rg.mac,color:s,thick:2,routing:W.Link.Normal,linkColumn:a,linkText:r}):(this.linkDataArray.push({from:S.key,to:c.key,color:s,thick:2,routing:W.Link.Normal,linkColumn:a,linkText:r}),this.linkDataArray.push({from:c.key,to:e.landing.rg.mac,color:s,thick:2,routing:W.Link.Normal,linkColumn:a,linkText:r})),k="",E="",e.landing.rg.online&&(E="true"==e.landing.rg.online?this.language.Online:this.language.Offline),M=e.landing.rg.ip?"".concat(e.landing.rg.ip):"-",O=e.landing.rg.mac?"".concat(e.landing.rg.mac):"-",N=e.landing.rg.name?"".concat(e.landing.rg.name):"-",P=e.landing.rg.version?"".concat(e.landing.rg.version):"-",Z=e.landing.rg.sn?"".concat(e.landing.rg.sn):"-",L=JSON.parse(sessionStorage.getItem("calix.deviceData")).find(function(e){return e.modelName==$.rgModel}),F=e.landing.rg.hostname?"".concat(e.landing.rg.hostname):L.opModeWithOnt,R=this.rgModel?"".concat(this.rgModel):"-",q=this.raManufacture?"".concat(this.raManufacture):"",H="",e.landing.rg["radio-info"]){if(B=e.landing.rg["radio-info"],U=[],B.length>0){for(G=0;G<B.length;G++)U.push(B[G]["freq-band"]+"GHz");k=U.join(", ")}H=k?"".concat(k):"-"}if(Y="",e.landing.rg.clients){for(V=0;V<e.landing.rg.clients.length;V++)"red"==e.landing.rg.clients[V]["client-color"]&&(this.isrgWithIssue=!0);1==this.isrgWithIssue&&(e.landing.rg.isrgWithIssue=!0),e.landing.rg.clients.length>0&&(Y=e.landing.rg.clients.length)}if(J=Y||0,z=0!=e.landing.rg["passed-clients"]?"".concat(e.landing.rg["passed-clients"]):"0",Q=0!=e.landing.rg["failed-clients"]?"".concat(e.landing.rg["failed-clients"]):"0",j=e.landing.rg["rg-tech-notes"]?"".concat(this.issue_reason):"-",e.landing.rg.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e.landing.rg.isrgIssue=j,e.landing.rg["rg/ontData"]=[{columns:[{attr:"property",text:"RG - ".concat(this.ont_serialNo)},{attr:"value",text:""}]},{columns:[{attr:"property",text:this.language.Connection},{attr:"value",text:"".concat(E)}]},{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:"".concat(M)}]},{columns:[{attr:"property",text:this.language.Device},{attr:"value",text:"".concat(F)}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:"".concat(q)}]},{columns:[{attr:"property",text:this.language.Frequency_Band},{attr:"value",text:"".concat(H)}]},{columns:[{attr:"property",text:this.language.Total_Clients},{attr:"value",text:"".concat(J)}]},{columns:[{attr:"property",text:this.language.Devices_without_issues_and_warnings},{attr:"value",text:"".concat(z)}]},{columns:[{attr:"property",text:this.language.Devices_with_issues_and_warnings},{attr:"value",text:"".concat(Q)}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:"".concat(j)}]}],e.landing.rg.rgData=[{columns:[{attr:"property",text:this.language.Connection},{attr:"value",text:"".concat(E)}]},{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:"".concat(M)}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:"".concat(O)}]},{columns:[{attr:"property",text:this.language.Name},{attr:"value",text:"".concat(N)}]},{columns:[{attr:"property",text:this.language.Software_Version},{attr:"value",text:"".concat(P)}]},{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:"".concat(Z)}]},{columns:[{attr:"property",text:this.language.Device},{attr:"value",text:"".concat(F)}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:"".concat(R)}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:"".concat(q)}]},{columns:[{attr:"property",text:this.language.Frequency_Band},{attr:"value",text:"".concat(H)}]},{columns:[{attr:"property",text:this.language.Total_Clients},{attr:"value",text:"".concat(J)}]},{columns:[{attr:"property",text:this.language.Devices_without_issues_and_warnings},{attr:"value",text:"".concat(z)}]},{columns:[{attr:"property",text:this.language.Devices_with_issues_and_warnings},{attr:"value",text:"".concat(Q)}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:"".concat(j)}]}],e.landing.rg.source=e.landing.rg.online?"assets/images/myRouter.svg":"assets/images/router-critical-state.png",e.landing.rg["rg-tech-notes"].includes("The RG is not reachable")&&(e.landing.rg.source=this.accessPointImages.red),e.landing.rg.key=e.landing.rg.mac,this.rgKey=e.landing.rg.mac,"ontNode"!=e.landing.rg.category?"green"==e.landing.rg["rg-color"]?e.landing.rg.color=this.nodeColor.green:"red"==e.landing.rg["rg-color"]?e.landing.rg.color=this.nodeColor.red:"yellow"==e.landing.rg["rg-color"]&&(e.landing.rg.color="#fff17a8c"):"green"==e.landing.rg["rg-color"]&&"green"==e.landing.ont["ont-color"]?e.landing.rg.color=this.nodeColor.green:"red"==e.landing.rg["rg-color"]||"red"==e.landing.ont["ont-color"]?e.landing.rg.color=this.nodeColor.red:("yellow"==e.landing.rg["rg-color"]||"yellow"==e.landing.ont["ont-color"])&&(e.landing.rg.color="#fff17a8c"),"false"==e.landing.rg.online&&(e.landing.rg.color=this.nodeColor.red),e.landing.rg.width=30,e.landing.rg.height=30,e.landing.rg.model=this.rgModel,e.landing.rg.isRg=!0,e.landing.rg.name&&(e.landing.rg.isInternet=!0),e.landing.rg.ethernetId="ethernet-".concat(e.landing.rg.sn),e.landing.rg.label=e.landing.rg.name?e.landing.rg.hostname?"".concat(e.landing.rg.hostname," \n ").concat(e.landing.rg.name):"".concat(e.landing.rg.sn," ").concat(e.landing.rg.name):e.landing.rg.hostname?"".concat(e.landing.rg.hostname):"".concat(e.landing.rg.sn),this.expandedNodes.push(S.key),K=e.landing.rg.aps,this.nodeDataArray.push(S),this.nodeDataArray.push(c),this.nodeDataArray.push(e.landing.rg),i.t0=K&&K.length>0,!i.t0){i.next=26;break}return i.next=26,this.populateAps(K,e,e.landing.rg,C);case 26:this.setClientDetailsNode(),i.next=37;break;case 29:if(X=e.landing.rg.aps,S.noRg=!0,this.nodeDataArray.push(S),i.t1=X&&X.length>0,!i.t1){i.next=36;break}return i.next=36,this.populateAps(X,e,S,C);case 36:this.setClientDetailsNode();case 37:case"end":return i.stop()}},i,this)}))}},{key:"issueDescription",value:function(e,t,i,a){var s="";if("ATTACK_DETECTED"==(e=e.toUpperCase())||"VIRUS_ATTACK"==e)s="".concat(this.language.Issue_Reason1);else if("CLIENT_DEVICE_LOW_SIGNAL_DETECTED"==e)s="".concat(this.language.Issue_Reason2);else if("CLIENT_DEVICE_LOW_EFFICIENCY_SCORE_DETECTED"==e)s="".concat(this.language.Issue_Reason3);else if("CLIENT_DEVICE_LOW_PHY_RATE_DETECTED"==e)s="".concat(this.language.Issue_Reason_new4);else if("CLIENT_DEVICE_LEGACY_DEVICE_DETECTED"==e)s="".concat(this.language.Issue_Reason4);else if("REBOOT_ISSUE"==e)s="".concat(this.language.Issue_Reason5);else if("SOFTWARE_UPGRADE_FAILED"==e)s="".concat(this.language.Issue_Reason6);else if("STALE_SOFTWARE_VERSION"==e)s="".concat(this.language.Issue_Reason7);else if("The memory usage on the RG has crossed X threshold - discussion on if to track "==e)s="".concat(this.language.Issue_Reason_DEVICE8);else if("The Operation Temperature has crossed X threshold - intenral threshold"==e)s="".concat(this.language.Issue_Reason9);else if("WAP_FAILED"==e)s="".concat(this.language.Issue_Reason_mapNtr10);else if("GATEWAY_FAILED"==e)s="".concat(this.language.Issue_Reason44);else if("SPEED_LOW_75_80"==e)s="".concat(this.language.Issue_Reason12);else if("SPEED_LOW_75"==e)s="".concat(this.language.Issue_Reason13);else if("TRAFFIC_HIGH"==e)s="".concat(this.language.Issue_Reason14);else if("LATENCY_HIGH"==e)s="".concat(this.language.Issue_Reason15);else if("A configured voice service has been detect as down."==e)s="".concat(this.language.Issue_Reason16);else if("WIFI_INTERFERENCE_HIGH_24G"==e)s="".concat(this.language.Issue_Reason17);else if("WIFI_INTERFERENCE_HIGH_5G"==e)s="".concat(this.language.Issue_Reason18);else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G"==e)s="".concat(this.language.Issue_Reason19);else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G"==e)s="".concat(this.language.Issue_Reason20);else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G"==e)s="".concat(this.language.Issue_Reason21);else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G"==e)s="".concat(this.language.Issue_Reason22);else if("MESH_DEGRADE"==e)s="".concat(this.language.Issue_Reason23);else if("BACKHAUL_TOO_CLOSE"==e)s="".concat(this.language.Issue_Reason24);else if("BACKHAUL_TOO_FAR"==e)s="".concat(this.language.Issue_Reason25);else if("Utilization of Wi-Fi Airtime has crossed 50% Average for bin on radio (2.4Ghz|5Ghz)"==e)s="".concat(this.language.Issue_Reason26);else if("Detected DFS (radar)"==e)s="".concat(this.language.Issue_Reason27);else if("WIFI_RADIO_DISABLED"==e)s="".concat(this.language.Issue_Reason28);else if("WIFI_RADIO_DISABLED_24G"==e)s="".concat(this.language.Issue_Reason29);else if("WIFI_RADIO_DISABLED_5G"==e)s="".concat(this.language.Issue_Reason30);else if("DS_SPEED_LOW_85"==e)s="".concat(this.language.Issue_Reason31);else if("US_SPEED_LOW_85"==e)s="".concat(this.language.Issue_Reason32);else if("DS_SPEED_LOW_75"==e)s="".concat(this.language.Issue_Reason33);else if("US_SPEED_LOW_75"==e)s="".concat(this.language.Issue_Reason34);else if("THERMAL_HIGH"==e)s="".concat(this.language.Issue_Reason35);else if("THERMAL_TOO_HIGH"==e)s="".concat(this.language.Issue_Reason36);else if("ONT_OFFLINE"==e)s="".concat(this.language.issue_reason37);else if("GC_MAX_DOWNSTREAM_ACHIEVED"==e)s="".concat(this.language.issue_reason38);else if("GC_MAX_UPSTREAM_ACHIEVED"==e)s="".concat(this.language.issue_reason39);else if("WFH_SSID_WITHOUT_CIQ"==e)s="".concat(this.language.issue_reason40);else if("QOS_DAMP_ALERT"==e)s="".concat(this.language.Issue_Reason41);else if("MAP_CONNECTIVITY_FAILED"==e){var n=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(function(e){return e.serialNumber==i}).map(function(e){return e.opMode});s="".concat(this.language["Issue_Reason"+(n.length&&"RG"==n[0]?"11":"10")])}else if("UI_CREATED_ISSUE_FOR_TR069MAPDOWN"==e){var r=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(function(e){return e.serialNumber==i}).map(function(e){return e.opMode});s="".concat(this.language["Issue_Reason_mapNtr"+(r.length&&"RG"==r[0]?"11":"10")])}"rg"==t?"."==s.slice(-1)?this.issue_reason+=s+" ":this.issue_reason+=s.substring(0,s.length)+". ":"aps"==t?("."==s.slice(-1)?this.aps_issue+=s+" ":this.aps_issue+=s.substring(0,s.length)+". ",a+1==this.aps_issue_length&&JSON.stringify(this.clientArr.push({note:this.aps_issue,name:i}))):"client"==t?("."==s.slice(-1)?this.client_issue+=s+" ":this.client_issue+=s.substring(0,s.length)+". ",a+1==this.client_issue_length&&JSON.stringify(this.clientArr.push({note:this.client_issue,name:i}))):"backhaul"==t?("."==s.slice(-1)?this.backhaul_issue+=s+" ":this.backhaul_issue+=s.substring(0,s.length)+". ",a+1==this.backhaul_issue_length&&JSON.stringify(this.clientArr.push({note:this.backhaul_issue,name:this.language.Backhaul_Issue}))):"ont"==t&&("."==s.slice(-1)?this.ont_issue+=s+" ":this.ont_issue+=s.substring(0,s.length)+". ")}},{key:"loadSupportTopology",value:function(){var e=this;this.clientDeviceSSID||this.nodeDataArray.forEach(function(e){delete e.isSSIDClient});var i=this.$;this.APTopology&&(this.APTopology.div=null),this.APTopology=i(W.Diagram,"mainDiagram",{minScale:.25,maxScale:2,initialContentAlignment:W.Spot.Top,"undoManager.isEnabled":!0,LayoutCompleted:function(t){e.updateDivHeight(),e.enableAllCommandHandler(),e.rgArr.length>0&&e.scroll()},InitialLayoutCompleted:function(i){e.setZoomScaleToFit(),function(){(0,Q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.APTopology.startTransaction("CollapseExpandTree"),o.APTopology.nodes.each(function(e){var i=e.part,a=i.findTreeParentNode();if(o.clientDeviceSSID||((i.data.isInternet&&i.data._primariesExpethernetanded||i.data.isRg&&i.data._primariesExpanded||i.data.isAPS&&i.data.apHasChildAp&&i.data._primariesExpanded||i.data.isONT&&i.data._primariesExpanded)&&(o.expandedNodes.push(i.data.key),o.APTopology.model.set(i.data,"_primariesExpanded",!0)),i.data.isAPS&&a&&null!=a&&o.expandedNodes.push(a.data.sn+"-"+i.data.ssid,"ethernet-".concat(i.data["eth-port"],"-").concat(a.data.sn)),o.expandedNodes=t(new Set(o.expandedNodes))),(!i.data.isInternet&&!i.data.isRg&&!i.data.isONT&&!i.data.isAPS&&!i.data.noRg||i.data.isAPS&&!(null==a?void 0:a.data._primariesExpanded)&&!(null==a?void 0:a.data.isAPSSID)||i.data.isAPS&&!(null==a?void 0:a.data._primariesExpanded)&&"true"==i.data["ap-online"]&&!(null==a?void 0:a.data.isAPSSID)||o.noRG&&i.data.isClient)&&(o.APTopology.model.set(i.data,"_primariesExpanded",!1),i.visible=!1,i.collapseTree()),null==a?void 0:a.data.isAPSSID){var s=a.findTreeParentNode();s&&null!=s&&(i.data.isAPS&&!(null==s?void 0:s.data._primariesExpanded)||i.data.isAPS&&!(null==s?void 0:s.data._primariesExpanded)&&"true"==i.data["ap-online"])&&(o.APTopology.model.set(i.data,"_primariesExpanded",!1),i.visible=!1,i.collapseTree())}if(o.noRG){var n=o.APTopology.findNodesByExample({isInternet:!0});n&&null!=n&&n.each(function(e){var t=e.part.findTreeChildrenNodes();t&&null!=t&&t.count>0&&t.each(function(e){e.visible=!0,e.expandTree()})})}}),void o.APTopology.commitTransaction("CollapseExpandTree");case 2:o.APTopology.startTransaction("CollapseExpandTree"),o.APTopology.findTreeRoots().each(function(e){e.data.isInternet&&(e.location.y=e.location.y+1),o.locationFixed=!0}),o.APTopology.commitTransaction("CollapseExpandTree"),o.APTopology.startTransaction("CollapseExpandTree"),o.APTopology.nodes.each(function(e){var t=e.part;if(o.expandedNodes.includes(t.data.key)){if(t.data.isSSID||t.data.isAPSSID){var i=!1,a=!1,s=!1;t.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?i=!0:e.data.isFailedClient?a=!0:e.data.isAPS&&(s=!0)}),(t.findTreeParentNode().data._othersPassedExpanded&&i||t.findTreeParentNode().data._othersFailedExpanded&&a||t.findTreeParentNode().data._primariesExpanded&&s)&&(t.visible=!0,t.expandTree())}else t.visible=!0,t.expandTree();var n=o.APTopology.findNodesByExample({mac:t.data["parent-host-name"]});(t.data.isSSID||t.data.isAPSSID)&&o.APTopology.model.set(t.data,"_primariesExpanded",!0),n&&n.each(function(e){!e.data.isSSID&&!e.data.isAPSSID&&!e.data.isInternet&&o.APTopology.model.set(e.data,t.data.isPassedClient?"_othersPassedExpanded":t.data.isFailedClient?"_othersFailedExpanded":"_primariesExpanded",!0)})}}),o.APTopology.commitTransaction("CollapseExpandTree");case 8:case"end":return e.stop()}},e)}))}(),o.APTopology.startTransaction("CollapseExpandTree"),o.APTopology.nodes.each(function(e){var t=e.part,i=e.part.findTreeChildrenNodes(),a=!1;i.each(function(e){var i=e.data;(!i.isClient||i.isSSIDClient)&&(a=!0),o.APTopology.model.set(t.data,"apHasChildAp",a)})}),o.APTopology.commitTransaction("CollapseExpandTree")},initialAutoScale:W.Diagram.UniformToFill,layout:i(W.TreeLayout,{layerSpacing:110,angle:0})}),this.APTopology.toolManager.toolTipDuration=6e4,this.APTopology.toolManager.hoverDelay=500,this.APTopology.linkSelectionAdornmentTemplate.pickable=!1;var a=i(W.Node,"Auto",{selectionAdorned:!1,click:function(t,i){var a,s,n,r;e.clientArr=[],e.selectedAPValue="",i.part.data["ap-tech-note"]||i.part.data.backhaul?(e.selectedAPValue=i.part.data,i.part.data["ap-tech-note"]&&(r={note:i.part.data["ap-tech-note"],name:i.part.data.sn},JSON.stringify(e.clientArr.push(r))),(null===(a=i.part.data.backhaul)||void 0===a?void 0:a["backhaul-tech-note"])&&i.part.data["ap-tech-note"]!=(null===(s=i.part.data.backhaul)||void 0===s?void 0:s["backhaul-tech-note"])&&(r={note:null===(n=i.part.data.backhaul)||void 0===n?void 0:n["backhaul-tech-note"],name:"".concat(e.language.Backhaul_Issue,":")},JSON.stringify(e.clientArr.push(r)))):i.part.data["client-note"]&&(e.selectedAPValue=i.part.data,r={note:i.part.data["client-note"],name:i.part.data.hostname?i.part.data.hostname:i.part.data.mac},JSON.stringify(e.clientArr.push(r))),e.clientArr.length>0&&e.scroll()},mouseHover:function(e,t){}},i(W.Shape,{width:210,height:150,fill:"white"},new W.Binding("strokeWidth","isHighlighted",function(e){return e?2:0}).ofObject(),new W.Binding("stroke","isHighlighted",function(e){return e?"gold":"white"}).ofObject()),i(W.Shape,"RoundedRectangle",new W.Binding("cursor","label",function(e){return e?"pointer":""}),{width:210,height:80,strokeWidth:0,parameter1:25},new W.Binding("fill","",function(e){return e.color||"white"})),i(W.Panel,"Vertical",new W.Binding("cursor","label",function(e){return e?"pointer":""}),{width:210,height:80},i(W.Panel,"Auto",{margin:new W.Margin(0,0,0,15),toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","ontData",function(e){return e.length>0}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray",width:900}),i(W.Panel,"Table",{padding:10,alignment:W.Spot.TopLeft},new W.Binding("itemArray","ont/rgData"),i(W.RowColumnDefinition,{column:0}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(230,NaN),minSize:new W.Size(200,NaN),isMultiline:!0,spacingAbove:5},new W.Binding("text"),new W.Binding("font","",function(e){return e.text.includes("ONT -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}),i(W.Panel,"Table",{padding:10,alignment:W.Spot.TopRight},new W.Binding("itemArray","rg/ontData"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Right,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(230,NaN),minSize:new W.Size(200,NaN),isMultiline:!0,spacingAbove:5},new W.Binding("text"),new W.Binding("font","",function(e){return e.text.includes("RG -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}))},i(W.Shape,"RoundedRectangle",{parameter1:10,width:210,height:40,strokeWidth:0,fill:"transparent"}),i(W.Panel,"Horizontal",{width:210,height:40},i(W.Panel,"Auto",{height:40,width:60},i(W.Picture,{width:13,height:30,margin:new W.Margin(5,0,0,25)},new W.Binding("source","ontSourceIcon",function(e){return e||""}))),i(W.Panel,"Auto",{height:40,width:160},i(W.TextBlock,{margin:new W.Margin(13,0,0,0),width:120,overflow:W.TextBlock.OverflowEllipsis},new W.Binding("text","ontSN",function(e){return e||""}),new W.Binding("maxLines","",function(e){return e.isInternet?2:1}))))),i(W.Panel,"Auto",{margin:new W.Margin(0,0,0,15),toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","rgData",function(e){return e.length>0}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray",width:900}),i(W.Panel,"Table",{padding:10,alignment:W.Spot.TopLeft},new W.Binding("itemArray","ont/rgData"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(230,NaN),minSize:new W.Size(200,NaN),isMultiline:!0,spacingAbove:5},new W.Binding("text"),new W.Binding("font","",function(e){return e.text.includes("ONT -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}),i(W.Panel,"Table",{padding:10,alignment:W.Spot.TopRight},new W.Binding("itemArray","rg/ontData"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(230,NaN),minSize:new W.Size(200,NaN),isMultiline:!0,spacingAbove:5},new W.Binding("text"),new W.Binding("font","",function(e){return e.text.includes("RG -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}))},i(W.Shape,"RoundedRectangle",{parameter1:10,width:210,height:40,strokeWidth:0,fill:"transparent"}),i(W.Panel,"Horizontal",{width:210,height:40},i(W.Panel,"Auto",{height:40,width:60},i(W.Picture,{margin:new W.Margin(6,0,0,18),height:28},new W.Binding("source","source",function(e){return e||""}),new W.Binding("element","source-video",function(e){return e||""}),new W.Binding("width","width"))),i(W.Panel,"Auto",{height:40,width:160},i(W.TextBlock,{margin:new W.Margin(10,0,0,0),width:120,overflow:W.TextBlock.OverflowEllipsis},new W.Binding("text","label",function(e){return e||""}),new W.Binding("maxLines","",function(e){return e.isInternet?2:1})))))),i(W.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,o.clientDeviceSSID?d(i,!0,"isPassedClient"):c(i,!0,"isPassedClient"))}},new W.Binding("margin","label",function(e){return e?new W.Margin(-70,0,0,50):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),i(W.Shape,"Circle",{width:24,height:24,stroke:"green",strokeWidth:2,margin:5,visible:!1},new W.Binding("fill","_othersPassedExpanded",function(e){return e?"green":"white"}),new W.Binding("visible","passed-clients",function(e){return e||!1})),i(W.TextBlock,{margin:5},new W.Binding("stroke","",function(e){return e._othersPassedExpanded?"white":"black"}),new W.Binding("text","passed-clients",function(e){return e||""}))),i(W.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,o.clientDeviceSSID?d(i,!0,"isFailedClient"):c(i,!0,"isFailedClient"))}},new W.Binding("margin","label",function(e){return e?new W.Margin(-60,0,0,90):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),i(W.Shape,"Circle",{width:24,height:24,strokeWidth:2,margin:5,visible:!1},new W.Binding("fill","",function(e){return e._othersFailedExpanded&&(e.isrgWithIssue||e.isapWithIssue)?"red":!e._othersFailedExpanded||e.isrgWithIssue&&e.isapWithIssue?"white":"orange"}),new W.Binding("visible","failed-clients",function(e){return e||!1}),new W.Binding("stroke","",function(e){return e.isrgWithIssue||e.isapWithIssue?"red":"orange"})),i(W.TextBlock,{margin:5},new W.Binding("stroke","",function(e){return e._othersFailedExpanded?"white":"black"}),new W.Binding("text","failed-clients",function(e){return e||""}))),i(W.Panel,"Auto",{margin:new W.Margin(0,0,0,175)},l(!1)));function s(e,t){for(var i=e.columnDefinitions,a=0;a<i.length;a++)if(i[a].attr===t)return i[a];return null}var n=new W.Map;n.add("ontNode",a),this.APTopology.nodeTemplateMap=n;var r=i(W.Node,"Auto",{selectionAdorned:!1,click:function(t,i){var a,s,n,r;if(e.clientArr=[],e.selectedAPValue="",i.part.data["ap-tech-note"]||i.part.data.backhaul){if(e.selectedAPValue=i.part.data,i.part.data["ap-tech-note"]){e.isAPSNodeClicked=!0,e.isClientNodeClicked=!1;for(var o=i.part.data["ap-issue-list"],l=[],c=o.filter(function(e){return["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)}).map(function(e){return e.serialNumber}),d=(o=o.filter(function(e,t){if(!c.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;l.push(null==e?void 0:e.serialNumber)})).length-1;d>=0;d--)l.includes(o[d].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(o[d].code)&&(o.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:o[d].serialNumber,source:o[d].serialNumber,sourceId:o[d].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),o.splice(d,1));if(e.issueData=o.filter(function(t){var i,a;return e.issueCode.indexOf(t.hasOwnProperty("code")?null===(i=t.code)||void 0===i?void 0:i.toUpperCase():null===(a=t.Code)||void 0===a?void 0:a.toUpperCase())>-1}),e.issueData=e.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),e.issueList=e.issueData,e.totalissues=e.issueList.length,e.initalize(),o.length>0){e.rgflag=!0,e.aps_issue="",e.aps_issue_length=o.length,e.clickedAPS=i.part.data;for(var u=0;u<o.length;u++)e.issueDescription(o[u].code,"aps",i.part.data.sn,u),e.issueCode=o[u].code,e.serialNumber=o[u].serialNumber,e.issueType="aps",e.issueName=i.part.data.sn}}if((null===(a=i.part.data.backhaul)||void 0===a?void 0:a["backhaul-tech-note"])&&i.part.data["ap-tech-note"]!=(null===(s=i.part.data.backhaul)||void 0===s?void 0:s["backhaul-tech-note"])){var h=null===(n=i.part.data.backhaul)||void 0===n?void 0:n["backhaul-issue-list"];e.isBHNodeClicked=!0,e.isClientNodeClicked=!1,e.backhaul_issue="";var g="".concat(e.language.Backhaul_Issue,":");e.backhaul_issue_length=h.length,e.clickedBackhaul=null===(r=i.part.data.backhaul)||void 0===r?void 0:r["backhaul-issue-list"];for(var p=0;p<h.length;p++)e.issueDescription(h[p].code,"backhaul",g,p),e.bhissueCode=h[p].code,e.bhissueType="backhaul",e.bhissueName="".concat(e.language.Backhaul_Issue,":")}}else if(i.part.data["client-note"]){e.isAPSNodeClicked=!1,e.isBHNodeClicked=!1,e.isClientNodeClicked=!0,e.selectedAPValue=i.part.data;var m=i.part.data["client-issue-list"];if(m.length>0){e.rgflag=!0,e.client_issue="",e.client_issue_length=m.length,e.clickedClient=i.part.data;for(var v=i.part.data.hostname?i.part.data.hostname:i.part.data.mac,f=0;f<m.length;f++)e.issueDescription(m[f].code,"client",v,f),e.issueCode=m[f].code,e.issueType="client",e.issueName=v}}e.clientArr.length>0&&e.scroll()},mouseHover:function(e,t){}},i(W.Shape,{width:210,height:120,fill:"white"},new W.Binding("strokeWidth","isHighlighted",function(e){return e?2:0}).ofObject(),new W.Binding("stroke","isHighlighted",function(e){return e?"gold":"white"}).ofObject()),i(W.Shape,"Badge",{visible:!1},new W.Binding("cursor","label",function(e){return e?"pointer":""}),new W.Binding("visible","",function(e){return!(!e.isConnectivityNode&&!e.isInternet)}),{width:210,height:40,strokeWidth:0,toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","rgData",function(e){return e.length>0}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),i(W.Panel,"Table",{margin:new W.Margin(0,5,0,5)},new W.Binding("itemArray","rgData"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(350,NaN),minSize:new W.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new W.Binding("text")))})}))},new W.Binding("fill","",function(e){return e.color||"white"})),i(W.Shape,"RoundedRectangle",{visible:!1,parameter1:15},new W.Binding("cursor","label",function(e){return e?"pointer":""}),new W.Binding("visible","",function(e){return!e.isConnectivityNode&&!e.isInternet}),{width:210,height:40,strokeWidth:0,toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","rgData",function(e){return e.length>0}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),i(W.Panel,"Table",{margin:new W.Margin(0,5,0,5)},new W.Binding("itemArray","rgData"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(350,NaN),minSize:new W.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new W.Binding("text")))})}))},new W.Binding("fill","",function(e){return e.color||"white"})),i(W.Panel,"Auto",new W.Binding("cursor","label",function(e){return e?"pointer":""}),{width:220,height:120},i(W.Panel,"Spot",{visible:!1},i(W.Picture,{desiredSize:new W.Size(25,20),alignment:W.Spot.TopLeft,visible:!1,margin:new W.Margin(25,0,0,10),toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","",function(e){return"LAN"!=e["int-type"]&&"true"==e["ap-online"]&&e.hasOwnProperty("satPlacementRating")}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),i(W.Panel,"Table",{margin:new W.Margin(0,5,0,5)},new W.Binding("itemArray","ap_rssi_tooltip"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(350,NaN),minSize:new W.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new W.Binding("text")))})}))},new W.Binding("source","wirelessIcon",function(e){return e||""}),new W.Binding("width","width",function(e){return e-5}),new W.Binding("height","height",function(e){return e-10}),new W.Binding("visible","",function(e){return"LAN"!=e["int-type"]&&"true"==e["ap-online"]&&e.hasOwnProperty("satPlacementRating")})),new W.Binding("visible","",function(e){return"LAN"!=e["int-type"]&&"true"==e["ap-online"]&&e.hasOwnProperty("satPlacementRating")})),i(W.Panel,"Spot",{visible:!1,alignment:W.Spot.TopLeft},new W.Binding("visible","freqBand",function(e){return""!=e}),i(W.TextBlock,{margin:new W.Margin(25,0,0,10)},new W.Binding("text","freqBand"))),i(W.Panel,"Horizontal",i(W.Panel,"Horizontal",{height:35,width:60},i(W.Picture,{margin:new W.Margin(0,0,0,25)},new W.Binding("source","source",function(e){return e||""}),new W.Binding("element","source-video",function(e){return e||""}),new W.Binding("width","width"),new W.Binding("height","height"))),i(W.Panel,"Horizontal",{height:40,width:160},i(W.TextBlock,{margin:new W.Margin(0,0,0,10),width:120,overflow:W.TextBlock.OverflowEllipsis},new W.Binding("text","label",function(e){return e||""}),new W.Binding("maxLines","",function(e){return e.isInternet?2:1}))),{toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","rgData",function(e){return e.length>0}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),i(W.Panel,"Table",{margin:new W.Margin(0,5,0,5)},new W.Binding("itemArray","rgData"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=s(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(350,NaN),minSize:new W.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new W.Binding("text")))})}))}),i(W.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,o.clientDeviceSSID?d(i,!0,"isPassedClient"):c(i,!0,"isPassedClient"))}},new W.Binding("margin","label",function(e){return e?new W.Margin(-55,0,0,50):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),i(W.Shape,"Circle",{width:24,height:24,stroke:"green",strokeWidth:2,margin:5,visible:!1},new W.Binding("fill","_othersPassedExpanded",function(e){return e?"green":"white"}),new W.Binding("visible","passed-clients",function(e){return e||!1})),i(W.TextBlock,{margin:5},new W.Binding("stroke","",function(e){return e._othersPassedExpanded?"white":"black"}),new W.Binding("text","passed-clients",function(e){return e||""}))),i(W.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,o.clientDeviceSSID?d(i,!0,"isFailedClient"):c(i,!0,"isFailedClient"))}},new W.Binding("margin","label",function(e){return e?new W.Margin(-45,0,0,90):""}),new W.Binding("cursor","label",function(e){return e?"pointer":""}),i(W.Shape,"Circle",{width:24,height:24,stroke:"orange",strokeWidth:2,margin:5,visible:!1},new W.Binding("fill","",function(e){return e._othersFailedExpanded&&(e.isrgWithIssue||e.isapWithIssue)?"red":!e._othersFailedExpanded||e.isrgWithIssue&&e.isapWithIssue?"white":"orange"}),new W.Binding("visible","failed-clients",function(e){return e||!1}),new W.Binding("stroke","",function(e){return e.isrgWithIssue||e.isapWithIssue?"red":"orange"})),i(W.TextBlock,{margin:5},new W.Binding("stroke","",function(e){return e._othersFailedExpanded?"white":"black"}),new W.Binding("text","failed-clients",function(e){return e||""}))),i(W.Panel,"Auto",{margin:new W.Margin(0,0,0,175)},l(!1))));n.add("otherNode",r),this.APTopology.nodeTemplateMap=n,this.APTopology.linkTemplate=i(W.Link,{curve:W.Link.Bezier,relinkableFrom:!0,relinkableTo:!0},i(W.Shape,{strokeWidth:3,width:200},new W.Binding("stroke","color"),new W.Binding("strokeWidth","thick")),{toolTip:i(W.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new W.Point(4,4)},new W.Binding("visible","linkText",function(e){return e.length>0}),i(W.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),i(W.Panel,"Table",{margin:new W.Margin(0,5,0,5)},new W.Binding("itemArray","linkText"),i(W.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:W.Spot.Left,itemTemplate:i(W.Panel,"TableRow",new W.Binding("itemArray","columns"),{itemTemplate:i(W.Panel,{margin:new W.Margin(3,0,3,0),stretch:W.GraphObject.Fill,alignment:W.Spot.TopLeft},new W.Binding("column","attr",function(e,t){var i=function(e,t){for(var i=e.linkColumn,a=0;a<i.length;a++)if(i[a].attr===t)return i[a];return null}(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),i(W.TextBlock,{maxSize:new W.Size(350,NaN),minSize:new W.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new W.Binding("text")))})}))});var o=this;function l(e){return i("Button",{visible:!1,click:function(t,i){var a=i.part;null!==a&&(t.handled=!0,o.clientDeviceSSID?d(a,e,"isClient"):c(a,e,"isClient"))}},i(W.Shape,{name:"ButtonIcon",figure:"TriangleLeft",stroke:"#424242",strokeWidth:2,desiredSize:new W.Size(8,8)},new W.Binding("figure",e?"_othersExpanded":"_primariesExpanded",function(e,t){return e?"TriangleLeft":"TriangleRight"})),new W.Binding("visible","",function(e){return!(e.isTreeLeaf||!e.apHasChildAp)}))}function c(e,i,a){o.APTopology.startTransaction("CollapseExpandTree"),e.findTreeChildrenNodes().each(function(s){var n=s.data;if((!i||n[a])&&(i||!n[a]))if(s.visible){var r=!1,l=!1,c=!1;o.clientDeviceSSID?s.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?r=!0:e.data.isFailedClient?l=!0:e.data.isAPS&&(c=!0)}):(o.expandedNodes=o.expandedNodes.filter(function(e){return e!=s.data.key}),e.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?r=!0:e.data.isFailedClient?l=!0:e.data.isAPS&&(c=!0)})),"isPassedClient"==a&&((!l||!e.data._othersFailedExpanded)&&(o.expandedNodes=o.expandedNodes.filter(function(t){return t!=e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client"})),(!l||!e.data._othersFailedExpanded)&&(!c||!e.data._primariesExpanded)&&(o.expandedNodes=o.expandedNodes.filter(function(t){return t!="ethernet-".concat(s.data["eth-port"],"-").concat(e.data.sn)}))),"isFailedClient"==a&&((!r||!e.data._othersPassedExpanded)&&(o.expandedNodes=o.expandedNodes.filter(function(t){return t!=e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client"})),(!r||!e.data._othersPassedExpanded)&&(!c||!e.data._primariesExpanded)&&(o.expandedNodes=o.expandedNodes.filter(function(t){return t!="ethernet-".concat(s.data["eth-port"],"-").concat(e.data.sn)}))),o.expandedNodes=o.expandedNodes.filter("isPassedClient"==a&&!e.data._othersFailedExpanded&&!e.data._primariesExpanded||"isFailedClient"==a&&!e.data._othersPassedExpanded&&!e.data._primariesExpanded?function(t){return t!=s.data.key&&t!=e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client"&&t!="ethernet-".concat(e.data.sn)}:"isPassedClient"==a||"isFailedClient"==a?function(e){return e!=s.data.key}:function(t){return t!=s.data.key&&t!=e.data.sn+"-"+s.data.ssid&&t!="ethernet-".concat(e.data.sn)}),s.visible=!1,s.collapseTree(),!s.data.isPassedClient&&!s.data.isFailedClient&&u(s,e)}else s.data.isPassedClient||s.data.isFailedClient?o.expandedNodes.push(s.data.key,e.data.key,e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client","ethernet-".concat(s.data["eth-port"],"-").concat(e.data.sn)):o.expandedNodes.push(s.data.key,e.data.key,e.data.sn+"-"+s.data.ssid,"ethernet-".concat(e.data.sn)),o.expandedNodes=t(new Set(o.expandedNodes)),s.visible=!0,s.expandTree()}),i?"isPassedClient"==a?o.APTopology.model.set(e.data,"_othersPassedExpanded",!e.data._othersPassedExpanded):"isFailedClient"==a&&o.APTopology.model.set(e.data,"_othersFailedExpanded",!e.data._othersFailedExpanded):o.APTopology.model.set(e.data,"_primariesExpanded",!e.data._primariesExpanded),o.APTopology.commitTransaction("CollapseExpandTree")}function d(e,i,a){var s;i=!!e.data.isSSID||i,e.data.isSSID||e.data.isAPSSID?function(e,t,i){o.APTopology.startTransaction("CollapseExpandTree");var a=e.findTreeChildrenNodes(),s=e.findTreeParentNode();s.findTreeChildrenNodes().each(function(e){}),s.data._othersFailedExpanded&&s.data._othersPassedExpanded&&s.data._primariesExpanded?i="allClients":s.data._othersFailedExpanded&&s.data._othersPassedExpanded?i="passedFailedClients":s.data._othersFailedExpanded&&s.data._primariesExpanded?i="primaryFailedClients":s.data._othersPassedExpanded&&s.data._primariesExpanded?i="primaryPassedClients":s.data._othersFailedExpanded?i="isFailedClient":s.data._othersPassedExpanded?i="isPassedClient":s.data._primariesExpanded&&(i="isClient"),a.each(function(e){("isPassedClient"==i&&e.data.isPassedClient||"isFailedClient"==i&&e.data.isFailedClient||"passedFailedClients"==i&&!e.data.isAPS||"primaryFailedClients"==i&&!e.data.isPassedClient||"primaryPassedClients"==i&&!e.data.isFailedClient||"isClient"==i&&e.data.isAPS||"allClients"==i)&&(e.visible?(e.visible=!1,e.collapseTree()):(e.visible=!0,e.expandTree()))}),o.APTopology.model.set(e.data,"_primariesExpanded",!e.data._primariesExpanded),o.APTopology.commitTransaction("CollapseExpandTree")}(e,0,a):(o.APTopology.startTransaction("CollapseExpandTree"),e.findTreeChildrenNodes().each(function(t){var i=!1,n=!1,r=!1;t.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?i=!0:e.data.isFailedClient?n=!0:e.data.isAPS&&(r=!0)}),(t.data.offlineAP||t.data.isRg)&&(r=!0),"isPassedClient"==a&&i&&!e.data._othersPassedExpanded||"isFailedClient"==a&&n&&!e.data._othersFailedExpanded||"isClient"==a&&r&&!e.data._primariesExpanded?((t.data.offlineAP||t.data.isRg)&&o.expandedNodes.push(t.data.key),t.visible=!0,t.expandTree()):((!n||!e.data._othersFailedExpanded)&&(!r||!e.data._primariesExpanded)&&"isPassedClient"==a||(!i||!e.data._othersPassedExpanded)&&(!r||!e.data._primariesExpanded)&&"isFailedClient"==a||(!i||!e.data._othersPassedExpanded)&&(!n||!e.data._othersFailedExpanded)&&"isClient"==a)&&(o.expandedNodes=o.expandedNodes.filter(function(e){return e!=t.data.key}),t.visible=!1,t.collapseTree());var l=t.findTreeChildrenNodes();if(l&&null!=l&&l.count>0){var c=!1;l.each(function(i){"isPassedClient"==a&&!i.data.isPassedClient||"isFailedClient"==a&&!i.data.isFailedClient||"isClient"==a&&!i.data.isAPS||("isPassedClient"==a&&e.data._othersPassedExpanded||"isFailedClient"==a&&e.data._othersFailedExpanded||"isClient"==a&&e.data._primariesExpanded?(o.expandedNodes=o.expandedNodes.filter(function(e){return e!=i.data.key}),i.visible=!1,i.collapseTree(),s=!1):(("isClient"==a&&t.data._primariesExpanded||t.data._primariesExpanded||!e.data._othersPassedExpanded&&!e.data._primariesExpanded&&!e.data._othersFailedExpanded)&&(c=!0,i.visible=!0,i.expandTree()),s=!0,o.expandedNodes.push(i.data.key,t.data.key)),!i.data.isPassedClient&&!i.data.isFailedClient&&u(i,t,c))}),(t.data.isAPSSID||t.data.isSSID)&&c&&o.APTopology.model.set(t.data,"_primariesExpanded",!0)}("false"==t.data["ap-online"]||t.data.isRg)&&!e.data._primariesExpanded&&(s=!0)}),s?"isPassedClient"==a?o.APTopology.model.set(e.data,"_othersPassedExpanded",!0):"isFailedClient"==a?o.APTopology.model.set(e.data,"_othersFailedExpanded",!0):"isClient"==a&&o.APTopology.model.set(e.data,"_primariesExpanded",!0):"isPassedClient"==a?o.APTopology.model.set(e.data,"_othersPassedExpanded",!1):"isFailedClient"==a?o.APTopology.model.set(e.data,"_othersFailedExpanded",!1):"isClient"==a&&o.APTopology.model.set(e.data,"_primariesExpanded",!1),o.expandedNodes=t(new Set(o.expandedNodes)),o.APTopology.commitTransaction("CollapseExpandTree"))}function u(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.findTreeChildrenNodes();a&&null!=a&&a.count>0?a.each(function(i){i.visible=!1,i.collapseTree(),o.innerChildsNodes.push(i.data.key),o.expandedNodes=o.expandedNodes.filter(function(e){return e!=i.data.key}),t.findTreeParentNode(),o.clientDeviceSSID?i.data.isPassedClient?o.APTopology.model.set(t.data,"_othersPassedExpanded",!1):i.data.isFailedClient?o.APTopology.model.set(t.data,"_othersFailedExpanded",!1):(i.data.isAPS||i.data.isSSID||i.data.isAPSSID)&&o.APTopology.model.set(e.data,"_primariesExpanded",!1):i.data.isPassedClient?o.APTopology.model.set(e.data,"_othersPassedExpanded",!1):i.data.isFailedClient?o.APTopology.model.set(e.data,"_othersFailedExpanded",!1):(i.data.isAPS||i.data.isSSID||i.data.isAPSSID)&&o.APTopology.model.set(e.data,"_primariesExpanded",!1);var a=i.findTreeChildrenNodes();a&&null!=a&&a.count>0&&!i.data.isPassedClient&&!i.data.isFailedClient&&u(i,e)}):(t.data.isAPSSID||t.data.isSSID)&&i&&o.APTopology.model.set(t.data,"_primariesExpanded",!0)}o.APTopology.model=new W.GraphLinksModel(o.nodeDataArray,o.linkDataArray),this.APDiagram.nativeElement.querySelector("canvas").style.outline="none"}},{key:"setClientDetailsNode",value:function(){return(0,Q.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nodeDataArray.forEach(function(e){e.clients&&e.clients.length>0&&(t.objData=e,t.onClickClients="",t.getAPData(t.objData))});case 2:this.setOthersPrimary();case 3:case"end":return e.stop()}},e,this)}))}},{key:"setOthersPrimary",value:function(){this.nodeDataArray.forEach(function(e){var t=!1;(e.isInternet||e.isRg||e.isAPS)&&!e.hasOwnProperty("_primariesExpanded")&&(t=!0),e.apHasChildAp=!!e.hasOwnProperty("apHasChildAp")&&e.apHasChildAp,e._othersPassedExpanded=!!e.hasOwnProperty("_othersPassedExpanded")&&e._othersPassedExpanded,e._othersFailedExpanded=!!e.hasOwnProperty("_othersFailedExpanded")&&e._othersFailedExpanded,e._primariesExpanded=e.hasOwnProperty("_primariesExpanded")?e._primariesExpanded:t}),this.loadSupportTopology()}},{key:"clientNodeDetails",value:function(e){this.clientDetails="";var t,i=e["ip-address"]?e["ip-address"]:"-",a=e.hostname?e.hostname:"-",s=e.mac?e.mac:"-",n=e["fingerprint-model"]&&"Unknown"!=e["fingerprint-model"]?e["fingerprint-model"]:"-",r=e["fingerprint-vendor"]&&"Unknown"!=e["fingerprint-vendor"]?e["fingerprint-vendor"]:"-",o=e["intf-type"]?e["intf-type"]:"-",l=e["signal-strength"]?"".concat(e["signal-strength"],"dBm"):"-",c="",d=(null==e?void 0:e["client-efficiency-score"])>0?(100*(null==e?void 0:e["client-efficiency-score"])).toFixed(2):(null==e?void 0:e["client-efficiency-score"])<0||0==(null==e?void 0:e["client-efficiency-score"])?(0).toFixed(2):"-";parseInt(d)>=45?c="Good":parseInt(d)>=20&&parseInt(d)<45?c="Fair":parseInt(d)<20&&(c="Poor"),t="-"!=d?d+"% ("+c+")":d;var u,h=e["Airtime-usage"]?e["Airtime-usage"]:"-",g=e["Channel-number"]?e["Channel-number"]:"-";u=e["DS-phy-rate"]||e["US-phy-rate"]?"".concat(this.kbpsTO(e["DS-phy-rate"]),"bps/").concat(this.kbpsTO(e["US-phy-rate"]),"bps"):"-";var p;p=e["RX-bandwidth-usage"]||e["TX-bandwidth-usage"]?"".concat(this.kbpsTO(e["RX-bandwidth-usage"]),"bps/").concat(this.kbpsTO(e["TX-bandwidth-usage"]),"bps"):"-";var m=e.SNR?"".concat(e.SNR,"dB"):"-",v=e["freq-band"]?"".concat(e["freq-band"],"GHz"):"-";if(e["client-issue-list"]&&!this.isClientNodeClicked){this.client_issue="";for(var f=0;f<e["client-issue-list"].length;f++)this.issueDescription(e["client-issue-list"][f].code,"client","",f)}var D=e["client-note"]?this.client_issue:"-",y={};this.swVersion>21.2&&(y={columns:[{attr:"property",text:this.language.Efficiency_Score},{attr:"value",text:"".concat(t)}]}),e.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];var b={};"-"!=h&&(b={columns:[{attr:"property",text:this.language.Airtime_Usage},{attr:"value",text:"".concat(h)}]}),"WiFi"==e["intf-type"]?e.rgData=[{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:"".concat(i)}]},{columns:[{attr:"property",text:this.language.Hostname},{attr:"value",text:"".concat(a)}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:"".concat(s)}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:"".concat(n)}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:"".concat(r)}]},{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:"".concat(o)}]},{columns:[{attr:"property",text:this.language.Signal_Strength},{attr:"value",text:"".concat(l)}]},y,b,{columns:[{attr:"property",text:this.language.Channel_Number},{attr:"value",text:"".concat(g)}]},{columns:[{attr:"property",text:this.language.DS_US_Phy_Rate},{attr:"value",text:"".concat(u)}]},{columns:[{attr:"property",text:this.language.RX_TX_BW_Usage},{attr:"value",text:"".concat(p)}]},{columns:[{attr:"property",text:"SNR"},{attr:"value",text:"".concat(m)}]},{columns:[{attr:"property",text:this.language.Frequency_Band},{attr:"value",text:"".concat(v)}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:"".concat(D)}]}]:"LAN"==e["intf-type"]&&(e.rgData=[{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:"".concat(i)}]},{columns:[{attr:"property",text:this.language.Hostname},{attr:"value",text:"".concat(a)}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:"".concat(s)}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:"".concat(n)}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:"".concat(r)}]},{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:"".concat(o)}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:"".concat(D)}]}])}},{key:"getAPData",value:function(e){this.searchText="",this.apInformtion="",e.clients&&e.clients.length>0&&this.populateClientDevices(e.clients,e)}},{key:"getAllClientsData",value:function(e,t,i){this.spinner.show()}},{key:"accessPoint",value:function(){this.clientDeviceSSID=!this.clientDeviceSSID,this.loadInitialDiagram(this.resValue)}},{key:"enableAllCommandHandler",value:function(){this.enable("ScrollToPart",this.APTopology.commandHandler.canScrollToPart())}},{key:"enable",value:function(e,t){var i=document.getElementById(e);i&&(i.disabled=!t)}},{key:"zoomfunctionalities",value:function(e){"ScrollToPart"==e&&this.APTopology.commandHandler.scrollToPart()}},{key:"searchDiagram",value:function(){if(this.searchText.length>1){var e=this;this.searchSubject.next(),this.searchSubject.pipe((0,K.b)(1e3)).subscribe(function(){if(e.APTopology.focus(),e.APTopology.startTransaction("highlight search"),e.searchText){var t=e.searchText.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(t,"i"),a=e.APTopology.findNodesByExample({label:i},{mac:i},{model:i});e.APTopology.highlightCollection(a),e.APTopology.highlighteds.each(function(t){var i=t.findTreeParentNode();function a(t,i,a,s){i&&e.APTopology.model.set(t.data,"_othersPassedExpanded",!0),a&&e.APTopology.model.set(t.data,"_othersFailedExpanded",!0),s&&e.APTopology.model.set(t.data,"_primariesExpanded",!0)}i&&function e(i){t.visible=!0,t.expandTree();var s=!1,n=!1,r=!1;i.findTreeChildrenNodes().each(function(e){e.data.isPassedClient&&(s=!0),e.data.isFailedClient&&(n=!0),e.data.isClient||(r=!0),e.visible=!0,e.expandTree(),a(e,s,n,r)});var o=i.findTreeParentNode();a(i,s,n,r),o&&e(o)}(i)}),a.count>0&&e.APTopology.centerRect(a.first().actualBounds)}else e.APTopology.clearHighlighteds();e.APTopology.commitTransaction("highlight search"),e.searchValue.nativeElement.focus(),setTimeout(function(){e.zoomfunctionalities("ScrollToPart")},100)})}}},{key:"refreshClick",value:function(){if(0==this.loading){this.searchText="",this.clientArr=[],this.rgArr=[],this.nodeDataArray=[],this.linkDataArray=[],this.expandedNodes=[];var e=document.getElementById("showConnection");e&&(e.checked=!1),this.clientDeviceSSID=!1,this.APTopology.clearHighlighteds(),this.getData()}}},{key:"changeScaleDiagram",value:function(e,t){var i=this.APTopology.scale;"dropDown"==t?this.APTopology.scale=e:"decrease"==t?this.APTopology.scale=i-.25:"increase"==t&&(this.APTopology.scale=i+.25),this.zoomScale=this.APTopology.scale,this.updateDivHeight()}},{key:"setZoomScaleToFit",value:function(){var e=!1;this.zoomScale=1;do{this.APTopology.scale=this.zoomScale,e=!1}while(e);this.updateDivHeight()}},{key:"updateDivHeight",value:function(){document.getElementById("mainDiagram").style.height=Number(this.APTopology.documentBounds.height)+100+"px"||0,this.APTopology.requestUpdate()}},{key:"kbpsTO",value:function(e,t,i){return this.api.kbpsTO(e,t,i)}},{key:"bytesToSize",value:function(e){for(var t=0,i=parseInt(e,10)||0;i>=1024&&++t;)i/=1024;return i.toFixed(i<10&&t>0?1:0)+" "+["bytes","Kbps","Mbps","Gbps","Tbps","Pbps","Ebps","Zbps","Ybps"][t]}},{key:"scroll",value:function(){var e=this;setTimeout(function(){e.issueBox.nativeElement.scrollIntoView()},100)}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.ssoAuthService.pageErrorHandle(e),this.closeAlert(),this.error=!0}},{key:"closeAlert",value:function(){this.error=!1}},{key:"populateAps",value:function(e,t,i,a){var s=this;if(1==this.isAPSNodeClicked){this.clientArr=[],this.aps_issue="",this.aps_issue_length=this.clickedAPS["ap-issue-list"].length;for(var n=this.clickedAPS["ap-issue-list"],r=[],o=n.filter(function(e){return["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)}).map(function(e){return e.serialNumber}),l=(n=n.filter(function(e,t){if(!o.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;r.push(null==e?void 0:e.serialNumber)})).length-1;l>=0;l--)r.includes(n[l].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(n[l].code)&&(n.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:n[l].serialNumber,source:n[l].serialNumber,sourceId:n[l].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),n.splice(l,1));this.issueData=n.filter(function(e){var t,i;return s.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize();for(var c=0;c<n.length;c++)this.issueDescription(n[c].code,this.issueType,this.issueName,c);if(1==this.isBHNodeClicked){this.backhaul_issue="";for(var d=this.clickedBackhaul,u=0;u<d.length;u++)this.issueDescription(d[u].code,this.bhissueType,this.bhissueName,u)}}e.forEach(function(e){var n,r,o,l,c,d,u,h,g,p,m,v,f,D,y,b,T,I="",A="",x="";e.isRg||(e.category="otherNode"),e.ssid||(e.backhaul={Band:"5"},e.ssid="Backhaul SSID");var _=e.ip?"".concat(e.ip):"-",w=e.name?"".concat(e.name):"-",S=e.mac?"".concat(e.mac):"-",C=e.version?"".concat(e.version):"-",k=e.sn?"".concat(e.sn):"-";if(s.makemodel)for(var E=0;E<s.makemodel.length;E++)e.sn==s.makemodel[E].sno&&(e.model="".concat(s.makemodel[E].model),I=s.makemodel[E].model,"WAP"==JSON.parse(sessionStorage.getItem("calix.deviceData")).find(function(e){return e.modelName==I}).opModeWithOnt&&(x="Mesh(SAT)"),A=s.makemodel[E].manufacture);var M=I||"-",O=A||"-",N="";(null===(n=e.backhaul)||void 0===n?void 0:n["client-efficiency-score"])&&(N="".concat(Number((100*Number(null===(r=e.backhaul)||void 0===r?void 0:r["client-efficiency-score"])).toFixed(2)),"%"));var P=N||"-",Z="";e.backhaul&&Object.keys(e.backhaul).length>0&&(Z=e.backhaul.Band+"GHz");var L="";if(e.clients){for(var F=0;F<e.clients.length;F++)"red"==e.clients[F]["client-color"]&&(s.isapWithIssue=!0);1==s.isapWithIssue&&(e.isapWithIssue=!0),e.clients.length>0&&(L="".concat(e.clients.length))}var R=L||0,q=e["passed-clients"]?e["passed-clients"]:"0",H=e["failed-clients"]?e["failed-clients"]:" 0";if(e.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e["ap-issue-list"]&&!s.isAPSNodeClicked){s.aps_issue="",s.aps_issue_length=e["ap-issue-list"].length;for(var B=e["ap-issue-list"],U=[],G=B.filter(function(e){return["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)}).map(function(e){return e.serialNumber}),Y=(B=B.filter(function(e,t){if(!G.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;U.push(null==e?void 0:e.serialNumber)})).length-1;Y>=0;Y--)U.includes(B[Y].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(B[Y].code)&&(B.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:B[Y].serialNumber,source:B[Y].serialNumber,sourceId:B[Y].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),B.splice(Y,1));s.issueData=B.filter(function(e){var t,i;return s.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),s.issueData=s.issueData.sort(function(e,t){return e.severity<t.severity?-1:e.severity>t.severity?1:0}),s.issueList=s.issueData,s.totalissues=s.issueList.length,s.initalize();for(var V=0;V<B.length;V++)s.issueDescription(B[V].code,"aps","",V);if(null===(o=e.backhaul)||void 0===o?void 0:o["backhaul-issue-list"]){s.backhaul_issue="";for(var J=0;J<(null===(l=e.backhaul)||void 0===l?void 0:l["backhaul-issue-list"].length);J++)s.issueDescription(null===(c=e.backhaul)||void 0===c?void 0:c["backhaul-issue-list"][J].code,"backhaul","",J)}}var z=(null===(d=e.backhaul)||void 0===d?void 0:d["backhaul-tech-note"])?s.backhaul_issue:"-",Q={};s.swVersion>21.2&&(Q={columns:[{attr:"property",text:s.language.Efficiency_Score},{attr:"value",text:"".concat(P)}]}),e.rgData=[{columns:[{attr:"property",text:s.language.IP_Address},{attr:"value",text:"".concat(_)}]},{columns:[{attr:"property",text:s.language.MAC_Address},{attr:"value",text:"".concat(S)}]},{columns:[{attr:"property",text:s.language.Name},{attr:"value",text:"".concat(w)}]},{columns:[{attr:"property",text:s.language.Software_Version},{attr:"value",text:"".concat(C)}]},{columns:[{attr:"property",text:s.language.Serial_Number},{attr:"value",text:"".concat(k)}]},{columns:[{attr:"property",text:s.language.Device},{attr:"value",text:"".concat(x)}]},{columns:[{attr:"property",text:s.language.Model},{attr:"value",text:"".concat(M)}]},{columns:[{attr:"property",text:s.language.Manufacturer},{attr:"value",text:"".concat(O)}]},Q,{columns:[{attr:"property",text:s.language.Total_Clients},{attr:"value",text:"".concat(R)}]},{columns:[{attr:"property",text:s.language.Devices_without_issues_and_warnings},{attr:"value",text:"".concat(q)}]},{columns:[{attr:"property",text:s.language.Devices_with_issues_and_warnings},{attr:"value",text:"".concat(H)}]},{columns:[{attr:"property",text:s.language.issue},{attr:"value",text:"".concat(e["ap-tech-note"]?s.aps_issue:"-")}]},{columns:[{attr:"property",text:s.language.Backhaul_Issue},{attr:"value",text:"".concat(z)}]}],"green"==e["ap-color"]&&"green"==(null===(u=e.backhaul)||void 0===u?void 0:u["backhaul-color"])||"green"==e["ap-color"]||"red"==(null===(h=e.backhaul)||void 0===h?void 0:h["backhaul-color"])?(e.color=s.nodeColor.green,e.source=s.accessPointImages.green):"red"==e["ap-color"]||"red"==(null===(g=e.backhaul)||void 0===g?void 0:g["backhaul-color"])?(e.color=s.nodeColor.red,e.source=s.accessPointImages.red):("yellow"==e["ap-color"]||"yellow"==(null===(p=e.backhaul)||void 0===p?void 0:p["backhaul-color"]))&&(e.color="#fff17a8c",e.source=s.accessPointImages.yellow),"false"==e["ap-online"]&&(e.color=s.nodeColor.red),e.width=30,e.height=30,e.key=e.mac,e.isAPS=!0,e.name&&(e.isInternet=!0),e["parent-host-name"]=i.mac,e.label=e.name?e.hostname?"".concat(e.hostname,"\n ").concat(e.name):"".concat(e.sn," \n ").concat(e.name):e.hostname?"".concat(e.hostname):"".concat(e.sn);var j=(null===(m=e.backhaul)||void 0===m?void 0:m["rx-phy-rate"])?s.kbpsTO(null===(v=e.backhaul)||void 0===v?void 0:v["rx-phy-rate"])+"bps":s.kbpsTO(0)+"bps",K=(null===(f=e.backhaul)||void 0===f?void 0:f["tx-phy-rate"])?s.kbpsTO(null===(D=e.backhaul)||void 0===D?void 0:D["tx-phy-rate"])+"bps":s.kbpsTO(0)+"bps";if("WiFi"==e["int-type"]&&e.backhaul.satPlacementRating){10==e.backhaul.satPlacementRating?(e.wirelessIcon=s.imagesObj["wireless-excellent"],e.satellite_placement="Excellent"):11==e.backhaul.satPlacementRating?(e.wirelessIcon=s.imagesObj["wireless-good"],e.satellite_placement="Good"):12==e.backhaul.satPlacementRating?(e.wirelessIcon=s.imagesObj["wireless-good"],e.satellite_placement="Ok"):13==e.backhaul.satPlacementRating?(e.wirelessIcon=s.imagesObj["wireless-toofar"],e.satellite_placement="Too Far"):0==e.backhaul.satPlacementRating?(e.wirelessIcon=s.imagesObj["wireless-tooclose"],e.satellite_placement="Too Close"):-1==e.backhaul.satPlacementRating&&(e.wirelessIcon=s.imagesObj["wireless-unavailable"],e.satellite_placement="Unknown"),e.backhaul.rssi>=-50?e.rssi_signal_strength="Excellent":e.backhaul.rssi>=-66&&e.backhaul.rssi<=-51?e.rssi_signal_strength="Good":e.backhaul.rssi>=-69&&e.backhaul.rssi<=-67?e.rssi_signal_strength="Ok":e.backhaul.rssi>=-79&&e.backhaul.rssi<=-70?e.rssi_signal_strength="Weak":e.backhaul.rssi<=-80&&(e.rssi_signal_strength="Very Weak"),e.ap_rssi=e.backhaul.rssi,e.satPlacementRating=e.backhaul.satPlacementRating,e.ap_rssi_signal_strength=e.backhaul.rssi,e.ap_backhaul_tech_note=(null===(y=e.backhaul)||void 0===y?void 0:y["backhaul-tech-note"])||"-";var X=e.satellite_placement?e.satellite_placement:"-",$=e.ap_rssi?e.ap_rssi:"-",ee=e.ap_backhaul_tech_note?s.backhaul_issue:"-";e.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e.ap_rssi_tooltip=[{columns:[{attr:"property",text:s.language.Satellite_Placement},{attr:"value",text:"".concat(X)}]},{columns:[{attr:"property",text:"RSSI"},{attr:"value",text:"".concat($," dBm")}]},{columns:[{attr:"property",text:"".concat(s.language.issue," ").concat(s.language.warning)},{attr:"value",text:"".concat(ee)}]}]}if(s.nodeDataArray.push(e),s.clientDeviceSSID&&"true"==e["ap-online"]){var te="Ethernet Port";e["eth-port"]&&(te="".concat(te," ").concat(e["eth-port"]));var ie={text:"ssid",key:"".concat(i.sn,"-").concat(e.ssid),accessPointId:"",color:"#f3f3f3",label:e.ssid,source:"assets/images/Icon_Device_Wifi scaled.svg",freqBand:Z,ssidKey:"",isAPSSID:!0,isConnectivityNode:!0,category:"otherNode"},ae={text:"ethernet",key:"ethernet-".concat(e["eth-port"],"-").concat(i.sn),accessPointId:"",color:"#f3f3f3",label:te,source:"assets/images/ethernet.png",width:17,height:30,isAPSSID:!0,isEthernet:!0,isConnectivityNode:!0,category:"otherNode"};ie.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];var se="-",ne="-";i["radio-airtime"]&&i["radio-airtime"].forEach(function(t){var i,a=t.name.split("RadioAirtime");(null===(i=null==e?void 0:e.ssid)||void 0===i?void 0:i.includes(a[1]))&&(se=t.result.ChannelUtilization,ne=t.result.ChannelInterferenceTime)}),ie.rgData=[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:s.language.Channel},{attr:"value",text:(null===(b=e.backhaul)||void 0===b?void 0:b.channel)?null===(T=e.backhaul)||void 0===T?void 0:T.channel:"-"}]},{columns:[{attr:"property",text:"Airtime Utilization"},{attr:"value",text:se}]},{columns:[{attr:"property",text:"Airtime Interference"},{attr:"value",text:ne}]}],ae.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],ae.rgData=[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]}],i.ethernetId=ae.key,i.ssidId=ie.key;var re,oe=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];if(re=e&&"WiFi"==e["int-type"]?[{columns:[{attr:"property",text:s.language.Transmit_rate},{attr:"value",text:K}]},{columns:[{attr:"property",text:s.language.Receive_rate},{attr:"value",text:j}]}]:[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]}],"WiFi"==e["int-type"]){if(e.ssid&&(s.nodeDataArray.find(function(e){return e.key==ie.key})||(s.nodeDataArray.push(ie),ie.ssidKey=e.ssid)),!s.linkDataArray.find(function(e){return e.from==i.mac&&e.to==ie.key})){var le=[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:s.language.Band},{attr:"value",text:"".concat(e.backhaul.Band,"GHz")}]},{columns:[{attr:"property",text:s.language.Mode},{attr:"value",text:e.backhaul.Mode}]}];e.ssid&&s.linkDataArray.push({from:i.mac,to:ie.key,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,linkColumn:[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],linkText:le})}s.linkDataArray.push(e.ssid?{from:ie.key,to:e.mac,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,linkColumn:oe,linkText:re}:{from:i.mac,to:e.mac,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,name:""})}else"eth"===e["int-type"]||"LAN"==e["int-type"]?(e["int-type"]&&(s.nodeDataArray.find(function(e){return e.key==ae.key})||s.nodeDataArray.push(ae)),s.linkDataArray.find(function(e){return e.from==i.mac&&e.to==ae.key})||s.linkDataArray.push({from:i.mac,to:ae.key,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,linkColumn:oe,linkText:[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]}]}),s.linkDataArray.push({from:ae.key,to:e.mac,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,linkColumn:oe,linkText:re})):s.linkDataArray.push({from:i.mac,to:e.mac,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,name:""})}else{var ce,de=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];if("false"==e["ap-online"]&&s.clientDeviceSSID&&(e.offlineAP=!0),"eth"===e["int-type"]||"LAN"===e["int-type"])s.linkDataArray.push({from:i.mac,to:e.mac,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,linkColumn:de,linkText:[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]}]});else ce=e&&"WiFi"==e["int-type"]?[{columns:[{attr:"property",text:s.language.Transmit_rate},{attr:"value",text:K}]},{columns:[{attr:"property",text:s.language.Receive_rate},{attr:"value",text:j}]}]:e&&"LAN"==e["int-type"]?[{columns:[{attr:"property",text:s.language.Connection_Type},{attr:"value",text:e["int-type"]}]}]:"","false"==e["ap-online"]&&(ce=""),s.linkDataArray.push({from:i.mac,to:e.mac,color:"true"==e["ap-online"]?s.nodeLinkColor.green:s.nodeLinkColor.red,thick:2,routing:W.Link.Normal,linkColumn:de,linkText:ce})}Array.isArray(e.aps)&&e.aps.length>0&&s.populateAps(e.aps,t,e,a)})}},{key:"populateClientDevices",value:function(e,t){var i=this;if(e.sort(function(e,t){var i,a,s,n;return(null===(i=e.hostname)||void 0===i?void 0:i.toLowerCase())<(null===(a=t.hostname)||void 0===a?void 0:a.toLowerCase())?-1:(null===(s=e.hostname)||void 0===s?void 0:s.toLowerCase())>(null===(n=t.hostname)||void 0===n?void 0:n.toLowerCase())?1:0}),1==this.isClientNodeClicked){this.clientArr=[],this.client_issue="";for(var a=this.clickedClient["client-issue-list"],s=0;s<a.length;s++)this.issueDescription(a[s].code,this.issueType,this.issueName,s)}e.forEach(function(e){i.clientNodeDetails(e),e.key=e.mac,e.category="otherNode",e["parent-host-name"]=t.key;var a,s=e["signal-strength-test-result"],n=e["legacy-device-test-result"],r=e["phy-rate-test-result"],o=e["signal-strength"]?"".concat(e["signal-strength"]," dBm"):"-",l=e["wifi-mode"]?e["wifi-mode"]:"-";a=e["DS-phy-rate"]?i.kbpsTO(e["DS-phy-rate"])+"bps":i.kbpsTO(0)+"bps";var c;c=e["US-phy-rate"]?i.kbpsTO(e["US-phy-rate"])+"bps":i.kbpsTO(0)+"bps";var d;d=e.hostname?e.hostname:e.mac;var u=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],h=[{columns:[{attr:"property",text:"RSSI"},{attr:"value",text:o}]},{columns:[{attr:"property",text:i.language.Mode},{attr:"value",text:l}]},{columns:[{attr:"property",text:i.language.DS_PHY_Rate},{attr:"value",text:a}]},{columns:[{attr:"property",text:i.language.US_PHY_Rate},{attr:"value",text:c}]},{columns:[{attr:"property",text:i.language.Band},{attr:"value",text:e["freq-band"]?"".concat(e["freq-band"],"GHz"):"-"}]},{columns:[{attr:"property",text:i.language.Connection_Type},{attr:"value",text:e["intf-type"]?e["intf-type"]:"-"}]}],g=[{columns:[{attr:"property",text:i.language.Connection_Type},{attr:"value",text:e["intf-type"]}]}];e.label=d,e.width=30,e.height=30,e.model=e["fingerprint-model"];var p="";"red"==e["client-color"]?(e.color=i.nodeColor.red,p=i.nodeLinkColor.red):"green"==e["client-color"]?(e.color=i.nodeColor.green,p=i.nodeLinkColor.green):"yellow"==e["client-color"]?(e.color=i.nodeColor.yellow,p=i.nodeLinkColor.yellow):e.color="#f3f3f3",e.source=30!=e["client-type"]&&[0,1,2,3,4,5,6,7,8,9,10,11].includes(e["client-type"])?i.clientDevicesImages[e["client-type"]]:30==e["client-type"]?i.clientDevicesImages[12]:i.clientDevicesImages[13],i.nodeDataArray.push(e);var m={};if("PASS"!=s||"PASS"!=n||"PASS"!=r||"red"==e["client-color"]||e["client-note"].includes("Low efficiency score observed")?(e.isFailedClient=!0,m={from:t.key,to:e.key,color:p,thick:2,routing:W.Link.Normal,linkColumn:u,linkText:"WiFi"!=e["intf-type"]?g:h}):(e.isPassedClient=!0,m={from:t.key,to:e.key,color:p,thick:2,routing:W.Link.Normal,linkColumn:u,linkText:"WiFi"!=e["intf-type"]?g:h}),i.clientDeviceSSID){e.isSSIDClient=!0;var v="Ethernet Port";e["eth-port"]&&(v="".concat(v," ").concat(e["eth-port"]));var f=e["Channel-number"]?"".concat(e["Channel-number"]):"",D={text:"ssid",key:"".concat(t.sn,"-").concat(e.ssid,"-").concat(e["freq-band"],"-client"),accessPointId:"",color:"#f3f3f3",label:e.ssid,source:"assets/images/Icon_Device_Wifi scaled.svg",freqBand:"".concat(e["freq-band"],"GHz"),ssidKey:"",isClient:!0,isSSID:!0,isConnectivityNode:!0,category:"otherNode"},y={text:"ethernet",key:"ethernet-".concat(e["eth-port"],"-").concat(t.sn),accessPointId:"",color:"#f3f3f3",label:v,source:"assets/images/ethernet.png",width:17,height:30,isClient:!0,isSSID:!0,isEthernet:!0,isConnectivityNode:!0,category:"otherNode"};D.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];var b="-",T="-";t["radio-airtime"].forEach(function(t){var i,a=t.name.split("RadioAirtime");(null===(i=e.Connection)||void 0===i?void 0:i.includes(a[1]))&&(b=t.result.ChannelUtilization,T=t.result.ChannelInterferenceTime)}),D.rgData=[{columns:[{attr:"property",text:i.language.Connection_Type},{attr:"value",text:e["intf-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:i.language.Channel},{attr:"value",text:f}]},{columns:[{attr:"property",text:"Airtime Utilization"},{attr:"value",text:b}]},{columns:[{attr:"property",text:"Airtime Interference"},{attr:"value",text:T}]}],y.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],y.rgData=[{columns:[{attr:"property",text:i.language.Connection_Type},{attr:"value",text:e["intf-type"]}]}];var I=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];"WiFi"==e["intf-type"]?(e.ssid&&(i.nodeDataArray.find(function(e){return e.key==D.key&&!e.isAPSSID})||(i.nodeDataArray.push(D),D.ssidKey=e.ssid)),i.linkDataArray.find(function(e){return e.from==t.key&&e.to==D.key})||i.linkDataArray.push({from:t.key,to:D.key,color:p,thick:2,routing:W.Link.Normal,linkColumn:I,linkText:[{columns:[{attr:"property",text:i.language.Connection_Type},{attr:"value",text:e["intf-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:i.language.Band},{attr:"value",text:"".concat(e["freq-band"],"GHz")}]},{columns:[{attr:"property",text:i.language.Mode},{attr:"value",text:e["wifi-mode"]}]}]}),i.linkDataArray.push({from:D.key,to:e.key,color:p,thick:2,routing:W.Link.Normal,linkColumn:I,linkText:h})):("eth"===e["intf-type"]||"LAN"==e["intf-type"])&&(e["intf-type"]&&(i.nodeDataArray.find(function(e){return e.key==y.key&&!e.isAPSSID})||i.nodeDataArray.push(y)),i.linkDataArray.find(function(e){return e.from==t.key&&e.to==y.key})||i.linkDataArray.push({from:t.key,to:y.key,color:p,thick:2,routing:W.Link.Normal,linkColumn:I,linkText:y.rgData}),i.linkDataArray.push({from:y.key,to:e.key,color:p,thick:2,routing:W.Link.Normal,linkColumn:I,linkText:y.rgData}))}else"PASS"!=s||"PASS"!=n||"PASS"!=r||"red"==e["client-color"]||e["client-note"].includes("Low efficiency score observed")?e.isFailedClient=!0:e.isPassedClient=!0,e.isClient=!0,i.linkDataArray.push(m)})}},{key:"startISODate",value:function(e,t){if(null!=e){var i=new Date(e),a=i.getFullYear(),s="".concat(i.getMonth()+1),n="".concat(i.getDate());return s.length<2&&(s="0".concat(s)),n.length<2&&(n="0".concat(n)),t?"".concat(a,"-").concat(s,"-").concat(n,"T23:59:00Z"):"".concat(a,"-").concat(s,"-").concat(n,"T00:00:00Z")}}},{key:"initalize",value:function(){for(var e=0;e<this.totalissues;e++)this.isIconClicked[e]=!1,this.primaryActionButton[e]=!1,this.Description[e]=" ",this.reason[e]=" ",this.severity[e]=" "}},{key:"ngOnDestroy",value:function(){this.commandIQDataSubs&&this.commandIQDataSubs.unsubscribe(),this.qoeSubscribed&&this.qoeSubscribed.unsubscribe()}},{key:"qoeCheck",value:function(){var e=this.ssoAuthService.getScopes();Object.keys(e),this.scope.qoeRead=!1,p.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.qoe"]=e["cloud.rbac.csc.qoe"]?e["cloud.rbac.csc.qoe"]:[],e&&e["cloud.rbac.csc.qoe"]&&e["cloud.rbac.csc.qoe"].length&&-1!==e["cloud.rbac.csc.qoe"].indexOf("read")&&(this.scope.qoeRead=!0)):this.scope.qoeRead=!0;var t=sessionStorage.getItem("calix.deviceData")?JSON.parse(sessionStorage.getItem("calix.deviceData"))[0].modelName:"";return sessionStorage.getItem("calix.userFdUser"),this.ssoAuthService.acceptGSModel(t)?(this.showQoeTab=this.ssoAuthService.exosVersionCheck("21.4")&&this.scope.qoeRead,sessionStorage.getItem("qoeCheck")):(this.showQoeTab=this.scope.qoeRead,sessionStorage.getItem("qoeCheck"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.s),d.Y36(G.eN),d.Y36(m.F),d.Y36(c.gz),d.Y36(Y.t2),d.Y36(h.t6),d.Y36(v.Q),d.Y36(c.F0),d.Y36(d.sBO),d.Y36(X.v),d.Y36(y.O),d.Y36($.z),d.Y36(f.Dx))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-support-topology"]],viewQuery:function(e,t){var i;(1&e&&(d.Gf(ee,5),d.Gf(te,5),d.Gf(ie,5)),2&e)&&(d.iGM(i=d.CRH())&&(t.APDiagram=i.first),d.iGM(i=d.CRH())&&(t.searchValue=i.first),d.iGM(i=d.CRH())&&(t.issueBox=i.first))},decls:18,vars:6,consts:[[1,"m-2"],[1,"row"],["class","w-100 alert alert alert-danger fade show",4,"ngIf"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["id","top-issue-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],[1,"big-text"],["class","nav-item","id","top-topology-tab",4,"ngIf"],["class","nav-item","id","top-qoe-tab",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["class","row",4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["id","top-topology-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"],["id","top-qoe-tab",1,"nav-item"],[1,"col-md-12"],[1,"toggle-swtbtn","checkbox","switcher"],[1,"col-md-3"],[1,"refreshButton"],["id","serviceDataRefresh",1,"cursor-pointer","primary",3,"click"],[1,"fas","fa-sync","refreshicon"],[1,"col-md-9","pr-0"],[1,"accessPoint"],[1,"d-inline-flex","align-items-center","justify-content-between","search-box-input"],["name","search","id","mySearch","id","mySearch",3,"placeholder","ngModel","ngModelChange"],["searchValue",""],[1,"search-box-icon"],["id","searchSubscriberIcon","src","assets/img/ic_search_white.svg",1,"search-icon","primary",3,"click"],["for","showConnection",2,"margin-top","10px"],["type","checkbox","id","showConnection",3,"change"],[1,"zoom"],[1,"cus-button"],["id","ZoomIn",1,"mr-2","pointer",2,"font-size","24px",3,"click"],["src","assets/images/iconmonstr-minus.svg",2,"height","25px"],[1,"icon-hl",2,"width","70px"],["bindLabel","factor","bindValue","value",2,"width","75px","background-color","#ffffff","border","none",3,"ngModel","items","clearable","searchable","ngModelOptions","ngModelChange"],["id","ZoomOut",1,"pointer",2,"font-size","24px",3,"click"],["src","assets/images/iconmonstr-plus.svg",2,"height","25px"],["id","mainDiagram","class","diagram-info",4,"ngIf"],["class","nodata-info",4,"ngIf"],[4,"ngIf"],["id","mainDiagram",1,"diagram-info"],["APDiagram",""],["class","loader load",4,"ngIf"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"nodata-info"],["issueBox",""],["class","topo-info-box",4,"ngIf"],[1,"topo-info-box"],[2,"font-weight","600","line-height","0.4"],[2,"margin-left","10px"],[4,"ngFor","ngForOf"],["style","margin-left: 10px",4,"ngIf"],[1,"m-0"],[2,"font-weight","600"]],template:function(e,t){1&e&&(d._UZ(0,"app-subscriber-menu"),d.TgZ(1,"section",0),d.TgZ(2,"div",1),d.YNc(3,ae,6,1,"div",2),d.TgZ(4,"div",3),d.TgZ(5,"ul",4),d.TgZ(6,"li",5),d.TgZ(7,"a",6),d.NdJ("Click",function(e){return e.preventDefault()}),d.TgZ(8,"span",7),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.YNc(10,se,4,2,"li",8),d.YNc(11,ne,4,2,"li",9),d.qZA(),d.TgZ(12,"div",10),d.TgZ(13,"div",11),d._UZ(14,"div",12),d.qZA(),d.TgZ(15,"div",13),d._UZ(16,"div",12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(17,me,30,12,"div",14)),2&e&&(d.xp6(3),d.Q6J("ngIf",t.error),d.xp6(4),d.MGl("routerLink","/",t.MODULE,"/overview/issues"),d.xp6(2),d.Oqu(t.language.Issues),d.xp6(1),d.Q6J("ngIf",t.showTopologyTab),d.xp6(1),d.Q6J("ngIf",t.showQoeTab),d.xp6(6),d.Q6J("ngIf",t.showTopologyTab))},directives:[b.e,l.O5,c.yS,c.Od,I.Fj,I.JJ,I.On,T.w9,l.sg],styles:[".gshHeader{border-color:#a768be;font-size:13px;margin-bottom:7px}.diagram-info[_ngcontent-%COMP%]{width:100%;min-height:500px;margin-top:20px}.nodata-info[_ngcontent-%COMP%]{text-align:center;min-height:100px;margin-top:50px}.toggle-swtbtn[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.toggle-swtbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:13px}.toggle-swtbtn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:40px;cursor:pointer;color:#0279ff;font-size:larger;font-weight:700}.toggle-swtbtn[_ngcontent-%COMP%]   .refreshButton[_ngcontent-%COMP%]   .refreshicon[_ngcontent-%COMP%]{font-size:24px;color:#0279ff;margin-left:30px}.toggle-swtbtn[_ngcontent-%COMP%]   .accessPoint[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.toggle-swtbtn[_ngcontent-%COMP%]   .accessPoint[_ngcontent-%COMP%]   .zoom[_ngcontent-%COMP%]{margin-left:40px;display:flex}.cus-button[_ngcontent-%COMP%]{float:right;min-width:168px;position:relative;height:42px;display:block;border-radius:60px;border:1px solid #dcdcdc;padding:0 0 0 12px}.cus-button[_ngcontent-%COMP%]   span.icon-hl[_ngcontent-%COMP%]{display:inline-block}.cus-button[_ngcontent-%COMP%]   .bord-right[_ngcontent-%COMP%]{border-right:1px solid #dcdcdc;padding-right:8px}.cus-button[_ngcontent-%COMP%]   .bord-left[_ngcontent-%COMP%]{border-left:1px solid #dcdcdc;padding-left:8px}.cus-button[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{background-color:#fff!important;border:none!important}.cus-button[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]{overflow-y:hidden!important}.cus-button[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]{width:75px!important}.topo-info-box[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#ebeaef;border-radius:10px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]{max-height:240px!important}.search-box-input[_ngcontent-%COMP%]{border-radius:26px;background:#F8F8FA;padding:0 0 0 15px;font-size:14px;font-weight:400;width:30%;color:#646363;border:1px solid #dfdfdf;margin-right:5px}.search-box-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:38px;line-height:inherit!important;border-radius:26px;background:transparent;padding:0;font-size:14px;font-weight:400;color:#646363;border:none}.search-box-icon[_ngcontent-%COMP%]{width:42px;height:40px;background-color:#0279ff;padding:10px;border-radius:25px;cursor:pointer}"]}),e}(),fe=n(1282),De=n(16738),ye=n(91704),be=n(12664),Te=n(20723),Ie=n(18638),Ae=n(94555),xe=["clientEfficencyChartTest"];function _e(e,t){1&e&&d._UZ(0,"app-subscriber-menu")}function we(e,t){if(1&e&&(d.TgZ(0,"li",45),d.TgZ(1,"a",46),d.TgZ(2,"span",6),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw(2);d.xp6(1),d.MGl("routerLink","/",i.MODULE,"/overview/topology"),d.xp6(2),d.hij(" ",i.language.Topology,"")}}function Se(e,t){if(1&e&&(d.TgZ(0,"li",47),d.TgZ(1,"a",46),d.TgZ(2,"span",6),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw(2);d.xp6(1),d.MGl("routerLink","/",i.MODULE,"/overview/quality-of-experience"),d.xp6(2),d.Oqu(i.language["Quality of Experience"])}}function Ce(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",48),d.TgZ(1,"span",49),d._UZ(2,"img",50),d.qZA(),d.TgZ(3,"button",51),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).isError=!1}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",52),d.qZA()}if(2&e){var a=d.oxw(2);d.xp6(5),d.Q6J("innerHtml",a.alertMessage,d.oJD)}}function ke(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",48),d.TgZ(1,"span",49),d._UZ(2,"img",50),d._uU(3),d.qZA(),d.TgZ(4,"button",51),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).isDateAreEqual=!1}),d._UZ(5,"span"),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(2);d.xp6(3),d.Oqu(a.language["Both Start Time And End Time are Same"])}}function Ee(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",15),d.TgZ(1,"label",16),d._uU(2),d.qZA(),d.TgZ(3,"ng-select",17),d.NdJ("change",function(){return d.CHM(i),d.oxw(2).dropDownchange()})("ngModelChange",function(e){return d.CHM(i),d.oxw(2).TimeFrame=e}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(2);d.xp6(2),d.Oqu(a.language.TTimeFrame),d.xp6(1),d.Q6J("clearable",!1)("searchable",!1)("items",a.FrameSV)("ngModel",a.TimeFrame)}}function Me(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",53),d.TgZ(1,"label",16),d._uU(2),d.qZA(),d.TgZ(3,"ng-select",54),d.NdJ("change",function(){return d.CHM(i),d.oxw(2).dropDownchange()})("ngModelChange",function(e){return d.CHM(i),d.oxw(2).WeekFrame=e}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(2);d.xp6(2),d.Oqu(a.language.Day_s),d.xp6(1),d.Q6J("items",a.WeekFramedata)("clearable",!1)("searchable",!1)("ngModel",a.WeekFrame)}}function Oe(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"span",55),d.TgZ(1,"i",56),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).reload()}),d.qZA(),d.qZA()}}var Ne=function(){return{width:"100%",height:"38px"}},Pe=function(){return{height:"36px"}},Ze=function(){return{standalone:!0}};function Le(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",65),d.TgZ(1,"label"),d._uU(2),d.qZA(),d.TgZ(3,"p-calendar",66),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw(3).weekDate=e})("onSelect",function(){return d.CHM(i),d.oxw(3).dayUpdate()}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(3);d.xp6(2),d.Oqu(a.language.Date),d.xp6(1),d.Akn(d.DdM(10,Ne)),d.Q6J("inputStyle",d.DdM(11,Pe))("autoZIndex",!0)("ngModel",a.weekDate)("showIcon",!0)("ngModelOptions",d.DdM(12,Ze))("maxDate",a.maxDate)("minDate",a.minDate)}}function Fe(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",67),d.TgZ(1,"label"),d._uU(2),d.qZA(),d.TgZ(3,"p-calendar",68),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw(3).startDate=e})("onSelect",function(){return d.CHM(i),d.oxw(3).startTimeUpdate()}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(3);d.xp6(2),d.hij("",a.language["Start Time"]," "),d.xp6(1),d.Akn(d.DdM(13,Ne)),d.Q6J("ngModel",a.startDate)("stepMinute",a.stepMinuteVal)("inputStyle",d.DdM(14,Pe))("autoZIndex",!0)("showIcon",!0)("ngModelOptions",d.DdM(15,Ze))("timeOnly",a.showHrs)("panelStyleClass",a.isLastDay15minSelected?"":"hideMin")("minDate",a.minStartTime)("maxDate",a.maxStartTime)}}function Re(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",67),d.TgZ(1,"label"),d._uU(2),d.qZA(),d.TgZ(3,"p-calendar",69),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw(3).endDate=e})("onSelect",function(){return d.CHM(i),d.oxw(3).endTimeUpdate()}),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(3);d.xp6(2),d.hij("",a.language["End Time"]," "),d.xp6(1),d.Akn(d.DdM(14,Ne)),d.Q6J("stepMinute",a.stepMinuteVal)("inputStyle",d.DdM(15,Pe))("autoZIndex",!0)("ngModel",a.endDate)("showIcon",!0)("ngModelOptions",d.DdM(16,Ze))("timeOnly",a.showHrs)("disabled",a.isEndDateDisabled)("panelStyleClass",a.isLastDay15minSelected?"":"hideMin")("minDate",a.minEndTime)("maxDate",a.maxEndTime)}}function qe(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",57),d.TgZ(1,"div",58),d.TgZ(2,"label"),d._uU(3),d.qZA(),d.TgZ(4,"ng-select",59),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw(2).onTimeFrameChange(e)})("ngModelChange",function(e){return d.CHM(i),d.oxw(2).TimeFrame=e}),d.qZA(),d.qZA(),d.YNc(5,Le,4,13,"div",60),d.YNc(6,Fe,4,16,"div",61),d.YNc(7,Re,4,17,"div",61),d.TgZ(8,"div",62),d.TgZ(9,"div",63),d.TgZ(10,"button",64),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).loadChart()}),d._uU(11),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(2);d.xp6(3),d.Oqu(a.language.TTimeFrame),d.xp6(1),d.Q6J("items",a.Frame)("ngModel",a.TimeFrame),d.xp6(1),d.Q6J("ngIf",a.start&&!a.isLastDay15minSelected),d.xp6(1),d.Q6J("ngIf",a.start),d.xp6(1),d.Q6J("ngIf",a.start),d.xp6(4),d.hij(" ",a.language.apply," ")}}function He(e,t){1&e&&(d.TgZ(0,"div",73),d.TgZ(1,"div",74),d.TgZ(2,"div",75),d.TgZ(3,"div",76),d._UZ(4,"span",77),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function Be(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var i=d.oxw(3);d.xp6(1),d.Oqu(i.language["Last 24h"])}}function Ue(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var i=d.oxw(3);d.xp6(1),d.Oqu(i.language["Last 1week"])}}function We(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",78),d.TgZ(1,"ngx-slider",79),d.NdJ("valueChange",function(e){return d.CHM(i),d.oxw(3).selectedInterval=e})("userChangeEnd",function(){return d.CHM(i),d.oxw(3).sliderEvent()}),d.qZA(),d.TgZ(2,"span",80),d.TgZ(3,"label"),d._uU(4),d.qZA(),d.qZA(),d.TgZ(5,"span",81),d.TgZ(6,"label"),d._uU(7),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(3);d.xp6(1),d.Q6J("value",a.selectedInterval)("options",a.timeIntervalOptions),d.xp6(3),d.hij(" ",a.leftSliderTime,""),d.xp6(3),d.Oqu(a.rightSliderTime)}}function Ge(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",57),d.TgZ(1,"div",82),d.TgZ(2,"div",63),d.TgZ(3,"button",64),d.NdJ("click",function(){return d.CHM(i),d.oxw(3).loadChart()}),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(3);d.xp6(4),d.hij(" ",a.language.apply," ")}}function Ye(e,t){if(1&e&&(d.TgZ(0,"section",70),d.YNc(1,He,5,0,"div",24),d.TgZ(2,"div",71),d.TgZ(3,"label"),d._uU(4),d.qZA(),d.YNc(5,Be,2,1,"span",0),d.YNc(6,Ue,2,1,"span",0),d.qZA(),d.YNc(7,We,8,4,"div",72),d.YNc(8,Ge,5,1,"div",21),d.qZA()),2&e){var i=d.oxw(2);d.xp6(1),d.Q6J("ngIf",i.loader),d.xp6(1),d.s9C("title",i.language["Chart Timeframe"]),d.xp6(2),d.Oqu(i.language["Chart Timeframe"]),d.xp6(1),d.Q6J("ngIf",6==i.TimeFrame),d.xp6(1),d.Q6J("ngIf",4==i.TimeFrame),d.xp6(1),d.Q6J("ngIf",i.showIntervalSlider),d.xp6(1),d.Q6J("ngIf",!1)}}function Ve(e,t){1&e&&(d.TgZ(0,"div",73),d.TgZ(1,"div",74),d.TgZ(2,"div",75),d.TgZ(3,"div",76),d._UZ(4,"span",77),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function Je(e,t){1&e&&(d.TgZ(0,"div",73),d.TgZ(1,"div",74),d.TgZ(2,"div",75),d.TgZ(3,"div",76),d._UZ(4,"span",77),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function ze(e,t){1&e&&(d.TgZ(0,"div",73),d.TgZ(1,"div",74),d.TgZ(2,"div",75),d.TgZ(3,"div",76),d._UZ(4,"span",77),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function Qe(e,t){1&e&&(d.TgZ(0,"div",73),d.TgZ(1,"div",74),d.TgZ(2,"div",75),d.TgZ(3,"div",76),d._UZ(4,"span",77),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function je(e,t){if(1&e&&(d.TgZ(0,"div",74),d.TgZ(1,"div",75),d.TgZ(2,"div",76),d.TgZ(3,"span",77),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw(3);d.xp6(4),d.Oqu(i.language.Loading)}}function Ke(e,t){if(1&e){var i=d.EpF();d.YNc(0,je,5,1,"div",83),d.TgZ(1,"div",84),d._UZ(2,"h4",85),d.TgZ(3,"button",86),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).close()}),d._UZ(4,"span",87),d.qZA(),d.qZA(),d.TgZ(5,"div",88),d.TgZ(6,"section"),d.TgZ(7,"div",57),d.TgZ(8,"div",25),d.TgZ(9,"div",89),d._uU(10),d.TgZ(11,"span",90),d._uU(12),d.qZA(),d.qZA(),d.TgZ(13,"div",27),d._UZ(14,"div",91),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var a=d.oxw(2);d.Q6J("ngIf",a.effLoader),d.xp6(10),d.hij(" ",a.language["Client Efficiency"]," - "),d.xp6(2),d.hij("",a.clientDates," ")}}var Xe=function(e){return{opac:e}};function $e(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"ul",3),d.TgZ(4,"li",4),d.TgZ(5,"a",5),d.NdJ("Click",function(e){return e.preventDefault()}),d.TgZ(6,"span",6),d._uU(7),d.qZA(),d.qZA(),d.qZA(),d.YNc(8,we,4,2,"li",7),d.YNc(9,Se,4,2,"li",8),d.qZA(),d.TgZ(10,"div",9),d.TgZ(11,"div",10),d._UZ(12,"div",11),d.qZA(),d.TgZ(13,"div",12),d._UZ(14,"div",11),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(15,"section"),d.YNc(16,Ce,6,1,"div",13),d.YNc(17,ke,6,1,"div",13),d.TgZ(18,"div",14),d.TgZ(19,"div",15),d.TgZ(20,"label",16),d._uU(21),d.qZA(),d.TgZ(22,"ng-select",17),d.NdJ("change",function(){return d.CHM(i),d.oxw().dropDownchange()})("ngModelChange",function(e){return d.CHM(i),d.oxw().TimeFrame=e}),d.qZA(),d.qZA(),d.YNc(23,Ee,4,5,"div",18),d.YNc(24,Me,4,5,"div",19),d.YNc(25,Oe,2,0,"span",20),d.qZA(),d.YNc(26,qe,12,7,"div",21),d.YNc(27,Ye,9,7,"section",22),d.qZA(),d.TgZ(28,"section"),d.TgZ(29,"div",23),d.YNc(30,Ve,5,0,"div",24),d.TgZ(31,"div",25),d.TgZ(32,"div",26),d._uU(33),d.qZA(),d.TgZ(34,"div",27),d._UZ(35,"div",28),d.TgZ(36,"div",29),d._UZ(37,"span",30),d.TgZ(38,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(1,"qoeGood")}),d._uU(39),d.qZA(),d._UZ(40,"span",32),d.TgZ(41,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(1,"qoeFair")}),d._uU(42),d.qZA(),d._UZ(43,"span",33),d.TgZ(44,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(1,"qoePoor")}),d._uU(45),d.qZA(),d._UZ(46,"span",34),d.TgZ(47,"span",35),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(1,"qoeNoData")}),d._uU(48),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"section"),d.TgZ(50,"div",23),d.YNc(51,Je,5,0,"div",24),d.TgZ(52,"div",25),d.TgZ(53,"div",36),d._uU(54),d.qZA(),d.TgZ(55,"div",27),d._UZ(56,"div",37),d.TgZ(57,"div",29),d._UZ(58,"span",30),d.TgZ(59,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(2,"serviceGood")}),d._uU(60),d.qZA(),d._UZ(61,"span",32),d.TgZ(62,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(2,"serviceFair")}),d._uU(63),d.qZA(),d._UZ(64,"span",33),d.TgZ(65,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(2,"servicePoor")}),d._uU(66),d.qZA(),d._UZ(67,"span",34),d.TgZ(68,"span",35),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(2,"serviceNoData")}),d._uU(69),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(70,"section"),d.TgZ(71,"div",23),d.YNc(72,ze,5,0,"div",24),d.TgZ(73,"div",25),d.TgZ(74,"div",38),d._uU(75),d.qZA(),d.TgZ(76,"div",27),d._UZ(77,"div",39),d.TgZ(78,"div",29),d._UZ(79,"span",30),d.TgZ(80,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(3,"contGood")}),d._uU(81),d.qZA(),d._UZ(82,"span",33),d.TgZ(83,"span",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(3,"contPoor")}),d._uU(84),d.qZA(),d._UZ(85,"span",34),d.TgZ(86,"span",35),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(3,"contNoData")}),d._uU(87),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(88,"section"),d.TgZ(89,"div",23),d.YNc(90,Qe,5,0,"div",24),d.TgZ(91,"div",25),d.TgZ(92,"div",40),d._uU(93),d.qZA(),d.TgZ(94,"div",27),d._UZ(95,"div",41),d.TgZ(96,"div",29),d._UZ(97,"span",42),d.TgZ(98,"span",43),d.NdJ("click",function(){return d.CHM(i),d.oxw().filterContent(4,"homeData")}),d._uU(99),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(100,Ke,15,3,"ng-template",null,44,d.W1O),d.qZA()}if(2&e){var a=d.oxw();d.xp6(5),d.MGl("routerLink","/",a.MODULE,"/overview/issues"),d.xp6(2),d.hij(" ",a.language.Issues,""),d.xp6(1),d.Q6J("ngIf",a.showTopologyTab),d.xp6(1),d.Q6J("ngIf",a.showQoeTab),d.xp6(7),d.Q6J("ngIf",a.isError),d.xp6(1),d.Q6J("ngIf",a.isDateAreEqual),d.xp6(4),d.Oqu(a.language.TTimeFrame),d.xp6(1),d.Q6J("clearable",!1)("searchable",!1)("items",a.Frame)("ngModel",a.TimeFrame),d.xp6(1),d.Q6J("ngIf",a.softwareVersion<22.1),d.xp6(1),d.Q6J("ngIf",4==a.TimeFrame),d.xp6(1),d.Q6J("ngIf",!0),d.xp6(1),d.Q6J("ngIf",!1),d.xp6(1),d.Q6J("ngIf",6==a.TimeFrame||4==a.TimeFrame),d.xp6(3),d.Q6J("ngIf",a.loader),d.xp6(3),d.hij("",a.language["QoE Score"]," "),d.xp6(5),d.Q6J("ngClass",d.VKq(48,Xe,!a.legendType.qoeGood)),d.xp6(1),d.Oqu(a.language.Good),d.xp6(2),d.Q6J("ngClass",d.VKq(50,Xe,!a.legendType.qoeFair)),d.xp6(1),d.Oqu(a.language.Fair),d.xp6(2),d.Q6J("ngClass",d.VKq(52,Xe,!a.legendType.qoePoor)),d.xp6(1),d.Oqu(a.language.Poor),d.xp6(2),d.Q6J("ngClass",d.VKq(54,Xe,!a.legendType.qoeNoData)),d.xp6(1),d.Oqu(a.language["No Data Available"]),d.xp6(3),d.Q6J("ngIf",a.loader),d.xp6(3),d.hij(" ",a.language["WAN Service"]," "),d.xp6(5),d.Q6J("ngClass",d.VKq(56,Xe,!a.legendType.serviceGood)),d.xp6(1),d.Oqu(a.language.Good),d.xp6(2),d.Q6J("ngClass",d.VKq(58,Xe,!a.legendType.serviceFair)),d.xp6(1),d.Oqu(a.language.Fair),d.xp6(2),d.Q6J("ngClass",d.VKq(60,Xe,!a.legendType.servicePoor)),d.xp6(1),d.Oqu(a.language.Poor),d.xp6(2),d.Q6J("ngClass",d.VKq(62,Xe,!a.legendType.serviceNoData)),d.xp6(1),d.Oqu(a.language["No Data Available"]),d.xp6(3),d.Q6J("ngIf",a.loader),d.xp6(3),d.hij(" ",a.language["WAN Continuity"]," "),d.xp6(5),d.Q6J("ngClass",d.VKq(64,Xe,!a.legendType.contGood)),d.xp6(1),d.Oqu(a.language["WAN Up"]),d.xp6(2),d.Q6J("ngClass",d.VKq(66,Xe,!a.legendType.contPoor)),d.xp6(1),d.Oqu(a.language["WAN Down"]),d.xp6(2),d.Q6J("ngClass",d.VKq(68,Xe,!a.legendType.contNoData)),d.xp6(1),d.Oqu(a.language["No Data Available"]),d.xp6(3),d.Q6J("ngIf",a.loader),d.xp6(3),d.hij(" ",a.language["Whole Home Efficiency"],""),d.xp6(5),d.Q6J("ngClass",d.VKq(70,Xe,!a.legendType.homeData)),d.xp6(1),d.Oqu(a.language["Whole Home Efficiency Score"])}}var et=[{path:"",component:g,children:[{path:"issues",component:U,data:{title:"Calix Suppport Cloud - issues"}},{path:"topology",component:ve,data:{title:"Calix Suppport Cloud - topology"}},{path:"quality-of-experience",component:function(){var i=function(){function i(e,t,a,n,r,o,c,d,u,h){s(this,i),this.router=e,this.dialogService=t,this.translateService=a,this.dataChartService=n,this.ssoService=r,this.deviceService=o,this.IssuesService=c,this.titleService=d,this.elementRef=u,this.cdRef=h,this.lastSeventhDay=De().subtract(144,"hours").format("dddd"),this.lastSixthDay=De().subtract(120,"hours").format("dddd"),this.lastfifthDay=De().subtract(96,"hours").format("dddd"),this.lastFourthDay=De().subtract(72,"hours").format("dddd"),this.lastThirdDay=De().subtract(48,"hours").format("dddd"),this.yesterDay=De().subtract(24,"hours").format("dddd"),this.toDay=De().format("dddd"),this.WeekFramedata=[],this.pipe=new l.uU("en-US"),this.MODULE="support",this.deviceInfo=[],this.globalObj={},this.mess=!1,this.isError=!1,this.error=!1,this.loader=!1,this.effLoader=!1,this.showHrs=!0,this.scope={qoeRead:!1,topologyRead:!1},this.isDateAreEqual=!1,this.appliedTimeFrame=2,this.avgEff={},this.summaryData=[],this.legendType={qoeDash:!0,qoeSolid:!0,serviceGood:!0,serviceFair:!0,servicePoor:!0,qoeGood:!0,qoeFair:!0,qoePoor:!0,qoeNoData:!0,serviceNoData:!0,contGood:!0,contFair:!0,contPoor:!0,contNoData:!0,homeData:!0,clientData:!0},this.timeIntervalOptions={hideLimitLabels:!0,onlyBindHandles:!0,stepsArray:[]},this.showIntervalSlider=!1,this.TimeInterval=1,this.showTopologyTab=!1,this.showQoeTab=!1,this.isDevEnv=!1,this.userClickTimeout=setTimeout(function(){},0),this.value3=0,this.options3={disabled:!0,showTicksValues:!1,stepsArray:[{value:0},{value:1},{value:2},{value:3},{value:4},{value:5}]},this.WeekFrame=7,this.TimeFrame=2,this.Frame=[{id:1,name:"Last 7 days"},{id:2,name:"Last 24 hours"},{id:3,name:"Last 3 hours"},{id:5,name:"Last 15 minutes"},{id:6,name:"Any 15 minutes within last day"},{id:4,name:"Any 3 Hours within last week"}],this.FrameSV=[{id:2,name:"Last 24 hours"},{id:3,name:"Last 3 hours"},{id:5,name:" Last 15 minutes"},{id:6,name:" Any 15 minutes within last day"}],this.maxDate=new Date,this.minDate=new Date,this.formDate=new Date(this.minDate.setDate(this.minDate.getDate()-6)),this.stepMinuteVal=0,this.isEndDateDisabled=!0,this.isLastDay15minSelected=!1,this.minStartTime=new Date,this.maxStartTime=new Date,this.minEndTime=new Date,this.maxEndTime=new Date,this.silderDataAvail=!1,this.time="",this.MODULE=this.router.url.indexOf("/support/")>-1?"support":"cco",this.qoeCheck(),this.getScopes(),this.lastdays15MinOfValues()}return r(i,[{key:"inClick",value:function(e){var t=e.target.id?e.target.id:"";if("slider-click-next"==t||"slider-click-prev"==t){e.stopPropagation();var i=e.target.className?e.target.className.split(" ")[0]:"",a=this.timeIntervals.length-1;if("slider-click-next"==t){var s=parseInt(i.split("-")[1]);s+1<=a&&(this.selectedInterval=s+1)}if("slider-click-prev"==t){var n=parseInt(i.split("-")[1]);n-1>=0&&(this.selectedInterval=n-1)}this.handleUserTime()}}},{key:"ngAfterViewInit",value:function(){this.Frame=[{id:1,name:this.language["Last 7 days"]},{id:2,name:this.language.Last_hours},{id:3,name:this.language["Last 3 hours"]},{id:5,name:this.language["Last 15 minutes"]},{id:6,name:this.language["Any 15 minutes within last day"]},{id:4,name:this.language["Any 3 Hours within last week"]}]}},{key:"reload",value:function(){this.lastdays15MinOfValues(),this.loadChart()}},{key:"handleUserTime",value:function(){var e=this;clearTimeout(this.userClickTimeout),this.userClickTimeout=setTimeout(function(){e.loadChart()},2e3)}},{key:"ngOnInit",value:function(){var e,t,i=this;this.weekDate=this.maxDate=new Date,this.endDate=De(this.startDate).add(15,"m").toDate(),ye(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE");var a,s=JSON.parse(sessionStorage.getItem("calix.deviceData"));this.isDevEnv=this.ssoService.API.includes("dev"),(null==s?void 0:s.length)>0&&(((a=s.filter(function(e){return"RG"==e.opMode})).length||this.ssoService.acceptGSModel((null===(e=a[0])||void 0===e?void 0:e.modelName)||""))&&(this.softwareVersion=null===(t=a[0].softwareVersion)||void 0===t?void 0:t.substring(0,4),this.serialNumberSelected=a[0].serialNumber,this.mac=a[0].macAddress,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){i.language=e,i.titleService.setTitle("".concat(i.language["Quality of Experience"]," - ").concat(i.language.Overview," - ").concat(i.language.Support," - ").concat(i.language["Calix Cloud"])),i.Frame=[{id:1,name:i.language["Last 7 days"]},{id:2,name:i.language.Last_hours},{id:3,name:i.language["Last 3 hours"]},{id:5,name:i.language["Last 15 minutes"]},{id:6,name:i.language["Any 15 minutes within last day"]},{id:4,name:i.language["Any 3 Hours within last week"]}],i.loadChart();for(var t=0,a=Object.keys(i.legendType);t<a.length;t++){var s=a[t];i.legendType[s]=!0}}),this.titleService.setTitle("".concat(this.language["Quality of Experience"]," - ").concat(this.language.Overview," - ").concat(this.language.Support," - ").concat(this.language["Calix Cloud"])),this.orgId=this.ssoService.getOrgId(),this.IssuesService.rebootAndUpgradeEvent(this.orgId,this.serialNumberSelected).subscribe(function(e){i.WanShowup=e}),this.loadChart(),this.dataChartService.showTopology.subscribe(function(e){i.showTopologyTab=e}),this.qoeSubscribed=this.dataChartService.showQoe.subscribe(function(e){i.showQoeTab=e})))}},{key:"ngOnDestroy",value:function(){this.qoeSubscribed&&this.qoeSubscribed.unsubscribe()}},{key:"clearFilter",value:function(){this.startDate="",this.endDate=""}},{key:"startTimeUpdate",value:function(){this.endDate=De(this.startDate).add(this.stepMinuteVal,"m").toDate(),this.isEndDateDisabled=this.isLastDay15minSelected,this.isDateAreEqual=this.start&&De(this.startDate).isSame(this.endDate),4==this.TimeFrame&&(this.minEndTime=De(this.startDate).add(60,"m").toDate())}},{key:"endTimeUpdate",value:function(){this.isDateAreEqual=this.start&&De(this.startDate).isSame(this.endDate)}},{key:"onTimeFrameChange",value:function(e){if(this.isEndDateDisabled=!0,this.isLastDay15minSelected=6==e,6==e){this.start=!0,this.stepMinuteVal=15;var t=9e5,i=new Date;this.startDate=this.endDate=new Date(Math.floor(i.getTime()/t)*t),this.startDate=De(this.endDate).add(-15,"m").toDate(),this.showHrs=!0,this.setMinMax(6)}else 4==e?(this.startDate=this.endDate="",this.isEndDateDisabled=!1,this.start=!0,this.stepMinuteVal=60,t=3e5,(i=new Date).setMinutes(0),this.startDate=this.endDate=new Date(Math.round(i.getTime()/t)*t),this.startDate=De(this.endDate).add(-60,"m").toDate(),this.setMinMax(4),this.showHrs=!0):this.start=!1}},{key:"setMinMax",value:function(e){var t=this.weekDate;if(t.setMinutes(0),4==e){var i=3e5;if(De(t).isSame(Date.now(),"day")){var a=new Date;a.setMinutes(0),this.startDate=this.endDate=new Date(Math.round(a.getTime()/i)*i),this.startDate=De(this.endDate).add(-60,"m").toDate();var s=De(t).startOf("day").toDate();this.minStartTime=s,this.minEndTime=De(this.startDate).add(60,"m").toDate(),this.maxStartTime=this.startDate,this.maxEndTime=this.endDate}else{var n,r;n=De(t).startOf("day").toDate(),r=De(t).endOf("day").toDate(),this.minStartTime=n,this.minEndTime=De(this.startDate).add(60,"m").toDate(),this.maxStartTime=De(r).add(-60,"m").toDate(),this.maxEndTime=r}}else if(6==e){var o=De(new Date).startOf("day").toDate();this.minStartTime=o,this.minEndTime=De(this.startDate).add(15,"m").toDate(),this.maxStartTime=De(this.endDate).add(-15,"m").toDate(),this.maxEndTime=this.endDate}}},{key:"dayUpdate",value:function(){this.setMinMax(this.TimeFrame)}},{key:"sliderEvent",value:function(){var e=this;setTimeout(function(){(6==e.TimeFrame||4==e.TimeFrame)&&(e.showIntervalSlider=!0),e.loadChart()},500)}},{key:"dropDownchangeweek",value:function(){var e=this,i=this.WeekFrame;if(1==i){var a,s,n,r=new Date,o=9e5,l=this,c=De(new Date(Math.floor(r.getTime()/o)*o)).seconds(0).milliseconds(0),d=De(c).subtract(144,"hours");s=new Date(d._d.setHours(0,0,0,0)),n=new Date(d._d.setHours(24,0,0,0));var u=(new Date).setSeconds(0,0);Math.ceil((u-new Date(De(d).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];for(var h=De(s),g=0;h<=n;)this.timeIntervals.push({value:g,legend:De(h).format("MM/DD/YYYY HH:mm"),date:De(h).toDate()}),De(h),h.add(180,"minutes"),g++;a=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[a-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(l.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(l.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[a-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(2==i){var p,m=new Date,v=9e5,f=this,D=De(new Date(Math.floor(m.getTime()/v)*v)).seconds(0).milliseconds(0),y=De(D).subtract(144,"hours");s=new Date(y._d.setHours(24,0,0,0)),n=new Date(y._d.setHours(24,0,0,0));var b=(new Date).setSeconds(0,0);Math.ceil((b-new Date(De(y).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];for(var T=De(s),I=0;T<=n;)this.timeIntervals.push({value:I,legend:De(T).format("MM/DD/YYYY HH:mm"),date:De(T).toDate()}),De(T),T.add(180,"minutes"),I++;p=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[p-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(f.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(f.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[p-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(3==i){var A,x=new Date,_=9e5,w=this,S=De(new Date(Math.floor(x.getTime()/_)*_)).seconds(0).milliseconds(0),C=De(S).subtract(144,"hours");s=new Date(C._d.setHours(48,0,0,0)),n=new Date(C._d.setHours(24,0,0,0));var k=(new Date).setSeconds(0,0);Math.ceil((k-new Date(De(C).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];for(var E=De(s),M=0;E<=n;)this.timeIntervals.push({value:M,legend:De(E).format("MM/DD/YYYY HH:mm"),date:De(E).toDate()}),De(E),E.add(180,"minutes"),M++;A=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[A-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(w.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(w.timeIntervals[e].date).add(15,"minutes").format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[A-1].date).add(15,"minutes").format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==i){var O,N=new Date,P=9e5,Z=this,L=De(new Date(Math.floor(N.getTime()/P)*P)).seconds(0).milliseconds(0),F=De(L).subtract(144,"hours");s=new Date(F._d.setHours(72,0,0,0)),n=new Date(F._d.setHours(24,0,0,0));var R=(new Date).setSeconds(0,0);Math.ceil((R-new Date(De(F).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];for(var q=De(s),H=0;q<=n;)this.timeIntervals.push({value:H,legend:De(q).format("MM/DD/YYYY HH:mm"),date:De(q).toDate()}),De(q),q.add(180,"minutes"),H++;O=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[O-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(Z.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(Z.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[O-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(5==i){var B,U=new Date,W=9e5,G=this,Y=De(new Date(Math.floor(U.getTime()/W)*W)).seconds(0).milliseconds(0),V=De(Y).subtract(144,"hours");s=new Date(V._d.setHours(96,0,0,0)),n=new Date(V._d.setHours(24,0,0,0));var J=(new Date).setSeconds(0,0);Math.ceil((J-new Date(De(V).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];for(var z=De(s),Q=0;z<=n;)this.timeIntervals.push({value:Q,legend:De(z).format("MM/DD/YYYY HH:mm"),date:De(z).toDate()}),De(z),z.add(180,"minutes"),Q++;B=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[B-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(G.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(G.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[B-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(6==i){var j,K=new Date,X=9e5,$=this,ee=De(new Date(Math.floor(K.getTime()/X)*X)).seconds(0).milliseconds(0),te=De(ee).subtract(144,"hours");s=new Date(te._d.setHours(120,0,0,0)),n=new Date(te._d.setHours(24,0,0,0));var ie=(new Date).setSeconds(0,0);Math.ceil((ie-new Date(De(te).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];for(var ae=De(s),se=0;ae<=n;)this.timeIntervals.push({value:se,legend:De(ae).format("MM/DD/YYYY HH:mm"),date:De(ae).toDate()}),De(ae),ae.add(180,"minutes"),se++;j=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[j-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De($.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De($.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[j-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(7==i){var ne,re,oe=new Date,le=this;ne=De(new Date(6e4*Math.floor(oe.getTime()/6e4))).minutes(0).seconds(0).milliseconds(0);var ce=De(ne).subtract(144,"hours");s=new Date(ce._d.setHours(144,0,0,0));var de=(new Date).setSeconds(0,0);Math.ceil((de-new Date(De(s).toDate()).getTime())/36e5),s=De(s).add(180,"minutes"),this.timeIntervals=[];var ue,he=De(s),ge=0;for(De();he<=ne;)this.timeIntervals.push({value:ge,legend:De(he).format("MM/DD/YYYY HH:mm"),date:De(he).toDate()}),De(he),ue=Math.floor((ne._d.getHours()-he._d.getHours())/3),he.add(ue>0?180:60,"minutes"),ge++;re=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[re-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(t,i){var a,s,n=De(le.timeIntervals[t].date);return parseInt(e.timeIntervals[e.selectedInterval].legend.substring(11,13)||"0")%3==0?(a=n.subtract(180,"minutes").format("MMM DD hh:mm A"),s=De(le.timeIntervals[t].date).subtract(15,"minutes").format("MMM DD hh:mm A")):(a=n.subtract(60,"minutes").format("MMM DD hh:mm A"),s=De(le.timeIntervals[t].date).subtract(15,"minutes").format("MMM DD hh:mm A")),'<span id="slider-click-prev" class="point-'.concat(t,' dir-arrows" > </span> ').concat(a," - ").concat(s,' <span id="slider-click-next" class="point-').concat(t,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[re-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}4==this.TimeFrame&&(this.showIntervalSlider=!1),this.sliderEvent()}},{key:"dropDownchange",value:function(){this.lastdays15MinOfValues(),(6==this.TimeFrame||4==this.TimeFrame)&&(this.showIntervalSlider=!1),this.sliderEvent()}},{key:"loadChart",value:function(t,i){var a,s=this;this.startTime=t,this.endTime=i;var n,r,o,l=e(this.timeForFilter(new Date,new Date),2),c=l[0],d=l[1];(this.appliedTimeFrame=this.TimeFrame,4==this.TimeFrame)&&(parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0?(o=this.timeIntervals[this.selectedInterval].date,g=De(o),h=De(o).subtract(180,"minutes")):(o=this.timeIntervals[this.selectedInterval].date,g=De(o),h=this.timeIntervals[this.selectedInterval-1].date),c=(r=[this.getISOString(h),this.getISOString(g)])[0],d=r[1]);if(6==this.TimeFrame)if(this.startTime)c=(a=e(this.timeForFilter(this.startTime,this.endTime),2))[0],d=a[1],this.timeForDeviceEfficiency=this.endTime;else{var u,h=this.timeIntervals[this.selectedInterval].date,g=De(h).subtract(15,"minutes");c=(u=[this.getISOString(g),this.getISOString(h)])[0],d=u[1],this.timeForDeviceEfficiency=h}n=1==this.TimeFrame?{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:c,end:d,tz:0}:{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:c,end:d,tz:-(new Date).getTimezoneOffset()/60},this.loader=!0,this.IssuesService.getQoeSummary(n).subscribe(function(e){s.loader=!1,s.summaryData=e||[],e.rawData.length&&!s.silderDataAvail&&(s.value3=e.rawData[e.rawData.length-1].qoeScore,s.silderDataAvail=!0,setTimeout(function(){ye(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE")},10)),fe.chart("qoeScoreChart",s.qoeChartOption(e||[])),fe.chart("wanServiceChart",s.wanService(e||[])),fe.chart("wanContinuityChart",s.wanContinuity(e||[],s.WanShowup)),fe.chart("wholeHomeEfficiencyChart",s.wholeHomeEfficiencyOption(e||[])),setTimeout(function(){s.loader=!1},4200)},function(e){s.value3=0,s.summaryData=[],s.loader=!1,s.silderDataAvail=!0,setTimeout(function(){ye(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE")},10),s.pageErrorHandle(e)})}},{key:"loadSlider",value:function(){var e,t=this,i=new Date,a=new Date;a.setMinutes(a.getMinutes()-1),i.setMinutes(i.getMinutes()-16),i=i.toISOString().substr(0,16)+":00",a=a.toISOString().substr(0,16)+":00",e=1==this.TimeFrame?{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:5,start:i,end:a,tz:0}:{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:5,start:i,end:a,tz:-(new Date).getTimezoneOffset()/60},this.loader=!0,this.IssuesService.getQoeSummary(e).subscribe(function(e){t.loader=!1},function(e){t.value3=0,t.loader=!1,t.silderDataAvail=!0,setTimeout(function(){ye(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE")},10),t.pageErrorHandle(e)})}},{key:"timeForFilter",value:function(t,i){var a,s;switch(this.TimeFrame){case 1:return t.setDate(t.getDate()-6),t.setHours(5,30,0,0),i.setMinutes(i.getMinutes()),[t.toISOString().substring(0,11)+"00:00:00",i.toISOString().substring(0,19)];case 2:t.setHours(t.getHours()-24),t.setMinutes(t.getMinutes()+15),t=(a=e(this.minuteAligner(t,i),2))[0],i=a[1];break;case 3:t.setHours(t.getHours()-3),t=(s=e(this.minuteAligner(t,i),2))[0],i=s[1];break;case 4:break;case 5:t.setMinutes(t.getMinutes()-16),i.setMinutes(i.getMinutes()-1)}return[t.toISOString().substring(0,16)+":00",i.toISOString().substring(0,16)+":00"]}},{key:"minuteAligner",value:function(e,t){for(var i=[e.getMinutes(),t.getMinutes()],a=i[0],s=i[1],n=[45,30,15,0],r=0;r<n.length;r++)!n.includes(a)&&a>n[r]&&(e.setMinutes(n[r]),a=n[r]),!n.includes(s)&&s>n[r]&&(t.setMinutes(n[r]),s=n[r]);return[e,t]}},{key:"averageTimeSetter",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[2,3,4].includes(this.TimeFrame)?i?-15:15:i?-1:1;return 1==this.TimeFrame?e.setHours(e.getHours()-24):e.setMinutes(e.getMinutes()-a),[e.toISOString().substr(0,16)+":00",t.toISOString().substr(0,16)+":00"]}},{key:"averageTimeSetterNew",value:function(e,t){var i=[5,6].includes(this.TimeFrame)?1:15;return 1==this.TimeFrame?this.clientDates==De().format("MM/DD/yyyy")?(e.setHours(5,30,0,0),e.setHours(e.getHours()),(t=new Date).setMinutes(t.getMinutes()+330),[e.toISOString().substring(0,11)+"00:00:00",t.toISOString().substring(0,19)]):(e.setHours(5,30,0,0),e.setHours(e.getHours()),t.setHours(28,89,59,0),[e.toISOString().substring(0,11)+"00:00:00",t.toISOString().substring(0,11)+"23:59:59"]):(t.setMinutes(t.getMinutes()+i),[e.toISOString().substr(0,16)+":00",t.toISOString().substr(0,16)+":00"])}},{key:"roundOffDate",value:function(e,t){if(e&&t&&e>t){var i=t.split("T"),a=i[0].split("-");return a[2]=(a[2]<9?"0":"")+(parseInt(a[2])+1),t=a.join("-")+"T"+i[1],this.roundOffDate(e,t)}return[e,t]}},{key:"clickToGet15Mins",value:function(e){var i,a=this;if(2==this.TimeFrame||3==this.TimeFrame){this.TimeFrame=6;var s=e.category.split(":"),n=parseInt(s[0]),r=parseInt(s[1]);this.time=s[1].split(/\s/)[1],("PM"==this.time&&12!==n||12===n&&"AM"==this.time)&&(n+=12),this.date=new Date,this.date.setHours(n),this.date.setMinutes(r),this.date.setSeconds(0,0),this.date>new Date&&this.date.setDate(this.date.getDate()-1);var o,l=this.date,c=De(l).subtract(15,"minutes"),d=new Date,u=this.date,h=9e5,g=this,p=De(new Date(Math.floor(d.getTime()/h)*h)).seconds(0).milliseconds(0),m=De(p).subtract(24,"hours"),v=(new Date).setSeconds(0,0),f=Math.ceil((v-new Date(De(m).toDate()).getTime())/36e5)>24?15:30;m=De(m).add(f,"minutes"),this.timeIntervals1=[],this.timeIntervals=[];for(var D=De(m),y=0,b=De(new Date(Math.floor(u.getTime()/h)*h)).seconds(0).milliseconds(0);D<=b;)this.timeIntervals1.push({value:y,legend:De(D).format("MM/DD/YYYY HH:mm"),date:De(D).toDate()}),De(D),D.add(15,"minutes"),y++;for(D=De(m),y=0;D<=p;)this.timeIntervals.push({value:y,legend:De(D).format("MM/DD/YYYY HH:mm"),date:De(D).toDate()}),De(D),D.add(15,"minutes"),y++;o=this.timeIntervals1.length;var T=this.timeIntervals.length;this.selectedInterval=this.timeIntervals1[o-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(g.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A ")," - ").concat(De(g.timeIntervals[e].date).format("MMM DD hh:mm A "),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(15,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[T-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3),this.loadChart(c,l)}if(1==this.TimeFrame){this.TimeFrame=4;var I,A=e.category.split("/"),x=A[2]+A[0]+A[1];if(I=(null===(i=this.summaryData.rawData)||void 0===i?void 0:i.findIndex(function(e){return e.date==x}))+1,this.WeekFrame=I,4==this.TimeFrame){var _=this.WeekFrame;if(1==_){var w,S,C,k=new Date,E=9e5,M=this,O=De(new Date(Math.floor(k.getTime()/E)*E)).seconds(0).milliseconds(0),N=De(O).subtract(144,"hours");S=new Date(N._d.setHours(0,0,0,0)),C=new Date(N._d.setHours(24,0,0,0));var P=(new Date).setSeconds(0,0);Math.ceil((P-new Date(De(N).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];for(var Z=De(S),L=0;Z<=C;)this.timeIntervals.push({value:L,legend:De(Z).format("MM/DD/YYYY HH:mm"),date:De(Z).toDate()}),De(Z),Z.add(180,"minutes"),L++;w=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[w-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(M.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(M.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[w-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(2==_){var F,R=new Date,q=9e5,H=this,B=De(new Date(Math.floor(R.getTime()/q)*q)).seconds(0).milliseconds(0),U=De(B).subtract(144,"hours");S=new Date(U._d.setHours(24,0,0,0)),C=new Date(U._d.setHours(24,0,0,0));var W=(new Date).setSeconds(0,0);Math.ceil((W-new Date(De(U).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];for(var G=De(S),Y=0;G<=C;)this.timeIntervals.push({value:Y,legend:De(G).format("MM/DD/YYYY HH:mm"),date:De(G).toDate()}),De(G),G.add(180,"minutes"),Y++;F=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[F-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(H.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(H.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[F-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(3==_){var V,J=new Date,z=9e5,Q=this,j=De(new Date(Math.floor(J.getTime()/z)*z)).seconds(0).milliseconds(0),K=De(j).subtract(144,"hours");S=new Date(K._d.setHours(48,0,0,0)),C=new Date(K._d.setHours(24,0,0,0));var X=(new Date).setSeconds(0,0);Math.ceil((X-new Date(De(K).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];for(var $=De(S),ee=0;$<=C;)this.timeIntervals.push({value:ee,legend:De($).format("MM/DD/YYYY HH:mm"),date:De($).toDate()}),De($),$.add(180,"minutes"),ee++;V=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[V-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(Q.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(Q.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[V-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==_){var te,ie=new Date,ae=9e5,se=this,ne=De(new Date(Math.floor(ie.getTime()/ae)*ae)).seconds(0).milliseconds(0),re=De(ne).subtract(144,"hours");S=new Date(re._d.setHours(72,0,0,0)),C=new Date(re._d.setHours(24,0,0,0));var oe=(new Date).setSeconds(0,0);Math.ceil((oe-new Date(De(re).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];for(var le=De(S),ce=0;le<=C;)this.timeIntervals.push({value:ce,legend:De(le).format("MM/DD/YYYY HH:mm"),date:De(le).toDate()}),De(le),le.add(180,"minutes"),ce++;te=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[te-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(se.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(se.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[te-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(5==_){var de,ue=new Date,he=9e5,ge=this,pe=De(new Date(Math.floor(ue.getTime()/he)*he)).seconds(0).milliseconds(0),me=De(pe).subtract(144,"hours");S=new Date(me._d.setHours(96,0,0,0)),C=new Date(me._d.setHours(24,0,0,0));var ve=(new Date).setSeconds(0,0);Math.ceil((ve-new Date(De(me).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];for(var fe=De(S),be=0;fe<=C;)this.timeIntervals.push({value:be,legend:De(fe).format("MM/DD/YYYY HH:mm"),date:De(fe).toDate()}),De(fe),fe.add(180,"minutes"),be++;de=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[de-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(ge.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(ge.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[de-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(6==_){var Te,Ie=new Date,Ae=9e5,xe=this,_e=De(new Date(Math.floor(Ie.getTime()/Ae)*Ae)).seconds(0).milliseconds(0),we=De(_e).subtract(144,"hours");S=new Date(we._d.setHours(120,0,0,0)),C=new Date(we._d.setHours(24,0,0,0));var Se=(new Date).setSeconds(0,0);Math.ceil((Se-new Date(De(we).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];for(var Ce=De(S),ke=0;Ce<=C;)this.timeIntervals.push({value:ke,legend:De(Ce).format("MM/DD/YYYY HH:mm"),date:De(Ce).toDate()}),De(Ce),Ce.add(180,"minutes"),ke++;Te=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[Te-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(xe.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(xe.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[Te-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(7==_){var Ee,Me,Oe=new Date,Ne=this;Ee=De(new Date(6e4*Math.floor(Oe.getTime()/6e4))).minutes(0).seconds(0).milliseconds(0);var Pe=De(Ee).subtract(144,"hours");S=new Date(Pe._d.setHours(144,0,0,0));var Ze=(new Date).setSeconds(0,0);Math.ceil((Ze-new Date(De(S).toDate()).getTime())/36e5),S=De(S).add(180,"minutes"),this.timeIntervals=[];var Le=De(S),Fe=0;for(De();Le<=Ee;){if(this.timeIntervals.push({value:Fe,legend:De(Le).format("MM/DD/YYYY HH:mm"),date:De(Le).toDate()}),De(Le),Math.floor((Ee._d.getHours()-Le._d.getHours())/3)>0)Le.add(180,"minutes");else{var Re=2==Math.ceil(Ee._d.getHours()-Le._d.getHours())?120:60;Le.add(Re,"minutes")}Fe++}Me=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[Me-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){var i,s,n=De(Ne.timeIntervals[e].date);return parseInt(a.timeIntervals[a.selectedInterval].legend.substring(11,13)||"0")%3==0?(i=n.subtract(180,"minutes").format("MMM DD hh:mm A"),s=De(Ne.timeIntervals[e].date).format("MMM DD hh:mm A")):(i=De(a.timeIntervals[Me-2].date).format("MMM DD hh:mm A"),s=De(Ne.timeIntervals[e].date).format("MMM DD hh:mm A")),'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(i," - ").concat(s,' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[Me-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}this.loadChart(De(this.time).subtract(180,"minutes"),De(this.time)),setTimeout(function(){a.WeekFramedata=[{id:1,name:a.language[a.lastSeventhDay]},{id:2,name:a.language[a.lastSixthDay]},{id:3,name:a.language[a.lastfifthDay]},{id:4,name:a.language[a.lastFourthDay]},{id:5,name:a.language[a.lastThirdDay]},{id:6,name:a.language[a.yesterDay]},{id:7,name:a.language[a.toDay]}]},2e3)}}e.category.split(" "),De(new Date).format("MM/DD/YY");var qe=9e5,He=De(new Date(Math.floor((new Date).getTime()/qe)*qe)).seconds(0).milliseconds(0).startOf("hour"),Be=De(e.category);if(De.duration(He.diff(Be)).asHours()<=24&&4==this.TimeFrame){this.TimeFrame=6;var Ue=e.category.split(" "),We=Ue[1].split(":"),Ge=parseInt(We[0]),Ye=parseInt(We[1]);this.time=Ue[2],("PM"==this.time&&12!==Ge||12===Ge&&"AM"==this.time)&&(Ge+=12),this.date=new Date,this.date.setHours(Ge),this.date.setMinutes(Ye),this.date.setSeconds(0,0),this.date>new Date&&this.date.setDate(this.date.getDate()-1);var Ve,Je=this.date,ze=De(Je).subtract(15,"minutes"),Qe=new Date,je=this.date,Ke=9e5,Xe=this,$e=De(new Date(Math.floor(Qe.getTime()/Ke)*Ke)).seconds(0).milliseconds(0),et=De($e).subtract(24,"hours"),tt=(new Date).setSeconds(0,0),it=Math.ceil((tt-new Date(De(et).toDate()).getTime())/36e5)>24?15:30;et=De(et).add(it,"minutes"),this.timeIntervals1=[],this.timeIntervals=[];var at=De(et),st=0,nt=De(new Date(Math.floor(je.getTime()/Ke)*Ke)).seconds(0).milliseconds(0);for(this.showIntervalSlider=!1;at<=nt;)this.timeIntervals1.push({value:st,legend:De(at).format("MM/DD/YYYY HH:mm"),date:De(at).toDate()}),De(at),at.add(15,"minutes"),st++;for(at=De(et),st=0;at<=$e;)this.timeIntervals.push({value:st,legend:De(at).format("MM/DD/YYYY HH:mm"),date:De(at).toDate()}),De(at),at.add(15,"minutes"),st++;Ve=this.timeIntervals1.length;var rt=this.timeIntervals.length;this.selectedInterval=this.timeIntervals1[Ve-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(Xe.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A ")," - ").concat(De(Xe.timeIntervals[e].date).format("MMM DD hh:mm A "),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.cdRef.detectChanges(),this.leftSliderTime=De(this.timeIntervals[0].date).subtract(15,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[rt-1].date).format("MMM DD hh:mm A"),setTimeout(function(){a.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3),this.loadChart(ze,Je)}}},{key:"qoeChartOption",value:function(e){var t,i=this,a=this,s=[],n=[],r=0,o=["#C70000","#C70000","rgba(252, 114, 53)","#82BF00","#82BF00"],l=this.TimeFrame;t=(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).filter(function(e){if(e.qoeScore){e.qoeScore>=1?"#0A77FB":"gray";var t=e.date,a=t.substring(0,4),n=t.substring(6,4),r=t.substring(6),o=n+"/"+r+"/"+a,l=n+"/"+r+"/"+t.substring(2,4),c=e.time,d=o+" "+(1==i.TimeFrame?"":c.substring(0,2)+":"+c.substring(2,4));if(1==i.TimeFrame)d=o;else if(4==i.TimeFrame)d=l+" "+De(c.substring(0,2)+":"+c.substring(2,4),["HH:mm"]).format("hh:mm A");else if(6==i.TimeFrame){var u=De(c.substring(0,2)+":"+c.substring(2,4),["HH:mm"]).format("hh:mm A");u=u.split(/\s/),c.toString().slice(0,2)>12&&(i.time="PM"),c.toString().slice(0,2)<=12&&(i.time="AM"),u[1]=i.time,d=u.join(" ")}else d=De(c.substring(0,2)+":"+c.substring(2,4),["HH:mm"]).format("hh:mm A");return s.push(d),e}}).map(function(e,t){if(e.qoeScore){r=e.qoeScore>0?e.qoeScore:r;var i=e.qoeScore>0?e.qoeScore:r>0?-r:e.qoeScore;return n.push({value:t,dashStyle:i>=1?"solid":"dash",color:i>=1?"#0A77FB":"gray"}),{y:"string"==typeof i?i.substring(0,1):Math.abs(i),color:i>=1?o[i-1]:"gray",qoeCode:(null==e?void 0:e.qoeHelpingCode)||[]}}});var c,d,u=this;return{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},xAxis:{categories:s,labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,tickInterval:(c=t.length?t.length:0,d=1,2===l&&(c>90?d=4:c>70?d=3:c>30&&(d=2)),d)},tooltip:{formatter:function(){var e;return"".concat(u.language.score_table," : <b>").concat(this.point.y,"</b>")+((null===(e=this.point)||void 0===e?void 0:e.qoeCode)||[]).map(function(e){return"<br>".concat(u.language[e]?u.language[e]:e)}).join("")}},yAxis:{min:1,max:5,tickInterval:1,title:{text:this.language["QoE Score"],style:{fontSize:"15px"},margin:40},lineColor:"#ddd"},plotOptions:{series:{cursor:5!=this.TimeFrame&&6!=this.TimeFrame?"pointer":"context-menu",point:{events:{click:function(){a.clickToGet15Mins(this)}}}}},series:[{type:"line",min:1,max:5,data:t,marker:{radius:4},zoneAxis:"x",zones:n,color:"#0A77FB"}]}}},{key:"wanService",value:function(e){var t,i=this,a=[],s={0:"#C70000",1:"#C70000",2:"rgba(252, 114, 53)",3:"#82BF00"},n=[],r=this.TimeFrame;(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).filter(function(e){return"GOOD"==(null==e?void 0:e.wanService)||"OK"==(null==e?void 0:e.wanService)||"BAD"==(null==e?void 0:e.wanService)||"BAD(GREY)"==(null==e?void 0:e.wanService)}).map(function(e,t){var r=e.wanService.toUpperCase().includes("GREY"),o=e.wanService.toUpperCase().includes("BAD")?1:e.wanService.toUpperCase().includes("OK")?2:3;'<tr><th>Value:</th><td style="padding-left: 3px;"></td></tr>';var l=e.date,c=l.substring(0,4),d=l.substring(6,4),u=l.substring(6),h=d+"/"+u+"/"+c,g=d+"/"+u+"/"+l.substring(2,4),p=e.time,m=h+" "+(1==i.TimeFrame?"":p.substring(0,2)+":"+p.substring(2,4));if(1==i.TimeFrame)m=h;else if(4==i.TimeFrame)m=g+" "+De(p.substring(0,2)+":"+p.substring(2,4),["HH:mm"]).format("hh:mm A");else if(6==i.TimeFrame){var v=De(p.substring(0,2)+":"+p.substring(2,4),["HH:mm"]).format("hh:mm A");v=v.split(/\s/),p.toString().slice(0,2)>12&&(i.time="PM"),p.toString().slice(0,2)<=12&&(i.time="AM"),v[1]=i.time,m=v.join(" ")}else m=De(p.substring(0,2)+":"+p.substring(2,4),["HH:mm"]).format("hh:mm A");a.push(m),n.push({x:t,y:o?4:null,color:r?"grey":s[o],level:o,wanServiceCode:(null==e?void 0:e.wanserviceHelpingCode)||[]})}),t=this.language.Health;var o,l,c=this;return{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},plotOptions:{series:{states:{hover:{enabled:!1}}}},xAxis:{categories:a,padding:"50px",labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,tickInterval:(o=n.length?n.length:0,l=1,2===r&&(o>90?l=4:o>70?l=3:o>30&&(l=2)),l)},tooltip:{formatter:function(){var e;return((null===(e=this.point)||void 0===e?void 0:e.wanServiceCode)||[]).map(function(e){return"".concat(c.language[e]?c.language[e]:e,"<br>")}).join("")||!1}},yAxis:[{title:{text:t,margin:40,style:{fontSize:"15px"}},padding:"5px",gridLineWidth:1,tickAmount:4,labels:{formatter:function(e){var t,i,a,s,r;if((null===(i=null===(t=null==e?void 0:e.axis)||void 0===t?void 0:t.tickPositions)||void 0===i?void 0:i.length)>0){for(var o=e.axis.tickPositions.indexOf(this.pos),l=0;l<(null==n?void 0:n.length);l++)1==n[l].level?n[l].y=null===(a=e.axis)||void 0===a?void 0:a.tickPositions[1]:2==n[l].level?n[l].y=null===(s=e.axis)||void 0===s?void 0:s.tickPositions[2]:3==n[l].level&&(n[l].y=null===(r=e.axis)||void 0===r?void 0:r.tickPositions[3]);if(-1!=o)return""}}}},{opposite:!0,tickAmount:4,padding:"5px",title:{text:""},labels:{format:"{value} Mbps"}}],series:[{type:"scatter",data:n,name:"",marker:{symbol:"circle",shadow:!1,radius:8},color:"black"},{name:"",data:[],marker:{symbol:"circle",shadow:!1,radius:8},color:"black",states:{hover:{enabled:!1}},yAxis:1}]}}},{key:"wanContinuity",value:function(e,t){var i,a,s,n=this,r=[],o={0:"#C70000",1:"#C70000",2:"#82BF00",3:"#82BF00"},l=[],c=this,d=this.TimeFrame;return(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).filter(function(e){return e.wanContinuity}).map(function(i,a){var s=i.wanContinuity.toUpperCase().includes("GREY"),c=i.wanContinuity.toUpperCase().includes("GOOD")?2:1;new Date(1e3*i.dl_created);var d=i.date,u=d.substr(0,4),h=d.substr(4,2),g=d.substr(6,2),p=h+"/"+g+"/"+u,m=h+"/"+g+"/"+d.substring(2,4),v=i.time,f=p+" "+(1==n.TimeFrame?"":v.substring(0,2)+":"+v.substring(2,4));if(1==n.TimeFrame)f=p;else if(4==n.TimeFrame)f=m+" "+De(v.substring(0,2)+":"+v.substring(2,4),["HH:mm"]).format("hh:mm A");else if(6==n.TimeFrame){var D=De(v.substring(0,2)+":"+v.substring(2,4),["HH:mm"]).format("hh:mm A");D=D.split(/\s/),v.toString().slice(0,2)>12&&(n.time="PM"),v.toString().slice(0,2)<=12&&(n.time="AM"),D[1]=n.time,f=D.join(" ")}else f=De(v.substring(0,2)+":"+v.substring(2,4),["HH:mm"]).format("hh:mm A");r.push(f),l.push({x:a,y:c?4:null,color:s?"grey":o[c],level:c,marker:{lineColor:"blue",lineWidth:n.downfallCalc(t,e,a).length?3:0}})}),i=this.language.Status,{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},plotOptions:{series:{states:{hover:{enabled:!1}}}},xAxis:{categories:r,labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,padding:"50px",tickInterval:(a=l.length?l.length:0,s=1,2===d&&(a>90?s=4:a>70?s=3:a>30&&(s=2)),s)},tooltip:{formatter:function(){var i;return c.downfallCalc(t,e,null===(i=this.point)||void 0===i?void 0:i.x).join("<br>")||!1}},yAxis:[{title:{text:i,margin:40,style:{fontSize:"15px"}},padding:"5px",gridLineWidth:1,tickAmount:3,labels:{formatter:function(e){var t,i,a,s;if((null===(i=null===(t=null==e?void 0:e.axis)||void 0===t?void 0:t.tickPositions)||void 0===i?void 0:i.length)>0){for(var n=e.axis.tickPositions.indexOf(this.pos),r=0;r<(null==l?void 0:l.length);r++)1==l[r].level?l[r].y=null===(a=e.axis)||void 0===a?void 0:a.tickPositions[1]:2==l[r].level&&(l[r].y=null===(s=e.axis)||void 0===s?void 0:s.tickPositions[2]);if(-1!=n)return""}}}},{opposite:!0,tickAmount:4,padding:"50px",title:{text:""},labels:{format:"{value} Mbps"}}],series:[{type:"scatter",data:l,name:"",pointWidth:1e3,pointPadding:0,marker:{enabled:!0,symbol:"circle",shadow:!1,radius:8,states:{hover:{enabled:!1}}},color:"black"},{name:"",data:[],marker:{symbol:"circle",shadow:!1,radius:8},color:"black",states:{hover:{color:"#a4edba",borderColor:"gray"}},yAxis:1}]}}},{key:"convertDate",value:function(e){return De(e).format(" DD/MM/YYYY, hh:mm A")}},{key:"downfallCalc",value:function(e,t,i){var a=this,s=this,n=[];if((null==e?void 0:e.length)>0&&1!=this.TimeFrame){var r=i,o=t.rawData[r].date,l=o.slice(0,4),c=o.slice(4,6)+"/"+o.slice(6,8)+"/"+l,d=t.rawData[r].time,u=d.slice(0,2),h=d.slice(2,4),g=new Date(c+" "+u+":"+h);g.setSeconds(59),g.setMilliseconds(0);var p=new Date(g);p.setSeconds(0),[5,6].includes(this.TimeFrame)||p.setMinutes(p.getMinutes()-14),e.forEach(function(e){var t=new Date(e.timestamp),i=t.toISOString(),r=a.convertDate(i);if(t.setSeconds(0),t.setMilliseconds(0),p.getTime()<=t.getTime()&&t.getTime()<=g.getTime())return"SW"==e.type.slice(0,2)&&(e.type="Software"+e.type.slice(2)),void n.push("<b>".concat(r," : </b> ").concat(s.language[e.type]))})}return n}},{key:"wholeHomeEfficiencyOption",value:function(e){var t,i=this,a=this,s=[],n=0,r=this,o=this.TimeFrame,l=[];t=(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).map(function(e,t){var a=e.date;n=e.homeScore>0?e.homeScore:n;var r=e.homeScore>0?e.homeScore:n>0?-n:e.homeScore;e.homeScore>0?" ".concat(i.language["Efficiency Score"]," : <b>{point.y}%</b>"):" ".concat(i.language["Efficiency Score"]," : <b>{point.y}%</b><br>No client activity for Efficiency score"),s.push({value:t,dashStyle:e.homeScore>0?"solid":"dash",color:e.homeScore>0?"#0a77fb":"gray"});var o,c=a.substring(0,4),d=a.substring(6,4),u=a.substring(6),h=d+"/"+u+"/"+c,g=null==e?void 0:e.time,p=d+"/"+u+"/"+a.substring(2,4),m=1==i.TimeFrame?h:De((null==g?void 0:g.substring(0,2))+":"+(null==g?void 0:g.substring(2,4)),["HH:mm"]).format("hh:mm A"),v=h+" "+(1==i.TimeFrame?"":g.substring(0,2)+":"+g.substring(2,4));if(1==i.TimeFrame)v=h,l.push(v);else if(4==i.TimeFrame)o=p+" "+De(g.substring(0,2)+":"+g.substring(2,4),["HH:mm"]).format("hh:mm A"),l.push(o);else{var f=De(g.substring(0,2)+":"+g.substring(2,4),["HH:mm"]).format("hh:mm A");o=h+" "+De(g.substring(0,2)+":"+g.substring(2,4),["HH:mm"]).format("hh:mm A"),v=f,l.push(f)}return{y:"string"==typeof e.homeScore?parseFloat(r.substring(0,5)):Math.abs(r),color:r>0?"#0a77fb":"gray",WHECode:parseFloat(null==e?void 0:e.homeScore)||0,qtime:m,pointDate:v,pointDateTime:o}});var c,d,u=this.language.Efficiency_Score;return{title:{text:this.language["Click on the sample to view client efficiency of the selected point."],style:{fontSize:"14px"},align:"left"},credits:{enabled:!1},chart:{type:"column"},tooltip:{formatter:function(){var e='<span class="f-s-10px">'+this.point.qtime+"</span><br>"+u+" : <b>"+(0==this.point.y?this.point.y:this.point.y.toFixed(2))+"%</b>";return 0==this.point.WHECode&&(e+="</br> ".concat(a.language["No client activity for Efficiency score"])),e}},xAxis:{categories:l||[],labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,tickInterval:(c=l.length?l.length:0,d=1,2===o&&(c>90?d=4:c>70?d=3:c>30&&(d=2)),d)},yAxis:{min:0,max:100,tickInterval:20,lineColor:"#ddd",title:{text:this.language.Efficiency_Score+" (%)",style:{fontSize:"15px"}}},plotOptions:{series:{maxPointWidth:20,borderRadius:0,cursor:"pointer",marker:{enabled:!1,states:{hover:{enabled:!0,radius:6.5}}},point:{events:{click:function(){r.showClientEfficencyChart(this.options)}}}}},series:[{type:"line",name:"",data:t,zoneAxis:"x",zones:s,color:"#0a77fb",showInLegend:!1}]}}},{key:"clientEfficiency",value:function(t){var i,a,s,n=this;this.globalObj.latencyCreateTime="",a=(i=e(1==this.TimeFrame?[new Date(t.pointDate.replace("<br>"," ")),new Date(t.pointDate.replace("<br>"," "))]:[new Date(t.pointDateTime.replace("<br>"," ")),new Date(t.pointDateTime.replace("<br>"," "))],2))[0],s=i[1];var r,o=e(this.averageTimeSetterNew(a,s),2),l=o[0],c=o[1];r=1==this.TimeFrame?{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:l,end:c,tz:0}:{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:l,end:c,tz:-(new Date).getTimezoneOffset()/60},this.avgEff=Object.assign({},r),this.effLoader=!0,this.IssuesService.getAverageScore(r).subscribe(function(e){n.effLoader=!1,fe.chart("clientEfficiencyChartDiv",n.clientEfficiencyChartPopup(e||[],t.y))},function(e){n.effLoader=!1,n.pageErrorHandle(e)})}},{key:"getEfficiensyColor",value:function(e){return e>45?"#82BF00":e>15?"rgba(252, 114, 53)":"#C70000"}},{key:"clientEfficiencyChartPopup",value:function(e,t){var i=this,a=[],s=[],n=this,r="average-effciency-score";e[r].sort(function(e,t){return e.eff_score-t.eff_score});var o=e[r].filter(function(e){return""!==e.client_name||""==e.client_name});e[r]=o,e[r].map(function(e,t){var n=parseFloat(e.eff_score.toFixed(2));a.push(e.client_name||e.mesh_mac||e.station_mac_addr||"");var r=!1;e.is_online_now&&(r=e.is_online_now),s.push({x:t,y:n,color:i.getEfficiensyColor(n),level:n,routerMac:e.router_mac,stationMac:e.station_mac_addr,client_name:e.client_name,is_online_now:r,eff_score:e.eff_score,mesh_mac:e.mesh_mac||""})});var l=e["average-effciency-score"].reduce(function(e,t,i,a){return e+t.eff_score/a.length},0);l=parseFloat(l.toFixed(2));var c=this.TimeFrame,d=this;return{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},xAxis:{categories:a,padding:"5px"},tooltip:{formatter:function(){var e="<b>"+this.x+" "+d.language.Efficiency+": "+this.y+" %</b>";return(this.point.options.client_name||null==this.point.options.client_name&&1!=this.point.options.is_online_now)&&(e+="</br>"+d.language["Click to go to device details"]),e}},yAxis:[{min:0,max:100,tickInterval:20,title:{text:this.language["Device Efficiency"]+" (%)",style:{fontSize:"15px"}},plotLines:[{color:"#5ACFEA",value:t?t.toFixed(2):0,width:"2",zIndex:4,label:{text:"".concat(this.language["Whole Home Efficiency"]," - ").concat(t?t.toFixed(2):0," % "),align:"right"}}]},{opposite:!0,tickAmount:4,padding:"5px",title:{text:""},labels:{format:"{value} Mbps"}}],plotOptions:{series:{maxPointWidth:20,borderRadius:0,cursor:"pointer",point:{events:{click:function(){n.deviceService.efficiencyChart=!0;var e={routerMac:this.options.routerMac,stationMac:this.options.stationMac,is_online_now:this.options.is_online_now,eff_score:this.options.eff_score,period:n.periodForFilter(c),WeekFrame:n.periodForWeekFrame(c),endTime:n.endForFilter()};this.options.stationMac&&this.options.client_name&&(n.close(),n.router.navigate(["/support/device"],{state:e}))}}}},column:{minPointLength:3}},series:[{type:"column",data:s,name:""}]}}},{key:"endForFilter",value:function(){var e=[new Date,new Date,new Date,new Date,new Date,new Date],t=e[0],i=e[1],a=e[2];switch(this.TimeFrame){case 1:if(this.clientDates==De().format("MM/DD/yyyy")){i=new Date(this.clientDates),t=new Date(this.clientDates);var s=new Date,n=(new Date).getHours();i=new Date(new Date(s.setMinutes(s.getMinutes())).setHours(n,0,0,0))}else i=new Date(this.clientDates),t=new Date(this.clientDates),i.setHours(i.getHours()+24);break;case 2:case 3:i=new Date(this.clientDates),(t=new Date(this.clientDates)).setMinutes(t.getMinutes()-15);break;case 4:if(parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0){var r=this.timeIntervals[this.selectedInterval].date;a=new Date(this.timeIntervals[this.selectedInterval].date),r=De(r).subtract(15,"minutes"),i=new Date(r),(t=new Date(r)).setMinutes(t.getMinutes()-165)}else{var o=this.timeIntervals[this.selectedInterval].date;a=new Date(this.timeIntervals[this.selectedInterval].date),o=De(o).subtract(15,"minutes"),i=new Date(o),(t=this.timeIntervals[this.selectedInterval-1].date).setMinutes(t.getMinutes())}break;case 5:(t=new Date).setMinutes(t.getMinutes()-16),i.setMinutes(i.getMinutes()+1);break;case 6:var l=this.timeIntervals[this.selectedInterval].date;i=new Date(l),(t=new Date(l)).setMinutes(t.getMinutes()-15)}return[t,i,a]}},{key:"periodForWeekFrame",value:function(e){switch(this.WeekFrame){case 1:e=1;break;case 2:e=2;break;case 3:e=3;break;case 4:e=4;break;case 5:e=5;break;case 6:e=6;break;case 7:e=7}return e}},{key:"periodForFilter",value:function(e){switch(this.TimeFrame){case 1:e=7;break;case 2:case 3:e=6;break;case 4:e=4;break;case 5:e=5;break;case 6:e=6}return e}},{key:"showClientEfficencyChart",value:function(e){this.clientDates=1==this.TimeFrame?De(new Date(e.pointDate)).format("MM/DD/YYYY"):4==this.TimeFrame?De(new Date(De(e.pointDate).toString())).format("MM/DD/YYYY hh:mm A"):De(new Date(De(e.pointDateTime).toString())).format("MM/DD/YYYY hh:mm A"),this.modalRef=this.dialogService.open(this.clientEfficencyChartTest,{windowClass:"ce-modal"}),this.clientEfficiency(e),this.modalRef.dismissed.subscribe(function(){setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)},100)})}},{key:"close",value:function(){this.modalRef.close(),setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)},100)}},{key:"pageErrorHandle",value:function(e){this.alertMessage=this.ssoService.pageErrorHandle(e),this.isError=!0,this.error=!0,ye("body").scrollTop(0)}},{key:"qoeCheck",value:function(){var e=this.ssoService.getScopes();Object.keys(e),p.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.qoe"]=e["cloud.rbac.csc.qoe"]?e["cloud.rbac.csc.qoe"]:[],e&&e["cloud.rbac.csc.qoe"]&&e["cloud.rbac.csc.qoe"].length&&-1!==e["cloud.rbac.csc.qoe"].indexOf("read")&&(this.scope.qoeRead=!0)):this.scope.qoeRead=!0;var t=sessionStorage.getItem("calix.deviceData")?JSON.parse(sessionStorage.getItem("calix.deviceData"))[0].modelName:"";return sessionStorage.getItem("calix.userFdUser"),this.ssoService.acceptGSModel(t)?(this.showQOE=this.ssoService.exosVersionCheck("21.4")&&this.scope.qoeRead,sessionStorage.getItem("qoeCheck")):(this.showQOE=this.scope.qoeRead,sessionStorage.getItem("qoeCheck"))}},{key:"getScopes",value:function(){var e=this.ssoService.getScopes();Object.keys(e),p.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.topology"]=e["cloud.rbac.csc.topology"]?e["cloud.rbac.csc.topology"]:[],e&&e["cloud.rbac.csc.topology"]&&e["cloud.rbac.csc.topology"].length&&-1!==e["cloud.rbac.csc.topology"].indexOf("read")&&(this.scope.topologyRead=!0)):this.scope.topologyRead=!0}},{key:"lastdays15MinOfValues",value:function(){var e=this;if(6==this.TimeFrame){var i,a=new Date,s=9e5,n=this,r=De(new Date(Math.floor(a.getTime()/s)*s)).seconds(0).milliseconds(0),o=De(r).subtract(24,"hours"),l=(new Date).setSeconds(0,0),c=Math.ceil((l-new Date(De(o).toDate()).getTime())/36e5)>24?15:30;o=De(o).add(c,"minutes"),this.timeIntervals=[];for(var d=De(o),u=0;d<=r;)this.timeIntervals.push({value:u,legend:De(d).format("MM/DD/YYYY HH:mm"),date:De(d).toDate()}),De(d),d.add(15,"minutes"),u++;i=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[i-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")," - ").concat(De(n.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(15,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[i-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==this.TimeFrame){var h=this.WeekFrame;if(1==h){var g,p,m,v=new Date,f=9e5,D=this,y=De(new Date(Math.floor(v.getTime()/f)*f)).seconds(0).milliseconds(0),b=De(y).subtract(144,"hours");p=new Date(b._d.setHours(0,0,0,0)),m=new Date(b._d.setHours(24,0,0,0));var T=(new Date).setSeconds(0,0);Math.ceil((T-new Date(De(b).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];for(var I=De(p),A=0;I<=m;)this.timeIntervals.push({value:A,legend:De(I).format("MM/DD/YYYY HH:mm"),date:De(I).toDate()}),De(I),I.add(180,"minutes"),A++;g=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[g-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(D.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(D.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[g-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(2==h){var x,_=new Date,w=9e5,S=this,C=De(new Date(Math.floor(_.getTime()/w)*w)).seconds(0).milliseconds(0),k=De(C).subtract(144,"hours");p=new Date(k._d.setHours(24,0,0,0)),m=new Date(k._d.setHours(24,0,0,0));var E=(new Date).setSeconds(0,0);Math.ceil((E-new Date(De(k).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];for(var M=De(p),O=0;M<=m;)this.timeIntervals.push({value:O,legend:De(M).format("MM/DD/YYYY HH:mm"),date:De(M).toDate()}),De(M),M.add(180,"minutes"),O++;x=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[x-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(S.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(S.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[x-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(3==h){var N,P=new Date,Z=9e5,L=this,F=De(new Date(Math.floor(P.getTime()/Z)*Z)).seconds(0).milliseconds(0),R=De(F).subtract(144,"hours");p=new Date(R._d.setHours(48,0,0,0)),m=new Date(R._d.setHours(24,0,0,0));var q=(new Date).setSeconds(0,0);Math.ceil((q-new Date(De(R).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];for(var H=De(p),B=0;H<=m;)this.timeIntervals.push({value:B,legend:De(H).format("MM/DD/YYYY HH:mm"),date:De(H).toDate()}),De(H),H.add(180,"minutes"),B++;N=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[N-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(L.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(L.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[N-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==h){var U,W=new Date,G=9e5,Y=this,V=De(new Date(Math.floor(W.getTime()/G)*G)).seconds(0).milliseconds(0),J=De(V).subtract(144,"hours");p=new Date(J._d.setHours(72,0,0,0)),m=new Date(J._d.setHours(24,0,0,0));var z=(new Date).setSeconds(0,0);Math.ceil((z-new Date(De(J).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];for(var Q=De(p),j=0;Q<=m;)this.timeIntervals.push({value:j,legend:De(Q).format("MM/DD/YYYY HH:mm"),date:De(Q).toDate()}),De(Q),Q.add(180,"minutes"),j++;U=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[U-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(Y.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(Y.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[U-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(5==h){var K,X=new Date,$=9e5,ee=this,te=De(new Date(Math.floor(X.getTime()/$)*$)).seconds(0).milliseconds(0),ie=De(te).subtract(144,"hours");p=new Date(ie._d.setHours(96,0,0,0)),m=new Date(ie._d.setHours(24,0,0,0));var ae=(new Date).setSeconds(0,0);Math.ceil((ae-new Date(De(ie).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];for(var se=De(p),ne=0;se<=m;)this.timeIntervals.push({value:ne,legend:De(se).format("MM/DD/YYYY HH:mm"),date:De(se).toDate()}),De(se),se.add(180,"minutes"),ne++;K=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[K-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(ee.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(ee.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[K-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(6==h){var re,oe=new Date,le=9e5,ce=this,de=De(new Date(Math.floor(oe.getTime()/le)*le)).seconds(0).milliseconds(0),ue=De(de).subtract(144,"hours");p=new Date(ue._d.setHours(120,0,0,0)),m=new Date(ue._d.setHours(24,0,0,0));var he=(new Date).setSeconds(0,0);Math.ceil((he-new Date(De(ue).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];for(var ge=De(p),pe=0;ge<=m;)this.timeIntervals.push({value:pe,legend:De(ge).format("MM/DD/YYYY HH:mm"),date:De(ge).toDate()}),De(ge),ge.add(180,"minutes"),pe++;re=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[re-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(e,t){return'<span id="slider-click-prev" class="point-'.concat(e,' dir-arrows" > </span> ').concat(De(ce.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")," - ").concat(De(ce.timeIntervals[e].date).format("MMM DD hh:mm A"),' <span id="slider-click-next" class="point-').concat(e,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[re-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(7==h){var me,ve,fe=new Date,be=this;me=De(new Date(6e4*Math.floor(fe.getTime()/6e4))).minutes(0).seconds(0).milliseconds(0);var Te=De(me).subtract(144,"hours");p=new Date(Te._d.setHours(144,0,0,0));var Ie=(new Date).setSeconds(0,0);Math.ceil((Ie-new Date(De(p).toDate()).getTime())/36e5),p=De(p).add(180,"minutes"),this.timeIntervals=[];var Ae=De(p),xe=0;for(De();Ae<=me;){if(this.timeIntervals.push({value:xe,legend:De(Ae).format("MM/DD/YYYY HH:mm"),date:De(Ae).toDate()}),De(Ae),Math.floor((me._d.getHours()-Ae._d.getHours())/3)>0)Ae.add(180,"minutes");else{var _e=2==Math.ceil(me._d.getHours()-Ae._d.getHours())?120:60;Ae.add(_e,"minutes")}xe++}ve=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[ve-1].value,this.timeIntervalOptions.stepsArray=t(this.timeIntervals),this.timeIntervalOptions.translate=function(t,i){var a,s,n=De(be.timeIntervals[t].date);return parseInt(e.timeIntervals[e.selectedInterval].legend.substring(11,13)||"0")%3==0?(a=n.subtract(180,"minutes").format("MMM DD hh:mm A"),s=De(be.timeIntervals[t].date).format("MMM DD hh:mm A")):(a=De(e.timeIntervals[ve-2].date).format("MMM DD hh:mm A"),s=De(be.timeIntervals[t].date).format("MMM DD hh:mm A")),'<span id="slider-click-prev" class="point-'.concat(t,' dir-arrows" > </span> ').concat(a," - ").concat(s,' <span id="slider-click-next" class="point-').concat(t,' dir-arrows"></span > ')},this.leftSliderTime=De(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=De(this.timeIntervals[ve-1].date).format("MMM DD hh:mm A"),setTimeout(function(){e.showIntervalSlider=!0,setTimeout(function(){ye(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}setTimeout(function(){e.WeekFramedata=[{id:1,name:e.language[e.lastSeventhDay]},{id:2,name:e.language[e.lastSixthDay]},{id:3,name:e.language[e.lastfifthDay]},{id:4,name:e.language[e.lastFourthDay]},{id:5,name:e.language[e.lastThirdDay]},{id:6,name:e.language[e.yesterDay]},{id:7,name:e.language[e.toDay]}]},2e3)}}},{key:"getISOString",value:function(e){return e.toISOString().substr(0,16)+":00"}},{key:"filterContent",value:function(e,i){var a,s=this;if(this.legendType[i]=!this.legendType[i],1==e){var n=[this.legendType.qoeGood?5:"",this.legendType.qoeGood?4:"",this.legendType.qoeFair?3:"",this.legendType.qoePoor?2:"",this.legendType.qoePoor?1:""].concat(t(this.legendType.qoeNoData?[-1]:[""])),r=1==this.TimeFrame?"dailyData":"rawData";fe.chart("qoeScoreChart",this.qoeChartOption(1==this.TimeFrame?{dailyData:(this.summaryData[r]||[]).filter(function(e){return e.qoeScore&&n.includes(e.qoeScore)})}:{rawData:(this.summaryData[r]||[]).filter(function(e){return e.qoeScore&&n.includes(e.qoeScore)})}))}else if(2==e){var o=[this.legendType.serviceGood?"GOOD":"",this.legendType.serviceFair?"OK":"",this.legendType.servicePoor?"BAD":""].concat(t(this.legendType.serviceNoData?["GOOD(GREY)","BAD(GREY)","OK(GREY)"]:[""])),l=1==this.TimeFrame?"dailyData":"rawData";fe.chart("wanServiceChart",this.wanService(1==this.TimeFrame?{dailyData:(this.summaryData[l]||[]).filter(function(e){return e.wanService&&o.includes(e.wanService.toUpperCase())})}:{rawData:(this.summaryData[l]||[]).filter(function(e){return e.wanService&&o.includes(e.wanService.toUpperCase())})}))}else if(3==e){var c=[this.legendType.contGood?"GOOD":"",this.legendType.contGood?"OK":"",this.legendType.contPoor?"BAD":""].concat(t(this.legendType.contNoData?["GOOD(GREY)","BAD(GREY)","OK(GREY)"]:[""])),d=1==this.TimeFrame?"dailyData":"rawData";fe.chart("wanContinuityChart",this.wanContinuity(1==this.TimeFrame?{dailyData:(this.summaryData[d]||[]).filter(function(e){return e.wanContinuity&&c.includes(e.wanContinuity.toUpperCase())})}:{rawData:(this.summaryData[d]||[]).filter(function(e){return e.wanContinuity&&c.includes(e.wanContinuity.toUpperCase())})},this.WanShowup))}else 4==e&&fe.chart("wholeHomeEfficiencyChart",this.wholeHomeEfficiencyOption(this.legendType.homeData&&this.legendType.clientData?this.summaryData:this.legendType.homeData||this.legendType.clientData?{rawData:((null===(a=this.summaryData)||void 0===a?void 0:a.rawData)||[]).filter(function(e){return!!s.legendType.homeData&&e.homeScore})}:{rawData:[]}))}}]),i}();return i.\u0275fac=function(e){return new(e||i)(d.Y36(c.F0),d.Y36(be.FF),d.Y36(u.s),d.Y36(v.Q),d.Y36(h.t6),d.Y36(Te.U),d.Y36(m.F),d.Y36(f.Dx),d.Y36(d.SBq),d.Y36(d.sBO))},i.\u0275cmp=d.Xpm({type:i,selectors:[["app-quality-of-experience"]],viewQuery:function(e,t){var i;(1&e&&d.Gf(xe,5),2&e)&&(d.iGM(i=d.CRH())&&(t.clientEfficencyChartTest=i.first))},hostBindings:function(e,t){1&e&&d.NdJ("click",function(e){return t.inClick(e)})},decls:2,vars:2,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["id","qe-issues-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],[1,"big-text"],["class","nav-item","id","qe-topology-tab",4,"ngIf"],["class","nav-item","id","qe-qoe-tab",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["class","w-100 alert alert alert-danger fade show",4,"ngIf"],[1,"d-flex","align-items-center","my-2"],[1,"col-md-12","col-lg-3","col-xl-3"],[1,"f-s-14px","mb-0"],["bindLabel","name","bindValue","id",3,"clearable","searchable","items","ngModel","change","ngModelChange"],["class","col-md-12 col-lg-3 col-xl-3",4,"ngIf"],["class","col-md-12 col-lg-2 col-xl-2 cus-select-height-24",4,"ngIf"],["class","cursor-pointer primary mt-4",4,"ngIf"],["class","row mb-3",4,"ngIf"],["class","time-frame-section mb-3","style","min-height: 100px;","id","qoe-chart-timeframe-filter",4,"ngIf"],[1,"row","mb-3","loader-wrapper"],["class","loader-wrapper-info",4,"ngIf"],[1,"col-md-12"],["id","qoe-score-title",1,"ccl-Secondary-title","border-bottom","mb-4"],[1,""],["id","qoeScoreChart",1,"chart-box",2,"height","300px"],[1,"row","d-flex","justify-content-center"],[1,"serviceLegend","mr-1",2,"background-color","#82BF00"],[1,"cursor-pointer","mr-3",3,"ngClass","click"],[1,"serviceLegend","mr-1",2,"background-color","rgba(252, 114, 53)"],[1,"serviceLegend","mr-1",2,"background-color","#C70000"],[1,"serviceLegend","mr-1",2,"background-color","grey"],[1,"cursor-pointer",3,"ngClass","click"],["id","qoe-WAN-service",1,"ccl-Secondary-title","border-bottom","mb-3"],["id","wanServiceChart",1,"chart-box",2,"height","210px"],["id","qoe-wan-continuity",1,"ccl-Secondary-title","border-bottom","mb-3"],["id","wanContinuityChart",1,"chart-box",2,"height","210px"],["id","qoe-home-efficiency",1,"ccl-Secondary-title","border-bottom","mb-4"],["id","wholeHomeEfficiencyChart",1,"chart-box",2,"height","300px"],[1,"serviceLegend","mr-1",2,"background-color","#0a77fb"],[1,"cursor-pointer","mr-2",3,"ngClass","click"],["clientEfficencyChartTest",""],["id","qe-topology-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"],["id","qe-qoe-tab",1,"nav-item"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"col-md-12","col-lg-2","col-xl-2","cus-select-height-24"],["bindLabel","name","bindValue","id",3,"items","clearable","searchable","ngModel","change","ngModelChange"],[1,"cursor-pointer","primary","mt-4"],[1,"fas","fa-sync",3,"click"],[1,"row","mb-3"],[1,"col-md-3"],["bindLabel","name","bindValue","id",3,"items","ngModel","ngModelChange"],["class","col-md-2",4,"ngIf"],["class","col-md-2 form-check",4,"ngIf"],[1,"col-md-3","col-lg-3","text-right","btns-con","smy-2",2,"margin-top","40px"],[1,"d-inline-flex","mr-3"],["type","button",1,"btn-default","primary","px-3",3,"click"],[1,"col-md-2"],["id","week_Date","appendTo","body","placeholder","weekDate","value","#{dateBean.date}",1,"ccl-form",3,"inputStyle","autoZIndex","ngModel","showIcon","ngModelOptions","maxDate","minDate","ngModelChange","onSelect"],[1,"col-md-2","form-check"],["id","start_date","appendTo","body","placeholder","Time","hourFormat","12",1,"ccl-form",3,"ngModel","stepMinute","inputStyle","autoZIndex","showIcon","ngModelOptions","timeOnly","panelStyleClass","minDate","maxDate","ngModelChange","onSelect"],["id","end_date","appendTo","body","placeholder","Time","hourFormat","12",1,"ccl-form",3,"stepMinute","inputStyle","autoZIndex","ngModel","showIcon","ngModelOptions","timeOnly","disabled","panelStyleClass","minDate","maxDate","ngModelChange","onSelect"],["id","qoe-chart-timeframe-filter",1,"time-frame-section","mb-3",2,"min-height","100px"],["data-toggle","tooltip","data-placement","top",1,"left-label",3,"title"],["class","multi-point-slider",4,"ngIf"],[1,"loader-wrapper-info"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"multi-point-slider"],[3,"value","options","valueChange","userChangeEnd"],[1,"left-most-slider-time"],[1,"right-most-slider-time"],[1,"col-md-3","col-lg-3","text-left","btns-con","smy-2",2,"margin-top","15px"],["class","loader",4,"ngIf"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","qoe-client-efficiency",1,"ccl-Secondary-title","border-bottom","mb-4"],["id","date"],["id","clientEfficiencyChartDiv",1,"chart-box",2,"height","300px"]],template:function(e,t){1&e&&(d.YNc(0,_e,1,0,"app-subscriber-menu",0),d.YNc(1,$e,102,72,"div",0)),2&e&&(d.Q6J("ngIf",t.showQOE),d.xp6(1),d.Q6J("ngIf",t.showQOE))},directives:[l.O5,b.e,c.yS,c.Od,T.w9,I.JJ,I.On,l.mk,Ie.f,Ae.w5],styles:['.hideMin .p-minute-picker{color:gray;cursor:not-allowed!important;text-decoration:none}.hideMin .p-minute-picker button{cursor:not-allowed!important;color:gray}.string-slider .ngx-slider-pointer{position:relative}::ng-deep .string-slider{height:88px;margin-bottom:20px}::ng-deep .string-slider .ngx-slider-bubble{display:none!important}::ng-deep .string-slider .ngx-slider-bar{background:linear-gradient(90deg,#FF734F 40%,#F7C343 20%,#82BF00 40%)!important;border-radius:26px!important;height:21px!important}::ng-deep .string-slider .ngx-slider .ngx-slider-pointer{border-radius:100px;width:88px;height:88px;top:-30px;border:1px solid #82BF00;background-color:transparent!important}::ng-deep .string-slider .ngx-slider-pointer:before{content:"";position:absolute;top:2.3px;left:2.3px;width:81.77px;height:81.77px;background:#fff;border-radius:100px;z-index:-1;border:1px solid #82BF00}::ng-deep .string-slider .ngx-slider .ngx-slider-pointer:after{position:absolute;left:0;z-index:999;width:100%!important;height:100%!important;color:#000!important;background-color:transparent!important;text-align:center;line-height:56px;font-size:16px}::ng-deep .string-slider [aria-valuetext="1"]:after,::ng-deep .string-slider [aria-valuetext="2"]:after{content:"Low"!important}::ng-deep .string-slider [aria-valuetext="3"]:after{content:"Medium"!important}::ng-deep .string-slider [aria-valuetext="4"]:after,::ng-deep .string-slider [aria-valuetext="5"]:after{content:"High"!important}::ng-deep .string-slider [aria-valuetext="0"]:after{content:"No Data"!important}.modal.fade .modal-dialog .modal-content .modal-header{padding:10px!important;border-bottom:transparent}.loader-wrapper{position:relative}.time-frame-section{padding:2px 0 1px 140px;position:relative;overflow:hidden}.time-frame-section .left-label{position:absolute;left:0;top:25px;font-size:16px}.time-frame-section .left-label label{margin-bottom:-8px!important;display:block;overflow:hidden;text-overflow:ellipsis;width:136px;white-space:nowrap}.time-frame-section .left-label span{color:#9e9e9e;font-size:12px}.legendDash{width:20px;height:3px;border-top:2px dashed grey;margin-top:.8rem!important}.legendSolid{width:20px;height:3px;border-top:2px solid #0a77fb;margin-top:.8rem!important}.serviceLegend{width:13px;height:13px;margin-top:.4rem!important;border-radius:50%}.opac{opacity:.5}.no-realtime-data{position:absolute}#clientEfficiencyChartDiv .highcharts-root{min-height:310px}.f-s-10px{font-size:10px}\n'],encapsulation:2}),i}(),data:{title:"Calix Suppport Cloud - quality-of-experience"}},{path:"demo-topology",component:z.b,data:{title:"Calix Suppport Cloud - demo-topology"}},{path:"topology3",component:J,data:{title:"Calix Suppport Cloud - topology"}},{path:"",redirectTo:"issues",pathMatch:"full"}]}],tt=function(){var e=r(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[c.Bz.forChild(et)],c.Bz]}),e}(),it=n(65681),at=function(){var e=r(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[l.ez,tt,it.m,A.T,T.A0,I.u5,I.UX,Ie._8,Ae.kx]]}),e}()}}])}();