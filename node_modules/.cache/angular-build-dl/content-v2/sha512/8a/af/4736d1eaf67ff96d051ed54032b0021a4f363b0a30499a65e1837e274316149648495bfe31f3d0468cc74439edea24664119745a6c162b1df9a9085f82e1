!function(){"use strict";function t(t,e,a){return(e=o(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[4954],{70516:function(t,a,o){o.d(a,{_:function(){return m}});var r,i=o(92340),c=o(38583),s=o(16738),l=o(37716),u=o(91841),g=o(89097),p=o(13149),h=o(30900),d=o(94690),f=o(39895),m=((r=function(){function t(a,n,o,r,c,s){var l=this;e(this,t),this.httpClient=a,this.sso=n,this.excel=o,this.customTranslateService=r,this.utils=c,this.router=s,this.baseURL=i.N.SUPPORT_URL,this.org_id=i.N.faAdminOrgId,this.topn=this.baseURL+"/traffic/reports/topapplications",this.language=this.customTranslateService.defualtLanguage,this.customTranslateService.selectedLanguage.subscribe(function(t){l.language=t})}return n(t,[{key:"Topn",value:function(t,e){var a=this.sso.getOrgId(),n=new Date(t.startDate).toISOString();n=this.makeIsoDate(n);var o=new Date(t.endDate).toISOString();o=this.makeIsoDate(o);var r="".concat(this.topn,"?org=").concat(a,"&tenant=0&groupBy=").concat(t.groupBy,"&sortBy=total&granularity=1month&startTime=").concat(n,"&endTime=").concat(o,"&count=").concat(t.limit?t.limit:10,"&output=").concat(t.criteriaSelected?t.criteriaSelected:"usage");return e&&"top-applications"==e&&(r="".concat(this.topn,"?granularity=24hour&org=").concat(a,"&tenant=0&startTime=").concat(n,"&endTime=").concat(o,"&endpoint=e8ba81c8-c6c7-458d-bcdc-e775af1de465&count=10&direction=both")),this.httpClient.get(r)}},{key:"getTopEndpoints",value:function(t){this.sso.getOrgId();var e=new Date(t.startDate).toISOString();e=this.makeIsoDate(e);var a=new Date(t.endDate).toISOString();a=this.makeIsoDate(a);var n="";if("usage"==t.criteriaSelected){var o=this.sso.getSubscriberEndpointId()?this.sso.getSubscriberEndpointId():"33e034e2-9bcf-4d71-81d7-3a2e97d3a84b";n="".concat(i.N.SUPPORT_URL,"/traffic/reports/topdestinations?granularity=24hour&org=").concat(this.sso.getOrgId(),"&tenant=0&startTime=").concat(e,"&endTime=").concat(a,"&endpoint=").concat(o,"&count=10&direction=").concat(t.directionSelected.toLowerCase())}else{var r=this.sso.getSubscriberEndpointId()?this.sso.getSubscriberEndpointId():"2a3686a2-6a92-4437-9e12-9f04e96e7fdf";n="".concat(i.N.SUPPORT_URL,"/traffic/timeseries?granularity=1hour&org=").concat(this.sso.getOrgId(),"&tenant=0&startTime=").concat(e,"&endTime=").concat(a,"&endpoint=").concat(r,"&groupBy=destination&direction=").concat(t.directionSelected.toLowerCase(),"&output=").concat(t.criteriaSelected,"&count=").concat(t.limit)}return this.httpClient.get(n)}},{key:"getApplications",value:function(t){var e=new Date(t.startDate),a=new Date(t.endDate);e=this.getStartUTCDate(t.startDate,0),a=this.getEndUTCDate(t.endDate),"usage"==t.criteriaSelected&&(e=this.getISOStartOfDay(e),a=this.getISOEndOfDay(a,"applications"));var n,o={granularity:"24hour",tenant:0,startTime:e,endpoint:this.sso.getSubscriberEndpointId()?this.sso.getSubscriberEndpointId():"e8ba81c8-c6c7-458d-bcdc-e775af1de465",output:t.criteriaSelected,direction:t.directionSelected.toLowerCase(),org:this.sso.getOrgId(),count:t.limit,endTime:a};"yes"===t.groupSelected&&(o.groupApplications=!0);var r="";for(var c in o)void 0!==o[c]&&(""!=r&&(r+="&"),r+=c+"="+encodeURIComponent(o[c]));return n="".concat(i.N.SUPPORT_URL,"/traffic/reports/topapplications?").concat(r),this.httpClient.get(n)}},{key:"getAppTraffic",value:function(t){var e=new Date(t.startDate),a=new Date(t.endDate);e=this.getStartUTCDate(t.startDate,0),a=this.getEndUTCDate(t.endDate);var n,o={granularity:this.getGranularityByChart(e,a)||"1hour",org:this.sso.getOrgId(),tenant:0,startTime:e,endTime:a,endpoint:this.sso.getSubscriberEndpointId()?this.sso.getSubscriberEndpointId():"2705d400-58a5-4cca-8091-8ee2843ea2c9",groupBy:"application",output:"rate",count:t.limit,direction:"both"},r="";for(var c in o)void 0!==o[c]&&(""!=r&&(r+="&"),r+=c+"="+encodeURIComponent(o[c]));return n="".concat(i.N.SUPPORT_URL,"/traffic/timeseries?").concat(r),this.httpClient.get(n)}},{key:"getUsage",value:function(t,e){var a=this.sso.getOrgId(),n=new Date(t.startDate),o=new Date(t.endDate);n=this.getISOStartOfDay(n),o=this.getISOEndOfDay(o);var r=this.getGranularity(n,o);return t.granularity=r,this.httpClient.get("".concat(i.N.SUPPORT_URL,"/traffic/timeseries?org=").concat(a,"&tenant=0&granularity=").concat(r,"&startTime=").concat(n,"&endTime=").concat(o,"&output=usage&endpoint=").concat(e))}},{key:"getRate",value:function(t,e){var a=this.sso.getOrgId(),n=new Date(t.startDate),o=new Date(t.endDate),r=this.getGranularityByChart(n,o,"rate");return n=this.getStartUTCDate(t.startDate,0),o=this.getEndUTCDate(t.endDate),this.httpClient.get("".concat(i.N.SUPPORT_URL,"/traffic/timeseries?org=").concat(a,"&tenant=0&granularity=").concat(r,"&startTime=").concat(n,"&endTime=").concat(o,"&output=rate&endpoint=").concat(e))}},{key:"getMonthlyUsage",value:function(t,e){var a=this.sso.getOrgId(),n=new Date,o=t.monthCount?t.monthCount:1,r=new Date(n.getFullYear(),n.getMonth()-o,1),c=new Date(n.getFullYear(),n.getMonth(),0),s=this.getISOStartOfDay(r),l=this.getISOEndOfDay(c);return this.httpClient.get("".concat(i.N.SUPPORT_URL,"/traffic/timeseries?org=").concat(a,"&tenant=0&granularity=").concat(t.granularity,"&startTime=").concat(s,"&endTime=").concat(l,"&output=usage&endpoint=").concat(e))}},{key:"topAppTraffic",value:function(t){var e=this.sso.getOrgId(),a=new Date(t.startDate).toISOString();a=this.makeIsoDate(a);var n=new Date(t.endDate).toISOString();return n=this.makeIsoDate(n),this.httpClient.get("".concat(this.topn,"?org=").concat(e,"&tenant=0&groupBy=application&sortBy=total&granularity=1month&startTime=").concat(a,"&endTime=").concat(n,"&count=").concat(t.limit?t.limit:10))}},{key:"makeOptions",value:function(t,e,a,n){var o=n.title,r=this,i=new c.uU("en-US"),s=new c.rS,l=/\((.*)\)/.exec((new Date).toString())[1];"usage"==a.criteriaSelected&&(l="Coordinated Universal Time");var u=[],g=[],p="".concat(this.language.down);p="both"==a.directionSelected?"".concat(this.language["Both(Down+Up)"]):"Down"==a.directionSelected?"".concat(this.language.down):"".concat(this.language.up);var h="";this.sso.getTrafficReportChartSubscriberInfo()&&(h='<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">'.concat(this.language.Subscriber,": ").concat(this.sso.getTrafficReportChartSubscriberInfo(),'</span><span style="font-size:16px; color:#ffffff">...</span>'));var d="".concat(h,'<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">').concat(this.language.criteria,": ").concat(this.language[a.criteriaSelected],'</span><span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.time_win,": ").concat(i.transform(a.startDate,"MM/dd/yyyy")," to ").concat(i.transform(a.endDate,"MM/dd/yyyy")," [").concat(l,']</span><span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.direction,": ").concat(p,"</span>"),f={chart:{type:e,zoomType:"xy"},title:{text:o},subtitle:{text:d},xAxis:{categories:u},yAxis:{min:0,title:{text:""},labels:{formatter:function(){var t,e=this,n=e.axis.series[0].dataMax;if("usage"==a.criteriaSelected)t=(e.value/(o=n>1e12?[1e12,"TB"]:n>1e9?[1e9,"GB"]:n>1e6?[1e6,"MB"]:n>1e3?[1e3,"KB"]:[1,"B"])[0]).toFixed(1)+(e.isFirst?" "+o[1]:"");else{var o=n>1e12?[1e12,"Tbps"]:n>1e9?[1e9,"Gbps"]:n>1e6?[1e6,"Mbps"]:n>1e3?[1e3,"Kbps"]:[1,"bps"];t=(e.isFirst?0:(e.value/o[0]).toFixed(1))+(e.isFirst?" "+o[1]:"")}return t}}},lang:{noData:r.language["No Data Available"]},legend:{reversed:!0},plotOptions:{series:{color:"#0279FF",cursor:"pointer",point:{events:{}}}},tooltip:{formatter:function(){var t,e,n=this.y;return"usage"==a.criteriaSelected?(t=r.getStackedUnit(n),e="<b> ".concat(this.key," </b><br/>\n                        <p>").concat(this.series.name,"<span>: <b>").concat((this.y/t[0]).toFixed(2)+" "+t[1],"</b><br/></span></p>")):(t=r.utils.bitsToSize(n,!1),e="<b> ".concat(this.key," </b><br/>\n                        <p>").concat(this.series.name,"<span>: <b>").concat(t,"</b><br/></span></p>")),e}},series:[],exporting:{filename:"Subscriber_Top_Applications",buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){for(var e=[],n=0;n<t.length;n++)e.push("usage"==a.criteriaSelected?{Name:t[n].name?t[n].name:"","Up Usage(Byte)":t[n].usOctets?t[n].usOctets.toLocaleString():0,"Down Usage(Byte)":t[n].dsOctets?t[n].dsOctets.toLocaleString():0,"Both(Down+Up) Usage(Byte)":t[n].totalOctets?t[n].totalOctets.toLocaleString():0}:{Name:t[n].name?t[n].name:t[n].key,"Up Max Rate(bps)":t[n].peakUsRate?t[n].peakUsRate.toLocaleString():0,"Up Average Rate(bps)":t[n].usRate?t[n].usRate.toLocaleString():0,"Down Max Rate(bps)":t[n].peakDsRate?t[n].peakDsRate.toLocaleString():0,"Down Average Rate(bps)":t[n].dsRate?t[n].dsRate.toLocaleString():0});var c,s="";r.sso.getTrafficReportChartSubscriberInfo()&&(s="".concat(r.language.Subscriber,": ").concat(r.sso.getTrafficReportChartSubscriberInfo(),"\r\n")),c="".concat(o,"\r\n").concat(s," Criteria: ").concat(r.language[a.criteriaSelected]," \r\n ").concat(r.language.time_win,": ").concat(i.transform(a.startDate,"MM/dd/yyyy")," - ").concat(i.transform(a.endDate,"MM/dd/yyyy")," [").concat(l,"]\r\n Direction: ").concat(p," \r\n"),r.excel.downLoadCSV("Subscriber_Top_Applications",e,c)}}],text:this.language.export}}},credits:{enabled:!1}};if("bar"===e){for(var m=0;m<t.length;m++)t[m].name?u.push(t[m].name):(t[m].key||(t[m].key="others"),u.push(t[m].key)),"usage"==a.criteriaSelected?g.push("both"==a.directionSelected?t[m].totalOctets:"Down"==a.directionSelected?t[m].dsOctets:t[m].usOctets):"rate"==a.criteriaSelected&&g.push("both"==a.directionSelected?t[m].dsRate+t[m].usRate:"Down"==a.directionSelected?t[m].dsRate:t[m].usRate);f.series=[{name:"".concat("both"==a.directionSelected?this.language["Both(Down+Up)"]:this.language[a.directionSelected]," ").concat(s.transform(a.criteriaSelected)),data:g}]}else if("pie"===e){for(var y=0;y<t.length;y++)g.push("Both(Down+Up)"==a.directionSelected?{name:t[y].name,y:t[y].dsOctets+t[y].usOctets}:"Down"==a.directionSelected?{name:t[y].name,y:t[y].dsOctets}:{name:t[y].name,y:t[y].usOctets});f.series=[{data:g,name:this.language[a.directionSelected]}],f.plotOptions.pie={allowPointSelect:!0,cursor:"pointer"}}return f}},{key:"makeIsoDate",value:function(t){var e=t.split(".")[0].split(":");return e.pop(),e.join(":")+":00Z"}},{key:"getISODate",value:function(t){var e=new Date(t),a=e.getFullYear(),n="".concat(e.getMonth()+1),o="".concat(e.getDate()),r="".concat((new Date).getUTCHours());return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),"".concat(a,"-").concat(n,"-").concat(o,"T").concat(r,":00:00Z")}},{key:"convertStartDate",value:function(t){var e=t.split("T");e.splice(1,1),e.push("00:00:00");var a=e.join(" ");return new Date(a).toISOString()}},{key:"convertEndDate",value:function(t){var e=t.split("T");e.splice(1,1),e.push("23:59:59");var a=e.join(" ");return new Date(a).toISOString()}},{key:"checkSameDate",value:function(t){return new Date(t.startDate).setHours(0,0,0,0)==new Date(t.endDate).setHours(0,0,0,0)}},{key:"getStartUTCDate",value:function(t,e){var a=new Date(t);a.setHours(e,0,0,0);var n=a.getUTCFullYear(),o="".concat(a.getUTCMonth()+1),r="".concat(a.getUTCDate()),i="".concat(a.getUTCHours()),c="".concat(a.getUTCMinutes());return o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),i.length<2&&(i="0".concat(i)),c.length<2&&(c="0".concat(c)),"".concat(n,"-").concat(o,"-").concat(r,"T").concat(i,":").concat(c,":00Z")}},{key:"getEndUTCDate",value:function(t){var e=new Date(t);e.setHours(0,0,0,0),e.setDate(new Date(e).getDate()+1);var a=e.getUTCFullYear(),n="".concat(e.getUTCMonth()+1),o="".concat(e.getUTCDate()),r="".concat(e.getUTCHours()),i="".concat(e.getUTCMinutes());return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),i.length<2&&(i="0".concat(i)),"".concat(a,"-").concat(n,"-").concat(o,"T").concat(r,":").concat(i,":00Z")}},{key:"getISOStartOfDay",value:function(t){var e=new Date(t),a=e.getFullYear(),n="".concat(e.getMonth()+1),o="".concat(e.getDate());return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),"".concat(a,"-").concat(n,"-").concat(o,"T00:00:00Z")}},{key:"getISOEndOfDay",value:function(t,e){var a=new Date(t);a.setDate(new Date(a).getDate()+("applications"===e?0:1));var n=a.getFullYear(),o="".concat(a.getMonth()+1),r="".concat(a.getDate());return o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),"".concat(n,"-").concat(o,"-").concat(r,"T00:00:00Z")}},{key:"getISOStartEndDateNEW",value:function(t,e,a){var n=new Date(t),o=new Date,r=n.getUTCFullYear(),i="".concat(n.getUTCMonth()+1),c="".concat(n.getUTCDate()),s="".concat(n.getUTCHours()),l="".concat(n.getUTCMinutes());return i.length<2&&(i="0".concat(i)),c.length<2&&(c="0".concat(c)),e&&new Date(n)>o&&(s="".concat((new Date).getUTCHours()),l="".concat((new Date).getUTCMinutes())),s.length<2&&(s="0".concat(s)),l.length<2&&(l="0".concat(l)),"".concat(r,"-").concat(i,"-").concat(c,"T").concat(s,":").concat(l,":00Z")}},{key:"getISOStartEndDate",value:function(t,e,a){var n=new Date(t),o=new Date;e?n.setHours(23,59,0,0):n.setHours(0,0,0,0);var r=n.getUTCFullYear(),i="".concat(n.getUTCMonth()+1),c="".concat(n.getUTCDate()),s="".concat(n.getUTCHours()),l="".concat(n.getUTCMinutes());return i.length<2&&(i="0".concat(i)),c.length<2&&(c="0".concat(c)),e&&new Date(n)>o&&(s="".concat((new Date).getUTCHours()),l="".concat((new Date).getUTCMinutes())),s.length<2&&(s="0".concat(s)),l.length<2&&(l="0".concat(l)),"".concat(r,"-").concat(i,"-").concat(c,"T").concat(s,":").concat(l,":00Z")}},{key:"getISOEndDate",value:function(t){var e=new Date(t),a=e.getFullYear(),n="".concat(e.getMonth()+1),o="".concat(e.getDate()),r="".concat((new Date).getUTCHours());return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),"".concat(a,"-").concat(n,"-").concat(o,"T").concat(r,":00:00Z")}},{key:"getGranularity",value:function(t,e){return s(e).diff(s(t),"hour")<=24?"1hour":"24hour"}},{key:"getGranularityByChart",value:function(t,e,a,n){var o;return o=n?24*n*60*60:2764800,60*s(e).diff(s(t),"hour")*60<o?"1hour":"24hour"}},{key:"getStackedUnit",value:function(t){return t>1e12?[1e12,"TB"]:t>1e9?[1e9,"GB"]:t>1e6?[1e6,"MB"]:t>1e3?[1e3,"KB"]:[1,"KB"]}}]),t}()).\u0275fac=function(t){return new(t||r)(l.LFG(u.eN),l.LFG(g.t6),l.LFG(p.O),l.LFG(h.d),l.LFG(d.e),l.LFG(f.F0))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},4954:function(a,o,r){r.d(o,{D:function(){return b}});var i,c=r(38583),s=r(16738),l=r(1282),u=r(55429),g=r(37716),p=r(39895),h=r(94690),d=r(48483),f=r(13149),m=r(30900),y=r(89097),D=r(70516),b=((i=function(){function a(t,n,o,r,i,c,s){var l=this;e(this,a),this.router=t,this.utils=n,this.dateUtils=o,this.excel=r,this.customTranslateService=i,this.sso=c,this.service=s,this.defaultData={downData:[],downPercentage:"",downTotal:"",graphType:"",sendTime:(new Date).getTime(),upData:[],upPercentage:"",upTotal:""},this.language=this.customTranslateService.defualtLanguage,this.customTranslateService.selectedLanguage.subscribe(function(t){l.language=t})}return n(a,[{key:"makeOptionsForTraffic",value:function(e,a,n){for(var o,r,i=this,l=new c.uU("en-US"),u=0,g=0,p=i.language["Coordinated Universal Time"],h=(s(n.endDate).diff(s(n.startDate),"hour"),""),d=[],f=[],m=[],y=0;y<e.length;y++){var D=this.dateUtils.getUTCDateFormatFromUTCTime(e[y].startPeriodSec,!0);"1hour"===n.granularity&&(D=this.dateUtils.getUTCDateFormatFromUTCTime(e[y].startPeriodSec,!0,"MM/dd HH:mm")),d.push(D),f.push(e[y].usOctets&&-1!==e[y].usOctets?e[y].usOctets:null),m.push(e[y].dsOctets&&-1!==e[y].dsOctets?e[y].dsOctets:null),u+=e[y].usOctets&&-1!==e[y].usOctets?e[y].usOctets:0,g+=e[y].dsOctets&&-1!==e[y].dsOctets?e[y].dsOctets:0}var b=this.getStackedUnit(u),v=this.getStackedUnit(g);o=(u/b[0]).toFixed(2)+" "+b[1],r=(g/v[0]).toFixed(2)+" "+v[1];var S=this,T={chart:{type:"column",zoomType:"xy"},time:{useUTC:!1},title:{text:this.language.subscriberUsage},subtitle:{text:h},xAxis:{categories:d},yAxis:{min:0,title:{text:""},labels:{formatter:function(){var t=this,e=t.axis.series[0].dataMax,a=e>1e12?[1e12,"TB"]:e>1e9?[1e9,"GB"]:e>1e6?[1e6,"MB"]:e>1e3?[1e3,"KB"]:[1,"B"];return(t.value/a[0]).toFixed(1)+(t.isFirst?" ":" "+a[1])}},opposite:!1,tickLength:2},lang:{noData:i.language["No Data Available"]},legend:{reversed:!1},plotOptions:{column:{stacking:"normal"},series:{colors:["#E87B00","#44367D","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],point:{events:{}}}},series:[],exporting:{filename:"Subscriber_Usage",buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var a,c=[],s="";i.sso.getTrafficReportChartSubscriberInfo()&&(s="".concat(S.language.Subscriber,": ").concat(i.sso.getTrafficReportChartSubscriberInfo(),"\r\n")),a="".concat(S.language.subscriberUsage,"\r\n").concat(s).concat(i.language.time_win,": ").concat(l.transform(n.startDate,"MM/dd/yyyy")," - ").concat(l.transform(n.endDate,"MM/dd/yyyy")," [").concat(p,"]\r\n").concat(i.language.upUsageTitle,": ").concat(o,"    ").concat(i.language.downUsageTitle,": ").concat(r,"\r\n");for(var u=0;u<e.length;u++){var g;c.push((t(g={},S.language["Date Time"],i.dateUtils.getUTCDateFormatFromUTCTime(e[u].startPeriodSec,!0,"MM/dd HH:mm")),t(g,S.language["Up Usage(Byte)"],e[u].usOctets&&-1!==e[u].usOctets?e[u].usOctets.toLocaleString():0),t(g,S.language["Down Usage(Byte)"],e[u].dsOctets&&-1!==e[u].dsOctets?e[u].dsOctets.toLocaleString():0),g))}i.excel.downLoadCSV("Subscriber_Usage",c,a)}}],text:i.language.export}}},credits:{enabled:!1},tooltip:{formatter:function(){var t=this.x||this.point.name,e=i.getUnit(this.y);return"<p><strong>"+t+"</strong><br/><span> "+this.series.name+": <strong>"+(this.y/e[0]).toFixed(2)+" "+e[1]+"</strong><br/></span></p>"}}};T.series=[{name:this.language.upUsageTitle,data:f,color:"#82BF00"},{name:this.language.downUsageTitle,data:m,color:"#0279FF"}],T.xAxis.categories=d;var x="";return this.sso.getTrafficReportChartSubscriberInfo()&&(x='<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">'.concat(this.language.Subscriber,": ").concat(this.sso.getTrafficReportChartSubscriberInfo(),'</span><span style="font-size:16px; color:#ffffff">...</span>')),h="".concat(x,'<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.time_win,": ").concat(l.transform(n.startDate,"MM/dd/yyyy")," to ").concat(l.transform(n.endDate,"MM/dd/yyyy")," [").concat(p,']</span><br/>\n    <span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">').concat(this.language.upUsageTitle,": ").concat(o,"    ").concat(this.language.downUsageTitle,": ").concat(r,"</span>"),T.subtitle.text=h,T}},{key:"dataFormingForRTBC",value:function(t,e){var a=[],n=[];if("upData"===e){t.upData=t.upData.slice(0,5);for(var o=0;o<t.upData.length;o++)a.push(t.upData[o].name),n.push({y:t.upData[o].value,id:t.upData[o].id,name:t.upData[o].name})}else{t.downData=t.downData.slice(0,5);for(var r=0;r<t.downData.length;r++)a.push(t.downData[r].name),n.push({y:t.downData[r].value,id:t.downData[r].id,name:t.downData[r].name})}}},{key:"makeOptionsForRTBC",value:function(t,e,a,n,o){var r=this;n=n||5;var i=[],c=[],s={chart:{type:"bar",zoomType:"xy",height:180,renderTo:"container"},title:{text:""},credits:{enabled:!1},xAxis:{categories:i},yAxis:{title:{text:""},opposite:!0,tickLength:2,tickAmount:o?6:3,startOnTick:!1,endOnTick:!1,labels:{formatter:function(){return"".concat(r.bitsToSize(this.value,!1))},rotation:0}},legend:{enabled:!1},plotOptions:{column:{stacking:"normal"},series:{color:"#0027FF",cursor:"pointer",point:{events:{}}}},series:[],tooltip:{formatter:function(){return"".concat(this.x," <br/> ").concat(r.utils.bitsToSize(this.y,!1))}}},l=[],u=[];if("bar"===e){if("upData"===a){t.upData=t.upData.slice(0,n);for(var g=0;g<t.upData.length;g++)i.push(t.upData[g].name),c.push(t.upData[g].value),l.push(t.upData[g].name),u.push(t.upData[g].id)}else{t.downData=t.downData.slice(0,n);for(var p=0;p<t.downData.length;p++)i.push(t.downData[p].name),c.push(t.downData[p].value),l.push(t.downData[p].name),u.push(t.downData[p].id)}s.series=[{data:c}]}return s.xAxis.categories=i,s}},{key:"makeOptionsForAreaChart",value:function(t,e,a){for(var n={chart:{type:"area",zoomType:"xy"},title:{text:""},xAxis:{categories:[]},yAxis:{min:0,title:{text:""}},legend:{reversed:!0},plotOptions:{area:{stacking:"normal",lineColor:"#666666",lineWidth:1,marker:{lineWidth:1,lineColor:"#666666"}}},series:[]},o=[],r=0;r<t.length;r++)o.push("up"==e?{name:t[r].name,data:[t[r].usOctets]}:{name:t[r].name,data:[t[r].dsOctets]});return n.xAxis.categories=[a.startDate],n.series=o,n}},{key:"makeOptionsForLineChart",value:function(t,e,a){var n=this.language.max_up_rate,o=this.language.max_down_rate,r=this,i=[],l=[],u=[];this.sso.getReportChartSubscriberInfo(),"Average"==a.rateSelected&&(n=this.language.Average_Up_Rate,o=this.language.Average_Down_Rate);var g=new c.uU("en-US"),p=new Date(a.startDate),h=new Date(a.endDate);this.service.getGranularityByChart(p,h,"rate");for(var d=0;d<t.length;d++)i.push(this.getDateTime(t[d].startPeriodSec,!0,"MM/dd HH:mm"));var f=/\((.*)\)/.exec((new Date).toString())[1],m=(s(a.endDate).diff(s(a.startDate),"hour"),"");this.sso.getTrafficReportChartSubscriberInfo()&&(m='<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">'.concat(this.language.Subscriber,": ").concat(this.sso.getTrafficReportChartSubscriberInfo(),'</span><span style="font-size:16px; color:#ffffff">...</span>'));for(var y="".concat(m,'<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">Rate: ').concat(this.language[a.rateSelected],'</span><span style="font-size:16px; color:#ffffff">...</span><span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.time_win,": ").concat(g.transform(a.startDate,"MM/dd/yyyy")," to ").concat(g.transform(a.endDate,"MM/dd/yyyy")," [").concat(f,"]</span>"),D={chart:{type:"line"},time:{useUTC:!1},title:{text:this.language.subscriberRate},subtitle:{text:y},xAxis:{categories:[],labels:{rotation:-65,formatter:function(){return this.value}}},yAxis:{title:{text:""},labels:{formatter:function(){return r.utils.bitsToSize(this.value,!0)}},min:0,minRange:1},lang:{noData:r.language["No Data Available"]},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal",symbolRadius:0},tooltip:{formatter:function(){return"<b>"+this.x+" <b><br/>"+this.series.name+": <b>"+r.utils.bitsToSize(this.y,!1)+"</b>"}},plotOptions:{series:{marker:{enabled:!1}},column:{stacking:"normal",dataLabels:{enabled:!1}}},series:[{name:n,color:"#82BF00",data:[]},{name:o,color:"#0279FF",data:[]}],exporting:{filename:"Subscriber_Rate",buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var e,n=[],o="";r.sso.getTrafficReportChartSubscriberInfo()&&(o="".concat(r.language.Subscriber,": ").concat(r.sso.getTrafficReportChartSubscriberInfo(),"\r\n")),e="Subscriber Rate\r\n".concat(o).concat(r.language.time_win,": ").concat(g.transform(a.startDate,"MM/dd/yyyy")," - ").concat(g.transform(a.endDate,"MM/dd/yyyy")," [").concat(f,"]\r\nRate: ").concat(a.rateSelected,"\r\n");for(var i=0;i<t.length;i++)n.push({"Date Time":r.getDateTime(t[i].startPeriodSec,!0,"MM/dd HH:mm"),"Max Up Rate(bps)":t[i].peakUsRate&&-1!==t[i].peakUsRate?t[i].peakUsRate:0,"Max Down Rate(bps)":t[i].peakDsRate&&-1!==t[i].peakDsRate?t[i].peakDsRate:0,"Average Up Rate(bps)":t[i].usRate&&-1!==t[i].usRate?t[i].usRate:0,"Average Down Rate(bps)":t[i].dsRate&&-1!==t[i].dsRate?t[i].dsRate:0});r.excel.downLoadCSV("Subscriber_Rate",n,e)}}],text:r.language.export}}},credits:{enabled:!1}},b=0;b<t.length;b++)i.push(this.getDateTime(t[b].startPeriodSec,!0,"MM/dd HH:mm")),"Average"==a.rateSelected?(l.push(t[b].usRate),u.push(t[b].dsRate)):(l.push(t[b].peakUsRate),u.push(t[b].peakDsRate));return D.xAxis.categories=i,i&&i.length<=45?D.xAxis.tickInterval=1:i&&i.length>45&&(D.xAxis.tickInterval=Math.floor(i.length/45)),D.series[0].data=l,D.series[1].data=u,D}},{key:"makeOptionsForMonthlyUsage",value:function(t,e,a){var n=this;new c.uU("en-US");for(var o,r,i=n.language["Coordinated Universal Time"],s=new Date,l=a.monthCount?a.monthCount:1,u=new Date(s.getFullYear(),s.getMonth()-l,1),g=new Date(s.getFullYear(),s.getMonth(),0),p=this.dateUtils.getMonthYear(u),h=this.dateUtils.getMonthYear(g),d="",f=0,m=0,y=[],D=[],b=[],v=0;v<t.length;v++){var S=this.dateUtils.getUTCDateFormatFromUTCTime(t[v].startPeriodSec,!0,"MM/yyyy");y.push(S),D.push(t[v].usOctets&&-1!==t[v].usOctets?t[v].usOctets:null),b.push(t[v].dsOctets&&-1!==t[v].dsOctets?t[v].dsOctets:null),f+=t[v].usOctets&&-1!==t[v].usOctets?t[v].usOctets:0,m+=t[v].dsOctets&&-1!==t[v].dsOctets?t[v].dsOctets:0}var T=this.getStackedUnit(f),x=this.getStackedUnit(m);o=(f/T[0]).toFixed(2)+" "+T[1],r=(m/x[0]).toFixed(2)+" "+x[1];var U={chart:{type:"column",zoomType:"xy"},title:{text:this.language.subscriberMonthlyUsage},subtitle:{text:d},xAxis:{categories:y},yAxis:{min:0,title:{text:""},labels:{formatter:function(){var t=this,e=t.axis.series[0].dataMax,a=e>1e12?[1e12,"TB"]:e>1e9?[1e9,"GB"]:e>1e6?[1e6,"MB"]:e>1e3?[1e3,"KB"]:[1,"B"];return(t.value/a[0]).toFixed(1)+(t.isFirst?" ":" "+a[1])}},opposite:!1,tickLength:2},lang:{noData:n.language["No Data Available"]},legend:{reversed:!1},plotOptions:{column:{stacking:"normal"},series:{colors:["#E87B00","#44367D","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],point:{events:{}}}},series:[],exporting:{filename:"Subscriber_Monthly_Usage",buttons:{contextButton:{menuItems:[{textKey:"downloadPDF",text:this.language.exportPDF||"Export PDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadCSV",text:this.language.exportCsv||"Export CSV",onclick:function(){var e,a=[],c="";n.sso.getTrafficReportChartSubscriberInfo()&&(c="".concat(n.language.Subscriber,": ").concat(n.sso.getTrafficReportChartSubscriberInfo(),"\r\n")),e="".concat(n.language.subscriberMonthlyUsage,"\r\n").concat(c).concat(n.language.time_win,": ").concat(p," - ").concat(h," [").concat(i,"]\r\n").concat(n.language.upUsageTitle,": ").concat(o,"    ").concat(n.language.downUsageTitle,": ").concat(r,"\r\n");for(var s=0;s<t.length;s++)a.push({"Date Time":n.dateUtils.getUTCDateFormatFromUTCTime(t[s].startPeriodSec,!0,"MM/yyyy"),"Up Usage(Byte)":t[s].usOctets&&-1!==t[s].usOctets?t[s].usOctets.toLocaleString():0,"Down Usage(Byte)":t[s].dsOctets&&-1!==t[s].dsOctets?t[s].dsOctets.toLocaleString():0});n.excel.downLoadCSV("Subscriber_Monthly_Usage",a,e)}}],text:"Export"}}},credits:{enabled:!1},tooltip:{formatter:function(){var t=this.x||this.point.name,e=n.getUnit(this.y);return"<p><strong>"+t+"</strong><br/><span> "+this.series.name+": <strong>"+(this.y/e[0]).toFixed(2)+" "+e[1]+"</strong><br/></span></p>"}}};U.series=[{name:this.language.upUsageTitle,data:D,color:"#82BF00"},{name:this.language.downUsageTitle,data:b,color:"#0279FF"}],U.xAxis.categories=y;var w="";return this.sso.getTrafficReportChartSubscriberInfo()&&(w='<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">'.concat(this.language.Subscriber,": ").concat(this.sso.getTrafficReportChartSubscriberInfo(),'</span><span style="font-size:16px; color:#ffffff">...</span>')),d="".concat(w,'<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;"> ').concat(this.language.time_win,": ").concat(p," to ").concat(h," [").concat(i,']</span><br/>\n    <span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">').concat(this.language.upUsageTitle,": ").concat(o,"    ").concat(this.language.downUsageTitle,":  ").concat(r,"</span>"),U.subtitle.text=d,U}},{key:"convertDate",value:function(t){var e=new Date(t),a=(e.getMonth()+1).toString(),n=e.getDate().toString(),o=a.split(""),r=n.split("");return(o[1]?a:"0"+o[0])+"/"+(r[1]?n:"0"+r[0])}},{key:"setTopEP",value:function(t){t?localStorage.setItem("calix.topep_data",JSON.stringify(t)):localStorage.removeItem("calix.topep_data")}},{key:"getTopEP",value:function(){return localStorage.getItem("calix.topep_data")?JSON.parse(localStorage.getItem("calix.topep_data")):[]}},{key:"setTopApp",value:function(t){t?localStorage.setItem("calix.topapp_data",JSON.stringify(t)):localStorage.removeItem("calix.topapp_data")}},{key:"getTopApp",value:function(){return localStorage.getItem("calix.topapp_data")?JSON.parse(localStorage.getItem("calix.topapp_data")):[]}},{key:"setTopLoc",value:function(t){t?localStorage.setItem("calix.toploc_data",JSON.stringify(t)):localStorage.removeItem("calix.toploc_data")}},{key:"getTopLoc",value:function(){return localStorage.getItem("calix.toploc_data")?JSON.parse(localStorage.getItem("calix.toploc_data")):[]}},{key:"getStackedUnit",value:function(t){return t>1e12?[1e12,"TB"]:t>1e9?[1e9,"GB"]:t>1e6?[1e6,"MB"]:t>1e3?[1e3,"KB"]:[1,""]}},{key:"setNetworkRealTimeGraphData",value:function(t,e){e?localStorage.setItem(t,JSON.stringify(e)):localStorage.removeItem(t)}},{key:"getNetworkRealTimeGraphData",value:function(t){return this.defaultData.graphType=t,localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):this.defaultData}},{key:"bitsToSize",value:function(t,e){var a=t,n=["bps","Kbps","Mbps","Gbps","Tbps"];if(0==a)return"0 bps";var o=Math.floor(Math.log(a)/Math.log(1e3));if(e)return Math.round(a/Math.pow(1e3,o))+" "+n[o];o<0&&(o=0);var r=1;return Number.isInteger(+l.numberFormat(Math.abs(a/Math.pow(1e3,o)),1))&&(r=0),l.numberFormat(Math.abs(a/Math.pow(1e3,o)),r)+" "+n[o]}},{key:"getDateTime",value:function(t,e,a){var n=60*(new Date).getTimezoneOffset()*-1;t=e?1e3*parseInt(t+n):1e3*parseInt(t);var o=u.ou.fromMillis(t);return a?o.toUTC().toFormat(a):o.toUTC().toFormat("MM/dd/yyyy")}},{key:"getUnit",value:function(t){return t>1e12?[1e12,"TB"]:t>1e9?[1e9,"GB"]:t>1e6?[1e6,"MB"]:t>1e3?[1e3,"KB"]:[1,"KB"]}}]),a}()).\u0275fac=function(t){return new(t||i)(g.LFG(p.F0),g.LFG(h.e),g.LFG(d.s),g.LFG(f.O),g.LFG(m.d),g.LFG(y.t6),g.LFG(D._))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)}}])}();