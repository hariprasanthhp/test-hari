"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5555],{43721:function(e,t,i){i.d(t,{o:function(){return c}});var s=i(49457),n=i(84487),a=i(37716),o=i(7450);const r="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",l=".xlsx";let c=(()=>{class e{constructor(e){this.translateService=e,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{console.log("check"),this.language=e,this.isRerender=!0})}exportAsExcelFile(e,t){const i={Sheets:{data:n.utils.json_to_sheet(e)},SheetNames:["data"]},s=n.write(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(s,t)}saveAsExcelFile(e,t){const i=new Blob([e],{type:r});s.saveAs(i,"Software_Versions_Report"+l)}exportAsExcelFileUSR(e,t){const i={Sheets:{data:n.utils.json_to_sheet(e)},SheetNames:["data"]},s=n.write(i,{bookType:"xlsx",type:"array"});this.saveAsCSVFile(s,t)}saveAsCSVFile(e,t){var i=new Blob([e],{type:"text/csv"});s.saveAs(i,"Unassociated_Systems_Report.csv")}saveAsExcelFileUSR(e,t){const i=new Blob([e],{type:r});s.saveAs(i,"Unassociated_System_Report"+l)}mobileValidator(e){return!(void 0!==e&&""!==e&&null!==e&&!isNaN(e))||10!==e.length}emailValidator(e){return!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}stringValidator(e){return void 0===e||""===e||null===e}numberValidator(e){return void 0===e||""===e||null===e||!!isNaN(e)}thresholdValidator(e){return!(void 0!==e&&""!==e&&null!==e&&!isNaN(e)&&e>=30&&e<=999)}resendValidator(e){return!(void 0!==e&&""!==e&&null!==e&&!isNaN(e)&&e>=45&&e<=365)}confirmPasswordValidator(e,t){let i=this.stringValidator(e),s=this.stringValidator(t);return!(!i&&!s)||e!==t}percentageValidator(e){return!(!e&&0!=e)&&(e>100||e<=0)}durationValidator(e){return!(!e&&0!=e)&&(e>99||e<=0)}stringValidatorWithCrossScriptAndErrorMsg(e){return void 0===e||""===e||null===e?{error:!0,errorMsg:void 0}:e.includes("<")||e.includes(">")?{error:!0,errorMsg:this.language.Script_not}:0==e.replaceAll(" ","").length?{error:!0,errorMsg:this.language.Valid_Text}:{error:!1,errorMsg:void 0}}urlValidation(e){var t=this.isUrlValid(e);return e?0==t?{error:!0,errorMsg:this.language.Enter_valid_URL}:1==t?{error:!1,errorMsg:void 0}:void 0:this.stringValidatorWithCrossScriptAndErrorMsg(e)}isUrlValid(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}isValidIpV4Addr(e){return-1==e.indexOf("/")?/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e):/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(3[0-2]|[1-2][0-9]|[0-9]))$/.test(e)}isValidIpV6Addr(e){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/g.test(e)}isValidateIPHostName(e){return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e)}isValidSubnetV4(e){return/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))$/.test(e)}isValidSubnetV6(e){return/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))$/.test(e)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(o.s))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},828:function(e,t,i){i.d(t,{O:function(){return c}});var s=i(26215),n=i(40205),a=i(91841),o=i(92340),r=i(5304),l=i(37716);let c=(()=>{class e{constructor(e){this.httpClient=e,this.baseURL=o.N.faAdminURL,this.responseSubject=new s.X([]);let t=new a.WM({"Content-Type":"application/json"});this.options={headers:t}}DefinitionList(e){return this.httpClient.get(`${o.N.faAdminURL}application?org-id=${e}`)}DefinitionAdd(e,t){return this.httpClient.post(`${o.N.faAdminURL}application?org-id=${t}`,e)}exportDefinition(e){return this.httpClient.get(`${o.N.faAdminURL}application?org-id=${e}`)}importDefinition(e,t){return this.httpClient.put(`${o.N.faAdminURL}application?org-id=${t}`,e)}DefinitionDelete(e,t){return this.httpClient.delete(`${o.N.faAdminURL}application/${e}?org-id=${t}`)}DefinitionUpdate(e,t,i){return this.httpClient.put(`${o.N.faAdminURL}application/${e}?org-id=${i}`,t)}ApplicationGroupList(e){return this.httpClient.get(`${o.N.faAdminURL}application-group?org-id=${e}&tenant-id=0`)}ApplicationGroupNameList(e){return this.httpClient.get(`${o.N.faAdminURL}application-group?org-id=${e}&tenant-id=0`)}ApplicationGroupMmbrList(e,t){return this.httpClient.get(`${o.N.faAdminURL}application-group-member/${e}?org-id=${t}&tenant-id=0`)}ApplicationGroupMmbrCreate(e,t){return this.httpClient.post(`${o.N.faAdminURL}application-group-member?org-id=${t}&tenant-id=0`,e)}ApplicationGroupMmbrUpdate(e,t,i){return this.httpClient.put(`${o.N.faAdminURL}application-group-member/${t}?org-id=${i}&tenant-id=0`,e)}ApplicationGroupMmbrDelete(e,t){return this.httpClient.delete(`${o.N.faAdminURL}application-group-member/${e}?org-id=${t}&tenant-id=0`)}callRestApi(e,t){return this.httpClient.get(`${e}`,this.options).pipe((0,r.K)(this.handleError))}handleError(e){return(0,n._)(e)}trimAddress(e){for(e=e.trim();"."===e[e.length-1];)e=e.slice(0,-1);return e}isSubnetV4(e){return 4==e.split("/")[0].split(".").length}isSubnetV6(e){return 6==e.split("/")[0].split(".").length}combineApps(e,t){t=t||[];let i={},s=(e=(e=e||[]).map(e=>(e.type="Local",e.v4s=this.splitData(e.addressesV4),e.v6s=this.splitData(e.addressesV6),e.newPorts=this.splitData(e.ports),i[e._id]=e.name,e))).length?e.slice(0):[];if(t&&t.length){const n=e.map(e=>e.name);t=t.map(t=>{const a=n.indexOf(t.name);return-1==a?(t.type="Global",t.v4s=this.splitData(t.addressesV4),t.v6s=this.splitData(t.addressesV6),t.newPorts=this.splitData(t.ports),i[t._id]=t.name):(t=e[a],s.splice(a,1),i[t._id]=t.name),t}),t=[...t,...s]}else e.length&&(t=e);return{allApps:t,appIds:i}}splitData(e){let t=[];return""!=e&&null!=e&&(t=[...e.split(";")]),t}ExportAppGroups(e){return this.httpClient.get(`${o.N.faAdminURL}export/application-groups?org-id=${e}`)}ExportApps(e){return this.httpClient.get(`${o.N.faAdminURL}export/applications?org-id=${e}`)}ImportApps(e,t){return this.httpClient.put(`${o.N.faAdminURL}fa_import/applications?org-id=${e}`,t)}ImportAppGroups(e,t){return this.httpClient.put(`${o.N.faAdminURL}fa_import/application-groups?org-id=${e}`,t)}portValidation(e){return!(null==(e=e?e.trim():"")||!/^()([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])((\/TCP)|(\/UDP))?$/gim.test(e))}rPortValidation(e){return!(null==(e=e?e.trim():"")||!/^([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])(?:-(?:([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])))((\/TCP)|(\/UDP))$/gim.test(e)||!this.compareStartEndPorts(e))}validateJoinPorts(e){return!(!(e=e?e.trim():"")||!/^([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])(?:\|(?:([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5]))){0,2}$/gim.test(e))}compareStartEndPorts(e){let t=e.split("/")[0];if(t&&(null==t?void 0:t.length)){let e=t.split("-");if(e&&(null==e?void 0:e.length)&&2==(null==e?void 0:e.length)&&+e[1]>+e[0])return!0}return!1}importDefinitionDPI(e,t){let i=new a.WM({"Content-Type":"application/xml"});return this.httpClient.put(`${o.N.faAdminURL}uploadExtApplications?engine-id=${t}`,e,{headers:i})}importApplicationGroupDPI(e,t){let i=new a.WM({"Content-Type":"application/xml"});return this.httpClient.put(`${o.N.faAdminURL}uploadExtApplicationsGroup?engine-id=${t}`,e,{headers:i,responseType:"blob"})}applicationsPatch(e,t,i){return this.httpClient.patch(`${o.N.faAdminURL}application/${e}?org-id=${i}`,t)}getApplicationByDomainName(e,t){return this.httpClient.get(`${o.N.faAdminURL}getExtApplicationByDomain/${e}`)}getApplicationAudit(e,t){return this.httpClient.put(`${o.N.faAdminURL}getApplicationAudit`,e)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(a.eN))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},404:function(e,t,i){i.d(t,{i:function(){return l}});var s=i(79765),n=i(25917),a=i(84487),o=i(37716),r=i(7450);let l=(()=>{class e{constructor(e){this.translateService=e,this.showTabMenu$=new s.xQ,this.language=this.translateService.defualtLanguage,this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe()}plusIcon(){}delete(e){e.path.forEach(e=>{})}inlineSave(){}formatTodayDate(){var e=new Date,t=""+(e.getMonth()+1),i=""+e.getDate(),s=e.getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[s,t,i].join("-")}generateExportName(e,t=!1){let i=this.formatTodayDate();return t?`${this.language[e]}_${this.language.export_file}_${i}`:`${e}_export_${i}`}onFileChange(e){let t=null,i=null;const s=new FileReader,o=e.target.files[0];return s.onload=e=>{t=a.read(s.result,{type:"binary"}),i=t.SheetNames.reduce((e,i)=>(e[i]=a.utils.sheet_to_json(t.Sheets[i]),e),{})},s.readAsBinaryString(o),(0,n.of)([])}isValidIpV4Addr(e){return-1==e.indexOf("/")?/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e):/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(3[0-2]|[1-2][0-9]|[0-9]))$/.test(e)}isValidIpV6Addr(e){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/g.test(e)}isValidSubnetV4(e){return/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))$/.test(e)}isValidSubnetV6(e){return/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))$/.test(e)}trimSubnet(e){for(e=e.trim();"."===e[e.length-1];)e=e.slice(0,-1);return e}validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}sortByColumn(e,t,i){return e.sort((e,s)=>{var n=e[i]?e[i].toUpperCase():"",a=s[i]?s[i].toUpperCase():"";if("asc"==t){if(n<a)return-1;if(n>a)return 1}else{if(n>a)return-1;if(n<a)return 1}return 0}),e}sortByColumnAggregated(e,t,i){return"aggregated"===i?(e.sort((e,i)=>{var s=this.isAggregatedGroupAvail(e),n=this.isAggregatedGroupAvail(i);return"asc"==t?s===n?0:s?-1:1:s===n?0:s?1:-1}),e):this.sortByColumn(e,t,i)}validateDomain(e){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/.test(e)}validateURL(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)}splitData(e,t){let i=[];return""!=e&&null!=e&&(i=[...e.split(t)]),i}validateIpORHost(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)+([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$/g.test(e)}ValidateIpV4Addr(e){return/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e)}isAggregatedGroupAvail(e){return!(!e||!e.aggGroup)&&this.validateUUID(e.aggGroup)}validateUUID(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)&&"00000000-0000-0000-0000-000000000000"!=e}columnNameFromKeys(e,t){return Object.keys(t).forEach(i=>{e[t[i]]=null!=e[i]?e[i]:"",delete e[i]}),e}keysFromColumnName(e,t){return Object.keys(t).forEach(i=>{e[i]=null!=e[t[i]]?e[t[i]]:"",delete e[t[i]]}),e}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r.s))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7616:function(e,t,i){i.d(t,{v:function(){return o}});var s=i(92340),n=i(37716),a=i(91841);let o=(()=>{class e{constructor(e){this.httpClient=e,this.baseURL=s.N.faAdminURL,this.org_id=+localStorage.getItem("calix.org_id"),this.deviceDelete=this.baseURL+"device",this.export=this.baseURL+"export/",this.fa_import=this.baseURL+"fa_import/",this.deviceUpdate=this.baseURL+"device"}DeviceList(e){return this.httpClient.get(this.baseURL+`device?org-id=${e}`)}DeviceAdd(e,t){return this.httpClient.post(this.baseURL+`device?org-id=${t}`,e)}DeviceDelete(e,t){return this.httpClient.delete(`${this.deviceDelete}/${e}?org-id=${t}`)}DeviceUpdate(e,t,i){return this.httpClient.put(`${this.deviceUpdate}/${e}?org-id=${i}`,t)}Export(e,t){return this.httpClient.get(`${this.export}${e}?org-id=${t}`)}Import(e,t,i){return this.httpClient.put(`${this.fa_import}${e}?org-id=${i}`,t)}DeviceStatusList(e){return this.httpClient.get(`${s.N.FLOW_BASE_URL}metrics/reports/fcr/devicestatus?OrgId=${e}`)}DeviceMatricSeries(e,t,i,n){let a=`${s.N.FLOW_BASE_URL}metrics/timeseries?deviceIP=${e}&startTime=${t}&OrgId=${n}`;return i&&(a=`${a}&endTime=${i}`),this.httpClient.get(a)}GetPacketTimingData(e,t){return this.httpClient.get(`${s.N.FLOW_BASE_URL}metrics/timestats?deviceIP=${e}&OrgId=${t}`)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(a.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},68895:function(e,t,i){i.d(t,{I:function(){return U}});var s=i(3679),n=i(23771),a=i(79765),o=i(39897),r=i(25917),l=i(35758),c=i(22759),d=i(87519),g=i(43190),u=i(5304),h=i(54395),p=i(92340),m=i(37716),f=i(7450),Z=i(91841),b=i(38048),A=i(39895),v=i(49342),x=i(39075),T=i(38583),_=i(86640);function C(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"p",18),m._uU(1,"To grant 3rd party users access to your organization, please use this "),m.TgZ(2,"a",19),m.NdJ("click",function(){return m.CHM(e),m.oxw().openMFALink()}),m._uU(3,"link "),m._UZ(4,"img",20),m._uU(5,"."),m.qZA(),m.qZA()}}function q(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",21),m.TgZ(1,"span",22),m._UZ(2,"img",23),m.qZA(),m.TgZ(3,"button",24),m.NdJ("click",function(){return m.CHM(e),m.oxw().closeAlert()}),m._UZ(4,"span"),m.qZA(),m._UZ(5,"div",25),m.qZA()}if(2&e){const e=m.oxw();m.xp6(5),m.Q6J("innerHtml",e.errorInfo,m.oJD)}}function w(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",26),m.TgZ(1,"button",24),m.NdJ("click",function(){return m.CHM(e),m.oxw().closeAlert()}),m._UZ(2,"span"),m.qZA(),m._UZ(3,"div",27),m.qZA()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("innerHtml",e.successInfo,m.oJD)}}function O(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"i",28),m.NdJ("click",function(){return m.CHM(e),m.oxw().clearSearchInp()}),m.qZA()}}function S(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td",36),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(2).gotoUserDetail(t)}),m._UZ(4,"i",37),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,i=m.oxw(2);m.xp6(2),m.Oqu(null==e?null:e.userName),m.xp6(2),m.s9C("title",i.language.Edit)}}function y(e,t){if(1&e&&(m.TgZ(0,"tbody"),m.TgZ(1,"tr"),m.TgZ(2,"td",38),m._uU(3),m.qZA(),m.qZA(),m.qZA()),2&e){const e=m.oxw(2);m.xp6(3),m.Oqu(e.filterAndSearchFlag?e.language["No matching records found"]:e.language["No data available in table"])}}function M(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",29),m.TgZ(1,"table",30),m.TgZ(2,"thead",31),m.TgZ(3,"tr"),m.TgZ(4,"th"),m._uU(5),m.qZA(),m.TgZ(6,"th"),m._uU(7),m.qZA(),m.qZA(),m.qZA(),m.TgZ(8,"tbody"),m.YNc(9,S,5,2,"tr",32),m.qZA(),m.YNc(10,y,4,1,"tbody",33),m.qZA(),m.TgZ(11,"button",34),m.NdJ("click",function(){return m.CHM(e),m.oxw().onSubmit()}),m._uU(12),m.qZA(),m.TgZ(13,"button",35),m.NdJ("click",function(){return m.CHM(e),m.oxw().clearForm()}),m._uU(14),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("dtOptions",e.dtOptions),m.xp6(4),m.Oqu(e.language.userName),m.xp6(2),m.Oqu(e.language.Action),m.xp6(2),m.Q6J("ngForOf",e.userListForOrg),m.xp6(1),m.Q6J("ngIf",0==(null==e.userListForOrg?null:e.userListForOrg.length)||0==e.filterCount),m.xp6(1),m.Q6J("disabled",e.disableBtn),m.xp6(1),m.hij(" ",e.language.submit," "),m.xp6(2),m.hij(" ",e.language.Cancel," ")}}const k=function(){return{standalone:!0}};let U=(()=>{class e{constructor(e,t,i,n,o,r,l){this.translateService=e,this.fb=t,this.http=i,this.sso=n,this.router=o,this.commonOrgService=r,this.titleService=l,this.showMFALink=!1,this.searchUser=new s.NI(""),this.orgsList=[],this.userListForOrg=[],this.defaultRoleForOrg={},this.roles=[{_id:"",name:"Unassigned"}],this.MODULE="systemAdministration",this.accountsForm=this.fb.group({org:[null,[s.kI.required]],roleId:["",[s.kI.required]]}),this.disableBtn=!0,this.count=0,this.errorInfo="",this.successInfo="",this.dtOptions={},this.dtTrigger=new a.xQ,this.loading=!1,this.showTable=!1,this.defaultRoleId="",this.filterAndSearchFlag=!1}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.listenSearch(),this.commonOrgService.currentPageAdder("account-management");let e=this.router.url;this.ORG_ID=this.sso.getOrganizationID(e),this.MODULE=this.sso.getRedirectModule(e),"systemAdministration"===this.MODULE||this.sso.isSecureAccess()||(this.showMFALink=!0),this.titleService.setTitle(`Account Management - ${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - Calix Cloud`),this.accountsForm.valueChanges.subscribe(e=>{this.watchDisableBtn()}),this.formSub=this.accountsForm.get("org").valueChanges.pipe((0,d.x)(),(0,g.w)(e=>(this.accountsForm.get("roleId").setValue(""),this.getUsersAndDefaultRoles(e)))).subscribe(e=>{var t,i,s,n,a;this.userListForOrg=[],this.defaultRoleId="",this.searchUser.setValue(""),(null===(t=null==e?void 0:e.users)||void 0===t?void 0:t["api-error"])||(this.count=e.users?e.users:0,this.filterCount=e.users?e.users:0,this.initLoad?this.redraw():(this.showTable=!0,this.getData())),(null===(i=null==e?void 0:e.defaultrole)||void 0===i?void 0:i["api-error"])||e.defaultrole&&(null===(s=Object.keys(e.defaultrole))||void 0===s?void 0:s.length)&&(this.accountsForm.get("roleId").setValue(null===(n=e.defaultrole)||void 0===n?void 0:n._id),this.defaultRoleId=null===(a=e.defaultrole)||void 0===a?void 0:a._id),this.watchDisableBtn()}),this.getOrgsAndRoles()}getUsersAndDefaultRoles(e){if(!e)return this.initLoad=!1,this.showTable=!1,this.accountsForm.get("roleId").setValue(""),new o.y(e=>e.next({users:[],defaultrole:{}}));const t={};return["users","defaultrole"].forEach(i=>{let s=`${p.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${e}/${i}`;"users"===i&&(s+="/_count"),t[i]=this.http.get(s).pipe((0,u.K)(e=>(e["api-error"]=!0,this.showErrorMessage(this.commonOrgService.pageErrorHandle(e)),(0,r.of)(e))))}),(0,l.D)(t)}getOrgsAndRoles(){const e={};e.orgs=this.http.get(`${p.N.API_BASE_URL}federated/${this.ORG_ID}/grantee`).pipe((0,u.K)(e=>(0,r.of)(e))),e.roles=this.http.get(`${p.N.API_BASE_URL}admin/org/${this.ORG_ID}/roles`).pipe((0,u.K)(e=>(0,r.of)(e))),this.orgsListSub=(0,l.D)(e).subscribe(e=>{this.orgsList=[...this.orgsList,...e.orgs],this.roles=[...this.roles,...e.roles]})}onSubmit(){this.disableBtn=!0;let e=this.accountsForm.value,t=this.http.post(`${p.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${e.org}/defaultrole/${e.roleId}`,{});this.defaultRoleId&&!this.accountsForm.get("roleId").value&&(t=this.http.delete(`${p.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${e.org}/defaultrole/${this.defaultRoleId}`,{})),t.subscribe(e=>{this.successMessage()},e=>{this.showErrorMessage(this.commonOrgService.pageErrorHandle(e))},()=>{this.disableBtn=!1})}clearForm(){this.accountsForm.patchValue({org:null,roleId:""})}successMessage(){this.closeAlert(),this.successInfo="Default role saved successfully",this.success=!0,this.commonOrgService.pageScrollTop()}closeAlert(){this.error=!1,this.success=!1}showErrorMessage(e){this.closeAlert(),this.errorInfo=e,this.error=!0}gotoUserDetail(e){localStorage.setItem("calix.federated_grantee_orgId",this.accountsForm.get("org").value),sessionStorage.setItem("calixAdminUserDetail",JSON.stringify(e)),this.router.navigate([`${this.MODULE}/federated-user-details`])}getData(e){this.accountsForm.get("org").value?(this.showTable=!0,this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,lengthChange:!1,ordering:!1,dom:"tipr",ajax:(e,t)=>{let i=`${p.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${this.accountsForm.get("org").value}/users?offset=${e.start}&size=${e.length}&filter=${e.search.value}`;this.http.get(i).subscribe(e=>{this.userListForOrg=e||[],this.loading=!1,t({recordsTotal:this.count?this.count:0,recordsFiltered:null!=this.filterCount?this.filterCount:this.count,data:[]})},e=>{this.loading=!1,this.showErrorMessage(this.commonOrgService.pageErrorHandle(e)),t({recordsTotal:this.count?this.count:0,recordsFiltered:null!=this.filterCount?this.filterCount:this.count,data:[]})},()=>{this.initLoad=!0})},drawCallback:e=>{}},this.tableLanguageOptions()):this.showTable=!1}ngOnDestroy(){var e,t,i;null===(e=this.formSub)||void 0===e||e.unsubscribe(),null===(t=this.orgsListSub)||void 0===t||t.unsubscribe(),null===(i=this.searchSub)||void 0===i||i.unsubscribe()}tableLanguageOptions(){"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}clearSearchInp(){this.searchUser.setValue(""),this.subscribeCount("")}getCount(e){let t=`${p.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${this.accountsForm.get("org").value}/users/_count`;return e&&(t+=`?filter=${e}`),this.filterAndSearchFlag=!0,this.http.get(t).pipe((0,u.K)(e=>(e["api-error"]=!0,this.showErrorMessage(this.commonOrgService.pageErrorHandle(e)),(0,r.of)(e))))}subscribeCount(e){this.getCount(e).subscribe(e=>{(null==e?void 0:e["api-error"])||(this.count=e,this.filterCount=e,this.redraw())})}listenSearch(){this.searchSub=(0,c.R)(document.getElementById("search-user"),"keyup").pipe((0,h.b)(200),(0,d.x)(),(0,g.w)(e=>(this.userListForOrg=[],this.getCount(e.target.value)))).subscribe(e=>{(null==e?void 0:e["api-error"])||(this.filterCount=e,this.redraw())})}watchDisableBtn(){this.disableBtn=!(this.defaultRoleId&&!this.accountsForm.get("roleId").value||this.accountsForm.valid)}redraw(){!this.accountsForm.get("org").value||this.dtElement.dtInstance.then(e=>{e.search(this.searchUser.value).draw()})}openMFALink(){window.open(p.N.EMBEDDING_LINK,"_blank")}tableRerender(){this.accountsForm.valueChanges.subscribe(e=>{e.org&&(this.filterAndSearchFlag=!1,this.dtTrigger.next())})}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(f.s),m.Y36(s.qu),m.Y36(Z.eN),m.Y36(b.t6),m.Y36(A.F0),m.Y36(v.v),m.Y36(x.Dx))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-account-management"]],viewQuery:function(e,t){if(1&e&&m.Gf(n.G,5),2&e){let e;m.iGM(e=m.CRH())&&(t.dtElement=e.first)}},decls:27,vars:20,consts:[[1,"row","my-3"],[1,"col-md-12"],[1,"ccl-admin-title"],["class","management-link",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"col-md-4","offset-md-0"],[3,"formGroup"],[1,"form-group","ccl-form"],["for","inputPassword4"],[1,"required-field"],["formControlName","org","bindLabel","orgName","bindValue","orgId","placeholder","Select",3,"items","clearable","ngModelOptions","notFoundText","change"],["formControlName","roleId","bindLabel","name","bindValue","_id","placeholder","Accounts",3,"items","clearable","ngModelOptions","notFoundText"],[1,"row","col-md-3","ccl-form","mt-4","position-relative","px-0",3,"hidden"],["id","search-user",1,"ccl-input",3,"placeholder","formControl"],["class","search-close fas fa-times",3,"click",4,"ngIf"],[1,"row"],["class","col-md-8",4,"ngIf"],[1,"management-link"],[1,"cursor-pointer",3,"click"],["src","../../../assets/img/External Link-blue.svg","alt",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,"search-close","fas","fa-times",3,"click"],[1,"col-md-8"],["id","add-role-users","width","100%","datatable","",1,"table","table-sm","row-border","w-100",3,"dtOptions"],[1,"header-color"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","add-call-home",1,"btn-default","transparant","px-3","m-2",3,"click"],[1,"actions",3,"click"],[1,"fas","fa-pencil-alt","p-1","primary","cursor-pointer",3,"title"],["colspan","5",1,"no-data-available"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m._uU(3),m.qZA(),m.YNc(4,C,6,0,"p",3),m.qZA(),m.qZA(),m.YNc(5,q,6,1,"div",4),m.YNc(6,w,4,1,"div",5),m.TgZ(7,"div",0),m.TgZ(8,"div",6),m.TgZ(9,"form",7),m.TgZ(10,"div",8),m.TgZ(11,"label",9),m._uU(12,"Select an Account "),m.TgZ(13,"span",10),m._uU(14,"*"),m.qZA(),m.qZA(),m.TgZ(15,"ng-select",11),m.NdJ("change",function(){return t.tableRerender()}),m.qZA(),m.qZA(),m.TgZ(16,"div",8),m.TgZ(17,"label",9),m._uU(18,"Default Role "),m.TgZ(19,"span",10),m._uU(20,"*"),m.qZA(),m.qZA(),m._UZ(21,"ng-select",12),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(22,"div",13),m._UZ(23,"input",14),m.YNc(24,O,1,0,"i",15),m.qZA(),m.TgZ(25,"div",16),m.YNc(26,M,15,8,"div",17),m.qZA()),2&e&&(m.xp6(3),m.Oqu(t.language["Account Management"]),m.xp6(1),m.Q6J("ngIf",t.showMFALink),m.xp6(1),m.Q6J("ngIf",t.error),m.xp6(1),m.Q6J("ngIf",t.success),m.xp6(3),m.Q6J("formGroup",t.accountsForm),m.xp6(6),m.s9C("notFoundText",t.language.noItemsFound),m.Q6J("items",t.orgsList)("clearable",!1)("ngModelOptions",m.DdM(18,k)),m.xp6(6),m.s9C("notFoundText",t.language.noItemsFound),m.Q6J("items",t.roles)("clearable",!1)("ngModelOptions",m.DdM(19,k)),m.xp6(1),m.Q6J("hidden",!t.showTable),m.xp6(1),m.s9C("placeholder",t.language.searchUsers),m.Q6J("formControl",t.searchUser),m.xp6(1),m.Q6J("ngIf",null==t.searchUser?null:t.searchUser.value),m.xp6(2),m.Q6J("ngIf",t.showTable))},directives:[T.O5,s._Y,s.JL,s.sg,_.w9,s.JJ,s.u,s.Fj,s.oH,n.G,T.sg],styles:["table.dataTable td.dataTables_empty{display:none}.search-close[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;color:#cdcdcd;cursor:pointer}.management-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})()},95399:function(e,t,i){i.d(t,{Z:function(){return ee}});var s=i(23771),n=i(79765),a=i(25917),o=i(9112),r=i(37716),l=i(38583),c=i(49342),d=i(30900),g=i(63859),u=i(39895),h=i(38048),p=i(12664),m=i(39075),f=i(20904),Z=i(3679),b=i(74062),A=i(86640);const v=["deleteModal"],x=["multiDeleteModal"];function T(e,t){1&e&&(r.TgZ(0,"div",48),r.TgZ(1,"div",49),r.TgZ(2,"div",50),r.TgZ(3,"span",51),r._uU(4,"Loading..."),r.qZA(),r.qZA(),r.qZA(),r.qZA())}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",52),r.TgZ(1,"span",53),r._UZ(2,"img",54),r.qZA(),r.TgZ(3,"button",55),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).closeAlert()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",56),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",e.errorInfo,r.oJD)}}function C(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",57),r.TgZ(1,"span",58),r._UZ(2,"img",59),r.qZA(),r.TgZ(3,"button",55),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).closeAlert()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",56),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",e.successInfo,r.oJD)}}function q(e,t){1&e&&r._UZ(0,"i",73)}function w(e,t){1&e&&r._UZ(0,"i",74)}function O(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"a",70),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(2).expandCollapse(t._id)}),r.YNc(2,q,1,0,"i",71),r.YNc(3,w,1,0,"i",72),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.xp6(1),r.uIk("id","collapse-btn-"+e.displayName),r.xp6(1),r.Q6J("ngIf",!t.isExpanded[e._id]),r.xp6(1),r.Q6J("ngIf",t.isExpanded[e._id])}}const S=function(e){return{oneLevelDisable:e}},y=function(e){return{noWriteApi:e}};function M(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span"),r._uU(1),r.TgZ(2,"label",75),r.TgZ(3,"input",76),r.NdJ("change",function(t){r.CHM(e);const i=r.oxw().$implicit;return r.oxw(2).levelOneAction(i,t.target.checked)}),r.qZA(),r._UZ(4,"span",77),r.qZA(),r.TgZ(5,"span",78),r._uU(6),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.xp6(1),r.hij(" ",t.language.readOnly," "),r.xp6(2),r.Gre("",e._id,"_action firstLevel"),r.s9C("id",e._id+"_action"),r.s9C("name",e.name),r.Q6J("checked",e.readWrite)("ngClass",r.VKq(12,S,null==e?null:e.isSubscriber))("disabled",e.disableScope||!e.checked||(null==e?null:e.isSubscriber)),r.uIk("noWriteApi",null==e?null:e.disableScope),r.xp6(2),r.Q6J("ngClass",r.VKq(14,y,e.disableScope)),r.xp6(1),r.Oqu(t.language.writeAndRead)}}function k(e,t){1&e&&r._UZ(0,"i",84)}function U(e,t){1&e&&r._UZ(0,"i",74)}function D(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"a",70),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(4).expandCollapse(t._id)}),r.YNc(2,k,1,0,"i",83),r.YNc(3,U,1,0,"i",72),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(4);r.xp6(1),r.uIk("id","collapse-btn-"+e.displayName),r.xp6(1),r.Q6J("ngIf",!t.isExpanded[e._id]),r.xp6(1),r.Q6J("ngIf",t.isExpanded[e._id])}}function N(e,t){1&e&&r._UZ(0,"i",84)}function I(e,t){1&e&&r._UZ(0,"i",74)}function E(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"a",70),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(6).expandCollapse(t._id)}),r.YNc(2,N,1,0,"i",83),r.YNc(3,I,1,0,"i",72),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(6);r.xp6(1),r.uIk("id","collapse-btn-"+e.displayName),r.xp6(1),r.Q6J("ngIf",!t.isExpanded[e._id]),r.xp6(1),r.Q6J("ngIf",t.isExpanded[e._id])}}function F(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",36),r.TgZ(2,"div",61),r.TgZ(3,"div",86),r.TgZ(4,"div"),r.TgZ(5,"input",64),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(2).$implicit,n=r.oxw(2).$implicit,a=r.oxw(2).$implicit;return r.oxw(2).levelFourChange(i,t.target.checked,s._id,n._id,a._id)}),r.qZA(),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",81),r._uU(8),r.TgZ(9,"label",75),r.TgZ(10,"input",82),r.NdJ("change",function(){const t=r.CHM(e).$implicit,i=r.oxw(2).$implicit,s=r.oxw(2).$implicit,n=r.oxw(2).$implicit;return r.oxw(2).levelFourAction(t._id,i._id,s._id,n._id)}),r.qZA(),r._UZ(11,"span",77),r.qZA(),r.TgZ(12,"span",78),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw(2).$implicit,s=r.oxw(2).$implicit,n=r.oxw(2).$implicit,a=r.oxw(2);r.xp6(5),r.DjV("",n._id," ",s._id," ",i._id," ",e._id,""),r.s9C("id",e._id),r.s9C("value",e.name),r.Q6J("checked",e.checked),r.xp6(1),r.hij(" ",a.scopeDisplayName[e.displayName]||a.language[e.displayName]||e.displayName," "),r.xp6(2),r.hij(" ",a.language.readOnly," "),r.xp6(2),r.DjV("",n._id,"_action ",s._id,"_action ",i._id,"_action ",e._id,"_action"),r.s9C("id",e._id+"_action"),r.s9C("name",e.name),r.Q6J("checked",e.readWrite)("disabled",e.disableScope||!e.checked),r.uIk("noWriteApi",null==e?null:e.disableScope),r.xp6(2),r.Q6J("ngClass",r.VKq(24,y,e.disableScope)),r.xp6(1),r.Oqu(a.language.writeAndRead)}}function P(e,t){if(1&e&&(r.TgZ(0,"div",79),r.YNc(1,F,14,26,"div",43),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(6);r.Q6J("ngClass",t.isExpanded[e._id]?"d-block":"d-none"),r.uIk("id","collapse-"+e.displayName),r.xp6(1),r.Q6J("ngForOf",e.permissions3)}}function L(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",36),r.TgZ(2,"div",61),r.TgZ(3,"div",85),r.TgZ(4,"div",63),r.TgZ(5,"input",64),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(2).$implicit,n=r.oxw(2).$implicit;return r.oxw(2).levelThreeChange(i,t.target.checked,s._id,n._id)}),r.qZA(),r.TgZ(6,"span",65),r.NdJ("click",function(t){const i=r.CHM(e).$implicit;return r.oxw(6).showCheckBox(t,i)}),r.qZA(),r.TgZ(7,"span",66),r._uU(8),r.qZA(),r._UZ(9,"span",67),r.qZA(),r.YNc(10,E,4,3,"div",44),r.qZA(),r.qZA(),r.TgZ(11,"div",81),r._uU(12),r.TgZ(13,"label",75),r.TgZ(14,"input",82),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(2).$implicit,n=r.oxw(2).$implicit;return r.oxw(2).levelThreeAction(i,t.target.checked,s._id,n._id)}),r.qZA(),r._UZ(15,"span",77),r.qZA(),r.TgZ(16,"span",78),r._uU(17),r.qZA(),r.qZA(),r.qZA(),r.YNc(18,P,2,3,"div",69),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw(2).$implicit,s=r.oxw(2).$implicit,n=r.oxw(2);r.xp6(5),r.IyS("",s._id," ",i._id," ",e._id,""),r.MGl("id","",e._id,"_inner_parent"),r.s9C("value",e.name),r.Q6J("checked",e.checked),r.xp6(1),r.MGl("id","",e._id,"_inner_parent_span"),r.xp6(2),r.hij(" ",n.scopeDisplayName[e.displayName]||n.language[e.displayName]||e.displayName," "),r.xp6(1),r.MGl("id","",e._id,"_info"),r.xp6(1),r.Q6J("ngIf",e.permissions3.length),r.xp6(2),r.hij(" ",n.language.readOnly," "),r.xp6(2),r.IyS("",s._id,"_action ",i._id,"_action ",e._id,"_action"),r.s9C("id",e._id+"_action"),r.s9C("name",e.name),r.Q6J("checked",e.readWrite)("disabled",e.disableScope||!e.checked),r.uIk("noWriteApi",null==e?null:e.disableScope),r.xp6(2),r.Q6J("ngClass",r.VKq(26,y,e.disableScope)),r.xp6(1),r.Oqu(n.language.writeAndRead),r.xp6(1),r.Q6J("ngIf",e.permissions3.length)}}function J(e,t){if(1&e&&(r.TgZ(0,"div",79),r.YNc(1,L,19,28,"div",43),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(4);r.Q6J("ngClass",t.isExpanded[e._id]?"d-block":"d-none"),r.uIk("id","collapse-"+e.displayName),r.xp6(1),r.Q6J("ngForOf",e.permissions2)}}function $(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",36),r.TgZ(2,"div",61),r.TgZ(3,"div",80),r.TgZ(4,"div",63),r.TgZ(5,"input",64),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(2).$implicit;return r.oxw(2).levelTwoChange(i,t.target.checked,s._id)}),r.qZA(),r.TgZ(6,"span",65),r.NdJ("click",function(t){const i=r.CHM(e).$implicit;return r.oxw(4).showCheckBox(t,i)}),r.qZA(),r.TgZ(7,"span",66),r._uU(8),r.qZA(),r._UZ(9,"span",67),r.qZA(),r.YNc(10,D,4,3,"div",44),r.qZA(),r.qZA(),r.TgZ(11,"div",81),r._uU(12),r.TgZ(13,"label",75),r.TgZ(14,"input",82),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(2).$implicit;return r.oxw(2).levelTwoAction(i,t.target.checked,s._id)}),r.qZA(),r._UZ(15,"span",77),r.qZA(),r.TgZ(16,"span",78),r._uU(17),r.qZA(),r.qZA(),r.qZA(),r.YNc(18,J,2,3,"div",69),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw(2).$implicit,s=r.oxw(2);r.xp6(5),r.Tol(i._id),r.MGl("id","",e._id,"_parent"),r.s9C("value",e.name),r.Q6J("checked",e.checked),r.xp6(1),r.MGl("id","",e._id,"_parent_span"),r.xp6(2),r.hij(" ",s.scopeDisplayName[e.displayName]||s.language[e.displayName]||e.displayName," "),r.xp6(1),r.MGl("id","",e._id,"_info"),r.xp6(1),r.Q6J("ngIf",e.permissions2.length),r.xp6(2),r.hij(" ",s.language.readOnly," "),r.xp6(2),r.Gre("",i._id,"_action"),r.s9C("id",e._id+"_action"),r.s9C("name",e.name),r.Q6J("checked",e.readWrite)("disabled",e.disableScope||!e.checked),r.uIk("noWriteApi",null==e?null:e.disableScope),r.xp6(2),r.Q6J("ngClass",r.VKq(22,y,e.disableScope||"cloud.rbac.csc.calloutcome.enforce"===e.name)),r.xp6(1),r.Oqu(s.language.writeAndRead),r.xp6(1),r.Q6J("ngIf",e.permissions2.length)}}function R(e,t){if(1&e&&(r.TgZ(0,"div",79),r.YNc(1,$,19,24,"div",43),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(2);r.Q6J("ngClass",t.isExpanded[e._id]?"d-block":"d-none"),r.uIk("id","collapse-"+e.displayName),r.xp6(1),r.Q6J("ngForOf",e.permissions)}}const H=function(e){return{emptyRowSwitch:e}};function Y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",60),r.TgZ(1,"div",36),r.TgZ(2,"div",61),r.TgZ(3,"div",62),r.TgZ(4,"div",63),r.TgZ(5,"input",64),r.NdJ("change",function(t){const i=r.CHM(e).$implicit;return r.oxw(2).levelOneChange(i._id,t.target.checked,i)}),r.qZA(),r.TgZ(6,"span",65),r.NdJ("click",function(t){const i=r.CHM(e).$implicit;return r.oxw(2).showCheckBox(t,i)}),r.qZA(),r.TgZ(7,"span",66),r._uU(8),r.qZA(),r._UZ(9,"span",67),r.qZA(),r.YNc(10,O,4,3,"div",44),r.qZA(),r.qZA(),r.TgZ(11,"div",68),r.YNc(12,M,7,16,"span",44),r.qZA(),r.qZA(),r.YNc(13,R,2,3,"div",69),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw(2);r.xp6(5),r.MGl("id","",e._id,"_parent"),r.s9C("value",e.name),r.Q6J("checked",e.checked),r.xp6(1),r.MGl("id","",e._id,"_parent_span"),r.xp6(2),r.hij(" ",i.scopeDisplayName[e.displayName]||i.language[e.displayName]||e.displayName," "),r.xp6(1),r.MGl("id","",e._id,"_info"),r.xp6(1),r.Q6J("ngIf",e.permissions.length),r.xp6(1),r.Q6J("ngClass",r.VKq(10,H,null==e?null:e.isSubscriber)),r.xp6(1),r.Q6J("ngIf",!(null!=e&&e.isSubscriber)),r.xp6(1),r.Q6J("ngIf",e.permissions.length)}}function Q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",87),r.TgZ(1,"span",53),r._UZ(2,"img",54),r.qZA(),r.TgZ(3,"button",55),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).closeAlertWarning()}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"div",56),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",e.warningInfo,r.oJD)}}function z(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",88),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).deleteMultiUsers()}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",e.language.delete," ")}}function B(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td",89),r.TgZ(2,"input",90),r.NdJ("click",function(t){const i=r.CHM(e).$implicit;return r.oxw(2).deleteUserCheckOne(i,t.target.checked)}),r.qZA(),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td",91),r.TgZ(6,"i",92),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).deleteUser(t)}),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw(2);r.xp6(2),r.s9C("id",e._id),r.MGl("name","user_del_",e._id,""),r.s9C("value",e._id),r.Q6J("checked",i.usersDelSelectedChecked),r.xp6(2),r.Oqu(e.username),r.xp6(2),r.s9C("title",i.language.delete)}}function j(e,t){if(1&e&&(r.TgZ(0,"tbody"),r.TgZ(1,"tr"),r.TgZ(2,"td",93),r._uU(3),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(3),r.Oqu(e.language["No data available in table"])}}const V=function(){return{standalone:!0}};function G(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3),r.YNc(1,T,5,0,"div",4),r.YNc(2,_,6,1,"div",5),r.YNc(3,C,6,1,"div",6),r.TgZ(4,"div",7),r.TgZ(5,"div",8),r.TgZ(6,"div",9),r._uU(7),r.qZA(),r.qZA(),r.TgZ(8,"div",10),r.TgZ(9,"div",11),r.TgZ(10,"a",12),r.NdJ("click",function(){return r.CHM(e),r.oxw().goBack()}),r._UZ(11,"i",13),r._uU(12),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"div",14),r.TgZ(14,"div",8),r.TgZ(15,"div",15),r.TgZ(16,"label",16),r._uU(17),r.TgZ(18,"span",17),r._uU(19,"*"),r.qZA(),r.qZA(),r.TgZ(20,"input",18),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().roleName=t})("keyup",function(){return r.CHM(e),r.oxw().closeAlert()})("blur",function(){r.CHM(e);const t=r.oxw();return t.removeUnwantedSpace("roleName",t.roleName)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(21,"div",19),r.TgZ(22,"div",15),r.TgZ(23,"label",20),r._uU(24),r.qZA(),r.TgZ(25,"input",21),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().roleDescription=t})("blur",function(){r.CHM(e);const t=r.oxw();return t.removeUnwantedSpace("roleDescription",t.roleDescription)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"div",14),r.TgZ(27,"div",22),r._uU(28),r.qZA(),r.qZA(),r.TgZ(29,"div",14),r.TgZ(30,"div",23),r.TgZ(31,"form",24),r.YNc(32,Y,14,12,"div",25),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"div",14),r.TgZ(34,"div",22),r._uU(35),r.qZA(),r.qZA(),r.YNc(36,Q,6,1,"div",26),r.TgZ(37,"div",14),r.TgZ(38,"div",27),r.TgZ(39,"form"),r.TgZ(40,"div",28),r.TgZ(41,"ng-select",29),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().selectedUsers=t})("ngModelChange",function(t){return r.CHM(e),r.oxw().selectSocialMedia(t)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(42,"div",30),r.TgZ(43,"button",31),r.NdJ("click",function(){return r.CHM(e),r.oxw().addUser()}),r._uU(44),r.qZA(),r.qZA(),r.qZA(),r.TgZ(45,"div",32),r.TgZ(46,"div",33),r.TgZ(47,"div",34),r.YNc(48,z,2,1,"button",35),r.qZA(),r.qZA(),r.qZA(),r.TgZ(49,"div",36),r.TgZ(50,"div",37),r.TgZ(51,"table",38),r.TgZ(52,"thead",39),r.TgZ(53,"tr"),r.TgZ(54,"th",40),r.TgZ(55,"input",41),r.NdJ("click",function(t){return r.CHM(e),r.oxw().deleteUserCheckAll(t.target.checked)}),r.qZA(),r.TgZ(56,"span",42),r.NdJ("click",function(t){return r.CHM(e),r.oxw().showAllUserCheckBox(t)}),r.qZA(),r.qZA(),r.TgZ(57,"th"),r._uU(58),r.qZA(),r.TgZ(59,"th"),r._uU(60),r.qZA(),r.qZA(),r.qZA(),r.TgZ(61,"tbody"),r.YNc(62,B,7,6,"tr",43),r.qZA(),r.YNc(63,j,4,1,"tbody",44),r.qZA(),r.qZA(),r.qZA(),r.TgZ(64,"div",36),r.TgZ(65,"div",45),r.TgZ(66,"button",46),r.NdJ("click",function(){return r.CHM(e),r.oxw().addRole()}),r._uU(67),r.qZA(),r.TgZ(68,"button",47),r.NdJ("click",function(){return r.CHM(e),r.oxw().goBack()}),r._uU(69),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.loader),r.xp6(1),r.Q6J("ngIf",e.error),r.xp6(1),r.Q6J("ngIf",e.success),r.xp6(4),r.Oqu(e.pageTitle),r.xp6(5),r.hij(" ",e.language["Back to Roles List"]," "),r.xp6(5),r.Oqu(e.language.roleName),r.xp6(3),r.s9C("placeholder",e.language["Enter role name"]),r.Q6J("ngModel",e.roleName),r.xp6(4),r.Oqu(e.language.Description),r.xp6(1),r.s9C("placeholder",e.language.Description),r.Q6J("ngModel",e.roleDescription),r.xp6(3),r.Oqu(e.language.permissions),r.xp6(4),r.Q6J("ngForOf",e.allPermissions),r.xp6(3),r.Oqu(e.language.addUsers),r.xp6(1),r.Q6J("ngIf",e.warning),r.xp6(5),r.s9C("placeholder",e.language.selectUser),r.s9C("notFoundText",e.language.noItemsFound),r.Q6J("items",e.usersList)("ngModel",e.selectedUsers)("clearable",!1)("ngModelOptions",r.DdM(35,V)),r.xp6(3),r.hij(" ",e.language.add," "),r.xp6(4),r.Q6J("ngIf",0!=e.usersDelSelected.length),r.xp6(2),r.Q6J("hidden",!e.dataAvailable),r.xp6(1),r.Q6J("dtOptions",e.tableOptions)("dtTrigger",e.dtTrigger),r.xp6(4),r.Q6J("checked",e.usersDelSelectedChecked)("disabled",0==(null==e.addedUsersList?null:e.addedUsersList.length)),r.xp6(3),r.Oqu(e.language.userName),r.xp6(2),r.Oqu(e.language.Action),r.xp6(2),r.Q6J("ngForOf",e.addedUsersList),r.xp6(1),r.Q6J("ngIf",0==(null==e.addedUsersList?null:e.addedUsersList.length)),r.xp6(3),r.Q6J("disabled",e.loader),r.xp6(1),r.hij(" ",e.language.saveEnregistrer," "),r.xp6(2),r.hij(" ",e.language.Cancel," ")}}function W(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",94),r.TgZ(1,"h4",95),r._uU(2),r.qZA(),r.TgZ(3,"button",96),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeModal()}),r._UZ(4,"span",97),r.qZA(),r.qZA(),r.TgZ(5,"div",98),r._uU(6),r._UZ(7,"br"),r._uU(8),r.qZA(),r.TgZ(9,"div",99),r.TgZ(10,"button",100),r.NdJ("click",function(){return r.CHM(e),r.oxw().confirmDeleteSecleted()}),r._uU(11),r.qZA(),r.TgZ(12,"button",101),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeModal()}),r._uU(13),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Oqu(e.modalTitle),r.xp6(4),r.hij(" ",e.language["Are you sure you want to delete this Role"],"?"),r.xp6(2),r.hij(" (",e.modalInfo,") "),r.xp6(3),r.hij(" ",e.language.yes," "),r.xp6(2),r.hij(" ",e.language.no," ")}}function X(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",94),r.TgZ(1,"h4",95),r._uU(2),r.qZA(),r.TgZ(3,"button",96),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeModal()}),r._UZ(4,"span",97),r.qZA(),r.qZA(),r.TgZ(5,"div",98),r._uU(6),r._UZ(7,"br"),r._uU(8),r.qZA(),r.TgZ(9,"div",99),r.TgZ(10,"button",100),r.NdJ("click",function(){return r.CHM(e),r.oxw().confirmMultiDeleteSecleted()}),r._uU(11),r.qZA(),r.TgZ(12,"button",101),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeModal()}),r._uU(13),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Oqu(e.modalTitle),r.xp6(4),r.hij(" ",e.language["Are you sure you want to delete these selected Roles"],"?"),r.xp6(2),r.hij(" (",e.modalInfo,") "),r.xp6(3),r.hij(" ",e.language.yes," "),r.xp6(2),r.hij(" ",e.language.no," ")}}const K=i(91704);let ee=(()=>{class e{constructor(e,t,i,s,a,o,r,l,c){this.location=e,this.commonOrgService=t,this.customTranslateService=i,this.addRoleService=s,this.router=a,this.sso=o,this.dialogService=r,this.titleService=l,this.CommonFunctionsService=c,this.isExpanded={},this.pageAvailable=!1,this.rolesAddForm="supportCloud",this.usersList=[],this.usersFiltered=[],this.addedUsersList=[],this.existingUserError=!1,this.usersDelSelected=[],this.usersDelSelectedChecked=!1,this.loader=!0,this.tableOptions={pagingType:"full_numbers",pageLength:5,ordering:!1,dom:"tipr",drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&K(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.supportCloudRolesData=[],this.marketingCloudRolesData=[],this.smartHomeRoles=[],this.systemRoles=[],this.supportDataAvailable=!1,this.marketingDataAvailable=!1,this.smartDataAvailable=!1,this.systemDataAvailable=!1,this.dtTrigger=new n.xQ,this.isRerender=!1,this.allPermissions=[],this.errorInfo="",this.successInfo="",this.warningInfo="",this.MODULE="systemAdministration",this.levelTwoSelected=[],this.levelThreeSelected=[],this.usersCount=0,this.scopesToBeDisabled=["cloud.rbac.csc.qoe","cloud.rbac.csc.apps.arlo","cloud.rbac.csc.apps.servify","cloud.rbac.csc.apps.mycommunityiq","cloud.rbac.csc.apps.bark","cloud.rbac.csc.devices","cloud.rbac.csc.topology","cloud.rbac.csc.calloutcome.enforce"],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.allPrmsnfrmApi=[];let d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.MODULE=this.sso.getRedirectModule(d),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.pageTitleCreator(),this.dataAvailable=!1,this.isRerender=!0,this.titleService.setTitle(`${this.language["Add Role"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.renderUsersTable("language")}),this.rolesAddForm=sessionStorage.getItem("calixAdminAddRole"),this.pageTitleCreator(),this.getDatas(),this.frTable=this.customTranslateService.fr,this.titleService.setTitle(`${this.language["Add Role"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}onClick(e){let t=e.target.className,i=e.target.localName;t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&this.tablePageChange()}ngOnInit(){this.closeAlert(),this.tableLanguageOptions(),this.commonOrgService.currentPageAdder("addRole")}ngOnDestroy(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.allPermsSubs&&this.allPermsSubs.unsubscribe(),this.usersCountSubs&&this.usersCountSubs.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe(),this.roleAddSubs&&this.roleAddSubs.unsubscribe()}getDatas(){this.getAllPermissions(),this.getUserList()}getAllPermissions(){this.allPermsSubs=this.addRoleService.AllPemissionsData(this.appType).subscribe(e=>{this.allPrmsnfrmApi=e,this.allPermissionsDataProcess(e),this.loader=!1},e=>{this.pageErrorHandle(e),this.loader=!1})}allPermissionsDataProcess(e){"supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?(this.allPermissions=this.commonOrgService.allSupportDataProcessV21(e,{}),"marketingCloud"==this.rolesAddForm&&(this.allPermissions=this.allPermissions.map(e=>(("Subscriber"==e.displayName||"Revenue"==e.displayName)&&(e.isSubscriber=!0),e)))):this.allPermissions=this.commonOrgService.allSupportDataProcess(e,{}),this.allPermissions=this.disableScopeDoesntNeedWrite(this.allPermissions,1)}disableScopeDoesntNeedWrite(e,t){return e.forEach(e=>{const i=1==t?"":t;this.scopesToBeDisabled.includes(e.name)&&(e.disableScope=!0),e.hasOwnProperty(`permissions${i}`)&&e[`permissions${i}`]&&(e=this.disableScopeDoesntNeedWrite(e[`permissions${i}`],t+1))}),e}getUserList(){this.usersCountSubs=this.addRoleService.UsersCountByOrgId(this.ORG_ID).subscribe(e=>{this.usersCount=e,this.usersListSubs=this.addRoleService.UsersListByOrgId(this.ORG_ID,e).subscribe(e=>{this.usersList=e,this.usersList.length&&(this.selectedUsers=this.usersList[0]),this.renderUsersTable()},e=>{this.pageErrorHandle(e),this.renderUsersTable()})},e=>{this.pageErrorHandle(e),this.renderUsersTable()})}addUser(){this.warning=!1;let e=this.selectedUsers._id;if(this.addedUsersList.filter(t=>t._id===e).length>0)return this.warningInfo=`${this.selectedUsers.username} - ${this.language["User already added"]}`,void(this.warning=!0);this.addedUsersList.push(this.selectedUsers),this.isRerender=!0,this.renderUsersTable(),this.deleteUserCheckAll(!1),this.resetMultiDelete()}deleteUser(e){this.deleteItem=e,this.modalTitle=this.language["Delete User"],this.modalInfo=`${e.username}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal)}confirmDeleteSecleted(){this.closeModal();let e=this.deleteItem,t=[];this.addedUsersList.forEach(i=>{i._id!==e._id&&t.push(i)}),this.usersDelSelected=this.usersDelSelected.filter(t=>t._id!==e._id),this.addedUsersList=t,this.isRerender=!0,this.renderUsersTable(),setTimeout(()=>{this.deleteUserCheckAll(!1),this.resetMultiDelete()},200)}deleteUserCheckAll(e){let t=0;var i=this;let s;e?K('input[name^="user_del"]').each(function(){if(t>=5)return!1;K(this).prop("checked",!0),s=K(this).attr("id"),i.addedUsersList.forEach(e=>{e._id==s&&!i.usersDelSelected.includes(e)&&i.usersDelSelected.push(e)}),t++}):K('input[name^="user_del"]').each(function(){if(t>=5)return!1;K(this).prop("checked",!1),i.usersDelSelected=[],t++})}deleteUserCheckOne(e,t){t?(this.usersDelSelected.push(e),this.usersDelSelected.length==K('input[name^="user_del"]').length?(K("#user-all-delete").prop("checked",!0),K("#user-all-delete-span").hide()):K("#user-all-delete-span").show()):(this.usersDelSelected=this.usersDelSelected.filter(t=>t._id!=e._id),this.usersDelSelected.length?this.usersDelSelected.length!=K('input[name^="user_del"]').length?(K("#user-all-delete").prop("checked",!1),K("#user-all-delete-span").show()):K("#user-all-delete-span").hide():(K("#user-all-delete").prop("checked",!1),K("#user-all-delete-span").hide()))}deleteMultiUsers(){this.modalTitle=this.language["Delete Multiple Users"];let e=[];this.usersDelSelected.forEach(t=>{e.push(t.username)}),this.modalInfo=e.join(", "),this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal)}confirmMultiDeleteSecleted(){this.closeModal(),this.addedUsersList=this.addedUsersList.filter(({_id:e})=>!this.usersDelSelected.some(t=>t._id==e)),this.isRerender=!0,this.renderUsersTable(),setTimeout(()=>{this.deleteUserCheckAll(!1),this.resetMultiDelete()},200)}resetMultiDelete(){this.usersDelSelected=[],K("#user-all-delete").prop("checked",!1),K("#user-all-delete-span").hide()}closeAlert(){this.error=!1,this.success=!1}renderUsersTable(e){this.setTableOptions(),e&&"language"==e?setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()},50):this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}setTableOptions(){this.tableOptions={pagingType:"full_numbers",pageLength:5,processing:!0,ordering:!1,dom:"tipr",drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&K(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.tableLanguageOptions(),this.dataAvailable=!0}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}redraw(){this.dtElement.dtInstance.then(e=>{e.draw()})}pageTitleCreator(){"smartHome"==this.rolesAddForm?(this.pageTitle=this.language.addRoleSmartHome,this.appType="shad"):"marketingCloud"==this.rolesAddForm?(this.pageTitle=this.language.addRoleMarketing,this.appType="119"):"supportCloud"==this.rolesAddForm?(this.pageTitle=this.language.addRoleSupportCloud,this.appType="118"):"foundation"==this.rolesAddForm?(this.pageTitle=this.language.addRoleFoundation,this.appType="200"):"cco"==this.rolesAddForm?(this.pageTitle=this.language.addRoleOperationsCloud,this.appType="102"):"fa"==this.rolesAddForm&&(this.pageTitle=this.language.addRoleFA,this.appType="102")}selectSocialMedia(e){}goBack(){this.location.back()}addRole(){if(this.closeAlert(),null==this.roleName||""==this.roleName||this.roleName.length&&""==this.roleName.trim())return this.commonOrgService.pageScrollTop(),this.errorInfo=this.language["Role name cannot be empty"],void(this.error=!0);{let e=this.roleName.trim();if(""==e||e.length<2)return this.commonOrgService.pageScrollTop(),this.errorInfo=this.language["Invalid name"],void(this.error=!0)}var e={},t=K("#permissionsForm").serializeArray();K.each(t,function(t,i){void 0!==e[i.name]?("array"!=jQuery.type(e[i.name])&&(e[i.name]=[e[i.name]]),e[i.name].push(i.value)):e[i.name]=i.value});let i=e.scopeName,s=[];if(i)if("string"==typeof i)s.push({scopeName:i,action:e[i]?"read,write":"read"});else for(let a=0;a<i.length;a++)s.push({scopeName:i[a],action:e[i[a]]?"read,write":"read"});this.finalPerData=s;let n={apptype:this.appType,name:this.roleName,description:this.roleDescription?this.roleDescription:"",orgDefault:!0,orgId:this.ORG_ID};this.loader=!0,this.roleAddSubs=this.addRoleService.RoleAdd(n).subscribe(e=>{this.roleDatas=e,this.addOtherDetailsToRole(s)},e=>{this.loader=!1,this.closeAlert(),401==e.status?(this.errorInfo=this.language["Access Denied"],this.error=!0,this.commonOrgService.pageScrollTop()):"string"==typeof e.error&&e.error.indexOf("already exists")>-1?(this.errorInfo=this.language["Role name already exist"],this.error=!0,this.commonOrgService.pageScrollTop()):this.pageErrorHandle(e)})}addOtherDetailsToRole(e){const t=[];let i=[];this.addedUsersList.forEach(e=>{i.push(e._id)});const s=this.addRoleService.AddUsersByRoleId(i,this.roleDatas._id).forEach(e=>e).catch(e=>(0,a.of)(e));if(t.push(s),e.length){let i=[];i=e||[];const s=this.addRoleService.AddRolePermissions(i,this.roleDatas._id).forEach(e=>e).catch(e=>(0,a.of)(e));t.push(s)}this.combineLatest=(0,o.aj)(t),this.makeParallelAddRequest()}makeParallelAddRequest(){this.loader=!0,this.parallelReqSubscribtion=this.combineLatest.subscribe(e=>{if(this.loader=!1,e.length)for(let t of e)if(null!=t&&null!=t.error)return this.errorInfo="string"==typeof t.error?`${t.error}`:`${t.message}`,void this.pageErrorHandle(t);this.closeAlert(),this.successInfo=this.language["Users with roles data saved successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.goToOrgRoles()},1500)})}processData(e){let t=e[0],i={};for(let s=0;s<t.permissions.length;s++)i[t.permissions[s].scopeName]=t.permissions[s].action;this.selectedPermissions=i}levelOneChange(e,t,i){K("."+e).prop("checked",t),t?(K("."+e+"_action").prop("disabled",!1),K("#"+e+"_parent").prop("checked",t)):(K("#"+e+"_parent").prop("checked",t),K("."+e+"_action").prop("checked",t),K("."+e+"_action").prop("disabled",!0)),this.getSlctdParams(),K(".oneLevelDisable").prop("disabled",!0),"cloud.rbac.csc.calloutcome"===i.name?this.levelOneAction(i,t):this.renderChild(i,t)}levelTwoChange(e,t,i){var s,n,a,o;const r=e._id;if(K("."+r).prop("checked",t),t){if(K("."+i+"_action").prop("disabled",e.disableScope||!1),K("#"+i+"_parent_span").show(),"cloud.rbac.csc.calloutcome.enforce"===e.name){const e=null===(o=(null===(a=this.allPermissions.find(e=>"cloud.rbac.csc.calloutcome"===e.name))||void 0===a?void 0:a.permissions).find(e=>"cloud.rbac.csc.calloutcome.createview"===e.name))||void 0===o?void 0:o._id;document.getElementById(`${e}_parent`).checked=!0,document.getElementById(`${e}_action`).checked=!0,document.getElementById(`${i}_action`).checked=!0}let s=!0;K("."+i).each(function(){K(this).prop("checked")||(s=!1)}),s&&(K("#"+i+"_parent").prop("checked",t),K("#"+i+"_parent_span").hide())}else{if("cloud.rbac.csc.calloutcome.createview"===e.name){const e=null===(n=(null===(s=this.allPermissions.find(e=>"cloud.rbac.csc.calloutcome"===e.name))||void 0===s?void 0:s.permissions).find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===n?void 0:n._id;document.querySelector(`#${e}_parent`).checked=!1}K("#"+i+"_parent_span").show(),K("#"+i+"_parent").prop("checked",t),K("."+r+"_action").prop("checked",t),K("."+r+"_action").prop("disabled",!0)}this.getSlctdParams(),K(`.${i}`).length==K(`.${i}:checked`).length?(K(`#${i}_parent`).prop("checked",!0).show(),K(`#${i}_parent_span`).hide()):K(`.${i}:checked`).length>0?(K(`#${i}_parent`).prop("checked",!1).hide(),K(`#${i}_parent_span`).show()):(K(`#${i}_parent`).prop("checked",!1).show(),K(`#${i}_parent_span`).hide()),"cloud.rbac.csc.calloutcome.enforce"===e.name&&(document.getElementById(`${r}_action`).disabled=!0)}levelThreeChange(e,t,i,s){const n=e._id;if(K("."+n).prop("checked",t),t){K("."+n+"_action").prop("disabled",e.disableScope||!1),K("#"+i+"_parent_span").show(),K("#"+s+"_parent_span").show(),K("#"+i+"_parent").hide();let a=!0;K("."+i).each(function(){K(this).prop("checked")||(a=!1)}),a&&(K("#"+i+"_parent").prop("checked",t),K("#"+i+"_parent_span").hide(),K("#"+i+"_parent").show()),a=!0,K("."+s).each(function(){K(this).prop("checked")||(a=!1)}),a&&(K("#"+s+"_parent").prop("checked",t),K("#"+s+"_parent_span").hide(),K("#"+i+"_parent_span").hide())}else K("#"+i+"_parent").prop("checked",t),K("#"+s+"_parent").prop("checked",t),K("#"+s+"_parent_span").show(),K("#"+n+"_action").prop("disabled",!0),K("#"+i+"_parent_span").show(),K("#"+i+"_parent").hide();this.getSlctdParams(),K(`.${i}`).length==K(`.${i}:checked`).length?(K(`#${i}_parent`).prop("checked",!0).show(),K(`#${i}_parent_span`).hide()):K(`.${i}:checked`).length>0?(K(`#${i}_parent`).prop("checked",!1).hide(),K(`#${i}_parent_span`).show()):(K(`#${i}_parent`).prop("checked",!1).show(),K(`#${i}_parent_span`).hide()),K(`.${s}`).length==K(`.${s}:checked`).length?(K(`#${s}_parent`).prop("checked",!0).show(),K(`#${s}_parent_span`).hide()):K(`.${s}:checked`).length>0?(K(`#${s}_parent`).prop("checked",!1).hide(),K(`#${s}_parent_span`).show()):(K(`#${s}_parent`).prop("checked",!1).show(),K(`#${s}_parent_span`).hide())}levelFourChange(e,t,i,s,n){const a=e._id;if(t){K("."+a+"_action").prop("disabled",e.disableScope||!1),K("#"+s+"_parent_span").show(),K("#"+n+"_parent_span").show(),K("#"+s+"_parent").hide(),K("#"+i+"_inner_parent").prop("checked",!0),K("#"+i+"_inner_parent_span").show();let o=!0;K("."+s).each(function(){K(this).prop("checked")||(o=!1)}),o&&(K("#"+s+"_parent").prop("checked",t),K("#"+s+"_parent_span").hide(),K("#"+s+"_parent").show()),o=!0,K("."+i).each(function(){K(this).prop("checked")||(o=!1)}),o&&(K("#"+i+"_inner_parent").prop("checked",o),K("#"+i+"_inner_parent_span").hide()),o=!0,K("."+n).each(function(){K(this).prop("checked")||(o=!1)}),o&&(K("#"+n+"_parent").prop("checked",t),K("#"+n+"_parent_span").hide(),K("#"+s+"_parent_span").hide())}else{K("#"+s+"_parent").prop("checked",t),K("#"+n+"_parent").prop("checked",t),K("#"+n+"_parent_span").show();let e=!0;K("."+i).each(function(){K(this).prop("checked")||(e=!1)}),e?(K("#"+i+"_inner_parent_span").show(),K("#"+i+"_inner_parent").prop("checked",e)):(K("#"+i+"_inner_parent_span").hide(),K("#"+i+"_inner_parent").prop("checked",e)),K("#"+a+"_action").prop("disabled",!0),K("#"+a+"_action").prop("checked",!1),K("#"+s+"_parent_span").show(),K("#"+s+"_parent").hide()}this.getSlctdParams(),K(`.${a}`).length==K(`.${a}:checked`).length?(K(`#${i}_parent`).prop("checked",!0).show(),K(`#${i}_parent_span`).hide()):K(`.${a}:checked`).length>0?(K(`#${i}_parent`).prop("checked",!1).hide(),K(`#${i}_parent_span`).show()):(K(`#${i}_parent`).prop("checked",!1).show(),K(`#${i}_parent_span`).hide()),K(`.${s}`).length==K(`.${s}:checked`).length?(K(`#${s}_parent`).prop("checked",!0).show(),K(`#${s}_parent_span`).hide()):K(`.${s}:checked`).length>0?(K(`#${s}_parent`).prop("checked",!1).hide(),K(`#${s}_parent_span`).show()):(K(`#${s}_parent`).prop("checked",!1).show(),K(`#${s}_parent_span`).hide()),K(`.${n}`).length==K(`.${n}:checked`).length?(K(`#${n}_parent`).prop("checked",!0).show(),K(`#${n}_parent_span`).hide()):K(`.${n}:checked`).length>0?(K(`#${n}_parent`).prop("checked",!1).hide(),K(`#${n}_parent_span`).show()):(K(`#${n}_parent`).prop("checked",!1).show(),K(`#${n}_parent_span`).hide())}levelOneAction(e,t){var i,s,n;if(K("."+e._id+"_action").not("[disabled]").prop("checked",t),(t&&K(`a[id^="collapse-btn-${e.displayName}"]`).length&&"false"==K(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded")||!t&&K(`a[id^="collapse-btn-${e.displayName}"]`).length&&"true"==K(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id),"cloud.rbac.csc.calloutcome"===e.name)if(t){const t=null===(n=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===n?void 0:n._id;document.querySelector(`#${t}_parent`).checked=!0,document.querySelector(`#${null==e?void 0:e._id}_parent`).checked=!0,document.querySelector(`#${null==e?void 0:e._id}_parent_span`).style.display="none"}else{const t=null===(i=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===i?void 0:i._id;document.querySelector(`#${t}_parent`).checked=!1,document.getElementById(`${e._id}_action`).disabled=!0;const n=null===(s=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.createview"===e.name))||void 0===s?void 0:s._id;document.getElementById(`${n}_parent`).checked&&(document.querySelector(`#${null==e?void 0:e._id}_parent`).checked=!1,document.querySelector(`#${null==e?void 0:e._id}_parent_span`).style.display="inline")}}levelTwoAction(e,t,i){var s;if(K("."+e._id+"_action").not("[disabled]").prop("checked",t),K(`.${i}_action:not(.firstLevel)`).length==K(`.${i}_action:not(.firstLevel):checked`).length?K(`#${i}_action.firstLevel`).prop("checked",!0):K(`#${i}_action.firstLevel`).prop("checked",!1),(t&&K(`a[id^="collapse-btn-${e.displayName}"]`).length&&"false"==K(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded")||!t&&K(`a[id^="collapse-btn-${e.displayName}"]`).length&&"true"==K(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),!t){if("cloud.rbac.csc.calloutcome.createview"===e.name){const e=this.allPermissions.find(e=>"cloud.rbac.csc.calloutcome"===e.name),t=null===(s=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===s?void 0:s._id;document.querySelector(`#${t}_parent`).checked=!1,document.querySelector(`#${null==e?void 0:e._id}_parent`).checked=!1,document.querySelector(`#${null==e?void 0:e._id}_parent_span`).style.display="inline",document.getElementById(`${e._id}_action`).disabled=!0}K("#"+i+"_action").prop("checked",!1)}}levelThreeAction(e,t,i,s){K("."+e._id+"_action").not("[disabled]").prop("checked",t),K(`.${i}_action`).length==K(`.${i}_action:checked`).length?K(`#${i}_action`).prop("checked",!0):K(`#${i}_action`).prop("checked",!1),K(`.${s}_action:not(.firstLevel)`).length==K(`.${s}_action:not(.firstLevel):checked`).length?K(`#${s}_action.firstLevel`).prop("checked",!0):K(`#${s}_action.firstLevel`).prop("checked",!1),(t&&K(`a[id^="collapse-btn-${e.displayName}"]`).length&&"false"==K(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded")||!t&&K(`a[id^="collapse-btn-${e.displayName}"]`).length&&"true"==K(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click()}levelFourAction(e,t,i,s){K(`.${e}_action`).length==K(`.${e}_action:checked`).length?K(`#${t}_action`).prop("checked",!0):K(`#${t}_action`).prop("checked",!1),K(`.${i}_action`).length==K(`.${i}_action:checked`).length?K(`#${i}_action`).prop("checked",!0):K(`#${i}_action`).prop("checked",!1),K(`.${s}_action:not(.firstLevel)`).length==K(`.${s}_action:not(.firstLevel):checked`).length?K(`#${s}_action.firstLevel`).prop("checked",!0):K(`#${s}_action.firstLevel`).prop("checked",!1)}goToOrgRoles(){this.router.navigate([`${this.MODULE}/roles`])}showCheckBox(e,t){K("#"+e.target.id).hide();let i=e.target.id.split("_");this.levelOneChange(i[0],!0,t)}openDeleteModal(){document.getElementById("deleteModalHiddenButton").click()}openMultiDeleteModal(){document.getElementById("multiDeleteModalHiddenButton").click()}closeAlertWarning(){this.warning=!1}hideSearch(){setTimeout(()=>{K("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),K("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},10)}pageScrollTop(){document.querySelector("#scrollTopId").scrollIntoView()}getSlctdParams(){var e={},t=K("#permissionsForm").serializeArray();K.each(t,function(t,i){void 0!==e[i.name]?("array"!=jQuery.type(e[i.name])&&(e[i.name]=[e[i.name]]),e[i.name].push(i.value)):e[i.name]=i.value});let i,s={};e.scopeName&&("object"!=typeof e.scopeName&&(e.scopeName=[e.scopeName]),e.scopeName.forEach(e=>{s[e]=e})),i="supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,s,!0):this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,s),i.scopes.forEach(e=>{let t=i.selectedData[e]?`(${i.selectedData[e]})`:"";K("#"+e+"_info").html(t)," "===i.selectedData[e]&&K("#"+e+"_info").html("");const s="true"==document.getElementById(`${e}_action`).getAttribute("noWriteApi");K("#"+e+"_parent").prop("checked",i.checkedScopes[e]),K("#"+e+"_action").prop("disabled",!!s||!i.checkedScopes[e]),i.checkedScopes[e]||K("#"+e+"_action").prop("checked",i.checkedScopes[e]),i.checkedScopes[e]&&(K("#"+e+"_parent").show(),K("#"+e+"_parent_span").hide())})}showAllUserCheckBox(e){K("#"+e.target.id).hide(),K("#user-all-delete").prop("checked",!0),this.deleteUserCheckAll(!0)}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}closeModal(){this.closeAlertWarning(),this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}tablePageChange(){setTimeout(()=>{K("#user-all-delete-span").hide(),K("#user-all-delete").prop("checked",!1),this.deleteUserCheckAll(!1)},100)}expandCollapse(e){this.isExpanded.hasOwnProperty(e)?delete this.isExpanded[e]:this.isExpanded[e]=!0}removeUnwantedSpace(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}renderChild(e,t){const i=document.querySelector(`a[id^="collapse-btn-${e.displayName}"]`);(t&&i&&"false"===i.getAttribute("aria-expanded")||!t&&i&&"true"===i.getAttribute("aria-expanded"))&&i.click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.Ye),r.Y36(c.v),r.Y36(d.d),r.Y36(g.U),r.Y36(u.F0),r.Y36(h.t6),r.Y36(p.FF),r.Y36(m.Dx),r.Y36(f.i))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-add-role"]],viewQuery:function(e,t){if(1&e&&(r.Gf(v,7),r.Gf(x,7),r.Gf(s.G,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.deleteModal=e.first),r.iGM(e=r.CRH())&&(t.multiDeleteModal=e.first),r.iGM(e=r.CRH())&&(t.dtElement=e.first)}},hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e)})},decls:5,vars:1,consts:[["class","container position-relative",4,"ngIf"],["deleteModal",""],["multiDeleteModal",""],[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","my-3"],[1,"col-md-4"],[1,"ccl-title"],[1,"col-md-8","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"row","my-3"],[1,"ccl-form"],["for","first",1,"f-w-600"],[1,"error"],["type","text","name","roleName","autocomplete","new-password","trimSpace","",1,"",3,"placeholder","ngModel","ngModelChange","keyup","blur"],[1,"col-md-8","pr-0"],["for","last",1,"f-w-600"],["type"," text","name","roleDescription","autocomplete","new-password","trimSpace","",1,"",3,"placeholder","ngModel","ngModelChange","blur"],[1,"col-md-12","ccl-title"],[1,"col-md-12"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],["class","col-md-6 my-3 alert alert-danger fade show",4,"ngIf"],[1,"col-md-4","offset-md-0"],[1,"form-group"],["bindLabel","username",3,"items","ngModel","clearable","ngModelOptions","placeholder","notFoundText","ngModelChange"],[1,"col-md-2","offset-md-0"],[1,"btn-default","primary","mr-2",3,"click"],[1,"row","my-2"],[1,"col-md-8"],[1,"text-right","flat-right"],["class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-8",3,"hidden"],["id","add-role-users","width","100%","datatable","",1,"table","table-sm","row-border","w-100","roles-addtable",3,"dtOptions","dtTrigger"],[1,"header-color"],[1,"checkbox-column","user-all"],["type","checkbox","name","websitecheck","id","user-all-delete",3,"checked","disabled","click"],["id","user-all-delete-span",1,"checkbox-ui",2,"display","none",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-6","offset-md-6","text-right","pr-0"],["id","submit-add-role",1,"btn-default","primary","md-btn","mr-3",3,"disabled","click"],["id","cancel-add-role",1,"btn-default","btn-dft","py-1","md-btn",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,""],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"checkbox-permission"],["type","checkbox","name","scopeName",3,"id","checked","value","change"],[1,"checkbox-ui","check-intermediate",2,"display","none",3,"id","click"],[1,"check-caption"],[3,"id"],[1,"box-of-permission","col-md-4",3,"ngClass"],["class","multi-collapse",3,"ngClass",4,"ngIf"],["role","button",1,"collapse-btn",3,"click"],["class","fas fa-plus-circle collapse-btn",4,"ngIf"],["class","fas fa-minus-circle",4,"ngIf"],[1,"fas","fa-plus-circle","collapse-btn"],[1,"fas","fa-minus-circle"],[1,"switch"],["type","checkbox","value","true",3,"id","checked","name","ngClass","disabled","change"],[1,"slider","round"],[3,"ngClass"],[1,"multi-collapse",3,"ngClass"],[1,"custom-flex","custom-check-permission","ml-3"],[1,"box-of-permission","col-md-4"],["type","checkbox","value","true",3,"id","checked","name","disabled","change"],["class","fas fa-plus-circle",4,"ngIf"],[1,"fas","fa-plus-circle"],[1,"custom-flex","custom-check-permission","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-md-6","my-3","alert","alert-danger","fade","show"],[1,"btn-default","primary","px-3","mx-3",3,"click"],[1,"checkbox-column"],["type","checkbox",3,"id","name","checked","value","click"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["colspan","5",1,"no-data-available"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(r.YNc(0,G,70,36,"div",0),r.YNc(1,W,14,5,"ng-template",null,1,r.W1O),r.YNc(3,X,14,5,"ng-template",null,2,r.W1O)),2&e&&r.Q6J("ngIf",t.pageAvailable)},directives:[l.O5,Z.Fj,b.f,Z.JJ,Z.On,Z._Y,Z.JL,Z.F,l.sg,A.w9,s.G,l.mk],styles:['table.roles-addtable td.dataTables_empty{display:none}.back-link-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   u[_ngcontent-%COMP%]{font-size:13px}.box-of-permission[_ngcontent-%COMP%]:first-child{border-right:.5px solid #dddddd}.box-of-permission[_ngcontent-%COMP%]{padding:8px;border-top:.5px solid #dddddd;vertical-align:middle;font-size:13px!important}.fa-plus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.fa-minus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.checkbox-ui[_ngcontent-%COMP%]:before{content:"";display:block;width:7px;height:0;border:solid #ffffff;border-width:0 2px 2px 0;transform:rotate(0);position:absolute;left:-14px;top:0px!important}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px;height:13px}a[aria-expanded=true][_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{display:none}a[aria-expanded=false][_ngcontent-%COMP%]   .fa-minus-circle[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}.switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]:disabled + .slider[_ngcontent-%COMP%]{cursor:not-allowed}@media only screen and (max-width: 425px){.add-user-btn[_ngcontent-%COMP%]{margin-top:20px}}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:22px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;right:2px;bottom:2px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0279ff}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #0279ff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(16px)}.slider.round[_ngcontent-%COMP%]{border-radius:18px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}input[type=checkbox][_ngcontent-%COMP%]{border:1px solid #ccc!important;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.custom-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.emptyRowSwitch[_ngcontent-%COMP%]{height:45px}.noWriteApi[_ngcontent-%COMP%]{opacity:.5}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px!important;height:13px!important}input[type=checkbox][_ngcontent-%COMP%] + .check-intermediate[_ngcontent-%COMP%]{left:0px!important;margin-top:2px!important}.checkbox-permission[_ngcontent-%COMP%]{position:relative}.checkbox-permission[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;margin-top:3.5px}.checkbox-permission[_ngcontent-%COMP%]   .check-intermediate[_ngcontent-%COMP%]{position:absolute!important}.check-intermediate[_ngcontent-%COMP%] + span.check-caption[_ngcontent-%COMP%]{margin-left:18px}span#user-all-delete-span[_ngcontent-%COMP%]{top:0px!important}']}),e})()},18890:function(e,t,i){i.d(t,{J:function(){return q}});var s=i(37716),n=i(49342),a=i(39895),o=i(30900),r=i(53668),l=i(38048),c=i(39075),d=i(20904),g=i(38583),u=i(3679),h=i(74062);const p=["errorModal"];function m(e,t){1&e&&(s.TgZ(0,"div",44),s.TgZ(1,"div",45),s.TgZ(2,"div",46),s.TgZ(3,"span",47),s._uU(4,"Loading..."),s.qZA(),s.qZA(),s.qZA(),s.qZA())}function f(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",48),s.TgZ(1,"span",49),s._UZ(2,"img",50),s.qZA(),s.TgZ(3,"button",51),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",52),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}function Z(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",53),s.TgZ(1,"span",54),s._UZ(2,"img",55),s.qZA(),s.TgZ(3,"button",51),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",56),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.successInfo,s.oJD)}}function b(e,t){if(1&e&&(s.TgZ(0,"div",57),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["This field is required"])}}function A(e,t){if(1&e&&(s.TgZ(0,"span",58),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["This field is required"])}}function v(e,t){if(1&e&&(s.TgZ(0,"span",58),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["Please enter a valid email address"])}}function x(e,t){if(1&e&&(s.TgZ(0,"span",59),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["This field is required"])}}function T(e,t){if(1&e&&(s.TgZ(0,"div",60),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["This field is required"])}}function _(e,t){if(1&e&&(s.TgZ(0,"div",60),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij("",e.language["Please enter the same value again"],".")}}const C=function(e){return[e]};let q=(()=>{class e{constructor(e,t,i,s,n,a,o){this.commonOrgService=e,this.router=t,this.customTranslateService=i,this.organizationApiService=s,this.sso=n,this.titleService=a,this.CommonFunctionsService=o,this.pageAvailable=!1,this.add={username:"",firstName:"",lastName:"",email:"",idpType:"local",local:{orgId:"50",password:""}},this.errorTitle="",this.errorBody="",this.saveClicked=!1,this.formError=!1,this.emailError=!1,this.cpassError=!1,this.errorInfo="",this.successInfo="",this.isOrgAdminUsers=!1,this.MODULE="systemAdministration",this.sysAdminRoute="systemAdministration",this.loader=!1,this.showPassword=!1,this.showPasswords=!1;let r=this.router.url;this.ORG_ID=this.sso.getOrganizationID(r),this.MODULE=this.sso.getRedirectModule(r),this.isOrgAdminUsers=this.checkOrgAdminUsers(r),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.addUser} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.commonOrgService.currentPageAdder("addUser"),this.checkAccess(),this.titleService.setTitle(`${this.language.addUser} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.saveClicked=!1,this.closeAlert()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.addUserSubs&&this.addUserSubs.unsubscribe()}addUser(){if(this.saveClicked=!0,this.validate(),this.validateEmail(),this.emailError)return;let e=this.add;this.formError||(e.username=this.addUserName,e.email=this.addUserEmail,e.firstName=this.addUserFirstName,e.lastName=this.addUserLastName,e.local.password=this.addUserPassword,e.local.orgId=`${this.ORG_ID}`,this.loader=!0,this.addUserSubs=this.organizationApiService.UserAdd(e).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["User registred successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.loader=!1,setTimeout(()=>{this.closeAlert(),this.goToUsersList()},1e3)},e=>{this.errorInfo=401==e.status?this.language["Access Denied"]:"string"==typeof e.error&&e.error.indexOf("already exists")>-1?this.language["Username already exists"]:"string"==typeof e.error?`${e.error}`:`${e.message}`,this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop(),this.loader=!1}))}validate(){this.formError=!1,this.addUserName&&this.addUserEmail&&this.addUserPassword&&this.addUserCPassword&&this.addUserPassword==this.addUserCPassword||(this.formError=!0)}validateEmail(){this.emailError=!this.commonOrgService.validateEmail(this.addUserEmail)}validateConfirmPassword(){this.cpassError=!this.addUserPassword||this.addUserPassword!=this.addUserCPassword}cancel(){this.goToUsersList()}goToUsersList(){this.router.navigate([`${this.MODULE}/users`])}close(){this.modalRef&&this.modalRef.close()}closeAlert(){this.error=!1,this.success=!1}checkOrgAdminUsers(e){let t="";t=this.sso.getOrgSFID();let i=this.sso.getRoles();return!(this.sso.isSecureAccess()||!(e.indexOf("/organization-admin/")>-1)||void 0===t||""!=t&&null!=t||!i.includes("OrgAdmin"))}checkAccess(){this.MODULE!=this.sysAdminRoute&&!this.isOrgAdminUsers&&this.router.navigate(["/unauthorize"])}reset(){this.addUserName=void 0,this.addUserEmail=void 0,this.addUserFirstName=void 0,this.addUserLastName=void 0,this.addUserPassword=void 0,this.addUserCPassword=void 0}toggleShowPassword(){this.showPassword=!this.showPassword}toggleShowPasswords(){this.showPasswords=!this.showPasswords}removeUnwantedSpace(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.v),s.Y36(a.F0),s.Y36(o.d),s.Y36(r.F),s.Y36(l.t6),s.Y36(c.Dx),s.Y36(d.i))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-add-user"]],viewQuery:function(e,t){if(1&e&&s.Gf(p,7),2&e){let e;s.iGM(e=s.CRH())&&(t.errorModal=e.first)}},decls:70,vars:47,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","my-3"],[1,"col-md-6"],[1,"ccl-title"],[1,"col-md-6","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"container","my-3","px-0"],["autocomplete","off"],[1,"row","my-4"],[1,"ccl-form","required",3,"ngClass"],["for","addUserName"],[1,"state-error","error"],["id","addUserName","name","addUserName","type","text","required","","maxlength","100","aria-required","true","aria-describedby","addUserName-error","aria-invalid","true","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],["id","addUserName-error","class","",4,"ngIf"],[1,"col-md-6","pr-0"],[1,"ccl-form",3,"ngClass"],["for","addUserEmail",1,"control-label"],[1,"error"],["id","addUserEmail","name","addUserEmail","type","text","required","","maxlength","100","aria-required","true","aria-describedby","addUserEmail-error","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","change","blur","keyup"],["id","addUserEmail-error","class","state-error",4,"ngIf"],[1,"ccl-form"],["for","addUserFirstName"],["id","addUserFirstName","name","addUserFirstName","type","text","maxlength","100","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],["for","addUserLastName"],["id","addUserLastName","name","addUserLastName","type","text","maxlength","100","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],[1,"col-md-6","detail-form"],["for","addUserPassword",1,"control-label"],["id","addUserPassword","name","addUserPassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","addUserPassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","change","keyup"],[1,"pwd-icon",3,"ngClass","click"],["id","addUserPassword-error","class","state-error",4,"ngIf"],[1,"ccl-form","confirm-password",3,"ngClass"],["for","confirmpassword",1,"control-label"],["id","confirmpassword","name","confirmpassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","confirmpassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","change","keyup"],[1,"",3,"ngClass","click"],["id","confirmpassword-error","class","ccl-error",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-4","offset-md-8","pr-0","text-right"],["type","submit",1,"btn-default","primary","mr-3",3,"click"],["type","submit",1,"btn-default","btn-dft","py-1",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"],["id","addUserName-error",1,""],["id","addUserEmail-error",1,"state-error"],["id","addUserPassword-error",1,"state-error"],["id","confirmpassword-error",1,"ccl-error"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,m,5,0,"div",1),s.YNc(2,f,6,1,"div",2),s.YNc(3,Z,6,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._uU(7),s.qZA(),s.qZA(),s.TgZ(8,"div",7),s.TgZ(9,"div",8),s.TgZ(10,"a",9),s.NdJ("click",function(){return t.goToUsersList()}),s._UZ(11,"i",10),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",11),s.TgZ(14,"form",12),s.TgZ(15,"div",13),s.TgZ(16,"div",5),s.TgZ(17,"div",14),s.TgZ(18,"label",15),s._uU(19),s.TgZ(20,"span",16),s._uU(21,"*"),s.qZA(),s.qZA(),s.TgZ(22,"input",17),s.NdJ("ngModelChange",function(e){return t.addUserName=e})("blur",function(){return t.removeUnwantedSpace("addUserName",t.addUserName)}),s.qZA(),s.YNc(23,b,2,1,"div",18),s.qZA(),s.qZA(),s.TgZ(24,"div",19),s.TgZ(25,"div",20),s.TgZ(26,"label",21),s._uU(27),s.TgZ(28,"span",22),s._uU(29,"*"),s.qZA(),s.qZA(),s.TgZ(30,"input",23),s.NdJ("ngModelChange",function(e){return t.addUserEmail=e})("change",function(){return t.validateEmail()})("blur",function(){return t.removeUnwantedSpace("addUserEmail",t.addUserEmail)})("keyup",function(){return t.removeUnwantedSpace("addUserEmail",t.addUserEmail)}),s.qZA(),s.YNc(31,A,2,1,"span",24),s.YNc(32,v,2,1,"span",24),s.qZA(),s.qZA(),s.qZA(),s.TgZ(33,"div",13),s.TgZ(34,"div",5),s.TgZ(35,"div",25),s.TgZ(36,"label",26),s._uU(37),s.qZA(),s.TgZ(38,"input",27),s.NdJ("ngModelChange",function(e){return t.addUserFirstName=e})("blur",function(){return t.removeUnwantedSpace("addUserFirstName",t.addUserFirstName)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(39,"div",19),s.TgZ(40,"div",25),s.TgZ(41,"label",28),s._uU(42),s.qZA(),s.TgZ(43,"input",29),s.NdJ("ngModelChange",function(e){return t.addUserLastName=e})("blur",function(){return t.removeUnwantedSpace("addUserLastName",t.addUserLastName)}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(44,"div",13),s.TgZ(45,"div",30),s.TgZ(46,"div",14),s.TgZ(47,"label",31),s._uU(48),s.TgZ(49,"span",16),s._uU(50,"*"),s.qZA(),s.qZA(),s.TgZ(51,"input",32),s.NdJ("ngModelChange",function(e){return t.addUserPassword=e})("change",function(){return t.validateConfirmPassword()})("keyup",function(){return t.validateConfirmPassword()}),s.qZA(),s.TgZ(52,"span",33),s.NdJ("click",function(){return t.toggleShowPassword()}),s.qZA(),s.YNc(53,x,2,1,"span",34),s.qZA(),s.qZA(),s.TgZ(54,"div",19),s.TgZ(55,"div",35),s.TgZ(56,"label",36),s._uU(57),s.TgZ(58,"span",16),s._uU(59,"*"),s.qZA(),s.qZA(),s.TgZ(60,"input",37),s.NdJ("ngModelChange",function(e){return t.addUserCPassword=e})("change",function(){return t.validateConfirmPassword()})("keyup",function(){return t.validateConfirmPassword()}),s.qZA(),s.TgZ(61,"span",38),s.NdJ("click",function(){return t.toggleShowPasswords()}),s.qZA(),s.YNc(62,T,2,1,"div",39),s.YNc(63,_,2,1,"div",39),s.qZA(),s.qZA(),s.qZA(),s.TgZ(64,"div",40),s.TgZ(65,"div",41),s.TgZ(66,"button",42),s.NdJ("click",function(){return t.addUser()}),s._uU(67),s.qZA(),s.TgZ(68,"button",43),s.NdJ("click",function(){return t.cancel()}),s._uU(69),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loader),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(4),s.Oqu(t.language.addUser),s.xp6(5),s.hij(" ",t.language.backToUsersList," "),s.xp6(5),s.Q6J("ngClass",s.VKq(39,C,t.saveClicked&&!t.addUserName?"ccl-error":"")),s.xp6(2),s.Oqu(t.language.userName),s.xp6(3),s.s9C("placeholder",t.language["Enter Username"]),s.Q6J("ngModel",t.addUserName),s.xp6(1),s.Q6J("ngIf",t.saveClicked&&!t.addUserName),s.xp6(2),s.Q6J("ngClass",s.VKq(41,C,!t.saveClicked||t.addUserEmail&&!t.emailError?"":"ccl-error")),s.xp6(2),s.Oqu(t.language.emailAddess),s.xp6(3),s.s9C("placeholder",t.language["Enter email address"]),s.Q6J("ngModel",t.addUserEmail),s.xp6(1),s.Q6J("ngIf",t.saveClicked&&!t.addUserEmail),s.xp6(1),s.Q6J("ngIf",t.saveClicked&&t.addUserEmail&&t.emailError),s.xp6(5),s.Oqu(t.language.firstName),s.xp6(1),s.s9C("placeholder",t.language["Enter first name"]),s.Q6J("ngModel",t.addUserFirstName),s.xp6(4),s.Oqu(t.language.lastName),s.xp6(1),s.s9C("placeholder",t.language["Enter last name"]),s.Q6J("ngModel",t.addUserLastName),s.xp6(3),s.Q6J("ngClass",s.VKq(43,C,t.saveClicked&&!t.addUserPassword?"ccl-error":"")),s.xp6(2),s.Oqu(t.language.password),s.xp6(3),s.s9C("placeholder",t.language["Enter password"]),s.Q6J("ngModel",t.addUserPassword),s.uIk("type",t.showPassword?"text":"password"),s.xp6(1),s.Q6J("ngClass",t.showPassword?"password_view":"password_hide"),s.xp6(1),s.Q6J("ngIf",t.saveClicked&&!t.addUserPassword),s.xp6(2),s.Q6J("ngClass",s.VKq(45,C,t.saveClicked&&!t.addUserCPassword||t.addUserCPassword&&t.cpassError||t.addUserPassword&&!t.addUserCPassword?"ccl-error":"")),s.xp6(2),s.Oqu(t.language.confirmPassword),s.xp6(3),s.s9C("placeholder",t.language["Enter password"]),s.Q6J("ngModel",t.addUserCPassword),s.uIk("type",t.showPasswords?"text":"password"),s.xp6(1),s.Q6J("ngClass",t.showPasswords?"password_view":"password_hide"),s.xp6(1),s.Q6J("ngIf",t.saveClicked&&!t.addUserCPassword&&!t.cpassError||t.addUserPassword&&!t.addUserCPassword),s.xp6(1),s.Q6J("ngIf",t.addUserCPassword&&t.cpassError),s.xp6(4),s.Oqu(t.language.saveEnregistrer),s.xp6(2),s.Oqu(t.language.Cancel))},directives:[g.O5,u._Y,u.JL,u.F,g.mk,u.Fj,u.Q7,u.nD,h.f,u.JJ,u.On],styles:[".state-error[_ngcontent-%COMP%]{color:#c70000}.detail-form[_ngcontent-%COMP%]{position:relative}.detail-form[_ngcontent-%COMP%]   .password-eye-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:30px;font-size:16px;z-index:1;color:gray;padding-top:4px}.confirm-password[_ngcontent-%COMP%]{position:relative}.confirm-password[_ngcontent-%COMP%]   .password-eye-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:16px;font-size:16px;z-index:1;color:gray;padding-top:4px}.pwd-icon[_ngcontent-%COMP%]{right:25px}"]}),e})()},61157:function(e,t,i){i.d(t,{h:function(){return L}});var s=i(92340),n=i(91841),a=i(37716),o=i(38048),r=i(39895),l=i(20408),c=i(7450),d=i(12664),g=i(49342),u=i(39075),h=i(38583),p=i(86640),m=i(3679),f=i(74062);function Z(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",22),a.TgZ(1,"span",23),a._UZ(2,"img",24),a.qZA(),a.TgZ(3,"button",25),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).isError=!1}),a._UZ(4,"span"),a.qZA(),a._UZ(5,"span",26),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(5),a.Q6J("innerHtml",e.language[e.errorMessage]||e.errorMessage,a.oJD)}}function b(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",27),a.TgZ(1,"span",28),a._UZ(2,"img",29),a.qZA(),a.TgZ(3,"button",25),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).success=!1}),a._UZ(4,"span"),a.qZA(),a._UZ(5,"span",30),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(5),a.Q6J("innerHtml",e.language[e.successInfo]||e.successInfo,a.oJD)}}function A(e,t){if(1&e&&(a.TgZ(0,"ng-option",31),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.id),a.xp6(1),a.Oqu(e.name)}}function v(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",32),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).newStatus(!0)}),a._uU(1),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ",e.language["New Status"],"")}}function x(e,t){if(1&e&&(a.TgZ(0,"div",33),a.TgZ(1,"div",34),a.TgZ(2,"div",35),a.TgZ(3,"span",36),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(4),a.Oqu(e.language.Loading)}}function T(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"i",40),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).editStatus(t,!0)}),a.qZA()}if(2&e){const e=a.oxw(3);a.s9C("title",e.language.Edit)}}function _(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"i",41),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;a.oxw();const i=a.MAs(39);return a.oxw().confirmDelete(i,t)}),a.qZA()}if(2&e){const e=a.oxw(3);a.s9C("title",e.language.Delete)}}function C(e,t){if(1&e&&(a.TgZ(0,"tr",37),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a.TgZ(4,"span"),a.YNc(5,T,1,1,"i",38),a.qZA(),a.TgZ(6,"span"),a.YNc(7,_,1,1,"i",39),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit,i=a.oxw(2);a.xp6(2),a.Oqu(e.name),a.xp6(3),a.Q6J("ngIf",i.calloutcomeWrite),a.xp6(2),a.Q6J("ngIf",i.calloutcomeWrite)}}function q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",42),a.TgZ(2,"h5",43),a._uU(3),a.qZA(),a.TgZ(4,"button",44),a.NdJ("click",function(){return a.CHM(e).$implicit.close("close")}),a._UZ(5,"span",45),a.qZA(),a.qZA(),a.TgZ(6,"div",46),a.TgZ(7,"button",47),a.NdJ("click",function(){return a.CHM(e).$implicit.close("confirm")}),a._uU(8),a.qZA(),a.TgZ(9,"button",48),a.NdJ("click",function(){return a.CHM(e).$implicit.close("close")}),a._uU(10),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(3),a.hij("",e.language["Are you sure you want to delete"]+" ?"," "),a.xp6(5),a.hij(" ",e.language.Confirm," "),a.xp6(2),a.hij(" ",e.language.Cancel," ")}}function w(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section"),a.YNc(1,Z,6,1,"div",1),a.YNc(2,b,6,1,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"div",6),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div",7),a.TgZ(9,"div",4),a.TgZ(10,"div",8),a._uU(11),a.qZA(),a.TgZ(12,"div",5),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",9),a.TgZ(15,"div",10),a._uU(16),a.qZA(),a.TgZ(17,"div",11),a.TgZ(18,"ng-select",12),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().selectedTime=t}),a.YNc(19,A,2,2,"ng-option",13),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"button",14),a.NdJ("click",function(){return a.CHM(e),a.oxw().updateTimer()}),a._uU(21),a.qZA(),a.TgZ(22,"div",7),a.TgZ(23,"div",4),a.TgZ(24,"div",8),a._uU(25),a.qZA(),a.qZA(),a.TgZ(26,"div",4),a.YNc(27,v,2,1,"button",15),a.qZA(),a.qZA(),a.TgZ(28,"div",16),a.YNc(29,x,5,1,"div",17),a.TgZ(30,"div",4),a.TgZ(31,"table",18),a.TgZ(32,"thead"),a.TgZ(33,"tr"),a.TgZ(34,"th"),a._uU(35),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"tbody"),a.YNc(37,C,8,3,"tr",19),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(38,q,11,3,"ng-template",20,21,a.W1O),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngIf",e.isError),a.xp6(1),a.Q6J("ngIf",e.success),a.xp6(5),a.Oqu(e.language["Call Outcome Status Settings"]),a.xp6(4),a.hij(" ",e.language["Call Outcome Timer"]," "),a.xp6(2),a.hij(" ",e.language["Call Outcome Timer Details"]," "),a.xp6(3),a.hij(" ",e.language["Call Outcome Timer"]," "),a.xp6(2),a.Q6J("ngModel",e.selectedTime),a.xp6(1),a.Q6J("ngForOf",e.timer),a.xp6(2),a.hij(" ",e.language["Save Timer"],""),a.xp6(4),a.hij(" ",e.language["Call Outcome Status"]," "),a.xp6(2),a.Q6J("ngIf",e.calloutcomeWrite),a.xp6(2),a.Q6J("ngIf",e.loading),a.xp6(6),a.Oqu(e.language.Status),a.xp6(2),a.Q6J("ngForOf",e.callOutComeStatuses)}}function O(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",22),a.TgZ(1,"span",23),a._UZ(2,"img",24),a.qZA(),a.TgZ(3,"button",25),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).isError=!1}),a._UZ(4,"span"),a.qZA(),a._UZ(5,"span",26),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(5),a.Q6J("innerHtml",e.language[e.errorMessage]||e.errorMessage,a.oJD)}}function S(e,t){if(1&e&&(a.TgZ(0,"label",85),a._uU(1),a.qZA()),2&e){const e=a.oxw(3);a.xp6(1),a.Oqu(e.language.Category_Name)}}function y(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"input",86),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().$implicit.categoryName=t}),a.qZA()}if(2&e){const e=a.oxw(),t=e.$implicit;a.MGl("name","categoryName_",e.index,""),a.Q6J("ngModel",t.categoryName)("formValue",t)}}function M(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",89),a.TgZ(1,"div",90),a.TgZ(2,"a",91),a.NdJ("click",function(){const t=a.CHM(e),i=t.index,s=t.$implicit,n=a.oxw(2).$implicit;return a.oxw(2).remove(n,i,s)}),a._UZ(3,"img",92),a.qZA(),a.TgZ(4,"label",93),a._uU(5),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(5),a.Oqu(e)}}function k(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",89),a.TgZ(1,"input",94),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).$implicit.subCategoryName=t})("blur",function(){a.CHM(e);const t=a.oxw(2).$implicit;return a.oxw(2).onBlurEvent(t)}),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("ngModel",e.subCategoryName)("formValue",e)}}function U(e,t){if(1&e&&(a.ynx(0),a.YNc(1,M,6,1,"div",87),a.YNc(2,k,2,2,"div",88),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngForOf",e.subCategories),a.xp6(1),a.Q6J("ngIf",e.enableSubCategoryName)}}function D(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",89),a.TgZ(1,"input",94),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).$implicit.subCategoryName=t})("blur",function(){a.CHM(e);const t=a.oxw(2).$implicit;return a.oxw(2).onBlurEvent(t)}),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("ngModel",e.subCategoryName)("formValue",e)}}function N(e,t){if(1&e&&(a.ynx(0),a.YNc(1,D,2,2,"div",88),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Q6J("ngIf",e.enableSubCategoryName)}}function I(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",95),a.TgZ(1,"a",96),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit;return a.oxw(2).addDetailsOptions(t)}),a.TgZ(2,"span"),a._UZ(3,"img",97),a.qZA(),a._uU(4),a.qZA(),a.qZA()}if(2&e){const e=a.oxw().$implicit,t=a.oxw(2);a.xp6(1),a.Q6J("ngClass",e.statusForCategories?"":"disabled"),a.xp6(3),a.hij(" ",t.language["Add Details Options"],"")}}function E(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",78),a.TgZ(1,"div",79),a.TgZ(2,"div",80),a.TgZ(3,"a",54),a.NdJ("click",function(){const t=a.CHM(e).index;return a.oxw(2).removeCategory(t)}),a._UZ(4,"img",55),a.qZA(),a.qZA(),a.YNc(5,S,2,1,"label",81),a.YNc(6,y,1,3,"input",82),a.TgZ(7,"div",83),a.YNc(8,U,3,2,"ng-container",0),a.YNc(9,N,2,1,"ng-container",0),a.YNc(10,I,5,2,"div",84),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw(2);a.xp6(5),a.Q6J("ngIf","multiple"==i.callOutComeData.selection&&e.statusForCategories),a.xp6(1),a.Q6J("ngIf","multiple"==i.callOutComeData.selection&&e.statusForCategories),a.xp6(2),a.Q6J("ngIf",e.statusForCategories&&e.subCategories.length>0),a.xp6(1),a.Q6J("ngIf",e.statusForCategories&&0==e.subCategories.length),a.xp6(1),a.Q6J("ngIf",e.enableAddDetailsOption)}}function F(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",78),a.TgZ(1,"div",98),a.TgZ(2,"a",96),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).addCategory()}),a.TgZ(3,"span"),a._UZ(4,"img",99),a.qZA(),a._uU(5),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("ngClass",e.callOutComeData.enableCheckCategories?"":"disabledCategories"),a.xp6(3),a.hij(" ",e.language["Add Category"],"")}}function P(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"section"),a.TgZ(1,"form",49),a.NdJ("ngSubmit",function(){return a.CHM(e),a.oxw().saveStatus()}),a.TgZ(2,"div",50),a.TgZ(3,"div",51),a.TgZ(4,"h1",6),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",52),a.TgZ(7,"button",53),a._uU(8),a.qZA(),a.TgZ(9,"a",54),a.NdJ("click",function(){return a.CHM(e),a.oxw().newStatus(!1)}),a._UZ(10,"img",55),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",56),a.YNc(12,O,6,1,"div",1),a.TgZ(13,"div",57),a.TgZ(14,"div",11),a.TgZ(15,"label"),a._uU(16),a.TgZ(17,"span",58),a._uU(18,"*"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",59),a.TgZ(20,"input",60),a.NdJ("keypress",function(t){return a.CHM(e),a.oxw().appAlphabetOnly(t)})("ngModelChange",function(t){return a.CHM(e),a.oxw().callOutComeData.statusName=t}),a.qZA(),a.qZA(),a.TgZ(21,"div",61),a.TgZ(22,"p",62),a._uU(23),a.qZA(),a.TgZ(24,"p"),a._uU(25),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"div",3),a.TgZ(27,"div",11),a.TgZ(28,"label"),a._uU(29),a.qZA(),a.qZA(),a.TgZ(30,"div",63),a.TgZ(31,"div",64),a.TgZ(32,"div",65),a.TgZ(33,"input",66),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().callOutComeData.selection=t})("change",function(t){return a.CHM(e),a.oxw().changeOption(t)}),a.qZA(),a.TgZ(34,"label",67),a._uU(35),a.qZA(),a.qZA(),a.TgZ(36,"div",65),a.TgZ(37,"input",68),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().callOutComeData.selection=t})("change",function(t){return a.CHM(e),a.oxw().changeOption(t)}),a.qZA(),a.TgZ(38,"label",69),a._uU(39),a.qZA(),a.qZA(),a.qZA(),a.TgZ(40,"div",70),a.TgZ(41,"div",71),a.TgZ(42,"input",72),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().callOutComeData.enableCheckCategories=t})("change",function(t){return a.CHM(e),a.oxw().enableCategoriesForStatus(t.target.checked)}),a.qZA(),a.TgZ(43,"label",73),a._uU(44),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(45,"div",3),a.TgZ(46,"div",11),a._uU(47),a.qZA(),a.TgZ(48,"div",74),a.TgZ(49,"ng-select",75),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().callOutComeData.statusType=t}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(50,"div",57),a.YNc(51,E,11,5,"div",76),a.YNc(52,F,6,2,"div",77),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu("AddStatus"==e.addOrUpdateStatus?e.language["New Status"]:e.language["Edit Status"]),a.xp6(3),a.hij(" ",e.language["Save Status"],""),a.xp6(4),a.Q6J("ngIf",e.isError),a.xp6(4),a.hij("",e.language["Status Name"]," "),a.xp6(4),a.s9C("placeholder",e.language["Enter Status Name"]),a.Q6J("ngModel",e.callOutComeData.statusName)("formValue",e.callOutComeData),a.xp6(3),a.hij("",e.language["Choose if multiple options can be selected as the cause of this status or if a single option has to be selected"],"."),a.xp6(2),a.hij("",e.language["You can also create multiple categories with options in each category for quickly identifying the root cause of status issues"],"."),a.xp6(4),a.Oqu(e.language["Status Structure"]),a.xp6(4),a.Q6J("ngModel",e.callOutComeData.selection),a.xp6(2),a.hij(" ",e.language["Select Only One Option"]," "),a.xp6(2),a.Q6J("ngModel",e.callOutComeData.selection),a.xp6(2),a.hij(" ",e.language["Select Multiple Options"]," "),a.xp6(3),a.Q6J("ngModel",e.callOutComeData.enableCheckCategories)("checked",e.callOutComeData.enableCheckCategories),a.xp6(2),a.hij(" ",e.language["Check to Enable Categories for Status Options"]," "),a.xp6(3),a.hij(" ",e.language["Status Type"]," "),a.xp6(2),a.Q6J("items",e.statusTypes)("ngModel",e.callOutComeData.statusType),a.xp6(2),a.Q6J("ngForOf",e.callOutComeData.categories),a.xp6(1),a.Q6J("ngIf","multiple"==e.callOutComeData.selection)}}let L=(()=>{class e{constructor(e,t,i,s,n,a,o){this.sso=e,this.router=t,this.callOutComeService=i,this.translateService=s,this.dialogService=n,this.commonOrgService=a,this.titleService=o,this.isNewStatus=!1,this.categories=[],this.selectionChange=!0,this.callOutComeData={},this.categoriesDataCount=[],this.callOutComeStatuses=[],this.addOrUpdateStatus="AddStatus",this.restoreStatuses=[],this.errorMessage="",this.isError=!1,this.success=!1,this.loading=!1,this.previousStatusName="",this.timer=[],this.selectedTime=0,this.statusTypes=[];let r=this.router.url;this.ORG_ID=parseInt(this.sso.getOrganizationID(r)),this.commonOrgService.currentPageAdder("admin-call-outcome"),this.callOutComeData={statusName:"",selection:"multiple",categories:[],enableCheckCategories:!1,statusType:""},this.restoreStatuses=[],this.MODULE=this.sso.getRedirectModule(r)}ngOnInit(){this.getScopes(),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.timer=[{id:0,name:""},{id:30,name:`30 ${this.language.Seconds}`},{id:60,name:`60 ${this.language.Seconds}`},{id:90,name:`90 ${this.language.Seconds}`},{id:120,name:`120 ${this.language.Seconds}`}],this.titleService.setTitle(`${this.language.Call_Outcome} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.loadstatustypes(),this.getStatuses(),this.getTimer(),this.titleService.setTitle(`${this.language.Call_Outcome} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.timer=[{id:0,name:""},{id:30,name:`30 ${this.language.Seconds}`},{id:60,name:`60 ${this.language.Seconds}`},{id:90,name:`90 ${this.language.Seconds}`},{id:120,name:`120 ${this.language.Seconds}`}]}loadstatustypes(){this.callOutComeService.loadstatustypes().subscribe(e=>{this.statusTypes=[],(null==e?void 0:e.length)>0&&e.forEach(e=>{this.statusTypes.push({id:null==e?void 0:e.statusTypeCode,name:null==e?void 0:e.statusTypeName})})})}getScopes(){let e=this.sso.getScopes();s.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.calloutcome.createview"]=e["cloud.rbac.csc.calloutcome.createview"]?e["cloud.rbac.csc.calloutcome.createview"]:[],e["cloud.rbac.csc.calloutcome.createview"]&&e["cloud.rbac.csc.calloutcome.createview"].includes("read")&&(this.calloutcomeRead=!0),e["cloud.rbac.csc.calloutcome.createview"]&&e["cloud.rbac.csc.calloutcome.createview"].includes("write")&&(this.calloutcomeWrite=!0)):(this.calloutcomeRead=!0,this.calloutcomeWrite=!0)}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}getStatuses(){this.loading=!0,this.callOutComeService.GetStatuses(this.ORG_ID).subscribe(e=>{null!=e&&e.length>0&&(this.callOutComeStatuses=e,this.restoreStatuses=[],e.forEach(e=>{this.restoreStatuses.push({name:e.name,isSelected:!1})})),this.loading=!1},e=>{this.loading=!1,this.isNewStatus=!0,this.pageModalErrorHandle(e)})}newStatus(e){window.scroll({top:0,left:0,behavior:"smooth"}),e&&(this.clear(),this.previousSelection={},this.previousStatusName=""),this.addOrUpdateStatus="AddStatus",this.isNewStatus=e,this.categories=[{statusForCategories:!0,subCategories:[],categoryName:"",subCategoryName:"",enableAddDetailsOption:!0}],this.callOutComeData.categories=this.categories,this.callOutComeData.selection="multiple",this.callOutComeData.statusName="",this.callOutComeData.enableCheckCategories=!0,this.callOutComeData.statusType="",this.success=!1,this.isError=!1,this.loading=!1}enableCategoriesForStatus(e){let t=!1;e&&(t=e),this.callOutComeData.categories.forEach(e=>{e.statusForCategories=t})}addDetailsOptions(e){"multiple"==this.callOutComeData.selection?this.checkStringNullOrEmpty(e.categoryName)&&(e.enableSubCategoryName=!0,e.statusForCategories=!0,this.checkStringNullOrEmpty(e.subCategoryName)&&e.subCategories.push(e.subCategoryName),e.subCategoryName=""):(e.enableSubCategoryName=!0,e.statusForCategories=!0,this.checkStringNullOrEmpty(e.subCategoryName)&&e.subCategories.push(e.subCategoryName),e.subCategoryName="")}checkStringNullOrEmpty(e){return""!=e&&null!=e&&null!=e}addCategory(){this.callOutComeData.categories.push({statusForCategories:!0,subCategories:[],categoryName:"",subCategoryName:"",enableAddDetailsOption:!0})}setFilter(e,t){this.categoryName=e.categoryName}onBlurEvent(e){"multiple"==this.callOutComeData.selection?e.categoryName&&this.checkStringNullOrEmpty(e.subCategoryName)&&(e.subCategories.push(e.subCategoryName),e.enableAddDetailsOption=!0,e.enableSubCategoryName=!1,e.subCategoryName=""):this.checkStringNullOrEmpty(e.subCategoryName)&&(e.subCategories.push(e.subCategoryName),e.enableAddDetailsOption=!0,e.enableSubCategoryName=!1,e.subCategoryName="")}remove(e,t,i){e.subCategories.splice(t,1)}changeOption(e){this.callOutComeData.selection=e.target.value;let t=this.editData;"UpdateStatus"==this.addOrUpdateStatus?this.callOutComeData.selection==t.selection?this.commonMethod(t):this.clear():(this.editData={},this.clear())}clear(){this.categories=[{statusForCategories:this.callOutComeData.enableCheckCategories,subCategories:[],categoryName:"",subCategoryName:"",enableAddDetailsOption:!0}],this.callOutComeData.categories=this.categories,this.callOutComeData.orgId=this.ORG_ID}commonMethod(e){if(this.callOutComeData.categories=[],this.callOutComeData.enableCheckCategories=!0,null!=e.categories){let t=Object.keys(e.categories),i=t.map(t=>{var i;return(null===(i=null==e?void 0:e.categories[t])||void 0===i?void 0:i.subcategories)||[]}),s=[];if(s=t,"multiple"==e.selection)t.forEach((e,t)=>{this.callOutComeData.categories.push({statusForCategories:!0,subCategories:i[t],categoryName:e,subCategoryName:"",enableAddDetailsOption:!0})}),this.selectionChange=!0;else{let e={statusForCategories:this.callOutComeData.enableCheckCategories,subCategories:t,categoryName:"",subCategoryName:"",enableAddDetailsOption:!0};this.selectionChange=!1,this.callOutComeData.categories.push(e)}}this.previousSelection=e.selection,this.previousStatusName=e.name,this.callOutComeData.selection=e.selection,this.callOutComeData.statusName=e.name,this.callOutComeData.statusType=e.statusType}editStatus(e,t){this.editData=e,this.addOrUpdateStatus="UpdateStatus",this.isNewStatus=t,this.commonMethod(e)}saveStatus(){window.scroll({top:0,left:0,behavior:"smooth"}),this.loading=!0,this.isError=!1;let e={};"multiple"==this.callOutComeData.selection?(this.callOutComeData.categories.forEach(t=>{e[t.categoryName]={subcategories:t.subCategories,selection:this.callOutComeData.selection}}),this.isError=!1):this.callOutComeData.categories.length>0?this.callOutComeData.categories[0].subCategories.forEach(t=>{e[t]={subcategories:null,selection:this.callOutComeData.selection}}):e={};let t={orgId:this.ORG_ID,selection:this.callOutComeData.selection,categories:e,name:this.callOutComeData.statusName,statusType:this.callOutComeData.statusType?this.callOutComeData.statusType:"-"};"AddStatus"==this.addOrUpdateStatus?this.callOutComeService.CreateStatus(t).subscribe(e=>{this.successInfo="Successfully Created",this.success=!0,this.isError=!1,this.isNewStatus=!1,this.getStatuses()},e=>{this.loading=!1,this.success=!1,this.isNewStatus=!0,this.pageModalErrorHandle(e)}):this.callOutComeService.UpdateStatus(t,this.previousStatusName).subscribe(e=>{this.isNewStatus=!1,this.success=!0,this.isError=!1,this.successInfo="Successfully Updated",this.getStatuses()},e=>{this.loading=!1,this.isNewStatus=!0,this.pageModalErrorHandle(e)})}confirmDelete(e,t){this.dialogService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(e=>{"confirm"==e&&this.deleteStatus(t)},e=>{})}deleteStatus(e){this.loading=!0,this.callOutComeService.DeleteStatus(this.ORG_ID,e.name).subscribe(e=>{this.success=!0,this.isError=!1,this.successInfo="Successfully Deleted",this.getStatuses()},e=>{this.loading=!1,this.isNewStatus=!0,this.pageModalErrorHandle(e)})}pageModalErrorHandle(e,t=!0){return this.isError=!0,this.errorMessage=401===e.status?this.language["Access Denied"]:this.callOutComeService.pageErrorHandle(e),this.errorMessage}removeCategory(e){this.callOutComeData.categories.splice(e,1)}appAlphabetOnly(e){var t=String.fromCharCode(e.keyCode);return!!/^[a-zA-Z ]*$/.test(t)||(e.preventDefault(),!1)}updateTimer(){this.loading=!0;const e=this.selectedTime?{orgId:this.ORG_ID,callOutcomeAbortTimer:this.selectedTime,csrName:localStorage["calix.username"]||""}:{params:(new n.LE).set("orgId",this.ORG_ID)};this.callOutComeService.updateOutcomeTimer(e,this.selectedTime).subscribe(e=>{this.loading=!1,this.success=!0,this.isError=!1,this.successInfo="Successfully Saved"},e=>{this.loading=!1,this.pageModalErrorHandle(e)})}getTimer(){this.loading=!0,this.callOutComeService.getOutcomeTimer(this.ORG_ID).subscribe(e=>{this.loading=!1,this.selectedTime=(null==e?void 0:e.abortTimer)||30},e=>{this.loading=!1,this.selectedTime=0})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.t6),a.Y36(r.F0),a.Y36(l.K),a.Y36(c.s),a.Y36(d.FF),a.Y36(g.v),a.Y36(u.Dx))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-admin-call-outcome"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","w-100 alert alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,""],[1,"cco-title"],[1,"row","mt-3"],[1,"product-title"],[1,"row","my-4"],[1,"col-md-2"],[1,"col-md-3"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","Save-Timer",1,"btn-default","primary",3,"click"],["id","New-Status","class","btn-default primary",3,"click",4,"ngIf"],[1,"row","position-relative",2,"margin-top","50px"],["class","loader",4,"ngIf"],[1,"table","table-striped"],["class","d-flex justify-content-between",4,"ngFor","ngForOf"],["class","col-md-12"],["deletePopup",""],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",2,"width","85%","height","100%",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"],[3,"value"],["id","New-Status",1,"btn-default","primary",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"d-flex","justify-content-between"],["class","fas fa-pencil-alt primary mr-3",3,"title","click",4,"ngIf"],["class","far fa-trash-alt primary",3,"title","click",4,"ngIf"],[1,"fas","fa-pencil-alt","primary","mr-3",3,"title","click"],[1,"far","fa-trash-alt","primary",3,"title","click"],[1,"modal-header"],["id","deletePopup",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","button","id","removeDeviceConfirm",1,"btn-default","primary","px-3","mr-3","mt-5",3,"click"],["type","button","id","removeDeviceCancel",1,"btn-default","transparant","px-3","mr-3","mt-5",3,"click"],["name","saveStatusFrm","id","saveStatusFrm",3,"ngSubmit"],[1,"d-flex","justify-content-between","border-bottom"],[1,"col-sm-6","pl-0"],[1,"col-sm-6","text-right","pr-0"],["type","submit",1,"btn-default","primary"],[1,"close","ml-3",3,"click"],["src","../../../assets/img/close-icon.svg","alt","icon here"],[1,"col-md-12","ccl-form","p-0"],[1,"row","mt-20"],[1,"error"],[1,"col-md-5"],["name","statusName","trimSpace","",1,"acs-input",3,"placeholder","ngModel","formValue","keypress","ngModelChange"],[1,"col-md-12","mt-20"],[1,"m-0"],[1,"col-md-9"],[1,"row","my-2"],[1,"form-check","d-inline-flex"],["type","radio","name","exampleRadios","id","chkSelectOnlyOption","value","single",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","chkSelectOnlyOption",1,"form-check-label"],["type","radio","name","exampleRadios","id","chkMultipleOptions","value","multiple",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","chkMultipleOptions",1,"form-check-label"],[1,"row","my-3",2,"padding-left","22px"],[1,"form-check","call-outcome-checkbox","w-100"],["type","checkbox","id","defaultCheck1","name","enableCheckCategories",1,"form-check-input",3,"ngModel","checked","ngModelChange","change"],["for","defaultCheck1",1,"form-check-label"],[1,"col-md-4"],["bindLabel","name","bindValue","id","id","ddlStatusType","name","ddlStatusType",3,"items","ngModel","ngModelChange"],["class","col-md-6",4,"ngFor","ngForOf"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],[1,"box-syle","solid"],[2,"text-align","right","height","24px","position","absolute","right","30px"],["style","font-size: 15px;",4,"ngIf"],["type","text","class","mb-3","style","width: 90%;","trimSpace","",3,"ngModel","name","formValue","ngModelChange",4,"ngIf"],[1,"options-flex"],["class","op-item action-btn",4,"ngIf"],[2,"font-size","15px"],["type","text","trimSpace","",1,"mb-3",2,"width","90%",3,"ngModel","name","formValue","ngModelChange"],["class","op-item",4,"ngFor","ngForOf"],["class","op-item",4,"ngIf"],[1,"op-item"],[1,"call-outcome-lable"],[1,"rmv-icon",3,"click"],["src","../../../assets/img/close-icon.svg"],[1,"text-break","text-justify","text-wrap"],["type","text","name","subCategoryName","trimSpace","",3,"ngModel","formValue","ngModelChange","blur"],[1,"op-item","action-btn"],[1,"primary","add-ic",3,"ngClass","click"],["src","../../../assets/img/ic_add_blue.svg"],[1,"box-syle","box-style-center","dashed"],["src","../../../assets/img/ic_add_grey.svg"]],template:function(e,t){1&e&&(a.YNc(0,w,40,14,"section",0),a.YNc(1,P,53,22,"section",0)),2&e&&(a.Q6J("ngIf",!t.isNewStatus),a.xp6(1),a.Q6J("ngIf",t.isNewStatus))},directives:[h.O5,p.w9,m.JJ,m.On,h.sg,p.xv,m._Y,m.JL,m.F,m.Fj,f.f,m._,m.Wl,h.mk],styles:['.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > td[_ngcontent-%COMP%], .table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > th[_ngcontent-%COMP%]{background:none}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f8f8fa}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-weight:400!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{line-height:32px;padding:0 5px!important;font-size:16px;font-weight:400!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none!important;border-bottom:1px solid #CCCCCC}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.box-syle[_ngcontent-%COMP%]{border-radius:24px;border-width:1px;border-color:#ddd;min-height:250px;padding:15px;margin-bottom:15px}.box-syle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-weight:600;font-size:15px}.box-syle[_ngcontent-%COMP%]   .add-ic[_ngcontent-%COMP%]{position:relative;top:-2px}.box-syle[_ngcontent-%COMP%]   .add-ic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:8px}.dashed[_ngcontent-%COMP%]{border-style:dashed;border-color:#e2e2e2;border-width:2px}.solid[_ngcontent-%COMP%]{border-style:solid}.box-style-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.box-style-center[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c5c5c5}.close[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.close[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{fill:#000}[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){position:absolute;left:-9999px}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], [type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;padding-left:20px;cursor:pointer;line-height:10px;display:inline-block}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, [type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:15px;height:15px;border:3px solid #0279FF;border-radius:100%;background:#fff}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after, [type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{content:"";width:7px;height:7px;background:#0279FF;position:absolute;top:4px;left:4px;border-radius:100%;transition:all .2s ease}[type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{opacity:0;transform:scale(0)}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1;transform:scale(1)}.call-outcome-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto!important;min-height:0px!important;max-height:42px;line-height:inherit;border-radius:26px;background:#f8f8fa;padding:0 18px;font-size:14px;font-weight:400;color:#646363;border:1px solid transparent}.options-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]{margin-right:15px;margin-bottom:15px}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]{position:relative;background-color:#dcecff;color:#0058b9;border-radius:24px;min-width:100px;padding:2px 40px 5px 15px;text-align:center}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;font-weight:bold;font-size:15px}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]   a.rmv-icon[_ngcontent-%COMP%]{position:absolute;right:15px;cursor:pointer;padding:0;top:3px}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]   a.rmv-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:8px}.options-flex[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed;color:#c5c5c5}.disabledCategories[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.fade-in[_ngcontent-%COMP%]{opacity:1;animation-name:fadeInOpacity;animation-timing-function:ease-in;animation-duration:.2s;-webkit-animation-name:fadeInOpacity;-webkit-animation-timing-function:ease-in;-webkit-animation-duration:.2s}@keyframes fadeInOpacity{0%{opacity:.5}to{opacity:1}}.error-img[_ngcontent-%COMP%]{width:38px;float:left;height:100%}.error-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.product-title[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px;border-bottom:1px solid #CCCCCC;padding-bottom:6px;margin-bottom:8px}']}),e})()},56219:function(e,t,i){i.d(t,{i:function(){return _}});var s=i(38583),n=i(23771),a=i(79765),o=i(11067),r=i(23815),l=i(16738),c=i(37716),d=i(7450),g=i(20497),u=i(39895),h=i(38048),p=i(39075),m=i(12664),f=i(48483),Z=i(49342);const b=["infoModal"];function A(e,t){if(1&e&&(c.TgZ(0,"div",17),c.TgZ(1,"div",18),c.TgZ(2,"span",19),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(3),c.Oqu(e.language.Loading)}}function v(e,t){if(1&e&&(c.TgZ(0,"div",7),c.TgZ(1,"h5"),c._uU(2),c.qZA(),c.TgZ(3,"h1"),c._uU(4),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.language["Calls This Month"]),c.xp6(2),c.Oqu(null==e.currentMonthData?null:e.currentMonthData.count)}}function x(e,t){if(1&e&&(c.TgZ(0,"tr",20),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.qZA()),2&e){const e=t.$implicit,i=t.index,s=c.oxw();c.s9C("id",i),c.xp6(2),c.AsE("",s.language[s.month[e.month.split("/")[0]]]||s.month[e.month.split("/")[0]],", ",e.month.split("/")[1],""),c.xp6(2),c.Oqu(e.count)}}function T(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"h4",22),c._uU(2),c.qZA(),c.TgZ(3,"button",23),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeModal()}),c._UZ(4,"span",24),c.qZA(),c.qZA(),c.TgZ(5,"div",25),c.TgZ(6,"div",4),c.TgZ(7,"p",26),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",27),c.TgZ(10,"button",28),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeModal()}),c._uU(11),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.infoTitle),c.xp6(6),c.Oqu(e.infoBody),c.xp6(3),c.hij(" ",e.language.Okay," ")}}let _=(()=>{class e{constructor(e,t,i,s,n,r,l,c){this.translateService=e,this.apiUsageService=t,this.router=i,this.sso=s,this.titleService=n,this.dialogService=r,this.dateUtils=l,this.commonOrgService=c,this.dtOptions={},this.dtTrigger=new a.xQ,this.orgApiStatus=[],this.month={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},this.apiUsageOptions={paging:!1,info:!1,lengthChange:!1,ordering:!1,searching:!1,dom:"tipr",retrieve:!1},this.loading=!1,this.Highcharts=o,this.tableData=[];const d=this.router.url;this.MODULE=this.sso.getRedirectModule(d),this.ORG_ID=this.sso.getOrganizationID(d),this.commonOrgService.currentPageAdder("api-usage")}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.getApiUsageQuota(),this.getData(),this.setTableOptions("language"),this.titleService.setTitle(`${this.language["API Usage"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["API Usage"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.getData(),this.getApiUsageQuota(),this.tableLanguageOptions()}ngAfterViewInit(){this.dtTrigger.next()}getApiUsageQuota(){this.loading=!0,this.apiUsageSub=this.apiUsageService.getaApiQuotaDetails(this.ORG_ID).subscribe(e=>{e&&(this.apiUsageData=e,this.apiUsageData.allowed_count&&(this.apiUsageData.allowed_count=(Math.round(100*this.apiUsageData.allowed_count)/100).toLocaleString())),this.loading=!1},e=>{this.pageErrorHandle(e)})}closeModal(){this.modalRef&&this.modalRef.close()}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal)}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.orgUsageStatusSub&&this.orgUsageStatusSub.unsubscribe(),this.apiUsageSub&&this.apiUsageSub.unsubscribe()}setTableOptions(e){this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.rerender()},200):this.loading=!1}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.apiUsageOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.apiUsageOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.apiUsageOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.apiUsageOptions.language&&delete this.apiUsageOptions.language}makeOptionsForLineChart(){var e,t;let i=this.language["API Calls"],n=this,a=[],o=[],r=new s.uU("en-US");for(let s=0;s<n.tableData.length;s++){if(l().format("MM/yyyy")==n.tableData[s].month){n.currentMonthData=n.tableData[s];break}l().subtract(1,"month").format("MM/yyyy")==n.tableData[s].month&&(n.currentMonthData=n.tableData[s])}for(let s=0;s<(null===(e=n.currentMonthData)||void 0===e?void 0:e.dailyCount.split(",").length);s++)o.push(Number(null===(t=n.currentMonthData)||void 0===t?void 0:t.dailyCount.split(",")[s])),a.push(r.transform(new Date(Number(n.currentMonthData.month.split("/")[1]),Number(n.currentMonthData.month.split("/")[0]-1),s+1),"MMM, dd"));return{chart:{type:"line",zoomType:"xy"},time:{useUTC:!1},title:{text:null},subtitle:{text:null},mapNavigation:{enableMouseWheelZoom:!0},tooltip:{formatter:function(){return`<b>${this.x}</b><br><b>${n.language["API Calls"]}: ${(Math.round(100*this.y)/100).toLocaleString()}</b>`}},xAxis:{categories:a||[],tickInterval:1,labels:{allowOverlap:!1,maxStaggerLines:1}},yAxis:{title:{text:this.language["Daily API Calls"]},min:0,minRange:1},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal",symbolRadius:0},lang:{noData:this.language["No Data Available"]},plotOptions:{series:{marker:{enabled:!0}}},series:[{showInLegend:!1,name:i,color:"#0027FF",data:o||[]}],credits:{enabled:!1}}}pageErrorHandle(e,t){let i="";this.infoTitle="Error",400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=this.language["Invalid request"],this.openInfoModal(),this.loading=!1):(i=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(i),this.commonOrgService.pageScrollTop(),this.loading=!1)}getData(){this.loading=!0,this.orgUsageStatusSub=this.apiUsageService.getOrgUsageStatus(this.ORG_ID).subscribe(e=>{var t,i;let s=[];if(e&&(null==e?void 0:e.length)&&(null==e?void 0:e.length)>=6)e.forEach(e=>{let t=e.month.split("/");e.m=t[0],e.y=t[1]}),e=r.orderBy(e,["y","m"]),this.tableData=e;else if(e&&(null==e?void 0:e.length)&&(null==e?void 0:e.length)<6){let n=this.currentAndLastYearData(e),a=null===(i=null===(t=n.lastYearData[n.lastYearData.length-1])||void 0===t?void 0:t.month)||void 0===i?void 0:i.replace("/","/01/");s=this.generateMissingDates(a,e.length),this.tableData=[...n.lastYearData,...s],this.tableData.reverse(),n.currentYearData.reverse(),this.tableData=[...this.tableData,...n.currentYearData]}else{let e=this.dateUtils.getFirstDayDateStr();this.tableData=this.generateMissingDates(e,0)}this.tableData.forEach(e=>{e.count=(Math.round(100*e.count)/100).toLocaleString()}),this.rerender();let n=this.makeOptionsForLineChart();this.Highcharts.chart("container",n),this.loading=!1},e=>{this.pageErrorHandle(e)})}generateMissingDates(e,t){var i,s;let n=[];if(!t){let t=`${null===(i=null==e?void 0:e.split("/"))||void 0===i?void 0:i[0]}/${null===(s=null==e?void 0:e.split("/"))||void 0===s?void 0:s[2]}`;n.push({month:`${t}`,count:0,dailyCount:""})}for(let a=1;a<=6-t;a++){let t=new Date(e);t.setMonth(t.getMonth()-a);let i=""+(t.getMonth()+1);i.length<2&&(i="0"+i),n.push({month:`${i}/${t.getFullYear()}`,count:0,dailyCount:""})}if(!t){n.pop();const e=n.shift();n.push(e)}return n}currentAndLastYearData(e){let t=[],i=[],s=[];return e.forEach(e=>{t.push(Number(e.month.split("/")[1])),e.month.split("/")[1]==Math.min.apply(null,t)?i.push(e):s.push(e)}),{lastYearData:i,currentYearData:s}}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.s),c.Y36(g.w),c.Y36(u.F0),c.Y36(h.t6),c.Y36(p.Dx),c.Y36(m.FF),c.Y36(f.s),c.Y36(Z.v))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-api-usage"]],viewQuery:function(e,t){if(1&e&&(c.Gf(b,7),c.Gf(n.G,5)),2&e){let e;c.iGM(e=c.CRH())&&(t.infoModal=e.first),c.iGM(e=c.CRH())&&(t.dtElement=e.first)}},decls:33,vars:11,consts:[[1,"position-relative"],["class","no-data",4,"ngIf"],[1,"container","position-relative"],[1,"row"],[1,"w-100"],[1,"ccl-admin-title"],[1,"row","d-flex","w-100","flex-wrap","my-4"],[1,"dflex-item","pr-4"],["class","dflex-item pr-4",4,"ngIf"],[1,"col-12"],["id","container",1,"cco-traffic-reports-container"],[1,"col-md-12","px-0"],[1,"ccl-med-title","mb-3","pb-1"],[1,"table-responsive"],["datatable","",1,"call-list-table","table",3,"dtTrigger","dtOptions"],[3,"id",4,"ngFor","ngForOf"],["infoModal",""],[1,"no-data"],[1,"spinner-border","text-primary"],[1,"sr-only"],[3,"id"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"f-size-16px"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,A,4,1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"h5"),c._uU(10),c.qZA(),c.TgZ(11,"h1"),c._uU(12),c.qZA(),c.qZA(),c.YNc(13,v,5,2,"div",8),c.qZA(),c.TgZ(14,"div",3),c.TgZ(15,"div",9),c._UZ(16,"div",10),c.qZA(),c.qZA(),c.TgZ(17,"div",3),c.TgZ(18,"div",11),c.TgZ(19,"div",12),c._uU(20),c.qZA(),c.TgZ(21,"div",13),c.TgZ(22,"table",14),c.TgZ(23,"thead"),c.TgZ(24,"tr"),c.TgZ(25,"th"),c._uU(26),c.qZA(),c.TgZ(27,"th"),c._uU(28),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"tbody"),c.YNc(30,x,5,4,"tr",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(31,T,12,3,"ng-template",null,16,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(5),c.hij(" ",t.language["API Usage"]," "),c.xp6(4),c.Oqu(t.language["Monthly API Quota"]),c.xp6(2),c.Oqu((null==t.apiUsageData?null:t.apiUsageData.allowed_count)||0),c.xp6(1),c.Q6J("ngIf",t.currentMonthData),c.xp6(7),c.hij(" ",t.language["Calls in the last 6 months"]," "),c.xp6(2),c.Q6J("dtTrigger",t.dtTrigger)("dtOptions",t.apiUsageOptions),c.xp6(4),c.Oqu(t.language.Month),c.xp6(2),c.Oqu(t.language["Total Calls"]),c.xp6(2),c.Q6J("ngForOf",t.tableData))},directives:[s.O5,n.G,s.sg],styles:[".ccl-admin-title[_ngcontent-%COMP%]{color:#1a1f22}.dflex-item[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0054b2;font-weight:300;font-size:30px;line-height:32px}.dflex-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#1a1f22;font-weight:400;font-size:14px;line-height:16px;margin-bottom:0}.ccl-med-title[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px;border-bottom:1px solid #CCCCCC}.call-list-table[_ngcontent-%COMP%]{border-bottom:0!important}"]}),e})()},75769:function(e,t,i){i.d(t,{F:function(){return P}});var s=i(23771),n=i(79765),a=i(35758),o=i(23815),r=i(37716),l=i(39895),c=i(7450),d=i(49342),g=i(38048),u=i(828),h=i(12664),p=i(38583);const m=["infoModal"];function f(e,t){if(1&e&&(r.TgZ(0,"div",17),r.TgZ(1,"div",18),r.TgZ(2,"div",19),r.TgZ(3,"span",20),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(4),r.Oqu(e.language.Loading)}}function Z(e,t){if(1&e&&(r.TgZ(0,"section",21),r.TgZ(1,"div",22),r._UZ(2,"img",23),r.TgZ(3,"p",24),r._uU(4),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(4),r.Oqu(e.language["One or more applications cannot be audited due to missing domain name."])}}function b(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",25),r.NdJ("click",function(){return r.CHM(e),r.oxw().selectDeselectv4All(!0)}),r.qZA()}}function A(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",26),r.NdJ("click",function(){return r.CHM(e),r.oxw().selectDeselectv6All(!0)}),r.qZA()}}function v(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"span",31),r._uU(2),r.qZA(),r._UZ(3,"br"),r.BQk()),2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e)}}function x(e,t){if(1&e&&(r.ynx(0),r.YNc(1,v,4,1,"ng-container",15),r.BQk()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngForOf",e.addressesV4.similarAddresses)}}function T(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"input",32),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(4).$implicit;return r.oxw().selectDeselectV4(t.target.checked,i,s,!0)}),r.qZA(),r.TgZ(2,"span",33),r.TgZ(3,"span",34),r._uU(4,"+"),r.qZA(),r._uU(5),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(1),r.MGl("id","inc_",e,""),r.MGl("name","v4_",e,""),r.xp6(4),r.Oqu(e)}}function _(e,t){if(1&e&&(r.ynx(0),r.YNc(1,T,6,3,"div",15),r.BQk()),2&e){const e=r.oxw(3).$implicit;r.xp6(1),r.Q6J("ngForOf",e.addressesV4.incrementalAddresses)}}function C(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"input",32),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(4).$implicit;return r.oxw().selectDeselectV4(t.target.checked,i,s,!1)}),r.qZA(),r.TgZ(2,"span",35),r.TgZ(3,"span",36),r._uU(4,"-"),r.qZA(),r._uU(5),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(1),r.MGl("id","dec_",e,""),r.MGl("name","v4_",e,""),r.xp6(4),r.hij(" ",e,"")}}function q(e,t){if(1&e&&(r.ynx(0),r.YNc(1,C,6,3,"div",15),r.BQk()),2&e){const e=r.oxw(3).$implicit;r.xp6(1),r.Q6J("ngForOf",e.addressesV4.decrementalAddresses)}}function w(e,t){if(1&e&&(r.ynx(0),r.YNc(1,_,2,1,"ng-container",29),r.YNc(2,q,2,1,"ng-container",29),r.BQk()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngIf",(null==e||null==e.addressesV4?null:e.addressesV4.incrementalAddresses)&&(null==e||null==e.addressesV4?null:e.addressesV4.incrementalAddresses.length)),r.xp6(1),r.Q6J("ngIf",(null==e||null==e.addressesV4?null:e.addressesV4.decrementalAddresses)&&(null==e||null==e.addressesV4?null:e.addressesV4.decrementalAddresses.length))}}function O(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"span",31),r._uU(2),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(2),r.hij(" ",e," ")}}function S(e,t){if(1&e&&(r.ynx(0),r.YNc(1,O,3,1,"div",15),r.BQk()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngForOf",e.addressesV6.similarAddresses)}}function y(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"div"),r.TgZ(2,"input",37),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(4).$implicit;return r.oxw().selectDeselectV6(t.target.checked,i,s,!0)}),r.qZA(),r.TgZ(3,"span",33),r.TgZ(4,"span",34),r._uU(5,"+"),r.qZA(),r._uU(6),r.qZA(),r.qZA(),r.BQk()}if(2&e){const e=t.$implicit;r.xp6(2),r.MGl("id","inc_v6_",e,""),r.MGl("name","v6_",e,""),r.xp6(4),r.hij("",e," ")}}function M(e,t){if(1&e&&(r.ynx(0),r.YNc(1,y,7,3,"ng-container",15),r.BQk()),2&e){const e=r.oxw(3).$implicit;r.xp6(1),r.Q6J("ngForOf",e.addressesV6.incrementalAddresses)}}function k(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"div"),r.TgZ(2,"input",37),r.NdJ("change",function(t){const i=r.CHM(e).$implicit,s=r.oxw(4).$implicit;return r.oxw().selectDeselectV6(t.target.checked,i,s,!1)}),r.qZA(),r.TgZ(3,"span",35),r.TgZ(4,"span",36),r._uU(5,"-"),r.qZA(),r._uU(6),r.qZA(),r.qZA(),r.BQk()}if(2&e){const e=t.$implicit;r.xp6(2),r.MGl("id","dec_v6_",e,""),r.MGl("name","v6_",e,""),r.xp6(4),r.hij(" ",e," ")}}function U(e,t){if(1&e&&(r.ynx(0),r.YNc(1,k,7,3,"ng-container",15),r.BQk()),2&e){const e=r.oxw(3).$implicit;r.xp6(1),r.Q6J("ngForOf",e.addressesV6.decrementalAddresses)}}function D(e,t){if(1&e&&(r.ynx(0),r.YNc(1,M,2,1,"ng-container",29),r.YNc(2,U,2,1,"ng-container",29),r.BQk()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngIf",e.addressesV6.incrementalAddresses&&e.addressesV6.incrementalAddresses.length),r.xp6(1),r.Q6J("ngIf",e.addressesV6.decrementalAddresses&&e.addressesV6.decrementalAddresses.length)}}function N(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"td",30),r.TgZ(2,"div",28),r.YNc(3,x,2,1,"ng-container",29),r.YNc(4,w,3,2,"ng-container",29),r.qZA(),r.qZA(),r.TgZ(5,"td",30),r.TgZ(6,"div",28),r.YNc(7,S,2,1,"ng-container",29),r.YNc(8,D,3,2,"ng-container",29),r.qZA(),r.qZA(),r.BQk()),2&e){const e=r.oxw().$implicit;r.xp6(3),r.Q6J("ngIf",(null==e||null==e.addressesV4?null:e.addressesV4.similarAddresses)&&(null==e||null==e.addressesV4?null:e.addressesV4.similarAddresses.length)),r.xp6(1),r.Q6J("ngIf",null==e||null==e.addressesV4?null:e.addressesV4.varianceExists),r.xp6(3),r.Q6J("ngIf",e.addressesV6.similarAddresses&&e.addressesV6.similarAddresses.length),r.xp6(1),r.Q6J("ngIf",e.addressesV6.varianceExists)}}function I(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"td"),r.TgZ(2,"span",31),r.TgZ(3,"i"),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r._UZ(5,"td"),r.BQk()),2&e){const e=r.oxw(2);r.xp6(4),r.Oqu(e.language["Not audited due to missing domain name"])}}function E(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td",27),r.TgZ(2,"div",28),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"td",27),r.TgZ(5,"div",28),r._uU(6),r.qZA(),r.qZA(),r.YNc(7,N,9,4,"ng-container",29),r.YNc(8,I,6,1,"ng-container",29),r.qZA()),2&e){const e=t.$implicit;r.xp6(3),r.Oqu(e.name||""),r.xp6(3),r.Oqu(e.domainName||""),r.xp6(1),r.Q6J("ngIf",null==e?null:e.auditExists),r.xp6(1),r.Q6J("ngIf",!(null!=e&&e.auditExists))}}function F(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",38),r.TgZ(1,"h4",39),r._uU(2),r.qZA(),r.TgZ(3,"button",40),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeModal()}),r._UZ(4,"span",41),r.qZA(),r.qZA(),r.TgZ(5,"div",42),r.TgZ(6,"div",43),r._UZ(7,"p",44),r.qZA(),r.qZA(),r.TgZ(8,"div",45),r.TgZ(9,"button",46),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeModal()}),r._uU(10),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Oqu(e.infoTitle),r.xp6(5),r.Q6J("innerHTML",e.infoBody,r.oJD),r.xp6(3),r.hij(" ",e.language.Okay," ")}}let P=(()=>{class e{constructor(e,t,i,s,a,o){var r,l,c;this.router=e,this.translateService=t,this.commonOrgService=i,this.sso=s,this.apiService=a,this.dialogService=o,this.dtTrigger=new n.xQ,this.dtOptions={ordering:!0,searching:!1,lengthChange:!1,paging:!1,info:!1,order:[0,"asc"],dom:"tipr",columnDefs:[{targets:[0,1,2,3],orderable:!0}]},this.auditList=[],this.selectedaddressV4=[],this.selectedaddressV6=[],this.show={auditExistCheck:!1,loading:!1,disabledv4All:!0,disabledv6All:!0,v4AllFullySelected:!1,v6AllFullySelected:!1,v4PartialSelectedSpan:!1,v6PartialSelectedSpan:!1};let d=this.router.url;this.MODULE=this.sso.getRedirectModule(d),this.ORG_ID=this.sso.getOrganizationID(d),this.commonOrgService.recordView.show=!0,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.tableLanguageOptions()});let g=null===(c=null===(l=null===(r=this.router.getCurrentNavigation())||void 0===r?void 0:r.extras)||void 0===l?void 0:l.state)||void 0===c?void 0:c.domainNameRes;g?this.auditList=g:(this.routeToDifinition(),this.commonOrgService.recordView.show=!1),this.show.auditExistCheck=this.checkForAuditExist(),this.disabledSelectAll(),setTimeout(()=>{this.dtTrigger.next(),this.rerender()},50)}ngOnInit(){}ngOnDestroy(){this.commonOrgService.recordView.show=!1,this.dtTrigger&&this.dtTrigger.unsubscribe()}disabledSelectAll(){var e,t,i;for(let s=0;s<this.auditList.length;s++)if(null===(t=null===(e=this.auditList[s])||void 0===e?void 0:e.addressesV4)||void 0===t?void 0:t.varianceExists){this.show.disabledv4All=!1;break}for(let s=0;s<this.auditList.length;s++)if(null===(i=this.auditList[s].addressesV6)||void 0===i?void 0:i.varianceExists){this.show.disabledv6All=!1;break}}checkForAuditExist(){return this.auditList=this.auditList.filter(e=>e.name),this.auditList.some(e=>!(null==e?void 0:e.auditExists))}routeToDifinition(){this.router.navigate([`/${this.MODULE}/flowAnalyze/applications/definitions`])}selectDeselectv4All(e){this.selectedaddressV4=[],e?(this.auditList.forEach(e=>{var t,i,s,n;e.auditExists&&(null===(t=e.addressesV4)||void 0===t?void 0:t.varianceExists)&&this.selectedaddressV4.push({id:e.id,orgId:e.orgId,addressesV4:null===(i=null==e?void 0:e.addressesV4)||void 0===i?void 0:i.incrementalAddresses,selectedDecrementalAddressV4:null===(s=null==e?void 0:e.addressesV4)||void 0===s?void 0:s.decrementalAddresses,similarAddressV4:null===(n=null==e?void 0:e.addressesV4)||void 0===n?void 0:n.similarAddresses})}),this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!0):(this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!1),this.checkUncheckAll('input[name^="v4_"]',e)}selectDeselectv6All(e){this.selectedaddressV6=[],e?(this.auditList.forEach(e=>{var t,i,s;e.auditExists&&(null===(t=e.addressesV6)||void 0===t?void 0:t.varianceExists)&&this.selectedaddressV6.push({id:e.id,orgId:e.orgId,addressesV6:e.addressesV6.incrementalAddresses,selectedDecrementalAddressV6:null===(i=null==e?void 0:e.addressesV6)||void 0===i?void 0:i.decrementalAddresses,similarAddressV6:null===(s=null==e?void 0:e.addressesV6)||void 0===s?void 0:s.similarAddresses})}),this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!0):(this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!1),this.checkUncheckAll('input[name^="v6_"]',e)}checkUncheckAll(e,t){document.querySelectorAll(e).forEach(e=>e.checked=t)}selectDeselectV6(e,t,i,s){var n,a,o;const r=this.selectedaddressV6.findIndex(e=>e.id===i.id);if(e)-1!==r?s?this.selectedaddressV6[r].addressesV6.push(t):(this.selectedaddressV6[r].selectedDecrementalAddressV6.push(t),this.selectedaddressV6[r].decrementalAddressV6=this.selectedaddressV6[r].decrementalAddressV6.filter(e=>e!==t)):this.selectedaddressV6.push({id:i.id,orgId:i.orgId,addressesV6:s?[t]:[],decrementalAddressV6:s?null===(n=null==i?void 0:i.addressesV6)||void 0===n?void 0:n.decrementalAddresses:null===(a=null==i?void 0:i.addressesV6)||void 0===a?void 0:a.decrementalAddresses.filter(e=>e!==t),selectedDecrementalAddressV6:s?[]:[t],similarAddressV6:null===(o=null==i?void 0:i.addressesV6)||void 0===o?void 0:o.similarAddresses});else{if(s){const e=this.selectedaddressV6[r].addressesV6.indexOf(t);this.selectedaddressV6[r].addressesV6.splice(e,1)}else{const e=this.selectedaddressV6[r].selectedDecrementalAddressV6.indexOf(t);this.selectedaddressV6[r].selectedDecrementalAddressV6.splice(e,1),this.selectedaddressV6[r].decrementalAddressV6.push(t)}!this.selectedaddressV6[r].addressesV6.length&&!this.selectedaddressV6[r].selectedDecrementalAddressV6.length&&(this.selectedaddressV6[r].similarAddressV6=[],this.selectedaddressV6[r].decrementalAddressV6=[])}document.querySelectorAll(".addressv6").length===document.querySelectorAll(".addressv6:checked").length?(this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!0):document.querySelectorAll(".addressv6:checked").length>0?(this.show.v6PartialSelectedSpan=!0,document.querySelector("#selectAllv6").checked=!1):(this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!1),this.selectedaddressV6&&(this.selectedaddressV6.find(e=>e.addressesV6.length||e.decrementalAddressV6.length||e.selectedDecrementalAddressV6.length)||(this.selectedaddressV6=[]))}selectDeselectV4(e,t,i,s){var n,a,o;const r=this.selectedaddressV4.findIndex(e=>e.id===i.id);if(e)-1!==r?s?this.selectedaddressV4[r].addressesV4.push(t):(this.selectedaddressV4[r].selectedDecrementalAddressV4.push(t),this.selectedaddressV4[r].decrementalAddressV4=this.selectedaddressV4[r].decrementalAddressV4.filter(e=>e!==t)):this.selectedaddressV4.push({id:i.id,orgId:i.orgId,addressesV4:s?[t]:[],decrementalAddressV4:s?null===(n=null==i?void 0:i.addressesV4)||void 0===n?void 0:n.decrementalAddresses:null===(a=null==i?void 0:i.addressesV4)||void 0===a?void 0:a.decrementalAddresses.filter(e=>e!==t),selectedDecrementalAddressV4:s?[]:[t],similarAddressV4:null===(o=null==i?void 0:i.addressesV4)||void 0===o?void 0:o.similarAddresses});else{if(s){const e=this.selectedaddressV4[r].addressesV4.indexOf(t);this.selectedaddressV4[r].addressesV4.splice(e,1)}else{const e=this.selectedaddressV4[r].selectedDecrementalAddressV4.indexOf(t);this.selectedaddressV4[r].selectedDecrementalAddressV4.splice(e,1),this.selectedaddressV4[r].decrementalAddressV4.push(t)}!this.selectedaddressV4[r].addressesV4.length&&!this.selectedaddressV4[r].selectedDecrementalAddressV4.length&&(this.selectedaddressV4[r].similarAddressV4=[],this.selectedaddressV4[r].decrementalAddressV4=[])}document.querySelectorAll(".addressv4").length===document.querySelectorAll(".addressv4:checked").length?(this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!0):document.querySelectorAll(".addressv4:checked").length>0?(this.show.v4PartialSelectedSpan=!0,document.querySelector("#selectAllv4").checked=!1):(this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!1),this.selectedaddressV4&&(this.selectedaddressV4.find(e=>e.addressesV4.length||e.decrementalAddressV4.length||e.selectedDecrementalAddressV4.length)||(this.selectedaddressV4=[]))}updateApplications(){if(!this.selectedaddressV4.length&&!this.selectedaddressV6.length)return this.infoTitle=this.language["Invalid Value"],this.infoBody="No application selected",void this.openInfoModal();this.show.loading=!0;const e=[],t=[];Object.values(o.merge(o.groupBy(this.selectedaddressV4,"id"),o.groupBy(this.selectedaddressV6,"id"))).flat().forEach(i=>{let s={},n={};i&&i.decrementalAddressV4&&i.decrementalAddressV4.length&&(s.addressesV4=[...(null==i?void 0:i.decrementalAddressV4)||[],...i.similarAddressV4||[]].join(";")),i&&i.decrementalAddressV6&&i.decrementalAddressV6.length&&(s.addressesV6=[...(null==i?void 0:i.decrementalAddressV6)||[],...(null==i?void 0:i.similarAddressV6)||[]].join(";")),i&&i.addressesV4&&i.addressesV4.length&&(n.addressesV4=[...(null==i?void 0:i.addressesV4)||[],...(null==i?void 0:i.similarAddressV4)||[],...(null==i?void 0:i.decrementalAddressV4)||[]].join(";")),i&&i.addressesV6&&i.addressesV6.length&&(n.addressesV6=[...i.decrementalAddressV6||[],...i.similarAddressV6||[],...i.addressesV6||[]].join(";")),i&&i.selectedDecrementalAddressV4&&i.selectedDecrementalAddressV4.length&&i.addressesV4&&!i.addressesV4.length&&i.decrementalAddressV4&&!i.decrementalAddressV4.length&&(s.addressesV4=[...i.similarAddressV4||[]].join(";")),i&&i.selectedDecrementalAddressV6&&i.selectedDecrementalAddressV6.length&&i.addressesV6&&!i.addressesV6.length&&i.decrementalAddressV6&&!i.decrementalAddressV6.length&&(s.addressesV6=[...i.similarAddressV6||[]].join(";")),Object.keys(s).length&&e.push(this.apiService.applicationsPatch(i.id,s,i.orgId)),Object.keys(n).length&&t.push(this.apiService.applicationsPatch(i.id,n,i.orgId))}),(0,a.D)(e).subscribe(e=>{this.show.loading=!1,this.selectedaddressV4=[],this.selectedaddressV6=[],t.length||this.routeToDifinition()},e=>{this.show.loading=!1,this.pageErrorHandle(e)}),(0,a.D)(t).subscribe(e=>{this.show.loading=!1,this.selectedaddressV4=[],this.selectedaddressV6=[],this.routeToDifinition()},e=>{this.show.loading=!1,this.pageErrorHandle(e)})}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){let t="";if(this.infoTitle="Error",400==e.status||409==e.status){let t=this.commonOrgService.pageErrorHandle(e);409==e.status&&(t.toLowerCase().indexOf("already")>-1||t.toLowerCase().indexOf("already exists"))&&(t="Application name is already used"),this.infoBody=t,this.infoTitle=this.language["Invalid request"],this.openInfoModal(),this.show.loading=!1}else t=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.show.loading=!1}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}rerender(){var e;!(null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.F0),r.Y36(c.s),r.Y36(d.v),r.Y36(g.t6),r.Y36(u.O),r.Y36(h.FF))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-applications-audit"]],viewQuery:function(e,t){if(1&e&&(r.Gf(m,7),r.Gf(s.G,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.infoModal=e.first),r.iGM(e=r.CRH())&&(t.dtElement=e.first)}},decls:38,vars:19,consts:[["class","loader",4,"ngIf"],[1,"mt-3"],[1,"d-flex","justify-content-between","align-items-center","audit-header"],[1,"ccl-admin-title"],[1,"primary","text-decoration-none","cursor-pointer",3,"click"],[1,"btn-default","btn-primary","ml-3",3,"disabled","click"],["class","mt-4",4,"ngIf"],[1,"col-md-12"],["id","","datatable","",1,"w-100","hover","table-alter","dataTable","no-footer","audit-table",3,"dtOptions","dtTrigger"],[1,""],["type","checkbox","id","selectAllv4",3,"disabled","click","change"],["class","checkbox-ui","id","selectAllv4Span",3,"click",4,"ngIf"],[1,"ml-3"],["type","checkbox","id","selectAllv6",3,"disabled","click","change"],["class","checkbox-ui","id","selectAllv6Span",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-4"],[1,"wrn-msg","alert","alert-warning","d-inline-flex","pr-3","align-items-center"],["src","../../../assets/img/ic_warning-36px.svg","alt","",1,"mx-2"],[1,"m-0"],["id","selectAllv4Span",1,"checkbox-ui",3,"click"],["id","selectAllv6Span",1,"checkbox-ui",3,"click"],[1,"py-3"],[1,"max-h-200"],[4,"ngIf"],[1,"align-top"],[1,"ml-4","pl-1"],["type","checkbox",1,"addressv4",3,"id","name","change"],[1,"ml-3","success-address"],[1,"text-success"],[1,"ml-3","err-address"],[1,"text-danger"],["type","checkbox",1,"addressv6",3,"id","name","change"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"w-100"],[1,"f-size-16px",3,"innerHTML"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){1&e&&(r.YNc(0,f,5,1,"div",0),r.TgZ(1,"section",1),r.TgZ(2,"div",2),r.TgZ(3,"h3",3),r._uU(4),r.qZA(),r.TgZ(5,"div"),r.TgZ(6,"a",4),r.NdJ("click",function(){return t.routeToDifinition()}),r._uU(7),r.qZA(),r.TgZ(8,"button",5),r.NdJ("click",function(){return t.updateApplications()}),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(10,Z,5,1,"section",6),r.TgZ(11,"p"),r._uU(12),r.qZA(),r.TgZ(13,"p"),r._uU(14),r.qZA(),r.TgZ(15,"section"),r.TgZ(16,"div",7),r.TgZ(17,"table",8),r.TgZ(18,"thead"),r.TgZ(19,"tr"),r.TgZ(20,"th",9),r._uU(21),r.qZA(),r.TgZ(22,"th"),r._uU(23),r.qZA(),r.TgZ(24,"th"),r.TgZ(25,"input",10),r.NdJ("click",function(e){return e.stopPropagation()})("change",function(e){return t.selectDeselectv4All(e.target.checked)}),r.qZA(),r.YNc(26,b,1,0,"span",11),r.TgZ(27,"span",12),r._uU(28),r.qZA(),r.qZA(),r.TgZ(29,"th"),r.TgZ(30,"input",13),r.NdJ("click",function(e){return e.stopPropagation()})("change",function(e){return t.selectDeselectv6All(e.target.checked)}),r.qZA(),r.YNc(31,A,1,0,"span",14),r.TgZ(32,"span",12),r._uU(33),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"tbody"),r.YNc(35,E,9,4,"tr",15),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(36,F,11,3,"ng-template",null,16,r.W1O)),2&e&&(r.Q6J("ngIf",t.show.loading),r.xp6(4),r.Oqu(t.language.applications_audit),r.xp6(3),r.Oqu(t.language.Cancel),r.xp6(1),r.Q6J("disabled",!t.selectedaddressV4.length&&!t.selectedaddressV6.length),r.xp6(1),r.Oqu(t.language.accept),r.xp6(1),r.Q6J("ngIf",t.show.auditExistCheck),r.xp6(2),r.Oqu(t.language["The following configuration changes have been found."]),r.xp6(2),r.Oqu(t.language["Please review and select the changes you would like to accept."]),r.xp6(3),r.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),r.xp6(4),r.Oqu(t.language.applicationname),r.xp6(2),r.Oqu(t.language["Domain Name"]),r.xp6(2),r.Q6J("disabled",t.show.disabledv4All),r.xp6(1),r.Q6J("ngIf",t.show.v4PartialSelectedSpan),r.xp6(2),r.Oqu(t.language.applicationAddressIPV4),r.xp6(2),r.Q6J("disabled",t.show.disabledv6All),r.xp6(1),r.Q6J("ngIf",t.show.v6PartialSelectedSpan),r.xp6(2),r.Oqu(t.language.applicationAddressIPV6),r.xp6(2),r.Q6J("ngForOf",t.auditList))},directives:[p.O5,s.G,p.sg],styles:[".audit-header[_ngcontent-%COMP%]{border-bottom:2px solid #cccc}.err-address[_ngcontent-%COMP%]{background-color:#ffcdbf}.success-address[_ngcontent-%COMP%]{background-color:#e0efbf}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:40%}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:30%}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}.audit-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.max-h-200[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.ml-29px[_ngcontent-%COMP%]{margin-left:29px!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:20%!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:30%!important}"]}),e})()},86039:function(e,t,i){i.d(t,{N:function(){return b}});var s=i(37716),n=i(39895),a=i(49342),o=i(30900),r=i(56890),l=i(53668),c=i(38048),d=i(39075),g=i(38583),u=i(3679),h=i(86640);function p(e,t){if(1&e&&(s.TgZ(0,"div",21),s.TgZ(1,"div",22),s.TgZ(2,"div",23),s.TgZ(3,"span",24),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function m(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",25),s.TgZ(1,"span",26),s._UZ(2,"img",27),s.qZA(),s.TgZ(3,"button",28),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",29),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}function f(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",30),s.TgZ(1,"span",31),s._UZ(2,"img",32),s.qZA(),s.TgZ(3,"button",28),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",33),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.successInfo,s.oJD)}}const Z=function(){return{standalone:!0}};let b=(()=>{class e{constructor(e,t,i,s,n,a,o){this.router=e,this.commonOrgService=t,this.customTranslateService=i,this.apiService=s,this.usersApiService=n,this.sso=a,this.titleService=o,this.pageAvailable=!1,this.usermail=[],this.reason=[],this.errorTitle="",this.errorBody="",this.dataAvailable=!1,this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.usersCount=0,this.loader=!0,this.noResultsFound="No results found";let r=this.router.url;this.ORG_ID=this.sso.getOrganizationID(r),this.MODULE=this.sso.getRedirectModule(r),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.deactivatedusers} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.noResultsFound=this.language["No results found"]}),this.commonOrgService.currentPageAdder("blacklistAddUser"),this.getUserList(),this.titleService.setTitle(`${this.language.deactivatedusers} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.reason=[{name:this.language["User is not allowed to access"],value:"1"},{name:this.language["User has left the organization"],value:"2"},{name:this.language["User in the wrong org"],value:"3"}],this.reasonSelected="1",this.closeAlert(),this.noResultsFound=this.language["No results found"]}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.usersCountSubs&&this.usersCountSubs.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe(),this.userUpdateSubs&&this.userUpdateSubs.unsubscribe()}getUserList(){this.usersCountSubs=this.usersApiService.UsersCountByOrgId(this.ORG_ID).subscribe(e=>{this.usersCount=e,e?this.usersListSubs=this.usersApiService.UsersListByOrgId(this.ORG_ID,e).subscribe(e=>{this.usermail=e,this.dataAvailable=!0,this.loader=!1,e&&e.length&&(this.usermailSelected=e[0])},e=>{this.pageErrorHandle(e),this.usermail=[],this.dataAvailable=!0,this.loader=!1}):(this.usermail=[],this.dataAvailable=!0,this.loader=!1)},e=>{this.pageErrorHandle(e),this.usermail=[],this.dataAvailable=!0,this.loader=!1})}save(){if(!this.usermailSelected||null==this.usermailSelected)return this.errorInfo=this.language["Invalid username of deleted portal user"],this.error=!0,void this.commonOrgService.pageScrollTop();if(!this.reasonSelected||null==this.reasonSelected)return this.errorInfo=this.language["Invalid Request"],this.commonOrgService.pageScrollTop(),void(this.error=!0);let e={username:this.usermailSelected.username,firstName:this.usermailSelected.firstName?this.usermailSelected.firstName:"",lastName:this.usermailSelected.lastName?this.usermailSelected.lastName:"",reason:parseInt(this.reasonSelected)};this.loader=!0,this.userUpdateSubs=this.apiService.updateBlacklistUsersByOrgId(e,this.ORG_ID).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["User has been added successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.loader=!1,setTimeout(()=>{this.closeAlert(),this.goToUserList()},1e3)},e=>{this.pageErrorHandle(e),this.loader=!1})}cancel(){this.goToUserList()}closeAlert(){this.error=!1,this.success=!1}goToUserList(){this.router.navigate([`${this.MODULE}/blacklist`])}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.F0),s.Y36(a.v),s.Y36(o.d),s.Y36(r.s),s.Y36(l.F),s.Y36(c.t6),s.Y36(d.Dx))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-black-list-add-user"]],decls:36,vars:22,consts:[[1,"conatiner","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","my-3"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0","text-right"],[1,"text-right"],["id","backto-user-list",1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"col-md-6"],[1,"form-group"],["for","exampleFormControlSelect1"],[1,"req-text"],["id","usermail","bindLabel","username","placeholder","",3,"items","ngModel","ngModelOptions","searchable","notFoundText","clearable","ngModelChange"],[1,"col-md-6","pr-0"],["id","reasons","bindLabel","name","bindValue","value","placeholder","",3,"items","ngModel","ngModelOptions","searchable","clearable","ngModelChange"],[1,"col-md-10","offset-md-2","px-0","text-right"],["id","submit-deactivate",1,"btn-default","primary","mr-2",3,"click"],["id","cancel-deactivate",1,"btn-default","btn-dft","py-1",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,p,5,1,"div",1),s.YNc(2,m,6,1,"div",2),s.YNc(3,f,6,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._uU(7),s.qZA(),s.qZA(),s.TgZ(8,"div",7),s.TgZ(9,"div",8),s.TgZ(10,"a",9),s.NdJ("click",function(){return t.goToUserList()}),s._UZ(11,"i",10),s._uU(12),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"div",4),s.TgZ(14,"div",11),s.TgZ(15,"form"),s.TgZ(16,"div",12),s.TgZ(17,"label",13),s._uU(18),s.TgZ(19,"span",14),s._uU(20,"*"),s.qZA(),s.qZA(),s.TgZ(21,"ng-select",15),s.NdJ("ngModelChange",function(e){return t.usermailSelected=e}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"div",16),s.TgZ(23,"form"),s.TgZ(24,"div",12),s.TgZ(25,"label",13),s._uU(26),s.TgZ(27,"span",14),s._uU(28,"*"),s.qZA(),s.qZA(),s.TgZ(29,"ng-select",17),s.NdJ("ngModelChange",function(e){return t.reasonSelected=e}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(30,"div",4),s.TgZ(31,"div",18),s.TgZ(32,"button",19),s.NdJ("click",function(){return t.save()}),s._uU(33),s.qZA(),s.TgZ(34,"button",20),s.NdJ("click",function(){return t.cancel()}),s._uU(35),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loader),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(4),s.hij("",t.language.searchUsersToDeactivate," "),s.xp6(5),s.hij(" ",t.language.backToUsersList," "),s.xp6(6),s.Oqu(t.language.user),s.xp6(3),s.s9C("notFoundText",t.noResultsFound),s.Q6J("items",t.usermail)("ngModel",t.usermailSelected)("ngModelOptions",s.DdM(20,Z))("searchable",!0)("clearable",!1),s.xp6(5),s.Oqu(t.language.reason),s.xp6(3),s.Q6J("items",t.reason)("ngModel",t.reasonSelected)("ngModelOptions",s.DdM(21,Z))("searchable",!1)("clearable",!1),s.xp6(4),s.Oqu(t.language.saveEnregistrer),s.xp6(2),s.Oqu(t.language.Cancel))},directives:[g.O5,u._Y,u.JL,u.F,h.w9,u.JJ,u.On],styles:[""]}),e})()},43949:function(e,t,i){i.d(t,{X:function(){return O}});var s=i(23771),n=i(79765),a=i(35758),o=i(37716),r=i(49342),l=i(39895),c=i(56890),d=i(38048),g=i(12664),u=i(7450),h=i(39075),p=i(38583);const m=["deleteModal"],f=["errorModal"];function Z(e,t){if(1&e&&(o.TgZ(0,"div",19),o.TgZ(1,"div",20),o.TgZ(2,"div",21),o.TgZ(3,"span",22),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Oqu(e.language.Loading)}}function b(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",23),o.TgZ(1,"span",24),o._UZ(2,"img",25),o.qZA(),o.TgZ(3,"button",26),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(4,"span"),o.qZA(),o._UZ(5,"div",27),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("innerHtml",e.errorInfo,o.oJD)}}function A(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",28),o.TgZ(1,"span",29),o._UZ(2,"img",30),o.qZA(),o._UZ(3,"div",27),o.TgZ(4,"button",26),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(5,"span"),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(3),o.Q6J("innerHtml",e.successInfo,o.oJD)}}function v(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",31),o.TgZ(1,"button",32),o.NdJ("click",function(){return o.CHM(e),o.oxw().reActivate()}),o._uU(2),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.language.reactivate)}}function x(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"span",33),o.NdJ("click",function(){return o.CHM(e),o.oxw().clearSearch()}),o._UZ(1,"img",34),o.qZA()}}function T(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td",37),o.TgZ(2,"input",44),o.NdJ("change",function(t){const i=o.CHM(e),s=i.$implicit,n=i.index;return o.oxw(3).levelOneChange(s,t.target.checked,n)}),o.qZA(),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,i=o.oxw(3);o.xp6(2),o.Gre(" activate_user_",e.username,""),o.s9C("id",e.username),o.MGl("name","activate_user_",e.username,""),o.xp6(2),o.Oqu(e.username),o.xp6(2),o.Oqu(e.deletedBy),o.xp6(2),o.Oqu(i.language[e.reasonText]),o.xp6(2),o.Oqu(i.changeDate(e.time))}}function _(e,t){if(1&e&&(o.TgZ(0,"tbody"),o.YNc(1,T,11,9,"tr",43),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.blacklistTableData)}}function C(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",35),o.TgZ(1,"table",36),o.TgZ(2,"thead",16),o.TgZ(3,"tr"),o.TgZ(4,"th",37),o.TgZ(5,"input",38),o.NdJ("change",function(t){return o.CHM(e),o.oxw().selectDeselectAll(t.target.checked)}),o.qZA(),o.TgZ(6,"span",39),o.NdJ("click",function(t){return o.CHM(e),o.oxw().showAllUserCheckBox(t)}),o.qZA(),o.qZA(),o.TgZ(7,"th",40),o.NdJ("click",function(){return o.CHM(e),o.oxw().showNoDataAvailable()}),o._uU(8),o.qZA(),o.TgZ(9,"th",40),o.NdJ("click",function(){return o.CHM(e),o.oxw().showNoDataAvailable()}),o._uU(10),o.qZA(),o.TgZ(11,"th",40),o.NdJ("click",function(){return o.CHM(e),o.oxw().showNoDataAvailable()}),o._uU(12),o.qZA(),o.TgZ(13,"th",41),o.NdJ("click",function(){return o.CHM(e),o.oxw().showNoDataAvailable()}),o._uU(14),o.qZA(),o.qZA(),o.qZA(),o.YNc(15,_,2,1,"tbody",42),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("dtOptions",e.tableOptions),o.xp6(4),o.Q6J("disabled",0==e.blacklistTableData.length||0==e.newArray.length),o.xp6(3),o.Oqu(e.language.userName),o.xp6(2),o.Oqu(e.language.deactivatedBy),o.xp6(2),o.Oqu(e.language.reason),o.xp6(2),o.Oqu(e.language.deactivatedDate),o.xp6(1),o.Q6J("ngIf",e.dataAvailable)}}function q(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",45),o.TgZ(1,"h4",46),o._uU(2),o.qZA(),o.TgZ(3,"button",47),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeModal()}),o._UZ(4,"span",48),o.qZA(),o.qZA(),o.TgZ(5,"div",49),o._uU(6),o._UZ(7,"br"),o._uU(8),o.qZA(),o.TgZ(9,"div",50),o.TgZ(10,"button",51),o.NdJ("click",function(){return o.CHM(e),o.oxw().confirmDeleteSecleted()}),o._uU(11),o.qZA(),o.TgZ(12,"button",52),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeModal()}),o._uU(13),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.modalTitle),o.xp6(4),o.hij(" ",e.language["Are you sure you want to reactivate"],"?"),o.xp6(2),o.hij(" (",e.modalInfo,") "),o.xp6(3),o.Oqu(e.language.yes),o.xp6(2),o.Oqu(e.language.no)}}const w=i(91704);let O=(()=>{class e{constructor(e,t,i,s,a,o,r){this.commonOrgService=e,this.router=t,this.apiService=i,this.sso=s,this.dialogService=a,this.translateService=o,this.titleService=r,this.pageAvailable=!1,this.tableOptions={language:{emptyTable:"Aucune donn\xe9e disponible dans le tableau",info:"Affichage de _START_ \xe0 _END_ des _TOTAL_ entr\xe9es",infoEmpty:"Affichage de 0 \xe0 0 des 0 entr\xe9es",infoFiltered:"(filtr\xe9es \xe0 partir des _MAX_ entr\xe9es totales)",lengthMenu:"Afficher les _MENU_ entr\xe9es",loadingRecords:"Chargement...",thousands:",",infoPostFix:"",search:"Chercher:",zeroRecords:"zeroRecords",paginate:{first:"Le d\xe9but",last:"Derni\xe8re",next:"Suivant",previous:"Pr\xe9c\xe9dent"}},pagingType:"full_numbers",columnDefs:[{targets:[0],orderable:!1},{targets:"_all",orderable:!0}],dom:"tipr",order:[1,"asc"],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&w(e.nTableWrapper).find("#deactivated-users-table_last").addClass("disabled"),this.table(e)}},this.dataAvailable=!1,this.selectedUsers=[],this.dtTrigger=new n.xQ,this.isRerender=!1,this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.newArray=[];let l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.MODULE=this.sso.getRedirectModule(l),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.dataAvailable=!1,this.isRerender=!0,this.selectedUsers=[],this.titleService.setTitle(`${this.language.deactivatedusers} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.setTableOptions("language")}),this.frTable=this.translateService.fr,this.getUsers(),this.titleService.setTitle(`${this.language.deactivatedusers} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngAfterViewInit(){this.rerender()}ngOnInit(){this.closeAlert(),this.tableLanguageOptions(),this.commonOrgService.currentPageAdder("blacklist")}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe()}getUsers(){this.usersListSubs=this.apiService.getBlacklistUsersByOrgId(this.ORG_ID).subscribe(e=>{e&&(this.blacklistTableData=[...e],this.setTableOptions())},e=>{this.blacklistTableData=[],this.dataAvailable=!0,setTimeout(()=>{this.showNoDataAvailable()},0),this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()}),this.rerender()}clearSearch(){let e=document.querySelector("#search-deactivated-user");e.value="",this.searchString=!1,this.dtElement.dtInstance.then(t=>{t.search(e.value).draw()})}setTableOptions(e){this.tableOptions={pagingType:"full_numbers",pageLength:10,processing:!0,lengthChange:!1,dom:"tipr",columnDefs:[{targets:[0],orderable:!1},{targets:"_all",orderable:!0}],order:[1,"asc"],drawCallback:e=>{this.newArray=e.aiDisplay,e.aoData.length<=e._iDisplayLength&&w(e.nTableWrapper).find("#deactivated-users-table_last").addClass("disabled"),this.table(e)}},this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.dataAvailable=!0},200):setTimeout(()=>{this.dataAvailable=!0,this.hideSearch()},500),this.rerender()}rerender(){var e;null===(e=this.dtElement)||void 0===e||e.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}hideSearch(){setTimeout(()=>{w("#blacklist-table .dataTables_wrapper .dataTables_filter").css("display","none"),w("#blacklist-table .dataTables_wrapper .dataTables_length").css("display","none")},100)}search(e){var t,i;""==e&&(this.searchString=!1),null===(i=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===i||i.then(t=>{t.search(e).draw(),this.searchString=!0,this.showNoDataAvailable()})}showNoDataAvailable(){setTimeout(()=>{let e=document.querySelector(".dataTables_empty");e&&(e.style.display="table-cell",e.classList.add("text-center"))},100)}closeAlert(){this.error=!1,this.success=!1}deactivateUser(){this.router.navigate([`${this.MODULE}/blacklistAddUser`])}table(e){this.selectedUsers=[];for(let t=0;t>e.aoData.length;t++)this.blacklistTableData[t].checked=!1;this.selectDeselectAll(!1),w("#selectDeselectAll").prop("checked",!1),w("#selectDeselectAll-span").hide()}selectDeselectAll(e){let t=0;var i=this;e?w('input[name^="activate_user"]').each(function(){if(t>=10)return!1;w(this).prop("checked",!0),i.selectedUsers.push(w(this).attr("id")),t++}):w('input[name^="activate_user"]').each(function(){if(t>=10)return!1;w(this).prop("checked",!1),i.selectedUsers=[],t++}),this.validateCheck()}levelOneChange(e,t,i){var s=this;if(w(`.activate_user_${i}`).prop("checked",t),t){s.selectedUsers.push(e.username);let t=w('input[name^="activate_user"]').length;this.selectedUsers.length==t?(w("#selectDeselectAll").prop("checked",!0),w("#selectDeselectAll-span").hide()):w("#selectDeselectAll-span").show()}else{s.selectedUsers=s.selectedUsers.filter(t=>t!=e.username);let t=w('input[name^="activate_user"]').length;this.selectedUsers.length?this.selectedUsers.length!=t?(w("#selectDeselectAll").prop("checked",!1),w("#selectDeselectAll-span").show()):w("#selectDeselectAll-span").hide():(w("#selectDeselectAll").prop("checked",!1),w("#selectDeselectAll-span").hide())}this.validateCheck()}validateCheck(){let e=document.querySelector(".mainChk"),t=document.querySelectorAll('input[name^="activate_user"]').length;this.selectedUsers=[...new Set(this.selectedUsers)],e.checked=this.selectedUsers.length==t}reActivate(){let e=[...new Set(this.selectedUsers)].join(", ");this.modalTitle=this.language["Reactivate Users"],this.modalInfo=e,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDeleteSecleted(){this.closeModal();const e=[];this.selectedUsers.forEach(t=>{e.push(this.apiService.ReactivatetUserByOrgId(t,this.ORG_ID))}),(0,a.D)(e).subscribe(e=>{this.selectedUsers=[],this.successInfo=`${this.language["User reactivated successfully"]}!`,this.success=!0,this.commonOrgService.pageScrollTop(),this.dataAvailable=!1,this.rerender(),this.getUsers(),document.getElementById("search-deactivated-user").value="",setTimeout(()=>{this.closeAlert()},3e3)},e=>{this.pageErrorHandle(e)})}changeDate(e){let t=new Date(e).toString().split("(");return t[1]=this.language[t[1].slice(0,-1)]||t[1].slice(0,-1),`${t[0]} (${t[1]})`}showAllUserCheckBox(e){w("#"+e.target.id).hide(),w("#selectDeselectAll").prop("checked",!0),this.selectDeselectAll(!0)}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.v),o.Y36(l.F0),o.Y36(c.s),o.Y36(d.t6),o.Y36(g.FF),o.Y36(u.s),o.Y36(h.Dx))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-black-list-users"]],viewQuery:function(e,t){if(1&e&&(o.Gf(m,7),o.Gf(s.G,5),o.Gf(f,7)),2&e){let e;o.iGM(e=o.CRH())&&(t.deleteModal=e.first),o.iGM(e=o.CRH())&&(t.dtElement=e.first),o.iGM(e=o.CRH())&&(t.errorModal=e.first)}},decls:24,vars:9,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"ccl-admin-title"],[1,"row","justify-content-end"],[1,"col-md-12","pr-0"],[1,"text-right","flat-right"],[1,"col-md-8","ccl-form"],["class","d-inline",4,"ngIf"],["id","deactivate-user-btn",1,"btn-default","primary","px-3","ml-3",3,"click"],[1,"col-md-4"],[1,"ccl-form"],["id","search-deactivated-user","type","text",1,"input-sm",3,"placeholder","keyup","search"],["class","clear-icon text-right",3,"click",4,"ngIf"],[1,""],["class","col",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img","d-inline-flex"],["src","./assets/img/success-icon.svg"],[1,"d-inline"],["id","reactivate-user-btn",1,"btn-default","primary","px-3",3,"click"],[1,"clear-icon","text-right",3,"click"],["src","../../../assets/img/close-icon.svg","alt",""],[1,"col"],["id","deactivated-users-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,"checkbox-column"],["type","checkbox","value","","id","selectDeselectAll",1,"mainChk",3,"disabled","change"],["id","selectDeselectAll-span",1,"checkbox-ui",2,"display","none",3,"click"],[3,"click"],[1,"deactivated",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","checkbox","value","",3,"id","name","change"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,Z,5,1,"div",1),o.YNc(2,b,6,1,"div",2),o.YNc(3,A,6,1,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o._uU(6),o.qZA(),o.qZA(),o.TgZ(7,"div",6),o.TgZ(8,"div",7),o.TgZ(9,"div",8),o.TgZ(10,"div",6),o.TgZ(11,"div",9),o.YNc(12,v,3,1,"div",10),o.TgZ(13,"button",11),o.NdJ("click",function(){return t.deactivateUser()}),o._uU(14),o.qZA(),o.qZA(),o.TgZ(15,"div",12),o.TgZ(16,"div",13),o.TgZ(17,"input",14),o.NdJ("keyup",function(e){return t.search(e.target.value)})("search",function(e){return t.search(e.target.value)}),o.qZA(),o.YNc(18,x,2,0,"span",15),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(19,"div",16),o.qZA(),o.qZA(),o.TgZ(20,"div",4),o.YNc(21,C,16,7,"div",17),o.qZA(),o.qZA(),o.YNc(22,q,14,5,"ng-template",null,18,o.W1O)),2&e&&(o.xp6(1),o.Q6J("ngIf",!t.dataAvailable),o.xp6(1),o.Q6J("ngIf",t.error),o.xp6(1),o.Q6J("ngIf",t.success),o.xp6(3),o.hij("",t.language.deactivatedUsers," "),o.xp6(6),o.Q6J("ngIf",0!=t.selectedUsers.length),o.xp6(2),o.Oqu(t.language.searchUsersToDeactivate),o.xp6(3),o.s9C("placeholder",t.language.searchUsers),o.xp6(1),o.Q6J("ngIf",t.searchString),o.xp6(3),o.Q6J("ngIf",t.dataAvailable))},directives:[p.O5,s.G,p.sg],styles:["input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:2px;z-index:1;position:absolute;right:0px!important;display:inline-block;border:1px solid #0279FF;background:#0279FF;left:0px;top:12px!important}.deactivated[_ngcontent-%COMP%]{width:163px!important}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:28px;top:5px;width:12px;cursor:pointer}"]}),e})()},72863:function(e,t,i){i.d(t,{C:function(){return l}});var s=i(37716),n=i(30900),a=i(49342),o=i(39895);const r=["errorModal"];let l=(()=>{class e{constructor(e,t){this.customTranslateService=e,this.commonOrgService=t,this.formError=!1,this.hideACS=!0,this.hideAPI=!0,this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.errorTitle="",this.errorBody="",this.add={orgId:"",cpeAcsUrl:"",username:"",password:"",acsIPv6Url:"",apiURL:"",https:"",apiClientUsername:"",apiClientPassword:"",captiveurl:"",captiveproxy:""},this.speedDataadd={_id:"",downloadUrl:"",uploadUrl:"",uploadSize:"",username:"",password:"",name:"",apiClientUsername:"",apiClientPassword:"",url:""},this.MODULE="calixAdmin",this.orgInfo={_id:12884251,name:"(3455)Testing",description:"(3455)Testing",url:"http://gcs-dev.calix.com:8080/12884251/OfndSUM54r",username:"acs-user-uilhr",password:"qeAEKItGKwijGl1",apiClientUsername:"api-user-3JxyE",apiClientPassword:"D5i4zvTKg71WSUt",captivePortalUrl:"http://gcs-dev.calix.com:8080/12884251/OfndSUM54r",internalProxy:"http://gcs-dev.calix.com:8080/12884251/OfndSUM54r"},this.errorInfo="",this.successInfo="",this.spShowButtons=!1,this.acsShowButtons=!1,this.spDataAvail=!1,this.spSaveClicked=!1,this.spDownloadUrlErr=!1,this.spUploadurlErr=!1,this.spUploadSizeErr=!1,this.acsSaveClicked=!1,this.acsUsernameErr=!1,this.apiUsernameErr=!1,this.captiveUrlErr=!1,this.proxyErr=!1}ngOnInit(){this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e})}ngOnDestroy(){this.commonOrgService.closeAlert()}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.d),s.Y36(a.v))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-calix-support-cloud"]],viewQuery:function(e,t){if(1&e&&s.Gf(r,7),2&e){let e;s.iGM(e=s.CRH())&&(t.errorModal=e.first)}},decls:4,vars:2,consts:[[1,"row","mb-3"],[1,"col-md-12","ccl-title"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._uU(2),s.qZA(),s.qZA(),s._UZ(3,"router-outlet")),2&e&&(s.xp6(2),s.AsE("",t.language.calixtitle," ",t.language.acssettings,""))},directives:[o.lC],styles:["section[_ngcontent-%COMP%]{padding:60px 0}section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-align:center;color:#007b5e;margin-bottom:50px;text-transform:uppercase}#tabs[_ngcontent-%COMP%]{background:#007b5e;color:#eee}#tabs[_ngcontent-%COMP%]   h6.section-title[_ngcontent-%COMP%]{color:#4c4c4c}#tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0279ff;background-color:transparent;border-color:transparent transparent #f3f3f3;border-bottom:1px solid!important;font-weight:bold}#tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;color:#eee;font-size:20px}"]}),e})()},64697:function(e,t,i){i.d(t,{s:function(){return L}});var s=i(37716),n=i(7450),a=i(39895),o=i(38048),r=i(49342),l=i(39075),c=i(91841),d=i(9406),g=i(12664),u=i(38583),h=i(3679),p=i(74062),m=i(86640),f=i(96718);const Z=["infoModal"];function b(e,t){if(1&e&&(s.TgZ(0,"div",54),s.TgZ(1,"div",55),s.TgZ(2,"div",56),s.TgZ(3,"span",57),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function A(e,t){if(1&e&&(s.TgZ(0,"div",21),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["Please enter the Chatbot Host URL."])}}function v(e,t){if(1&e&&(s.TgZ(0,"div",21),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Oqu(e.language["Please enter a valid URL."])}}function x(e,t){if(1&e&&(s.TgZ(0,"div",58),s.YNc(1,v,2,1,"div",24),s.qZA()),2&e){s.oxw();const e=s.MAs(35);s.xp6(1),s.Q6J("ngIf",null==e.errors?null:e.errors.pattern)}}function T(e,t){if(1&e&&(s.TgZ(0,"div",21),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Oqu(e.language["Please enter a valid Web Path."])}}function _(e,t){if(1&e&&(s.TgZ(0,"div",58),s.YNc(1,T,2,1,"div",24),s.qZA()),2&e){s.oxw();const e=s.MAs(42);s.xp6(1),s.Q6J("ngIf",null==e.errors?null:e.errors.pattern)}}function C(e,t){if(1&e&&(s.TgZ(0,"div",21),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language["Please enter the Chatbot Name."])}}function q(e,t){if(1&e&&(s.TgZ(0,"div",21),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Oqu(e.language["Please enter a valid URL."])}}function w(e,t){if(1&e&&(s.TgZ(0,"div",58),s.YNc(1,q,2,1,"div",24),s.qZA()),2&e){s.oxw();const e=s.MAs(67);s.xp6(1),s.Q6J("ngIf",null==e.errors?null:e.errors.pattern)}}function O(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",59),s.NdJ("click",function(){return s.CHM(e),s.oxw().chatbotHeaderBgColor=""}),s._UZ(1,"span"),s.qZA()}}function S(e,t){if(1&e&&(s.TgZ(0,"div",58),s.TgZ(1,"div",21),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language["Please enter a Header Background Color"])}}function y(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",59),s.NdJ("click",function(){return s.CHM(e),s.oxw().chatbotWindowBgColor=""}),s._UZ(1,"span"),s.qZA()}}function M(e,t){if(1&e&&(s.TgZ(0,"div",58),s.TgZ(1,"div",21),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language["Please enter a Window Background Color"])}}function k(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",59),s.NdJ("click",function(){return s.CHM(e),s.oxw().chatbotMessageTextColor=""}),s._UZ(1,"span"),s.qZA()}}function U(e,t){if(1&e&&(s.TgZ(0,"div",58),s.TgZ(1,"div",21),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language["Please enter a Message Text Color"])}}function D(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",59),s.NdJ("click",function(){return s.CHM(e),s.oxw().chatbotMessageBubbleColor=""}),s._UZ(1,"span"),s.qZA()}}function N(e,t){if(1&e&&(s.TgZ(0,"div",58),s.TgZ(1,"div",21),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij("",e.language["Please enter a Chatbot Message Bubble Color"]," ")}}function I(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",59),s.NdJ("click",function(){return s.CHM(e),s.oxw().customerMessageBubbleColor=""}),s._UZ(1,"span"),s.qZA()}}function E(e,t){if(1&e&&(s.TgZ(0,"div",58),s.TgZ(1,"div",21),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij("",e.language["Please enter a Customer Message Bubble Color"]," ")}}function F(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",60),s.TgZ(1,"h4",61),s._uU(2),s.qZA(),s.TgZ(3,"button",62),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeModal()}),s._UZ(4,"span",63),s.qZA(),s.qZA(),s.TgZ(5,"div",64),s.TgZ(6,"div",65),s._UZ(7,"p",66),s.qZA(),s.qZA(),s.TgZ(8,"div",67),s.TgZ(9,"button",68),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeModal()}),s._uU(10),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.infoTitle),s.xp6(5),s.Q6J("innerHTML",e.infoBody,s.oJD),s.xp6(3),s.hij(" ",e.language.Okay," ")}}const P=function(){return{standalone:!0}};let L=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.translateService=e,this.router=t,this.sso=i,this.commonOrgService=s,this.titleService=n,this.httpClient=a,this.chatBotService=o,this.dialogService=r,this.chatbotHeaderBgColor="#E51A1A",this.chatbotWindowBgColor="#FFFFFF",this.chatbotMessageTextColor="#333333",this.chatbotMessageBubbleColor="#FCB4B4",this.customerMessageBubbleColor="#EDF5FF",this.fontSelected="Arial Sans Serif",this.loading=!1,this.patternvalidation=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?[^\/]$/i,this.webPathPattern=/^\/.*[^\/]$/,this.saveClicked=!1;let l=this.router.url;this.MODULE=this.sso.getRedirectModule(l),this.commonOrgService.currentPageAdder("chatbot-create"),this.ORG_ID=this.sso.getOrganizationID(l),this.language=this.translateService.defualtLanguage,this.languageSub=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.titleService.setTitle(`${this.language.Chatbot} -  ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.saveClicked=!1,this.dspName=localStorage.getItem("calix.username")}ngOnDestroy(){this.commonOrgService.errorAlert.subscribe()&&this.commonOrgService.closeAlerts.next()}routeRedirectChatbot(){this.router.navigate([`/${this.MODULE}/chatbot`])}saveChanges(){this.saveClicked=!0,this.chatBotUrl&&this.chatbotName&&this.chatBotService.createChatBot({bspWebParentUrl:this.chatBotUrl,bspWebToolBarTitle:this.chatbotName,agentChatBubbleColor:this.chatbotMessageBubbleColor||"",bspName:this.dspName||"",customerChatBubbleColor:this.customerMessageBubbleColor||"",chatBotBackGroundColor:this.chatbotWindowBgColor||"",logoUrl:this.logoUrl||"",messageFont:this.fontSelected.$ngOptionLabel?this.fontSelected.$ngOptionLabel:this.fontSelected,messageTextColor:this.chatbotMessageTextColor||"",orgId:this.ORG_ID||"",toolBarColor:this.chatbotHeaderBgColor||"",bspWebAppPath:this.chatBotWebPath||""}).subscribe(e=>{this.loading=!0,this.router.navigate([`/${this.MODULE}/chatbot`])},e=>{this.pageErrorHandle(e)})}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){let t="";t=400===e.status?e.error.errors[0]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.s),s.Y36(a.F0),s.Y36(o.t6),s.Y36(r.v),s.Y36(l.Dx),s.Y36(c.eN),s.Y36(d.V),s.Y36(g.FF))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-chatbot-create"]],viewQuery:function(e,t){if(1&e&&s.Gf(Z,7),2&e){let e;s.iGM(e=s.CRH())&&(t.infoModal=e.first)}},decls:141,vars:86,consts:[[1,"container","px-0"],["class","loader",4,"ngIf"],[1,"row","mb-4"],[1,"col-12","d-flex","justify-content-between","align-items-center","pb-2"],[1,"cco-title","d-inline-flex","align-items-center"],[1,"disabled-but","mt-2","ml-3"],[1,"dot"],[1,"ml-2"],[1,"d-inline-flex"],["type","button",1,"btn-default","btn-dft","ml-3",3,"click"],["type","button",1,"btn-default","btn-primary","ml-3",3,"disabled","click"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","border-bottom","pb-2"],[1,"cco-secondary-title"],[1,"pl-2"],["type","button","disabled","",1,"btn-default","btn-dft","btn-dload"],[1,"mt-2"],[1,"col-5","mb-4"],[1,"ccl-form"],["for","chatbotUrl"],[1,"error"],["id","chatbotUrl","name","chatbotUrl","type","text","required","","trimSpace","",3,"ngModel","pattern","ngModelChange"],["chatbotUrl","ngModel"],["class","error",4,"ngIf"],["class","errorMessage",4,"ngIf"],["for","chatbotWebPath"],["id","chatbotWebPath","name","chatbotWebPath","type","text","trimSpace","",3,"ngModel","pattern","ngModelChange"],["chatbotWebPath","ngModel"],[1,"w-100","border-bottom","pb-2"],[1,"col-11"],[1,"col-md-4","col-md-3","ccl-form"],[1,"form-group"],["type","text","name","chatName","id","chatName","required","",3,"ngModel","ngModelChange"],["chatName","ngModel"],["type","text","id","logourl","name","logourl","trimSpace","",3,"ngModel","pattern","ngModelChange"],["logourl","ngModel"],["clearable","false","searchable","false","editable","false",3,"ngModelOptions","ngModel","ngModelChange"],["aria-selected","true"],[1,"d-flex","justify-content-between","w-100","ccl-color-pick"],[1,"ccl-form","input-colorpicker"],["type","text","required","",1,"w-100",3,"ngModel","value","ngModelChange"],["headerBgColor","ngModel"],["class","close btn-custom-clear",3,"click",4,"ngIf"],["name","ChatbotHeaderBgColor","id","ChatbotHeaderBgColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["windowBgColor","ngModel"],["name","ChatbotWindowBgColor","id","ChatbotWindowBgColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["messageTextColor","ngModel"],["name","ChatbotMessageTextColor","id","ChatbotMessageTextColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["messageBubbleColor","ngModel"],["name","ChatbotMessageBubbleColor","id","ChatbotMessageBubbleColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["customerMessageColor","ngModel"],["name","customerMessageBubbleColor","id","chatbotMessageBubbleColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"errorMessage"],[1,"close","btn-custom-clear",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"w-100"],[1,"f-size-16px",3,"innerHTML"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.YNc(1,b,5,1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"span"),s._uU(6),s.qZA(),s.TgZ(7,"span",5),s._UZ(8,"span",6),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div",7),s.TgZ(11,"div",8),s.TgZ(12,"button",9),s.NdJ("click",function(){return t.routeRedirectChatbot()}),s._uU(13),s.qZA(),s.TgZ(14,"button",10),s.NdJ("click",function(){return t.saveChanges()}),s._uU(15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",11),s.TgZ(17,"div",12),s.TgZ(18,"div",13),s.TgZ(19,"div",14),s._uU(20),s.qZA(),s.TgZ(21,"div",15),s.TgZ(22,"button",16),s._uU(23),s.qZA(),s.qZA(),s.qZA(),s.TgZ(24,"div"),s.TgZ(25,"p",17),s._uU(26),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",11),s.TgZ(28,"div",18),s.TgZ(29,"div",19),s.TgZ(30,"label",20),s._uU(31),s.TgZ(32,"span",21),s._uU(33,"*"),s.qZA(),s.qZA(),s.TgZ(34,"input",22,23),s.NdJ("ngModelChange",function(e){return t.chatBotUrl=e}),s.qZA(),s.YNc(36,A,2,1,"div",24),s.YNc(37,x,2,1,"div",25),s.qZA(),s.TgZ(38,"div",19),s.TgZ(39,"label",26),s._uU(40),s.qZA(),s.TgZ(41,"input",27,28),s.NdJ("ngModelChange",function(e){return t.chatBotWebPath=e}),s.qZA(),s.YNc(43,_,2,1,"div",25),s.qZA(),s.qZA(),s.TgZ(44,"div",11),s.TgZ(45,"div",12),s.TgZ(46,"div",29),s.TgZ(47,"div",14),s._uU(48),s.qZA(),s.qZA(),s.TgZ(49,"div"),s.TgZ(50,"p",17),s._uU(51),s.qZA(),s.qZA(),s.qZA(),s.TgZ(52,"div",30),s.TgZ(53,"div",11),s.TgZ(54,"div",31),s.TgZ(55,"div",32),s.TgZ(56,"label"),s._uU(57),s.TgZ(58,"span",21),s._uU(59,"*"),s.qZA(),s.qZA(),s.TgZ(60,"input",33,34),s.NdJ("ngModelChange",function(e){return t.chatbotName=e}),s.qZA(),s.YNc(62,C,2,1,"div",24),s.qZA(),s.TgZ(63,"div",32),s.TgZ(64,"label"),s._uU(65),s.qZA(),s.TgZ(66,"input",35,36),s.NdJ("ngModelChange",function(e){return t.logoUrl=e}),s.qZA(),s.YNc(68,w,2,1,"div",25),s.qZA(),s.qZA(),s.TgZ(69,"div",31),s.TgZ(70,"div",32),s.TgZ(71,"label"),s._uU(72),s.qZA(),s.TgZ(73,"ng-select",37),s.NdJ("ngModelChange",function(e){return t.fontSelected=e}),s.TgZ(74,"ng-option",38),s._uU(75,"Arial Sans Serif"),s.qZA(),s.TgZ(76,"ng-option"),s._uU(77,"Monospace"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(78,"div",32),s.TgZ(79,"label"),s._uU(80),s.TgZ(81,"span",21),s._uU(82,"*"),s.qZA(),s.qZA(),s.TgZ(83,"div",39),s.TgZ(84,"div",40),s.TgZ(85,"input",41,42),s.NdJ("ngModelChange",function(e){return t.chatbotHeaderBgColor=e}),s.qZA(),s.YNc(87,O,2,0,"button",43),s.qZA(),s.TgZ(88,"input",44),s.NdJ("colorPickerChange",function(e){return t.chatbotHeaderBgColor=e})("ngModelChange",function(e){return t.chatbotHeaderBgColor=e}),s.qZA(),s.qZA(),s.YNc(89,S,3,1,"div",25),s.qZA(),s.TgZ(90,"div",32),s.TgZ(91,"label"),s._uU(92),s.TgZ(93,"span",21),s._uU(94,"*"),s.qZA(),s.qZA(),s.TgZ(95,"div",39),s.TgZ(96,"div",40),s.TgZ(97,"input",41,45),s.NdJ("ngModelChange",function(e){return t.chatbotWindowBgColor=e}),s.qZA(),s.YNc(99,y,2,0,"button",43),s.qZA(),s.TgZ(100,"input",46),s.NdJ("colorPickerChange",function(e){return t.chatbotWindowBgColor=e})("ngModelChange",function(e){return t.chatbotWindowBgColor=e}),s.qZA(),s.qZA(),s.YNc(101,M,3,1,"div",25),s.qZA(),s.qZA(),s.TgZ(102,"div",31),s.TgZ(103,"div",32),s.TgZ(104,"label"),s._uU(105),s.TgZ(106,"span",21),s._uU(107,"*"),s.qZA(),s.qZA(),s.TgZ(108,"div",39),s.TgZ(109,"div",40),s.TgZ(110,"input",41,47),s.NdJ("ngModelChange",function(e){return t.chatbotMessageTextColor=e}),s.qZA(),s.YNc(112,k,2,0,"button",43),s.qZA(),s.TgZ(113,"input",48),s.NdJ("colorPickerChange",function(e){return t.chatbotMessageTextColor=e})("ngModelChange",function(e){return t.chatbotMessageTextColor=e}),s.qZA(),s.qZA(),s.YNc(114,U,3,1,"div",25),s.TgZ(115,"div",32),s.TgZ(116,"label"),s._uU(117),s.TgZ(118,"span",21),s._uU(119,"*"),s.qZA(),s.qZA(),s.TgZ(120,"div",39),s.TgZ(121,"div",40),s.TgZ(122,"input",41,49),s.NdJ("ngModelChange",function(e){return t.chatbotMessageBubbleColor=e}),s.qZA(),s.YNc(124,D,2,0,"button",43),s.qZA(),s.TgZ(125,"input",50),s.NdJ("colorPickerChange",function(e){return t.chatbotMessageBubbleColor=e})("ngModelChange",function(e){return t.chatbotMessageBubbleColor=e}),s.qZA(),s.qZA(),s.YNc(126,N,3,1,"div",25),s.TgZ(127,"div",32),s.TgZ(128,"label"),s._uU(129),s.TgZ(130,"span",21),s._uU(131,"*"),s.qZA(),s.qZA(),s.TgZ(132,"div",39),s.TgZ(133,"div",40),s.TgZ(134,"input",41,51),s.NdJ("ngModelChange",function(e){return t.customerMessageBubbleColor=e}),s.qZA(),s.YNc(136,I,2,0,"button",43),s.qZA(),s.TgZ(137,"input",52),s.NdJ("colorPickerChange",function(e){return t.customerMessageBubbleColor=e})("ngModelChange",function(e){return t.customerMessageBubbleColor=e}),s.qZA(),s.qZA(),s.YNc(138,E,3,1,"div",25),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(139,F,11,3,"ng-template",null,53,s.W1O),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.MAs(35),i=s.MAs(42),n=s.MAs(61),a=s.MAs(67),o=s.MAs(86),r=s.MAs(98),l=s.MAs(111),c=s.MAs(123),d=s.MAs(135);s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(5),s.Oqu(t.language.Chatbot),s.xp6(3),s.hij(" ",t.language.Disabled," "),s.xp6(4),s.Oqu(t.language.Cancel),s.xp6(1),s.Q6J("disabled",d.invalid||c.invalid||l.invalid||r.invalid||o.invalid||(null==e.errors?null:e.errors.pattern)||(null==a.errors?null:a.errors.pattern)||e.touched&&(null==e.errors?null:e.errors.required)||n.touched&&(null==n.errors?null:n.errors.required)||i.invalid),s.xp6(1),s.Oqu(t.language["Save Changes"]),s.xp6(5),s.Oqu(t.language.Configuration),s.xp6(3),s.Oqu(t.language["Download Code Snippet"]),s.xp6(3),s.Oqu(t.language.Chatbot_Info_Message),s.xp6(5),s.Oqu(t.language["Chatbot Host URL"]),s.xp6(3),s.Q6J("ngModel",t.chatBotUrl)("pattern",t.patternvalidation),s.xp6(2),s.Q6J("ngIf",t.saveClicked&&(null==e.errors?null:e.errors.required)||e.touched&&(null==e.errors?null:e.errors.required)),s.xp6(1),s.Q6J("ngIf",e.invalid),s.xp6(3),s.Oqu(t.language["Web Path"]),s.xp6(1),s.Q6J("ngModel",t.chatBotWebPath)("pattern",t.webPathPattern),s.xp6(2),s.Q6J("ngIf",i.invalid),s.xp6(5),s.Oqu(t.language.Customization),s.xp6(3),s.Oqu(t.language.Customization_Msg),s.xp6(6),s.hij("",t.language["Chatbot Name"]," "),s.xp6(3),s.Q6J("ngModel",t.chatbotName),s.xp6(2),s.Q6J("ngIf",t.saveClicked&&(null==n.errors?null:n.errors.required)||n.touched&&(null==n.errors?null:n.errors.required)),s.xp6(3),s.Oqu(t.language["Logo URL"]),s.xp6(1),s.Q6J("ngModel",t.logoUrl)("pattern",t.patternvalidation),s.xp6(2),s.Q6J("ngIf",a.invalid),s.xp6(4),s.Oqu(t.language.Font),s.xp6(1),s.Q6J("ngModelOptions",s.DdM(85,P))("ngModel",t.fontSelected),s.xp6(7),s.hij("",t.language["Header Background Color"]," "),s.xp6(5),s.Q6J("ngModel",t.chatbotHeaderBgColor)("value",t.chatbotHeaderBgColor),s.xp6(2),s.Q6J("ngIf",t.chatbotHeaderBgColor),s.xp6(1),s.Udp("background",t.chatbotHeaderBgColor),s.Q6J("colorPicker",t.chatbotHeaderBgColor)("ngModel",t.chatbotHeaderBgColor)("cpOutputFormat","hex")("cpPosition","top-left"),s.xp6(1),s.Q6J("ngIf",o.invalid),s.xp6(3),s.hij("",t.language["Window Background Color"]," "),s.xp6(5),s.Q6J("ngModel",t.chatbotWindowBgColor)("value",t.chatbotWindowBgColor),s.xp6(2),s.Q6J("ngIf",t.chatbotWindowBgColor),s.xp6(1),s.Udp("background",t.chatbotWindowBgColor),s.Q6J("colorPicker",t.chatbotWindowBgColor)("ngModel",t.chatbotWindowBgColor)("cpOutputFormat","hex")("cpPosition","top-left"),s.xp6(1),s.Q6J("ngIf",r.invalid),s.xp6(4),s.hij("",t.language["Message Text Color"]," "),s.xp6(5),s.Q6J("ngModel",t.chatbotMessageTextColor)("value",t.chatbotMessageTextColor),s.xp6(2),s.Q6J("ngIf",t.chatbotMessageTextColor),s.xp6(1),s.Udp("background",t.chatbotMessageTextColor),s.Q6J("colorPicker",t.chatbotMessageTextColor)("ngModel",t.chatbotMessageTextColor)("cpOutputFormat","hex")("cpPosition","top-left"),s.xp6(1),s.Q6J("ngIf",l.invalid),s.xp6(3),s.hij("",t.language["Chatbot Message Bubble Color"]," "),s.xp6(5),s.Q6J("ngModel",t.chatbotMessageBubbleColor)("value",t.chatbotMessageBubbleColor),s.xp6(2),s.Q6J("ngIf",t.chatbotMessageBubbleColor),s.xp6(1),s.Udp("background",t.chatbotMessageBubbleColor),s.Q6J("colorPicker",t.chatbotMessageBubbleColor)("ngModel",t.chatbotMessageBubbleColor)("cpOutputFormat","hex")("cpPosition","top-left"),s.xp6(1),s.Q6J("ngIf",c.invalid),s.xp6(3),s.hij("",t.language["Customer Message Bubble Color"]," "),s.xp6(5),s.Q6J("ngModel",t.customerMessageBubbleColor)("value",t.customerMessageBubbleColor),s.xp6(2),s.Q6J("ngIf",t.customerMessageBubbleColor),s.xp6(1),s.Udp("background",t.customerMessageBubbleColor),s.Q6J("colorPicker",t.customerMessageBubbleColor)("ngModel",t.customerMessageBubbleColor)("cpOutputFormat","hex")("cpPosition","top-left"),s.xp6(1),s.Q6J("ngIf",d.invalid)}},directives:[u.O5,h.Fj,h.Q7,p.f,h.JJ,h.On,h.c5,m.w9,m.xv,f.Kk],styles:[".disabled-but[_ngcontent-%COMP%]{background-color:#ebeaef;color:#4c4c4c;font-size:12px;font-weight:600;text-align:Center;padding:5px 8px;width:100px;border-radius:20px;line-height:15.08px;margin:2px 0}.disabled-but[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#4c4c4c;border-radius:50%;display:inline-block}.input-colorpicker[_ngcontent-%COMP%]{position:relative;min-width:135px}button.close.btn-custom-clear[_ngcontent-%COMP%]{position:absolute;right:5px;top:13px}button.close.btn-custom-clear[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-size:13px}.color-box[_ngcontent-%COMP%]{cursor:default!important;min-width:50px;max-width:77px;height:36px;border-radius:3px!important;font-size:0;box-shadow:none!important;margin-left:12px;border:1px solid #ced4da}button.btn-dload[_ngcontent-%COMP%]{font-size:14px;height:24px;padding:0 20px!important}button.btn-dload[_ngcontent-%COMP%]:disabled{background:#F8F8FA!important;border-color:#f8f8fa!important;opacity:.5;color:#1a1f22}.ccl-color-pick[_ngcontent-%COMP%]{max-width:300px}  .ccl-color-pick .color-picker{margin-top:-40px;margin-left:85px}  .ccl-color-pick .color-picker .arrow.arrow-top-left{display:none}"]}),e})()},55908:function(e,t,i){i.d(t,{x:function(){return _}});var s=i(37716),n=i(7450),a=i(12664),o=i(39895),r=i(38048),l=i(49342),c=i(39075),d=i(20904),g=i(9406),u=i(38583);function h(e,t){if(1&e&&(s.TgZ(0,"div",31),s.TgZ(1,"div",32),s.TgZ(2,"div",33),s.TgZ(3,"span",34),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function p(e,t){if(1&e&&(s.TgZ(0,"span",35),s._UZ(1,"span",36),s._uU(2),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",e.language.Disabled," ")}}function m(e,t){if(1&e&&(s.TgZ(0,"span",37),s._UZ(1,"span",36),s._uU(2),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",e.language["Enablement in progress"]," ")}}function f(e,t){if(1&e&&(s.TgZ(0,"span",38),s._UZ(1,"span",36),s._uU(2),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",e.language["Chatbot enabled"]," ")}}function Z(e,t){if(1&e&&(s.TgZ(0,"span",37),s._UZ(1,"span",36),s._uU(2),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",e.language["Deletion in progress"]," ")}}function b(e,t){if(1&e&&(s.TgZ(0,"span",39),s._UZ(1,"span",36),s._uU(2),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",e.language.Failed," ")}}function A(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",40),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(),i=s.MAs(116);return t.openDeleteModal(i)}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("disabled",e.deleteInprocess)("ngClass",e.deleteInprocess?"diasble-color":"primary"),s.xp6(1),s.hij(" ",e.language["Delete Chatbot"]," ")}}function v(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",41),s.NdJ("click",function(){return s.CHM(e),s.oxw().routeToCreateChatbot()}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.hij(" ",e.language["Set Up"]," ")}}function x(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",42),s.TgZ(1,"button",43),s.NdJ("click",function(){return s.CHM(e).$implicit.dismiss("Cross click")}),s._UZ(2,"span",44),s.qZA(),s.TgZ(3,"div",45),s.TgZ(4,"div",46),s.TgZ(5,"div",47),s._UZ(6,"span"),s.qZA(),s.TgZ(7,"div",48),s.TgZ(8,"div",49),s._uU(9),s.qZA(),s.TgZ(10,"div",50),s.TgZ(11,"p"),s._uU(12),s.qZA(),s.TgZ(13,"p",51),s._uU(14),s.qZA(),s.qZA(),s.TgZ(15,"div",52),s.TgZ(16,"button",53),s.NdJ("click",function(){return s.CHM(e),s.oxw().deleteChatbot()}),s._uU(17),s.qZA(),s.TgZ(18,"button",54),s.NdJ("click",function(){return s.CHM(e).$implicit.close("Close click")}),s._uU(19),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(9),s.hij(" ",e.language["Are you sure you want to delete chatbot?"]," "),s.xp6(3),s.hij(" ",e.language.deletion_info_msg," "),s.xp6(2),s.Oqu(e.language["This action cannot be undone"]),s.xp6(3),s.hij(" ",e.language["Delete Chatbot"]," "),s.xp6(2),s.hij(" ",e.language.Cancel," ")}}const T=function(e){return{"background-color":e}};let _=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.translateService=e,this.dialogService=t,this.router=i,this.sso=s,this.commonOrgService=n,this.titleService=a,this.common=o,this.chatBotService=r,this.chatbotHeaderBgColor="#E51A1A",this.chatbotWindowBgColor="#FFFFFF",this.chatbotMessageTextColor="#333333",this.chatbotMessageBubbleColor="#FCB4B4",this.customerMessageBubbleColor="#EDF5FF",this.chatbotMessageColor="#F44336",this.logoUrl="http://",this.fontSelected="Arial Sans Serif",this.loading=!1,this.disabledChatBot=!1,this.inProgress=!1,this.enableChatBot=!1,this.enableSetUp=!1,this.deleteChatPot=!1,this.chatBotConfigured=!0,this.deleteInprogress=!1,this.failedChatBot=!1,this.deleteInprocess=!1;let l=this.router.url;this.MODULE=this.sso.getRedirectModule(l),this.commonOrgService.currentPageAdder("chatbot"),this.ORG_ID=this.sso.getOrganizationID(l),this.language=this.translateService.defualtLanguage,this.languageSub=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.titleService.setTitle(`${this.language.Chatbot} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.scopes=this.sso.getScopes(),this.getData()}getData(){this.loading=!0,this.chatBotService.verifyChatBotConfig(this.ORG_ID).subscribe(e=>{var t,i,s,n;this.loading=!1,"DELETE_IN_PROGRESS"==(null===(t=e[0])||void 0===t?void 0:t.cloudStackStatus)?(this.enableChatBot=!1,this.failedChatBot=!1,this.disabledChatBot=!1,this.enableSetUp=!1,this.inProgress=!1,this.chatBotConfigured=!0,this.deleteChatPot=!0,this.deleteInprocess=!0,this.deleteInprogress=!0):"FAILED"==(null===(i=e[0])||void 0===i?void 0:i.cloudStackStatus)?(this.enableChatBot=!1,this.disabledChatBot=!1,this.enableSetUp=!1,this.inProgress=!1,this.chatBotConfigured=!0,this.deleteChatPot=!0,this.failedChatBot=!0,this.deleteInprogress=!1):""==e?(this.deleteInprogress=!1,this.disabledChatBot=!0,this.enableSetUp=!0,this.inProgress=!1,this.enableChatBot=!1):["NEW","INPROGRESS","UPDATE"].includes(null===(s=e[0])||void 0===s?void 0:s.cloudStackStatus)?(this.disabledChatBot=!1,this.inProgress=!0):"DONE"==(null===(n=e[0])||void 0===n?void 0:n.cloudStackStatus)&&(this.chatBotConfigured=!1,this.deleteChatPot=!0,this.enableChatBot=!0),e.length&&e.forEach(e=>{this.chatbotMessageBubbleColor=e.agentChatBubbleColor||"",this.customerMessageBubbleColor=e.customerChatBubble||"",this.chatbotMessageTextColor=e.messageTextColor||"",this.chatbotHeaderBgColor=e.toolBarColor||"",this.chatbotWindowBgColor=e.chatBotBackGroundColor||"",this.logoUrl=e.logoUrl||"",this.fontSelected=e.messageFont||"",this.chatBotName=e.bspWebToolBarTitle||"",this.hostUrl=e.bspWebParentUrl||"",this.webPathUrl=e.bspWebAppPath||""}),this.scopes["cloud.admin.users"]&&-1===this.scopes["cloud.admin.users"].indexOf("write")&&(this.deleteChatPot=!1,this.enableSetUp=!1,this.chatBotConfigured=!1)},e=>{this.pageErrorHandle(e)})}routeToCreateChatbot(){this.router.navigate([`/${this.MODULE}/chatbot-create`])}openDeleteModal(e){this.dialogService.open(e,{windowClass:"custom-warning-modal clx-custom-modal",backdrop:"static",keyboard:!1})}deleteChatbot(){this.chatBotService.deleteChatbotRequest({orgId:this.ORG_ID,cloudStackStatus:"DELETED"}).subscribe(e=>{this.dialogService.dismissAll(),e&&this.getData()},e=>{this.pageErrorHandle(e)})}downloadChatBotSnippet(){this.chatBotService.downloadChatConfig(this.ORG_ID,{responseType:"text"}).subscribe(e=>{const t=document.createElement("a");t.href="data:text/html;charset=utf-8,"+encodeURIComponent(e),t.download="parent.html",t.click()},e=>{this.pageErrorHandle(e)})}pageErrorHandle(e){let t="";500==e.status&&(t=this.commonOrgService.pageErrorHandle(e)),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.s),s.Y36(a.FF),s.Y36(o.F0),s.Y36(r.t6),s.Y36(l.v),s.Y36(c.Dx),s.Y36(d.i),s.Y36(g.V))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-chatbot"]],decls:117,vars:50,consts:[[1,"container","px-0","position-relative"],["class","loader",4,"ngIf"],[1,"row","mb-4"],[1,"col-12","d-flex","justify-content-between","align-items-center","pb-2"],[1,"cco-title","d-inline-flex","align-items-center"],["class","disabled-but mt-2 ml-3",4,"ngIf"],["class","draft-but w-auto mt-2 ml-3",4,"ngIf"],["class","running-but w-auto mt-2 ml-3",4,"ngIf"],["class","disabled-but w-auto mt-2 ml-3",4,"ngIf"],[1,"ml-2"],["class","btn-link-dis",3,"disabled","ngClass","click",4,"ngIf"],["type","button","class","btn-default btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","border-bottom","pb-2"],[1,"cco-secondary-title"],[1,"pl-2"],["type","button",1,"btn-default","btn-dft","btn-dload",3,"disabled","click"],[1,"mt-2"],[1,"col-5","mb-4"],[1,"ccl-form","mb-3"],[1,"mb-0"],[1,"error"],[1,"value-text"],[1,"ccl-form"],[1,"w-100","border-bottom","pb-2"],[1,"col-md-4","col-md-3","ccl-form"],[1,"form-group"],[1,"d-flex","justify-content-between","w-100","ccl-color-box"],[1,"color-box",3,"ngStyle"],["warningDeleteChatbot",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"disabled-but","mt-2","ml-3"],[1,"dot"],[1,"draft-but","w-auto","mt-2","ml-3"],[1,"running-but","w-auto","mt-2","ml-3"],[1,"disabled-but","w-auto","mt-2","ml-3"],[1,"btn-link-dis",3,"disabled","ngClass","click"],["type","button",1,"btn-default","btn-primary",3,"click"],[1,"modal-body"],["type","button","data-dismiss","modal","aria-label","Close",1,"clx-modal-dismiss",3,"click"],["aria-hidden","true"],[1,"modal-body-content"],[1,"clx-warning-wrapper"],[1,"clx-warning-icon"],[1,"clx-warning-content"],[1,"text-break","cco-secondary-title","mb-3"],[1,"w-100"],[1,"m-0"],[1,"mt-3"],["type","button",1,"btn-default","btn-primary","mr-3",3,"click"],["type","button","aria-label","Close",1,"btn-default","btn-dft",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,h,5,1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"span"),s._uU(6),s.qZA(),s.YNc(7,p,3,1,"span",5),s.YNc(8,m,3,1,"span",6),s.YNc(9,f,3,1,"span",7),s.YNc(10,Z,3,1,"span",6),s.YNc(11,b,3,1,"span",8),s.qZA(),s.TgZ(12,"div",9),s.YNc(13,A,2,3,"button",10),s.YNc(14,v,2,1,"button",11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",12),s.TgZ(16,"div",13),s.TgZ(17,"div",14),s.TgZ(18,"div",15),s._uU(19),s.qZA(),s.TgZ(20,"div",16),s.TgZ(21,"button",17),s.NdJ("click",function(){return t.downloadChatBotSnippet()}),s._uU(22),s.qZA(),s.qZA(),s.qZA(),s.TgZ(23,"div"),s.TgZ(24,"p",18),s._uU(25),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(26,"div",12),s.TgZ(27,"div",19),s.TgZ(28,"div",20),s.TgZ(29,"label",21),s._uU(30),s.TgZ(31,"span",22),s._uU(32,"*"),s.qZA(),s.qZA(),s.TgZ(33,"p",23),s._uU(34),s.qZA(),s.qZA(),s.TgZ(35,"div",24),s.TgZ(36,"label",21),s._uU(37),s.qZA(),s.TgZ(38,"p",23),s._uU(39),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(40,"div",12),s.TgZ(41,"div",13),s.TgZ(42,"div",25),s.TgZ(43,"div",15),s._uU(44),s.qZA(),s.qZA(),s.TgZ(45,"div"),s.TgZ(46,"p",18),s._uU(47),s.qZA(),s.qZA(),s.qZA(),s.TgZ(48,"div",13),s.TgZ(49,"div",12),s.TgZ(50,"div",26),s.TgZ(51,"div",27),s.TgZ(52,"label",21),s._uU(53),s.TgZ(54,"span",22),s._uU(55,"*"),s.qZA(),s.qZA(),s.TgZ(56,"p",23),s._uU(57),s.qZA(),s.qZA(),s.TgZ(58,"div",27),s.TgZ(59,"label",21),s._uU(60),s.qZA(),s.TgZ(61,"p",23),s._uU(62),s.qZA(),s.qZA(),s.qZA(),s.TgZ(63,"div",26),s.TgZ(64,"div",27),s.TgZ(65,"label",21),s._uU(66),s.qZA(),s.TgZ(67,"p",23),s._uU(68),s.qZA(),s.qZA(),s.TgZ(69,"div",27),s.TgZ(70,"label",21),s._uU(71),s.TgZ(72,"span",22),s._uU(73,"*"),s.qZA(),s.qZA(),s.TgZ(74,"div",28),s.TgZ(75,"p",23),s._uU(76),s.qZA(),s._UZ(77,"div",29),s.qZA(),s.qZA(),s.TgZ(78,"div",27),s.TgZ(79,"label",21),s._uU(80),s.TgZ(81,"span",22),s._uU(82,"*"),s.qZA(),s.qZA(),s.TgZ(83,"div",28),s.TgZ(84,"p",23),s._uU(85),s.qZA(),s._UZ(86,"div",29),s.qZA(),s.qZA(),s.qZA(),s.TgZ(87,"div",26),s.TgZ(88,"div",27),s.TgZ(89,"label",21),s._uU(90),s.TgZ(91,"span",22),s._uU(92,"*"),s.qZA(),s.qZA(),s.TgZ(93,"div",28),s.TgZ(94,"p",23),s._uU(95),s.qZA(),s._UZ(96,"div",29),s.qZA(),s.qZA(),s.TgZ(97,"div",27),s.TgZ(98,"label",21),s._uU(99),s.TgZ(100,"span",22),s._uU(101,"*"),s.qZA(),s.qZA(),s.TgZ(102,"div",28),s.TgZ(103,"p",23),s._uU(104),s.qZA(),s._UZ(105,"div",29),s.qZA(),s.qZA(),s.TgZ(106,"div",27),s.TgZ(107,"label",21),s._uU(108),s.TgZ(109,"span",22),s._uU(110,"*"),s.qZA(),s.qZA(),s.TgZ(111,"div",28),s.TgZ(112,"p",23),s._uU(113),s.qZA(),s._UZ(114,"div",29),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(115,x,20,5,"ng-template",null,30,s.W1O)),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(5),s.Oqu(t.language.Chatbot),s.xp6(1),s.Q6J("ngIf",t.disabledChatBot),s.xp6(1),s.Q6J("ngIf",t.inProgress),s.xp6(1),s.Q6J("ngIf",t.enableChatBot),s.xp6(1),s.Q6J("ngIf",t.deleteInprogress),s.xp6(1),s.Q6J("ngIf",t.failedChatBot),s.xp6(2),s.Q6J("ngIf",t.deleteChatPot),s.xp6(1),s.Q6J("ngIf",t.enableSetUp),s.xp6(5),s.Oqu(t.language.Configuration),s.xp6(2),s.Q6J("disabled",t.chatBotConfigured),s.xp6(1),s.Oqu(t.language["Download Code Snippet"]),s.xp6(3),s.Oqu(t.language.Chatbot_Info_Message),s.xp6(5),s.hij("",t.language["Chatbot Host URL"]," "),s.xp6(4),s.Oqu(t.hostUrl),s.xp6(3),s.Oqu(t.language["Web Path"]),s.xp6(2),s.Oqu(t.webPathUrl),s.xp6(5),s.Oqu(t.language.Customization),s.xp6(3),s.Oqu(t.language.Customization_Msg),s.xp6(6),s.hij("",t.language["Chatbot Name"]," "),s.xp6(4),s.Oqu(t.chatBotName),s.xp6(3),s.Oqu(t.language["Logo URL"]),s.xp6(2),s.Oqu(t.logoUrl),s.xp6(4),s.Oqu(t.language.Font),s.xp6(2),s.Oqu(t.fontSelected),s.xp6(3),s.hij("",t.language["Header Background Color"]," "),s.xp6(5),s.Oqu(t.chatbotHeaderBgColor),s.xp6(1),s.Q6J("ngStyle",s.VKq(40,T,t.chatbotHeaderBgColor)),s.xp6(3),s.hij("",t.language["Window Background Color"]," "),s.xp6(5),s.Oqu(t.chatbotWindowBgColor),s.xp6(1),s.Q6J("ngStyle",s.VKq(42,T,t.chatbotWindowBgColor)),s.xp6(4),s.hij("",t.language["Message Text Color"]," "),s.xp6(5),s.Oqu(t.chatbotMessageTextColor),s.xp6(1),s.Q6J("ngStyle",s.VKq(44,T,t.chatbotMessageTextColor)),s.xp6(3),s.hij("",t.language["Chatbot Message Bubble Color"]," "),s.xp6(5),s.Oqu(t.chatbotMessageBubbleColor),s.xp6(1),s.Q6J("ngStyle",s.VKq(46,T,t.chatbotMessageBubbleColor)),s.xp6(3),s.hij("",t.language["Customer Message Bubble Color"]," "),s.xp6(5),s.Oqu(t.customerMessageBubbleColor),s.xp6(1),s.Q6J("ngStyle",s.VKq(48,T,t.customerMessageBubbleColor)))},directives:[u.O5,u.PC,u.mk],styles:[".disabled-but[_ngcontent-%COMP%]{background-color:#ebeaef;color:#4c4c4c;font-size:12px;font-weight:600;text-align:Center;padding:5px 8px;width:100px;border-radius:20px;line-height:15.08px;margin:2px 0}.disabled-but[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#4c4c4c;border-radius:50%;display:inline-block}.value-text[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:20px;color:gray;padding:8px 16px;margin-bottom:0;word-break:break-word}.color-box[_ngcontent-%COMP%]{cursor:default;min-width:77px;min-height:36px;border-radius:3px;border:1px solid #ced4da}.value-text[_ngcontent-%COMP%] + .color-box[_ngcontent-%COMP%]{margin-left:12px}button.btn-dload[_ngcontent-%COMP%]{font-size:14px;height:24px;padding:0 20px!important}button.btn-dload[_ngcontent-%COMP%]:disabled{background:#F8F8FA!important;border-color:#f8f8fa!important;opacity:.5;color:#1a1f22}.ccl-color-box[_ngcontent-%COMP%]{max-width:300px}.btn-link-dis[_ngcontent-%COMP%]{border:none!important;background:transparent!important;display:inline-flex!important;align-items:center!important}.diasble-color[_ngcontent-%COMP%]{color:#72b4ff!important}"]}),e})()},65895:function(e,t,i){i.d(t,{P:function(){return O}});var s=i(11067),n=i(38583),a=i(71412),o=i(37716),r=i(39075),l=i(39895),c=i(38048),d=i(7450),g=i(7616),u=i(12664),h=i(49342),p=i(18638),m=i(3679);const f=["infoModal"];function Z(e,t){1&e&&(o.TgZ(0,"div",57),o.TgZ(1,"div",58),o.TgZ(2,"div",59),o.TgZ(3,"span",60),o._uU(4,"Loading..."),o.qZA(),o.qZA(),o.qZA(),o.qZA())}function b(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"li",13),o.TgZ(1,"a",61),o.NdJ("click",function(){o.CHM(e);const t=o.oxw();return t.getPacketTimingData("seconds"),t.activeTab="packetTimingGraph",t.setPageTitle()}),o._uU(2),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngClass","systemAdministration"===e.MODULE?"active":""),o.xp6(1),o.Oqu(e.language.flow_timing)}}function A(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.BQk()),2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.flowCountMsg)}}function v(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"p",62),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("innerHtml",e.rangeForDuration,o.oJD)}}function x(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"p",62),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("innerHtml",e.rangeForDelay,o.oJD)}}function T(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"p",62),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("innerHtml",e.rangeForDuration,o.oJD)}}function _(e,t){if(1&e&&(o.ynx(0),o._UZ(1,"p",62),o.BQk()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("innerHtml",e.rangeForDelay,o.oJD)}}function C(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",63),o.TgZ(1,"h4",64),o._uU(2),o.qZA(),o.TgZ(3,"button",65),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeModal()}),o._UZ(4,"span",66),o.qZA(),o.qZA(),o.TgZ(5,"div",67),o.TgZ(6,"div",68),o.TgZ(7,"p",69),o._uU(8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"div",70),o.TgZ(10,"button",71),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeModal()}),o._uU(11),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.infoTitle),o.xp6(6),o.Oqu(e.infoBody),o.xp6(3),o.hij(" ",e.language.Okay," ")}}const q=function(){return{width:"100%",height:"38px"}},w=function(){return{height:"36px"}};let O=(()=>{class e{constructor(e,t,i,n,a,o,r,l){this.titleService=e,this.router=t,this.sso=i,this.translateService=n,this.networkDeviceApiService=a,this.dialogService=o,this.commonOrgService=r,this.titleCasePipe=l,this.Highcharts=s,this.show={loading:!1,chart:!1,durationFullChart:!0,delayFullChart:!0,durationShortChart:!1,delayShortChart:!1,fullChart:!1,flowCountInfo:!1},this.deviceIp="",this.maxStartDate=new Date,this.maxEndDate=new Date,this.requestPayload={startDate:null,endDate:null},this.packetTimingData={},this.rangeForDuration="",this.rangeForDelay="",this.packetTabValue="seconds",this.activeTab="",this.flowCountMsg="";const c=this.router.url;this.MODULE=this.sso.getRedirectModule(c),this.ORG_ID=this.sso.getOrganizationID(c),this.deviceIp=this.commonOrgService.getKey("deviceIp"),this.language=this.translateService.defualtLanguage,this.languageSub=this.translateService.selectedLanguage.subscribe(e=>{var t,i;this.language=e,(null===(i=null===(t=document.getElementById("packetTiming"))||void 0===t?void 0:t.className)||void 0===i?void 0:i.includes("active"))?this.loadPacketChart(this.packetTabValue):this.getDecodeFlowCount(),this.setPageTitle()})}ngOnInit(){this.deviceIp?(this.refreshGraph(),this.setPageTitle()):this.router.navigate([`/${this.MODULE}/flowAnalyze/network/devices/devices-status`])}ngOnDestroy(){this.languageSub&&this.languageSub.unsubscribe(),this.getDeviceMetricSeriesSub&&this.getDeviceMetricSeriesSub.unsubscribe()}configureDate(){this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.endDate=new Date,this.endDate.setHours(23,59,59,999),this.startDate.setDate(this.startDate.getDate()-1)}routeToDeviceStatus(){this.router.navigate([`${this.MODULE}/flowAnalyze/network/devices/devices-status`])}onSelectStartTime(e,t){e?(this.requestPayload.startDate=new Date(e),this.requestPayload.startDate.setHours(0,0,0),this.startDate=new Date(e),this.startDate.setHours(0,0,0),this.minEndDate=new Date(e),new Date(this.minEndDate.setDate(this.requestPayload.startDate.getDate()+1)),t&&(this.requestPayload.endDate=new Date(e),this.endDate=new Date(e),a(e).format("MM/DD/YYYY")!==a().format("MM/DD/YYYY")&&(this.requestPayload.endDate.setHours(23,59,59),this.endDate.setHours(23,59,59)),new Date(this.requestPayload.endDate.setDate(this.requestPayload.startDate.getDate()+30)),new Date(this.endDate.setDate(this.requestPayload.startDate.getDate()+30)),this.maxEndDate=new Date(e),new Date(this.maxEndDate.setDate(this.requestPayload.startDate.getDate()+30)),this.maxEndDate>new Date&&(this.maxEndDate=new Date,this.requestPayload.endDate=new Date,this.endDate=new Date)),this.maxStartDate=new Date((new Date).setDate((new Date).getDate()-1))):this.requestPayload.startDate=""}onSelectEndTime(e){e?(this.requestPayload.endDate=new Date(e),this.endDate=new Date(e),a(e).format("MM/DD/YYYY")!==a().format("MM/DD/YYYY")?(this.requestPayload.endDate.setHours(23,59,59),this.endDate.setHours(23,59,59)):(this.requestPayload.endDate=new Date,this.endDate=new Date),this.maxStartDate=new Date((new Date).setDate((new Date).getDate()-1))):this.requestPayload.endDate=""}expandDurationChart(e){e?(document.getElementById("delay_collaps").style.display="none",document.getElementById("duration_expand").style.display="block",document.getElementById("delay_expand").style.display="none",document.getElementById("duration_collaps").style.display="none",this.show.durationFullChart=!1,this.show.delayFullChart=!0,this.show.fullChart=!0):(document.getElementById("duration_expand").style.display="none",document.getElementById("duration_collaps").style.display="block",document.getElementById("delay_collaps").style.display="block",document.getElementById("delay_expand").style.display="none",this.show.fullChart=!1,this.show.durationFullChart=!1,this.show.delayFullChart=!1),this.loadPacketChart(this.packetTabValue)}expandDelayChart(e){e?(document.getElementById("duration_expand").style.display="none",document.getElementById("duration_collaps").style.display="none",document.getElementById("delay_collaps").style.display="none",document.getElementById("delay_expand").style.display="block",this.show.fullChart=!0,this.show.delayFullChart=!1,this.show.durationFullChart=!0):(document.getElementById("duration_expand").style.display="none",document.getElementById("duration_collaps").style.display="block",document.getElementById("delay_collaps").style.display="block",document.getElementById("delay_expand").style.display="none",this.show.fullChart=!1,this.show.durationFullChart=!1,this.show.delayFullChart=!1),this.loadPacketChart(this.packetTabValue)}hidePacketTimingGraph(){this.show.fullChart=!1,this.show.delayFullChart=!0,this.show.durationFullChart=!0,this.show.durationShortChart=!1,this.show.delayShortChart=!1}getDecodeFlowCount(){if(!this.requestPayload.startDate)return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Start date required"],void this.openInfoModal();this.commonOrgService.closeAlert(),this.activeTab="decodeFlowCountGraph",this.show.loading=!0,this.requestPayload.startDate=Math.floor(new Date(this.startDate).getTime()/1e3),this.requestPayload.endDate=Math.floor(new Date(this.endDate).getTime()/1e3),this.getDeviceMetricSeriesSub=this.networkDeviceApiService.DeviceMatricSeries(this.deviceIp,this.requestPayload.startDate,this.requestPayload.endDate,this.ORG_ID).subscribe(e=>{var t,i;if(this.show.loading=!1,e&&(null==e?void 0:e.metricSeries)){document.getElementById("container").style.display="block";const t=this.makeOptionsForLineChart(e);this.Highcharts.chart("container",t)}else document.getElementById("container").style.display="none";this.show.flowCountInfo=null===(i=null===(t=document.getElementById("packetTiming"))||void 0===t?void 0:t.className)||void 0===i?void 0:i.includes("active")},e=>{document.getElementById("container").style.display="none",this.show.loading=!1,this.pageErrorHandle(e)})}makeOptionsForLineChart(e){var t,i,s,o,r;let l={time:[]},c=this;new n.uU("en-US"),e.metricSeries.forEach(e=>{const t=[];e.metricValues.forEach(e=>{l.time.push(e.time),t.push((null==e?void 0:e.value)||0)}),l[e.metricName]=t}),l.time=[...new Set(l.time)],l.time=null===(t=l.time)||void 0===t?void 0:t.map(e=>a.tz(e/1e6,a.tz.guess()).format("MM/DD/YYYY HH:mm z"));let d=1;return l.time&&l.time.length<=45?d=1:l.time&&l.time.length>45&&(d=Math.floor(l.time.length/45)),{chart:{type:"line",zoomType:"xy"},time:{useUTC:!1},title:{text:null},subtitle:{text:null},mapNavigation:{enableMouseWheelZoom:!0},tooltip:{formatter:function(){return c.formatTooltip(this.x,this.series.userOptions.label,this.series.name,this.y)}},xAxis:{categories:l.time?l.time:[],tickInterval:d,labels:{allowOverlap:!1,maxStaggerLines:1,formatter:function(){let e=this.value;return this.isLast&&(e=this.axis.categories[this.axis.categories.length-1]),e}}},yAxis:{title:{text:`${this.language.flowRate} (${this.language.perSecond})`},min:0,minRange:1},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal",symbolRadius:0},lang:{noData:this.language["No Data Available"]},plotOptions:{series:{marker:{enabled:1==(null===(i=l.packet_rate)||void 0===i?void 0:i.length)||1==(null===(s=l.flow_rate)||void 0===s?void 0:s.length)||1==(null===(o=l.virtual_packet_rate)||void 0===o?void 0:o.length)||1==(null===(r=l.virtual_bit_Rate)||void 0===r?void 0:r.length)}},column:{stacking:"normal",dataLabels:{enabled:!1}}},series:[{showInLegend:!0,name:this.language.packetRate,label:"packetRate",color:"#F7C343",data:l.packet_rate?l.packet_rate:[]},{showInLegend:!0,name:this.language.flowRate,label:"flowRate",color:"#5ACFEA",data:l.flow_rate?l.flow_rate:[]},{showInLegend:!0,name:this.language.virtualPacketRate,label:"virtualPacketRate",color:"#B926F0",data:l.virtual_packet_rate?l.virtual_packet_rate:[]},{showInLegend:!0,name:this.language.virtualBitRate,label:"virtualBitRate",color:"#0027FF",data:l.virtual_bit_Rate?l.virtual_bit_Rate:[]}],credits:{enabled:!1}}}getPacketTimingData(e,t=!1){if(!t&&"packetTimingGraph"===this.activeTab)return;this.commonOrgService.closeAlert(),this.show.loading=!0;let i=document.getElementById("seconds");null==i||i.classList.remove("show"),null==i||i.classList.remove("active");let s=document.getElementById("minutes");s.classList.remove("show"),s.classList.remove("active");let n=document.getElementById("milliseconds");n.classList.add("show"),n.classList.add("active"),this.activeTab="packetTimingGraph",this.getDeviceMetricSeriesSub=this.networkDeviceApiService.GetPacketTimingData(this.deviceIp,this.ORG_ID).subscribe(t=>{var i,s;t&&Object.keys(t).length?(this.packetTimingData=t,this.loadPacketChart(e)):this.packetTimingData={},this.show.flowCountInfo=null===(s=null===(i=document.getElementById("packetTiming"))||void 0===i?void 0:i.className)||void 0===s?void 0:s.includes("active"),this.show.loading=!1},e=>{this.show.loading=!1,this.pageErrorHandle(e)})}loadPacketChart(e){this.packetTabValue=e;let t,i,s=[],n=[],a=[],o=[];switch(this.flowCount(this.packetTimingData),e){case"seconds":s=this.configureXaxisData("duration",e,1e3),s[s.length-1]=`>= ${s[s.length-1]}`,n=this.configureXaxisData("delay",e,1e3),n[n.length-1]=`>= ${n[n.length-1]}`,a=this.configureYAxisData("duration",e),o=this.configureYAxisData("delay",e),t=this.makeOptionsForDurationChart(s,a,"Seconds"),i=this.makeOptionsForDelayChart(n,o,"Seconds");break;case"minutes":s=this.configureXaxisData("duration",e,6e4),s[s.length-1]=`>= ${s[s.length-1]}`,n=this.configureXaxisData("delay",e,6e4),n[n.length-1]=`>= ${n[n.length-1]}`,a=this.configureYAxisData("duration",e),o=this.configureYAxisData("delay",e),t=this.makeOptionsForDurationChart(s,a,"Minutes"),i=this.makeOptionsForDelayChart(n,o,"Minutes");break;case"hours":s=this.configureXaxisData("duration",e,36e5),s[s.length-1]=`>= ${s[s.length-1]}`,n=this.configureXaxisData("delay",e,36e5),n[n.length-1]=`>= ${n[n.length-1]}`,a=this.configureYAxisData("duration",e),o=this.configureYAxisData("delay",e),t=this.makeOptionsForDurationChart(s,a,"Hours"),i=this.makeOptionsForDelayChart(n,o,"Hours")}this.rangeForDuration=this.on_one_entry(this.packetTimingData.duration[e]),this.rangeForDelay=this.on_one_entry(this.packetTimingData.delay[e]),this.show.fullChart?(this.Highcharts.chart("container_duration_expand",t),this.Highcharts.chart("container_delay_expand",i)):(this.Highcharts.chart("container_duration",t),this.Highcharts.chart("container_delay",i))}flowCount(e){if(!e)return;const t=e.duration.seconds.created-e.duration.seconds.started,i=Math.round(t/6e4);this.flowCountMsg=e.duration.seconds.total_count+" "+this.language.flow_last+" ",this.flowCountMsg+=0==i?Math.round(t/1e3)+" "+this.language.Seconds:i+" "+this.language.Minutes}configureXaxisData(e,t,i){let s=this.packetTimingData[e][t].step/i,n=0,a=[];for(let o=0;o<this.packetTimingData[e][t].size;o++)n+=s,a.push(n);return a=null==a?void 0:a.map(e=>e.toFixed(2)),a}configureYAxisData(e,t){var i,s;let n=[];const a=null===(i=this.packetTimingData[e][t].indicies)||void 0===i?void 0:i.reduce((e,t)=>e+t,0);return n.push(null===(s=this.packetTimingData[e][t].indicies)||void 0===s?void 0:s.map(e=>e?e/a*100:0)),n=n.flat(),n}makeOptionsForDurationChart(e,t,i){return{chart:{type:"column",zoomType:"xy"},title:{text:""},xAxis:{categories:e,labels:{style:{textOverflow:"ellipsis"}}},yAxis:{title:{text:"%"},opposite:!1,min:0,max:100,labels:{formatter:function(){return`${this.value}`}}},legend:{reversed:!1},lang:{noData:this.language["No Data Available"]},plotOptions:{column:{stacking:"normal"},series:{minPointLength:3,colors:["#0027FF"]}},tooltip:{formatter:function(){return`<p> <b>${this.x}</b><span> <b>${i}</b><br/></span><br>${this.y.toFixed(2)}% </p>`}},series:[{name:this.titleCasePipe.transform(this.language[i]),data:t}],credits:{enabled:!1}}}makeOptionsForDelayChart(e,t,i){return{chart:{type:"column",zoomType:"xy"},title:{text:""},xAxis:{categories:e,labels:{style:{textOverflow:"ellipsis"}}},yAxis:{title:{text:"%"},opposite:!1,min:0,max:100,labels:{formatter:function(){return`${this.value}`}}},legend:{reversed:!1},lang:{noData:this.language["No Data Available"]},plotOptions:{column:{stacking:"normal"},series:{minPointLength:3,colors:["#5ACFEA"]}},tooltip:{formatter:function(){return`<p> <b>${this.x}<b/><span> <b>${i}</b><br/></span><br>${this.y.toFixed(2)}% </p>`}},series:[{name:this.titleCasePipe.transform(this.language[i]),data:t}],credits:{enabled:!1}}}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal)}closeModal(){this.modalRef&&this.modalRef.close()}formatBytes(e,t=2){if(!+e)return"0 bps";const i=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1e3));return`${parseFloat((e/Math.pow(1e3,s)).toFixed(i))} ${["bps","Kbps","Mbps","Gbps","Tbps","Pbps","Ebps","Zbps","Ybps"][s]}`}formatPacket(e,t=2){if(!+e)return"0 pps";const i=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1e3));return`${parseFloat((e/Math.pow(1e3,s)).toFixed(i))} ${["pps","Kpps","Mpps","Gpps","Tbps","Ppps","Epps","Zpps","Ypsps"][s]}`}formatTooltip(e,t,i,s){return"virtualPacketRate"==t&&(s=this.formatPacket(s)),"virtualBitRate"==t&&(s=this.formatBytes(s)),`<b>${e}</b><br><b>${i}: ${s}</b>`}on_one_entry(e){let t="";if(!e)return t;let i=e.total_count||0;if(i>0){let n=this.round10(e.missing||0,i).toFixed(1),a=this.round10(e.invalid||0,i).toFixed(1);if((e.minval||0)<=(e.maxval||0)){let i=this.time_scale(e.minval||0),o=this.time_scale(e.maxval||0);if(0!=e.minval&&o.short!=i.short)var s=i.short;else s="";t=this.language.range+": "+i.value+" "+s+"&thinsp;&harr;&thinsp; "+o.value+" "+o.name+",&nbsp"+this.language.missing+": "+n+"%, "+this.language.invalid+": "+a+"%"}}else t=this.language.range+": 0.0 "+this.language.Seconds+"&thinsp;&harr;&thinsp;0.0 "+this.language.Seconds+",&nbsp"+this.language.missing+":0.0%, "+this.language.invalid+":0.0%";return t}round10(e,t){return Math.round(e/t*1e3)/10}time_scale(e){let t=e/1e3;if(t<=120)return{value:t.toFixed(1),name:this.language.Seconds,short:this.language.Seconds};let i=t/60;if(i<=120)return{value:i.toFixed(1),name:this.language.Minutes,short:this.language.Minutes};let s=i/60;return s<=48?{value:s.toFixed(1),name:this.language.hours,short:this.language.hours}:{value:(s/24).toFixed(1),name:this.language.days,short:this.language.days}}pageErrorHandle(e){var t,i;let s="";400==e.status||417==e.status?(this.infoBody=417==e.status&&(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)?null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message:this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=this.language["Invalid request"],this.openInfoModal(),this.show.loading=!1):(s=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(s),this.commonOrgService.pageScrollTop(),this.show.loading=!1)}setPageTitle(){this.titleService.setTitle(`${"packetTimingGraph"===this.activeTab?this.language.flow_timing:this.language.decoded_flow_count} - ${this.language.Bsp_Microsite_Status} - ${this.language.devices} - ${this.language.Network} - ${this.language.flowconfiguration} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}routeToDecodeFlowCount(){"decodeFlowCountGraph"!==this.activeTab&&(this.configureDate(),this.onSelectStartTime(this.startDate,!1),this.onSelectEndTime(this.endDate),this.getDecodeFlowCount(),this.setPageTitle())}refreshGraph(){var e,t;const i=this.activeTab;this.configureDate(),this.onSelectStartTime(this.startDate,!1),this.onSelectEndTime(this.endDate),this.getDecodeFlowCount(),"systemAdministration"===this.MODULE&&this.getPacketTimingData("seconds",!0),this.show.flowCountInfo=null===(t=null===(e=document.getElementById("packetTiming"))||void 0===e?void 0:e.className)||void 0===t?void 0:t.includes("active"),this.activeTab=i}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.Dx),o.Y36(l.F0),o.Y36(c.t6),o.Y36(d.s),o.Y36(g.v),o.Y36(u.FF),o.Y36(h.v),o.Y36(n.rS))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-devices-name-placeholder"]],viewQuery:function(e,t){if(1&e&&o.Gf(f,7),2&e){let e;o.iGM(e=o.CRH())&&(t.infoModal=e.first)}},features:[o._Bn([n.rS])],decls:104,vars:55,consts:[[1,"container","px-0"],["class","loader",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between"],[1,"cco-title","d-inline-flex","align-items-start"],[3,"click"],[1,"cursor-pointer","d-inline-flex","ml-3","mt-3"],["src","../../../assets/img/ic_refresh.svg"],["type","button",1,"close",3,"click"],[1,"ccl-tabs"],[1,"nav","nav-tabs"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-toggle","tab","id","docodeFlowCount","data-target","#tab-decoded-flow-count",1,"nav-link",3,"ngClass","click"],[4,"ngIf"],["id","devicePlaceHoldertabs",1,"tab-content"],["id","tab-packet-timing",1,"tab-pane",3,"ngClass"],["id","packetTimingList",1,"nav","nav-tabs","nav-tab-list","mt-3","mb-2"],["id","milliseconds","data-toggle","tab","data-target","#packet-timing-minutes",1,"btn","btn-default","active",3,"click"],["data-toggle","tab","id","seconds","data-target","#packet-timing-minutes",1,"btn","btn-default",3,"click"],["data-toggle","tab","id","minutes","data-target","#packet-timing-minutes",1,"btn","btn-default",3,"click"],["id","packet-timing-minutes",1,"tab-pane","active"],[1,"tab-pane-content"],["id","duration_collaps",1,"col-6","mt-3",3,"hidden"],[1,"d-flex","w-100","border-bottom","justify-content-between","pb-2"],["id","timing-minutes-duration",1,"cco-secondary-title"],[1,"mwc-btns","flex","align-items-center"],["id","MinutesDurationExpand",1,"btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],["src","../../../assets/img/ic_expand_grey.svg"],[1,"chart","w-100"],["id","container_duration",1,"cco-traffic-reports-container"],["id","delay_collaps",1,"col-6","mt-3",3,"hidden"],["id","timing-minutes-delay",1,"cco-secondary-title"],["id","MinutesDelayExpand",1,"btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],["id","container_delay",1,"cco-traffic-reports-container"],["id","duration_expand",1,"col-12","mt-3",3,"hidden"],["id","",1,"btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],["src","../../../assets/img/ic_expand_inverted_grey.svg"],["id","container_duration_expand",1,"cco-traffic-reports-container"],["id","delay_expand",1,"col-12","mt-3",3,"hidden"],["id","container_delay_expand",1,"cco-traffic-reports-container"],["id","tab-decoded-flow-count",1,"tab-pane","show",3,"ngClass"],[1,"row","mt-3"],[1,"col-md-6"],[1,"col-md-6","mb-2"],[1,"mb-0"],[1,"w-100","ccl-form"],["dateFormat","mm-dd-yy",3,"inputStyle","maxDate","styleClass","placeholder","ngModel","readonlyInput","showIcon","onSelect","ngModelChange"],["dateFormat","mm-dd-yy",3,"minDate","inputStyle","maxDate","styleClass","placeholder","ngModel","readonlyInput","showIcon","onSelect","ngModelChange"],[1,"col-md-6","mb-2","pt-4","text-left"],["type","button",1,"btn-default","btn-primary","mt-1",3,"disabled","click"],[1,"col-12","mt-2"],[1,"d-flex","border-bottom","pb-2"],[1,"cco-secondary-title"],["id","container",1,"cco-traffic-reports-container"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["data-toggle","tab","id","packetTiming","data-target","#tab-packet-timing",1,"nav-link",3,"ngClass","click"],[1,"chat-info-desc",3,"innerHtml"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"w-100"],[1,"f-size-16px"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,Z,5,0,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o._uU(6),o.TgZ(7,"a",6),o.NdJ("click",function(){return t.refreshGraph()}),o.TgZ(8,"span",7),o._UZ(9,"img",8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"button",9),o.NdJ("click",function(){return t.routeToDeviceStatus()}),o._UZ(11,"span"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",2),o.TgZ(13,"div",3),o.TgZ(14,"div",10),o.TgZ(15,"ul",11),o.YNc(16,b,3,2,"li",12),o.TgZ(17,"li",13),o.TgZ(18,"a",14),o.NdJ("click",function(){return t.routeToDecodeFlowCount()}),o._uU(19),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(20,A,3,1,"ng-container",15),o.TgZ(21,"div",16),o.TgZ(22,"div",17),o.TgZ(23,"ul",18),o.TgZ(24,"li",13),o.TgZ(25,"a",19),o.NdJ("click",function(){return t.loadPacketChart("seconds")}),o._uU(26),o.qZA(),o.qZA(),o.TgZ(27,"li",13),o.TgZ(28,"a",20),o.NdJ("click",function(){return t.loadPacketChart("minutes")}),o._uU(29),o.qZA(),o.qZA(),o.TgZ(30,"li",13),o.TgZ(31,"a",21),o.NdJ("click",function(){return t.loadPacketChart("hours")}),o._uU(32),o.qZA(),o.qZA(),o.qZA(),o.TgZ(33,"div",22),o.TgZ(34,"div",23),o.TgZ(35,"div",2),o.TgZ(36,"div",24),o.TgZ(37,"div",25),o.TgZ(38,"div",26),o._uU(39),o.qZA(),o.TgZ(40,"div",27),o.TgZ(41,"button",28),o.NdJ("click",function(){return t.expandDurationChart(!0)}),o._UZ(42,"img",29),o.qZA(),o.qZA(),o.qZA(),o.TgZ(43,"div",30),o.YNc(44,v,2,1,"ng-container",15),o._UZ(45,"div",31),o.qZA(),o.qZA(),o.TgZ(46,"div",32),o.TgZ(47,"div",25),o.TgZ(48,"div",33),o._uU(49),o.qZA(),o.TgZ(50,"div",27),o.TgZ(51,"button",34),o.NdJ("click",function(){return t.expandDelayChart(!0)}),o._UZ(52,"img",29),o.qZA(),o.qZA(),o.qZA(),o.TgZ(53,"div",30),o.YNc(54,x,2,1,"ng-container",15),o._UZ(55,"div",35),o.qZA(),o.qZA(),o.qZA(),o.TgZ(56,"div",2),o.TgZ(57,"div",36),o.TgZ(58,"div",25),o.TgZ(59,"div",26),o._uU(60),o.qZA(),o.TgZ(61,"div",27),o.TgZ(62,"button",37),o.NdJ("click",function(){return t.expandDurationChart(!1)}),o._UZ(63,"img",38),o.qZA(),o.qZA(),o.qZA(),o.TgZ(64,"div",30),o.YNc(65,T,2,1,"ng-container",15),o._UZ(66,"div",39),o.qZA(),o.qZA(),o.TgZ(67,"div",40),o.TgZ(68,"div",25),o.TgZ(69,"div",33),o._uU(70),o.qZA(),o.TgZ(71,"div",27),o.TgZ(72,"button",37),o.NdJ("click",function(){return t.expandDelayChart(!1)}),o._UZ(73,"img",38),o.qZA(),o.qZA(),o.qZA(),o.TgZ(74,"div",30),o.YNc(75,_,2,1,"ng-container",15),o._UZ(76,"div",41),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(77,"div",42),o.TgZ(78,"div",23),o.TgZ(79,"div",43),o.TgZ(80,"div",44),o.TgZ(81,"div",2),o.TgZ(82,"div",45),o.TgZ(83,"label",46),o._uU(84),o.qZA(),o.TgZ(85,"div",47),o.TgZ(86,"p-calendar",48),o.NdJ("onSelect",function(e){return t.onSelectStartTime(e,!0)})("ngModelChange",function(e){return t.startDate=e}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(87,"div",45),o.TgZ(88,"label",46),o._uU(89),o.qZA(),o.TgZ(90,"div",47),o.TgZ(91,"p-calendar",49),o.NdJ("onSelect",function(e){return t.onSelectEndTime(e)})("ngModelChange",function(e){return t.endDate=e}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(92,"div",50),o.TgZ(93,"button",51),o.NdJ("click",function(){return t.getDecodeFlowCount()}),o._uU(94),o.qZA(),o.qZA(),o.qZA(),o.TgZ(95,"div",2),o.TgZ(96,"div",52),o.TgZ(97,"div",53),o.TgZ(98,"div",54),o._uU(99),o.qZA(),o.qZA(),o.TgZ(100,"div",30),o._UZ(101,"div",55),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(102,C,12,3,"ng-template",null,56,o.W1O)),2&e&&(o.xp6(1),o.Q6J("ngIf",null==t.show?null:t.show.loading),o.xp6(5),o.hij("",t.deviceIp," "),o.xp6(10),o.Q6J("ngIf","systemAdministration"===t.MODULE),o.xp6(2),o.Q6J("ngClass","systemAdministration"!==t.MODULE?"active":""),o.xp6(1),o.Oqu(t.language.decoded_flow_count),o.xp6(1),o.Q6J("ngIf",t.show.flowCountInfo),o.xp6(2),o.Q6J("ngClass","systemAdministration"===t.MODULE?"active":""),o.xp6(4),o.Oqu(t.language.milliseconds),o.xp6(3),o.Oqu(t.language.USeconds),o.xp6(3),o.Oqu(t.language.minutes),o.xp6(4),o.Q6J("hidden",t.show.durationShortChart),o.xp6(3),o.hij(" ",t.language.Duration,""),o.xp6(2),o.s9C("title",t.language.expand),o.xp6(3),o.Q6J("ngIf",t.rangeForDuration),o.xp6(2),o.Q6J("hidden",t.show.delayShortChart),o.xp6(3),o.Oqu(t.language.delay),o.xp6(2),o.s9C("title",t.language.expand),o.xp6(3),o.Q6J("ngIf",t.rangeForDelay),o.xp6(3),o.Q6J("hidden",t.show.durationFullChart),o.xp6(3),o.hij(" ",t.language.Duration,""),o.xp6(2),o.s9C("title",t.language.subImpac_fullscreen_close_tip),o.xp6(3),o.Q6J("ngIf",t.rangeForDuration),o.xp6(2),o.Q6J("hidden",t.show.delayFullChart),o.xp6(3),o.Oqu(t.language.delay),o.xp6(2),o.s9C("title",t.language.subImpac_fullscreen_close_tip),o.xp6(3),o.Q6J("ngIf",t.rangeForDelay),o.xp6(2),o.Q6J("ngClass","systemAdministration"!==t.MODULE?"active":""),o.xp6(7),o.Oqu(t.language.START_DATE),o.xp6(2),o.Akn(o.DdM(51,q)),o.s9C("placeholder",t.language.START_DATE),o.Q6J("inputStyle",o.DdM(52,w))("maxDate",t.maxStartDate)("styleClass","p-cal-custom")("ngModel",t.startDate)("readonlyInput",!0)("showIcon",!0),o.xp6(3),o.Oqu(t.language.END_DATE),o.xp6(2),o.Akn(o.DdM(53,q)),o.s9C("placeholder",t.language.END_DATE),o.Q6J("minDate",t.minEndDate)("inputStyle",o.DdM(54,w))("maxDate",t.maxEndDate)("styleClass","p-cal-custom")("ngModel",t.endDate)("readonlyInput",!0)("showIcon",!0),o.xp6(2),o.Q6J("disabled",!t.startDate),o.xp6(1),o.Oqu(t.language.apply),o.xp6(5),o.Oqu(t.language.decoded_flow_count))},directives:[n.O5,n.mk,p.f,m.JJ,m.On],styles:[".tab-pane.fade[_ngcontent-%COMP%]:not(.show) > .tab-pane-content[_ngcontent-%COMP%]{display:none}.tab-pane.fade.show[_ngcontent-%COMP%] > .tab-pane-content[_ngcontent-%COMP%]{display:block}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding:3px 20px!important;border:1px solid #0279FF;color:#0279ff;font-size:14px;line-height:16.67px!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:not(.active):hover{background-color:#0279ff;color:#fff}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn.active[_ngcontent-%COMP%]{background-color:#0279ff;color:#fff}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{border-radius:0!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child   .btn[_ngcontent-%COMP%]{border-top-left-radius:12px!important;border-bottom-left-radius:12px!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child   .btn[_ngcontent-%COMP%]{border-top-right-radius:12px!important;border-bottom-right-radius:12px!important}.chat-info-desc[_ngcontent-%COMP%]{font-family:Source Sans Pro!important;font-size:14px!important;color:#1a1f22;margin-bottom:5px;margin-top:10px}"]}),e})()},81162:function(e,t,i){i.d(t,{l:function(){return T}});var s=i(91704),n=i(40205),a=i(92340),o=i(5304),r=i(37716),l=i(91841),c=i(38048);let d=(()=>{class e{constructor(e,t){this.http=e,this.sso=t,this.API_URI=`${a.N.SUPPORT_URL}`}updateExternalticketDetails(e){return this.http.post(`${this.API_URI}/call/calloutcome/extrefconfig/nisc`,e)}updatePutExternalticketDetails(e){return this.http.put(`${this.API_URI}/call/calloutcome/extrefconfig/nisc`,e)}externalticketDetails(e){const t=this.sso.getOrg(e);return this.http.get(`${this.API_URI}/call/calloutcome/extrefconfig/nisc?${t}`)}deleteExternalticketDetails(e){const t=this.sso.getOrg(e);return this.http.delete(`${this.API_URI}/call/calloutcome/extrefconfig/nisc?${t}`)}testUrlExternalticketDetails(e){return this.http.put(`${this.API_URI}/call/calloutcome/extrefconfig/nisc/test`,e).pipe((0,o.K)(e=>(0,n._)(e)))}handleError(e){return(0,n._)(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(l.eN),r.LFG(c.t6))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();var g=i(7450),u=i(49342),h=i(39895),p=i(39075),m=i(38583),f=i(3679),Z=i(74062),b=i(86640);function A(e,t){if(1&e&&(r.TgZ(0,"div",42),r.TgZ(1,"div",43),r.TgZ(2,"div",44),r.TgZ(3,"span",45),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(4),r.Oqu(e.language.Loading)}}function v(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.language["Please provide valid url"])}}function x(e,t){if(1&e&&(r.TgZ(0,"div",46),r.YNc(1,v,2,1,"div",47),r.qZA()),2&e){r.oxw();const e=r.MAs(35);r.xp6(1),r.Q6J("ngIf",null==e.errors?null:e.errors.pattern)}}let T=(()=>{class e{constructor(e,t,i,s,n,a){this.translateService=e,this.sso=t,this.externalTicketingservice=i,this.commonOrgService=s,this.router=n,this.titleService=a,this.orgId=this.sso.getOrgId(),this.externalTicketData={},this.loading=!1,this.saveDisable=!1,this.TempexternalTicketData={},this.Frame=[{id:"NISC",name:"NISC"}],this.exteranalTicketDefualtValue="NISC",this.patternvalidation="^https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9]+.[^s]{2,}|www.[a-zA-Z0-9]+.[^s]{2,}$",this.extrefError404=!1,this.passwordHide=!1,this.isButtonDisabled=!0,this.isTestButtonDisabled=!0,this.commonOrgService.currentPageAdder("externalticketingsystem"),this.MODULE=this.sso.getRedirectModule(this.router.url)}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.External_ticket_System} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.External_ticket_System} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.getExternalticketDetails()}showSuccessAlert(e){s(".alert.alert-success").show(),this.successMsg=e,setTimeout(()=>{this.closeAlert()},2e3)}showDeleteAlert(e){s(".alert.alert-error").show(),s(".alert.alert-error").addClass("alert-danger"),this.errorMsg=e}getExternalticketDetails(){this.loading=!0,this.externalTicketingservice.externalticketDetails(this.orgId).subscribe(e=>{this.externalTicketData=e,this.TempexternalTicketData=JSON.parse(JSON.stringify(this.externalTicketData)),this.extUserPassword=null==e?void 0:e.password,this.extrefError404=!1,this.saveDisable=!1,this.loading=!1},e=>{404===e.status&&(this.extrefError404=!0,this.loading=!1,this.clearFields()),this.loading=!1})}cancelExternalticketDetails(e){var t;this.externalTicketData=JSON.parse(JSON.stringify(this.TempexternalTicketData)),this.extUserPassword=null===(t=this.TempexternalTicketData)||void 0===t?void 0:t.password}externalTicketFormUpdate(e){this.loading=!0;const t={orgId:parseInt(this.orgId),companyNumber:e.value.companyNumber,url:e.value.url,username:e.value.username,password:this.extUserPassword,name:e.value.name};this.extrefError404?this.externalTicketingservice.updatePutExternalticketDetails(t).subscribe(e=>{this.externalTicketData=e,this.getExternalticketDetails(),this.loading=!1,this.showSuccessAlert("Added Successfully"),this.isButtonDisabled=!0,this.externalTicketData.form.markAsDirty(),this.externalTicketData.form.markAsPristine(),this.externalTicketData.form.resetForm()},e=>{404===e.status&&this.clearFields(),this.loading=!1}):this.externalTicketingservice.updateExternalticketDetails(t).subscribe(e=>{this.externalTicketData=e,this.getExternalticketDetails(),this.loading=!1,this.showSuccessAlert("Updated Successfully"),this.isButtonDisabled=!0,this.externalTicketData.form.markAsDirty(),this.externalTicketData.form.markAsPristine(),this.externalTicketData.form.markAsUnTouched()},e=>{404===e.status&&this.clearFields(),this.loading=!1})}deleteticketDetails(e){this.loading=!0,this.externalTicketingservice.deleteExternalticketDetails(this.orgId).subscribe(e=>{this.externalTicketData={},this.TempexternalTicketData={},this.extUserPassword="",this.test=void 0,this.loading=!1,this.showDeleteAlert("Deleted Successfully")},e=>{this.loading=!1}),this.getExternalticketDetails()}closeAlert(){s(".alert").hide()}passwordedit(){this.passwordHide=!this.passwordHide}testConnection(e){let t="";this.etsbaseUrl=e.value.url.split("/")[2],t=`${e.value.url.split("/")[0]}//${this.etsbaseUrl}/services/secured/trouble-ticket-priorities`,e.value.url.includes("www.")&&(this.etsbaseUrl=e.value.url.split("/")[0],t=`${e.value.url.split("/")[0]}/services/secured/trouble-ticket-priorities`),this.loading=!0;const i={orgId:parseInt(this.orgId),companyNumber:e.value.companyNumber,url:t,username:e.value.username,password:this.extUserPassword,name:e.value.name};this.externalTicketingservice.testUrlExternalticketDetails(i).subscribe(e=>{this.UrlTestConnection=e,this.showSuccessAlert(" Connection Successful"),this.isButtonDisabled=!1,this.loading=!1},e=>{this.loading=!1,e.status&&this.showDeleteAlert(500===e.status?" NISC URL is not valid":401===e.status?" Username or Password is invalid":403===e.status?" Credentials are correct but permissions are missing ":" NISC URL is not valid")})}changeButtonDisabled(){this.isButtonDisabled=!0}clearFields(){this.externalTicketData.username="",this.extUserPassword="",this.externalTicketData.companyNumber="",this.externalTicketData.url=""}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(g.s),r.Y36(c.t6),r.Y36(d),r.Y36(u.v),r.Y36(h.F0),r.Y36(p.Dx))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-external-ticketing-system"]],features:[r._Bn([d])],decls:73,vars:31,consts:[[1,"container","position-relative"],[1,"alert","alert-success","alert-dismissible"],[1,"success-img"],["src","../../../../../assets/img/success-icon.svg"],["type","button","id","success-msg",1,"close",3,"click"],[1,"d-inline-flex"],[1,"alert","alert-error","alert-dismissible","py-0"],[1,"warning-msg","pt-2","pb-1","m-0"],[1,"error-img"],["src","./assets/img/ic_warning-36px.svg"],[1,"msg-details"],[2,"font-weight","bold"],[3,"innerHtml"],["id","inprpwarn-ok",1,"btn-default","px-3","ok-btn","float-right",3,"click"],["class","loader",4,"ngIf"],[1,"row"],[1,"col-md-5","my-3"],["id","externalTicketForm","novalidate","",1,"form-group","ccl-form",3,"ngSubmit"],["f","ngForm"],[1,"ccl-form","mb-3"],["for","Ticketing-System-URL"],[1,"error"],["id","url","name","url","type","text","required","","aria-describedby","","placeholder","","trimSpace","",1,"form-control",3,"ngModel","pattern","formValue","ngModelChange","change"],["url","ngModel"],["type","button",1,"btn-default","primary","px-3","position-right",3,"click"],["class","errorMessage",4,"ngIf"],["for","user-name"],["id","username","name","username","type","text","aria-describedby","","placeholder","","required","","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange","change"],["username","ngModel"],[1,"ccl-form","mb-3",2,"position","relative"],["for","Password"],["id","password","name","password","type","text","aria-describedby","","placeholder","","required","",1,"form-control",3,"ngModel","type","ngModelChange","change"],[1,"",3,"ngClass","click"],["for","Ticketing_Service_Provider"],["bindLabel","name","bindValue","id","name","name","required","",3,"items","ngModel","ngModelChange"],["for","companyNumber"],["id","companyNumber","name","companyNumber","type","text","aria-describedby","","required","","placeholder","","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange","change"],["companyNumber","ngModel"],[1,"mt-3"],["type","submit",1,"btn-default","primary","px-3","mr-3",3,"disabled"],["type","button","id","cancel-btn",1,"btn-default","btn-dft","mr-3",3,"click"],["type","button","id","delete-btn",1,"btn-default","primary","px-3",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"errorMessage"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"section"),r.TgZ(1,"div",0),r.TgZ(2,"div"),r.TgZ(3,"h4"),r._uU(4),r.qZA(),r.qZA(),r.TgZ(5,"div",1),r.TgZ(6,"span",2),r._UZ(7,"img",3),r.qZA(),r.TgZ(8,"button",4),r.NdJ("click",function(){return t.closeAlert()}),r._UZ(9,"span"),r.qZA(),r.TgZ(10,"div",5),r.TgZ(11,"strong"),r._uU(12),r.ALo(13,"titlecase"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"div",6),r.TgZ(15,"div",7),r.TgZ(16,"span",8),r._UZ(17,"img",9),r.qZA(),r.TgZ(18,"span",10),r.TgZ(19,"span",11),r._uU(20),r.qZA(),r._UZ(21,"span",12),r.qZA(),r.TgZ(22,"button",13),r.NdJ("click",function(){return t.closeAlert()}),r._uU(23),r.qZA(),r.qZA(),r.qZA(),r.YNc(24,A,5,1,"div",14),r.TgZ(25,"div",15),r.TgZ(26,"div",16),r.TgZ(27,"form",17,18),r.NdJ("ngSubmit",function(){r.CHM(e);const i=r.MAs(28);return i.form.valid&&t.externalTicketFormUpdate(i)}),r.TgZ(29,"div",19),r.TgZ(30,"label",20),r._uU(31),r.TgZ(32,"span",21),r._uU(33,"*"),r.qZA(),r.qZA(),r.TgZ(34,"input",22,23),r.NdJ("ngModelChange",function(e){return t.externalTicketData.url=e})("change",function(){return t.changeButtonDisabled()}),r.qZA(),r.TgZ(36,"button",24),r.NdJ("click",function(){r.CHM(e);const i=r.MAs(28);return t.testConnection(i)}),r._uU(37),r.qZA(),r.YNc(38,x,2,1,"div",25),r.qZA(),r.TgZ(39,"div",19),r.TgZ(40,"label",26),r._uU(41),r.TgZ(42,"span",21),r._uU(43,"*"),r.qZA(),r.qZA(),r.TgZ(44,"input",27,28),r.NdJ("ngModelChange",function(e){return t.externalTicketData.username=e})("change",function(){return t.changeButtonDisabled()}),r.qZA(),r.qZA(),r.TgZ(46,"div",29),r.TgZ(47,"label",30),r._uU(48),r.TgZ(49,"span",21),r._uU(50,"*"),r.qZA(),r.qZA(),r.TgZ(51,"input",31),r.NdJ("ngModelChange",function(e){return t.extUserPassword=e})("change",function(){return t.changeButtonDisabled()}),r.qZA(),r.TgZ(52,"span",32),r.NdJ("click",function(){return t.passwordedit()}),r.qZA(),r.qZA(),r.TgZ(53,"div",19),r.TgZ(54,"label",33),r._uU(55),r.TgZ(56,"span",21),r._uU(57,"*"),r.qZA(),r.qZA(),r.TgZ(58,"ng-select",34),r.NdJ("ngModelChange",function(e){return t.exteranalTicketDefualtValue=e}),r.qZA(),r.qZA(),r.TgZ(59,"div",19),r.TgZ(60,"label",35),r._uU(61),r.TgZ(62,"span",21),r._uU(63,"*"),r.qZA(),r.qZA(),r.TgZ(64,"input",36,37),r.NdJ("ngModelChange",function(e){return t.externalTicketData.companyNumber=e})("change",function(){return t.changeButtonDisabled()}),r.qZA(),r.qZA(),r.TgZ(66,"div",38),r.TgZ(67,"button",39),r._uU(68),r.qZA(),r.TgZ(69,"button",40),r.NdJ("click",function(){r.CHM(e);const i=r.MAs(28);return t.cancelExternalticketDetails(i)}),r._uU(70),r.qZA(),r.TgZ(71,"button",41),r.NdJ("click",function(){r.CHM(e);const i=r.MAs(28);return t.deleteticketDetails(i)}),r._uU(72),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.MAs(35);r.xp6(4),r.Oqu(t.language.External_ticket_System),r.xp6(8),r.Oqu(r.lcZ(13,29,t.successMsg)),r.xp6(8),r.hij("",t.language.Warning,"! "),r.xp6(1),r.Q6J("innerHtml",t.language[t.errorMsg]||t.errorMsg,r.oJD),r.xp6(2),r.hij(" ",t.language.Ok," "),r.xp6(1),r.Q6J("ngIf",t.loading),r.xp6(7),r.Oqu(t.language["Ticketing System URL"]),r.xp6(3),r.Q6J("ngModel",t.externalTicketData.url)("pattern",t.patternvalidation)("formValue",t.externalTicketData),r.xp6(3),r.Oqu(t.language.Test_Connection),r.xp6(1),r.Q6J("ngIf",e.touched&&e.invalid),r.xp6(3),r.Oqu(t.language.User_Name),r.xp6(3),r.Q6J("ngModel",t.externalTicketData.username)("formValue",t.externalTicketData),r.xp6(4),r.hij("",t.language.Password," "),r.xp6(3),r.Q6J("ngModel",t.extUserPassword)("type",t.passwordHide?"text":"password"),r.xp6(1),r.Q6J("ngClass",t.passwordHide?"password_view":"password_hide"),r.xp6(3),r.Oqu(t.language["Ticketing Service Provider"]),r.xp6(3),r.Q6J("items",t.Frame)("ngModel",t.exteranalTicketDefualtValue),r.xp6(3),r.Oqu(t.language["Company Number"]),r.xp6(3),r.Q6J("ngModel",t.externalTicketData.companyNumber)("formValue",t.externalTicketData),r.xp6(3),r.Q6J("disabled",t.isButtonDisabled),r.xp6(1),r.Oqu(t.language.submit),r.xp6(2),r.Oqu(t.language.cancel),r.xp6(2),r.Oqu(t.language.Delete)}},directives:[m.O5,f._Y,f.JL,f.F,f.Fj,f.Q7,Z.f,f.JJ,f.On,f.c5,m.mk,b.w9],pipes:[m.rS],styles:["div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border-radius:26px!important;background:#f8f8fa!important;border:1px solid #dfdfdf!important}span.togg-icon[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:10px;top:38px}.overflow-ellipsis[_ngcontent-%COMP%]{max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     table.dataTable td.dataTables_empty{display:none}.no-data-available[_ngcontent-%COMP%]{text-align:center}.alert.alert-success[_ngcontent-%COMP%]{display:none}.alert.alert-error[_ngcontent-%COMP%]{display:none}.dail-plan-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#4c4c4c;padding:0 10px 0 0;border-top:0!important;border-bottom:1px solid transparent;line-height:38px;word-break:break-all}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:35%!important}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:40px 32px!important}.position-right[_ngcontent-%COMP%]{position:absolute;right:-155px;top:33px}"]}),e})()},10584:function(e,t,i){i.d(t,{I:function(){return G}});var s=i(23771),n=i(79765),a=i(25917),o=i(9112),r=i(35758),l=i(92340),c=i(88002),d=i(5304),g=i(37716),u=i(404),h=i(49342),p=i(39895),m=i(30900),f=i(91395),Z=i(38048),b=i(12664),A=i(39075),v=i(91841),x=i(63859),T=i(38583),_=i(86640),C=i(3679);const q=["deleteModal"];function w(e,t){if(1&e&&(g.TgZ(0,"div",29),g.TgZ(1,"div",30),g.TgZ(2,"div",31),g.TgZ(3,"span",32),g._uU(4),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(4),g.Oqu(e.language.Loading)}}function O(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",33),g.TgZ(1,"span",34),g._UZ(2,"img",35),g.qZA(),g.TgZ(3,"button",36),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeAlert()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",37),g.qZA()}if(2&e){const e=g.oxw();g.xp6(5),g.Q6J("innerHtml",e.errorInfo,g.oJD)}}function S(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",38),g.TgZ(1,"button",36),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeAlert()}),g._UZ(2,"span"),g.qZA(),g._UZ(3,"div",39),g.qZA()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("innerHtml",e.successInfo,g.oJD)}}function y(e,t){if(1&e&&(g.TgZ(0,"em",51),g._uU(1),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Oqu(e.language["This field is required"])}}function M(e,t){if(1&e&&(g.TgZ(0,"span",52),g._uU(1),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.hij("",e.language["Please enter the same value again"],".")}}const k=function(e){return[e]};function U(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"form"),g.TgZ(1,"div",40),g.TgZ(2,"div",41),g.TgZ(3,"div",42),g.TgZ(4,"label",43),g._uU(5),g.qZA(),g.TgZ(6,"input",44),g.NdJ("ngModelChange",function(t){return g.CHM(e),g.oxw().editUserPassword=t})("keyup",function(){return g.CHM(e),g.oxw().changePassword()}),g.qZA(),g.YNc(7,y,2,1,"em",45),g.qZA(),g.qZA(),g.TgZ(8,"div",46),g.TgZ(9,"div",47),g.TgZ(10,"label",48),g._uU(11),g.qZA(),g.TgZ(12,"input",49),g.NdJ("ngModelChange",function(t){return g.CHM(e),g.oxw().editUserCPassword=t})("keyup",function(){return g.CHM(e),g.oxw().changeConfirmPassword()}),g.qZA(),g.YNc(13,M,2,1,"span",50),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("ngClass",g.VKq(10,k,e.passwordError?"ccl-error":"")),g.xp6(2),g.Oqu(e.language.password),g.xp6(1),g.s9C("placeholder",e.language["Enter new password"]),g.Q6J("ngModel",e.editUserPassword),g.xp6(1),g.Q6J("ngIf",!e.editUserPassword&&e.cpasswordError),g.xp6(2),g.Q6J("ngClass",g.VKq(12,k,e.cpasswordError?"ccl-error":"")),g.xp6(2),g.Oqu(e.language.confirmPassword),g.xp6(1),g.s9C("placeholder",e.language["Re-enter to confirm"]),g.Q6J("ngModel",e.editUserCPassword),g.xp6(1),g.Q6J("ngIf",e.cpasswordError)}}function D(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",53),g.TgZ(1,"button",36),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeAlertRole()}),g._uU(2,"\xd7"),g.qZA(),g._UZ(3,"div",39),g.qZA()}if(2&e){const e=g.oxw();g.xp6(3),g.Q6J("innerHtml",e.existingRoleErrorInfo,g.oJD)}}function N(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"tr",54),g.TgZ(1,"td",55),g._uU(2),g.qZA(),g.TgZ(3,"td",56),g.TgZ(4,"i",57),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().deleteRole(t)}),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit,i=g.oxw();g.s9C("id",e._id),g.xp6(2),g.Oqu(e.name),g.xp6(2),g.s9C("title",i.language.delete)}}function I(e,t){if(1&e&&(g.TgZ(0,"div",58),g.TgZ(1,"div",59),g._uU(2),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(2),g.hij(" ",e.language.permissions," ")}}function E(e,t){if(1&e&&(g.TgZ(0,"div"),g.TgZ(1,"div",4),g.TgZ(2,"div",65),g.TgZ(3,"div",71),g.TgZ(4,"div"),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",67),g._uU(7),g.qZA(),g.qZA(),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(10);g.xp6(5),g.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),g.xp6(2),g.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," ")}}function F(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,E,8,2,"div",68),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("ngForOf",e.permissions3)}}function P(e,t){if(1&e&&(g.TgZ(0,"div"),g.TgZ(1,"div",4),g.TgZ(2,"div",65),g.TgZ(3,"div",70),g.TgZ(4,"div"),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",67),g._uU(7),g.qZA(),g.qZA(),g.YNc(8,F,2,1,"div",12),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(8);g.xp6(5),g.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),g.xp6(2),g.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," "),g.xp6(1),g.Q6J("ngIf",e.permissions3.length)}}function L(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,P,9,3,"div",68),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("ngForOf",e.permissions2)}}function J(e,t){if(1&e&&(g.TgZ(0,"div"),g.TgZ(1,"div",4),g.TgZ(2,"div",65),g.TgZ(3,"div",69),g.TgZ(4,"div"),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",67),g._uU(7),g.qZA(),g.qZA(),g.YNc(8,L,2,1,"div",12),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(6);g.xp6(5),g.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),g.xp6(2),g.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," "),g.xp6(1),g.Q6J("ngIf",e.permissions2.length)}}function R(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,J,9,3,"div",68),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.Q6J("ngForOf",e.permissions)}}function H(e,t){if(1&e&&(g.TgZ(0,"div",24),g.TgZ(1,"div",64),g.TgZ(2,"div",65),g.TgZ(3,"div",66),g.TgZ(4,"div"),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",67),g._uU(7),g.qZA(),g.qZA(),g.YNc(8,R,2,1,"div",12),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(4);g.xp6(5),g.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),g.xp6(2),g.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," "),g.xp6(1),g.Q6J("ngIf",e.permissions.length)}}function Y(e,t){if(1&e&&(g.TgZ(0,"div",60),g.TgZ(1,"div",61),g.TgZ(2,"form",62),g.YNc(3,H,9,3,"div",63),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.oxw(3);g.xp6(3),g.Q6J("ngForOf",e.rolePermissions)}}function Q(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,Y,4,1,"div",27),g.qZA()),2&e){const e=g.oxw(2);g.xp6(1),g.Q6J("ngIf",e.rolePermissions.length)}}function z(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,Q,2,1,"div",12),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",e.permissionAvailableDeploy)}}function B(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",60),g.TgZ(1,"div",72),g.TgZ(2,"button",73),g.NdJ("click",function(){return g.CHM(e),g.oxw().updateUserRoles()}),g._uU(3),g.qZA(),g.TgZ(4,"button",74),g.NdJ("click",function(){return g.CHM(e),g.oxw().cancelUpdate()}),g._uU(5),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(3),g.Oqu(e.language.saveEnregistrer),g.xp6(2),g.Oqu(e.language.Cancel)}}function j(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",75),g.TgZ(1,"h4",76),g._uU(2),g.qZA(),g.TgZ(3,"button",77),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeModal()}),g._UZ(4,"span",78),g.qZA(),g.qZA(),g.TgZ(5,"div",79),g._uU(6),g.qZA(),g.TgZ(7,"div",80),g.TgZ(8,"button",81),g.NdJ("click",function(){return g.CHM(e),g.oxw().confirmDeleteSecleted()}),g._uU(9),g.qZA(),g.TgZ(10,"button",82),g.NdJ("click",function(){return g.CHM(e),g.oxw().closeModal()}),g._uU(11),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(2),g.Oqu(e.modalTitle),g.xp6(4),g.AsE(" ",e.language["Are you sure you want to delete this role"]," ? (",e.modalInfo,") "),g.xp6(3),g.Oqu(e.language.yes),g.xp6(2),g.Oqu(e.language.no)}}const V=function(){return{standalone:!0}};let G=(()=>{class e{constructor(e,t,i,s,a,o,r,l,c,d){this.commonFunctionsService=e,this.commonOrgService=t,this.router=i,this.customTranslateService=s,this.apiService=a,this.sso=o,this.dialogService=r,this.titleService=l,this.http=c,this.addRoleService=d,this.pageAvailable=!1,this.createSubnets=[],this.tableOptions={rowId:"_id",pageLength:10,processing:!0,ordering:!1,searching:!1,paging:!1,info:!1,language:{emptyTable:"No role available for current user."},rowCallback:(e,t,i)=>{const s=this;return $("td",e).unbind("click"),$("td",e).bind("click",()=>{s.displaySelectedRolePerms(t._id)}),e},drawCallback:e=>{$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),this.highlightRowCallback()}},this.roles=[],this.rolesSelected=[],this.rolesTableData=[],this.rolesTableOptions={},this.dtTrigger=new n.xQ,this.isRerender=!1,this.rolesList=[],this.addedRolesList=[],this.countOfRolesAtStart=0,this.rolePermissions=[],this.usersSubnets=[],this.isLocalUser=!1,this.userTitle="",this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.saveCancelShow=!1,this.isPasswordChanged=!1,this.isSubnetChanged=!1,this.isRoleChanged=!1,this.oldRolesList=[],this.loading=!0,this.addedRolesName=[],this.addedRolesNameAtStart=[],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.permissionAvailable=!1,this.permissionAvailableDeploy=!0,this.existingRoles=[];let g=this.router.url;this.ORG_ID=this.sso.getOrganizationID(g),this.MODULE=this.sso.getRedirectModule(g),this.titleService.setTitle(`Users detail - ${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - Calix Cloud`),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.dataAvailable=!1,this.isRerender=!0,this.renderRolesTable("language")}),this.commonOrgService.currentPageAdder("usersDetail"),this.user=JSON.parse(sessionStorage.getItem("calixAdminUserDetail")||"{}"),this.frTable=this.customTranslateService.fr,this.isLocalUser=this.checkUserType(this.user),this.getData()}ngOnInit(){this.setUserInfo(),this.saveCancelShow=!1}ngOnDestroy(){var e;null===(e=this.userRolesUpdateSub)||void 0===e||e.unsubscribe(),this.dtTrigger&&this.dtTrigger.unsubscribe(),this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.parallelReqSubscribtionUpdate&&this.parallelReqSubscribtionUpdate.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.passSubs&&this.passSubs.unsubscribe(),localStorage.getItem("calix.federated_grantee_orgId")&&localStorage.removeItem("calix.federated_grantee_orgId")}getData(){const e=[`${l.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/roles`,`${l.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${localStorage.getItem("calix.federated_grantee_orgId")}/users/${this.user._id}/roles`],t=[];e.forEach(e=>{const i=this.apiService.callRestApi(e).pipe((0,c.U)(e=>e),(0,d.K)(e=>(0,a.of)(e)));t.push(i)}),this.combineLatest=(0,o.aj)(t),this.makeParallelRequest()}makeParallelRequest(){this.parallelReqSubscribtion=this.combineLatest.subscribe(e=>{this.rolesList=e[0];let t=e[1]?e[1]:[];this.oldRolesList=t,this.addedRolesList=t;let i=[];if(null==t||t.forEach(e=>{i.push(e._id)}),this.existingRoles=i,this.countOfRolesAtStart=this.addedRolesList?this.addedRolesList.length:0,this.addedRolesName=this.addedRolesList?this.getRoleNames(this.addedRolesList):[],this.addedRolesNameAtStart=this.addedRolesList?this.getRoleNames(this.addedRolesList):[],null!=e[0]&&null!=e[0].error){if(this.loading=!1,404!=e[0].status)return this.pageErrorHandle(e[0]),void this.commonOrgService.pageScrollTop()}else if(null!=e[1]&&null!=e[1].error&&(this.loading=!1,404!=e[1].status))return this.pageErrorHandle(e[1]),void this.commonOrgService.pageScrollTop();setTimeout(()=>{this.renderRolesTable(),this.addedRolesList.length&&(this.permissionProcess(this.addedRolesList[0]),this.highlightRow(this.addedRolesList[0]._id)),this.countOfRolesAtStart=this.addedRolesList?this.addedRolesList.length:0,this.rolesAvail=!0,this.checkSelected(),setTimeout(()=>{this.loading=!1},1e3)},100)})}checkUserType(e){return!(!e||"local"!=e.idpType)}changePassword(){this.passwordError=!1,this.passwordError=""==this.editUserPassword,this.editUserPassword==this.editUserCPassword?(this.passwordError=!1,this.cpasswordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}changeConfirmPassword(){this.editUserPassword==this.editUserCPassword?(this.cpasswordError=!1,this.passwordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}addRole(){this.existingRoleError=!1;let e,t=[];this.selectedRoles.forEach(i=>{if(this.addedRolesList.filter(e=>e._id===i._id).length>0)return this.existingRoleErrorInfo=`${i.username} - ${this.language["Role already added"]}`,void(this.existingRoleError=!0);e=this.rolesList.findIndex(e=>e._id===i._id),this.rolesList[e].disabled=!0,this.rolesList=[...this.rolesList],t.push(i)}),!this.existingRoleError&&(this.selectedRoles=[],setTimeout(()=>{let e=[...this.addedRolesList,...t];this.addedRolesList=e,this.addedRolesName=this.getRoleNames(e);let i=this.addedRolesList.length-1;this.permissionProcess(this.addedRolesList[i]),this.highlightRow(this.addedRolesList[i]._id),this.isRerender=!0,this.rerender(),this.checkRoleChanged()},200))}deleteRole(e){this.deleteData=e,this.modalTitle=this.language["Delete Role"],this.modalInfo=`${e.name}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal)}confirmDeleteSecleted(){let e,t=this.deleteData;this.addedRolesList=this.addedRolesList.filter(e=>e._id!==t._id),e=this.rolesList.findIndex(e=>e._id===t._id),this.rolesList[e].disabled=!1,this.rolesList=[...this.rolesList],this.closeModal(),this.deleteData=void 0,this.isRerender=!0,this.rerender(),0==this.addedRolesList.length?this.rolePermissions=[]:(this.permissionProcess(this.addedRolesList[this.addedRolesList.length-1]),this.highlightRow(this.addedRolesList[this.addedRolesList.length-1]._id)),this.addedRolesName=this.getRoleNames(this.addedRolesList),this.checkRoleChanged()}renderRolesTable(e){this.setTableOptions(),e&&"language"==e?(setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()},150),this.dataAvailable=!0):setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.dataAvailable=!0},150)}setTableOptions(){this.tableLanguageOptions()}changeDataForTable(){let e=[];for(let t of this.roles)this.rolesSelected.includes(t.value)&&e.push(t);return e}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}updateUsersDetails(){const e=[];if(this.loading=!0,this.addedRolesList.length){let t,i=[];this.addedRolesList.forEach(e=>{i.push(e._id)}),t=i.join(",");let s=`${l.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${localStorage.getItem("calix.federated_grantee_orgId")}/users/${this.user._id}/role/${t}`;const n=this.apiService.updateRolesListByGranteeUserId(s).pipe((0,c.U)(e=>e),(0,d.K)(e=>(0,a.of)(e)));e.push(n)}else if(this.countOfRolesAtStart){let t=`${l.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${localStorage.getItem("calix.federated_grantee_orgId")}/users/${this.user._id}/roles`;const i=this.apiService.deleteRolesListByGranteeUserId(t).pipe((0,c.U)(e=>e),(0,d.K)(e=>(0,a.of)(e)));e.push(i)}this.combineLatestUpdate=(0,o.aj)(e),this.makeParallelUpdateRequests()}makeParallelUpdateRequests(){this.parallelReqSubscribtionUpdate=this.combineLatestUpdate.subscribe(e=>{if(this.loading=!1,e.length)for(let t of e)if(null!=t&&null!=t.error)return this.loading=!1,void this.pageErrorHandle(t);this.successMessage()})}updateUserRoles(){var e,t,i,s;let n=[],o=[],c=[];null===(e=this.addedRolesList)||void 0===e||e.forEach(e=>{-1===this.existingRoles.indexOf(e._id)&&n.push(e._id),c.push(e._id)}),null===(t=this.existingRoles)||void 0===t||t.forEach(e=>{-1===c.indexOf(e)&&o.push(e)}),console.log("newRoles",n),console.log("deletedRoles",o);const g={};null==n||n.forEach(e=>{g[e]=this.http.post(`${l.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${localStorage.getItem("calix.federated_grantee_orgId")}/users/${this.user._id}/role/${e}`,{}).pipe((0,d.K)(e=>(e["api-error"]=!0,(0,a.of)(e))))}),null==o||o.forEach(e=>{g[e]=this.http.delete(`${l.N.API_BASE_URL}federated/${this.ORG_ID}/grantee/${localStorage.getItem("calix.federated_grantee_orgId")}/users/${this.user._id}/role/${e}`,{}).pipe((0,d.K)(e=>(e["api-error"]=!0,(0,a.of)(e))))}),(null===(i=Object.keys(g))||void 0===i?void 0:i.length)&&(null===(s=this.userRolesUpdateSub)||void 0===s||s.unsubscribe(),this.userRolesUpdateSub=(0,r.D)(g).subscribe(e=>{console.log(e);let t=[];if(e){let i=Object.keys(e);if(null==i||i.forEach(i=>{var s;(null===(s=e[i])||void 0===s?void 0:s["api-error"])&&t.push(this.commonOrgService.pageErrorHandle(e[i]))}),null==t?void 0:t.length)return this.error=!0,this.errorInfo=t.join("<br/>"),void console.log(t)}this.successMessage()},e=>{console.log(e)}))}cancelUpdate(){this.gotoAccountMgmt()}gotoAccountMgmt(){this.router.navigate([`${this.MODULE}/account-management`])}permissionProcess(e){null!=e?"118"==e.apptype||"119"==e.apptype||"102"==e.apptype?(this.rolePermissions=this.commonOrgService.permProcessForUserDetailV21(e),this.displayName(e.apptype),this.subParentName(e.apptype)):"200"==e.apptype?(this.rolePermissions=this.commonOrgService.permProcessForUserDetailDeployment(e),this.subParentNameDeployment(e.apptype)):(this.rolePermissions=this.commonOrgService.permProcessForUserDetail(e),this.displayName(e.apptype),this.subParentName(e.apptype)):this.rolePermissions=[]}displayName(e){let t,i=null;this.permissionAvailable=!1,this.addRoleService.AllPemissionsData(e).subscribe(e=>{t=e,this.rolePermissions.forEach((e,s)=>{t.forEach(t=>{e.scopeName===t.name&&(i=t,e.scopeDisplayName=i.displayName)}),this.rolePermissions.length-1==s&&(this.permissionAvailable=!0)})})}subParentName(e){this.permissionAvailable=!1;let t=[];this.addRoleService.AllPemissionsData(e).subscribe(e=>{t=e,t.forEach(e=>{this.rolePermissions.forEach((t,i)=>{t.permissions.forEach(t=>{t.scopeName===e.name&&(t.scopeDisplayName=e.displayName)}),this.rolePermissions.length-1==i&&(this.permissionAvailable=!0)})})})}subParentNameDeployment(e){this.permissionAvailable=!1,this.permissionAvailableDeploy=!1,this.rolePermissions.forEach((t,i)=>{let s=t;const n=t.scopeName.split(".");let a=n[0]+"."+n[1]+"."+n[2];this.addRoleService.AllPemissionsData(e).subscribe(e=>{e.forEach(e=>{a==e.name&&(s.scopeDisplayName=e.displayName),this.rolePermissions.length-1==i&&(this.permissionAvailableDeploy=!0,this.permissionAvailable=!0)})})})}setUserInfo(){let e=this.user;this.userTitle=null!=e.firstName&&""!==e.firstName?null!=e.lastName?`${e.firstName} ${e.lastName}`:`${e.firstName}`:(null==e?void 0:e.userName)?`${e.userName}`:`${e._id}`}closeAlertRole(){this.existingRoleError=!1}closeAlert(){this.error=!1,this.success=!1}checkRoleChanged(){this.isRoleChanged=!1,this.addedRolesName.length!==this.addedRolesNameAtStart.length?(this.isRoleChanged=!0,this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&this.addedRolesNameAtStart.length?(this.addedRolesName.forEach(e=>{if(!this.addedRolesNameAtStart.includes(e))return this.isRoleChanged=!0,void this.checkShowButtons()}),this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&!this.addedRolesNameAtStart.length&&(this.isRoleChanged=!1,this.checkShowButtons())}checkShowButtons(){this.saveCancelShow=!!(this.isPasswordChanged||this.isRoleChanged||this.isSubnetChanged)}hideSearch(){setTimeout(()=>{$("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),$("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},100)}displaySelectedRolePerms(e){if(e){let t=this.addedRolesList.filter(t=>t._id===e);t.length&&(this.selectedRoleId=t[0]._id,this.permissionProcess(t[0]),this.highlightRow(t[0]._id))}}successMessage(){this.closeAlert(),this.successInfo=this.language["User details saved successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.loading=!1,setTimeout(()=>{this.gotoAccountMgmt()},1500)}highlightRow(e){this.selectedRoleId=e,setTimeout(()=>{$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),$("#"+e).css("background-color","whitesmoke")},100)}highlightRowCallback(){this.selectedRoleId&&$("#"+this.selectedRoleId).css("background-color","whitesmoke")}checkSelected(){this.rolesList.forEach(e=>{let t=[];t=this.addedRolesList.filter(t=>e._id===t._id),t.length&&(e.disabled=!0)}),this.rolesList=[...this.rolesList]}tableLanguageOptions(){"fr"==this.language.fileLanguage?(this.tableOptions.language=this.frTable,this.tableOptions.language.emptyTable="Aucune r\xf4le disponible pour l'utilisateur actuel."):"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&(delete this.tableOptions.language,this.tableOptions.language={emptyTable:"No role available for current user."})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}updateAddedRolesName(e,t,i){if(i)this.addedRolesName=this.addedRolesName.filter(e=>e!==t);else{let t=[];e.forEach(e=>{t.push(e.name)}),this.addedRolesName=[...this.addedRolesName,...t]}}getRoleNames(e){let t=[];return e.forEach(e=>{t.push(e.name)}),t}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(u.i),g.Y36(h.v),g.Y36(p.F0),g.Y36(m.d),g.Y36(f.q),g.Y36(Z.t6),g.Y36(b.FF),g.Y36(A.Dx),g.Y36(v.eN),g.Y36(x.U))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-federated-user-detials"]],viewQuery:function(e,t){if(1&e&&(g.Gf(q,7),g.Gf(s.G,5)),2&e){let e;g.iGM(e=g.CRH())&&(t.deleteModal=e.first),g.iGM(e=g.CRH())&&(t.dtElement=e.first)}},decls:42,vars:25,consts:[[1,"container"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","px-1"],[1,"container","my-3","pr-0"],[4,"ngIf"],[1,"row","my-2","pl-0"],[1,"ccl-title","col-md-12","pl-0"],[1,"row","ccl-form"],[1,"col-md-4","pl-0"],["bindLabel","name","placeholder","",1,"w-100",3,"items","ngModel","multiple","ngModelOptions","searchable","disabled","ngModelChange"],[1,"col-md-2","pl-0"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"disabled","click"],[1,"row","my-4"],["class","w-100 alert alert-warning fade show",4,"ngIf"],[1,"col-md-12","px-0",3,"hidden"],["width","100%","datatable","",1,"table","row-border","hover",3,"dtOptions","dtTrigger"],[1,""],["class","user-details-row",3,"id",4,"ngFor","ngForOf"],["class","row my-2",4,"ngIf"],["class","row my-4 px-3",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,"row","my-3"],[1,"col-md-6","pl-0"],[1,"ccl-form","required",3,"ngClass"],["for","Password",1,"ccl-title"],["id","editUserPassword","name","editUserPassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","editUserPassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],["id","editUserPassword-error","class","invalid",4,"ngIf"],[1,"col-md-6","pr-0"],[1,"ccl-form",3,"ngClass"],["for","Confirm Password",1,"ccl-title"],["id","confirmpassword","name","confirmpassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","confirmpassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],["id","confirmpassword-error","class","state-error error",4,"ngIf"],["id","editUserPassword-error",1,"invalid"],["id","confirmpassword-error",1,"state-error","error"],[1,"w-100","alert","alert-warning","fade","show"],[1,"user-details-row",3,"id"],[1,"cursor-pointer"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","cursor-pointer","primary",3,"title","click"],[1,"row","my-2"],[1,"ccl-title","col-md-12"],[1,"row","my-4","px-3"],[1,"col-md-12","pr-0"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],[1,"row","row-bg-grey"],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"box-of-permission","col-md-4"],[4,"ngFor","ngForOf"],[1,"custom-flex","ml-3"],[1,"custom-flex","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-12","text-right","px-0"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,w,5,1,"div",1),g.YNc(2,O,6,1,"div",2),g.YNc(3,S,4,1,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"div",5),g.TgZ(6,"div",6),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"div",7),g.TgZ(9,"div",8),g.TgZ(10,"a",9),g.NdJ("click",function(){return t.gotoAccountMgmt()}),g._UZ(11,"i",10),g._uU(12," Back to Account Management"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div",11),g.YNc(14,U,14,14,"form",12),g.qZA(),g.TgZ(15,"div",11),g.TgZ(16,"div",13),g.TgZ(17,"div",14),g._uU(18),g.qZA(),g.qZA(),g.TgZ(19,"div",15),g.TgZ(20,"div",16),g.TgZ(21,"ng-select",17),g.NdJ("ngModelChange",function(e){return t.selectedRoles=e}),g.qZA(),g.qZA(),g.TgZ(22,"div",18),g.TgZ(23,"button",19),g.NdJ("click",function(){return t.addRole()}),g._uU(24),g.qZA(),g.qZA(),g.qZA(),g.TgZ(25,"div",20),g.YNc(26,D,4,1,"div",21),g.TgZ(27,"div",22),g.TgZ(28,"table",23),g.TgZ(29,"thead",24),g.TgZ(30,"tr"),g.TgZ(31,"th"),g._uU(32),g.qZA(),g.TgZ(33,"th"),g._uU(34),g.qZA(),g.qZA(),g.qZA(),g.TgZ(35,"tbody"),g.YNc(36,N,5,3,"tr",25),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(37,I,3,1,"div",26),g.YNc(38,z,2,1,"div",12),g.YNc(39,B,6,2,"div",27),g.qZA(),g.YNc(40,j,12,5,"ng-template",null,28,g.W1O)),2&e&&(g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(1),g.Q6J("ngIf",t.error),g.xp6(1),g.Q6J("ngIf",t.success),g.xp6(4),g.Oqu(t.userTitle),g.xp6(7),g.Q6J("ngIf",t.isLocalUser),g.xp6(4),g.hij(" ",t.language.addDeleteRoles," "),g.xp6(3),g.Q6J("items",t.rolesList)("ngModel",t.selectedRoles)("multiple",!0)("ngModelOptions",g.DdM(24,V))("searchable",!0)("disabled",!(null!=t.rolesList&&t.rolesList.length)),g.xp6(2),g.Q6J("disabled",!(null!=t.rolesList&&t.rolesList.length)),g.xp6(1),g.Oqu(t.language.add),g.xp6(2),g.Q6J("ngIf",t.existingRoleError),g.xp6(1),g.Q6J("hidden",!t.dataAvailable),g.xp6(1),g.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),g.xp6(4),g.Oqu(t.language.roles),g.xp6(2),g.Oqu(t.language.action),g.xp6(2),g.Q6J("ngForOf",t.addedRolesList),g.xp6(1),g.Q6J("ngIf",t.rolePermissions.length),g.xp6(1),g.Q6J("ngIf",t.permissionAvailable),g.xp6(1),g.Q6J("ngIf",t.saveCancelShow))},directives:[T.O5,_.w9,C.JJ,C.On,s.G,T.sg,C._Y,C.JL,C.F,T.mk,C.Fj,C.Q7,C.nD],styles:[".box-of-permission[_ngcontent-%COMP%]{padding:10px;border:.5px solid #ccc;vertical-align:middle}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.row-bg-grey[_ngcontent-%COMP%]{background-color:#d9dfe6}"]}),e})()},93702:function(e,t,i){i.d(t,{c:function(){return c}});var s=i(37716),n=i(7450),a=i(38048),o=i(38583);function r(e,t){if(1&e&&(s.TgZ(0,"a",9),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language.About_Calix_Cloud)}}function l(e,t){if(1&e&&(s.TgZ(0,"a",10),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language.About_Calix_Cloud)}}let c=(()=>{class e{constructor(e,t){this.translateService=e,this.sso=t}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.loginType=this.sso.getCscType()}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.s),s.Y36(a.t6))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-admin-footer"]],decls:14,vars:4,consts:[[1,"maximus"],[1,"ftr-row","flex"],[1,"logo"],[1,"ftr-rht","flex"],[1,"flex","ftr-link"],["target","_blank","id","terms-conditions","href","https://www.calix.com/pages/terms-of-use.html"],["target","_blank","id","about-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-eme-rn.htm",4,"ngIf"],["target","_blank","id","contact-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-dme-rn.htm",4,"ngIf"],["target","_blank","href","https://www.calix.com/about-calix/contact-us.html"],["target","_blank","id","about-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-eme-rn.htm"],["target","_blank","id","contact-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-dme-rn.htm"]],template:function(e,t){1&e&&(s.TgZ(0,"footer"),s.TgZ(1,"div",0),s.TgZ(2,"div",1),s._UZ(3,"div",2),s.TgZ(4,"div",3),s.TgZ(5,"div",4),s.TgZ(6,"a",5),s._uU(7),s.qZA(),s.YNc(8,r,2,1,"a",6),s.YNc(9,l,2,1,"a",7),s.TgZ(10,"a",8),s._uU(11),s.qZA(),s.TgZ(12,"p"),s._uU(13,"1.877.766.3500"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(7),s.Oqu(t.language.Terms_and_Conditions),s.xp6(1),s.Q6J("ngIf","DME"!=t.loginType),s.xp6(1),s.Q6J("ngIf","DME"==t.loginType),s.xp6(2),s.Oqu(t.language.Contact_Calix))},directives:[o.O5],styles:[".cc-footer[_ngcontent-%COMP%]{color:#4c4c4c;position:absolute;right:0;bottom:0;left:0;padding:1rem;text-align:center;border-top:1px solid #cccc}a[_ngcontent-%COMP%]:hover{text-decoration:none}"]}),e})()},99225:function(e,t,i){i.d(t,{y:function(){return c}});var s=i(37716),n=i(7450),a=i(49342),o=i(38583),r=i(39895);function l(e,t){if(1&e&&(s.TgZ(0,"div",3),s.TgZ(1,"ul",4),s.TgZ(2,"li",5),s.TgZ(3,"a",6),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language["System Delete Settings"])}}let c=(()=>{class e{constructor(e,t){this.translateService=e,this.commonOrgService=t,this.currentPage="block_page",this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.commonOrgService.currentPageData.subscribe(e=>{this.currentPage=e})}ngOnInit(){}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.s),s.Y36(a.v))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-foundation"]],decls:4,vars:1,consts:[["class","flow-config-tab container",4,"ngIf"],[1,"my-2"],[1,"container","my-3"],[1,"flow-config-tab","container"],[1,"nav"],[1,"nav-item"],["id","foundation-system-delete-settings","routerLink","./system_settings","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(s.YNc(0,l,5,1,"div",0),s._UZ(1,"div",1),s.TgZ(2,"div",2),s._UZ(3,"router-outlet"),s.qZA()),2&e&&s.Q6J("ngIf",t.pageAvailable)},directives:[o.O5,r.lC,r.yS,r.Od],styles:[""]}),e})()},93517:function(e,t,i){i.d(t,{G:function(){return l}});var s=i(37716),n=i(38048),a=i(39895),o=i(81100),r=i(83249);let l=(()=>{class e{constructor(e,t){this.sso=e,this.router=t}ngOnInit(){this.checkSysAdmin(),this.MODULE=this.sso.getRedirectModule(this.router.url)}checkSysAdmin(){let e=this.sso.getRoles();this.isSysAdmin=!!(null==e?void 0:e.includes("SysAdmin"))}navigateCurrentRoute(){let e=this.router.url,t=e.includes("/org-admins/all");this.isSysAdmin?t?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])}):this.router.navigate(["systemAdministration/organizations"]):t?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])}):this.router.navigate([`${this.MODULE}/users`])}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.t6),s.Y36(a.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-admin-header"]],decls:11,vars:0,consts:[[1,"row","my-3","px-0"],[1,"col-md-6"],[1,"logo"],["href","javascript:void(0)",3,"click"],["src","./assets/img/calix-Cloud-logo.svg"],[1,"col-md-6","pr-0"],[1,"d-flex","justify-content-end"],[1,"mx-3","pt-2"],[1,""]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"a",3),s.NdJ("click",function(){return t.navigateCurrentRoute()}),s._UZ(4,"img",4),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s.TgZ(7,"div",7),s._UZ(8,"app-grid"),s.qZA(),s.TgZ(9,"div",8),s._UZ(10,"app-dd-menu"),s.qZA(),s.qZA(),s.qZA(),s.qZA())},directives:[o.M,r.z],styles:[""]}),e})()},86355:function(e,t,i){i.d(t,{a:function(){return C}});var s=i(37716),n=i(39075),a=i(7450),o=i(12664),r=i(39895),l=i(38048),c=i(49342),d=i(82823),g=i(43721),u=i(38583),h=i(3679);const p=["suspendedSubscribersDuration"],m=["DontConvertSuspendedSubscribers"];function f(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",27),s.TgZ(1,"span",28),s._UZ(2,"img",29),s.qZA(),s.TgZ(3,"button",30),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",31),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}const Z=function(e){return{"cursor-pointer":e}};function b(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"a",32),s.NdJ("click",function(){return s.CHM(e),s.oxw().refresh()}),s._UZ(1,"img",33),s.qZA()}if(2&e){const e=s.oxw();s.s9C("title",e.language["Reset to default"]),s.Q6J("ngClass",s.VKq(2,Z,e.frombillingStatusEnabled))}}const A=function(e){return{disabled:e}};function v(e,t){if(1&e&&(s.TgZ(0,"a",34),s._UZ(1,"img",35),s.qZA()),2&e){const e=s.oxw();s.s9C("title",e.language["Reset to default"]),s.Q6J("ngClass",s.VKq(2,A,!e.frombillingStatusEnabled))}}function x(e,t){if(1&e&&(s.TgZ(0,"div",36),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",e.language["Please enter a value within the range 1 to 99"]," ")}}function T(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",37),s.TgZ(1,"div",38),s.TgZ(2,"button",39),s.NdJ("click",function(){return s.CHM(e).$implicit.dismiss("Cross click")}),s._UZ(3,"span"),s.qZA(),s.TgZ(4,"div",40),s.TgZ(5,"div",41),s._UZ(6,"img",42),s.qZA(),s.TgZ(7,"div",43),s.TgZ(8,"h3"),s._uU(9),s.qZA(),s.TgZ(10,"p",44),s._uU(11),s.qZA(),s.TgZ(12,"div",45),s.TgZ(13,"button",46),s.NdJ("click",function(){return s.CHM(e),s.oxw().saveDuration()}),s._uU(14),s.qZA(),s.TgZ(15,"button",47),s.NdJ("click",function(){return s.CHM(e).$implicit.dismiss("Cross click")}),s._uU(16),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(9),s.Oqu(e.language["Change Suspended Status Duration"]),s.xp6(2),s.hij(" ",e.language.suspend_status_duration_msg," "),s.xp6(3),s.hij(" ",e.language["Change Duration"]," "),s.xp6(2),s.hij(" ",e.language.Cancel," ")}}function _(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",37),s.TgZ(1,"div",38),s.TgZ(2,"button",39),s.NdJ("click",function(){return s.CHM(e).$implicit.dismiss("Cross click")}),s._UZ(3,"span"),s.qZA(),s.TgZ(4,"div",40),s.TgZ(5,"div",41),s._UZ(6,"img",42),s.qZA(),s.TgZ(7,"div",43),s.TgZ(8,"h3"),s._uU(9),s.qZA(),s.TgZ(10,"p",44),s._uU(11),s.qZA(),s.TgZ(12,"div",45),s.TgZ(13,"button",46),s.NdJ("click",function(){return s.CHM(e),s.oxw().saveDuration()}),s._uU(14),s.qZA(),s.TgZ(15,"button",47),s.NdJ("click",function(){return s.CHM(e).$implicit.dismiss("Cross click")}),s._uU(16),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(9),s.Oqu(e.language["Do Not Convert Suspended Subscribers"]),s.xp6(2),s.hij(" ",e.language["Suspended subscribers will remain in suspended status until changed through updated data."]," "),s.xp6(3),s.hij(" ",e.language.apply," "),s.xp6(2),s.hij(" ",e.language.Cancel," ")}}let C=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.titleService=e,this.translateService=t,this.modalService=i,this.router=s,this.ssoService=n,this.commonOrgService=a,this.zipcodeService=o,this.validatorService=r,this.undoIcon=!1,this.type="",this.errorShow=!1,this.billingStatusEnabled=!1,this.frombillingStatusEnabled=!1,this.checkEnable=!1,this.checkedSub=!1,this.checkeddonot=!1,this.errorcheck=!1,this.defaultValue=30,this.commonOrgService.currentPageAdder("marketing-cloud")}ngOnInit(){this.language=this.translateService.defualtLanguage,this.setPageTitle(),this.getZipcodeEntryList(),this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.setPageTitle(),this.getZipcodeEntryList()})}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}setPageTitle(){let e=this.router.url;e.includes("/organization-admin")?(console.log(e),this.titleService.setTitle(`${this.language.cmcName} - ${this.language.administration} - ${this.language["Calix Cloud"]}`)):this.titleService.setTitle(`${this.language.cmcName} - ${this.language["System Administration"]} - ${this.language["Calix Cloud"]}`)}refresh(){this.suspendedDuration=0==this.refreshDefault?this.defaultValue:this.refreshDefault,this.errorShow=!1}saveSubscriberStatus(){if(this.frombillingStatusEnabled){if(""==this.suspendedDuration||null==this.suspendedDuration)return void(this.errorShow=!0);this.errorShow=!1,this.openSaveModel()}else this.openSaveModel1()}openSaveModel1(){this.modalService.open(this.DontConvertSuspendedSubscribers,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"alert-warning-modal"})}openSaveModel(){this.modalService.open(this.suspendedSubscribersDuration,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"alert-warning-modal"})}getZipcodeEntryList(){this.zipcodeService.marketingCloudCheck().subscribe(e=>{e&&(this.billingStatusEnabled=e.billingStatusEnabled,this.refreshDefault=e.suspendedDuration,0!=e.suspendedDuration?(this.suspendedDuration=e.suspendedDuration,this.checkedSub=!0,this.checkeddonot=!1,this.type="on"):(this.suspendedDuration=0==this.refreshDefault?this.defaultValue:this.refreshDefault,this.checkeddonot=!0,this.checkedSub=!1,this.type="on"),this.frombillingStatusEnabled=0!=e.suspendedDuration,this.checkEnable=0!=e.suspendedDuration||0==e.suspendedDuration)},e=>{this.billingStatusEnabled=!1,e&&(this.errorcheck=!0,this.errorInfo=e.error.message)})}closeAlert(){this.errorcheck=!1}onChange(e,t){this.type=e.target.value,this.checkEnable=""!=this.type,this.errorShow=!1,this.frombillingStatusEnabled=1==t,1==t?(this.checkedSub=!0,this.checkeddonot=!1):(this.checkeddonot=!0,this.checkedSub=!1),this.suspendedDuration=0==this.refreshDefault?this.defaultValue:this.refreshDefault}saveDuration(){let e={billingStatusEnabled:!0,orgid:this.ssoService.getOrgId(),suspendedDuration:this.frombillingStatusEnabled?this.suspendedDuration:0};this.zipcodeService.marketingCloudCheckUpdate(e).subscribe(e=>{e&&(this.modalService.dismissAll(),this.getZipcodeEntryList())},e=>{})}campaignTargetChange(e){e?this.suspendedDuration=e:(this.suspendedDuration="",document.getElementById("campaign-target").value=""),this.errorShow=this.validatorService.durationValidator(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.Dx),s.Y36(a.s),s.Y36(o.FF),s.Y36(r.F0),s.Y36(l.t6),s.Y36(c.v),s.Y36(d.F),s.Y36(g.o))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-marketing-cloud"]],viewQuery:function(e,t){if(1&e&&(s.Gf(p,7),s.Gf(m,7)),2&e){let e;s.iGM(e=s.CRH())&&(t.suspendedSubscribersDuration=e.first),s.iGM(e=s.CRH())&&(t.DontConvertSuspendedSubscribers=e.first)}},decls:42,vars:17,consts:[[1,"container","position-relative","px-0"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"row"],[1,"col-12","mb-3"],[1,"ccl-admin-title"],[1,"col-12"],[1,"cco-secondary-title"],[1,"mb-2"],[1,"mb-0"],[1,"radio-check"],[1,"ccl-form"],[1,"d-flex","align-items-center"],[1,"pr-1"],["for","radioSuspendedStatusDuration1",1,"d-flex","align-items-center","mb-0","cursor-pointer"],["type","radio","id","radioSuspendedStatusDuration1","name","SuspendedStatusDuration",1,"mr-2",3,"checked","change"],["type","number","min","1","max","99","id","campaign-target",1,"max-width-75","mr-1",3,"ngModel","disabled","ngModelChange"],[1,"d-flex"],[1,"text-capitalize","pr-1"],[3,"ngClass","title","click",4,"ngIf"],[3,"ngClass","title",4,"ngIf"],["class","mandatory-msg",4,"ngIf"],["for","radioSuspendedStatusDuration2",1,"d-flex","align-items-center","mb-0","cursor-pointer"],["type","radio","id","radioSuspendedStatusDuration2","name","SuspendedStatusDuration",1,"mr-2",3,"checked","change"],[1,"mt-3"],["type","button",1,"btn-default","btn-primary",3,"disabled","click"],["suspendedSubscribersDuration",""],["DontConvertSuspendedSubscribers",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","mt-2",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[3,"ngClass","title","click"],["src","../../../assets/img/ic_undo.svg","width","22px","alt","icon here"],[3,"ngClass","title"],["src","../../../assets/img/ic_undo_disabled.svg","width","22px","alt","icon here",1,"opacity-75"],[1,"mandatory-msg"],[1,"modal-body"],[1,"w-100","alert-box"],["aria-label","Close",1,"close",3,"click"],[1,"box-content"],[1,"icon"],["src","../../../assets/img/ic_warning-36px.svg","alt","icon here"],[1,"content"],[1,"mb-3"],[1,"w-100","mt-3","pt-2"],["type","button","id","submitBtnChangeDuration",1,"btn-default","primary","mr-3",3,"click"],["type","button","id","cancelBtnChangeDuration","aria-label","Close",1,"btn-default","btn-dft",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,f,6,1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s._uU(5),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",2),s.TgZ(7,"div",5),s.TgZ(8,"h2",6),s._uU(9),s.qZA(),s.TgZ(10,"p",7),s._uU(11),s.qZA(),s.TgZ(12,"p",8),s._uU(13),s.qZA(),s.TgZ(14,"div",9),s.TgZ(15,"div",10),s.TgZ(16,"div",11),s.TgZ(17,"div",12),s.TgZ(18,"label",13),s.TgZ(19,"input",14),s.NdJ("change",function(e){return t.onChange(e,1)}),s.qZA(),s._uU(20),s.qZA(),s.qZA(),s.TgZ(21,"div",11),s.TgZ(22,"input",15),s.NdJ("ngModelChange",function(e){return t.suspendedDuration=e})("ngModelChange",function(e){return t.campaignTargetChange(e)}),s.qZA(),s.TgZ(23,"div",16),s.TgZ(24,"span",17),s._uU(25),s.qZA(),s.YNc(26,b,2,4,"a",18),s.YNc(27,v,2,4,"a",19),s.qZA(),s.qZA(),s.qZA(),s.YNc(28,x,2,1,"div",20),s.qZA(),s.TgZ(29,"div",10),s.TgZ(30,"div",11),s.TgZ(31,"div"),s.TgZ(32,"label",21),s.TgZ(33,"input",22),s.NdJ("change",function(e){return t.onChange(e,2)}),s.qZA(),s._uU(34),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(35,"div",23),s.TgZ(36,"button",24),s.NdJ("click",function(){return t.saveSubscriberStatus()}),s._uU(37),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(38,T,17,4,"ng-template",null,25,s.W1O),s.YNc(40,_,17,4,"ng-template",null,26,s.W1O),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.errorcheck),s.xp6(4),s.Oqu(t.language["Marketing Cloud Settings"]),s.xp6(4),s.Oqu(t.language["Subscriber Status"]),s.xp6(2),s.Oqu(t.language.CmcSubscriber_Status_Msg),s.xp6(2),s.Oqu(t.language["Suspended Status Duration"]),s.xp6(6),s.Q6J("checked",t.checkedSub),s.xp6(1),s.hij(" ",t.language["Suspended Status Duration"]," "),s.xp6(2),s.Q6J("ngModel",t.suspendedDuration)("disabled",!t.frombillingStatusEnabled||""==t.type),s.xp6(3),s.hij(" ",t.language.Days," "),s.xp6(1),s.Q6J("ngIf",t.frombillingStatusEnabled),s.xp6(1),s.Q6J("ngIf",!t.frombillingStatusEnabled),s.xp6(1),s.Q6J("ngIf",t.errorShow),s.xp6(5),s.Q6J("checked",t.checkeddonot),s.xp6(1),s.hij(" ",t.language["Do not convert suspended subscribers into churned subscribers"]," "),s.xp6(2),s.Q6J("disabled",!t.billingStatusEnabled||!t.checkEnable||t.errorShow),s.xp6(1),s.hij(" ",t.language.Save," "))},directives:[u.O5,h.qQ,h.Fd,h.wV,h.Fj,h.JJ,h.On,u.mk],styles:[".max-width-75[_ngcontent-%COMP%]{max-width:75px}.opacity-75[_ngcontent-%COMP%]{opacity:75%}  .alert-warning-modal .modal-content{background:#fff9f5}  .alert-warning-modal .modal-dialog{max-width:45.73%!important}.alert-box[_ngcontent-%COMP%]{position:relative;padding:30px 0 15px}.alert-box[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{right:0;top:0}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]{color:#1a1f22}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-right:30px;padding-left:80px}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:75px;float:left;text-align:center}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.alert-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4c4c4c;margin-bottom:0;font-size:16px;line-height:20px}.alert-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;line-height:30px;color:#1a1f22}.alert-box[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{cursor:not-allowed;pointer-events:none}.alert-box[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),e})()},67679:function(e,t,i){i.d(t,{F:function(){return _}});var s=i(37716),n=i(12664),a=i(86451),o=i(39895),r=i(7450),l=i(49342),c=i(38583),d=i(23771);function g(e,t){if(1&e&&(s.TgZ(0,"div",5),s.TgZ(1,"div",6),s.TgZ(2,"div",7),s.TgZ(3,"span",8),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function u(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",9),s.TgZ(1,"span",10),s._UZ(2,"img",11),s.qZA(),s.TgZ(3,"button",12),s.NdJ("click",function(){return s.CHM(e),s.oxw().errorInfo=""}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",13),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}function h(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",29),s.TgZ(1,"div",30),s._UZ(2,"img",31),s.qZA(),s.TgZ(3,"div",32),s.TgZ(4,"h5"),s._uU(5),s.qZA(),s._uU(6),s.TgZ(7,"p",33),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(2),i=s.MAs(5);return t.openErrorsFoundModal(i)}),s._uU(8),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(5),s.Oqu(e.language["Errors found in User Records CSV"]),s.xp6(1),s.hij(" ",e.language["Please correct the errors and re-upload the CSV file"]," "),s.xp6(2),s.lnq("",e.language.View," ",e.missingvalues.length+e.apiErrors.length," ",e.language.errors,"")}}function p(e,t){if(1&e&&(s.TgZ(0,"div",34),s.TgZ(1,"div",35),s._UZ(2,"img",36),s.qZA(),s.TgZ(3,"div",37),s._uU(4),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(4),s.lnq(" ",e.language["Adding users to the communities specified in the CSV"],"... ",e.getRoundedValue(e.savedSubscribersCount/e.userList.length*100),"% ",e.language.complete," ")}}function m(e,t){if(1&e&&(s.TgZ(0,"div",38),s.TgZ(1,"div",39),s._UZ(2,"img",40),s.qZA(),s.TgZ(3,"div",41),s._uU(4),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(4),s.hij(" ",e.language["Users successfully added to the communities specified in the CSV"],". ")}}function f(e,t){if(1&e&&(s.TgZ(0,"div",29),s.TgZ(1,"div",30),s._UZ(2,"img",31),s.qZA(),s.TgZ(3,"div",32),s._uU(4),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(4),s.hij(" ",e.language["The process for adding users to the communities has been stopped"],". ")}}function Z(e,t){if(1&e&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&e){const e=t.$implicit,i=t.index,n=s.oxw().$implicit;s.xp6(1),s.AsE("",e.communityName,"",n.community.length-1!==i?", ":"","")}}function b(e,t){if(1&e&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._UZ(2,"img",42),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s.YNc(10,Z,2,2,"span",28),s.qZA(),s.qZA()),2&e){const e=t.$implicit,i=t.index,n=s.oxw(2);s.xp6(2),s.MGl("src","../../../../assets/img/","success"==n.statusIconInfo[i]?"ic_test-success":"inprogress"==n.statusIconInfo[i]?"ic_progress-circle":"warning-icon",".svg",s.LSH),s.Q6J("hidden",n.errorFound(e,i)&&!n.statusIconInfo[i]||"stop"==n.submissionStatus&&i===n.savedSubscribersCount),s.xp6(2),s.Oqu(e.firstName),s.xp6(2),s.Oqu(e.lastName),s.xp6(2),s.Oqu(e.email),s.xp6(2),s.Q6J("ngForOf",e.community)}}function A(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"div",15),s.TgZ(2,"div",16),s.TgZ(3,"div",17),s.TgZ(4,"div",18),s._uU(5),s.qZA(),s.TgZ(6,"div",19),s.TgZ(7,"button",20),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(),i=s.MAs(7);return"in progress"==t.submissionStatus?t.openStopUserPopup(i):t.goBack()}),s._uU(8),s.qZA(),s.TgZ(9,"button",21),s.NdJ("click",function(){s.CHM(e);const t=s.oxw();return"success"==t.submissionStatus||"stop"==t.submissionStatus?t.goBack():t.saveUsers(!0)}),s._uU(10),s.qZA(),s.qZA(),s.qZA(),s.YNc(11,h,9,5,"div",22),s.YNc(12,p,5,3,"div",23),s.YNc(13,m,5,1,"div",24),s.YNc(14,f,5,1,"div",22),s.TgZ(15,"p"),s._uU(16),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"div",15),s.TgZ(18,"div",16),s.TgZ(19,"div",25),s.TgZ(20,"table",26),s.TgZ(21,"thead"),s.TgZ(22,"tr"),s._UZ(23,"th"),s.TgZ(24,"th"),s._uU(25),s.qZA(),s.TgZ(26,"th"),s._uU(27),s.qZA(),s.TgZ(28,"th",27),s._uU(29),s.qZA(),s.TgZ(30,"th"),s._uU(31),s.qZA(),s.qZA(),s.qZA(),s.TgZ(32,"tbody"),s.YNc(33,b,11,6,"tr",28),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.hij("",e.language["Confirm Users"]," "),s.xp6(2),s.Q6J("disabled","stop"==e.submissionStatus),s.xp6(1),s.hij("","in progress"==e.submissionStatus||"stop"==e.submissionStatus?e.language.Stop:e.language.Cancel," "),s.xp6(1),s.Q6J("disabled",!e.userList.length||"in progress"==e.submissionStatus||e.errorInAllLines),s.xp6(1),s.hij(" ","in progress"==e.submissionStatus?e.language["Adding Users"]+"...":"success"==e.submissionStatus||"stop"==e.submissionStatus?e.language.Done:e.language.Confirm," "),s.xp6(1),s.Q6J("ngIf",e.missingvalues.length),s.xp6(1),s.Q6J("ngIf","in progress"===e.submissionStatus),s.xp6(1),s.Q6J("ngIf","success"===e.submissionStatus),s.xp6(1),s.Q6J("ngIf","stop"===e.submissionStatus),s.xp6(2),s.hij(" ",e.language["Access will be granted and a welcome email will be sent to the following users"],": "),s.xp6(4),s.Q6J("dtOptions",e.dtOptions),s.xp6(5),s.Oqu(e.language["First Name"]),s.xp6(2),s.Oqu(e.language.Last_Name),s.xp6(2),s.Oqu(e.language.Email),s.xp6(2),s.Oqu(e.language.Bsp_Microsite_Name),s.xp6(2),s.Q6J("ngForOf",e.userList)}}function v(e,t){1&e&&s._UZ(0,"li",50),2&e&&s.Q6J("innerHTML",t.$implicit,s.oJD)}function x(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",43),s.TgZ(1,"div",44),s.TgZ(2,"h3",45),s._uU(3),s.qZA(),s.TgZ(4,"button",46),s.NdJ("click",function(){return s.CHM(e),s.oxw().close()}),s._UZ(5,"span",47),s.qZA(),s.qZA(),s.TgZ(6,"div",48),s.TgZ(7,"p"),s._uU(8),s.qZA(),s.TgZ(9,"ul"),s.YNc(10,v,1,1,"li",49),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(3),s.AsE("",e.missingvalues.length," ",e.language["errors found"],""),s.xp6(5),s.hij("",e.language["Correct the following errors and re-upload the CSV file"],":"),s.xp6(2),s.Q6J("ngForOf",e.missingvalues)}}function T(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",43),s.TgZ(1,"div",44),s.TgZ(2,"button",46),s.NdJ("click",function(){return s.CHM(e),s.oxw().close()}),s._UZ(3,"span",47),s.qZA(),s.qZA(),s.TgZ(4,"div",48),s.TgZ(5,"div",51),s.TgZ(6,"div",52),s._UZ(7,"img",53),s.qZA(),s.TgZ(8,"div",54),s.TgZ(9,"div",55),s._uU(10),s.qZA(),s.TgZ(11,"p"),s._uU(12),s.qZA(),s.TgZ(13,"div",19),s.TgZ(14,"button",56),s.NdJ("click",function(){s.CHM(e);const t=s.oxw();return t.submissionStatus="stop",t.close()}),s._uU(15),s.qZA(),s.TgZ(16,"button",57),s.NdJ("click",function(){return s.CHM(e),s.oxw().close()}),s._uU(17),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(10),s.hij("",e.language["Stop adding users"],"?"),s.xp6(2),s.hij("",e.language["Only users that have successfully been added will be granted access"],"."),s.xp6(3),s.hij(" ",e.language["Yes, stop adding users"]," "),s.xp6(2),s.hij("",e.language.Cancel," ")}}let _=(()=>{class e{constructor(e,t,i,s,n){this.dialogService=e,this.myCommunityIqService=t,this.router=i,this.translateService=s,this.commonOrgService=n,this._iDisplayStart=0,this.dtOptions={pagingType:"full_numbers",dom:"tipr",lengthChange:!1,pageLength:10,destroy:!0,processing:!0,columnDefs:[{orderable:!1,targets:[0,2,4]},{targets:[1,3],orderable:!0}],order:[1,"asc"],drawCallback:e=>{this._iDisplayStart=e._iDisplayStart,this.dataTableSetting=e,this.changeTableStatusLanguage(e),e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.userList=[],this.missingvalues=[],this.subscriptions=[],this.sortedColumnDetails=[],this.apiErrors=[],this.statusIconInfo=[],this.microSiteList=[],this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.de_DETable=this.translateService.de_DE,this.orgId=localStorage.getItem("calix.org_id")}ngOnInit(){this.language=this.translateService.defualtLanguage,this.subscriptions.push(this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.dtOptions.language=e,this.changeTableStatusLanguage({_iDisplayStart:this.tableCounts.start,_iDisplayLength:this.tableCounts.displayCount,_iRecordsDisplay:this.tableCounts.displayed,_iRecordsTotal:this.tableCounts.total,oPreviousSearch:{sSearch:this.tableCounts.searchText}})})),this.loader=!0,this.getMicroSites()}changeTableStatusLanguage(e){const t=new Intl.NumberFormat;this.tableCounts={searchText:"",total:e._iRecordsTotal=this.rowcn,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay=this.rowcn,start:e._iDisplayStart};const i="fr"==sessionStorage.getItem("defaultLanguage"),s="es"==sessionStorage.getItem("defaultLanguage"),n="de_DE"==sessionStorage.getItem("defaultLanguage"),a=e._iRecordsTotal>1e4&&e._iRecordsDisplay>0?i?`(filtr\xe9es \xe0 partir des  ${t.format(e._iRecordsTotal)} entr\xe9es totales)<br/>`:s?`(filtrado de un total de ${t.format(e._iRecordsTotal)} entradas)<br/>`:n?`(gefiltert aus  ${t.format(e._iRecordsTotal)} Eintr\xe4gen)<br/>`:`(filtered from  ${t.format(e._iRecordsTotal)} total entries)<br/>`:"",o=0==e._iRecordsDisplay?-1:e._iDisplayStart,r=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;$('div [role="status"]').html(i?`Affichage de ${t.format(o+1)} \xe0 ${t.format(r)} des  ${t.format(e._iRecordsDisplay)} entr\xe9es ${a}`:s?`Se muestran del ${t.format(o+1)} al ${t.format(r)} de  ${t.format(e._iRecordsDisplay)} resultados ${a}`:n?`Angezeigt ${t.format(o+1)} bis ${t.format(r)} von  ${t.format(e._iRecordsDisplay)} ergebnissen ${a}`:`Showing ${t.format(o+1)} to ${t.format(r)} of  ${t.format(e._iRecordsDisplay)} entries ${a}`),$(".first").text(i?"Le d\xe9but":s?"Primero":n?"Erste Seite":"First"),$(".previous").text(i?"Pr\xe9c\xe9dent":s?"Anterior":n?"Zur\xfcck":"Previous"),$(".next").text(i?"Suivant":s?"Siguiente":n?"Weiter":"Next"),$(".last").text(i?"Derni\xe8re":s?"\xdaltimo":n?"Letzte":"Last")}openErrorsFoundModal(e){this.findMissingValuesForErrorPopUp(this.userList),this.dialogService.open(e,{size:"xl",centered:!0,windowClass:"errors-found-modal"})}openStopUserPopup(e){this.dialogService.open(e,{size:"xl",centered:!0,windowClass:"stop-user-modal"})}findMissingValuesForErrorPopUp(e){this.missingvalues=[],e.forEach((e,t)=>{var i,s;e.firstName||(this.missingvalues.push(`<b>Row ${t+1}:</b> Empty value in \u201cFirst Name\u201d column`),this.statusIconInfo[t]="error"),e.lastName||(this.missingvalues.push(`<b>Row ${t+1}:</b> Empty value in \u201cLast Name\u201d column`),this.statusIconInfo[t]="error"),e.email||(this.missingvalues.push(`<b>Row ${t+1}:</b> Empty value in \u201cEmail\u201d column`),this.statusIconInfo[t]="error"),e.email&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(this.missingvalues.push(`<b>Row ${t+1}:</b> Invalid email syntax`),this.statusIconInfo[t]="error"),e.community.length>8&&this.missingvalues.push(`<b>Row ${t+1}:</b> Subcriber can only have upto 8 communities`),e.community=null===(i=e.community)||void 0===i?void 0:i.map(e=>{let i=this.microSiteList.find(t=>t.communityName==e.communityName);return i||(this.missingvalues.push(`<b>Row ${t+1}:</b> Community \u201c${e.communityName}\u201d is not available`),this.statusIconInfo[t]="error"),i?{micrositeId:i.id,communityName:e.communityName}:e}),(null===(s=e.community)||void 0===s?void 0:s.length)||(this.statusIconInfo[t]="error",this.missingvalues.push(`<b>Row ${t+1}:</b> Empty value in \u201cCommunity Name\u201d column`))}),this.missingvalues=this.missingvalues.concat(this.apiErrors).sort((e,t)=>Number(e.match(/\d+/)[0])-Number(t.match(/\d+/)[0])),this.apiErrors=[],this.errorInAllLines=e.every((e,t)=>!this.errorFound(e,t))}close(){this.dialogService.dismissAll("Cross Click")}errorFound(e,t){var i;return Object.values(e).filter(e=>Array.isArray(e)?e.length:e).length>3&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(null===(i=null==e?void 0:e.community)||void 0===i?void 0:i.every(e=>this.microSiteList.some(t=>t.communityName===e.communityName)))&&(null==e?void 0:e.community.length)<=8}saveUsers(e){if(e){let e=--this.sortedColumnDetails[0],t=0==e?"firstName":2==e?"email":"community",i=this.userList.map((e,t)=>({value:e,status:this.statusIconInfo[t]})).sort(({value:e},{value:i})=>"asc"===this.sortedColumnDetails[1]?e[t].toString().localeCompare(i[t]):i[t].toString().localeCompare(e[t]));this.userList=i.map(e=>e.value),this.statusIconInfo=i.map(e=>e.status),this.submissionStatus="in progress"}null==this.savedSubscribersCount&&(this.savedSubscribersCount=0,this.statusIconInfo[this.savedSubscribersCount]="inprogress");let t=JSON.parse(JSON.stringify(this.userList[this.savedSubscribersCount]));if(!this.errorFound(t))return this.statusIconInfo[this.savedSubscribersCount]="error",this.recursionSaveUsers();this.subscriptions.push(this.myCommunityIqService.saveUsers(t,this.orgId).subscribe(e=>{console.log(e),this.statusIconInfo[this.savedSubscribersCount]="success",this.recursionSaveUsers()},e=>{this.apiErrors.push(`<b>Row ${this.savedSubscribersCount+1}:</b> ${e.error.errorMessage}`),this.statusIconInfo[this.savedSubscribersCount]="error",this.recursionSaveUsers(),this.pageErrorHandle(e)}))}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e)}recursionSaveUsers(){this.userList.length-1===this.savedSubscribersCount&&(this.submissionStatus=this.statusIconInfo.some(e=>"success"===e)?"success":"stop",this.close()),this.savedSubscribersCount++,this.statusIconInfo[this.savedSubscribersCount]="inprogress","in progress"==this.submissionStatus&&this.saveUsers()}goBack(){this.router.navigate(["/organization-admin/SmartTownWi-Fi/community-users"])}getMicroSites(){this.subscriptions.push(this.myCommunityIqService.GetMicrosite().subscribe(e=>{this.microSiteList=e,this.GetCSVValue(),this.loader=!1},e=>{this.loader=!1,this.pageErrorHandle(e)}))}GetCSVValue(){this.subscriptions.push(this.myCommunityIqService.communityListSubject.subscribe(e=>{this.rowcn=e.length,console.log("length=",this.rowcn),this.statusIconInfo=Array.from({length:e.length},()=>""),this.userList=e,this.dtOptions.displayStart=this._iDisplayStart?this._iDisplayStart:0,this.dtOptions.drawCallback=e=>{this.sortedColumnDetails=e.aaSorting.flat(1),this._iDisplayStart=e._iDisplayStart,this.dataTableSetting=e,this.changeTableStatusLanguage(e),e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")},this.findMissingValuesForErrorPopUp(e)}))}ngOnDestroy(){var e;null===(e=this.subscriptions)||void 0===e||e.forEach(e=>null==e?void 0:e.unsubscribe())}getRoundedValue(e){return Math.round(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.FF),s.Y36(a.l),s.Y36(o.F0),s.Y36(r.s),s.Y36(l.v))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-confirm-users"]],decls:8,vars:3,consts:[["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","container",4,"ngIf"],["ErrorsFoundModal",""],["StopUserModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"confirm-user-title-info","d-flex","justify-content-between","align-items-end"],[1,"confirm-user-title"],[1,""],["type","button","data-toggle","modal","data-target",".bd-example-modal-lg",1,"btn-default","btn-dft","py-1","md-btn","ml-1","mr-3",3,"disabled","click"],["id","cancel-add-role",1,"btn-default","primary",3,"disabled","click"],["class","confirm-user-warning-info",4,"ngIf"],["class","confirm-user-progress-box",4,"ngIf"],["class","confirm-user-success-box",4,"ngIf"],[1,"confirm-user-list"],["datatable","",3,"dtOptions"],[1,"email-with","text-break"],[4,"ngFor","ngForOf"],[1,"confirm-user-warning-info"],[1,"warning-info-icon"],["src","../../../../assets/img/warning-icon.svg","alt",""],[1,"warning-info-content"],[1,"primary","pointer",3,"click"],[1,"confirm-user-progress-box"],[1,"progress-box-icon"],["src","../../../../assets/img/ic_progress-circle.svg","alt",""],[1,"progress-info-content"],[1,"confirm-user-success-box"],[1,"success-box-icon"],["src","../../../../assets/img/ic_success-circle-outline.svg","alt",""],[1,"success-info-content"],[3,"hidden","src"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","list-styled-bullet",3,"innerHTML",4,"ngFor","ngForOf"],[1,"list-styled-bullet",3,"innerHTML"],[1,"d-flex","w-100","align-items-start"],[1,"w-10","mr-2"],["src","../../../../assets/img/ic_warning-36px.svg","alt",""],[1,"w-90","ml-2"],[1,"stop-user-sub-title"],["id","",1,"btn-default","primary",3,"click"],["type","button",1,"btn-default","btn-dft","py-1","md-btn","ml-1","mr-3",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"section"),s.YNc(1,g,5,1,"div",0),s.YNc(2,u,6,1,"div",1),s.YNc(3,A,34,16,"div",2),s.qZA(),s.YNc(4,x,11,4,"ng-template",null,3,s.W1O),s.YNc(6,T,18,4,"ng-template",null,4,s.W1O)),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loader),s.xp6(1),s.Q6J("ngIf",t.errorInfo),s.xp6(1),s.Q6J("ngIf",!t.loader))},directives:[c.O5,d.G,c.sg],styles:[".confirm-user-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px}.confirm-user-title-info[_ngcontent-%COMP%]{border-bottom:2px solid #CCCCCC;padding-bottom:8px;align-items:end;margin-bottom:16px}.confirm-user-list[_ngcontent-%COMP%]{width:100%;margin-top:22px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #CCCCCC}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;color:#1a1f22;padding-bottom:7px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:15px;line-height:24px;padding:7px 0}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){margin-right:30px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f8f8fa}.confirm-user-warning-info[_ngcontent-%COMP%]{width:100%;background:#FFF8F5;border-radius:24px;padding:20px 24px;display:flex;margin-bottom:24px}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-icon[_ngcontent-%COMP%]{width:6%}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-content[_ngcontent-%COMP%]{width:94%;font-weight:400;font-size:16px;line-height:20px}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px;color:#1a1f22}.confirm-user-warning-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:24px}.confirm-user-progress-box[_ngcontent-%COMP%]{background:#F5FAFF;border-radius:12px;padding:12px 20px;margin-bottom:24px;display:flex;align-items:center}.confirm-user-progress-box[_ngcontent-%COMP%]   .progress-box-icon[_ngcontent-%COMP%]{width:6%}.confirm-user-progress-box[_ngcontent-%COMP%]   .progress-box-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.confirm-user-progress-box[_ngcontent-%COMP%]   .progress-info-content[_ngcontent-%COMP%]{width:94%;font-weight:400;font-size:16px;line-height:20px}.confirm-user-success-box[_ngcontent-%COMP%]{background:#FAFFF5;border-radius:12px;padding:12px 20px;margin-bottom:24px;display:flex;align-items:center}.confirm-user-success-box[_ngcontent-%COMP%]   .success-box-icon[_ngcontent-%COMP%]{width:6%}.confirm-user-success-box[_ngcontent-%COMP%]   .success-box-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.confirm-user-success-box[_ngcontent-%COMP%]   .success-info-content[_ngcontent-%COMP%]{width:94%;font-weight:400;font-size:16px;line-height:20px}  .errors-found-modal .modal-content{background:#fff}  .errors-found-modal .modal-dialog{max-width:45.73%!important}  .stop-user-modal .modal-content{background:#FFF9F5}  .stop-user-modal .modal-dialog{max-width:35%!important}.stop-user-sub-title[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px}.email-with[_ngcontent-%COMP%]{min-width:180px;min-width:200px;word-break:break-all}.list-styled-bullet[_ngcontent-%COMP%]{list-style-type:disc;max-height:450px;overflow:auto}"]}),e})()},71376:function(e,t,i){i.d(t,{L:function(){return c}});var s=i(37716),n=i(39895),a=i(7450),o=i(39075),r=i(38583);const l=function(e){return{active:e}};let c=(()=>{class e{constructor(e,t,i){this.router=e,this.translateService=t,this.titleService=i,this.activeTab=this.router.url.includes("bsp-information")?"bsp-information":this.router.url.includes("communities")?"communities":"community-users"}ngDoCheck(){this.activeTab=this.router.url.includes("bsp-information")?"bsp-information":this.router.url.includes("communities")?"communities":"community-users"}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.F0),s.Y36(a.s),s.Y36(o.Dx))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-my-community-iq"]],decls:17,vars:12,consts:[[1,"mb-4"],[1,"container"],[1,"row"],[1,"col-md-12","p-0"],[1,""],[1,"ccl-tabs"],["id","tabs",1,"nav","nav-tabs","sub-tab"],[1,"nav-item"],["id","BSP-Information","data-toggle","tab","routerLink","./bsp-information",1,"nav-link",3,"ngClass"],["data-toggle","tab","id","communities","routerLink","./communities",1,"nav-link","small",3,"ngClass"],["data-toggle","tab","id","community-users","routerLink","./community-users",1,"nav-link","small",3,"ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"section",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"ul",6),s.TgZ(7,"li",7),s.TgZ(8,"a",8),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"li",7),s.TgZ(11,"a",9),s._uU(12),s.qZA(),s.qZA(),s.TgZ(13,"li",7),s.TgZ(14,"a",10),s._uU(15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(16,"router-outlet")),2&e&&(s.xp6(8),s.Q6J("ngClass",s.VKq(6,l,"bsp-information"===t.activeTab)),s.xp6(1),s.Oqu(t.language.Bsp_Info),s.xp6(2),s.Q6J("ngClass",s.VKq(8,l,"communities"===t.activeTab)),s.xp6(1),s.Oqu(t.language.Communities),s.xp6(2),s.Q6J("ngClass",s.VKq(10,l,"community-users"===t.activeTab)),s.xp6(1),s.Oqu(t.language["Community Users"]))},directives:[n.yS,r.mk,n.lC],styles:[""]}),e})()},12978:function(e,t,i){i.d(t,{U:function(){return _}});var s=i(37716),n=i(49342),a=i(404),o=i(53668),r=i(7450),l=i(39895),c=i(38048),d=i(39075),g=i(20904),u=i(38583),h=i(3679),p=i(74062);const m=["errorModal"];function f(e,t){if(1&e&&(s.TgZ(0,"div",19),s.TgZ(1,"div",20),s.TgZ(2,"div",21),s.TgZ(3,"span",22),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function Z(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",23),s.TgZ(1,"span",24),s._UZ(2,"img",25),s.qZA(),s.TgZ(3,"button",26),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",27),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}function b(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",28),s.TgZ(1,"div",29),s.TgZ(2,"div",30),s._UZ(3,"img",31),s.qZA(),s.TgZ(4,"div",32),s._UZ(5,"span",33),s.qZA(),s.TgZ(6,"div",34),s.TgZ(7,"button",26),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(8,"span"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.successInfo,s.oJD)}}function A(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",35),s.TgZ(1,"div",36),s.TgZ(2,"div",37),s.NdJ("click",function(){const t=s.CHM(e).index;return s.oxw().removeSubnet(t)}),s._UZ(3,"i",38),s.qZA(),s._uU(4),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit;s.xp6(4),s.hij(" ",e," ")}}function v(e,t){if(1&e&&(s.TgZ(0,"em",39),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.subnetErrorInfo)}}function x(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",40),s.TgZ(1,"button",41),s.NdJ("click",function(){return s.CHM(e),s.oxw().saveSubnet()}),s._uU(2),s.qZA(),s.TgZ(3,"button",42),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetData()}),s._uU(4),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language.save),s.xp6(2),s.Oqu(e.language.cancel)}}const T=function(e){return[e]};let _=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.commonOrgService=e,this.commonFunctionsService=t,this.organizationApiService=i,this.translateService=s,this.router=n,this.sso=a,this.titleService=o,this.common=r,this.createSubnets=[],this.allSubnets=[],this.allsub=[],this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.subnetError=!1,this.invalidSubnet=!1,this.errorTitle="",this.errorBody="",this.formError=!1,this.showBtns=!1,this.subnetErrorInfo="Invalid Subnet",this.oldSubnets=[],this.isRerender=!1,this.loading=!0;let l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.commonOrgService.currentPageAdder("orgacl"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.MODULE=this.sso.getRedirectModule(l)}ngOnInit(){this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.orgacl} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.orgacl} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.success=!1,this.error=!1,this.showBtns=!1,this.getACLList()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.aclListSubs&&this.aclListSubs.unsubscribe(),this.aclAddSubs&&this.aclAddSubs.unsubscribe(),this.aclDeleteSubs&&this.aclDeleteSubs.unsubscribe()}getACLList(){this.loading=!0,this.aclListSubs=this.organizationApiService.AclList(this.ORG_ID).subscribe(e=>{"object"==typeof e?(this.allSubnets=e,this.allsub=null!=e.acl?[...e.acl]:[],this.oldSubnets=null!=e.acl?[...e.acl]:[],this.showBtns=!0):(this.allSubnets=[],this.allsub=[],this.oldSubnets=[],this.showBtns=!1),this.isRerender&&(this.showBtns=!1)},e=>{404==e.status?(this.allSubnets=[],this.allsub=[],this.oldSubnets=[]):this.pageErrorHandle(e),this.showBtns=!1,this.loading=!1},()=>{this.loading=!1})}validateSubnet(e){this.subnetError=!1,e||(this.subnetErrorInfo=this.language["Invalid subnet"],this.subnetError=!0);let t=this.commonFunctionsService.trimSubnet(e);t?!this.commonFunctionsService.isValidSubnetV4(t)&&!this.commonFunctionsService.isValidSubnetV6(t)&&(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"]):(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"])}addSubnet(){if(this.subnetError=!1,null==this.createCurrentSubnet||""==this.createCurrentSubnet)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet cannot be empty"]);if(this.validateSubnet(this.createCurrentSubnet),!this.subnetError){if(this.createSubnets.filter(e=>e===this.createCurrentSubnet).length>0)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet already added"]);this.allsub.push(this.createCurrentSubnet),this.createCurrentSubnet="",this.subnetError=!1,this.showBtns=!0}}removeSubnet(e){this.allsub.splice(e,1),this.showBtns=!0,!this.allsub.length&&!this.oldSubnets.length&&(this.showBtns=!1)}saveSubnet(){this.allsub.length?this.updateSubnet():this.deleteSubnet()}updateSubnet(){this.loading=!0,this.aclAddSubs=this.organizationApiService.AclAdd(this.allsub,this.ORG_ID).subscribe(e=>{this.successInfo=this.language["Organization Acl updated Successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.resetData(),setTimeout(()=>{this.closeAlert()},2500),this.subnetError=!1,this.subnetErrorInfo=""},e=>{this.pageErrorHandle(e),this.loading=!1})}deleteSubnet(){this.loading=!0,this.aclDeleteSubs=this.organizationApiService.AclDelete(this.ORG_ID).subscribe(e=>{this.successInfo=this.language["Organization Acl updated Successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.resetData(),this.subnetError=!1,this.subnetErrorInfo="",setTimeout(()=>{this.closeAlert()},2500)},e=>{this.pageErrorHandle(e),this.loading=!1})}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.translateService.changeLanguage(e)}resetData(){this.isRerender=!0,this.getACLList()}closeAlert(){this.error=!1,this.success=!1}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}subnetChange(){this.createCurrentSubnet||(this.subnetError=!1)}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.v),s.Y36(a.i),s.Y36(o.F),s.Y36(r.s),s.Y36(l.F0),s.Y36(c.t6),s.Y36(d.Dx),s.Y36(g.i))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-organization-access-control"]],viewQuery:function(e,t){if(1&e&&s.Gf(m,7),2&e){let e;s.iGM(e=s.CRH())&&(t.errorModal=e.first)}},decls:27,vars:13,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mb-3"],[1,"col-md-12"],[1,"ccl-title"],[1,"col-md-12","ccl-title"],[1,"error"],[1,"row"],[1,"col-md-4"],["class","mb-2",4,"ngFor","ngForOf"],[1,"col-md-4","ccl-form",3,"ngClass"],["id","userACLSEL","type","text","name","createCurrentSubnet","placeholder","","autocomplete","new-password","trimSpace","",1,"add-subnet-input",3,"ngModel","ngModelChange","change","keyup","blur"],["id","subnet-error","class","ccl-error",4,"ngIf"],[1,"col-md-2","pl-0"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"click"],["_ngcontent-thh-c50","","aria-hidden","true",1,"fa","fa-plus"],["class","col-md-3 offset-md-9 pr-0 text-right ",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"mb-2"],[1,"add-subnet"],["role","button",1,"add-subnet-close-icon","primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],["id","subnet-error",1,"ccl-error"],[1,"col-md-3","offset-md-9","pr-0","text-right"],["type","submit",1,"btn-default","primary",3,"click"],["type","submit",1,"btn-default","btn-dft","py-1","ml-3",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,f,5,1,"div",1),s.YNc(2,Z,6,1,"div",2),s.YNc(3,b,9,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._uU(7),s.qZA(),s.TgZ(8,"span"),s._uU(9),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"div",7),s._uU(12),s.TgZ(13,"span",8),s._uU(14,"*"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",9),s.TgZ(16,"div",10),s.YNc(17,A,5,1,"div",11),s.qZA(),s.qZA(),s.TgZ(18,"div",9),s.TgZ(19,"div",12),s.TgZ(20,"input",13),s.NdJ("ngModelChange",function(e){return t.createCurrentSubnet=e})("change",function(){return t.subnetChange()})("keyup",function(){return t.subnetChange()})("blur",function(){return t.removeUnwantedSpace("createCurrentSubnet",t.createCurrentSubnet)}),s.qZA(),s.YNc(21,v,2,1,"em",14),s.qZA(),s.TgZ(22,"div",15),s.TgZ(23,"button",16),s.NdJ("click",function(){return t.addSubnet()}),s._UZ(24,"i",17),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"div",9),s.YNc(26,x,5,2,"div",18),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(4),s.Oqu(t.language.access),s.xp6(2),s.hij("",t.language.accesscontent,"."),s.xp6(3),s.hij("",t.language.addSubnets," "),s.xp6(5),s.Q6J("ngForOf",t.allsub),s.xp6(2),s.Q6J("ngClass",s.VKq(11,T,t.subnetError?"ccl-error":"")),s.xp6(1),s.Q6J("ngModel",t.createCurrentSubnet),s.xp6(1),s.Q6J("ngIf",t.subnetError),s.xp6(5),s.Q6J("ngIf",t.showBtns))},directives:[u.O5,u.sg,u.mk,h.Fj,p.f,h.JJ,h.On],styles:[""]}),e})()},61411:function(e,t,i){i.d(t,{Q:function(){return f}});var s=i(37716),n=i(49342),a=i(7450),o=i(53668),r=i(39895),l=i(38048),c=i(39075),d=i(38583);function g(e,t){1&e&&(s.TgZ(0,"div",9),s.TgZ(1,"div",10),s.TgZ(2,"div",11),s.TgZ(3,"span",12),s._uU(4,"Loading..."),s.qZA(),s.qZA(),s.qZA(),s.qZA())}function u(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",13),s.TgZ(1,"span",14),s._UZ(2,"img",15),s.qZA(),s.TgZ(3,"button",16),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",17),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}function h(e,t){if(1&e&&(s.TgZ(0,"h3"),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Oqu(e.language["Operations Cloud"]?e.language["Operations Cloud"]:"Operations Cloud")}}function p(e,t){if(1&e&&(s.TgZ(0,"h3"),s._uU(1),s.qZA()),2&e){const e=s.oxw().$implicit,t=s.oxw();s.xp6(1),s.Oqu(t.language[e.name]?t.language[e.name]:e.name?e.name:"")}}function m(e,t){if(1&e&&(s.TgZ(0,"div",18),s.TgZ(1,"div",19),s.YNc(2,h,2,1,"h3",20),s.YNc(3,p,2,1,"h3",20),s.qZA(),s.TgZ(4,"div",21),s.TgZ(5,"span"),s._uU(6),s.qZA(),s._UZ(7,"br"),s.TgZ(8,"strong"),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div",21),s.TgZ(11,"span"),s._uU(12),s.qZA(),s._UZ(13,"br"),s.TgZ(14,"strong"),s._uU(15),s.qZA(),s.qZA(),s.TgZ(16,"div",22),s.TgZ(17,"span"),s._uU(18),s.qZA(),s._UZ(19,"br"),s.TgZ(20,"strong"),s._uU(21),s.qZA(),s.qZA(),s.qZA()),2&e){const e=t.$implicit,i=s.oxw();s.xp6(2),s.Q6J("ngIf","CCO"==(null==e?null:e.name)),s.xp6(1),s.Q6J("ngIf","CCO"!=(null==e?null:e.name)),s.xp6(3),s.Oqu(i.language.Startdate),s.xp6(3),s.hij("",e.startDate,"\xa0"),s.xp6(3),s.Oqu(i.language.enddate),s.xp6(3),s.hij("",e.endDate,"\xa0"),s.xp6(3),s.Oqu(i.language.Status),s.xp6(3),s.hij("",e.status?e.status.replaceAll("_"," ")?i.language[e.status.replaceAll("_"," ")]:e.status.replaceAll("_"," "):"","\xa0")}}let f=(()=>{class e{constructor(e,t,i,s,n,a){this.commonOrgService=e,this.translateService=t,this.organizationApiService=i,this.router=s,this.sso=n,this.titleService=a,this.pageAvailable=!1,this.orgInfoData={calixOrganization:{}},this.languages=[{name:"English"},{name:"French Canadian"}],this.loading=!0;let o=this.router.url;this.ORG_ID=this.sso.getOrganizationID(o),this.commonOrgService.currentPageAdder("orginfo"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.MODULE=this.sso.getRedirectModule(o)}ngOnInit(){this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.orginfo} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.orginfo} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.getorgInfoData()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.orgDetailSubs&&this.orgDetailSubs.unsubscribe(),this.orgInfoSubs&&this.orgInfoSubs.unsubscribe()}getorgInfoData(){this.orgDetailSubs=this.organizationApiService.orgInformation(this.ORG_ID).subscribe(e=>{this.orgInfoData=e,this.orgInfoSpID=e.spId},e=>{this.loading=!1,this.pageErrorHandle(e)}),this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(e=>{this.orgInfoEntitlementdata=e,setTimeout(()=>{this.loading=!1},1e3)},e=>{this.pageErrorHandle(e),this.loading=!1})}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}closeAlert(){this.error=!1}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.v),s.Y36(a.s),s.Y36(o.F),s.Y36(r.F0),s.Y36(l.t6),s.Y36(c.Dx))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-organization-info"]],decls:11,vars:6,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],[1,"row"],[1,"col-md-12","px-0"],[1,"ccl-admin-title"],[1,"row","my-3"],[1,"col-md-12","pl-0","ccl-title"],["class","row orginfo-service mb-3 pb-1",4,"ngFor","ngForOf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"row","orginfo-service","mb-3","pb-1"],[1,"col-md-12"],[4,"ngIf"],[1,"col-sm-6","col-md-4","col-lg-4"],[1,"col-sm-6","col-md-4","col-lg-4","pull-right"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,g,5,0,"div",1),s.YNc(2,u,6,1,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s._uU(6),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"div",7),s._uU(9),s.qZA(),s.qZA(),s.YNc(10,m,22,8,"div",8),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(4),s.Oqu(t.orgInfoData.calixOrganization.name),s.xp6(3),s.AsE(" ",t.language.service," : ",t.orgInfoSpID," "),s.xp6(1),s.Q6J("ngForOf",t.orgInfoEntitlementdata))},directives:[d.O5,d.sg],styles:[".orginfo-service[_ngcontent-%COMP%]{border:1px solid #ccc;background:#efefff}.orginfo-service[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;margin:15px 0}"]}),e})()},97171:function(e,t,i){i.d(t,{f:function(){return E}});var s=i(37716),n=i(23771),a=i(79765),o=i(92340),r=i(49342),l=i(39895),c=i(30900),d=i(89342),g=i(38048),u=i(12664),h=i(91841),p=i(39075),m=i(20497),f=i(53668),Z=i(38583),b=i(3679);const A=["deleteModal"];function v(e,t){if(1&e&&(s.TgZ(0,"div",21),s.TgZ(1,"div",22),s.TgZ(2,"div",23),s.TgZ(3,"span",24),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function x(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",25),s.TgZ(1,"span",26),s._UZ(2,"img",27),s.qZA(),s.TgZ(3,"button",28),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",29),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.errorInfo,s.oJD)}}function T(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",30),s.TgZ(1,"div",31),s.TgZ(2,"div",32),s._UZ(3,"img",33),s.qZA(),s.TgZ(4,"div",34),s._UZ(5,"span",35),s.qZA(),s.TgZ(6,"div",36),s.TgZ(7,"button",28),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(8,"span"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.successInfo,s.oJD)}}function _(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",37),s.NdJ("click",function(){return s.CHM(e),s.oxw().addOrg()}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Oqu(e.language.addOrganization)}}function C(e,t){1&e&&s._UZ(0,"th")}function q(e,t){if(1&e&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Oqu(e.language.Action)}}function w(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"td"),s.TgZ(1,"input",45),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw(4).selectedOrg=t}),s.qZA(),s.qZA()}if(2&e){const e=s.oxw().$implicit,t=s.oxw(3);s.xp6(1),s.s9C("value",e.id),s.Q6J("ngModel",t.selectedOrg)}}function O(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",54),s.NdJ("click",function(){s.CHM(e);const t=s.oxw(2).$implicit;return s.oxw(3).gotoSecuredAccess(t)}),s._UZ(1,"img",55),s.qZA()}if(2&e){const e=s.oxw(5);s.s9C("title",e.language.securedaccess)}}function S(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"td",46),s.YNc(1,O,2,1,"button",47),s.TgZ(2,"button",48),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(3).gotoOrgDetail(t)}),s._UZ(3,"i",49),s.qZA(),s.TgZ(4,"button",50),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(3).gotoUsers(t)}),s._UZ(5,"i",51),s.qZA(),s.TgZ(6,"button",52),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(3).deleteOrg(t)}),s._UZ(7,"i",53),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(4);s.xp6(1),s.Q6J("ngIf",e.showSecureAccess),s.xp6(1),s.s9C("title",e.language.entitlements),s.xp6(2),s.s9C("title",e.language.users),s.xp6(2),s.s9C("title",e.language.Delete)}}function y(e,t){if(1&e&&(s.TgZ(0,"tr",43),s.YNc(1,w,2,2,"td",40),s.TgZ(2,"td"),s._uU(3),s.qZA(),s.TgZ(4,"td"),s._uU(5),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.qZA(),s.TgZ(8,"td"),s._uU(9),s.qZA(),s.YNc(10,S,8,4,"td",44),s.qZA()),2&e){const e=t.$implicit,i=s.oxw(3);s.s9C("id",e._id),s.xp6(1),s.Q6J("ngIf",i.fromOrphanDevice),s.xp6(2),s.hij(" ",e.name?e.name:""," "),s.xp6(2),s.hij(" ",e.externalOrgRef?e.externalOrgRef:""," "),s.xp6(2),s.hij(" ",e.oracleId?e.oracleId:""," "),s.xp6(2),s.hij(" ",e.id?e.id:""," "),s.xp6(1),s.Q6J("ngIf",!i.fromOrphanDevice)}}function M(e,t){if(1&e&&(s.TgZ(0,"tbody"),s.YNc(1,y,11,7,"tr",42),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.orgsTableData)}}function k(e,t){if(1&e&&(s.TgZ(0,"tbody"),s.TgZ(1,"tr"),s.TgZ(2,"td",56),s._uU(3),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(3),s.Oqu(e.language["No matching records found"])}}function U(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",57),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).assignOrg()}),s._uU(1),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(1),s.hij(" ",e.language.Assign," ")}}function D(e,t){if(1&e&&(s.TgZ(0,"div",38),s.TgZ(1,"table",39),s.TgZ(2,"thead"),s.TgZ(3,"tr"),s.YNc(4,C,1,0,"th",40),s.TgZ(5,"th"),s._uU(6),s.qZA(),s.TgZ(7,"th"),s._uU(8),s.qZA(),s.TgZ(9,"th"),s._uU(10),s.qZA(),s.TgZ(11,"th"),s._uU(12),s.qZA(),s.YNc(13,q,2,1,"th",40),s.qZA(),s.qZA(),s.YNc(14,M,2,1,"tbody",40),s.YNc(15,k,4,1,"tbody",40),s._UZ(16,"tbody"),s.qZA(),s.YNc(17,U,2,1,"button",41),s.qZA()),2&e){const e=s.oxw();s.Q6J("hidden",!e.dataAvailable),s.xp6(1),s.Q6J("dtOptions",e.tableOptions),s.xp6(3),s.Q6J("ngIf",e.fromOrphanDevice),s.xp6(2),s.Oqu(e.language.organizationName),s.xp6(2),s.Oqu(e.language.accountNumber),s.xp6(2),s.Oqu(e.language.oracleId),s.xp6(2),s.Oqu(e.language.orgId),s.xp6(1),s.Q6J("ngIf",!e.fromOrphanDevice),s.xp6(1),s.Q6J("ngIf",0!=(null==e.orgsTableData?null:e.orgsTableData.length)),s.xp6(1),s.Q6J("ngIf",0==(null==e.orgsTableData?null:e.orgsTableData.length)||null!=e.orgsCount&&0===e.orgsCount||null!=e.filterCount&&0===e.filterCount),s.xp6(2),s.Q6J("ngIf",e.fromOrphanDevice)}}function N(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",58),s.TgZ(1,"h4",59),s._uU(2),s.qZA(),s.TgZ(3,"button",60),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeModal()}),s._UZ(4,"span",61),s.qZA(),s.qZA(),s.TgZ(5,"div",62),s._uU(6),s.qZA(),s.TgZ(7,"div",63),s.TgZ(8,"button",64),s.NdJ("click",function(){return s.CHM(e),s.oxw().confirmDeleteSecleted()}),s._uU(9),s.qZA(),s.TgZ(10,"button",65),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeModal()}),s._uU(11),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.modalTitle),s.xp6(4),s.AsE(" ",e.language["Are you sure you want to delete"]," ",e.modalInfo,"? "),s.xp6(3),s.Oqu(e.language.yes),s.xp6(2),s.Oqu(e.language.no)}}const I=i(91704);let E=(()=>{class e{constructor(e,t,i,n,r,l,c,d,g,u){this.commonOrgService=e,this.router=t,this.customTranslateService=i,this.api=n,this.sso=r,this.dialogService=l,this.http=c,this.titleService=d,this.apiUsageService=g,this.organizationApiService=u,this.pageAvailable=!1,this.tableOptions={pagingType:"full_numbers",dom:"tipr",columnDefs:[{targets:[1,2,3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&I(e.nTableWrapper).find("#organizations-table_last").addClass("disabled")}},this.orgsTableData=[],this.dtTrigger=new a.xQ,this.isRerender=!1,this.loading=!0,this.errorInfo="",this.successInfo="",this.showSecureAccess=!1,this.sysAdminRoute="systemAdministration",this.searchTerm="",this.orgSelected=new s.vpe,this.selectedOrg="",this.searchClearable=!1,this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.reloadCurrentRoute(),this.titleService.setTitle(`${this.language["All Organizations"]} - ${this.language["System Administration"]} - ${this.language["Calix Cloud"]}`)}),this.commonOrgService.currentPageAdder("organizations"),this.frTable=this.customTranslateService.fr,this.sysAdminRoute=o.N.SYS_ADMIN_ROUTE,this.titleService.setTitle(`${this.language["All Organizations"]} - ${this.language["System Administration"]} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.getOrgsCount(),this.closeAlert(),this.tableLanguageOptions();let e=this.sso.getRoles();e&&-1!==e.indexOf("OrgAccess")&&(this.showSecureAccess=!0)}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.allOrgSubscribe&&this.allOrgSubscribe.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.apiUsageSub&&this.apiUsageSub.unsubscribe()}getOrgsCount(e=!1){this.http.get(`${o.N.CALIX_ADMIN_ORG_BASE_URL}organizations/count`).subscribe(t=>{this.orgsCount=t,this.countReceived=!0,e?this.redraw():this.tableRender()},e=>{this.pageErrorHandle(e),this.loading=!1})}tableRender(){let e=`${o.N.CALIX_ADMIN_ORG_BASE_URL}organizations`;const t=this;this.tableOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,serverSide:!0,processing:!1,dom:"tipr",columnDefs:[{targets:[this.fromOrphanDevice?0:1,2,3,4],orderable:!1},{targets:[this.fromOrphanDevice?1:0],orderable:!0}],order:[this.fromOrphanDevice?1:0,"asc"],ajax:(i,s)=>{this.sortBy=i.order[0].column,this.sortType=i.order[0].dir,t.getFilterCount(i.search.value),i.search.value?(i.search.value=i.search.value?encodeURIComponent(i.search.value.trim().replace(/\s\s+/g," ").replace(/ /g,"%")):"",e=`${o.N.CALIX_ADMIN_ORG_BASE_URL}organizations?offset=${i.start}&size=${i.length}&filter=${i.search.value}`):e=`${o.N.CALIX_ADMIN_ORG_BASE_URL}organizations?offset=${i.start}&size=${i.length}`,t.http.get(e).subscribe(e=>{t.orgsTableData=e?this.sortData(e,t.sortBy,t.sortType):[],t.hideNoDataRow(),t.dataAvailable=!0,t.loading=!1,t.tableLanguageOptions(),setTimeout(()=>{s({recordsTotal:null!=t.orgsCount?t.orgsCount:0,recordsFiltered:null!=t.filterCount?t.filterCount:t.orgsCount,data:[]})},150)},e=>{404==e.status?(t.orgsTableData=[],t.hideNoDataRow(),t.loading=!1,t.tableLanguageOptions(),setTimeout(()=>{s({recordsTotal:null!=t.orgsCount?t.orgsCount:0,recordsFiltered:null!=t.filterCount?t.filterCount:t.orgsCount,data:[]})},100)):(t.pageErrorHandle(e),t.loading=!1)})},drawCallback:e=>{this.tableLanguageOptions(),e._iRecordsDisplay<=e._iDisplayLength&&I(e.nTableWrapper).find("#organizations-table_last").addClass("disabled")}},this.tableLanguageOptions()}getFilterCount(e){e=e?encodeURIComponent(e.trim().replace(/\s\s+/g," ").replace(/ /g,"%")):"",this.http.get(`${o.N.CALIX_ADMIN_ORG_BASE_URL}organizations/count?filter=${e}`).subscribe(e=>{this.filterCount=e},e=>{this.pageErrorHandle(e)})}hideNoDataRow(){setTimeout(()=>{I(".odd").css("display","none")},100)}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}hideSearch(){setTimeout(()=>{I("#organizations-list .dataTables_wrapper .dataTables_length").css("display","none")},100)}search(e){this.searchClearable=!!e.length,this.dtElement.dtInstance.then(t=>{t.search(e).draw()})}onSearchClearing(e){this.searchClearable=!1,e.value="",this.dtElement.dtInstance.then(t=>{t.search(e.value).draw()})}gotoSecuredAccess(e){this.setOrganization(e),this.router.navigate([`${this.sysAdminRoute}/orgSecuredAccess`])}gotoOrgDetail(e){this.setOrganization(e),this.router.navigate([`${this.sysAdminRoute}/orgDetail`])}gotoUsers(e){var t;this.setOrganization(e),null===(t=this.commonOrgService.showAccountManagement)||void 0===t||t.next(e.id),this.getApiUsageQuota(e.id)}getApiUsageQuota(e){this.apiUsageSub=this.apiUsageService.getaApiQuotaDetails(e).subscribe(e=>{var t,i;e&&(null==e?void 0:e.allowed_count)&&0!=(null==e?void 0:e.allowed_count)?(null===(t=this.commonOrgService.showApiUsage)||void 0===t||t.next(!0),localStorage.setItem("apiUsage","true")):(null===(i=this.commonOrgService.showApiUsage)||void 0===i||i.next(!1),localStorage.setItem("apiUsage","false")),this.router.navigate([`${this.sysAdminRoute}/users`])},e=>{var t;null===(t=this.commonOrgService.showApiUsage)||void 0===t||t.next(!1),localStorage.setItem("apiUsage","false"),this.router.navigate([`${this.sysAdminRoute}/users`])})}deleteOrg(e){this.deletedata=e,this.modalTitle=this.language["Delete Organization"],this.modalInfo=this.deletedata.name,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDeleteSecleted(){this.closeModal(),this.deleteSubs=this.api.DeleteOrg(this.deletedata.id).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["Organization deleted Successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.closeAlert()},3e3),this.loading=!0,this.isRerender=!0,this.getOrgsCount(!0)},e=>{this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{this.loading=!1})}setOrganization(e){sessionStorage.setItem("calixAdminOrgDetail",JSON.stringify(e)),sessionStorage.setItem("calixAdminOrgID",e.id),this.commonOrgService.currentOrgAdder(e.name)}addOrg(){this.router.navigate([`${this.sysAdminRoute}/addOrg`])}goToOrgList(){this.router.navigate([`${this.sysAdminRoute}/organizations`])}openDeleteModal(){document.getElementById("deleteModalHiddenButton").click()}closeAlert(){this.error=!1,this.success=!1}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.fr:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}changeTableStatusLanguage(e){const t=new Intl.NumberFormat;this.tableCounts={searchText:encodeURIComponent(e.oPreviousSearch.sSearch.trim()),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};const i="fr"==sessionStorage.getItem("defaultLanguage"),s=e.oPreviousSearch.sSearch.trim()?i?`(filtr\xe9es \xe0 partir des ${t.format(e._iRecordsTotal)} entr\xe9es totales)`:`(filtered from ${t.format(e._iRecordsTotal)} total entries)`:"",n=0==e._iRecordsDisplay?-1:e._iDisplayStart,a=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;I('div [role="status"]').text(i?`Affichage de ${t.format(n+1)} \xe0 ${t.format(a)} des ${t.format(e._iRecordsDisplay)} entr\xe9es ${s}`:`Showing ${t.format(n+1)} to ${t.format(a)} of ${t.format(e._iRecordsDisplay)} entries ${s}`),I(".first").text(i?"Le d\xe9but":"First"),I(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),I(".next").text(i?"Suivant":"Next"),I(".last").text(i?"Derni\xe8re":"Last")}sortData(e,t,i){let s=[];return s=this.sortByColumn(e,i,"name"),s}sortByColumn(e,t,i){return e.sort((e,s)=>{var n=e[i]?e[i].toUpperCase():"",a=s[i]?s[i].toUpperCase():"";if("asc"==t){if(n<a)return-1;if(n>a)return 1}else{if(n>a)return-1;if(n<a)return 1}return 0}),e}redraw(){this.searchTerm?this.search(this.searchTerm):this.dtElement.dtInstance.then(e=>{e.draw()})}onPaste(){}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}assignOrg(){this.orgSelected.emit(this.selectedOrg)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.v),s.Y36(l.F0),s.Y36(c.d),s.Y36(d.z),s.Y36(g.t6),s.Y36(u.FF),s.Y36(h.eN),s.Y36(p.Dx),s.Y36(m.w),s.Y36(f.F))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-organizations-list"]],viewQuery:function(e,t){if(1&e&&(s.Gf(A,7),s.Gf(n.G,5)),2&e){let e;s.iGM(e=s.CRH())&&(t.deleteModal=e.first),s.iGM(e=s.CRH())&&(t.dtElement=e.first)}},inputs:{fromOrphanDevice:"fromOrphanDevice"},outputs:{orgSelected:"orgSelected"},decls:23,vars:9,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mt-3"],[1,"col","ccl-title"],[1,"row","my-3"],[1,"col-md-6","offset-md-6","pr-0"],[1,"text-right","flat-right"],[1,"row"],[1,"col-md-5"],["class","btn-default primary px-3",3,"click",4,"ngIf"],[1,"col-md-7"],[1,"ccl-form"],["type","text","id","org-list-search","placeholder","",1,"ccl-input",3,"ngModel","placeholder","ngModelChange","paste","search","input"],["searchBar",""],[1,"clear-icon",3,"hidden","click"],["src","assets/img/close-icon.svg"],[1,"row","my-3","mh-65"],["class","col-md-12",3,"hidden",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"btn-default","primary","px-3",3,"click"],[1,"col-md-12",3,"hidden"],["id","organizations-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[4,"ngIf"],["id","assignOrg","class","btn-default primary px-3 mt-3",3,"click",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["class","actions",4,"ngIf"],["type","radio","id","orgListSelection",1,"ml-2",3,"ngModel","value","ngModelChange"],[1,"actions"],["class","btn-user-access",3,"title","click",4,"ngIf"],["id","org-detail-btn",1,"btn-action-icon",3,"title","click"],[1,"fas","fa-pencil-alt","primary"],["id","users-btn",1,"btn-action-icon",3,"title","click"],[1,"fas","fa-user","primary"],["id","delete-org-btn",1,"btn-action-icon",3,"title","click"],[1,"fas","fa-trash-alt","primary"],[1,"btn-user-access",3,"title","click"],["src","assets/images/user_secure_access_icon.png"],["colspan","5",1,"no-data-available"],["id","assignOrg",1,"btn-default","primary","px-3","mt-3",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",0),s.YNc(1,v,5,1,"div",1),s.YNc(2,x,6,1,"div",2),s.YNc(3,T,9,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"div",7),s.TgZ(9,"div",8),s.TgZ(10,"div",9),s.TgZ(11,"div",10),s.YNc(12,_,2,1,"button",11),s.qZA(),s.TgZ(13,"div",12),s.TgZ(14,"div",13),s.TgZ(15,"input",14,15),s.NdJ("ngModelChange",function(e){return t.searchTerm=e})("paste",function(e){return t.search(e.target.value)})("search",function(e){return t.search(e.target.value)})("input",function(e){return t.search(e.target.value)}),s.qZA(),s.TgZ(17,"span",16),s.NdJ("click",function(){s.CHM(e);const i=s.MAs(16);return t.onSearchClearing(i)}),s._UZ(18,"img",17),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"div",18),s.YNc(20,D,18,11,"div",19),s.qZA(),s.qZA(),s.YNc(21,N,12,5,"ng-template",null,20,s.W1O)}2&e&&(s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(3),s.Oqu(t.language.allOrganizations),s.xp6(6),s.Q6J("ngIf",!t.fromOrphanDevice),s.xp6(3),s.s9C("placeholder",t.language.searchOrganizations),s.Q6J("ngModel",t.searchTerm),s.xp6(2),s.Q6J("hidden",!t.searchClearable),s.xp6(3),s.Q6J("ngIf",t.countReceived))},directives:[Z.O5,b.Fj,b.JJ,b.On,n.G,Z.sg,b._],styles:["td.actions[_ngcontent-%COMP%]{white-space:nowrap}.btn-user-access[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}.btn-action-icon[_ngcontent-%COMP%]{background-color:transparent;font-size:13.5px;border:none}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:30px;top:5px;cursor:pointer;width:12px}"]}),e})()},94634:function(e,t,i){i.d(t,{W:function(){return oe}});var s=i(23771),n=i(79765),a=i(25917),o=i(9112),r=i(88002),l=i(5304),c=i(92340),d=i(37716),g=i(38583),u=i(49342),h=i(30900),p=i(63859),m=i(39895),f=i(38048),Z=i(12664),b=i(39075),A=i(3679),v=i(86640);const x=["deleteModal"],T=["multiDeleteModal"];function _(e,t){if(1&e&&(d.TgZ(0,"div",46),d.TgZ(1,"div",47),d.TgZ(2,"div",48),d.TgZ(3,"span",49),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw(2);d.xp6(4),d.Oqu(e.language.Loading)}}function C(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",50),d.TgZ(1,"span",51),d._UZ(2,"img",52),d.qZA(),d.TgZ(3,"button",53),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",54),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(5),d.Q6J("innerHtml",e.errorInfo,d.oJD)}}function q(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",55),d.TgZ(1,"button",53),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).closeAlert()}),d._UZ(2,"span"),d.qZA(),d.TgZ(3,"div",56),d.TgZ(4,"span",57),d._UZ(5,"img",58),d.qZA(),d._UZ(6,"div",54),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(6),d.Q6J("innerHtml",e.successInfo,d.oJD)}}function w(e,t){1&e&&d._UZ(0,"i",72)}function O(e,t){1&e&&d._UZ(0,"i",73)}function S(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"a",69),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).expandCollapse(t._id)}),d.YNc(2,w,1,0,"i",70),d.YNc(3,O,1,0,"i",71),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.xp6(1),d.uIk("id","collapse-btn-"+e.displayName),d.xp6(1),d.Q6J("ngIf",!t.isExpanded[e._id]),d.xp6(1),d.Q6J("ngIf",t.isExpanded[e._id])}}const y=function(e){return{oneLevelDisable:e}},M=function(e){return{noWriteApi:e}};function k(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"span"),d._uU(1),d.TgZ(2,"label",74),d.TgZ(3,"input",75),d.NdJ("change",function(t){d.CHM(e);const i=d.oxw().$implicit;return d.oxw(2).levelOneAction(i,t.target.checked)}),d.qZA(),d._UZ(4,"span",76),d.qZA(),d.TgZ(5,"span",77),d._uU(6),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.xp6(1),d.hij(" ",t.language.readOnly," "),d.xp6(2),d.Gre("",e._id,"_action firstLevel"),d.s9C("id",e._id+"_action"),d.s9C("name",e.name),d.Q6J("checked",e.readWrite)("ngClass",d.VKq(12,y,null==e?null:e.isSubscriber))("disabled",e.disableScope||!e.checked||(null==e?null:e.isSubscriber)||!t.scopeWriteAccess),d.uIk("noWriteApi",null==e?null:e.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(14,M,e.disableScope)),d.xp6(1),d.Oqu(t.language.writeAndRead)}}function U(e,t){1&e&&d._UZ(0,"i",85)}function D(e,t){1&e&&d._UZ(0,"i",73)}function N(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"a",69),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(4).expandCollapse(t._id)}),d.YNc(2,U,1,0,"i",84),d.YNc(3,D,1,0,"i",71),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(4);d.xp6(1),d.uIk("id","collapse-btn-"+e.displayName),d.xp6(1),d.Q6J("ngIf",!t.isExpanded[e._id]),d.xp6(1),d.Q6J("ngIf",t.isExpanded[e._id])}}function I(e,t){1&e&&d._UZ(0,"i",85)}function E(e,t){1&e&&d._UZ(0,"i",73)}function F(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"a",69),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(6).expandCollapse(t._id)}),d.YNc(2,I,1,0,"i",84),d.YNc(3,E,1,0,"i",71),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(6);d.xp6(1),d.uIk("id","collapse-btn-"+e.displayName),d.xp6(1),d.Q6J("ngIf",!t.isExpanded[e._id]),d.xp6(1),d.Q6J("ngIf",t.isExpanded[e._id])}}function P(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",36),d.TgZ(2,"div",60),d.TgZ(3,"div",89),d.TgZ(4,"div"),d.TgZ(5,"input",63),d.NdJ("change",function(t){const i=d.CHM(e).$implicit,s=d.oxw(2).$implicit,n=d.oxw(2).$implicit,a=d.oxw(2).$implicit;return d.oxw(2).levelFourChange(i,t.target.checked,s._id,n._id,a._id)}),d.qZA(),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",82),d._uU(8),d.TgZ(9,"label",74),d.TgZ(10,"input",83),d.NdJ("change",function(){const t=d.CHM(e).$implicit,i=d.oxw(2).$implicit,s=d.oxw(2).$implicit,n=d.oxw(2).$implicit;return d.oxw(2).levelFourAction(t._id,i._id,s._id,n._id)}),d.qZA(),d._UZ(11,"span",76),d.qZA(),d.TgZ(12,"span",77),d._uU(13),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw(2).$implicit,s=d.oxw(2).$implicit,n=d.oxw(2).$implicit,a=d.oxw(2);d.xp6(5),d.DjV("",n._id," ",s._id," ",i._id," ",e._id,""),d.s9C("id",e._id),d.s9C("value",e.name),d.Q6J("disabled",!a.scopeWriteAccess)("checked",e.checked),d.xp6(1),d.hij("\xa0\xa0\xa0 ",a.scopeDisplayName[e.displayName]||a.language[e.displayName]||e.displayName," "),d.xp6(2),d.hij(" ",a.language.readOnly," "),d.xp6(2),d.DjV("",n._id,"_action ",s._id,"_action ",i._id,"_action ",e._id,"_action"),d.s9C("id",e._id+"_action"),d.s9C("name",e.name),d.Q6J("checked",e.readWrite)("disabled",e.disableScope||!e.checked||!a.scopeWriteAccess),d.uIk("noWriteApi",null==e?null:e.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(25,M,e.disableScope)),d.xp6(1),d.Oqu(a.language.writeAndRead)}}function L(e,t){if(1&e&&(d.TgZ(0,"div",78),d.YNc(1,P,14,27,"div",42),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw(6);d.Q6J("ngClass",t.isExpanded[e._id]?"d-block":"d-none"),d.uIk("id","collapse-"+e.displayName),d.xp6(1),d.Q6J("ngForOf",e.permissions3)}}function J(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",87),d.TgZ(1,"div",36),d.TgZ(2,"div",60),d.TgZ(3,"div",88),d.TgZ(4,"div",62),d.TgZ(5,"input",63),d.NdJ("change",function(t){const i=d.CHM(e).$implicit,s=d.oxw(2).$implicit,n=d.oxw(2).$implicit;return d.oxw(2).levelThreeChange(i,t.target.checked,s._id,n._id)}),d.qZA(),d._uU(6,"\xa0\xa0\xa0 "),d.TgZ(7,"span",64),d.NdJ("click",function(t){const i=d.CHM(e).$implicit;return d.oxw(6).showCheckBox(t,i)}),d.qZA(),d.TgZ(8,"span",65),d._uU(9),d.qZA(),d._UZ(10,"span",66),d.qZA(),d.YNc(11,F,4,3,"div",41),d.qZA(),d.qZA(),d.TgZ(12,"div",82),d._uU(13),d.TgZ(14,"label",74),d.TgZ(15,"input",83),d.NdJ("change",function(t){const i=d.CHM(e).$implicit,s=d.oxw(2).$implicit,n=d.oxw(2).$implicit;return d.oxw(2).levelThreeAction(i,t.target.checked,s._id,n._id)}),d.qZA(),d._UZ(16,"span",76),d.qZA(),d.TgZ(17,"span",77),d._uU(18),d.qZA(),d.qZA(),d.qZA(),d.YNc(19,L,2,3,"div",68),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw(2).$implicit,s=d.oxw(2).$implicit,n=d.oxw(2);d.xp6(5),d.IyS("",s._id," ",i._id," ",e._id,""),d.MGl("id","",e._id,"_inner_parent"),d.s9C("value",e.name),d.Q6J("disabled",!n.scopeWriteAccess)("checked",e.checked),d.xp6(2),d.MGl("id","",e._id,"_inner_parent_span"),d.xp6(2),d.Oqu(n.scopeDisplayName[e.displayName]||n.language[e.displayName]||e.displayName),d.xp6(1),d.MGl("id","",e._id,"_info"),d.xp6(1),d.Q6J("ngIf",e.permissions3.length),d.xp6(2),d.hij(" ",n.language.readOnly," "),d.xp6(2),d.IyS("",s._id,"_action ",i._id,"_action ",e._id,"_action"),d.s9C("id",e._id+"_action"),d.s9C("name",e.name),d.Q6J("checked",e.readWrite)("disabled",e.disableScope||!e.checked||!n.scopeWriteAccess),d.uIk("noWriteApi",null==e?null:e.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(27,M,e.disableScope)),d.xp6(1),d.Oqu(n.language.writeAndRead),d.xp6(1),d.Q6J("ngIf",e.permissions3.length)}}function $(e,t){if(1&e&&(d.TgZ(0,"div",78),d.YNc(1,J,20,29,"div",86),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw(4);d.Q6J("ngClass",t.isExpanded[e._id]?"d-block":"d-none"),d.uIk("id","collapse-"+e.displayName),d.xp6(1),d.Q6J("ngForOf",e.permissions2)}}function R(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",80),d.TgZ(1,"div",36),d.TgZ(2,"div",60),d.TgZ(3,"div",81),d.TgZ(4,"div",62),d.TgZ(5,"input",63),d.NdJ("change",function(t){const i=d.CHM(e).$implicit,s=d.oxw(2).$implicit;return d.oxw(2).levelTwoChange(i,t.target.checked,s._id)}),d.qZA(),d._uU(6,"\xa0\xa0\xa0 "),d.TgZ(7,"span",64),d.NdJ("click",function(t){const i=d.CHM(e).$implicit;return d.oxw(4).showCheckBox(t,i)}),d.qZA(),d.TgZ(8,"span",65),d._uU(9),d.qZA(),d._UZ(10,"span",66),d.qZA(),d.YNc(11,N,4,3,"div",41),d.qZA(),d.qZA(),d.TgZ(12,"div",82),d._uU(13),d.TgZ(14,"label",74),d.TgZ(15,"input",83),d.NdJ("change",function(t){const i=d.CHM(e).$implicit,s=d.oxw(2).$implicit;return d.oxw(2).levelTwoAction(i,t.target.checked,s._id)}),d.qZA(),d._UZ(16,"span",76),d.qZA(),d.TgZ(17,"span",77),d._uU(18),d.qZA(),d.qZA(),d.qZA(),d.YNc(19,$,2,3,"div",68),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw(2).$implicit,s=d.oxw(2);d.xp6(5),d.Tol(i._id),d.MGl("id","",e._id,"_parent"),d.s9C("value",e.name),d.Q6J("disabled",!s.scopeWriteAccess)("checked",e.checked),d.xp6(2),d.MGl("id","",e._id,"_parent_span"),d.xp6(2),d.Oqu(s.scopeDisplayName[e.displayName]||s.language[e.displayName]||e.displayName),d.xp6(1),d.MGl("id","",e._id,"_info"),d.xp6(1),d.Q6J("ngIf",e.permissions2.length),d.xp6(2),d.hij(" ",s.language.readOnly," "),d.xp6(2),d.Gre("",i._id,"_action"),d.s9C("id",e._id+"_action"),d.s9C("name",e.name),d.Q6J("checked",e.readWrite)("disabled",e.disableScope||!e.checked||!s.scopeWriteAccess),d.uIk("noWriteApi",null==e?null:e.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(23,M,e.disableScope||"cloud.rbac.csc.calloutcome.enforce"===e.name)),d.xp6(1),d.Oqu(s.language.writeAndRead),d.xp6(1),d.Q6J("ngIf",e.permissions2.length)}}function H(e,t){if(1&e&&(d.TgZ(0,"div",78),d.YNc(1,R,20,25,"div",79),d.qZA()),2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.Q6J("ngClass",t.isExpanded[e._id]?"d-block":"d-none"),d.uIk("id","collapse-"+e.displayName),d.xp6(1),d.Q6J("ngForOf",e.permissions)}}const Y=function(e){return{emptyRowSwitch:e}};function Q(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",59),d.TgZ(1,"div",36),d.TgZ(2,"div",60),d.TgZ(3,"div",61),d.TgZ(4,"div",62),d.TgZ(5,"input",63),d.NdJ("change",function(t){const i=d.CHM(e).$implicit;return d.oxw(2).levelOneChange(i._id,t.target.checked,i)}),d.qZA(),d.TgZ(6,"span",64),d.NdJ("click",function(t){const i=d.CHM(e).$implicit;return d.oxw(2).showCheckBox(t,i)}),d.qZA(),d.TgZ(7,"span",65),d._uU(8),d.qZA(),d._UZ(9,"span",66),d.qZA(),d.YNc(10,S,4,3,"div",41),d.qZA(),d.qZA(),d.TgZ(11,"div",67),d.YNc(12,k,7,16,"span",41),d.qZA(),d.qZA(),d.YNc(13,H,2,3,"div",68),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw(2);d.xp6(5),d.MGl("id","",e._id,"_parent"),d.s9C("value",e.name),d.Q6J("disabled",!i.scopeWriteAccess)("checked",e.checked),d.xp6(1),d.MGl("id","",e._id,"_parent_span"),d.xp6(2),d.Oqu(i.scopeDisplayName[e.displayName]||i.language[e.displayName]||e.displayName),d.xp6(1),d.MGl("id","",e._id,"_info"),d.xp6(1),d.Q6J("ngIf",e.permissions.length),d.xp6(1),d.Q6J("ngClass",d.VKq(11,Y,null==e?null:e.isSubscriber)),d.xp6(1),d.Q6J("ngIf",!(null!=e&&e.isSubscriber)),d.xp6(1),d.Q6J("ngIf",e.permissions.length)}}function z(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",90),d.TgZ(1,"button",53),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).closeAlertWarning()}),d._uU(2,"\xd7"),d.qZA(),d._UZ(3,"div",91),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(3),d.Q6J("innerHtml",e.warningInfo,d.oJD)}}function B(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",92),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).deleteMultiUsers()}),d._uU(1),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(1),d.Oqu(e.language.delete)}}function j(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"th",93),d.TgZ(1,"input",94),d.NdJ("click",function(t){return d.CHM(e),d.oxw(2).deleteUserCheckAll(t.target.checked)}),d.qZA(),d.TgZ(2,"span",95),d.NdJ("click",function(t){return d.CHM(e),d.oxw(2).showAllUserCheckBox(t)}),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("checked",e.usersDelSelectedChecked)("disabled",0==(null==e.addedUsersList?null:e.addedUsersList.length)||!e.scopeWriteAccess)}}function V(e,t){if(1&e&&(d.TgZ(0,"th"),d._uU(1),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Oqu(e.language.Action)}}function G(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"td",98),d.TgZ(1,"input",99),d.NdJ("click",function(t){d.CHM(e);const i=d.oxw().$implicit;return d.oxw(2).deleteUserCheckOne(i,t.target.checked)}),d.qZA(),d.qZA()}if(2&e){const e=d.oxw().$implicit,t=d.oxw(2);d.xp6(1),d.s9C("id",e._id),d.MGl("name","user_del_",e._id,""),d.s9C("value",e._id),d.Q6J("checked",t.usersDelSelectedChecked)("disabled",!t.scopeWriteAccess)}}function W(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"td",100),d.TgZ(1,"i",101),d.NdJ("click",function(){d.CHM(e);const t=d.oxw().$implicit;return d.oxw(2).deleteUser(t)}),d.qZA(),d.qZA()}if(2&e){const e=d.oxw(3);d.xp6(1),d.s9C("title",e.language.delete)}}function X(e,t){if(1&e&&(d.TgZ(0,"tr"),d.YNc(1,G,2,5,"td",96),d.TgZ(2,"td"),d._uU(3),d.qZA(),d.YNc(4,W,2,1,"td",97),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(2);d.xp6(1),d.Q6J("ngIf",i.scopeWriteAccess),d.xp6(2),d.Oqu(e.username),d.xp6(1),d.Q6J("ngIf",i.scopeWriteAccess)}}function K(e,t){if(1&e&&(d.TgZ(0,"tbody"),d.TgZ(1,"tr"),d.TgZ(2,"td",102),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw(2);d.xp6(3),d.Oqu(e.language["No data available in table"])}}function ee(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"button",103),d.NdJ("click",function(){return d.CHM(e),d.oxw(2).addRole()}),d._uU(1),d.qZA()}if(2&e){const e=d.oxw(2);d.Q6J("disabled",e.loader),d.xp6(1),d.Oqu(e.language.saveEnregistrer)}}const te=function(){return{standalone:!0}};function ie(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",3),d.YNc(1,_,5,1,"div",4),d.YNc(2,C,6,1,"div",5),d.YNc(3,q,7,1,"div",6),d.TgZ(4,"div",7),d.TgZ(5,"div",8),d.TgZ(6,"div",9),d._uU(7),d.qZA(),d.qZA(),d.TgZ(8,"div",10),d.TgZ(9,"div",11),d.TgZ(10,"a",12),d.NdJ("click",function(){return d.CHM(e),d.oxw().goBack()}),d._UZ(11,"i",13),d._uU(12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",14),d.TgZ(14,"div",8),d.TgZ(15,"div",15),d.TgZ(16,"label",16),d._uU(17),d.TgZ(18,"span",17),d._uU(19,"*"),d.qZA(),d.qZA(),d.TgZ(20,"input",18),d.NdJ("keyup",function(){return d.CHM(e),d.oxw().closeAlert()})("ngModelChange",function(t){return d.CHM(e),d.oxw().roleName=t}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",19),d.TgZ(22,"div",15),d.TgZ(23,"label",20),d._uU(24),d.qZA(),d.TgZ(25,"input",21),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().roleDescription=t}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(26,"div",14),d.TgZ(27,"div",22),d._uU(28),d.qZA(),d.qZA(),d.TgZ(29,"div",14),d.TgZ(30,"div",23),d.TgZ(31,"form",24),d.YNc(32,Q,14,13,"div",25),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",14),d.TgZ(34,"div",22),d._uU(35),d.qZA(),d.qZA(),d.YNc(36,z,4,1,"div",26),d.TgZ(37,"div",14),d.TgZ(38,"div",27),d.TgZ(39,"form"),d.TgZ(40,"div",28),d.TgZ(41,"ng-select",29),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().selectedUsers=t}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(42,"div",30),d.TgZ(43,"button",31),d.NdJ("click",function(){return d.CHM(e),d.oxw().addUser()}),d._uU(44),d.qZA(),d.qZA(),d.qZA(),d.TgZ(45,"div",32),d.TgZ(46,"div",33),d.TgZ(47,"div",34),d.YNc(48,B,2,1,"button",35),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"div",36),d.TgZ(50,"div",37),d.TgZ(51,"table",38),d.TgZ(52,"thead",39),d.TgZ(53,"tr"),d.YNc(54,j,3,2,"th",40),d.TgZ(55,"th"),d._uU(56),d.qZA(),d.YNc(57,V,2,1,"th",41),d.qZA(),d.qZA(),d.TgZ(58,"tbody"),d.YNc(59,X,5,3,"tr",42),d.qZA(),d.YNc(60,K,4,1,"tbody",41),d.qZA(),d.qZA(),d.qZA(),d.TgZ(61,"div",36),d.TgZ(62,"div",43),d.YNc(63,ee,2,2,"button",44),d.TgZ(64,"button",45),d.NdJ("click",function(){return d.CHM(e),d.oxw().goBack()}),d._uU(65),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",e.loader),d.xp6(1),d.Q6J("ngIf",e.error),d.xp6(1),d.Q6J("ngIf",e.success),d.xp6(4),d.hij("",e.pageTitle," "),d.xp6(5),d.hij(" ",e.language["Back to Roles List"]," "),d.xp6(5),d.hij("",e.language.roleName," "),d.xp6(3),d.s9C("placeholder",e.language["Enter role name"]),d.Q6J("disabled",!e.scopeWriteAccess)("ngModel",e.roleName),d.xp6(4),d.Oqu(e.language.Description),d.xp6(1),d.s9C("placeholder",e.language.Description),d.Q6J("disabled",!e.scopeWriteAccess)("ngModel",e.roleDescription),d.xp6(3),d.Oqu(e.language.permissions),d.xp6(4),d.Q6J("ngForOf",e.allPermissions),d.xp6(3),d.Oqu(e.language.addUsers),d.xp6(1),d.Q6J("ngIf",e.warning),d.xp6(5),d.s9C("placeholder",e.language.selectUser),d.s9C("notFoundText",e.language.noItemsFound),d.Q6J("items",e.usersList)("ngModel",e.selectedUsers)("clearable",!1)("ngModelOptions",d.DdM(36,te)),d.xp6(2),d.Q6J("disabled",!e.scopeWriteAccess),d.xp6(1),d.Oqu(e.language.add),d.xp6(4),d.Q6J("ngIf",0!=e.usersDelSelected.length),d.xp6(2),d.Q6J("hidden",!e.dataAvailable),d.xp6(1),d.Q6J("dtOptions",e.tableOptions)("dtTrigger",e.dtTrigger),d.xp6(3),d.Q6J("ngIf",e.scopeWriteAccess),d.xp6(2),d.Oqu(e.language.userName),d.xp6(1),d.Q6J("ngIf",e.scopeWriteAccess),d.xp6(2),d.Q6J("ngForOf",e.addedUsersList),d.xp6(1),d.Q6J("ngIf",0==(null==e.addedUsersList?null:e.addedUsersList.length)),d.xp6(3),d.Q6J("ngIf",e.scopeWriteAccess),d.xp6(2),d.Oqu(e.language.Cancel)}}function se(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",104),d.TgZ(1,"h4",105),d._uU(2),d.qZA(),d.TgZ(3,"button",106),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeModal()}),d._UZ(4,"span",107),d.qZA(),d.qZA(),d.TgZ(5,"div",108),d._uU(6),d._UZ(7,"br"),d._uU(8),d.qZA(),d.TgZ(9,"div",109),d.TgZ(10,"button",110),d.NdJ("click",function(){return d.CHM(e),d.oxw().confirmDeleteSecleted()}),d._uU(11),d.qZA(),d.TgZ(12,"button",111),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeModal()}),d._uU(13),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(2),d.Oqu(e.modalTitle),d.xp6(4),d.hij(" ",e.language["Are you sure you want to delete this Role"],"?"),d.xp6(2),d.hij(" (",e.modalInfo,") "),d.xp6(3),d.Oqu(e.language.yes),d.xp6(2),d.Oqu(e.language.no)}}function ne(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",104),d.TgZ(1,"h4",105),d._uU(2),d.qZA(),d.TgZ(3,"button",106),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeModal()}),d._UZ(4,"span",107),d.qZA(),d.qZA(),d.TgZ(5,"div",108),d._uU(6),d._UZ(7,"br"),d._uU(8),d.qZA(),d.TgZ(9,"div",109),d.TgZ(10,"button",110),d.NdJ("click",function(){return d.CHM(e),d.oxw().confirmMultiDeleteSecleted()}),d._uU(11),d.qZA(),d.TgZ(12,"button",111),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeModal()}),d._uU(13),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(2),d.Oqu(e.modalTitle),d.xp6(4),d.hij(" ",e.language["Are you sure you want to delete these selected Roles"],"?"),d.xp6(2),d.hij(" (",e.modalInfo,") "),d.xp6(3),d.Oqu(e.language.yes),d.xp6(2),d.Oqu(e.language.no)}}const ae=i(91704);let oe=(()=>{class e{constructor(e,t,i,s,a,o,r,l){this.location=e,this.commonOrgService=t,this.customTranslateService=i,this.addRoleService=s,this.router=a,this.sso=o,this.dialogService=r,this.titleService=l,this.isExpanded={},this.loader=!0,this.pageAvailable=!1,this.rolesAddForm="supportCloud",this.usersList=[],this.usersFiltered=[],this.addedUsersList=[],this.existingUserError=!1,this.usersDelSelected=[],this.usersDelSelectedChecked=!1,this.tableOptions={pagingType:"full_numbers",pageLength:5,dom:"tipr",ordering:!1,drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&ae(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.supportCloudRolesData=[],this.marketingCloudRolesData=[],this.smartHomeRoles=[],this.systemRoles=[],this.errorInfo="",this.successInfo="",this.warningInfo="",this.supportDataAvailable=!1,this.marketingDataAvailable=!1,this.smartDataAvailable=!1,this.systemDataAvailable=!1,this.dataAvailable=!1,this.dtTrigger=new n.xQ,this.isRerender=!1,this.allPermissions=[],this.allPrmsnfrmApi=[],this.MODULE="systemAdministration",this.usersCount=0,this.scopesToBeDisabled=["cloud.rbac.csc.qoe","cloud.rbac.csc.apps.arlo","cloud.rbac.csc.apps.servify","cloud.rbac.csc.apps.mycommunityiq","cloud.rbac.csc.apps.bark","cloud.rbac.csc.devices","cloud.rbac.csc.topology","cloud.rbac.csc.calloutcome.enforce"],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.scopeWriteAccess=!1;let c=this.router.url;this.ORG_ID=this.sso.getOrganizationID(c),this.MODULE=this.sso.getRedirectModule(c),this.sso.getScopes(),this.scopeWriteAccess=this.checkScope(),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.pageTitleCreator(),this.dataAvailable=!1,this.isRerender=!0,this.titleService.setTitle(`${this.language["Role detail"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.renderUsersTable("language")}),this.frTable=this.customTranslateService.fr,this.rolesAddForm=sessionStorage.getItem("calixAdminAddRole"),this.editRoleId=sessionStorage.getItem("calixAdminAddRoleId"),this.commonOrgService.currentPageAdder("roleDetails"),this.getDatas(),this.pageTitleCreator(),this.titleService.setTitle(`${this.language["Role detail"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}onClick(e){let t=e.target.className,i=e.target.localName;t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&this.tablePageChange()}ngOnInit(){this.closeAlert(),this.tableLanguageOptions()}checkScope(){let e=this.sso.getScopes();return!c.N.VALIDATE_SCOPE||!(!e||!e["cloud.admin.roles"]||-1===e["cloud.admin.roles"].indexOf("write"))}ngOnDestroy(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.allPermsSubs&&this.allPermsSubs.unsubscribe(),this.usersCountSubs&&this.usersCountSubs.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe(),this.roleGetSubs&&this.roleGetSubs.unsubscribe(),this.roleUpdateSubs&&this.roleUpdateSubs.unsubscribe()}getDatas(){this.getRoleData(),this.getUserList()}getRoleData(){this.roleGetSubs=this.addRoleService.RoleData(this.editRoleId).subscribe(e=>{this.roleDatas=e,this.appType=e.apptype,this.processData(e),this.getAllPermissions(),this.roleName=e.name,this.roleDescription=null==e.description||null==e.description?"":e.description,this.addedUsersList=null!=e.users?this.changeUsersData(e.users):[],setTimeout(()=>{this.renderUsersTable()},250)},e=>{this.pageErrorHandle(e),this.loader=!1,this.addedUsersList=[],setTimeout(()=>{this.renderUsersTable()},250)})}getAllPermissions(){this.allPermsSubs=this.addRoleService.AllPemissionsData(this.appType).subscribe(e=>{this.allPrmsnfrmApi=e,this.allPermissionsDataProcess(e),setTimeout(()=>{this.getSlctdParams(),"marketingCloud"==this.rolesAddForm&&ae(".oneLevelDisable").prop("disabled",!0)},1e3),this.loader=!1},e=>{this.pageErrorHandle(e),this.loader=!1})}allPermissionsDataProcess(e){"supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?(this.allPermissions=this.commonOrgService.allSupportDataProcessV21(e,this.selectedPermissions),"marketingCloud"==this.rolesAddForm&&(this.allPermissions=this.allPermissions.map(e=>(("Subscriber"==e.displayName||"Revenue"==e.displayName)&&(e.isSubscriber=!0),e)))):this.allPermissions=this.commonOrgService.allSupportDataProcess(e,this.selectedPermissions),this.allPermissions=this.disableScopeDoesntNeedWrite(this.allPermissions,1)}disableScopeDoesntNeedWrite(e,t){return e.forEach(e=>{const i=1==t?"":t;this.scopesToBeDisabled.includes(e.name)&&(e.disableScope=!0,e.readWrite=!1),this.scopeWriteAccess||(e.disableScope=!0),e.hasOwnProperty(`permissions${i}`)&&e[`permissions${i}`]&&(e=this.disableScopeDoesntNeedWrite(e[`permissions${i}`],t+1))}),e}changeUsersData(e){let t=[];return e.forEach(e=>{e._id=e.userId,t.push(e)}),t}getUserList(){this.usersCountSubs=this.addRoleService.UsersCountByOrgId(this.ORG_ID).subscribe(e=>{this.usersCount=e,this.usersListSubs=this.addRoleService.UsersListByOrgId(this.ORG_ID,e).subscribe(e=>{this.usersList=e,this.usersList.length&&(this.selectedUsers=this.usersList[0])},e=>{this.pageErrorHandle(e)})},e=>{this.pageErrorHandle(e)})}addUser(){this.warning=!1;let e=this.selectedUsers._id;if(this.addedUsersList.filter(t=>t._id===e).length>0)return this.warningInfo=`${this.selectedUsers.username} - ${this.language["User already added"]}`,void(this.warning=!0);this.addedUsersList.push(this.selectedUsers),this.isRerender=!0,this.renderUsersTable(),this.deleteUserCheckAll(!1),this.resetMultiDelete()}deleteUser(e){this.deleteItem=e,this.modalTitle=this.language["Delete User"],this.modalInfo=`${e.username}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDeleteSecleted(){this.closeModal();let e=this.deleteItem,t=[];this.addedUsersList.forEach(i=>{i._id!==e._id&&t.push(i)}),this.usersDelSelected=this.usersDelSelected.filter(t=>t._id!==e._id),this.addedUsersList=t,this.dataAvailable=!1,this.isRerender=!0,this.renderUsersTable(),setTimeout(()=>{this.deleteUserCheckAll(!1),this.resetMultiDelete()},200)}deleteUserCheckAll(e){let t=0;var i=this;let s;e?ae('input[name^="user_del"]').each(function(){if(t>=5)return!1;ae(this).prop("checked",!0),s=ae(this).attr("id"),i.addedUsersList.forEach(e=>{e._id==s&&!i.usersDelSelected.includes(e)&&i.usersDelSelected.push(e)}),t++}):ae('input[name^="user_del"]').each(function(){if(t>=5)return!1;ae(this).prop("checked",!1),i.usersDelSelected=[],t++})}deleteUserCheckOne(e,t){t?(this.usersDelSelected.push(e),this.usersDelSelected.length==ae('input[name^="user_del"]').length?(ae("#user-all-delete").prop("checked",!0),ae("#user-all-delete-span").hide()):ae("#user-all-delete-span").show()):(this.usersDelSelected=this.usersDelSelected.filter(t=>t._id!=e._id),this.usersDelSelected.length?this.usersDelSelected.length!=ae('input[name^="user_del"]').length?(ae("#user-all-delete").prop("checked",!1),ae("#user-all-delete-span").show()):ae("#user-all-delete-span").hide():(ae("#user-all-delete").prop("checked",!1),ae("#user-all-delete-span").hide()))}deleteMultiUsers(){this.modalTitle=this.language["Delete Multiple Users"];let e=[];this.usersDelSelected.forEach(t=>{e.push(t.username)}),this.modalInfo=e.join(", "),this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal)}confirmMultiDeleteSecleted(){this.closeModal(),this.addedUsersList=this.addedUsersList.filter(({_id:e})=>!this.usersDelSelected.some(t=>t._id==e)),this.isRerender=!0,this.renderUsersTable(),setTimeout(()=>{this.deleteUserCheckAll(!1),this.resetMultiDelete()},200)}resetMultiDelete(){this.usersDelSelected=[],ae("#user-all-delete").prop("checked",!1),ae("#user-all-delete-span").hide()}closeAlert(){this.error=!1,this.success=!1}renderUsersTable(e){this.setTableOptions(),e&&"language"==e?setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()},50):this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}setTableOptions(){this.tableOptions={pagingType:"full_numbers",pageLength:5,processing:!0,ordering:!1,dom:"tipr",drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&ae(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled"),ae(".paginate_button.next:not(.disabled)").click(()=>{}),setTimeout(()=>{ae("#add-role-users_paginate").on("click",".paginate_button.next:not(.disabled)",()=>{alert(ae(this).text())})},100)}},this.tableLanguageOptions(),this.dataAvailable=!0}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}pageTitleCreator(){this.pageTitle=this.language.configure}addRole(){if(this.closeAlert(),null==this.roleName||""==this.roleName||this.roleName.length&&""==this.roleName.trim())return this.errorInfo=this.language["Role name cannot be empty"],this.error=!0,void this.commonOrgService.pageScrollTop();{let e=this.roleName.trim();if(""==e||e.length<2)return this.errorInfo=this.language["Invalid name"],this.error=!0,void this.commonOrgService.pageScrollTop()}var e={},t=ae("#permissionsForm").serializeArray();ae.each(t,function(t,i){void 0!==e[i.name]?("array"!=jQuery.type(e[i.name])&&(e[i.name]=[e[i.name]]),e[i.name].push(i.value)):e[i.name]=i.value});let i=e.scopeName,s=[];if(i)if("string"==typeof i)s.push({scopeName:i,action:e[i]?"read,write":"read"});else for(let a=0;a<i.length;a++)s.push({scopeName:i[a],action:e[i[a]]?"read,write":"read"});let n={apptype:this.appType,name:this.roleName,description:this.roleDescription?this.roleDescription:"",orgDefault:!0,orgId:this.ORG_ID};this.loader=!0,this.roleUpdateSubs=this.addRoleService.RoleUpdate(n,this.editRoleId).subscribe(e=>{this.addOtherDetailsToRole(s)},e=>{this.pageErrorHandle(e),this.loader=!1})}addOtherDetailsToRole(e){const t=[];let i=[];this.addedUsersList.forEach(e=>{i.push(e._id)});const s=this.addRoleService.AddUsersByRoleId(i,this.roleDatas._id).pipe((0,r.U)(e=>e),(0,l.K)(e=>(0,a.of)(e)));t.push(s);let n=[];n=e||[];const c=this.addRoleService.AddRolePermissions(n,this.roleDatas._id).pipe((0,r.U)(e=>e),(0,l.K)(e=>(0,a.of)(e)));t.push(c),this.combineLatest=(0,o.aj)(t),this.makeParallelAddRequest()}makeParallelAddRequest(){this.loader=!0,this.parallelReqSubscribtion=this.combineLatest.subscribe(e=>{if(this.loader=!1,e.length)for(let t of e)if(null!=t&&null!=t.error)return void this.pageErrorHandle(t);this.closeAlert(),this.successInfo=this.language["Users with roles data saved successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.goToOrgRoles()},1500)})}goBack(){this.goToOrgRoles()}processData(e){let t=e,i={};if(null!=t.permissions){for(let e=0;e<t.permissions.length;e++)t.permissions[e].implied||(i[t.permissions[e].scopeName]=t.permissions[e].action);this.selectedPermissions=i}else this.selectedPermissions=i}levelOneChange(e,t,i){ae("."+e).prop("checked",t),t?(ae("."+e+"_action").prop("disabled",!1),ae("#"+e+"_parent").prop("checked",t)):(ae("#"+e+"_parent").prop("checked",t),ae("."+e+"_action").prop("checked",t),ae("."+e+"_action").prop("disabled",!0)),this.getSlctdParams(),ae(".oneLevelDisable").prop("disabled",!0),"cloud.rbac.csc.calloutcome"===i.name?this.levelOneAction(i,t):this.renderChild(i,t)}levelTwoChange(e,t,i){var s,n,a,o;const r=e._id;if(ae("."+r).prop("checked",t),t){if(ae("."+i+"_action").prop("disabled",e.disableScope||!1),ae("#"+i+"_parent_span").show(),"cloud.rbac.csc.calloutcome.enforce"===e.name){const e=null===(o=(null===(a=this.allPermissions.find(e=>"cloud.rbac.csc.calloutcome"===e.name))||void 0===a?void 0:a.permissions).find(e=>"cloud.rbac.csc.calloutcome.createview"===e.name))||void 0===o?void 0:o._id;document.getElementById(`${e}_parent`).checked=!0,document.getElementById(`${e}_action`).checked=!0,document.getElementById(`${i}_action`).checked=!0}let s=!0;ae("."+i).each(function(){ae(this).prop("checked")||(s=!1)}),s&&(ae("#"+i+"_parent").prop("checked",t),ae("#"+i+"_parent_span").hide())}else{if("cloud.rbac.csc.calloutcome.createview"===e.name){const e=null===(n=(null===(s=this.allPermissions.find(e=>"cloud.rbac.csc.calloutcome"===e.name))||void 0===s?void 0:s.permissions).find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===n?void 0:n._id;document.querySelector(`#${e}_parent`).checked=!1}ae("#"+i+"_parent_span").show(),ae("#"+i+"_parent").prop("checked",t),ae("."+r+"_action").prop("disabled",!0)}this.getSlctdParams(),ae(`.${i}`).length==ae(`.${i}:checked`).length?(ae(`#${i}_parent`).prop("checked",!0).show(),ae(`#${i}_parent_span`).hide()):ae(`.${i}:checked`).length>0?(ae(`#${i}_parent`).prop("checked",!1).hide(),ae(`#${i}_parent_span`).show()):(ae(`#${i}_parent`).prop("checked",!1).show(),ae(`#${i}_parent_span`).hide()),"cloud.rbac.csc.calloutcome.enforce"===e.name&&(document.getElementById(`${r}_action`).disabled=!0)}levelThreeChange(e,t,i,s){const n=e._id;if(ae("."+n).prop("checked",t),t){ae("."+n+"_action").prop("disabled",e.disableScope||!1),ae("#"+i+"_parent_span").show(),ae("#"+s+"_parent_span").show(),ae("#"+i+"_parent").hide();let a=!0;ae("."+i).each(function(){ae(this).prop("checked")||(a=!1)}),a&&(ae("#"+i+"_parent").prop("checked",t),ae("#"+i+"_parent_span").hide(),ae("#"+i+"_parent").show()),a=!0,ae("."+s).each(function(){ae(this).prop("checked")||(a=!1)}),a&&(ae("#"+s+"_parent").prop("checked",t),ae("#"+s+"_parent_span").hide(),ae("#"+i+"_parent_span").hide())}else ae("#"+i+"_parent").prop("checked",t),ae("#"+s+"_parent").prop("checked",t),ae("#"+s+"_parent_span").show(),ae("#"+n+"_action").prop("disabled",!0),ae("#"+i+"_parent_span").show(),ae("#"+i+"_parent").hide();this.getSlctdParams(),ae(`.${i}`).length==ae(`.${i}:checked`).length?(ae(`#${i}_parent`).prop("checked",!0).show(),ae(`#${i}_parent_span`).hide()):ae(`.${i}:checked`).length>0?(ae(`#${i}_parent`).prop("checked",!1).hide(),ae(`#${i}_parent_span`).show()):(ae(`#${i}_parent`).prop("checked",!1).show(),ae(`#${i}_parent_span`).hide()),ae(`.${s}`).length==ae(`.${s}:checked`).length?(ae(`#${s}_parent`).prop("checked",!0).show(),ae(`#${s}_parent_span`).hide()):ae(`.${s}:checked`).length>0?(ae(`#${s}_parent`).prop("checked",!1).hide(),ae(`#${s}_parent_span`).show()):(ae(`#${s}_parent`).prop("checked",!1).show(),ae(`#${s}_parent_span`).hide())}levelFourChange(e,t,i,s,n){const a=e._id;if(t){ae("."+a+"_action").prop("disabled",e.disableScope||!1),ae("#"+s+"_parent_span").show(),ae("#"+n+"_parent_span").show(),ae("#"+s+"_parent").hide(),ae("#"+i+"_inner_parent").prop("checked",!0),ae("#"+i+"_inner_parent_span").show();let o=!0;ae("."+s).each(function(){ae(this).prop("checked")||(o=!1)}),o&&(ae("#"+s+"_parent").prop("checked",t),ae("#"+s+"_parent_span").hide(),ae("#"+s+"_parent").show()),o=!0,ae("."+i).each(function(){ae(this).prop("checked")||(o=!1)}),o&&(ae("#"+i+"_inner_parent").prop("checked",o),ae("#"+i+"_inner_parent_span").hide()),o=!0,ae("."+n).each(function(){ae(this).prop("checked")||(o=!1)}),o&&(ae("#"+n+"_parent").prop("checked",t),ae("#"+n+"_parent_span").hide(),ae("#"+s+"_parent_span").hide())}else{ae("#"+s+"_parent").prop("checked",t),ae("#"+n+"_parent").prop("checked",t),ae("#"+n+"_parent_span").show();let e=!0;ae("."+i).each(function(){ae(this).prop("checked")||(e=!1)}),e?(ae("#"+i+"_inner_parent_span").show(),ae("#"+i+"_inner_parent").prop("checked",e)):(ae("#"+i+"_inner_parent_span").hide(),ae("#"+i+"_inner_parent").prop("checked",e)),ae("#"+a+"_action").prop("disabled",!0),ae("#"+a+"_action").prop("checked",!1),ae("#"+s+"_parent_span").show(),ae("#"+s+"_parent").hide()}this.getSlctdParams(),ae(`.${a}`).length==ae(`.${a}:checked`).length?(ae(`#${i}_parent`).prop("checked",!0).show(),ae(`#${i}_parent_span`).hide()):ae(`.${a}:checked`).length>0?(ae(`#${i}_parent`).prop("checked",!1).hide(),ae(`#${i}_parent_span`).show()):(ae(`#${i}_parent`).prop("checked",!1).show(),ae(`#${i}_parent_span`).hide()),ae(`.${s}`).length==ae(`.${s}:checked`).length?(ae(`#${s}_parent`).prop("checked",!0).show(),ae(`#${s}_parent_span`).hide()):ae(`.${s}:checked`).length>0?(ae(`#${s}_parent`).prop("checked",!1).hide(),ae(`#${s}_parent_span`).show()):(ae(`#${s}_parent`).prop("checked",!1).show(),ae(`#${s}_parent_span`).hide()),ae(`.${n}`).length==ae(`.${n}:checked`).length?(ae(`#${n}_parent`).prop("checked",!0).show(),ae(`#${n}_parent_span`).hide()):ae(`.${n}:checked`).length>0?(ae(`#${n}_parent`).prop("checked",!1).hide(),ae(`#${n}_parent_span`).show()):(ae(`#${n}_parent`).prop("checked",!1).show(),ae(`#${n}_parent_span`).hide())}levelOneAction(e,t){var i,s,n;if(ae("."+e._id+"_action").not("[disabled]").prop("checked",t),(t&&ae(`a[id^="collapse-btn-${e.displayName}"]`).length&&"false"==ae(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded")||!t&&ae(`a[id^="collapse-btn-${e.displayName}"]`).length&&"true"==ae(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id),"cloud.rbac.csc.calloutcome"===e.name)if(t){const t=null===(n=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===n?void 0:n._id;document.querySelector(`#${t}_parent`).checked=!0,document.querySelector(`#${null==e?void 0:e._id}_parent`).checked=!0,document.querySelector(`#${null==e?void 0:e._id}_parent_span`).style.display="none"}else{const t=null===(i=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===i?void 0:i._id;document.querySelector(`#${t}_parent`).checked=!1,document.getElementById(`${e._id}_action`).disabled=!0;const n=null===(s=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.createview"===e.name))||void 0===s?void 0:s._id;document.getElementById(`${n}_parent`).checked&&(document.querySelector(`#${null==e?void 0:e._id}_parent`).checked=!1,document.querySelector(`#${null==e?void 0:e._id}_parent_span`).style.display="inline")}}levelTwoAction(e,t,i){var s;if(ae("."+e._id+"_action").not("[disabled]").prop("checked",t),ae(`.${i}_action:not(.firstLevel)`).length==ae(`.${i}_action:not(.firstLevel):checked`).length?ae(`#${i}_action.firstLevel`).prop("checked",!0):ae(`#${i}_action.firstLevel`).prop("checked",!1),(t&&ae(`a[id^="collapse-btn-${e.displayName}"]`).length&&"false"==ae(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded")||!t&&ae(`a[id^="collapse-btn-${e.displayName}"]`).length&&"true"==ae(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),!t){if("cloud.rbac.csc.calloutcome.createview"===e.name){const e=this.allPermissions.find(e=>"cloud.rbac.csc.calloutcome"===e.name),t=null===(s=null==e?void 0:e.permissions.find(e=>"cloud.rbac.csc.calloutcome.enforce"===e.name))||void 0===s?void 0:s._id;document.querySelector(`#${t}_parent`).checked=!1,document.querySelector(`#${null==e?void 0:e._id}_parent`).checked=!1,document.querySelector(`#${null==e?void 0:e._id}_parent_span`).style.display="inline",document.getElementById(`${e._id}_action`).disabled=!0}ae("#"+i+"_action").prop("checked",!1)}}levelThreeAction(e,t,i,s){ae("."+e._id+"_action").not("[disabled]").prop("checked",t),ae(`.${i}_action`).length==ae(`.${i}_action:checked`).length?ae(`#${i}_action`).prop("checked",!0):ae(`#${i}_action`).prop("checked",!1),ae(`.${s}_action:not(.firstLevel)`).length==ae(`.${s}_action:not(.firstLevel):checked`).length?ae(`#${s}_action.firstLevel`).prop("checked",!0):ae(`#${s}_action.firstLevel`).prop("checked",!1),(t&&ae(`a[id^="collapse-btn-${e.displayName}"]`).length&&"false"==ae(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded")||!t&&ae(`a[id^="collapse-btn-${e.displayName}"]`).length&&"true"==ae(`a[id^="collapse-btn-${e.displayName}"]`).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click()}levelFourAction(e,t,i,s){ae(`.${e}_action`).length==ae(`.${e}_action:checked`).length?ae(`#${t}_action`).prop("checked",!0):ae(`#${t}_action`).prop("checked",!1),ae(`.${i}_action`).length==ae(`.${i}_action:checked`).length?ae(`#${i}_action`).prop("checked",!0):ae(`#${i}_action`).prop("checked",!1),ae(`.${s}_action:not(.firstLevel)`).length==ae(`.${s}_action:not(.firstLevel):checked`).length?ae(`#${s}_action.firstLevel`).prop("checked",!0):ae(`#${s}_action.firstLevel`).prop("checked",!1)}goToOrgRoles(){this.router.navigate([`${this.MODULE}/roles`])}showCheckBox(e,t){ae("#"+e.target.id).hide();let i=e.target.id.split("_");this.levelOneChange(i[0],!0,t)}closeAlertWarning(){this.warning=!1}hideSearch(){setTimeout(()=>{ae("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),ae("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},10)}getSlctdParams(){var e={},t=ae("#permissionsForm").serializeArray();ae.each(t,function(t,i){void 0!==e[i.name]?("array"!=jQuery.type(e[i.name])&&(e[i.name]=[e[i.name]]),e[i.name].push(i.value)):e[i.name]=i.value});let i,s={};e.scopeName&&("object"!=typeof e.scopeName&&(e.scopeName=[e.scopeName]),e.scopeName.forEach(e=>{s[e]=e})),i="supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,s,!0):this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,s),i.scopes.forEach(e=>{var t;let s=i.selectedData[e]?`(${i.selectedData[e]})`:"";ae("#"+e+"_info").html(s);const n="true"==(null===(t=document.getElementById(`${e}_action`))||void 0===t?void 0:t.getAttribute("noWriteApi"));ae("#"+e+"_parent").prop("checked",i.checkedScopes[e]),ae("#"+e+"_action").prop("disabled",!!n||!i.checkedScopes[e]),!i.checkedScopes[e]&&this.scopeWriteAccess&&ae("#"+e+"_action").prop("checked",i.checkedScopes[e])," "===i.selectedData[e]&&ae("#"+e+"_info").html(""),i.selectedData[e]&&!i.checkedScopes[e]?(ae("#"+e+"_parent_span").show(),i.scopeNames[e]&&i.scopeNames[e].split(".").length>3&&ae("#"+e+"_parent").hide()):ae("#"+e+"_parent_span").hide(),i.checkedScopes[e]&&(ae("#"+e+"_parent").show(),ae("#"+e+"_parent_span").hide())})}showAllUserCheckBox(e){ae("#"+e.target.id).hide(),ae("#user-all-delete").prop("checked",!0),this.deleteUserCheckAll(!0)}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}closeModal(){this.closeAlertWarning(),this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}tablePageChange(){setTimeout(()=>{ae("#user-all-delete-span").hide(),ae("#user-all-delete").prop("checked",!1),this.deleteUserCheckAll(!1)},100)}expandCollapse(e){this.isExpanded.hasOwnProperty(e)?delete this.isExpanded[e]:this.isExpanded[e]=!0}renderChild(e,t){const i=document.querySelector(`a[id^="collapse-btn-${e.displayName}"]`);(t&&i&&"false"===i.getAttribute("aria-expanded")||!t&&i&&"true"===i.getAttribute("aria-expanded"))&&i.click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(g.Ye),d.Y36(u.v),d.Y36(h.d),d.Y36(p.U),d.Y36(m.F0),d.Y36(f.t6),d.Y36(Z.FF),d.Y36(b.Dx))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-role-details"]],viewQuery:function(e,t){if(1&e&&(d.Gf(x,7),d.Gf(T,7),d.Gf(s.G,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.deleteModal=e.first),d.iGM(e=d.CRH())&&(t.multiDeleteModal=e.first),d.iGM(e=d.CRH())&&(t.dtElement=e.first)}},hostBindings:function(e,t){1&e&&d.NdJ("click",function(e){return t.onClick(e)})},decls:5,vars:1,consts:[["class","container position-relative",4,"ngIf"],["deleteModal",""],["multiDeleteModal",""],[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","my-3"],[1,"col-md-4"],[1,"ccl-title"],[1,"col-md-8","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"row","my-3"],[1,"ccl-form"],["for","first",1,"f-w-600"],[1,"error"],["type","text","name","roleName","autocomplete","new-password",1,"",3,"placeholder","disabled","ngModel","keyup","ngModelChange"],[1,"col-md-8","pr-0"],["for","last",1,"f-w-600"],["type"," text","name","roleDescription","autocomplete","new-password",1,"",3,"placeholder","disabled","ngModel","ngModelChange"],[1,"col-md-12","ccl-title"],[1,"col-md-12"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],["class","col-md-6 my-3 alert alert-warning  fade show",4,"ngIf"],[1,"col-md-4","offset-md-0"],[1,"form-group"],["bindLabel","username",3,"items","ngModel","clearable","ngModelOptions","placeholder","notFoundText","ngModelChange"],[1,"col-md-2","offset-md-0"],[1,"btn-default","primary","mr-2",3,"disabled","click"],[1,"row","my-2"],[1,"col-md-8"],[1,"text-right","flat-right"],["class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-8",3,"hidden"],["id","add-role-users","width","100%","datatable","",1,"table","table-sm","row-border","w-100","roles-datatable",3,"dtOptions","dtTrigger"],[1,"header-color"],["class","checkbox-column user-all",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-3","offset-md-9","text-right","pr-0"],["class","btn-default primary md-btn",3,"disabled","click",4,"ngIf"],[1,"btn-default","btn-dft","py-1","ml-2",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"d-inline-flex","align-items-center"],[1,"d-inline-flex","mr-2"],["src","../../../assets/img/ic_success-circle-outline.svg"],[1,""],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"checkbox-permission"],["type","checkbox","name","scopeName",3,"id","disabled","checked","value","change"],[1,"checkbox-ui","check-intermediate",2,"display","none",3,"id","click"],[1,"check-caption"],[3,"id"],[1,"box-of-permission","col-md-4",3,"ngClass"],["class","multi-collapse",3,"ngClass",4,"ngIf"],["role","button",1,"collapse-btn",3,"click"],["class","fas fa-plus-circle collapse-btn",4,"ngIf"],["class","fas fa-minus-circle",4,"ngIf"],[1,"fas","fa-plus-circle","collapse-btn"],[1,"fas","fa-minus-circle"],[1,"switch"],["type","checkbox","value","true",3,"id","checked","name","ngClass","disabled","change"],[1,"slider","round"],[3,"ngClass"],[1,"multi-collapse",3,"ngClass"],["class","level2Role",4,"ngFor","ngForOf"],[1,"level2Role"],[1,"custom-flex","custom-check-permission","ml-3"],[1,"box-of-permission","col-md-4"],["type","checkbox","value","true",3,"id","checked","name","disabled","change"],["class","fas fa-plus-circle",4,"ngIf"],[1,"fas","fa-plus-circle"],["class","level3Role",4,"ngFor","ngForOf"],[1,"level3Role"],[1,"custom-flex","custom-check-permission","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-md-6","my-3","alert","alert-warning","fade","show"],[3,"innerHtml"],[1,"btn-default","primary","px-3","mx-3",3,"click"],[1,"checkbox-column","user-all"],["type","checkbox","name","websitecheck","id","user-all-delete",3,"checked","disabled","click"],["id","user-all-delete-span",1,"checkbox-ui",2,"display","none",3,"click"],["class","checkbox-column",4,"ngIf"],["class","actions",4,"ngIf"],[1,"checkbox-column"],["type","checkbox",3,"id","name","checked","value","disabled","click"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","pointer",3,"title","click"],["colspan","5",1,"no-data-available"],[1,"btn-default","primary","md-btn",3,"disabled","click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(d.YNc(0,ie,66,37,"div",0),d.YNc(1,se,14,5,"ng-template",null,1,d.W1O),d.YNc(3,ne,14,5,"ng-template",null,2,d.W1O)),2&e&&d.Q6J("ngIf",t.pageAvailable)},directives:[g.O5,A.Fj,A.JJ,A.On,A._Y,A.JL,A.F,g.sg,v.w9,s.G,g.mk],styles:['table.roles-addtable td.dataTables_empty{display:none}.back-link-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   u[_ngcontent-%COMP%]{font-size:13px}.box-of-permission[_ngcontent-%COMP%]:first-child{border-right:.5px solid #dddddd}.box-of-permission[_ngcontent-%COMP%]{padding:8px;border-top:.5px solid #dddddd;vertical-align:middle;font-size:13px!important}.fa-plus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.fa-minus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.checkbox-ui[_ngcontent-%COMP%]:before{content:"";display:block;width:7px;height:0;border:solid #ffffff;border-width:0 2px 2px 0;transform:rotate(0);position:absolute;left:-14px;top:0px!important}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px;height:13px}a[aria-expanded=true][_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{display:none}a[aria-expanded=false][_ngcontent-%COMP%]   .fa-minus-circle[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}.switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]:disabled + .slider[_ngcontent-%COMP%]{cursor:not-allowed}@media only screen and (max-width: 425px){.add-user-btn[_ngcontent-%COMP%]{margin-top:20px}}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:22px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;right:2px;bottom:2px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0279ff}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #0279ff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(16px)}.slider.round[_ngcontent-%COMP%]{border-radius:18px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}input[type=checkbox][_ngcontent-%COMP%]{border:1px solid #ccc!important;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.custom-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.emptyRowSwitch[_ngcontent-%COMP%]{height:45px}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px!important;height:13px!important}.checkbox-permission[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;margin-top:3.5px}  table.roles-datatable td.dataTables_empty{display:none}.user-all[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px;height:13px}.noWriteApi[_ngcontent-%COMP%]{opacity:.5}input[type=checkbox][_ngcontent-%COMP%] + .check-intermediate[_ngcontent-%COMP%]{left:0px!important;margin-top:2px!important}.checkbox-permission[_ngcontent-%COMP%]{position:relative}.checkbox-permission[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute}.checkbox-permission[_ngcontent-%COMP%]   .check-intermediate[_ngcontent-%COMP%]{position:absolute!important}.check-intermediate[_ngcontent-%COMP%] + span.check-caption[_ngcontent-%COMP%]{margin-left:18px}.custom-check-permission[_ngcontent-%COMP%]   .check-intermediate[_ngcontent-%COMP%] + span.check-caption[_ngcontent-%COMP%]{margin-left:8px}span#user-all-delete-span[_ngcontent-%COMP%]{top:0px!important}']}),e})()},83909:function(e,t,i){i.d(t,{y:function(){return me}});var s=i(25917),n=i(9112),a=i(35758),o=i(92340),r=i(88002),l=i(5304),c=i(37716),d=i(49342),g=i(39895),u=i(53668),h=i(38048),p=i(12664),m=i(7450),f=i(39075),Z=i(38583),b=i(23771);const A=["deleteModal"],v=["multiDeleteModal"];function x(e,t){if(1&e&&(c.TgZ(0,"div",18),c.TgZ(1,"div",19),c.TgZ(2,"div",20),c.TgZ(3,"span",21),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(4),c.Oqu(e.language.Loading)}}function T(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",22),c.TgZ(1,"span",23),c._UZ(2,"img",24),c.qZA(),c.TgZ(3,"button",25),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).closeAlert()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",26),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",e.errorInfo,c.oJD)}}function _(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",27),c.TgZ(1,"button",25),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).closeAlert()}),c._UZ(2,"span"),c.qZA(),c.TgZ(3,"div",28),c.TgZ(4,"span",29),c._UZ(5,"img",30),c.qZA(),c._UZ(6,"div",26),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(6),c.Q6J("innerHtml",e.successInfo,c.oJD)}}function C(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"div",17),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.hij("",e.language.supportcloudroles," ")}}function q(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",36),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).deleteMultiRoles("supportCloud")}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.language.delete)}}function w(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",31),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.YNc(3,q,2,1,"button",34),c.TgZ(4,"button",35),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addRole("supportCloud")}),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngIf",0!=e.supportCloudDeletes.length),c.xp6(2),c.Oqu(e.language.addnewrole)}}function O(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",52),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw(3).roleDelete(t)}),c.qZA()}if(2&e){const e=c.oxw(4);c.s9C("title",e.language.delete)}}function S(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",47),c.TgZ(2,"input",48),c.NdJ("change",function(t){const i=c.CHM(e).$implicit;return c.oxw(3).supportCloudCheckOne(i,t.target.checked)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",49),c.TgZ(8,"i",50),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(3).gotoRoleDetail(t,"supportCloud")}),c.qZA(),c.YNc(9,O,1,1,"i",51),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(3);c.xp6(2),c.MGl("name","support_del_",e._id,""),c.s9C("value",e.roles),c.s9C("id",e._id),c.Q6J("checked",i.supportCloudChecked)("disabled",!i.scopeWriteAccess),c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||""),c.xp6(2),c.s9C("title",i.language.Edit),c.xp6(1),c.Q6J("ngIf",i.scopeWriteAccess)}}function y(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"table",38),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c.TgZ(4,"th",40),c.TgZ(5,"input",41),c.NdJ("click",function(t){return c.CHM(e),c.oxw(2).supportCloudCheckall(t.target.checked)}),c.qZA(),c.TgZ(6,"span",42),c.NdJ("click",function(t){return c.CHM(e),c.oxw(2).showAllUserCheckBox(t,"supportCloud")}),c.qZA(),c.qZA(),c.TgZ(7,"th",43),c._uU(8),c.qZA(),c.TgZ(9,"th",44),c._uU(10),c.qZA(),c.TgZ(11,"th",45),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,S,10,9,"tr",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(4),c.Q6J("disabled",0==(null==e.supportCloudRolesData?null:e.supportCloudRolesData.length)||!e.scopeWriteAccess),c.xp6(3),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Oqu(e.language.Action),c.xp6(2),c.Q6J("ngForOf",e.supportCloudRolesData)}}function M(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"div",17),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.Oqu(e.language.marketingcloudroles)}}function k(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",56),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).deleteMultiRoles("marketingCloud")}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.language.delete)}}function U(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",53),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.YNc(3,k,2,1,"button",54),c.TgZ(4,"button",55),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addRole("marketingCloud")}),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngIf",0!=e.marketingCloudDeletes.length),c.xp6(2),c.Oqu(e.language.addnewrole)}}function D(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",62),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw(3).roleDelete(t)}),c.qZA()}if(2&e){const e=c.oxw(4);c.s9C("title",e.language.delete)}}function N(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",47),c.TgZ(2,"input",48),c.NdJ("change",function(t){const i=c.CHM(e).$implicit;return c.oxw(3).marketingCloudCheckedOne(i,t.target.checked)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",49),c.TgZ(8,"i",60),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(3).gotoRoleDetail(t,"marketingCloud")}),c.qZA(),c.YNc(9,D,1,1,"i",61),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(3);c.xp6(2),c.MGl("name","marketing_del_",e._id,""),c.s9C("value",e.roles),c.s9C("id",e._id),c.Q6J("checked",i.marketingCloudChecked)("disabled",!i.scopeWriteAccess),c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||""),c.xp6(2),c.s9C("title",i.language.Edit),c.xp6(1),c.Q6J("ngIf",i.scopeWriteAccess)}}function I(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"table",57),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c.TgZ(4,"th",40),c.TgZ(5,"input",58),c.NdJ("click",function(t){return c.CHM(e),c.oxw(2).marketingCloudCheckedAll(t.target.checked)}),c.qZA(),c.TgZ(6,"span",59),c.NdJ("click",function(t){return c.CHM(e),c.oxw(2).showAllUserCheckBox(t,"marketingCloud")}),c.qZA(),c.qZA(),c.TgZ(7,"th",43),c._uU(8),c.qZA(),c.TgZ(9,"th",44),c._uU(10),c.qZA(),c.TgZ(11,"th",45),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,N,10,9,"tr",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(4),c.Q6J("disabled",0==(null==e.marketingCloudRolesData?null:e.marketingCloudRolesData.length)||!e.scopeWriteAccess),c.xp6(3),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Oqu(e.language.Action),c.xp6(2),c.Q6J("ngForOf",e.marketingCloudRolesData)}}function E(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"div",17),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.hij(" ",e.language.smarthome," ")}}function F(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",65),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).deleteMultiRoles("smartHome")}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.language.delete)}}function P(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.YNc(3,F,2,1,"button",63),c.TgZ(4,"button",64),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addRole("smartHome")}),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngIf",0!=e.smartHomeDeletes.length),c.xp6(2),c.Oqu(e.language.addnewrole)}}function L(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",72),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw(4).roleDelete(t)}),c.qZA()}if(2&e){const e=c.oxw(5);c.s9C("title",e.language.delete)}}function J(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",47),c.TgZ(2,"input",69),c.NdJ("click",function(t){const i=c.CHM(e).$implicit;return c.oxw(4).smartHomeCheckedOne(i,t.target.checked)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",49),c.TgZ(8,"i",70),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(4).gotoRoleDetail(t,"smartHome")}),c.qZA(),c.YNc(9,L,1,1,"i",71),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(4);c.xp6(2),c.MGl("name","smarthome_del_",e._id,""),c.s9C("id",e._id),c.s9C("value",e.roles),c.Q6J("checked",i.smartHomeChecked)("disabled",!i.scopeWriteAccess),c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||""),c.xp6(2),c.s9C("title",i.language.Edit),c.xp6(1),c.Q6J("ngIf",i.scopeWriteAccess)}}function R(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"table",66),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c.TgZ(4,"th",40),c.TgZ(5,"input",67),c.NdJ("click",function(t){return c.CHM(e),c.oxw(3).smartHomeCheckedAll(t.target.checked)}),c.qZA(),c.TgZ(6,"span",68),c.NdJ("click",function(t){return c.CHM(e),c.oxw(3).showAllUserCheckBox(t,"smartHome")}),c.qZA(),c.qZA(),c.TgZ(7,"th",43),c._uU(8),c.qZA(),c.TgZ(9,"th",44),c._uU(10),c.qZA(),c.TgZ(11,"th",45),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,J,10,9,"tr",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(4),c.Q6J("disabled",0==(null==e.smartHomeRoles?null:e.smartHomeRoles.length)||!e.scopeWriteAccess),c.xp6(3),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Oqu(e.language.Action),c.xp6(2),c.Q6J("ngForOf",e.smartHomeRoles)}}function H(e,t){if(1&e&&(c.TgZ(0,"div",13),c.YNc(1,R,15,6,"div",11),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.dataAvailable)}}function Y(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"div",17),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.hij(" ",e.language.faRoles," ")}}function Q(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",75),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).deleteMultiRoles("fa")}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.language.delete)}}function z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.YNc(3,Q,2,1,"button",73),c.TgZ(4,"button",74),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addRole("fa")}),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngIf",0!=e.faDeletes.length),c.xp6(2),c.Oqu(e.language.addnewrole)}}function B(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",83),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw(4).roleDelete(t)}),c.qZA()}if(2&e){const e=c.oxw(5);c.s9C("title",e.language.delete)}}function j(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",47),c.TgZ(2,"input",80),c.NdJ("click",function(t){const i=c.CHM(e).$implicit;return c.oxw(4).faCheckedOne(i,t.target.checked)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",49),c.TgZ(8,"i",81),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(4).gotoRoleDetail(t,"fa")}),c.qZA(),c.YNc(9,B,1,1,"i",82),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(4);c.xp6(2),c.MGl("name","fa_del_",e._id,""),c.s9C("id",e._id),c.s9C("value",e.roles),c.Q6J("checked",i.faChecked)("disabled",!i.scopeWriteAccess),c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||""),c.xp6(2),c.s9C("title",i.language.Edit),c.xp6(1),c.Q6J("ngIf",i.scopeWriteAccess)}}function V(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"table",77),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c.TgZ(4,"th",40),c.TgZ(5,"input",78),c.NdJ("click",function(t){return c.CHM(e),c.oxw(3).faCheckedAll(t.target.checked)}),c.qZA(),c.TgZ(6,"span",79),c.NdJ("click",function(t){return c.CHM(e),c.oxw(3).showAllUserCheckBox(t,"fa")}),c.qZA(),c.qZA(),c.TgZ(7,"th",43),c._uU(8),c.qZA(),c.TgZ(9,"th",44),c._uU(10),c.qZA(),c.TgZ(11,"th",45),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,j,10,9,"tr",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(4),c.Q6J("disabled",0==(null==e.faRoles?null:e.faRoles.length)||!e.scopeWriteAccess),c.xp6(3),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Oqu(e.language.Action),c.xp6(2),c.Q6J("ngForOf",e.faRoles)}}function G(e,t){if(1&e&&(c.TgZ(0,"div",76),c.YNc(1,V,15,6,"div",11),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.dataAvailable)}}function W(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"div",17),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(2),c.hij(" ",e.language.cco_roles," ")}}function X(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",86),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).deleteMultiRoles("cco")}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.language.delete)}}function K(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.YNc(3,X,2,1,"button",84),c.TgZ(4,"button",85),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addRole("cco")}),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngIf",0!=e.ccoDeletes.length),c.xp6(2),c.Oqu(e.language.addnewrole)}}function ee(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",92),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw(4).roleDelete(t)}),c.qZA()}if(2&e){const e=c.oxw(5);c.s9C("title",e.language.delete)}}function te(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",47),c.TgZ(2,"input",80),c.NdJ("click",function(t){const i=c.CHM(e).$implicit;return c.oxw(4).ccoCheckedOne(i,t.target.checked)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",49),c.TgZ(8,"i",90),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(4).gotoRoleDetail(t,"cco")}),c.qZA(),c.YNc(9,ee,1,1,"i",91),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(4);c.xp6(2),c.MGl("name","cco_del_",e._id,""),c.s9C("id",e._id),c.s9C("value",e.roles),c.Q6J("checked",i.ccoChecked)("disabled",!i.scopeWriteAccess),c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||""),c.xp6(2),c.s9C("title",i.language.Edit),c.xp6(1),c.Q6J("ngIf",i.scopeWriteAccess)}}function ie(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"table",87),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c.TgZ(4,"th",40),c.TgZ(5,"input",88),c.NdJ("click",function(t){return c.CHM(e),c.oxw(3).ccoCheckedAll(t.target.checked)}),c.qZA(),c.TgZ(6,"span",89),c.NdJ("click",function(t){return c.CHM(e),c.oxw(3).showAllUserCheckBox(t,"cco")}),c.qZA(),c.qZA(),c.TgZ(7,"th",43),c._uU(8),c.qZA(),c.TgZ(9,"th",44),c._uU(10),c.qZA(),c.TgZ(11,"th",45),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,te,10,9,"tr",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(4),c.Q6J("disabled",0==(null==e.ccoRoles?null:e.ccoRoles.length)||!e.scopeWriteAccess),c.xp6(3),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Oqu(e.language.Action),c.xp6(2),c.Q6J("ngForOf",e.ccoRoles)}}function se(e,t){if(1&e&&(c.TgZ(0,"div",76),c.YNc(1,ie,15,6,"div",11),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("ngIf",e.dataAvailable)}}function ne(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",95),c.NdJ("click",function(){return c.CHM(e),c.oxw(3).deleteMultiRoles("foundation")}),c._uU(1),c.qZA()}if(2&e){const e=c.oxw(3);c.xp6(1),c.Oqu(e.language.delete)}}function ae(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",32),c.TgZ(2,"div",33),c.YNc(3,ne,2,1,"button",93),c.TgZ(4,"button",94),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).addRole("foundation")}),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("ngIf",0!=e.foundationDeletes.length),c.xp6(2),c.Oqu(e.language.addnewrole)}}function oe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",101),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().$implicit;return c.oxw(3).roleDelete(t)}),c.qZA()}if(2&e){const e=c.oxw(4);c.s9C("title",e.language.delete)}}function re(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",47),c.TgZ(2,"input",69),c.NdJ("click",function(t){const i=c.CHM(e).$implicit;return c.oxw(3).foundationCheckedOne(i,t.target.checked)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",49),c.TgZ(8,"i",99),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(3).gotoRoleDetail(t,"foundation")}),c.qZA(),c.YNc(9,oe,1,1,"i",100),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(3);c.xp6(2),c.MGl("name","foundation_del_",e._id,""),c.s9C("id",e._id),c.s9C("value",e.roles),c.Q6J("checked",i.foundationChecked)("disabled",!i.scopeWriteAccess),c.xp6(2),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||""),c.xp6(3),c.Q6J("ngIf",i.scopeWriteAccess)}}function le(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"table",96),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c.TgZ(4,"th",40),c.TgZ(5,"input",97),c.NdJ("click",function(t){return c.CHM(e),c.oxw(2).foundationCheckedAll(t.target.checked)}),c.qZA(),c.TgZ(6,"span",98),c.NdJ("click",function(t){return c.CHM(e),c.oxw(2).showAllUserCheckBox(t,"foundation")}),c.qZA(),c.qZA(),c.TgZ(7,"th",43),c._uU(8),c.qZA(),c.TgZ(9,"th",44),c._uU(10),c.qZA(),c.TgZ(11,"th",45),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,re,10,8,"tr",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(4),c.Q6J("disabled",0==(null==e.foundationRoles?null:e.foundationRoles.length)||!e.scopeWriteAccess),c.xp6(3),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Oqu(e.language.Action),c.xp6(2),c.Q6J("ngForOf",e.foundationRoles)}}function ce(e,t){if(1&e&&(c.TgZ(0,"tr"),c._UZ(1,"td"),c.TgZ(2,"td"),c._uU(3),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.qZA()),2&e){const e=t.$implicit;c.xp6(3),c.Oqu(e.name),c.xp6(2),c.Oqu(e.description||"")}}function de(e,t){if(1&e&&(c.TgZ(0,"div",37),c.TgZ(1,"table",102),c.TgZ(2,"thead",39),c.TgZ(3,"tr"),c._UZ(4,"th",103),c.TgZ(5,"th",43),c._uU(6),c.qZA(),c.TgZ(7,"th",104),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"tbody"),c.YNc(10,ce,6,2,"tr",46),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("dtOptions",e.dtOptions),c.xp6(5),c.Oqu(e.language.roles),c.xp6(2),c.Oqu(e.language.Decription),c.xp6(2),c.Q6J("ngForOf",e.systemRoles)}}function ge(e,t){if(1&e&&(c.TgZ(0,"div",4),c.YNc(1,x,5,1,"div",5),c.YNc(2,T,6,1,"div",6),c.YNc(3,_,7,1,"div",7),c.YNc(4,C,3,1,"div",8),c.YNc(5,w,6,2,"div",9),c.TgZ(6,"div",10),c.YNc(7,y,15,6,"div",11),c.qZA(),c.YNc(8,M,3,1,"div",8),c.YNc(9,U,6,2,"div",12),c.TgZ(10,"div",13),c.YNc(11,I,15,6,"div",11),c.qZA(),c.YNc(12,E,3,1,"div",8),c.YNc(13,P,6,2,"div",14),c.YNc(14,H,2,1,"div",14),c.YNc(15,Y,3,1,"div",8),c.YNc(16,z,6,2,"div",14),c.YNc(17,G,2,1,"div",15),c.YNc(18,W,3,1,"div",8),c.YNc(19,K,6,2,"div",14),c.YNc(20,se,2,1,"div",15),c.TgZ(21,"div",16),c.TgZ(22,"div",17),c._uU(23),c.qZA(),c.qZA(),c.YNc(24,ae,6,2,"div",14),c.TgZ(25,"div",13),c.YNc(26,le,15,6,"div",11),c.qZA(),c.TgZ(27,"div",16),c.TgZ(28,"div",17),c._uU(29),c.qZA(),c.qZA(),c.TgZ(30,"div",13),c.YNc(31,de,11,4,"div",11),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",!e.dataAvailable),c.xp6(1),c.Q6J("ngIf",e.error),c.xp6(1),c.Q6J("ngIf",e.success),c.xp6(1),c.Q6J("ngIf",e.supportCloudShow),c.xp6(1),c.Q6J("ngIf",e.supportCloudShow&&e.scopeWriteAccess),c.xp6(1),c.Q6J("ngClass",e.tableDisplay?"row my-2 display-visible":"row my-2 visiblity-hidden"),c.xp6(1),c.Q6J("ngIf",e.dataAvailable),c.xp6(1),c.Q6J("ngIf",e.marketingCloudShow&&e.scopeWriteAccess),c.xp6(1),c.Q6J("ngIf",e.marketingCloudShow&&e.scopeWriteAccess),c.xp6(2),c.Q6J("ngIf",e.dataAvailable),c.xp6(1),c.Q6J("ngIf",e.smartHomeShow),c.xp6(1),c.Q6J("ngIf",e.smartHomeShow&&e.scopeWriteAccess),c.xp6(1),c.Q6J("ngIf",e.smartHomeShow),c.xp6(1),c.Q6J("ngIf",e.faShow),c.xp6(1),c.Q6J("ngIf",e.faShow&&e.scopeWriteAccess),c.xp6(1),c.Q6J("ngIf",!1),c.xp6(1),c.Q6J("ngIf",e.ccoRoleShow),c.xp6(1),c.Q6J("ngIf",e.ccoRoleShow&&e.scopeWriteAccess),c.xp6(1),c.Q6J("ngIf",e.ccoRoleShow),c.xp6(3),c.hij(" ",e.language.foundation_roles," "),c.xp6(1),c.Q6J("ngIf",e.foundationRoleShow&&e.scopeWriteAccess),c.xp6(2),c.Q6J("ngIf",e.dataAvailable),c.xp6(3),c.hij(" ",e.language.systemroles," "),c.xp6(2),c.Q6J("ngIf",e.dataAvailable)}}function ue(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",105),c.TgZ(2,"h1",106),c._uU(3,"Page under construction!"),c.qZA(),c.TgZ(4,"h4"),c._uU(5,"Will be available soon"),c.qZA(),c.qZA(),c.TgZ(6,"div",107),c.TgZ(7,"div",108),c._UZ(8,"img",109),c.qZA(),c.qZA(),c.qZA())}function he(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",110),c.TgZ(1,"h4",111),c._uU(2),c.qZA(),c.TgZ(3,"button",112),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeModal()}),c._UZ(4,"span",113),c.qZA(),c.qZA(),c.TgZ(5,"div",114),c._uU(6),c._UZ(7,"br"),c._uU(8),c.qZA(),c.TgZ(9,"div",115),c.TgZ(10,"button",116),c.NdJ("click",function(){return c.CHM(e),c.oxw().confirmDelete()}),c._uU(11),c.qZA(),c.TgZ(12,"button",117),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeModal()}),c._uU(13),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.modalTitle),c.xp6(4),c.hij(" ",e.language["Are you sure you want to delete this Role"],"?"),c.xp6(2),c.hij(" (",e.modalInfo,") "),c.xp6(3),c.Oqu(e.language.yes),c.xp6(2),c.Oqu(e.language.no)}}function pe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",110),c.TgZ(1,"h4",111),c._uU(2),c.qZA(),c.TgZ(3,"button",112),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeModal()}),c._UZ(4,"span",113),c.qZA(),c.qZA(),c.TgZ(5,"div",114),c._uU(6),c._UZ(7,"br"),c._uU(8),c.qZA(),c.TgZ(9,"div",115),c.TgZ(10,"button",116),c.NdJ("click",function(){return c.CHM(e),c.oxw().confirmDeleteSecleted()}),c._uU(11),c.qZA(),c.TgZ(12,"button",117),c.NdJ("click",function(){return c.CHM(e),c.oxw().closeModal()}),c._uU(13),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.modalTitle),c.xp6(4),c.hij(" ",e.language["Are you sure you want to delete these selected Roles"],"?"),c.xp6(2),c.hij(" (",e.modalInfo,") "),c.xp6(3),c.Oqu(e.language.yes),c.xp6(2),c.Oqu(e.language.no)}}let me=(()=>{class e{constructor(e,t,i,s,n,a,o){this.commonOrgService=e,this.router=t,this.organizationApiService=i,this.sso=s,this.dialogService=n,this.translateService=a,this.titleService=o,this.tableDisplay=!1,this.pageAvailable=!1,this.supportCloudRolesData=[],this.marketingCloudRolesData=[],this.smartHomeRoles=[],this.faRoles=[],this.systemRoles=[],this.foundationRoles=[],this.ccoRoles=[],this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthChange:!1,ordering:!1,searching:!1,drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.errorInfo="",this.successInfo="",this.supportCloudChecked=!1,this.supportCloudDataSelcted=[],this.marketingCloudChecked=!1,this.marketingCloudCheckedSelected=[],this.smartHomeChecked=!1,this.smartHomeCheckedSelected=[],this.faChecked=!1,this.faSelected=[],this.ccoChecked=!1,this.ccoSelected=[],this.foundationChecked=!1,this.foundationSelected=[],this.dataAvailable=!1,this.supportCloudDeletes=[],this.marketingCloudDeletes=[],this.smartHomeDeletes=[],this.faDeletes=[],this.deleteRoles=[],this.ccoDeletes=[],this.foundationDeletes=[],this.MODULE="calixAdmin",this.supportCloudShow=!1,this.marketingCloudShow=!1,this.smartHomeShow=!1,this.faShow=!1,this.pageReady=!1,this.ccoRoleShow=!1,this.foundationRoleShow=!1,this.scopeWriteAccess=!1;let r=this.router.url;this.ORG_ID=this.sso.getOrganizationID(r),this.MODULE=this.sso.getRedirectModule(r),this.sso.getScopes(),this.scopeWriteAccess=this.checkScope(),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.dataAvailable=!1,this.setTableOptions("language"),this.titleService.setTitle(`${this.language.roles} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.commonOrgService.currentPageAdder("roles"),this.getData(),this.frTable=this.translateService.fr,this.titleService.setTitle(`${this.language.roles} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}onClick(e){let t=e.target.className,i=e.target.localName,s="";"a"==i&&(s=e.target.attributes["aria-controls"].value),t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"supportCloud-table"==s?this.supportTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"marketingCloud-table"==s?this.marketingTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"smartHome-table"==s?this.smartHomeTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"fa-table"==s?this.faTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"cco-table"==s?this.ccoTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"foundation-table"==s&&this.foundationTablePageChange()}ngOnInit(){this.showConstructionPage=!o.N.VALIDATE_SCOPE,this.closeAlert(),this.tableLanguageOptions()}ngOnDestroy(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.delRoleSubs&&this.delRoleSubs.unsubscribe()}getData(){const e=[];[`${o.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/roles`].forEach(t=>{const i=this.organizationApiService.callRestApi(t).pipe((0,r.U)(e=>e),(0,l.K)(e=>(0,s.of)(e)));e.push(i)}),this.combineLatest=(0,n.aj)(e),this.makeParallelRequest()}makeParallelRequest(){this.parallelReqSubscribtion=this.combineLatest.subscribe(e=>{let t=e[0];if(this.showRoles(),this.systemRoles=[],this.marketingCloudRolesData=[],this.supportCloudRolesData=[],this.smartHomeRoles=[],this.faRoles=[],this.foundationRoles=[],this.ccoRoles=[],this.resetAllDeletes(),null!=t&&null!=t.error)return this.pageErrorHandle(t),void(this.dataAvailable=!0);t.forEach(e=>{0==e.apptype?this.systemRoles.push(e):118==e.apptype?this.supportCloudRolesData.push(e):119==e.apptype?this.marketingCloudRolesData.push(e):"shad"==e.apptype?this.smartHomeRoles.push(e):102==e.apptype?this.ccoRoles.push(e):200==e.apptype&&this.foundationRoles.push(e)}),this.dataAvailable=!0,setTimeout(()=>{this.tableDisplay=!0},100)})}setTableOptions(e){this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthChange:!1,ordering:!1,searching:!1,drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.tableLanguageOptions(e),e||setTimeout(()=>{this.dataAvailable=!0},200)}roleDelete(e){this.deleteData=e,this.modalTitle=this.language["Delete Role"],this.modalInfo=`${e.name}`,this.openDeleteModal()}confirmDelete(){this.closeModal(),this.delRoleSubs=this.organizationApiService.RoleDelete(this.deleteData._id).subscribe(e=>{this.dataAvailable=!1,this.closeAlert(),this.getData()},e=>{this.pageErrorHandle(e),this.dataAvailable=!0})}someClickHandler(e){}addRole(e){sessionStorage.setItem("calixAdminAddRole",e),this.router.navigate([`${this.MODULE}/addRole`])}gotoRoleDetail(e,t){sessionStorage.setItem("calixAdminAddRole",t),sessionStorage.setItem("calixAdminAddRoleId",e._id),this.router.navigate([`${this.MODULE}/roleDetails`])}supportCloudCheckall(e){let t=0;var i=this;let s;e?$('input[name^="support_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!0),s=$(this).attr("id"),i.supportCloudRolesData.forEach(e=>{e._id==s&&i.supportCloudDeletes.push(e)}),t++}):$('input[name^="support_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!1),i.supportCloudDeletes=[],t++})}supportCloudCheckOne(e,t){if(t){this.supportCloudDeletes.push(e);let t=$('input[name^="support_del"]').length;const i=5;this.supportCloudDeletes.length>=t&&t==i?($("#supportCloudCheckall").prop("checked",!0),$("#supportCloudCheckall-span").hide()):this.supportCloudDeletes.length>=t&&t!=i?(this.tableMinView=this.supportCloudDeletes.length,this.tableMinView>=t&&(document.getElementById("supportCloudCheckall").checked=!0,document.getElementById("supportCloudCheckall-span").style.display="none")):$("#supportCloudCheckall-span").show()}else{this.supportCloudDeletes=this.supportCloudDeletes.filter(t=>t._id!=e._id);let t=$('input[name^="support_del"]').length;this.supportCloudDeletes.length?this.supportCloudDeletes.length!=t||this.tableMinView!=t?($("#supportCloudCheckall").prop("checked",!1),$("#supportCloudCheckall-span").show()):$("#supportCloudCheckall-span").hide():($("#supportCloudCheckall").prop("checked",!1),$("#supportCloudCheckall-span").hide())}}showAllUserCheckBox(e,t){$("#"+e.target.id).hide(),"supportCloud"==t?($("#supportCloudCheckall").prop("checked",!0),this.supportCloudCheckall(!0)):"marketingCloud"==t?($("#marketingCloudCheckedAll").prop("checked",!0),this.marketingCloudCheckedAll(!0)):"smartHome"==t?($("#smartHomeCheckedAll").prop("checked",!0),this.smartHomeCheckedAll(!0)):"cco"==t?($("#ccoCheckedAll").prop("checked",!0),this.ccoCheckedAll(!0)):"foundation"==t?(document.getElementById("foundationCheckedAll").checked=!0,this.foundationCheckedAll(!0)):($("#faCheckedAll").prop("checked",!0),this.faCheckedAll(!0))}marketingCloudCheckedAll(e){let t=0;var i=this;let s;e?$('input[name^="marketing_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!0),s=$(this).attr("id"),i.marketingCloudRolesData.forEach(e=>{e._id==s&&i.marketingCloudDeletes.push(e)}),t++}):$('input[name^="marketing_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!1),i.marketingCloudDeletes=[],t++})}marketingCloudCheckedOne(e,t){if(t){this.marketingCloudDeletes.push(e);let t=$('input[name^="marketing_del"]').length;const i=5;this.marketingCloudDeletes.length>=t&&t==i?($("#marketingCloudCheckedAll").prop("checked",!0),$("#marketingCloudCheckedAll-span").hide()):this.marketingCloudDeletes.length>=t&&t!=i?(this.tableMinView=this.marketingCloudDeletes.length,this.tableMinView>=t&&(document.getElementById("marketingCloudCheckedAll").checked=!0,document.getElementById("marketingCloudCheckedAll-span").style.display="none")):$("#marketingCloudCheckedAll-span").show()}else{this.marketingCloudDeletes=this.marketingCloudDeletes.filter(t=>t._id!=e._id);let t=$('input[name^="marketing_del"]').length;this.marketingCloudDeletes.length?this.marketingCloudDeletes.length!=t||this.tableMinView!=t?($("#marketingCloudCheckedAll").prop("checked",!1),$("#marketingCloudCheckedAll-span").show()):$("#marketingCloudCheckedAll-span").hide():($("#marketingCloudCheckedAll").prop("checked",!1),$("#marketingCloudCheckedAll-span").hide())}}smartHomeCheckedAll(e){let t=0;var i=this;let s;e?$('input[name^="smarthome_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!0),s=$(this).attr("id"),i.smartHomeRoles.forEach(e=>{e._id==s&&i.smartHomeDeletes.push(e)}),t++}):$('input[name^="smarthome_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!1),i.smartHomeDeletes=[],t++})}smartHomeCheckedOne(e,t){if(t){this.smartHomeDeletes.push(e);let t=$('input[name^="smarthome_del"]').length;const i=5;this.smartHomeDeletes.length>=t&&t==i?($("#smartHomeCheckedAll").prop("checked",!0),$("#smartHomeCheckedAll-span").hide()):this.smartHomeDeletes.length>=t&&t!=i?(this.tableMinView=this.smartHomeDeletes.length,this.tableMinView>=t&&(document.getElementById("smartHomeCheckedAll").checked=!0,document.getElementById("smartHomeCheckedAll-span").style.display="none")):$("#smartHomeCheckedAll-span").show()}else{this.smartHomeDeletes=this.smartHomeDeletes.filter(t=>t._id!=e._id);let t=$('input[name^="smarthome_del"]').length;this.smartHomeDeletes.length?this.smartHomeDeletes.length!=t||this.tableMinView!=t?($("#smartHomeCheckedAll").prop("checked",!1),$("#smartHomeCheckedAll-span").show()):$("#smartHomeCheckedAll-span").hide():($("#smartHomeCheckedAll").prop("checked",!1),$("#smartHomeCheckedAll-span").hide())}}faCheckedAll(e){let t=0;var i=this;let s;e?$('input[name^="fa_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!0),s=$(this).attr("id"),i.faRoles.forEach(e=>{e._id==s&&i.faDeletes.push(e)}),t++}):$('input[name^="fa_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!1),i.faDeletes=[],t++})}faCheckedOne(e,t){if(t){this.faDeletes.push(e);let t=$('input[name^="fa_del"]').length;const i=5;this.faDeletes.length>=t&&t==i?($("#faCheckedAll").prop("checked",!0),$("#faCheckedAll-span").hide()):this.faDeletes.length>=t&&t!=i?(this.tableMinView=this.faDeletes.length,this.tableMinView>=t&&(document.getElementById("faCheckedAll").checked=!0,document.getElementById("faCheckedAll-span").style.display="none")):$("#faCheckedAll-span").show()}else{this.faDeletes=this.faDeletes.filter(t=>t._id!=e._id);let t=$('input[name^="fa_del"]').length;this.faDeletes.length?this.faDeletes.length!=t||this.tableMinView!=t?($("#faCheckedAll").prop("checked",!1),$("#faCheckedAll-span").show()):$("#faCheckedAll-span").hide():($("#faCheckedAll").prop("checked",!1),$("#faCheckedAll-span").hide())}}ccoCheckedAll(e){let t=0;var i=this;let s;e?$('input[name^="cco_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!0),s=$(this).attr("id"),i.ccoRoles.forEach(e=>{e._id==s&&i.ccoDeletes.push(e)}),t++}):$('input[name^="cco_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!1),i.ccoDeletes=[],t++})}ccoCheckedOne(e,t){if(t){this.ccoDeletes.push(e);let t=$('input[name^="cco_del"]').length;const i=5;this.ccoDeletes.length>=t&&t==i?($("#ccoCheckedAll").prop("checked",!0),$("#ccoCheckedAll-span").hide()):this.ccoDeletes.length>=t&&t!=i?(this.tableMinView=this.ccoDeletes.length,this.tableMinView>=t&&(document.getElementById("ccoCheckedAll").checked=!0,document.getElementById("ccoCheckedAll-span").style.display="none")):$("#ccoCheckedAll-span").show()}else{this.ccoDeletes=this.ccoDeletes.filter(t=>t._id!=e._id);let t=$('input[name^="cco_del"]').length;this.ccoDeletes.length?this.ccoDeletes.length!=t||this.tableMinView!=t?($("#ccoCheckedAll").prop("checked",!1),$("#ccoCheckedAll-span").show()):$("#ccoCheckedAll-span").hide():($("#ccoCheckedAll").prop("checked",!1),$("#ccoCheckedAll-span").hide())}}foundationCheckedAll(e){let t=0;var i=this;let s;e?$('input[name^="foundation_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!0),s=$(this).attr("id"),i.foundationRoles.forEach(e=>{e._id==s&&i.foundationDeletes.push(e)}),t++}):$('input[name^="foundation_del"]').each(function(){if(t>=5)return!1;$(this).prop("checked",!1),i.foundationDeletes=[],t++})}foundationCheckedOne(e,t){if(t){this.foundationDeletes.push(e);let t=$('input[name^="foundation_del"]').length;const i=5;this.foundationDeletes.length>=t&&t==i?($("#foundationCheckedAll").prop("checked",!0),$("#foundationCheckedAll-span").hide()):this.foundationDeletes.length>=t&&t!=i?(this.tableMinView=this.foundationDeletes.length,this.tableMinView>=t&&(document.getElementById("foundationCheckedAll").checked=!0,document.getElementById("foundationCheckedAll-span").style.display="none")):$("#foundationCheckedAll-span").show()}else{this.foundationDeletes=this.foundationDeletes.filter(t=>t._id!=e._id);let t=$('input[name^="foundation_del"]').length;this.foundationDeletes.length?this.foundationDeletes.length!=t||this.tableMinView!=t?($("#foundationCheckedAll").prop("checked",!1),$("#foundationCheckedAll-span").show()):$("#foundationCheckedAll-span").hide():($("#foundationCheckedAll").prop("checked",!1),$("#foundationCheckedAll-span").hide())}}deleteMultiRoles(e){this.deleteRoles="supportCloud"==e?this.supportCloudDeletes:"marketingCloud"==e?this.marketingCloudDeletes:"smartHome"==e?this.smartHomeDeletes:"cco"==e?this.ccoDeletes:"foundation"==e?this.foundationDeletes:this.faDeletes,this.modalTitle=this.language["Delete Multiple Roles"];let t=[];this.deleteRoles.forEach(e=>{t.push(e.name)});const i=[...new Set(t)];this.modalInfo=i.join(", "),this.openMultiDeleteModal()}confirmDeleteSecleted(){this.closeModal();const e=[];this.deleteRoles.forEach(t=>{e.push(this.organizationApiService.RoleDelete(t._id))}),(0,a.D)(e).subscribe(e=>{this.supportCloudDeletes=[],this.marketingCloudDeletes=[],this.smartHomeDeletes=[],this.faDeletes=[],this.ccoDeletes=[],this.foundationDeletes=[],this.deleteRoles=[],this.dataAvailable=!1,this.getData()},e=>{this.pageErrorHandle(e)})}roleDetails(){this.router.navigate([`${this.MODULE}/roleDetails`])}closeAlert(){this.error=!1,this.success=!1}openDeleteModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}openMultiDeleteModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal,{backdrop:"static",keyboard:!1})}resetAllDeletes(){this.supportCloudDeletes=[],this.marketingCloudDeletes=[],this.smartHomeDeletes=[],this.faDeletes=[],this.ccoDeletes=[]}showRoles(){this.supportCloudShow=!0,this.marketingCloudShow=!0,this.smartHomeShow=!1,this.faShow=!1,this.ccoRoleShow=!0,this.foundationRoleShow=!0}tableLanguageOptions(e){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language,this.marketingCloudDeletes=[],this.supportCloudDeletes=[],this.foundationDeletes=[],this.ccoDeletes=[],e&&setTimeout(()=>{this.dataAvailable=!0},200)}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}supportTablePageChange(){setTimeout(()=>{$("#supportCloudCheckall-span").hide(),$("#supportCloudCheckall").prop("checked",!1),this.supportCloudCheckall(!1)},100)}marketingTablePageChange(){setTimeout(()=>{$("#marketingCloudCheckedAll-span").hide(),$("#marketingCloudCheckedAll").prop("checked",!1),this.marketingCloudCheckedAll(!1)},100)}smartHomeTablePageChange(){setTimeout(()=>{$("#smartHomeCheckedAll-span").hide(),$("#smartHomeCheckedAll").prop("checked",!1),this.smartHomeCheckedAll(!1)},100)}faTablePageChange(){setTimeout(()=>{$("#faCheckedAll-span").hide(),$("#faCheckedAll").prop("checked",!1),this.faCheckedAll(!1)},100)}ccoTablePageChange(){setTimeout(()=>{$("#ccoCheckedAll-span").hide(),$("#ccoCheckedAll").prop("checked",!1),this.ccoCheckedAll(!1)},100)}foundationTablePageChange(){setTimeout(()=>{$("#foundationCheckedAll-span").hide(),$("#foundationCheckedAll").prop("checked",!1),this.foundationCheckedAll(!1)},100)}checkScope(){let e=this.sso.getScopes();return!o.N.VALIDATE_SCOPE||!(!e||!e["cloud.admin.roles"]||-1===e["cloud.admin.roles"].indexOf("write"))}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.v),c.Y36(g.F0),c.Y36(u.F),c.Y36(h.t6),c.Y36(p.FF),c.Y36(m.s),c.Y36(f.Dx))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-roles"]],viewQuery:function(e,t){if(1&e&&(c.Gf(A,7),c.Gf(v,7)),2&e){let e;c.iGM(e=c.CRH())&&(t.deleteModal=e.first),c.iGM(e=c.CRH())&&(t.multiDeleteModal=e.first)}},hostBindings:function(e,t){1&e&&c.NdJ("click",function(e){return t.onClick(e)})},decls:6,vars:2,consts:[["class","container position-relative",4,"ngIf"],[4,"ngIf"],["deleteModal",""],["multiDeleteModal",""],[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["class","row mt-3",4,"ngIf"],["class","row mb-1",4,"ngIf"],[3,"ngClass"],["class","col",4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"row","my-2"],["class","row my-2",4,"ngIf"],["class","row myy-2",4,"ngIf"],[1,"row","mt-3"],[1,"col","ccl-title"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"d-inline-flex","align-items-center"],[1,"d-inline-flex","mr-2"],["src","../../../assets/img/ic_success-circle-outline.svg"],[1,"row","mb-1"],[1,"col-md-4","offset-md-8","pr-0"],[1,"text-right","flat-right"],["id","del-mul-support","class","btn-default primary px-3 mx-2",3,"click",4,"ngIf"],["id","add-role-support",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-support",1,"btn-default","primary","px-3","mx-2",3,"click"],[1,"col"],["id","supportCloud-table","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions"],[1,""],["width","5%",1,"checkbox-column"],["type","checkbox","name","supportCloudCheckall","id","supportCloudCheckall",3,"disabled","click"],["id","supportCloudCheckall-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["width","35%"],["width","40%"],["width","20%"],[4,"ngFor","ngForOf"],[1,"checkbox-column"],["type","checkbox",3,"name","checked","value","id","disabled","change"],[1,"actions"],["id","role-detail-support",1,"fas","fa-pencil-alt","p-1","cursor-pointer","primary",3,"title","click"],["id","role-del-support","class","fas fa-trash-alt p-1 cursor-pointer primary",3,"title","click",4,"ngIf"],["id","role-del-support",1,"fas","fa-trash-alt","p-1","cursor-pointer","primary",3,"title","click"],[1,"row","mb-2"],["id","del-mul-marketing","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-marketing",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-marketing",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","marketingCloud-table","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions"],["type","checkbox","name","marketingCloudCheckedAll","id","marketingCloudCheckedAll",3,"disabled","click"],["id","marketingCloudCheckedAll-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["id","role-detail-marketing",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-marketing","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-marketing",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-smart","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-smart",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-smart",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","smartHome-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["type","checkbox","name","smartHomeCheckedAll","id","smartHomeCheckedAll",3,"disabled","click"],["id","smartHomeCheckedAll-span",1,"checkbox-ui",2,"display","none",3,"click"],["type","checkbox",3,"name","id","checked","value","disabled","click"],["id","role-detail-smart",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-smart","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-smart",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-fa","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-fa",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-fa",1,"btn-default","primary","px-3","mx-3",3,"click"],[1,"row","myy-2"],["id","fa-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["type","checkbox","name","faCheckedAll","id","faCheckedAll",3,"disabled","click"],["id","faCheckedAll-span",1,"checkbox-ui",2,"display","none",3,"click"],["type","checkbox",3,"name","id","checked","disabled","value","click"],["id","role-detail-fa",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-fa","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-fa",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-cco","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-cco",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-cco",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","cco-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["type","checkbox","name","ccoCheckedAll","id","ccoCheckedAll",3,"disabled","click"],["id","ccoCheckedAll-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["id","role-detail-cco",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-cco","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-cco",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-foundation","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-foundation",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-foundation",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","foundation-table","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions"],["type","checkbox","name","foundationCheckedAll","id","foundationCheckedAll",3,"disabled","click"],["id","foundationCheckedAll-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["id","role-detail-foundation",1,"fas","fa-pencil-alt","p-1","primary",3,"click"],["id","role-del-foundation","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-foundation",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","system-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["width","5%"],["width","60%"],[1,"text-center"],[1,"primary"],[1,"row"],[1,"col-md-12","text-center"],["src","./assets/images/under-construction-illustration.svg","alt","Page under construction!",1,"w-50"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(c.YNc(0,ge,32,24,"div",0),c.YNc(1,ue,9,0,"div",1),c.YNc(2,he,14,5,"ng-template",null,2,c.W1O),c.YNc(4,pe,14,5,"ng-template",null,3,c.W1O)),2&e&&(c.Q6J("ngIf",!t.showConstructionPage),c.xp6(1),c.Q6J("ngIf",t.showConstructionPage))},directives:[Z.O5,Z.mk,b.G,Z.sg],styles:[".wip[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}input[type=checkbox][_ngcontent-%COMP%] + .check-intermediate[_ngcontent-%COMP%]{position:absolute!important;left:0px!important;top:11px!important}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px!important;height:13px!important}"]}),e})()},63859:function(e,t,i){i.d(t,{U:function(){return r}});var s=i(91841),n=i(92340),a=i(37716);const o={headers:new s.WM({})};let r=(()=>{class e{constructor(e){this.httpClient=e,this.baseURL=n.N.calixAdminURL,this.org_id=n.N.faAdminOrgId,this.addRole=this.baseURL+"role",this.users=this.baseURL+"users"}RoleAdd(e){return this.httpClient.put(`${this.addRole}`,e,o)}RoleUpdate(e,t){return this.httpClient.post(`${this.baseURL}role/${t}/info`,e,o)}UsersCountByOrgId(e){return this.httpClient.get(`${this.baseURL}org/${e}/users/_count`,o)}UsersListByOrgId(e,t){return this.httpClient.get(`${this.baseURL}org/${e}/users?size=${t}`,o)}RoleData(e){return this.httpClient.get(`${this.baseURL}role/${e}`,o)}AddUsersByRoleId(e,t){return this.httpClient.post(`${this.baseURL}role/${t}/users`,e,o)}AllPemissionsData(e){return this.httpClient.get(`${this.baseURL}app/${e}/scopes`,o)}AddRolePermissions(e,t){return this.httpClient.post(`${this.addRole}/${t}/perms`,e,o)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},20497:function(e,t,i){i.d(t,{w:function(){return o}});var s=i(92340),n=i(37716),a=i(91841);let o=(()=>{class e{constructor(e){this.httpClient=e,this.baseURL=s.N.API_BASE,this.apiQuotaDetails="retrieve/quota/values"}getaApiQuotaDetails(e){return this.httpClient.get(`${this.baseURL}/v1/retrieve/quota/values/${e}`)}getOrgUsageStatus(e){return this.httpClient.get(`${this.baseURL}/v1/org/admin/orgstats/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(a.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},56890:function(e,t,i){i.d(t,{s:function(){return r}});var s=i(91841),n=i(92340),a=i(37716);const o={headers:new s.WM({})};let r=(()=>{class e{constructor(e){this.httpClient=e,this.baseUrl=n.N.CALIX_ADMIN_BASE_URL+"dpu";let t=new s.WM({"Content-Type":"application/json"});this.options={headers:t}}getBlacklistUsers(){return this.httpClient.get(`${this.baseUrl}/list`,o)}updateBlacklistUsers(e){return this.httpClient.put(`${this.baseUrl}`,e,o)}searchBlacklistUser(e){return this.httpClient.get(`${this.baseUrl}/${e}`,o)}ReactivatetUser(e){return this.httpClient.delete(`${this.baseUrl}/${e}`,o)}getBlacklistUsersByOrgId(e){return this.httpClient.get(`${n.N.CALIX_ADMIN_BASE_URL}org/${e}/dpu/list`,o)}updateBlacklistUsersByOrgId(e,t){return this.httpClient.put(`${n.N.CALIX_ADMIN_BASE_URL}org/${t}/dpu`,e,o)}ReactivatetUserByOrgId(e,t){return this.httpClient.delete(`${n.N.CALIX_ADMIN_BASE_URL}org/${t}/dpu/${e}`,o)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9406:function(e,t,i){i.d(t,{V:function(){return o}});var s=i(92340),n=i(37716),a=i(91841);let o=(()=>{class e{constructor(e){this.httpClient=e}createChatBot(e){return this.httpClient.post(`${s.N.API_BASE_URL}chatbot/config`,e)}deleteChatbotRequest(e){return this.httpClient.put(`${s.N.API_BASE_URL}chatbot/config`,e)}verifyChatBotConfig(e){return this.httpClient.get(`${s.N.API_BASE_URL}chatbot/config?orgId=${e}`)}downloadChatConfig(e,t){return this.httpClient.get(`${s.N.API_BASE_URL}/chatbot/config/download?orgId=${e}`,t)}fetchChatbotFlag(){return this.httpClient.get(`${s.N.API_BASE_URL}entitled/chatbot`)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(a.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5826:function(e,t,i){i.d(t,{q:function(){return l}});var s=i(91841),n=i(92340),a=i(16738),o=i(37716);const r={headers:new s.WM({})};let l=(()=>{class e{constructor(e){this.http=e}getSCLByOrg(e){return this.http.get(`${n.N.CALIX_ADMIN_BASE_URL}org-access/org/${e}/_expand`,r)}getOrgList(){return this.http.get(`${n.N.CALIX_ADMIN_ORG_BASE_URL}organizations`,r)}getOrgListByUsername(e){return this.http.get(`${n.N.CALIX_ADMIN_BASE_URL}org-access/username/${e}`,r)}AddOrgListByUsername(e,t){return this.http.post(`${n.N.CALIX_ADMIN_BASE_URL}org-access/username/${e}`,t,r)}checkType(e){return e.indexOf("write")>-1?"Read and Write":"Read only\t"}checkExpiry(e){if(-1==e.endTime)return sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?"Pas d'expiration":sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?"Sin caducidad":sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?"Kein Ablaufdatum":(sessionStorage.getItem("defaultLanguage")&&sessionStorage.getItem("defaultLanguage"),"No Expiry");if(e.beginTime&&e.endTime){let t=this.roundOffTimestamp(e.beginTime),i=this.roundOffTimestamp(e.endTime);return sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(a.locale("fr"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?(a.locale("es"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?(a.locale("de_DE"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")?(a.locale("en"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):`${new Date(t).toLocaleString()} - ${new Date(i).toLocaleString()}`}}checkExpiryOrgAccess(e){if(-1==e.endTime){let t=this.roundOffTimestamp(e.beginTime);return sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")?(a.locale("en"),`${a(t).format("DD MMM YYYY, HH:mm")} - No Expiry`):sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(a.locale("fr"),`${a(t).format("DD MMM YYYY, HH:mm")} - Pas d'expiration`):sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?(a.locale("es"),`${a(t).format("DD MMM YYYY, HH:mm")} - Sin caducidad`):sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?(a.locale("de_DE"),`${a(t).format("DD MMM YYYY, HH:mm")} - Kein Ablaufdatum `):`${new Date(t).toLocaleString()} - No Expiry\t`}if(e.beginTime&&e.endTime){let t=this.roundOffTimestamp(e.beginTime),i=this.roundOffTimestamp(e.endTime);return sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(a.locale("fr"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")?(a.locale("en"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?(a.locale("es"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?(a.locale("de_DE"),`${a(t).format("DD MMM YYYY, HH:mm")} - ${a(i).format("DD MMM YYYY, HH:mm")}`):`${new Date(t).toLocaleString()} - ${new Date(i).toLocaleString()}`}}localTimestampToUTC(e){let t=new Date(e);return t.getTime()+60*t.getTimezoneOffset()*1e3}utcTimestampTolocal(e){return e-60*(new Date).getTimezoneOffset()*1e3}roundOffTimestamp(e){return 1e3*Math.floor(e/1e3)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},89342:function(e,t,i){i.d(t,{z:function(){return c}});var s=i(91841),n=i(40205),a=i(92340),o=i(5304),r=i(37716);const l={headers:new s.WM({})};let c=(()=>{class e{constructor(e){this.httpClient=e,this.baseURL=a.N.CALIX_ADMIN_BASE_URL,this.orgBaseURL=a.N.CALIX_ADMIN_ORG_BASE_URL,this.org_id=a.N.faAdminOrgId}OrgsList(){return this.httpClient.get(`${this.orgBaseURL}organizations`,l)}AddOrg(e){return this.httpClient.post(`${this.orgBaseURL}organizations`,e,l)}DeleteOrg(e){return this.httpClient.delete(`${this.orgBaseURL}organizations/${e}`,l)}Entitlements(e){return this.httpClient.get(`${this.orgBaseURL}entitlements/cloud/all`,l)}EntitlementsByOrgId(e){return this.httpClient.get(`${this.orgBaseURL}entitlements/${e}`,l)}callRestApi(e,t){return this.httpClient.get(`${e}`,l).pipe((0,o.K)(this.handleError))}handleError(e){return(0,n._)(e)}RoleData(e){return this.httpClient.get(`${this.baseURL}role/${e}`,l)}AddAdmin(e,t){return this.httpClient.post(`${this.baseURL}role/${t}/users`,e,l)}addEntitlements(e,t){return this.httpClient.post(e,t,l)}changeEntitlements(e,t){return this.httpClient.put(e,t,l)}UsersListByOrgId(e,t){return this.httpClient.get(`${this.baseURL}org/${e}/users?size=${t}`,l)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(s.eN))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},77745:function(e,t,i){i.d(t,{g:function(){return l}});var s=i(91841),n=i(92340),a=i(37716),o=i(38048),r=i(39895);let l=(()=>{class e{constructor(e,t,i){this.httpClient=e,this.ssoAuthService=t,this.router=i,this.baseURL=n.N.API_BASE,this.ssoAuthService.getRedirectModule(this.router.url)}getHttpHeaders(){return new s.WM({"X-Calix-OrgId":this.ssoAuthService.getOrganizationID(this.router.url)})}saveProspectFile(e,t){const i=new FormData;return i.append("file",e),i.append("listName",t),this.httpClient.post(`${this.baseURL}/v1/cmc-campaigns/match/list/prospects`,i,{headers:this.getHttpHeaders()})}saveSubscriberFile(e,t){const i=new FormData;return i.append("file",e),i.append("listName",t),this.httpClient.post(`${this.baseURL}/v1/cmc-campaigns/match/list/subscribers`,i,{headers:this.getHttpHeaders()})}getFileData(e,t){return this.httpClient.get(`${this.baseURL}/v1/cmc-campaigns/match/list/${t}/${e}`,{headers:this.getHttpHeaders()})}getFileList(){return this.httpClient.get(`${this.baseURL}/v1/cmc-campaigns/match/list`,{headers:this.getHttpHeaders()})}deleteProspect(e){return this.httpClient.delete(`${this.baseURL}/v1/cmc-campaigns/match/list/prospects/${e}`,{headers:this.getHttpHeaders()})}deleteSubscriber(e){return this.httpClient.delete(`${this.baseURL}/v1/cmc-campaigns/match/list/subscribers/${e}`,{headers:this.getHttpHeaders()})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.eN),a.LFG(o.t6),a.LFG(r.F0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},91395:function(e,t,i){i.d(t,{q:function(){return d}});var s=i(91841),n=i(40205),a=i(92340),o=i(5304),r=i(37716),l=i(38048);const c={headers:new s.WM({})};let d=(()=>{class e{constructor(e,t){this.httpClient=e,this.Sso=t,this.baseURL=a.N.calixAdminURL,this.org_id=a.N.faAdminOrgId,this.user=this.baseURL+"user",this.acl=this.baseURL+"useracl",this.roles=this.baseURL+"roles"}UpdatePasswordByUserId(e,t){return this.httpClient.post(`${this.user}/${t}`,e,c)}AclListByUsername(e){return this.httpClient.get(`${this.baseURL}/useracl/${e}`,c)}UpdateAclListByUserEmail(e,t,i){const s=this.Sso.getOrg(i);return this.httpClient.post(`${this.acl}/${t}?${s}`,e,c)}RolesList(){return this.httpClient.get(this.roles,c)}RolesListByUserId(e){return this.httpClient.get(`${this.user}/${e}/roles`,c)}UpdateRolesListByUserId(e,t){return this.httpClient.post(`${this.user}/${e}/roles/${t}`,{},c)}callRestApi(e,t){return this.httpClient.get(`${e}`,c).pipe((0,o.K)(this.handleError))}handleError(e){return(0,n._)(e)}DeleteAclListByUserEmail(e,t){const i=this.Sso.getOrg(t);return this.httpClient.delete(`${this.baseURL}useracl/${e}?${i}`,c)}DeleteRolesListByUserId(e){return this.httpClient.delete(`${this.user}/${e}/roles`,c)}updateRolesListByGranteeUserId(e){return this.httpClient.post(`${e}`,{},c)}deleteRolesListByGranteeUserId(e){return this.httpClient.delete(`${e}`,c)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(s.eN),r.LFG(l.t6))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},82823:function(e,t,i){i.d(t,{F:function(){return l}});var s=i(91841),n=i(92340),a=i(37716),o=i(38048),r=i(39895);let l=(()=>{class e{constructor(e,t,i){this.httpClient=e,this.ssoAuthService=t,this.router=i,this.baseURL=n.N.API_BASE,this.zipcodeNameurl="cmc-campaigns/zipdata/alias",this.zipcodeListUrl="cmc-campaigns/zipdata",this.cmcCloudChecktUrl="cmc-campaigns/organization",this.MODULE=this.ssoAuthService.getRedirectModule(this.router.url),this.calixOrgId()}calixOrgId(){let e;e=new s.WM({"X-Calix-OrgId":this.ssoAuthService.getOrganizationID(this.router.url)}),this.httpOptions={headers:e}}zipCodeListNames(){return this.calixOrgId(),this.httpClient.get(`${this.baseURL}/v1/${this.zipcodeNameurl}`,this.httpOptions)}saveZipPlusFile(e){return this.calixOrgId(),this.httpClient.post(`${this.baseURL}/v1/${this.zipcodeNameurl}`,e,this.httpOptions)}modifyZipcode(e){return this.calixOrgId(),this.httpClient.put(`${this.baseURL}/v1/${this.zipcodeNameurl}`,e,this.httpOptions)}removeZipcode(e){return this.calixOrgId(),this.httpClient.delete(`${this.baseURL}/v1/${this.zipcodeNameurl}?list-name=${e}`,this.httpOptions)}zipCodeEntryList(e){return this.calixOrgId(),this.httpClient.get(`${this.baseURL}/v1/${this.zipcodeListUrl}/?list-name=${e}`,this.httpOptions)}editZipcodeEntryList(e){return this.calixOrgId(),this.httpClient.put(`${this.baseURL}/v1/${this.zipcodeListUrl}/`,e,this.httpOptions)}deleteZipcodeEntryList(e){return this.calixOrgId(),this.httpClient.delete(`${this.baseURL}/v1/${this.zipcodeListUrl}/?ids=${e}`,this.httpOptions)}addZipcodeEntryList(e){return this.calixOrgId(),this.httpClient.post(`${this.baseURL}/v1/${this.zipcodeListUrl}/`,e,this.httpOptions)}marketingCloudCheck(){return this.calixOrgId(),this.httpClient.get(`${this.baseURL}/v1/${this.cmcCloudChecktUrl}`,this.httpOptions)}marketingCloudCheckUpdate(e){return this.calixOrgId(),this.httpClient.put(`${this.baseURL}/v1/${this.cmcCloudChecktUrl}`,e,this.httpOptions)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.eN),a.LFG(o.t6),a.LFG(r.F0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},98325:function(e,t,i){i.d(t,{v:function(){return w}});var s=i(92340),n=i(37716),a=i(49342),o=i(53668),r=i(39895),l=i(7450),c=i(38048),d=i(12664),g=i(39075),u=i(20904),h=i(38583),p=i(3679),m=i(74062);const f=["deleteModal"],Z=["infoModal"],b=["updateModal"],A=["errorModal"];function v(e,t){1&e&&(n.TgZ(0,"div",22),n.TgZ(1,"div",23),n.TgZ(2,"div",24),n.TgZ(3,"span",25),n._uU(4,"Loading..."),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function x(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",26),n.TgZ(1,"span",27),n._UZ(2,"img",28),n.qZA(),n.TgZ(3,"button",29),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",30),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("innerHtml",e.errorInfo,n.oJD)}}function T(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",31),n.TgZ(1,"div",32),n.TgZ(2,"div",33),n._UZ(3,"img",34),n.qZA(),n.TgZ(4,"div",35),n._UZ(5,"span",36),n.qZA(),n.TgZ(6,"div",37),n.TgZ(7,"button",29),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeAlert()}),n._UZ(8,"span"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("innerHtml",e.successInfo,n.oJD)}}function _(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",38),n.TgZ(1,"h4",39),n._uU(2),n.qZA(),n.TgZ(3,"button",40),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeModal()}),n._UZ(4,"span",41),n.qZA(),n.qZA(),n.TgZ(5,"div",42),n.TgZ(6,"p"),n._uU(7),n.qZA(),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",43),n.TgZ(11,"button",44),n.NdJ("click",function(){return n.CHM(e),n.oxw().confirmDeleteSecleted()}),n._uU(12),n.qZA(),n.TgZ(13,"button",45),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeModal()}),n._uU(14),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.modalTitle),n.xp6(5),n.Oqu(e.modalInfo),n.xp6(2),n.Oqu(e.modalInfocontent),n.xp6(3),n.Oqu(e.language.yes),n.xp6(2),n.Oqu(e.language.no)}}function C(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",38),n.TgZ(1,"h4",39),n._uU(2),n.qZA(),n.TgZ(3,"button",40),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeModal()}),n._UZ(4,"span",41),n.qZA(),n.qZA(),n.TgZ(5,"div",42),n.TgZ(6,"p"),n._uU(7),n.qZA(),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",43),n.TgZ(11,"button",44),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeModal()}),n._uU(12),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.modalTitle),n.xp6(5),n.Oqu(e.modalInfo),n.xp6(2),n.Oqu(e.modalInfocontent),n.xp6(3),n.Oqu(e.language.ok)}}function q(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",38),n.TgZ(1,"h4",39),n._uU(2),n.qZA(),n.TgZ(3,"button",40),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeModal()}),n._UZ(4,"span",41),n.qZA(),n.qZA(),n.TgZ(5,"div",42),n.TgZ(6,"p"),n._uU(7),n.qZA(),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",43),n.TgZ(11,"button",44),n.NdJ("click",function(){return n.CHM(e),n.oxw().updateSSO()}),n._uU(12),n.qZA(),n.TgZ(13,"button",45),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeModal()}),n._uU(14),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.modalTitle),n.xp6(5),n.Oqu(e.modalInfo),n.xp6(2),n.Oqu(e.modalInfocontent),n.xp6(3),n.Oqu(e.language.yes),n.xp6(2),n.Oqu(e.language.no)}}let w=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.commonOrgService=e,this.organizationApiService=t,this.router=i,this.translateService=s,this.sso=n,this.dialogService=a,this.titleService=o,this.common=r,this.pageAvailable=!1,this.formError=!1,this.add={_id:"",domain:"",orgId:"",type:"saml",config:{sp_options:{entity_id:"https://cloud-stg.calix.com/sso-metadata",assert_endpoint:"https://cloud-stg.calix.com/sso-acs?samlid=nEtmrw7czte5eDmv4"},idp_options:{sso_login_url:"",sso_logout_url:"",certificates:""}}},this.languages=[{name:"English"},{name:"French Canadian"}],this.errorTitle="",this.errorBody="",this.loading=!0;let l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.commonOrgService.currentPageAdder("sso"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.getHostData(),this.MODULE=this.sso.getRedirectModule(l)}ngOnInit(){this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.ssoconfig} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.ssoconfig} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.success=!1,this.error=!1,this.logoutFieldHide=!0,this.reset()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getConfigSubs&&this.getConfigSubs.unsubscribe(),this.ssoUpdateSubs&&this.ssoUpdateSubs.unsubscribe(),this.ssoAddSubs&&this.ssoAddSubs.unsubscribe(),this.ssoDeleteSubs&&this.ssoDeleteSubs.unsubscribe()}getHostData(){this.organizationApiService.GetHostData("assets/config/config.json").subscribe(e=>{this.HOSTDATA=e,this.getSSOConfigData()})}getSSOConfigData(){this.getConfigSubs=this.organizationApiService.SSOConfigGet(this.ORG_ID).subscribe(e=>{e&&"object"==typeof e&&null!=e._id?(this.SSOconfigData=e,this.configId=e._id,this.entity=this.SSOconfigData.config.sp_options.entity_id?this.SSOconfigData.config.sp_options.entity_id:"",this.acs=this.SSOconfigData.config.sp_options.assert_endpoint?this.SSOconfigData.config.sp_options.assert_endpoint:"",this.emaildomainname=this.SSOconfigData.domain,this.idp=this.SSOconfigData.config.idp_options.certificates,this.ssologin=this.SSOconfigData.config.idp_options.sso_login_url,this.ssologout=this.SSOconfigData.config.idp_options.sso_logout_url,this.deletebuttonDisabled=!1,this.savebuttonDisabled=!0,this.loading=!1):this.showDefaultData()},e=>{this.deletebuttonDisabled=!0,this.showDefaultData(),404!=e.status&&this.pageErrorHandle(e)},()=>{setTimeout(()=>{this.loading=!1},1e3)})}showDefaultData(){this.domain=this.HOSTDATA.apiURL?this.HOSTDATA.apiURL:s.N.SSO_API_URL,this.generatedId=this.makeid(17),this.entity=`${this.domain}/sso-metadata`,this.acs=this.HOSTDATA.isCAInstance?`${this.domain}/v1/authentication/samlcacallback?samlid=${this.generatedId}`:`${this.domain}/v1/authentication/samlcallback?samlid=${this.generatedId}`,this.loading=!1}makeid(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*s));return t}uuidv4(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}save(){this.configId?this.updateConfirmModal():this.addSSO()}updateConfirmModal(){return this.modalInfocontent=void 0,null!=this.emaildomainname&&""!=this.emaildomainname&&this.validateDomain(this.emaildomainname)?null==this.idp||""==this.idp.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["Certificate Not Valid"],void this.openErrorModal()):null!=this.ssologin&&""!=this.ssologin.trim()&&this.validateURL(this.ssologin.trim())?null==this.ssologout||""==this.ssologout.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Logout URL Not Valid"],void this.openErrorModal()):(this.modalTitle=this.language.Warning,this.modalInfo=this.language["Current SSO settings will be overwritten."],this.modalInfocontent=this.language["Are you sure you want to continue?"],void this.openUpdateModal()):(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Login URL Not Valid"],void this.openErrorModal()):(this.modalTitle=this.language.Error,this.modalInfo=this.language["Domain Name Not Valid"],void this.openErrorModal())}updateSSO(){if(null==this.emaildomainname||""==this.emaildomainname||!this.validateDomain(this.emaildomainname))return this.modalTitle=this.language.Error,this.modalInfo=this.language["Domain Name Not Valid"],void this.openErrorModal();if(null==this.idp||""==this.idp.trim())return this.modalTitle=this.language.Error,this.modalInfo=this.language["Certificate Not Valid"],void this.openErrorModal();if(null==this.ssologin||""==this.ssologin.trim()||!this.validateURL(this.ssologin.trim()))return this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Login URL Not Valid"],void this.openErrorModal();if(null==this.ssologout||""==this.ssologout.trim())return this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Logout URL Not Valid"],void this.openErrorModal();let e=this.add;e._id=this.configId,e.orgId=this.ORG_ID,e.type="saml",this.SSOconfigData&&this.SSOconfigData.config.sp_options?(e.config.sp_options.entity_id=this.SSOconfigData.config.sp_options.entity_id,e.config.sp_options.assert_endpoint=this.SSOconfigData.config.sp_options.assert_endpoint):(e.config.sp_options.entity_id=this.entity,e.config.sp_options.assert_endpoint=this.acs),e.domain=this.emaildomainname,e.config.idp_options.certificates=this.idp,e.config.idp_options.sso_login_url=this.ssologin,e.config.idp_options.sso_logout_url=this.ssologout,this.loading=!0,this.closeModal(),this.ssoUpdateSubs=this.organizationApiService.SSOConfigUpdate(e,this.configId).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["SSO Configuration Updated Successfully"],this.success=!0,this.loading=!1,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.closeAlert()},2500),this.getSSOConfigData()},e=>{this.pageErrorHandle(e),this.loading=!1})}addSSO(){let e=this.add;return null!=this.emaildomainname&&""!=this.emaildomainname&&this.validateDomain(this.emaildomainname)?null==this.idp||""==this.idp.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["Certificate Not Valid"],void this.openErrorModal()):null!=this.ssologin&&""!=this.ssologin.trim()&&this.validateURL(this.ssologin.trim())?null==this.ssologout||""==this.ssologout.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Logout URL Not Valid"],void this.openErrorModal()):(e._id=this.generatedId,e.orgId=this.ORG_ID,e.type="saml",this.SSOconfigData&&this.SSOconfigData.config.sp_options?(e.config.sp_options.entity_id=this.SSOconfigData.config.sp_options.entity_id,e.config.sp_options.assert_endpoint=this.SSOconfigData.config.sp_options.assert_endpoint):(e.config.sp_options.entity_id=this.entity,e.config.sp_options.assert_endpoint=this.acs),e.domain=this.emaildomainname,e.config.idp_options.certificates=this.idp,e.config.idp_options.sso_login_url=this.ssologin,e.config.idp_options.sso_logout_url=this.ssologout,this.loading=!0,this.closeModal(),void(this.ssoAddSubs=this.organizationApiService.SSOConfigAdd(e).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["SSO Configuration added Successfully"],this.success=!0,this.loading=!1,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.closeAlert()},2500),this.getSSOConfigData()},e=>{this.pageErrorHandle(e),this.loading=!1}))):(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Login URL Not Valid"],void this.openErrorModal()):(this.modalTitle=this.language.Error,this.modalInfo=this.language["Domain Name Not Valid"],void this.openErrorModal())}on_ChangeInput(){this.savebuttonDisabled=!(null!=this.emaildomainname&&this.emaildomainname.length||null!=this.idp&&this.idp.length||null!=this.ssologin&&this.ssologin.length||null!=this.ssologout&&this.ssologout.length)}domainChange(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.emaildomainname==this.SSOconfigData.domain}idpChange(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.idp==this.SSOconfigData.config.idp_options.certificates}ssoLoginChange(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.ssologin==this.SSOconfigData.config.idp_options.sso_login_url}ssoLogoutChange(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.ssologout==this.SSOconfigData.config.idp_options.sso_logout_url}deleteSSOinfo(){this.modalTitle=this.language.Warning,this.modalInfo=this.language["Current SSO settings will be deleted."],this.modalInfocontent=this.language["Are you sure you want to continue?"],this.openDeleteModal()}confirmDeleteSecleted(){null!=this.configId&&(this.loading=!0,this.closeModal(),this.ssoDeleteSubs=this.organizationApiService.SSOConfigDelete(this.configId).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["SSO Configuration Deleted Successfully"],this.success=!0,this.loading=!1,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.closeAlert()},2500),this.reset(),this.getSSOConfigData()},e=>{this.pageErrorHandle(e),this.loading=!1}))}reset(){this.entity="",this.acs="",this.emaildomainname="",this.idp="",this.ssologin="",this.ssologout="",this.SSOconfigData=void 0,this.configId=void 0,this.savebuttonDisabled=!0,this.deletebuttonDisabled=!0}closeAlert(){this.error=!1,this.success=!1}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.translateService.changeLanguage(e)}openDeleteModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}openUpdateModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.updateModal,{backdrop:"static",keyboard:!1})}openErrorModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}validateDomain(e){return/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/gi.test(e)&&this.notEndsWithDot(e)}validateURL(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}notEndsWithDot(e){return!!((e=e?e.trim():"")&&e.length>1&&"."!==e.substring(e.length-1,e.length))}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(a.v),n.Y36(o.F),n.Y36(r.F0),n.Y36(l.s),n.Y36(c.t6),n.Y36(d.FF),n.Y36(g.Dx),n.Y36(u.i))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sso-configuration"]],viewQuery:function(e,t){if(1&e&&(n.Gf(f,7),n.Gf(Z,7),n.Gf(b,7),n.Gf(A,7)),2&e){let e;n.iGM(e=n.CRH())&&(t.deleteModal=e.first),n.iGM(e=n.CRH())&&(t.infoModal=e.first),n.iGM(e=n.CRH())&&(t.updateModal=e.first),n.iGM(e=n.CRH())&&(t.errorModal=e.first)}},decls:52,vars:20,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mb-1"],[1,"col-md-12","ccl-title"],[1,"row","mb-3"],[1,"col-md-12","ccl-form"],["type","text","readonly","","name","entity","value","","id","entity","autocomplete","new-password",1,"",3,"ngModel","ngModelChange"],["type","text","name","acs","readonly","","value","","id","acs","autocomplete","new-password",1,"",3,"ngModel","ngModelChange"],["type","text","name","emaildomainname","id","emaildomainname","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","keyup","ngModelChange","blur"],[1,"col-md-12"],["name","idp","rows","3","id","idp","trimSpace","",1,"form-control",3,"ngModel","ngModelChange","keyup","blur"],["type","text","name","ssologin","placeholder","","id","ssologin","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","keyup","ngModelChange","blur"],["type","text","name","ssologout","placeholder","","id","ssologout","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","keyup","ngModelChange","blur"],[1,"row"],[1,"col-md-12","text-right"],["type","submit",1,"btn-default","primary","mr-3",3,"disabled","click"],["type","submit",1,"btn-default","primary",3,"disabled","click"],["deleteModal",""],["infoModal",""],["updateModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,v,5,0,"div",1),n.YNc(2,x,6,1,"div",2),n.YNc(3,T,9,1,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"div",7),n.TgZ(9,"input",8),n.NdJ("ngModelChange",function(e){return t.entity=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",4),n.TgZ(11,"div",5),n._uU(12),n.qZA(),n.qZA(),n.TgZ(13,"div",6),n.TgZ(14,"div",7),n.TgZ(15,"input",9),n.NdJ("ngModelChange",function(e){return t.acs=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",4),n.TgZ(17,"div",5),n._uU(18),n.qZA(),n.qZA(),n.TgZ(19,"div",6),n.TgZ(20,"div",7),n.TgZ(21,"input",10),n.NdJ("keyup",function(){return t.domainChange()})("ngModelChange",function(e){return t.emaildomainname=e})("blur",function(){return t.removeUnwantedSpace("emaildomainname",t.emaildomainname)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"div",4),n.TgZ(23,"div",5),n._uU(24),n.qZA(),n.qZA(),n.TgZ(25,"div",6),n.TgZ(26,"div",11),n.TgZ(27,"textarea",12),n.NdJ("ngModelChange",function(e){return t.idp=e})("keyup",function(){return t.idpChange()})("blur",function(){return t.removeUnwantedSpace("idp",t.idp)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"div",4),n.TgZ(29,"div",5),n._uU(30),n.qZA(),n.qZA(),n.TgZ(31,"div",6),n.TgZ(32,"div",7),n.TgZ(33,"input",13),n.NdJ("keyup",function(){return t.ssoLoginChange()})("ngModelChange",function(e){return t.ssologin=e})("blur",function(){return t.removeUnwantedSpace("ssologin",t.ssologin)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"div",4),n.TgZ(35,"div",5),n._uU(36),n.qZA(),n.qZA(),n.TgZ(37,"div",6),n.TgZ(38,"div",7),n.TgZ(39,"input",14),n.NdJ("keyup",function(){return t.ssoLogoutChange()})("ngModelChange",function(e){return t.ssologout=e})("blur",function(){return t.removeUnwantedSpace("ssologout",t.ssologout)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(40,"div",15),n.TgZ(41,"div",16),n.TgZ(42,"button",17),n.NdJ("click",function(){return t.save()}),n._uU(43),n.qZA(),n.TgZ(44,"button",18),n.NdJ("click",function(){return t.deleteSSOinfo()}),n._uU(45),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(46,_,15,5,"ng-template",null,19,n.W1O),n.YNc(48,C,13,4,"ng-template",null,20,n.W1O),n.YNc(50,q,15,5,"ng-template",null,21,n.W1O)),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loading),n.xp6(1),n.Q6J("ngIf",t.error),n.xp6(1),n.Q6J("ngIf",t.success),n.xp6(3),n.Oqu(t.language.entityID),n.xp6(3),n.Q6J("ngModel",t.entity),n.xp6(3),n.hij("",t.language.acs," "),n.xp6(3),n.Q6J("ngModel",t.acs),n.xp6(3),n.Oqu(t.language.emaildomainname),n.xp6(3),n.s9C("placeholder",t.language.domainnametext),n.Q6J("ngModel",t.emaildomainname),n.xp6(3),n.Oqu(t.language.idp),n.xp6(3),n.Q6J("ngModel",t.idp),n.xp6(3),n.Oqu(t.language.ssologin),n.xp6(3),n.Q6J("ngModel",t.ssologin),n.xp6(3),n.Oqu(t.language.ssologout),n.xp6(3),n.Q6J("ngModel",t.ssologout),n.xp6(3),n.Q6J("disabled",t.savebuttonDisabled),n.xp6(1),n.Oqu(t.language.saveEnregistrer),n.xp6(1),n.Q6J("disabled",t.deletebuttonDisabled),n.xp6(1),n.Oqu(t.language.delete))},directives:[h.O5,p.Fj,p.JJ,p.On,m.f],styles:[""]}),e})()},3483:function(e,t,i){i.d(t,{y:function(){return w}});var s=i(23771),n=i(79765),a=i(37716),o=i(7450),r=i(12664),l=i(39895),c=i(77745),d=i(38048),g=i(39075),u=i(49342),h=i(38583),p=i(3679),m=i(86640);function f(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",41),a.TgZ(1,"span",42),a._UZ(2,"img",43),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"button",44),a.NdJ("click",function(){return a.CHM(e),a.oxw().closeAlert()}),a._UZ(6,"span"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.errorMessage)}}function Z(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",45),a.TgZ(1,"span",46),a._UZ(2,"img",47),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"button",44),a.NdJ("click",function(){return a.CHM(e),a.oxw().closeAlert()}),a._UZ(6,"span"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.successMessage)}}function b(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"span",48),a.NdJ("click",function(){return a.CHM(e),a.oxw().clearText()}),a._UZ(1,"img",49),a.qZA()}}function A(e,t){if(1&e&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td",50),a.TgZ(10,"span",51),a.TgZ(11,"span"),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e.firstName),a.xp6(2),a.Oqu(e.lastName),a.xp6(2),a.xDo("",e.addressLine1,", ",e.addressLine2,", ",e.city,", ",e.state,", ",e.zip,""),a.xp6(2),a.Oqu(e.email),a.xp6(2),a.Q6J("ngClass",e.matched?"icon-checked":"icon-close"),a.xp6(2),a.Oqu(e.matched)}}function v(e,t){if(1&e&&(a.TgZ(0,"div",52),a.TgZ(1,"div",53),a.TgZ(2,"span",54),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.Oqu(e.language.Loading)}}function x(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",55),a.TgZ(1,"button",56),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",57),a.TgZ(4,"div",58),a._uU(5),a.qZA(),a.TgZ(6,"div",59),a.TgZ(7,"label"),a._uU(8),a.qZA(),a._UZ(9,"input",60),a.qZA(),a.TgZ(10,"div",61),a.TgZ(11,"button",62),a._uU(12),a.qZA(),a.TgZ(13,"button",63),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(14),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu("Edit File Name"),a.xp6(3),a.Oqu(e.language.fileName),a.xp6(1),a.s9C("value",e.selectedFile.listName),a.xp6(3),a.Oqu(e.language["Save Changes"]),a.xp6(2),a.Oqu(e.language.Cancel)}}function T(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",64),a.TgZ(1,"button",56),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",57),a.TgZ(4,"div",65),a._uU(5),a.qZA(),a.TgZ(6,"div",66),a.TgZ(7,"div",67),a.TgZ(8,"div",68),a.TgZ(9,"label"),a._uU(10),a.qZA(),a._UZ(11,"input",69),a.qZA(),a.TgZ(12,"div",68),a.TgZ(13,"label"),a._uU(14),a.qZA(),a._UZ(15,"input",69),a.qZA(),a.qZA(),a.TgZ(16,"div",67),a.TgZ(17,"div",70),a.TgZ(18,"label"),a._uU(19),a.qZA(),a._UZ(20,"input",69),a.qZA(),a.qZA(),a.TgZ(21,"div",67),a.TgZ(22,"div",68),a.TgZ(23,"label"),a._uU(24),a.qZA(),a._UZ(25,"input",69),a.qZA(),a.TgZ(26,"div",68),a.TgZ(27,"label"),a._uU(28),a.qZA(),a._UZ(29,"input",69),a.qZA(),a.qZA(),a.TgZ(30,"div",67),a.TgZ(31,"div",68),a.TgZ(32,"label"),a._uU(33),a.qZA(),a._UZ(34,"input",69),a.qZA(),a.TgZ(35,"div",68),a.TgZ(36,"label"),a._uU(37),a.qZA(),a._UZ(38,"input",69),a.qZA(),a.qZA(),a.TgZ(39,"div",67),a.TgZ(40,"div",71),a.TgZ(41,"label"),a._uU(42),a.qZA(),a._UZ(43,"input",72),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"div",61),a.TgZ(45,"button",62),a._uU(46),a.qZA(),a.TgZ(47,"button",63),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(48),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu("Add Entry"),a.xp6(5),a.Oqu(e.language["First Name"]),a.xp6(4),a.Oqu(e.language["Last Name"]),a.xp6(5),a.Oqu("Email(s)"),a.xp6(5),a.Oqu(e.language["Street Address"]),a.xp6(4),a.Oqu("Apt, Suite, etc."),a.xp6(5),a.Oqu("Town"),a.xp6(4),a.Oqu("State/Province"),a.xp6(5),a.Oqu("ZIP/ZIP+4/Postal Code"),a.xp6(4),a.Oqu(e.language.Save),a.xp6(2),a.Oqu(e.language.Cancel)}}function _(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",64),a.TgZ(1,"button",56),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",57),a.TgZ(4,"div",65),a._uU(5),a.qZA(),a.TgZ(6,"div",66),a.TgZ(7,"div",67),a.TgZ(8,"div",68),a.TgZ(9,"label"),a._uU(10),a.qZA(),a._UZ(11,"input",73),a.qZA(),a.TgZ(12,"div",68),a.TgZ(13,"label"),a._uU(14),a.qZA(),a._UZ(15,"input",74),a.qZA(),a.qZA(),a.TgZ(16,"div",67),a.TgZ(17,"div",70),a.TgZ(18,"label"),a._uU(19),a.qZA(),a._UZ(20,"input",69),a.qZA(),a.qZA(),a.TgZ(21,"div",67),a.TgZ(22,"div",68),a.TgZ(23,"label"),a._uU(24),a.qZA(),a._UZ(25,"input",69),a.qZA(),a.TgZ(26,"div",68),a.TgZ(27,"label"),a._uU(28),a.qZA(),a._UZ(29,"input",69),a.qZA(),a.qZA(),a.TgZ(30,"div",67),a.TgZ(31,"div",68),a.TgZ(32,"label"),a._uU(33),a.qZA(),a._UZ(34,"input",69),a.qZA(),a.TgZ(35,"div",68),a.TgZ(36,"label"),a._uU(37),a.qZA(),a._UZ(38,"input",69),a.qZA(),a.qZA(),a.TgZ(39,"div",67),a.TgZ(40,"div",71),a.TgZ(41,"label"),a._uU(42),a.qZA(),a._UZ(43,"input",75),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"div",61),a.TgZ(45,"button",62),a._uU(46),a.qZA(),a.TgZ(47,"button",63),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(48),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu("Edit Entry"),a.xp6(5),a.Oqu(e.language["First Name"]),a.xp6(4),a.Oqu(e.language["Last Name"]),a.xp6(5),a.Oqu("Email(s)"),a.xp6(5),a.Oqu(e.language["Street Address"]),a.xp6(4),a.Oqu("Apt, Suite, etc."),a.xp6(5),a.Oqu("Town"),a.xp6(4),a.Oqu("State/Province"),a.xp6(5),a.Oqu("ZIP/ZIP+4/Postal Code"),a.xp6(4),a.Oqu(e.language["Save Changes"]),a.xp6(2),a.Oqu(e.language.Cancel)}}function C(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",55),a.TgZ(1,"button",56),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",57),a.TgZ(4,"div",76),a.TgZ(5,"div",77),a._UZ(6,"img",78),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"div",79),a._uU(9),a.qZA(),a.TgZ(10,"button",62),a._uU(11),a.qZA(),a.TgZ(12,"button",80),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(9),a.hij("Are you sure you want to delete ",e.selectedFile.listName,"?"),a.xp6(2),a.Oqu(e.language.Delete),a.xp6(2),a.Oqu(e.language.Cancel)}}function q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",55),a.TgZ(1,"button",56),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",57),a.TgZ(4,"div",76),a.TgZ(5,"div",77),a._UZ(6,"img",78),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"div",79),a._uU(9,"Are you sure you want to delete the following Subscriber(s)?"),a.qZA(),a.TgZ(10,"ul",81),a.TgZ(11,"li"),a._uU(12," Bessie "),a.qZA(),a.TgZ(13,"li"),a._uU(14," Darrell "),a.qZA(),a.TgZ(15,"li"),a._uU(16," Kathryn "),a.qZA(),a.qZA(),a.TgZ(17,"button",62),a._uU(18),a.qZA(),a.TgZ(19,"button",80),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(20),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(18),a.Oqu(e.language.Delete),a.xp6(2),a.Oqu(e.language.Cancel)}}let w=(()=>{class e{constructor(e,t,i,s,a,o,r){var l,c,d;this.translateService=e,this.dialogService=t,this.router=i,this.prospectSubscriberService=s,this.sso=a,this.titleService=o,this.commonOrgService=r,this.dtOptions={},this.selectedFilter="All",this.loading=!1,this.prospectListDetailError=!1,this.successMessage="",this.subscriptions=[],this.dtTrigger=new n.xQ,this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("subscriber-prospect-list"),this.selectedFile=null===(d=null===(c=null===(l=this.router.getCurrentNavigation())||void 0===l?void 0:l.extras)||void 0===c?void 0:c.state)||void 0===d?void 0:d.selectedFile,this.selectedFile||this.goBackToSubscriber()}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,retrieve:!0,processing:!1,dom:"tipr",searching:!0,ordering:!0,order:[4,"asc"],columnDefs:[{targets:[0,1,2,3],orderable:!1}]},this.language=this.translateService.defualtLanguage,this.titleService.setTitle(`${this.language.Subscriber} ${this.language.Prospect} ${this.language.File} ${this.language.Upload}-${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - ${this.language["Calix Cloud"]}`),this.subscriptions.push(this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.Subscriber} ${this.language.Prospect} ${this.language.File} ${this.language.Upload}-${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - Calix Cloud`),this.getFileDetails(),this.setTableOptions()})),this.getFileDetails(),this.tableLanguageOptions()}getFileDetails(){this.loading=!0,this.subscriptions.push(this.prospectSubscriberService.getFileData(this.selectedFile.id,this.selectedFile.listType).subscribe(e=>{this.reRender(),this.prospectListDetailError=!1,e&&e.fileData&&e.fileData.length>0?(this.prospectListDetailError=!1,this.prospectDetailLists=e.fileData,this.prospectAllLists=e.fileData,this.prospectMetaData=e.metaData):this.goBackToSubscriber(),setTimeout(()=>{this.reRender(),this.searchText&&this.searchName(this.searchText),this.loading=!1},500)},e=>{this.prospectListDetailError=!0,setTimeout(()=>this.reRender(),500),this.loading=!1,this.errorMessage=this.errorHandler(e),this.successMessage=""}))}allSelected(){this.loading=!0,this.reRender(),"Match"===this.selectedFilter?this.prospectDetailLists=this.prospectAllLists.filter(e=>!0===e.matched):"Non-Match"===this.selectedFilter?this.prospectDetailLists=this.prospectAllLists.filter(e=>!e.matched):"All"===this.selectedFilter&&(this.prospectDetailLists=this.prospectAllLists),setTimeout(()=>{this.reRender(),this.searchText&&this.searchName(this.searchText),this.loading=!1},500)}reRender(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(e=>{e.destroy(),this.dtTrigger.next()}),this.dtTrigger.next()}errorHandler(e){return e.error?e.error.errorDesc?this.errorMessage=e.error.errorDesc:500==e.error.status?this.errorMessage="Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?this.errorMessage="An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status&&(this.errorMessage="User Unauthorized"):this.errorMessage=this.commonOrgService.pageErrorHandle(e),this.errorMessage}searchName(e){var t,i;null===(i=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===i||i.then(t=>{t.search(e).draw()}),this.closeAlert()}clearText(){this.searchText="",this.searchName(this.searchText)}closeAlert(){this.errorMessage="",this.successMessage=""}goBackToSubscriber(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/subscriber-prospect-upload"])}SubscriberEditFileNameModal(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-custom-modal"})}SubscriberAddEntryModal(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-custom-modal"})}SubscriberEditModal(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-custom-modal"})}SubscriberDeleteModal(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-delete-modal"})}SubscriberListDeleteModal(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-delete-modal"})}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&delete this.dtOptions.language}ngOnDestroy(){this.subscriptions.forEach(e=>null==e?void 0:e.unsubscribe()),this.dtTrigger&&this.dtTrigger.unsubscribe()}setTableOptions(){this.tableLanguageOptions(),setTimeout(()=>{this.reRender()},200)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.s),a.Y36(r.FF),a.Y36(l.F0),a.Y36(c.g),a.Y36(d.t6),a.Y36(g.Dx),a.Y36(u.v))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-subscriber-prospect-list"]],viewQuery:function(e,t){if(1&e&&a.Gf(s.G,5),2&e){let e;a.iGM(e=a.CRH())&&(t.dtElement=e.first)}},decls:67,vars:24,consts:[[1,"container","position-relative"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mb-3"],[1,"d-flex","w-100","align-items-center","border-bottom-gray","pb-3"],[1,"col-9","px-0"],[1,"ccl-admin-title","align-items-center","row"],[1,"col-auto","text-nowrap","subs-name","pr-2"],[1,"col","pt-3"],[1,"col-3","px-0"],[1,"d-flex","align-items-center","justify-content-end"],[1,"subscriber-dot","mr-3"],["type","button",1,"close",3,"click"],[1,"row",3,"hidden"],[1,"table-filter","w-100"],[1,"mb-3"],[1,"text-capitalize"],[1,"ccl-form"],[1,"table-filter","d-flex","flex-wrap","justify-content-between","align-items-center","w-100"],[1,"d-flex","flex-wrap"],[1,"search-input","pr-4"],["type","text",3,"placeholder","ngModel","ngModelChange","input"],["class","pos-abs-right",3,"click",4,"ngIf"],[1,"d-inline-flex","align-items-center"],[1,"ngselect-min"],[1,"w-100",3,"ngModel","change","ngModelChange"],["value","All"],["value","Match"],["value","Non-Match"],[1,"overflow-auto","w-100","mt-3"],["datatable","",1,"zip-code-table","table","table-hover",3,"dtOptions","dtTrigger"],[1,"w-20"],[1,"w-30"],[1,"w-10"],[4,"ngFor","ngForOf"],["class","center-chart flex mt-60",4,"ngIf"],["SubscriberEditFileName",""],["SubscriberAddEntry",""],["SubscriberEdit",""],["SubscriberDelModal",""],["SubscriberListDelModal",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","mt-10",3,"click"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"text-center"],[3,"ngClass"],[1,"center-chart","flex","mt-60"],[1,"spinner-border","text-primary","mt-60"],[1,"sr-only"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"subscriber-modal-content"],[1,"ccl-admin-title","mb-3"],[1,"ccl-form","mb-2"],["type","text",3,"value"],[1,"mt-4"],[1,"btn-default","primary","mr-3"],[1,"btn-link","primary",3,"click"],[1,"w-100","pb-3"],["id","AddSubscriberListTitle",1,"ccl-admin-title","mb-2"],[1,"modal-form-container"],[1,"row"],[1,"col-sm-6","ccl-form","mb-2"],["type","text"],[1,"col-12","ccl-form","mb-2"],[1,"col-6","ccl-form","mb-2"],["type","text",1,"max-160px"],["type","text","value","Stev"],["type","text","value","Smith"],["type","text","value","600015",1,"max-160px"],[1,"d-flex"],[1,"warn-icon-min"],["src","../../../assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title","mb-3"],[1,"btn-dft","btn-default","py-1",3,"click"],[1,"my-3","pl-4","pb-4"]],template:function(e,t){if(1&e&&(a.TgZ(0,"div",0),a.YNc(1,f,7,1,"div",1),a.YNc(2,Z,7,1,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a.TgZ(6,"div",6),a.TgZ(7,"div",7),a._uU(8),a.qZA(),a._UZ(9,"div",8),a.qZA(),a.qZA(),a.TgZ(10,"div",9),a.TgZ(11,"div",10),a._UZ(12,"div",11),a.TgZ(13,"button",12),a.NdJ("click",function(){return t.goBackToSubscriber()}),a._UZ(14,"span"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",13),a.TgZ(16,"div",14),a.TgZ(17,"div",15),a.TgZ(18,"p"),a.TgZ(19,"b"),a._uU(20),a.qZA(),a.TgZ(21,"span",16),a._uU(22),a.qZA(),a._uU(23),a.qZA(),a.qZA(),a.TgZ(24,"div",17),a.TgZ(25,"div",18),a.TgZ(26,"div",17),a.TgZ(27,"div",19),a.TgZ(28,"div",20),a.TgZ(29,"input",21),a.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)}),a.qZA(),a.YNc(30,b,2,0,"span",22),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"div",23),a.TgZ(32,"div",24),a.TgZ(33,"ng-select",25),a.NdJ("change",function(){return t.allSelected()})("ngModelChange",function(e){return t.selectedFilter=e}),a.TgZ(34,"ng-option",26),a._uU(35),a.qZA(),a.TgZ(36,"ng-option",27),a._uU(37),a.qZA(),a.TgZ(38,"ng-option",28),a._uU(39),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(40,"div",29),a.TgZ(41,"table",30),a.TgZ(42,"thead"),a.TgZ(43,"tr"),a.TgZ(44,"th",31),a._uU(45),a.qZA(),a.TgZ(46,"th",31),a._uU(47),a.qZA(),a.TgZ(48,"th",32),a._uU(49),a.qZA(),a.TgZ(50,"th",31),a._uU(51),a.qZA(),a.TgZ(52,"th",33),a._uU(53),a.qZA(),a.qZA(),a.qZA(),a.TgZ(54,"tbody"),a.YNc(55,A,13,10,"tr",34),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(56,v,4,1,"div",35),a.YNc(57,x,15,5,"ng-template",null,36,a.W1O),a.YNc(59,T,49,11,"ng-template",null,37,a.W1O),a.YNc(61,_,49,11,"ng-template",null,38,a.W1O),a.YNc(63,C,14,3,"ng-template",null,39,a.W1O),a.YNc(65,q,21,2,"ng-template",null,40,a.W1O)),2&e){let e,i;a.xp6(1),a.Q6J("ngIf",t.errorMessage),a.xp6(1),a.Q6J("ngIf",t.successMessage),a.xp6(6),a.hij(" ",null==t.selectedFile?null:t.selectedFile.listName," "),a.xp6(7),a.Q6J("hidden",t.loading),a.xp6(5),a.Oqu(null!==(e=null==t.prospectMetaData?null:t.prospectMetaData.matchedCount)&&void 0!==e?e:0),a.xp6(2),a.hij(" ",null!==(i=null==t.prospectMetaData?null:t.prospectMetaData.listType)&&void 0!==i?i:""," "),a.xp6(1),a.hij(" ",t.language["successfully matched to existing records"]," "),a.xp6(6),a.s9C("placeholder",t.language.Search),a.Q6J("ngModel",t.searchText),a.xp6(1),a.Q6J("ngIf",t.searchText),a.xp6(3),a.Q6J("ngModel",t.selectedFilter),a.xp6(2),a.AsE("",t.language.All," ",t.language.entries,""),a.xp6(2),a.Oqu(t.language["Matching entries"]),a.xp6(2),a.Oqu(t.language["Non-Matching entries"]),a.xp6(2),a.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),a.xp6(4),a.Oqu(t.language["First Name"]),a.xp6(2),a.Oqu(t.language["Last Name"]),a.xp6(2),a.Oqu(t.language["Street Address"]),a.xp6(2),a.Oqu(t.language["Email(s)"]),a.xp6(2),a.Oqu(t.language["Record Match"]),a.xp6(2),a.Q6J("ngForOf",t.prospectDetailLists),a.xp6(1),a.Q6J("ngIf",t.loading)}},directives:[h.O5,p.Fj,p.JJ,p.On,m.w9,m.xv,s.G,h.sg,h.mk],styles:[".border-bottom-gray[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.subs-name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}.icon-checked[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{content:url(success-icon.4b28f44149a093cf0dfa.svg);max-width:20px;margin-right:14px;font-size:0}.icon-close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{content:url(ic_error_grey.48fa69db1aebd3a5abca.svg);max-width:20px;margin-right:14px;font-size:0}.ngselect-min[_ngcontent-%COMP%]{min-width:160px}.th-del-action[_ngcontent-%COMP%]{min-width:40px}.subscriber-dot[_ngcontent-%COMP%]{display:inline-flex}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 5px 15px #80808040;-webkit-box-shadow:0px 5px 15px rgba(128,128,128,.25);border-color:#0000000d!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer;width:100%!important;border-radius:0!important;text-align:left;line-height:24px;height:34px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#edf5ff!important}.subscriber-dot[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{outline:none!important;width:32px;height:32px;background:#F8F8FA;border-radius:26px;border-color:transparent}.dropdown-toggle[_ngcontent-%COMP%]:before{display:none!important}.subscriber-dot[_ngcontent-%COMP%]   .dropdown-toggle.show[_ngcontent-%COMP%]{color:#0279ff}.del-btn.btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.min-110px[_ngcontent-%COMP%]{width:110px}.min-90px[_ngcontent-%COMP%]{width:90px}  .subscriber-delete-modal .modal-dialog{max-width:45.33%!important}  .subscriber-custom-modal .modal-dialog{max-width:46.89%!important}  .subscriber-delete-modal .modal-content{background:#FFF9F5!important}  .subscriber-modal-content{padding:0 20px 15px}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.subscriber-modal-content[_ngcontent-%COMP%]{padding:0 20px 15px}.subscriber-modal-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.max-160px[_ngcontent-%COMP%]{max-width:160px}.modal-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}"]}),e})()},57923:function(e,t,i){i.d(t,{B:function(){return P}});var s=i(23771),n=i(79765),a=i(37716),o=i(7450),r=i(12664),l=i(77745),c=i(53668),d=i(39895),g=i(38048),u=i(49342),h=i(39075),p=i(20904),m=i(13149),f=i(38583),Z=i(3679),b=i(74062);function A(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",27),a.TgZ(1,"span",28),a._UZ(2,"img",29),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"button",30),a.NdJ("click",function(){return a.CHM(e),a.oxw().closeAlert()}),a._UZ(6,"span"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.errorMessage)}}function v(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",31),a.TgZ(1,"span",32),a._UZ(2,"img",33),a.qZA(),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"button",30),a.NdJ("click",function(){return a.CHM(e),a.oxw().closeAlert()}),a._UZ(6,"span"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Oqu(e.successMessage)}}function x(e,t){if(1&e&&(a.TgZ(0,"div",34),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij(" ",e.language["subscriber-prospect-upload"]," ")}}function T(e,t){if(1&e&&(a.TgZ(0,"div",34),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.lnq(" ",e.language.Subscriber,"\xa0",e.language.File,"\xa0",e.language.Upload," ")}}function _(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"span",35),a.NdJ("click",function(){return a.CHM(e),a.oxw().clearText()}),a._UZ(1,"img",36),a.qZA()}}function C(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",41),a.NdJ("click",function(){a.CHM(e);const t=a.oxw().$implicit,i=a.oxw(),s=a.MAs(46);return i.openSubscriberDeleteModal(t,s)}),a._UZ(1,"i",42),a.qZA()}}function q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"a",37),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().goToSubscriber(t)}),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"td",38),a._uU(5),a.qZA(),a.TgZ(6,"td",38),a._uU(7),a.qZA(),a.TgZ(8,"td"),a._uU(9),a.ALo(10,"date"),a.qZA(),a.TgZ(11,"td"),a.TgZ(12,"div",39),a.YNc(13,C,2,0,"a",40),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw();a.xp6(3),a.Oqu(e.listName),a.xp6(2),a.Oqu(e.listType),a.xp6(2),a.Oqu(e.processed?i.language.Ready:i.language.Unprocessed),a.xp6(2),a.Oqu(a.xi3(10,5,e.createdTime,"d MMMM, y")),a.xp6(4),a.Q6J("ngIf",!e.processed||e.processed&&0==e.audienceSize)}}function w(e,t){if(1&e&&(a.TgZ(0,"div",43),a.TgZ(1,"div",44),a.TgZ(2,"span",45),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.Oqu(e.language.Loading)}}function O(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",59),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).downloadFunction()}),a._uU(1),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ",e.language["Download Template"],"")}}function S(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"a",59),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).downloadFunction()}),a._uU(1),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ",e.language["Download Template"],"")}}function y(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",46),a.TgZ(1,"button",47),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",48),a.TgZ(4,"div",49),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA(),a.TgZ(8,"p"),a._uU(9),a.qZA(),a.TgZ(10,"div",50),a._uU(11),a.qZA(),a.TgZ(12,"div",51),a.TgZ(13,"div",3),a.TgZ(14,"div",52),a.TgZ(15,"table",53),a.TgZ(16,"thead"),a.TgZ(17,"tr"),a.TgZ(18,"th"),a._uU(19),a.qZA(),a.TgZ(20,"th"),a._uU(21),a.qZA(),a.TgZ(22,"th"),a._uU(23),a.qZA(),a.TgZ(24,"th"),a._uU(25),a.qZA(),a.TgZ(26,"th"),a._uU(27),a.qZA(),a.TgZ(28,"th"),a._uU(29),a.qZA(),a.TgZ(30,"th"),a._uU(31,"Zip"),a.qZA(),a.TgZ(32,"th"),a._uU(33),a.qZA(),a.qZA(),a.qZA(),a.TgZ(34,"tbody"),a.TgZ(35,"tr"),a.TgZ(36,"td"),a._uU(37,"Tom"),a.qZA(),a.TgZ(38,"td"),a._uU(39,"Jones"),a.qZA(),a.TgZ(40,"td"),a._uU(41,"123 East Lane"),a.qZA(),a.TgZ(42,"td"),a._uU(43,"Ap # 6"),a.qZA(),a.TgZ(44,"td"),a._uU(45,"San Jose"),a.qZA(),a.TgZ(46,"td"),a._uU(47,"CA"),a.qZA(),a.TgZ(48,"td"),a._uU(49,"23137"),a.qZA(),a.TgZ(50,"td"),a._uU(51,"tom.j@email.com; tom2@email.com"),a.qZA(),a.qZA(),a.TgZ(52,"tr"),a.TgZ(53,"td"),a._uU(54,"Bailey"),a.qZA(),a.TgZ(55,"td"),a._uU(56,"Thompson"),a.qZA(),a.TgZ(57,"td"),a._uU(58,"P.O. Box 132"),a.qZA(),a.TgZ(59,"td"),a._uU(60,"77 Sunny St."),a.qZA(),a.TgZ(61,"td"),a._uU(62,"Omaha"),a.qZA(),a.TgZ(63,"td"),a._uU(64,"Idaho"),a.qZA(),a.TgZ(65,"td"),a._uU(66,"32140"),a.qZA(),a._UZ(67,"td"),a.qZA(),a.TgZ(68,"tr"),a.TgZ(69,"td"),a._uU(70,"Tina"),a.qZA(),a.TgZ(71,"td"),a._uU(72,"Hawkins"),a.qZA(),a.TgZ(73,"td"),a._uU(74,"22-109 Great Avenue"),a.qZA(),a._UZ(75,"td"),a.TgZ(76,"td"),a._uU(77,"Chicago"),a.qZA(),a.TgZ(78,"td"),a._uU(79,"IL"),a.qZA(),a.TgZ(80,"td"),a._uU(81,"00011"),a.qZA(),a.TgZ(82,"td"),a._uU(83,"tina@email.com"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(84,"div",54),a.TgZ(85,"button",55),a._uU(86),a.TgZ(87,"input",56),a.NdJ("change",function(t){a.CHM(e);const i=a.oxw(),s=a.MAs(42);return i.fileSelected(t,s)}),a.qZA(),a.qZA(),a.YNc(88,O,2,1,"a",57),a.YNc(89,S,2,1,"a",57),a.TgZ(90,"button",58),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(91),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu(e.language["Upload File"]),a.xp6(2),a.Oqu(e.language["All uploaded files should have 8 columns or fewer,and fewer than 10,000 rows.Street Address1,City,State,ZIP are required(may not be blank)."]),a.xp6(2),a.Oqu(e.language["Please use the column formats shown below:"]),a.xp6(2),a.hij("",e.language["File Example"]," "),a.xp6(8),a.Oqu(e.language["First Name"]),a.xp6(2),a.Oqu(e.language["Last Name"]),a.xp6(2),a.hij("",e.language["Street Address"]," 1"),a.xp6(2),a.hij("",e.language["Street Address"]," 2"),a.xp6(2),a.Oqu(e.language.City),a.xp6(2),a.Oqu(e.language.State),a.xp6(4),a.Oqu(e.language["Email(s)"]),a.xp6(53),a.hij(" ",e.language.Browse," "),a.xp6(1),a.s9C("title",e.language["no file chosen"]),a.xp6(1),a.Q6J("ngIf",e.apps.cmcPro),a.xp6(1),a.Q6J("ngIf",!e.apps.cmcPro),a.xp6(2),a.Oqu(e.language.Cancel)}}function M(e,t){if(1&e&&(a.TgZ(0,"div",62),a.TgZ(1,"label"),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.Oqu(e.language.Type)}}function k(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",69),a.TgZ(1,"input",73),a.NdJ("change",function(t){return a.CHM(e),a.oxw(3).prospectSelected(t.target.checked)}),a.qZA(),a.TgZ(2,"label",74),a._uU(3),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(3);a.xp6(1),a.Q6J("checked",e.prospectChecked),a.xp6(2),a.hij(" ",e.language.prospects," ")}}function U(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",62),a.TgZ(1,"div",68),a.TgZ(2,"div",69),a.TgZ(3,"input",70),a.NdJ("change",function(t){return a.CHM(e),a.oxw(2).subscriberSelected(t.target.checked)}),a.qZA(),a.TgZ(4,"label",71),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,k,4,2,"div",72),a._UZ(7,"div"),a._UZ(8,"div"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(3),a.Q6J("checked",e.subscriberChecked),a.xp6(2),a.hij(" ",e.language.Subscribers," "),a.xp6(1),a.Q6J("ngIf",e.apps.cmcPro)}}function D(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",75),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).saveFile()}),a._uU(1),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(1),a.Oqu(e.language.Save)}}function N(e,t){if(1&e&&(a.TgZ(0,"button",76),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Oqu(e.language.Save)}}function I(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",46),a.TgZ(1,"button",47),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",60),a.TgZ(4,"div",61),a._uU(5),a.qZA(),a.TgZ(6,"div",62),a.TgZ(7,"label"),a._uU(8),a.qZA(),a.TgZ(9,"input",63),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().selectedFileName=t})("blur",function(){a.CHM(e);const t=a.oxw();return t.removeUnwantedSpace("selectedFileName",t.selectedFileName)}),a.qZA(),a.qZA(),a.YNc(10,M,3,1,"div",64),a.YNc(11,U,9,3,"div",64),a.TgZ(12,"div",65),a.YNc(13,D,2,1,"button",66),a.YNc(14,N,2,1,"button",67),a.TgZ(15,"button",58),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(16),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu(e.language.fileName),a.xp6(3),a.Oqu(e.language.Name),a.xp6(1),a.Q6J("ngModel",e.selectedFileName),a.xp6(1),a.Q6J("ngIf",e.apps.cmcPro),a.xp6(1),a.Q6J("ngIf",e.apps.cmcPro),a.xp6(2),a.Q6J("ngIf",e.selectedFileName),a.xp6(1),a.Q6J("ngIf",!e.selectedFileName),a.xp6(2),a.Oqu(e.language.Cancel)}}function E(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",46),a.TgZ(1,"button",47),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",60),a.TgZ(4,"div",61),a._uU(5),a.qZA(),a.TgZ(6,"div",62),a.TgZ(7,"label"),a._uU(8),a.qZA(),a._UZ(9,"input",77),a.qZA(),a.TgZ(10,"div",65),a.TgZ(11,"button",78),a._uU(12),a.qZA(),a.TgZ(13,"button",58),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(14),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(5),a.Oqu(e.language.fileName),a.xp6(3),a.Oqu(e.language.Name),a.xp6(4),a.Oqu(e.language["Save Changes"]),a.xp6(2),a.Oqu(e.language.Cancel)}}function F(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",46),a.TgZ(1,"button",47),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a._UZ(2,"span"),a.qZA(),a.qZA(),a.TgZ(3,"div",60),a.TgZ(4,"div",79),a.TgZ(5,"div",80),a._UZ(6,"img",81),a.qZA(),a.TgZ(7,"div"),a.TgZ(8,"div",82),a._uU(9),a.qZA(),a.TgZ(10,"button",75),a.NdJ("click",function(){return a.CHM(e),a.oxw().deleteFile()}),a._uU(11),a.qZA(),a.TgZ(12,"button",83),a.NdJ("click",function(){return a.CHM(e).$implicit.close("Close click")}),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(9),a.AsE("",e.language["Are you sure you want to delete"],"",e.fileTodelete.listName," "),a.xp6(2),a.Oqu(e.language.Delete),a.xp6(2),a.Oqu(e.language.Cancel)}}let P=(()=>{class e{constructor(e,t,i,s,a,o,r,l,c,d){this.translateService=e,this.dialogService=t,this.prospectSubscriberService=i,this.organizationApiService=s,this.router=a,this.sso=o,this.commonOrgService=r,this.titleService=l,this.CommonFunctionsService=c,this.exportExcelService=d,this.dtOptions={},this.loading=!1,this.errorMessage="",this.successMessage="",this.saveButtonShow=!1,this.prospectListError=!1,this.subscriberChecked=!0,this.prospectChecked=!1,this.selectedFileName="",this.listName="",this.subscriptions=[],this.apps={cmcPro:!1,cmc:!1},this.dtTrigger=new n.xQ;let g=this.router.url;this.MODULE=this.sso.getRedirectModule(g),this.ORG_ID=this.sso.getOrganizationID(g),this.commonOrgService.currentPageAdder("subscriber-prospect-upload")}ngOnInit(){"systemAdministration"===this.MODULE?this.getorgInfoData():this.showApps(),this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,ordering:!0,order:[0,"asc"],searching:!0,dom:"tipr",retrieve:!0,processing:!1,columnDefs:[{targets:[3,4],orderable:!1}]},this.language=this.translateService.defualtLanguage,this.titleService.setTitle(`${this.language.Subscriber} ${this.language.Prospect} ${this.language.File} ${this.language.Upload} - ${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - ${this.language["Calix Cloud"]}`),this.subscriptions.push(this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.Subscriber} ${this.language.Prospect} ${this.language.File} ${this.language.Upload} - ${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - ${this.language["Calix Cloud"]}`),this.closeAlert(),this.getFileList(),this.setTableOptions()})),this.getFileList(),this.tableLanguageOptions()}subscriberSelected(e){this.subscriberChecked=e,this.prospectChecked=!e}prospectSelected(e){this.prospectChecked=e,this.subscriberChecked=!e}fileSelected(e,t){const i=e.target.files[0];let s,n=this;var a=new FileReader;if(a.readAsText(i),a.onload=function(e){var t=e.target.result.split("\n");t[0]="First Name,Last Name,Street Address 1,Street Address 2,City,State,Zip,Email(s)";let a=t.join("\n");s=new Blob([a],{type:"text/csv"}),n.selectedFile=new File([s],i.name,{type:"text/csv"})},!i||!i.name.endsWith(".csv"))return this.errorMessage=this.language["Please upload a file with valid format (.csv)"],void setTimeout(()=>{this.scrollTop(),this.dialogService.dismissAll()},200);this.openSubscriberFileNameModal(t),this.selectedFileName=i.name.replace(/\.[^/.]+$/gm,"").replace(/[^a-zA-Z0-9 _.-]+/gm,""),this.selectedFile=i,e.target.value="",this.subscriberSelected(!0)}saveFile(){let e;this.closeAlert(),this.loading=!0,this.selectedFileName=this.selectedFileName.trim(),e=this.subscriberChecked?this.prospectSubscriberService.saveSubscriberFile(this.selectedFile,this.selectedFileName):this.prospectChecked?this.prospectSubscriberService.saveProspectFile(this.selectedFile,this.selectedFileName):this.prospectSubscriberService.saveSubscriberFile(this.selectedFile,this.selectedFileName),this.subscriptions.push(e.subscribe(e=>{this.successMessage=this.language["Saved Successfully"],this.errorMessage="",this.getFileList()},e=>{this.errorMessage=this.errorHandler(e),this.successMessage="",this.loading=!1})),setTimeout(()=>{this.scrollTop(),this.dialogService.dismissAll()},500)}deleteFile(){let e;this.loading=!0,"prospects"==this.fileTodelete.listType?e=this.prospectSubscriberService.deleteProspect(this.fileTodelete.id):"subscribers"==this.fileTodelete.listType&&(e=this.prospectSubscriberService.deleteSubscriber(this.fileTodelete.id)),this.subscriptions.push(e.subscribe(e=>{this.successMessage=this.language["Deleted Successfully"],console.log(this.successMessage),this.errorMessage="",this.getFileList()},e=>{this.errorMessage=this.errorHandler(e),this.successMessage="",this.loading=!1})),setTimeout(()=>{this.scrollTop(),this.dialogService.dismissAll()},500)}scrollTop(){window.scroll({top:0,left:0,behavior:"smooth"})}closeAlert(){this.errorMessage="",this.successMessage=""}redirectToFileUpload(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/subscriber-prospect-upload"])}searchName(e){this.dtElement.dtInstance.then(t=>{t.search(e).draw()})}clearText(){this.searchText="",this.searchName(this.searchText)}getFileList(){this.loading=!0,this.subscriptions.push(this.prospectSubscriberService.getFileList().subscribe(e=>{this.reRender(),this.prospectListError=!1,e&&e.length>0?(this.prospectListError=!1,this.apps.cmcPro||(e=e.filter(e=>"prospects"!=e.listType)),this.prospectLisData=e):(this.prospectListError=!0,this.prospectLisData=[]),setTimeout(()=>{this.reRender(),this.searchText&&this.searchName(this.searchText),this.loading=!1},500)},e=>{this.prospectListError=!0,setTimeout(()=>this.reRender(),500),this.loading=!1,this.errorMessage=this.errorHandler(e),this.successMessage=""}))}errorHandler(e){return e.error?e.error.errorDesc?this.errorMessage=e.error.errorDesc:500==e.error.status?this.errorMessage="Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?this.errorMessage="An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status?this.errorMessage="User Unauthorized":e.error.message&&(this.errorMessage=e.error.message):this.errorMessage=this.commonOrgService.pageErrorHandle(e),this.errorMessage}reRender(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(e=>{e.destroy(),this.dtTrigger.next()}),this.dtTrigger.next()}openSubscriberFileNameModal(e){this.modalRef=this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"custom-modal subscriber-custom-edit"})}openSubscriberEditFileNameModal(e){this.modalRef=this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"custom-modal subscriber-custom-edit"})}openSubscriberDeleteModal(e,t){this.closeAlert(),this.modalRef=this.dialogService.open(t,{centered:!0,windowClass:"custom-modal subscriber-alert-delete",backdrop:"static",keyboard:!1}),this.fileTodelete=e}openSubscriberUploadModal(e){this.closeAlert(),this.modalRef=this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"custom-modal subscriber-custom-upload"})}goToSubscriber(e){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/subscriber-prospect-list"],{state:{selectedFile:e}})}validateFileName(){return/^[A-Za-z0-9 _.-]+$/gm.test(this.selectedFileName.trim())}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&delete this.dtOptions.language}ngOnDestroy(){this.subscriptions.forEach(e=>null==e?void 0:e.unsubscribe()),this.dtTrigger&&this.dtTrigger.unsubscribe()}showApps(){this.sso.getEntitlements()[209]&&(this.apps.cmcPro=!0)}setTableOptions(){this.tableLanguageOptions(),setTimeout(()=>{this.reRender()},200)}getorgInfoData(){this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(e=>{var t;if(this.orgInfoEntitlementdata=e,e){let e={};for(let i=0;i<(null===(t=this.orgInfoEntitlementdata)||void 0===t?void 0:t.length);i++)e[this.orgInfoEntitlementdata[i].appType]=this.orgInfoEntitlementdata[i];this.apps.cmc=!!(e[119]&&"Expired"!==e[119].status||e[209]&&"Expired"!==e[209].status),this.apps.cmcPro=!(!e[209]||"Expired"===e[209].status)}},e=>{})}removeUnwantedSpace(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}downloadFunction(){let e="";this.apps.cmcPro&&(e=`${this.language.Subscriber}_${this.language.Prospect}_${this.language.Template}`),this.apps.cmcPro||(e=`${this.language.Subscriber}_${this.language.Template}`);let t=this,i=[];[{"First Name":"Tom","Last Name":"Jones","Street Address1":"123 East Lane","Street Address2":"Ap # 6",City:"San Jose",State:"CA",Zip:"23137","Email(s)":"tom.j@email.com; tom2@email.com"},{"First Name":"Bailey","Last Name":"Thompson","Street Address1":"P.O. Box 132","Street Address2":"77 Sunny St.",City:"Omaha",State:"Idaho",Zip:"32140","Email(s)":""},{"First Name":"Tina","Last Name":"Hawkins","Street Address1":"22-109 Great Avenue","Street Address2":"",City:"Chicago",State:"IL",Zip:"00011","Email(s)":"tina@email.com"}].map(e=>function(e){let s={};for(let i in e){let n,a=t.language[i];("Street Address1"==i||"Street Address2"==i)&&(n=i.substring(0,i.length-1),a=t.language[n]),a?"Street Address1"==i?s[`${a} 1`]=e[i]:"Street Address2"==i?s[`${a} 2`]=e[i]:s[a]=e[i]:s[i]=e[i]}return i.push(s),s}(e)),this.exportExcelService.downLoadCSVRevenue(e,i)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.s),a.Y36(r.FF),a.Y36(l.g),a.Y36(c.F),a.Y36(d.F0),a.Y36(g.t6),a.Y36(u.v),a.Y36(h.Dx),a.Y36(p.i),a.Y36(m.O))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-subscriber-prospect-upload"]],viewQuery:function(e,t){if(1&e&&a.Gf(s.G,5),2&e){let e;a.iGM(e=a.CRH())&&(t.dtElement=e.first)}},decls:47,vars:21,consts:[[1,"container","position-relative"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"w-100"],["class","ccl-admin-title",4,"ngIf"],[1,"w-100","d-flex","flex-wrap","align-items-center","mt-1"],[1,"btn-default","primary",3,"click"],[1,"row",3,"hidden"],[1,"table-filter"],[1,"ccl-form"],[1,"d-flex","flex-wrap"],[1,"search-input","position-relative","pr-4"],["type","text",3,"placeholder","ngModel","ngModelChange","input"],["class","pos-abs-right",3,"click",4,"ngIf"],[1,"overflow-auto","w-100","mt-3"],["datatable","",1,"zip-code-table","table","table-hover",3,"dtOptions","dtTrigger"],[1,"sorting_disabled"],[1,"th-del-action"],[3,"ngClass"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-center"],["class","center-chart flex mt-60",4,"ngIf"],["SubscriberUploadModal",""],["SubscriberFileName",""],["SubscriberEditFileName",""],["SubscriberDeleteModal",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","mt-10",3,"click"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"ccl-admin-title"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"primary","cursor-pointer","text-decoration-none","text-break",3,"click"],[1,"text-capitalize"],[1,"action-icons-row","text-center"],["class","primary cursor-pointer",3,"click",4,"ngIf"],[1,"primary","cursor-pointer",3,"click"],[1,"fa","fa-trash-o"],[1,"center-chart","flex","mt-60"],[1,"spinner-border","text-primary","mt-60"],[1,"sr-only"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"px-4"],["id","upload-csv-modal-title",1,"ccl-admin-title","mb-2"],[1,"subscriber-file-title"],[1,"subscriber-file-example-table","mb-2"],[1,"col-md-12"],[1,"table-example","w-100"],[1,"my-3"],[1,"btn-default","primary","file-browse-btn","mr-3"],["type","file","accept",".csv",3,"title","change"],["class","btn-dft btn-default text-decoration-none py-1 mr-3",3,"click",4,"ngIf"],[1,"btn-link","primary",3,"click"],[1,"btn-dft","btn-default","text-decoration-none","py-1","mr-3",3,"click"],[1,"subscriber-alert"],[1,"ccl-admin-title","mb-4"],[1,"ccl-form","mb-2"],["type","text","minlength","1","maxlength","500","trimSpace","",3,"ngModel","ngModelChange","blur"],["class","ccl-form mb-2",4,"ngIf"],[1,"mt-4"],["class","btn-default primary mr-3",3,"click",4,"ngIf"],["class","btn-default primary mr-3","disabled","",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-align-center"],["type","radio","id","subscriberChecked",3,"checked","change"],["for","subscriberChecked",1,"form-check-label"],["class","d-flex flex-align-center",4,"ngIf"],["type","radio","id","prospectChecked",3,"checked","change"],["for","prospectChecked",1,"form-check-label"],[1,"btn-default","primary","mr-3",3,"click"],["disabled","",1,"btn-default","primary","mr-3"],["type","text","value","Harbourfront"],[1,"btn-default","primary","mr-3"],[1,"d-flex"],[1,"warn-icon-min"],["src","../../../assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title","mb-3"],[1,"btn-dft","btn-default","py-1",3,"click"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.YNc(1,A,7,1,"div",1),a.YNc(2,v,7,1,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.YNc(5,x,2,1,"div",5),a.YNc(6,T,2,3,"div",5),a.TgZ(7,"p"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"div",6),a.TgZ(10,"button",7),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(40);return t.openSubscriberUploadModal(i)}),a._uU(11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"div",8),a.TgZ(13,"div",9),a.TgZ(14,"div",10),a.TgZ(15,"div",11),a.TgZ(16,"div",12),a.TgZ(17,"input",13),a.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)}),a.qZA(),a.YNc(18,_,2,0,"span",14),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",15),a.TgZ(20,"table",16),a.TgZ(21,"thead"),a.TgZ(22,"tr"),a.TgZ(23,"th"),a._uU(24),a.qZA(),a.TgZ(25,"th",17),a._uU(26),a.qZA(),a.TgZ(27,"th",17),a._uU(28),a.qZA(),a.TgZ(29,"th",17),a._uU(30),a.qZA(),a._UZ(31,"th",18),a.qZA(),a.qZA(),a.TgZ(32,"tbody",19),a.YNc(33,q,14,8,"tr",20),a.qZA(),a.TgZ(34,"tbody",19),a.TgZ(35,"tr"),a.TgZ(36,"td",21),a._uU(37),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(38,w,4,1,"div",22),a.qZA(),a.YNc(39,y,92,16,"ng-template",null,23,a.W1O),a.YNc(41,I,17,8,"ng-template",null,24,a.W1O),a.YNc(43,E,15,4,"ng-template",null,25,a.W1O),a.YNc(45,F,14,4,"ng-template",null,26,a.W1O)}2&e&&(a.xp6(1),a.Q6J("ngIf",t.errorMessage),a.xp6(1),a.Q6J("ngIf",t.successMessage),a.xp6(3),a.Q6J("ngIf",t.apps.cmcPro),a.xp6(1),a.Q6J("ngIf",!t.apps.cmcPro),a.xp6(2),a.hij(" ",t.language["Upload a subscriber .CSV file by clicking the \u201cBrowse\u201d button below. Uploaded files may take up to 24 hours to be processed and matched with existing records."]," "),a.xp6(3),a.hij("",t.language["Upload .CSV File"]," "),a.xp6(1),a.Q6J("hidden",t.loading),a.xp6(5),a.s9C("placeholder",t.language.Search),a.Q6J("ngModel",t.searchText),a.xp6(1),a.Q6J("ngIf",t.searchText),a.xp6(2),a.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),a.xp6(4),a.Oqu(t.language.Name),a.xp6(2),a.Oqu(t.language.Type),a.xp6(2),a.Oqu(t.language.Status),a.xp6(2),a.Oqu(t.language["Date Added"]),a.xp6(2),a.Q6J("ngClass",t.prospectListError?"d-none":"table-row-group"),a.xp6(1),a.Q6J("ngForOf",t.prospectLisData),a.xp6(1),a.Q6J("ngClass",t.prospectListError?"table-row-group":"d-none"),a.xp6(3),a.Oqu(t.language.nodata),a.xp6(1),a.Q6J("ngIf",t.loading))},directives:[f.O5,Z.Fj,Z.JJ,Z.On,s.G,f.mk,f.sg,Z.wO,Z.nD,b.f],pipes:[f.uU],styles:[".file-browse-btn[_ngcontent-%COMP%]{position:relative}.file-browse-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;font-size:0;opacity:0}.table-filter[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;justify-content:space-between;align-items:center;margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px}.table-filter[_ngcontent-%COMP%]   .ngselect-min[_ngcontent-%COMP%]{min-width:160px}.del-btn[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.max-w-36[_ngcontent-%COMP%]{max-width:36px}.table-row-selected[_ngcontent-%COMP%]{background:#EDF5FF!important}.th-del-action[_ngcontent-%COMP%]{min-width:100px;max-width:100px}.action-icons-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;min-width:38px;display:inline-block}.zip-code-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:20%}  .subscriber-alert-delete .modal-dialog,   .subscriber-custom-edit .modal-dialog{max-width:45.33%!important}  .subscriber-alert-delete .modal-content{background:#FFF9F5!important}  .subscriber-custom-upload .modal-dialog{max-width:90%!important}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.subscriber-alert[_ngcontent-%COMP%]{padding:0 20px 15px}.subscriber-alert[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.btn-default.btn-dft[_ngcontent-%COMP%]{cursor:pointer}.subscriber-file-title[_ngcontent-%COMP%]{color:#4c4c4c;font-weight:600;font-size:16px;line-height:20px;margin-bottom:10px}.table-example[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#4c4c4c;font-weight:600;font-size:16px;line-height:20px}.table-example[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-example[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;border:1px solid #EBEAEF}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}"]}),e})()},35555:function(e,t,i){i.r(t),i.d(t,{SysAdminModule:function(){return St}});var s=i(38583),n=i(3679),a=i(39895),o=i(5457),r=i(18202),l=i(96951),c=i(37423),d=i(48705),g=i(46517),u=i(22098),h=i(68895),p=i(37716),m=i(49342),f=i(30900),Z=i(89342),b=i(39075),A=i(20904),v=i(74062);function x(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",24),p.TgZ(1,"span",25),p._UZ(2,"img",26),p.qZA(),p.TgZ(3,"button",27),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",28),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.nameErrorInfo,p.oJD)}}function T(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",29),p.TgZ(1,"span",30),p._UZ(2,"img",31),p.qZA(),p.TgZ(3,"button",27),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",32),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.successInfo,p.oJD)}}let _=(()=>{class e{constructor(e,t,i,s,n,a){this.router=e,this.commonOrgService=t,this.customTranslateService=i,this.api=s,this.titleService=n,this.CommonFunctionsService=a,this.pageAvailable=!1,this.alertVisible=!1,this.secondalertVisible=!1,this.successalertvisible=!1,this.orgName="",this.orgDescription="",this.add={name:"",description:"",externalOrgRef:null,salesforceId:null,oracleId:null,parentId:null,capStatus:null,capOverride:null,capExpires:null,bypassCAP:!1,inheritList:null,parentOrgName:null,territory:null,cloudGeography:null,country:null},this.loader=!1,this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.addOrganization} - ${this.language["System Administration"]} - ${this.language["Calix Cloud"]}`)}),this.commonOrgService.currentPageAdder("organizations"),this.titleService.setTitle(`${this.language.addOrganization} - ${this.language["System Administration"]} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.success=!1,this.nameError=!1}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.addSubs&&this.addSubs.unsubscribe()}goToOrgList(){this.router.navigate(["systemAdministration/organizations"])}addNewOrg(){if(this.nameError=!1,this.validation(),this.nameError)return;let e=this.add;e.name=this.orgName,e.description=this.orgDescription?this.orgDescription:"",this.loader=!0,this.addSubs=this.api.AddOrg(e).subscribe(e=>{this.loader=!1,this.successInfo="Organization added Successfully",this.success=!0,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.closeAlert(),this.goToOrgList()},1e3)},e=>{this.loader=!1,this.nameErrorInfo=401==e.status?this.language["Access Denied"]:500==e.status?"Internal Server Error":null!=e.error&&"object"==typeof e.error&&e.error.errorMessage?`${e.error.errorMessage}`:`${e.message}`,this.closeAlert(),this.commonOrgService.pageScrollTop(),this.nameError=!0})}validation(){let e=this.orgName.trim();""==e?(this.nameErrorInfo=this.language["Organization name is mandatory!"],this.nameError=!0,this.alertVisible=!0,this.secondalertVisible=!1,this.successalertvisible=!1):e.length<2&&(this.nameErrorInfo=this.language["Organization name must be of at least 2 letters"],this.nameError=!0,this.secondalertVisible=!0,this.alertVisible=!1,this.successalertvisible=!1)}cancel(){this.goToOrgList()}closeAlert(){this.success=!1,this.nameError=!1}pageErrorHandle(e){this.nameErrorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.nameError=!0}removeUnwantedSpace(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(a.F0),p.Y36(m.v),p.Y36(f.d),p.Y36(Z.z),p.Y36(b.Dx),p.Y36(A.i))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-add-organization"]],decls:33,vars:12,consts:[["id","scrollTopId",1,"container","position-relative"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","mb-3"],[1,"col-md-4"],[1,"ccl-title"],[1,"col-md-8","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"container","px-0"],["autocomplete","off"],[1,"row"],[1,"col-md-6","my-3"],[1,"form-group","ccl-form"],["for","first"],[1,"required-field"],["type","text","id","orgName","name","orgName","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],[1,"col-md-6","my-3","pr-0"],["for","last"],["type","text","id","orgDescription","name","orgDescription","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],[1,"w-100","my-2","text-right","pr-0"],["_ngcontent-veq-c50","",1,"btn-default","primary","mx-3",3,"click"],["_ngcontent-veq-c50","",1,"btn-default","btn-dft","py-1",3,"click"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.YNc(1,x,6,1,"div",1),p.YNc(2,T,6,1,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p._uU(6),p.qZA(),p.qZA(),p.TgZ(7,"div",6),p.TgZ(8,"div",7),p.TgZ(9,"a",8),p.NdJ("click",function(){return t.goToOrgList()}),p._UZ(10,"i",9),p._uU(11),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(12,"div",10),p.TgZ(13,"form",11),p.TgZ(14,"div",12),p.TgZ(15,"div",13),p.TgZ(16,"div",14),p.TgZ(17,"label",15),p._uU(18),p.qZA(),p.TgZ(19,"span",16),p._uU(20,"*"),p.qZA(),p.TgZ(21,"input",17),p.NdJ("ngModelChange",function(e){return t.orgName=e})("blur",function(){return t.removeUnwantedSpace("orgName",t.orgName)}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(22,"div",18),p.TgZ(23,"div",14),p.TgZ(24,"label",19),p._uU(25),p.qZA(),p.TgZ(26,"input",20),p.NdJ("ngModelChange",function(e){return t.orgDescription=e})("blur",function(){return t.removeUnwantedSpace("orgDescription",t.orgDescription)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(27,"div",12),p.TgZ(28,"div",21),p.TgZ(29,"button",22),p.NdJ("click",function(){return t.addNewOrg()}),p._uU(30),p.qZA(),p.TgZ(31,"button",23),p.NdJ("click",function(){return t.cancel()}),p._uU(32),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("ngIf",t.nameError),p.xp6(1),p.Q6J("ngIf",t.success),p.xp6(4),p.Oqu(t.language.addOrganization),p.xp6(5),p.hij(" ",t.language.backToOrganizationList,""),p.xp6(7),p.Oqu(t.language.organizationName),p.xp6(3),p.s9C("placeholder",t.language.EnterOrganizationName),p.Q6J("ngModel",t.orgName),p.xp6(4),p.Oqu(t.language.description),p.xp6(1),p.s9C("placeholder",t.language.EnterDescription),p.Q6J("ngModel",t.orgDescription),p.xp6(4),p.Oqu(t.language.submit),p.xp6(2),p.Oqu(t.language.Cancel))},directives:[s.O5,n._Y,n.JL,n.F,n.Fj,v.f,n.JJ,n.On],styles:[""]}),e})();var C=i(95399),q=i(18890),w=i(61157),O=i(56219),S=i(86039),y=i(43949),M=i(81162),k=i(10584),U=i(86355),D=i(71376),N=i(12978),I=i(79765),E=i(25917),F=i(9112),P=i(29923),L=i(92340),J=i(23771),R=i(88002),H=i(5304),Y=i(38048),Q=i(12664),z=i(86640);const B=["deleteModal"];function j(e,t){1&e&&(p.TgZ(0,"div",25),p.TgZ(1,"div",26),p.TgZ(2,"div",27),p.TgZ(3,"span",28),p._uU(4,"Loading..."),p.qZA(),p.qZA(),p.qZA(),p.qZA())}function V(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",29),p.TgZ(1,"span",30),p._UZ(2,"img",31),p.qZA(),p.TgZ(3,"button",32),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",33),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.errorInfo,p.oJD)}}function G(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",34),p.TgZ(1,"button",32),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(2,"span"),p.qZA(),p._UZ(3,"div",35),p.qZA()}if(2&e){const e=p.oxw();p.xp6(3),p.Q6J("innerHtml",e.successInfo,p.oJD)}}function W(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",29),p.TgZ(1,"span",30),p._UZ(2,"img",31),p.qZA(),p.TgZ(3,"button",32),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlertWarning()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",33),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.warningInfo,p.oJD)}}function X(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr",36),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td",37),p.TgZ(4,"i",38),p.NdJ("click",function(){const t=p.CHM(e).$implicit;return p.oxw().deleteUser(t)}),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=t.$implicit,i=p.oxw();p.s9C("id",e.id),p.xp6(2),p.hij(" ",e.username," "),p.xp6(2),p.s9C("title",i.language.delete)}}const K=function(){return["active","about_to_expire","in_grace_period"]},ee=function(){return{standalone:!0}};function te(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td"),p._UZ(2,"input",44),p._UZ(3,"input",45),p._uU(4),p.qZA(),p.TgZ(5,"td",42),p.TgZ(6,"div",46),p.TgZ(7,"label",47),p.TgZ(8,"input",48),p.NdJ("click",function(t){return p.CHM(e),p.oxw(2).preventClick(t)}),p.qZA(),p._uU(9,"\xa0\xa0\xa0 "),p.qZA(),p.qZA(),p.qZA(),p.TgZ(10,"td",42),p.TgZ(11,"div",46),p.TgZ(12,"label",47),p.TgZ(13,"input",49),p.NdJ("click",function(t){return p.CHM(e),p.oxw(2).preventClick(t)}),p.qZA(),p._uU(14," \xa0\xa0\xa0 "),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"td"),p._uU(16),p.qZA(),p.TgZ(17,"td"),p._uU(18),p.qZA(),p.TgZ(19,"td",50),p._UZ(20,"input",51),p.TgZ(21,"ng-select",52),p.NdJ("ngModelChange",function(t){const i=p.CHM(e).index;return p.oxw(2).entStatus[i]=t})("change",function(){const t=p.CHM(e).index,i=p.oxw(2);return i.removePlaceholder(t),i.showSubmitButtons=!0}),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=t.$implicit,i=t.index,s=p.oxw(2);p.xp6(2),p.s9C("value",e.appType),p.xp6(1),p.s9C("value",e.name),p.xp6(1),p.hij(" ",e.name," "),p.xp6(4),p.Gre("",e.appType," not-allow d-none"),p.MGl("id","",e.appType,"_entitled"),p.s9C("value",e.appType),p.Q6J("checked",p.DdM(24,K).includes((s.entStatus[i]||"").toLowerCase()))("readonly",!0),p.xp6(5),p.Gre("",e.appType," not-allow d-none"),p.MGl("id","",e.appType,"_inherited"),p.Q6J("checked",!1)("readonly",!0),p.xp6(3),p.Oqu(e.startDate?e.startDate:""),p.xp6(2),p.Oqu(e.endDate?e.endDate:""),p.xp6(2),p.s9C("value",e.overrideEndDate),p.xp6(1),p.s9C("placeholder",s.language.Select),p.Q6J("id","status-list"+i)("items",s.statusList)("ngModel",s.entStatus[i])("ngModelOptions",p.DdM(25,ee))}}function ie(e,t){if(1&e&&(p.TgZ(0,"div",39),p.TgZ(1,"form",40),p.TgZ(2,"table",41),p.TgZ(3,"thead",19),p.TgZ(4,"tr"),p.TgZ(5,"th"),p._uU(6),p.qZA(),p._UZ(7,"th",42),p._UZ(8,"th",42),p.TgZ(9,"th"),p._uU(10),p.qZA(),p.TgZ(11,"th"),p._uU(12),p.qZA(),p.TgZ(13,"th"),p._uU(14),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"tbody"),p.YNc(16,te,22,26,"tr",43),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Q6J("dtOptions",e.dtOptions),p.xp6(4),p.Oqu(e.language.appName),p.xp6(4),p.Oqu(e.language.salesStartdate),p.xp6(2),p.Oqu(e.language.salesEnddate),p.xp6(2),p.Oqu(e.language.Status),p.xp6(2),p.Q6J("ngForOf",e.entitlements)}}function se(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",53),p.TgZ(1,"div",54),p.TgZ(2,"button",55),p.NdJ("click",function(){return p.CHM(e),p.oxw().save()}),p._uU(3),p.qZA(),p.TgZ(4,"button",56),p.NdJ("click",function(){return p.CHM(e),p.oxw().cancel()}),p._uU(5),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();p.xp6(3),p.Oqu(e.language.saveEnregistrer),p.xp6(2),p.Oqu(e.language.Cancel)}}function ne(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",57),p.TgZ(1,"h4",58),p._uU(2),p.qZA(),p.TgZ(3,"button",59),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeModal()}),p._UZ(4,"span",60),p.qZA(),p.qZA(),p.TgZ(5,"div",61),p._uU(6),p.qZA(),p.TgZ(7,"div",62),p.TgZ(8,"button",63),p.NdJ("click",function(){return p.CHM(e),p.oxw().confirmDeleteSecleted()}),p._uU(9),p.qZA(),p.TgZ(10,"button",64),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeModal()}),p._uU(11),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();p.xp6(2),p.Oqu(e.modalTitle),p.xp6(4),p.AsE(" ",e.language["Are you sure you want to delete this administrator"],"? (",e.modalInfo,") "),p.xp6(3),p.Oqu(e.language.yes),p.xp6(2),p.Oqu(e.language.no)}}const ae=i(91704);let oe=(()=>{class e{constructor(e,t,i,s,n,a,o){this.customTranslateService=e,this.commonOrgService=t,this.router=i,this.api=s,this.sso=n,this.dialogService=a,this.titleService=o,this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.appsTableData=[],this.userTableOptions={},this.entitlementAvailable=!1,this.roles=[],this.usersList=[],this.addedUsersList=[],this.dtTrigger=new I.xQ,this.isRerender=!1,this.tableOptions={pagingType:"full_numbers",pageLength:10,processing:!0,searching:!1,ordering:!1,lengthChange:!1,language:{emptyTable:"No users available in table"},drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&ae(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.dtOptions={lengthChange:!1,searching:!1,ordering:!1,paging:!1,dom:"t"},this.loader=!0,this.errorInfo="",this.successInfo="",this.warningInfo="",this.endDates={"118_endDate":"","119_endDate":"","120_endDate":"","122_endDate":"","131_endDate":"","200_endDate":"","201_endDate":"","202_endDate":"","203_endDate":"","204_endDate":"","205_endDate":""},this.usersCount=0,this.showSubmitButtons=!1,this.orgRoleAvail=!0,this.sysAdminRoute="systemAdministration",this.model={year:parseInt("2020"),month:parseInt("10"),day:parseInt("1")},this.statusList=[],this.entStatus=[];let r=this.router.url;this.ORG_ID=this.sso.getOrganizationID(r),this.commonOrgService.currentPageAdder("orgDetail"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.orgData&&(this.orgName=this.orgData.name?this.orgData.name:"Calix"),this.getData(),this.sysAdminRoute=L.N.SYS_ADMIN_ROUTE,this.sso.getRedirectModule(r)}ngOnInit(){let e=this.sso.getRedirectModule(this.router.url);this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(t=>{this.language=t,this.loader=!0,this.dataAvailable=!1,this.isRerender=!0,this.renderUsersTable("language"),this.titleService.setTitle(`${this.language["Organization detail"]} - ${"systemAdministration"===e?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["Organization detail"]} - ${"systemAdministration"===e?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.frTable=this.customTranslateService.fr,this.tableLanguageOptions(),this.closeAlert(),this.setYearRange(),this.statusList=[{label:this.language.Active,value:"active"},{label:this.language["About to Expire"],value:"about_to_expire"},{label:this.language["In Grace Period"],value:"in_grace_period"},{label:this.language.Expired,value:"expired"}]}ngAfterViewInit(){}ngOnDestroy(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.usersAvailInterval&&clearInterval(this.usersAvailInterval),this.translateSubscribe&&this.translateSubscribe.unsubscribe()}getData(){const e=[];[`${L.N.CALIX_ADMIN_ORG_BASE_URL}entitlements/cloud/all`,`${L.N.CALIX_ADMIN_ORG_BASE_URL}entitlements/${this.ORG_ID}`,`${L.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/roles`,`${L.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/users/_count`].forEach(t=>{const i=this.api.callRestApi(t).pipe((0,R.U)(e=>e),(0,H.K)(e=>(0,E.of)(e)));e.push(i)}),this.combineLatest=(0,F.aj)(e),this.makeParallelRequest()}makeParallelRequest(){this.parallelReqSubscribtion=this.combineLatest.subscribe(e=>{if(this.entitlements=e[0],this.orgEntitlements=e[1],this.roles=e[2],this.usersCount=e[3],e.length)for(let t of e)if(null!=t&&null!=t.error)return this.loader=!1,this.pageErrorHandle(t),this.commonOrgService.pageScrollTop(),this.addedUsersList=[],this.renderUsersTable(),void(this.entitlementAvailable=!0);this.roles.length?this.getOrgAdminUsers():(this.addedUsersList=[],this.renderUsersTable()),this.orgEntitlements&&this.combineData(),this.getOrgUsersList()},e=>{this.loader=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{this.loader=!1})}getOrgUsersList(){this.api.UsersListByOrgId(this.ORG_ID,this.usersCount).subscribe(e=>{this.usersList=e||[],this.usersAvail=!0},e=>{this.loader=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()})}getOrgAdminUsers(){var e=this.roles.filter(e=>"OrgAdmin"===e.name);e&&e.length?(this.orgAdminRoleId=e[0]._id,this.roleData(),this.orgRoleAvail=!0):(this.orgRoleAvail=!1,this.addedUsersList=[],this.renderUsersTable(),this.errorInfo=this.language["Role (null) not found"],this.error=!0,this.commonOrgService.pageScrollTop())}roleData(){this.api.RoleData(this.orgAdminRoleId).subscribe(e=>{this.addedUsersList=e.users?this.addId(e.users):[],this.renderUsersTable(),setTimeout(()=>{this.checkSelected()},500)},e=>{this.loader=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop(),this.addedUsersList=[],this.renderUsersTable()})}addId(e){return e.forEach(e=>{e._id=e.userId}),e}addUser(){this.warning=!1;let e,t=[];this.selectedUsers.forEach(i=>{if(this.addedUsersList.filter(e=>e._id===i._id).length>0)return this.warningInfo=`${i.username} - User already added`,void(this.warning=!0);e=this.usersList.findIndex(e=>e._id===i._id),this.usersList[e].disabled=!0,this.usersList=[...this.usersList],t.push(i)}),!this.warning&&(this.addedUsersList=[...this.addedUsersList,...t],this.selectedUsers=[],this.isRerender=!0,this.renderUsersTable(),this.showButtons())}deleteUser(e){this.deleteItem=e,this.modalTitle=this.language["Delete Administrator"],this.modalInfo=`${e.username}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDeleteSecleted(){this.closeModal();let e,t=this.deleteItem,i=[];this.addedUsersList.forEach(e=>{e._id!==t._id&&i.push(e)}),e=this.usersList.findIndex(e=>e._id===t._id),-1!==e&&(this.usersList[e].disabled=!1),this.usersList=[...this.usersList],this.addedUsersList=i,this.isRerender=!0,this.renderUsersTable(),this.deleteItem=void 0,this.showButtons()}renderUsersTable(e){this.setTableOptions(),e&&"language"==e?setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loader=!1},50):this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}setTableOptions(){this.tableOptions={pagingType:"full_numbers",pageLength:10,processing:!0,searching:!1,ordering:!1,lengthChange:!1,language:{emptyTable:"No users available in table"},drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&ae(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.tableLanguageOptions(),this.dataAvailable=!0,setTimeout(()=>{this.hideSearch()},500)}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}redraw(){this.dtElement.dtInstance.then(e=>{e.draw()})}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}someClickHandler(e){}addOrg(){this.router.navigate([`${this.sysAdminRoute}/addOrg`])}goToOrgList(){this.router.navigate([`${this.sysAdminRoute}/organizations`])}goToUserList(){this.router.navigate([`${this.sysAdminRoute}/blacklist`])}processData(e){let t=e,i={};for(let s=0;s<t.length;s++)i[t[s].appType]=t[s].overrideEndDate;this.selectedEntitlements=i}combineData(){let e={},t=[],i={},s=!1,n=(new Date).getTime();for(let r=0;r<this.orgEntitlements.length;r++)e[this.orgEntitlements[r].appType]=this.orgEntitlements[r];let a,o=!1;for(let r=0;r<this.entitlements.length;r++){let l;if(o=!1,a=this.entitlements[r].appType,e[a]){l=e[a].overrideEndDate?new Date(e[a].overrideEndDate):void 0,s=this.checkEnttlmnt(e[a]);let r=e[a].overrideEndDate?new Date(`${e[a].overrideEndDate} 23:59:59`):new Date;r=r.getTime(),r&&r>=n&&(o=!0),t.push(Object.assign(Object.assign({},e[a]),{checked:s,override:`${a}_endDate`,greenColor:o,overrideEndDate_obj_date:l,overrideEndDate_obj:{day:1,month:11,year:2020}})),i[a]=Object.assign(Object.assign({},e[a]),{checked:s,override:`${a}_endDate`,greenColor:o,overrideEndDate_obj_date:l,overrideEndDate_obj:{day:1,month:11,year:2020}}),this.endDates[`${a}_endDate`]=e[a].overrideEndDate}else t.push(Object.assign(Object.assign({},this.entitlements[r]),{overrideEndDate:null,checked:!1,override:`${a}_endDate`,overrideEndDate_obj_date:void 0,overrideEndDate_obj:{day:1,month:11,year:2020}}))}this.selectedEntitlements=i,this.entitlements=t,this.entitlements=this.sortByTimestamp(this.entitlements,"timestamp","desc"),this.entStatus=this.entitlements.map(e=>(e.status||"").toLowerCase()),setTimeout(()=>{this.entStatus.forEach((e,t)=>{e||ae(`#status-list${t} input`).attr("placeholder",this.language.Select)})},100),this.entitlementAvailable=!0,this.loader=!1}checkEnttlmnt(e){let t=(new Date).getTime(),i="",s="";return i=e.endDate?new Date(e.endDate):"",s=e.overrideEndDate?new Date(`${e.overrideEndDate} 23:59:59`):"",!(!e.entitlement||!(!i&&!s&&!e.endDate||i&&i>t||s&&s>t))}setOverrideDate(e,t,i,s){if(!s)return void this.clearOverrideEndDate(e,t,i,s);let n,a=this.entitlements.find((e,t)=>(this.objIndex=t,e.appType==i)),o=(new Date).getTime(),r="",l=`${s} 23:59:59`;r=t.endDate?new Date(t.endDate).getTime():"",n=new Date(l),n=n.getTime(),t.entitlement&&(!r&&!l&&!t.endDate||r&&r>o||n&&n>o)||!r&&!l&&!t.endDate||r&&r>o||n&&n>o?(a.overrideEndDate=this.formatDate(l),a.checked=!0,a.greenColor=!!(n&&n>o)):(a.overrideEndDate=this.formatDate(l),a.checked=!1,a.greenColor=!1),this.endDates[i+"_endDate"]=s,this.entitlements[this.objIndex]=a,this.showButtons()}formatDate(e){var t=new Date(e),i=""+(t.getMonth()+1),s=""+t.getDate(),n=t.getFullYear();return i.length<2&&(i="0"+i),s.length<2&&(s="0"+s),[n,i,s].join("-")}checkDate(e){let t;return t="object"==typeof e?new Date(e):new Date(e+" 23:59:59"),new Date<t}save(){if(!this.orgRoleAvail)return this.errorInfo=this.language["Role (null) not found"],this.error=!0,void this.commonOrgService.pageScrollTop();this.updateAdmins()}updateAdmins(){this.loader=!0;let e=[];this.addedUsersList.forEach(t=>{e.push(t._id)}),this.api.AddAdmin(e,this.orgAdminRoleId).subscribe(e=>{this.saveEntitlements(),this.successMessage()},e=>{this.loader=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{this.loader=!1})}saveEntitlements(){var e,t,i,s,n,a,o,r,l={};let c={"":null,active:"Active",about_to_expire:"About_to_Expire",in_grace_period:"In_Grace_Period",expired:"Expired"};var d=ae("#entitlementsForm").serializeArray();ae.each(d,function(e,t){void 0!==l[t.name]?("array"!=jQuery.type(l[t.name])&&(l[t.name]=[l[t.name]]),l[t.name].push(t.value)):l[t.name]=t.value});let g=l.appType,u=l.entitlement?l.entitlement:[],h=[],p={};p.appType=l.appType,p.entitlement=l.entitlement?l.entitlement:[],p.name=l.name?l.name:[],p.overrideEndDate=l.overrideEndDate?l.overrideEndDate:[],p.status=[];let m=g.length;for(let b=0;b<m;b++)p.status.push(c[this.entStatus[b]]);l=p;let f=[],Z=[];for(let b=0;b<l.appType.length;b++){let c={createTime:null,updateTime:null,id:null,appType:999,name:"Service Cloud",entitlement:100,disabledFlag:!1,startDate:null,endDate:null,overrideEndDate:"2021-06-30",contractNumber:null,productFamily:null,partCategory:null,partNumber:null,partDescription:null,qty:null,customer:null,organizationId:this.ORG_ID,status:null,serviceName:null,serviceEdition:null},d=u.indexOf(l.appType[b]);u&&-1!==d?null!=this.selectedEntitlements[l.appType[b]]?(c.appType=l.appType[b],c.name=l.name[b],c.overrideEndDate=l.overrideEndDate[b],c.disabledFlag=!1,c.id=this.selectedEntitlements[l.appType[b]].id,c.startDate=this.selectedEntitlements[l.appType[b]].startDate,c.endDate=this.selectedEntitlements[l.appType[b]].endDate,c.createTime=this.selectedEntitlements[l.appType[b]].createTime,c.updateTime=this.selectedEntitlements[l.appType[b]].updateTime,c.contractNumber=this.selectedEntitlements[l.appType[b]].contractNumber,c.productFamily=this.selectedEntitlements[l.appType[b]].productFamily,c.partCategory=this.selectedEntitlements[l.appType[b]].partCategory,c.partDescription=this.selectedEntitlements[l.appType[b]].partDescription,c.qty=this.selectedEntitlements[l.appType[b]].qty,c.customer=this.selectedEntitlements[l.appType[b]].customer,c.status=l.status[b]||null,c.serviceName=void 0!==(null===(e=this.selectedEntitlements[l.appType[b]])||void 0===e?void 0:e.serviceName)?null===(t=this.selectedEntitlements[l.appType[b]])||void 0===t?void 0:t.serviceName:null,c.serviceEdition=void 0!==(null===(i=this.selectedEntitlements[l.appType[b]])||void 0===i?void 0:i.serviceEdition)?null===(s=this.selectedEntitlements[l.appType[b]])||void 0===s?void 0:s.serviceEdition:null,Z.push(c),h.push(c)):(c.appType=l.appType[b],c.name=l.name[b],c.overrideEndDate=l.overrideEndDate[b],c.status=l.status[b]||null,c.disabledFlag=!1,f.push(c),h.push(c)):null!=this.selectedEntitlements[l.appType[b]]?(c.appType=l.appType[b],c.name=l.name[b],c.overrideEndDate=l.overrideEndDate[b],c.disabledFlag=!1,c.id=this.selectedEntitlements[l.appType[b]].id,c.startDate=this.selectedEntitlements[l.appType[b]].startDate,c.endDate=this.selectedEntitlements[l.appType[b]].endDate,c.createTime=this.selectedEntitlements[l.appType[b]].createTime,c.updateTime=this.selectedEntitlements[l.appType[b]].updateTime,c.contractNumber=this.selectedEntitlements[l.appType[b]].contractNumber,c.productFamily=this.selectedEntitlements[l.appType[b]].productFamily,c.partCategory=this.selectedEntitlements[l.appType[b]].partCategory,c.partDescription=this.selectedEntitlements[l.appType[b]].partDescription,c.qty=this.selectedEntitlements[l.appType[b]].qty,c.customer=this.selectedEntitlements[l.appType[b]].customer,c.status=l.status[b]||null,c.serviceName=void 0!==(null===(n=this.selectedEntitlements[l.appType[b]])||void 0===n?void 0:n.serviceName)?null===(a=this.selectedEntitlements[l.appType[b]])||void 0===a?void 0:a.serviceName:null,c.serviceEdition=void 0!==(null===(o=this.selectedEntitlements[l.appType[b]])||void 0===o?void 0:o.serviceEdition)?null===(r=this.selectedEntitlements[l.appType[b]])||void 0===r?void 0:r.serviceEdition:null,Z.push(c),h.push(c)):l.status[b]&&(c.appType=l.appType[b],c.name=l.name[b],c.overrideEndDate=l.overrideEndDate[b],c.status=l.status[b]||null,c.disabledFlag=!1,f.push(c),h.push(c))}if(!f.length&&!Z.length)return this.loader=!1,void this.successMessage();this.newEntitlesUpdate=f,this.changedEntitlesUpdate=Z,this.updateEnt()}updateEnt(){this.loader=!0;const e=[],t=[],i=[];let s=`${L.N.CALIX_ADMIN_ORG_BASE_URL}entitlements/`;this.newEntitlesUpdate.forEach(i=>{"Expired"===i.status?t.push(this.api.addEntitlements(s,i)):e.push(this.api.addEntitlements(s,i))}),this.changedEntitlesUpdate.forEach(t=>{let s=!1;if(this.orgEntitlements.forEach(e=>{Number(t.appType)===e.appType&&t.status===e.status&&(s=!0)}),!s){let s=`${L.N.CALIX_ADMIN_ORG_BASE_URL}entitlements/${t.id}`;"Expired"===t.status?i.push(this.api.changeEntitlements(s,t)):e.push(this.api.changeEntitlements(s,t))}});const n=e.length;let a=0;(0,P.z)(...t,...i,...e).subscribe(e=>{a++,n==a&&t.length==a&&i.length==a&&this.successMessage()},e=>{this.loader=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()})}cancel(){this.goToOrgList()}changeDate(e,t,i){i=i.toString(),this.checkDateObject(i)?ae(`#${t}_entitled`).prop("checked",!0):ae(`#${t}_entitled`).prop("checked",!1)}checkDateObject(e){let t;return t=new Date(e),new Date<t}dateF(e){return new Date(e)}closeAlert(){this.error=!1,this.success=!1}closeAlertWarning(){this.warning=!1}hideSearch(){setTimeout(()=>{ae("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),ae("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},100)}showButtons(){this.showSubmitButtons=!0}successMessage(){this.closeAlert(),this.successInfo=this.language["Organization updated successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),setTimeout(()=>{this.loader=!1,this.closeAlert(),this.goToOrgList()},1500)}checkSelected(){this.usersAvail?(this.usersList.forEach(e=>{let t=[];t=this.addedUsersList.filter(t=>e._id===t.userId),t.length&&(e.disabled=!0)}),this.usersList=[...this.usersList]):this.usersAvailInterval=setInterval(()=>{this.usersAvail&&(this.checkSelected(),clearInterval(this.usersAvailInterval))},500)}tableLanguageOptions(){sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(this.tableOptions.language=this.frTable,this.tableOptions.language.emptyTable="Aucune utilisateur disponible dans le tableau"):"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")&&this.tableOptions.language&&(delete this.tableOptions.language,this.tableOptions.language={emptyTable:"No users available in table"})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}setYearRange(){this.yRange="2000:2030";let e=(new Date).getFullYear();this.yRange=`${e-20}:${e+30}`}sortByTimestamp(e,t,i){let s=[],n=[],a=[],o=(new Date).getTime();return e.forEach(e=>{e.timestamp=e.overrideEndDate?new Date(e.overrideEndDate).getTime():0}),t="timestamp",e.sort(function(e,i){return e[t]=e[t]?parseInt(e[t]):0,i[t]=i[t]?parseInt(i[t]):0,i[t]-e[t]}),e.forEach(e=>{e.timestamp&&e.timestamp<o?s.push(e):e.timestamp&&e.timestamp>o?n.push(e):(!e.timestamp||e.timestamp==o)&&a.push(e)}),[...s,...n,...a]}clearOverrideEndDate(e,t,i,s){let n=!1,a=this.entitlements.find((e,t)=>(this.objIndex=t,e.appType==i));a.overrideEndDate&&(n=!0),(new Date).getTime();let o,r="",l=`${s} 23:59:59`;r=t.endDate?new Date(t.endDate).getTime():"",o=new Date(l),o=o.getTime(),a.overrideEndDate=null,a.checked=!1,a.greenColor=!1,this.endDates[i+"_endDate"]="",this.entitlements[this.objIndex]=a,n&&this.showButtons()}preventClick(e){e.preventDefault()}removePlaceholder(e){ae(`#status-list${e} input`).attr("placeholder","")}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(f.d),p.Y36(m.v),p.Y36(a.F0),p.Y36(Z.z),p.Y36(Y.t6),p.Y36(Q.FF),p.Y36(b.Dx))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-organization-detail"]],viewQuery:function(e,t){if(1&e&&(p.Gf(B,7),p.Gf(J.G,5)),2&e){let e;p.iGM(e=p.CRH())&&(t.deleteModal=e.first),p.iGM(e=p.CRH())&&(t.dtElement=e.first)}},decls:43,vars:25,consts:[[1,"container","mh-65","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","my-3"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0"],[1,"text-right"],["id","back-org-list",1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-3"],[1,"col-md-6"],[1,"row","my-3","ccl-form"],[1,"col-md-8","pr-0"],["id","admins-list","bindLabel","username","placeholder","",1,"ccl-select-box",3,"items","ngModel","clearable","ngModelOptions","multiple","disabled","ngModelChange"],[1,"col-md-4"],["_ngcontent-veq-c50","","id","add-user",1,"btn-default","primary","px-1",3,"disabled","click"],[1,"col-md-12",3,"hidden"],["id","org-detail-users","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions","dtTrigger"],[1,""],[3,"id",4,"ngFor","ngForOf"],[1,"col-md-12"],["class","col-md-12 my-2",4,"ngIf"],["class","row",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[3,"id"],[1,"actions","text-nowrap"],["id","delete-user",1,"fas","fa-trash-alt","primary","p-1","cursor-pointer",3,"title","click"],[1,"col-md-12","my-2"],["id","entitlementsForm"],["datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,"hiddenCol","p-0"],[4,"ngFor","ngForOf"],["type","hidden","name","appType",3,"value"],["type","hidden","name","name",3,"value"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","name","entitlement",3,"id","checked","value","readonly","click"],["type","checkbox","name","inherited",3,"id","checked","readonly","click"],[1,"org-detail-status"],["type","hidden","name","overrideEndDate",3,"value"],["bindLabel","label","bindValue","value",1,"ccl-select-box",3,"id","placeholder","items","ngModel","ngModelOptions","ngModelChange","change"],[1,"row"],[1,"col-md-6","offset-md-6","my-2","text-right","pr-0"],["_ngcontent-veq-c50","","id","submit",1,"btn-default","primary",3,"click"],["_ngcontent-veq-c50","","id","cancel",1,"btn-default","btn-dft","mx-3",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.YNc(1,j,5,0,"div",1),p.YNc(2,V,6,1,"div",2),p.YNc(3,G,4,1,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"div",6),p._uU(7),p.qZA(),p.qZA(),p.TgZ(8,"div",7),p.TgZ(9,"div",8),p.TgZ(10,"a",9),p.NdJ("click",function(){return t.goToOrgList()}),p._UZ(11,"i",10),p._uU(12),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",4),p.TgZ(14,"div",11),p.TgZ(15,"div",6),p._uU(16),p.qZA(),p.TgZ(17,"div",12),p.TgZ(18,"div",13),p.TgZ(19,"ng-select",14),p.NdJ("ngModelChange",function(e){return t.selectedUsers=e}),p.qZA(),p.qZA(),p.TgZ(20,"div",15),p.TgZ(21,"button",16),p.NdJ("click",function(){return t.addUser()}),p._uU(22),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(23,"div",4),p.TgZ(24,"div",17),p.YNc(25,W,6,1,"div",2),p.TgZ(26,"table",18),p.TgZ(27,"thead",19),p.TgZ(28,"tr"),p.TgZ(29,"th"),p._uU(30),p.qZA(),p.TgZ(31,"th"),p._uU(32),p.qZA(),p.qZA(),p.qZA(),p.TgZ(33,"tbody"),p.YNc(34,X,5,3,"tr",20),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(35,"div",4),p.TgZ(36,"div",21),p.TgZ(37,"div",6),p._uU(38),p.qZA(),p.qZA(),p.YNc(39,ie,17,6,"div",22),p.qZA(),p.YNc(40,se,6,2,"div",23),p.qZA(),p.YNc(41,ne,12,5,"ng-template",null,24,p.W1O)),2&e&&(p.xp6(1),p.Q6J("ngIf",t.loader),p.xp6(1),p.Q6J("ngIf",t.error),p.xp6(1),p.Q6J("ngIf",t.success),p.xp6(4),p.hij("",t.orgName," "),p.xp6(5),p.Oqu(t.language.backtoorg),p.xp6(4),p.hij("",t.language.addadmin," "),p.xp6(3),p.Q6J("items",t.usersList)("ngModel",t.selectedUsers)("clearable",!1)("ngModelOptions",p.DdM(24,ee))("multiple",!0)("disabled",!(null!=t.usersList&&t.usersList.length)),p.xp6(2),p.Q6J("disabled",!(null!=t.usersList&&t.usersList.length)),p.xp6(1),p.Oqu(t.language.add),p.xp6(2),p.Q6J("hidden",!t.dataAvailable),p.xp6(1),p.Q6J("ngIf",t.warning),p.xp6(1),p.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),p.xp6(4),p.Oqu(t.language.username),p.xp6(2),p.Oqu(t.language.action),p.xp6(2),p.Q6J("ngForOf",t.addedUsersList),p.xp6(4),p.hij("",t.language.entitlements," "),p.xp6(1),p.Q6J("ngIf",t.entitlementAvailable),p.xp6(1),p.Q6J("ngIf",t.showSubmitButtons))},directives:[s.O5,z.w9,n.JJ,n.On,J.G,s.sg,n._Y,n.JL,n.F],styles:[".overriden-input-remove[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;right:30px;padding:0 8px 0 0;cursor:pointer}.overriden-input-remove[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;padding-bottom:3px}.org-detail-status[_ngcontent-%COMP%]{width:150px!important}.hiddenCol[_ngcontent-%COMP%]{width:0px!important}"]}),e})();var re=i(61411),le=i(97171),ce=i(94634),de=i(83909),ge=i(5826);function ue(e,t){1&e&&(p.TgZ(0,"div",11),p.TgZ(1,"div",12),p.TgZ(2,"div",13),p.TgZ(3,"span",14),p._uU(4,"Loading..."),p.qZA(),p.qZA(),p.qZA(),p.qZA())}function he(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",15),p.TgZ(1,"span",16),p._UZ(2,"img",17),p.qZA(),p.TgZ(3,"button",18),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",19),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.errorInfo,p.oJD)}}function pe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr",24),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td",25),p.TgZ(8,"button",26),p.NdJ("click",function(){const t=p.CHM(e).$implicit;return p.oxw(2).gotoSecuredAccessData(t)}),p._UZ(9,"img",27),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=t.$implicit,i=p.oxw(2);p.s9C("id",e.id),p.xp6(2),p.Oqu(e.username),p.xp6(2),p.hij(" ","Read and Write"==i.checkType(e.type)?i.language["Read and Write"]:i.language["Read only"]," "),p.xp6(2),p.Oqu(i.checkExpiry(e))}}function me(e,t){if(1&e&&(p.TgZ(0,"div",20),p.TgZ(1,"table",21),p.TgZ(2,"thead",22),p.TgZ(3,"tr"),p.TgZ(4,"th"),p._uU(5),p.qZA(),p.TgZ(6,"th"),p._uU(7),p.qZA(),p.TgZ(8,"th"),p._uU(9),p.qZA(),p.TgZ(10,"th"),p._uU(11),p.qZA(),p.qZA(),p.qZA(),p.TgZ(12,"tbody"),p.YNc(13,pe,10,4,"tr",23),p.qZA(),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("dtOptions",e.tableOptions),p.xp6(4),p.Oqu(e.language.users),p.xp6(2),p.Oqu(e.language.accesstype),p.xp6(2),p.Oqu(e.language.duration),p.xp6(2),p.Oqu(e.language.action),p.xp6(2),p.Q6J("ngForOf",e.securedTableData)}}let fe=(()=>{class e{constructor(e,t,i,s,n,a){this.customTranslateService=e,this.commonOrgService=t,this.router=i,this.service=s,this.sso=n,this.titleService=a,this.securedAccessTableOptions={},this.pageAvailable=!1,this.tableOptions={drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.languages=[{name:"English"},{name:"French Canadian"}],this.loader=!0,this.sysAdminRoute="systemAdministration",this.ORG_ID=this.sso.getOrganizationID(this.router.url),this.commonOrgService.currentPageAdder("orgSecuredAccess"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.orgData&&(this.orgName=this.orgData.name?this.orgData.name:"Calix"),this.sysAdminRoute=L.N.SYS_ADMIN_ROUTE}ngOnInit(){let e=this.sso.getRedirectModule(this.router.url);this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(t=>{this.language=t,this.dataAvailable=!1,this.setTableOptions("language"),this.titleService.setTitle(`${this.language["Secured Access Users"]} - ${"systemAdministration"===e?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["Secured Access Users"]} - ${"systemAdministration"===e?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.frTable=this.customTranslateService.fr,this.tableLanguageOptions(),this.closeAlert(),this.getSAList()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.saListSubs&&this.saListSubs.unsubscribe()}someClickHandler(e){}setTableOptions(e){this.tableOptions={rowId:"id",pagingType:"full_numbers",lengthChange:!1,searching:!1,dom:"tipr",columnDefs:[{targets:[-1],orderable:!1}],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.dataAvailable=!0,this.loader=!1},150):(this.dataAvailable=!0,this.loader=!1)}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}goToOrgList(){this.router.navigate([`${this.sysAdminRoute}/organizations`])}getSAList(){this.saListSubs=this.service.getSCLByOrg(this.ORG_ID).subscribe(e=>{this.securedTableData=e,this.setTableOptions()},e=>{this.securedTableData=[],this.setTableOptions(),this.loader=!1,this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0})}gotoSecuredAccessData(e){sessionStorage.setItem("SecuredAccessUser",JSON.stringify(e)),this.router.navigate([`${this.sysAdminRoute}/UserSecuredAccess`])}checkType(e){return this.service.checkType(e)}checkExpiry(e){return this.service.checkExpiry(e)}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}closeAlert(){this.error=!1}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(f.d),p.Y36(m.v),p.Y36(a.F0),p.Y36(ge.q),p.Y36(Y.t6),p.Y36(b.Dx))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-secured-access"]],decls:14,vars:5,consts:[[1,"container","mh-65","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"row","my-3"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],["class","col-md-12",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"col-md-12"],["id","secure-access-list","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,""],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"actions",2,"white-space","nowrap"],[1,"",2,"font-size","12px","border","none","background-color","transparent",3,"click"],["src","assets/images/user_secure_access_icon.png"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.YNc(1,ue,5,0,"div",1),p.YNc(2,he,6,1,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p._uU(6),p.qZA(),p.qZA(),p.TgZ(7,"div",6),p.TgZ(8,"div",7),p.TgZ(9,"a",8),p.NdJ("click",function(){return t.goToOrgList()}),p._UZ(10,"i",9),p._uU(11),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(12,"div",3),p.YNc(13,me,14,6,"div",10),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("ngIf",!t.dataAvailable),p.xp6(1),p.Q6J("ngIf",t.error),p.xp6(4),p.Oqu(t.orgName),p.xp6(5),p.hij(" ",t.language.backtoorg," "),p.xp6(2),p.Q6J("ngIf",t.dataAvailable))},directives:[s.O5,J.G,s.sg],styles:[""]}),e})();var Ze=i(98325),be=i(3483),Ae=i(57923),ve=i(7450),xe=i(93517),Te=i(42821),_e=i(20497),Ce=i(53668),qe=i(91841),we=i(82823);const Oe=function(){return["active"]};function Se(e,t){1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",20),p._uU(2,"Account Management"),p.qZA(),p.qZA()),2&e&&(p.xp6(1),p.Q6J("routerLinkActive",p.DdM(1,Oe)))}function ye(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",21),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("routerLinkActive",p.DdM(2,Oe)),p.xp6(1),p.Oqu(e.language["Operations Cloud"])}}function Me(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",22),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("routerLinkActive",p.DdM(2,Oe)),p.xp6(1),p.Oqu(e.language["Call Outcome"])}}function ke(e,t){if(1&e&&(p.TgZ(0,"a",24),p._uU(1),p.qZA()),2&e){const e=p.oxw(2);p.ekj("active",e.router.isActive("/systemAdministration/block_page_template_list",!1)||e.router.isActive("/systemAdministration/block_page_template",!1)||e.router.isActive("/systemAdministration/block_page_template_update",!1)),p.xp6(1),p.hij("",e.language.Block_Page_Temp," ")}}function Ue(e,t){if(1&e&&(p.TgZ(0,"li",2),p.YNc(1,ke,2,3,"a",23),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngIf",e.showBlackPage)}}function De(e,t){if(1&e&&(p.TgZ(0,"a",25),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.ekj("active",e.router.isActive("systemAdministration/SmartTownWi-Fi",!1)),p.xp6(1),p.Oqu(e.language.myCommunityIQ)}}function Ne(e,t){if(1&e&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&e){const e=p.oxw(2);p.xp6(1),p.Oqu(e.language["subscriber-prospect-upload"])}}function Ie(e,t){if(1&e&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&e){const e=p.oxw(2);p.xp6(1),p.lnq("",e.language.Subscriber,"\xa0",e.language.File,"\xa0",e.language.Upload,"")}}function Ee(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",26),p.YNc(2,Ne,2,1,"span",27),p.YNc(3,Ie,2,3,"span",27),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.ekj("active",e.router.url.includes("subscriber-prospect-upload")||e.router.url.includes("subscriber-prospect-list")),p.xp6(1),p.Q6J("ngIf",e.apps.cmcPro),p.xp6(1),p.Q6J("ngIf",!e.apps.cmcPro)}}function Fe(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",28),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("routerLinkActive",p.DdM(2,Oe)),p.xp6(1),p.Oqu(e.language["API Usage"])}}function Pe(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",29),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngClass","commandWorx"==e.currentPage||"commandiq-create"==e.currentPage||"commandWorx-create"==e.currentPage||"commandWorx-update"==e.currentPage||"commandiq-update"==e.currentPage||"commandiq"==e.currentPage||"support-information"==e.currentPage?"active":""),p.xp6(1),p.Oqu(e.language["Mobile App"])}}function Le(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",30),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("routerLinkActive",p.DdM(2,Oe)),p.xp6(1),p.hij("",e.language.cmcName," ")}}function Je(e,t){if(1&e&&(p.TgZ(0,"li",2),p.TgZ(1,"a",31),p._uU(2),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngClass",e.router.url.includes("chatbot")||e.router.url.includes("chatbot-create")?"active":""),p.xp6(1),p.Oqu(e.language.Chatbot)}}let $e=(()=>{class e{constructor(e,t,i,s,n,a,o,r){this.commonOrgService=e,this.customTranslateService=t,this.sso=i,this.router=s,this.apiUsageService=n,this.organizationApiService=a,this.http=o,this.zipcodeService=r,this.currentPage="organizations",this.orgName="",this.isSysAdmin=!1,this.showCOC=!1,this.showAPIUsage=!1,this.showMobileApp=!1,this.billingStatusEnabled=!1,this.isCA=!1,this.apps={cmc:!1,csc:!1,fa:!1,shad:!1,orgAdmin:!1,calixAdmin:!1,foundation:!1,Community:!1,cmcPro:!1,chatBot:!0},this.showAccountManagement=!1,this.commonOrgService.currentPageData.subscribe(e=>{this.currentPage=e||"organizations"}),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.orgData&&(this.orgName=this.orgData.name?this.orgData.name:"Calix"),this.commonOrgService.currentOrgData.subscribe(e=>{this.orgName=e});let l=this.router.url;this.isSysAdmin=this.checkApplication(l),this.ORG_ID=this.sso.getOrganizationID(l),this.getorgInfoData()}ngOnInit(){this.isCA=!!Te.f.prototype.nativeWindow.includes("calixcloud-ca.calix.com"),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e}),this.userInfo=this.sso.getUserInfo(),this.getBillingList();let e=this.sso.getEntitlements();(e[118]||e[120])&&(this.apps.csc=!0),(e[214]||e[222]||e[223])&&(this.apps.Community=!0),(e[119]||e[209])&&(this.apps.cmc=!0),e[209]&&(this.apps.cmcPro=!0),this.orgName=this.orgName?this.orgName:"Calix","https://api.calix.ai"!==L.N.SSO_API_URL&&(this.showCOC=!0);let t=this.sso.getScopes();L.N.VALIDATE_SCOPE?(t["cloud.rbac.csc.calloutcome.createview"]=t["cloud.rbac.csc.calloutcome.createview"]?t["cloud.rbac.csc.calloutcome.createview"]:[],t["cloud.rbac.csc.calloutcome.createview"]&&t["cloud.rbac.csc.calloutcome.createview"].includes("read")&&(this.calloutcomeRead=!0),t["cloud.rbac.csc.calloutcome.createview"]&&t["cloud.rbac.csc.calloutcome.createview"].includes("write")&&(this.calloutcomeWrite=!0),t["cloud.admin.orgs"]&&(t["cloud.admin.orgs"].includes("write")||t["cloud.admin.orgs"].includes("read"))&&(this.showBlackPage=!0,this.showCommandIQ=!0),t["cloud.admin.users"]&&(t["cloud.admin.users"].includes("write")||t["cloud.admin.users"].includes("read"))&&(this.showBlackPage=!0,this.showCommandIQ=!0)):(this.calloutcomeRead=!0,this.calloutcomeWrite=!0),this.commonOrgService.showApiUsage.subscribe(e=>{this.showAPIUsage=e||!1});const i=localStorage.getItem("apiUsage");this.showAPIUsage=!(!i||"true"!=i),this.getGranteeOrgs(),this.commonOrgService.showAccountManagement.subscribe(e=>{e&&(this.ORG_ID=e,this.getorgInfoData(),this.getGranteeOrgs())})}getorgInfoData(){this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(e=>{var t,i,s;if(this.orgInfoEntitlementdata=e,e){let e={};for(let i=0;i<(null===(t=this.orgInfoEntitlementdata)||void 0===t?void 0:t.length);i++)e[this.orgInfoEntitlementdata[i].appType]=this.orgInfoEntitlementdata[i];("Expired"!==(null===(i=e[218])||void 0===i?void 0:i.status)||e[200]&&"Expired"!==e[200].status||e[201]&&"Expired"!==e[201].status)&&(this.apps.foundation=!0,this.showMobileApp=!0),this.apps.cmc=!!(e[119]&&"Expired"!==e[119].status||e[209]&&"Expired"!==e[209].status),this.apps.cmcPro=!(!e[209]||"Expired"===e[209].status),this.apps.chatBot=!(!e[118]||"Expired"==(null===(s=e[118])||void 0===s?void 0:s.status))}},e=>{})}goToLink(e){window.open(e,"_blank")}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}showApps(){this.apps=Object.assign(Object.assign({},this.apps),this.sso.showApps()),this.apps.fa=this.apps.cco}checkApplication(e){return e.indexOf("/systemAdministration/")>-1}getGranteeOrgs(){this.http.get(`${L.N.API_BASE_URL}federated/${this.ORG_ID}/grantee`).pipe((0,H.K)(e=>(e["api-error"]=!0,(0,E.of)(e)))).subscribe(e=>{(null==e?void 0:e["api-error"])||(this.showAccountManagement=!!(null==e?void 0:e.length))})}getBillingList(){this.zipcodeService.marketingCloudCheck().subscribe(e=>{e&&(this.billingStatusEnabled=e.billingStatusEnabled)},e=>{this.billingStatusEnabled=!1})}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(m.v),p.Y36(f.d),p.Y36(Y.t6),p.Y36(a.F0),p.Y36(_e.w),p.Y36(Ce.F),p.Y36(qe.eN),p.Y36(we.F))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-side-menu"]],decls:60,vars:53,consts:[[1,""],[1,"nav","flex-column","left-menu"],[1,"nav-item"],["routerLink","organizations",1,"list-group-item","list-group-item-action","active"],[1,"nav-item",3,"ngClass"],["routerLink","orgSecuredAccess",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],[3,"ngClass"],[1,"list-group-item","list-group-item-action","active"],["routerLink","users",1,"list-group-item","list-group-item-action",3,"ngClass"],["routerLink","UserSecuredAccess",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","blacklist",1,"list-group-item","list-group-item-action",3,"ngClass"],["class","nav-item",4,"ngIf"],["routerLink","roles",1,"list-group-item","list-group-item-action",3,"ngClass"],["routerLink","csccfg",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","orginfo",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","flowAnalyze",1,"list-group-item","list-group-item-action"],["routerLink","orgacl",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","sso",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["class","list-group-item list-group-item-action","routerLink","./SmartTownWi-Fi",3,"active",4,"ngIf"],["routerLink","./zip-code-upload",1,"list-group-item","list-group-item-action"],["routerLink","account-management",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","cco-admin",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","admin-call-outcome",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["class","list-group-item list-group-item-action","routerLink","./block_page_template_list",3,"active",4,"ngIf"],["routerLink","./block_page_template_list",1,"list-group-item","list-group-item-action"],["routerLink","./SmartTownWi-Fi",1,"list-group-item","list-group-item-action"],["routerLink","subscriber-prospect-upload",1,"list-group-item","list-group-item-action"],[4,"ngIf"],["routerLink","api-usage",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","mobile-app/commandiq",1,"list-group-item","list-group-item-action",3,"ngClass"],["routerLink","engagement-cloud",1,"list-group-item","list-group-item-action","ml-0",3,"routerLinkActive"],["routerLink","chatbot",1,"list-group-item","list-group-item-action",3,"ngClass"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"ul",1),p.TgZ(2,"li",2),p.TgZ(3,"a",3),p._uU(4),p.qZA(),p.qZA(),p.TgZ(5,"li",4),p.TgZ(6,"a",5),p._uU(7),p.qZA(),p.qZA(),p.TgZ(8,"section",6),p.TgZ(9,"li",2),p.TgZ(10,"a",7),p._uU(11),p.ALo(12,"slice"),p.qZA(),p.qZA(),p.TgZ(13,"li",2),p.TgZ(14,"a",8),p._uU(15),p.qZA(),p.qZA(),p.TgZ(16,"li",4),p.TgZ(17,"a",9),p._uU(18),p.qZA(),p.qZA(),p.TgZ(19,"li",4),p.TgZ(20,"a",7),p._uU(21),p.qZA(),p.qZA(),p.TgZ(22,"li",2),p.TgZ(23,"a",10),p._uU(24),p.qZA(),p.qZA(),p.YNc(25,Se,3,2,"li",11),p.TgZ(26,"li",2),p.TgZ(27,"a",12),p._uU(28),p.qZA(),p.qZA(),p.TgZ(29,"li",4),p.TgZ(30,"a",7),p._uU(31),p.qZA(),p.qZA(),p.TgZ(32,"li",2),p.TgZ(33,"a",13),p._uU(34),p.qZA(),p.qZA(),p.TgZ(35,"li",2),p.TgZ(36,"a",14),p._uU(37),p.qZA(),p.qZA(),p.TgZ(38,"li",2),p.TgZ(39,"a",15),p._uU(40),p.qZA(),p.qZA(),p.TgZ(41,"li",2),p.TgZ(42,"a",16),p._uU(43),p.qZA(),p.qZA(),p.TgZ(44,"li",2),p.TgZ(45,"a",17),p._uU(46),p.qZA(),p.qZA(),p.YNc(47,ye,3,3,"li",11),p.YNc(48,Me,3,3,"li",11),p.YNc(49,Ue,2,1,"li",11),p.TgZ(50,"li",2),p.YNc(51,De,2,3,"a",18),p.qZA(),p.TgZ(52,"li",2),p.TgZ(53,"a",19),p._uU(54),p.qZA(),p.qZA(),p.YNc(55,Ee,4,4,"li",11),p.YNc(56,Fe,3,3,"li",11),p.YNc(57,Pe,3,2,"li",11),p.YNc(58,Le,3,3,"li",11),p.YNc(59,Je,3,2,"li",11),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(4),p.Oqu(t.language.allorganisation),p.xp6(1),p.Q6J("ngClass","orgSecuredAccess"==t.currentPage?"dblock":"dnone"),p.xp6(1),p.Q6J("routerLinkActive",p.DdM(47,Oe)),p.xp6(1),p.Oqu(t.language.securedaccess),p.xp6(1),p.Q6J("ngClass","organizations"!=t.currentPage&&"orgSecuredAccess"!=t.currentPage&&"orgDetail"!=t.currentPage?"dblock":"dnone"),p.xp6(3),p.Oqu(t.orgName.length>30?p.Dn7(12,43,t.orgName,0,30)+"..":t.orgName),p.xp6(3),p.Q6J("ngClass","users"==t.currentPage||"addUser"==t.currentPage||"usersDetail"==t.currentPage||"UserSecuredAccess"==t.currentPage?"active":""),p.xp6(1),p.Oqu(t.language.users),p.xp6(1),p.Q6J("ngClass","UserSecuredAccess"==t.currentPage?"dblock":"dnone"),p.xp6(1),p.Q6J("routerLinkActive",p.DdM(48,Oe)),p.xp6(1),p.Oqu(t.language.securedaccess),p.xp6(1),p.Q6J("ngClass","usersDetail"==t.currentPage?"dblock":"dnone"),p.xp6(2),p.Oqu(t.language.usersdetail),p.xp6(2),p.Q6J("ngClass","blacklist"==t.currentPage||"blacklistAddUser"==t.currentPage?"active":""),p.xp6(1),p.Oqu(t.language.deactivatedusers),p.xp6(1),p.Q6J("ngIf",t.showAccountManagement),p.xp6(2),p.Q6J("ngClass","roles"==t.currentPage||"addRole"==t.currentPage||"roleDetails"==t.currentPage?"active":""),p.xp6(1),p.Oqu(t.language.roles),p.xp6(1),p.Q6J("ngClass","addRole"==t.currentPage?"dblock":"dnone"),p.xp6(2),p.Oqu(t.language.addnewrole),p.xp6(2),p.Q6J("routerLinkActive",p.DdM(49,Oe)),p.xp6(1),p.Oqu(t.language.acsConfig),p.xp6(2),p.Q6J("routerLinkActive",p.DdM(50,Oe)),p.xp6(1),p.Oqu(t.language.orginfo),p.xp6(2),p.ekj("active",t.router.url.includes("devices-name-placeholder")||t.router.url.includes("flowAnalyze")),p.xp6(1),p.Oqu(t.language.flowconfiguration),p.xp6(2),p.Q6J("routerLinkActive",p.DdM(51,Oe)),p.xp6(1),p.Oqu(t.language.orgacl),p.xp6(2),p.Q6J("routerLinkActive",p.DdM(52,Oe)),p.xp6(1),p.Oqu(t.language.ssoconfig),p.xp6(1),p.Q6J("ngIf",t.apps.fa),p.xp6(1),p.Q6J("ngIf",t.apps.csc&&t.calloutcomeRead),p.xp6(1),p.Q6J("ngIf",t.apps.foundation),p.xp6(2),p.Q6J("ngIf",t.apps.Community),p.xp6(2),p.ekj("active",t.router.isActive("systemAdministration/zip-code-upload",!1)||t.router.isActive("systemAdministration/zip-code-entrylist",!1)),p.xp6(1),p.Oqu(t.language["ZIP Code File Upload"]),p.xp6(1),p.Q6J("ngIf",t.apps.cmc&&!t.isCA),p.xp6(1),p.Q6J("ngIf",t.showAPIUsage),p.xp6(1),p.Q6J("ngIf",t.showMobileApp),p.xp6(1),p.Q6J("ngIf",(t.apps.cmc||t.apps.cmcPro)&&t.billingStatusEnabled),p.xp6(1),p.Q6J("ngIf",t.apps.chatBot))},directives:[a.yS,s.mk,a.Od,s.O5],pipes:[s.OU],styles:[".left-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-left:inherit!important;border-right:inherit!important;border-top:inherit!important;word-break:break-word;padding-right:10px}"]}),e})();var Re=i(93702);const He=["scrollTopId"];function Ye(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",8),p.TgZ(1,"span",9),p._UZ(2,"img",10),p.qZA(),p.TgZ(3,"button",11),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",12),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.errorInfo,p.oJD)}}function Qe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",13),p.TgZ(1,"button",11),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(2,"span"),p.qZA(),p._uU(3),p.qZA()}if(2&e){const e=p.oxw();p.xp6(3),p.hij(" ",e.successInfo," ")}}let ze=(()=>{class e{constructor(e,t,i,s){this.common=e,this.router=t,this.translateSerice=i,this.titleService=s,this.showRecord=this.common.recordView,this.rouerSubs=this.router.events.subscribe(e=>{e instanceof a.OD&&this.common.closeAlert()}),this.language=this.translateSerice.defualtLanguage,this.languageSubject=this.translateSerice.selectedLanguage.subscribe(e=>{this.language=e})}ngOnInit(){this.scrollSubs=this.common.scrollTop.subscribe(()=>{try{this.scrollTop()}catch(e){}}),this.closeSubs=this.common.closeAlerts.subscribe(()=>{this.closeAlert()}),this.successSubs=this.common.successAlert.subscribe(e=>{this.openSuccessAlert(e)}),this.errorSubs=this.common.errorAlert.subscribe(e=>{this.openErrorAlert(e)})}onActivate(e){window.scroll({top:0,left:0,behavior:"smooth"})}ngOnDestroy(){this.scrollSubs&&this.scrollSubs.unsubscribe(),this.closeSubs&&this.closeSubs.unsubscribe(),this.successSubs&&this.successSubs.unsubscribe(),this.errorSubs&&this.errorSubs.unsubscribe(),this.rouerSubs&&this.rouerSubs.unsubscribe(),this.languageSubject.unsubscribe()}scrollTop(){this.scrollTopId.nativeElement.scrollIntoView()}closeAlert(){this.error=!1,this.success=!1}openSuccessAlert(e){e&&(this.successInfo=e,this.success=!0)}openErrorAlert(e){e&&(this.errorInfo=e,this.error=!0)}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(m.v),p.Y36(a.F0),p.Y36(ve.s),p.Y36(b.Dx))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-sys-admin"]],viewQuery:function(e,t){if(1&e&&p.Gf(He,7),2&e){let e;p.iGM(e=p.CRH())&&(t.scrollTopId=e.first)}},decls:11,vars:5,consts:[[1,"maximus","sys-admin-cont"],[1,"row"],[3,"ngClass","hidden"],[3,"ngClass"],["scrollTopId",""],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[3,"activate"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._UZ(1,"app-admin-header"),p.TgZ(2,"div",1),p.TgZ(3,"div",2),p._UZ(4,"app-side-menu"),p.qZA(),p.TgZ(5,"div",3,4),p.YNc(7,Ye,6,1,"div",5),p.YNc(8,Qe,4,1,"div",6),p.TgZ(9,"router-outlet",7),p.NdJ("activate",function(e){return t.onActivate(e)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p._UZ(10,"app-admin-footer")),2&e&&(p.xp6(3),p.Q6J("ngClass",!0!==(null==t.showRecord?null:t.showRecord.show)?"col-md-3 col-sm-3 col-xs-12 pr-2":"")("hidden",null==t.showRecord?null:t.showRecord.show),p.xp6(2),p.Q6J("ngClass",!0===(null==t.showRecord?null:t.showRecord.show)?"col-md-12 col-sm-12 col-xs-12":"col-md-9 col-sm-9 col-xs-12"),p.xp6(2),p.Q6J("ngIf",t.error),p.xp6(1),p.Q6J("ngIf",t.success))},directives:[xe.G,s.mk,$e,s.O5,a.lC,Re.c],styles:[""]}),e})();var Be=i(18638);const je=["deleteModal"],Ve=["picker_start"],Ge=["picker_end"];function We(e,t){1&e&&(p.TgZ(0,"div",13),p.TgZ(1,"div",14),p.TgZ(2,"div",15),p.TgZ(3,"span",16),p._uU(4,"Loading..."),p.qZA(),p.qZA(),p.qZA(),p.qZA())}function Xe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",17),p.TgZ(1,"span",18),p._UZ(2,"img",19),p.qZA(),p.TgZ(3,"button",20),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",21),p.qZA()}if(2&e){const e=p.oxw();p.xp6(5),p.Q6J("innerHtml",e.errorInfo,p.oJD)}}function Ke(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",22),p.TgZ(1,"button",20),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeAlert()}),p._UZ(2,"span"),p.qZA(),p._UZ(3,"div",23),p.qZA()}if(2&e){const e=p.oxw();p.xp6(3),p.Q6J("innerHtml",e.successInfo,p.oJD)}}function et(e,t){if(1&e&&(p.TgZ(0,"div",57),p._uU(1),p.qZA()),2&e){const e=p.oxw(2);p.xp6(1),p.Oqu(e.language["Please select an organization(s)"])}}function tt(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td",58),p.TgZ(8,"a"),p.TgZ(9,"i",59),p.NdJ("click",function(){const t=p.CHM(e).$implicit;return p.oxw(2).deleteOneData(t)}),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=t.$implicit,i=p.oxw(2);p.xp6(2),p.Oqu(i.language[e.orgName]||e.orgName),p.xp6(2),p.hij(" ","Read and Write"==i.checkType(e.type)?i.language["Read and Write"]:i.language["Read only"]," "),p.xp6(2),p.Oqu(i.checkExpiry(e)),p.xp6(3),p.s9C("title",i.language.delete)}}function it(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",60),p.TgZ(1,"div",61),p.TgZ(2,"button",62),p.NdJ("click",function(){return p.CHM(e),p.oxw(2).save()}),p._uU(3),p.qZA(),p.TgZ(4,"button",63),p.NdJ("click",function(){return p.CHM(e),p.oxw(2).cancel()}),p._uU(5),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=p.oxw(2);p.xp6(3),p.Oqu(e.language.saveEnregistrer),p.xp6(2),p.Oqu(e.language.Cancel)}}const st=function(){return{standalone:!0}},nt=function(){return{width:"100%",height:"36px"}},at=function(){return{height:"36px"}};function ot(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"div",24),p.TgZ(2,"form"),p.TgZ(3,"div",25),p.TgZ(4,"div",26),p.TgZ(5,"div",27),p.TgZ(6,"input",28),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().isAllOrgs=t}),p.qZA(),p.TgZ(7,"label",29),p._uU(8),p.qZA(),p.qZA(),p.TgZ(9,"ng-select",30),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().selectedOrgs=t}),p.qZA(),p.YNc(10,et,2,1,"div",31),p.qZA(),p.TgZ(11,"div",26),p.TgZ(12,"div",32),p.TgZ(13,"input",33),p.NdJ("click",function(t){return p.CHM(e),p.oxw().checkAllOrgs(t.target.checked)})("ngModelChange",function(t){return p.CHM(e),p.oxw().isAllOrgs=t}),p.qZA(),p.TgZ(14,"label",34),p._uU(15),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(16,"div",35),p.TgZ(17,"p",36),p._uU(18),p.qZA(),p.TgZ(19,"div",37),p.TgZ(20,"label",38),p.TgZ(21,"input",39),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().isReadOnly=t}),p.qZA(),p._uU(22),p.qZA(),p.qZA(),p.TgZ(23,"div",40),p.TgZ(24,"label",38),p.TgZ(25,"input",39),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().isReadOnly=t}),p.qZA(),p._uU(26),p.qZA(),p.qZA(),p.qZA(),p.TgZ(27,"div",35),p.TgZ(28,"p",36),p._uU(29),p.qZA(),p.TgZ(30,"div",41),p.TgZ(31,"div",42),p.TgZ(32,"p",36),p._uU(33),p.qZA(),p.TgZ(34,"p-calendar",43),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().startDate=t})("onSelect",function(){return p.CHM(e),p.oxw().changeDate()}),p.qZA(),p.qZA(),p.TgZ(35,"div",42),p.TgZ(36,"p",36),p._uU(37),p.qZA(),p.TgZ(38,"p-calendar",44),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().endDate=t}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(39,"div",45),p.TgZ(40,"label",46),p.TgZ(41,"input",47),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().hasEndTime=t}),p.qZA(),p._uU(42),p.qZA(),p.qZA(),p.TgZ(43,"div",40),p.TgZ(44,"label",48),p.TgZ(45,"input",49),p.NdJ("ngModelChange",function(t){return p.CHM(e),p.oxw().hasEndTime=t}),p.qZA(),p._uU(46),p.qZA(),p.qZA(),p.qZA(),p.TgZ(47,"div",50),p.TgZ(48,"button",51),p.NdJ("click",function(){return p.CHM(e),p.oxw().addNewDatas()}),p._uU(49),p.qZA(),p.qZA(),p.qZA(),p.TgZ(50,"div",52),p.TgZ(51,"div",53),p.TgZ(52,"table",54),p.TgZ(53,"thead",24),p.TgZ(54,"tr"),p.TgZ(55,"th"),p._uU(56),p.qZA(),p.TgZ(57,"th"),p._uU(58),p.qZA(),p.TgZ(59,"th"),p._uU(60),p.qZA(),p.TgZ(61,"th"),p._uU(62),p.qZA(),p.qZA(),p.qZA(),p.TgZ(63,"tbody"),p.YNc(64,tt,10,4,"tr",55),p.qZA(),p.qZA(),p.qZA(),p.YNc(65,it,6,2,"div",56),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();p.xp6(6),p.Q6J("value",!1)("ngModel",e.isAllOrgs),p.xp6(2),p.hij(" ",e.language["Select Organizations"]," "),p.xp6(1),p.s9C("placeholder",e.language.selectAnOrganization),p.Q6J("items",e.orgsList)("ngModel",e.selectedOrgs)("multiple",!0)("ngModelOptions",p.DdM(61,st))("clearable",!1)("searchable",!0)("disabled",e.isAllOrgs),p.xp6(1),p.Q6J("ngIf",e.showErrorMsg&&!e.selectedOrgs.length),p.xp6(3),p.Q6J("value",!0)("ngModel",e.isAllOrgs),p.xp6(2),p.hij(" ",e.language["All Organizations"]," "),p.xp6(3),p.Oqu(e.language["Access Type"]),p.xp6(3),p.Q6J("value",!0)("ngModel",e.isReadOnly),p.xp6(1),p.hij("",e.language["Read only"]," "),p.xp6(3),p.Q6J("value",!1)("ngModel",e.isReadOnly),p.xp6(1),p.hij("",e.language["Write and Read"]," "),p.xp6(3),p.Oqu(e.language["Access Duration"]),p.xp6(4),p.Oqu(e.language["Start Time"]),p.xp6(1),p.Akn(p.DdM(62,nt)),p.Q6J("ngModel",e.startDate)("minDate",e.minimumDate)("showTime",!0)("inputStyle",p.DdM(63,at))("autoZIndex",!0)("showIcon",!0)("ngModelOptions",p.DdM(64,st))("minDate",e.minimumDate),p.xp6(3),p.Oqu(e.language["End Time"]),p.xp6(1),p.Akn(p.DdM(65,nt)),p.Q6J("ngModel",e.endDate)("minDate",e.startDate)("showTime",!0)("inputStyle",p.DdM(66,at))("autoZIndex",!0)("showIcon",!0)("ngModelOptions",p.DdM(67,st))("minDate",e.minimumDate),p.xp6(3),p.Q6J("value",!0)("ngModel",e.hasEndTime),p.xp6(1),p.hij("",e.language["Has End Time"]," "),p.xp6(3),p.Q6J("value",!1)("ngModel",e.hasEndTime),p.xp6(1),p.hij("",e.language["No End Time"]," "),p.xp6(3),p.Oqu(e.language.add),p.xp6(2),p.Q6J("hidden",!e.dataAvailable),p.xp6(1),p.Q6J("dtOptions",e.tableOptions)("dtTrigger",e.dtTrigger),p.xp6(4),p.Oqu(e.language.Organizations),p.xp6(2),p.Oqu(e.language["Access Type"]),p.xp6(2),p.Oqu(e.language.Duration),p.xp6(2),p.Oqu(e.language.Action),p.xp6(2),p.Q6J("ngForOf",e.addedOrgsList),p.xp6(1),p.Q6J("ngIf",e.showButtons)}}function rt(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",64),p.TgZ(1,"h4",65),p._uU(2),p.qZA(),p.TgZ(3,"button",66),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeModal()}),p._UZ(4,"span",67),p.qZA(),p.qZA(),p.TgZ(5,"div",68),p._uU(6),p._UZ(7,"br"),p._uU(8),p.qZA(),p.TgZ(9,"div",69),p.TgZ(10,"button",70),p.NdJ("click",function(){return p.CHM(e),p.oxw().confirmDeleteSecleted()}),p._uU(11),p.qZA(),p.TgZ(12,"button",71),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeModal()}),p._uU(13),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();p.xp6(2),p.Oqu(e.modalTitle),p.xp6(4),p.hij(" ",e.language["Are you sure you want to delete"],"?"),p.xp6(2),p.hij(" (",e.modalInfo,") "),p.xp6(3),p.Oqu(e.language.yes),p.xp6(2),p.Oqu(e.language.no)}}i(91704);let lt=(()=>{class e{constructor(e,t,i,s,a,o,r){this.commonOrgService=e,this.router=t,this.customTranslateService=i,this.service=s,this.sso=a,this.dialogService=o,this.titleService=r,this.pageAvailable=!1,this.criteria=[],this.tableOptions={rowId:"id",processing:!0,lengthChange:!1,searching:!1,ordering:!1,paging:!1,dom:"t"},this.dtTrigger=new I.xQ,this.isRerender=!1,this.orgsList=[],this.selectedOrgs=[],this.addedOrgsList=[],this.isAllOrgs=!1,this.isReadOnly=!0,this.hasEndTime=!0,this.loader=!0,this.errorInfo="",this.successInfo="",this.showButtons=!1,this.sysAdminRoute="systemAdministration",this.minDate=new Date,this.formGroup=new n.cw({date:new n.NI(null,[n.kI.required]),date2:new n.NI(null,[n.kI.required])}),this.dateControl=new n.NI(new Date),this.dateControlMinMax=new n.NI(new Date),this.options=[{value:!0,label:"True"},{value:!1,label:"False"}],this.listColors=["primary","accent","warn"],this.stepHours=[1,2,3,4,5],this.stepMinutes=[1,5,10,15,20,25],this.stepSeconds=[1,5,10,15,20,25],this.showErrorMsg=!1;let l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.securedaccess} - ${"systemAdministration"===c?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.dataAvailable=!1,this.loader=!0,this.isRerender=!0,this.setTableOptions("language"),this.setLanguage()}),this.frTable=this.customTranslateService.fr,this.commonOrgService.currentPageAdder("UserSecuredAccess"),this.securedUser=JSON.parse(sessionStorage.getItem("SecuredAccessUser")),this.setUserInfo(),this.setLanguage(),this.setDate();let c=this.sso.getRedirectModule(l);this.titleService.setTitle(`${this.language.securedaccess} - ${"systemAdministration"===c?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.criteria=[{name:"Test Org",value:"test org"},{name:"OneCloudOne",value:"onecloudone"},{name:"Srinivas Telephone",value:"srinivas telephone"}],this.getData(),this.setDate(),this.tableLanguageOptions()}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.orgListSubs&&this.orgListSubs.unsubscribe(),this.accessOrgsListSubs&&this.accessOrgsListSubs.unsubscribe(),this.updateOrgListSubs&&this.updateOrgListSubs.unsubscribe()}getData(){this.getAllOrgsList()}goToUsersList(){this.router.navigate([`${this.sysAdminRoute}/users`])}goToOrgSecuredAccess(){this.router.navigate([`${this.sysAdminRoute}/orgSecuredAccess`])}getAllOrgsList(){this.orgListSubs=this.service.getOrgList().subscribe(e=>{this.orgsList=e,this.getSelectedOrgsList()},e=>{this.loader=!1,this.pageErrorHandle(e),this.renderOrgsTable()})}getSelectedOrgsList(){this.accessOrgsListSubs=this.service.getOrgListByUsername(this.securedUser.username).subscribe(e=>{this.addedOrgsList=e,this.renderOrgsTable()},e=>{this.loader=!1,this.pageErrorHandle(e),this.renderOrgsTable()})}addNewDatas(){if(0==this.isAllOrgs&&0==this.selectedOrgs.length)return void(this.showErrorMsg=!0);let e=this.startDate.getTime(),t=this.endDate.getTime(),i={},s=this.service.roundOffTimestamp(e);if(this.hasEndTime){let e=this.service.roundOffTimestamp(t);i={orgId:"",orgName:"",type:this.isReadOnly?"*:read":"*:write",beginTime:s,endTime:e}}else i={orgId:"",orgName:"",type:this.isReadOnly?"*:read":"*:write",beginTime:s,endTime:-1};if(this.showButtons=!0,this.isAllOrgs)i.orgId="*",i.orgName="All Organizations",this.addedOrgsList=[i];else{let e=this.addedOrgsList,t=[];if(1==e.length&&"*"==e[0].orgId&&(e=[]),e.length){let s=[];this.selectedOrgs.forEach(e=>{s.push({orgId:e.id,orgName:e.name,type:i.type,beginTime:i.beginTime,endTime:i.endTime})}),e.forEach(e=>{let n;n=s.filter(t=>t.orgId===e.orgId),n.length?(s=s.filter(t=>t.orgId!==e.orgId),t.push({orgId:e.orgId,orgName:e.orgName,type:i.type,beginTime:i.beginTime,endTime:i.endTime})):t.push(e)}),t=[...t,...s]}else this.selectedOrgs.forEach(e=>{t.push({orgId:e.id,orgName:e.name,type:i.type,beginTime:i.beginTime,endTime:i.endTime})});this.addedOrgsList=t}this.showErrorMsg=!1,this.showButtons=!0,this.isRerender=!0,this.renderOrgsTable(),this.resetForm()}deleteOneData(e){this.deleteItem=e,this.modalTitle="Delete Secured Access Organization",this.modalInfo=`${e.orgName} : ${this.checkType(e.type)} : ${this.checkExpiry(e)}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal)}confirmDeleteSecleted(){this.closeModal();let e=this.deleteItem;this.addedOrgsList=this.addedOrgsList.filter(t=>t.orgId!==e.orgId),this.showButtons=!0,this.isRerender=!0,this.renderOrgsTable()}renderOrgsTable(){this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}setTableOptions(e){this.tableOptions={rowId:"id",processing:!0,lengthChange:!1,searching:!1,ordering:!1,paging:!1,dom:"t",columnDefs:[{targets:[-1],orderable:!1}]},this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.dataAvailable=!0,this.rerender(),setTimeout(()=>{this.loader=!1},100)},100):(this.dataAvailable=!0,this.loader=!1)}checkType(e){return this.service.checkType(e)}checkExpiry(e){return this.service.checkExpiry(e)}save(){let e=[];this.addedOrgsList.forEach(t=>{e.push({orgId:t.orgId,type:t.type,beginTime:t.beginTime,endTime:t.endTime})}),this.loader=!0,this.updateOrgListSubs=this.service.AddOrgListByUsername(this.securedUser.username,e).subscribe(e=>{this.closeAlert(),this.successInfo="User secured Access saved successfully",this.success=!0,this.commonOrgService.pageScrollTop(),this.loader=!1,setTimeout(()=>{this.closeAlert(),this.goToUsersList()},1500)},e=>{this.pageErrorHandle(e),this.loader=!1})}cancel(){this.goToUsersList()}closeAlert(){this.error=!1,this.success=!1}setDate(){let e=new Date;this.startDate=e,this.endDate=new Date(e.getTime()+6e4),this.minimumDate=e}setUserInfo(){let e=this.securedUser;this.userTitle=null!=(null==e?void 0:e.firstName)&&""!==(null==e?void 0:e.firstName)?null!=e.lastName?`${e.firstName} ${e.lastName}`:`${e.firstName}`:`${null==e?void 0:e.username}`}resetForm(){this.isAllOrgs=!1,this.isReadOnly=!0,this.hasEndTime=!0}checkAllOrgs(e){this.showErrorMsg=!1,this.selectedOrgs=[]}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}setLanguage(){sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?this.curLang="fr":sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")&&(this.curLang="en")}closeModal(){this.modalRef&&this.modalRef.close()}addEventTwo(e,t){this.startDate=new Date(t.value)}changeDate(){this.startDate>this.endDate&&(this.endDate=new Date(this.startDate.getTime()+6e4))}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(m.v),p.Y36(a.F0),p.Y36(f.d),p.Y36(ge.q),p.Y36(Y.t6),p.Y36(Q.FF),p.Y36(b.Dx))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-user-secured-access"]],viewQuery:function(e,t){if(1&e&&(p.Gf(je,7),p.Gf(J.G,5),p.Gf(Ve,5),p.Gf(Ge,5)),2&e){let e;p.iGM(e=p.CRH())&&(t.deleteModal=e.first),p.iGM(e=p.CRH())&&(t.dtElement=e.first),p.iGM(e=p.CRH())&&(t.picker_start=e.first),p.iGM(e=p.CRH())&&(t.picker_end=e.first)}},decls:16,vars:6,consts:[[1,"conatiner","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","px-1"],[4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,""],[1,"row","my-2"],[1,"col-md-6"],[1,"form-check","mb-3","d-flex","align-items-center"],["type","radio","id","Select_Organizations","name"," organization",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","Select_Organizations",1,"form-check-label"],["id","usage_criteria","bindLabel","name",1,"w-100",3,"items","ngModel","multiple","placeholder","ngModelOptions","clearable","searchable","disabled","ngModelChange"],["class","mandatory-msg",4,"ngIf"],[1,"form-check","d-flex","align-items-center"],["type","radio","name","organization","id","All_Organizations",1,"form-check-input",3,"value","ngModel","click","ngModelChange"],["for","All_Organizations",1,"form-check-label"],[1,"mt-4"],[1,"ml-2","ccl-title"],[1,"form-check-inline","mt-2"],[1,"form-check-label"],["type","radio","name","type",1,"form-check-input",3,"value","ngModel","ngModelChange"],[1,"form-check-inline"],[1,"row","mt-2"],[1,"col-sm-6","col-12","ccl-form"],["id","start_date","hourFormat","12","appendTo","body","placeholder","","readonlyInput","true","dateFormat","mm-dd-yy",3,"ngModel","minDate","showTime","inputStyle","autoZIndex","showIcon","ngModelOptions","ngModelChange","onSelect"],["id","start_date","hourFormat","12","appendTo","body","placeholder","","readonlyInput","true","dateFormat","mm-dd-yy",3,"ngModel","minDate","showTime","inputStyle","autoZIndex","showIcon","ngModelOptions","ngModelChange"],[1,"form-check-inline","mt-3"],["for","endtime",1,"form-check-label"],["type","radio","id","endtime","name","endtime",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","noendtime",1,"form-check-label"],["type","radio","id","noendtime","name","endtime",1,"form-check-input",3,"value","ngModel","ngModelChange"],[1,"row","col","ccl-form","my-3"],[1,"btn-default","primary",3,"click"],[1,"table-div"],["id","users-list-table",1,"mt-2",3,"hidden"],["width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["class","row my-4",4,"ngIf"],[1,"mandatory-msg"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],[1,"row","my-4"],[1,"col-4","offset-md-8","text-right"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.YNc(1,We,5,0,"div",1),p.YNc(2,Xe,6,1,"div",2),p.YNc(3,Ke,4,1,"div",3),p.TgZ(4,"div",4),p.TgZ(5,"div",5),p.TgZ(6,"div",6),p._uU(7),p.qZA(),p.qZA(),p.TgZ(8,"div",7),p.TgZ(9,"div",8),p.TgZ(10,"a",9),p.NdJ("click",function(){return t.goToUsersList()}),p._UZ(11,"i",10),p._uU(12),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.YNc(13,ot,66,68,"div",11),p.qZA(),p.YNc(14,rt,14,5,"ng-template",null,12,p.W1O)),2&e&&(p.xp6(1),p.Q6J("ngIf",t.loader),p.xp6(1),p.Q6J("ngIf",t.error),p.xp6(1),p.Q6J("ngIf",t.success),p.xp6(4),p.Oqu(t.userTitle),p.xp6(5),p.hij(" ",t.language.backToUsersList,""),p.xp6(1),p.Q6J("ngIf",t.pageAvailable))},directives:[s.O5,n._Y,n.JL,n.F,n._,n.Fj,n.JJ,n.On,z.w9,Be.f,J.G,s.sg],styles:["[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){left:auto}"]}),e})();var ct=i(91387),dt=i(66066),gt=i(85656),ut=i(98953),ht=i(75495),pt=i(67679),mt=i(75769);let ft=(()=>{class e{constructor(e,t){this.sso=e,this.router=t}canActivate(e,t){const i=t.url;if(this.sso.getOrganizationID(i))return!0;{const e=this.sso.getRedirectModule(i);this.router.navigateByUrl(e)}}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(Y.t6),p.LFG(a.F0))},e.\u0275prov=p.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Zt=i(65895),bt=i(55908),At=i(64697);const vt=[{path:"",component:ze,data:{title:"Calix Cloud - Org Admin"},children:[{path:"organizations",component:le.f,data:{title:"Calix Cloud - Calix Admin"}},{path:"addOrg",component:_,data:{title:"Calix Cloud - Calix Admin"}},{path:"orgSecuredAccess",component:fe,data:{title:"Calix Cloud - Calix Admin"},canActivate:[ft]},{path:"UserSecuredAccess",component:lt,data:{title:"Calix Cloud - Calix Admin"},canActivate:[ft]},{path:"orgDetail",component:oe,data:{title:"Calix Cloud - Calix Admin"},canActivate:[ft]},{path:"users",component:dt.b,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"addUser",component:q.J,data:{title:"Calix Cloud - Calix Admin"},canActivate:[ft]},{path:"usersDetail",component:ct.Y,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"blacklist",component:y.X,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"blacklistAddUser",component:S.N,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"roles",component:de.y,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"roleDetails",component:ce.W,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"addRole",component:C.Z,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"csccfg",loadChildren:()=>i.e(9829).then(i.bind(i,9829)).then(e=>e.CalixSupportCloudModule),canActivate:[ft]},{path:"orginfo",component:re.Q,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"externalticketingsystem",component:M.l,data:{title:"Calix Cloud - Org Admin"}},{path:"flowAnalyze",loadChildren:()=>Promise.all([i.e(4555),i.e(9870),i.e(5865),i.e(1873),i.e(9256)]).then(i.bind(i,9256)).then(e=>e.FlowConfigurationModule),canActivate:[ft]},{path:"orgacl",component:N.U,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"sso",component:Ze.v,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"admin-call-outcome",component:w.h,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"foundation",loadChildren:()=>i.e(6854).then(i.bind(i,86854)).then(e=>e.FoundationModule)},{path:"cco-admin",loadChildren:()=>Promise.all([i.e(7162),i.e(6916),i.e(3122)]).then(i.bind(i,3122)).then(e=>e.CcoAdminModule),canActivate:[ft]},{path:"mobile-app",loadChildren:()=>Promise.all([i.e(5994),i.e(6513)]).then(i.bind(i,46513)).then(e=>e.MobileAppModule),canActivate:[ft]},{path:"block_page_template_list",component:r.t,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template/:id",component:o.w,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template",component:o.w,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template_update/:id",component:l.U,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel",component:u.e,data:{title:"Calix Cloud - Org Admin"}},{path:"commandIQ",component:c.t,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel-create",component:d.x,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel-update",component:g.E,data:{title:"Calix Cloud - Org Admin"}},{path:"SmartTownWi-Fi/confirm-users",component:pt.F},{path:"SmartTownWi-Fi",component:D.L,loadChildren:()=>Promise.all([i.e(7162),i.e(6916),i.e(10)]).then(i.bind(i,90010)).then(e=>e.MyCommunityIqModule),data:{title:"Calix Cloud - Org Admin"}},{path:"SmartTownWi-Fi",component:D.L,data:{title:"Calix Cloud - Org Admin"},canActivate:[ft]},{path:"USOC-Upload",component:gt.o,data:{title:"Calix Cloud - Org Admin"}},{path:"applications-audit",component:mt.F,canActivate:[ft]},{path:"",redirectTo:"organizations",pathMatch:"full"},{path:"zip-code-upload",component:ht.f,data:{title:"Calix Cloud - Org Admin"}},{path:"zip-code-entrylist",component:ut.K,data:{title:"Calix Cloud - Org Admin"}},{path:"account-management",component:h.I,data:{title:"Calix Cloud - Account Management"}},{path:"federated-user-details",component:k.I,data:{title:"Calix Cloud - Account Management - User details"}},{path:"subscriber-prospect-upload",component:Ae.B,data:{title:"Calix Cloud - Org Admin"}},{path:"subscriber-prospect-list",component:be.y,data:{title:"Calix Cloud - Org Admin"}},{path:"api-usage",component:O.i,data:{title:"Calix Cloud - Org Admin"}},{path:"engagement-cloud",component:U.a},{path:"devices-name-placeholder",component:Zt.P,data:{title:"Calix Cloud - Org Admin"}},{path:"chatbot",component:bt.x,data:{title:"Calix Cloud - Org Admin"}},{path:"chatbot-create",component:At.s,data:{title:"Calix Cloud - Org Admin"}},{path:"",redirectTo:"organizations",pathMatch:"full"}]},{path:"cco-admin",loadChildren:()=>Promise.all([i.e(7162),i.e(6916),i.e(3122)]).then(i.bind(i,3122)).then(e=>e.CcoAdminModule)}];let xt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[a.Bz.forChild(vt)],a.Bz]}),e})();i(72863);const Tt=[];let _t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[a.Bz.forChild(Tt)],a.Bz]}),e})();var Ct=i(23830);let qt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[s.ez,n.u5,_t,J.T,z.A0,Ct.o]]}),e})();i(99225);var wt=i(96718),Ot=i(44466);let St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e,bootstrap:[oe]}),e.\u0275inj=p.cJS({providers:[b.Dx],imports:[[s.ez,n.u5,xt,J.T,qt,Q.IJ,z.A0,Q.M,n.u5,n.UX,Be._8,Ct.o,wt.e4,Ot.m]]}),e})()},91387:function(e,t,i){i.d(t,{Y:function(){return X}});var s=i(23771),n=i(79765),a=i(25917),o=i(9112),r=i(92340),l=i(88002),c=i(5304),d=i(37716),g=i(404),u=i(49342),h=i(39895),p=i(30900),m=i(91395),f=i(38048),Z=i(12664),b=i(39075),A=i(20904),v=i(63859),x=i(38583),T=i(3679),_=i(74062),C=i(86640);const q=["deleteModal"];function w(e,t){if(1&e&&(d.TgZ(0,"div",39),d.TgZ(1,"div",40),d.TgZ(2,"div",41),d.TgZ(3,"span",42),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(4),d.Oqu(e.language.Loading)}}function O(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",43),d.TgZ(1,"span",44),d._UZ(2,"img",45),d.qZA(),d.TgZ(3,"button",46),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",47),d.qZA()}if(2&e){const e=d.oxw();d.xp6(5),d.Q6J("innerHtml",e.errorInfo,d.oJD)}}function S(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",48),d.TgZ(1,"button",46),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeAlert()}),d._UZ(2,"span"),d.qZA(),d._UZ(3,"div",49),d.qZA()}if(2&e){const e=d.oxw();d.xp6(3),d.Q6J("innerHtml",e.successInfo,d.oJD)}}function y(e,t){if(1&e&&(d.TgZ(0,"em",62),d._uU(1),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Oqu(e.language["This field is required"])}}function M(e,t){if(1&e&&(d.TgZ(0,"span",63),d._uU(1),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.hij("",e.language["Please enter the same value again"],".")}}const k=function(e){return[e]};function U(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"form"),d.TgZ(1,"div",50),d.TgZ(2,"div",51),d.TgZ(3,"div",52),d.TgZ(4,"label",53),d._uU(5),d.qZA(),d.TgZ(6,"input",54),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().editUserPassword=t})("keyup",function(){return d.CHM(e),d.oxw().changePassword()}),d.qZA(),d.TgZ(7,"span",55),d.NdJ("click",function(){return d.CHM(e),d.oxw().toggleShowPassword()}),d.qZA(),d.YNc(8,y,2,1,"em",56),d.qZA(),d.qZA(),d.TgZ(9,"div",57),d.TgZ(10,"div",58),d.TgZ(11,"label",59),d._uU(12),d.qZA(),d.TgZ(13,"input",60),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().editUserCPassword=t})("keyup",function(){return d.CHM(e),d.oxw().changeConfirmPassword()}),d.qZA(),d.TgZ(14,"span",55),d.NdJ("click",function(){return d.CHM(e),d.oxw().toggleShowPasswords()}),d.qZA(),d.YNc(15,M,2,1,"span",61),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(3),d.Q6J("ngClass",d.VKq(14,k,e.passwordError?"ccl-error":"")),d.xp6(2),d.Oqu(e.language.password),d.xp6(1),d.s9C("placeholder",e.language["Enter new password"]),d.Q6J("ngModel",e.editUserPassword),d.uIk("type",e.showPassword?"text":"password"),d.xp6(1),d.Q6J("ngClass",e.showPassword?"password_view":"password_hide"),d.xp6(1),d.Q6J("ngIf",!e.editUserPassword&&e.cpasswordError),d.xp6(2),d.Q6J("ngClass",d.VKq(16,k,e.cpasswordError?"ccl-error":"")),d.xp6(2),d.Oqu(e.language.confirmPassword),d.xp6(1),d.s9C("placeholder",e.language["Re-enter to confirm"]),d.Q6J("ngModel",e.editUserCPassword),d.uIk("type",e.showPasswords?"text":"password"),d.xp6(1),d.Q6J("ngClass",e.showPasswords?"password_view":"password_hide"),d.xp6(1),d.Q6J("ngIf",e.cpasswordError)}}function D(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",64),d.TgZ(1,"div",65),d.TgZ(2,"div",66),d.NdJ("click",function(){const t=d.CHM(e).index;return d.oxw().removeSubnet(t)}),d._UZ(3,"i",67),d.qZA(),d._uU(4),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(4),d.hij(" ",e," ")}}function N(e,t){if(1&e&&(d.TgZ(0,"em",68),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Oqu(e.subnetErrorInfo)}}function I(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",69),d.TgZ(1,"button",46),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeAlertRole()}),d._uU(2,"\xd7"),d.qZA(),d._UZ(3,"div",49),d.qZA()}if(2&e){const e=d.oxw();d.xp6(3),d.Q6J("innerHtml",e.existingRoleErrorInfo,d.oJD)}}function E(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"tr",70),d.TgZ(1,"td",71),d._uU(2),d.qZA(),d.TgZ(3,"td",72),d.TgZ(4,"i",73),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().deleteRole(t)}),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit,i=d.oxw();d.s9C("id",e._id),d.xp6(2),d.Oqu(e.name),d.xp6(2),d.s9C("title",i.language.delete)}}function F(e,t){if(1&e&&(d.TgZ(0,"div",13),d.TgZ(1,"div",74),d._uU(2),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(2),d.hij(" ",e.language.permissions," ")}}function P(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",4),d.TgZ(2,"div",80),d.TgZ(3,"div",86),d.TgZ(4,"div"),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"div",82),d._uU(7),d.qZA(),d.qZA(),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(10);d.xp6(5),d.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),d.xp6(2),d.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," ")}}function L(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,P,8,2,"div",83),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.Q6J("ngForOf",e.permissions3)}}function J(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",4),d.TgZ(2,"div",80),d.TgZ(3,"div",85),d.TgZ(4,"div"),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"div",82),d._uU(7),d.qZA(),d.qZA(),d.YNc(8,L,2,1,"div",12),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(8);d.xp6(5),d.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),d.xp6(2),d.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," "),d.xp6(1),d.Q6J("ngIf",e.permissions3.length)}}function R(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,J,9,3,"div",83),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.Q6J("ngForOf",e.permissions2)}}function H(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",4),d.TgZ(2,"div",80),d.TgZ(3,"div",84),d.TgZ(4,"div"),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"div",82),d._uU(7),d.qZA(),d.qZA(),d.YNc(8,R,2,1,"div",12),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(6);d.xp6(5),d.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),d.xp6(2),d.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," "),d.xp6(1),d.Q6J("ngIf",e.permissions2.length)}}function Y(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,H,9,3,"div",83),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.Q6J("ngForOf",e.permissions)}}function Q(e,t){if(1&e&&(d.TgZ(0,"div",34),d.TgZ(1,"div",79),d.TgZ(2,"div",80),d.TgZ(3,"div",81),d.TgZ(4,"div"),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"div",82),d._uU(7),d.qZA(),d.qZA(),d.YNc(8,Y,2,1,"div",12),d.qZA()),2&e){const e=t.$implicit,i=d.oxw(4);d.xp6(5),d.hij(" ",i.scopeDisplayName[e.scopeDisplayName]||i.language[e.scopeDisplayName]||e.scopeDisplayName," "),d.xp6(2),d.hij(" ","read,write"==e.action?i.language["Read and Write"]:"read"==e.action?i.language.Read:""," "),d.xp6(1),d.Q6J("ngIf",e.permissions.length)}}function z(e,t){if(1&e&&(d.TgZ(0,"div",75),d.TgZ(1,"div",76),d.TgZ(2,"form",77),d.YNc(3,Q,9,3,"div",78),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw(3);d.xp6(3),d.Q6J("ngForOf",e.rolePermissions)}}function B(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,z,4,1,"div",37),d.qZA()),2&e){const e=d.oxw(2);d.xp6(1),d.Q6J("ngIf",e.rolePermissions.length)}}function j(e,t){if(1&e&&(d.TgZ(0,"div"),d.YNc(1,B,2,1,"div",12),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",e.permissionAvailableDeploy)}}function V(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",75),d.TgZ(1,"div",87),d.TgZ(2,"button",88),d.NdJ("click",function(){return d.CHM(e),d.oxw().updateUsersDetails()}),d._uU(3),d.qZA(),d.TgZ(4,"button",89),d.NdJ("click",function(){return d.CHM(e),d.oxw().cancelUpdate()}),d._uU(5),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(3),d.Oqu(e.language.saveEnregistrer),d.xp6(2),d.Oqu(e.language.Cancel)}}function G(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",90),d.TgZ(1,"h4",91),d._uU(2),d.qZA(),d.TgZ(3,"button",92),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeModal()}),d._UZ(4,"span",93),d.qZA(),d.qZA(),d.TgZ(5,"div",94),d._uU(6),d.qZA(),d.TgZ(7,"div",95),d.TgZ(8,"button",96),d.NdJ("click",function(){return d.CHM(e),d.oxw().confirmDeleteSecleted()}),d._uU(9),d.qZA(),d.TgZ(10,"button",97),d.NdJ("click",function(){return d.CHM(e),d.oxw().closeModal()}),d._uU(11),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(2),d.Oqu(e.modalTitle),d.xp6(4),d.AsE(" ",e.language["Are you sure you want to delete this role"]," ? (",e.modalInfo,") "),d.xp6(3),d.Oqu(e.language.yes),d.xp6(2),d.Oqu(e.language.no)}}const W=function(){return{standalone:!0}};let X=(()=>{class e{constructor(e,t,i,s,a,o,r,l,c,d){this.commonFunctionsService=e,this.commonOrgService=t,this.router=i,this.customTranslateService=s,this.apiService=a,this.sso=o,this.dialogService=r,this.titleService=l,this.common=c,this.addRoleService=d,this.pageAvailable=!1,this.createSubnets=[],this.tableOptions={rowId:"_id",pageLength:10,processing:!0,ordering:!1,searching:!1,paging:!1,info:!1,language:{emptyTable:"No role available for current user."},rowCallback:(e,t,i)=>{const s=this;return $("td",e).unbind("click"),$("td",e).bind("click",()=>{s.displaySelectedRolePerms(t._id)}),e},drawCallback:e=>{$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),this.highlightRowCallback()}},this.roles=[],this.rolesSelected=[],this.rolesTableData=[],this.rolesTableOptions={},this.dtTrigger=new n.xQ,this.isRerender=!1,this.subnetError=!1,this.subnetErrorInfo="Invalid Subnet",this.rolesList=[],this.addedRolesList=[],this.countOfRolesAtStart=0,this.rolePermissions=[],this.usersSubnets=[],this.isLocalUser=!1,this.userTitle="",this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.saveCancelShow=!1,this.isPasswordChanged=!1,this.isSubnetChanged=!1,this.isRoleChanged=!1,this.oldRolesList=[],this.oldSubnets=[],this.loading=!0,this.addedRolesName=[],this.addedRolesNameAtStart=[],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.permissionAvailable=!1,this.permissionAvailableDeploy=!0,this.subPermissionAvailable=!0,this.rolesItems=[],this.showPassword=!1,this.showPasswords=!1;let g=this.router.url;this.ORG_ID=this.sso.getOrganizationID(g),this.MODULE=this.sso.getRedirectModule(g),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.dataAvailable=!1,this.isRerender=!0,this.titleService.setTitle(`${this.language.usersDetail} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.renderRolesTable("language")}),this.titleService.setTitle(`${this.language.usersDetail} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.user=JSON.parse(sessionStorage.getItem("calixAdminUserDetail")||"{}"),this.frTable=this.customTranslateService.fr,this.isLocalUser=this.checkUserType(this.user),this.getData()}ngOnInit(){this.setUserInfo(),this.saveCancelShow=!1,this.commonOrgService.currentPageAdder("usersDetail")}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.parallelReqSubscribtionUpdate&&this.parallelReqSubscribtionUpdate.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.passSubs&&this.passSubs.unsubscribe()}getData(){var e,t;const i=[`${r.N.CALIX_ADMIN_BASE_URL}useracl/${null===(e=this.user)||void 0===e?void 0:e.username}?orgid=${this.ORG_ID}`,`${r.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/roles`,`${r.N.CALIX_ADMIN_BASE_URL}user/${null===(t=this.user)||void 0===t?void 0:t._id}/roles`],s=[];i.forEach(e=>{const t=this.apiService.callRestApi(e).pipe((0,l.U)(e=>e),(0,c.K)(e=>(0,a.of)(e)));s.push(t)}),this.combineLatest=(0,o.aj)(s),this.makeParallelRequest()}makeParallelRequest(){this.parallelReqSubscribtion=this.combineLatest.subscribe(e=>{var t;let i=e;if(this.rolesItems=e&&e[1]&&this.sso.isSecureAccess()?null===(t=e[1])||void 0===t?void 0:t.filter(e=>"SysAdmin"!==(null==e?void 0:e.name)):e[1],this.createSubnets=e[0].acl?e[0].acl:[],this.usersSubnets=this.createSubnets,this.rolesList=e[1],this.addedRolesList=e[2]?e[2]:[],this.oldRolesList=e[2]?e[2]:[],this.oldSubnets=i[0].acl&&i[0].acl.length?i[0].acl.slice(0):[],this.countOfRolesAtStart=this.addedRolesList?this.addedRolesList.length:0,this.addedRolesName=this.addedRolesList?this.getRoleNames(this.addedRolesList):[],this.addedRolesNameAtStart=this.addedRolesList?this.getRoleNames(this.addedRolesList):[],null!=e[0]&&null!=e[0].error){if(this.loading=!1,404!=e[0].status)return this.pageErrorHandle(e[0]),void this.commonOrgService.pageScrollTop()}else if(null!=e[1]&&null!=e[1].error){if(this.loading=!1,404!=e[1].status)return this.pageErrorHandle(e[1]),void this.commonOrgService.pageScrollTop()}else if(null!=e[2]&&null!=e[2].error&&(this.loading=!1,404!=e[2].status))return this.pageErrorHandle(e[2]),this.commonOrgService.pageScrollTop(),this.renderRolesTable(),void(this.countOfRolesAtStart=0);setTimeout(()=>{this.renderRolesTable(),this.addedRolesList.length&&(this.permissionProcess(this.addedRolesList[0]),this.highlightRow(this.addedRolesList[0]._id)),this.countOfRolesAtStart=this.addedRolesList?this.addedRolesList.length:0,this.rolesAvail=!0,this.checkSelected(),this.checkSubnetsToShowButtons(),setTimeout(()=>{this.loading=!1},1e3)},100)})}checkUserType(e){return!(!e||"local"!=e.idpType)}changePassword(){this.passwordError=!1,this.passwordError=""==this.editUserPassword,this.editUserPassword==this.editUserCPassword?(this.passwordError=!1,this.cpasswordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}changeConfirmPassword(){this.editUserPassword==this.editUserCPassword?(this.cpasswordError=!1,this.passwordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}addSubnet(){if(this.subnetError=!1,null==this.createCurrentSubnet||""==this.createCurrentSubnet)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet cannot be empty"]);if(this.validateSubnet(this.createCurrentSubnet),!this.subnetError){if(this.createSubnets.filter(e=>e===this.createCurrentSubnet).length>0)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet already added"]);this.createSubnets.push(this.createCurrentSubnet),this.createCurrentSubnet="",this.subnetError=!1,this.checkSubnetsToShowButtons()}}removeSubnet(e){this.createSubnets.splice(e,1),this.checkSubnetsToShowButtons()}validateSubnet(e){this.subnetError=!1,e||(this.subnetErrorInfo=this.language["Invalid subnet"],this.subnetError=!0);let t=this.commonFunctionsService.trimSubnet(e);t?!this.commonFunctionsService.isValidSubnetV4(t)&&!this.commonFunctionsService.isValidSubnetV6(t)&&(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"]):(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"])}addRole(){this.existingRoleError=!1;let e,t=[];this.selectedRoles.forEach(i=>{if(this.addedRolesList.filter(e=>e._id===i._id).length>0)return this.existingRoleErrorInfo=`${i.username} - ${this.language["Role already added"]}`,void(this.existingRoleError=!0);e=this.rolesList.findIndex(e=>e._id===i._id),this.rolesList[e].disabled=!0,this.rolesList=[...this.rolesList],e=this.rolesItems.findIndex(e=>e._id===i._id),this.rolesItems[e].disabled=!0,this.rolesItems=[...this.rolesItems],t.push(i)}),!this.existingRoleError&&(this.selectedRoles=[],setTimeout(()=>{let e=[...this.addedRolesList,...t];this.addedRolesList=e,this.addedRolesName=this.getRoleNames(e);let i=this.addedRolesList.length-1;this.permissionProcess(this.addedRolesList[i]),this.highlightRow(this.addedRolesList[i]._id),this.isRerender=!0,this.rerender(),this.checkRoleChanged()},200))}deleteRole(e){this.deleteData=e,this.modalTitle=this.language["Delete Role"],this.modalInfo=`${e.name}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDeleteSecleted(){let e,t=this.deleteData;this.addedRolesList=this.addedRolesList.filter(e=>e._id!==t._id),e=this.rolesList.findIndex(e=>e._id===t._id),-1!==e&&(this.rolesList[e].disabled=!1,this.rolesList=[...this.rolesList]),e=this.rolesItems.findIndex(e=>e._id===t._id),-1!==e&&(this.rolesItems[e].disabled=!1,this.rolesItems=[...this.rolesItems]),this.closeModal(),this.deleteData=void 0,this.isRerender=!0,this.rerender(),0==this.addedRolesList.length?this.rolePermissions=[]:(this.permissionProcess(this.addedRolesList[this.addedRolesList.length-1]),this.highlightRow(this.addedRolesList[this.addedRolesList.length-1]._id)),this.addedRolesName=this.getRoleNames(this.addedRolesList),this.checkRoleChanged()}renderRolesTable(e){this.setTableOptions(),e&&"language"==e?(setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()},150),this.dataAvailable=!0):setTimeout(()=>{this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.dataAvailable=!0},150)}setTableOptions(){this.tableLanguageOptions()}changeDataForTable(){let e=[];for(let t of this.roles)this.rolesSelected.includes(t.value)&&e.push(t);return e}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}updateUsersDetails(){this.isLocalUser&&null!=this.editUserPassword&&""!=this.editUserPassword?this.updateUserPassword():this.updateUsersDetailsOthers()}updateUserPassword(){if(null==this.editUserCPassword||""==this.editUserCPassword||this.editUserPassword!==this.editUserCPassword)return this.cpasswordError=!0,void this.commonOrgService.pageScrollTop();let e={firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email,password:this.editUserPassword};this.loading=!0,this.passSubs=this.apiService.UpdatePasswordByUserId(e,this.user._id).subscribe(e=>{this.updateUsersDetailsOthers()},e=>{this.loading=!1,this.pageErrorHandle(e)})}updateUsersDetailsOthers(){const e=[];if(this.createSubnets.length){let t=[];t=this.createSubnets;const i=this.apiService.UpdateAclListByUserEmail(t,this.user.username,this.ORG_ID).pipe((0,l.U)(e=>e),(0,c.K)(e=>(0,a.of)(e)));e.push(i)}else{const t=this.apiService.DeleteAclListByUserEmail(this.user.username,this.ORG_ID).pipe((0,l.U)(e=>e),(0,c.K)(e=>(0,a.of)(e)));e.push(t)}if(this.loading=!0,this.addedRolesList.length){let t,i=[];this.addedRolesList.forEach(e=>{i.push(e._id)}),t=i.join(",");const s=this.apiService.UpdateRolesListByUserId(this.user._id,t).pipe((0,l.U)(e=>e),(0,c.K)(e=>(0,a.of)(e)));e.push(s)}else if(this.countOfRolesAtStart){const t=this.apiService.DeleteRolesListByUserId(this.user._id).pipe((0,l.U)(e=>e),(0,c.K)(e=>(0,a.of)(e)));e.push(t)}this.combineLatestUpdate=(0,o.aj)(e),this.makeParallelUpdateRequests()}makeParallelUpdateRequests(){this.parallelReqSubscribtionUpdate=this.combineLatestUpdate.subscribe(e=>{if(this.loading=!1,e.length)for(let t of e)if(null!=t&&null!=t.error)return this.loading=!1,void this.pageErrorHandle(t);this.successMessage()})}cancelUpdate(){this.goToUsersList()}goToUsersList(){this.router.navigate([`${this.MODULE}/users`])}permissionProcess(e){null!=e?"118"==e.apptype||"119"==e.apptype||"102"==e.apptype?(this.rolePermissions=this.commonOrgService.permProcessForUserDetailV21(e),this.displayName(e.apptype),this.subParentName(e.apptype)):"200"==e.apptype?(this.rolePermissions=this.commonOrgService.permProcessForUserDetailDeployment(e),this.subParentNameDeployment(e.apptype)):(this.rolePermissions=this.commonOrgService.permProcessForUserDetail(e),this.displayName(e.apptype),this.subParentName(e.apptype)):this.rolePermissions=[]}subParentNameDeployment(e){this.permissionAvailable=!1,this.permissionAvailableDeploy=!1,this.rolePermissions.forEach((t,i)=>{let s=t;const n=t.scopeName.split(".");let a=n[0]+"."+n[1]+"."+n[2];this.addRoleService.AllPemissionsData(e).subscribe(e=>{e.forEach(e=>{a==e.name&&(s.scopeDisplayName=e.displayName),this.rolePermissions.length-1==i&&(this.permissionAvailableDeploy=!0,this.permissionAvailable=!0)})})})}subParentName(e){this.permissionAvailable=!1;let t=[];this.addRoleService.AllPemissionsData(e).subscribe(e=>{t=e,t.forEach(e=>{this.rolePermissions.forEach((t,i)=>{t.permissions.forEach(t=>{t.scopeName===e.name&&(t.scopeDisplayName=e.displayName)}),this.rolePermissions.length-1==i&&(this.permissionAvailable=!0)})})})}displayName(e){let t,i=null;this.permissionAvailable=!1,this.addRoleService.AllPemissionsData(e).subscribe(e=>{t=e,this.rolePermissions.forEach((e,s)=>{t.forEach(t=>{e.scopeName===t.name&&(i=t,e.scopeDisplayName=i.displayName)}),this.rolePermissions.length-1==s&&(this.permissionAvailable=!0)})})}setUserInfo(){let e=this.user;this.userTitle=null!=e.firstName&&""!==e.firstName?null!=e.lastName?`${e.firstName} ${e.lastName}`:`${e.firstName}`:`${e.username}`}closeAlertRole(){this.existingRoleError=!1}closeAlert(){this.error=!1,this.success=!1}checkSubnetsToShowButtons(){this.isSubnetChanged=!1,this.createSubnets.length!==this.oldSubnets.length?(this.isSubnetChanged=!0,this.checkShowButtons()):this.createSubnets.length===this.oldSubnets.length&&this.createSubnets.length?(this.createSubnets.forEach(e=>{if(!this.oldSubnets.includes(e))return this.isSubnetChanged=!0,void this.checkShowButtons()}),this.checkShowButtons()):this.createSubnets.length===this.oldSubnets.length&&!this.oldSubnets.length&&(this.isSubnetChanged=!1,this.checkShowButtons())}checkRoleChanged(){this.isRoleChanged=!1,this.addedRolesName.length!==this.addedRolesNameAtStart.length?(this.isRoleChanged=!0,this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&this.addedRolesNameAtStart.length?(this.addedRolesName.forEach(e=>{if(!this.addedRolesNameAtStart.includes(e))return this.isRoleChanged=!0,void this.checkShowButtons()}),this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&!this.addedRolesNameAtStart.length&&(this.isRoleChanged=!1,this.checkShowButtons())}checkShowButtons(){this.saveCancelShow=!!(this.isPasswordChanged||this.isRoleChanged||this.isSubnetChanged)}hideSearch(){setTimeout(()=>{$("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),$("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},100)}displaySelectedRolePerms(e){if(e){let t=this.addedRolesList.filter(t=>t._id===e);t.length&&(this.selectedRoleId=t[0]._id,this.permissionProcess(t[0]),this.highlightRow(t[0]._id))}}successMessage(){this.closeAlert(),this.successInfo=this.language["User details saved successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.loading=!1,setTimeout(()=>{this.goToUsersList()},1500)}highlightRow(e){this.selectedRoleId=e,setTimeout(()=>{$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),$("#"+e).css("background-color","whitesmoke")},100)}highlightRowCallback(){this.selectedRoleId&&$("#"+this.selectedRoleId).css("background-color","whitesmoke")}checkSelected(){this.rolesList.forEach(e=>{let t=[];t=this.addedRolesList.filter(t=>e._id===t._id),t.length&&(e.disabled=!0)}),this.rolesList=[...this.rolesList],this.rolesItems.forEach(e=>{let t=[];t=this.addedRolesList.filter(t=>e._id===t._id),t.length&&(e.disabled=!0)}),this.rolesItems=[...this.rolesItems]}tableLanguageOptions(){"fr"==this.language.fileLanguage?(this.tableOptions.language=this.frTable,this.tableOptions.language.emptyTable="Aucune r\xf4le disponible pour l'utilisateur actuel."):"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&(delete this.tableOptions.language,this.tableOptions.language={emptyTable:"No role available for current user."})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}subnetChange(){this.createCurrentSubnet||(this.subnetError=!1)}updateAddedRolesName(e,t,i){if(i)this.addedRolesName=this.addedRolesName.filter(e=>e!==t);else{let t=[];e.forEach(e=>{t.push(e.name)}),this.addedRolesName=[...this.addedRolesName,...t]}}getRoleNames(e){let t=[];return e.forEach(e=>{t.push(e.name)}),t}toggleShowPassword(){this.showPassword=!this.showPassword}toggleShowPasswords(){this.showPasswords=!this.showPasswords}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(g.i),d.Y36(u.v),d.Y36(h.F0),d.Y36(p.d),d.Y36(m.q),d.Y36(f.t6),d.Y36(Z.FF),d.Y36(b.Dx),d.Y36(A.i),d.Y36(v.U))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-users-detail"]],viewQuery:function(e,t){if(1&e&&(d.Gf(q,7),d.Gf(s.G,5)),2&e){let e;d.iGM(e=d.CRH())&&(t.deleteModal=e.first),d.iGM(e=d.CRH())&&(t.dtElement=e.first)}},decls:64,vars:35,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","px-1"],[1,"container","my-3","pr-0"],[4,"ngIf"],[1,"row","my-2"],[1,"col-md-12","px-0"],[1,"error"],[1,"row","ccl-form","my-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"row","ccl-form"],[1,"col-md-4","pl-0",3,"ngClass"],["id","userACLSEL","type","text","name","createCurrentSubnet","placeholder","","autocomplete","new-password","trimSpace","",1,"add-subnet-input",3,"ngModel","ngModelChange","change","keyup","blur"],["id","subnet-error","class","ccl-error",4,"ngIf"],[1,"col-md-2","pl-0"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"click"],["_ngcontent-thh-c50","","aria-hidden","true",1,"fa","fa-plus"],[1,"row","my-2","pl-0"],[1,"ccl-title","col-md-12","pl-0"],[1,"col-md-4","pl-0"],["bindLabel","name","placeholder","",1,"w-100",3,"items","ngModel","multiple","ngModelOptions","searchable","disabled","ngModelChange"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"disabled","click"],[1,"row","my-4"],["class","w-100 alert alert-warning fade show",4,"ngIf"],[1,"col-md-12","px-0",3,"hidden"],["width","100%","datatable","",1,"table","row-border","hover",3,"dtOptions","dtTrigger"],[1,""],["class","user-details-row",3,"id",4,"ngFor","ngForOf"],["class","row my-2",4,"ngIf"],["class","row my-4 px-3",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,"row","my-3"],[1,"col-md-6","pl-0"],[1,"ccl-form","required","detail-form",3,"ngClass"],["for","Password",1,"ccl-title"],["id","editUserPassword","name","editUserPassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","editUserPassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],[1,"pwd-icon",3,"ngClass","click"],["id","editUserPassword-error","class","invalid",4,"ngIf"],[1,"col-md-6","pr-0"],[1,"ccl-form","detail-form",3,"ngClass"],["for","Confirm Password",1,"ccl-title"],["id","confirmpassword","name","confirmpassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","confirmpassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],["id","confirmpassword-error","class","state-error error",4,"ngIf"],["id","editUserPassword-error",1,"invalid"],["id","confirmpassword-error",1,"state-error","error"],[1,"mb-2"],[1,"add-subnet"],["role","button",1,"add-subnet-close-icon","primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],["id","subnet-error",1,"ccl-error"],[1,"w-100","alert","alert-warning","fade","show"],[1,"user-details-row",3,"id"],[1,"cursor-pointer"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","cursor-pointer","primary",3,"title","click"],[1,"ccl-title","col-md-12"],[1,"row","my-4","px-3"],[1,"col-md-12","pr-0"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],[1,"row","row-bg-grey"],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"box-of-permission","col-md-4"],[4,"ngFor","ngForOf"],[1,"custom-flex","ml-3"],[1,"custom-flex","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-12","text-right","px-0"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.YNc(1,w,5,1,"div",1),d.YNc(2,O,6,1,"div",2),d.YNc(3,S,4,1,"div",3),d.TgZ(4,"div",4),d.TgZ(5,"div",5),d.TgZ(6,"div",6),d._uU(7),d.qZA(),d.qZA(),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"a",9),d.NdJ("click",function(){return t.goToUsersList()}),d._UZ(11,"i",10),d._uU(12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",11),d.YNc(14,U,16,18,"form",12),d.TgZ(15,"div",13),d.TgZ(16,"div",14),d.TgZ(17,"span",6),d._uU(18),d.qZA(),d._UZ(19,"br"),d.TgZ(20,"span"),d._uU(21),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"div",4),d.TgZ(23,"span",6),d._uU(24),d.TgZ(25,"span",15),d._uU(26,"*"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(27,"div",16),d.TgZ(28,"div",7),d.YNc(29,D,5,1,"div",17),d.qZA(),d.qZA(),d.TgZ(30,"div",18),d.TgZ(31,"div",19),d.TgZ(32,"input",20),d.NdJ("ngModelChange",function(e){return t.createCurrentSubnet=e})("change",function(){return t.subnetChange()})("keyup",function(){return t.subnetChange()})("blur",function(){return t.removeUnwantedSpace("createCurrentSubnet",t.createCurrentSubnet)}),d.qZA(),d.YNc(33,N,2,1,"em",21),d.qZA(),d.TgZ(34,"div",22),d.TgZ(35,"button",23),d.NdJ("click",function(){return t.addSubnet()}),d._UZ(36,"i",24),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(37,"div",11),d.TgZ(38,"div",25),d.TgZ(39,"div",26),d._uU(40),d.qZA(),d.qZA(),d.TgZ(41,"div",18),d.TgZ(42,"div",27),d.TgZ(43,"ng-select",28),d.NdJ("ngModelChange",function(e){return t.selectedRoles=e}),d.qZA(),d.qZA(),d.TgZ(44,"div",22),d.TgZ(45,"button",29),d.NdJ("click",function(){return t.addRole()}),d._uU(46),d.qZA(),d.qZA(),d.qZA(),d.TgZ(47,"div",30),d.YNc(48,I,4,1,"div",31),d.TgZ(49,"div",32),d.TgZ(50,"table",33),d.TgZ(51,"thead",34),d.TgZ(52,"tr"),d.TgZ(53,"th"),d._uU(54),d.qZA(),d.TgZ(55,"th"),d._uU(56),d.qZA(),d.qZA(),d.qZA(),d.TgZ(57,"tbody"),d.YNc(58,E,5,3,"tr",35),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(59,F,3,1,"div",36),d.YNc(60,j,2,1,"div",12),d.YNc(61,V,6,2,"div",37),d.YNc(62,G,12,5,"ng-template",null,38,d.W1O),d.qZA()),2&e&&(d.xp6(1),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",t.error),d.xp6(1),d.Q6J("ngIf",t.success),d.xp6(4),d.Oqu(t.userTitle),d.xp6(5),d.hij(" ",t.language.backToUsersList,""),d.xp6(2),d.Q6J("ngIf",t.isLocalUser),d.xp6(4),d.Oqu(t.language.accessControlList),d.xp6(3),d.Oqu(t.language.aclInfo),d.xp6(3),d.hij("",t.language.addSubnets," "),d.xp6(5),d.Q6J("ngForOf",t.createSubnets),d.xp6(2),d.Q6J("ngClass",d.VKq(32,k,t.subnetError?"ccl-error":"")),d.xp6(1),d.Q6J("ngModel",t.createCurrentSubnet),d.xp6(1),d.Q6J("ngIf",t.subnetError),d.xp6(7),d.hij(" ",t.language.addDeleteRoles," "),d.xp6(3),d.Q6J("items",t.rolesItems)("ngModel",t.selectedRoles)("multiple",!0)("ngModelOptions",d.DdM(34,W))("searchable",!0)("disabled",!(null!=t.rolesItems&&t.rolesItems.length)),d.xp6(2),d.Q6J("disabled",!(null!=t.rolesItems&&t.rolesItems.length)),d.xp6(1),d.Oqu(t.language.add),d.xp6(2),d.Q6J("ngIf",t.existingRoleError),d.xp6(1),d.Q6J("hidden",!t.dataAvailable),d.xp6(1),d.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),d.xp6(4),d.Oqu(t.language.roles),d.xp6(2),d.Oqu(t.language.action),d.xp6(2),d.Q6J("ngForOf",t.addedRolesList),d.xp6(1),d.Q6J("ngIf",t.rolePermissions.length),d.xp6(1),d.Q6J("ngIf",t.permissionAvailable),d.xp6(1),d.Q6J("ngIf",t.saveCancelShow))},directives:[x.O5,x.sg,x.mk,T.Fj,_.f,T.JJ,T.On,C.w9,s.G,T._Y,T.JL,T.F,T.Q7,T.nD],styles:[".box-of-permission[_ngcontent-%COMP%]{padding:10px;border:.5px solid #ccc;vertical-align:middle}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.row-bg-grey[_ngcontent-%COMP%]{background-color:#d9dfe6}.detail-form[_ngcontent-%COMP%]{position:relative}.detail-form[_ngcontent-%COMP%]   .password-eye-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:12px;font-size:16px;z-index:1;color:gray;padding-top:4px}.pwd-icon[_ngcontent-%COMP%]{top:41px}"]}),e})()},66066:function(e,t,i){i.d(t,{b:function(){return D}});var s=i(23771),n=i(79765),a=i(92340),o=i(37716),r=i(49342),l=i(39895),c=i(53668),d=i(91841),g=i(38048),u=i(12664),h=i(7450),p=i(39075),m=i(38583);const f=["deleteModal"];function Z(e,t){if(1&e&&(o.TgZ(0,"div",8),o.TgZ(1,"div",9),o.TgZ(2,"div",10),o.TgZ(3,"span",11),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Oqu(e.language.Loading)}}function b(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",12),o.TgZ(1,"span",13),o._UZ(2,"img",14),o.qZA(),o.TgZ(3,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(4,"span"),o.qZA(),o._UZ(5,"div",16),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("innerHtml",e.errorInfo,o.oJD)}}function A(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",17),o.TgZ(1,"div",18),o.TgZ(2,"div",19),o._UZ(3,"img",20),o.qZA(),o.TgZ(4,"div",21),o._UZ(5,"span",22),o.qZA(),o.TgZ(6,"div",23),o.TgZ(7,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(8,"span"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("innerHtml",e.successInfo,o.oJD)}}function v(e,t){if(1&e&&(o.TgZ(0,"div",24),o.TgZ(1,"div",25),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.language.users)}}function x(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",38),o.TgZ(1,"button",39),o._uU(2," ... "),o.qZA(),o.TgZ(3,"div",40),o.TgZ(4,"a",41),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).openMFAForm()}),o.TgZ(5,"span",42),o._uU(6),o.qZA(),o._UZ(7,"img",43),o.qZA(),o.TgZ(8,"p",44),o._uU(9),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(6),o.Oqu(e.language["MFA Request Form"]),o.xp6(3),o.Oqu(e.language["To enable MFA for your organization, complete this MFA request form."])}}function T(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",45),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).addUser()}),o._uU(1),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(1),o.Oqu(e.language.addUsers)}}function _(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",26),o.TgZ(1,"div",27),o.TgZ(2,"div",28),o.TgZ(3,"div",29),o.YNc(4,x,10,2,"div",30),o.YNc(5,T,2,1,"button",31),o.qZA(),o.TgZ(6,"div",32),o.TgZ(7,"div",33),o.TgZ(8,"input",34,35),o.NdJ("keyup",function(t){return o.CHM(e),o.oxw().search(t.target.value)})("search",function(t){return o.CHM(e),o.oxw().search(t.target.value)}),o.qZA(),o.TgZ(10,"span",36),o.NdJ("click",function(){o.CHM(e);const t=o.MAs(9);return o.oxw().onSearchClearing(t)}),o._UZ(11,"img",37),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(4),o.Q6J("ngIf",e.showMFARequestForm),o.xp6(1),o.Q6J("ngIf",e.isCalixAdminModule||e.showAddUsers),o.xp6(3),o.s9C("placeholder",e.language.searchUsers),o.xp6(2),o.Q6J("hidden",!e.searchClearable)}}function C(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"button",58),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(4).gotoUserSecuredAccess(t)}),o._UZ(1,"img",59),o.qZA()}}function q(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"i",60),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw(4).deleteUser(t)}),o.qZA()}if(2&e){const e=o.oxw(5);o.s9C("title",e.language.delete)}}function w(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr",52),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td",53),o.YNc(10,C,2,0,"button",54),o.TgZ(11,"a",55),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw(4).gotoUserDetail(t)}),o._UZ(12,"i",56),o.qZA(),o.YNc(13,q,1,1,"i",57),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,i=o.oxw(4);o.s9C("id",e._id),o.xp6(2),o.Oqu(e.username),o.xp6(2),o.Oqu(e.email),o.xp6(2),o.Oqu(e.firstName),o.xp6(2),o.Oqu(e.lastName),o.xp6(2),o.Q6J("ngIf",i.isCalixAdminModule&&i.isLoggedUserSameOrganization),o.xp6(2),o.s9C("title",i.language.Edit),o.xp6(1),o.Q6J("ngIf",i.isCalixAdminModule||i.showAddUsers)}}function O(e,t){if(1&e&&(o.TgZ(0,"tbody"),o.YNc(1,w,14,8,"tr",51),o.qZA()),2&e){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.usersTableData)}}function S(e,t){if(1&e&&(o.TgZ(0,"tbody"),o.TgZ(1,"tr"),o.TgZ(2,"td",61),o._uU(3),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw(3);o.xp6(3),o.Oqu(e.language["No matching records found"])}}function y(e,t){if(1&e&&(o.TgZ(0,"div",47),o.TgZ(1,"table",48),o.TgZ(2,"thead",49),o.TgZ(3,"tr"),o.TgZ(4,"th"),o._uU(5),o.qZA(),o.TgZ(6,"th"),o._uU(7),o.qZA(),o.TgZ(8,"th"),o._uU(9),o.qZA(),o.TgZ(10,"th"),o._uU(11),o.qZA(),o.TgZ(12,"th"),o._uU(13),o.qZA(),o.qZA(),o.qZA(),o.YNc(14,O,2,1,"tbody",50),o.YNc(15,S,4,1,"tbody",50),o._UZ(16,"tbody"),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.Q6J("hidden",!e.dataAvailable),o.xp6(1),o.Q6J("dtOptions",e.dtOptions),o.xp6(4),o.Oqu(e.language.username),o.xp6(2),o.Oqu(e.language.emailAddress),o.xp6(2),o.Oqu(e.language.firstname),o.xp6(2),o.Oqu(e.language.lastname),o.xp6(2),o.Oqu(e.language.action),o.xp6(1),o.Q6J("ngIf",0!=(null==e.usersTableData?null:e.usersTableData.length)),o.xp6(1),o.Q6J("ngIf",0==(null==e.usersTableData?null:e.usersTableData.length)||"undefined"!=e.usersCount&&0===e.usersCount||"undefined"!=e.filterCount&&0===e.filterCount)}}function M(e,t){if(1&e&&(o.TgZ(0,"div",26),o.YNc(1,y,17,9,"div",46),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.countReceived)}}function k(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",62),o.TgZ(1,"h4",63),o._uU(2),o.qZA(),o.TgZ(3,"button",64),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeModal()}),o._UZ(4,"span",65),o.qZA(),o.qZA(),o.TgZ(5,"div",66),o._uU(6),o.qZA(),o.TgZ(7,"div",67),o.TgZ(8,"button",68),o.NdJ("click",function(){return o.CHM(e),o.oxw().confirmDeleteSecleted()}),o._uU(9),o.qZA(),o.TgZ(10,"button",69),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeModal()}),o._uU(11),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.modalTitle),o.xp6(4),o.hij(" ",e.modalInfo," "),o.xp6(3),o.Oqu(e.language.yes),o.xp6(2),o.Oqu(e.language.no)}}const U=i(91704);let D=(()=>{class e{constructor(e,t,i,s,o,r,l,c){this.commonOrgService=e,this.router=t,this.organizationApiService=i,this.http=s,this.sso=o,this.dialogService=r,this.translateService=l,this.titleService=c,this.pageAvailable=!1,this.usersTableData=[],this.dtTrigger=new n.xQ,this.isCalixAdminModule=!1,this.errorInfo="",this.successInfo="",this.MODULE="systemAdministration",this.filterCount=0,this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!0,dom:"tipr",columnDefs:[{targets:[3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{e._iRecordsDisplay<=e._iDisplayLength&&U(e.nTableWrapper).find("#users-table_last").addClass("disabled")}},this.isLoggedUserSameOrganization=!1,this.loader=!1,this.showAddUsers=!1,this.mfaRequestForm=a.N.EMBEDDING_LINK,this.showMFARequestForm=!1,this.searchClearable=!1;let d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.isCalixAdminModule=this.checkModule(d),this.showAddUsers=this.checkShowAddUsers(d),this.MODULE=this.sso.getRedirectModule(d),this.language=this.translateService.defualtLanguage,this.tableLanguageOptions(),this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.users} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.tableLanguageOptions(),this.reloadCurrentRoute()}),this.commonOrgService.currentPageAdder("users"),this.getUsersCount(),this.checkUserOrganization(),this.frTable=this.translateService.fr}ngOnInit(){this.titleService.setTitle(`${this.language.users} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.tableRender(),this.closeAlert(),this.tableLanguageOptions(),U("body").off("click",".languageContent ul li a"),U("body").on("click",".languageContent ul li a",()=>{this.changeTableStatusLanguage({_iDisplayStart:this.tableCounts.start,_iDisplayLength:this.tableCounts.displayCount,_iRecordsDisplay:this.tableCounts.displayed,_iRecordsTotal:this.tableCounts.total,oPreviousSearch:{sSearch:this.tableCounts.searchText}})}),this.showMFARequestForm=!("systemAdministration"===this.MODULE||this.sso.isSecureAccess())}ngOnDestroy(){U("body").off("click",".languageContent ul li a"),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.rolesDeleteSubs&&this.rolesDeleteSubs.unsubscribe(),this.userDeleteSubs&&this.userDeleteSubs.unsubscribe(),this.getCountSubs&&this.getCountSubs.unsubscribe(),this.getOrgInfoSubs&&this.getOrgInfoSubs.unsubscribe(),this.dtTrigger&&this.dtTrigger.unsubscribe(),this.tableAjaxSubscription&&this.tableAjaxSubscription.unsubscribe(),this.dest()}getUserOrgDetails(){this.getOrgInfoSubs=this.organizationApiService.orgInformation(this.ORG_ID).subscribe(e=>{this.sso.setAdminOrgInfo(e)})}getUsersCount(){this.getCountSubs=this.organizationApiService.UsersCountByOrgId(this.ORG_ID).subscribe(e=>{this.usersCount=e,this.countReceived=!0},e=>{this.pageErrorHandle(e),this.commonOrgService.pageScrollTop(),this.usersCount=void 0,this.countReceived=!0})}tableRender(){let e=`${a.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/users`;const t=this;this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!1,dom:"tipr",columnDefs:[{targets:[3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],ajax:(i,s)=>{this.sortBy=i.order[0].column,this.sortType=i.order[0].dir,t.callCount(i.search.value),t.tableAjaxSubscription=t.http.get(`${e}?offset=${i.start}&size=${i.length}&filter=${i.search.value}`).subscribe(e=>{t.usersTableData=this.sortData(e,t.sortBy,t.sortType),t.hideNoDataRow(),t.dataAvailable=!0,this.tableLanguageOptions(),setTimeout(()=>{s({recordsTotal:null!=t.usersCount?t.usersCount:0,recordsFiltered:null!=t.filterCount?t.filterCount:t.usersCount,data:[]})},100)},e=>{404==e.status?(t.usersTableData=[],t.hideNoDataRow(),t.dataAvailable=!0,this.tableLanguageOptions(),setTimeout(()=>{s({recordsTotal:null!=t.usersCount?t.usersCount:0,recordsFiltered:null!=t.filterCount?t.filterCount:t.usersCount,data:[]})},100)):(this.pageErrorHandle(e),this.dataAvailable=!0)})},drawCallback:e=>{e._iRecordsDisplay<=e._iDisplayLength&&U(e.nTableWrapper).find("#users-table_last").addClass("disabled")},columns:[{data:"username"},{data:"email"},{data:"firstName"},{data:"lastName"},{data:""}]},this.tableLanguageOptions()}callCount(e){this.http.get(`${a.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/users/_count?filter=${e}`).subscribe(e=>{this.filterCount=e})}hideNoDataRow(){setTimeout(()=>{U(".odd").css("display","none")},100)}search(e){var t,i;this.searchClearable=!!e.length,null===(i=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===i||i.then(t=>{t.search(e).draw()})}onSearchClearing(e){this.searchClearable=!1,e.value="",this.dtElement.dtInstance.then(t=>{t.search(e.value).draw()})}gotoUserDetail(e){sessionStorage.setItem("calixAdminUserDetail",JSON.stringify(e)),this.router.navigate([`${this.MODULE}/usersDetail`])}deleteUser(e){this.deleteData=e,this.modalTitle=this.language["Delete user"],this.modalInfo=`${this.language["Are you sure you want to delete"]} ${e.username}?`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDeleteSecleted(){this.closeModal(),this.rolesDeleteSubs=this.organizationApiService.DeleteRolesListByUserId(this.deleteData._id).subscribe(e=>{this.userDeleteSubs=this.organizationApiService.UserDelete(this.deleteData._id).subscribe(e=>{this.closeAlert(),this.successInfo=this.language["User deleted Successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.dataAvailable=!1,this.usersCount=void 0,this.filterCount=void 0,this.deleteData=void 0,this.getUsersCount(),this.redraw(),setTimeout(()=>{this.closeAlert()},1500)},e=>{this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()})},e=>{this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()})}redraw(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(e=>{e.draw()})}redrawnew(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(e=>{e.destroy(),this.tableRender()})}addUser(){this.router.navigate([`${this.MODULE}/addUser`])}hideSearch(){setTimeout(()=>{U("#users-list-table .dataTables_wrapper .dataTables_filter").css("display","none"),U("#users-list-table .dataTables_wrapper .dataTables_length").css("display","none")},50)}checkModule(e){return e.indexOf(`/${a.N.SYS_ADMIN_ROUTE}/`)>-1}checkShowAddUsers(e){let t=this.sso.getRoles(),i="";return i=this.sso.getOrgSFID(),!(this.sso.isSecureAccess()||!(e.indexOf("/organization-admin/")>-1)||void 0===i||""!=i&&null!=i||!t.includes("OrgAdmin"))}openDeleteModal(){document.getElementById("deleteModalHiddenButton").click()}closeAlert(){this.error=!1,this.success=!1}sortData(e,t,i){let s=[];return 0==t?s=this.sortByColumn(e,i,"username"):1==t?s=this.sortByColumn(e,i,"email"):2==t&&(s=this.sortByColumn(e,i,"firstName")),s}sortByColumn(e,t,i){return e.sort((e,s)=>{var n=e[i]?e[i].toUpperCase():"",a=s[i]?s[i].toUpperCase():"";if("asc"==t){if(n<a)return-1;if(n>a)return 1}else{if(n>a)return-1;if(n<a)return 1}return 0}),e}gotoUserSecuredAccess(e){sessionStorage.setItem("SecuredAccessUser",JSON.stringify(e)),this.router.navigate([`${this.MODULE}/UserSecuredAccess`])}checkUserOrganization(){let e=this.sso.getOrgId();this.isLoggedUserSameOrganization=this.ORG_ID==e}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}dest(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(e=>{e.destroy()})}changeTableStatusLanguage(e){const t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.trim(),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};const i="fr"==sessionStorage.getItem("defaultLanguage"),s=e.oPreviousSearch.sSearch.trim()?i?`(filtr\xe9es \xe0 partir des ${t.format(e._iRecordsTotal)} entr\xe9es totales)`:`(filtered from ${t.format(e._iRecordsTotal)} total entries)`:"",n=0==e._iRecordsDisplay?-1:e._iDisplayStart,a=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;U('div [role="status"]').text(i?`Affichage de ${t.format(n+1)} \xe0 ${t.format(a)} des ${t.format(e._iRecordsDisplay)} entr\xe9es ${s}`:`Showing ${t.format(n+1)} to ${t.format(a)} of ${t.format(e._iRecordsDisplay)} entries ${s}`),U(".first").text(i?"Le d\xe9but":"First"),U(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),U(".next").text(i?"Suivant":"Next"),U(".last").text(i?"Derni\xe8re":"Last")}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}openMFAForm(){window.open(this.mfaRequestForm,"_blank")}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.v),o.Y36(l.F0),o.Y36(c.F),o.Y36(d.eN),o.Y36(g.t6),o.Y36(u.FF),o.Y36(h.s),o.Y36(p.Dx))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-users"]],viewQuery:function(e,t){if(1&e&&(o.Gf(f,7),o.Gf(s.G,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.deleteModal=e.first),o.iGM(e=o.CRH())&&(t.dtElement=e.first)}},decls:10,vars:6,consts:[["id","scrollTopId",1,"container","position-relative"],["scrollTopId",""],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["class","row mb-3",4,"ngIf"],["class","row my-3",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper","align-items-center"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"row","mb-3"],[1,"col-md-12","ccl-admin-title"],[1,"row","my-3"],[1,"col-12"],[1,"d-flex","flex-wrap","w-100","justify-content-end"],[1,"mr-3","mb-2"],["class","dropdown dropleft d-inline-flex mb-2",4,"ngIf"],["class","btn-default primary d-inline-flex ml-3",3,"click",4,"ngIf"],[1,"search-min","mb-2"],[1,"ccl-form"],["type","text","name","searchbox",1,"input-sm",3,"placeholder","keyup","search"],["searchBar",""],[1,"clear-icon",3,"hidden","click"],["src","assets/img/close-icon.svg"],[1,"dropdown","dropleft","d-inline-flex","mb-2"],["type","button","id","userDropdownMenuBtn","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle","px-0"],["aria-labelledby","userDropdownMenuBtn",1,"dropdown-menu","mt-4","ml-5"],["target","_blank",1,"dropdown-link","d-block","text-center","mt-1","mb-2","cursor-pointer",3,"click"],[1,"mr-2"],["src","../../../assets/img/Preview-icon.svg",1,"ml-2"],[1,"text-center","mt-1"],[1,"btn-default","primary","d-inline-flex","ml-3",3,"click"],["class","col",3,"hidden",4,"ngIf"],[1,"col",3,"hidden"],["id","users-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,""],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"actions"],["class","btn-trans-icon",3,"click",4,"ngIf"],[3,"click"],[1,"fas","fa-pencil-alt","p-1","primary","cursor-pointer",3,"title"],["class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],[1,"btn-trans-icon",3,"click"],["src","assets/images/user_secure_access_icon.png"],[1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["colspan","5",1,"no-data-available"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,Z,5,1,"div",2),o.YNc(3,b,6,1,"div",3),o.YNc(4,A,9,1,"div",4),o.YNc(5,v,3,1,"div",5),o.YNc(6,_,12,4,"div",6),o.YNc(7,M,2,1,"div",6),o.qZA(),o.YNc(8,k,12,4,"ng-template",null,7,o.W1O)),2&e&&(o.xp6(2),o.Q6J("ngIf",!t.dataAvailable),o.xp6(1),o.Q6J("ngIf",t.error),o.xp6(1),o.Q6J("ngIf",t.success),o.xp6(1),o.Q6J("ngIf",t.pageAvailable),o.xp6(1),o.Q6J("ngIf",t.pageAvailable),o.xp6(1),o.Q6J("ngIf",t.pageAvailable))},directives:[m.O5,s.G,m.sg],styles:[".btn-trans-icon[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}.dropdown-link[_ngcontent-%COMP%]{color:#0279ff;font-weight:400;font-size:16px;line-height:20px}.dropleft[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:before{display:none!important}.dropdown-toggle[_ngcontent-%COMP%]{outline:none!important;border:none!important;background-color:transparent!important;box-shadow:none;font-size:24px;padding:0;line-height:16px;color:#4c4c4c}.dropdown-toggle[_ngcontent-%COMP%]:hover{color:#0279ff}.dropdown-toggle[_ngcontent-%COMP%]:active{color:#0054b2}.dropdown-toggle[_ngcontent-%COMP%]:focus{color:#0279ff}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 5px 15px #80808040;-webkit-box-shadow:0px 5px 15px rgba(128,128,128,.25);border-color:#0000000d!important;min-width:210px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]{width:100%!important;border-radius:0!important;text-align:left;padding:10px 25px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#edf5ff!important}.search-min[_ngcontent-%COMP%]{min-width:235px}.clear-icon[_ngcontent-%COMP%]{position:relative;right:-200px;top:-33px;cursor:pointer;width:13px!important}.clear-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px!important}#userDropdownMenuBtn[_ngcontent-%COMP%]{min-height:28px}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:30px;top:5px;cursor:pointer;width:12px}"]}),e})()},85656:function(e,t,i){i.d(t,{o:function(){return Z}});var s=i(37716),n=i(86451),a=i(7450),o=i(49342),r=i(39075),l=i(39895),c=i(38048),d=i(38583),g=i(3679);function u(e,t){if(1&e&&(s.TgZ(0,"div",20),s.TgZ(1,"div",21),s.TgZ(2,"div",22),s.TgZ(3,"span",23),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(4),s.Oqu(e.language.Loading)}}function h(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",24),s.TgZ(1,"span",25),s._UZ(2,"img",26),s.qZA(),s.TgZ(3,"button",27),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",28),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.language[e.errorInfo]||e.errorInfo,s.oJD)}}function p(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",29),s.TgZ(1,"span",30),s._UZ(2,"img",31),s.qZA(),s.TgZ(3,"button",27),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",28),s.qZA()}if(2&e){const e=s.oxw();s.xp6(5),s.Q6J("innerHtml",e.language[e.successInfo]||e.successInfo,s.oJD)}}function m(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"input",32),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().uploadfile=t}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("ngModel",e.uploadfile)("disabled",!0)}}function f(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"button",33),s.NdJ("click",function(){return s.CHM(e),s.oxw().fullImportUpload()}),s._uU(2),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.language.Upload)}}let Z=(()=>{class e{constructor(e,t,i,s,n,a){this.communityService=e,this.translateService=t,this.commonOrgService=i,this.titleService=s,this.router=n,this.sso=a,this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("USOC-Upload")}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language["USOC-Upload"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["USOC-Upload"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}fullImportUpload(){var e;this.loader=!0;let t=new FormData;t.append("uploadfile",this.file,null===(e=this.file)||void 0===e?void 0:e.name),this.uploadcsvFile=this.communityService.Uploadcsv(t).subscribe(e=>{this.loader=!1,this.success=!0,this.hideUpload=!1,this.error=!1,this.successInfo=`${this.uploadfile} has been uploaded successfully`},e=>{this.loader=!1,this.pageErrorHandle(e)})}GoInstruction(){window.open("http://community.calix.com/s/article/Updating-Service-Codes-for-Calix-Cloud","_blank")}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:504==e.status?"Gateway Timeout":503==e.status?"Service Temporarily Unavailable":this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.success=!1,this.commonOrgService.pageScrollTop()}closeAlert(){this.error=!1,this.success=!1}readURL(e){var t;this.file=e.target.files[0],this.uploadfile=null===(t=this.file)||void 0===t?void 0:t.name,this.hideUpload=!0,e.target.value=""}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(n.l),s.Y36(a.s),s.Y36(o.v),s.Y36(r.Dx),s.Y36(l.F0),s.Y36(c.t6))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-usoc-upload"]],decls:29,vars:10,consts:[[1,"contaniner","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"pl-1"],[3,"innerHtml"],[1,"f-size-16px","primary","pointer",3,"click"],["src","./assets/img/Preview-icon.svg"],[1,"col-md-5"],[1,"form-group"],["id","fullImportUpload-div",1,"ccl-form"],[1,""],["for","text",1,"col-md-3","pl-1"],["id","fullImportUpload","class","col-md-9 inp-disabled","name","text","type","text","data-toggle","tooltip","data-placement","top","title","Tooltip on top",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["for","logo",1,"primary","m-0","pointer","usoc-upload-button","btn-default","my-1","ml-1"],["type","file","accept",".csv","name","logo","required","","id","logo",1,"type-file",2,"display","none",3,"change"],["logo",""],[4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],["id","fullImportUpload","name","text","type","text","data-toggle","tooltip","data-placement","top","title","Tooltip on top",1,"col-md-9","inp-disabled",3,"ngModel","disabled","ngModelChange"],["type","button",1,"usoc-upload-button","btn-default","primary","ml-1",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,u,5,1,"div",1),s.YNc(2,h,6,1,"div",2),s.YNc(3,p,6,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div"),s.TgZ(7,"h4"),s._uU(8),s.qZA(),s.qZA(),s.TgZ(9,"p",6),s._UZ(10,"span",7),s.TgZ(11,"span",8),s.NdJ("click",function(){return t.GoInstruction()}),s._uU(12),s._UZ(13,"img",9),s.qZA(),s._uU(14,". "),s.qZA(),s.qZA(),s.TgZ(15,"div",10),s.TgZ(16,"form"),s.TgZ(17,"div",11),s.TgZ(18,"div",12),s.TgZ(19,"div",13),s.TgZ(20,"label",14),s._uU(21),s.qZA(),s.YNc(22,m,1,2,"input",15),s.qZA(),s.TgZ(23,"label",16),s.TgZ(24,"a"),s._uU(25),s.qZA(),s.qZA(),s.TgZ(26,"input",17,18),s.NdJ("change",function(e){return t.readURL(e)}),s.qZA(),s.qZA(),s.YNc(28,f,3,1,"div",19),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loader),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(5),s.hij(" ",t.language["USOC File Upload"],""),s.xp6(2),s.Q6J("innerHtml",t.language.usoc_file_upload,s.oJD),s.xp6(2),s.hij(" ",t.language.instructions," "),s.xp6(9),s.Oqu(t.language["CSV File"]),s.xp6(1),s.Q6J("ngIf",t.uploadfile),s.xp6(3),s.Oqu(t.language.Browse),s.xp6(3),s.Q6J("ngIf",t.uploadfile))},directives:[d.O5,g._Y,g.JL,g.F,g.Fj,g.JJ,g.On],styles:[".usoc-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px}input.inp-disabled[_ngcontent-%COMP%]:hover{cursor:not-allowed!important}.usoc-upload-button[_ngcontent-%COMP%]{position:relative}.usoc-upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;top:0;width:100%;height:100%;opacity:0}.usoc-upload-button[_ngcontent-%COMP%]:focus{outline:none!important}.card[_ngcontent-%COMP%]{border:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}.btn-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}[aria-expanded=true][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(180deg)}.csv-data-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:26px}.csv-data-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:disc}"]}),e})()},98953:function(e,t,i){i.d(t,{K:function(){return L}});var s=i(23771),n=i(79765),a=i(38583),o=i(37716),r=i(12664),l=i(82823),c=i(39895),d=i(38048),g=i(39075),u=i(49342),h=i(7450),p=i(20904),m=i(3679),f=i(74062);const Z=["deleteZipcodeFilterList"],b=["editZipcodeFilterName"],A=["addZipModal"],v=["delteZipcodes"],x=["editZipModal"];function T(e,t){if(1&e&&(o.TgZ(0,"div",34),o.TgZ(1,"div",35),o.TgZ(2,"span",36),o._uU(3),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(3),o.Oqu(e.language.Loading)}}function _(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",37),o.TgZ(1,"span",38),o._UZ(2,"img",39),o.qZA(),o.TgZ(3,"button",10),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(4,"span"),o.qZA(),o._UZ(5,"div",40),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("innerHtml",e.errorMessage,o.oJD)}}function C(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",37),o.TgZ(1,"span",38),o._UZ(2,"img",39),o.qZA(),o.TgZ(3,"button",10),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(4,"span"),o.qZA(),o._UZ(5,"div",40),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("innerHtml",e.requiredZipcodeName,o.oJD)}}function q(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"span",41),o.NdJ("click",function(){return o.CHM(e),o.oxw().clearText()}),o._UZ(1,"img",42),o.qZA()}}function w(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",43),o.TgZ(1,"button",44),o.NdJ("click",function(){return o.CHM(e),o.oxw().deleteEntryListZipcode()}),o._UZ(2,"i",45),o._uU(3),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(3),o.hij(" ",e.language["Delete Selection"]," ")}}function O(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td",46),o.TgZ(2,"div",21),o.TgZ(3,"input",47),o.NdJ("change",function(t){const i=o.CHM(e).index;return o.oxw().selectedOne(t.target.checked,i)})("ngModelChange",function(t){return o.CHM(e).$implicit.checked=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.qZA(),o.TgZ(8,"td"),o._uU(9),o.qZA(),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td"),o.TgZ(13,"div",48),o.TgZ(14,"a",49),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw().editZip(t)}),o._UZ(15,"i",50),o.qZA(),o.TgZ(16,"a",49),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw().deleteEntryListZipcode(t.id)}),o._UZ(17,"i",51),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,i=o.oxw();o.xp6(3),o.Q6J("ngModel",e.checked),o.xp6(2),o.Oqu(e.zipcode),o.xp6(2),o.Oqu(e.zipPlusFour),o.xp6(2),o.Oqu(i.traslateDate(e.createdTime)),o.xp6(2),o.Oqu(i.language[e.hasService]||e.hasService),o.xp6(4),o.s9C("title",i.language.edit),o.xp6(2),o.s9C("title",i.language.delete)}}function S(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",70),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(2),o.Oqu(e.language["Zip code should be 5 characters long, only numeric (no special characters)"])}}function y(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",70),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(2),o.Oqu(e.language["Zip+4 should be 4 characters long, only numeric (no special characters)"])}}function M(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",52),o.TgZ(1,"button",53),o.NdJ("click",function(){return o.CHM(e).$implicit.dismiss("Cross click")}),o._UZ(2,"span"),o.qZA(),o.qZA(),o.TgZ(3,"div",54),o.TgZ(4,"div",55),o._uU(5),o.qZA(),o.TgZ(6,"div",56),o.TgZ(7,"div",57),o.TgZ(8,"label"),o._uU(9),o.qZA(),o.TgZ(10,"input",58),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().addZipcode=t})("input",function(t){return o.CHM(e),o.oxw().onChangeAddZipcode(t.target.value)})("blur",function(){o.CHM(e);const t=o.oxw();return t.removeUnwantedSpace("addZipcode",t.addZipcode)}),o.qZA(),o.qZA(),o.TgZ(11,"div",59),o.TgZ(12,"label"),o._uU(13,"+4"),o.qZA(),o.TgZ(14,"input",60),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().addZipPlusfour=t})("input",function(t){return o.CHM(e),o.oxw().onChangeAddZipPlusFour(t.target.value)})("blur",function(){o.CHM(e);const t=o.oxw();return t.removeUnwantedSpace("addZipPlusfour",t.addZipPlusfour)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",61),o.TgZ(16,"label",62),o._uU(17),o.qZA(),o.TgZ(18,"div",63),o.TgZ(19,"input",64),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().hasServiceCheck=t}),o.qZA(),o.TgZ(20,"label",65),o._uU(21),o.qZA(),o.qZA(),o.qZA(),o.YNc(22,S,3,1,"div",66),o.YNc(23,y,3,1,"div",66),o.TgZ(24,"div",67),o.TgZ(25,"button",68),o.NdJ("click",function(){return o.CHM(e),o.oxw().postZipcodeToList()}),o._uU(26),o.qZA(),o.TgZ(27,"button",69),o.NdJ("click",function(){return o.CHM(e).$implicit.close("Close click")}),o._uU(28),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Oqu(e.language["Add ZIP"]),o.xp6(4),o.Oqu(e.language["ZIP Code"]),o.xp6(1),o.Q6J("ngModel",e.addZipcode),o.xp6(4),o.Q6J("ngModel",e.addZipPlusfour),o.xp6(3),o.Oqu(e.language["Has Service"]),o.xp6(2),o.Q6J("ngModel",e.hasServiceCheck),o.xp6(2),o.hij("",e.language.Yes," "),o.xp6(1),o.Q6J("ngIf",e.zipcodeNameError),o.xp6(1),o.Q6J("ngIf",e.zipcodePlusError),o.xp6(2),o.Q6J("disabled",!e.saveButtonShow),o.xp6(1),o.Oqu(e.language.Save),o.xp6(2),o.Oqu(e.language.Cancel)}}function k(e,t){if(1&e&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.AsE("",e.zipcode,"",e.zipPlusFour?"-"+e.zipPlusFour:""," ")}}function U(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",52),o.TgZ(1,"button",53),o.NdJ("click",function(){return o.CHM(e).$implicit.dismiss("Cross click")}),o._UZ(2,"span"),o.qZA(),o.qZA(),o.TgZ(3,"div",71),o.TgZ(4,"div",72),o.TgZ(5,"div",73),o._UZ(6,"img",74),o.qZA(),o.TgZ(7,"div"),o.TgZ(8,"div",75),o._uU(9),o.qZA(),o.TgZ(10,"ul",76),o.YNc(11,k,2,2,"li",27),o.qZA(),o.TgZ(12,"button",77),o.NdJ("click",function(){return o.CHM(e),o.oxw().deleteEntryZipcodes()}),o._uU(13),o.qZA(),o.TgZ(14,"button",78),o.NdJ("click",function(){return o.CHM(e).$implicit.close("Close click")}),o._uU(15),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(9),o.Oqu(e.language["Are you sure you want to delete the following ZIP Code(s)?"]),o.xp6(2),o.Q6J("ngForOf",e.deleteZipcodeZipPlusfour),o.xp6(2),o.Oqu(e.language.Delete),o.xp6(2),o.Oqu(e.language.Cancel)}}function D(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",70),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(2),o.Oqu(e.language["File name must only have alphanumeric characters and spaces"])}}function N(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",52),o.TgZ(1,"button",53),o.NdJ("click",function(){return o.CHM(e).$implicit.dismiss("Cross click")}),o._UZ(2,"span"),o.qZA(),o.qZA(),o.TgZ(3,"div",54),o.TgZ(4,"div",79),o._uU(5),o.qZA(),o.TgZ(6,"div",80),o.TgZ(7,"label"),o._uU(8),o.qZA(),o.TgZ(9,"input",81),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().zipcodeName=t})("input",function(t){return o.CHM(e),o.oxw().onChangeZipcodeFilterName(t.target.value)})("blur",function(){o.CHM(e);const t=o.oxw();return t.removeUnwantedSpace("zipcodeName",t.zipcodeName)}),o.qZA(),o.qZA(),o.YNc(10,D,3,1,"div",66),o.TgZ(11,"div",82),o.TgZ(12,"button",68),o.NdJ("click",function(){return o.CHM(e),o.oxw().updateZipcodeName()}),o._uU(13),o.qZA(),o.TgZ(14,"button",69),o.NdJ("click",function(){return o.CHM(e).$implicit.close("Close click")}),o._uU(15),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Oqu(e.language["ZIP Code Filter Name"]),o.xp6(3),o.Oqu(e.language.Name),o.xp6(1),o.Q6J("ngModel",e.zipcodeName),o.xp6(1),o.Q6J("ngIf",e.zipcodeNameError),o.xp6(2),o.Q6J("disabled",!e.saveButtonShow||!e.zipcodeName),o.xp6(1),o.Oqu(e.language["Save Changes"]),o.xp6(2),o.Oqu(e.language.Cancel)}}function I(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",52),o.TgZ(1,"button",53),o.NdJ("click",function(){return o.CHM(e).$implicit.dismiss("Cross click")}),o._UZ(2,"span"),o.qZA(),o.qZA(),o.TgZ(3,"div",71),o.TgZ(4,"div",72),o.TgZ(5,"div",73),o._UZ(6,"img",74),o.qZA(),o.TgZ(7,"div"),o.TgZ(8,"div",83),o._uU(9),o.qZA(),o.TgZ(10,"button",77),o.NdJ("click",function(){return o.CHM(e),o.oxw().deleteZipcodeName()}),o._uU(11),o.qZA(),o.TgZ(12,"button",78),o.NdJ("click",function(){return o.CHM(e).$implicit.close("Close click")}),o._uU(13),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(9),o.AsE("",e.language["Are you sure you want to delete"]," ",e.zipcodeName,"?"),o.xp6(2),o.Oqu(e.language.Delete),o.xp6(2),o.Oqu(e.language.Cancel)}}function E(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",70),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(2),o.Oqu(e.language["Zip code should be 5 characters long, only numeric (no special characters)"])}}function F(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",70),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(2),o.Oqu(e.language["Zip+4 should be 4 characters long, only numeric (no special characters)"])}}function P(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",52),o.TgZ(1,"button",53),o.NdJ("click",function(){return o.CHM(e).$implicit.dismiss("Cross click")}),o._UZ(2,"span"),o.qZA(),o.qZA(),o.TgZ(3,"div",54),o.TgZ(4,"div",79),o._uU(5),o.qZA(),o.TgZ(6,"div",56),o.TgZ(7,"div",57),o.TgZ(8,"label"),o._uU(9),o.qZA(),o.TgZ(10,"input",84),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().entryZipcode=t})("input",function(t){return o.CHM(e),o.oxw().onChangeEditZipcode(t.target.value)})("blur",function(){o.CHM(e);const t=o.oxw();return t.removeUnwantedSpace("entryZipcode",t.entryZipcode)}),o.qZA(),o.qZA(),o.TgZ(11,"div",59),o.TgZ(12,"label"),o._uU(13,"+4"),o.qZA(),o.TgZ(14,"input",85),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().entryPlusFour=t})("input",function(t){return o.CHM(e),o.oxw().onChangeEditZipPlusFour(t.target.value)})("blur",function(){o.CHM(e);const t=o.oxw();return t.removeUnwantedSpace("entryPlusFour",t.entryPlusFour)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",61),o.TgZ(16,"label",62),o._uU(17),o.qZA(),o.TgZ(18,"div",63),o.TgZ(19,"input",86),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().entryHasService=t})("change",function(t){return o.CHM(e),o.oxw().hasServiceChange(t.target.checked)}),o.qZA(),o.TgZ(20,"label",65),o._uU(21),o.qZA(),o.qZA(),o.qZA(),o.YNc(22,E,3,1,"div",66),o.YNc(23,F,3,1,"div",66),o.TgZ(24,"div",67),o.TgZ(25,"button",68),o.NdJ("click",function(){return o.CHM(e),o.oxw().updatedEntryZipcode()}),o._uU(26),o.qZA(),o.TgZ(27,"button",69),o.NdJ("click",function(){return o.CHM(e).$implicit.close("Close click")}),o._uU(28),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Oqu(e.language["Edit ZIP"]),o.xp6(4),o.Oqu(e.language["ZIP Code"]),o.xp6(1),o.Q6J("ngModel",e.entryZipcode),o.xp6(4),o.Q6J("ngModel",e.entryPlusFour),o.xp6(3),o.Oqu(e.language["Has Service"]),o.xp6(2),o.Q6J("ngModel",e.entryHasService),o.xp6(2),o.hij("",e.language.Yes," "),o.xp6(1),o.Q6J("ngIf",e.zipcodeNameError),o.xp6(1),o.Q6J("ngIf",e.zipcodePlusError),o.xp6(2),o.Q6J("disabled",!e.saveButtonShow||!e.entryZipcode),o.xp6(1),o.Oqu(e.language["Save Changes"]),o.xp6(2),o.Oqu(e.language.Cancel)}}let L=(()=>{class e{constructor(e,t,i,s,a,o,r,l){var c,d,g;this.dialogService=e,this.zipcodeService=t,this.router=i,this.sso=s,this.titleService=a,this.commonOrgService=o,this.translateService=r,this.common=l,this.listIds=[],this.allChecked=!1,this.deleteSelectionButtonShow=!1,this.loading=!1,this.errorShow=!1,this.saveButtonShow=!1,this.requiredZipcodeNameShow=!1,this.zipcodeListArrayResultError=!1,this.isRerender=!1,this.newArray=[],this.zipcodeNameError=!1,this.zipcodePlusError=!1,this.hasServiceCheck=!1,this.entryHasService=!1,this.previousEntryChecked=!1,this.zipCodeDtOptions={},this.dtTrigger=new n.xQ,this.MODULE=this.sso.getRedirectModule(this.router.url),this.titleService.setTitle(`Zip Code File Upload - ${"systemAdministration"===this.MODULE?"System Administration":"Administration"} - Calix Cloud`),this.commonOrgService.currentPageAdder("zip-code-list"),this.selectedListName=null===(g=null===(d=null===(c=this.router.getCurrentNavigation())||void 0===c?void 0:c.extras)||void 0===d?void 0:d.state)||void 0===g?void 0:g.fileName,this.selectedListName||this.redirectToZipcodeUpload()}ngOnInit(){this.zipCodeDtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,ordering:!0,order:[1,"asc"],searching:!0,dom:"tipr",retrieve:!0,processing:!0,columnDefs:[{targets:[0,3,4,5],orderable:!1}],drawCallback:e=>{this.Table=$("#example").DataTable(),this.info=this.Table.page.info(),this.newArray=this.Table.context[0].aiDisplay,this.table(e)}},this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.getZipcodeEntryList(),this.setTableOptions("language")}),this.getZipcodeEntryList(),this.tableLanguageOptions()}table(e){this.allChecked=!1,this.listIds=[];for(let t=0;t<e.aoData.length;t++)this.zipCodeDetailLists[t].checked=!1;this.deleteSelectionButtonShow=!1,this.deleteZipcodeZipPlusfour=[]}delModalOpen(e){this.closeAlert(),this.dialogService.open(this.deleteZipcodeFilterList,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-custom-delete-modal"}),this.zipcodeName=e}modalOpen(e){this.closeAlert(),this.dialogService.open(this.editZipcodeFilterName,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-default-modal"}),this.zipcodeName=e,this.zipcodeUpdatedName=e,this.saveButtonShow=!1,this.zipcodeNameError=!1,this.zipcodePlusError=!1}addZipcodeToList(){this.closeAlert(),this.dialogService.open(this.addZipModal,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"}),this.addZipcode="",this.addZipPlusfour="",this.hasServiceCheck=!1,this.saveButtonShow=!1,this.zipcodeNameError=!1,this.zipcodePlusError=!1}searchName(e){this.dtElement.dtInstance.then(t=>{t.search(e).draw()}),this.closeAlert()}clearText(){this.searchText="",this.searchName(this.searchText)}deleteEntryListZipcode(e){let t=e?[e]:this.listIds;this.dialogService.open(this.delteZipcodes,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"}),this.deleteZipcodeZipPlusfour=this.zipCodeDetailLists.filter(e=>-1!==t.indexOf(e.id))}selectAll(e){this.listIds=[],this.allChecked=e,this.deleteSelectionButtonShow=e,this.newArray.slice(this.info.start,this.info.end).forEach(t=>{this.zipCodeDetailLists[t].checked=e}),e?this.zipCodeDetailLists.map(e=>{e.checked&&this.listIds.push(e.id)}):this.listIds=[]}selectedOne(e,t){this.listIds=[];let i=this.info.end-this.info.start;this.zipCodeDetailLists[t].checked=e,this.zipCodeDetailLists.filter(e=>{1==e.checked&&this.listIds.push(e.id)}),this.allChecked=this.listIds.length==i,this.deleteSelectionButtonShow=this.listIds.length>0}getZipcodeEntryList(){this.loading=!0,this.zipcodeService.zipCodeEntryList(encodeURIComponent(this.selectedListName)).subscribe(e=>{this.zipcodeListArrayResultError=!1,this.isRerender?(this.rerender(),e&&(this.zipcodeListArrayResultError=!1,this.zipCodeDetailLists=e,this.isRerender=!0,this.dtTrigger.next())):(this.isRerender=!0,this.dtTrigger.next(),e&&(this.zipcodeListArrayResultError=!1,this.zipCodeDetailLists=e)),this.dtTrigger.next(),this.loading=!1,this.searchText&&this.searchName(this.searchText),e&&0==e.length&&0==this.zipCodeDetailLists.length&&(this.zipcodeListArrayResultError=!0,this.redirectToZipcodeUpload())},e=>{this.zipcodeListArrayResultError=!0,this.dtTrigger.next(),this.rerender(),this.loading=!1,this.errorShow=!0,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}postZipcodeToList(){this.closeDialogModal(),this.zipcodeService.addZipcodeEntryList({listName:this.selectedListName,zipcode:this.addZipcode,zipPlusFour:this.addZipPlusfour,hasService:this.hasServiceCheck?"Yes":"No"}).subscribe(e=>{e&&(this.addZipResponse=e,this.closeDialogModal(),this.getZipcodeEntryList())},e=>{this.closeDialogModal(),this.errorShow=!0,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}deleteEntryZipcodes(){var e;this.closeDialogModal();let t=null===(e=this.deleteZipcodeZipPlusfour)||void 0===e?void 0:e.map(e=>e.id).join();this.zipcodeService.deleteZipcodeEntryList(t).subscribe(e=>{e&&(this.deleteResponse=e,this.closeDialogModal(),this.getZipcodeEntryList()),this.allChecked=!1,this.deleteSelectionButtonShow=!1,this.listIds=[]},e=>{this.closeDialogModal(),this.allChecked=!1,this.listIds=[],this.deleteSelectionButtonShow=!1,this.errorShow=!0,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}redirectToZipcodeUpload(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/zip-code-upload"])}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}setTableOptions(e){this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.rerender()},200):this.loading=!1}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.zipCodeDtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.zipCodeDtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.zipCodeDtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.zipCodeDtOptions.language&&delete this.zipCodeDtOptions.language}editZip(e){this.previousValue=e.zipcode,this.previousZipPlusFourValue=e.zipPlusFour,this.previousEntryChecked="Yes"==e.hasService,this.dialogService.open(this.editZipModal,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"}),this.entryZipcodeId=e.id,this.entryZipcode=e.zipcode,this.entryPlusFour=e.zipPlusFour,this.entryHasService="Yes"==e.hasService,this.saveButtonShow=!1,this.zipcodeNameError=!1,this.zipcodePlusError=!1}closeAlert(){this.requiredZipcodeNameShow=!1,this.errorShow=!1}updateZipcodeName(){this.closeDialogModal(),this.zipcodeName||(this.requiredZipcodeNameShow=!0,this.requiredZipcodeName="ZipcodeName Required"),this.zipcodeService.modifyZipcode({listName:this.zipcodeUpdatedName,newListName:this.zipcodeName}).subscribe(e=>{e&&(this.updateZipNameResponse=e,this.selectedListName=this.zipcodeName,this.getZipcodeEntryList(),this.closeDialogModal())},e=>{this.closeDialogModal(),this.errorShow=!0,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}deleteZipcodeName(){this.closeDialogModal(),this.zipcodeService.removeZipcode(this.zipcodeName).subscribe(e=>{e&&(this.closeDialogModal(),this.redirectToZipcodeUpload())},e=>{this.closeDialogModal(),this.errorShow=!0,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}updatedEntryZipcode(){this.closeDialogModal(),this.zipcodeService.editZipcodeEntryList({id:this.entryZipcodeId,zipcode:this.entryZipcode,zipPlusFour:this.entryPlusFour,hasService:this.entryHasService?"Yes":"No"}).subscribe(e=>{e&&(this.updateEntryZipResponse=e,this.closeDialogModal(),this.getZipcodeEntryList())},e=>{this.closeDialogModal(),this.errorShow=!0,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}closeDialogModal(){this.dialogService.dismissAll()}onChangeEditZipcode(e){this.zipcodeNameError=!1,/^[0-9]+$/gm.test(e)&&5==e.length&&!this.zipcodePlusError&&e!=this.previousValue?this.saveButtonShow=!0:((this.entryZipcode&&!/^[0-9]+$/gm.test(e)&&!this.zipcodePlusError||this.entryZipcode.length<5&&this.entryZipcode.length)&&(this.zipcodeNameError=!0),this.saveButtonShow=!1),this.saveButtonShow=!(e==this.previousValue&&(this.entryPlusFour?this.entryPlusFour:null)==this.previousZipPlusFourValue||this.zipcodeNameError||this.zipcodePlusError)}onChangeEditZipPlusFour(e){this.zipcodePlusError=!1,e.length&&/^[0-9]+$/gm.test(e)&&4==e.length&&this.entryZipcode&&!this.zipcodeNameError?this.saveButtonShow=!0:((!/^[0-9]+$/gm.test(e)&&e.length||this.entryPlusFour.length<4&&this.entryPlusFour.length)&&(this.zipcodePlusError=!0),this.saveButtonShow=!1),0==this.entryPlusFour.length&&null!=this.previousZipPlusFourValue&&(this.saveButtonShow=!0),(e||null)==this.previousZipPlusFourValue&&this.entryHasService==this.previousEntryChecked&&this.entryZipcode==this.previousValue||this.zipcodePlusError||this.zipcodeNameError?this.saveButtonShow=!1:/^[0-9]+$/gm.test(this.entryZipcode)?this.saveButtonShow=!0:(this.saveButtonShow=!1,this.zipcodeNameError=!0)}onChangeZipcodeFilterName(e){0==e.length||e==this.zipcodeUpdatedName?(this.zipcodeNameError=!1,this.saveButtonShow=!1):/^[A-Za-z0-9 ]+$/gm.test(e)?(this.zipcodeNameError=!1,this.saveButtonShow=!0):(this.zipcodeNameError=!0,this.saveButtonShow=!1)}onChangeAddZipcode(e){this.zipcodeNameError=!1,/^[0-9]+$/gm.test(e)&&5==e.length&&!this.zipcodePlusError?this.saveButtonShow=!0:((this.addZipcode&&!/^[0-9]+$/gm.test(e)&&!this.zipcodePlusError||this.addZipcode.length<5&&this.addZipcode.length)&&(this.zipcodeNameError=!0),this.saveButtonShow=!1)}onChangeAddZipPlusFour(e){this.zipcodePlusError=!1,e.length&&/^[0-9]+$/gm.test(e)&&4==e.length&&this.addZipcode&&!this.zipcodeNameError?this.saveButtonShow=!0:((!/^[0-9]+$/gm.test(e)&&e.length||this.addZipPlusfour.length<4&&this.addZipPlusfour.length)&&(this.zipcodePlusError=!0),this.saveButtonShow=!1),0==this.addZipPlusfour.length&&(this.saveButtonShow=!0,this.onChangeAddZipcode(this.addZipcode))}hasServiceChange(e){this.saveButtonShow=!(this.entryZipcode==this.previousValue&&(this.entryPlusFour?this.entryPlusFour:null)==this.previousZipPlusFourValue&&e==this.previousEntryChecked||this.zipcodeNameError||this.zipcodePlusError||5!=this.entryZipcode.length)}errorHandler(e){return this.errorMessage=500==e.error.status?"Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?"An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status?"User Unauthorized":this.commonOrgService.pageErrorHandle(e),this.errorMessage}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}traslateDate(e){return(e=new a.uU("en-US").transform(e,"d MMMM, y").split(" "))[1]=e[1].slice(0,-1),e[1]=this.language[e[1]],`${e[0]} ${e[1]}, ${e[2]}`}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.FF),o.Y36(l.F),o.Y36(c.F0),o.Y36(d.t6),o.Y36(g.Dx),o.Y36(u.v),o.Y36(h.s),o.Y36(p.i))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-zip-code-entrylist"]],viewQuery:function(e,t){if(1&e&&(o.Gf(s.G,5),o.Gf(Z,5),o.Gf(b,5),o.Gf(A,5),o.Gf(v,5),o.Gf(x,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.dtElement=e.first),o.iGM(e=o.CRH())&&(t.deleteZipcodeFilterList=e.first),o.iGM(e=o.CRH())&&(t.editZipcodeFilterName=e.first),o.iGM(e=o.CRH())&&(t.addZipModal=e.first),o.iGM(e=o.CRH())&&(t.delteZipcodes=e.first),o.iGM(e=o.CRH())&&(t.editZipModal=e.first)}},decls:57,vars:22,consts:[[1,"position-relative"],["class","no-data",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"container"],[1,"row"],[1,"w-100","d-flex","flex-wrap","align-items-center","border-bottom-gray","pb-3"],[1,"ccl-admin-title","admin-title-grow","text-break"],[1,"btn-link","primary","mr-3",3,"click"],[1,"btn-dft","btn-default","mr-3",3,"click"],[1,"btn-default","primary","mr-4",3,"click"],["type","button",1,"close",3,"click"],[1,"table-filter","d-flex","flex-wrap","justify-content-between","align-items-center","w-100"],[1,"ccl-form"],[1,"d-flex","flex-wrap"],[1,"search-input","pr-4"],["type","text",3,"placeholder","ngModel","ngModelChange","input"],["class","pos-abs-right",3,"click",4,"ngIf"],["class","del-btn",4,"ngIf"],[1,"overflow-auto","w-100","mt-3"],["datatable","","id","example",1,"zip-code-table","table",3,"dtOptions","dtTrigger"],[1,"w-10","sorting_disabled","max-w-36"],[1,"form-check"],["type","checkbox",1,"checkbox",3,"checked","disabled","change"],[1,"w-20"],[1,"w-30"],[1,"w-10","th-del-action"],[3,"ngClass"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],["addZipModal",""],["delteZipcodes",""],["editZipcodeFilterName",""],["deleteZipcodeFilterList",""],["editZipModal",""],[1,"no-data"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex",3,"innerHtml"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"del-btn"],[1,"btn-default","primary",3,"click"],[1,"fa","fa-trash-o","mr-1"],[1,"max-w-36"],["type","checkbox",3,"ngModel","change","ngModelChange"],[1,"action-icons-row","text-center"],[1,"primary","cursor-pointer",3,"click"],[1,"fa","fa-pencil",3,"title"],[1,"fa","fa-trash-o",3,"title"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"px-4"],["id","add-zipcoe-modal-title",1,"ccl-admin-title","mb-4"],[1,"d-flex","w-100"],[1,"ccl-form","mb-2","min-110px","mr-2"],["type","text","pattern","/^[0-9]+$/gm","maxlength","5","min","0","id","add-zipcode","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[1,"ccl-form","mb-2","min-90px"],["type","text","pattern","/^[0-9]+$/gm","maxlength","4","min","0","id","add-zipplusfour","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[1,"mb-2","w-100"],[1,"d-block"],[1,"form-group","d-inline-flex","pl-20"],["type","checkbox","id","hasServiceCheck2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","hasServiceCheck2",1,"form-check-label"],[4,"ngIf"],[1,"mt-3","mb-3"],[1,"btn-default","primary","mr-3",3,"disabled","click"],[1,"btn-link","primary",3,"click"],[1,"mandatory-msg","mb-0"],[1,"zipcode-alert"],[1,"d-flex"],[1,"warn-icon-min"],["src","../../../assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title"],[1,"my-3","pl-4","pb-4"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-dft","btn-default",3,"click"],["id","edit-zip-modal-title",1,"ccl-admin-title","mb-4"],[1,"ccl-form","mb-2"],["type","text","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[1,"mt-5","mb-3"],[1,"ccl-Secondary-title","mb-3","text-break"],["type","text","pattern","/^[0-9]+$/gm","maxlength","5","min","0","id","entry-zipcode","trimSpace","",3,"ngModel","ngModelChange","input","blur"],["type","text","pattern","/^[0-9]+$/gm","maxlength","4","min","0","id","entry-zipplusfour","trimSpace","",3,"ngModel","ngModelChange","input","blur"],["type","checkbox","id","hasServiceCheck2",1,"form-check-input",3,"ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,T,4,1,"div",1),o.YNc(2,_,6,1,"div",2),o.YNc(3,C,6,1,"div",2),o.TgZ(4,"section"),o.TgZ(5,"div",3),o.TgZ(6,"div",4),o.TgZ(7,"div",5),o.TgZ(8,"div",6),o._uU(9),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return t.delModalOpen(t.selectedListName)}),o._uU(11),o.qZA(),o.TgZ(12,"button",8),o.NdJ("click",function(){return t.modalOpen(t.selectedListName)}),o._uU(13),o.qZA(),o.TgZ(14,"button",9),o.NdJ("click",function(){return t.addZipcodeToList()}),o._uU(15),o.qZA(),o.TgZ(16,"button",10),o.NdJ("click",function(){return t.redirectToZipcodeUpload()}),o._UZ(17,"span"),o.qZA(),o.qZA(),o.TgZ(18,"div",11),o.TgZ(19,"div",12),o.TgZ(20,"div",13),o.TgZ(21,"div",14),o.TgZ(22,"input",15),o.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)}),o.qZA(),o.YNc(23,q,2,0,"span",16),o.qZA(),o.qZA(),o.qZA(),o.YNc(24,w,4,1,"div",17),o.qZA(),o.TgZ(25,"div",18),o.TgZ(26,"table",19),o.TgZ(27,"thead"),o.TgZ(28,"tr"),o.TgZ(29,"th",20),o.TgZ(30,"div",21),o.TgZ(31,"input",22),o.NdJ("change",function(e){return t.selectAll(e.target.checked)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(32,"th",23),o._uU(33),o.qZA(),o.TgZ(34,"th",24),o._uU(35,"+4"),o.qZA(),o.TgZ(36,"th",23),o._uU(37),o.qZA(),o.TgZ(38,"th",23),o._uU(39),o.qZA(),o._UZ(40,"th",25),o.qZA(),o.qZA(),o.TgZ(41,"tbody",26),o.YNc(42,O,18,7,"tr",27),o.qZA(),o.TgZ(43,"tbody",26),o.TgZ(44,"tr"),o.TgZ(45,"td",28),o._uU(46),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(47,M,29,12,"ng-template",null,29,o.W1O),o.YNc(49,U,16,4,"ng-template",null,30,o.W1O),o.YNc(51,N,16,7,"ng-template",null,31,o.W1O),o.YNc(53,I,14,4,"ng-template",null,32,o.W1O),o.YNc(55,P,29,12,"ng-template",null,33,o.W1O)),2&e&&(o.xp6(1),o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngIf",t.errorShow),o.xp6(1),o.Q6J("ngIf",t.requiredZipcodeNameShow),o.xp6(6),o.hij(" ",t.selectedListName," "),o.xp6(2),o.hij(" ",t.language["Delete List"]," "),o.xp6(2),o.hij(" ",t.language["Edit Name"]," "),o.xp6(2),o.hij(" ",t.language["Add ZIP"]," "),o.xp6(7),o.s9C("placeholder",t.language.Search),o.Q6J("ngModel",t.searchText),o.xp6(1),o.Q6J("ngIf",t.searchText),o.xp6(1),o.Q6J("ngIf",t.deleteSelectionButtonShow),o.xp6(2),o.Q6J("dtOptions",t.zipCodeDtOptions)("dtTrigger",t.dtTrigger),o.xp6(5),o.Q6J("checked",t.allChecked)("disabled",0==(null==t.zipCodeDetailLists?null:t.zipCodeDetailLists.length)||0==(null==t.newArray?null:t.newArray.length)),o.xp6(2),o.Oqu(t.language["ZIP Code"]),o.xp6(4),o.Oqu(t.language["Date Added"]),o.xp6(2),o.Oqu(t.language.SERVICE),o.xp6(2),o.Q6J("ngClass",t.zipcodeListArrayResultError?"d-none":"table-row-group"),o.xp6(1),o.Q6J("ngForOf",t.zipCodeDetailLists),o.xp6(1),o.Q6J("ngClass",t.zipcodeListArrayResultError?"table-row-group":"d-none"),o.xp6(3),o.Oqu(t.language.nodata))},directives:[a.O5,m.Fj,m.JJ,m.On,s.G,a.mk,a.sg,m.Wl,m.c5,m.nD,f.f],styles:['.file-browse-btn[_ngcontent-%COMP%]{position:relative;cursor:pointer}.file-browse-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;font-size:0;opacity:0;cursor:pointer}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:264px;position:relative}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.del-btn[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.max-w-36[_ngcontent-%COMP%]{max-width:36px}.table-row-selected[_ngcontent-%COMP%]{background:#EDF5FF!important}.checkbox-intermediate[_ngcontent-%COMP%]{position:relative}.checkbox-intermediate[_ngcontent-%COMP%]:before{content:"_";position:absolute;left:0;width:100%;height:100%;color:#fff;z-index:1;text-align:center;font-weight:bold;top:-10px}.checkbox-intermediate[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;background:#0279ff;border-radius:3px;left:0;top:0}.th-del-action[_ngcontent-%COMP%]{min-width:100px;max-width:100px}.action-icons-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;min-width:38px;display:inline-block}  .admin-custom-delete-modal .modal-dialog{max-width:45.33%!important}  .admin-custom-delete-modal .modal-content{background:#FFF9F5!important}  .admin-default-modal .modal-dialog{max-width:41%!important}  .admin-modal-upload .modal-dialog{max-width:57%!important}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.zipcode-alert[_ngcontent-%COMP%]{padding:0 20px 15px}.zipcode-alert[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.admin-title-grow[_ngcontent-%COMP%]{flex-grow:1}.border-bottom-gray[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.w-10[_ngcontent-%COMP%]{width:10%!important}.w-20[_ngcontent-%COMP%]{width:20%!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.w-50[_ngcontent-%COMP%]{width:50%!important}.w-30[_ngcontent-%COMP%]{width:30%!important}.min-110px[_ngcontent-%COMP%]{width:110px}.min-90px[_ngcontent-%COMP%]{width:90px}.ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#F8F8FA}.table-uplod-csv[_ngcontent-%COMP%]{table-layout:fixed}.table-uplod-csv[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #EBEAEF;padding-top:7px;padding-bottom:7px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}.pl-20[_ngcontent-%COMP%]{padding-left:20px}']}),e})()},75495:function(e,t,i){i.d(t,{f:function(){return N}});var s=i(23771),n=i(79765),a=i(84487),o=i(38583),r=i(37716),l=i(7450),c=i(12664),d=i(82823),g=i(39895),u=i(38048),h=i(49342),p=i(39075),m=i(20904),f=i(3679),Z=i(74062);const b=["editZipcodeFilterName"],A=["deleteZipcodeFilterList"],v=["messageDialog"];function x(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",29),r.TgZ(1,"span",30),r._UZ(2,"img",31),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.TgZ(5,"button",32),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeAlert()}),r._UZ(6,"span"),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(4),r.Oqu(e.errorMessage)}}function T(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",33),r.TgZ(1,"span",34),r._UZ(2,"img",35),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.TgZ(5,"button",32),r.NdJ("click",function(){return r.CHM(e),r.oxw().closeAlert()}),r._UZ(6,"span"),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(4),r.Oqu(e.successMessage)}}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r.TgZ(1,"button",37),r.NdJ("click",function(){return r.CHM(e).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",38),r.TgZ(4,"div",39),r._uU(5),r.qZA(),r.TgZ(6,"div"),r.TgZ(7,"span"),r._uU(8),r.qZA(),r.qZA(),r.TgZ(9,"div",40),r.TgZ(10,"button",41),r.NdJ("click",function(){return r.CHM(e).$implicit.close("Close click")}),r._uU(11),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.hij(" ",e.language["Invalid file format"]," "),r.xp6(3),r.Oqu(e.modalMessage),r.xp6(3),r.Oqu(e.language.Okay)}}function C(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",42),r.NdJ("click",function(){return r.CHM(e),r.oxw().clearText()}),r._UZ(1,"img",43),r.qZA()}}function q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r.TgZ(2,"a",44),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().zipcodeFilter(t.listName)}),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.qZA(),r.TgZ(6,"td"),r.TgZ(7,"div",45),r.TgZ(8,"a",46),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().modalOpen(t.listName)}),r._UZ(9,"i",47),r.qZA(),r.TgZ(10,"a",46),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().delModalOpen(t.listName)}),r._UZ(11,"i",48),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw();r.xp6(3),r.Oqu(e.listName),r.xp6(2),r.Oqu(i.traslateDate(e.createdTime)),r.xp6(4),r.s9C("title",i.language.edit),r.xp6(2),r.s9C("title",i.language.delete)}}function w(e,t){if(1&e&&(r.TgZ(0,"div",49),r.TgZ(1,"div",50),r.TgZ(2,"span",51),r._uU(3),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(3),r.Oqu(e.language.Loading)}}function O(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"small",59),r._uU(2),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(2),r.Oqu(e.language["File name must only have alphanumeric characters and spaces"])}}function S(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r.TgZ(1,"button",37),r.NdJ("click",function(){return r.CHM(e).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",38),r.TgZ(4,"div",52),r._uU(5),r.qZA(),r.TgZ(6,"div",53),r.TgZ(7,"label"),r._uU(8),r.qZA(),r.TgZ(9,"input",54),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().zipcodeName=t})("input",function(t){return r.CHM(e),r.oxw().onChangeZipcodeFilterName(t.target.value)})("blur",function(){r.CHM(e);const t=r.oxw();return t.removeUnwantedSpace("zipcodeName",t.zipcodeName)}),r.qZA(),r.qZA(),r.YNc(10,O,3,1,"div",55),r.TgZ(11,"div",56),r.TgZ(12,"button",57),r.NdJ("click",function(){return r.CHM(e),r.oxw().updateZipcodeName()}),r._uU(13),r.qZA(),r.TgZ(14,"button",58),r.NdJ("click",function(){return r.CHM(e).$implicit.close("Close click")}),r._uU(15),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.Oqu(e.language["ZIP Code Filter Name"]),r.xp6(3),r.Oqu(e.language.Name),r.xp6(1),r.Q6J("ngModel",e.zipcodeName),r.xp6(1),r.Q6J("ngIf",e.zipcodeNameError),r.xp6(2),r.Q6J("disabled",!e.saveButtonShow),r.xp6(1),r.Oqu(e.language["Save Changes"]),r.xp6(2),r.Oqu(e.language.Cancel)}}function y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r.TgZ(1,"button",37),r.NdJ("click",function(){return r.CHM(e).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",60),r.TgZ(4,"div",61),r.TgZ(5,"div",62),r._UZ(6,"img",63),r.qZA(),r.TgZ(7,"div"),r.TgZ(8,"div",64),r._uU(9),r.qZA(),r.TgZ(10,"button",65),r.NdJ("click",function(){return r.CHM(e),r.oxw().deleteZipcodeName()}),r._uU(11),r.qZA(),r.TgZ(12,"button",66),r.NdJ("click",function(){return r.CHM(e).$implicit.close("Close click")}),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(9),r.AsE("",e.language["Are you sure you want to delete"]," ",e.zipcodeName,"?"),r.xp6(2),r.Oqu(e.language.Delete),r.xp6(2),r.Oqu(e.language.Cancel)}}function M(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r.TgZ(1,"button",37),r.NdJ("click",function(){return r.CHM(e).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",38),r.TgZ(4,"div",67),r._uU(5),r.qZA(),r.TgZ(6,"p"),r._uU(7),r.qZA(),r.TgZ(8,"div",5),r.TgZ(9,"div",68),r.TgZ(10,"div",69),r._uU(11),r.qZA(),r.TgZ(12,"table",70),r.TgZ(13,"tbody"),r.TgZ(14,"tr"),r.TgZ(15,"td"),r._uU(16,"32137"),r.qZA(),r._UZ(17,"td"),r._UZ(18,"td"),r.qZA(),r.TgZ(19,"tr"),r.TgZ(20,"td"),r._uU(21,"32007"),r.qZA(),r._UZ(22,"td"),r._UZ(23,"td"),r.qZA(),r.TgZ(24,"tr"),r.TgZ(25,"td"),r._uU(26,"32127"),r.qZA(),r._UZ(27,"td"),r._UZ(28,"td"),r.qZA(),r.TgZ(29,"tr"),r.TgZ(30,"td"),r._uU(31,"32140"),r.qZA(),r._UZ(32,"td"),r._UZ(33,"td"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"div",68),r.TgZ(35,"div",69),r._uU(36),r.qZA(),r.TgZ(37,"table",71),r.TgZ(38,"tbody"),r.TgZ(39,"tr"),r.TgZ(40,"td"),r._uU(41,"32137"),r.qZA(),r.TgZ(42,"td"),r._uU(43,"7563"),r.qZA(),r._UZ(44,"td"),r.qZA(),r.TgZ(45,"tr"),r.TgZ(46,"td"),r._uU(47,"32007"),r.qZA(),r.TgZ(48,"td"),r._uU(49,"7160"),r.qZA(),r._UZ(50,"td"),r.qZA(),r.TgZ(51,"tr"),r.TgZ(52,"td"),r._uU(53,"32127"),r.qZA(),r.TgZ(54,"td"),r._uU(55,"0112"),r.qZA(),r._UZ(56,"td"),r.qZA(),r.TgZ(57,"tr"),r.TgZ(58,"td"),r._uU(59,"32140"),r.qZA(),r.TgZ(60,"td"),r._uU(61,"9118"),r.qZA(),r._UZ(62,"td"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(63,"div",5),r.TgZ(64,"div",68),r.TgZ(65,"div",69),r._uU(66),r.qZA(),r.TgZ(67,"table",71),r.TgZ(68,"tbody"),r.TgZ(69,"tr"),r.TgZ(70,"td"),r._uU(71,"32137"),r.qZA(),r._UZ(72,"td"),r.TgZ(73,"td"),r._uU(74),r.qZA(),r.qZA(),r.TgZ(75,"tr"),r.TgZ(76,"td"),r._uU(77,"32007"),r.qZA(),r._UZ(78,"td"),r.TgZ(79,"td"),r._uU(80),r.qZA(),r.qZA(),r.TgZ(81,"tr"),r.TgZ(82,"td"),r._uU(83,"32127"),r.qZA(),r._UZ(84,"td"),r._UZ(85,"td"),r.qZA(),r.TgZ(86,"tr"),r.TgZ(87,"td"),r._uU(88,"32140"),r.qZA(),r._UZ(89,"td"),r.TgZ(90,"td"),r._uU(91),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(92,"div",68),r.TgZ(93,"div",69),r._uU(94),r.qZA(),r.TgZ(95,"table",71),r.TgZ(96,"tbody"),r.TgZ(97,"tr"),r.TgZ(98,"td"),r._uU(99,"32137"),r.qZA(),r.TgZ(100,"td"),r._uU(101,"7563"),r.qZA(),r.TgZ(102,"td"),r._uU(103),r.qZA(),r.qZA(),r.TgZ(104,"tr"),r.TgZ(105,"td"),r._uU(106,"32007"),r.qZA(),r.TgZ(107,"td"),r._uU(108,"7160"),r.qZA(),r.TgZ(109,"td"),r._uU(110),r.qZA(),r.qZA(),r.TgZ(111,"tr"),r.TgZ(112,"td"),r._uU(113,"32127"),r.qZA(),r._UZ(114,"td"),r._UZ(115,"td"),r.qZA(),r.TgZ(116,"tr"),r.TgZ(117,"td"),r._uU(118,"32140"),r.qZA(),r.TgZ(119,"td"),r._uU(120,"9118"),r.qZA(),r.TgZ(121,"td"),r._uU(122),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(123,"div",56),r.TgZ(124,"button",72),r._uU(125),r.TgZ(126,"input",73),r.NdJ("change",function(t){r.CHM(e);const i=r.oxw(),s=r.MAs(47);return i.fileSelected(t,s)}),r.qZA(),r.qZA(),r.TgZ(127,"button",58),r.NdJ("click",function(){return r.CHM(e).$implicit.close("Close click")}),r._uU(128),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.Oqu(e.language["Upload CSV"]),r.xp6(2),r.Oqu(e.language["Please use one of the following formats exactly as they are shown below:"]),r.xp6(4),r.Oqu(e.language["ZIP Code Example"]),r.xp6(25),r.Oqu(e.language["ZIP+4 Example"]),r.xp6(30),r.Oqu(e.language["ZIP Code & Service Example"]),r.xp6(8),r.Oqu(e.language.Yes),r.xp6(6),r.Oqu(e.language.No),r.xp6(11),r.Oqu(e.language.No),r.xp6(3),r.Oqu(e.language["ZIP+4 & Service Example"]),r.xp6(9),r.Oqu(e.language.Yes),r.xp6(7),r.Oqu(e.language.No),r.xp6(12),r.Oqu(e.language.No),r.xp6(3),r.hij("",e.language.Browse," "),r.xp6(1),r.s9C("title",e.language["no file chosen"]),r.xp6(2),r.Oqu(e.language.Cancel)}}function k(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",65),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).saveZipPlusCsv()}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.language.Save)}}function U(e,t){if(1&e&&(r.TgZ(0,"button",77),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.Oqu(e.language.Save)}}function D(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",36),r.TgZ(1,"button",37),r.NdJ("click",function(){return r.CHM(e).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",38),r.TgZ(4,"div",52),r._uU(5),r.qZA(),r.TgZ(6,"label"),r._uU(7),r.qZA(),r.TgZ(8,"div",53),r.TgZ(9,"input",74),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().listName=t})("blur",function(){r.CHM(e);const t=r.oxw();return t.removeUnwantedSpace("listName",t.listName)}),r.qZA(),r.qZA(),r.TgZ(10,"div",56),r.YNc(11,k,2,1,"button",75),r.YNc(12,U,2,1,"button",76),r.TgZ(13,"button",58),r.NdJ("click",function(){return r.CHM(e).$implicit.close("Close click")}),r._uU(14),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(5),r.Oqu(e.language["ZIP Code Filter Name"]),r.xp6(2),r.Oqu(e.language.Name),r.xp6(2),r.s9C("placeholder",e.language.Name),r.Q6J("ngModel",e.listName),r.xp6(2),r.Q6J("ngIf",e.listName.trim()),r.xp6(1),r.Q6J("ngIf",!e.listName.trim()),r.xp6(2),r.Oqu(e.language.Cancel)}}let N=(()=>{class e{constructor(e,t,i,s,a,o,r,l){this.translateService=e,this.dialogService=t,this.zipcodeService=i,this.router=s,this.sso=a,this.commonOrgService=o,this.titleService=r,this.common=l,this.loading=!1,this.errorMessage="",this.successMessage="",this.modalMessage="",this.saveButtonShow=!1,this.zipcodeArrayResultError=!1,this.isRerender=!1,this.listName="",this.zipData={list_name:"",zip_data:[]},this.zipCodeFilterOptions={},this.dtTrigger=new n.xQ,this.zipcodeNameError=!1,this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("zip-code-upload")}ngOnInit(){this.zipCodeFilterOptions={pagingType:"full_numbers",processing:!0,pageLength:10,lengthChange:!1,ordering:!0,searching:!0,dom:"tipr",retrieve:!0,columnDefs:[{targets:[1],orderable:!1},{targets:[-1],orderable:!1}]},this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.setTableOptions("language"),this.getZipcodeListNames(),this.titleService.setTitle(`${this.language["ZIP Code File Upload"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["ZIP Code File Upload"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.getZipcodeListNames(),this.tableLanguageOptions()}searchName(e){this.dtElement.dtInstance.then(t=>{t.search(e).draw()})}clearText(){this.searchText="",this.searchName(this.searchText)}getZipcodeListNames(){this.loading=!0,this.zipcodeService.zipCodeListNames().subscribe(e=>{this.zipcodeArrayResultError=!1,this.isRerender?(this.rerender(),e&&(this.zipcodeArrayResultError=!1,this.zipCodeFilterList=e,this.isRerender=!0,this.dtTrigger.next())):(this.isRerender=!0,this.dtTrigger.next(),e&&(this.zipcodeArrayResultError=!1,this.zipCodeFilterList=e)),this.dtTrigger.next(),this.loading=!1,this.searchText&&this.searchName(this.searchText),e&&0==e.length&&(this.zipcodeArrayResultError=!0)},e=>{this.zipcodeArrayResultError=!0,this.dtTrigger.next(),this.rerender(),this.loading=!1,this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}fileSelected(e,t){const i=e.target.files[0];if(this.closeAlert(),this.resetUploadCsv(),this.zipData={list_name:"",zip_data:[]},this.listName="",!i||![".csv",".xlsx",".txt"].some(e=>i.name.endsWith(e)))return this.modalMessage=this.language["Please upload a file with valid format (.csv, .xlsx, .txt)"],void this.messageModalOpen();let s=new FileReader;i.name.endsWith(".xlsx")?s.readAsArrayBuffer(i):s.readAsText(i),s.onload=()=>{let e=s.result,n=[];if(i.name.endsWith(".xlsx")){for(var o=new Uint8Array(e),r=new Array,l=0;l!=o.length;++l)r[l]=String.fromCharCode(o[l]);var c=r.join("");const t=a.read(c,{type:"binary"});n=a.utils.sheet_to_csv(t.Sheets[t.SheetNames[0]]).split(/\r\n|\n/).filter(e=>e)}else n=e.split(/\r\n|\n/).filter(e=>e);if(n.some(e=>e.split(",").filter(e=>e).length>3))return this.modalMessage=this.language["Please upload a file with valid format (contains more than 3 columns)"],void this.messageModalOpen();n.forEach(e=>{let t=e.split(",").filter(e=>e);if(t.length>2){const e=t[0].trim(),i=t[1].trim();let s=t[2].trim();"S\ufffd"==s&&(s=s.replace("\ufffd","\xed")),("Oui"==s||"Ja"==s||"S\xed"==s)&&(s="Yes"),("Non"==s||"Nein"==s||"No"==s)&&(s="No"),this.zipData.zip_data.push({zipcode:e,zipPlusFour:i,hasService:s})}else if(2===t.length){const e=t[0].trim();let i="",s="";/^\d+$/.test(t[1].trim())?i=t[1].trim():s=t[1].trim(),"S\ufffd"==s&&(s=s.replace("\ufffd","\xed")),("Oui"==s||"Ja"==s||"S\xed"==s)&&(s="Yes"),("Non"==s||"Nein"==s||"No"==s)&&(s="No"),this.zipData.zip_data.push({zipcode:e,zipPlusFour:i,hasService:s})}else if(1===t.length){const e=t[0].trim();this.zipData.zip_data.push({zipcode:e,zipPlusFour:"",hasService:""})}else this.zipData.zip_data.push({zipcode:"",zipPlusFour:"",hasService:""})}),this.listName=i.name.replace(/\.[^/.]+$/,""),this.dialogService.dismissAll(),this.uploadModalOpen(t)},e.target.value=""}resetUploadCsv(){this.listName="",this.zipData={list_name:"",zip_data:[]}}messageModalOpen(){this.dialogService.dismissAll(),this.dialogService.open(this.messageDialog,{backdrop:"static",keyboard:!1,windowClass:"message-modal"})}saveZipPlusCsv(){this.closeAlert(),this.zipData.list_name=this.listName.trim(),this.zipcodeService.saveZipPlusFile(this.zipData).subscribe(e=>{this.zipUploadCSVResponse=e,this.successMessage=this.language["CSV Uploaded Successfully"],this.errorMessage="",setTimeout(()=>this.zipcodeFilter(this.zipData.list_name),600)},e=>{this.successMessage="",this.errorMessage=e.error.errorDesc}),setTimeout(()=>this.dialogService.dismissAll(),500)}modalOpen(e){this.closeAlert(),this.dialogService.open(this.editZipcodeFilterName,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-default-modal"}),this.zipcodeName=e,this.zipcodeUpdatedName=e,this.saveButtonShow=!1,this.zipcodeNameError=!1}uploadModalOpen(e){this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-default-modal"})}delModalOpen(e){this.closeAlert(),this.dialogService.open(this.deleteZipcodeFilterList,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-custom-delete-modal"}),this.zipcodeName=e}uploadModal(e){this.closeAlert(),this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"})}updateZipcodeName(){this.closeDialogModal(),this.zipcodeName||(this.errorMessage="ZipcodeName Required"),this.zipcodeService.modifyZipcode({listName:this.zipcodeUpdatedName,newListName:this.zipcodeName}).subscribe(e=>{e&&(this.updateResponse=e,this.closeDialogModal(),this.selectedListName=this.zipcodeName,this.getZipcodeListNames())},e=>{this.closeDialogModal(),this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}deleteZipcodeName(){this.closeDialogModal(),this.zipcodeService.removeZipcode(this.zipcodeName).subscribe(e=>{e&&(this.deletResponse=e,this.closeDialogModal(),this.redirectToZipcodeUpload(),this.getZipcodeListNames())},e=>{this.closeDialogModal(),this.errorMessage=e.error.errorDesc?e.error.errorDesc:this.errorHandler(e)})}zipcodeFilter(e){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/zip-code-entrylist"],{state:{fileName:e}})}redirectToZipcodeUpload(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/zip-code-upload"])}closeAlert(){this.errorMessage="",this.successMessage="",this.modalMessage=""}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtTrigger&&this.dtTrigger.unsubscribe()}setTableOptions(e){this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.rerender()},200):this.loading=!1}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.zipCodeFilterOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.zipCodeFilterOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.zipCodeFilterOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&delete this.zipCodeFilterOptions.language}closeDialogModal(){this.dialogService.dismissAll()}onChangeZipcodeFilterName(e){0==e.length||e==this.zipcodeUpdatedName?(this.zipcodeNameError=!1,this.saveButtonShow=!1):/^[A-Za-z0-9 ]+$/gm.test(e)?(this.zipcodeNameError=!1,this.saveButtonShow=!0):(this.zipcodeNameError=!0,this.saveButtonShow=!1)}errorHandler(e){return this.errorMessage=500==e.error.status?"Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?"An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status?"User Unauthorized":this.commonOrgService.pageErrorHandle(e),this.errorMessage}validateFileName(e){this.listName=e.replace(/[^a-zA-Z0-9 ]+/g,"")}isValidZipCode(e){return/^\d{5}$/g.test(e)}isValidZipPlus(e){return/^\d{4}$/g.test(e)}isValidService(e){return/^(?:Yes|No)$/.test(e)}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}traslateDate(e){return(e=new o.uU("en-US").transform(e,"d MMMM, y").split(" "))[1]=e[1].slice(0,-1),e[1]=this.language[e[1]],`${e[0]} ${e[1]}, ${e[2]}`}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.s),r.Y36(c.FF),r.Y36(d.F),r.Y36(g.F0),r.Y36(u.t6),r.Y36(h.v),r.Y36(p.Dx),r.Y36(m.i))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-zip-code-upload"]],viewQuery:function(e,t){if(1&e&&(r.Gf(s.G,5),r.Gf(b,5),r.Gf(A,5),r.Gf(v,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.dtElement=e.first),r.iGM(e=r.CRH())&&(t.editZipcodeFilterName=e.first),r.iGM(e=r.CRH())&&(t.deleteZipcodeFilterList=e.first),r.iGM(e=r.CRH())&&(t.messageDialog=e.first)}},decls:48,vars:18,consts:[[1,"container","position-relative"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["messageDialog",""],[1,"container"],[1,"row"],[1,"w-100"],[1,"ccl-admin-title"],[1,"btn-default","primary","mt-1","mb-3",3,"click"],[1,"row",3,"hidden"],[1,"table-filter","d-flex","flex-wrap","justify-content-between","align-items-center","w-100"],[1,"ccl-form"],[1,"d-flex","flex-wrap"],[1,"search-input","pr-4"],["type","text","trimSpace","",3,"placeholder","ngModel","ngModelChange","input","blur"],["class","pos-abs-right",3,"click",4,"ngIf"],[1,"overflow-auto","w-100","my-3"],["datatable","",1,"zip-code-table","table",3,"dtOptions","dtTrigger"],[1,"w-50"],[1,"w-30","sorting_disabled"],[1,"th-del-action","w-20"],[3,"ngClass"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],["class","center-chart flex mt-60",4,"ngIf"],["editZipcodeFilterName",""],["deleteZipcodeFilterList",""],["zipCodeUploadModal",""],["uploadZipcodeFilterName",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"px-4"],[1,"ccl-admin-title","mb-4"],[1,"mt-3","mb-3"],[1,"btn-default","primary","float-right",3,"click"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"primary","cursor-pointer","text-decoration-none","text-break",3,"click"],[1,"action-icons-row","text-center"],[1,"primary","cursor-pointer",3,"click"],[1,"fa","fa-pencil",3,"title"],[1,"fa","fa-trash-o",3,"title"],[1,"center-chart","flex","mt-60"],[1,"spinner-border","text-primary","mt-60"],[1,"sr-only"],["id","edit-zip-modal-title",1,"ccl-admin-title","mb-4"],[1,"ccl-form","mb-2"],["type","text","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[4,"ngIf"],[1,"mt-5","mb-3"],[1,"btn-default","primary","mr-3",3,"disabled","click"],[1,"btn-link","primary",3,"click"],[1,"mandatory-msg"],[1,"zipcode-alert"],[1,"d-flex"],[1,"warn-icon-min"],["src","/assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title","mb-3","text-break"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-dft","btn-default",3,"click"],["id","upload-csv-modal-title",1,"ccl-admin-title","mb-2"],[1,"col-6"],[1,"mb-1"],["id","Upload-CSV-ZIPCode",1,"table","table-uplod-csv"],["id","Upload-CSV-ZIP",1,"table","table-uplod-csv"],["id","Browse-Zipcode-File",1,"btn-default","primary","file-browse-btn","mr-3"],["type","file","accept",".csv,.xlsx,.txt",3,"title","change"],["type","text","minlength","1","maxlength","500","trimSpace","",3,"placeholder","ngModel","ngModelChange","blur"],["class","btn-default primary mr-3",3,"click",4,"ngIf"],["class","btn-default primary mr-3","disabled","",4,"ngIf"],["disabled","",1,"btn-default","primary","mr-3"]],template:function(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"section"),r.TgZ(1,"div",0),r.YNc(2,x,7,1,"div",1),r.YNc(3,T,7,1,"div",2),r.YNc(4,_,12,3,"ng-template",null,3,r.W1O),r.qZA(),r.qZA(),r.TgZ(6,"section"),r.TgZ(7,"div",4),r.TgZ(8,"div",5),r.TgZ(9,"div",6),r.TgZ(10,"div",7),r._uU(11),r.qZA(),r.TgZ(12,"p"),r._uU(13),r.qZA(),r.TgZ(14,"button",8),r.NdJ("click",function(){r.CHM(e);const i=r.MAs(45);return t.uploadModal(i)}),r._uU(15),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",9),r.TgZ(17,"div",10),r.TgZ(18,"div",11),r.TgZ(19,"div",12),r.TgZ(20,"div",13),r.TgZ(21,"input",14),r.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)})("blur",function(){return t.removeUnwantedSpace("searchText",t.searchText)}),r.qZA(),r.YNc(22,C,2,0,"span",15),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(23,"div",16),r.TgZ(24,"table",17),r.TgZ(25,"thead"),r.TgZ(26,"tr"),r.TgZ(27,"th",18),r.TgZ(28,"span"),r._uU(29),r.qZA(),r.qZA(),r.TgZ(30,"th",19),r._uU(31),r.qZA(),r._UZ(32,"th",20),r.qZA(),r.qZA(),r.TgZ(33,"tbody",21),r.YNc(34,q,12,4,"tr",22),r.qZA(),r.TgZ(35,"tbody",21),r.TgZ(36,"tr"),r.TgZ(37,"td",23),r._uU(38),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(39,w,4,1,"div",24),r.qZA(),r.qZA(),r.YNc(40,S,16,7,"ng-template",null,25,r.W1O),r.YNc(42,y,14,4,"ng-template",null,26,r.W1O),r.YNc(44,M,129,15,"ng-template",null,27,r.W1O),r.YNc(46,D,15,7,"ng-template",null,28,r.W1O)}2&e&&(r.xp6(2),r.Q6J("ngIf",t.errorMessage),r.xp6(1),r.Q6J("ngIf",t.successMessage),r.xp6(8),r.hij(" ",t.language["ZIP Code Filter Lists"]," "),r.xp6(2),r.Oqu(t.language.ZIP_Code_Filter_Lists_Description),r.xp6(2),r.hij(" ",t.language["Upload CSV"]," "),r.xp6(1),r.Q6J("hidden",t.loading),r.xp6(5),r.s9C("placeholder",t.language.Search),r.Q6J("ngModel",t.searchText),r.xp6(1),r.Q6J("ngIf",t.searchText),r.xp6(2),r.Q6J("dtOptions",t.zipCodeFilterOptions)("dtTrigger",t.dtTrigger),r.xp6(5),r.Oqu(t.language.Name),r.xp6(2),r.Oqu(t.language["Date Added"]),r.xp6(2),r.Q6J("ngClass",t.zipcodeArrayResultError?"d-none":"table-row-group"),r.xp6(1),r.Q6J("ngForOf",t.zipCodeFilterList),r.xp6(1),r.Q6J("ngClass",t.zipcodeArrayResultError?"table-row-group":"d-none"),r.xp6(3),r.Oqu(t.language.nodata),r.xp6(1),r.Q6J("ngIf",t.loading))},directives:[o.O5,f.Fj,Z.f,f.JJ,f.On,s.G,o.mk,o.sg,f.wO,f.nD],styles:['.file-browse-btn[_ngcontent-%COMP%]{position:relative;cursor:pointer}.file-browse-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;font-size:0;opacity:0;cursor:pointer}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.del-btn[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.max-w-36[_ngcontent-%COMP%]{max-width:36px}.table-row-selected[_ngcontent-%COMP%]{background:#EDF5FF!important}.checkbox-intermediate[_ngcontent-%COMP%]{position:relative}.checkbox-intermediate[_ngcontent-%COMP%]:before{content:"_";position:absolute;left:0;width:100%;height:100%;color:#fff;z-index:1;text-align:center;font-weight:bold;top:-10px}.checkbox-intermediate[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;background:#0279ff;border-radius:3px;left:0;top:0}.th-del-action[_ngcontent-%COMP%]{min-width:100px;max-width:100px}.action-icons-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;min-width:38px;display:inline-block}  .admin-custom-delete-modal .modal-dialog{max-width:45.33%!important}  .admin-custom-delete-modal .modal-content{background:#FFF9F5!important}  .admin-default-modal .modal-dialog{max-width:41%!important}  .admin-modal-upload .modal-dialog{max-width:57%!important}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.zipcode-alert[_ngcontent-%COMP%]{padding:0 20px 15px}.zipcode-alert[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.admin-title-grow[_ngcontent-%COMP%]{flex-grow:1}.border-bottom-gray[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.w-10[_ngcontent-%COMP%]{width:10%!important}.w-20[_ngcontent-%COMP%]{width:20%!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.w-50[_ngcontent-%COMP%]{width:50%!important}.w-30[_ngcontent-%COMP%]{width:30%!important}.min-110px[_ngcontent-%COMP%]{width:110px}.min-90px[_ngcontent-%COMP%]{width:90px}.ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#F8F8FA}.table-uplod-csv[_ngcontent-%COMP%]{table-layout:fixed}.table-uplod-csv[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #EBEAEF;padding-top:7px;padding-bottom:7px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}']}),e})()}}]);