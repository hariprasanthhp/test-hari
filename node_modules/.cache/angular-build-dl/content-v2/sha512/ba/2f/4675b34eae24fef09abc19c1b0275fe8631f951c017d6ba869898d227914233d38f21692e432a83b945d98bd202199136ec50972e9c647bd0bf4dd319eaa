!function(){"use strict";function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,s=void 0,"symbol"==typeof(s=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?s:String(s)),n)}var a,s}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5555],{43721:function(e,t,i){i.d(t,{o:function(){return g}});var n,s=i(49457),r=i(84487),l=i(37716),c=i(7450),d="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",u=".xlsx",g=((n=function(){function e(t){var i=this;a(this,e),this.translateService=t,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){console.log("check"),i.language=e,i.isRerender=!0})}return o(e,[{key:"exportAsExcelFile",value:function(e,t){var i={Sheets:{data:r.utils.json_to_sheet(e)},SheetNames:["data"]},n=r.write(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(n,t)}},{key:"saveAsExcelFile",value:function(e,t){var i=new Blob([e],{type:d});s.saveAs(i,"Software_Versions_Report"+u)}},{key:"exportAsExcelFileUSR",value:function(e,t){var i={Sheets:{data:r.utils.json_to_sheet(e)},SheetNames:["data"]},n=r.write(i,{bookType:"xlsx",type:"array"});this.saveAsCSVFile(n,t)}},{key:"saveAsCSVFile",value:function(e,t){var i=new Blob([e],{type:"text/csv"});s.saveAs(i,"Unassociated_Systems_Report.csv")}},{key:"saveAsExcelFileUSR",value:function(e,t){var i=new Blob([e],{type:d});s.saveAs(i,"Unassociated_System_Report"+u)}},{key:"mobileValidator",value:function(e){return!(void 0!==e&&""!==e&&null!==e&&!isNaN(e))||10!==e.length}},{key:"emailValidator",value:function(e){return!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"stringValidator",value:function(e){return void 0===e||""===e||null===e}},{key:"numberValidator",value:function(e){return void 0===e||""===e||null===e||!!isNaN(e)}},{key:"thresholdValidator",value:function(e){return!(void 0!==e&&""!==e&&null!==e&&!isNaN(e)&&e>=30&&e<=999)}},{key:"resendValidator",value:function(e){return!(void 0!==e&&""!==e&&null!==e&&!isNaN(e)&&e>=45&&e<=365)}},{key:"confirmPasswordValidator",value:function(e,t){var i=this.stringValidator(e),n=this.stringValidator(t);return!(!i&&!n)||e!==t}},{key:"percentageValidator",value:function(e){return!(!e&&0!=e)&&(e>100||e<=0)}},{key:"durationValidator",value:function(e){return!(!e&&0!=e)&&(e>99||e<=0)}},{key:"stringValidatorWithCrossScriptAndErrorMsg",value:function(e){return void 0===e||""===e||null===e?{error:!0,errorMsg:void 0}:e.includes("<")||e.includes(">")?{error:!0,errorMsg:this.language.Script_not}:0==e.replaceAll(" ","").length?{error:!0,errorMsg:this.language.Valid_Text}:{error:!1,errorMsg:void 0}}},{key:"urlValidation",value:function(e){var t=this.isUrlValid(e);return e?0==t?{error:!0,errorMsg:this.language.Enter_valid_URL}:1==t?{error:!1,errorMsg:void 0}:void 0:this.stringValidatorWithCrossScriptAndErrorMsg(e)}},{key:"isUrlValid",value:function(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}},{key:"isValidIpV4Addr",value:function(e){return-1==e.indexOf("/")?/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e):/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(3[0-2]|[1-2][0-9]|[0-9]))$/.test(e)}},{key:"isValidIpV6Addr",value:function(e){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/g.test(e)}},{key:"isValidateIPHostName",value:function(e){return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(e)}},{key:"isValidSubnetV4",value:function(e){return/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))$/.test(e)}},{key:"isValidSubnetV6",value:function(e){return/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))$/.test(e)}}]),e}()).\u0275fac=function(e){return new(e||n)(l.LFG(c.s))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},828:function(e,i,n){n.d(i,{O:function(){return p}});var s,r=n(26215),l=n(40205),c=n(91841),d=n(92340),u=n(5304),g=n(37716),p=((s=function(){function e(t){a(this,e),this.httpClient=t,this.baseURL=d.N.faAdminURL,this.responseSubject=new r.X([]);var i=new c.WM({"Content-Type":"application/json"});this.options={headers:i}}return o(e,[{key:"DefinitionList",value:function(e){return this.httpClient.get("".concat(d.N.faAdminURL,"application?org-id=").concat(e))}},{key:"DefinitionAdd",value:function(e,t){return this.httpClient.post("".concat(d.N.faAdminURL,"application?org-id=").concat(t),e)}},{key:"exportDefinition",value:function(e){return this.httpClient.get("".concat(d.N.faAdminURL,"application?org-id=").concat(e))}},{key:"importDefinition",value:function(e,t){return this.httpClient.put("".concat(d.N.faAdminURL,"application?org-id=").concat(t),e)}},{key:"DefinitionDelete",value:function(e,t){return this.httpClient.delete("".concat(d.N.faAdminURL,"application/").concat(e,"?org-id=").concat(t))}},{key:"DefinitionUpdate",value:function(e,t,i){return this.httpClient.put("".concat(d.N.faAdminURL,"application/").concat(e,"?org-id=").concat(i),t)}},{key:"ApplicationGroupList",value:function(e){return this.httpClient.get("".concat(d.N.faAdminURL,"application-group?org-id=").concat(e,"&tenant-id=0"))}},{key:"ApplicationGroupNameList",value:function(e){return this.httpClient.get("".concat(d.N.faAdminURL,"application-group?org-id=").concat(e,"&tenant-id=0"))}},{key:"ApplicationGroupMmbrList",value:function(e,t){return this.httpClient.get("".concat(d.N.faAdminURL,"application-group-member/").concat(e,"?org-id=").concat(t,"&tenant-id=0"))}},{key:"ApplicationGroupMmbrCreate",value:function(e,t){return this.httpClient.post("".concat(d.N.faAdminURL,"application-group-member?org-id=").concat(t,"&tenant-id=0"),e)}},{key:"ApplicationGroupMmbrUpdate",value:function(e,t,i){return this.httpClient.put("".concat(d.N.faAdminURL,"application-group-member/").concat(t,"?org-id=").concat(i,"&tenant-id=0"),e)}},{key:"ApplicationGroupMmbrDelete",value:function(e,t){return this.httpClient.delete("".concat(d.N.faAdminURL,"application-group-member/").concat(e,"?org-id=").concat(t,"&tenant-id=0"))}},{key:"callRestApi",value:function(e,t){return this.httpClient.get("".concat(e),this.options).pipe((0,u.K)(this.handleError))}},{key:"handleError",value:function(e){return(0,l._)(e)}},{key:"trimAddress",value:function(e){for(e=e.trim();"."===e[e.length-1];)e=e.slice(0,-1);return e}},{key:"isSubnetV4",value:function(e){return 4==e.split("/")[0].split(".").length}},{key:"isSubnetV6",value:function(e){return 6==e.split("/")[0].split(".").length}},{key:"combineApps",value:function(e,i){var n=this;i=i||[];var a={},s=(e=(e=e||[]).map(function(e){return e.type="Local",e.v4s=n.splitData(e.addressesV4),e.v6s=n.splitData(e.addressesV6),e.newPorts=n.splitData(e.ports),a[e._id]=e.name,e})).length?e.slice(0):[];if(i&&i.length){var o=e.map(function(e){return e.name});i=i.map(function(t){var i=o.indexOf(t.name);return-1==i?(t.type="Global",t.v4s=n.splitData(t.addressesV4),t.v6s=n.splitData(t.addressesV6),t.newPorts=n.splitData(t.ports),a[t._id]=t.name):(t=e[i],s.splice(i,1),a[t._id]=t.name),t}),i=[].concat(t(i),t(s))}else e.length&&(i=e);return{allApps:i,appIds:a}}},{key:"splitData",value:function(e){var i=[];return""!=e&&null!=e&&(i=t(e.split(";"))),i}},{key:"ExportAppGroups",value:function(e){return this.httpClient.get("".concat(d.N.faAdminURL,"export/application-groups?org-id=").concat(e))}},{key:"ExportApps",value:function(e){return this.httpClient.get("".concat(d.N.faAdminURL,"export/applications?org-id=").concat(e))}},{key:"ImportApps",value:function(e,t){return this.httpClient.put("".concat(d.N.faAdminURL,"fa_import/applications?org-id=").concat(e),t)}},{key:"ImportAppGroups",value:function(e,t){return this.httpClient.put("".concat(d.N.faAdminURL,"fa_import/application-groups?org-id=").concat(e),t)}},{key:"portValidation",value:function(e){return!(null==(e=e?e.trim():"")||!/^()([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])((\/TCP)|(\/UDP))?$/gim.test(e))}},{key:"rPortValidation",value:function(e){return!(null==(e=e?e.trim():"")||!/^([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])(?:-(?:([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])))((\/TCP)|(\/UDP))$/gim.test(e)||!this.compareStartEndPorts(e))}},{key:"validateJoinPorts",value:function(e){return!(!(e=e?e.trim():"")||!/^([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5])(?:\|(?:([1-9]|[1-5]?[0-9]{2,4}|6[1-4][0-9]{3}|65[1-4][0-9]{2}|655[1-2][0-9]|6553[1-5]))){0,2}$/gim.test(e))}},{key:"compareStartEndPorts",value:function(e){var t=e.split("/")[0];if(t&&(null==t?void 0:t.length)){var i=t.split("-");if(i&&(null==i?void 0:i.length)&&2==(null==i?void 0:i.length)&&+i[1]>+i[0])return!0}return!1}},{key:"importDefinitionDPI",value:function(e,t){var i=new c.WM({"Content-Type":"application/xml"});return this.httpClient.put("".concat(d.N.faAdminURL,"uploadExtApplications?engine-id=").concat(t),e,{headers:i})}},{key:"importApplicationGroupDPI",value:function(e,t){var i=new c.WM({"Content-Type":"application/xml"});return this.httpClient.put("".concat(d.N.faAdminURL,"uploadExtApplicationsGroup?engine-id=").concat(t),e,{headers:i,responseType:"blob"})}},{key:"applicationsPatch",value:function(e,t,i){return this.httpClient.patch("".concat(d.N.faAdminURL,"application/").concat(e,"?org-id=").concat(i),t)}},{key:"getApplicationByDomainName",value:function(e,t){return this.httpClient.get("".concat(d.N.faAdminURL,"getExtApplicationByDomain/").concat(e))}},{key:"getApplicationAudit",value:function(e,t){return this.httpClient.put("".concat(d.N.faAdminURL,"getApplicationAudit"),e)}}]),e}()).\u0275fac=function(e){return new(e||s)(g.LFG(c.eN))},s.\u0275prov=g.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s)},404:function(e,i,n){n.d(i,{i:function(){return g}});var s,r=n(79765),l=n(25917),c=n(84487),d=n(37716),u=n(7450),g=((s=function(){function e(t){var i=this;a(this,e),this.translateService=t,this.showTabMenu$=new r.xQ,this.language=this.translateService.defualtLanguage,this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){i.language=e})}return o(e,[{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe()}},{key:"plusIcon",value:function(){}},{key:"delete",value:function(e){e.path.forEach(function(e){})}},{key:"inlineSave",value:function(){}},{key:"formatTodayDate",value:function(){var e=new Date,t=""+(e.getMonth()+1),i=""+e.getDate(),n=e.getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[n,t,i].join("-")}},{key:"generateExportName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.formatTodayDate();return t?"".concat(this.language[e],"_").concat(this.language.export_file,"_").concat(i):"".concat(e,"_export_").concat(i)}},{key:"onFileChange",value:function(e){var t=null,i=new FileReader,n=e.target.files[0];return i.onload=function(e){(t=c.read(i.result,{type:"binary"})).SheetNames.reduce(function(e,i){return e[i]=c.utils.sheet_to_json(t.Sheets[i]),e},{})},i.readAsBinaryString(n),(0,l.of)([])}},{key:"isValidIpV4Addr",value:function(e){return-1==e.indexOf("/")?/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e):/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(3[0-2]|[1-2][0-9]|[0-9]))$/.test(e)}},{key:"isValidIpV6Addr",value:function(e){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/g.test(e)}},{key:"isValidSubnetV4",value:function(e){return/^([0-9]{1,3}\.){3}[0-9]{1,3}(\/([0-9]|[1-2][0-9]|3[0-2]))$/.test(e)}},{key:"isValidSubnetV6",value:function(e){return/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))$/.test(e)}},{key:"trimSubnet",value:function(e){for(e=e.trim();"."===e[e.length-1];)e=e.slice(0,-1);return e}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"sortByColumn",value:function(e,t,i){return e.sort(function(e,n){var a=e[i]?e[i].toUpperCase():"",s=n[i]?n[i].toUpperCase():"";if("asc"==t){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0}),e}},{key:"sortByColumnAggregated",value:function(e,t,i){var n=this;return"aggregated"===i?(e.sort(function(e,i){var a=n.isAggregatedGroupAvail(e),s=n.isAggregatedGroupAvail(i);return"asc"==t?a===s?0:a?-1:1:a===s?0:a?1:-1}),e):this.sortByColumn(e,t,i)}},{key:"validateDomain",value:function(e){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/.test(e)}},{key:"validateURL",value:function(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)}},{key:"splitData",value:function(e,i){var n=[];return""!=e&&null!=e&&(n=t(e.split(i))),n}},{key:"validateIpORHost",value:function(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)+([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$/g.test(e)}},{key:"ValidateIpV4Addr",value:function(e){return/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(e)}},{key:"isAggregatedGroupAvail",value:function(e){return!(!e||!e.aggGroup)&&this.validateUUID(e.aggGroup)}},{key:"validateUUID",value:function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)&&"00000000-0000-0000-0000-000000000000"!=e}},{key:"columnNameFromKeys",value:function(e,t){return Object.keys(t).forEach(function(i){e[t[i]]=null!=e[i]?e[i]:"",delete e[i]}),e}},{key:"keysFromColumnName",value:function(e,t){return Object.keys(t).forEach(function(i){e[i]=null!=e[t[i]]?e[t[i]]:"",delete e[t[i]]}),e}}]),e}()).\u0275fac=function(e){return new(e||s)(d.LFG(u.s))},s.\u0275prov=d.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s)},7616:function(e,t,i){i.d(t,{v:function(){return c}});var n,s=i(92340),r=i(37716),l=i(91841),c=((n=function(){function e(t){a(this,e),this.httpClient=t,this.baseURL=s.N.faAdminURL,this.org_id=+localStorage.getItem("calix.org_id"),this.deviceDelete=this.baseURL+"device",this.export=this.baseURL+"export/",this.fa_import=this.baseURL+"fa_import/",this.deviceUpdate=this.baseURL+"device"}return o(e,[{key:"DeviceList",value:function(e){return this.httpClient.get(this.baseURL+"device?org-id=".concat(e))}},{key:"DeviceAdd",value:function(e,t){return this.httpClient.post(this.baseURL+"device?org-id=".concat(t),e)}},{key:"DeviceDelete",value:function(e,t){return this.httpClient.delete("".concat(this.deviceDelete,"/").concat(e,"?org-id=").concat(t))}},{key:"DeviceUpdate",value:function(e,t,i){return this.httpClient.put("".concat(this.deviceUpdate,"/").concat(e,"?org-id=").concat(i),t)}},{key:"Export",value:function(e,t){return this.httpClient.get("".concat(this.export).concat(e,"?org-id=").concat(t))}},{key:"Import",value:function(e,t,i){return this.httpClient.put("".concat(this.fa_import).concat(e,"?org-id=").concat(i),t)}},{key:"DeviceStatusList",value:function(e){return this.httpClient.get("".concat(s.N.FLOW_BASE_URL,"metrics/reports/fcr/devicestatus?OrgId=").concat(e))}},{key:"DeviceMatricSeries",value:function(e,t,i,n){var a="".concat(s.N.FLOW_BASE_URL,"metrics/timeseries?deviceIP=").concat(e,"&startTime=").concat(t,"&OrgId=").concat(n);return i&&(a="".concat(a,"&endTime=").concat(i)),this.httpClient.get(a)}},{key:"GetPacketTimingData",value:function(e,t){return this.httpClient.get("".concat(s.N.FLOW_BASE_URL,"metrics/timestats?deviceIP=").concat(e,"&OrgId=").concat(t))}}]),e}()).\u0275fac=function(e){return new(e||n)(r.LFG(l.eN))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},68895:function(e,i,n){n.d(i,{I:function(){return E}});var s=n(3679),r=n(23771),l=n(79765),c=n(39897),d=n(25917),u=n(35758),g=n(22759),p=n(87519),h=n(43190),f=n(5304),m=n(54395),v=n(92340),Z=n(37716),b=n(7450),A=n(91841),x=n(89097),T=n(39895),_=n(49342),C=n(39075),y=n(38583),k=n(86640);function q(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"p",18),Z._uU(1,"To grant 3rd party users access to your organization, please use this "),Z.TgZ(2,"a",19),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().openMFALink()}),Z._uU(3,"link "),Z._UZ(4,"img",20),Z._uU(5,"."),Z.qZA(),Z.qZA()}}function w(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",21),Z.TgZ(1,"span",22),Z._UZ(2,"img",23),Z.qZA(),Z.TgZ(3,"button",24),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",25),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.errorInfo,Z.oJD)}}function O(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",26),Z.TgZ(1,"button",24),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(2,"span"),Z.qZA(),Z._UZ(3,"div",27),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(3),Z.Q6J("innerHtml",n.successInfo,Z.oJD)}}function S(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"i",28),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().clearSearchInp()}),Z.qZA()}}function M(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"tr"),Z.TgZ(1,"td"),Z._uU(2),Z.qZA(),Z.TgZ(3,"td",36),Z.NdJ("click",function(){var e=Z.CHM(i).$implicit;return Z.oxw(2).gotoUserDetail(e)}),Z._UZ(4,"i",37),Z.qZA(),Z.qZA()}if(2&e){var n=t.$implicit,a=Z.oxw(2);Z.xp6(2),Z.Oqu(null==n?null:n.userName),Z.xp6(2),Z.s9C("title",a.language.Edit)}}function U(e,t){if(1&e&&(Z.TgZ(0,"tbody"),Z.TgZ(1,"tr"),Z.TgZ(2,"td",38),Z._uU(3),Z.qZA(),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw(2);Z.xp6(3),Z.Oqu(i.filterAndSearchFlag?i.language["No matching records found"]:i.language["No data available in table"])}}function D(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",29),Z.TgZ(1,"table",30),Z.TgZ(2,"thead",31),Z.TgZ(3,"tr"),Z.TgZ(4,"th"),Z._uU(5),Z.qZA(),Z.TgZ(6,"th"),Z._uU(7),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"tbody"),Z.YNc(9,M,5,2,"tr",32),Z.qZA(),Z.YNc(10,U,4,1,"tbody",33),Z.qZA(),Z.TgZ(11,"button",34),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().onSubmit()}),Z._uU(12),Z.qZA(),Z.TgZ(13,"button",35),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().clearForm()}),Z._uU(14),Z.qZA(),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(1),Z.Q6J("dtOptions",n.dtOptions),Z.xp6(4),Z.Oqu(n.language.userName),Z.xp6(2),Z.Oqu(n.language.Action),Z.xp6(2),Z.Q6J("ngForOf",n.userListForOrg),Z.xp6(1),Z.Q6J("ngIf",0==(null==n.userListForOrg?null:n.userListForOrg.length)||0==n.filterCount),Z.xp6(1),Z.Q6J("disabled",n.disableBtn),Z.xp6(1),Z.hij(" ",n.language.submit," "),Z.xp6(2),Z.hij(" ",n.language.Cancel," ")}}var N,I=function(){return{standalone:!0}},E=((N=function(){function e(t,i,n,o,r,c,d){a(this,e),this.translateService=t,this.fb=i,this.http=n,this.sso=o,this.router=r,this.commonOrgService=c,this.titleService=d,this.showMFALink=!1,this.searchUser=new s.NI(""),this.orgsList=[],this.userListForOrg=[],this.defaultRoleForOrg={},this.roles=[{_id:"",name:"Unassigned"}],this.MODULE="systemAdministration",this.accountsForm=this.fb.group({org:[null,[s.kI.required]],roleId:["",[s.kI.required]]}),this.disableBtn=!0,this.count=0,this.errorInfo="",this.successInfo="",this.dtOptions={},this.dtTrigger=new l.xQ,this.loading=!1,this.showTable=!1,this.defaultRoleId="",this.filterAndSearchFlag=!1}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t}),this.listenSearch(),this.commonOrgService.currentPageAdder("account-management");var t=this.router.url;this.ORG_ID=this.sso.getOrganizationID(t),this.MODULE=this.sso.getRedirectModule(t),"systemAdministration"===this.MODULE||this.sso.isSecureAccess()||(this.showMFALink=!0),this.titleService.setTitle("Account Management - ".concat("systemAdministration"===this.MODULE?"System Administration":"Administration"," - Calix Cloud")),this.accountsForm.valueChanges.subscribe(function(t){e.watchDisableBtn()}),this.formSub=this.accountsForm.get("org").valueChanges.pipe((0,p.x)(),(0,h.w)(function(t){return e.accountsForm.get("roleId").setValue(""),e.getUsersAndDefaultRoles(t)})).subscribe(function(t){var i,n,a,s,o;e.userListForOrg=[],e.defaultRoleId="",e.searchUser.setValue(""),(null===(i=null==t?void 0:t.users)||void 0===i?void 0:i["api-error"])||(e.count=t.users?t.users:0,e.filterCount=t.users?t.users:0,e.initLoad?e.redraw():(e.showTable=!0,e.getData())),(null===(n=null==t?void 0:t.defaultrole)||void 0===n?void 0:n["api-error"])||t.defaultrole&&(null===(a=Object.keys(t.defaultrole))||void 0===a?void 0:a.length)&&(e.accountsForm.get("roleId").setValue(null===(s=t.defaultrole)||void 0===s?void 0:s._id),e.defaultRoleId=null===(o=t.defaultrole)||void 0===o?void 0:o._id),e.watchDisableBtn()}),this.getOrgsAndRoles()}},{key:"getUsersAndDefaultRoles",value:function(e){var t=this;if(!e)return this.initLoad=!1,this.showTable=!1,this.accountsForm.get("roleId").setValue(""),new c.y(function(e){return e.next({users:[],defaultrole:{}})});var i={};return["users","defaultrole"].forEach(function(n){var a="".concat(v.N.API_BASE_URL,"federated/").concat(t.ORG_ID,"/grantee/").concat(e,"/").concat(n);"users"===n&&(a+="/_count"),i[n]=t.http.get(a).pipe((0,f.K)(function(e){return e["api-error"]=!0,t.showErrorMessage(t.commonOrgService.pageErrorHandle(e)),(0,d.of)(e)}))}),(0,u.D)(i)}},{key:"getOrgsAndRoles",value:function(){var e=this,i={};i.orgs=this.http.get("".concat(v.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee")).pipe((0,f.K)(function(e){return(0,d.of)(e)})),i.roles=this.http.get("".concat(v.N.API_BASE_URL,"admin/org/").concat(this.ORG_ID,"/roles")).pipe((0,f.K)(function(e){return(0,d.of)(e)})),this.orgsListSub=(0,u.D)(i).subscribe(function(i){e.orgsList=[].concat(t(e.orgsList),t(i.orgs)),e.roles=[].concat(t(e.roles),t(i.roles))})}},{key:"onSubmit",value:function(){var e=this;this.disableBtn=!0;var t=this.accountsForm.value,i=this.http.post("".concat(v.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee/").concat(t.org,"/defaultrole/").concat(t.roleId),{});this.defaultRoleId&&!this.accountsForm.get("roleId").value&&(i=this.http.delete("".concat(v.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee/").concat(t.org,"/defaultrole/").concat(this.defaultRoleId),{})),i.subscribe(function(t){e.successMessage()},function(t){e.showErrorMessage(e.commonOrgService.pageErrorHandle(t))},function(){e.disableBtn=!1})}},{key:"clearForm",value:function(){this.accountsForm.patchValue({org:null,roleId:""})}},{key:"successMessage",value:function(){this.closeAlert(),this.successInfo="Default role saved successfully",this.success=!0,this.commonOrgService.pageScrollTop()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"showErrorMessage",value:function(e){this.closeAlert(),this.errorInfo=e,this.error=!0}},{key:"gotoUserDetail",value:function(e){localStorage.setItem("calix.federated_grantee_orgId",this.accountsForm.get("org").value),sessionStorage.setItem("calixAdminUserDetail",JSON.stringify(e)),this.router.navigate(["".concat(this.MODULE,"/federated-user-details")])}},{key:"getData",value:function(e){var t=this;this.accountsForm.get("org").value?(this.showTable=!0,this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,lengthChange:!1,ordering:!1,dom:"tipr",ajax:function(e,i){var n="".concat(v.N.API_BASE_URL,"federated/").concat(t.ORG_ID,"/grantee/").concat(t.accountsForm.get("org").value,"/users?offset=").concat(e.start,"&size=").concat(e.length,"&filter=").concat(e.search.value);t.http.get(n).subscribe(function(e){t.userListForOrg=e||[],t.loading=!1,i({recordsTotal:t.count?t.count:0,recordsFiltered:null!=t.filterCount?t.filterCount:t.count,data:[]})},function(e){t.loading=!1,t.showErrorMessage(t.commonOrgService.pageErrorHandle(e)),i({recordsTotal:t.count?t.count:0,recordsFiltered:null!=t.filterCount?t.filterCount:t.count,data:[]})},function(){t.initLoad=!0})},drawCallback:function(e){}},this.tableLanguageOptions()):this.showTable=!1}},{key:"ngOnDestroy",value:function(){var e,t,i;null===(e=this.formSub)||void 0===e||e.unsubscribe(),null===(t=this.orgsListSub)||void 0===t||t.unsubscribe(),null===(i=this.searchSub)||void 0===i||i.unsubscribe()}},{key:"tableLanguageOptions",value:function(){"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"clearSearchInp",value:function(){this.searchUser.setValue(""),this.subscribeCount("")}},{key:"getCount",value:function(e){var t=this,i="".concat(v.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee/").concat(this.accountsForm.get("org").value,"/users/_count");return e&&(i+="?filter=".concat(e)),this.filterAndSearchFlag=!0,this.http.get(i).pipe((0,f.K)(function(e){return e["api-error"]=!0,t.showErrorMessage(t.commonOrgService.pageErrorHandle(e)),(0,d.of)(e)}))}},{key:"subscribeCount",value:function(e){var t=this;this.getCount(e).subscribe(function(e){(null==e?void 0:e["api-error"])||(t.count=e,t.filterCount=e,t.redraw())})}},{key:"listenSearch",value:function(){var e=this;this.searchSub=(0,g.R)(document.getElementById("search-user"),"keyup").pipe((0,m.b)(200),(0,p.x)(),(0,h.w)(function(t){return e.userListForOrg=[],e.getCount(t.target.value)})).subscribe(function(t){(null==t?void 0:t["api-error"])||(e.filterCount=t,e.redraw())})}},{key:"watchDisableBtn",value:function(){this.disableBtn=!(this.defaultRoleId&&!this.accountsForm.get("roleId").value||this.accountsForm.valid)}},{key:"redraw",value:function(){var e=this;!this.accountsForm.get("org").value||this.dtElement.dtInstance.then(function(t){t.search(e.searchUser.value).draw()})}},{key:"openMFALink",value:function(){window.open(v.N.EMBEDDING_LINK,"_blank")}},{key:"tableRerender",value:function(){var e=this;this.accountsForm.valueChanges.subscribe(function(t){t.org&&(e.filterAndSearchFlag=!1,e.dtTrigger.next())})}}]),e}()).\u0275fac=function(e){return new(e||N)(Z.Y36(b.s),Z.Y36(s.qu),Z.Y36(A.eN),Z.Y36(x.t6),Z.Y36(T.F0),Z.Y36(_.v),Z.Y36(C.Dx))},N.\u0275cmp=Z.Xpm({type:N,selectors:[["app-account-management"]],viewQuery:function(e,t){var i;1&e&&Z.Gf(r.G,5),2&e&&Z.iGM(i=Z.CRH())&&(t.dtElement=i.first)},decls:27,vars:20,consts:[[1,"row","my-3"],[1,"col-md-12"],[1,"ccl-admin-title"],["class","management-link",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"col-md-4","offset-md-0"],[3,"formGroup"],[1,"form-group","ccl-form"],["for","inputPassword4"],[1,"required-field"],["formControlName","org","bindLabel","orgName","bindValue","orgId","placeholder","Select",3,"items","clearable","ngModelOptions","notFoundText","change"],["formControlName","roleId","bindLabel","name","bindValue","_id","placeholder","Accounts",3,"items","clearable","ngModelOptions","notFoundText"],[1,"row","col-md-3","ccl-form","mt-4","position-relative","px-0",3,"hidden"],["id","search-user",1,"ccl-input",3,"placeholder","formControl"],["class","search-close fas fa-times",3,"click",4,"ngIf"],[1,"row"],["class","col-md-8",4,"ngIf"],[1,"management-link"],[1,"cursor-pointer",3,"click"],["src","../../../assets/img/External Link-blue.svg","alt",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,"search-close","fas","fa-times",3,"click"],[1,"col-md-8"],["id","add-role-users","width","100%","datatable","",1,"table","table-sm","row-border","w-100",3,"dtOptions"],[1,"header-color"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","add-call-home",1,"btn-default","transparant","px-3","m-2",3,"click"],[1,"actions",3,"click"],[1,"fas","fa-pencil-alt","p-1","primary","cursor-pointer",3,"title"],["colspan","5",1,"no-data-available"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.TgZ(1,"div",1),Z.TgZ(2,"div",2),Z._uU(3),Z.qZA(),Z.YNc(4,q,6,0,"p",3),Z.qZA(),Z.qZA(),Z.YNc(5,w,6,1,"div",4),Z.YNc(6,O,4,1,"div",5),Z.TgZ(7,"div",0),Z.TgZ(8,"div",6),Z.TgZ(9,"form",7),Z.TgZ(10,"div",8),Z.TgZ(11,"label",9),Z._uU(12,"Select an Account "),Z.TgZ(13,"span",10),Z._uU(14,"*"),Z.qZA(),Z.qZA(),Z.TgZ(15,"ng-select",11),Z.NdJ("change",function(){return t.tableRerender()}),Z.qZA(),Z.qZA(),Z.TgZ(16,"div",8),Z.TgZ(17,"label",9),Z._uU(18,"Default Role "),Z.TgZ(19,"span",10),Z._uU(20,"*"),Z.qZA(),Z.qZA(),Z._UZ(21,"ng-select",12),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"div",13),Z._UZ(23,"input",14),Z.YNc(24,S,1,0,"i",15),Z.qZA(),Z.TgZ(25,"div",16),Z.YNc(26,D,15,8,"div",17),Z.qZA()),2&e&&(Z.xp6(3),Z.Oqu(t.language["Account Management"]),Z.xp6(1),Z.Q6J("ngIf",t.showMFALink),Z.xp6(1),Z.Q6J("ngIf",t.error),Z.xp6(1),Z.Q6J("ngIf",t.success),Z.xp6(3),Z.Q6J("formGroup",t.accountsForm),Z.xp6(6),Z.s9C("notFoundText",t.language.noItemsFound),Z.Q6J("items",t.orgsList)("clearable",!1)("ngModelOptions",Z.DdM(18,I)),Z.xp6(6),Z.s9C("notFoundText",t.language.noItemsFound),Z.Q6J("items",t.roles)("clearable",!1)("ngModelOptions",Z.DdM(19,I)),Z.xp6(1),Z.Q6J("hidden",!t.showTable),Z.xp6(1),Z.s9C("placeholder",t.language.searchUsers),Z.Q6J("formControl",t.searchUser),Z.xp6(1),Z.Q6J("ngIf",null==t.searchUser?null:t.searchUser.value),Z.xp6(2),Z.Q6J("ngIf",t.showTable))},directives:[y.O5,s._Y,s.JL,s.sg,k.w9,s.JJ,s.u,s.Fj,s.oH,r.G,y.sg],styles:["table.dataTable td.dataTables_empty{display:none}.search-close[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px;color:#cdcdcd;cursor:pointer}.management-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),N)},95399:function(t,i,n){n.d(i,{Z:function(){return ae}});var s=n(23771),r=n(79765),l=n(25917),c=n(9112),d=n(37716),u=n(38583),g=n(49342),p=n(30900),h=n(63859),f=n(39895),m=n(89097),v=n(12664),Z=n(39075),b=n(20904),A=n(3679),x=n(74062),T=n(86640),_=["deleteModal"],C=["multiDeleteModal"];function y(e,t){1&e&&(d.TgZ(0,"div",48),d.TgZ(1,"div",49),d.TgZ(2,"div",50),d.TgZ(3,"span",51),d._uU(4,"Loading..."),d.qZA(),d.qZA(),d.qZA(),d.qZA())}function k(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",52),d.TgZ(1,"span",53),d._UZ(2,"img",54),d.qZA(),d.TgZ(3,"button",55),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",56),d.qZA()}if(2&e){var n=d.oxw(2);d.xp6(5),d.Q6J("innerHtml",n.errorInfo,d.oJD)}}function q(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",57),d.TgZ(1,"span",58),d._UZ(2,"img",59),d.qZA(),d.TgZ(3,"button",55),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).closeAlert()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",56),d.qZA()}if(2&e){var n=d.oxw(2);d.xp6(5),d.Q6J("innerHtml",n.successInfo,d.oJD)}}function w(e,t){1&e&&d._UZ(0,"i",73)}function O(e,t){1&e&&d._UZ(0,"i",74)}function S(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"a",70),d.NdJ("click",function(){d.CHM(i);var e=d.oxw().$implicit;return d.oxw(2).expandCollapse(e._id)}),d.YNc(2,w,1,0,"i",71),d.YNc(3,O,1,0,"i",72),d.qZA(),d.qZA()}if(2&e){var n=d.oxw().$implicit,a=d.oxw(2);d.xp6(1),d.uIk("id","collapse-btn-"+n.displayName),d.xp6(1),d.Q6J("ngIf",!a.isExpanded[n._id]),d.xp6(1),d.Q6J("ngIf",a.isExpanded[n._id])}}var M=function(e){return{oneLevelDisable:e}},U=function(e){return{noWriteApi:e}};function D(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"span"),d._uU(1),d.TgZ(2,"label",75),d.TgZ(3,"input",76),d.NdJ("change",function(e){d.CHM(i);var t=d.oxw().$implicit;return d.oxw(2).levelOneAction(t,e.target.checked)}),d.qZA(),d._UZ(4,"span",77),d.qZA(),d.TgZ(5,"span",78),d._uU(6),d.qZA(),d.qZA()}if(2&e){var n=d.oxw().$implicit,a=d.oxw(2);d.xp6(1),d.hij(" ",a.language.readOnly," "),d.xp6(2),d.Gre("",n._id,"_action firstLevel"),d.s9C("id",n._id+"_action"),d.s9C("name",n.name),d.Q6J("checked",n.readWrite)("ngClass",d.VKq(12,M,null==n?null:n.isSubscriber))("disabled",n.disableScope||!n.checked||(null==n?null:n.isSubscriber)),d.uIk("noWriteApi",null==n?null:n.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(14,U,n.disableScope)),d.xp6(1),d.Oqu(a.language.writeAndRead)}}function N(e,t){1&e&&d._UZ(0,"i",84)}function I(e,t){1&e&&d._UZ(0,"i",74)}function E(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"a",70),d.NdJ("click",function(){d.CHM(i);var e=d.oxw().$implicit;return d.oxw(4).expandCollapse(e._id)}),d.YNc(2,N,1,0,"i",83),d.YNc(3,I,1,0,"i",72),d.qZA(),d.qZA()}if(2&e){var n=d.oxw().$implicit,a=d.oxw(4);d.xp6(1),d.uIk("id","collapse-btn-"+n.displayName),d.xp6(1),d.Q6J("ngIf",!a.isExpanded[n._id]),d.xp6(1),d.Q6J("ngIf",a.isExpanded[n._id])}}function F(e,t){1&e&&d._UZ(0,"i",84)}function P(e,t){1&e&&d._UZ(0,"i",74)}function L(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"a",70),d.NdJ("click",function(){d.CHM(i);var e=d.oxw().$implicit;return d.oxw(6).expandCollapse(e._id)}),d.YNc(2,F,1,0,"i",83),d.YNc(3,P,1,0,"i",72),d.qZA(),d.qZA()}if(2&e){var n=d.oxw().$implicit,a=d.oxw(6);d.xp6(1),d.uIk("id","collapse-btn-"+n.displayName),d.xp6(1),d.Q6J("ngIf",!a.isExpanded[n._id]),d.xp6(1),d.Q6J("ngIf",a.isExpanded[n._id])}}function J(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",36),d.TgZ(2,"div",61),d.TgZ(3,"div",86),d.TgZ(4,"div"),d.TgZ(5,"input",64),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(2).$implicit,a=d.oxw(2).$implicit,s=d.oxw(2).$implicit;return d.oxw(2).levelFourChange(t,e.target.checked,n._id,a._id,s._id)}),d.qZA(),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"div",81),d._uU(8),d.TgZ(9,"label",75),d.TgZ(10,"input",82),d.NdJ("change",function(){var e=d.CHM(i).$implicit,t=d.oxw(2).$implicit,n=d.oxw(2).$implicit,a=d.oxw(2).$implicit;return d.oxw(2).levelFourAction(e._id,t._id,n._id,a._id)}),d.qZA(),d._UZ(11,"span",77),d.qZA(),d.TgZ(12,"span",78),d._uU(13),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var n=t.$implicit,a=d.oxw(2).$implicit,s=d.oxw(2).$implicit,o=d.oxw(2).$implicit,r=d.oxw(2);d.xp6(5),d.DjV("",o._id," ",s._id," ",a._id," ",n._id,""),d.s9C("id",n._id),d.s9C("value",n.name),d.Q6J("checked",n.checked),d.xp6(1),d.hij(" ",r.scopeDisplayName[n.displayName]||r.language[n.displayName]||n.displayName," "),d.xp6(2),d.hij(" ",r.language.readOnly," "),d.xp6(2),d.DjV("",o._id,"_action ",s._id,"_action ",a._id,"_action ",n._id,"_action"),d.s9C("id",n._id+"_action"),d.s9C("name",n.name),d.Q6J("checked",n.readWrite)("disabled",n.disableScope||!n.checked),d.uIk("noWriteApi",null==n?null:n.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(24,U,n.disableScope)),d.xp6(1),d.Oqu(r.language.writeAndRead)}}function R(e,t){if(1&e&&(d.TgZ(0,"div",79),d.YNc(1,J,14,26,"div",43),d.qZA()),2&e){var i=d.oxw().$implicit,n=d.oxw(6);d.Q6J("ngClass",n.isExpanded[i._id]?"d-block":"d-none"),d.uIk("id","collapse-"+i.displayName),d.xp6(1),d.Q6J("ngForOf",i.permissions3)}}function H(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",36),d.TgZ(2,"div",61),d.TgZ(3,"div",85),d.TgZ(4,"div",63),d.TgZ(5,"input",64),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(2).$implicit,a=d.oxw(2).$implicit;return d.oxw(2).levelThreeChange(t,e.target.checked,n._id,a._id)}),d.qZA(),d.TgZ(6,"span",65),d.NdJ("click",function(e){var t=d.CHM(i).$implicit;return d.oxw(6).showCheckBox(e,t)}),d.qZA(),d.TgZ(7,"span",66),d._uU(8),d.qZA(),d._UZ(9,"span",67),d.qZA(),d.YNc(10,L,4,3,"div",44),d.qZA(),d.qZA(),d.TgZ(11,"div",81),d._uU(12),d.TgZ(13,"label",75),d.TgZ(14,"input",82),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(2).$implicit,a=d.oxw(2).$implicit;return d.oxw(2).levelThreeAction(t,e.target.checked,n._id,a._id)}),d.qZA(),d._UZ(15,"span",77),d.qZA(),d.TgZ(16,"span",78),d._uU(17),d.qZA(),d.qZA(),d.qZA(),d.YNc(18,R,2,3,"div",69),d.qZA()}if(2&e){var n=t.$implicit,a=d.oxw(2).$implicit,s=d.oxw(2).$implicit,o=d.oxw(2);d.xp6(5),d.IyS("",s._id," ",a._id," ",n._id,""),d.MGl("id","",n._id,"_inner_parent"),d.s9C("value",n.name),d.Q6J("checked",n.checked),d.xp6(1),d.MGl("id","",n._id,"_inner_parent_span"),d.xp6(2),d.hij(" ",o.scopeDisplayName[n.displayName]||o.language[n.displayName]||n.displayName," "),d.xp6(1),d.MGl("id","",n._id,"_info"),d.xp6(1),d.Q6J("ngIf",n.permissions3.length),d.xp6(2),d.hij(" ",o.language.readOnly," "),d.xp6(2),d.IyS("",s._id,"_action ",a._id,"_action ",n._id,"_action"),d.s9C("id",n._id+"_action"),d.s9C("name",n.name),d.Q6J("checked",n.readWrite)("disabled",n.disableScope||!n.checked),d.uIk("noWriteApi",null==n?null:n.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(26,U,n.disableScope)),d.xp6(1),d.Oqu(o.language.writeAndRead),d.xp6(1),d.Q6J("ngIf",n.permissions3.length)}}function Y(e,t){if(1&e&&(d.TgZ(0,"div",79),d.YNc(1,H,19,28,"div",43),d.qZA()),2&e){var i=d.oxw().$implicit,n=d.oxw(4);d.Q6J("ngClass",n.isExpanded[i._id]?"d-block":"d-none"),d.uIk("id","collapse-"+i.displayName),d.xp6(1),d.Q6J("ngForOf",i.permissions2)}}function Q(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",36),d.TgZ(2,"div",61),d.TgZ(3,"div",80),d.TgZ(4,"div",63),d.TgZ(5,"input",64),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(2).$implicit;return d.oxw(2).levelTwoChange(t,e.target.checked,n._id)}),d.qZA(),d.TgZ(6,"span",65),d.NdJ("click",function(e){var t=d.CHM(i).$implicit;return d.oxw(4).showCheckBox(e,t)}),d.qZA(),d.TgZ(7,"span",66),d._uU(8),d.qZA(),d._UZ(9,"span",67),d.qZA(),d.YNc(10,E,4,3,"div",44),d.qZA(),d.qZA(),d.TgZ(11,"div",81),d._uU(12),d.TgZ(13,"label",75),d.TgZ(14,"input",82),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(2).$implicit;return d.oxw(2).levelTwoAction(t,e.target.checked,n._id)}),d.qZA(),d._UZ(15,"span",77),d.qZA(),d.TgZ(16,"span",78),d._uU(17),d.qZA(),d.qZA(),d.qZA(),d.YNc(18,Y,2,3,"div",69),d.qZA()}if(2&e){var n=t.$implicit,a=d.oxw(2).$implicit,s=d.oxw(2);d.xp6(5),d.Tol(a._id),d.MGl("id","",n._id,"_parent"),d.s9C("value",n.name),d.Q6J("checked",n.checked),d.xp6(1),d.MGl("id","",n._id,"_parent_span"),d.xp6(2),d.hij(" ",s.scopeDisplayName[n.displayName]||s.language[n.displayName]||n.displayName," "),d.xp6(1),d.MGl("id","",n._id,"_info"),d.xp6(1),d.Q6J("ngIf",n.permissions2.length),d.xp6(2),d.hij(" ",s.language.readOnly," "),d.xp6(2),d.Gre("",a._id,"_action"),d.s9C("id",n._id+"_action"),d.s9C("name",n.name),d.Q6J("checked",n.readWrite)("disabled",n.disableScope||!n.checked),d.uIk("noWriteApi",null==n?null:n.disableScope),d.xp6(2),d.Q6J("ngClass",d.VKq(22,U,n.disableScope||"cloud.rbac.csc.calloutcome.enforce"===n.name)),d.xp6(1),d.Oqu(s.language.writeAndRead),d.xp6(1),d.Q6J("ngIf",n.permissions2.length)}}function z(e,t){if(1&e&&(d.TgZ(0,"div",79),d.YNc(1,Q,19,24,"div",43),d.qZA()),2&e){var i=d.oxw().$implicit,n=d.oxw(2);d.Q6J("ngClass",n.isExpanded[i._id]?"d-block":"d-none"),d.uIk("id","collapse-"+i.displayName),d.xp6(1),d.Q6J("ngForOf",i.permissions)}}var B=function(e){return{emptyRowSwitch:e}};function $(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",60),d.TgZ(1,"div",36),d.TgZ(2,"div",61),d.TgZ(3,"div",62),d.TgZ(4,"div",63),d.TgZ(5,"input",64),d.NdJ("change",function(e){var t=d.CHM(i).$implicit;return d.oxw(2).levelOneChange(t._id,e.target.checked,t)}),d.qZA(),d.TgZ(6,"span",65),d.NdJ("click",function(e){var t=d.CHM(i).$implicit;return d.oxw(2).showCheckBox(e,t)}),d.qZA(),d.TgZ(7,"span",66),d._uU(8),d.qZA(),d._UZ(9,"span",67),d.qZA(),d.YNc(10,S,4,3,"div",44),d.qZA(),d.qZA(),d.TgZ(11,"div",68),d.YNc(12,D,7,16,"span",44),d.qZA(),d.qZA(),d.YNc(13,z,2,3,"div",69),d.qZA()}if(2&e){var n=t.$implicit,a=d.oxw(2);d.xp6(5),d.MGl("id","",n._id,"_parent"),d.s9C("value",n.name),d.Q6J("checked",n.checked),d.xp6(1),d.MGl("id","",n._id,"_parent_span"),d.xp6(2),d.hij(" ",a.scopeDisplayName[n.displayName]||a.language[n.displayName]||n.displayName," "),d.xp6(1),d.MGl("id","",n._id,"_info"),d.xp6(1),d.Q6J("ngIf",n.permissions.length),d.xp6(1),d.Q6J("ngClass",d.VKq(10,B,null==n?null:n.isSubscriber)),d.xp6(1),d.Q6J("ngIf",!(null!=n&&n.isSubscriber)),d.xp6(1),d.Q6J("ngIf",n.permissions.length)}}function j(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",87),d.TgZ(1,"span",53),d._UZ(2,"img",54),d.qZA(),d.TgZ(3,"button",55),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).closeAlertWarning()}),d._UZ(4,"span"),d.qZA(),d._UZ(5,"div",56),d.qZA()}if(2&e){var n=d.oxw(2);d.xp6(5),d.Q6J("innerHtml",n.warningInfo,d.oJD)}}function V(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"button",88),d.NdJ("click",function(){return d.CHM(i),d.oxw(2).deleteMultiUsers()}),d._uU(1),d.qZA()}if(2&e){var n=d.oxw(2);d.xp6(1),d.hij(" ",n.language.delete," ")}}function G(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td",89),d.TgZ(2,"input",90),d.NdJ("click",function(e){var t=d.CHM(i).$implicit;return d.oxw(2).deleteUserCheckOne(t,e.target.checked)}),d.qZA(),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td",91),d.TgZ(6,"i",92),d.NdJ("click",function(){var e=d.CHM(i).$implicit;return d.oxw(2).deleteUser(e)}),d.qZA(),d.qZA(),d.qZA()}if(2&e){var n=t.$implicit,a=d.oxw(2);d.xp6(2),d.s9C("id",n._id),d.MGl("name","user_del_",n._id,""),d.s9C("value",n._id),d.Q6J("checked",a.usersDelSelectedChecked),d.xp6(2),d.Oqu(n.username),d.xp6(2),d.s9C("title",a.language.delete)}}function W(e,t){if(1&e&&(d.TgZ(0,"tbody"),d.TgZ(1,"tr"),d.TgZ(2,"td",93),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw(2);d.xp6(3),d.Oqu(i.language["No data available in table"])}}var X=function(){return{standalone:!0}};function K(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",3),d.YNc(1,y,5,0,"div",4),d.YNc(2,k,6,1,"div",5),d.YNc(3,q,6,1,"div",6),d.TgZ(4,"div",7),d.TgZ(5,"div",8),d.TgZ(6,"div",9),d._uU(7),d.qZA(),d.qZA(),d.TgZ(8,"div",10),d.TgZ(9,"div",11),d.TgZ(10,"a",12),d.NdJ("click",function(){return d.CHM(i),d.oxw().goBack()}),d._UZ(11,"i",13),d._uU(12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",14),d.TgZ(14,"div",8),d.TgZ(15,"div",15),d.TgZ(16,"label",16),d._uU(17),d.TgZ(18,"span",17),d._uU(19,"*"),d.qZA(),d.qZA(),d.TgZ(20,"input",18),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw().roleName=e})("keyup",function(){return d.CHM(i),d.oxw().closeAlert()})("blur",function(){d.CHM(i);var e=d.oxw();return e.removeUnwantedSpace("roleName",e.roleName)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",19),d.TgZ(22,"div",15),d.TgZ(23,"label",20),d._uU(24),d.qZA(),d.TgZ(25,"input",21),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw().roleDescription=e})("blur",function(){d.CHM(i);var e=d.oxw();return e.removeUnwantedSpace("roleDescription",e.roleDescription)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(26,"div",14),d.TgZ(27,"div",22),d._uU(28),d.qZA(),d.qZA(),d.TgZ(29,"div",14),d.TgZ(30,"div",23),d.TgZ(31,"form",24),d.YNc(32,$,14,12,"div",25),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",14),d.TgZ(34,"div",22),d._uU(35),d.qZA(),d.qZA(),d.YNc(36,j,6,1,"div",26),d.TgZ(37,"div",14),d.TgZ(38,"div",27),d.TgZ(39,"form"),d.TgZ(40,"div",28),d.TgZ(41,"ng-select",29),d.NdJ("ngModelChange",function(e){return d.CHM(i),d.oxw().selectedUsers=e})("ngModelChange",function(e){return d.CHM(i),d.oxw().selectSocialMedia(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(42,"div",30),d.TgZ(43,"button",31),d.NdJ("click",function(){return d.CHM(i),d.oxw().addUser()}),d._uU(44),d.qZA(),d.qZA(),d.qZA(),d.TgZ(45,"div",32),d.TgZ(46,"div",33),d.TgZ(47,"div",34),d.YNc(48,V,2,1,"button",35),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"div",36),d.TgZ(50,"div",37),d.TgZ(51,"table",38),d.TgZ(52,"thead",39),d.TgZ(53,"tr"),d.TgZ(54,"th",40),d.TgZ(55,"input",41),d.NdJ("click",function(e){return d.CHM(i),d.oxw().deleteUserCheckAll(e.target.checked)}),d.qZA(),d.TgZ(56,"span",42),d.NdJ("click",function(e){return d.CHM(i),d.oxw().showAllUserCheckBox(e)}),d.qZA(),d.qZA(),d.TgZ(57,"th"),d._uU(58),d.qZA(),d.TgZ(59,"th"),d._uU(60),d.qZA(),d.qZA(),d.qZA(),d.TgZ(61,"tbody"),d.YNc(62,G,7,6,"tr",43),d.qZA(),d.YNc(63,W,4,1,"tbody",44),d.qZA(),d.qZA(),d.qZA(),d.TgZ(64,"div",36),d.TgZ(65,"div",45),d.TgZ(66,"button",46),d.NdJ("click",function(){return d.CHM(i),d.oxw().addRole()}),d._uU(67),d.qZA(),d.TgZ(68,"button",47),d.NdJ("click",function(){return d.CHM(i),d.oxw().goBack()}),d._uU(69),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var n=d.oxw();d.xp6(1),d.Q6J("ngIf",n.loader),d.xp6(1),d.Q6J("ngIf",n.error),d.xp6(1),d.Q6J("ngIf",n.success),d.xp6(4),d.Oqu(n.pageTitle),d.xp6(5),d.hij(" ",n.language["Back to Roles List"]," "),d.xp6(5),d.Oqu(n.language.roleName),d.xp6(3),d.s9C("placeholder",n.language["Enter role name"]),d.Q6J("ngModel",n.roleName),d.xp6(4),d.Oqu(n.language.Description),d.xp6(1),d.s9C("placeholder",n.language.Description),d.Q6J("ngModel",n.roleDescription),d.xp6(3),d.Oqu(n.language.permissions),d.xp6(4),d.Q6J("ngForOf",n.allPermissions),d.xp6(3),d.Oqu(n.language.addUsers),d.xp6(1),d.Q6J("ngIf",n.warning),d.xp6(5),d.s9C("placeholder",n.language.selectUser),d.s9C("notFoundText",n.language.noItemsFound),d.Q6J("items",n.usersList)("ngModel",n.selectedUsers)("clearable",!1)("ngModelOptions",d.DdM(35,X)),d.xp6(3),d.hij(" ",n.language.add," "),d.xp6(4),d.Q6J("ngIf",0!=n.usersDelSelected.length),d.xp6(2),d.Q6J("hidden",!n.dataAvailable),d.xp6(1),d.Q6J("dtOptions",n.tableOptions)("dtTrigger",n.dtTrigger),d.xp6(4),d.Q6J("checked",n.usersDelSelectedChecked)("disabled",0==(null==n.addedUsersList?null:n.addedUsersList.length)),d.xp6(3),d.Oqu(n.language.userName),d.xp6(2),d.Oqu(n.language.Action),d.xp6(2),d.Q6J("ngForOf",n.addedUsersList),d.xp6(1),d.Q6J("ngIf",0==(null==n.addedUsersList?null:n.addedUsersList.length)),d.xp6(3),d.Q6J("disabled",n.loader),d.xp6(1),d.hij(" ",n.language.saveEnregistrer," "),d.xp6(2),d.hij(" ",n.language.Cancel," ")}}function ee(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",94),d.TgZ(1,"h4",95),d._uU(2),d.qZA(),d.TgZ(3,"button",96),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeModal()}),d._UZ(4,"span",97),d.qZA(),d.qZA(),d.TgZ(5,"div",98),d._uU(6),d._UZ(7,"br"),d._uU(8),d.qZA(),d.TgZ(9,"div",99),d.TgZ(10,"button",100),d.NdJ("click",function(){return d.CHM(i),d.oxw().confirmDeleteSecleted()}),d._uU(11),d.qZA(),d.TgZ(12,"button",101),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeModal()}),d._uU(13),d.qZA(),d.qZA()}if(2&e){var n=d.oxw();d.xp6(2),d.Oqu(n.modalTitle),d.xp6(4),d.hij(" ",n.language["Are you sure you want to delete this Role"],"?"),d.xp6(2),d.hij(" (",n.modalInfo,") "),d.xp6(3),d.hij(" ",n.language.yes," "),d.xp6(2),d.hij(" ",n.language.no," ")}}function te(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",94),d.TgZ(1,"h4",95),d._uU(2),d.qZA(),d.TgZ(3,"button",96),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeModal()}),d._UZ(4,"span",97),d.qZA(),d.qZA(),d.TgZ(5,"div",98),d._uU(6),d._UZ(7,"br"),d._uU(8),d.qZA(),d.TgZ(9,"div",99),d.TgZ(10,"button",100),d.NdJ("click",function(){return d.CHM(i),d.oxw().confirmMultiDeleteSecleted()}),d._uU(11),d.qZA(),d.TgZ(12,"button",101),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeModal()}),d._uU(13),d.qZA(),d.qZA()}if(2&e){var n=d.oxw();d.xp6(2),d.Oqu(n.modalTitle),d.xp6(4),d.hij(" ",n.language["Are you sure you want to delete these selected Roles"],"?"),d.xp6(2),d.hij(" (",n.modalInfo,") "),d.xp6(3),d.hij(" ",n.language.yes," "),d.xp6(2),d.hij(" ",n.language.no," ")}}var ie,ne=n(91704),ae=((ie=function(){function t(e,i,n,s,o,l,c,d,u){var g=this;a(this,t),this.location=e,this.commonOrgService=i,this.customTranslateService=n,this.addRoleService=s,this.router=o,this.sso=l,this.dialogService=c,this.titleService=d,this.CommonFunctionsService=u,this.isExpanded={},this.pageAvailable=!1,this.rolesAddForm="supportCloud",this.usersList=[],this.usersFiltered=[],this.addedUsersList=[],this.existingUserError=!1,this.usersDelSelected=[],this.usersDelSelectedChecked=!1,this.loader=!0,this.tableOptions={pagingType:"full_numbers",pageLength:5,ordering:!1,dom:"tipr",drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&ne(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.supportCloudRolesData=[],this.marketingCloudRolesData=[],this.smartHomeRoles=[],this.systemRoles=[],this.supportDataAvailable=!1,this.marketingDataAvailable=!1,this.smartDataAvailable=!1,this.systemDataAvailable=!1,this.dtTrigger=new r.xQ,this.isRerender=!1,this.allPermissions=[],this.errorInfo="",this.successInfo="",this.warningInfo="",this.MODULE="systemAdministration",this.levelTwoSelected=[],this.levelThreeSelected=[],this.usersCount=0,this.scopesToBeDisabled=["cloud.rbac.csc.qoe","cloud.rbac.csc.apps.arlo","cloud.rbac.csc.apps.servify","cloud.rbac.csc.apps.mycommunityiq","cloud.rbac.csc.apps.bark","cloud.rbac.csc.devices","cloud.rbac.csc.topology","cloud.rbac.csc.calloutcome.enforce"],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.allPrmsnfrmApi=[];var p=this.router.url;this.ORG_ID=this.sso.getOrganizationID(p),this.MODULE=this.sso.getRedirectModule(p),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){g.language=e,g.pageTitleCreator(),g.dataAvailable=!1,g.isRerender=!0,g.titleService.setTitle("".concat(g.language["Add Role"]," - ").concat("systemAdministration"===g.MODULE?g.language["System Administration"]:g.language.administration," - ").concat(g.language["Calix Cloud"])),g.renderUsersTable("language")}),this.rolesAddForm=sessionStorage.getItem("calixAdminAddRole"),this.pageTitleCreator(),this.getDatas(),this.frTable=this.customTranslateService.fr,this.titleService.setTitle("".concat(this.language["Add Role"]," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(t,[{key:"onClick",value:function(e){var t=e.target.className,i=e.target.localName;t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&this.tablePageChange()}},{key:"ngOnInit",value:function(){this.closeAlert(),this.tableLanguageOptions(),this.commonOrgService.currentPageAdder("addRole")}},{key:"ngOnDestroy",value:function(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.allPermsSubs&&this.allPermsSubs.unsubscribe(),this.usersCountSubs&&this.usersCountSubs.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe(),this.roleAddSubs&&this.roleAddSubs.unsubscribe()}},{key:"getDatas",value:function(){this.getAllPermissions(),this.getUserList()}},{key:"getAllPermissions",value:function(){var e=this;this.allPermsSubs=this.addRoleService.AllPemissionsData(this.appType).subscribe(function(t){e.allPrmsnfrmApi=t,e.allPermissionsDataProcess(t),e.loader=!1},function(t){e.pageErrorHandle(t),e.loader=!1})}},{key:"allPermissionsDataProcess",value:function(e){"supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?(this.allPermissions=this.commonOrgService.allSupportDataProcessV21(e,{}),"marketingCloud"==this.rolesAddForm&&(this.allPermissions=this.allPermissions.map(function(e){return("Subscriber"==e.displayName||"Revenue"==e.displayName)&&(e.isSubscriber=!0),e}))):this.allPermissions=this.commonOrgService.allSupportDataProcess(e,{}),this.allPermissions=this.disableScopeDoesntNeedWrite(this.allPermissions,1)}},{key:"disableScopeDoesntNeedWrite",value:function(e,t){var i=this;return e.forEach(function(e){var n=1==t?"":t;i.scopesToBeDisabled.includes(e.name)&&(e.disableScope=!0),e.hasOwnProperty("permissions".concat(n))&&e["permissions".concat(n)]&&(e=i.disableScopeDoesntNeedWrite(e["permissions".concat(n)],t+1))}),e}},{key:"getUserList",value:function(){var e=this;this.usersCountSubs=this.addRoleService.UsersCountByOrgId(this.ORG_ID).subscribe(function(t){e.usersCount=t,e.usersListSubs=e.addRoleService.UsersListByOrgId(e.ORG_ID,t).subscribe(function(t){e.usersList=t,e.usersList.length&&(e.selectedUsers=e.usersList[0]),e.renderUsersTable()},function(t){e.pageErrorHandle(t),e.renderUsersTable()})},function(t){e.pageErrorHandle(t),e.renderUsersTable()})}},{key:"addUser",value:function(){this.warning=!1;var e=this.selectedUsers._id;if(this.addedUsersList.filter(function(t){return t._id===e}).length>0)return this.warningInfo="".concat(this.selectedUsers.username," - ").concat(this.language["User already added"]),void(this.warning=!0);this.addedUsersList.push(this.selectedUsers),this.isRerender=!0,this.renderUsersTable(),this.deleteUserCheckAll(!1),this.resetMultiDelete()}},{key:"deleteUser",value:function(e){this.deleteItem=e,this.modalTitle=this.language["Delete User"],this.modalInfo="".concat(e.username),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal)}},{key:"confirmDeleteSecleted",value:function(){var e=this;this.closeModal();var t=this.deleteItem,i=[];this.addedUsersList.forEach(function(e){e._id!==t._id&&i.push(e)}),this.usersDelSelected=this.usersDelSelected.filter(function(e){return e._id!==t._id}),this.addedUsersList=i,this.isRerender=!0,this.renderUsersTable(),setTimeout(function(){e.deleteUserCheckAll(!1),e.resetMultiDelete()},200)}},{key:"deleteUserCheckAll",value:function(e){var t,i=0,n=this;e?ne('input[name^="user_del"]').each(function(){if(i>=5)return!1;ne(this).prop("checked",!0),t=ne(this).attr("id"),n.addedUsersList.forEach(function(e){e._id==t&&!n.usersDelSelected.includes(e)&&n.usersDelSelected.push(e)}),i++}):ne('input[name^="user_del"]').each(function(){if(i>=5)return!1;ne(this).prop("checked",!1),n.usersDelSelected=[],i++})}},{key:"deleteUserCheckOne",value:function(e,t){t?(this.usersDelSelected.push(e),this.usersDelSelected.length==ne('input[name^="user_del"]').length?(ne("#user-all-delete").prop("checked",!0),ne("#user-all-delete-span").hide()):ne("#user-all-delete-span").show()):(this.usersDelSelected=this.usersDelSelected.filter(function(t){return t._id!=e._id}),this.usersDelSelected.length?this.usersDelSelected.length!=ne('input[name^="user_del"]').length?(ne("#user-all-delete").prop("checked",!1),ne("#user-all-delete-span").show()):ne("#user-all-delete-span").hide():(ne("#user-all-delete").prop("checked",!1),ne("#user-all-delete-span").hide()))}},{key:"deleteMultiUsers",value:function(){this.modalTitle=this.language["Delete Multiple Users"];var e=[];this.usersDelSelected.forEach(function(t){e.push(t.username)}),this.modalInfo=e.join(", "),this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal)}},{key:"confirmMultiDeleteSecleted",value:function(){var e=this;this.closeModal(),this.addedUsersList=this.addedUsersList.filter(function(t){var i=t._id;return!e.usersDelSelected.some(function(e){return e._id==i})}),this.isRerender=!0,this.renderUsersTable(),setTimeout(function(){e.deleteUserCheckAll(!1),e.resetMultiDelete()},200)}},{key:"resetMultiDelete",value:function(){this.usersDelSelected=[],ne("#user-all-delete").prop("checked",!1),ne("#user-all-delete-span").hide()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"renderUsersTable",value:function(e){var t=this;this.setTableOptions(),e&&"language"==e?setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next()},50):this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},{key:"setTableOptions",value:function(){this.tableOptions={pagingType:"full_numbers",pageLength:5,processing:!0,ordering:!1,dom:"tipr",drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&ne(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.tableLanguageOptions(),this.dataAvailable=!0}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"redraw",value:function(){this.dtElement.dtInstance.then(function(e){e.draw()})}},{key:"pageTitleCreator",value:function(){"smartHome"==this.rolesAddForm?(this.pageTitle=this.language.addRoleSmartHome,this.appType="shad"):"marketingCloud"==this.rolesAddForm?(this.pageTitle=this.language.addRoleMarketing,this.appType="119"):"supportCloud"==this.rolesAddForm?(this.pageTitle=this.language.addRoleSupportCloud,this.appType="118"):"foundation"==this.rolesAddForm?(this.pageTitle=this.language.addRoleFoundation,this.appType="200"):"cco"==this.rolesAddForm?(this.pageTitle=this.language.addRoleOperationsCloud,this.appType="102"):"fa"==this.rolesAddForm&&(this.pageTitle=this.language.addRoleFA,this.appType="102")}},{key:"selectSocialMedia",value:function(e){}},{key:"goBack",value:function(){this.location.back()}},{key:"addRole",value:function(){var e=this;if(this.closeAlert(),null==this.roleName||""==this.roleName||this.roleName.length&&""==this.roleName.trim())return this.commonOrgService.pageScrollTop(),this.errorInfo=this.language["Role name cannot be empty"],void(this.error=!0);var t=this.roleName.trim();if(""==t||t.length<2)return this.commonOrgService.pageScrollTop(),this.errorInfo=this.language["Invalid name"],void(this.error=!0);var i={},n=ne("#permissionsForm").serializeArray();ne.each(n,function(e,t){void 0!==i[t.name]?("array"!=jQuery.type(i[t.name])&&(i[t.name]=[i[t.name]]),i[t.name].push(t.value)):i[t.name]=t.value});var a=i.scopeName,s=[];if(a)if("string"==typeof a)s.push({scopeName:a,action:i[a]?"read,write":"read"});else for(var o=0;o<a.length;o++)s.push({scopeName:a[o],action:i[a[o]]?"read,write":"read"});this.finalPerData=s;var r={apptype:this.appType,name:this.roleName,description:this.roleDescription?this.roleDescription:"",orgDefault:!0,orgId:this.ORG_ID};this.loader=!0,this.roleAddSubs=this.addRoleService.RoleAdd(r).subscribe(function(t){e.roleDatas=t,e.addOtherDetailsToRole(s)},function(t){e.loader=!1,e.closeAlert(),401==t.status?(e.errorInfo=e.language["Access Denied"],e.error=!0,e.commonOrgService.pageScrollTop()):"string"==typeof t.error&&t.error.indexOf("already exists")>-1?(e.errorInfo=e.language["Role name already exist"],e.error=!0,e.commonOrgService.pageScrollTop()):e.pageErrorHandle(t)})}},{key:"addOtherDetailsToRole",value:function(e){var t=[],i=[];this.addedUsersList.forEach(function(e){i.push(e._id)});var n=this.addRoleService.AddUsersByRoleId(i,this.roleDatas._id).forEach(function(e){return e}).catch(function(e){return(0,l.of)(e)});if(t.push(n),e.length){var a;a=e||[];var s=this.addRoleService.AddRolePermissions(a,this.roleDatas._id).forEach(function(e){return e}).catch(function(e){return(0,l.of)(e)});t.push(s)}this.combineLatest=(0,c.aj)(t),this.makeParallelAddRequest()}},{key:"makeParallelAddRequest",value:function(){var t=this;this.loader=!0,this.parallelReqSubscribtion=this.combineLatest.subscribe(function(i){if(t.loader=!1,i.length){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(null!=s&&null!=s.error)return t.errorInfo="string"==typeof s.error?"".concat(s.error):"".concat(s.message),void t.pageErrorHandle(s)}}catch(o){a.e(o)}finally{a.f()}}t.closeAlert(),t.successInfo=t.language["Users with roles data saved successfully"],t.success=!0,t.commonOrgService.pageScrollTop(),setTimeout(function(){t.goToOrgRoles()},1500)})}},{key:"processData",value:function(e){for(var t=e[0],i={},n=0;n<t.permissions.length;n++)i[t.permissions[n].scopeName]=t.permissions[n].action;this.selectedPermissions=i}},{key:"levelOneChange",value:function(e,t,i){ne("."+e).prop("checked",t),t?(ne("."+e+"_action").prop("disabled",!1),ne("#"+e+"_parent").prop("checked",t)):(ne("#"+e+"_parent").prop("checked",t),ne("."+e+"_action").prop("checked",t),ne("."+e+"_action").prop("disabled",!0)),this.getSlctdParams(),ne(".oneLevelDisable").prop("disabled",!0),"cloud.rbac.csc.calloutcome"===i.name?this.levelOneAction(i,t):this.renderChild(i,t)}},{key:"levelTwoChange",value:function(e,t,i){var n,a,s,o,r=e._id;if(ne("."+r).prop("checked",t),t){if(ne("."+i+"_action").prop("disabled",e.disableScope||!1),ne("#"+i+"_parent_span").show(),"cloud.rbac.csc.calloutcome.enforce"===e.name){var l=null===(o=(null===(s=this.allPermissions.find(function(e){return"cloud.rbac.csc.calloutcome"===e.name}))||void 0===s?void 0:s.permissions).find(function(e){return"cloud.rbac.csc.calloutcome.createview"===e.name}))||void 0===o?void 0:o._id;document.getElementById("".concat(l,"_parent")).checked=!0,document.getElementById("".concat(l,"_action")).checked=!0,document.getElementById("".concat(i,"_action")).checked=!0}var c=!0;ne("."+i).each(function(){ne(this).prop("checked")||(c=!1)}),c&&(ne("#"+i+"_parent").prop("checked",t),ne("#"+i+"_parent_span").hide())}else{if("cloud.rbac.csc.calloutcome.createview"===e.name){var d=null===(a=(null===(n=this.allPermissions.find(function(e){return"cloud.rbac.csc.calloutcome"===e.name}))||void 0===n?void 0:n.permissions).find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===a?void 0:a._id;document.querySelector("#".concat(d,"_parent")).checked=!1}ne("#"+i+"_parent_span").show(),ne("#"+i+"_parent").prop("checked",t),ne("."+r+"_action").prop("checked",t),ne("."+r+"_action").prop("disabled",!0)}this.getSlctdParams(),ne(".".concat(i)).length==ne(".".concat(i,":checked")).length?(ne("#".concat(i,"_parent")).prop("checked",!0).show(),ne("#".concat(i,"_parent_span")).hide()):ne(".".concat(i,":checked")).length>0?(ne("#".concat(i,"_parent")).prop("checked",!1).hide(),ne("#".concat(i,"_parent_span")).show()):(ne("#".concat(i,"_parent")).prop("checked",!1).show(),ne("#".concat(i,"_parent_span")).hide()),"cloud.rbac.csc.calloutcome.enforce"===e.name&&(document.getElementById("".concat(r,"_action")).disabled=!0)}},{key:"levelThreeChange",value:function(e,t,i,n){var a=e._id;if(ne("."+a).prop("checked",t),t){ne("."+a+"_action").prop("disabled",e.disableScope||!1),ne("#"+i+"_parent_span").show(),ne("#"+n+"_parent_span").show(),ne("#"+i+"_parent").hide();var s=!0;ne("."+i).each(function(){ne(this).prop("checked")||(s=!1)}),s&&(ne("#"+i+"_parent").prop("checked",t),ne("#"+i+"_parent_span").hide(),ne("#"+i+"_parent").show()),s=!0,ne("."+n).each(function(){ne(this).prop("checked")||(s=!1)}),s&&(ne("#"+n+"_parent").prop("checked",t),ne("#"+n+"_parent_span").hide(),ne("#"+i+"_parent_span").hide())}else ne("#"+i+"_parent").prop("checked",t),ne("#"+n+"_parent").prop("checked",t),ne("#"+n+"_parent_span").show(),ne("#"+a+"_action").prop("disabled",!0),ne("#"+i+"_parent_span").show(),ne("#"+i+"_parent").hide();this.getSlctdParams(),ne(".".concat(i)).length==ne(".".concat(i,":checked")).length?(ne("#".concat(i,"_parent")).prop("checked",!0).show(),ne("#".concat(i,"_parent_span")).hide()):ne(".".concat(i,":checked")).length>0?(ne("#".concat(i,"_parent")).prop("checked",!1).hide(),ne("#".concat(i,"_parent_span")).show()):(ne("#".concat(i,"_parent")).prop("checked",!1).show(),ne("#".concat(i,"_parent_span")).hide()),ne(".".concat(n)).length==ne(".".concat(n,":checked")).length?(ne("#".concat(n,"_parent")).prop("checked",!0).show(),ne("#".concat(n,"_parent_span")).hide()):ne(".".concat(n,":checked")).length>0?(ne("#".concat(n,"_parent")).prop("checked",!1).hide(),ne("#".concat(n,"_parent_span")).show()):(ne("#".concat(n,"_parent")).prop("checked",!1).show(),ne("#".concat(n,"_parent_span")).hide())}},{key:"levelFourChange",value:function(e,t,i,n,a){var s=e._id;if(t){ne("."+s+"_action").prop("disabled",e.disableScope||!1),ne("#"+n+"_parent_span").show(),ne("#"+a+"_parent_span").show(),ne("#"+n+"_parent").hide(),ne("#"+i+"_inner_parent").prop("checked",!0),ne("#"+i+"_inner_parent_span").show();var o=!0;ne("."+n).each(function(){ne(this).prop("checked")||(o=!1)}),o&&(ne("#"+n+"_parent").prop("checked",t),ne("#"+n+"_parent_span").hide(),ne("#"+n+"_parent").show()),o=!0,ne("."+i).each(function(){ne(this).prop("checked")||(o=!1)}),o&&(ne("#"+i+"_inner_parent").prop("checked",o),ne("#"+i+"_inner_parent_span").hide()),o=!0,ne("."+a).each(function(){ne(this).prop("checked")||(o=!1)}),o&&(ne("#"+a+"_parent").prop("checked",t),ne("#"+a+"_parent_span").hide(),ne("#"+n+"_parent_span").hide())}else{ne("#"+n+"_parent").prop("checked",t),ne("#"+a+"_parent").prop("checked",t),ne("#"+a+"_parent_span").show();var r=!0;ne("."+i).each(function(){ne(this).prop("checked")||(r=!1)}),r?(ne("#"+i+"_inner_parent_span").show(),ne("#"+i+"_inner_parent").prop("checked",r)):(ne("#"+i+"_inner_parent_span").hide(),ne("#"+i+"_inner_parent").prop("checked",r)),ne("#"+s+"_action").prop("disabled",!0),ne("#"+s+"_action").prop("checked",!1),ne("#"+n+"_parent_span").show(),ne("#"+n+"_parent").hide()}this.getSlctdParams(),ne(".".concat(s)).length==ne(".".concat(s,":checked")).length?(ne("#".concat(i,"_parent")).prop("checked",!0).show(),ne("#".concat(i,"_parent_span")).hide()):ne(".".concat(s,":checked")).length>0?(ne("#".concat(i,"_parent")).prop("checked",!1).hide(),ne("#".concat(i,"_parent_span")).show()):(ne("#".concat(i,"_parent")).prop("checked",!1).show(),ne("#".concat(i,"_parent_span")).hide()),ne(".".concat(n)).length==ne(".".concat(n,":checked")).length?(ne("#".concat(n,"_parent")).prop("checked",!0).show(),ne("#".concat(n,"_parent_span")).hide()):ne(".".concat(n,":checked")).length>0?(ne("#".concat(n,"_parent")).prop("checked",!1).hide(),ne("#".concat(n,"_parent_span")).show()):(ne("#".concat(n,"_parent")).prop("checked",!1).show(),ne("#".concat(n,"_parent_span")).hide()),ne(".".concat(a)).length==ne(".".concat(a,":checked")).length?(ne("#".concat(a,"_parent")).prop("checked",!0).show(),ne("#".concat(a,"_parent_span")).hide()):ne(".".concat(a,":checked")).length>0?(ne("#".concat(a,"_parent")).prop("checked",!1).hide(),ne("#".concat(a,"_parent_span")).show()):(ne("#".concat(a,"_parent")).prop("checked",!1).show(),ne("#".concat(a,"_parent_span")).hide())}},{key:"levelOneAction",value:function(e,t){var i,n,a;if(ne("."+e._id+"_action").not("[disabled]").prop("checked",t),(t&&ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"false"==ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded")||!t&&ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"true"==ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id),"cloud.rbac.csc.calloutcome"===e.name)if(t){var s=null===(a=null==e?void 0:e.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===a?void 0:a._id;document.querySelector("#".concat(s,"_parent")).checked=!0,document.querySelector("#".concat(null==e?void 0:e._id,"_parent")).checked=!0,document.querySelector("#".concat(null==e?void 0:e._id,"_parent_span")).style.display="none"}else{var o=null===(i=null==e?void 0:e.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===i?void 0:i._id;document.querySelector("#".concat(o,"_parent")).checked=!1,document.getElementById("".concat(e._id,"_action")).disabled=!0;var r=null===(n=null==e?void 0:e.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.createview"===e.name}))||void 0===n?void 0:n._id;document.getElementById("".concat(r,"_parent")).checked&&(document.querySelector("#".concat(null==e?void 0:e._id,"_parent")).checked=!1,document.querySelector("#".concat(null==e?void 0:e._id,"_parent_span")).style.display="inline")}}},{key:"levelTwoAction",value:function(e,t,i){var n;if(ne("."+e._id+"_action").not("[disabled]").prop("checked",t),ne(".".concat(i,"_action:not(.firstLevel)")).length==ne(".".concat(i,"_action:not(.firstLevel):checked")).length?ne("#".concat(i,"_action.firstLevel")).prop("checked",!0):ne("#".concat(i,"_action.firstLevel")).prop("checked",!1),(t&&ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"false"==ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded")||!t&&ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"true"==ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),!t){if("cloud.rbac.csc.calloutcome.createview"===e.name){var a=this.allPermissions.find(function(e){return"cloud.rbac.csc.calloutcome"===e.name}),s=null===(n=null==a?void 0:a.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===n?void 0:n._id;document.querySelector("#".concat(s,"_parent")).checked=!1,document.querySelector("#".concat(null==a?void 0:a._id,"_parent")).checked=!1,document.querySelector("#".concat(null==a?void 0:a._id,"_parent_span")).style.display="inline",document.getElementById("".concat(a._id,"_action")).disabled=!0}ne("#"+i+"_action").prop("checked",!1)}}},{key:"levelThreeAction",value:function(e,t,i,n){ne("."+e._id+"_action").not("[disabled]").prop("checked",t),ne(".".concat(i,"_action")).length==ne(".".concat(i,"_action:checked")).length?ne("#".concat(i,"_action")).prop("checked",!0):ne("#".concat(i,"_action")).prop("checked",!1),ne(".".concat(n,"_action:not(.firstLevel)")).length==ne(".".concat(n,"_action:not(.firstLevel):checked")).length?ne("#".concat(n,"_action.firstLevel")).prop("checked",!0):ne("#".concat(n,"_action.firstLevel")).prop("checked",!1),(t&&ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"false"==ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded")||!t&&ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"true"==ne('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click()}},{key:"levelFourAction",value:function(e,t,i,n){ne(".".concat(e,"_action")).length==ne(".".concat(e,"_action:checked")).length?ne("#".concat(t,"_action")).prop("checked",!0):ne("#".concat(t,"_action")).prop("checked",!1),ne(".".concat(i,"_action")).length==ne(".".concat(i,"_action:checked")).length?ne("#".concat(i,"_action")).prop("checked",!0):ne("#".concat(i,"_action")).prop("checked",!1),ne(".".concat(n,"_action:not(.firstLevel)")).length==ne(".".concat(n,"_action:not(.firstLevel):checked")).length?ne("#".concat(n,"_action.firstLevel")).prop("checked",!0):ne("#".concat(n,"_action.firstLevel")).prop("checked",!1)}},{key:"goToOrgRoles",value:function(){this.router.navigate(["".concat(this.MODULE,"/roles")])}},{key:"showCheckBox",value:function(e,t){ne("#"+e.target.id).hide();var i=e.target.id.split("_");this.levelOneChange(i[0],!0,t)}},{key:"openDeleteModal",value:function(){document.getElementById("deleteModalHiddenButton").click()}},{key:"openMultiDeleteModal",value:function(){document.getElementById("multiDeleteModalHiddenButton").click()}},{key:"closeAlertWarning",value:function(){this.warning=!1}},{key:"hideSearch",value:function(){setTimeout(function(){ne("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),ne("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},10)}},{key:"pageScrollTop",value:function(){document.querySelector("#scrollTopId").scrollIntoView()}},{key:"getSlctdParams",value:function(){var e={},t=ne("#permissionsForm").serializeArray();ne.each(t,function(t,i){void 0!==e[i.name]?("array"!=jQuery.type(e[i.name])&&(e[i.name]=[e[i.name]]),e[i.name].push(i.value)):e[i.name]=i.value});var i,n={};e.scopeName&&("object"!=typeof e.scopeName&&(e.scopeName=[e.scopeName]),e.scopeName.forEach(function(e){n[e]=e})),(i="supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,n,!0):this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,n)).scopes.forEach(function(e){var t=i.selectedData[e]?"(".concat(i.selectedData[e],")"):"";ne("#"+e+"_info").html(t)," "===i.selectedData[e]&&ne("#"+e+"_info").html("");var n="true"==document.getElementById("".concat(e,"_action")).getAttribute("noWriteApi");ne("#"+e+"_parent").prop("checked",i.checkedScopes[e]),ne("#"+e+"_action").prop("disabled",!!n||!i.checkedScopes[e]),i.checkedScopes[e]||ne("#"+e+"_action").prop("checked",i.checkedScopes[e]),i.checkedScopes[e]&&(ne("#"+e+"_parent").show(),ne("#"+e+"_parent_span").hide())})}},{key:"showAllUserCheckBox",value:function(e){ne("#"+e.target.id).hide(),ne("#user-all-delete").prop("checked",!0),this.deleteUserCheckAll(!0)}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}},{key:"closeModal",value:function(){this.closeAlertWarning(),this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"tablePageChange",value:function(){var e=this;setTimeout(function(){ne("#user-all-delete-span").hide(),ne("#user-all-delete").prop("checked",!1),e.deleteUserCheckAll(!1)},100)}},{key:"expandCollapse",value:function(e){this.isExpanded.hasOwnProperty(e)?delete this.isExpanded[e]:this.isExpanded[e]=!0}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}},{key:"renderChild",value:function(e,t){var i=document.querySelector('a[id^="collapse-btn-'.concat(e.displayName,'"]'));(t&&i&&"false"===i.getAttribute("aria-expanded")||!t&&i&&"true"===i.getAttribute("aria-expanded"))&&i.click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id)}}]),t}()).\u0275fac=function(e){return new(e||ie)(d.Y36(u.Ye),d.Y36(g.v),d.Y36(p.d),d.Y36(h.U),d.Y36(f.F0),d.Y36(m.t6),d.Y36(v.FF),d.Y36(Z.Dx),d.Y36(b.i))},ie.\u0275cmp=d.Xpm({type:ie,selectors:[["app-add-role"]],viewQuery:function(e,t){var i;1&e&&(d.Gf(_,7),d.Gf(C,7),d.Gf(s.G,5)),2&e&&(d.iGM(i=d.CRH())&&(t.deleteModal=i.first),d.iGM(i=d.CRH())&&(t.multiDeleteModal=i.first),d.iGM(i=d.CRH())&&(t.dtElement=i.first))},hostBindings:function(e,t){1&e&&d.NdJ("click",function(e){return t.onClick(e)})},decls:5,vars:1,consts:[["class","container position-relative",4,"ngIf"],["deleteModal",""],["multiDeleteModal",""],[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","my-3"],[1,"col-md-4"],[1,"ccl-title"],[1,"col-md-8","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"row","my-3"],[1,"ccl-form"],["for","first",1,"f-w-600"],[1,"error"],["type","text","name","roleName","autocomplete","new-password","trimSpace","",1,"",3,"placeholder","ngModel","ngModelChange","keyup","blur"],[1,"col-md-8","pr-0"],["for","last",1,"f-w-600"],["type"," text","name","roleDescription","autocomplete","new-password","trimSpace","",1,"",3,"placeholder","ngModel","ngModelChange","blur"],[1,"col-md-12","ccl-title"],[1,"col-md-12"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],["class","col-md-6 my-3 alert alert-danger fade show",4,"ngIf"],[1,"col-md-4","offset-md-0"],[1,"form-group"],["bindLabel","username",3,"items","ngModel","clearable","ngModelOptions","placeholder","notFoundText","ngModelChange"],[1,"col-md-2","offset-md-0"],[1,"btn-default","primary","mr-2",3,"click"],[1,"row","my-2"],[1,"col-md-8"],[1,"text-right","flat-right"],["class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-8",3,"hidden"],["id","add-role-users","width","100%","datatable","",1,"table","table-sm","row-border","w-100","roles-addtable",3,"dtOptions","dtTrigger"],[1,"header-color"],[1,"checkbox-column","user-all"],["type","checkbox","name","websitecheck","id","user-all-delete",3,"checked","disabled","click"],["id","user-all-delete-span",1,"checkbox-ui",2,"display","none",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-6","offset-md-6","text-right","pr-0"],["id","submit-add-role",1,"btn-default","primary","md-btn","mr-3",3,"disabled","click"],["id","cancel-add-role",1,"btn-default","btn-dft","py-1","md-btn",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,""],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"checkbox-permission"],["type","checkbox","name","scopeName",3,"id","checked","value","change"],[1,"checkbox-ui","check-intermediate",2,"display","none",3,"id","click"],[1,"check-caption"],[3,"id"],[1,"box-of-permission","col-md-4",3,"ngClass"],["class","multi-collapse",3,"ngClass",4,"ngIf"],["role","button",1,"collapse-btn",3,"click"],["class","fas fa-plus-circle collapse-btn",4,"ngIf"],["class","fas fa-minus-circle",4,"ngIf"],[1,"fas","fa-plus-circle","collapse-btn"],[1,"fas","fa-minus-circle"],[1,"switch"],["type","checkbox","value","true",3,"id","checked","name","ngClass","disabled","change"],[1,"slider","round"],[3,"ngClass"],[1,"multi-collapse",3,"ngClass"],[1,"custom-flex","custom-check-permission","ml-3"],[1,"box-of-permission","col-md-4"],["type","checkbox","value","true",3,"id","checked","name","disabled","change"],["class","fas fa-plus-circle",4,"ngIf"],[1,"fas","fa-plus-circle"],[1,"custom-flex","custom-check-permission","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-md-6","my-3","alert","alert-danger","fade","show"],[1,"btn-default","primary","px-3","mx-3",3,"click"],[1,"checkbox-column"],["type","checkbox",3,"id","name","checked","value","click"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["colspan","5",1,"no-data-available"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(d.YNc(0,K,70,36,"div",0),d.YNc(1,ee,14,5,"ng-template",null,1,d.W1O),d.YNc(3,te,14,5,"ng-template",null,2,d.W1O)),2&e&&d.Q6J("ngIf",t.pageAvailable)},directives:[u.O5,A.Fj,x.f,A.JJ,A.On,A._Y,A.JL,A.F,u.sg,T.w9,s.G,u.mk],styles:['table.roles-addtable td.dataTables_empty{display:none}.back-link-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   u[_ngcontent-%COMP%]{font-size:13px}.box-of-permission[_ngcontent-%COMP%]:first-child{border-right:.5px solid #dddddd}.box-of-permission[_ngcontent-%COMP%]{padding:8px;border-top:.5px solid #dddddd;vertical-align:middle;font-size:13px!important}.fa-plus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.fa-minus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.checkbox-ui[_ngcontent-%COMP%]:before{content:"";display:block;width:7px;height:0;border:solid #ffffff;border-width:0 2px 2px 0;transform:rotate(0);position:absolute;left:-14px;top:0px!important}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px;height:13px}a[aria-expanded=true][_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{display:none}a[aria-expanded=false][_ngcontent-%COMP%]   .fa-minus-circle[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}.switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]:disabled + .slider[_ngcontent-%COMP%]{cursor:not-allowed}@media only screen and (max-width: 425px){.add-user-btn[_ngcontent-%COMP%]{margin-top:20px}}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:22px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;right:2px;bottom:2px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0279ff}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #0279ff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(16px)}.slider.round[_ngcontent-%COMP%]{border-radius:18px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}input[type=checkbox][_ngcontent-%COMP%]{border:1px solid #ccc!important;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.custom-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.emptyRowSwitch[_ngcontent-%COMP%]{height:45px}.noWriteApi[_ngcontent-%COMP%]{opacity:.5}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px!important;height:13px!important}input[type=checkbox][_ngcontent-%COMP%] + .check-intermediate[_ngcontent-%COMP%]{left:0px!important;margin-top:2px!important}.checkbox-permission[_ngcontent-%COMP%]{position:relative}.checkbox-permission[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;margin-top:3.5px}.checkbox-permission[_ngcontent-%COMP%]   .check-intermediate[_ngcontent-%COMP%]{position:absolute!important}.check-intermediate[_ngcontent-%COMP%] + span.check-caption[_ngcontent-%COMP%]{margin-left:18px}span#user-all-delete-span[_ngcontent-%COMP%]{top:0px!important}']}),ie)},18890:function(e,t,i){i.d(t,{J:function(){return w}});var n=i(37716),s=i(49342),r=i(39895),l=i(30900),c=i(53668),d=i(89097),u=i(39075),g=i(20904),p=i(38583),h=i(3679),f=i(74062),m=["errorModal"];function v(e,t){1&e&&(n.TgZ(0,"div",44),n.TgZ(1,"div",45),n.TgZ(2,"div",46),n.TgZ(3,"span",47),n._uU(4,"Loading..."),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function Z(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",48),n.TgZ(1,"span",49),n._UZ(2,"img",50),n.qZA(),n.TgZ(3,"button",51),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",52),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.errorInfo,n.oJD)}}function b(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",53),n.TgZ(1,"span",54),n._UZ(2,"img",55),n.qZA(),n.TgZ(3,"button",51),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",56),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.successInfo,n.oJD)}}function A(e,t){if(1&e&&(n.TgZ(0,"div",57),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["This field is required"])}}function x(e,t){if(1&e&&(n.TgZ(0,"span",58),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["This field is required"])}}function T(e,t){if(1&e&&(n.TgZ(0,"span",58),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["Please enter a valid email address"])}}function _(e,t){if(1&e&&(n.TgZ(0,"span",59),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["This field is required"])}}function C(e,t){if(1&e&&(n.TgZ(0,"div",60),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["This field is required"])}}function y(e,t){if(1&e&&(n.TgZ(0,"div",60),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.hij("",i.language["Please enter the same value again"],".")}}var k,q=function(e){return[e]},w=((k=function(){function e(t,i,n,s,o,r,l){var c=this;a(this,e),this.commonOrgService=t,this.router=i,this.customTranslateService=n,this.organizationApiService=s,this.sso=o,this.titleService=r,this.CommonFunctionsService=l,this.pageAvailable=!1,this.add={username:"",firstName:"",lastName:"",email:"",idpType:"local",local:{orgId:"50",password:""}},this.errorTitle="",this.errorBody="",this.saveClicked=!1,this.formError=!1,this.emailError=!1,this.cpassError=!1,this.errorInfo="",this.successInfo="",this.isOrgAdminUsers=!1,this.MODULE="systemAdministration",this.sysAdminRoute="systemAdministration",this.loader=!1,this.showPassword=!1,this.showPasswords=!1;var d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.MODULE=this.sso.getRedirectModule(d),this.isOrgAdminUsers=this.checkOrgAdminUsers(d),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){c.language=e,c.titleService.setTitle("".concat(c.language.addUser," - ").concat("systemAdministration"===c.MODULE?c.language["System Administration"]:c.language.administration," - ").concat(c.language["Calix Cloud"]))}),this.commonOrgService.currentPageAdder("addUser"),this.checkAccess(),this.titleService.setTitle("".concat(this.language.addUser," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.saveClicked=!1,this.closeAlert()}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.addUserSubs&&this.addUserSubs.unsubscribe()}},{key:"addUser",value:function(){var e=this;if(this.saveClicked=!0,this.validate(),this.validateEmail(),!this.emailError){var t=this.add;this.formError||(t.username=this.addUserName,t.email=this.addUserEmail,t.firstName=this.addUserFirstName,t.lastName=this.addUserLastName,t.local.password=this.addUserPassword,t.local.orgId="".concat(this.ORG_ID),this.loader=!0,this.addUserSubs=this.organizationApiService.UserAdd(t).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["User registred successfully"],e.success=!0,e.commonOrgService.pageScrollTop(),e.loader=!1,setTimeout(function(){e.closeAlert(),e.goToUsersList()},1e3)},function(t){e.errorInfo=401==t.status?e.language["Access Denied"]:"string"==typeof t.error&&t.error.indexOf("already exists")>-1?e.language["Username already exists"]:"string"==typeof t.error?"".concat(t.error):"".concat(t.message),e.closeAlert(),e.error=!0,e.commonOrgService.pageScrollTop(),e.loader=!1}))}}},{key:"validate",value:function(){this.formError=!1,this.addUserName&&this.addUserEmail&&this.addUserPassword&&this.addUserCPassword&&this.addUserPassword==this.addUserCPassword||(this.formError=!0)}},{key:"validateEmail",value:function(){this.emailError=!this.commonOrgService.validateEmail(this.addUserEmail)}},{key:"validateConfirmPassword",value:function(){this.cpassError=!this.addUserPassword||this.addUserPassword!=this.addUserCPassword}},{key:"cancel",value:function(){this.goToUsersList()}},{key:"goToUsersList",value:function(){this.router.navigate(["".concat(this.MODULE,"/users")])}},{key:"close",value:function(){this.modalRef&&this.modalRef.close()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"checkOrgAdminUsers",value:function(e){var t;t=this.sso.getOrgSFID();var i=this.sso.getRoles();return!(this.sso.isSecureAccess()||!(e.indexOf("/organization-admin/")>-1)||void 0===t||""!=t&&null!=t||!i.includes("OrgAdmin"))}},{key:"checkAccess",value:function(){this.MODULE!=this.sysAdminRoute&&!this.isOrgAdminUsers&&this.router.navigate(["/unauthorize"])}},{key:"reset",value:function(){this.addUserName=void 0,this.addUserEmail=void 0,this.addUserFirstName=void 0,this.addUserLastName=void 0,this.addUserPassword=void 0,this.addUserCPassword=void 0}},{key:"toggleShowPassword",value:function(){this.showPassword=!this.showPassword}},{key:"toggleShowPasswords",value:function(){this.showPasswords=!this.showPasswords}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}}]),e}()).\u0275fac=function(e){return new(e||k)(n.Y36(s.v),n.Y36(r.F0),n.Y36(l.d),n.Y36(c.F),n.Y36(d.t6),n.Y36(u.Dx),n.Y36(g.i))},k.\u0275cmp=n.Xpm({type:k,selectors:[["app-add-user"]],viewQuery:function(e,t){var i;1&e&&n.Gf(m,7),2&e&&n.iGM(i=n.CRH())&&(t.errorModal=i.first)},decls:70,vars:47,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","my-3"],[1,"col-md-6"],[1,"ccl-title"],[1,"col-md-6","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"container","my-3","px-0"],["autocomplete","off"],[1,"row","my-4"],[1,"ccl-form","required",3,"ngClass"],["for","addUserName"],[1,"state-error","error"],["id","addUserName","name","addUserName","type","text","required","","maxlength","100","aria-required","true","aria-describedby","addUserName-error","aria-invalid","true","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],["id","addUserName-error","class","",4,"ngIf"],[1,"col-md-6","pr-0"],[1,"ccl-form",3,"ngClass"],["for","addUserEmail",1,"control-label"],[1,"error"],["id","addUserEmail","name","addUserEmail","type","text","required","","maxlength","100","aria-required","true","aria-describedby","addUserEmail-error","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","change","blur","keyup"],["id","addUserEmail-error","class","state-error",4,"ngIf"],[1,"ccl-form"],["for","addUserFirstName"],["id","addUserFirstName","name","addUserFirstName","type","text","maxlength","100","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],["for","addUserLastName"],["id","addUserLastName","name","addUserLastName","type","text","maxlength","100","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],[1,"col-md-6","detail-form"],["for","addUserPassword",1,"control-label"],["id","addUserPassword","name","addUserPassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","addUserPassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","change","keyup"],[1,"pwd-icon",3,"ngClass","click"],["id","addUserPassword-error","class","state-error",4,"ngIf"],[1,"ccl-form","confirm-password",3,"ngClass"],["for","confirmpassword",1,"control-label"],["id","confirmpassword","name","confirmpassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","confirmpassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","change","keyup"],[1,"",3,"ngClass","click"],["id","confirmpassword-error","class","ccl-error",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-4","offset-md-8","pr-0","text-right"],["type","submit",1,"btn-default","primary","mr-3",3,"click"],["type","submit",1,"btn-default","btn-dft","py-1",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"],["id","addUserName-error",1,""],["id","addUserEmail-error",1,"state-error"],["id","addUserPassword-error",1,"state-error"],["id","confirmpassword-error",1,"ccl-error"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,v,5,0,"div",1),n.YNc(2,Z,6,1,"div",2),n.YNc(3,b,6,1,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n._uU(7),n.qZA(),n.qZA(),n.TgZ(8,"div",7),n.TgZ(9,"div",8),n.TgZ(10,"a",9),n.NdJ("click",function(){return t.goToUsersList()}),n._UZ(11,"i",10),n._uU(12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"div",11),n.TgZ(14,"form",12),n.TgZ(15,"div",13),n.TgZ(16,"div",5),n.TgZ(17,"div",14),n.TgZ(18,"label",15),n._uU(19),n.TgZ(20,"span",16),n._uU(21,"*"),n.qZA(),n.qZA(),n.TgZ(22,"input",17),n.NdJ("ngModelChange",function(e){return t.addUserName=e})("blur",function(){return t.removeUnwantedSpace("addUserName",t.addUserName)}),n.qZA(),n.YNc(23,A,2,1,"div",18),n.qZA(),n.qZA(),n.TgZ(24,"div",19),n.TgZ(25,"div",20),n.TgZ(26,"label",21),n._uU(27),n.TgZ(28,"span",22),n._uU(29,"*"),n.qZA(),n.qZA(),n.TgZ(30,"input",23),n.NdJ("ngModelChange",function(e){return t.addUserEmail=e})("change",function(){return t.validateEmail()})("blur",function(){return t.removeUnwantedSpace("addUserEmail",t.addUserEmail)})("keyup",function(){return t.removeUnwantedSpace("addUserEmail",t.addUserEmail)}),n.qZA(),n.YNc(31,x,2,1,"span",24),n.YNc(32,T,2,1,"span",24),n.qZA(),n.qZA(),n.qZA(),n.TgZ(33,"div",13),n.TgZ(34,"div",5),n.TgZ(35,"div",25),n.TgZ(36,"label",26),n._uU(37),n.qZA(),n.TgZ(38,"input",27),n.NdJ("ngModelChange",function(e){return t.addUserFirstName=e})("blur",function(){return t.removeUnwantedSpace("addUserFirstName",t.addUserFirstName)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",19),n.TgZ(40,"div",25),n.TgZ(41,"label",28),n._uU(42),n.qZA(),n.TgZ(43,"input",29),n.NdJ("ngModelChange",function(e){return t.addUserLastName=e})("blur",function(){return t.removeUnwantedSpace("addUserLastName",t.addUserLastName)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(44,"div",13),n.TgZ(45,"div",30),n.TgZ(46,"div",14),n.TgZ(47,"label",31),n._uU(48),n.TgZ(49,"span",16),n._uU(50,"*"),n.qZA(),n.qZA(),n.TgZ(51,"input",32),n.NdJ("ngModelChange",function(e){return t.addUserPassword=e})("change",function(){return t.validateConfirmPassword()})("keyup",function(){return t.validateConfirmPassword()}),n.qZA(),n.TgZ(52,"span",33),n.NdJ("click",function(){return t.toggleShowPassword()}),n.qZA(),n.YNc(53,_,2,1,"span",34),n.qZA(),n.qZA(),n.TgZ(54,"div",19),n.TgZ(55,"div",35),n.TgZ(56,"label",36),n._uU(57),n.TgZ(58,"span",16),n._uU(59,"*"),n.qZA(),n.qZA(),n.TgZ(60,"input",37),n.NdJ("ngModelChange",function(e){return t.addUserCPassword=e})("change",function(){return t.validateConfirmPassword()})("keyup",function(){return t.validateConfirmPassword()}),n.qZA(),n.TgZ(61,"span",38),n.NdJ("click",function(){return t.toggleShowPasswords()}),n.qZA(),n.YNc(62,C,2,1,"div",39),n.YNc(63,y,2,1,"div",39),n.qZA(),n.qZA(),n.qZA(),n.TgZ(64,"div",40),n.TgZ(65,"div",41),n.TgZ(66,"button",42),n.NdJ("click",function(){return t.addUser()}),n._uU(67),n.qZA(),n.TgZ(68,"button",43),n.NdJ("click",function(){return t.cancel()}),n._uU(69),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loader),n.xp6(1),n.Q6J("ngIf",t.error),n.xp6(1),n.Q6J("ngIf",t.success),n.xp6(4),n.Oqu(t.language.addUser),n.xp6(5),n.hij(" ",t.language.backToUsersList," "),n.xp6(5),n.Q6J("ngClass",n.VKq(39,q,t.saveClicked&&!t.addUserName?"ccl-error":"")),n.xp6(2),n.Oqu(t.language.userName),n.xp6(3),n.s9C("placeholder",t.language["Enter Username"]),n.Q6J("ngModel",t.addUserName),n.xp6(1),n.Q6J("ngIf",t.saveClicked&&!t.addUserName),n.xp6(2),n.Q6J("ngClass",n.VKq(41,q,!t.saveClicked||t.addUserEmail&&!t.emailError?"":"ccl-error")),n.xp6(2),n.Oqu(t.language.emailAddess),n.xp6(3),n.s9C("placeholder",t.language["Enter email address"]),n.Q6J("ngModel",t.addUserEmail),n.xp6(1),n.Q6J("ngIf",t.saveClicked&&!t.addUserEmail),n.xp6(1),n.Q6J("ngIf",t.saveClicked&&t.addUserEmail&&t.emailError),n.xp6(5),n.Oqu(t.language.firstName),n.xp6(1),n.s9C("placeholder",t.language["Enter first name"]),n.Q6J("ngModel",t.addUserFirstName),n.xp6(4),n.Oqu(t.language.lastName),n.xp6(1),n.s9C("placeholder",t.language["Enter last name"]),n.Q6J("ngModel",t.addUserLastName),n.xp6(3),n.Q6J("ngClass",n.VKq(43,q,t.saveClicked&&!t.addUserPassword?"ccl-error":"")),n.xp6(2),n.Oqu(t.language.password),n.xp6(3),n.s9C("placeholder",t.language["Enter password"]),n.Q6J("ngModel",t.addUserPassword),n.uIk("type",t.showPassword?"text":"password"),n.xp6(1),n.Q6J("ngClass",t.showPassword?"password_view":"password_hide"),n.xp6(1),n.Q6J("ngIf",t.saveClicked&&!t.addUserPassword),n.xp6(2),n.Q6J("ngClass",n.VKq(45,q,t.saveClicked&&!t.addUserCPassword||t.addUserCPassword&&t.cpassError||t.addUserPassword&&!t.addUserCPassword?"ccl-error":"")),n.xp6(2),n.Oqu(t.language.confirmPassword),n.xp6(3),n.s9C("placeholder",t.language["Enter password"]),n.Q6J("ngModel",t.addUserCPassword),n.uIk("type",t.showPasswords?"text":"password"),n.xp6(1),n.Q6J("ngClass",t.showPasswords?"password_view":"password_hide"),n.xp6(1),n.Q6J("ngIf",t.saveClicked&&!t.addUserCPassword&&!t.cpassError||t.addUserPassword&&!t.addUserCPassword),n.xp6(1),n.Q6J("ngIf",t.addUserCPassword&&t.cpassError),n.xp6(4),n.Oqu(t.language.saveEnregistrer),n.xp6(2),n.Oqu(t.language.Cancel))},directives:[p.O5,h._Y,h.JL,h.F,p.mk,h.Fj,h.Q7,h.nD,f.f,h.JJ,h.On],styles:[".state-error[_ngcontent-%COMP%]{color:#c70000}.detail-form[_ngcontent-%COMP%]{position:relative}.detail-form[_ngcontent-%COMP%]   .password-eye-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:30px;font-size:16px;z-index:1;color:gray;padding-top:4px}.confirm-password[_ngcontent-%COMP%]{position:relative}.confirm-password[_ngcontent-%COMP%]   .password-eye-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:16px;font-size:16px;z-index:1;color:gray;padding-top:4px}.pwd-icon[_ngcontent-%COMP%]{right:25px}"]}),k)},61157:function(e,t,i){i.d(t,{h:function(){return H}});var n=i(92340),s=i(91841),r=i(37716),l=i(89097),c=i(39895),d=i(20408),u=i(7450),g=i(12664),p=i(49342),h=i(39075),f=i(38583),m=i(86640),v=i(3679),Z=i(74062);function b(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",22),r.TgZ(1,"span",23),r._UZ(2,"img",24),r.qZA(),r.TgZ(3,"button",25),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).isError=!1}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"span",26),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",n.language[n.errorMessage]||n.errorMessage,r.oJD)}}function A(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",27),r.TgZ(1,"span",28),r._UZ(2,"img",29),r.qZA(),r.TgZ(3,"button",25),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).success=!1}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"span",30),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",n.language[n.successInfo]||n.successInfo,r.oJD)}}function x(e,t){if(1&e&&(r.TgZ(0,"ng-option",31),r._uU(1),r.qZA()),2&e){var i=t.$implicit;r.Q6J("value",i.id),r.xp6(1),r.Oqu(i.name)}}function T(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"button",32),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).newStatus(!0)}),r._uU(1),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(1),r.hij(" ",n.language["New Status"],"")}}function _(e,t){if(1&e&&(r.TgZ(0,"div",33),r.TgZ(1,"div",34),r.TgZ(2,"div",35),r.TgZ(3,"span",36),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){var i=r.oxw(2);r.xp6(4),r.Oqu(i.language.Loading)}}function C(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"i",40),r.NdJ("click",function(){r.CHM(i);var e=r.oxw().$implicit;return r.oxw(2).editStatus(e,!0)}),r.qZA()}if(2&e){var n=r.oxw(3);r.s9C("title",n.language.Edit)}}function y(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"i",41),r.NdJ("click",function(){r.CHM(i);var e=r.oxw().$implicit;r.oxw();var t=r.MAs(39);return r.oxw().confirmDelete(t,e)}),r.qZA()}if(2&e){var n=r.oxw(3);r.s9C("title",n.language.Delete)}}function k(e,t){if(1&e&&(r.TgZ(0,"tr",37),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r.TgZ(4,"span"),r.YNc(5,C,1,1,"i",38),r.qZA(),r.TgZ(6,"span"),r.YNc(7,y,1,1,"i",39),r.qZA(),r.qZA(),r.qZA()),2&e){var i=t.$implicit,n=r.oxw(2);r.xp6(2),r.Oqu(i.name),r.xp6(3),r.Q6J("ngIf",n.calloutcomeWrite),r.xp6(2),r.Q6J("ngIf",n.calloutcomeWrite)}}function q(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",42),r.TgZ(2,"h5",43),r._uU(3),r.qZA(),r.TgZ(4,"button",44),r.NdJ("click",function(){return r.CHM(i).$implicit.close("close")}),r._UZ(5,"span",45),r.qZA(),r.qZA(),r.TgZ(6,"div",46),r.TgZ(7,"button",47),r.NdJ("click",function(){return r.CHM(i).$implicit.close("confirm")}),r._uU(8),r.qZA(),r.TgZ(9,"button",48),r.NdJ("click",function(){return r.CHM(i).$implicit.close("close")}),r._uU(10),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(3),r.hij("",n.language["Are you sure you want to delete"]+" ?"," "),r.xp6(5),r.hij(" ",n.language.Confirm," "),r.xp6(2),r.hij(" ",n.language.Cancel," ")}}function w(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"section"),r.YNc(1,b,6,1,"div",1),r.YNc(2,A,6,1,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"div",5),r.TgZ(6,"div",6),r._uU(7),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"div",7),r.TgZ(9,"div",4),r.TgZ(10,"div",8),r._uU(11),r.qZA(),r.TgZ(12,"div",5),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"div",9),r.TgZ(15,"div",10),r._uU(16),r.qZA(),r.TgZ(17,"div",11),r.TgZ(18,"ng-select",12),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().selectedTime=e}),r.YNc(19,x,2,2,"ng-option",13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"button",14),r.NdJ("click",function(){return r.CHM(i),r.oxw().updateTimer()}),r._uU(21),r.qZA(),r.TgZ(22,"div",7),r.TgZ(23,"div",4),r.TgZ(24,"div",8),r._uU(25),r.qZA(),r.qZA(),r.TgZ(26,"div",4),r.YNc(27,T,2,1,"button",15),r.qZA(),r.qZA(),r.TgZ(28,"div",16),r.YNc(29,_,5,1,"div",17),r.TgZ(30,"div",4),r.TgZ(31,"table",18),r.TgZ(32,"thead"),r.TgZ(33,"tr"),r.TgZ(34,"th"),r._uU(35),r.qZA(),r.qZA(),r.qZA(),r.TgZ(36,"tbody"),r.YNc(37,k,8,3,"tr",19),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(38,q,11,3,"ng-template",20,21,r.W1O),r.qZA()}if(2&e){var n=r.oxw();r.xp6(1),r.Q6J("ngIf",n.isError),r.xp6(1),r.Q6J("ngIf",n.success),r.xp6(5),r.Oqu(n.language["Call Outcome Status Settings"]),r.xp6(4),r.hij(" ",n.language["Call Outcome Timer"]," "),r.xp6(2),r.hij(" ",n.language["Call Outcome Timer Details"]," "),r.xp6(3),r.hij(" ",n.language["Call Outcome Timer"]," "),r.xp6(2),r.Q6J("ngModel",n.selectedTime),r.xp6(1),r.Q6J("ngForOf",n.timer),r.xp6(2),r.hij(" ",n.language["Save Timer"],""),r.xp6(4),r.hij(" ",n.language["Call Outcome Status"]," "),r.xp6(2),r.Q6J("ngIf",n.calloutcomeWrite),r.xp6(2),r.Q6J("ngIf",n.loading),r.xp6(6),r.Oqu(n.language.Status),r.xp6(2),r.Q6J("ngForOf",n.callOutComeStatuses)}}function O(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",22),r.TgZ(1,"span",23),r._UZ(2,"img",24),r.qZA(),r.TgZ(3,"button",25),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).isError=!1}),r._UZ(4,"span"),r.qZA(),r._UZ(5,"span",26),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(5),r.Q6J("innerHtml",n.language[n.errorMessage]||n.errorMessage,r.oJD)}}function S(e,t){if(1&e&&(r.TgZ(0,"label",85),r._uU(1),r.qZA()),2&e){var i=r.oxw(3);r.xp6(1),r.Oqu(i.language.Category_Name)}}function M(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"input",86),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().$implicit.categoryName=e}),r.qZA()}if(2&e){var n=r.oxw(),a=n.$implicit;r.MGl("name","categoryName_",n.index,""),r.Q6J("ngModel",a.categoryName)("formValue",a)}}function U(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",89),r.TgZ(1,"div",90),r.TgZ(2,"a",91),r.NdJ("click",function(){var e=r.CHM(i),t=e.index,n=e.$implicit,a=r.oxw(2).$implicit;return r.oxw(2).remove(a,t,n)}),r._UZ(3,"img",92),r.qZA(),r.TgZ(4,"label",93),r._uU(5),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=t.$implicit;r.xp6(5),r.Oqu(n)}}function D(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",89),r.TgZ(1,"input",94),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw(2).$implicit.subCategoryName=e})("blur",function(){r.CHM(i);var e=r.oxw(2).$implicit;return r.oxw(2).onBlurEvent(e)}),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngModel",n.subCategoryName)("formValue",n)}}function N(e,t){if(1&e&&(r.ynx(0),r.YNc(1,U,6,1,"div",87),r.YNc(2,D,2,2,"div",88),r.BQk()),2&e){var i=r.oxw().$implicit;r.xp6(1),r.Q6J("ngForOf",i.subCategories),r.xp6(1),r.Q6J("ngIf",i.enableSubCategoryName)}}function I(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",89),r.TgZ(1,"input",94),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw(2).$implicit.subCategoryName=e})("blur",function(){r.CHM(i);var e=r.oxw(2).$implicit;return r.oxw(2).onBlurEvent(e)}),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngModel",n.subCategoryName)("formValue",n)}}function E(e,t){if(1&e&&(r.ynx(0),r.YNc(1,I,2,2,"div",88),r.BQk()),2&e){var i=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",i.enableSubCategoryName)}}function F(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",95),r.TgZ(1,"a",96),r.NdJ("click",function(){r.CHM(i);var e=r.oxw().$implicit;return r.oxw(2).addDetailsOptions(e)}),r.TgZ(2,"span"),r._UZ(3,"img",97),r.qZA(),r._uU(4),r.qZA(),r.qZA()}if(2&e){var n=r.oxw().$implicit,a=r.oxw(2);r.xp6(1),r.Q6J("ngClass",n.statusForCategories?"":"disabled"),r.xp6(3),r.hij(" ",a.language["Add Details Options"],"")}}function P(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",78),r.TgZ(1,"div",79),r.TgZ(2,"div",80),r.TgZ(3,"a",54),r.NdJ("click",function(){var e=r.CHM(i).index;return r.oxw(2).removeCategory(e)}),r._UZ(4,"img",55),r.qZA(),r.qZA(),r.YNc(5,S,2,1,"label",81),r.YNc(6,M,1,3,"input",82),r.TgZ(7,"div",83),r.YNc(8,N,3,2,"ng-container",0),r.YNc(9,E,2,1,"ng-container",0),r.YNc(10,F,5,2,"div",84),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=t.$implicit,a=r.oxw(2);r.xp6(5),r.Q6J("ngIf","multiple"==a.callOutComeData.selection&&n.statusForCategories),r.xp6(1),r.Q6J("ngIf","multiple"==a.callOutComeData.selection&&n.statusForCategories),r.xp6(2),r.Q6J("ngIf",n.statusForCategories&&n.subCategories.length>0),r.xp6(1),r.Q6J("ngIf",n.statusForCategories&&0==n.subCategories.length),r.xp6(1),r.Q6J("ngIf",n.enableAddDetailsOption)}}function L(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",78),r.TgZ(1,"div",98),r.TgZ(2,"a",96),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).addCategory()}),r.TgZ(3,"span"),r._UZ(4,"img",99),r.qZA(),r._uU(5),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(2),r.Q6J("ngClass",n.callOutComeData.enableCheckCategories?"":"disabledCategories"),r.xp6(3),r.hij(" ",n.language["Add Category"],"")}}function J(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"section"),r.TgZ(1,"form",49),r.NdJ("ngSubmit",function(){return r.CHM(i),r.oxw().saveStatus()}),r.TgZ(2,"div",50),r.TgZ(3,"div",51),r.TgZ(4,"h1",6),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"div",52),r.TgZ(7,"button",53),r._uU(8),r.qZA(),r.TgZ(9,"a",54),r.NdJ("click",function(){return r.CHM(i),r.oxw().newStatus(!1)}),r._UZ(10,"img",55),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"div",56),r.YNc(12,O,6,1,"div",1),r.TgZ(13,"div",57),r.TgZ(14,"div",11),r.TgZ(15,"label"),r._uU(16),r.TgZ(17,"span",58),r._uU(18,"*"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"div",59),r.TgZ(20,"input",60),r.NdJ("keypress",function(e){return r.CHM(i),r.oxw().appAlphabetOnly(e)})("ngModelChange",function(e){return r.CHM(i),r.oxw().callOutComeData.statusName=e}),r.qZA(),r.qZA(),r.TgZ(21,"div",61),r.TgZ(22,"p",62),r._uU(23),r.qZA(),r.TgZ(24,"p"),r._uU(25),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"div",3),r.TgZ(27,"div",11),r.TgZ(28,"label"),r._uU(29),r.qZA(),r.qZA(),r.TgZ(30,"div",63),r.TgZ(31,"div",64),r.TgZ(32,"div",65),r.TgZ(33,"input",66),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().callOutComeData.selection=e})("change",function(e){return r.CHM(i),r.oxw().changeOption(e)}),r.qZA(),r.TgZ(34,"label",67),r._uU(35),r.qZA(),r.qZA(),r.TgZ(36,"div",65),r.TgZ(37,"input",68),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().callOutComeData.selection=e})("change",function(e){return r.CHM(i),r.oxw().changeOption(e)}),r.qZA(),r.TgZ(38,"label",69),r._uU(39),r.qZA(),r.qZA(),r.qZA(),r.TgZ(40,"div",70),r.TgZ(41,"div",71),r.TgZ(42,"input",72),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().callOutComeData.enableCheckCategories=e})("change",function(e){return r.CHM(i),r.oxw().enableCategoriesForStatus(e.target.checked)}),r.qZA(),r.TgZ(43,"label",73),r._uU(44),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(45,"div",3),r.TgZ(46,"div",11),r._uU(47),r.qZA(),r.TgZ(48,"div",74),r.TgZ(49,"ng-select",75),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().callOutComeData.statusType=e}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(50,"div",57),r.YNc(51,P,11,5,"div",76),r.YNc(52,L,6,2,"div",77),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu("AddStatus"==n.addOrUpdateStatus?n.language["New Status"]:n.language["Edit Status"]),r.xp6(3),r.hij(" ",n.language["Save Status"],""),r.xp6(4),r.Q6J("ngIf",n.isError),r.xp6(4),r.hij("",n.language["Status Name"]," "),r.xp6(4),r.s9C("placeholder",n.language["Enter Status Name"]),r.Q6J("ngModel",n.callOutComeData.statusName)("formValue",n.callOutComeData),r.xp6(3),r.hij("",n.language["Choose if multiple options can be selected as the cause of this status or if a single option has to be selected"],"."),r.xp6(2),r.hij("",n.language["You can also create multiple categories with options in each category for quickly identifying the root cause of status issues"],"."),r.xp6(4),r.Oqu(n.language["Status Structure"]),r.xp6(4),r.Q6J("ngModel",n.callOutComeData.selection),r.xp6(2),r.hij(" ",n.language["Select Only One Option"]," "),r.xp6(2),r.Q6J("ngModel",n.callOutComeData.selection),r.xp6(2),r.hij(" ",n.language["Select Multiple Options"]," "),r.xp6(3),r.Q6J("ngModel",n.callOutComeData.enableCheckCategories)("checked",n.callOutComeData.enableCheckCategories),r.xp6(2),r.hij(" ",n.language["Check to Enable Categories for Status Options"]," "),r.xp6(3),r.hij(" ",n.language["Status Type"]," "),r.xp6(2),r.Q6J("items",n.statusTypes)("ngModel",n.callOutComeData.statusType),r.xp6(2),r.Q6J("ngForOf",n.callOutComeData.categories),r.xp6(1),r.Q6J("ngIf","multiple"==n.callOutComeData.selection)}}var R,H=((R=function(){function e(t,i,n,s,o,r,l){a(this,e),this.sso=t,this.router=i,this.callOutComeService=n,this.translateService=s,this.dialogService=o,this.commonOrgService=r,this.titleService=l,this.isNewStatus=!1,this.categories=[],this.selectionChange=!0,this.callOutComeData={},this.categoriesDataCount=[],this.callOutComeStatuses=[],this.addOrUpdateStatus="AddStatus",this.restoreStatuses=[],this.errorMessage="",this.isError=!1,this.success=!1,this.loading=!1,this.previousStatusName="",this.timer=[],this.selectedTime=0,this.statusTypes=[];var c=this.router.url;this.ORG_ID=parseInt(this.sso.getOrganizationID(c)),this.commonOrgService.currentPageAdder("admin-call-outcome"),this.callOutComeData={statusName:"",selection:"multiple",categories:[],enableCheckCategories:!1,statusType:""},this.restoreStatuses=[],this.MODULE=this.sso.getRedirectModule(c)}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.getScopes(),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.timer=[{id:0,name:""},{id:30,name:"30 ".concat(e.language.Seconds)},{id:60,name:"60 ".concat(e.language.Seconds)},{id:90,name:"90 ".concat(e.language.Seconds)},{id:120,name:"120 ".concat(e.language.Seconds)}],e.titleService.setTitle("".concat(e.language.Call_Outcome," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.loadstatustypes(),this.getStatuses(),this.getTimer(),this.titleService.setTitle("".concat(this.language.Call_Outcome," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.timer=[{id:0,name:""},{id:30,name:"30 ".concat(this.language.Seconds)},{id:60,name:"60 ".concat(this.language.Seconds)},{id:90,name:"90 ".concat(this.language.Seconds)},{id:120,name:"120 ".concat(this.language.Seconds)}]}},{key:"loadstatustypes",value:function(){var e=this;this.callOutComeService.loadstatustypes().subscribe(function(t){e.statusTypes=[],(null==t?void 0:t.length)>0&&t.forEach(function(t){e.statusTypes.push({id:null==t?void 0:t.statusTypeCode,name:null==t?void 0:t.statusTypeName})})})}},{key:"getScopes",value:function(){var e=this.sso.getScopes();n.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.calloutcome.createview"]=e["cloud.rbac.csc.calloutcome.createview"]?e["cloud.rbac.csc.calloutcome.createview"]:[],e["cloud.rbac.csc.calloutcome.createview"]&&e["cloud.rbac.csc.calloutcome.createview"].includes("read")&&(this.calloutcomeRead=!0),e["cloud.rbac.csc.calloutcome.createview"]&&e["cloud.rbac.csc.calloutcome.createview"].includes("write")&&(this.calloutcomeWrite=!0)):(this.calloutcomeRead=!0,this.calloutcomeWrite=!0)}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}},{key:"getStatuses",value:function(){var e=this;this.loading=!0,this.callOutComeService.GetStatuses(this.ORG_ID).subscribe(function(t){null!=t&&t.length>0&&(e.callOutComeStatuses=t,e.restoreStatuses=[],t.forEach(function(t){e.restoreStatuses.push({name:t.name,isSelected:!1})})),e.loading=!1},function(t){e.loading=!1,e.isNewStatus=!0,e.pageModalErrorHandle(t)})}},{key:"newStatus",value:function(e){window.scroll({top:0,left:0,behavior:"smooth"}),e&&(this.clear(),this.previousSelection={},this.previousStatusName=""),this.addOrUpdateStatus="AddStatus",this.isNewStatus=e,this.categories=[{statusForCategories:!0,subCategories:[],categoryName:"",subCategoryName:"",enableAddDetailsOption:!0}],this.callOutComeData.categories=this.categories,this.callOutComeData.selection="multiple",this.callOutComeData.statusName="",this.callOutComeData.enableCheckCategories=!0,this.callOutComeData.statusType="",this.success=!1,this.isError=!1,this.loading=!1}},{key:"enableCategoriesForStatus",value:function(e){var t=!1;e&&(t=e),this.callOutComeData.categories.forEach(function(e){e.statusForCategories=t})}},{key:"addDetailsOptions",value:function(e){"multiple"==this.callOutComeData.selection?this.checkStringNullOrEmpty(e.categoryName)&&(e.enableSubCategoryName=!0,e.statusForCategories=!0,this.checkStringNullOrEmpty(e.subCategoryName)&&e.subCategories.push(e.subCategoryName),e.subCategoryName=""):(e.enableSubCategoryName=!0,e.statusForCategories=!0,this.checkStringNullOrEmpty(e.subCategoryName)&&e.subCategories.push(e.subCategoryName),e.subCategoryName="")}},{key:"checkStringNullOrEmpty",value:function(e){return""!=e&&null!=e&&null!=e}},{key:"addCategory",value:function(){this.callOutComeData.categories.push({statusForCategories:!0,subCategories:[],categoryName:"",subCategoryName:"",enableAddDetailsOption:!0})}},{key:"setFilter",value:function(e,t){this.categoryName=e.categoryName}},{key:"onBlurEvent",value:function(e){"multiple"==this.callOutComeData.selection?e.categoryName&&this.checkStringNullOrEmpty(e.subCategoryName)&&(e.subCategories.push(e.subCategoryName),e.enableAddDetailsOption=!0,e.enableSubCategoryName=!1,e.subCategoryName=""):this.checkStringNullOrEmpty(e.subCategoryName)&&(e.subCategories.push(e.subCategoryName),e.enableAddDetailsOption=!0,e.enableSubCategoryName=!1,e.subCategoryName="")}},{key:"remove",value:function(e,t,i){e.subCategories.splice(t,1)}},{key:"changeOption",value:function(e){this.callOutComeData.selection=e.target.value;var t=this.editData;"UpdateStatus"==this.addOrUpdateStatus?this.callOutComeData.selection==t.selection?this.commonMethod(t):this.clear():(this.editData={},this.clear())}},{key:"clear",value:function(){this.categories=[{statusForCategories:this.callOutComeData.enableCheckCategories,subCategories:[],categoryName:"",subCategoryName:"",enableAddDetailsOption:!0}],this.callOutComeData.categories=this.categories,this.callOutComeData.orgId=this.ORG_ID}},{key:"commonMethod",value:function(e){var t=this;if(this.callOutComeData.categories=[],this.callOutComeData.enableCheckCategories=!0,null!=e.categories){var i=Object.keys(e.categories),n=i.map(function(t){var i;return(null===(i=null==e?void 0:e.categories[t])||void 0===i?void 0:i.subcategories)||[]});if("multiple"==e.selection)i.forEach(function(e,i){t.callOutComeData.categories.push({statusForCategories:!0,subCategories:n[i],categoryName:e,subCategoryName:"",enableAddDetailsOption:!0})}),this.selectionChange=!0;else{var a={statusForCategories:this.callOutComeData.enableCheckCategories,subCategories:i,categoryName:"",subCategoryName:"",enableAddDetailsOption:!0};this.selectionChange=!1,this.callOutComeData.categories.push(a)}}this.previousSelection=e.selection,this.previousStatusName=e.name,this.callOutComeData.selection=e.selection,this.callOutComeData.statusName=e.name,this.callOutComeData.statusType=e.statusType}},{key:"editStatus",value:function(e,t){this.editData=e,this.addOrUpdateStatus="UpdateStatus",this.isNewStatus=t,this.commonMethod(e)}},{key:"saveStatus",value:function(){var e=this;window.scroll({top:0,left:0,behavior:"smooth"}),this.loading=!0,this.isError=!1;var t={};"multiple"==this.callOutComeData.selection?(this.callOutComeData.categories.forEach(function(i){t[i.categoryName]={subcategories:i.subCategories,selection:e.callOutComeData.selection}}),this.isError=!1):this.callOutComeData.categories.length>0?this.callOutComeData.categories[0].subCategories.forEach(function(i){t[i]={subcategories:null,selection:e.callOutComeData.selection}}):t={};var i={orgId:this.ORG_ID,selection:this.callOutComeData.selection,categories:t,name:this.callOutComeData.statusName,statusType:this.callOutComeData.statusType?this.callOutComeData.statusType:"-"};"AddStatus"==this.addOrUpdateStatus?this.callOutComeService.CreateStatus(i).subscribe(function(t){e.successInfo="Successfully Created",e.success=!0,e.isError=!1,e.isNewStatus=!1,e.getStatuses()},function(t){e.loading=!1,e.success=!1,e.isNewStatus=!0,e.pageModalErrorHandle(t)}):this.callOutComeService.UpdateStatus(i,this.previousStatusName).subscribe(function(t){e.isNewStatus=!1,e.success=!0,e.isError=!1,e.successInfo="Successfully Updated",e.getStatuses()},function(t){e.loading=!1,e.isNewStatus=!0,e.pageModalErrorHandle(t)})}},{key:"confirmDelete",value:function(e,t){var i=this;this.dialogService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(function(e){"confirm"==e&&i.deleteStatus(t)},function(e){})}},{key:"deleteStatus",value:function(e){var t=this;this.loading=!0,this.callOutComeService.DeleteStatus(this.ORG_ID,e.name).subscribe(function(e){t.success=!0,t.isError=!1,t.successInfo="Successfully Deleted",t.getStatuses()},function(e){t.loading=!1,t.isNewStatus=!0,t.pageModalErrorHandle(e)})}},{key:"pageModalErrorHandle",value:function(e){return this.isError=!0,this.errorMessage=401===e.status?this.language["Access Denied"]:this.callOutComeService.pageErrorHandle(e),this.errorMessage}},{key:"removeCategory",value:function(e){this.callOutComeData.categories.splice(e,1)}},{key:"appAlphabetOnly",value:function(e){var t=String.fromCharCode(e.keyCode);return!!/^[a-zA-Z ]*$/.test(t)||(e.preventDefault(),!1)}},{key:"updateTimer",value:function(){var e=this;this.loading=!0;var t=this.selectedTime?{orgId:this.ORG_ID,callOutcomeAbortTimer:this.selectedTime,csrName:localStorage["calix.username"]||""}:{params:(new s.LE).set("orgId",this.ORG_ID)};this.callOutComeService.updateOutcomeTimer(t,this.selectedTime).subscribe(function(t){e.loading=!1,e.success=!0,e.isError=!1,e.successInfo="Successfully Saved"},function(t){e.loading=!1,e.pageModalErrorHandle(t)})}},{key:"getTimer",value:function(){var e=this;this.loading=!0,this.callOutComeService.getOutcomeTimer(this.ORG_ID).subscribe(function(t){e.loading=!1,e.selectedTime=(null==t?void 0:t.abortTimer)||30},function(t){e.loading=!1,e.selectedTime=0})}}]),e}()).\u0275fac=function(e){return new(e||R)(r.Y36(l.t6),r.Y36(c.F0),r.Y36(d.K),r.Y36(u.s),r.Y36(g.FF),r.Y36(p.v),r.Y36(h.Dx))},R.\u0275cmp=r.Xpm({type:R,selectors:[["app-admin-call-outcome"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","w-100 alert alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,""],[1,"cco-title"],[1,"row","mt-3"],[1,"product-title"],[1,"row","my-4"],[1,"col-md-2"],[1,"col-md-3"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","Save-Timer",1,"btn-default","primary",3,"click"],["id","New-Status","class","btn-default primary",3,"click",4,"ngIf"],[1,"row","position-relative",2,"margin-top","50px"],["class","loader",4,"ngIf"],[1,"table","table-striped"],["class","d-flex justify-content-between",4,"ngFor","ngForOf"],["class","col-md-12"],["deletePopup",""],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",2,"width","85%","height","100%",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"],[3,"value"],["id","New-Status",1,"btn-default","primary",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"d-flex","justify-content-between"],["class","fas fa-pencil-alt primary mr-3",3,"title","click",4,"ngIf"],["class","far fa-trash-alt primary",3,"title","click",4,"ngIf"],[1,"fas","fa-pencil-alt","primary","mr-3",3,"title","click"],[1,"far","fa-trash-alt","primary",3,"title","click"],[1,"modal-header"],["id","deletePopup",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","button","id","removeDeviceConfirm",1,"btn-default","primary","px-3","mr-3","mt-5",3,"click"],["type","button","id","removeDeviceCancel",1,"btn-default","transparant","px-3","mr-3","mt-5",3,"click"],["name","saveStatusFrm","id","saveStatusFrm",3,"ngSubmit"],[1,"d-flex","justify-content-between","border-bottom"],[1,"col-sm-6","pl-0"],[1,"col-sm-6","text-right","pr-0"],["type","submit",1,"btn-default","primary"],[1,"close","ml-3",3,"click"],["src","../../../assets/img/close-icon.svg","alt","icon here"],[1,"col-md-12","ccl-form","p-0"],[1,"row","mt-20"],[1,"error"],[1,"col-md-5"],["name","statusName","trimSpace","",1,"acs-input",3,"placeholder","ngModel","formValue","keypress","ngModelChange"],[1,"col-md-12","mt-20"],[1,"m-0"],[1,"col-md-9"],[1,"row","my-2"],[1,"form-check","d-inline-flex"],["type","radio","name","exampleRadios","id","chkSelectOnlyOption","value","single",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","chkSelectOnlyOption",1,"form-check-label"],["type","radio","name","exampleRadios","id","chkMultipleOptions","value","multiple",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","chkMultipleOptions",1,"form-check-label"],[1,"row","my-3",2,"padding-left","22px"],[1,"form-check","call-outcome-checkbox","w-100"],["type","checkbox","id","defaultCheck1","name","enableCheckCategories",1,"form-check-input",3,"ngModel","checked","ngModelChange","change"],["for","defaultCheck1",1,"form-check-label"],[1,"col-md-4"],["bindLabel","name","bindValue","id","id","ddlStatusType","name","ddlStatusType",3,"items","ngModel","ngModelChange"],["class","col-md-6",4,"ngFor","ngForOf"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],[1,"box-syle","solid"],[2,"text-align","right","height","24px","position","absolute","right","30px"],["style","font-size: 15px;",4,"ngIf"],["type","text","class","mb-3","style","width: 90%;","trimSpace","",3,"ngModel","name","formValue","ngModelChange",4,"ngIf"],[1,"options-flex"],["class","op-item action-btn",4,"ngIf"],[2,"font-size","15px"],["type","text","trimSpace","",1,"mb-3",2,"width","90%",3,"ngModel","name","formValue","ngModelChange"],["class","op-item",4,"ngFor","ngForOf"],["class","op-item",4,"ngIf"],[1,"op-item"],[1,"call-outcome-lable"],[1,"rmv-icon",3,"click"],["src","../../../assets/img/close-icon.svg"],[1,"text-break","text-justify","text-wrap"],["type","text","name","subCategoryName","trimSpace","",3,"ngModel","formValue","ngModelChange","blur"],[1,"op-item","action-btn"],[1,"primary","add-ic",3,"ngClass","click"],["src","../../../assets/img/ic_add_blue.svg"],[1,"box-syle","box-style-center","dashed"],["src","../../../assets/img/ic_add_grey.svg"]],template:function(e,t){1&e&&(r.YNc(0,w,40,14,"section",0),r.YNc(1,J,53,22,"section",0)),2&e&&(r.Q6J("ngIf",!t.isNewStatus),r.xp6(1),r.Q6J("ngIf",t.isNewStatus))},directives:[f.O5,m.w9,v.JJ,v.On,f.sg,m.xv,v._Y,v.JL,v.F,v.Fj,Z.f,v._,v.Wl,f.mk],styles:['.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > td[_ngcontent-%COMP%], .table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > th[_ngcontent-%COMP%]{background:none}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f8f8fa}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-weight:400!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{line-height:32px;padding:0 5px!important;font-size:16px;font-weight:400!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none!important;border-bottom:1px solid #CCCCCC}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.box-syle[_ngcontent-%COMP%]{border-radius:24px;border-width:1px;border-color:#ddd;min-height:250px;padding:15px;margin-bottom:15px}.box-syle[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;font-weight:600;font-size:15px}.box-syle[_ngcontent-%COMP%]   .add-ic[_ngcontent-%COMP%]{position:relative;top:-2px}.box-syle[_ngcontent-%COMP%]   .add-ic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:8px}.dashed[_ngcontent-%COMP%]{border-style:dashed;border-color:#e2e2e2;border-width:2px}.solid[_ngcontent-%COMP%]{border-style:solid}.box-style-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.box-style-center[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#c5c5c5}.close[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.close[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{fill:#000}[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){position:absolute;left:-9999px}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], [type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;padding-left:20px;cursor:pointer;line-height:10px;display:inline-block}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, [type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:15px;height:15px;border:3px solid #0279FF;border-radius:100%;background:#fff}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after, [type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{content:"";width:7px;height:7px;background:#0279FF;position:absolute;top:4px;left:4px;border-radius:100%;transition:all .2s ease}[type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:after{opacity:0;transform:scale(0)}[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1;transform:scale(1)}.call-outcome-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto!important;min-height:0px!important;max-height:42px;line-height:inherit;border-radius:26px;background:#f8f8fa;padding:0 18px;font-size:14px;font-weight:400;color:#646363;border:1px solid transparent}.options-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]{margin-right:15px;margin-bottom:15px}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]{position:relative;background-color:#dcecff;color:#0058b9;border-radius:24px;min-width:100px;padding:2px 40px 5px 15px;text-align:center}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;font-weight:bold;font-size:15px}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]   a.rmv-icon[_ngcontent-%COMP%]{position:absolute;right:15px;cursor:pointer;padding:0;top:3px}.options-flex[_ngcontent-%COMP%]   .op-item[_ngcontent-%COMP%]   .call-outcome-lable[_ngcontent-%COMP%]   a.rmv-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:8px}.options-flex[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed;color:#c5c5c5}.disabledCategories[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}.fade-in[_ngcontent-%COMP%]{opacity:1;animation-name:fadeInOpacity;animation-timing-function:ease-in;animation-duration:.2s;-webkit-animation-name:fadeInOpacity;-webkit-animation-timing-function:ease-in;-webkit-animation-duration:.2s}@keyframes fadeInOpacity{0%{opacity:.5}to{opacity:1}}.error-img[_ngcontent-%COMP%]{width:38px;float:left;height:100%}.error-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.product-title[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px;border-bottom:1px solid #CCCCCC;padding-bottom:6px;margin-bottom:8px}']}),R)},56219:function(e,i,n){n.d(i,{i:function(){return q}});var s=n(38583),r=n(23771),l=n(79765),c=n(11067),d=n(23815),u=n(16738),g=n(37716),p=n(7450),h=n(20497),f=n(39895),m=n(89097),v=n(39075),Z=n(12664),b=n(48483),A=n(49342),x=["infoModal"];function T(e,t){if(1&e&&(g.TgZ(0,"div",17),g.TgZ(1,"div",18),g.TgZ(2,"span",19),g._uU(3),g.qZA(),g.qZA(),g.qZA()),2&e){var i=g.oxw();g.xp6(3),g.Oqu(i.language.Loading)}}function _(e,t){if(1&e&&(g.TgZ(0,"div",7),g.TgZ(1,"h5"),g._uU(2),g.qZA(),g.TgZ(3,"h1"),g._uU(4),g.qZA(),g.qZA()),2&e){var i=g.oxw();g.xp6(2),g.Oqu(i.language["Calls This Month"]),g.xp6(2),g.Oqu(null==i.currentMonthData?null:i.currentMonthData.count)}}function C(e,t){if(1&e&&(g.TgZ(0,"tr",20),g.TgZ(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.qZA()),2&e){var i=t.$implicit,n=t.index,a=g.oxw();g.s9C("id",n),g.xp6(2),g.AsE("",a.language[a.month[i.month.split("/")[0]]]||a.month[i.month.split("/")[0]],", ",i.month.split("/")[1],""),g.xp6(2),g.Oqu(i.count)}}function y(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",21),g.TgZ(1,"h4",22),g._uU(2),g.qZA(),g.TgZ(3,"button",23),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeModal()}),g._UZ(4,"span",24),g.qZA(),g.qZA(),g.TgZ(5,"div",25),g.TgZ(6,"div",4),g.TgZ(7,"p",26),g._uU(8),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"div",27),g.TgZ(10,"button",28),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeModal()}),g._uU(11),g.qZA(),g.qZA()}if(2&e){var n=g.oxw();g.xp6(2),g.Oqu(n.infoTitle),g.xp6(6),g.Oqu(n.infoBody),g.xp6(3),g.hij(" ",n.language.Okay," ")}}var k,q=((k=function(){function e(t,i,n,s,o,r,d,u){a(this,e),this.translateService=t,this.apiUsageService=i,this.router=n,this.sso=s,this.titleService=o,this.dialogService=r,this.dateUtils=d,this.commonOrgService=u,this.dtOptions={},this.dtTrigger=new l.xQ,this.orgApiStatus=[],this.month={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},this.apiUsageOptions={paging:!1,info:!1,lengthChange:!1,ordering:!1,searching:!1,dom:"tipr",retrieve:!1},this.loading=!1,this.Highcharts=c,this.tableData=[];var g=this.router.url;this.MODULE=this.sso.getRedirectModule(g),this.ORG_ID=this.sso.getOrganizationID(g),this.commonOrgService.currentPageAdder("api-usage")}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.getApiUsageQuota(),e.getData(),e.setTableOptions("language"),e.titleService.setTitle("".concat(e.language["API Usage"]," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language["API Usage"]," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.getData(),this.getApiUsageQuota(),this.tableLanguageOptions()}},{key:"ngAfterViewInit",value:function(){this.dtTrigger.next()}},{key:"getApiUsageQuota",value:function(){var e=this;this.loading=!0,this.apiUsageSub=this.apiUsageService.getaApiQuotaDetails(this.ORG_ID).subscribe(function(t){t&&(e.apiUsageData=t,e.apiUsageData.allowed_count&&(e.apiUsageData.allowed_count=(Math.round(100*e.apiUsageData.allowed_count)/100).toLocaleString())),e.loading=!1},function(t){e.pageErrorHandle(t)})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"openInfoModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal)}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),this.orgUsageStatusSub&&this.orgUsageStatusSub.unsubscribe(),this.apiUsageSub&&this.apiUsageSub.unsubscribe()}},{key:"setTableOptions",value:function(e){var t=this;this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.rerender()},200):this.loading=!1}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.apiUsageOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.apiUsageOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.apiUsageOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.apiUsageOptions.language&&delete this.apiUsageOptions.language}},{key:"makeOptionsForLineChart",value:function(){for(var e,t,i=this.language["API Calls"],n=this,a=[],o=[],r=new s.uU("en-US"),l=0;l<n.tableData.length;l++){if(u().format("MM/yyyy")==n.tableData[l].month){n.currentMonthData=n.tableData[l];break}u().subtract(1,"month").format("MM/yyyy")==n.tableData[l].month&&(n.currentMonthData=n.tableData[l])}for(var c=0;c<(null===(e=n.currentMonthData)||void 0===e?void 0:e.dailyCount.split(",").length);c++)o.push(Number(null===(t=n.currentMonthData)||void 0===t?void 0:t.dailyCount.split(",")[c])),a.push(r.transform(new Date(Number(n.currentMonthData.month.split("/")[1]),Number(n.currentMonthData.month.split("/")[0]-1),c+1),"MMM, dd"));return{chart:{type:"line",zoomType:"xy"},time:{useUTC:!1},title:{text:null},subtitle:{text:null},mapNavigation:{enableMouseWheelZoom:!0},tooltip:{formatter:function(){return"<b>".concat(this.x,"</b><br><b>").concat(n.language["API Calls"],": ").concat((Math.round(100*this.y)/100).toLocaleString(),"</b>")}},xAxis:{categories:a||[],tickInterval:1,labels:{allowOverlap:!1,maxStaggerLines:1}},yAxis:{title:{text:this.language["Daily API Calls"]},min:0,minRange:1},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal",symbolRadius:0},lang:{noData:this.language["No Data Available"]},plotOptions:{series:{marker:{enabled:!0}}},series:[{showInLegend:!1,name:i,color:"#0027FF",data:o||[]}],credits:{enabled:!1}}}},{key:"pageErrorHandle",value:function(e,t){var i="";this.infoTitle="Error",400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=this.language["Invalid request"],this.openInfoModal(),this.loading=!1):(i=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(i),this.commonOrgService.pageScrollTop(),this.loading=!1)}},{key:"getData",value:function(){var e=this;this.loading=!0,this.orgUsageStatusSub=this.apiUsageService.getOrgUsageStatus(this.ORG_ID).subscribe(function(i){var n,a,s=[];if(i&&(null==i?void 0:i.length)&&(null==i?void 0:i.length)>=6)i.forEach(function(e){var t=e.month.split("/");e.m=t[0],e.y=t[1]}),i=d.orderBy(i,["y","m"]),e.tableData=i;else if(i&&(null==i?void 0:i.length)&&(null==i?void 0:i.length)<6){var o=e.currentAndLastYearData(i),r=null===(a=null===(n=o.lastYearData[o.lastYearData.length-1])||void 0===n?void 0:n.month)||void 0===a?void 0:a.replace("/","/01/");s=e.generateMissingDates(r,i.length),e.tableData=[].concat(t(o.lastYearData),t(s)),e.tableData.reverse(),o.currentYearData.reverse(),e.tableData=[].concat(t(e.tableData),t(o.currentYearData))}else{var l=e.dateUtils.getFirstDayDateStr();e.tableData=e.generateMissingDates(l,0)}e.tableData.forEach(function(e){e.count=(Math.round(100*e.count)/100).toLocaleString()}),e.rerender();var c=e.makeOptionsForLineChart();e.Highcharts.chart("container",c),e.loading=!1},function(t){e.pageErrorHandle(t)})}},{key:"generateMissingDates",value:function(e,t){var i,n,a=[];if(!t){var s="".concat(null===(i=null==e?void 0:e.split("/"))||void 0===i?void 0:i[0],"/").concat(null===(n=null==e?void 0:e.split("/"))||void 0===n?void 0:n[2]);a.push({month:"".concat(s),count:0,dailyCount:""})}for(var o=1;o<=6-t;o++){var r=new Date(e);r.setMonth(r.getMonth()-o);var l=""+(r.getMonth()+1);l.length<2&&(l="0"+l),a.push({month:"".concat(l,"/").concat(r.getFullYear()),count:0,dailyCount:""})}if(!t){a.pop();var c=a.shift();a.push(c)}return a}},{key:"currentAndLastYearData",value:function(e){var t=[],i=[],n=[];return e.forEach(function(e){t.push(Number(e.month.split("/")[1])),e.month.split("/")[1]==Math.min.apply(null,t)?i.push(e):n.push(e)}),{lastYearData:i,currentYearData:n}}}]),e}()).\u0275fac=function(e){return new(e||k)(g.Y36(p.s),g.Y36(h.w),g.Y36(f.F0),g.Y36(m.t6),g.Y36(v.Dx),g.Y36(Z.FF),g.Y36(b.s),g.Y36(A.v))},k.\u0275cmp=g.Xpm({type:k,selectors:[["app-api-usage"]],viewQuery:function(e,t){var i;1&e&&(g.Gf(x,7),g.Gf(r.G,5)),2&e&&(g.iGM(i=g.CRH())&&(t.infoModal=i.first),g.iGM(i=g.CRH())&&(t.dtElement=i.first))},decls:33,vars:11,consts:[[1,"position-relative"],["class","no-data",4,"ngIf"],[1,"container","position-relative"],[1,"row"],[1,"w-100"],[1,"ccl-admin-title"],[1,"row","d-flex","w-100","flex-wrap","my-4"],[1,"dflex-item","pr-4"],["class","dflex-item pr-4",4,"ngIf"],[1,"col-12"],["id","container",1,"cco-traffic-reports-container"],[1,"col-md-12","px-0"],[1,"ccl-med-title","mb-3","pb-1"],[1,"table-responsive"],["datatable","",1,"call-list-table","table",3,"dtTrigger","dtOptions"],[3,"id",4,"ngFor","ngForOf"],["infoModal",""],[1,"no-data"],[1,"spinner-border","text-primary"],[1,"sr-only"],[3,"id"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"f-size-16px"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.YNc(1,T,4,1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"div",5),g._uU(6),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"div",6),g.TgZ(8,"div",7),g.TgZ(9,"h5"),g._uU(10),g.qZA(),g.TgZ(11,"h1"),g._uU(12),g.qZA(),g.qZA(),g.YNc(13,_,5,2,"div",8),g.qZA(),g.TgZ(14,"div",3),g.TgZ(15,"div",9),g._UZ(16,"div",10),g.qZA(),g.qZA(),g.TgZ(17,"div",3),g.TgZ(18,"div",11),g.TgZ(19,"div",12),g._uU(20),g.qZA(),g.TgZ(21,"div",13),g.TgZ(22,"table",14),g.TgZ(23,"thead"),g.TgZ(24,"tr"),g.TgZ(25,"th"),g._uU(26),g.qZA(),g.TgZ(27,"th"),g._uU(28),g.qZA(),g.qZA(),g.qZA(),g.TgZ(29,"tbody"),g.YNc(30,C,5,4,"tr",15),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(31,y,12,3,"ng-template",null,16,g.W1O)),2&e&&(g.xp6(1),g.Q6J("ngIf",t.loading),g.xp6(5),g.hij(" ",t.language["API Usage"]," "),g.xp6(4),g.Oqu(t.language["Monthly API Quota"]),g.xp6(2),g.Oqu((null==t.apiUsageData?null:t.apiUsageData.allowed_count)||0),g.xp6(1),g.Q6J("ngIf",t.currentMonthData),g.xp6(7),g.hij(" ",t.language["Calls in the last 6 months"]," "),g.xp6(2),g.Q6J("dtTrigger",t.dtTrigger)("dtOptions",t.apiUsageOptions),g.xp6(4),g.Oqu(t.language.Month),g.xp6(2),g.Oqu(t.language["Total Calls"]),g.xp6(2),g.Q6J("ngForOf",t.tableData))},directives:[s.O5,r.G,s.sg],styles:[".ccl-admin-title[_ngcontent-%COMP%]{color:#1a1f22}.dflex-item[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0054b2;font-weight:300;font-size:30px;line-height:32px}.dflex-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#1a1f22;font-weight:400;font-size:14px;line-height:16px;margin-bottom:0}.ccl-med-title[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px;border-bottom:1px solid #CCCCCC}.call-list-table[_ngcontent-%COMP%]{border-bottom:0!important}"]}),k)},75769:function(e,i,n){n.d(i,{F:function(){return H}});var s=n(23771),r=n(79765),l=n(35758),c=n(23815),d=n(37716),u=n(39895),g=n(7450),p=n(49342),h=n(89097),f=n(828),m=n(12664),v=n(38583),Z=["infoModal"];function b(e,t){if(1&e&&(d.TgZ(0,"div",17),d.TgZ(1,"div",18),d.TgZ(2,"div",19),d.TgZ(3,"span",20),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(4),d.Oqu(i.language.Loading)}}function A(e,t){if(1&e&&(d.TgZ(0,"section",21),d.TgZ(1,"div",22),d._UZ(2,"img",23),d.TgZ(3,"p",24),d._uU(4),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(4),d.Oqu(i.language["One or more applications cannot be audited due to missing domain name."])}}function x(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"span",25),d.NdJ("click",function(){return d.CHM(i),d.oxw().selectDeselectv4All(!0)}),d.qZA()}}function T(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"span",26),d.NdJ("click",function(){return d.CHM(i),d.oxw().selectDeselectv6All(!0)}),d.qZA()}}function _(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"span",31),d._uU(2),d.qZA(),d._UZ(3,"br"),d.BQk()),2&e){var i=t.$implicit;d.xp6(2),d.Oqu(i)}}function C(e,t){if(1&e&&(d.ynx(0),d.YNc(1,_,4,1,"ng-container",15),d.BQk()),2&e){var i=d.oxw(2).$implicit;d.xp6(1),d.Q6J("ngForOf",i.addressesV4.similarAddresses)}}function y(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"input",32),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(4).$implicit;return d.oxw().selectDeselectV4(e.target.checked,t,n,!0)}),d.qZA(),d.TgZ(2,"span",33),d.TgZ(3,"span",34),d._uU(4,"+"),d.qZA(),d._uU(5),d.qZA(),d.qZA()}if(2&e){var n=t.$implicit;d.xp6(1),d.MGl("id","inc_",n,""),d.MGl("name","v4_",n,""),d.xp6(4),d.Oqu(n)}}function k(e,t){if(1&e&&(d.ynx(0),d.YNc(1,y,6,3,"div",15),d.BQk()),2&e){var i=d.oxw(3).$implicit;d.xp6(1),d.Q6J("ngForOf",i.addressesV4.incrementalAddresses)}}function q(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"input",32),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(4).$implicit;return d.oxw().selectDeselectV4(e.target.checked,t,n,!1)}),d.qZA(),d.TgZ(2,"span",35),d.TgZ(3,"span",36),d._uU(4,"-"),d.qZA(),d._uU(5),d.qZA(),d.qZA()}if(2&e){var n=t.$implicit;d.xp6(1),d.MGl("id","dec_",n,""),d.MGl("name","v4_",n,""),d.xp6(4),d.hij(" ",n,"")}}function w(e,t){if(1&e&&(d.ynx(0),d.YNc(1,q,6,3,"div",15),d.BQk()),2&e){var i=d.oxw(3).$implicit;d.xp6(1),d.Q6J("ngForOf",i.addressesV4.decrementalAddresses)}}function O(e,t){if(1&e&&(d.ynx(0),d.YNc(1,k,2,1,"ng-container",29),d.YNc(2,w,2,1,"ng-container",29),d.BQk()),2&e){var i=d.oxw(2).$implicit;d.xp6(1),d.Q6J("ngIf",(null==i||null==i.addressesV4?null:i.addressesV4.incrementalAddresses)&&(null==i||null==i.addressesV4?null:i.addressesV4.incrementalAddresses.length)),d.xp6(1),d.Q6J("ngIf",(null==i||null==i.addressesV4?null:i.addressesV4.decrementalAddresses)&&(null==i||null==i.addressesV4?null:i.addressesV4.decrementalAddresses.length))}}function S(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"span",31),d._uU(2),d.qZA(),d.qZA()),2&e){var i=t.$implicit;d.xp6(2),d.hij(" ",i," ")}}function M(e,t){if(1&e&&(d.ynx(0),d.YNc(1,S,3,1,"div",15),d.BQk()),2&e){var i=d.oxw(2).$implicit;d.xp6(1),d.Q6J("ngForOf",i.addressesV6.similarAddresses)}}function U(e,t){if(1&e){var i=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"input",37),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(4).$implicit;return d.oxw().selectDeselectV6(e.target.checked,t,n,!0)}),d.qZA(),d.TgZ(3,"span",33),d.TgZ(4,"span",34),d._uU(5,"+"),d.qZA(),d._uU(6),d.qZA(),d.qZA(),d.BQk()}if(2&e){var n=t.$implicit;d.xp6(2),d.MGl("id","inc_v6_",n,""),d.MGl("name","v6_",n,""),d.xp6(4),d.hij("",n," ")}}function D(e,t){if(1&e&&(d.ynx(0),d.YNc(1,U,7,3,"ng-container",15),d.BQk()),2&e){var i=d.oxw(3).$implicit;d.xp6(1),d.Q6J("ngForOf",i.addressesV6.incrementalAddresses)}}function N(e,t){if(1&e){var i=d.EpF();d.ynx(0),d.TgZ(1,"div"),d.TgZ(2,"input",37),d.NdJ("change",function(e){var t=d.CHM(i).$implicit,n=d.oxw(4).$implicit;return d.oxw().selectDeselectV6(e.target.checked,t,n,!1)}),d.qZA(),d.TgZ(3,"span",35),d.TgZ(4,"span",36),d._uU(5,"-"),d.qZA(),d._uU(6),d.qZA(),d.qZA(),d.BQk()}if(2&e){var n=t.$implicit;d.xp6(2),d.MGl("id","dec_v6_",n,""),d.MGl("name","v6_",n,""),d.xp6(4),d.hij(" ",n," ")}}function I(e,t){if(1&e&&(d.ynx(0),d.YNc(1,N,7,3,"ng-container",15),d.BQk()),2&e){var i=d.oxw(3).$implicit;d.xp6(1),d.Q6J("ngForOf",i.addressesV6.decrementalAddresses)}}function E(e,t){if(1&e&&(d.ynx(0),d.YNc(1,D,2,1,"ng-container",29),d.YNc(2,I,2,1,"ng-container",29),d.BQk()),2&e){var i=d.oxw(2).$implicit;d.xp6(1),d.Q6J("ngIf",i.addressesV6.incrementalAddresses&&i.addressesV6.incrementalAddresses.length),d.xp6(1),d.Q6J("ngIf",i.addressesV6.decrementalAddresses&&i.addressesV6.decrementalAddresses.length)}}function F(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"td",30),d.TgZ(2,"div",28),d.YNc(3,C,2,1,"ng-container",29),d.YNc(4,O,3,2,"ng-container",29),d.qZA(),d.qZA(),d.TgZ(5,"td",30),d.TgZ(6,"div",28),d.YNc(7,M,2,1,"ng-container",29),d.YNc(8,E,3,2,"ng-container",29),d.qZA(),d.qZA(),d.BQk()),2&e){var i=d.oxw().$implicit;d.xp6(3),d.Q6J("ngIf",(null==i||null==i.addressesV4?null:i.addressesV4.similarAddresses)&&(null==i||null==i.addressesV4?null:i.addressesV4.similarAddresses.length)),d.xp6(1),d.Q6J("ngIf",null==i||null==i.addressesV4?null:i.addressesV4.varianceExists),d.xp6(3),d.Q6J("ngIf",i.addressesV6.similarAddresses&&i.addressesV6.similarAddresses.length),d.xp6(1),d.Q6J("ngIf",i.addressesV6.varianceExists)}}function P(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"td"),d.TgZ(2,"span",31),d.TgZ(3,"i"),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d._UZ(5,"td"),d.BQk()),2&e){var i=d.oxw(2);d.xp6(4),d.Oqu(i.language["Not audited due to missing domain name"])}}function L(e,t){if(1&e&&(d.TgZ(0,"tr"),d.TgZ(1,"td",27),d.TgZ(2,"div",28),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"td",27),d.TgZ(5,"div",28),d._uU(6),d.qZA(),d.qZA(),d.YNc(7,F,9,4,"ng-container",29),d.YNc(8,P,6,1,"ng-container",29),d.qZA()),2&e){var i=t.$implicit;d.xp6(3),d.Oqu(i.name||""),d.xp6(3),d.Oqu(i.domainName||""),d.xp6(1),d.Q6J("ngIf",null==i?null:i.auditExists),d.xp6(1),d.Q6J("ngIf",!(null!=i&&i.auditExists))}}function J(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"h4",39),d._uU(2),d.qZA(),d.TgZ(3,"button",40),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeModal()}),d._UZ(4,"span",41),d.qZA(),d.qZA(),d.TgZ(5,"div",42),d.TgZ(6,"div",43),d._UZ(7,"p",44),d.qZA(),d.qZA(),d.TgZ(8,"div",45),d.TgZ(9,"button",46),d.NdJ("click",function(){return d.CHM(i),d.oxw().closeModal()}),d._uU(10),d.qZA(),d.qZA()}if(2&e){var n=d.oxw();d.xp6(2),d.Oqu(n.infoTitle),d.xp6(5),d.Q6J("innerHTML",n.infoBody,d.oJD),d.xp6(3),d.hij(" ",n.language.Okay," ")}}var R,H=((R=function(){function e(t,i,n,s,o,l){var c,d,u,g=this;a(this,e),this.router=t,this.translateService=i,this.commonOrgService=n,this.sso=s,this.apiService=o,this.dialogService=l,this.dtTrigger=new r.xQ,this.dtOptions={ordering:!0,searching:!1,lengthChange:!1,paging:!1,info:!1,order:[0,"asc"],dom:"tipr",columnDefs:[{targets:[0,1,2,3],orderable:!0}]},this.auditList=[],this.selectedaddressV4=[],this.selectedaddressV6=[],this.show={auditExistCheck:!1,loading:!1,disabledv4All:!0,disabledv6All:!0,v4AllFullySelected:!1,v6AllFullySelected:!1,v4PartialSelectedSpan:!1,v6PartialSelectedSpan:!1};var p=this.router.url;this.MODULE=this.sso.getRedirectModule(p),this.ORG_ID=this.sso.getOrganizationID(p),this.commonOrgService.recordView.show=!0,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(e){g.language=e,g.tableLanguageOptions()});var h=null===(u=null===(d=null===(c=this.router.getCurrentNavigation())||void 0===c?void 0:c.extras)||void 0===d?void 0:d.state)||void 0===u?void 0:u.domainNameRes;h?this.auditList=h:(this.routeToDifinition(),this.commonOrgService.recordView.show=!1),this.show.auditExistCheck=this.checkForAuditExist(),this.disabledSelectAll(),setTimeout(function(){g.dtTrigger.next(),g.rerender()},50)}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.commonOrgService.recordView.show=!1,this.dtTrigger&&this.dtTrigger.unsubscribe()}},{key:"disabledSelectAll",value:function(){for(var e,t,i,n=0;n<this.auditList.length;n++)if(null===(t=null===(e=this.auditList[n])||void 0===e?void 0:e.addressesV4)||void 0===t?void 0:t.varianceExists){this.show.disabledv4All=!1;break}for(var a=0;a<this.auditList.length;a++)if(null===(i=this.auditList[a].addressesV6)||void 0===i?void 0:i.varianceExists){this.show.disabledv6All=!1;break}}},{key:"checkForAuditExist",value:function(){return this.auditList=this.auditList.filter(function(e){return e.name}),this.auditList.some(function(e){return!(null==e?void 0:e.auditExists)})}},{key:"routeToDifinition",value:function(){this.router.navigate(["/".concat(this.MODULE,"/flowAnalyze/applications/definitions")])}},{key:"selectDeselectv4All",value:function(e){var t=this;this.selectedaddressV4=[],e?(this.auditList.forEach(function(e){var i,n,a,s;e.auditExists&&(null===(i=e.addressesV4)||void 0===i?void 0:i.varianceExists)&&t.selectedaddressV4.push({id:e.id,orgId:e.orgId,addressesV4:null===(n=null==e?void 0:e.addressesV4)||void 0===n?void 0:n.incrementalAddresses,selectedDecrementalAddressV4:null===(a=null==e?void 0:e.addressesV4)||void 0===a?void 0:a.decrementalAddresses,similarAddressV4:null===(s=null==e?void 0:e.addressesV4)||void 0===s?void 0:s.similarAddresses})}),this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!0):(this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!1),this.checkUncheckAll('input[name^="v4_"]',e)}},{key:"selectDeselectv6All",value:function(e){var t=this;this.selectedaddressV6=[],e?(this.auditList.forEach(function(e){var i,n,a;e.auditExists&&(null===(i=e.addressesV6)||void 0===i?void 0:i.varianceExists)&&t.selectedaddressV6.push({id:e.id,orgId:e.orgId,addressesV6:e.addressesV6.incrementalAddresses,selectedDecrementalAddressV6:null===(n=null==e?void 0:e.addressesV6)||void 0===n?void 0:n.decrementalAddresses,similarAddressV6:null===(a=null==e?void 0:e.addressesV6)||void 0===a?void 0:a.similarAddresses})}),this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!0):(this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!1),this.checkUncheckAll('input[name^="v6_"]',e)}},{key:"checkUncheckAll",value:function(e,t){document.querySelectorAll(e).forEach(function(e){return e.checked=t})}},{key:"selectDeselectV6",value:function(e,t,i,n){var a,s,o,r=this.selectedaddressV6.findIndex(function(e){return e.id===i.id});if(e)-1!==r?n?this.selectedaddressV6[r].addressesV6.push(t):(this.selectedaddressV6[r].selectedDecrementalAddressV6.push(t),this.selectedaddressV6[r].decrementalAddressV6=this.selectedaddressV6[r].decrementalAddressV6.filter(function(e){return e!==t})):this.selectedaddressV6.push({id:i.id,orgId:i.orgId,addressesV6:n?[t]:[],decrementalAddressV6:n?null===(a=null==i?void 0:i.addressesV6)||void 0===a?void 0:a.decrementalAddresses:null===(s=null==i?void 0:i.addressesV6)||void 0===s?void 0:s.decrementalAddresses.filter(function(e){return e!==t}),selectedDecrementalAddressV6:n?[]:[t],similarAddressV6:null===(o=null==i?void 0:i.addressesV6)||void 0===o?void 0:o.similarAddresses});else{if(n){var l=this.selectedaddressV6[r].addressesV6.indexOf(t);this.selectedaddressV6[r].addressesV6.splice(l,1)}else{var c=this.selectedaddressV6[r].selectedDecrementalAddressV6.indexOf(t);this.selectedaddressV6[r].selectedDecrementalAddressV6.splice(c,1),this.selectedaddressV6[r].decrementalAddressV6.push(t)}!this.selectedaddressV6[r].addressesV6.length&&!this.selectedaddressV6[r].selectedDecrementalAddressV6.length&&(this.selectedaddressV6[r].similarAddressV6=[],this.selectedaddressV6[r].decrementalAddressV6=[])}document.querySelectorAll(".addressv6").length===document.querySelectorAll(".addressv6:checked").length?(this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!0):document.querySelectorAll(".addressv6:checked").length>0?(this.show.v6PartialSelectedSpan=!0,document.querySelector("#selectAllv6").checked=!1):(this.show.v6PartialSelectedSpan=!1,document.querySelector("#selectAllv6").checked=!1),this.selectedaddressV6&&(this.selectedaddressV6.find(function(e){return e.addressesV6.length||e.decrementalAddressV6.length||e.selectedDecrementalAddressV6.length})||(this.selectedaddressV6=[]))}},{key:"selectDeselectV4",value:function(e,t,i,n){var a,s,o,r=this.selectedaddressV4.findIndex(function(e){return e.id===i.id});if(e)-1!==r?n?this.selectedaddressV4[r].addressesV4.push(t):(this.selectedaddressV4[r].selectedDecrementalAddressV4.push(t),this.selectedaddressV4[r].decrementalAddressV4=this.selectedaddressV4[r].decrementalAddressV4.filter(function(e){return e!==t})):this.selectedaddressV4.push({id:i.id,orgId:i.orgId,addressesV4:n?[t]:[],decrementalAddressV4:n?null===(a=null==i?void 0:i.addressesV4)||void 0===a?void 0:a.decrementalAddresses:null===(s=null==i?void 0:i.addressesV4)||void 0===s?void 0:s.decrementalAddresses.filter(function(e){return e!==t}),selectedDecrementalAddressV4:n?[]:[t],similarAddressV4:null===(o=null==i?void 0:i.addressesV4)||void 0===o?void 0:o.similarAddresses});else{if(n){var l=this.selectedaddressV4[r].addressesV4.indexOf(t);this.selectedaddressV4[r].addressesV4.splice(l,1)}else{var c=this.selectedaddressV4[r].selectedDecrementalAddressV4.indexOf(t);this.selectedaddressV4[r].selectedDecrementalAddressV4.splice(c,1),this.selectedaddressV4[r].decrementalAddressV4.push(t)}!this.selectedaddressV4[r].addressesV4.length&&!this.selectedaddressV4[r].selectedDecrementalAddressV4.length&&(this.selectedaddressV4[r].similarAddressV4=[],this.selectedaddressV4[r].decrementalAddressV4=[])}document.querySelectorAll(".addressv4").length===document.querySelectorAll(".addressv4:checked").length?(this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!0):document.querySelectorAll(".addressv4:checked").length>0?(this.show.v4PartialSelectedSpan=!0,document.querySelector("#selectAllv4").checked=!1):(this.show.v4PartialSelectedSpan=!1,document.querySelector("#selectAllv4").checked=!1),this.selectedaddressV4&&(this.selectedaddressV4.find(function(e){return e.addressesV4.length||e.decrementalAddressV4.length||e.selectedDecrementalAddressV4.length})||(this.selectedaddressV4=[]))}},{key:"updateApplications",value:function(){var e=this;if(!this.selectedaddressV4.length&&!this.selectedaddressV6.length)return this.infoTitle=this.language["Invalid Value"],this.infoBody="No application selected",void this.openInfoModal();this.show.loading=!0;var i=[],n=[];Object.values(c.merge(c.groupBy(this.selectedaddressV4,"id"),c.groupBy(this.selectedaddressV6,"id"))).flat().forEach(function(a){var s={},o={};a&&a.decrementalAddressV4&&a.decrementalAddressV4.length&&(s.addressesV4=[].concat(t((null==a?void 0:a.decrementalAddressV4)||[]),t(a.similarAddressV4||[])).join(";")),a&&a.decrementalAddressV6&&a.decrementalAddressV6.length&&(s.addressesV6=[].concat(t((null==a?void 0:a.decrementalAddressV6)||[]),t((null==a?void 0:a.similarAddressV6)||[])).join(";")),a&&a.addressesV4&&a.addressesV4.length&&(o.addressesV4=[].concat(t((null==a?void 0:a.addressesV4)||[]),t((null==a?void 0:a.similarAddressV4)||[]),t((null==a?void 0:a.decrementalAddressV4)||[])).join(";")),a&&a.addressesV6&&a.addressesV6.length&&(o.addressesV6=[].concat(t(a.decrementalAddressV6||[]),t(a.similarAddressV6||[]),t(a.addressesV6||[])).join(";")),a&&a.selectedDecrementalAddressV4&&a.selectedDecrementalAddressV4.length&&a.addressesV4&&!a.addressesV4.length&&a.decrementalAddressV4&&!a.decrementalAddressV4.length&&(s.addressesV4=t(a.similarAddressV4||[]).join(";")),a&&a.selectedDecrementalAddressV6&&a.selectedDecrementalAddressV6.length&&a.addressesV6&&!a.addressesV6.length&&a.decrementalAddressV6&&!a.decrementalAddressV6.length&&(s.addressesV6=t(a.similarAddressV6||[]).join(";")),Object.keys(s).length&&i.push(e.apiService.applicationsPatch(a.id,s,a.orgId)),Object.keys(o).length&&n.push(e.apiService.applicationsPatch(a.id,o,a.orgId))}),(0,l.D)(i).subscribe(function(t){e.show.loading=!1,e.selectedaddressV4=[],e.selectedaddressV6=[],n.length||e.routeToDifinition()},function(t){e.show.loading=!1,e.pageErrorHandle(t)}),(0,l.D)(n).subscribe(function(t){e.show.loading=!1,e.selectedaddressV4=[],e.selectedaddressV6=[],e.routeToDifinition()},function(t){e.show.loading=!1,e.pageErrorHandle(t)})}},{key:"openInfoModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){var t="";if(this.infoTitle="Error",400==e.status||409==e.status){var i=this.commonOrgService.pageErrorHandle(e);409==e.status&&(i.toLowerCase().indexOf("already")>-1||i.toLowerCase().indexOf("already exists"))&&(i="Application name is already used"),this.infoBody=i,this.infoTitle=this.language["Invalid request"],this.openInfoModal(),this.show.loading=!1}else t=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.show.loading=!1}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"rerender",value:function(){var e,t=this;!(null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||this.dtElement.dtInstance.then(function(e){e.destroy(),t.dtTrigger.next()})}}]),e}()).\u0275fac=function(e){return new(e||R)(d.Y36(u.F0),d.Y36(g.s),d.Y36(p.v),d.Y36(h.t6),d.Y36(f.O),d.Y36(m.FF))},R.\u0275cmp=d.Xpm({type:R,selectors:[["app-applications-audit"]],viewQuery:function(e,t){var i;1&e&&(d.Gf(Z,7),d.Gf(s.G,5)),2&e&&(d.iGM(i=d.CRH())&&(t.infoModal=i.first),d.iGM(i=d.CRH())&&(t.dtElement=i.first))},decls:38,vars:19,consts:[["class","loader",4,"ngIf"],[1,"mt-3"],[1,"d-flex","justify-content-between","align-items-center","audit-header"],[1,"ccl-admin-title"],[1,"primary","text-decoration-none","cursor-pointer",3,"click"],[1,"btn-default","btn-primary","ml-3",3,"disabled","click"],["class","mt-4",4,"ngIf"],[1,"col-md-12"],["id","","datatable","",1,"w-100","hover","table-alter","dataTable","no-footer","audit-table",3,"dtOptions","dtTrigger"],[1,""],["type","checkbox","id","selectAllv4",3,"disabled","click","change"],["class","checkbox-ui","id","selectAllv4Span",3,"click",4,"ngIf"],[1,"ml-3"],["type","checkbox","id","selectAllv6",3,"disabled","click","change"],["class","checkbox-ui","id","selectAllv6Span",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"mt-4"],[1,"wrn-msg","alert","alert-warning","d-inline-flex","pr-3","align-items-center"],["src","../../../assets/img/ic_warning-36px.svg","alt","",1,"mx-2"],[1,"m-0"],["id","selectAllv4Span",1,"checkbox-ui",3,"click"],["id","selectAllv6Span",1,"checkbox-ui",3,"click"],[1,"py-3"],[1,"max-h-200"],[4,"ngIf"],[1,"align-top"],[1,"ml-4","pl-1"],["type","checkbox",1,"addressv4",3,"id","name","change"],[1,"ml-3","success-address"],[1,"text-success"],[1,"ml-3","err-address"],[1,"text-danger"],["type","checkbox",1,"addressv6",3,"id","name","change"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"w-100"],[1,"f-size-16px",3,"innerHTML"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){1&e&&(d.YNc(0,b,5,1,"div",0),d.TgZ(1,"section",1),d.TgZ(2,"div",2),d.TgZ(3,"h3",3),d._uU(4),d.qZA(),d.TgZ(5,"div"),d.TgZ(6,"a",4),d.NdJ("click",function(){return t.routeToDifinition()}),d._uU(7),d.qZA(),d.TgZ(8,"button",5),d.NdJ("click",function(){return t.updateApplications()}),d._uU(9),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(10,A,5,1,"section",6),d.TgZ(11,"p"),d._uU(12),d.qZA(),d.TgZ(13,"p"),d._uU(14),d.qZA(),d.TgZ(15,"section"),d.TgZ(16,"div",7),d.TgZ(17,"table",8),d.TgZ(18,"thead"),d.TgZ(19,"tr"),d.TgZ(20,"th",9),d._uU(21),d.qZA(),d.TgZ(22,"th"),d._uU(23),d.qZA(),d.TgZ(24,"th"),d.TgZ(25,"input",10),d.NdJ("click",function(e){return e.stopPropagation()})("change",function(e){return t.selectDeselectv4All(e.target.checked)}),d.qZA(),d.YNc(26,x,1,0,"span",11),d.TgZ(27,"span",12),d._uU(28),d.qZA(),d.qZA(),d.TgZ(29,"th"),d.TgZ(30,"input",13),d.NdJ("click",function(e){return e.stopPropagation()})("change",function(e){return t.selectDeselectv6All(e.target.checked)}),d.qZA(),d.YNc(31,T,1,0,"span",14),d.TgZ(32,"span",12),d._uU(33),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(34,"tbody"),d.YNc(35,L,9,4,"tr",15),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(36,J,11,3,"ng-template",null,16,d.W1O)),2&e&&(d.Q6J("ngIf",t.show.loading),d.xp6(4),d.Oqu(t.language.applications_audit),d.xp6(3),d.Oqu(t.language.Cancel),d.xp6(1),d.Q6J("disabled",!t.selectedaddressV4.length&&!t.selectedaddressV6.length),d.xp6(1),d.Oqu(t.language.accept),d.xp6(1),d.Q6J("ngIf",t.show.auditExistCheck),d.xp6(2),d.Oqu(t.language["The following configuration changes have been found."]),d.xp6(2),d.Oqu(t.language["Please review and select the changes you would like to accept."]),d.xp6(3),d.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),d.xp6(4),d.Oqu(t.language.applicationname),d.xp6(2),d.Oqu(t.language["Domain Name"]),d.xp6(2),d.Q6J("disabled",t.show.disabledv4All),d.xp6(1),d.Q6J("ngIf",t.show.v4PartialSelectedSpan),d.xp6(2),d.Oqu(t.language.applicationAddressIPV4),d.xp6(2),d.Q6J("disabled",t.show.disabledv6All),d.xp6(1),d.Q6J("ngIf",t.show.v6PartialSelectedSpan),d.xp6(2),d.Oqu(t.language.applicationAddressIPV6),d.xp6(2),d.Q6J("ngForOf",t.auditList))},directives:[v.O5,s.G,v.sg],styles:[".audit-header[_ngcontent-%COMP%]{border-bottom:2px solid #cccc}.err-address[_ngcontent-%COMP%]{background-color:#ffcdbf}.success-address[_ngcontent-%COMP%]{background-color:#e0efbf}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:40%}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:30%}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:20%}.audit-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.max-h-200[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.ml-29px[_ngcontent-%COMP%]{margin-left:29px!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:20%!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:25%!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:30%!important}.audit-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:30%!important}"]}),R)},86039:function(e,t,i){i.d(t,{N:function(){return x}});var n=i(37716),s=i(39895),r=i(49342),l=i(30900),c=i(56890),d=i(53668),u=i(89097),g=i(39075),p=i(38583),h=i(3679),f=i(86640);function m(e,t){if(1&e&&(n.TgZ(0,"div",21),n.TgZ(1,"div",22),n.TgZ(2,"div",23),n.TgZ(3,"span",24),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language.Loading)}}function v(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",25),n.TgZ(1,"span",26),n._UZ(2,"img",27),n.qZA(),n.TgZ(3,"button",28),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",29),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.errorInfo,n.oJD)}}function Z(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",30),n.TgZ(1,"span",31),n._UZ(2,"img",32),n.qZA(),n.TgZ(3,"button",28),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",33),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.successInfo,n.oJD)}}var b,A=function(){return{standalone:!0}},x=((b=function(){function e(t,i,n,s,o,r,l){var c=this;a(this,e),this.router=t,this.commonOrgService=i,this.customTranslateService=n,this.apiService=s,this.usersApiService=o,this.sso=r,this.titleService=l,this.pageAvailable=!1,this.usermail=[],this.reason=[],this.errorTitle="",this.errorBody="",this.dataAvailable=!1,this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.usersCount=0,this.loader=!0,this.noResultsFound="No results found";var d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.MODULE=this.sso.getRedirectModule(d),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){c.language=e,c.titleService.setTitle("".concat(c.language.deactivatedusers," - ").concat("systemAdministration"===c.MODULE?c.language["System Administration"]:c.language.administration," - ").concat(c.language["Calix Cloud"])),c.noResultsFound=c.language["No results found"]}),this.commonOrgService.currentPageAdder("blacklistAddUser"),this.getUserList(),this.titleService.setTitle("".concat(this.language.deactivatedusers," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.reason=[{name:this.language["User is not allowed to access"],value:"1"},{name:this.language["User has left the organization"],value:"2"},{name:this.language["User in the wrong org"],value:"3"}],this.reasonSelected="1",this.closeAlert(),this.noResultsFound=this.language["No results found"]}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.usersCountSubs&&this.usersCountSubs.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe(),this.userUpdateSubs&&this.userUpdateSubs.unsubscribe()}},{key:"getUserList",value:function(){var e=this;this.usersCountSubs=this.usersApiService.UsersCountByOrgId(this.ORG_ID).subscribe(function(t){e.usersCount=t,t?e.usersListSubs=e.usersApiService.UsersListByOrgId(e.ORG_ID,t).subscribe(function(t){e.usermail=t,e.dataAvailable=!0,e.loader=!1,t&&t.length&&(e.usermailSelected=t[0])},function(t){e.pageErrorHandle(t),e.usermail=[],e.dataAvailable=!0,e.loader=!1}):(e.usermail=[],e.dataAvailable=!0,e.loader=!1)},function(t){e.pageErrorHandle(t),e.usermail=[],e.dataAvailable=!0,e.loader=!1})}},{key:"save",value:function(){var e=this;if(!this.usermailSelected||null==this.usermailSelected)return this.errorInfo=this.language["Invalid username of deleted portal user"],this.error=!0,void this.commonOrgService.pageScrollTop();if(!this.reasonSelected||null==this.reasonSelected)return this.errorInfo=this.language["Invalid Request"],this.commonOrgService.pageScrollTop(),void(this.error=!0);var t={username:this.usermailSelected.username,firstName:this.usermailSelected.firstName?this.usermailSelected.firstName:"",lastName:this.usermailSelected.lastName?this.usermailSelected.lastName:"",reason:parseInt(this.reasonSelected)};this.loader=!0,this.userUpdateSubs=this.apiService.updateBlacklistUsersByOrgId(t,this.ORG_ID).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["User has been added successfully"],e.success=!0,e.commonOrgService.pageScrollTop(),e.loader=!1,setTimeout(function(){e.closeAlert(),e.goToUserList()},1e3)},function(t){e.pageErrorHandle(t),e.loader=!1})}},{key:"cancel",value:function(){this.goToUserList()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"goToUserList",value:function(){this.router.navigate(["".concat(this.MODULE,"/blacklist")])}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}]),e}()).\u0275fac=function(e){return new(e||b)(n.Y36(s.F0),n.Y36(r.v),n.Y36(l.d),n.Y36(c.s),n.Y36(d.F),n.Y36(u.t6),n.Y36(g.Dx))},b.\u0275cmp=n.Xpm({type:b,selectors:[["app-black-list-add-user"]],decls:36,vars:22,consts:[[1,"conatiner","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","my-3"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0","text-right"],[1,"text-right"],["id","backto-user-list",1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"col-md-6"],[1,"form-group"],["for","exampleFormControlSelect1"],[1,"req-text"],["id","usermail","bindLabel","username","placeholder","",3,"items","ngModel","ngModelOptions","searchable","notFoundText","clearable","ngModelChange"],[1,"col-md-6","pr-0"],["id","reasons","bindLabel","name","bindValue","value","placeholder","",3,"items","ngModel","ngModelOptions","searchable","clearable","ngModelChange"],[1,"col-md-10","offset-md-2","px-0","text-right"],["id","submit-deactivate",1,"btn-default","primary","mr-2",3,"click"],["id","cancel-deactivate",1,"btn-default","btn-dft","py-1",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,m,5,1,"div",1),n.YNc(2,v,6,1,"div",2),n.YNc(3,Z,6,1,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n._uU(7),n.qZA(),n.qZA(),n.TgZ(8,"div",7),n.TgZ(9,"div",8),n.TgZ(10,"a",9),n.NdJ("click",function(){return t.goToUserList()}),n._UZ(11,"i",10),n._uU(12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"div",4),n.TgZ(14,"div",11),n.TgZ(15,"form"),n.TgZ(16,"div",12),n.TgZ(17,"label",13),n._uU(18),n.TgZ(19,"span",14),n._uU(20,"*"),n.qZA(),n.qZA(),n.TgZ(21,"ng-select",15),n.NdJ("ngModelChange",function(e){return t.usermailSelected=e}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"div",16),n.TgZ(23,"form"),n.TgZ(24,"div",12),n.TgZ(25,"label",13),n._uU(26),n.TgZ(27,"span",14),n._uU(28,"*"),n.qZA(),n.qZA(),n.TgZ(29,"ng-select",17),n.NdJ("ngModelChange",function(e){return t.reasonSelected=e}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(30,"div",4),n.TgZ(31,"div",18),n.TgZ(32,"button",19),n.NdJ("click",function(){return t.save()}),n._uU(33),n.qZA(),n.TgZ(34,"button",20),n.NdJ("click",function(){return t.cancel()}),n._uU(35),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loader),n.xp6(1),n.Q6J("ngIf",t.error),n.xp6(1),n.Q6J("ngIf",t.success),n.xp6(4),n.hij("",t.language.searchUsersToDeactivate," "),n.xp6(5),n.hij(" ",t.language.backToUsersList," "),n.xp6(6),n.Oqu(t.language.user),n.xp6(3),n.s9C("notFoundText",t.noResultsFound),n.Q6J("items",t.usermail)("ngModel",t.usermailSelected)("ngModelOptions",n.DdM(20,A))("searchable",!0)("clearable",!1),n.xp6(5),n.Oqu(t.language.reason),n.xp6(3),n.Q6J("items",t.reason)("ngModel",t.reasonSelected)("ngModelOptions",n.DdM(21,A))("searchable",!1)("clearable",!1),n.xp6(4),n.Oqu(t.language.saveEnregistrer),n.xp6(2),n.Oqu(t.language.Cancel))},directives:[p.O5,h._Y,h.JL,h.F,f.w9,h.JJ,h.On],styles:[""]}),b)},43949:function(e,i,n){n.d(i,{X:function(){return M}});var s=n(23771),r=n(79765),l=n(35758),c=n(37716),d=n(49342),u=n(39895),g=n(56890),p=n(89097),h=n(12664),f=n(7450),m=n(39075),v=n(38583),Z=["deleteModal"],b=["errorModal"];function A(e,t){if(1&e&&(c.TgZ(0,"div",19),c.TgZ(1,"div",20),c.TgZ(2,"div",21),c.TgZ(3,"span",22),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw();c.xp6(4),c.Oqu(i.language.Loading)}}function x(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"span",24),c._UZ(2,"img",25),c.qZA(),c.TgZ(3,"button",26),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeAlert()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",27),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.Q6J("innerHtml",n.errorInfo,c.oJD)}}function T(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",28),c.TgZ(1,"span",29),c._UZ(2,"img",30),c.qZA(),c._UZ(3,"div",27),c.TgZ(4,"button",26),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeAlert()}),c._UZ(5,"span"),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(3),c.Q6J("innerHtml",n.successInfo,c.oJD)}}function _(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",31),c.TgZ(1,"button",32),c.NdJ("click",function(){return c.CHM(i),c.oxw().reActivate()}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.language.reactivate)}}function C(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"span",33),c.NdJ("click",function(){return c.CHM(i),c.oxw().clearSearch()}),c._UZ(1,"img",34),c.qZA()}}function y(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",37),c.TgZ(2,"input",44),c.NdJ("change",function(e){var t=c.CHM(i),n=t.$implicit,a=t.index;return c.oxw(3).levelOneChange(n,e.target.checked,a)}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(3);c.xp6(2),c.Gre(" activate_user_",n.username,""),c.s9C("id",n.username),c.MGl("name","activate_user_",n.username,""),c.xp6(2),c.Oqu(n.username),c.xp6(2),c.Oqu(n.deletedBy),c.xp6(2),c.Oqu(a.language[n.reasonText]),c.xp6(2),c.Oqu(a.changeDate(n.time))}}function k(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,y,11,9,"tr",43),c.qZA()),2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",i.blacklistTableData)}}function q(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",35),c.TgZ(1,"table",36),c.TgZ(2,"thead",16),c.TgZ(3,"tr"),c.TgZ(4,"th",37),c.TgZ(5,"input",38),c.NdJ("change",function(e){return c.CHM(i),c.oxw().selectDeselectAll(e.target.checked)}),c.qZA(),c.TgZ(6,"span",39),c.NdJ("click",function(e){return c.CHM(i),c.oxw().showAllUserCheckBox(e)}),c.qZA(),c.qZA(),c.TgZ(7,"th",40),c.NdJ("click",function(){return c.CHM(i),c.oxw().showNoDataAvailable()}),c._uU(8),c.qZA(),c.TgZ(9,"th",40),c.NdJ("click",function(){return c.CHM(i),c.oxw().showNoDataAvailable()}),c._uU(10),c.qZA(),c.TgZ(11,"th",40),c.NdJ("click",function(){return c.CHM(i),c.oxw().showNoDataAvailable()}),c._uU(12),c.qZA(),c.TgZ(13,"th",41),c.NdJ("click",function(){return c.CHM(i),c.oxw().showNoDataAvailable()}),c._uU(14),c.qZA(),c.qZA(),c.qZA(),c.YNc(15,k,2,1,"tbody",42),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(1),c.Q6J("dtOptions",n.tableOptions),c.xp6(4),c.Q6J("disabled",0==n.blacklistTableData.length||0==n.newArray.length),c.xp6(3),c.Oqu(n.language.userName),c.xp6(2),c.Oqu(n.language.deactivatedBy),c.xp6(2),c.Oqu(n.language.reason),c.xp6(2),c.Oqu(n.language.deactivatedDate),c.xp6(1),c.Q6J("ngIf",n.dataAvailable)}}function w(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",45),c.TgZ(1,"h4",46),c._uU(2),c.qZA(),c.TgZ(3,"button",47),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",48),c.qZA(),c.qZA(),c.TgZ(5,"div",49),c._uU(6),c._UZ(7,"br"),c._uU(8),c.qZA(),c.TgZ(9,"div",50),c.TgZ(10,"button",51),c.NdJ("click",function(){return c.CHM(i),c.oxw().confirmDeleteSecleted()}),c._uU(11),c.qZA(),c.TgZ(12,"button",52),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(13),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.modalTitle),c.xp6(4),c.hij(" ",n.language["Are you sure you want to reactivate"],"?"),c.xp6(2),c.hij(" (",n.modalInfo,") "),c.xp6(3),c.Oqu(n.language.yes),c.xp6(2),c.Oqu(n.language.no)}}var O,S=n(91704),M=((O=function(){function e(t,i,n,s,o,l,c){var d=this;a(this,e),this.commonOrgService=t,this.router=i,this.apiService=n,this.sso=s,this.dialogService=o,this.translateService=l,this.titleService=c,this.pageAvailable=!1,this.tableOptions={language:{emptyTable:"Aucune donn\xe9e disponible dans le tableau",info:"Affichage de _START_ \xe0 _END_ des _TOTAL_ entr\xe9es",infoEmpty:"Affichage de 0 \xe0 0 des 0 entr\xe9es",infoFiltered:"(filtr\xe9es \xe0 partir des _MAX_ entr\xe9es totales)",lengthMenu:"Afficher les _MENU_ entr\xe9es",loadingRecords:"Chargement...",thousands:",",infoPostFix:"",search:"Chercher:",zeroRecords:"zeroRecords",paginate:{first:"Le d\xe9but",last:"Derni\xe8re",next:"Suivant",previous:"Pr\xe9c\xe9dent"}},pagingType:"full_numbers",columnDefs:[{targets:[0],orderable:!1},{targets:"_all",orderable:!0}],dom:"tipr",order:[1,"asc"],drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&S(e.nTableWrapper).find("#deactivated-users-table_last").addClass("disabled"),d.table(e)}},this.dataAvailable=!1,this.selectedUsers=[],this.dtTrigger=new r.xQ,this.isRerender=!1,this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.newArray=[];var u=this.router.url;this.ORG_ID=this.sso.getOrganizationID(u),this.MODULE=this.sso.getRedirectModule(u),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){d.language=e,d.dataAvailable=!1,d.isRerender=!0,d.selectedUsers=[],d.titleService.setTitle("".concat(d.language.deactivatedusers," - ").concat("systemAdministration"===d.MODULE?d.language["System Administration"]:d.language.administration," - ").concat(d.language["Calix Cloud"])),d.setTableOptions("language")}),this.frTable=this.translateService.fr,this.getUsers(),this.titleService.setTitle("".concat(this.language.deactivatedusers," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngAfterViewInit",value:function(){this.rerender()}},{key:"ngOnInit",value:function(){this.closeAlert(),this.tableLanguageOptions(),this.commonOrgService.currentPageAdder("blacklist")}},{key:"ngOnDestroy",value:function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe()}},{key:"getUsers",value:function(){var e=this;this.usersListSubs=this.apiService.getBlacklistUsersByOrgId(this.ORG_ID).subscribe(function(i){i&&(e.blacklistTableData=t(i),e.setTableOptions())},function(t){e.blacklistTableData=[],e.dataAvailable=!0,setTimeout(function(){e.showNoDataAvailable()},0),e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()}),this.rerender()}},{key:"clearSearch",value:function(){var e=document.querySelector("#search-deactivated-user");e.value="",this.searchString=!1,this.dtElement.dtInstance.then(function(t){t.search(e.value).draw()})}},{key:"setTableOptions",value:function(e){var t=this;this.tableOptions={pagingType:"full_numbers",pageLength:10,processing:!0,lengthChange:!1,dom:"tipr",columnDefs:[{targets:[0],orderable:!1},{targets:"_all",orderable:!0}],order:[1,"asc"],drawCallback:function(e){t.newArray=e.aiDisplay,e.aoData.length<=e._iDisplayLength&&S(e.nTableWrapper).find("#deactivated-users-table_last").addClass("disabled"),t.table(e)}},this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.dataAvailable=!0},200):setTimeout(function(){t.dataAvailable=!0,t.hideSearch()},500),this.rerender()}},{key:"rerender",value:function(){var e,t=this;null===(e=this.dtElement)||void 0===e||e.dtInstance.then(function(e){e.destroy(),t.dtTrigger.next()})}},{key:"hideSearch",value:function(){setTimeout(function(){S("#blacklist-table .dataTables_wrapper .dataTables_filter").css("display","none"),S("#blacklist-table .dataTables_wrapper .dataTables_length").css("display","none")},100)}},{key:"search",value:function(e){var t,i,n=this;""==e&&(this.searchString=!1),null===(i=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===i||i.then(function(t){t.search(e).draw(),n.searchString=!0,n.showNoDataAvailable()})}},{key:"showNoDataAvailable",value:function(){setTimeout(function(){var e=document.querySelector(".dataTables_empty");e&&(e.style.display="table-cell",e.classList.add("text-center"))},100)}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"deactivateUser",value:function(){this.router.navigate(["".concat(this.MODULE,"/blacklistAddUser")])}},{key:"table",value:function(e){this.selectedUsers=[];for(var t=0;t>e.aoData.length;t++)this.blacklistTableData[t].checked=!1;this.selectDeselectAll(!1),S("#selectDeselectAll").prop("checked",!1),S("#selectDeselectAll-span").hide()}},{key:"selectDeselectAll",value:function(e){var t=0,i=this;e?S('input[name^="activate_user"]').each(function(){if(t>=10)return!1;S(this).prop("checked",!0),i.selectedUsers.push(S(this).attr("id")),t++}):S('input[name^="activate_user"]').each(function(){if(t>=10)return!1;S(this).prop("checked",!1),i.selectedUsers=[],t++}),this.validateCheck()}},{key:"levelOneChange",value:function(e,t,i){var n=this;if(S(".activate_user_".concat(i)).prop("checked",t),t){n.selectedUsers.push(e.username);var a=S('input[name^="activate_user"]').length;this.selectedUsers.length==a?(S("#selectDeselectAll").prop("checked",!0),S("#selectDeselectAll-span").hide()):S("#selectDeselectAll-span").show()}else{n.selectedUsers=n.selectedUsers.filter(function(t){return t!=e.username});var s=S('input[name^="activate_user"]').length;this.selectedUsers.length?this.selectedUsers.length!=s?(S("#selectDeselectAll").prop("checked",!1),S("#selectDeselectAll-span").show()):S("#selectDeselectAll-span").hide():(S("#selectDeselectAll").prop("checked",!1),S("#selectDeselectAll-span").hide())}this.validateCheck()}},{key:"validateCheck",value:function(){var e=document.querySelector(".mainChk"),i=document.querySelectorAll('input[name^="activate_user"]').length;this.selectedUsers=t(new Set(this.selectedUsers)),e.checked=this.selectedUsers.length==i}},{key:"reActivate",value:function(){var e=t(new Set(this.selectedUsers)).join(", ");this.modalTitle=this.language["Reactivate Users"],this.modalInfo=e,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDeleteSecleted",value:function(){var e=this;this.closeModal();var t=[];this.selectedUsers.forEach(function(i){t.push(e.apiService.ReactivatetUserByOrgId(i,e.ORG_ID))}),(0,l.D)(t).subscribe(function(t){e.selectedUsers=[],e.successInfo="".concat(e.language["User reactivated successfully"],"!"),e.success=!0,e.commonOrgService.pageScrollTop(),e.dataAvailable=!1,e.rerender(),e.getUsers(),document.getElementById("search-deactivated-user").value="",setTimeout(function(){e.closeAlert()},3e3)},function(t){e.pageErrorHandle(t)})}},{key:"changeDate",value:function(e){var t=new Date(e).toString().split("(");return t[1]=this.language[t[1].slice(0,-1)]||t[1].slice(0,-1),"".concat(t[0]," (").concat(t[1],")")}},{key:"showAllUserCheckBox",value:function(e){S("#"+e.target.id).hide(),S("#selectDeselectAll").prop("checked",!0),this.selectDeselectAll(!0)}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}]),e}()).\u0275fac=function(e){return new(e||O)(c.Y36(d.v),c.Y36(u.F0),c.Y36(g.s),c.Y36(p.t6),c.Y36(h.FF),c.Y36(f.s),c.Y36(m.Dx))},O.\u0275cmp=c.Xpm({type:O,selectors:[["app-black-list-users"]],viewQuery:function(e,t){var i;1&e&&(c.Gf(Z,7),c.Gf(s.G,5),c.Gf(b,7)),2&e&&(c.iGM(i=c.CRH())&&(t.deleteModal=i.first),c.iGM(i=c.CRH())&&(t.dtElement=i.first),c.iGM(i=c.CRH())&&(t.errorModal=i.first))},decls:24,vars:9,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"ccl-admin-title"],[1,"row","justify-content-end"],[1,"col-md-12","pr-0"],[1,"text-right","flat-right"],[1,"col-md-8","ccl-form"],["class","d-inline",4,"ngIf"],["id","deactivate-user-btn",1,"btn-default","primary","px-3","ml-3",3,"click"],[1,"col-md-4"],[1,"ccl-form"],["id","search-deactivated-user","type","text",1,"input-sm",3,"placeholder","keyup","search"],["class","clear-icon text-right",3,"click",4,"ngIf"],[1,""],["class","col",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img","d-inline-flex"],["src","./assets/img/success-icon.svg"],[1,"d-inline"],["id","reactivate-user-btn",1,"btn-default","primary","px-3",3,"click"],[1,"clear-icon","text-right",3,"click"],["src","../../../assets/img/close-icon.svg","alt",""],[1,"col"],["id","deactivated-users-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,"checkbox-column"],["type","checkbox","value","","id","selectDeselectAll",1,"mainChk",3,"disabled","change"],["id","selectDeselectAll-span",1,"checkbox-ui",2,"display","none",3,"click"],[3,"click"],[1,"deactivated",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","checkbox","value","",3,"id","name","change"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,A,5,1,"div",1),c.YNc(2,x,6,1,"div",2),c.YNc(3,T,6,1,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"div",8),c.TgZ(10,"div",6),c.TgZ(11,"div",9),c.YNc(12,_,3,1,"div",10),c.TgZ(13,"button",11),c.NdJ("click",function(){return t.deactivateUser()}),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"div",12),c.TgZ(16,"div",13),c.TgZ(17,"input",14),c.NdJ("keyup",function(e){return t.search(e.target.value)})("search",function(e){return t.search(e.target.value)}),c.qZA(),c.YNc(18,C,2,0,"span",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(19,"div",16),c.qZA(),c.qZA(),c.TgZ(20,"div",4),c.YNc(21,q,16,7,"div",17),c.qZA(),c.qZA(),c.YNc(22,w,14,5,"ng-template",null,18,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",!t.dataAvailable),c.xp6(1),c.Q6J("ngIf",t.error),c.xp6(1),c.Q6J("ngIf",t.success),c.xp6(3),c.hij("",t.language.deactivatedUsers," "),c.xp6(6),c.Q6J("ngIf",0!=t.selectedUsers.length),c.xp6(2),c.Oqu(t.language.searchUsersToDeactivate),c.xp6(3),c.s9C("placeholder",t.language.searchUsers),c.xp6(1),c.Q6J("ngIf",t.searchString),c.xp6(3),c.Q6J("ngIf",t.dataAvailable))},directives:[v.O5,s.G,v.sg],styles:["input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:2px;z-index:1;position:absolute;right:0px!important;display:inline-block;border:1px solid #0279FF;background:#0279FF;left:0px;top:12px!important}.deactivated[_ngcontent-%COMP%]{width:163px!important}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:28px;top:5px;width:12px;cursor:pointer}"]}),O)},72863:function(e,t,i){i.d(t,{C:function(){return u}});var n,s=i(37716),r=i(30900),l=i(49342),c=i(39895),d=["errorModal"],u=((n=function(){function e(t,i){a(this,e),this.customTranslateService=t,this.commonOrgService=i,this.formError=!1,this.hideACS=!0,this.hideAPI=!0,this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.errorTitle="",this.errorBody="",this.add={orgId:"",cpeAcsUrl:"",username:"",password:"",acsIPv6Url:"",apiURL:"",https:"",apiClientUsername:"",apiClientPassword:"",captiveurl:"",captiveproxy:""},this.speedDataadd={_id:"",downloadUrl:"",uploadUrl:"",uploadSize:"",username:"",password:"",name:"",apiClientUsername:"",apiClientPassword:"",url:""},this.MODULE="calixAdmin",this.orgInfo={_id:12884251,name:"(3455)Testing",description:"(3455)Testing",url:"http://gcs-dev.calix.com:8080/12884251/OfndSUM54r",username:"acs-user-uilhr",password:"qeAEKItGKwijGl1",apiClientUsername:"api-user-3JxyE",apiClientPassword:"D5i4zvTKg71WSUt",captivePortalUrl:"http://gcs-dev.calix.com:8080/12884251/OfndSUM54r",internalProxy:"http://gcs-dev.calix.com:8080/12884251/OfndSUM54r"},this.errorInfo="",this.successInfo="",this.spShowButtons=!1,this.acsShowButtons=!1,this.spDataAvail=!1,this.spSaveClicked=!1,this.spDownloadUrlErr=!1,this.spUploadurlErr=!1,this.spUploadSizeErr=!1,this.acsSaveClicked=!1,this.acsUsernameErr=!1,this.apiUsernameErr=!1,this.captiveUrlErr=!1,this.proxyErr=!1}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(t){e.language=t})}},{key:"ngOnDestroy",value:function(){this.commonOrgService.closeAlert()}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}}]),e}()).\u0275fac=function(e){return new(e||n)(s.Y36(r.d),s.Y36(l.v))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-calix-support-cloud"]],viewQuery:function(e,t){var i;1&e&&s.Gf(d,7),2&e&&s.iGM(i=s.CRH())&&(t.errorModal=i.first)},decls:4,vars:2,consts:[[1,"row","mb-3"],[1,"col-md-12","ccl-title"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._uU(2),s.qZA(),s.qZA(),s._UZ(3,"router-outlet")),2&e&&(s.xp6(2),s.AsE("",t.language.calixtitle," ",t.language.acssettings,""))},directives:[c.lC],styles:["section[_ngcontent-%COMP%]{padding:60px 0}section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-align:center;color:#007b5e;margin-bottom:50px;text-transform:uppercase}#tabs[_ngcontent-%COMP%]{background:#007b5e;color:#eee}#tabs[_ngcontent-%COMP%]   h6.section-title[_ngcontent-%COMP%]{color:#4c4c4c}#tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0279ff;background-color:transparent;border-color:transparent transparent #f3f3f3;border-bottom:1px solid!important;font-weight:bold}#tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;color:#eee;font-size:20px}"]}),n)},64697:function(e,t,i){i.d(t,{s:function(){return H}});var n=i(37716),s=i(7450),r=i(39895),l=i(89097),c=i(49342),d=i(39075),u=i(91841),g=i(9406),p=i(12664),h=i(38583),f=i(3679),m=i(74062),v=i(86640),Z=i(96718),b=["infoModal"];function A(e,t){if(1&e&&(n.TgZ(0,"div",54),n.TgZ(1,"div",55),n.TgZ(2,"div",56),n.TgZ(3,"span",57),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language.Loading)}}function x(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["Please enter the Chatbot Host URL."])}}function T(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Oqu(i.language["Please enter a valid URL."])}}function _(e,t){if(1&e&&(n.TgZ(0,"div",58),n.YNc(1,T,2,1,"div",24),n.qZA()),2&e){n.oxw();var i=n.MAs(35);n.xp6(1),n.Q6J("ngIf",null==i.errors?null:i.errors.pattern)}}function C(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Oqu(i.language["Please enter a valid Web Path."])}}function y(e,t){if(1&e&&(n.TgZ(0,"div",58),n.YNc(1,C,2,1,"div",24),n.qZA()),2&e){n.oxw();var i=n.MAs(42);n.xp6(1),n.Q6J("ngIf",null==i.errors?null:i.errors.pattern)}}function k(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language["Please enter the Chatbot Name."])}}function q(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Oqu(i.language["Please enter a valid URL."])}}function w(e,t){if(1&e&&(n.TgZ(0,"div",58),n.YNc(1,q,2,1,"div",24),n.qZA()),2&e){n.oxw();var i=n.MAs(67);n.xp6(1),n.Q6J("ngIf",null==i.errors?null:i.errors.pattern)}}function O(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",59),n.NdJ("click",function(){return n.CHM(i),n.oxw().chatbotHeaderBgColor=""}),n._UZ(1,"span"),n.qZA()}}function S(e,t){if(1&e&&(n.TgZ(0,"div",58),n.TgZ(1,"div",21),n._uU(2),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.Oqu(i.language["Please enter a Header Background Color"])}}function M(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",59),n.NdJ("click",function(){return n.CHM(i),n.oxw().chatbotWindowBgColor=""}),n._UZ(1,"span"),n.qZA()}}function U(e,t){if(1&e&&(n.TgZ(0,"div",58),n.TgZ(1,"div",21),n._uU(2),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.Oqu(i.language["Please enter a Window Background Color"])}}function D(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",59),n.NdJ("click",function(){return n.CHM(i),n.oxw().chatbotMessageTextColor=""}),n._UZ(1,"span"),n.qZA()}}function N(e,t){if(1&e&&(n.TgZ(0,"div",58),n.TgZ(1,"div",21),n._uU(2),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.Oqu(i.language["Please enter a Message Text Color"])}}function I(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",59),n.NdJ("click",function(){return n.CHM(i),n.oxw().chatbotMessageBubbleColor=""}),n._UZ(1,"span"),n.qZA()}}function E(e,t){if(1&e&&(n.TgZ(0,"div",58),n.TgZ(1,"div",21),n._uU(2),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij("",i.language["Please enter a Chatbot Message Bubble Color"]," ")}}function F(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",59),n.NdJ("click",function(){return n.CHM(i),n.oxw().customerMessageBubbleColor=""}),n._UZ(1,"span"),n.qZA()}}function P(e,t){if(1&e&&(n.TgZ(0,"div",58),n.TgZ(1,"div",21),n._uU(2),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij("",i.language["Please enter a Customer Message Bubble Color"]," ")}}function L(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",60),n.TgZ(1,"h4",61),n._uU(2),n.qZA(),n.TgZ(3,"button",62),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeModal()}),n._UZ(4,"span",63),n.qZA(),n.qZA(),n.TgZ(5,"div",64),n.TgZ(6,"div",65),n._UZ(7,"p",66),n.qZA(),n.qZA(),n.TgZ(8,"div",67),n.TgZ(9,"button",68),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeModal()}),n._uU(10),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(2),n.Oqu(a.infoTitle),n.xp6(5),n.Q6J("innerHTML",a.infoBody,n.oJD),n.xp6(3),n.hij(" ",a.language.Okay," ")}}var J,R=function(){return{standalone:!0}},H=((J=function(){function e(t,i,n,s,o,r,l,c){var d=this;a(this,e),this.translateService=t,this.router=i,this.sso=n,this.commonOrgService=s,this.titleService=o,this.httpClient=r,this.chatBotService=l,this.dialogService=c,this.chatbotHeaderBgColor="#E51A1A",this.chatbotWindowBgColor="#FFFFFF",this.chatbotMessageTextColor="#333333",this.chatbotMessageBubbleColor="#FCB4B4",this.customerMessageBubbleColor="#EDF5FF",this.fontSelected="Arial Sans Serif",this.loading=!1,this.patternvalidation=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,this.webPathPattern=/^\/.*[^\/]$/,this.saveClicked=!1;var u=this.router.url;this.MODULE=this.sso.getRedirectModule(u),this.commonOrgService.currentPageAdder("chatbot-create"),this.ORG_ID=this.sso.getOrganizationID(u),this.language=this.translateService.defualtLanguage,this.languageSub=this.translateService.selectedLanguage.subscribe(function(e){d.language=e}),this.titleService.setTitle("".concat(this.language.Chatbot," -  ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.saveClicked=!1,this.dspName=localStorage.getItem("calix.username")}},{key:"ngOnDestroy",value:function(){this.commonOrgService.errorAlert.subscribe()&&this.commonOrgService.closeAlerts.next()}},{key:"routeRedirectChatbot",value:function(){this.router.navigate(["/".concat(this.MODULE,"/chatbot")])}},{key:"saveChanges",value:function(){var e=this;this.saveClicked=!0,this.chatBotUrl&&this.chatbotName&&this.chatBotService.createChatBot({bspWebParentUrl:this.chatBotUrl,bspWebToolBarTitle:this.chatbotName,agentChatBubbleColor:this.chatbotMessageBubbleColor||"",bspName:this.dspName||"",customerChatBubbleColor:this.customerMessageBubbleColor||"",chatBotBackGroundColor:this.chatbotWindowBgColor||"",logoUrl:this.logoUrl||"",messageFont:this.fontSelected.$ngOptionLabel?this.fontSelected.$ngOptionLabel:this.fontSelected,messageTextColor:this.chatbotMessageTextColor||"",orgId:this.ORG_ID||"",toolBarColor:this.chatbotHeaderBgColor||"",bspWebAppPath:this.chatBotWebPath||""}).subscribe(function(t){e.loading=!0,e.router.navigate(["/".concat(e.MODULE,"/chatbot")])},function(t){e.pageErrorHandle(t)})}},{key:"openInfoModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){var t;t=400===e.status?e.error.errors[0]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1}}]),e}()).\u0275fac=function(e){return new(e||J)(n.Y36(s.s),n.Y36(r.F0),n.Y36(l.t6),n.Y36(c.v),n.Y36(d.Dx),n.Y36(u.eN),n.Y36(g.V),n.Y36(p.FF))},J.\u0275cmp=n.Xpm({type:J,selectors:[["app-chatbot-create"]],viewQuery:function(e,t){var i;1&e&&n.Gf(b,7),2&e&&n.iGM(i=n.CRH())&&(t.infoModal=i.first)},decls:141,vars:86,consts:[[1,"container","px-0"],["class","loader",4,"ngIf"],[1,"row","mb-4"],[1,"col-12","d-flex","justify-content-between","align-items-center","pb-2"],[1,"cco-title","d-inline-flex","align-items-center"],[1,"disabled-but","mt-2","ml-3"],[1,"dot"],[1,"ml-2"],[1,"d-inline-flex"],["type","button",1,"btn-default","btn-dft","ml-3",3,"click"],["type","button",1,"btn-default","btn-primary","ml-3",3,"disabled","click"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","border-bottom","pb-2"],[1,"cco-secondary-title"],[1,"pl-2"],["type","button","disabled","",1,"btn-default","btn-dft","btn-dload"],[1,"mt-2"],[1,"col-5","mb-4"],[1,"ccl-form"],["for","chatbotUrl"],[1,"error"],["id","chatbotUrl","name","chatbotUrl","type","text","required","","trimSpace","",3,"ngModel","pattern","ngModelChange"],["chatbotUrl","ngModel"],["class","error",4,"ngIf"],["class","errorMessage",4,"ngIf"],["for","chatbotWebPath"],["id","chatbotWebPath","name","chatbotWebPath","type","text","trimSpace","",3,"ngModel","pattern","ngModelChange"],["chatbotWebPath","ngModel"],[1,"w-100","border-bottom","pb-2"],[1,"col-11"],[1,"col-md-4","col-md-3","ccl-form"],[1,"form-group"],["type","text","name","chatName","id","chatName","required","",3,"ngModel","ngModelChange"],["chatName","ngModel"],["type","text","id","logourl","name","logourl","trimSpace","",3,"ngModel","pattern","ngModelChange"],["logourl","ngModel"],["clearable","false","searchable","false","editable","false",3,"ngModelOptions","ngModel","ngModelChange"],["aria-selected","true"],[1,"d-flex","justify-content-between","w-100","ccl-color-pick"],[1,"ccl-form","input-colorpicker"],["type","text","required","",1,"w-100",3,"ngModel","value","ngModelChange"],["headerBgColor","ngModel"],["class","close btn-custom-clear",3,"click",4,"ngIf"],["name","ChatbotHeaderBgColor","id","ChatbotHeaderBgColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["windowBgColor","ngModel"],["name","ChatbotWindowBgColor","id","ChatbotWindowBgColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["messageTextColor","ngModel"],["name","ChatbotMessageTextColor","id","ChatbotMessageTextColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["messageBubbleColor","ngModel"],["name","ChatbotMessageBubbleColor","id","ChatbotMessageBubbleColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["customerMessageColor","ngModel"],["name","customerMessageBubbleColor","id","chatbotMessageBubbleColor","autocomplete","off",1,"form-control","color-box",3,"colorPicker","ngModel","cpOutputFormat","cpPosition","colorPickerChange","ngModelChange"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"errorMessage"],[1,"close","btn-custom-clear",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"w-100"],[1,"f-size-16px",3,"innerHTML"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,A,5,1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"span"),n._uU(6),n.qZA(),n.TgZ(7,"span",5),n._UZ(8,"span",6),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",7),n.TgZ(11,"div",8),n.TgZ(12,"button",9),n.NdJ("click",function(){return t.routeRedirectChatbot()}),n._uU(13),n.qZA(),n.TgZ(14,"button",10),n.NdJ("click",function(){return t.saveChanges()}),n._uU(15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",11),n.TgZ(17,"div",12),n.TgZ(18,"div",13),n.TgZ(19,"div",14),n._uU(20),n.qZA(),n.TgZ(21,"div",15),n.TgZ(22,"button",16),n._uU(23),n.qZA(),n.qZA(),n.qZA(),n.TgZ(24,"div"),n.TgZ(25,"p",17),n._uU(26),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"div",11),n.TgZ(28,"div",18),n.TgZ(29,"div",19),n.TgZ(30,"label",20),n._uU(31),n.TgZ(32,"span",21),n._uU(33,"*"),n.qZA(),n.qZA(),n.TgZ(34,"input",22,23),n.NdJ("ngModelChange",function(e){return t.chatBotUrl=e}),n.qZA(),n.YNc(36,x,2,1,"div",24),n.YNc(37,_,2,1,"div",25),n.qZA(),n.TgZ(38,"div",19),n.TgZ(39,"label",26),n._uU(40),n.qZA(),n.TgZ(41,"input",27,28),n.NdJ("ngModelChange",function(e){return t.chatBotWebPath=e}),n.qZA(),n.YNc(43,y,2,1,"div",25),n.qZA(),n.qZA(),n.TgZ(44,"div",11),n.TgZ(45,"div",12),n.TgZ(46,"div",29),n.TgZ(47,"div",14),n._uU(48),n.qZA(),n.qZA(),n.TgZ(49,"div"),n.TgZ(50,"p",17),n._uU(51),n.qZA(),n.qZA(),n.qZA(),n.TgZ(52,"div",30),n.TgZ(53,"div",11),n.TgZ(54,"div",31),n.TgZ(55,"div",32),n.TgZ(56,"label"),n._uU(57),n.TgZ(58,"span",21),n._uU(59,"*"),n.qZA(),n.qZA(),n.TgZ(60,"input",33,34),n.NdJ("ngModelChange",function(e){return t.chatbotName=e}),n.qZA(),n.YNc(62,k,2,1,"div",24),n.qZA(),n.TgZ(63,"div",32),n.TgZ(64,"label"),n._uU(65),n.qZA(),n.TgZ(66,"input",35,36),n.NdJ("ngModelChange",function(e){return t.logoUrl=e}),n.qZA(),n.YNc(68,w,2,1,"div",25),n.qZA(),n.qZA(),n.TgZ(69,"div",31),n.TgZ(70,"div",32),n.TgZ(71,"label"),n._uU(72),n.qZA(),n.TgZ(73,"ng-select",37),n.NdJ("ngModelChange",function(e){return t.fontSelected=e}),n.TgZ(74,"ng-option",38),n._uU(75,"Arial Sans Serif"),n.qZA(),n.TgZ(76,"ng-option"),n._uU(77,"Monospace"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(78,"div",32),n.TgZ(79,"label"),n._uU(80),n.TgZ(81,"span",21),n._uU(82,"*"),n.qZA(),n.qZA(),n.TgZ(83,"div",39),n.TgZ(84,"div",40),n.TgZ(85,"input",41,42),n.NdJ("ngModelChange",function(e){return t.chatbotHeaderBgColor=e}),n.qZA(),n.YNc(87,O,2,0,"button",43),n.qZA(),n.TgZ(88,"input",44),n.NdJ("colorPickerChange",function(e){return t.chatbotHeaderBgColor=e})("ngModelChange",function(e){return t.chatbotHeaderBgColor=e}),n.qZA(),n.qZA(),n.YNc(89,S,3,1,"div",25),n.qZA(),n.TgZ(90,"div",32),n.TgZ(91,"label"),n._uU(92),n.TgZ(93,"span",21),n._uU(94,"*"),n.qZA(),n.qZA(),n.TgZ(95,"div",39),n.TgZ(96,"div",40),n.TgZ(97,"input",41,45),n.NdJ("ngModelChange",function(e){return t.chatbotWindowBgColor=e}),n.qZA(),n.YNc(99,M,2,0,"button",43),n.qZA(),n.TgZ(100,"input",46),n.NdJ("colorPickerChange",function(e){return t.chatbotWindowBgColor=e})("ngModelChange",function(e){return t.chatbotWindowBgColor=e}),n.qZA(),n.qZA(),n.YNc(101,U,3,1,"div",25),n.qZA(),n.qZA(),n.TgZ(102,"div",31),n.TgZ(103,"div",32),n.TgZ(104,"label"),n._uU(105),n.TgZ(106,"span",21),n._uU(107,"*"),n.qZA(),n.qZA(),n.TgZ(108,"div",39),n.TgZ(109,"div",40),n.TgZ(110,"input",41,47),n.NdJ("ngModelChange",function(e){return t.chatbotMessageTextColor=e}),n.qZA(),n.YNc(112,D,2,0,"button",43),n.qZA(),n.TgZ(113,"input",48),n.NdJ("colorPickerChange",function(e){return t.chatbotMessageTextColor=e})("ngModelChange",function(e){return t.chatbotMessageTextColor=e}),n.qZA(),n.qZA(),n.YNc(114,N,3,1,"div",25),n.TgZ(115,"div",32),n.TgZ(116,"label"),n._uU(117),n.TgZ(118,"span",21),n._uU(119,"*"),n.qZA(),n.qZA(),n.TgZ(120,"div",39),n.TgZ(121,"div",40),n.TgZ(122,"input",41,49),n.NdJ("ngModelChange",function(e){return t.chatbotMessageBubbleColor=e}),n.qZA(),n.YNc(124,I,2,0,"button",43),n.qZA(),n.TgZ(125,"input",50),n.NdJ("colorPickerChange",function(e){return t.chatbotMessageBubbleColor=e})("ngModelChange",function(e){return t.chatbotMessageBubbleColor=e}),n.qZA(),n.qZA(),n.YNc(126,E,3,1,"div",25),n.TgZ(127,"div",32),n.TgZ(128,"label"),n._uU(129),n.TgZ(130,"span",21),n._uU(131,"*"),n.qZA(),n.qZA(),n.TgZ(132,"div",39),n.TgZ(133,"div",40),n.TgZ(134,"input",41,51),n.NdJ("ngModelChange",function(e){return t.customerMessageBubbleColor=e}),n.qZA(),n.YNc(136,F,2,0,"button",43),n.qZA(),n.TgZ(137,"input",52),n.NdJ("colorPickerChange",function(e){return t.customerMessageBubbleColor=e})("ngModelChange",function(e){return t.customerMessageBubbleColor=e}),n.qZA(),n.qZA(),n.YNc(138,P,3,1,"div",25),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(139,L,11,3,"ng-template",null,53,n.W1O),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.MAs(35),a=n.MAs(42),s=n.MAs(61),o=n.MAs(67),r=n.MAs(86),l=n.MAs(98),c=n.MAs(111),d=n.MAs(123),u=n.MAs(135);n.xp6(1),n.Q6J("ngIf",t.loading),n.xp6(5),n.Oqu(t.language.Chatbot),n.xp6(3),n.hij(" ",t.language.Disabled," "),n.xp6(4),n.Oqu(t.language.Cancel),n.xp6(1),n.Q6J("disabled",u.invalid||d.invalid||c.invalid||l.invalid||r.invalid||(null==i.errors?null:i.errors.pattern)||(null==o.errors?null:o.errors.pattern)||i.touched&&(null==i.errors?null:i.errors.required)||s.touched&&(null==s.errors?null:s.errors.required)||a.invalid),n.xp6(1),n.Oqu(t.language["Save Changes"]),n.xp6(5),n.Oqu(t.language.Configuration),n.xp6(3),n.Oqu(t.language["Download Code Snippet"]),n.xp6(3),n.Oqu(t.language.Chatbot_Info_Message),n.xp6(5),n.Oqu(t.language["Chatbot Host URL"]),n.xp6(3),n.Q6J("ngModel",t.chatBotUrl)("pattern",t.patternvalidation),n.xp6(2),n.Q6J("ngIf",t.saveClicked&&(null==i.errors?null:i.errors.required)||i.touched&&(null==i.errors?null:i.errors.required)),n.xp6(1),n.Q6J("ngIf",i.invalid),n.xp6(3),n.Oqu(t.language["Web Path"]),n.xp6(1),n.Q6J("ngModel",t.chatBotWebPath)("pattern",t.webPathPattern),n.xp6(2),n.Q6J("ngIf",a.invalid),n.xp6(5),n.Oqu(t.language.Customization),n.xp6(3),n.Oqu(t.language.Customization_Msg),n.xp6(6),n.hij("",t.language["Chatbot Name"]," "),n.xp6(3),n.Q6J("ngModel",t.chatbotName),n.xp6(2),n.Q6J("ngIf",t.saveClicked&&(null==s.errors?null:s.errors.required)||s.touched&&(null==s.errors?null:s.errors.required)),n.xp6(3),n.Oqu(t.language["Logo URL"]),n.xp6(1),n.Q6J("ngModel",t.logoUrl)("pattern",t.patternvalidation),n.xp6(2),n.Q6J("ngIf",o.invalid),n.xp6(4),n.Oqu(t.language.Font),n.xp6(1),n.Q6J("ngModelOptions",n.DdM(85,R))("ngModel",t.fontSelected),n.xp6(7),n.hij("",t.language["Header Background Color"]," "),n.xp6(5),n.Q6J("ngModel",t.chatbotHeaderBgColor)("value",t.chatbotHeaderBgColor),n.xp6(2),n.Q6J("ngIf",t.chatbotHeaderBgColor),n.xp6(1),n.Udp("background",t.chatbotHeaderBgColor),n.Q6J("colorPicker",t.chatbotHeaderBgColor)("ngModel",t.chatbotHeaderBgColor)("cpOutputFormat","hex")("cpPosition","top-left"),n.xp6(1),n.Q6J("ngIf",r.invalid),n.xp6(3),n.hij("",t.language["Window Background Color"]," "),n.xp6(5),n.Q6J("ngModel",t.chatbotWindowBgColor)("value",t.chatbotWindowBgColor),n.xp6(2),n.Q6J("ngIf",t.chatbotWindowBgColor),n.xp6(1),n.Udp("background",t.chatbotWindowBgColor),n.Q6J("colorPicker",t.chatbotWindowBgColor)("ngModel",t.chatbotWindowBgColor)("cpOutputFormat","hex")("cpPosition","top-left"),n.xp6(1),n.Q6J("ngIf",l.invalid),n.xp6(4),n.hij("",t.language["Message Text Color"]," "),n.xp6(5),n.Q6J("ngModel",t.chatbotMessageTextColor)("value",t.chatbotMessageTextColor),n.xp6(2),n.Q6J("ngIf",t.chatbotMessageTextColor),n.xp6(1),n.Udp("background",t.chatbotMessageTextColor),n.Q6J("colorPicker",t.chatbotMessageTextColor)("ngModel",t.chatbotMessageTextColor)("cpOutputFormat","hex")("cpPosition","top-left"),n.xp6(1),n.Q6J("ngIf",c.invalid),n.xp6(3),n.hij("",t.language["Chatbot Message Bubble Color"]," "),n.xp6(5),n.Q6J("ngModel",t.chatbotMessageBubbleColor)("value",t.chatbotMessageBubbleColor),n.xp6(2),n.Q6J("ngIf",t.chatbotMessageBubbleColor),n.xp6(1),n.Udp("background",t.chatbotMessageBubbleColor),n.Q6J("colorPicker",t.chatbotMessageBubbleColor)("ngModel",t.chatbotMessageBubbleColor)("cpOutputFormat","hex")("cpPosition","top-left"),n.xp6(1),n.Q6J("ngIf",d.invalid),n.xp6(3),n.hij("",t.language["Customer Message Bubble Color"]," "),n.xp6(5),n.Q6J("ngModel",t.customerMessageBubbleColor)("value",t.customerMessageBubbleColor),n.xp6(2),n.Q6J("ngIf",t.customerMessageBubbleColor),n.xp6(1),n.Udp("background",t.customerMessageBubbleColor),n.Q6J("colorPicker",t.customerMessageBubbleColor)("ngModel",t.customerMessageBubbleColor)("cpOutputFormat","hex")("cpPosition","top-left"),n.xp6(1),n.Q6J("ngIf",u.invalid)}},directives:[h.O5,f.Fj,f.Q7,m.f,f.JJ,f.On,f.c5,v.w9,v.xv,Z.Kk],styles:[".disabled-but[_ngcontent-%COMP%]{background-color:#ebeaef;color:#4c4c4c;font-size:12px;font-weight:600;text-align:Center;padding:5px 8px;width:100px;border-radius:20px;line-height:15.08px;margin:2px 0}.disabled-but[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#4c4c4c;border-radius:50%;display:inline-block}.input-colorpicker[_ngcontent-%COMP%]{position:relative;min-width:135px}button.close.btn-custom-clear[_ngcontent-%COMP%]{position:absolute;right:5px;top:13px}button.close.btn-custom-clear[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-size:13px}.color-box[_ngcontent-%COMP%]{cursor:default!important;min-width:50px;max-width:77px;height:36px;border-radius:3px!important;font-size:0;box-shadow:none!important;margin-left:12px;border:1px solid #ced4da}button.btn-dload[_ngcontent-%COMP%]{font-size:14px;height:24px;padding:0 20px!important}button.btn-dload[_ngcontent-%COMP%]:disabled{background:#F8F8FA!important;border-color:#f8f8fa!important;opacity:.5;color:#1a1f22}.ccl-color-pick[_ngcontent-%COMP%]{max-width:300px}  .ccl-color-pick .color-picker{margin-top:-40px;margin-left:85px}  .ccl-color-pick .color-picker .arrow.arrow-top-left{display:none}"]}),J)},55908:function(e,t,i){i.d(t,{x:function(){return k}});var n=i(37716),s=i(7450),r=i(12664),l=i(39895),c=i(89097),d=i(49342),u=i(39075),g=i(20904),p=i(9406),h=i(38583);function f(e,t){if(1&e&&(n.TgZ(0,"div",31),n.TgZ(1,"div",32),n.TgZ(2,"div",33),n.TgZ(3,"span",34),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language.Loading)}}function m(e,t){if(1&e&&(n.TgZ(0,"span",35),n._UZ(1,"span",36),n._uU(2),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij(" ",i.language.Disabled," ")}}function v(e,t){if(1&e&&(n.TgZ(0,"span",37),n._UZ(1,"span",36),n._uU(2),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij(" ",i.language["Enablement in progress"]," ")}}function Z(e,t){if(1&e&&(n.TgZ(0,"span",38),n._UZ(1,"span",36),n._uU(2),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij(" ",i.language["Chatbot enabled"]," ")}}function b(e,t){if(1&e&&(n.TgZ(0,"span",37),n._UZ(1,"span",36),n._uU(2),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij(" ",i.language["Deletion in progress"]," ")}}function A(e,t){if(1&e&&(n.TgZ(0,"span",39),n._UZ(1,"span",36),n._uU(2),n.qZA()),2&e){var i=n.oxw();n.xp6(2),n.hij(" ",i.language.Failed," ")}}function x(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",40),n.NdJ("click",function(){n.CHM(i);var e=n.oxw(),t=n.MAs(116);return e.openDeleteModal(t)}),n._uU(1),n.qZA()}if(2&e){var a=n.oxw();n.Q6J("disabled",a.deleteInprocess)("ngClass",a.deleteInprocess?"diasble-color":"primary"),n.xp6(1),n.hij(" ",a.language["Delete Chatbot"]," ")}}function T(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",41),n.NdJ("click",function(){return n.CHM(i),n.oxw().routeToCreateChatbot()}),n._uU(1),n.qZA()}if(2&e){var a=n.oxw();n.xp6(1),n.hij(" ",a.language["Set Up"]," ")}}function _(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"button",43),n.NdJ("click",function(){return n.CHM(i).$implicit.dismiss("Cross click")}),n._UZ(2,"span",44),n.qZA(),n.TgZ(3,"div",45),n.TgZ(4,"div",46),n.TgZ(5,"div",47),n._UZ(6,"span"),n.qZA(),n.TgZ(7,"div",48),n.TgZ(8,"div",49),n._uU(9),n.qZA(),n.TgZ(10,"div",50),n.TgZ(11,"p"),n._uU(12),n.qZA(),n.TgZ(13,"p",51),n._uU(14),n.qZA(),n.qZA(),n.TgZ(15,"div",52),n.TgZ(16,"button",53),n.NdJ("click",function(){return n.CHM(i),n.oxw().deleteChatbot()}),n._uU(17),n.qZA(),n.TgZ(18,"button",54),n.NdJ("click",function(){return n.CHM(i).$implicit.close("Close click")}),n._uU(19),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(9),n.hij(" ",a.language["Are you sure you want to delete chatbot?"]," "),n.xp6(3),n.hij(" ",a.language.deletion_info_msg," "),n.xp6(2),n.Oqu(a.language["This action cannot be undone"]),n.xp6(3),n.hij(" ",a.language["Delete Chatbot"]," "),n.xp6(2),n.hij(" ",a.language.Cancel," ")}}var C,y=function(e){return{"background-color":e}},k=((C=function(){function e(t,i,n,s,o,r,l,c){var d=this;a(this,e),this.translateService=t,this.dialogService=i,this.router=n,this.sso=s,this.commonOrgService=o,this.titleService=r,this.common=l,this.chatBotService=c,this.chatbotHeaderBgColor="#E51A1A",this.chatbotWindowBgColor="#FFFFFF",this.chatbotMessageTextColor="#333333",this.chatbotMessageBubbleColor="#FCB4B4",this.customerMessageBubbleColor="#EDF5FF",this.chatbotMessageColor="#F44336",this.logoUrl="http://",this.fontSelected="Arial Sans Serif",this.loading=!1,this.disabledChatBot=!1,this.inProgress=!1,this.enableChatBot=!1,this.enableSetUp=!1,this.deleteChatPot=!1,this.chatBotConfigured=!0,this.deleteInprogress=!1,this.failedChatBot=!1,this.deleteInprocess=!1;var u=this.router.url;this.MODULE=this.sso.getRedirectModule(u),this.commonOrgService.currentPageAdder("chatbot"),this.ORG_ID=this.sso.getOrganizationID(u),this.language=this.translateService.defualtLanguage,this.languageSub=this.translateService.selectedLanguage.subscribe(function(e){d.language=e}),this.titleService.setTitle("".concat(this.language.Chatbot," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.scopes=this.sso.getScopes(),this.getData()}},{key:"getData",value:function(){var e=this;this.loading=!0,this.chatBotService.verifyChatBotConfig(this.ORG_ID).subscribe(function(t){var i,n,a,s;e.loading=!1,"DELETE_IN_PROGRESS"==(null===(i=t[0])||void 0===i?void 0:i.cloudStackStatus)?(e.enableChatBot=!1,e.failedChatBot=!1,e.disabledChatBot=!1,e.enableSetUp=!1,e.inProgress=!1,e.chatBotConfigured=!0,e.deleteChatPot=!0,e.deleteInprocess=!0,e.deleteInprogress=!0):"FAILED"==(null===(n=t[0])||void 0===n?void 0:n.cloudStackStatus)?(e.enableChatBot=!1,e.disabledChatBot=!1,e.enableSetUp=!1,e.inProgress=!1,e.chatBotConfigured=!0,e.deleteChatPot=!0,e.failedChatBot=!0,e.deleteInprogress=!1):""==t?(e.deleteInprogress=!1,e.disabledChatBot=!0,e.enableSetUp=!0,e.inProgress=!1,e.enableChatBot=!1):["NEW","INPROGRESS","UPDATE"].includes(null===(a=t[0])||void 0===a?void 0:a.cloudStackStatus)?(e.disabledChatBot=!1,e.inProgress=!0):"DONE"==(null===(s=t[0])||void 0===s?void 0:s.cloudStackStatus)&&(e.chatBotConfigured=!1,e.deleteChatPot=!0,e.enableChatBot=!0),t.length&&t.forEach(function(t){e.chatbotMessageBubbleColor=t.agentChatBubbleColor||"",e.customerMessageBubbleColor=t.customerChatBubble||"",e.chatbotMessageTextColor=t.messageTextColor||"",e.chatbotHeaderBgColor=t.toolBarColor||"",e.chatbotWindowBgColor=t.chatBotBackGroundColor||"",e.logoUrl=t.logoUrl||"",e.fontSelected=t.messageFont||"",e.chatBotName=t.bspWebToolBarTitle||"",e.hostUrl=t.bspWebParentUrl||"",e.webPathUrl=t.bspWebAppPath||""}),e.scopes["cloud.admin.users"]&&-1===e.scopes["cloud.admin.users"].indexOf("write")&&(e.deleteChatPot=!1,e.enableSetUp=!1,e.chatBotConfigured=!1)},function(t){e.pageErrorHandle(t)})}},{key:"routeToCreateChatbot",value:function(){this.router.navigate(["/".concat(this.MODULE,"/chatbot-create")])}},{key:"openDeleteModal",value:function(e){this.dialogService.open(e,{windowClass:"custom-warning-modal clx-custom-modal",backdrop:"static",keyboard:!1})}},{key:"deleteChatbot",value:function(){var e=this;this.chatBotService.deleteChatbotRequest({orgId:this.ORG_ID,cloudStackStatus:"DELETED"}).subscribe(function(t){e.dialogService.dismissAll(),t&&e.getData()},function(t){e.pageErrorHandle(t)})}},{key:"downloadChatBotSnippet",value:function(){var e=this;this.chatBotService.downloadChatConfig(this.ORG_ID,{responseType:"text"}).subscribe(function(e){var t=document.createElement("a");t.href="data:text/html;charset=utf-8,"+encodeURIComponent(e),t.download="parent.html",t.click()},function(t){e.pageErrorHandle(t)})}},{key:"pageErrorHandle",value:function(e){var t="";500==e.status&&(t=this.commonOrgService.pageErrorHandle(e)),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1}}]),e}()).\u0275fac=function(e){return new(e||C)(n.Y36(s.s),n.Y36(r.FF),n.Y36(l.F0),n.Y36(c.t6),n.Y36(d.v),n.Y36(u.Dx),n.Y36(g.i),n.Y36(p.V))},C.\u0275cmp=n.Xpm({type:C,selectors:[["app-chatbot"]],decls:117,vars:50,consts:[[1,"container","px-0","position-relative"],["class","loader",4,"ngIf"],[1,"row","mb-4"],[1,"col-12","d-flex","justify-content-between","align-items-center","pb-2"],[1,"cco-title","d-inline-flex","align-items-center"],["class","disabled-but mt-2 ml-3",4,"ngIf"],["class","draft-but w-auto mt-2 ml-3",4,"ngIf"],["class","running-but w-auto mt-2 ml-3",4,"ngIf"],["class","disabled-but w-auto mt-2 ml-3",4,"ngIf"],[1,"ml-2"],["class","btn-link-dis",3,"disabled","ngClass","click",4,"ngIf"],["type","button","class","btn-default btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","border-bottom","pb-2"],[1,"cco-secondary-title"],[1,"pl-2"],["type","button",1,"btn-default","btn-dft","btn-dload",3,"disabled","click"],[1,"mt-2"],[1,"col-5","mb-4"],[1,"ccl-form","mb-3"],[1,"mb-0"],[1,"error"],[1,"value-text"],[1,"ccl-form"],[1,"w-100","border-bottom","pb-2"],[1,"col-md-4","col-md-3","ccl-form"],[1,"form-group"],[1,"d-flex","justify-content-between","w-100","ccl-color-box"],[1,"color-box",3,"ngStyle"],["warningDeleteChatbot",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"disabled-but","mt-2","ml-3"],[1,"dot"],[1,"draft-but","w-auto","mt-2","ml-3"],[1,"running-but","w-auto","mt-2","ml-3"],[1,"disabled-but","w-auto","mt-2","ml-3"],[1,"btn-link-dis",3,"disabled","ngClass","click"],["type","button",1,"btn-default","btn-primary",3,"click"],[1,"modal-body"],["type","button","data-dismiss","modal","aria-label","Close",1,"clx-modal-dismiss",3,"click"],["aria-hidden","true"],[1,"modal-body-content"],[1,"clx-warning-wrapper"],[1,"clx-warning-icon"],[1,"clx-warning-content"],[1,"text-break","cco-secondary-title","mb-3"],[1,"w-100"],[1,"m-0"],[1,"mt-3"],["type","button",1,"btn-default","btn-primary","mr-3",3,"click"],["type","button","aria-label","Close",1,"btn-default","btn-dft",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,f,5,1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"span"),n._uU(6),n.qZA(),n.YNc(7,m,3,1,"span",5),n.YNc(8,v,3,1,"span",6),n.YNc(9,Z,3,1,"span",7),n.YNc(10,b,3,1,"span",6),n.YNc(11,A,3,1,"span",8),n.qZA(),n.TgZ(12,"div",9),n.YNc(13,x,2,3,"button",10),n.YNc(14,T,2,1,"button",11),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",12),n.TgZ(16,"div",13),n.TgZ(17,"div",14),n.TgZ(18,"div",15),n._uU(19),n.qZA(),n.TgZ(20,"div",16),n.TgZ(21,"button",17),n.NdJ("click",function(){return t.downloadChatBotSnippet()}),n._uU(22),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div"),n.TgZ(24,"p",18),n._uU(25),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"div",12),n.TgZ(27,"div",19),n.TgZ(28,"div",20),n.TgZ(29,"label",21),n._uU(30),n.TgZ(31,"span",22),n._uU(32,"*"),n.qZA(),n.qZA(),n.TgZ(33,"p",23),n._uU(34),n.qZA(),n.qZA(),n.TgZ(35,"div",24),n.TgZ(36,"label",21),n._uU(37),n.qZA(),n.TgZ(38,"p",23),n._uU(39),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(40,"div",12),n.TgZ(41,"div",13),n.TgZ(42,"div",25),n.TgZ(43,"div",15),n._uU(44),n.qZA(),n.qZA(),n.TgZ(45,"div"),n.TgZ(46,"p",18),n._uU(47),n.qZA(),n.qZA(),n.qZA(),n.TgZ(48,"div",13),n.TgZ(49,"div",12),n.TgZ(50,"div",26),n.TgZ(51,"div",27),n.TgZ(52,"label",21),n._uU(53),n.TgZ(54,"span",22),n._uU(55,"*"),n.qZA(),n.qZA(),n.TgZ(56,"p",23),n._uU(57),n.qZA(),n.qZA(),n.TgZ(58,"div",27),n.TgZ(59,"label",21),n._uU(60),n.qZA(),n.TgZ(61,"p",23),n._uU(62),n.qZA(),n.qZA(),n.qZA(),n.TgZ(63,"div",26),n.TgZ(64,"div",27),n.TgZ(65,"label",21),n._uU(66),n.qZA(),n.TgZ(67,"p",23),n._uU(68),n.qZA(),n.qZA(),n.TgZ(69,"div",27),n.TgZ(70,"label",21),n._uU(71),n.TgZ(72,"span",22),n._uU(73,"*"),n.qZA(),n.qZA(),n.TgZ(74,"div",28),n.TgZ(75,"p",23),n._uU(76),n.qZA(),n._UZ(77,"div",29),n.qZA(),n.qZA(),n.TgZ(78,"div",27),n.TgZ(79,"label",21),n._uU(80),n.TgZ(81,"span",22),n._uU(82,"*"),n.qZA(),n.qZA(),n.TgZ(83,"div",28),n.TgZ(84,"p",23),n._uU(85),n.qZA(),n._UZ(86,"div",29),n.qZA(),n.qZA(),n.qZA(),n.TgZ(87,"div",26),n.TgZ(88,"div",27),n.TgZ(89,"label",21),n._uU(90),n.TgZ(91,"span",22),n._uU(92,"*"),n.qZA(),n.qZA(),n.TgZ(93,"div",28),n.TgZ(94,"p",23),n._uU(95),n.qZA(),n._UZ(96,"div",29),n.qZA(),n.qZA(),n.TgZ(97,"div",27),n.TgZ(98,"label",21),n._uU(99),n.TgZ(100,"span",22),n._uU(101,"*"),n.qZA(),n.qZA(),n.TgZ(102,"div",28),n.TgZ(103,"p",23),n._uU(104),n.qZA(),n._UZ(105,"div",29),n.qZA(),n.qZA(),n.TgZ(106,"div",27),n.TgZ(107,"label",21),n._uU(108),n.TgZ(109,"span",22),n._uU(110,"*"),n.qZA(),n.qZA(),n.TgZ(111,"div",28),n.TgZ(112,"p",23),n._uU(113),n.qZA(),n._UZ(114,"div",29),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(115,_,20,5,"ng-template",null,30,n.W1O)),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loading),n.xp6(5),n.Oqu(t.language.Chatbot),n.xp6(1),n.Q6J("ngIf",t.disabledChatBot),n.xp6(1),n.Q6J("ngIf",t.inProgress),n.xp6(1),n.Q6J("ngIf",t.enableChatBot),n.xp6(1),n.Q6J("ngIf",t.deleteInprogress),n.xp6(1),n.Q6J("ngIf",t.failedChatBot),n.xp6(2),n.Q6J("ngIf",t.deleteChatPot),n.xp6(1),n.Q6J("ngIf",t.enableSetUp),n.xp6(5),n.Oqu(t.language.Configuration),n.xp6(2),n.Q6J("disabled",t.chatBotConfigured),n.xp6(1),n.Oqu(t.language["Download Code Snippet"]),n.xp6(3),n.Oqu(t.language.Chatbot_Info_Message),n.xp6(5),n.hij("",t.language["Chatbot Host URL"]," "),n.xp6(4),n.Oqu(t.hostUrl),n.xp6(3),n.Oqu(t.language["Web Path"]),n.xp6(2),n.Oqu(t.webPathUrl),n.xp6(5),n.Oqu(t.language.Customization),n.xp6(3),n.Oqu(t.language.Customization_Msg),n.xp6(6),n.hij("",t.language["Chatbot Name"]," "),n.xp6(4),n.Oqu(t.chatBotName),n.xp6(3),n.Oqu(t.language["Logo URL"]),n.xp6(2),n.Oqu(t.logoUrl),n.xp6(4),n.Oqu(t.language.Font),n.xp6(2),n.Oqu(t.fontSelected),n.xp6(3),n.hij("",t.language["Header Background Color"]," "),n.xp6(5),n.Oqu(t.chatbotHeaderBgColor),n.xp6(1),n.Q6J("ngStyle",n.VKq(40,y,t.chatbotHeaderBgColor)),n.xp6(3),n.hij("",t.language["Window Background Color"]," "),n.xp6(5),n.Oqu(t.chatbotWindowBgColor),n.xp6(1),n.Q6J("ngStyle",n.VKq(42,y,t.chatbotWindowBgColor)),n.xp6(4),n.hij("",t.language["Message Text Color"]," "),n.xp6(5),n.Oqu(t.chatbotMessageTextColor),n.xp6(1),n.Q6J("ngStyle",n.VKq(44,y,t.chatbotMessageTextColor)),n.xp6(3),n.hij("",t.language["Chatbot Message Bubble Color"]," "),n.xp6(5),n.Oqu(t.chatbotMessageBubbleColor),n.xp6(1),n.Q6J("ngStyle",n.VKq(46,y,t.chatbotMessageBubbleColor)),n.xp6(3),n.hij("",t.language["Customer Message Bubble Color"]," "),n.xp6(5),n.Oqu(t.customerMessageBubbleColor),n.xp6(1),n.Q6J("ngStyle",n.VKq(48,y,t.customerMessageBubbleColor)))},directives:[h.O5,h.PC,h.mk],styles:[".disabled-but[_ngcontent-%COMP%]{background-color:#ebeaef;color:#4c4c4c;font-size:12px;font-weight:600;text-align:Center;padding:5px 8px;width:100px;border-radius:20px;line-height:15.08px;margin:2px 0}.disabled-but[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{height:8px;width:8px;background-color:#4c4c4c;border-radius:50%;display:inline-block}.value-text[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:20px;color:gray;padding:8px 16px;margin-bottom:0;word-break:break-word}.color-box[_ngcontent-%COMP%]{cursor:default;min-width:77px;min-height:36px;border-radius:3px;border:1px solid #ced4da}.value-text[_ngcontent-%COMP%] + .color-box[_ngcontent-%COMP%]{margin-left:12px}button.btn-dload[_ngcontent-%COMP%]{font-size:14px;height:24px;padding:0 20px!important}button.btn-dload[_ngcontent-%COMP%]:disabled{background:#F8F8FA!important;border-color:#f8f8fa!important;opacity:.5;color:#1a1f22}.ccl-color-box[_ngcontent-%COMP%]{max-width:300px}.btn-link-dis[_ngcontent-%COMP%]{border:none!important;background:transparent!important;display:inline-flex!important;align-items:center!important}.diasble-color[_ngcontent-%COMP%]{color:#72b4ff!important}"]}),C)},65895:function(e,i,n){n.d(i,{P:function(){return M}});var s=n(11067),r=n(38583),l=n(71412),c=n(37716),d=n(39075),u=n(39895),g=n(89097),p=n(7450),h=n(7616),f=n(12664),m=n(49342),v=n(18638),Z=n(3679),b=["infoModal"];function A(e,t){1&e&&(c.TgZ(0,"div",57),c.TgZ(1,"div",58),c.TgZ(2,"div",59),c.TgZ(3,"span",60),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function x(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",13),c.TgZ(1,"a",61),c.NdJ("click",function(){c.CHM(i);var e=c.oxw();return e.getPacketTimingData("seconds"),e.activeTab="packetTimingGraph",e.setPageTitle()}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngClass","systemAdministration"===n.MODULE?"active":""),c.xp6(1),c.Oqu(n.language.flow_timing)}}function T(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"p"),c._uU(2),c.qZA(),c.BQk()),2&e){var i=c.oxw();c.xp6(2),c.Oqu(i.flowCountMsg)}}function _(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"p",62),c.BQk()),2&e){var i=c.oxw();c.xp6(1),c.Q6J("innerHtml",i.rangeForDuration,c.oJD)}}function C(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"p",62),c.BQk()),2&e){var i=c.oxw();c.xp6(1),c.Q6J("innerHtml",i.rangeForDelay,c.oJD)}}function y(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"p",62),c.BQk()),2&e){var i=c.oxw();c.xp6(1),c.Q6J("innerHtml",i.rangeForDuration,c.oJD)}}function k(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"p",62),c.BQk()),2&e){var i=c.oxw();c.xp6(1),c.Q6J("innerHtml",i.rangeForDelay,c.oJD)}}function q(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",63),c.TgZ(1,"h4",64),c._uU(2),c.qZA(),c.TgZ(3,"button",65),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",66),c.qZA(),c.qZA(),c.TgZ(5,"div",67),c.TgZ(6,"div",68),c.TgZ(7,"p",69),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",70),c.TgZ(10,"button",71),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(11),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(6),c.Oqu(n.infoBody),c.xp6(3),c.hij(" ",n.language.Okay," ")}}var w,O=function(){return{width:"100%",height:"38px"}},S=function(){return{height:"36px"}},M=((w=function(){function e(t,i,n,o,r,l,c,d){var u=this;a(this,e),this.titleService=t,this.router=i,this.sso=n,this.translateService=o,this.networkDeviceApiService=r,this.dialogService=l,this.commonOrgService=c,this.titleCasePipe=d,this.Highcharts=s,this.show={loading:!1,chart:!1,durationFullChart:!0,delayFullChart:!0,durationShortChart:!1,delayShortChart:!1,fullChart:!1,flowCountInfo:!1},this.deviceIp="",this.maxStartDate=new Date,this.maxEndDate=new Date,this.requestPayload={startDate:null,endDate:null},this.packetTimingData={},this.rangeForDuration="",this.rangeForDelay="",this.packetTabValue="seconds",this.activeTab="",this.flowCountMsg="";var g=this.router.url;this.MODULE=this.sso.getRedirectModule(g),this.ORG_ID=this.sso.getOrganizationID(g),this.deviceIp=this.commonOrgService.getKey("deviceIp"),this.language=this.translateService.defualtLanguage,this.languageSub=this.translateService.selectedLanguage.subscribe(function(e){var t,i;u.language=e,(null===(i=null===(t=document.getElementById("packetTiming"))||void 0===t?void 0:t.className)||void 0===i?void 0:i.includes("active"))?u.loadPacketChart(u.packetTabValue):u.getDecodeFlowCount(),u.setPageTitle()})}return o(e,[{key:"ngOnInit",value:function(){this.deviceIp?(this.refreshGraph(),this.setPageTitle()):this.router.navigate(["/".concat(this.MODULE,"/flowAnalyze/network/devices/devices-status")])}},{key:"ngOnDestroy",value:function(){this.languageSub&&this.languageSub.unsubscribe(),this.getDeviceMetricSeriesSub&&this.getDeviceMetricSeriesSub.unsubscribe()}},{key:"configureDate",value:function(){this.startDate=new Date,this.startDate.setHours(0,0,0,0),this.endDate=new Date,this.endDate.setHours(23,59,59,999),this.startDate.setDate(this.startDate.getDate()-1)}},{key:"routeToDeviceStatus",value:function(){this.router.navigate(["".concat(this.MODULE,"/flowAnalyze/network/devices/devices-status")])}},{key:"onSelectStartTime",value:function(e,t){e?(this.requestPayload.startDate=new Date(e),this.requestPayload.startDate.setHours(0,0,0),this.startDate=new Date(e),this.startDate.setHours(0,0,0),this.minEndDate=new Date(e),new Date(this.minEndDate.setDate(this.requestPayload.startDate.getDate()+1)),t&&(this.requestPayload.endDate=new Date(e),this.endDate=new Date(e),l(e).format("MM/DD/YYYY")!==l().format("MM/DD/YYYY")&&(this.requestPayload.endDate.setHours(23,59,59),this.endDate.setHours(23,59,59)),new Date(this.requestPayload.endDate.setDate(this.requestPayload.startDate.getDate()+30)),new Date(this.endDate.setDate(this.requestPayload.startDate.getDate()+30)),this.maxEndDate=new Date(e),new Date(this.maxEndDate.setDate(this.requestPayload.startDate.getDate()+30)),this.maxEndDate>new Date&&(this.maxEndDate=new Date,this.requestPayload.endDate=new Date,this.endDate=new Date)),this.maxStartDate=new Date((new Date).setDate((new Date).getDate()-1))):this.requestPayload.startDate=""}},{key:"onSelectEndTime",value:function(e){e?(this.requestPayload.endDate=new Date(e),this.endDate=new Date(e),l(e).format("MM/DD/YYYY")!==l().format("MM/DD/YYYY")?(this.requestPayload.endDate.setHours(23,59,59),this.endDate.setHours(23,59,59)):(this.requestPayload.endDate=new Date,this.endDate=new Date),this.maxStartDate=new Date((new Date).setDate((new Date).getDate()-1))):this.requestPayload.endDate=""}},{key:"expandDurationChart",value:function(e){e?(document.getElementById("delay_collaps").style.display="none",document.getElementById("duration_expand").style.display="block",document.getElementById("delay_expand").style.display="none",document.getElementById("duration_collaps").style.display="none",this.show.durationFullChart=!1,this.show.delayFullChart=!0,this.show.fullChart=!0):(document.getElementById("duration_expand").style.display="none",document.getElementById("duration_collaps").style.display="block",document.getElementById("delay_collaps").style.display="block",document.getElementById("delay_expand").style.display="none",this.show.fullChart=!1,this.show.durationFullChart=!1,this.show.delayFullChart=!1),this.loadPacketChart(this.packetTabValue)}},{key:"expandDelayChart",value:function(e){e?(document.getElementById("duration_expand").style.display="none",document.getElementById("duration_collaps").style.display="none",document.getElementById("delay_collaps").style.display="none",document.getElementById("delay_expand").style.display="block",this.show.fullChart=!0,this.show.delayFullChart=!1,this.show.durationFullChart=!0):(document.getElementById("duration_expand").style.display="none",document.getElementById("duration_collaps").style.display="block",document.getElementById("delay_collaps").style.display="block",document.getElementById("delay_expand").style.display="none",this.show.fullChart=!1,this.show.durationFullChart=!1,this.show.delayFullChart=!1),this.loadPacketChart(this.packetTabValue)}},{key:"hidePacketTimingGraph",value:function(){this.show.fullChart=!1,this.show.delayFullChart=!0,this.show.durationFullChart=!0,this.show.durationShortChart=!1,this.show.delayShortChart=!1}},{key:"getDecodeFlowCount",value:function(){var e=this;if(!this.requestPayload.startDate)return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Start date required"],void this.openInfoModal();this.commonOrgService.closeAlert(),this.activeTab="decodeFlowCountGraph",this.show.loading=!0,this.requestPayload.startDate=Math.floor(new Date(this.startDate).getTime()/1e3),this.requestPayload.endDate=Math.floor(new Date(this.endDate).getTime()/1e3),this.getDeviceMetricSeriesSub=this.networkDeviceApiService.DeviceMatricSeries(this.deviceIp,this.requestPayload.startDate,this.requestPayload.endDate,this.ORG_ID).subscribe(function(t){var i,n;if(e.show.loading=!1,t&&(null==t?void 0:t.metricSeries)){document.getElementById("container").style.display="block";var a=e.makeOptionsForLineChart(t);e.Highcharts.chart("container",a)}else document.getElementById("container").style.display="none";e.show.flowCountInfo=null===(n=null===(i=document.getElementById("packetTiming"))||void 0===i?void 0:i.className)||void 0===n?void 0:n.includes("active")},function(t){document.getElementById("container").style.display="none",e.show.loading=!1,e.pageErrorHandle(t)})}},{key:"makeOptionsForLineChart",value:function(e){var i,n,a,s,o,c={time:[]},d=this;new r.uU("en-US"),e.metricSeries.forEach(function(e){var t=[];e.metricValues.forEach(function(e){c.time.push(e.time),t.push((null==e?void 0:e.value)||0)}),c[e.metricName]=t}),c.time=t(new Set(c.time)),c.time=null===(i=c.time)||void 0===i?void 0:i.map(function(e){return l.tz(e/1e6,l.tz.guess()).format("MM/DD/YYYY HH:mm z")});var u=1;return c.time&&c.time.length<=45?u=1:c.time&&c.time.length>45&&(u=Math.floor(c.time.length/45)),{chart:{type:"line",zoomType:"xy"},time:{useUTC:!1},title:{text:null},subtitle:{text:null},mapNavigation:{enableMouseWheelZoom:!0},tooltip:{formatter:function(){return d.formatTooltip(this.x,this.series.userOptions.label,this.series.name,this.y)}},xAxis:{categories:c.time?c.time:[],tickInterval:u,labels:{allowOverlap:!1,maxStaggerLines:1,formatter:function(){var e=this.value;return this.isLast&&(e=this.axis.categories[this.axis.categories.length-1]),e}}},yAxis:{title:{text:"".concat(this.language.flowRate," (").concat(this.language.perSecond,")")},min:0,minRange:1},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal",symbolRadius:0},lang:{noData:this.language["No Data Available"]},plotOptions:{series:{marker:{enabled:1==(null===(n=c.packet_rate)||void 0===n?void 0:n.length)||1==(null===(a=c.flow_rate)||void 0===a?void 0:a.length)||1==(null===(s=c.virtual_packet_rate)||void 0===s?void 0:s.length)||1==(null===(o=c.virtual_bit_Rate)||void 0===o?void 0:o.length)}},column:{stacking:"normal",dataLabels:{enabled:!1}}},series:[{showInLegend:!0,name:this.language.packetRate,label:"packetRate",color:"#F7C343",data:c.packet_rate?c.packet_rate:[]},{showInLegend:!0,name:this.language.flowRate,label:"flowRate",color:"#5ACFEA",data:c.flow_rate?c.flow_rate:[]},{showInLegend:!0,name:this.language.virtualPacketRate,label:"virtualPacketRate",color:"#B926F0",data:c.virtual_packet_rate?c.virtual_packet_rate:[]},{showInLegend:!0,name:this.language.virtualBitRate,label:"virtualBitRate",color:"#0027FF",data:c.virtual_bit_Rate?c.virtual_bit_Rate:[]}],credits:{enabled:!1}}}},{key:"getPacketTimingData",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i||"packetTimingGraph"!==this.activeTab){this.commonOrgService.closeAlert(),this.show.loading=!0;var n=document.getElementById("seconds");null==n||n.classList.remove("show"),null==n||n.classList.remove("active");var a=document.getElementById("minutes");a.classList.remove("show"),a.classList.remove("active");var s=document.getElementById("milliseconds");s.classList.add("show"),s.classList.add("active"),this.activeTab="packetTimingGraph",this.getDeviceMetricSeriesSub=this.networkDeviceApiService.GetPacketTimingData(this.deviceIp,this.ORG_ID).subscribe(function(i){var n,a;i&&Object.keys(i).length?(t.packetTimingData=i,t.loadPacketChart(e)):t.packetTimingData={},t.show.flowCountInfo=null===(a=null===(n=document.getElementById("packetTiming"))||void 0===n?void 0:n.className)||void 0===a?void 0:a.includes("active"),t.show.loading=!1},function(e){t.show.loading=!1,t.pageErrorHandle(e)})}}},{key:"loadPacketChart",value:function(e){this.packetTabValue=e;var t,i,n=[],a=[],s=[],o=[];switch(this.flowCount(this.packetTimingData),e){case"seconds":(n=this.configureXaxisData("duration",e,1e3))[n.length-1]=">= ".concat(n[n.length-1]),(a=this.configureXaxisData("delay",e,1e3))[a.length-1]=">= ".concat(a[a.length-1]),s=this.configureYAxisData("duration",e),o=this.configureYAxisData("delay",e),t=this.makeOptionsForDurationChart(n,s,"Seconds"),i=this.makeOptionsForDelayChart(a,o,"Seconds");break;case"minutes":(n=this.configureXaxisData("duration",e,6e4))[n.length-1]=">= ".concat(n[n.length-1]),(a=this.configureXaxisData("delay",e,6e4))[a.length-1]=">= ".concat(a[a.length-1]),s=this.configureYAxisData("duration",e),o=this.configureYAxisData("delay",e),t=this.makeOptionsForDurationChart(n,s,"Minutes"),i=this.makeOptionsForDelayChart(a,o,"Minutes");break;case"hours":(n=this.configureXaxisData("duration",e,36e5))[n.length-1]=">= ".concat(n[n.length-1]),(a=this.configureXaxisData("delay",e,36e5))[a.length-1]=">= ".concat(a[a.length-1]),s=this.configureYAxisData("duration",e),o=this.configureYAxisData("delay",e),t=this.makeOptionsForDurationChart(n,s,"Hours"),i=this.makeOptionsForDelayChart(a,o,"Hours")}this.rangeForDuration=this.on_one_entry(this.packetTimingData.duration[e]),this.rangeForDelay=this.on_one_entry(this.packetTimingData.delay[e]),this.show.fullChart?(this.Highcharts.chart("container_duration_expand",t),this.Highcharts.chart("container_delay_expand",i)):(this.Highcharts.chart("container_duration",t),this.Highcharts.chart("container_delay",i))}},{key:"flowCount",value:function(e){if(e){var t=e.duration.seconds.created-e.duration.seconds.started,i=Math.round(t/6e4);this.flowCountMsg=e.duration.seconds.total_count+" "+this.language.flow_last+" ",this.flowCountMsg+=0==i?Math.round(t/1e3)+" "+this.language.Seconds:i+" "+this.language.Minutes}}},{key:"configureXaxisData",value:function(e,t,i){for(var n=this.packetTimingData[e][t].step/i,a=0,s=[],o=0;o<this.packetTimingData[e][t].size;o++)a+=n,s.push(a);return s=null==s?void 0:s.map(function(e){return e.toFixed(2)})}},{key:"configureYAxisData",value:function(e,t){var i,n,a=[],s=null===(i=this.packetTimingData[e][t].indicies)||void 0===i?void 0:i.reduce(function(e,t){return e+t},0);return a.push(null===(n=this.packetTimingData[e][t].indicies)||void 0===n?void 0:n.map(function(e){return e?e/s*100:0})),a=a.flat()}},{key:"makeOptionsForDurationChart",value:function(e,t,i){return{chart:{type:"column",zoomType:"xy"},title:{text:""},xAxis:{categories:e,labels:{style:{textOverflow:"ellipsis"}}},yAxis:{title:{text:"%"},opposite:!1,min:0,max:100,labels:{formatter:function(){return"".concat(this.value)}}},legend:{reversed:!1},lang:{noData:this.language["No Data Available"]},plotOptions:{column:{stacking:"normal"},series:{minPointLength:3,colors:["#0027FF"]}},tooltip:{formatter:function(){return"<p> <b>".concat(this.x,"</b><span> <b>").concat(i,"</b><br/></span><br>").concat(this.y.toFixed(2),"% </p>")}},series:[{name:this.titleCasePipe.transform(this.language[i]),data:t}],credits:{enabled:!1}}}},{key:"makeOptionsForDelayChart",value:function(e,t,i){return{chart:{type:"column",zoomType:"xy"},title:{text:""},xAxis:{categories:e,labels:{style:{textOverflow:"ellipsis"}}},yAxis:{title:{text:"%"},opposite:!1,min:0,max:100,labels:{formatter:function(){return"".concat(this.value)}}},legend:{reversed:!1},lang:{noData:this.language["No Data Available"]},plotOptions:{column:{stacking:"normal"},series:{minPointLength:3,colors:["#5ACFEA"]}},tooltip:{formatter:function(){return"<p> <b>".concat(this.x,"<b/><span> <b>").concat(i,"</b><br/></span><br>").concat(this.y.toFixed(2),"% </p>")}},series:[{name:this.titleCasePipe.transform(this.language[i]),data:t}],credits:{enabled:!1}}}},{key:"openInfoModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal)}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"formatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 bps";var i=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1e3));return"".concat(parseFloat((e/Math.pow(1e3,n)).toFixed(i))," ").concat(["bps","Kbps","Mbps","Gbps","Tbps","Pbps","Ebps","Zbps","Ybps"][n])}},{key:"formatPacket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 pps";var i=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1e3));return"".concat(parseFloat((e/Math.pow(1e3,n)).toFixed(i))," ").concat(["pps","Kpps","Mpps","Gpps","Tbps","Ppps","Epps","Zpps","Ypsps"][n])}},{key:"formatTooltip",value:function(e,t,i,n){return"virtualPacketRate"==t&&(n=this.formatPacket(n)),"virtualBitRate"==t&&(n=this.formatBytes(n)),"<b>".concat(e,"</b><br><b>").concat(i,": ").concat(n,"</b>")}},{key:"on_one_entry",value:function(e){var t="";if(!e)return t;var i=e.total_count||0;if(i>0){var n=this.round10(e.missing||0,i).toFixed(1),a=this.round10(e.invalid||0,i).toFixed(1);if((e.minval||0)<=(e.maxval||0)){var s=this.time_scale(e.minval||0),o=this.time_scale(e.maxval||0);if(0!=e.minval&&o.short!=s.short)var r=s.short;else r="";t=this.language.range+": "+s.value+" "+r+"&thinsp;&harr;&thinsp; "+o.value+" "+o.name+",&nbsp"+this.language.missing+": "+n+"%, "+this.language.invalid+": "+a+"%"}}else t=this.language.range+": 0.0 "+this.language.Seconds+"&thinsp;&harr;&thinsp;0.0 "+this.language.Seconds+",&nbsp"+this.language.missing+":0.0%, "+this.language.invalid+":0.0%";return t}},{key:"round10",value:function(e,t){return Math.round(e/t*1e3)/10}},{key:"time_scale",value:function(e){var t=e/1e3;if(t<=120)return{value:t.toFixed(1),name:this.language.Seconds,short:this.language.Seconds};var i=t/60;if(i<=120)return{value:i.toFixed(1),name:this.language.Minutes,short:this.language.Minutes};var n=i/60;return n<=48?{value:n.toFixed(1),name:this.language.hours,short:this.language.hours}:{value:(n/24).toFixed(1),name:this.language.days,short:this.language.days}}},{key:"pageErrorHandle",value:function(e){var t,i,n="";400==e.status||417==e.status?(this.infoBody=417==e.status&&(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)?null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message:this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=this.language["Invalid request"],this.openInfoModal(),this.show.loading=!1):(n=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(n),this.commonOrgService.pageScrollTop(),this.show.loading=!1)}},{key:"setPageTitle",value:function(){this.titleService.setTitle("".concat("packetTimingGraph"===this.activeTab?this.language.flow_timing:this.language.decoded_flow_count," - ").concat(this.language.Bsp_Microsite_Status," - ").concat(this.language.devices," - ").concat(this.language.Network," - ").concat(this.language.flowconfiguration," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}},{key:"routeToDecodeFlowCount",value:function(){"decodeFlowCountGraph"!==this.activeTab&&(this.configureDate(),this.onSelectStartTime(this.startDate,!1),this.onSelectEndTime(this.endDate),this.getDecodeFlowCount(),this.setPageTitle())}},{key:"refreshGraph",value:function(){var e,t,i=this.activeTab;this.configureDate(),this.onSelectStartTime(this.startDate,!1),this.onSelectEndTime(this.endDate),this.getDecodeFlowCount(),"systemAdministration"===this.MODULE&&this.getPacketTimingData("seconds",!0),this.show.flowCountInfo=null===(t=null===(e=document.getElementById("packetTiming"))||void 0===e?void 0:e.className)||void 0===t?void 0:t.includes("active"),this.activeTab=i}}]),e}()).\u0275fac=function(e){return new(e||w)(c.Y36(d.Dx),c.Y36(u.F0),c.Y36(g.t6),c.Y36(p.s),c.Y36(h.v),c.Y36(f.FF),c.Y36(m.v),c.Y36(r.rS))},w.\u0275cmp=c.Xpm({type:w,selectors:[["app-devices-name-placeholder"]],viewQuery:function(e,t){var i;1&e&&c.Gf(b,7),2&e&&c.iGM(i=c.CRH())&&(t.infoModal=i.first)},features:[c._Bn([r.rS])],decls:104,vars:55,consts:[[1,"container","px-0"],["class","loader",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between"],[1,"cco-title","d-inline-flex","align-items-start"],[3,"click"],[1,"cursor-pointer","d-inline-flex","ml-3","mt-3"],["src","../../../assets/img/ic_refresh.svg"],["type","button",1,"close",3,"click"],[1,"ccl-tabs"],[1,"nav","nav-tabs"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-toggle","tab","id","docodeFlowCount","data-target","#tab-decoded-flow-count",1,"nav-link",3,"ngClass","click"],[4,"ngIf"],["id","devicePlaceHoldertabs",1,"tab-content"],["id","tab-packet-timing",1,"tab-pane",3,"ngClass"],["id","packetTimingList",1,"nav","nav-tabs","nav-tab-list","mt-3","mb-2"],["id","milliseconds","data-toggle","tab","data-target","#packet-timing-minutes",1,"btn","btn-default","active",3,"click"],["data-toggle","tab","id","seconds","data-target","#packet-timing-minutes",1,"btn","btn-default",3,"click"],["data-toggle","tab","id","minutes","data-target","#packet-timing-minutes",1,"btn","btn-default",3,"click"],["id","packet-timing-minutes",1,"tab-pane","active"],[1,"tab-pane-content"],["id","duration_collaps",1,"col-6","mt-3",3,"hidden"],[1,"d-flex","w-100","border-bottom","justify-content-between","pb-2"],["id","timing-minutes-duration",1,"cco-secondary-title"],[1,"mwc-btns","flex","align-items-center"],["id","MinutesDurationExpand",1,"btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],["src","../../../assets/img/ic_expand_grey.svg"],[1,"chart","w-100"],["id","container_duration",1,"cco-traffic-reports-container"],["id","delay_collaps",1,"col-6","mt-3",3,"hidden"],["id","timing-minutes-delay",1,"cco-secondary-title"],["id","MinutesDelayExpand",1,"btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],["id","container_delay",1,"cco-traffic-reports-container"],["id","duration_expand",1,"col-12","mt-3",3,"hidden"],["id","",1,"btn-round","btn-small-24","btn-grey","btn-expand",3,"title","click"],["src","../../../assets/img/ic_expand_inverted_grey.svg"],["id","container_duration_expand",1,"cco-traffic-reports-container"],["id","delay_expand",1,"col-12","mt-3",3,"hidden"],["id","container_delay_expand",1,"cco-traffic-reports-container"],["id","tab-decoded-flow-count",1,"tab-pane","show",3,"ngClass"],[1,"row","mt-3"],[1,"col-md-6"],[1,"col-md-6","mb-2"],[1,"mb-0"],[1,"w-100","ccl-form"],["dateFormat","mm-dd-yy",3,"inputStyle","maxDate","styleClass","placeholder","ngModel","readonlyInput","showIcon","onSelect","ngModelChange"],["dateFormat","mm-dd-yy",3,"minDate","inputStyle","maxDate","styleClass","placeholder","ngModel","readonlyInput","showIcon","onSelect","ngModelChange"],[1,"col-md-6","mb-2","pt-4","text-left"],["type","button",1,"btn-default","btn-primary","mt-1",3,"disabled","click"],[1,"col-12","mt-2"],[1,"d-flex","border-bottom","pb-2"],[1,"cco-secondary-title"],["id","container",1,"cco-traffic-reports-container"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["data-toggle","tab","id","packetTiming","data-target","#tab-packet-timing",1,"nav-link",3,"ngClass","click"],[1,"chat-info-desc",3,"innerHtml"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"w-100"],[1,"f-size-16px"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,A,5,0,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c._uU(6),c.TgZ(7,"a",6),c.NdJ("click",function(){return t.refreshGraph()}),c.TgZ(8,"span",7),c._UZ(9,"img",8),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"button",9),c.NdJ("click",function(){return t.routeToDeviceStatus()}),c._UZ(11,"span"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",2),c.TgZ(13,"div",3),c.TgZ(14,"div",10),c.TgZ(15,"ul",11),c.YNc(16,x,3,2,"li",12),c.TgZ(17,"li",13),c.TgZ(18,"a",14),c.NdJ("click",function(){return t.routeToDecodeFlowCount()}),c._uU(19),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(20,T,3,1,"ng-container",15),c.TgZ(21,"div",16),c.TgZ(22,"div",17),c.TgZ(23,"ul",18),c.TgZ(24,"li",13),c.TgZ(25,"a",19),c.NdJ("click",function(){return t.loadPacketChart("seconds")}),c._uU(26),c.qZA(),c.qZA(),c.TgZ(27,"li",13),c.TgZ(28,"a",20),c.NdJ("click",function(){return t.loadPacketChart("minutes")}),c._uU(29),c.qZA(),c.qZA(),c.TgZ(30,"li",13),c.TgZ(31,"a",21),c.NdJ("click",function(){return t.loadPacketChart("hours")}),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"div",22),c.TgZ(34,"div",23),c.TgZ(35,"div",2),c.TgZ(36,"div",24),c.TgZ(37,"div",25),c.TgZ(38,"div",26),c._uU(39),c.qZA(),c.TgZ(40,"div",27),c.TgZ(41,"button",28),c.NdJ("click",function(){return t.expandDurationChart(!0)}),c._UZ(42,"img",29),c.qZA(),c.qZA(),c.qZA(),c.TgZ(43,"div",30),c.YNc(44,_,2,1,"ng-container",15),c._UZ(45,"div",31),c.qZA(),c.qZA(),c.TgZ(46,"div",32),c.TgZ(47,"div",25),c.TgZ(48,"div",33),c._uU(49),c.qZA(),c.TgZ(50,"div",27),c.TgZ(51,"button",34),c.NdJ("click",function(){return t.expandDelayChart(!0)}),c._UZ(52,"img",29),c.qZA(),c.qZA(),c.qZA(),c.TgZ(53,"div",30),c.YNc(54,C,2,1,"ng-container",15),c._UZ(55,"div",35),c.qZA(),c.qZA(),c.qZA(),c.TgZ(56,"div",2),c.TgZ(57,"div",36),c.TgZ(58,"div",25),c.TgZ(59,"div",26),c._uU(60),c.qZA(),c.TgZ(61,"div",27),c.TgZ(62,"button",37),c.NdJ("click",function(){return t.expandDurationChart(!1)}),c._UZ(63,"img",38),c.qZA(),c.qZA(),c.qZA(),c.TgZ(64,"div",30),c.YNc(65,y,2,1,"ng-container",15),c._UZ(66,"div",39),c.qZA(),c.qZA(),c.TgZ(67,"div",40),c.TgZ(68,"div",25),c.TgZ(69,"div",33),c._uU(70),c.qZA(),c.TgZ(71,"div",27),c.TgZ(72,"button",37),c.NdJ("click",function(){return t.expandDelayChart(!1)}),c._UZ(73,"img",38),c.qZA(),c.qZA(),c.qZA(),c.TgZ(74,"div",30),c.YNc(75,k,2,1,"ng-container",15),c._UZ(76,"div",41),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(77,"div",42),c.TgZ(78,"div",23),c.TgZ(79,"div",43),c.TgZ(80,"div",44),c.TgZ(81,"div",2),c.TgZ(82,"div",45),c.TgZ(83,"label",46),c._uU(84),c.qZA(),c.TgZ(85,"div",47),c.TgZ(86,"p-calendar",48),c.NdJ("onSelect",function(e){return t.onSelectStartTime(e,!0)})("ngModelChange",function(e){return t.startDate=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(87,"div",45),c.TgZ(88,"label",46),c._uU(89),c.qZA(),c.TgZ(90,"div",47),c.TgZ(91,"p-calendar",49),c.NdJ("onSelect",function(e){return t.onSelectEndTime(e)})("ngModelChange",function(e){return t.endDate=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(92,"div",50),c.TgZ(93,"button",51),c.NdJ("click",function(){return t.getDecodeFlowCount()}),c._uU(94),c.qZA(),c.qZA(),c.qZA(),c.TgZ(95,"div",2),c.TgZ(96,"div",52),c.TgZ(97,"div",53),c.TgZ(98,"div",54),c._uU(99),c.qZA(),c.qZA(),c.TgZ(100,"div",30),c._UZ(101,"div",55),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(102,q,12,3,"ng-template",null,56,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",null==t.show?null:t.show.loading),c.xp6(5),c.hij("",t.deviceIp," "),c.xp6(10),c.Q6J("ngIf","systemAdministration"===t.MODULE),c.xp6(2),c.Q6J("ngClass","systemAdministration"!==t.MODULE?"active":""),c.xp6(1),c.Oqu(t.language.decoded_flow_count),c.xp6(1),c.Q6J("ngIf",t.show.flowCountInfo),c.xp6(2),c.Q6J("ngClass","systemAdministration"===t.MODULE?"active":""),c.xp6(4),c.Oqu(t.language.milliseconds),c.xp6(3),c.Oqu(t.language.USeconds),c.xp6(3),c.Oqu(t.language.minutes),c.xp6(4),c.Q6J("hidden",t.show.durationShortChart),c.xp6(3),c.hij(" ",t.language.Duration,""),c.xp6(2),c.s9C("title",t.language.expand),c.xp6(3),c.Q6J("ngIf",t.rangeForDuration),c.xp6(2),c.Q6J("hidden",t.show.delayShortChart),c.xp6(3),c.Oqu(t.language.delay),c.xp6(2),c.s9C("title",t.language.expand),c.xp6(3),c.Q6J("ngIf",t.rangeForDelay),c.xp6(3),c.Q6J("hidden",t.show.durationFullChart),c.xp6(3),c.hij(" ",t.language.Duration,""),c.xp6(2),c.s9C("title",t.language.subImpac_fullscreen_close_tip),c.xp6(3),c.Q6J("ngIf",t.rangeForDuration),c.xp6(2),c.Q6J("hidden",t.show.delayFullChart),c.xp6(3),c.Oqu(t.language.delay),c.xp6(2),c.s9C("title",t.language.subImpac_fullscreen_close_tip),c.xp6(3),c.Q6J("ngIf",t.rangeForDelay),c.xp6(2),c.Q6J("ngClass","systemAdministration"!==t.MODULE?"active":""),c.xp6(7),c.Oqu(t.language.START_DATE),c.xp6(2),c.Akn(c.DdM(51,O)),c.s9C("placeholder",t.language.START_DATE),c.Q6J("inputStyle",c.DdM(52,S))("maxDate",t.maxStartDate)("styleClass","p-cal-custom")("ngModel",t.startDate)("readonlyInput",!0)("showIcon",!0),c.xp6(3),c.Oqu(t.language.END_DATE),c.xp6(2),c.Akn(c.DdM(53,O)),c.s9C("placeholder",t.language.END_DATE),c.Q6J("minDate",t.minEndDate)("inputStyle",c.DdM(54,S))("maxDate",t.maxEndDate)("styleClass","p-cal-custom")("ngModel",t.endDate)("readonlyInput",!0)("showIcon",!0),c.xp6(2),c.Q6J("disabled",!t.startDate),c.xp6(1),c.Oqu(t.language.apply),c.xp6(5),c.Oqu(t.language.decoded_flow_count))},directives:[r.O5,r.mk,v.f,Z.JJ,Z.On],styles:[".tab-pane.fade[_ngcontent-%COMP%]:not(.show) > .tab-pane-content[_ngcontent-%COMP%]{display:none}.tab-pane.fade.show[_ngcontent-%COMP%] > .tab-pane-content[_ngcontent-%COMP%]{display:block}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding:3px 20px!important;border:1px solid #0279FF;color:#0279ff;font-size:14px;line-height:16.67px!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:not(.active):hover{background-color:#0279ff;color:#fff}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn.active[_ngcontent-%COMP%]{background-color:#0279ff;color:#fff}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{border-radius:0!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child   .btn[_ngcontent-%COMP%]{border-top-left-radius:12px!important;border-bottom-left-radius:12px!important}.nav-tab-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child   .btn[_ngcontent-%COMP%]{border-top-right-radius:12px!important;border-bottom-right-radius:12px!important}.chat-info-desc[_ngcontent-%COMP%]{font-family:Source Sans Pro!important;font-size:14px!important;color:#1a1f22;margin-bottom:5px;margin-top:10px}"]}),w)},81162:function(e,t,i){i.d(t,{l:function(){return y}});var n,s=i(91704),r=i(40205),l=i(92340),c=i(5304),d=i(37716),u=i(91841),g=i(89097),p=((n=function(){function e(t,i){a(this,e),this.http=t,this.sso=i,this.API_URI="".concat(l.N.SUPPORT_URL)}return o(e,[{key:"updateExternalticketDetails",value:function(e){return this.http.post("".concat(this.API_URI,"/call/calloutcome/extrefconfig/nisc"),e)}},{key:"updatePutExternalticketDetails",value:function(e){return this.http.put("".concat(this.API_URI,"/call/calloutcome/extrefconfig/nisc"),e)}},{key:"externalticketDetails",value:function(e){var t=this.sso.getOrg(e);return this.http.get("".concat(this.API_URI,"/call/calloutcome/extrefconfig/nisc?").concat(t))}},{key:"deleteExternalticketDetails",value:function(e){var t=this.sso.getOrg(e);return this.http.delete("".concat(this.API_URI,"/call/calloutcome/extrefconfig/nisc?").concat(t))}},{key:"testUrlExternalticketDetails",value:function(e){return this.http.put("".concat(this.API_URI,"/call/calloutcome/extrefconfig/nisc/test"),e).pipe((0,c.K)(function(e){return(0,r._)(e)}))}},{key:"handleError",value:function(e){return(0,r._)(e)}}]),e}()).\u0275fac=function(e){return new(e||n)(d.LFG(u.eN),d.LFG(g.t6))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n),h=i(7450),f=i(49342),m=i(39895),v=i(39075),Z=i(38583),b=i(3679),A=i(74062),x=i(86640);function T(e,t){if(1&e&&(d.TgZ(0,"div",42),d.TgZ(1,"div",43),d.TgZ(2,"div",44),d.TgZ(3,"span",45),d._uU(4),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var i=d.oxw();d.xp6(4),d.Oqu(i.language.Loading)}}function _(e,t){if(1&e&&(d.TgZ(0,"div"),d._uU(1),d.qZA()),2&e){var i=d.oxw(2);d.xp6(1),d.Oqu(i.language["Please provide valid url"])}}function C(e,t){if(1&e&&(d.TgZ(0,"div",46),d.YNc(1,_,2,1,"div",47),d.qZA()),2&e){d.oxw();var i=d.MAs(35);d.xp6(1),d.Q6J("ngIf",null==i.errors?null:i.errors.pattern)}}var y=function(){var e=function(){function e(t,i,n,s,o,r){a(this,e),this.translateService=t,this.sso=i,this.externalTicketingservice=n,this.commonOrgService=s,this.router=o,this.titleService=r,this.orgId=this.sso.getOrgId(),this.externalTicketData={},this.loading=!1,this.saveDisable=!1,this.TempexternalTicketData={},this.Frame=[{id:"NISC",name:"NISC"}],this.exteranalTicketDefualtValue="NISC",this.patternvalidation="^https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9]+.[^s]{2,}|www.[a-zA-Z0-9]+.[^s]{2,}$",this.extrefError404=!1,this.passwordHide=!1,this.isButtonDisabled=!0,this.isTestButtonDisabled=!0,this.commonOrgService.currentPageAdder("externalticketingsystem"),this.MODULE=this.sso.getRedirectModule(this.router.url)}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.External_ticket_System," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language.External_ticket_System," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.getExternalticketDetails()}},{key:"showSuccessAlert",value:function(e){var t=this;s(".alert.alert-success").show(),this.successMsg=e,setTimeout(function(){t.closeAlert()},2e3)}},{key:"showDeleteAlert",value:function(e){s(".alert.alert-error").show(),s(".alert.alert-error").addClass("alert-danger"),this.errorMsg=e}},{key:"getExternalticketDetails",value:function(){var e=this;this.loading=!0,this.externalTicketingservice.externalticketDetails(this.orgId).subscribe(function(t){e.externalTicketData=t,e.TempexternalTicketData=JSON.parse(JSON.stringify(e.externalTicketData)),e.extUserPassword=null==t?void 0:t.password,e.extrefError404=!1,e.saveDisable=!1,e.loading=!1},function(t){404===t.status&&(e.extrefError404=!0,e.loading=!1,e.clearFields()),e.loading=!1})}},{key:"cancelExternalticketDetails",value:function(e){var t;this.externalTicketData=JSON.parse(JSON.stringify(this.TempexternalTicketData)),this.extUserPassword=null===(t=this.TempexternalTicketData)||void 0===t?void 0:t.password}},{key:"externalTicketFormUpdate",value:function(e){var t=this;this.loading=!0;var i={orgId:parseInt(this.orgId),companyNumber:e.value.companyNumber,url:e.value.url,username:e.value.username,password:this.extUserPassword,name:e.value.name};this.extrefError404?this.externalTicketingservice.updatePutExternalticketDetails(i).subscribe(function(e){t.externalTicketData=e,t.getExternalticketDetails(),t.loading=!1,t.showSuccessAlert("Added Successfully"),t.isButtonDisabled=!0,t.externalTicketData.form.markAsDirty(),t.externalTicketData.form.markAsPristine(),t.externalTicketData.form.resetForm()},function(e){404===e.status&&t.clearFields(),t.loading=!1}):this.externalTicketingservice.updateExternalticketDetails(i).subscribe(function(e){t.externalTicketData=e,t.getExternalticketDetails(),t.loading=!1,t.showSuccessAlert("Updated Successfully"),t.isButtonDisabled=!0,t.externalTicketData.form.markAsDirty(),t.externalTicketData.form.markAsPristine(),t.externalTicketData.form.markAsUnTouched()},function(e){404===e.status&&t.clearFields(),t.loading=!1})}},{key:"deleteticketDetails",value:function(e){var t=this;this.loading=!0,this.externalTicketingservice.deleteExternalticketDetails(this.orgId).subscribe(function(e){t.externalTicketData={},t.TempexternalTicketData={},t.extUserPassword="",t.test=void 0,t.loading=!1,t.showDeleteAlert("Deleted Successfully")},function(e){t.loading=!1}),this.getExternalticketDetails()}},{key:"closeAlert",value:function(){s(".alert").hide()}},{key:"passwordedit",value:function(){this.passwordHide=!this.passwordHide}},{key:"testConnection",value:function(e){var t=this,i="";this.etsbaseUrl=e.value.url.split("/")[2],i="".concat(e.value.url.split("/")[0],"//").concat(this.etsbaseUrl,"/services/secured/trouble-ticket-priorities"),e.value.url.includes("www.")&&(this.etsbaseUrl=e.value.url.split("/")[0],i="".concat(e.value.url.split("/")[0],"/services/secured/trouble-ticket-priorities")),this.loading=!0;var n={orgId:parseInt(this.orgId),companyNumber:e.value.companyNumber,url:i,username:e.value.username,password:this.extUserPassword,name:e.value.name};this.externalTicketingservice.testUrlExternalticketDetails(n).subscribe(function(e){t.UrlTestConnection=e,t.showSuccessAlert(" Connection Successful"),t.isButtonDisabled=!1,t.loading=!1},function(e){t.loading=!1,e.status&&t.showDeleteAlert(500===e.status?" NISC URL is not valid":401===e.status?" Username or Password is invalid":403===e.status?" Credentials are correct but permissions are missing ":" NISC URL is not valid")})}},{key:"changeButtonDisabled",value:function(){this.isButtonDisabled=!0}},{key:"clearFields",value:function(){this.externalTicketData.username="",this.extUserPassword="",this.externalTicketData.companyNumber="",this.externalTicketData.url=""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(h.s),d.Y36(g.t6),d.Y36(p),d.Y36(f.v),d.Y36(m.F0),d.Y36(v.Dx))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-external-ticketing-system"]],features:[d._Bn([p])],decls:73,vars:31,consts:[[1,"container","position-relative"],[1,"alert","alert-success","alert-dismissible"],[1,"success-img"],["src","../../../../../assets/img/success-icon.svg"],["type","button","id","success-msg",1,"close",3,"click"],[1,"d-inline-flex"],[1,"alert","alert-error","alert-dismissible","py-0"],[1,"warning-msg","pt-2","pb-1","m-0"],[1,"error-img"],["src","./assets/img/ic_warning-36px.svg"],[1,"msg-details"],[2,"font-weight","bold"],[3,"innerHtml"],["id","inprpwarn-ok",1,"btn-default","px-3","ok-btn","float-right",3,"click"],["class","loader",4,"ngIf"],[1,"row"],[1,"col-md-5","my-3"],["id","externalTicketForm","novalidate","",1,"form-group","ccl-form",3,"ngSubmit"],["f","ngForm"],[1,"ccl-form","mb-3"],["for","Ticketing-System-URL"],[1,"error"],["id","url","name","url","type","text","required","","aria-describedby","","placeholder","","trimSpace","",1,"form-control",3,"ngModel","pattern","formValue","ngModelChange","change"],["url","ngModel"],["type","button",1,"btn-default","primary","px-3","position-right",3,"click"],["class","errorMessage",4,"ngIf"],["for","user-name"],["id","username","name","username","type","text","aria-describedby","","placeholder","","required","","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange","change"],["username","ngModel"],[1,"ccl-form","mb-3",2,"position","relative"],["for","Password"],["id","password","name","password","type","text","aria-describedby","","placeholder","","required","",1,"form-control",3,"ngModel","type","ngModelChange","change"],[1,"",3,"ngClass","click"],["for","Ticketing_Service_Provider"],["bindLabel","name","bindValue","id","name","name","required","",3,"items","ngModel","ngModelChange"],["for","companyNumber"],["id","companyNumber","name","companyNumber","type","text","aria-describedby","","required","","placeholder","","trimSpace","",1,"form-control",3,"ngModel","formValue","ngModelChange","change"],["companyNumber","ngModel"],[1,"mt-3"],["type","submit",1,"btn-default","primary","px-3","mr-3",3,"disabled"],["type","button","id","cancel-btn",1,"btn-default","btn-dft","mr-3",3,"click"],["type","button","id","delete-btn",1,"btn-default","primary","px-3",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"errorMessage"],[4,"ngIf"]],template:function(e,t){if(1&e){var i=d.EpF();d.TgZ(0,"section"),d.TgZ(1,"div",0),d.TgZ(2,"div"),d.TgZ(3,"h4"),d._uU(4),d.qZA(),d.qZA(),d.TgZ(5,"div",1),d.TgZ(6,"span",2),d._UZ(7,"img",3),d.qZA(),d.TgZ(8,"button",4),d.NdJ("click",function(){return t.closeAlert()}),d._UZ(9,"span"),d.qZA(),d.TgZ(10,"div",5),d.TgZ(11,"strong"),d._uU(12),d.ALo(13,"titlecase"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",6),d.TgZ(15,"div",7),d.TgZ(16,"span",8),d._UZ(17,"img",9),d.qZA(),d.TgZ(18,"span",10),d.TgZ(19,"span",11),d._uU(20),d.qZA(),d._UZ(21,"span",12),d.qZA(),d.TgZ(22,"button",13),d.NdJ("click",function(){return t.closeAlert()}),d._uU(23),d.qZA(),d.qZA(),d.qZA(),d.YNc(24,T,5,1,"div",14),d.TgZ(25,"div",15),d.TgZ(26,"div",16),d.TgZ(27,"form",17,18),d.NdJ("ngSubmit",function(){d.CHM(i);var e=d.MAs(28);return e.form.valid&&t.externalTicketFormUpdate(e)}),d.TgZ(29,"div",19),d.TgZ(30,"label",20),d._uU(31),d.TgZ(32,"span",21),d._uU(33,"*"),d.qZA(),d.qZA(),d.TgZ(34,"input",22,23),d.NdJ("ngModelChange",function(e){return t.externalTicketData.url=e})("change",function(){return t.changeButtonDisabled()}),d.qZA(),d.TgZ(36,"button",24),d.NdJ("click",function(){d.CHM(i);var e=d.MAs(28);return t.testConnection(e)}),d._uU(37),d.qZA(),d.YNc(38,C,2,1,"div",25),d.qZA(),d.TgZ(39,"div",19),d.TgZ(40,"label",26),d._uU(41),d.TgZ(42,"span",21),d._uU(43,"*"),d.qZA(),d.qZA(),d.TgZ(44,"input",27,28),d.NdJ("ngModelChange",function(e){return t.externalTicketData.username=e})("change",function(){return t.changeButtonDisabled()}),d.qZA(),d.qZA(),d.TgZ(46,"div",29),d.TgZ(47,"label",30),d._uU(48),d.TgZ(49,"span",21),d._uU(50,"*"),d.qZA(),d.qZA(),d.TgZ(51,"input",31),d.NdJ("ngModelChange",function(e){return t.extUserPassword=e})("change",function(){return t.changeButtonDisabled()}),d.qZA(),d.TgZ(52,"span",32),d.NdJ("click",function(){return t.passwordedit()}),d.qZA(),d.qZA(),d.TgZ(53,"div",19),d.TgZ(54,"label",33),d._uU(55),d.TgZ(56,"span",21),d._uU(57,"*"),d.qZA(),d.qZA(),d.TgZ(58,"ng-select",34),d.NdJ("ngModelChange",function(e){return t.exteranalTicketDefualtValue=e}),d.qZA(),d.qZA(),d.TgZ(59,"div",19),d.TgZ(60,"label",35),d._uU(61),d.TgZ(62,"span",21),d._uU(63,"*"),d.qZA(),d.qZA(),d.TgZ(64,"input",36,37),d.NdJ("ngModelChange",function(e){return t.externalTicketData.companyNumber=e})("change",function(){return t.changeButtonDisabled()}),d.qZA(),d.qZA(),d.TgZ(66,"div",38),d.TgZ(67,"button",39),d._uU(68),d.qZA(),d.TgZ(69,"button",40),d.NdJ("click",function(){d.CHM(i);var e=d.MAs(28);return t.cancelExternalticketDetails(e)}),d._uU(70),d.qZA(),d.TgZ(71,"button",41),d.NdJ("click",function(){d.CHM(i);var e=d.MAs(28);return t.deleteticketDetails(e)}),d._uU(72),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var n=d.MAs(35);d.xp6(4),d.Oqu(t.language.External_ticket_System),d.xp6(8),d.Oqu(d.lcZ(13,29,t.successMsg)),d.xp6(8),d.hij("",t.language.Warning,"! "),d.xp6(1),d.Q6J("innerHtml",t.language[t.errorMsg]||t.errorMsg,d.oJD),d.xp6(2),d.hij(" ",t.language.Ok," "),d.xp6(1),d.Q6J("ngIf",t.loading),d.xp6(7),d.Oqu(t.language["Ticketing System URL"]),d.xp6(3),d.Q6J("ngModel",t.externalTicketData.url)("pattern",t.patternvalidation)("formValue",t.externalTicketData),d.xp6(3),d.Oqu(t.language.Test_Connection),d.xp6(1),d.Q6J("ngIf",n.touched&&n.invalid),d.xp6(3),d.Oqu(t.language.User_Name),d.xp6(3),d.Q6J("ngModel",t.externalTicketData.username)("formValue",t.externalTicketData),d.xp6(4),d.hij("",t.language.Password," "),d.xp6(3),d.Q6J("ngModel",t.extUserPassword)("type",t.passwordHide?"text":"password"),d.xp6(1),d.Q6J("ngClass",t.passwordHide?"password_view":"password_hide"),d.xp6(3),d.Oqu(t.language["Ticketing Service Provider"]),d.xp6(3),d.Q6J("items",t.Frame)("ngModel",t.exteranalTicketDefualtValue),d.xp6(3),d.Oqu(t.language["Company Number"]),d.xp6(3),d.Q6J("ngModel",t.externalTicketData.companyNumber)("formValue",t.externalTicketData),d.xp6(3),d.Q6J("disabled",t.isButtonDisabled),d.xp6(1),d.Oqu(t.language.submit),d.xp6(2),d.Oqu(t.language.cancel),d.xp6(2),d.Oqu(t.language.Delete)}},directives:[Z.O5,b._Y,b.JL,b.F,b.Fj,b.Q7,A.f,b.JJ,b.On,b.c5,Z.mk,x.w9],pipes:[Z.rS],styles:["div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border-radius:26px!important;background:#f8f8fa!important;border:1px solid #dfdfdf!important}span.togg-icon[_ngcontent-%COMP%]{position:absolute;cursor:pointer;right:10px;top:38px}.overflow-ellipsis[_ngcontent-%COMP%]{max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     table.dataTable td.dataTables_empty{display:none}.no-data-available[_ngcontent-%COMP%]{text-align:center}.alert.alert-success[_ngcontent-%COMP%]{display:none}.alert.alert-error[_ngcontent-%COMP%]{display:none}.dail-plan-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#4c4c4c;padding:0 10px 0 0;border-top:0!important;border-bottom:1px solid transparent;line-height:38px;word-break:break-all}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:35%!important}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:40px 32px!important}.position-right[_ngcontent-%COMP%]{position:absolute;right:-155px;top:33px}"]}),e}()},10584:function(i,n,s){s.d(n,{I:function(){return X}});var r=s(23771),l=s(79765),c=s(25917),d=s(9112),u=s(35758),g=s(92340),p=s(88002),h=s(5304),f=s(37716),m=s(404),v=s(49342),Z=s(39895),b=s(30900),A=s(91395),x=s(89097),T=s(12664),_=s(39075),C=s(91841),y=s(38583),k=s(86640),q=s(3679),w=["deleteModal"];function O(e,t){if(1&e&&(f.TgZ(0,"div",29),f.TgZ(1,"div",30),f.TgZ(2,"div",31),f.TgZ(3,"span",32),f._uU(4),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e){var i=f.oxw();f.xp6(4),f.Oqu(i.language.Loading)}}function S(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"div",33),f.TgZ(1,"span",34),f._UZ(2,"img",35),f.qZA(),f.TgZ(3,"button",36),f.NdJ("click",function(){return f.CHM(i),f.oxw().closeAlert()}),f._UZ(4,"span"),f.qZA(),f._UZ(5,"div",37),f.qZA()}if(2&e){var n=f.oxw();f.xp6(5),f.Q6J("innerHtml",n.errorInfo,f.oJD)}}function M(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"div",38),f.TgZ(1,"button",36),f.NdJ("click",function(){return f.CHM(i),f.oxw().closeAlert()}),f._UZ(2,"span"),f.qZA(),f._UZ(3,"div",39),f.qZA()}if(2&e){var n=f.oxw();f.xp6(3),f.Q6J("innerHtml",n.successInfo,f.oJD)}}function U(e,t){if(1&e&&(f.TgZ(0,"em",51),f._uU(1),f.qZA()),2&e){var i=f.oxw(2);f.xp6(1),f.Oqu(i.language["This field is required"])}}function D(e,t){if(1&e&&(f.TgZ(0,"span",52),f._uU(1),f.qZA()),2&e){var i=f.oxw(2);f.xp6(1),f.hij("",i.language["Please enter the same value again"],".")}}var N=function(e){return[e]};function I(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"form"),f.TgZ(1,"div",40),f.TgZ(2,"div",41),f.TgZ(3,"div",42),f.TgZ(4,"label",43),f._uU(5),f.qZA(),f.TgZ(6,"input",44),f.NdJ("ngModelChange",function(e){return f.CHM(i),f.oxw().editUserPassword=e})("keyup",function(){return f.CHM(i),f.oxw().changePassword()}),f.qZA(),f.YNc(7,U,2,1,"em",45),f.qZA(),f.qZA(),f.TgZ(8,"div",46),f.TgZ(9,"div",47),f.TgZ(10,"label",48),f._uU(11),f.qZA(),f.TgZ(12,"input",49),f.NdJ("ngModelChange",function(e){return f.CHM(i),f.oxw().editUserCPassword=e})("keyup",function(){return f.CHM(i),f.oxw().changeConfirmPassword()}),f.qZA(),f.YNc(13,D,2,1,"span",50),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&e){var n=f.oxw();f.xp6(3),f.Q6J("ngClass",f.VKq(10,N,n.passwordError?"ccl-error":"")),f.xp6(2),f.Oqu(n.language.password),f.xp6(1),f.s9C("placeholder",n.language["Enter new password"]),f.Q6J("ngModel",n.editUserPassword),f.xp6(1),f.Q6J("ngIf",!n.editUserPassword&&n.cpasswordError),f.xp6(2),f.Q6J("ngClass",f.VKq(12,N,n.cpasswordError?"ccl-error":"")),f.xp6(2),f.Oqu(n.language.confirmPassword),f.xp6(1),f.s9C("placeholder",n.language["Re-enter to confirm"]),f.Q6J("ngModel",n.editUserCPassword),f.xp6(1),f.Q6J("ngIf",n.cpasswordError)}}function E(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"div",53),f.TgZ(1,"button",36),f.NdJ("click",function(){return f.CHM(i),f.oxw().closeAlertRole()}),f._uU(2,"\xd7"),f.qZA(),f._UZ(3,"div",39),f.qZA()}if(2&e){var n=f.oxw();f.xp6(3),f.Q6J("innerHtml",n.existingRoleErrorInfo,f.oJD)}}function F(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"tr",54),f.TgZ(1,"td",55),f._uU(2),f.qZA(),f.TgZ(3,"td",56),f.TgZ(4,"i",57),f.NdJ("click",function(){var e=f.CHM(i).$implicit;return f.oxw().deleteRole(e)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){var n=t.$implicit,a=f.oxw();f.s9C("id",n._id),f.xp6(2),f.Oqu(n.name),f.xp6(2),f.s9C("title",a.language.delete)}}function P(e,t){if(1&e&&(f.TgZ(0,"div",58),f.TgZ(1,"div",59),f._uU(2),f.qZA(),f.qZA()),2&e){var i=f.oxw();f.xp6(2),f.hij(" ",i.language.permissions," ")}}function L(e,t){if(1&e&&(f.TgZ(0,"div"),f.TgZ(1,"div",4),f.TgZ(2,"div",65),f.TgZ(3,"div",71),f.TgZ(4,"div"),f._uU(5),f.qZA(),f.qZA(),f.qZA(),f.TgZ(6,"div",67),f._uU(7),f.qZA(),f.qZA(),f.qZA()),2&e){var i=t.$implicit,n=f.oxw(8);f.xp6(5),f.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),f.xp6(2),f.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," ")}}function J(e,t){if(1&e&&(f.TgZ(0,"div"),f.YNc(1,L,8,2,"div",68),f.qZA()),2&e){var i=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",i.permissions3)}}function R(e,t){if(1&e&&(f.TgZ(0,"div"),f.TgZ(1,"div",4),f.TgZ(2,"div",65),f.TgZ(3,"div",70),f.TgZ(4,"div"),f._uU(5),f.qZA(),f.qZA(),f.qZA(),f.TgZ(6,"div",67),f._uU(7),f.qZA(),f.qZA(),f.YNc(8,J,2,1,"div",12),f.qZA()),2&e){var i=t.$implicit,n=f.oxw(6);f.xp6(5),f.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),f.xp6(2),f.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," "),f.xp6(1),f.Q6J("ngIf",i.permissions3.length)}}function H(e,t){if(1&e&&(f.TgZ(0,"div"),f.YNc(1,R,9,3,"div",68),f.qZA()),2&e){var i=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",i.permissions2)}}function Y(e,t){if(1&e&&(f.TgZ(0,"div"),f.TgZ(1,"div",4),f.TgZ(2,"div",65),f.TgZ(3,"div",69),f.TgZ(4,"div"),f._uU(5),f.qZA(),f.qZA(),f.qZA(),f.TgZ(6,"div",67),f._uU(7),f.qZA(),f.qZA(),f.YNc(8,H,2,1,"div",12),f.qZA()),2&e){var i=t.$implicit,n=f.oxw(4);f.xp6(5),f.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),f.xp6(2),f.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," "),f.xp6(1),f.Q6J("ngIf",i.permissions2.length)}}function Q(e,t){if(1&e&&(f.TgZ(0,"div"),f.YNc(1,Y,9,3,"div",68),f.qZA()),2&e){var i=f.oxw().$implicit;f.xp6(1),f.Q6J("ngForOf",i.permissions)}}function z(e,t){if(1&e&&(f.TgZ(0,"div",24),f.TgZ(1,"div",64),f.TgZ(2,"div",65),f.TgZ(3,"div",66),f.TgZ(4,"div"),f._uU(5),f.qZA(),f.qZA(),f.qZA(),f.TgZ(6,"div",67),f._uU(7),f.qZA(),f.qZA(),f.YNc(8,Q,2,1,"div",12),f.qZA()),2&e){var i=t.$implicit,n=f.oxw(2);f.xp6(5),f.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),f.xp6(2),f.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," "),f.xp6(1),f.Q6J("ngIf",i.permissions.length)}}function B(e,t){if(1&e&&(f.TgZ(0,"div",60),f.TgZ(1,"div",61),f.TgZ(2,"form",62),f.YNc(3,z,9,3,"div",63),f.qZA(),f.qZA(),f.qZA()),2&e){var i=f.oxw();f.xp6(3),f.Q6J("ngForOf",i.rolePermissions)}}function j(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"div",60),f.TgZ(1,"div",72),f.TgZ(2,"button",73),f.NdJ("click",function(){return f.CHM(i),f.oxw().updateUserRoles()}),f._uU(3),f.qZA(),f.TgZ(4,"button",74),f.NdJ("click",function(){return f.CHM(i),f.oxw().cancelUpdate()}),f._uU(5),f.qZA(),f.qZA(),f.qZA()}if(2&e){var n=f.oxw();f.xp6(3),f.Oqu(n.language.saveEnregistrer),f.xp6(2),f.Oqu(n.language.Cancel)}}function V(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"div",75),f.TgZ(1,"h4",76),f._uU(2),f.qZA(),f.TgZ(3,"button",77),f.NdJ("click",function(){return f.CHM(i),f.oxw().closeModal()}),f._UZ(4,"span",78),f.qZA(),f.qZA(),f.TgZ(5,"div",79),f._uU(6),f.qZA(),f.TgZ(7,"div",80),f.TgZ(8,"button",81),f.NdJ("click",function(){return f.CHM(i),f.oxw().confirmDeleteSecleted()}),f._uU(9),f.qZA(),f.TgZ(10,"button",82),f.NdJ("click",function(){return f.CHM(i),f.oxw().closeModal()}),f._uU(11),f.qZA(),f.qZA()}if(2&e){var n=f.oxw();f.xp6(2),f.Oqu(n.modalTitle),f.xp6(4),f.AsE(" ",n.language["Are you sure you want to delete this role"]," ? (",n.modalInfo,") "),f.xp6(3),f.Oqu(n.language.yes),f.xp6(2),f.Oqu(n.language.no)}}var G,W=function(){return{standalone:!0}},X=((G=function(){function i(e,t,n,s,o,r,c,d,u){var g=this;a(this,i),this.commonFunctionsService=e,this.commonOrgService=t,this.router=n,this.customTranslateService=s,this.apiService=o,this.sso=r,this.dialogService=c,this.titleService=d,this.http=u,this.pageAvailable=!1,this.createSubnets=[],this.tableOptions={rowId:"_id",pageLength:10,processing:!0,ordering:!1,searching:!1,paging:!1,info:!1,language:{emptyTable:"No role available for current user."},rowCallback:function(e,t,i){var n=g;return $("td",e).unbind("click"),$("td",e).bind("click",function(){n.displaySelectedRolePerms(t._id)}),e},drawCallback:function(e){$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),g.highlightRowCallback()}},this.roles=[],this.rolesSelected=[],this.rolesTableData=[],this.rolesTableOptions={},this.dtTrigger=new l.xQ,this.isRerender=!1,this.rolesList=[],this.addedRolesList=[],this.countOfRolesAtStart=0,this.rolePermissions=[],this.usersSubnets=[],this.isLocalUser=!1,this.userTitle="",this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.saveCancelShow=!1,this.isPasswordChanged=!1,this.isSubnetChanged=!1,this.isRoleChanged=!1,this.oldRolesList=[],this.loading=!0,this.addedRolesName=[],this.addedRolesNameAtStart=[],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.existingRoles=[];var p=this.router.url;this.ORG_ID=this.sso.getOrganizationID(p),this.MODULE=this.sso.getRedirectModule(p),this.titleService.setTitle("Users detail - ".concat("systemAdministration"===this.MODULE?"System Administration":"Administration"," - Calix Cloud")),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){g.language=e,g.dataAvailable=!1,g.isRerender=!0,g.renderRolesTable("language")}),this.commonOrgService.currentPageAdder("usersDetail"),this.user=JSON.parse(sessionStorage.getItem("calixAdminUserDetail")||"{}"),this.frTable=this.customTranslateService.fr,this.isLocalUser=this.checkUserType(this.user),this.getData()}return o(i,[{key:"ngOnInit",value:function(){this.setUserInfo(),this.saveCancelShow=!1}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.userRolesUpdateSub)||void 0===e||e.unsubscribe(),this.dtTrigger&&this.dtTrigger.unsubscribe(),this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.parallelReqSubscribtionUpdate&&this.parallelReqSubscribtionUpdate.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.passSubs&&this.passSubs.unsubscribe(),localStorage.getItem("calix.federated_grantee_orgId")&&localStorage.removeItem("calix.federated_grantee_orgId")}},{key:"getData",value:function(){var e=this,t=["".concat(g.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/roles"),"".concat(g.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee/").concat(localStorage.getItem("calix.federated_grantee_orgId"),"/users/").concat(this.user._id,"/roles")],i=[];t.forEach(function(t){var n=e.apiService.callRestApi(t).pipe((0,p.U)(function(e){return e}),(0,h.K)(function(e){return(0,c.of)(e)}));i.push(n)}),this.combineLatest=(0,d.aj)(i),this.makeParallelRequest()}},{key:"makeParallelRequest",value:function(){var e=this;this.parallelReqSubscribtion=this.combineLatest.subscribe(function(t){e.rolesList=t[0];var i=t[1]?t[1]:[];e.oldRolesList=i,e.addedRolesList=i;var n=[];if(null==i||i.forEach(function(e){n.push(e._id)}),e.existingRoles=n,e.countOfRolesAtStart=e.addedRolesList?e.addedRolesList.length:0,e.addedRolesName=e.addedRolesList?e.getRoleNames(e.addedRolesList):[],e.addedRolesNameAtStart=e.addedRolesList?e.getRoleNames(e.addedRolesList):[],null!=t[0]&&null!=t[0].error){if(e.loading=!1,404!=t[0].status)return e.pageErrorHandle(t[0]),void e.commonOrgService.pageScrollTop()}else if(null!=t[1]&&null!=t[1].error&&(e.loading=!1,404!=t[1].status))return e.pageErrorHandle(t[1]),void e.commonOrgService.pageScrollTop();setTimeout(function(){e.renderRolesTable(),e.addedRolesList.length&&(e.permissionProcess(e.addedRolesList[0]),e.highlightRow(e.addedRolesList[0]._id)),e.countOfRolesAtStart=e.addedRolesList?e.addedRolesList.length:0,e.rolesAvail=!0,e.checkSelected(),setTimeout(function(){e.loading=!1},1e3)},100)})}},{key:"checkUserType",value:function(e){return!(!e||"local"!=e.idpType)}},{key:"changePassword",value:function(){this.passwordError=!1,this.passwordError=""==this.editUserPassword,this.editUserPassword==this.editUserCPassword?(this.passwordError=!1,this.cpasswordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}},{key:"changeConfirmPassword",value:function(){this.editUserPassword==this.editUserCPassword?(this.cpasswordError=!1,this.passwordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}},{key:"addRole",value:function(){var e=this;this.existingRoleError=!1;var i,n=[];this.selectedRoles.forEach(function(a){if(e.addedRolesList.filter(function(e){return e._id===a._id}).length>0)return e.existingRoleErrorInfo="".concat(a.username," - ").concat(e.language["Role already added"]),void(e.existingRoleError=!0);i=e.rolesList.findIndex(function(e){return e._id===a._id}),e.rolesList[i].disabled=!0,e.rolesList=t(e.rolesList),n.push(a)}),!this.existingRoleError&&(this.selectedRoles=[],setTimeout(function(){var i=[].concat(t(e.addedRolesList),n);e.addedRolesList=i,e.addedRolesName=e.getRoleNames(i);var a=e.addedRolesList.length-1;e.permissionProcess(e.addedRolesList[a]),e.highlightRow(e.addedRolesList[a]._id),e.isRerender=!0,e.rerender(),e.checkRoleChanged()},200))}},{key:"deleteRole",value:function(e){this.deleteData=e,this.modalTitle=this.language["Delete Role"],this.modalInfo="".concat(e.name),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal)}},{key:"confirmDeleteSecleted",value:function(){var e,i=this.deleteData;this.addedRolesList=this.addedRolesList.filter(function(e){return e._id!==i._id}),e=this.rolesList.findIndex(function(e){return e._id===i._id}),this.rolesList[e].disabled=!1,this.rolesList=t(this.rolesList),this.closeModal(),this.deleteData=void 0,this.isRerender=!0,this.rerender(),0==this.addedRolesList.length?this.rolePermissions=[]:(this.permissionProcess(this.addedRolesList[this.addedRolesList.length-1]),this.highlightRow(this.addedRolesList[this.addedRolesList.length-1]._id)),this.addedRolesName=this.getRoleNames(this.addedRolesList),this.checkRoleChanged()}},{key:"renderRolesTable",value:function(e){var t=this;this.setTableOptions(),e&&"language"==e?(setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next()},150),this.dataAvailable=!0):setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next(),t.dataAvailable=!0},150)}},{key:"setTableOptions",value:function(){this.tableLanguageOptions()}},{key:"changeDataForTable",value:function(){var t,i=[],n=e(this.roles);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.rolesSelected.includes(a.value)&&i.push(a)}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"updateUsersDetails",value:function(){var e=[];if(this.loading=!0,this.addedRolesList.length){var t,i=[];this.addedRolesList.forEach(function(e){i.push(e._id)}),t=i.join(",");var n="".concat(g.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee/").concat(localStorage.getItem("calix.federated_grantee_orgId"),"/users/").concat(this.user._id,"/role/").concat(t),a=this.apiService.updateRolesListByGranteeUserId(n).pipe((0,p.U)(function(e){return e}),(0,h.K)(function(e){return(0,c.of)(e)}));e.push(a)}else if(this.countOfRolesAtStart){var s="".concat(g.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee/").concat(localStorage.getItem("calix.federated_grantee_orgId"),"/users/").concat(this.user._id,"/roles"),o=this.apiService.deleteRolesListByGranteeUserId(s).pipe((0,p.U)(function(e){return e}),(0,h.K)(function(e){return(0,c.of)(e)}));e.push(o)}this.combineLatestUpdate=(0,d.aj)(e),this.makeParallelUpdateRequests()}},{key:"makeParallelUpdateRequests",value:function(){var t=this;this.parallelReqSubscribtionUpdate=this.combineLatestUpdate.subscribe(function(i){if(t.loading=!1,i.length){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(null!=s&&null!=s.error)return t.loading=!1,void t.pageErrorHandle(s)}}catch(o){a.e(o)}finally{a.f()}}t.successMessage()})}},{key:"updateUserRoles",value:function(){var e,t,i,n,a=this,s=[],o=[],r=[];null===(e=this.addedRolesList)||void 0===e||e.forEach(function(e){-1===a.existingRoles.indexOf(e._id)&&s.push(e._id),r.push(e._id)}),null===(t=this.existingRoles)||void 0===t||t.forEach(function(e){-1===r.indexOf(e)&&o.push(e)}),console.log("newRoles",s),console.log("deletedRoles",o);var l={};null==s||s.forEach(function(e){l[e]=a.http.post("".concat(g.N.API_BASE_URL,"federated/").concat(a.ORG_ID,"/grantee/").concat(localStorage.getItem("calix.federated_grantee_orgId"),"/users/").concat(a.user._id,"/role/").concat(e),{}).pipe((0,h.K)(function(e){return e["api-error"]=!0,(0,c.of)(e)}))}),null==o||o.forEach(function(e){l[e]=a.http.delete("".concat(g.N.API_BASE_URL,"federated/").concat(a.ORG_ID,"/grantee/").concat(localStorage.getItem("calix.federated_grantee_orgId"),"/users/").concat(a.user._id,"/role/").concat(e),{}).pipe((0,h.K)(function(e){return e["api-error"]=!0,(0,c.of)(e)}))}),(null===(i=Object.keys(l))||void 0===i?void 0:i.length)&&(null===(n=this.userRolesUpdateSub)||void 0===n||n.unsubscribe(),this.userRolesUpdateSub=(0,u.D)(l).subscribe(function(e){console.log(e);var t=[];if(e){var i=Object.keys(e);if(null==i||i.forEach(function(i){var n;(null===(n=e[i])||void 0===n?void 0:n["api-error"])&&t.push(a.commonOrgService.pageErrorHandle(e[i]))}),null==t?void 0:t.length)return a.error=!0,a.errorInfo=t.join("<br/>"),void console.log(t)}a.successMessage()},function(e){console.log(e)}))}},{key:"cancelUpdate",value:function(){this.gotoAccountMgmt()}},{key:"gotoAccountMgmt",value:function(){this.router.navigate(["".concat(this.MODULE,"/account-management")])}},{key:"permissionProcess",value:function(e){this.rolePermissions=null!=e?"118"==e.apptype||"119"==e.apptype||"102"==e.apptype?this.commonOrgService.permProcessForUserDetailV21(e):this.commonOrgService.permProcessForUserDetail(e):[]}},{key:"setUserInfo",value:function(){var e=this.user;this.userTitle=null!=e.firstName&&""!==e.firstName?null!=e.lastName?"".concat(e.firstName," ").concat(e.lastName):"".concat(e.firstName):(null==e?void 0:e.userName)?"".concat(e.userName):"".concat(e._id)}},{key:"closeAlertRole",value:function(){this.existingRoleError=!1}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"checkRoleChanged",value:function(){var e=this;this.isRoleChanged=!1,this.addedRolesName.length!==this.addedRolesNameAtStart.length?(this.isRoleChanged=!0,this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&this.addedRolesNameAtStart.length?(this.addedRolesName.forEach(function(t){if(!e.addedRolesNameAtStart.includes(t))return e.isRoleChanged=!0,void e.checkShowButtons()}),this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&!this.addedRolesNameAtStart.length&&(this.isRoleChanged=!1,this.checkShowButtons())}},{key:"checkShowButtons",value:function(){this.saveCancelShow=!!(this.isPasswordChanged||this.isRoleChanged||this.isSubnetChanged)}},{key:"hideSearch",value:function(){setTimeout(function(){$("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),$("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},100)}},{key:"displaySelectedRolePerms",value:function(e){if(e){var t=this.addedRolesList.filter(function(t){return t._id===e});t.length&&(this.selectedRoleId=t[0]._id,this.permissionProcess(t[0]),this.highlightRow(t[0]._id))}}},{key:"successMessage",value:function(){var e=this;this.closeAlert(),this.successInfo=this.language["User details saved successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.loading=!1,setTimeout(function(){e.gotoAccountMgmt()},1500)}},{key:"highlightRow",value:function(e){this.selectedRoleId=e,setTimeout(function(){$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),$("#"+e).css("background-color","whitesmoke")},100)}},{key:"highlightRowCallback",value:function(){this.selectedRoleId&&$("#"+this.selectedRoleId).css("background-color","whitesmoke")}},{key:"checkSelected",value:function(){var e=this;this.rolesList.forEach(function(t){e.addedRolesList.filter(function(e){return t._id===e._id}).length&&(t.disabled=!0)}),this.rolesList=t(this.rolesList)}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?(this.tableOptions.language=this.frTable,this.tableOptions.language.emptyTable="Aucune r\xf4le disponible pour l'utilisateur actuel."):"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&(delete this.tableOptions.language,this.tableOptions.language={emptyTable:"No role available for current user."})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"updateAddedRolesName",value:function(e,i,n){if(n)this.addedRolesName=this.addedRolesName.filter(function(e){return e!==i});else{var a=[];e.forEach(function(e){a.push(e.name)}),this.addedRolesName=[].concat(t(this.addedRolesName),a)}}},{key:"getRoleNames",value:function(e){var t=[];return e.forEach(function(e){t.push(e.name)}),t}}]),i}()).\u0275fac=function(e){return new(e||G)(f.Y36(m.i),f.Y36(v.v),f.Y36(Z.F0),f.Y36(b.d),f.Y36(A.q),f.Y36(x.t6),f.Y36(T.FF),f.Y36(_.Dx),f.Y36(C.eN))},G.\u0275cmp=f.Xpm({type:G,selectors:[["app-federated-user-detials"]],viewQuery:function(e,t){var i;1&e&&(f.Gf(w,7),f.Gf(r.G,5)),2&e&&(f.iGM(i=f.CRH())&&(t.deleteModal=i.first),f.iGM(i=f.CRH())&&(t.dtElement=i.first))},decls:42,vars:25,consts:[[1,"container"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","px-1"],[1,"container","my-3","pr-0"],[4,"ngIf"],[1,"row","my-2","pl-0"],[1,"ccl-title","col-md-12","pl-0"],[1,"row","ccl-form"],[1,"col-md-4","pl-0"],["bindLabel","name","placeholder","",1,"w-100",3,"items","ngModel","multiple","ngModelOptions","searchable","disabled","ngModelChange"],[1,"col-md-2","pl-0"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"disabled","click"],[1,"row","my-4"],["class","w-100 alert alert-warning fade show",4,"ngIf"],[1,"col-md-12","px-0",3,"hidden"],["width","100%","datatable","",1,"table","row-border","hover",3,"dtOptions","dtTrigger"],[1,""],["class","user-details-row",3,"id",4,"ngFor","ngForOf"],["class","row my-2",4,"ngIf"],["class","row my-4 px-3",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,"row","my-3"],[1,"col-md-6","pl-0"],[1,"ccl-form","required",3,"ngClass"],["for","Password",1,"ccl-title"],["id","editUserPassword","name","editUserPassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","editUserPassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],["id","editUserPassword-error","class","invalid",4,"ngIf"],[1,"col-md-6","pr-0"],[1,"ccl-form",3,"ngClass"],["for","Confirm Password",1,"ccl-title"],["id","confirmpassword","name","confirmpassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","confirmpassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],["id","confirmpassword-error","class","state-error error",4,"ngIf"],["id","editUserPassword-error",1,"invalid"],["id","confirmpassword-error",1,"state-error","error"],[1,"w-100","alert","alert-warning","fade","show"],[1,"user-details-row",3,"id"],[1,"cursor-pointer"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","cursor-pointer","primary",3,"title","click"],[1,"row","my-2"],[1,"ccl-title","col-md-12"],[1,"row","my-4","px-3"],[1,"col-md-12","pr-0"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],[1,"row","row-bg-grey"],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"box-of-permission","col-md-4"],[4,"ngFor","ngForOf"],[1,"custom-flex","ml-3"],[1,"custom-flex","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-12","text-right","px-0"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.YNc(1,O,5,1,"div",1),f.YNc(2,S,6,1,"div",2),f.YNc(3,M,4,1,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"div",6),f._uU(7),f.qZA(),f.qZA(),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"a",9),f.NdJ("click",function(){return t.gotoAccountMgmt()}),f._UZ(11,"i",10),f._uU(12," Back to Account Management"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(13,"div",11),f.YNc(14,I,14,14,"form",12),f.qZA(),f.TgZ(15,"div",11),f.TgZ(16,"div",13),f.TgZ(17,"div",14),f._uU(18),f.qZA(),f.qZA(),f.TgZ(19,"div",15),f.TgZ(20,"div",16),f.TgZ(21,"ng-select",17),f.NdJ("ngModelChange",function(e){return t.selectedRoles=e}),f.qZA(),f.qZA(),f.TgZ(22,"div",18),f.TgZ(23,"button",19),f.NdJ("click",function(){return t.addRole()}),f._uU(24),f.qZA(),f.qZA(),f.qZA(),f.TgZ(25,"div",20),f.YNc(26,E,4,1,"div",21),f.TgZ(27,"div",22),f.TgZ(28,"table",23),f.TgZ(29,"thead",24),f.TgZ(30,"tr"),f.TgZ(31,"th"),f._uU(32),f.qZA(),f.TgZ(33,"th"),f._uU(34),f.qZA(),f.qZA(),f.qZA(),f.TgZ(35,"tbody"),f.YNc(36,F,5,3,"tr",25),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(37,P,3,1,"div",26),f.YNc(38,B,4,1,"div",27),f.YNc(39,j,6,2,"div",27),f.qZA(),f.YNc(40,V,12,5,"ng-template",null,28,f.W1O)),2&e&&(f.xp6(1),f.Q6J("ngIf",t.loading),f.xp6(1),f.Q6J("ngIf",t.error),f.xp6(1),f.Q6J("ngIf",t.success),f.xp6(4),f.Oqu(t.userTitle),f.xp6(7),f.Q6J("ngIf",t.isLocalUser),f.xp6(4),f.hij(" ",t.language.addDeleteRoles," "),f.xp6(3),f.Q6J("items",t.rolesList)("ngModel",t.selectedRoles)("multiple",!0)("ngModelOptions",f.DdM(24,W))("searchable",!0)("disabled",!(null!=t.rolesList&&t.rolesList.length)),f.xp6(2),f.Q6J("disabled",!(null!=t.rolesList&&t.rolesList.length)),f.xp6(1),f.Oqu(t.language.add),f.xp6(2),f.Q6J("ngIf",t.existingRoleError),f.xp6(1),f.Q6J("hidden",!t.dataAvailable),f.xp6(1),f.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),f.xp6(4),f.Oqu(t.language.roles),f.xp6(2),f.Oqu(t.language.action),f.xp6(2),f.Q6J("ngForOf",t.addedRolesList),f.xp6(1),f.Q6J("ngIf",t.rolePermissions.length),f.xp6(1),f.Q6J("ngIf",t.rolePermissions.length),f.xp6(1),f.Q6J("ngIf",t.saveCancelShow))},directives:[y.O5,k.w9,q.JJ,q.On,r.G,y.sg,q._Y,q.JL,q.F,y.mk,q.Fj,q.Q7,q.nD],styles:[".box-of-permission[_ngcontent-%COMP%]{padding:10px;border:.5px solid #ccc;vertical-align:middle}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.row-bg-grey[_ngcontent-%COMP%]{background-color:#d9dfe6}"]}),G)},93702:function(e,t,i){i.d(t,{c:function(){return g}});var n=i(37716),s=i(7450),r=i(89097),l=i(38583);function c(e,t){if(1&e&&(n.TgZ(0,"a",9),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language.About_Calix_Cloud)}}function d(e,t){if(1&e&&(n.TgZ(0,"a",10),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.Oqu(i.language.About_Calix_Cloud)}}var u,g=((u=function(){function e(t,i){a(this,e),this.translateService=t,this.sso=i}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t}),this.loginType=this.sso.getCscType()}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||u)(n.Y36(s.s),n.Y36(r.t6))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-admin-footer"]],decls:14,vars:4,consts:[[1,"maximus"],[1,"ftr-row","flex"],[1,"logo"],[1,"ftr-rht","flex"],[1,"flex","ftr-link"],["target","_blank","id","terms-conditions","href","https://www.calix.com/pages/terms-of-use.html"],["target","_blank","id","about-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-eme-rn.htm",4,"ngIf"],["target","_blank","id","contact-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-dme-rn.htm",4,"ngIf"],["target","_blank","href","https://www.calix.com/about-calix/contact-us.html"],["target","_blank","id","about-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-eme-rn.htm"],["target","_blank","id","contact-calix","href","https://www.calix.com/content/dam/calix/mycalix-misc/lib/cloud/rn/current/support-cloud-dme-rn.htm"]],template:function(e,t){1&e&&(n.TgZ(0,"footer"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._UZ(3,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"a",5),n._uU(7),n.qZA(),n.YNc(8,c,2,1,"a",6),n.YNc(9,d,2,1,"a",7),n.TgZ(10,"a",8),n._uU(11),n.qZA(),n.TgZ(12,"p"),n._uU(13,"1.877.766.3500"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Oqu(t.language.Terms_and_Conditions),n.xp6(1),n.Q6J("ngIf","DME"!=t.loginType),n.xp6(1),n.Q6J("ngIf","DME"==t.loginType),n.xp6(2),n.Oqu(t.language.Contact_Calix))},directives:[l.O5],styles:[".cc-footer[_ngcontent-%COMP%]{color:#4c4c4c;position:absolute;right:0;bottom:0;left:0;padding:1rem;text-align:center;border-top:1px solid #cccc}a[_ngcontent-%COMP%]:hover{text-decoration:none}"]}),u)},99225:function(e,t,i){i.d(t,{y:function(){return g}});var n=i(37716),s=i(7450),r=i(49342),l=i(38583),c=i(39895);function d(e,t){if(1&e&&(n.TgZ(0,"div",3),n.TgZ(1,"ul",4),n.TgZ(2,"li",5),n.TgZ(3,"a",6),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language["System Delete Settings"])}}var u,g=((u=function(){function e(t,i){var n=this;a(this,e),this.translateService=t,this.commonOrgService=i,this.currentPage="block_page",this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){n.language=e}),this.commonOrgService.currentPageData.subscribe(function(e){n.currentPage=e})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||u)(n.Y36(s.s),n.Y36(r.v))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-foundation"]],decls:4,vars:1,consts:[["class","flow-config-tab container",4,"ngIf"],[1,"my-2"],[1,"container","my-3"],[1,"flow-config-tab","container"],[1,"nav"],[1,"nav-item"],["id","foundation-system-delete-settings","routerLink","./system_settings","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(n.YNc(0,d,5,1,"div",0),n._UZ(1,"div",1),n.TgZ(2,"div",2),n._UZ(3,"router-outlet"),n.qZA()),2&e&&n.Q6J("ngIf",t.pageAvailable)},directives:[l.O5,c.lC,c.yS,c.Od],styles:[""]}),u)},93517:function(e,t,i){i.d(t,{G:function(){return u}});var n,s=i(37716),r=i(89097),l=i(39895),c=i(81100),d=i(83249),u=((n=function(){function e(t,i){a(this,e),this.sso=t,this.router=i}return o(e,[{key:"ngOnInit",value:function(){this.checkSysAdmin(),this.MODULE=this.sso.getRedirectModule(this.router.url)}},{key:"checkSysAdmin",value:function(){var e=this.sso.getRoles();this.isSysAdmin=!!(null==e?void 0:e.includes("SysAdmin"))}},{key:"navigateCurrentRoute",value:function(){var e=this,t=this.router.url,i=t.includes("/org-admins/all");this.isSysAdmin?i?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){e.router.navigate([t])}):this.router.navigate(["systemAdministration/organizations"]):i?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){e.router.navigate([t])}):this.router.navigate(["".concat(this.MODULE,"/users")])}}]),e}()).\u0275fac=function(e){return new(e||n)(s.Y36(r.t6),s.Y36(l.F0))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-admin-header"]],decls:11,vars:0,consts:[[1,"row","my-3","px-0"],[1,"col-md-6"],[1,"logo"],["href","javascript:void(0)",3,"click"],["src","./assets/img/calix-Cloud-logo.svg"],[1,"col-md-6","pr-0"],[1,"d-flex","justify-content-end"],[1,"mx-3","pt-2"],[1,""]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"a",3),s.NdJ("click",function(){return t.navigateCurrentRoute()}),s._UZ(4,"img",4),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s.TgZ(7,"div",7),s._UZ(8,"app-grid"),s.qZA(),s.TgZ(9,"div",8),s._UZ(10,"app-dd-menu"),s.qZA(),s.qZA(),s.qZA(),s.qZA())},directives:[c.M,d.z],styles:[""]}),n)},86355:function(e,t,i){i.d(t,{a:function(){return q}});var n=i(37716),s=i(39075),r=i(7450),l=i(12664),c=i(39895),d=i(89097),u=i(49342),g=i(82823),p=i(43721),h=i(38583),f=i(3679),m=["suspendedSubscribersDuration"],v=["DontConvertSuspendedSubscribers"];function Z(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",27),n.TgZ(1,"span",28),n._UZ(2,"img",29),n.qZA(),n.TgZ(3,"button",30),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",31),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.errorInfo,n.oJD)}}var b=function(e){return{"cursor-pointer":e}};function A(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"a",32),n.NdJ("click",function(){return n.CHM(i),n.oxw().refresh()}),n._UZ(1,"img",33),n.qZA()}if(2&e){var a=n.oxw();n.s9C("title",a.language["Reset to default"]),n.Q6J("ngClass",n.VKq(2,b,a.frombillingStatusEnabled))}}var x=function(e){return{disabled:e}};function T(e,t){if(1&e&&(n.TgZ(0,"a",34),n._UZ(1,"img",35),n.qZA()),2&e){var i=n.oxw();n.s9C("title",i.language["Reset to default"]),n.Q6J("ngClass",n.VKq(2,x,!i.frombillingStatusEnabled))}}function _(e,t){if(1&e&&(n.TgZ(0,"div",36),n._uU(1),n.qZA()),2&e){var i=n.oxw();n.xp6(1),n.hij(" ",i.language["Please enter a value within the range 1 to 99"]," ")}}function C(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",37),n.TgZ(1,"div",38),n.TgZ(2,"button",39),n.NdJ("click",function(){return n.CHM(i).$implicit.dismiss("Cross click")}),n._UZ(3,"span"),n.qZA(),n.TgZ(4,"div",40),n.TgZ(5,"div",41),n._UZ(6,"img",42),n.qZA(),n.TgZ(7,"div",43),n.TgZ(8,"h3"),n._uU(9),n.qZA(),n.TgZ(10,"p",44),n._uU(11),n.qZA(),n.TgZ(12,"div",45),n.TgZ(13,"button",46),n.NdJ("click",function(){return n.CHM(i),n.oxw().saveDuration()}),n._uU(14),n.qZA(),n.TgZ(15,"button",47),n.NdJ("click",function(){return n.CHM(i).$implicit.dismiss("Cross click")}),n._uU(16),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(9),n.Oqu(a.language["Change Suspended Status Duration"]),n.xp6(2),n.hij(" ",a.language.suspend_status_duration_msg," "),n.xp6(3),n.hij(" ",a.language["Change Duration"]," "),n.xp6(2),n.hij(" ",a.language.Cancel," ")}}function y(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",37),n.TgZ(1,"div",38),n.TgZ(2,"button",39),n.NdJ("click",function(){return n.CHM(i).$implicit.dismiss("Cross click")}),n._UZ(3,"span"),n.qZA(),n.TgZ(4,"div",40),n.TgZ(5,"div",41),n._UZ(6,"img",42),n.qZA(),n.TgZ(7,"div",43),n.TgZ(8,"h3"),n._uU(9),n.qZA(),n.TgZ(10,"p",44),n._uU(11),n.qZA(),n.TgZ(12,"div",45),n.TgZ(13,"button",46),n.NdJ("click",function(){return n.CHM(i),n.oxw().saveDuration()}),n._uU(14),n.qZA(),n.TgZ(15,"button",47),n.NdJ("click",function(){return n.CHM(i).$implicit.dismiss("Cross click")}),n._uU(16),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(9),n.Oqu(a.language["Do Not Convert Suspended Subscribers"]),n.xp6(2),n.hij(" ",a.language["Suspended subscribers will remain in suspended status until changed through updated data."]," "),n.xp6(3),n.hij(" ",a.language.apply," "),n.xp6(2),n.hij(" ",a.language.Cancel," ")}}var k,q=((k=function(){function e(t,i,n,s,o,r,l,c){a(this,e),this.titleService=t,this.translateService=i,this.modalService=n,this.router=s,this.ssoService=o,this.commonOrgService=r,this.zipcodeService=l,this.validatorService=c,this.undoIcon=!1,this.type="",this.errorShow=!1,this.billingStatusEnabled=!1,this.frombillingStatusEnabled=!1,this.checkEnable=!1,this.checkedSub=!1,this.checkeddonot=!1,this.errorcheck=!1,this.defaultValue=30,this.commonOrgService.currentPageAdder("marketing-cloud")}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.setPageTitle(),this.getZipcodeEntryList(),this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.setPageTitle(),e.getZipcodeEntryList()})}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe()}},{key:"setPageTitle",value:function(){var e=this.router.url;e.includes("/organization-admin")?(console.log(e),this.titleService.setTitle("".concat(this.language.cmcName," - ").concat(this.language.administration," - ").concat(this.language["Calix Cloud"]))):this.titleService.setTitle("".concat(this.language.cmcName," - ").concat(this.language["System Administration"]," - ").concat(this.language["Calix Cloud"]))}},{key:"refresh",value:function(){this.suspendedDuration=0==this.refreshDefault?this.defaultValue:this.refreshDefault,this.errorShow=!1}},{key:"saveSubscriberStatus",value:function(){if(this.frombillingStatusEnabled){if(""==this.suspendedDuration||null==this.suspendedDuration)return void(this.errorShow=!0);this.errorShow=!1,this.openSaveModel()}else this.openSaveModel1()}},{key:"openSaveModel1",value:function(){this.modalService.open(this.DontConvertSuspendedSubscribers,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"alert-warning-modal"})}},{key:"openSaveModel",value:function(){this.modalService.open(this.suspendedSubscribersDuration,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"alert-warning-modal"})}},{key:"getZipcodeEntryList",value:function(){var e=this;this.zipcodeService.marketingCloudCheck().subscribe(function(t){t&&(e.billingStatusEnabled=t.billingStatusEnabled,e.refreshDefault=t.suspendedDuration,0!=t.suspendedDuration?(e.suspendedDuration=t.suspendedDuration,e.checkedSub=!0,e.checkeddonot=!1,e.type="on"):(e.suspendedDuration=0==e.refreshDefault?e.defaultValue:e.refreshDefault,e.checkeddonot=!0,e.checkedSub=!1,e.type="on"),e.frombillingStatusEnabled=0!=t.suspendedDuration,e.checkEnable=0!=t.suspendedDuration||0==t.suspendedDuration)},function(t){e.billingStatusEnabled=!1,t&&(e.errorcheck=!0,e.errorInfo=t.error.message)})}},{key:"closeAlert",value:function(){this.errorcheck=!1}},{key:"onChange",value:function(e,t){this.type=e.target.value,this.checkEnable=""!=this.type,this.errorShow=!1,this.frombillingStatusEnabled=1==t,1==t?(this.checkedSub=!0,this.checkeddonot=!1):(this.checkeddonot=!0,this.checkedSub=!1),this.suspendedDuration=0==this.refreshDefault?this.defaultValue:this.refreshDefault}},{key:"saveDuration",value:function(){var e=this,t={billingStatusEnabled:!0,orgid:this.ssoService.getOrgId(),suspendedDuration:this.frombillingStatusEnabled?this.suspendedDuration:0};this.zipcodeService.marketingCloudCheckUpdate(t).subscribe(function(t){t&&(e.modalService.dismissAll(),e.getZipcodeEntryList())},function(e){})}},{key:"campaignTargetChange",value:function(e){e?this.suspendedDuration=e:(this.suspendedDuration="",document.getElementById("campaign-target").value=""),this.errorShow=this.validatorService.durationValidator(e)}}]),e}()).\u0275fac=function(e){return new(e||k)(n.Y36(s.Dx),n.Y36(r.s),n.Y36(l.FF),n.Y36(c.F0),n.Y36(d.t6),n.Y36(u.v),n.Y36(g.F),n.Y36(p.o))},k.\u0275cmp=n.Xpm({type:k,selectors:[["app-marketing-cloud"]],viewQuery:function(e,t){var i;1&e&&(n.Gf(m,7),n.Gf(v,7)),2&e&&(n.iGM(i=n.CRH())&&(t.suspendedSubscribersDuration=i.first),n.iGM(i=n.CRH())&&(t.DontConvertSuspendedSubscribers=i.first))},decls:42,vars:17,consts:[[1,"container","position-relative","px-0"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"row"],[1,"col-12","mb-3"],[1,"ccl-admin-title"],[1,"col-12"],[1,"cco-secondary-title"],[1,"mb-2"],[1,"mb-0"],[1,"radio-check"],[1,"ccl-form"],[1,"d-flex","align-items-center"],[1,"pr-1"],["for","radioSuspendedStatusDuration1",1,"d-flex","align-items-center","mb-0","cursor-pointer"],["type","radio","id","radioSuspendedStatusDuration1","name","SuspendedStatusDuration",1,"mr-2",3,"checked","change"],["type","number","min","1","max","99","id","campaign-target",1,"max-width-75","mr-1",3,"ngModel","disabled","ngModelChange"],[1,"d-flex"],[1,"text-capitalize","pr-1"],[3,"ngClass","title","click",4,"ngIf"],[3,"ngClass","title",4,"ngIf"],["class","mandatory-msg",4,"ngIf"],["for","radioSuspendedStatusDuration2",1,"d-flex","align-items-center","mb-0","cursor-pointer"],["type","radio","id","radioSuspendedStatusDuration2","name","SuspendedStatusDuration",1,"mr-2",3,"checked","change"],[1,"mt-3"],["type","button",1,"btn-default","btn-primary",3,"disabled","click"],["suspendedSubscribersDuration",""],["DontConvertSuspendedSubscribers",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","mt-2",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[3,"ngClass","title","click"],["src","../../../assets/img/ic_undo.svg","width","22px","alt","icon here"],[3,"ngClass","title"],["src","../../../assets/img/ic_undo_disabled.svg","width","22px","alt","icon here",1,"opacity-75"],[1,"mandatory-msg"],[1,"modal-body"],[1,"w-100","alert-box"],["aria-label","Close",1,"close",3,"click"],[1,"box-content"],[1,"icon"],["src","../../../assets/img/ic_warning-36px.svg","alt","icon here"],[1,"content"],[1,"mb-3"],[1,"w-100","mt-3","pt-2"],["type","button","id","submitBtnChangeDuration",1,"btn-default","primary","mr-3",3,"click"],["type","button","id","cancelBtnChangeDuration","aria-label","Close",1,"btn-default","btn-dft",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,Z,6,1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n._uU(5),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",2),n.TgZ(7,"div",5),n.TgZ(8,"h2",6),n._uU(9),n.qZA(),n.TgZ(10,"p",7),n._uU(11),n.qZA(),n.TgZ(12,"p",8),n._uU(13),n.qZA(),n.TgZ(14,"div",9),n.TgZ(15,"div",10),n.TgZ(16,"div",11),n.TgZ(17,"div",12),n.TgZ(18,"label",13),n.TgZ(19,"input",14),n.NdJ("change",function(e){return t.onChange(e,1)}),n.qZA(),n._uU(20),n.qZA(),n.qZA(),n.TgZ(21,"div",11),n.TgZ(22,"input",15),n.NdJ("ngModelChange",function(e){return t.suspendedDuration=e})("ngModelChange",function(e){return t.campaignTargetChange(e)}),n.qZA(),n.TgZ(23,"div",16),n.TgZ(24,"span",17),n._uU(25),n.qZA(),n.YNc(26,A,2,4,"a",18),n.YNc(27,T,2,4,"a",19),n.qZA(),n.qZA(),n.qZA(),n.YNc(28,_,2,1,"div",20),n.qZA(),n.TgZ(29,"div",10),n.TgZ(30,"div",11),n.TgZ(31,"div"),n.TgZ(32,"label",21),n.TgZ(33,"input",22),n.NdJ("change",function(e){return t.onChange(e,2)}),n.qZA(),n._uU(34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"div",23),n.TgZ(36,"button",24),n.NdJ("click",function(){return t.saveSubscriberStatus()}),n._uU(37),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(38,C,17,4,"ng-template",null,25,n.W1O),n.YNc(40,y,17,4,"ng-template",null,26,n.W1O),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.errorcheck),n.xp6(4),n.Oqu(t.language["Marketing Cloud Settings"]),n.xp6(4),n.Oqu(t.language["Subscriber Status"]),n.xp6(2),n.Oqu(t.language.CmcSubscriber_Status_Msg),n.xp6(2),n.Oqu(t.language["Suspended Status Duration"]),n.xp6(6),n.Q6J("checked",t.checkedSub),n.xp6(1),n.hij(" ",t.language["Suspended Status Duration"]," "),n.xp6(2),n.Q6J("ngModel",t.suspendedDuration)("disabled",!t.frombillingStatusEnabled||""==t.type),n.xp6(3),n.hij(" ",t.language.Days," "),n.xp6(1),n.Q6J("ngIf",t.frombillingStatusEnabled),n.xp6(1),n.Q6J("ngIf",!t.frombillingStatusEnabled),n.xp6(1),n.Q6J("ngIf",t.errorShow),n.xp6(5),n.Q6J("checked",t.checkeddonot),n.xp6(1),n.hij(" ",t.language["Do not convert suspended subscribers into churned subscribers"]," "),n.xp6(2),n.Q6J("disabled",!t.billingStatusEnabled||!t.checkEnable||t.errorShow),n.xp6(1),n.hij(" ",t.language.Save," "))},directives:[h.O5,f.qQ,f.Fd,f.wV,f.Fj,f.JJ,f.On,h.mk],styles:[".max-width-75[_ngcontent-%COMP%]{max-width:75px}.opacity-75[_ngcontent-%COMP%]{opacity:75%}  .alert-warning-modal .modal-content{background:#fff9f5}  .alert-warning-modal .modal-dialog{max-width:45.73%!important}.alert-box[_ngcontent-%COMP%]{position:relative;padding:30px 0 15px}.alert-box[_ngcontent-%COMP%]   button.close[_ngcontent-%COMP%]{right:0;top:0}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]{color:#1a1f22}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-right:30px;padding-left:80px}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:75px;float:left;text-align:center}.alert-box[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.alert-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4c4c4c;margin-bottom:0;font-size:16px;line-height:20px}.alert-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;line-height:30px;color:#1a1f22}.alert-box[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{cursor:not-allowed;pointer-events:none}.alert-box[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]:hover{cursor:not-allowed}"]}),k)},67679:function(e,t,i){i.d(t,{F:function(){return k}});var n=i(37716),s=i(12664),r=i(86451),l=i(39895),c=i(7450),d=i(49342),u=i(38583),g=i(23771);function p(e,t){if(1&e&&(n.TgZ(0,"div",5),n.TgZ(1,"div",6),n.TgZ(2,"div",7),n.TgZ(3,"span",8),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language.Loading)}}function h(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",9),n.TgZ(1,"span",10),n._UZ(2,"img",11),n.qZA(),n.TgZ(3,"button",12),n.NdJ("click",function(){return n.CHM(i),n.oxw().errorInfo=""}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",13),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.errorInfo,n.oJD)}}function f(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",29),n.TgZ(1,"div",30),n._UZ(2,"img",31),n.qZA(),n.TgZ(3,"div",32),n.TgZ(4,"h5"),n._uU(5),n.qZA(),n._uU(6),n.TgZ(7,"p",33),n.NdJ("click",function(){n.CHM(i);var e=n.oxw(2),t=n.MAs(5);return e.openErrorsFoundModal(t)}),n._uU(8),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw(2);n.xp6(5),n.Oqu(a.language["Errors found in User Records CSV"]),n.xp6(1),n.hij(" ",a.language["Please correct the errors and re-upload the CSV file"]," "),n.xp6(2),n.lnq("",a.language.View," ",a.missingvalues.length+a.apiErrors.length," ",a.language.errors,"")}}function m(e,t){if(1&e&&(n.TgZ(0,"div",34),n.TgZ(1,"div",35),n._UZ(2,"img",36),n.qZA(),n.TgZ(3,"div",37),n._uU(4),n.qZA(),n.qZA()),2&e){var i=n.oxw(2);n.xp6(4),n.lnq(" ",i.language["Adding users to the communities specified in the CSV"],"... ",i.getRoundedValue(i.savedSubscribersCount/i.userList.length*100),"% ",i.language.complete," ")}}function v(e,t){if(1&e&&(n.TgZ(0,"div",38),n.TgZ(1,"div",39),n._UZ(2,"img",40),n.qZA(),n.TgZ(3,"div",41),n._uU(4),n.qZA(),n.qZA()),2&e){var i=n.oxw(2);n.xp6(4),n.hij(" ",i.language["Users successfully added to the communities specified in the CSV"],". ")}}function Z(e,t){if(1&e&&(n.TgZ(0,"div",29),n.TgZ(1,"div",30),n._UZ(2,"img",31),n.qZA(),n.TgZ(3,"div",32),n._uU(4),n.qZA(),n.qZA()),2&e){var i=n.oxw(2);n.xp6(4),n.hij(" ",i.language["The process for adding users to the communities has been stopped"],". ")}}function b(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){var i=t.$implicit,a=t.index,s=n.oxw().$implicit;n.xp6(1),n.AsE("",i.communityName,"",s.community.length-1!==a?", ":"","")}}function A(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._UZ(2,"img",42),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n.YNc(10,b,2,2,"span",28),n.qZA(),n.qZA()),2&e){var i=t.$implicit,a=t.index,s=n.oxw(2);n.xp6(2),n.MGl("src","../../../../assets/img/","success"==s.statusIconInfo[a]?"ic_test-success":"inprogress"==s.statusIconInfo[a]?"ic_progress-circle":"warning-icon",".svg",n.LSH),n.Q6J("hidden",s.errorFound(i,a)&&!s.statusIconInfo[a]||"stop"==s.submissionStatus&&a===s.savedSubscribersCount),n.xp6(2),n.Oqu(i.firstName),n.xp6(2),n.Oqu(i.lastName),n.xp6(2),n.Oqu(i.email),n.xp6(2),n.Q6J("ngForOf",i.community)}}function x(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",14),n.TgZ(1,"div",15),n.TgZ(2,"div",16),n.TgZ(3,"div",17),n.TgZ(4,"div",18),n._uU(5),n.qZA(),n.TgZ(6,"div",19),n.TgZ(7,"button",20),n.NdJ("click",function(){n.CHM(i);var e=n.oxw(),t=n.MAs(7);return"in progress"==e.submissionStatus?e.openStopUserPopup(t):e.goBack()}),n._uU(8),n.qZA(),n.TgZ(9,"button",21),n.NdJ("click",function(){n.CHM(i);var e=n.oxw();return"success"==e.submissionStatus||"stop"==e.submissionStatus?e.goBack():e.saveUsers(!0)}),n._uU(10),n.qZA(),n.qZA(),n.qZA(),n.YNc(11,f,9,5,"div",22),n.YNc(12,m,5,3,"div",23),n.YNc(13,v,5,1,"div",24),n.YNc(14,Z,5,1,"div",22),n.TgZ(15,"p"),n._uU(16),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",15),n.TgZ(18,"div",16),n.TgZ(19,"div",25),n.TgZ(20,"table",26),n.TgZ(21,"thead"),n.TgZ(22,"tr"),n._UZ(23,"th"),n.TgZ(24,"th"),n._uU(25),n.qZA(),n.TgZ(26,"th"),n._uU(27),n.qZA(),n.TgZ(28,"th",27),n._uU(29),n.qZA(),n.TgZ(30,"th"),n._uU(31),n.qZA(),n.qZA(),n.qZA(),n.TgZ(32,"tbody"),n.YNc(33,A,11,6,"tr",28),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.hij("",a.language["Confirm Users"]," "),n.xp6(2),n.Q6J("disabled","stop"==a.submissionStatus),n.xp6(1),n.hij("","in progress"==a.submissionStatus||"stop"==a.submissionStatus?a.language.Stop:a.language.Cancel," "),n.xp6(1),n.Q6J("disabled",!a.userList.length||"in progress"==a.submissionStatus||a.errorInAllLines),n.xp6(1),n.hij(" ","in progress"==a.submissionStatus?a.language["Adding Users"]+"...":"success"==a.submissionStatus||"stop"==a.submissionStatus?a.language.Done:a.language.Confirm," "),n.xp6(1),n.Q6J("ngIf",a.missingvalues.length),n.xp6(1),n.Q6J("ngIf","in progress"===a.submissionStatus),n.xp6(1),n.Q6J("ngIf","success"===a.submissionStatus),n.xp6(1),n.Q6J("ngIf","stop"===a.submissionStatus),n.xp6(2),n.hij(" ",a.language["Access will be granted and a welcome email will be sent to the following users"],": "),n.xp6(4),n.Q6J("dtOptions",a.dtOptions),n.xp6(5),n.Oqu(a.language["First Name"]),n.xp6(2),n.Oqu(a.language.Last_Name),n.xp6(2),n.Oqu(a.language.Email),n.xp6(2),n.Oqu(a.language.Bsp_Microsite_Name),n.xp6(2),n.Q6J("ngForOf",a.userList)}}function T(e,t){1&e&&n._UZ(0,"li",50),2&e&&n.Q6J("innerHTML",t.$implicit,n.oJD)}function _(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",43),n.TgZ(1,"div",44),n.TgZ(2,"h3",45),n._uU(3),n.qZA(),n.TgZ(4,"button",46),n.NdJ("click",function(){return n.CHM(i),n.oxw().close()}),n._UZ(5,"span",47),n.qZA(),n.qZA(),n.TgZ(6,"div",48),n.TgZ(7,"p"),n._uU(8),n.qZA(),n.TgZ(9,"ul"),n.YNc(10,T,1,1,"li",49),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(3),n.AsE("",a.missingvalues.length," ",a.language["errors found"],""),n.xp6(5),n.hij("",a.language["Correct the following errors and re-upload the CSV file"],":"),n.xp6(2),n.Q6J("ngForOf",a.missingvalues)}}function C(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",43),n.TgZ(1,"div",44),n.TgZ(2,"button",46),n.NdJ("click",function(){return n.CHM(i),n.oxw().close()}),n._UZ(3,"span",47),n.qZA(),n.qZA(),n.TgZ(4,"div",48),n.TgZ(5,"div",51),n.TgZ(6,"div",52),n._UZ(7,"img",53),n.qZA(),n.TgZ(8,"div",54),n.TgZ(9,"div",55),n._uU(10),n.qZA(),n.TgZ(11,"p"),n._uU(12),n.qZA(),n.TgZ(13,"div",19),n.TgZ(14,"button",56),n.NdJ("click",function(){n.CHM(i);var e=n.oxw();return e.submissionStatus="stop",e.close()}),n._uU(15),n.qZA(),n.TgZ(16,"button",57),n.NdJ("click",function(){return n.CHM(i),n.oxw().close()}),n._uU(17),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(10),n.hij("",a.language["Stop adding users"],"?"),n.xp6(2),n.hij("",a.language["Only users that have successfully been added will be granted access"],"."),n.xp6(3),n.hij(" ",a.language["Yes, stop adding users"]," "),n.xp6(2),n.hij("",a.language.Cancel," ")}}var y,k=((y=function(){function e(t,i,n,s,o){var r=this;a(this,e),this.dialogService=t,this.myCommunityIqService=i,this.router=n,this.translateService=s,this.commonOrgService=o,this._iDisplayStart=0,this.dtOptions={pagingType:"full_numbers",dom:"tipr",lengthChange:!1,pageLength:10,destroy:!0,processing:!0,columnDefs:[{orderable:!1,targets:[0,2,4]},{targets:[1,3],orderable:!0}],order:[1,"asc"],drawCallback:function(e){r._iDisplayStart=e._iDisplayStart,r.dataTableSetting=e,r.changeTableStatusLanguage(e),e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.userList=[],this.missingvalues=[],this.subscriptions=[],this.sortedColumnDetails=[],this.apiErrors=[],this.statusIconInfo=[],this.microSiteList=[],this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.de_DETable=this.translateService.de_DE,this.orgId=localStorage.getItem("calix.org_id")}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.subscriptions.push(this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.dtOptions.language=t,e.changeTableStatusLanguage({_iDisplayStart:e.tableCounts.start,_iDisplayLength:e.tableCounts.displayCount,_iRecordsDisplay:e.tableCounts.displayed,_iRecordsTotal:e.tableCounts.total,oPreviousSearch:{sSearch:e.tableCounts.searchText}})})),this.loader=!0,this.getMicroSites()}},{key:"changeTableStatusLanguage",value:function(e){var t=new Intl.NumberFormat;this.tableCounts={searchText:"",total:e._iRecordsTotal=this.rowcn,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay=this.rowcn,start:e._iDisplayStart};var i="fr"==sessionStorage.getItem("defaultLanguage"),n="es"==sessionStorage.getItem("defaultLanguage"),a="de_DE"==sessionStorage.getItem("defaultLanguage"),s=e._iRecordsTotal>1e4&&e._iRecordsDisplay>0?i?"(filtr\xe9es \xe0 partir des  ".concat(t.format(e._iRecordsTotal)," entr\xe9es totales)<br/>"):n?"(filtrado de un total de ".concat(t.format(e._iRecordsTotal)," entradas)<br/>"):a?"(gefiltert aus  ".concat(t.format(e._iRecordsTotal)," Eintr\xe4gen)<br/>"):"(filtered from  ".concat(t.format(e._iRecordsTotal)," total entries)<br/>"):"",o=0==e._iRecordsDisplay?-1:e._iDisplayStart,r=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;$('div [role="status"]').html(i?"Affichage de ".concat(t.format(o+1)," \xe0 ").concat(t.format(r)," des  ").concat(t.format(e._iRecordsDisplay)," entr\xe9es ").concat(s):n?"Se muestran del ".concat(t.format(o+1)," al ").concat(t.format(r)," de  ").concat(t.format(e._iRecordsDisplay)," resultados ").concat(s):a?"Angezeigt ".concat(t.format(o+1)," bis ").concat(t.format(r)," von  ").concat(t.format(e._iRecordsDisplay)," ergebnissen ").concat(s):"Showing ".concat(t.format(o+1)," to ").concat(t.format(r)," of  ").concat(t.format(e._iRecordsDisplay)," entries ").concat(s)),$(".first").text(i?"Le d\xe9but":n?"Primero":a?"Erste Seite":"First"),$(".previous").text(i?"Pr\xe9c\xe9dent":n?"Anterior":a?"Zur\xfcck":"Previous"),$(".next").text(i?"Suivant":n?"Siguiente":a?"Weiter":"Next"),$(".last").text(i?"Derni\xe8re":n?"\xdaltimo":a?"Letzte":"Last")}},{key:"openErrorsFoundModal",value:function(e){this.findMissingValuesForErrorPopUp(this.userList),this.dialogService.open(e,{size:"xl",centered:!0,windowClass:"errors-found-modal"})}},{key:"openStopUserPopup",value:function(e){this.dialogService.open(e,{size:"xl",centered:!0,windowClass:"stop-user-modal"})}},{key:"findMissingValuesForErrorPopUp",value:function(e){var t=this;this.missingvalues=[],e.forEach(function(e,i){var n,a;e.firstName||(t.missingvalues.push("<b>Row ".concat(i+1,":</b> Empty value in \u201cFirst Name\u201d column")),t.statusIconInfo[i]="error"),e.lastName||(t.missingvalues.push("<b>Row ".concat(i+1,":</b> Empty value in \u201cLast Name\u201d column")),t.statusIconInfo[i]="error"),e.email||(t.missingvalues.push("<b>Row ".concat(i+1,":</b> Empty value in \u201cEmail\u201d column")),t.statusIconInfo[i]="error"),e.email&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(t.missingvalues.push("<b>Row ".concat(i+1,":</b> Invalid email syntax")),t.statusIconInfo[i]="error"),e.community.length>8&&t.missingvalues.push("<b>Row ".concat(i+1,":</b> Subcriber can only have upto 8 communities")),e.community=null===(n=e.community)||void 0===n?void 0:n.map(function(e){var n=t.microSiteList.find(function(t){return t.communityName==e.communityName});return n||(t.missingvalues.push("<b>Row ".concat(i+1,":</b> Community \u201c").concat(e.communityName,"\u201d is not available")),t.statusIconInfo[i]="error"),n?{micrositeId:n.id,communityName:e.communityName}:e}),(null===(a=e.community)||void 0===a?void 0:a.length)||(t.statusIconInfo[i]="error",t.missingvalues.push("<b>Row ".concat(i+1,":</b> Empty value in \u201cCommunity Name\u201d column")))}),this.missingvalues=this.missingvalues.concat(this.apiErrors).sort(function(e,t){return Number(e.match(/\d+/)[0])-Number(t.match(/\d+/)[0])}),this.apiErrors=[],this.errorInAllLines=e.every(function(e,i){return!t.errorFound(e,i)})}},{key:"close",value:function(){this.dialogService.dismissAll("Cross Click")}},{key:"errorFound",value:function(e,t){var i,n=this;return Object.values(e).filter(function(e){return Array.isArray(e)?e.length:e}).length>3&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email)&&(null===(i=null==e?void 0:e.community)||void 0===i?void 0:i.every(function(e){return n.microSiteList.some(function(t){return t.communityName===e.communityName})}))&&(null==e?void 0:e.community.length)<=8}},{key:"saveUsers",value:function(e){var t=this;if(e){var i=--this.sortedColumnDetails[0],n=0==i?"firstName":2==i?"email":"community",a=this.userList.map(function(e,i){return{value:e,status:t.statusIconInfo[i]}}).sort(function(e,i){var a=e.value,s=i.value;return"asc"===t.sortedColumnDetails[1]?a[n].toString().localeCompare(s[n]):s[n].toString().localeCompare(a[n])});this.userList=a.map(function(e){return e.value}),this.statusIconInfo=a.map(function(e){return e.status}),this.submissionStatus="in progress"}null==this.savedSubscribersCount&&(this.savedSubscribersCount=0,this.statusIconInfo[this.savedSubscribersCount]="inprogress");var s=JSON.parse(JSON.stringify(this.userList[this.savedSubscribersCount]));if(!this.errorFound(s))return this.statusIconInfo[this.savedSubscribersCount]="error",this.recursionSaveUsers();this.subscriptions.push(this.myCommunityIqService.saveUsers(s,this.orgId).subscribe(function(e){console.log(e),t.statusIconInfo[t.savedSubscribersCount]="success",t.recursionSaveUsers()},function(e){t.apiErrors.push("<b>Row ".concat(t.savedSubscribersCount+1,":</b> ").concat(e.error.errorMessage)),t.statusIconInfo[t.savedSubscribersCount]="error",t.recursionSaveUsers(),t.pageErrorHandle(e)}))}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e)}},{key:"recursionSaveUsers",value:function(){this.userList.length-1===this.savedSubscribersCount&&(this.submissionStatus=this.statusIconInfo.some(function(e){return"success"===e})?"success":"stop",this.close()),this.savedSubscribersCount++,this.statusIconInfo[this.savedSubscribersCount]="inprogress","in progress"==this.submissionStatus&&this.saveUsers()}},{key:"goBack",value:function(){this.router.navigate(["/organization-admin/SmartTownWi-Fi/community-users"])}},{key:"getMicroSites",value:function(){var e=this;this.subscriptions.push(this.myCommunityIqService.GetMicrosite().subscribe(function(t){e.microSiteList=t,e.GetCSVValue(),e.loader=!1},function(t){e.loader=!1,e.pageErrorHandle(t)}))}},{key:"GetCSVValue",value:function(){var e=this;this.subscriptions.push(this.myCommunityIqService.communityListSubject.subscribe(function(t){e.rowcn=t.length,console.log("length=",e.rowcn),e.statusIconInfo=Array.from({length:t.length},function(){return""}),e.userList=t,e.dtOptions.displayStart=e._iDisplayStart?e._iDisplayStart:0,e.dtOptions.drawCallback=function(t){e.sortedColumnDetails=t.aaSorting.flat(1),e._iDisplayStart=t._iDisplayStart,e.dataTableSetting=t,e.changeTableStatusLanguage(t),t.aoData.length<=t._iDisplayLength&&$(t.nTableWrapper).find("#".concat(t.sTableId,"_last")).addClass("disabled")},e.findMissingValuesForErrorPopUp(t)}))}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.subscriptions)||void 0===e||e.forEach(function(e){return null==e?void 0:e.unsubscribe()})}},{key:"getRoundedValue",value:function(e){return Math.round(e)}}]),e}()).\u0275fac=function(e){return new(e||y)(n.Y36(s.FF),n.Y36(r.l),n.Y36(l.F0),n.Y36(c.s),n.Y36(d.v))},y.\u0275cmp=n.Xpm({type:y,selectors:[["app-confirm-users"]],decls:8,vars:3,consts:[["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show my-3",4,"ngIf"],["class","container",4,"ngIf"],["ErrorsFoundModal",""],["StopUserModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"confirm-user-title-info","d-flex","justify-content-between","align-items-end"],[1,"confirm-user-title"],[1,""],["type","button","data-toggle","modal","data-target",".bd-example-modal-lg",1,"btn-default","btn-dft","py-1","md-btn","ml-1","mr-3",3,"disabled","click"],["id","cancel-add-role",1,"btn-default","primary",3,"disabled","click"],["class","confirm-user-warning-info",4,"ngIf"],["class","confirm-user-progress-box",4,"ngIf"],["class","confirm-user-success-box",4,"ngIf"],[1,"confirm-user-list"],["datatable","",3,"dtOptions"],[1,"email-with","text-break"],[4,"ngFor","ngForOf"],[1,"confirm-user-warning-info"],[1,"warning-info-icon"],["src","../../../../assets/img/warning-icon.svg","alt",""],[1,"warning-info-content"],[1,"primary","pointer",3,"click"],[1,"confirm-user-progress-box"],[1,"progress-box-icon"],["src","../../../../assets/img/ic_progress-circle.svg","alt",""],[1,"progress-info-content"],[1,"confirm-user-success-box"],[1,"success-box-icon"],["src","../../../../assets/img/ic_success-circle-outline.svg","alt",""],[1,"success-info-content"],[3,"hidden","src"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","list-styled-bullet",3,"innerHTML",4,"ngFor","ngForOf"],[1,"list-styled-bullet",3,"innerHTML"],[1,"d-flex","w-100","align-items-start"],[1,"w-10","mr-2"],["src","../../../../assets/img/ic_warning-36px.svg","alt",""],[1,"w-90","ml-2"],[1,"stop-user-sub-title"],["id","",1,"btn-default","primary",3,"click"],["type","button",1,"btn-default","btn-dft","py-1","md-btn","ml-1","mr-3",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"section"),n.YNc(1,p,5,1,"div",0),n.YNc(2,h,6,1,"div",1),n.YNc(3,x,34,16,"div",2),n.qZA(),n.YNc(4,_,11,4,"ng-template",null,3,n.W1O),n.YNc(6,C,18,4,"ng-template",null,4,n.W1O)),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loader),n.xp6(1),n.Q6J("ngIf",t.errorInfo),n.xp6(1),n.Q6J("ngIf",!t.loader))},directives:[u.O5,g.G,u.sg],styles:[".confirm-user-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px}.confirm-user-title-info[_ngcontent-%COMP%]{border-bottom:2px solid #CCCCCC;padding-bottom:8px;align-items:end;margin-bottom:16px}.confirm-user-list[_ngcontent-%COMP%]{width:100%;margin-top:22px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #CCCCCC}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;color:#1a1f22;padding-bottom:7px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:15px;line-height:24px;padding:7px 0}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){margin-right:30px}.confirm-user-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f8f8fa}.confirm-user-warning-info[_ngcontent-%COMP%]{width:100%;background:#FFF8F5;border-radius:24px;padding:20px 24px;display:flex;margin-bottom:24px}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-icon[_ngcontent-%COMP%]{width:6%}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-content[_ngcontent-%COMP%]{width:94%;font-weight:400;font-size:16px;line-height:20px}.confirm-user-warning-info[_ngcontent-%COMP%]   .warning-info-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px;color:#1a1f22}.confirm-user-warning-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:24px}.confirm-user-progress-box[_ngcontent-%COMP%]{background:#F5FAFF;border-radius:12px;padding:12px 20px;margin-bottom:24px;display:flex;align-items:center}.confirm-user-progress-box[_ngcontent-%COMP%]   .progress-box-icon[_ngcontent-%COMP%]{width:6%}.confirm-user-progress-box[_ngcontent-%COMP%]   .progress-box-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.confirm-user-progress-box[_ngcontent-%COMP%]   .progress-info-content[_ngcontent-%COMP%]{width:94%;font-weight:400;font-size:16px;line-height:20px}.confirm-user-success-box[_ngcontent-%COMP%]{background:#FAFFF5;border-radius:12px;padding:12px 20px;margin-bottom:24px;display:flex;align-items:center}.confirm-user-success-box[_ngcontent-%COMP%]   .success-box-icon[_ngcontent-%COMP%]{width:6%}.confirm-user-success-box[_ngcontent-%COMP%]   .success-box-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px}.confirm-user-success-box[_ngcontent-%COMP%]   .success-info-content[_ngcontent-%COMP%]{width:94%;font-weight:400;font-size:16px;line-height:20px}  .errors-found-modal .modal-content{background:#fff}  .errors-found-modal .modal-dialog{max-width:45.73%!important}  .stop-user-modal .modal-content{background:#FFF9F5}  .stop-user-modal .modal-dialog{max-width:35%!important}.stop-user-sub-title[_ngcontent-%COMP%]{font-weight:400;font-size:24px;line-height:30px}.email-with[_ngcontent-%COMP%]{min-width:180px;min-width:200px;word-break:break-all}.list-styled-bullet[_ngcontent-%COMP%]{list-style-type:disc;max-height:450px;overflow:auto}"]}),y)},71376:function(e,t,i){i.d(t,{L:function(){return g}});var n,s=i(37716),r=i(39895),l=i(7450),c=i(39075),d=i(38583),u=function(e){return{active:e}},g=((n=function(){function e(t,i,n){a(this,e),this.router=t,this.translateService=i,this.titleService=n,this.activeTab=this.router.url.includes("bsp-information")?"bsp-information":this.router.url.includes("communities")?"communities":"community-users"}return o(e,[{key:"ngDoCheck",value:function(){this.activeTab=this.router.url.includes("bsp-information")?"bsp-information":this.router.url.includes("communities")?"communities":"community-users"}},{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t})}}]),e}()).\u0275fac=function(e){return new(e||n)(s.Y36(r.F0),s.Y36(l.s),s.Y36(c.Dx))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-my-community-iq"]],decls:17,vars:12,consts:[[1,"mb-4"],[1,"container"],[1,"row"],[1,"col-md-12","p-0"],[1,""],[1,"ccl-tabs"],["id","tabs",1,"nav","nav-tabs","sub-tab"],[1,"nav-item"],["id","BSP-Information","data-toggle","tab","routerLink","./bsp-information",1,"nav-link",3,"ngClass"],["data-toggle","tab","id","communities","routerLink","./communities",1,"nav-link","small",3,"ngClass"],["data-toggle","tab","id","community-users","routerLink","./community-users",1,"nav-link","small",3,"ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"section",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"ul",6),s.TgZ(7,"li",7),s.TgZ(8,"a",8),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"li",7),s.TgZ(11,"a",9),s._uU(12),s.qZA(),s.qZA(),s.TgZ(13,"li",7),s.TgZ(14,"a",10),s._uU(15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(16,"router-outlet")),2&e&&(s.xp6(8),s.Q6J("ngClass",s.VKq(6,u,"bsp-information"===t.activeTab)),s.xp6(1),s.Oqu(t.language.Bsp_Info),s.xp6(2),s.Q6J("ngClass",s.VKq(8,u,"communities"===t.activeTab)),s.xp6(1),s.Oqu(t.language.Communities),s.xp6(2),s.Q6J("ngClass",s.VKq(10,u,"community-users"===t.activeTab)),s.xp6(1),s.Oqu(t.language["Community Users"]))},directives:[r.yS,d.mk,r.lC],styles:[""]}),n)},12978:function(e,i,n){n.d(i,{U:function(){return q}});var s=n(37716),r=n(49342),l=n(404),c=n(53668),d=n(7450),u=n(39895),g=n(89097),p=n(39075),h=n(20904),f=n(38583),m=n(3679),v=n(74062),Z=["errorModal"];function b(e,t){if(1&e&&(s.TgZ(0,"div",19),s.TgZ(1,"div",20),s.TgZ(2,"div",21),s.TgZ(3,"span",22),s._uU(4),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){var i=s.oxw();s.xp6(4),s.Oqu(i.language.Loading)}}function A(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",23),s.TgZ(1,"span",24),s._UZ(2,"img",25),s.qZA(),s.TgZ(3,"button",26),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",27),s.qZA()}if(2&e){var n=s.oxw();s.xp6(5),s.Q6J("innerHtml",n.errorInfo,s.oJD)}}function x(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",28),s.TgZ(1,"div",29),s.TgZ(2,"div",30),s._UZ(3,"img",31),s.qZA(),s.TgZ(4,"div",32),s._UZ(5,"span",33),s.qZA(),s.TgZ(6,"div",34),s.TgZ(7,"button",26),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeAlert()}),s._UZ(8,"span"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){var n=s.oxw();s.xp6(5),s.Q6J("innerHtml",n.successInfo,s.oJD)}}function T(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",35),s.TgZ(1,"div",36),s.TgZ(2,"div",37),s.NdJ("click",function(){var e=s.CHM(i).index;return s.oxw().removeSubnet(e)}),s._UZ(3,"i",38),s.qZA(),s._uU(4),s.qZA(),s.qZA()}if(2&e){var n=t.$implicit;s.xp6(4),s.hij(" ",n," ")}}function _(e,t){if(1&e&&(s.TgZ(0,"em",39),s._uU(1),s.qZA()),2&e){var i=s.oxw();s.xp6(1),s.Oqu(i.subnetErrorInfo)}}function C(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",40),s.TgZ(1,"button",41),s.NdJ("click",function(){return s.CHM(i),s.oxw().saveSubnet()}),s._uU(2),s.qZA(),s.TgZ(3,"button",42),s.NdJ("click",function(){return s.CHM(i),s.oxw().resetData()}),s._uU(4),s.qZA(),s.qZA()}if(2&e){var n=s.oxw();s.xp6(2),s.Oqu(n.language.save),s.xp6(2),s.Oqu(n.language.cancel)}}var y,k=function(e){return[e]},q=((y=function(){function e(t,i,n,s,o,r,l,c){a(this,e),this.commonOrgService=t,this.commonFunctionsService=i,this.organizationApiService=n,this.translateService=s,this.router=o,this.sso=r,this.titleService=l,this.common=c,this.createSubnets=[],this.allSubnets=[],this.allsub=[],this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.subnetError=!1,this.invalidSubnet=!1,this.errorTitle="",this.errorBody="",this.formError=!1,this.showBtns=!1,this.subnetErrorInfo="Invalid Subnet",this.oldSubnets=[],this.isRerender=!1,this.loading=!0;var d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.commonOrgService.currentPageAdder("orgacl"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.MODULE=this.sso.getRedirectModule(d)}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.orgacl," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language.orgacl," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.success=!1,this.error=!1,this.showBtns=!1,this.getACLList()}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.aclListSubs&&this.aclListSubs.unsubscribe(),this.aclAddSubs&&this.aclAddSubs.unsubscribe(),this.aclDeleteSubs&&this.aclDeleteSubs.unsubscribe()}},{key:"getACLList",value:function(){var e=this;this.loading=!0,this.aclListSubs=this.organizationApiService.AclList(this.ORG_ID).subscribe(function(i){"object"==typeof i?(e.allSubnets=i,e.allsub=null!=i.acl?t(i.acl):[],e.oldSubnets=null!=i.acl?t(i.acl):[],e.showBtns=!0):(e.allSubnets=[],e.allsub=[],e.oldSubnets=[],e.showBtns=!1),e.isRerender&&(e.showBtns=!1)},function(t){404==t.status?(e.allSubnets=[],e.allsub=[],e.oldSubnets=[]):e.pageErrorHandle(t),e.showBtns=!1,e.loading=!1},function(){e.loading=!1})}},{key:"validateSubnet",value:function(e){this.subnetError=!1,e||(this.subnetErrorInfo=this.language["Invalid subnet"],this.subnetError=!0);var t=this.commonFunctionsService.trimSubnet(e);t?!this.commonFunctionsService.isValidSubnetV4(t)&&!this.commonFunctionsService.isValidSubnetV6(t)&&(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"]):(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"])}},{key:"addSubnet",value:function(){var e=this;if(this.subnetError=!1,null==this.createCurrentSubnet||""==this.createCurrentSubnet)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet cannot be empty"]);if(this.validateSubnet(this.createCurrentSubnet),!this.subnetError){if(this.createSubnets.filter(function(t){return t===e.createCurrentSubnet}).length>0)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet already added"]);this.allsub.push(this.createCurrentSubnet),this.createCurrentSubnet="",this.subnetError=!1,this.showBtns=!0}}},{key:"removeSubnet",value:function(e){this.allsub.splice(e,1),this.showBtns=!0,!this.allsub.length&&!this.oldSubnets.length&&(this.showBtns=!1)}},{key:"saveSubnet",value:function(){this.allsub.length?this.updateSubnet():this.deleteSubnet()}},{key:"updateSubnet",value:function(){var e=this;this.loading=!0,this.aclAddSubs=this.organizationApiService.AclAdd(this.allsub,this.ORG_ID).subscribe(function(t){e.successInfo=e.language["Organization Acl updated Successfully"],e.success=!0,e.commonOrgService.pageScrollTop(),e.resetData(),setTimeout(function(){e.closeAlert()},2500),e.subnetError=!1,e.subnetErrorInfo=""},function(t){e.pageErrorHandle(t),e.loading=!1})}},{key:"deleteSubnet",value:function(){var e=this;this.loading=!0,this.aclDeleteSubs=this.organizationApiService.AclDelete(this.ORG_ID).subscribe(function(t){e.successInfo=e.language["Organization Acl updated Successfully"],e.success=!0,e.commonOrgService.pageScrollTop(),e.resetData(),e.subnetError=!1,e.subnetErrorInfo="",setTimeout(function(){e.closeAlert()},2500)},function(t){e.pageErrorHandle(t),e.loading=!1})}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.translateService.changeLanguage(e)}},{key:"resetData",value:function(){this.isRerender=!0,this.getACLList()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"subnetChange",value:function(){this.createCurrentSubnet||(this.subnetError=!1)}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}]),e}()).\u0275fac=function(e){return new(e||y)(s.Y36(r.v),s.Y36(l.i),s.Y36(c.F),s.Y36(d.s),s.Y36(u.F0),s.Y36(g.t6),s.Y36(p.Dx),s.Y36(h.i))},y.\u0275cmp=s.Xpm({type:y,selectors:[["app-organization-access-control"]],viewQuery:function(e,t){var i;1&e&&s.Gf(Z,7),2&e&&s.iGM(i=s.CRH())&&(t.errorModal=i.first)},decls:27,vars:13,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mb-3"],[1,"col-md-12"],[1,"ccl-title"],[1,"col-md-12","ccl-title"],[1,"error"],[1,"row"],[1,"col-md-4"],["class","mb-2",4,"ngFor","ngForOf"],[1,"col-md-4","ccl-form",3,"ngClass"],["id","userACLSEL","type","text","name","createCurrentSubnet","placeholder","","autocomplete","new-password","trimSpace","",1,"add-subnet-input",3,"ngModel","ngModelChange","change","keyup","blur"],["id","subnet-error","class","ccl-error",4,"ngIf"],[1,"col-md-2","pl-0"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"click"],["_ngcontent-thh-c50","","aria-hidden","true",1,"fa","fa-plus"],["class","col-md-3 offset-md-9 pr-0 text-right ",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"mb-2"],[1,"add-subnet"],["role","button",1,"add-subnet-close-icon","primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],["id","subnet-error",1,"ccl-error"],[1,"col-md-3","offset-md-9","pr-0","text-right"],["type","submit",1,"btn-default","primary",3,"click"],["type","submit",1,"btn-default","btn-dft","py-1","ml-3",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,b,5,1,"div",1),s.YNc(2,A,6,1,"div",2),s.YNc(3,x,9,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._uU(7),s.qZA(),s.TgZ(8,"span"),s._uU(9),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"div",7),s._uU(12),s.TgZ(13,"span",8),s._uU(14,"*"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",9),s.TgZ(16,"div",10),s.YNc(17,T,5,1,"div",11),s.qZA(),s.qZA(),s.TgZ(18,"div",9),s.TgZ(19,"div",12),s.TgZ(20,"input",13),s.NdJ("ngModelChange",function(e){return t.createCurrentSubnet=e})("change",function(){return t.subnetChange()})("keyup",function(){return t.subnetChange()})("blur",function(){return t.removeUnwantedSpace("createCurrentSubnet",t.createCurrentSubnet)}),s.qZA(),s.YNc(21,_,2,1,"em",14),s.qZA(),s.TgZ(22,"div",15),s.TgZ(23,"button",16),s.NdJ("click",function(){return t.addSubnet()}),s._UZ(24,"i",17),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"div",9),s.YNc(26,C,5,2,"div",18),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(4),s.Oqu(t.language.access),s.xp6(2),s.hij("",t.language.accesscontent,"."),s.xp6(3),s.hij("",t.language.addSubnets," "),s.xp6(5),s.Q6J("ngForOf",t.allsub),s.xp6(2),s.Q6J("ngClass",s.VKq(11,k,t.subnetError?"ccl-error":"")),s.xp6(1),s.Q6J("ngModel",t.createCurrentSubnet),s.xp6(1),s.Q6J("ngIf",t.subnetError),s.xp6(5),s.Q6J("ngIf",t.showBtns))},directives:[f.O5,f.sg,f.mk,m.Fj,v.f,m.JJ,m.On],styles:[""]}),y)},61411:function(e,t,i){i.d(t,{Q:function(){return b}});var n=i(37716),s=i(49342),r=i(7450),l=i(53668),c=i(39895),d=i(89097),u=i(39075),g=i(38583);function p(e,t){1&e&&(n.TgZ(0,"div",9),n.TgZ(1,"div",10),n.TgZ(2,"div",11),n.TgZ(3,"span",12),n._uU(4,"Loading..."),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function h(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"span",14),n._UZ(2,"img",15),n.qZA(),n.TgZ(3,"button",16),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",17),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.errorInfo,n.oJD)}}function f(e,t){if(1&e&&(n.TgZ(0,"h3"),n._uU(1),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Oqu(i.language["Operations Cloud"]?i.language["Operations Cloud"]:"Operations Cloud")}}function m(e,t){if(1&e&&(n.TgZ(0,"h3"),n._uU(1),n.qZA()),2&e){var i=n.oxw().$implicit,a=n.oxw();n.xp6(1),n.Oqu(a.language[i.name]?a.language[i.name]:i.name?i.name:"")}}function v(e,t){if(1&e&&(n.TgZ(0,"div",18),n.TgZ(1,"div",19),n.YNc(2,f,2,1,"h3",20),n.YNc(3,m,2,1,"h3",20),n.qZA(),n.TgZ(4,"div",21),n.TgZ(5,"span"),n._uU(6),n.qZA(),n._UZ(7,"br"),n.TgZ(8,"strong"),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",21),n.TgZ(11,"span"),n._uU(12),n.qZA(),n._UZ(13,"br"),n.TgZ(14,"strong"),n._uU(15),n.qZA(),n.qZA(),n.TgZ(16,"div",22),n.TgZ(17,"span"),n._uU(18),n.qZA(),n._UZ(19,"br"),n.TgZ(20,"strong"),n._uU(21),n.qZA(),n.qZA(),n.qZA()),2&e){var i=t.$implicit,a=n.oxw();n.xp6(2),n.Q6J("ngIf","CCO"==(null==i?null:i.name)),n.xp6(1),n.Q6J("ngIf","CCO"!=(null==i?null:i.name)),n.xp6(3),n.Oqu(a.language.Startdate),n.xp6(3),n.hij("",i.startDate,"\xa0"),n.xp6(3),n.Oqu(a.language.enddate),n.xp6(3),n.hij("",i.endDate,"\xa0"),n.xp6(3),n.Oqu(a.language.Status),n.xp6(3),n.hij("",i.status?i.status.replaceAll("_"," ")?a.language[i.status.replaceAll("_"," ")]:i.status.replaceAll("_"," "):"","\xa0")}}var Z,b=((Z=function(){function e(t,i,n,s,o,r){a(this,e),this.commonOrgService=t,this.translateService=i,this.organizationApiService=n,this.router=s,this.sso=o,this.titleService=r,this.pageAvailable=!1,this.orgInfoData={calixOrganization:{}},this.languages=[{name:"English"},{name:"French Canadian"}],this.loading=!0;var l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.commonOrgService.currentPageAdder("orginfo"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.MODULE=this.sso.getRedirectModule(l)}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.orginfo," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language.orginfo," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.getorgInfoData()}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.orgDetailSubs&&this.orgDetailSubs.unsubscribe(),this.orgInfoSubs&&this.orgInfoSubs.unsubscribe()}},{key:"getorgInfoData",value:function(){var e=this;this.orgDetailSubs=this.organizationApiService.orgInformation(this.ORG_ID).subscribe(function(t){e.orgInfoData=t,e.orgInfoSpID=t.spId},function(t){e.loading=!1,e.pageErrorHandle(t)}),this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(function(t){e.orgInfoEntitlementdata=t,setTimeout(function(){e.loading=!1},1e3)},function(t){e.pageErrorHandle(t),e.loading=!1})}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"closeAlert",value:function(){this.error=!1}}]),e}()).\u0275fac=function(e){return new(e||Z)(n.Y36(s.v),n.Y36(r.s),n.Y36(l.F),n.Y36(c.F0),n.Y36(d.t6),n.Y36(u.Dx))},Z.\u0275cmp=n.Xpm({type:Z,selectors:[["app-organization-info"]],decls:11,vars:6,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],[1,"row"],[1,"col-md-12","px-0"],[1,"ccl-admin-title"],[1,"row","my-3"],[1,"col-md-12","pl-0","ccl-title"],["class","row orginfo-service mb-3 pb-1",4,"ngFor","ngForOf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"row","orginfo-service","mb-3","pb-1"],[1,"col-md-12"],[4,"ngIf"],[1,"col-sm-6","col-md-4","col-lg-4"],[1,"col-sm-6","col-md-4","col-lg-4","pull-right"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,p,5,0,"div",1),n.YNc(2,h,6,1,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n._uU(6),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"div",7),n._uU(9),n.qZA(),n.qZA(),n.YNc(10,v,22,8,"div",8),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loading),n.xp6(1),n.Q6J("ngIf",t.error),n.xp6(4),n.Oqu(t.orgInfoData.calixOrganization.name),n.xp6(3),n.AsE(" ",t.language.service," : ",t.orgInfoSpID," "),n.xp6(1),n.Q6J("ngForOf",t.orgInfoEntitlementdata))},directives:[g.O5,g.sg],styles:[".orginfo-service[_ngcontent-%COMP%]{border:1px solid #ccc;background:#efefff}.orginfo-service[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;margin:15px 0}"]}),Z)},97171:function(e,t,i){i.d(t,{f:function(){return L}});var n=i(37716),s=i(23771),r=i(79765),l=i(92340),c=i(49342),d=i(39895),u=i(30900),g=i(89342),p=i(89097),h=i(12664),f=i(91841),m=i(39075),v=i(20497),Z=i(53668),b=i(38583),A=i(3679),x=["deleteModal"];function T(e,t){if(1&e&&(n.TgZ(0,"div",21),n.TgZ(1,"div",22),n.TgZ(2,"div",23),n.TgZ(3,"span",24),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language.Loading)}}function _(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",25),n.TgZ(1,"span",26),n._UZ(2,"img",27),n.qZA(),n.TgZ(3,"button",28),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",29),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.errorInfo,n.oJD)}}function C(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",30),n.TgZ(1,"div",31),n.TgZ(2,"div",32),n._UZ(3,"img",33),n.qZA(),n.TgZ(4,"div",34),n._UZ(5,"span",35),n.qZA(),n.TgZ(6,"div",36),n.TgZ(7,"button",28),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(8,"span"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.successInfo,n.oJD)}}function y(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",37),n.NdJ("click",function(){return n.CHM(i),n.oxw().addOrg()}),n._uU(1),n.qZA()}if(2&e){var a=n.oxw();n.xp6(1),n.Oqu(a.language.addOrganization)}}function k(e,t){1&e&&n._UZ(0,"th")}function q(e,t){if(1&e&&(n.TgZ(0,"th"),n._uU(1),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Oqu(i.language.Action)}}function w(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"input",45),n.NdJ("ngModelChange",function(e){return n.CHM(i),n.oxw(4).selectedOrg=e}),n.qZA(),n.qZA()}if(2&e){var a=n.oxw().$implicit,s=n.oxw(3);n.xp6(1),n.s9C("value",a.id),n.Q6J("ngModel",s.selectedOrg)}}function O(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",54),n.NdJ("click",function(){n.CHM(i);var e=n.oxw(2).$implicit;return n.oxw(3).gotoSecuredAccess(e)}),n._UZ(1,"img",55),n.qZA()}if(2&e){var a=n.oxw(5);n.s9C("title",a.language.securedaccess)}}function S(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"td",46),n.YNc(1,O,2,1,"button",47),n.TgZ(2,"button",48),n.NdJ("click",function(){n.CHM(i);var e=n.oxw().$implicit;return n.oxw(3).gotoOrgDetail(e)}),n._UZ(3,"i",49),n.qZA(),n.TgZ(4,"button",50),n.NdJ("click",function(){n.CHM(i);var e=n.oxw().$implicit;return n.oxw(3).gotoUsers(e)}),n._UZ(5,"i",51),n.qZA(),n.TgZ(6,"button",52),n.NdJ("click",function(){n.CHM(i);var e=n.oxw().$implicit;return n.oxw(3).deleteOrg(e)}),n._UZ(7,"i",53),n.qZA(),n.qZA()}if(2&e){var a=n.oxw(4);n.xp6(1),n.Q6J("ngIf",a.showSecureAccess),n.xp6(1),n.s9C("title",a.language.entitlements),n.xp6(2),n.s9C("title",a.language.users),n.xp6(2),n.s9C("title",a.language.Delete)}}function M(e,t){if(1&e&&(n.TgZ(0,"tr",43),n.YNc(1,w,2,2,"td",40),n.TgZ(2,"td"),n._uU(3),n.qZA(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.qZA(),n.YNc(10,S,8,4,"td",44),n.qZA()),2&e){var i=t.$implicit,a=n.oxw(3);n.s9C("id",i._id),n.xp6(1),n.Q6J("ngIf",a.fromOrphanDevice),n.xp6(2),n.hij(" ",i.name?i.name:""," "),n.xp6(2),n.hij(" ",i.externalOrgRef?i.externalOrgRef:""," "),n.xp6(2),n.hij(" ",i.oracleId?i.oracleId:""," "),n.xp6(2),n.hij(" ",i.id?i.id:""," "),n.xp6(1),n.Q6J("ngIf",!a.fromOrphanDevice)}}function U(e,t){if(1&e&&(n.TgZ(0,"tbody"),n.YNc(1,M,11,7,"tr",42),n.qZA()),2&e){var i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.orgsTableData)}}function D(e,t){if(1&e&&(n.TgZ(0,"tbody"),n.TgZ(1,"tr"),n.TgZ(2,"td",56),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw(2);n.xp6(3),n.Oqu(i.language["No matching records found"])}}function N(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"button",57),n.NdJ("click",function(){return n.CHM(i),n.oxw(2).assignOrg()}),n._uU(1),n.qZA()}if(2&e){var a=n.oxw(2);n.xp6(1),n.hij(" ",a.language.Assign," ")}}function I(e,t){if(1&e&&(n.TgZ(0,"div",38),n.TgZ(1,"table",39),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n.YNc(4,k,1,0,"th",40),n.TgZ(5,"th"),n._uU(6),n.qZA(),n.TgZ(7,"th"),n._uU(8),n.qZA(),n.TgZ(9,"th"),n._uU(10),n.qZA(),n.TgZ(11,"th"),n._uU(12),n.qZA(),n.YNc(13,q,2,1,"th",40),n.qZA(),n.qZA(),n.YNc(14,U,2,1,"tbody",40),n.YNc(15,D,4,1,"tbody",40),n._UZ(16,"tbody"),n.qZA(),n.YNc(17,N,2,1,"button",41),n.qZA()),2&e){var i=n.oxw();n.Q6J("hidden",!i.dataAvailable),n.xp6(1),n.Q6J("dtOptions",i.tableOptions),n.xp6(3),n.Q6J("ngIf",i.fromOrphanDevice),n.xp6(2),n.Oqu(i.language.organizationName),n.xp6(2),n.Oqu(i.language.accountNumber),n.xp6(2),n.Oqu(i.language.oracleId),n.xp6(2),n.Oqu(i.language.orgId),n.xp6(1),n.Q6J("ngIf",!i.fromOrphanDevice),n.xp6(1),n.Q6J("ngIf",0!=(null==i.orgsTableData?null:i.orgsTableData.length)),n.xp6(1),n.Q6J("ngIf",0==(null==i.orgsTableData?null:i.orgsTableData.length)||null!=i.orgsCount&&0===i.orgsCount||null!=i.filterCount&&0===i.filterCount),n.xp6(2),n.Q6J("ngIf",i.fromOrphanDevice)}}function E(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",58),n.TgZ(1,"h4",59),n._uU(2),n.qZA(),n.TgZ(3,"button",60),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeModal()}),n._UZ(4,"span",61),n.qZA(),n.qZA(),n.TgZ(5,"div",62),n._uU(6),n.qZA(),n.TgZ(7,"div",63),n.TgZ(8,"button",64),n.NdJ("click",function(){return n.CHM(i),n.oxw().confirmDeleteSecleted()}),n._uU(9),n.qZA(),n.TgZ(10,"button",65),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeModal()}),n._uU(11),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(2),n.Oqu(a.modalTitle),n.xp6(4),n.AsE(" ",a.language["Are you sure you want to delete"]," ",a.modalInfo,"? "),n.xp6(3),n.Oqu(a.language.yes),n.xp6(2),n.Oqu(a.language.no)}}var F,P=i(91704),L=((F=function(){function e(t,i,s,o,c,d,u,g,p,h){var f=this;a(this,e),this.commonOrgService=t,this.router=i,this.customTranslateService=s,this.api=o,this.sso=c,this.dialogService=d,this.http=u,this.titleService=g,this.apiUsageService=p,this.organizationApiService=h,this.pageAvailable=!1,this.tableOptions={pagingType:"full_numbers",dom:"tipr",columnDefs:[{targets:[1,2,3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&P(e.nTableWrapper).find("#organizations-table_last").addClass("disabled")}},this.orgsTableData=[],this.dtTrigger=new r.xQ,this.isRerender=!1,this.loading=!0,this.errorInfo="",this.successInfo="",this.showSecureAccess=!1,this.sysAdminRoute="systemAdministration",this.searchTerm="",this.orgSelected=new n.vpe,this.selectedOrg="",this.searchClearable=!1,this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){f.language=e,f.reloadCurrentRoute(),f.titleService.setTitle("".concat(f.language["All Organizations"]," - ").concat(f.language["System Administration"]," - ").concat(f.language["Calix Cloud"]))}),this.commonOrgService.currentPageAdder("organizations"),this.frTable=this.customTranslateService.fr,this.sysAdminRoute=l.N.SYS_ADMIN_ROUTE,this.titleService.setTitle("".concat(this.language["All Organizations"]," - ").concat(this.language["System Administration"]," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.getOrgsCount(),this.closeAlert(),this.tableLanguageOptions();var e=this.sso.getRoles();e&&-1!==e.indexOf("OrgAccess")&&(this.showSecureAccess=!0)}},{key:"ngOnDestroy",value:function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.allOrgSubscribe&&this.allOrgSubscribe.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.apiUsageSub&&this.apiUsageSub.unsubscribe()}},{key:"getOrgsCount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.http.get("".concat(l.N.CALIX_ADMIN_ORG_BASE_URL,"organizations/count")).subscribe(function(i){e.orgsCount=i,e.countReceived=!0,t?e.redraw():e.tableRender()},function(t){e.pageErrorHandle(t),e.loading=!1})}},{key:"tableRender",value:function(){var e=this,t="".concat(l.N.CALIX_ADMIN_ORG_BASE_URL,"organizations"),i=this;this.tableOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,serverSide:!0,processing:!1,dom:"tipr",columnDefs:[{targets:[this.fromOrphanDevice?0:1,2,3,4],orderable:!1},{targets:[this.fromOrphanDevice?1:0],orderable:!0}],order:[this.fromOrphanDevice?1:0,"asc"],ajax:function(n,a){e.sortBy=n.order[0].column,e.sortType=n.order[0].dir,i.getFilterCount(n.search.value),n.search.value?(n.search.value=n.search.value?encodeURIComponent(n.search.value.trim().replace(/\s\s+/g," ").replace(/ /g,"%")):"",t="".concat(l.N.CALIX_ADMIN_ORG_BASE_URL,"organizations?offset=").concat(n.start,"&size=").concat(n.length,"&filter=").concat(n.search.value)):t="".concat(l.N.CALIX_ADMIN_ORG_BASE_URL,"organizations?offset=").concat(n.start,"&size=").concat(n.length),i.http.get(t).subscribe(function(t){i.orgsTableData=t?e.sortData(t,i.sortBy,i.sortType):[],i.hideNoDataRow(),i.dataAvailable=!0,i.loading=!1,i.tableLanguageOptions(),setTimeout(function(){a({recordsTotal:null!=i.orgsCount?i.orgsCount:0,recordsFiltered:null!=i.filterCount?i.filterCount:i.orgsCount,data:[]})},150)},function(e){404==e.status?(i.orgsTableData=[],i.hideNoDataRow(),i.loading=!1,i.tableLanguageOptions(),setTimeout(function(){a({recordsTotal:null!=i.orgsCount?i.orgsCount:0,recordsFiltered:null!=i.filterCount?i.filterCount:i.orgsCount,data:[]})},100)):(i.pageErrorHandle(e),i.loading=!1)})},drawCallback:function(t){e.tableLanguageOptions(),t._iRecordsDisplay<=t._iDisplayLength&&P(t.nTableWrapper).find("#organizations-table_last").addClass("disabled")}},this.tableLanguageOptions()}},{key:"getFilterCount",value:function(e){var t=this;e=e?encodeURIComponent(e.trim().replace(/\s\s+/g," ").replace(/ /g,"%")):"",this.http.get("".concat(l.N.CALIX_ADMIN_ORG_BASE_URL,"organizations/count?filter=").concat(e)).subscribe(function(e){t.filterCount=e},function(e){t.pageErrorHandle(e)})}},{key:"hideNoDataRow",value:function(){setTimeout(function(){P(".odd").css("display","none")},100)}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"hideSearch",value:function(){setTimeout(function(){P("#organizations-list .dataTables_wrapper .dataTables_length").css("display","none")},100)}},{key:"search",value:function(e){this.searchClearable=!!e.length,this.dtElement.dtInstance.then(function(t){t.search(e).draw()})}},{key:"onSearchClearing",value:function(e){this.searchClearable=!1,e.value="",this.dtElement.dtInstance.then(function(t){t.search(e.value).draw()})}},{key:"gotoSecuredAccess",value:function(e){this.setOrganization(e),this.router.navigate(["".concat(this.sysAdminRoute,"/orgSecuredAccess")])}},{key:"gotoOrgDetail",value:function(e){this.setOrganization(e),this.router.navigate(["".concat(this.sysAdminRoute,"/orgDetail")])}},{key:"gotoUsers",value:function(e){var t;this.setOrganization(e),null===(t=this.commonOrgService.showAccountManagement)||void 0===t||t.next(e.id),this.getApiUsageQuota(e.id)}},{key:"getApiUsageQuota",value:function(e){var t=this;this.apiUsageSub=this.apiUsageService.getaApiQuotaDetails(e).subscribe(function(e){var i,n;e&&(null==e?void 0:e.allowed_count)&&0!=(null==e?void 0:e.allowed_count)?(null===(i=t.commonOrgService.showApiUsage)||void 0===i||i.next(!0),localStorage.setItem("apiUsage","true")):(null===(n=t.commonOrgService.showApiUsage)||void 0===n||n.next(!1),localStorage.setItem("apiUsage","false")),t.router.navigate(["".concat(t.sysAdminRoute,"/users")])},function(e){var i;null===(i=t.commonOrgService.showApiUsage)||void 0===i||i.next(!1),localStorage.setItem("apiUsage","false"),t.router.navigate(["".concat(t.sysAdminRoute,"/users")])})}},{key:"deleteOrg",value:function(e){this.deletedata=e,this.modalTitle=this.language["Delete Organization"],this.modalInfo=this.deletedata.name,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDeleteSecleted",value:function(){var e=this;this.closeModal(),this.deleteSubs=this.api.DeleteOrg(this.deletedata.id).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["Organization deleted Successfully"],e.success=!0,e.commonOrgService.pageScrollTop(),setTimeout(function(){e.closeAlert()},3e3),e.loading=!0,e.isRerender=!0,e.getOrgsCount(!0)},function(t){e.loading=!1,e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()},function(){e.loading=!1})}},{key:"setOrganization",value:function(e){sessionStorage.setItem("calixAdminOrgDetail",JSON.stringify(e)),sessionStorage.setItem("calixAdminOrgID",e.id),this.commonOrgService.currentOrgAdder(e.name)}},{key:"addOrg",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/addOrg")])}},{key:"goToOrgList",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/organizations")])}},{key:"openDeleteModal",value:function(){document.getElementById("deleteModalHiddenButton").click()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.fr:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}},{key:"changeTableStatusLanguage",value:function(e){var t=new Intl.NumberFormat;this.tableCounts={searchText:encodeURIComponent(e.oPreviousSearch.sSearch.trim()),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};var i="fr"==sessionStorage.getItem("defaultLanguage"),n=e.oPreviousSearch.sSearch.trim()?i?"(filtr\xe9es \xe0 partir des ".concat(t.format(e._iRecordsTotal)," entr\xe9es totales)"):"(filtered from ".concat(t.format(e._iRecordsTotal)," total entries)"):"",a=0==e._iRecordsDisplay?-1:e._iDisplayStart,s=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;P('div [role="status"]').text(i?"Affichage de ".concat(t.format(a+1)," \xe0 ").concat(t.format(s)," des ").concat(t.format(e._iRecordsDisplay)," entr\xe9es ").concat(n):"Showing ".concat(t.format(a+1)," to ").concat(t.format(s)," of ").concat(t.format(e._iRecordsDisplay)," entries ").concat(n)),P(".first").text(i?"Le d\xe9but":"First"),P(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),P(".next").text(i?"Suivant":"Next"),P(".last").text(i?"Derni\xe8re":"Last")}},{key:"sortData",value:function(e,t,i){return this.sortByColumn(e,i,"name")}},{key:"sortByColumn",value:function(e,t,i){return e.sort(function(e,n){var a=e[i]?e[i].toUpperCase():"",s=n[i]?n[i].toUpperCase():"";if("asc"==t){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0}),e}},{key:"redraw",value:function(){this.searchTerm?this.search(this.searchTerm):this.dtElement.dtInstance.then(function(e){e.draw()})}},{key:"onPaste",value:function(){}},{key:"reloadCurrentRoute",value:function(){var e=this,t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){e.router.navigate([t])})}},{key:"assignOrg",value:function(){this.orgSelected.emit(this.selectedOrg)}}]),e}()).\u0275fac=function(e){return new(e||F)(n.Y36(c.v),n.Y36(d.F0),n.Y36(u.d),n.Y36(g.z),n.Y36(p.t6),n.Y36(h.FF),n.Y36(f.eN),n.Y36(m.Dx),n.Y36(v.w),n.Y36(Z.F))},F.\u0275cmp=n.Xpm({type:F,selectors:[["app-organizations-list"]],viewQuery:function(e,t){var i;1&e&&(n.Gf(x,7),n.Gf(s.G,5)),2&e&&(n.iGM(i=n.CRH())&&(t.deleteModal=i.first),n.iGM(i=n.CRH())&&(t.dtElement=i.first))},inputs:{fromOrphanDevice:"fromOrphanDevice"},outputs:{orgSelected:"orgSelected"},decls:23,vars:9,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mt-3"],[1,"col","ccl-title"],[1,"row","my-3"],[1,"col-md-6","offset-md-6","pr-0"],[1,"text-right","flat-right"],[1,"row"],[1,"col-md-5"],["class","btn-default primary px-3",3,"click",4,"ngIf"],[1,"col-md-7"],[1,"ccl-form"],["type","text","id","org-list-search","placeholder","",1,"ccl-input",3,"ngModel","placeholder","ngModelChange","paste","search","input"],["searchBar",""],[1,"clear-icon",3,"hidden","click"],["src","assets/img/close-icon.svg"],[1,"row","my-3","mh-65"],["class","col-md-12",3,"hidden",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"btn-default","primary","px-3",3,"click"],[1,"col-md-12",3,"hidden"],["id","organizations-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[4,"ngIf"],["id","assignOrg","class","btn-default primary px-3 mt-3",3,"click",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["class","actions",4,"ngIf"],["type","radio","id","orgListSelection",1,"ml-2",3,"ngModel","value","ngModelChange"],[1,"actions"],["class","btn-user-access",3,"title","click",4,"ngIf"],["id","org-detail-btn",1,"btn-action-icon",3,"title","click"],[1,"fas","fa-pencil-alt","primary"],["id","users-btn",1,"btn-action-icon",3,"title","click"],[1,"fas","fa-user","primary"],["id","delete-org-btn",1,"btn-action-icon",3,"title","click"],[1,"fas","fa-trash-alt","primary"],[1,"btn-user-access",3,"title","click"],["src","assets/images/user_secure_access_icon.png"],["colspan","5",1,"no-data-available"],["id","assignOrg",1,"btn-default","primary","px-3","mt-3",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",0),n.YNc(1,T,5,1,"div",1),n.YNc(2,_,6,1,"div",2),n.YNc(3,C,9,1,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"div",7),n.TgZ(9,"div",8),n.TgZ(10,"div",9),n.TgZ(11,"div",10),n.YNc(12,y,2,1,"button",11),n.qZA(),n.TgZ(13,"div",12),n.TgZ(14,"div",13),n.TgZ(15,"input",14,15),n.NdJ("ngModelChange",function(e){return t.searchTerm=e})("paste",function(e){return t.search(e.target.value)})("search",function(e){return t.search(e.target.value)})("input",function(e){return t.search(e.target.value)}),n.qZA(),n.TgZ(17,"span",16),n.NdJ("click",function(){n.CHM(i);var e=n.MAs(16);return t.onSearchClearing(e)}),n._UZ(18,"img",17),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",18),n.YNc(20,I,18,11,"div",19),n.qZA(),n.qZA(),n.YNc(21,E,12,5,"ng-template",null,20,n.W1O)}2&e&&(n.xp6(1),n.Q6J("ngIf",t.loading),n.xp6(1),n.Q6J("ngIf",t.error),n.xp6(1),n.Q6J("ngIf",t.success),n.xp6(3),n.Oqu(t.language.allOrganizations),n.xp6(6),n.Q6J("ngIf",!t.fromOrphanDevice),n.xp6(3),n.s9C("placeholder",t.language.searchOrganizations),n.Q6J("ngModel",t.searchTerm),n.xp6(2),n.Q6J("hidden",!t.searchClearable),n.xp6(3),n.Q6J("ngIf",t.countReceived))},directives:[b.O5,A.Fj,A.JJ,A.On,s.G,b.sg,A._],styles:["td.actions[_ngcontent-%COMP%]{white-space:nowrap}.btn-user-access[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}.btn-action-icon[_ngcontent-%COMP%]{background-color:transparent;font-size:13.5px;border:none}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:30px;top:5px;cursor:pointer;width:12px}"]}),F)},94634:function(t,i,n){n.d(i,{W:function(){return de}});var s=n(23771),r=n(79765),l=n(25917),c=n(9112),d=n(88002),u=n(5304),g=n(92340),p=n(37716),h=n(38583),f=n(49342),m=n(30900),v=n(63859),Z=n(39895),b=n(89097),A=n(12664),x=n(39075),T=n(3679),_=n(86640),C=["deleteModal"],y=["multiDeleteModal"];function k(e,t){if(1&e&&(p.TgZ(0,"div",46),p.TgZ(1,"div",47),p.TgZ(2,"div",48),p.TgZ(3,"span",49),p._uU(4),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw(2);p.xp6(4),p.Oqu(i.language.Loading)}}function q(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",50),p.TgZ(1,"span",51),p._UZ(2,"img",52),p.qZA(),p.TgZ(3,"button",53),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).closeAlert()}),p._UZ(4,"span"),p.qZA(),p._UZ(5,"div",54),p.qZA()}if(2&e){var n=p.oxw(2);p.xp6(5),p.Q6J("innerHtml",n.errorInfo,p.oJD)}}function w(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",55),p.TgZ(1,"button",53),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).closeAlert()}),p._UZ(2,"span"),p.qZA(),p.TgZ(3,"div",56),p.TgZ(4,"span",57),p._UZ(5,"img",58),p.qZA(),p._UZ(6,"div",54),p.qZA(),p.qZA()}if(2&e){var n=p.oxw(2);p.xp6(6),p.Q6J("innerHtml",n.successInfo,p.oJD)}}function O(e,t){1&e&&p._UZ(0,"i",72)}function S(e,t){1&e&&p._UZ(0,"i",73)}function M(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"a",69),p.NdJ("click",function(){p.CHM(i);var e=p.oxw().$implicit;return p.oxw(2).expandCollapse(e._id)}),p.YNc(2,O,1,0,"i",70),p.YNc(3,S,1,0,"i",71),p.qZA(),p.qZA()}if(2&e){var n=p.oxw().$implicit,a=p.oxw(2);p.xp6(1),p.uIk("id","collapse-btn-"+n.displayName),p.xp6(1),p.Q6J("ngIf",!a.isExpanded[n._id]),p.xp6(1),p.Q6J("ngIf",a.isExpanded[n._id])}}var U=function(e){return{oneLevelDisable:e}},D=function(e){return{noWriteApi:e}};function N(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"span"),p._uU(1),p.TgZ(2,"label",74),p.TgZ(3,"input",75),p.NdJ("change",function(e){p.CHM(i);var t=p.oxw().$implicit;return p.oxw(2).levelOneAction(t,e.target.checked)}),p.qZA(),p._UZ(4,"span",76),p.qZA(),p.TgZ(5,"span",77),p._uU(6),p.qZA(),p.qZA()}if(2&e){var n=p.oxw().$implicit,a=p.oxw(2);p.xp6(1),p.hij(" ",a.language.readOnly," "),p.xp6(2),p.Gre("",n._id,"_action firstLevel"),p.s9C("id",n._id+"_action"),p.s9C("name",n.name),p.Q6J("checked",n.readWrite)("ngClass",p.VKq(12,U,null==n?null:n.isSubscriber))("disabled",n.disableScope||!n.checked||(null==n?null:n.isSubscriber)||!a.scopeWriteAccess),p.uIk("noWriteApi",null==n?null:n.disableScope),p.xp6(2),p.Q6J("ngClass",p.VKq(14,D,n.disableScope)),p.xp6(1),p.Oqu(a.language.writeAndRead)}}function I(e,t){1&e&&p._UZ(0,"i",85)}function E(e,t){1&e&&p._UZ(0,"i",73)}function F(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"a",69),p.NdJ("click",function(){p.CHM(i);var e=p.oxw().$implicit;return p.oxw(4).expandCollapse(e._id)}),p.YNc(2,I,1,0,"i",84),p.YNc(3,E,1,0,"i",71),p.qZA(),p.qZA()}if(2&e){var n=p.oxw().$implicit,a=p.oxw(4);p.xp6(1),p.uIk("id","collapse-btn-"+n.displayName),p.xp6(1),p.Q6J("ngIf",!a.isExpanded[n._id]),p.xp6(1),p.Q6J("ngIf",a.isExpanded[n._id])}}function P(e,t){1&e&&p._UZ(0,"i",85)}function L(e,t){1&e&&p._UZ(0,"i",73)}function J(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"a",69),p.NdJ("click",function(){p.CHM(i);var e=p.oxw().$implicit;return p.oxw(6).expandCollapse(e._id)}),p.YNc(2,P,1,0,"i",84),p.YNc(3,L,1,0,"i",71),p.qZA(),p.qZA()}if(2&e){var n=p.oxw().$implicit,a=p.oxw(6);p.xp6(1),p.uIk("id","collapse-btn-"+n.displayName),p.xp6(1),p.Q6J("ngIf",!a.isExpanded[n._id]),p.xp6(1),p.Q6J("ngIf",a.isExpanded[n._id])}}function R(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div"),p.TgZ(1,"div",36),p.TgZ(2,"div",60),p.TgZ(3,"div",89),p.TgZ(4,"div"),p.TgZ(5,"input",63),p.NdJ("change",function(e){var t=p.CHM(i).$implicit,n=p.oxw(2).$implicit,a=p.oxw(2).$implicit,s=p.oxw(2).$implicit;return p.oxw(2).levelFourChange(t,e.target.checked,n._id,a._id,s._id)}),p.qZA(),p._uU(6),p.qZA(),p.qZA(),p.qZA(),p.TgZ(7,"div",82),p._uU(8),p.TgZ(9,"label",74),p.TgZ(10,"input",83),p.NdJ("change",function(){var e=p.CHM(i).$implicit,t=p.oxw(2).$implicit,n=p.oxw(2).$implicit,a=p.oxw(2).$implicit;return p.oxw(2).levelFourAction(e._id,t._id,n._id,a._id)}),p.qZA(),p._UZ(11,"span",76),p.qZA(),p.TgZ(12,"span",77),p._uU(13),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&e){var n=t.$implicit,a=p.oxw(2).$implicit,s=p.oxw(2).$implicit,o=p.oxw(2).$implicit,r=p.oxw(2);p.xp6(5),p.DjV("",o._id," ",s._id," ",a._id," ",n._id,""),p.s9C("id",n._id),p.s9C("value",n.name),p.Q6J("disabled",!r.scopeWriteAccess)("checked",n.checked),p.xp6(1),p.hij("\xa0\xa0\xa0 ",r.scopeDisplayName[n.displayName]||r.language[n.displayName]||n.displayName," "),p.xp6(2),p.hij(" ",r.language.readOnly," "),p.xp6(2),p.DjV("",o._id,"_action ",s._id,"_action ",a._id,"_action ",n._id,"_action"),p.s9C("id",n._id+"_action"),p.s9C("name",n.name),p.Q6J("checked",n.readWrite)("disabled",n.disableScope||!n.checked||!r.scopeWriteAccess),p.uIk("noWriteApi",null==n?null:n.disableScope),p.xp6(2),p.Q6J("ngClass",p.VKq(25,D,n.disableScope)),p.xp6(1),p.Oqu(r.language.writeAndRead)}}function H(e,t){if(1&e&&(p.TgZ(0,"div",78),p.YNc(1,R,14,27,"div",42),p.qZA()),2&e){var i=p.oxw().$implicit,n=p.oxw(6);p.Q6J("ngClass",n.isExpanded[i._id]?"d-block":"d-none"),p.uIk("id","collapse-"+i.displayName),p.xp6(1),p.Q6J("ngForOf",i.permissions3)}}function Y(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",87),p.TgZ(1,"div",36),p.TgZ(2,"div",60),p.TgZ(3,"div",88),p.TgZ(4,"div",62),p.TgZ(5,"input",63),p.NdJ("change",function(e){var t=p.CHM(i).$implicit,n=p.oxw(2).$implicit,a=p.oxw(2).$implicit;return p.oxw(2).levelThreeChange(t,e.target.checked,n._id,a._id)}),p.qZA(),p._uU(6,"\xa0\xa0\xa0 "),p.TgZ(7,"span",64),p.NdJ("click",function(e){var t=p.CHM(i).$implicit;return p.oxw(6).showCheckBox(e,t)}),p.qZA(),p.TgZ(8,"span",65),p._uU(9),p.qZA(),p._UZ(10,"span",66),p.qZA(),p.YNc(11,J,4,3,"div",41),p.qZA(),p.qZA(),p.TgZ(12,"div",82),p._uU(13),p.TgZ(14,"label",74),p.TgZ(15,"input",83),p.NdJ("change",function(e){var t=p.CHM(i).$implicit,n=p.oxw(2).$implicit,a=p.oxw(2).$implicit;return p.oxw(2).levelThreeAction(t,e.target.checked,n._id,a._id)}),p.qZA(),p._UZ(16,"span",76),p.qZA(),p.TgZ(17,"span",77),p._uU(18),p.qZA(),p.qZA(),p.qZA(),p.YNc(19,H,2,3,"div",68),p.qZA()}if(2&e){var n=t.$implicit,a=p.oxw(2).$implicit,s=p.oxw(2).$implicit,o=p.oxw(2);p.xp6(5),p.IyS("",s._id," ",a._id," ",n._id,""),p.MGl("id","",n._id,"_inner_parent"),p.s9C("value",n.name),p.Q6J("disabled",!o.scopeWriteAccess)("checked",n.checked),p.xp6(2),p.MGl("id","",n._id,"_inner_parent_span"),p.xp6(2),p.Oqu(o.scopeDisplayName[n.displayName]||o.language[n.displayName]||n.displayName),p.xp6(1),p.MGl("id","",n._id,"_info"),p.xp6(1),p.Q6J("ngIf",n.permissions3.length),p.xp6(2),p.hij(" ",o.language.readOnly," "),p.xp6(2),p.IyS("",s._id,"_action ",a._id,"_action ",n._id,"_action"),p.s9C("id",n._id+"_action"),p.s9C("name",n.name),p.Q6J("checked",n.readWrite)("disabled",n.disableScope||!n.checked||!o.scopeWriteAccess),p.uIk("noWriteApi",null==n?null:n.disableScope),p.xp6(2),p.Q6J("ngClass",p.VKq(27,D,n.disableScope)),p.xp6(1),p.Oqu(o.language.writeAndRead),p.xp6(1),p.Q6J("ngIf",n.permissions3.length)}}function Q(e,t){if(1&e&&(p.TgZ(0,"div",78),p.YNc(1,Y,20,29,"div",86),p.qZA()),2&e){var i=p.oxw().$implicit,n=p.oxw(4);p.Q6J("ngClass",n.isExpanded[i._id]?"d-block":"d-none"),p.uIk("id","collapse-"+i.displayName),p.xp6(1),p.Q6J("ngForOf",i.permissions2)}}function z(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",80),p.TgZ(1,"div",36),p.TgZ(2,"div",60),p.TgZ(3,"div",81),p.TgZ(4,"div",62),p.TgZ(5,"input",63),p.NdJ("change",function(e){var t=p.CHM(i).$implicit,n=p.oxw(2).$implicit;return p.oxw(2).levelTwoChange(t,e.target.checked,n._id)}),p.qZA(),p._uU(6,"\xa0\xa0\xa0 "),p.TgZ(7,"span",64),p.NdJ("click",function(e){var t=p.CHM(i).$implicit;return p.oxw(4).showCheckBox(e,t)}),p.qZA(),p.TgZ(8,"span",65),p._uU(9),p.qZA(),p._UZ(10,"span",66),p.qZA(),p.YNc(11,F,4,3,"div",41),p.qZA(),p.qZA(),p.TgZ(12,"div",82),p._uU(13),p.TgZ(14,"label",74),p.TgZ(15,"input",83),p.NdJ("change",function(e){var t=p.CHM(i).$implicit,n=p.oxw(2).$implicit;return p.oxw(2).levelTwoAction(t,e.target.checked,n._id)}),p.qZA(),p._UZ(16,"span",76),p.qZA(),p.TgZ(17,"span",77),p._uU(18),p.qZA(),p.qZA(),p.qZA(),p.YNc(19,Q,2,3,"div",68),p.qZA()}if(2&e){var n=t.$implicit,a=p.oxw(2).$implicit,s=p.oxw(2);p.xp6(5),p.Tol(a._id),p.MGl("id","",n._id,"_parent"),p.s9C("value",n.name),p.Q6J("disabled",!s.scopeWriteAccess)("checked",n.checked),p.xp6(2),p.MGl("id","",n._id,"_parent_span"),p.xp6(2),p.Oqu(s.scopeDisplayName[n.displayName]||s.language[n.displayName]||n.displayName),p.xp6(1),p.MGl("id","",n._id,"_info"),p.xp6(1),p.Q6J("ngIf",n.permissions2.length),p.xp6(2),p.hij(" ",s.language.readOnly," "),p.xp6(2),p.Gre("",a._id,"_action"),p.s9C("id",n._id+"_action"),p.s9C("name",n.name),p.Q6J("checked",n.readWrite)("disabled",n.disableScope||!n.checked||!s.scopeWriteAccess),p.uIk("noWriteApi",null==n?null:n.disableScope),p.xp6(2),p.Q6J("ngClass",p.VKq(23,D,n.disableScope||"cloud.rbac.csc.calloutcome.enforce"===n.name)),p.xp6(1),p.Oqu(s.language.writeAndRead),p.xp6(1),p.Q6J("ngIf",n.permissions2.length)}}function B(e,t){if(1&e&&(p.TgZ(0,"div",78),p.YNc(1,z,20,25,"div",79),p.qZA()),2&e){var i=p.oxw().$implicit,n=p.oxw(2);p.Q6J("ngClass",n.isExpanded[i._id]?"d-block":"d-none"),p.uIk("id","collapse-"+i.displayName),p.xp6(1),p.Q6J("ngForOf",i.permissions)}}var $=function(e){return{emptyRowSwitch:e}};function j(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",59),p.TgZ(1,"div",36),p.TgZ(2,"div",60),p.TgZ(3,"div",61),p.TgZ(4,"div",62),p.TgZ(5,"input",63),p.NdJ("change",function(e){var t=p.CHM(i).$implicit;return p.oxw(2).levelOneChange(t._id,e.target.checked,t)}),p.qZA(),p.TgZ(6,"span",64),p.NdJ("click",function(e){var t=p.CHM(i).$implicit;return p.oxw(2).showCheckBox(e,t)}),p.qZA(),p.TgZ(7,"span",65),p._uU(8),p.qZA(),p._UZ(9,"span",66),p.qZA(),p.YNc(10,M,4,3,"div",41),p.qZA(),p.qZA(),p.TgZ(11,"div",67),p.YNc(12,N,7,16,"span",41),p.qZA(),p.qZA(),p.YNc(13,B,2,3,"div",68),p.qZA()}if(2&e){var n=t.$implicit,a=p.oxw(2);p.xp6(5),p.MGl("id","",n._id,"_parent"),p.s9C("value",n.name),p.Q6J("disabled",!a.scopeWriteAccess)("checked",n.checked),p.xp6(1),p.MGl("id","",n._id,"_parent_span"),p.xp6(2),p.Oqu(a.scopeDisplayName[n.displayName]||a.language[n.displayName]||n.displayName),p.xp6(1),p.MGl("id","",n._id,"_info"),p.xp6(1),p.Q6J("ngIf",n.permissions.length),p.xp6(1),p.Q6J("ngClass",p.VKq(11,$,null==n?null:n.isSubscriber)),p.xp6(1),p.Q6J("ngIf",!(null!=n&&n.isSubscriber)),p.xp6(1),p.Q6J("ngIf",n.permissions.length)}}function V(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",90),p.TgZ(1,"button",53),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).closeAlertWarning()}),p._uU(2,"\xd7"),p.qZA(),p._UZ(3,"div",91),p.qZA()}if(2&e){var n=p.oxw(2);p.xp6(3),p.Q6J("innerHtml",n.warningInfo,p.oJD)}}function G(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",92),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).deleteMultiUsers()}),p._uU(1),p.qZA()}if(2&e){var n=p.oxw(2);p.xp6(1),p.Oqu(n.language.delete)}}function W(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"th",93),p.TgZ(1,"input",94),p.NdJ("click",function(e){return p.CHM(i),p.oxw(2).deleteUserCheckAll(e.target.checked)}),p.qZA(),p.TgZ(2,"span",95),p.NdJ("click",function(e){return p.CHM(i),p.oxw(2).showAllUserCheckBox(e)}),p.qZA(),p.qZA()}if(2&e){var n=p.oxw(2);p.xp6(1),p.Q6J("checked",n.usersDelSelectedChecked)("disabled",0==(null==n.addedUsersList?null:n.addedUsersList.length)||!n.scopeWriteAccess)}}function X(e,t){if(1&e&&(p.TgZ(0,"th"),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.Oqu(i.language.Action)}}function K(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"td",98),p.TgZ(1,"input",99),p.NdJ("click",function(e){p.CHM(i);var t=p.oxw().$implicit;return p.oxw(2).deleteUserCheckOne(t,e.target.checked)}),p.qZA(),p.qZA()}if(2&e){var n=p.oxw().$implicit,a=p.oxw(2);p.xp6(1),p.s9C("id",n._id),p.MGl("name","user_del_",n._id,""),p.s9C("value",n._id),p.Q6J("checked",a.usersDelSelectedChecked)("disabled",!a.scopeWriteAccess)}}function ee(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"td",100),p.TgZ(1,"i",101),p.NdJ("click",function(){p.CHM(i);var e=p.oxw().$implicit;return p.oxw(2).deleteUser(e)}),p.qZA(),p.qZA()}if(2&e){var n=p.oxw(3);p.xp6(1),p.s9C("title",n.language.delete)}}function te(e,t){if(1&e&&(p.TgZ(0,"tr"),p.YNc(1,K,2,5,"td",96),p.TgZ(2,"td"),p._uU(3),p.qZA(),p.YNc(4,ee,2,1,"td",97),p.qZA()),2&e){var i=t.$implicit,n=p.oxw(2);p.xp6(1),p.Q6J("ngIf",n.scopeWriteAccess),p.xp6(2),p.Oqu(i.username),p.xp6(1),p.Q6J("ngIf",n.scopeWriteAccess)}}function ie(e,t){if(1&e&&(p.TgZ(0,"tbody"),p.TgZ(1,"tr"),p.TgZ(2,"td",102),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw(2);p.xp6(3),p.Oqu(i.language["No data available in table"])}}function ne(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"button",103),p.NdJ("click",function(){return p.CHM(i),p.oxw(2).addRole()}),p._uU(1),p.qZA()}if(2&e){var n=p.oxw(2);p.Q6J("disabled",n.loader),p.xp6(1),p.Oqu(n.language.saveEnregistrer)}}var ae=function(){return{standalone:!0}};function se(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",3),p.YNc(1,k,5,1,"div",4),p.YNc(2,q,6,1,"div",5),p.YNc(3,w,7,1,"div",6),p.TgZ(4,"div",7),p.TgZ(5,"div",8),p.TgZ(6,"div",9),p._uU(7),p.qZA(),p.qZA(),p.TgZ(8,"div",10),p.TgZ(9,"div",11),p.TgZ(10,"a",12),p.NdJ("click",function(){return p.CHM(i),p.oxw().goBack()}),p._UZ(11,"i",13),p._uU(12),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",14),p.TgZ(14,"div",8),p.TgZ(15,"div",15),p.TgZ(16,"label",16),p._uU(17),p.TgZ(18,"span",17),p._uU(19,"*"),p.qZA(),p.qZA(),p.TgZ(20,"input",18),p.NdJ("keyup",function(){return p.CHM(i),p.oxw().closeAlert()})("ngModelChange",function(e){return p.CHM(i),p.oxw().roleName=e}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(21,"div",19),p.TgZ(22,"div",15),p.TgZ(23,"label",20),p._uU(24),p.qZA(),p.TgZ(25,"input",21),p.NdJ("ngModelChange",function(e){return p.CHM(i),p.oxw().roleDescription=e}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(26,"div",14),p.TgZ(27,"div",22),p._uU(28),p.qZA(),p.qZA(),p.TgZ(29,"div",14),p.TgZ(30,"div",23),p.TgZ(31,"form",24),p.YNc(32,j,14,13,"div",25),p.qZA(),p.qZA(),p.qZA(),p.TgZ(33,"div",14),p.TgZ(34,"div",22),p._uU(35),p.qZA(),p.qZA(),p.YNc(36,V,4,1,"div",26),p.TgZ(37,"div",14),p.TgZ(38,"div",27),p.TgZ(39,"form"),p.TgZ(40,"div",28),p.TgZ(41,"ng-select",29),p.NdJ("ngModelChange",function(e){return p.CHM(i),p.oxw().selectedUsers=e}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(42,"div",30),p.TgZ(43,"button",31),p.NdJ("click",function(){return p.CHM(i),p.oxw().addUser()}),p._uU(44),p.qZA(),p.qZA(),p.qZA(),p.TgZ(45,"div",32),p.TgZ(46,"div",33),p.TgZ(47,"div",34),p.YNc(48,G,2,1,"button",35),p.qZA(),p.qZA(),p.qZA(),p.TgZ(49,"div",36),p.TgZ(50,"div",37),p.TgZ(51,"table",38),p.TgZ(52,"thead",39),p.TgZ(53,"tr"),p.YNc(54,W,3,2,"th",40),p.TgZ(55,"th"),p._uU(56),p.qZA(),p.YNc(57,X,2,1,"th",41),p.qZA(),p.qZA(),p.TgZ(58,"tbody"),p.YNc(59,te,5,3,"tr",42),p.qZA(),p.YNc(60,ie,4,1,"tbody",41),p.qZA(),p.qZA(),p.qZA(),p.TgZ(61,"div",36),p.TgZ(62,"div",43),p.YNc(63,ne,2,2,"button",44),p.TgZ(64,"button",45),p.NdJ("click",function(){return p.CHM(i),p.oxw().goBack()}),p._uU(65),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&e){var n=p.oxw();p.xp6(1),p.Q6J("ngIf",n.loader),p.xp6(1),p.Q6J("ngIf",n.error),p.xp6(1),p.Q6J("ngIf",n.success),p.xp6(4),p.hij("",n.pageTitle," "),p.xp6(5),p.hij(" ",n.language["Back to Roles List"]," "),p.xp6(5),p.hij("",n.language.roleName," "),p.xp6(3),p.s9C("placeholder",n.language["Enter role name"]),p.Q6J("disabled",!n.scopeWriteAccess)("ngModel",n.roleName),p.xp6(4),p.Oqu(n.language.Description),p.xp6(1),p.s9C("placeholder",n.language.Description),p.Q6J("disabled",!n.scopeWriteAccess)("ngModel",n.roleDescription),p.xp6(3),p.Oqu(n.language.permissions),p.xp6(4),p.Q6J("ngForOf",n.allPermissions),p.xp6(3),p.Oqu(n.language.addUsers),p.xp6(1),p.Q6J("ngIf",n.warning),p.xp6(5),p.s9C("placeholder",n.language.selectUser),p.s9C("notFoundText",n.language.noItemsFound),p.Q6J("items",n.usersList)("ngModel",n.selectedUsers)("clearable",!1)("ngModelOptions",p.DdM(36,ae)),p.xp6(2),p.Q6J("disabled",!n.scopeWriteAccess),p.xp6(1),p.Oqu(n.language.add),p.xp6(4),p.Q6J("ngIf",0!=n.usersDelSelected.length),p.xp6(2),p.Q6J("hidden",!n.dataAvailable),p.xp6(1),p.Q6J("dtOptions",n.tableOptions)("dtTrigger",n.dtTrigger),p.xp6(3),p.Q6J("ngIf",n.scopeWriteAccess),p.xp6(2),p.Oqu(n.language.userName),p.xp6(1),p.Q6J("ngIf",n.scopeWriteAccess),p.xp6(2),p.Q6J("ngForOf",n.addedUsersList),p.xp6(1),p.Q6J("ngIf",0==(null==n.addedUsersList?null:n.addedUsersList.length)),p.xp6(3),p.Q6J("ngIf",n.scopeWriteAccess),p.xp6(2),p.Oqu(n.language.Cancel)}}function oe(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",104),p.TgZ(1,"h4",105),p._uU(2),p.qZA(),p.TgZ(3,"button",106),p.NdJ("click",function(){return p.CHM(i),p.oxw().closeModal()}),p._UZ(4,"span",107),p.qZA(),p.qZA(),p.TgZ(5,"div",108),p._uU(6),p._UZ(7,"br"),p._uU(8),p.qZA(),p.TgZ(9,"div",109),p.TgZ(10,"button",110),p.NdJ("click",function(){return p.CHM(i),p.oxw().confirmDeleteSecleted()}),p._uU(11),p.qZA(),p.TgZ(12,"button",111),p.NdJ("click",function(){return p.CHM(i),p.oxw().closeModal()}),p._uU(13),p.qZA(),p.qZA()}if(2&e){var n=p.oxw();p.xp6(2),p.Oqu(n.modalTitle),p.xp6(4),p.hij(" ",n.language["Are you sure you want to delete this Role"],"?"),p.xp6(2),p.hij(" (",n.modalInfo,") "),p.xp6(3),p.Oqu(n.language.yes),p.xp6(2),p.Oqu(n.language.no)}}function re(e,t){if(1&e){var i=p.EpF();p.TgZ(0,"div",104),p.TgZ(1,"h4",105),p._uU(2),p.qZA(),p.TgZ(3,"button",106),p.NdJ("click",function(){return p.CHM(i),p.oxw().closeModal()}),p._UZ(4,"span",107),p.qZA(),p.qZA(),p.TgZ(5,"div",108),p._uU(6),p._UZ(7,"br"),p._uU(8),p.qZA(),p.TgZ(9,"div",109),p.TgZ(10,"button",110),p.NdJ("click",function(){return p.CHM(i),p.oxw().confirmMultiDeleteSecleted()}),p._uU(11),p.qZA(),p.TgZ(12,"button",111),p.NdJ("click",function(){return p.CHM(i),p.oxw().closeModal()}),p._uU(13),p.qZA(),p.qZA()}if(2&e){var n=p.oxw();p.xp6(2),p.Oqu(n.modalTitle),p.xp6(4),p.hij(" ",n.language["Are you sure you want to delete these selected Roles"],"?"),p.xp6(2),p.hij(" (",n.modalInfo,") "),p.xp6(3),p.Oqu(n.language.yes),p.xp6(2),p.Oqu(n.language.no)}}var le,ce=n(91704),de=((le=function(){function t(e,i,n,s,o,l,c,d){var u=this;a(this,t),this.location=e,this.commonOrgService=i,this.customTranslateService=n,this.addRoleService=s,this.router=o,this.sso=l,this.dialogService=c,this.titleService=d,this.isExpanded={},this.loader=!0,this.pageAvailable=!1,this.rolesAddForm="supportCloud",this.usersList=[],this.usersFiltered=[],this.addedUsersList=[],this.existingUserError=!1,this.usersDelSelected=[],this.usersDelSelectedChecked=!1,this.tableOptions={pagingType:"full_numbers",pageLength:5,dom:"tipr",ordering:!1,drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&ce(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.supportCloudRolesData=[],this.marketingCloudRolesData=[],this.smartHomeRoles=[],this.systemRoles=[],this.errorInfo="",this.successInfo="",this.warningInfo="",this.supportDataAvailable=!1,this.marketingDataAvailable=!1,this.smartDataAvailable=!1,this.systemDataAvailable=!1,this.dataAvailable=!1,this.dtTrigger=new r.xQ,this.isRerender=!1,this.allPermissions=[],this.allPrmsnfrmApi=[],this.MODULE="systemAdministration",this.usersCount=0,this.scopesToBeDisabled=["cloud.rbac.csc.qoe","cloud.rbac.csc.apps.arlo","cloud.rbac.csc.apps.servify","cloud.rbac.csc.apps.mycommunityiq","cloud.rbac.csc.apps.bark","cloud.rbac.csc.devices","cloud.rbac.csc.topology","cloud.rbac.csc.calloutcome.enforce"],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.scopeWriteAccess=!1;var g=this.router.url;this.ORG_ID=this.sso.getOrganizationID(g),this.MODULE=this.sso.getRedirectModule(g),this.sso.getScopes(),this.scopeWriteAccess=this.checkScope(),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){u.language=e,u.pageTitleCreator(),u.dataAvailable=!1,u.isRerender=!0,u.titleService.setTitle("".concat(u.language["Role detail"]," - ").concat("systemAdministration"===u.MODULE?u.language["System Administration"]:u.language.administration," - ").concat(u.language["Calix Cloud"])),u.renderUsersTable("language")}),this.frTable=this.customTranslateService.fr,this.rolesAddForm=sessionStorage.getItem("calixAdminAddRole"),this.editRoleId=sessionStorage.getItem("calixAdminAddRoleId"),this.commonOrgService.currentPageAdder("roleDetails"),this.getDatas(),this.pageTitleCreator(),this.titleService.setTitle("".concat(this.language["Role detail"]," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(t,[{key:"onClick",value:function(e){var t=e.target.className,i=e.target.localName;t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&this.tablePageChange()}},{key:"ngOnInit",value:function(){this.closeAlert(),this.tableLanguageOptions()}},{key:"checkScope",value:function(){var e=this.sso.getScopes();return!g.N.VALIDATE_SCOPE||!(!e||!e["cloud.admin.roles"]||-1===e["cloud.admin.roles"].indexOf("write"))}},{key:"ngOnDestroy",value:function(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.allPermsSubs&&this.allPermsSubs.unsubscribe(),this.usersCountSubs&&this.usersCountSubs.unsubscribe(),this.usersListSubs&&this.usersListSubs.unsubscribe(),this.roleGetSubs&&this.roleGetSubs.unsubscribe(),this.roleUpdateSubs&&this.roleUpdateSubs.unsubscribe()}},{key:"getDatas",value:function(){this.getRoleData(),this.getUserList()}},{key:"getRoleData",value:function(){var e=this;this.roleGetSubs=this.addRoleService.RoleData(this.editRoleId).subscribe(function(t){e.roleDatas=t,e.appType=t.apptype,e.processData(t),e.getAllPermissions(),e.roleName=t.name,e.roleDescription=null==t.description||null==t.description?"":t.description,e.addedUsersList=null!=t.users?e.changeUsersData(t.users):[],setTimeout(function(){e.renderUsersTable()},250)},function(t){e.pageErrorHandle(t),e.loader=!1,e.addedUsersList=[],setTimeout(function(){e.renderUsersTable()},250)})}},{key:"getAllPermissions",value:function(){var e=this;this.allPermsSubs=this.addRoleService.AllPemissionsData(this.appType).subscribe(function(t){e.allPrmsnfrmApi=t,e.allPermissionsDataProcess(t),setTimeout(function(){e.getSlctdParams(),"marketingCloud"==e.rolesAddForm&&ce(".oneLevelDisable").prop("disabled",!0)},1e3),e.loader=!1},function(t){e.pageErrorHandle(t),e.loader=!1})}},{key:"allPermissionsDataProcess",value:function(e){"supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?(this.allPermissions=this.commonOrgService.allSupportDataProcessV21(e,this.selectedPermissions),"marketingCloud"==this.rolesAddForm&&(this.allPermissions=this.allPermissions.map(function(e){return("Subscriber"==e.displayName||"Revenue"==e.displayName)&&(e.isSubscriber=!0),e}))):this.allPermissions=this.commonOrgService.allSupportDataProcess(e,this.selectedPermissions),this.allPermissions=this.disableScopeDoesntNeedWrite(this.allPermissions,1)}},{key:"disableScopeDoesntNeedWrite",value:function(e,t){var i=this;return e.forEach(function(e){var n=1==t?"":t;i.scopesToBeDisabled.includes(e.name)&&(e.disableScope=!0,e.readWrite=!1),i.scopeWriteAccess||(e.disableScope=!0),e.hasOwnProperty("permissions".concat(n))&&e["permissions".concat(n)]&&(e=i.disableScopeDoesntNeedWrite(e["permissions".concat(n)],t+1))}),e}},{key:"changeUsersData",value:function(e){var t=[];return e.forEach(function(e){e._id=e.userId,t.push(e)}),t}},{key:"getUserList",value:function(){var e=this;this.usersCountSubs=this.addRoleService.UsersCountByOrgId(this.ORG_ID).subscribe(function(t){e.usersCount=t,e.usersListSubs=e.addRoleService.UsersListByOrgId(e.ORG_ID,t).subscribe(function(t){e.usersList=t,e.usersList.length&&(e.selectedUsers=e.usersList[0])},function(t){e.pageErrorHandle(t)})},function(t){e.pageErrorHandle(t)})}},{key:"addUser",value:function(){this.warning=!1;var e=this.selectedUsers._id;if(this.addedUsersList.filter(function(t){return t._id===e}).length>0)return this.warningInfo="".concat(this.selectedUsers.username," - ").concat(this.language["User already added"]),void(this.warning=!0);this.addedUsersList.push(this.selectedUsers),this.isRerender=!0,this.renderUsersTable(),this.deleteUserCheckAll(!1),this.resetMultiDelete()}},{key:"deleteUser",value:function(e){this.deleteItem=e,this.modalTitle=this.language["Delete User"],this.modalInfo="".concat(e.username),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDeleteSecleted",value:function(){var e=this;this.closeModal();var t=this.deleteItem,i=[];this.addedUsersList.forEach(function(e){e._id!==t._id&&i.push(e)}),this.usersDelSelected=this.usersDelSelected.filter(function(e){return e._id!==t._id}),this.addedUsersList=i,this.dataAvailable=!1,this.isRerender=!0,this.renderUsersTable(),setTimeout(function(){e.deleteUserCheckAll(!1),e.resetMultiDelete()},200)}},{key:"deleteUserCheckAll",value:function(e){var t,i=0,n=this;e?ce('input[name^="user_del"]').each(function(){if(i>=5)return!1;ce(this).prop("checked",!0),t=ce(this).attr("id"),n.addedUsersList.forEach(function(e){e._id==t&&!n.usersDelSelected.includes(e)&&n.usersDelSelected.push(e)}),i++}):ce('input[name^="user_del"]').each(function(){if(i>=5)return!1;ce(this).prop("checked",!1),n.usersDelSelected=[],i++})}},{key:"deleteUserCheckOne",value:function(e,t){t?(this.usersDelSelected.push(e),this.usersDelSelected.length==ce('input[name^="user_del"]').length?(ce("#user-all-delete").prop("checked",!0),ce("#user-all-delete-span").hide()):ce("#user-all-delete-span").show()):(this.usersDelSelected=this.usersDelSelected.filter(function(t){return t._id!=e._id}),this.usersDelSelected.length?this.usersDelSelected.length!=ce('input[name^="user_del"]').length?(ce("#user-all-delete").prop("checked",!1),ce("#user-all-delete-span").show()):ce("#user-all-delete-span").hide():(ce("#user-all-delete").prop("checked",!1),ce("#user-all-delete-span").hide()))}},{key:"deleteMultiUsers",value:function(){this.modalTitle=this.language["Delete Multiple Users"];var e=[];this.usersDelSelected.forEach(function(t){e.push(t.username)}),this.modalInfo=e.join(", "),this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal)}},{key:"confirmMultiDeleteSecleted",value:function(){var e=this;this.closeModal(),this.addedUsersList=this.addedUsersList.filter(function(t){var i=t._id;return!e.usersDelSelected.some(function(e){return e._id==i})}),this.isRerender=!0,this.renderUsersTable(),setTimeout(function(){e.deleteUserCheckAll(!1),e.resetMultiDelete()},200)}},{key:"resetMultiDelete",value:function(){this.usersDelSelected=[],ce("#user-all-delete").prop("checked",!1),ce("#user-all-delete-span").hide()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"renderUsersTable",value:function(e){var t=this;this.setTableOptions(),e&&"language"==e?setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next()},50):this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},{key:"setTableOptions",value:function(){var e=this;this.tableOptions={pagingType:"full_numbers",pageLength:5,processing:!0,ordering:!1,dom:"tipr",drawCallback:function(t){t.aoData.length<=t._iDisplayLength&&ce(t.nTableWrapper).find("#".concat(t.sTableId,"_last")).addClass("disabled"),ce(".paginate_button.next:not(.disabled)").click(function(){}),setTimeout(function(){ce("#add-role-users_paginate").on("click",".paginate_button.next:not(.disabled)",function(){alert(ce(e).text())})},100)}},this.tableLanguageOptions(),this.dataAvailable=!0}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"pageTitleCreator",value:function(){this.pageTitle=this.language.configure}},{key:"addRole",value:function(){var e=this;if(this.closeAlert(),null==this.roleName||""==this.roleName||this.roleName.length&&""==this.roleName.trim())return this.errorInfo=this.language["Role name cannot be empty"],this.error=!0,void this.commonOrgService.pageScrollTop();var t=this.roleName.trim();if(""==t||t.length<2)return this.errorInfo=this.language["Invalid name"],this.error=!0,void this.commonOrgService.pageScrollTop();var i={},n=ce("#permissionsForm").serializeArray();ce.each(n,function(e,t){void 0!==i[t.name]?("array"!=jQuery.type(i[t.name])&&(i[t.name]=[i[t.name]]),i[t.name].push(t.value)):i[t.name]=t.value});var a=i.scopeName,s=[];if(a)if("string"==typeof a)s.push({scopeName:a,action:i[a]?"read,write":"read"});else for(var o=0;o<a.length;o++)s.push({scopeName:a[o],action:i[a[o]]?"read,write":"read"});var r={apptype:this.appType,name:this.roleName,description:this.roleDescription?this.roleDescription:"",orgDefault:!0,orgId:this.ORG_ID};this.loader=!0,this.roleUpdateSubs=this.addRoleService.RoleUpdate(r,this.editRoleId).subscribe(function(t){e.addOtherDetailsToRole(s)},function(t){e.pageErrorHandle(t),e.loader=!1})}},{key:"addOtherDetailsToRole",value:function(e){var t=[],i=[];this.addedUsersList.forEach(function(e){i.push(e._id)});var n,a=this.addRoleService.AddUsersByRoleId(i,this.roleDatas._id).pipe((0,d.U)(function(e){return e}),(0,u.K)(function(e){return(0,l.of)(e)}));t.push(a),n=e||[];var s=this.addRoleService.AddRolePermissions(n,this.roleDatas._id).pipe((0,d.U)(function(e){return e}),(0,u.K)(function(e){return(0,l.of)(e)}));t.push(s),this.combineLatest=(0,c.aj)(t),this.makeParallelAddRequest()}},{key:"makeParallelAddRequest",value:function(){var t=this;this.loader=!0,this.parallelReqSubscribtion=this.combineLatest.subscribe(function(i){if(t.loader=!1,i.length){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(null!=s&&null!=s.error)return void t.pageErrorHandle(s)}}catch(o){a.e(o)}finally{a.f()}}t.closeAlert(),t.successInfo=t.language["Users with roles data saved successfully"],t.success=!0,t.commonOrgService.pageScrollTop(),setTimeout(function(){t.goToOrgRoles()},1500)})}},{key:"goBack",value:function(){this.goToOrgRoles()}},{key:"processData",value:function(e){var t=e,i={};if(null!=t.permissions){for(var n=0;n<t.permissions.length;n++)t.permissions[n].implied||(i[t.permissions[n].scopeName]=t.permissions[n].action);this.selectedPermissions=i}else this.selectedPermissions=i}},{key:"levelOneChange",value:function(e,t,i){ce("."+e).prop("checked",t),t?(ce("."+e+"_action").prop("disabled",!1),ce("#"+e+"_parent").prop("checked",t)):(ce("#"+e+"_parent").prop("checked",t),ce("."+e+"_action").prop("checked",t),ce("."+e+"_action").prop("disabled",!0)),this.getSlctdParams(),ce(".oneLevelDisable").prop("disabled",!0),"cloud.rbac.csc.calloutcome"===i.name?this.levelOneAction(i,t):this.renderChild(i,t)}},{key:"levelTwoChange",value:function(e,t,i){var n,a,s,o,r=e._id;if(ce("."+r).prop("checked",t),t){if(ce("."+i+"_action").prop("disabled",e.disableScope||!1),ce("#"+i+"_parent_span").show(),"cloud.rbac.csc.calloutcome.enforce"===e.name){var l=null===(o=(null===(s=this.allPermissions.find(function(e){return"cloud.rbac.csc.calloutcome"===e.name}))||void 0===s?void 0:s.permissions).find(function(e){return"cloud.rbac.csc.calloutcome.createview"===e.name}))||void 0===o?void 0:o._id;document.getElementById("".concat(l,"_parent")).checked=!0,document.getElementById("".concat(l,"_action")).checked=!0,document.getElementById("".concat(i,"_action")).checked=!0}var c=!0;ce("."+i).each(function(){ce(this).prop("checked")||(c=!1)}),c&&(ce("#"+i+"_parent").prop("checked",t),ce("#"+i+"_parent_span").hide())}else{if("cloud.rbac.csc.calloutcome.createview"===e.name){var d=null===(a=(null===(n=this.allPermissions.find(function(e){return"cloud.rbac.csc.calloutcome"===e.name}))||void 0===n?void 0:n.permissions).find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===a?void 0:a._id;document.querySelector("#".concat(d,"_parent")).checked=!1}ce("#"+i+"_parent_span").show(),ce("#"+i+"_parent").prop("checked",t),ce("."+r+"_action").prop("disabled",!0)}this.getSlctdParams(),ce(".".concat(i)).length==ce(".".concat(i,":checked")).length?(ce("#".concat(i,"_parent")).prop("checked",!0).show(),ce("#".concat(i,"_parent_span")).hide()):ce(".".concat(i,":checked")).length>0?(ce("#".concat(i,"_parent")).prop("checked",!1).hide(),ce("#".concat(i,"_parent_span")).show()):(ce("#".concat(i,"_parent")).prop("checked",!1).show(),ce("#".concat(i,"_parent_span")).hide()),"cloud.rbac.csc.calloutcome.enforce"===e.name&&(document.getElementById("".concat(r,"_action")).disabled=!0)}},{key:"levelThreeChange",value:function(e,t,i,n){var a=e._id;if(ce("."+a).prop("checked",t),t){ce("."+a+"_action").prop("disabled",e.disableScope||!1),ce("#"+i+"_parent_span").show(),ce("#"+n+"_parent_span").show(),ce("#"+i+"_parent").hide();var s=!0;ce("."+i).each(function(){ce(this).prop("checked")||(s=!1)}),s&&(ce("#"+i+"_parent").prop("checked",t),ce("#"+i+"_parent_span").hide(),ce("#"+i+"_parent").show()),s=!0,ce("."+n).each(function(){ce(this).prop("checked")||(s=!1)}),s&&(ce("#"+n+"_parent").prop("checked",t),ce("#"+n+"_parent_span").hide(),ce("#"+i+"_parent_span").hide())}else ce("#"+i+"_parent").prop("checked",t),ce("#"+n+"_parent").prop("checked",t),ce("#"+n+"_parent_span").show(),ce("#"+a+"_action").prop("disabled",!0),ce("#"+i+"_parent_span").show(),ce("#"+i+"_parent").hide();this.getSlctdParams(),ce(".".concat(i)).length==ce(".".concat(i,":checked")).length?(ce("#".concat(i,"_parent")).prop("checked",!0).show(),ce("#".concat(i,"_parent_span")).hide()):ce(".".concat(i,":checked")).length>0?(ce("#".concat(i,"_parent")).prop("checked",!1).hide(),ce("#".concat(i,"_parent_span")).show()):(ce("#".concat(i,"_parent")).prop("checked",!1).show(),ce("#".concat(i,"_parent_span")).hide()),ce(".".concat(n)).length==ce(".".concat(n,":checked")).length?(ce("#".concat(n,"_parent")).prop("checked",!0).show(),ce("#".concat(n,"_parent_span")).hide()):ce(".".concat(n,":checked")).length>0?(ce("#".concat(n,"_parent")).prop("checked",!1).hide(),ce("#".concat(n,"_parent_span")).show()):(ce("#".concat(n,"_parent")).prop("checked",!1).show(),ce("#".concat(n,"_parent_span")).hide())}},{key:"levelFourChange",value:function(e,t,i,n,a){var s=e._id;if(t){ce("."+s+"_action").prop("disabled",e.disableScope||!1),ce("#"+n+"_parent_span").show(),ce("#"+a+"_parent_span").show(),ce("#"+n+"_parent").hide(),ce("#"+i+"_inner_parent").prop("checked",!0),ce("#"+i+"_inner_parent_span").show();var o=!0;ce("."+n).each(function(){ce(this).prop("checked")||(o=!1)}),o&&(ce("#"+n+"_parent").prop("checked",t),ce("#"+n+"_parent_span").hide(),ce("#"+n+"_parent").show()),o=!0,ce("."+i).each(function(){ce(this).prop("checked")||(o=!1)}),o&&(ce("#"+i+"_inner_parent").prop("checked",o),ce("#"+i+"_inner_parent_span").hide()),o=!0,ce("."+a).each(function(){ce(this).prop("checked")||(o=!1)}),o&&(ce("#"+a+"_parent").prop("checked",t),ce("#"+a+"_parent_span").hide(),ce("#"+n+"_parent_span").hide())}else{ce("#"+n+"_parent").prop("checked",t),ce("#"+a+"_parent").prop("checked",t),ce("#"+a+"_parent_span").show();var r=!0;ce("."+i).each(function(){ce(this).prop("checked")||(r=!1)}),r?(ce("#"+i+"_inner_parent_span").show(),ce("#"+i+"_inner_parent").prop("checked",r)):(ce("#"+i+"_inner_parent_span").hide(),ce("#"+i+"_inner_parent").prop("checked",r)),ce("#"+s+"_action").prop("disabled",!0),ce("#"+s+"_action").prop("checked",!1),ce("#"+n+"_parent_span").show(),ce("#"+n+"_parent").hide()}this.getSlctdParams(),ce(".".concat(s)).length==ce(".".concat(s,":checked")).length?(ce("#".concat(i,"_parent")).prop("checked",!0).show(),ce("#".concat(i,"_parent_span")).hide()):ce(".".concat(s,":checked")).length>0?(ce("#".concat(i,"_parent")).prop("checked",!1).hide(),ce("#".concat(i,"_parent_span")).show()):(ce("#".concat(i,"_parent")).prop("checked",!1).show(),ce("#".concat(i,"_parent_span")).hide()),ce(".".concat(n)).length==ce(".".concat(n,":checked")).length?(ce("#".concat(n,"_parent")).prop("checked",!0).show(),ce("#".concat(n,"_parent_span")).hide()):ce(".".concat(n,":checked")).length>0?(ce("#".concat(n,"_parent")).prop("checked",!1).hide(),ce("#".concat(n,"_parent_span")).show()):(ce("#".concat(n,"_parent")).prop("checked",!1).show(),ce("#".concat(n,"_parent_span")).hide()),ce(".".concat(a)).length==ce(".".concat(a,":checked")).length?(ce("#".concat(a,"_parent")).prop("checked",!0).show(),ce("#".concat(a,"_parent_span")).hide()):ce(".".concat(a,":checked")).length>0?(ce("#".concat(a,"_parent")).prop("checked",!1).hide(),ce("#".concat(a,"_parent_span")).show()):(ce("#".concat(a,"_parent")).prop("checked",!1).show(),ce("#".concat(a,"_parent_span")).hide())}},{key:"levelOneAction",value:function(e,t){var i,n,a;if(ce("."+e._id+"_action").not("[disabled]").prop("checked",t),(t&&ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"false"==ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded")||!t&&ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"true"==ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id),"cloud.rbac.csc.calloutcome"===e.name)if(t){var s=null===(a=null==e?void 0:e.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===a?void 0:a._id;document.querySelector("#".concat(s,"_parent")).checked=!0,document.querySelector("#".concat(null==e?void 0:e._id,"_parent")).checked=!0,document.querySelector("#".concat(null==e?void 0:e._id,"_parent_span")).style.display="none"}else{var o=null===(i=null==e?void 0:e.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===i?void 0:i._id;document.querySelector("#".concat(o,"_parent")).checked=!1,document.getElementById("".concat(e._id,"_action")).disabled=!0;var r=null===(n=null==e?void 0:e.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.createview"===e.name}))||void 0===n?void 0:n._id;document.getElementById("".concat(r,"_parent")).checked&&(document.querySelector("#".concat(null==e?void 0:e._id,"_parent")).checked=!1,document.querySelector("#".concat(null==e?void 0:e._id,"_parent_span")).style.display="inline")}}},{key:"levelTwoAction",value:function(e,t,i){var n;if(ce("."+e._id+"_action").not("[disabled]").prop("checked",t),ce(".".concat(i,"_action:not(.firstLevel)")).length==ce(".".concat(i,"_action:not(.firstLevel):checked")).length?ce("#".concat(i,"_action.firstLevel")).prop("checked",!0):ce("#".concat(i,"_action.firstLevel")).prop("checked",!1),(t&&ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"false"==ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded")||!t&&ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"true"==ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click(),!t){if("cloud.rbac.csc.calloutcome.createview"===e.name){var a=this.allPermissions.find(function(e){return"cloud.rbac.csc.calloutcome"===e.name}),s=null===(n=null==a?void 0:a.permissions.find(function(e){return"cloud.rbac.csc.calloutcome.enforce"===e.name}))||void 0===n?void 0:n._id;document.querySelector("#".concat(s,"_parent")).checked=!1,document.querySelector("#".concat(null==a?void 0:a._id,"_parent")).checked=!1,document.querySelector("#".concat(null==a?void 0:a._id,"_parent_span")).style.display="inline",document.getElementById("".concat(a._id,"_action")).disabled=!0}ce("#"+i+"_action").prop("checked",!1)}}},{key:"levelThreeAction",value:function(e,t,i,n){ce("."+e._id+"_action").not("[disabled]").prop("checked",t),ce(".".concat(i,"_action")).length==ce(".".concat(i,"_action:checked")).length?ce("#".concat(i,"_action")).prop("checked",!0):ce("#".concat(i,"_action")).prop("checked",!1),ce(".".concat(n,"_action:not(.firstLevel)")).length==ce(".".concat(n,"_action:not(.firstLevel):checked")).length?ce("#".concat(n,"_action.firstLevel")).prop("checked",!0):ce("#".concat(n,"_action.firstLevel")).prop("checked",!1),(t&&ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"false"==ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded")||!t&&ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).length&&"true"==ce('a[id^="collapse-btn-'.concat(e.displayName,'"]')).attr("aria-expanded"))&&document.getElementById("collapse-btn-"+e.displayName).click()}},{key:"levelFourAction",value:function(e,t,i,n){ce(".".concat(e,"_action")).length==ce(".".concat(e,"_action:checked")).length?ce("#".concat(t,"_action")).prop("checked",!0):ce("#".concat(t,"_action")).prop("checked",!1),ce(".".concat(i,"_action")).length==ce(".".concat(i,"_action:checked")).length?ce("#".concat(i,"_action")).prop("checked",!0):ce("#".concat(i,"_action")).prop("checked",!1),ce(".".concat(n,"_action:not(.firstLevel)")).length==ce(".".concat(n,"_action:not(.firstLevel):checked")).length?ce("#".concat(n,"_action.firstLevel")).prop("checked",!0):ce("#".concat(n,"_action.firstLevel")).prop("checked",!1)}},{key:"goToOrgRoles",value:function(){this.router.navigate(["".concat(this.MODULE,"/roles")])}},{key:"showCheckBox",value:function(e,t){ce("#"+e.target.id).hide();var i=e.target.id.split("_");this.levelOneChange(i[0],!0,t)}},{key:"closeAlertWarning",value:function(){this.warning=!1}},{key:"hideSearch",value:function(){setTimeout(function(){ce("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),ce("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},10)}},{key:"getSlctdParams",value:function(){var e=this,t={},i=ce("#permissionsForm").serializeArray();ce.each(i,function(e,i){void 0!==t[i.name]?("array"!=jQuery.type(t[i.name])&&(t[i.name]=[t[i.name]]),t[i.name].push(i.value)):t[i.name]=i.value});var n,a={};t.scopeName&&("object"!=typeof t.scopeName&&(t.scopeName=[t.scopeName]),t.scopeName.forEach(function(e){a[e]=e})),(n="supportCloud"==this.rolesAddForm||"marketingCloud"==this.rolesAddForm||"cco"==this.rolesAddForm?this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,a,!0):this.commonOrgService.getSelectedSubScopeNames(this.allPrmsnfrmApi,a)).scopes.forEach(function(t){var i,a=n.selectedData[t]?"(".concat(n.selectedData[t],")"):"";ce("#"+t+"_info").html(a);var s="true"==(null===(i=document.getElementById("".concat(t,"_action")))||void 0===i?void 0:i.getAttribute("noWriteApi"));ce("#"+t+"_parent").prop("checked",n.checkedScopes[t]),ce("#"+t+"_action").prop("disabled",!!s||!n.checkedScopes[t]),!n.checkedScopes[t]&&e.scopeWriteAccess&&ce("#"+t+"_action").prop("checked",n.checkedScopes[t])," "===n.selectedData[t]&&ce("#"+t+"_info").html(""),n.selectedData[t]&&!n.checkedScopes[t]?(ce("#"+t+"_parent_span").show(),n.scopeNames[t]&&n.scopeNames[t].split(".").length>3&&ce("#"+t+"_parent").hide()):ce("#"+t+"_parent_span").hide(),n.checkedScopes[t]&&(ce("#"+t+"_parent").show(),ce("#"+t+"_parent_span").hide())})}},{key:"showAllUserCheckBox",value:function(e){ce("#"+e.target.id).hide(),ce("#user-all-delete").prop("checked",!0),this.deleteUserCheckAll(!0)}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}},{key:"closeModal",value:function(){this.closeAlertWarning(),this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"tablePageChange",value:function(){var e=this;setTimeout(function(){ce("#user-all-delete-span").hide(),ce("#user-all-delete").prop("checked",!1),e.deleteUserCheckAll(!1)},100)}},{key:"expandCollapse",value:function(e){this.isExpanded.hasOwnProperty(e)?delete this.isExpanded[e]:this.isExpanded[e]=!0}},{key:"renderChild",value:function(e,t){var i=document.querySelector('a[id^="collapse-btn-'.concat(e.displayName,'"]'));(t&&i&&"false"===i.getAttribute("aria-expanded")||!t&&i&&"true"===i.getAttribute("aria-expanded"))&&i.click(),(t&&!this.isExpanded.hasOwnProperty(e._id)||!t&&this.isExpanded.hasOwnProperty(e._id))&&this.expandCollapse(e._id)}}]),t}()).\u0275fac=function(e){return new(e||le)(p.Y36(h.Ye),p.Y36(f.v),p.Y36(m.d),p.Y36(v.U),p.Y36(Z.F0),p.Y36(b.t6),p.Y36(A.FF),p.Y36(x.Dx))},le.\u0275cmp=p.Xpm({type:le,selectors:[["app-role-details"]],viewQuery:function(e,t){var i;1&e&&(p.Gf(C,7),p.Gf(y,7),p.Gf(s.G,5)),2&e&&(p.iGM(i=p.CRH())&&(t.deleteModal=i.first),p.iGM(i=p.CRH())&&(t.multiDeleteModal=i.first),p.iGM(i=p.CRH())&&(t.dtElement=i.first))},hostBindings:function(e,t){1&e&&p.NdJ("click",function(e){return t.onClick(e)})},decls:5,vars:1,consts:[["class","container position-relative",4,"ngIf"],["deleteModal",""],["multiDeleteModal",""],[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","my-3"],[1,"col-md-4"],[1,"ccl-title"],[1,"col-md-8","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"row","my-3"],[1,"ccl-form"],["for","first",1,"f-w-600"],[1,"error"],["type","text","name","roleName","autocomplete","new-password",1,"",3,"placeholder","disabled","ngModel","keyup","ngModelChange"],[1,"col-md-8","pr-0"],["for","last",1,"f-w-600"],["type"," text","name","roleDescription","autocomplete","new-password",1,"",3,"placeholder","disabled","ngModel","ngModelChange"],[1,"col-md-12","ccl-title"],[1,"col-md-12"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],["class","col-md-6 my-3 alert alert-warning  fade show",4,"ngIf"],[1,"col-md-4","offset-md-0"],[1,"form-group"],["bindLabel","username",3,"items","ngModel","clearable","ngModelOptions","placeholder","notFoundText","ngModelChange"],[1,"col-md-2","offset-md-0"],[1,"btn-default","primary","mr-2",3,"disabled","click"],[1,"row","my-2"],[1,"col-md-8"],[1,"text-right","flat-right"],["class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-8",3,"hidden"],["id","add-role-users","width","100%","datatable","",1,"table","table-sm","row-border","w-100","roles-datatable",3,"dtOptions","dtTrigger"],[1,"header-color"],["class","checkbox-column user-all",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-3","offset-md-9","text-right","pr-0"],["class","btn-default primary md-btn",3,"disabled","click",4,"ngIf"],[1,"btn-default","btn-dft","py-1","ml-2",3,"click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"d-inline-flex","align-items-center"],[1,"d-inline-flex","mr-2"],["src","../../../assets/img/ic_success-circle-outline.svg"],[1,""],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"checkbox-permission"],["type","checkbox","name","scopeName",3,"id","disabled","checked","value","change"],[1,"checkbox-ui","check-intermediate",2,"display","none",3,"id","click"],[1,"check-caption"],[3,"id"],[1,"box-of-permission","col-md-4",3,"ngClass"],["class","multi-collapse",3,"ngClass",4,"ngIf"],["role","button",1,"collapse-btn",3,"click"],["class","fas fa-plus-circle collapse-btn",4,"ngIf"],["class","fas fa-minus-circle",4,"ngIf"],[1,"fas","fa-plus-circle","collapse-btn"],[1,"fas","fa-minus-circle"],[1,"switch"],["type","checkbox","value","true",3,"id","checked","name","ngClass","disabled","change"],[1,"slider","round"],[3,"ngClass"],[1,"multi-collapse",3,"ngClass"],["class","level2Role",4,"ngFor","ngForOf"],[1,"level2Role"],[1,"custom-flex","custom-check-permission","ml-3"],[1,"box-of-permission","col-md-4"],["type","checkbox","value","true",3,"id","checked","name","disabled","change"],["class","fas fa-plus-circle",4,"ngIf"],[1,"fas","fa-plus-circle"],["class","level3Role",4,"ngFor","ngForOf"],[1,"level3Role"],[1,"custom-flex","custom-check-permission","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-md-6","my-3","alert","alert-warning","fade","show"],[3,"innerHtml"],[1,"btn-default","primary","px-3","mx-3",3,"click"],[1,"checkbox-column","user-all"],["type","checkbox","name","websitecheck","id","user-all-delete",3,"checked","disabled","click"],["id","user-all-delete-span",1,"checkbox-ui",2,"display","none",3,"click"],["class","checkbox-column",4,"ngIf"],["class","actions",4,"ngIf"],[1,"checkbox-column"],["type","checkbox",3,"id","name","checked","value","disabled","click"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","pointer",3,"title","click"],["colspan","5",1,"no-data-available"],[1,"btn-default","primary","md-btn",3,"disabled","click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(p.YNc(0,se,66,37,"div",0),p.YNc(1,oe,14,5,"ng-template",null,1,p.W1O),p.YNc(3,re,14,5,"ng-template",null,2,p.W1O)),2&e&&p.Q6J("ngIf",t.pageAvailable)},directives:[h.O5,T.Fj,T.JJ,T.On,T._Y,T.JL,T.F,h.sg,_.w9,s.G,h.mk],styles:['table.roles-addtable td.dataTables_empty{display:none}.back-link-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   u[_ngcontent-%COMP%]{font-size:13px}.box-of-permission[_ngcontent-%COMP%]:first-child{border-right:.5px solid #dddddd}.box-of-permission[_ngcontent-%COMP%]{padding:8px;border-top:.5px solid #dddddd;vertical-align:middle;font-size:13px!important}.fa-plus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.fa-minus-circle[_ngcontent-%COMP%]{font-size:18px;color:#0279ff}.checkbox-ui[_ngcontent-%COMP%]:before{content:"";display:block;width:7px;height:0;border:solid #ffffff;border-width:0 2px 2px 0;transform:rotate(0);position:absolute;left:-14px;top:0px!important}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px;height:13px}a[aria-expanded=true][_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{display:none}a[aria-expanded=false][_ngcontent-%COMP%]   .fa-minus-circle[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}.switch[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]:disabled + .slider[_ngcontent-%COMP%]{cursor:not-allowed}@media only screen and (max-width: 425px){.add-user-btn[_ngcontent-%COMP%]{margin-top:20px}}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:22px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;right:2px;bottom:2px;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0279ff}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #0279ff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(16px)}.slider.round[_ngcontent-%COMP%]{border-radius:18px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}input[type=checkbox][_ngcontent-%COMP%]{border:1px solid #ccc!important;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.custom-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.emptyRowSwitch[_ngcontent-%COMP%]{height:45px}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px!important;height:13px!important}.checkbox-permission[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;margin-top:3.5px}  table.roles-datatable td.dataTables_empty{display:none}.user-all[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px;height:13px}.noWriteApi[_ngcontent-%COMP%]{opacity:.5}input[type=checkbox][_ngcontent-%COMP%] + .check-intermediate[_ngcontent-%COMP%]{left:0px!important;margin-top:2px!important}.checkbox-permission[_ngcontent-%COMP%]{position:relative}.checkbox-permission[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute}.checkbox-permission[_ngcontent-%COMP%]   .check-intermediate[_ngcontent-%COMP%]{position:absolute!important}.check-intermediate[_ngcontent-%COMP%] + span.check-caption[_ngcontent-%COMP%]{margin-left:18px}.custom-check-permission[_ngcontent-%COMP%]   .check-intermediate[_ngcontent-%COMP%] + span.check-caption[_ngcontent-%COMP%]{margin-left:8px}span#user-all-delete-span[_ngcontent-%COMP%]{top:0px!important}']}),le)},83909:function(e,i,n){n.d(i,{y:function(){return be}});var s=n(25917),r=n(9112),l=n(35758),c=n(92340),d=n(88002),u=n(5304),g=n(37716),p=n(49342),h=n(39895),f=n(53668),m=n(89097),v=n(12664),Z=n(7450),b=n(39075),A=n(38583),x=n(23771),T=["deleteModal"],_=["multiDeleteModal"];function C(e,t){if(1&e&&(g.TgZ(0,"div",18),g.TgZ(1,"div",19),g.TgZ(2,"div",20),g.TgZ(3,"span",21),g._uU(4),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(4),g.Oqu(i.language.Loading)}}function y(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",22),g.TgZ(1,"span",23),g._UZ(2,"img",24),g.qZA(),g.TgZ(3,"button",25),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).closeAlert()}),g._UZ(4,"span"),g.qZA(),g._UZ(5,"div",26),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(5),g.Q6J("innerHtml",n.errorInfo,g.oJD)}}function k(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",27),g.TgZ(1,"button",25),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).closeAlert()}),g._UZ(2,"span"),g.qZA(),g.TgZ(3,"div",28),g.TgZ(4,"span",29),g._UZ(5,"img",30),g.qZA(),g._UZ(6,"div",26),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(6),g.Q6J("innerHtml",n.successInfo,g.oJD)}}function q(e,t){if(1&e&&(g.TgZ(0,"div",16),g.TgZ(1,"div",17),g._uU(2),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(2),g.hij("",i.language.supportcloudroles," ")}}function w(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",36),g.NdJ("click",function(){return g.CHM(i),g.oxw(3).deleteMultiRoles("supportCloud")}),g._uU(1),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Oqu(n.language.delete)}}function O(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",31),g.TgZ(1,"div",32),g.TgZ(2,"div",33),g.YNc(3,w,2,1,"button",34),g.TgZ(4,"button",35),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).addRole("supportCloud")}),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(3),g.Q6J("ngIf",0!=n.supportCloudDeletes.length),g.xp6(2),g.Oqu(n.language.addnewrole)}}function S(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"i",52),g.NdJ("click",function(){g.CHM(i);var e=g.oxw().$implicit;return g.oxw(3).roleDelete(e)}),g.qZA()}if(2&e){var n=g.oxw(4);g.s9C("title",n.language.delete)}}function M(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",47),g.TgZ(2,"input",48),g.NdJ("change",function(e){var t=g.CHM(i).$implicit;return g.oxw(3).supportCloudCheckOne(t,e.target.checked)}),g.qZA(),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td",49),g.TgZ(8,"i",50),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw(3).gotoRoleDetail(e,"supportCloud")}),g.qZA(),g.YNc(9,S,1,1,"i",51),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,a=g.oxw(3);g.xp6(2),g.MGl("name","support_del_",n._id,""),g.s9C("value",n.roles),g.s9C("id",n._id),g.Q6J("checked",a.supportCloudChecked)("disabled",!a.scopeWriteAccess),g.xp6(2),g.Oqu(n.name),g.xp6(2),g.Oqu(n.description||""),g.xp6(2),g.s9C("title",a.language.Edit),g.xp6(1),g.Q6J("ngIf",a.scopeWriteAccess)}}function U(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",37),g.TgZ(1,"table",38),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g.TgZ(4,"th",40),g.TgZ(5,"input",41),g.NdJ("click",function(e){return g.CHM(i),g.oxw(2).supportCloudCheckall(e.target.checked)}),g.qZA(),g.TgZ(6,"span",42),g.NdJ("click",function(e){return g.CHM(i),g.oxw(2).showAllUserCheckBox(e,"supportCloud")}),g.qZA(),g.qZA(),g.TgZ(7,"th",43),g._uU(8),g.qZA(),g.TgZ(9,"th",44),g._uU(10),g.qZA(),g.TgZ(11,"th",45),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,M,10,9,"tr",46),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(1),g.Q6J("dtOptions",n.dtOptions),g.xp6(4),g.Q6J("disabled",0==(null==n.supportCloudRolesData?null:n.supportCloudRolesData.length)||!n.scopeWriteAccess),g.xp6(3),g.Oqu(n.language.roles),g.xp6(2),g.Oqu(n.language.Decription),g.xp6(2),g.Oqu(n.language.Action),g.xp6(2),g.Q6J("ngForOf",n.supportCloudRolesData)}}function D(e,t){if(1&e&&(g.TgZ(0,"div",16),g.TgZ(1,"div",17),g._uU(2),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(2),g.Oqu(i.language.marketingcloudroles)}}function N(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",56),g.NdJ("click",function(){return g.CHM(i),g.oxw(3).deleteMultiRoles("marketingCloud")}),g._uU(1),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Oqu(n.language.delete)}}function I(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",53),g.TgZ(1,"div",32),g.TgZ(2,"div",33),g.YNc(3,N,2,1,"button",54),g.TgZ(4,"button",55),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).addRole("marketingCloud")}),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(3),g.Q6J("ngIf",0!=n.marketingCloudDeletes.length),g.xp6(2),g.Oqu(n.language.addnewrole)}}function E(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"i",62),g.NdJ("click",function(){g.CHM(i);var e=g.oxw().$implicit;return g.oxw(3).roleDelete(e)}),g.qZA()}if(2&e){var n=g.oxw(4);g.s9C("title",n.language.delete)}}function F(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",47),g.TgZ(2,"input",48),g.NdJ("change",function(e){var t=g.CHM(i).$implicit;return g.oxw(3).marketingCloudCheckedOne(t,e.target.checked)}),g.qZA(),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td",49),g.TgZ(8,"i",60),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw(3).gotoRoleDetail(e,"marketingCloud")}),g.qZA(),g.YNc(9,E,1,1,"i",61),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,a=g.oxw(3);g.xp6(2),g.MGl("name","marketing_del_",n._id,""),g.s9C("value",n.roles),g.s9C("id",n._id),g.Q6J("checked",a.marketingCloudChecked)("disabled",!a.scopeWriteAccess),g.xp6(2),g.Oqu(n.name),g.xp6(2),g.Oqu(n.description||""),g.xp6(2),g.s9C("title",a.language.Edit),g.xp6(1),g.Q6J("ngIf",a.scopeWriteAccess)}}function P(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",37),g.TgZ(1,"table",57),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g.TgZ(4,"th",40),g.TgZ(5,"input",58),g.NdJ("click",function(e){return g.CHM(i),g.oxw(2).marketingCloudCheckedAll(e.target.checked)}),g.qZA(),g.TgZ(6,"span",59),g.NdJ("click",function(e){return g.CHM(i),g.oxw(2).showAllUserCheckBox(e,"marketingCloud")}),g.qZA(),g.qZA(),g.TgZ(7,"th",43),g._uU(8),g.qZA(),g.TgZ(9,"th",44),g._uU(10),g.qZA(),g.TgZ(11,"th",45),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,F,10,9,"tr",46),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(1),g.Q6J("dtOptions",n.dtOptions),g.xp6(4),g.Q6J("disabled",0==(null==n.marketingCloudRolesData?null:n.marketingCloudRolesData.length)||!n.scopeWriteAccess),g.xp6(3),g.Oqu(n.language.roles),g.xp6(2),g.Oqu(n.language.Decription),g.xp6(2),g.Oqu(n.language.Action),g.xp6(2),g.Q6J("ngForOf",n.marketingCloudRolesData)}}function L(e,t){if(1&e&&(g.TgZ(0,"div",16),g.TgZ(1,"div",17),g._uU(2),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(2),g.hij(" ",i.language.smarthome," ")}}function J(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",65),g.NdJ("click",function(){return g.CHM(i),g.oxw(3).deleteMultiRoles("smartHome")}),g._uU(1),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Oqu(n.language.delete)}}function R(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",13),g.TgZ(1,"div",32),g.TgZ(2,"div",33),g.YNc(3,J,2,1,"button",63),g.TgZ(4,"button",64),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).addRole("smartHome")}),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(3),g.Q6J("ngIf",0!=n.smartHomeDeletes.length),g.xp6(2),g.Oqu(n.language.addnewrole)}}function H(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"i",72),g.NdJ("click",function(){g.CHM(i);var e=g.oxw().$implicit;return g.oxw(4).roleDelete(e)}),g.qZA()}if(2&e){var n=g.oxw(5);g.s9C("title",n.language.delete)}}function Y(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",47),g.TgZ(2,"input",69),g.NdJ("click",function(e){var t=g.CHM(i).$implicit;return g.oxw(4).smartHomeCheckedOne(t,e.target.checked)}),g.qZA(),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td",49),g.TgZ(8,"i",70),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw(4).gotoRoleDetail(e,"smartHome")}),g.qZA(),g.YNc(9,H,1,1,"i",71),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,a=g.oxw(4);g.xp6(2),g.MGl("name","smarthome_del_",n._id,""),g.s9C("id",n._id),g.s9C("value",n.roles),g.Q6J("checked",a.smartHomeChecked)("disabled",!a.scopeWriteAccess),g.xp6(2),g.Oqu(n.name),g.xp6(2),g.Oqu(n.description||""),g.xp6(2),g.s9C("title",a.language.Edit),g.xp6(1),g.Q6J("ngIf",a.scopeWriteAccess)}}function Q(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",37),g.TgZ(1,"table",66),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g.TgZ(4,"th",40),g.TgZ(5,"input",67),g.NdJ("click",function(e){return g.CHM(i),g.oxw(3).smartHomeCheckedAll(e.target.checked)}),g.qZA(),g.TgZ(6,"span",68),g.NdJ("click",function(e){return g.CHM(i),g.oxw(3).showAllUserCheckBox(e,"smartHome")}),g.qZA(),g.qZA(),g.TgZ(7,"th",43),g._uU(8),g.qZA(),g.TgZ(9,"th",44),g._uU(10),g.qZA(),g.TgZ(11,"th",45),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,Y,10,9,"tr",46),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Q6J("dtOptions",n.dtOptions),g.xp6(4),g.Q6J("disabled",0==(null==n.smartHomeRoles?null:n.smartHomeRoles.length)||!n.scopeWriteAccess),g.xp6(3),g.Oqu(n.language.roles),g.xp6(2),g.Oqu(n.language.Decription),g.xp6(2),g.Oqu(n.language.Action),g.xp6(2),g.Q6J("ngForOf",n.smartHomeRoles)}}function z(e,t){if(1&e&&(g.TgZ(0,"div",13),g.YNc(1,Q,15,6,"div",11),g.qZA()),2&e){var i=g.oxw(2);g.xp6(1),g.Q6J("ngIf",i.dataAvailable)}}function B(e,t){if(1&e&&(g.TgZ(0,"div",16),g.TgZ(1,"div",17),g._uU(2),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(2),g.hij(" ",i.language.faRoles," ")}}function j(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",75),g.NdJ("click",function(){return g.CHM(i),g.oxw(3).deleteMultiRoles("fa")}),g._uU(1),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Oqu(n.language.delete)}}function V(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",13),g.TgZ(1,"div",32),g.TgZ(2,"div",33),g.YNc(3,j,2,1,"button",73),g.TgZ(4,"button",74),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).addRole("fa")}),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(3),g.Q6J("ngIf",0!=n.faDeletes.length),g.xp6(2),g.Oqu(n.language.addnewrole)}}function G(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"i",83),g.NdJ("click",function(){g.CHM(i);var e=g.oxw().$implicit;return g.oxw(4).roleDelete(e)}),g.qZA()}if(2&e){var n=g.oxw(5);g.s9C("title",n.language.delete)}}function W(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",47),g.TgZ(2,"input",80),g.NdJ("click",function(e){var t=g.CHM(i).$implicit;return g.oxw(4).faCheckedOne(t,e.target.checked)}),g.qZA(),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td",49),g.TgZ(8,"i",81),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw(4).gotoRoleDetail(e,"fa")}),g.qZA(),g.YNc(9,G,1,1,"i",82),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,a=g.oxw(4);g.xp6(2),g.MGl("name","fa_del_",n._id,""),g.s9C("id",n._id),g.s9C("value",n.roles),g.Q6J("checked",a.faChecked)("disabled",!a.scopeWriteAccess),g.xp6(2),g.Oqu(n.name),g.xp6(2),g.Oqu(n.description||""),g.xp6(2),g.s9C("title",a.language.Edit),g.xp6(1),g.Q6J("ngIf",a.scopeWriteAccess)}}function X(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",37),g.TgZ(1,"table",77),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g.TgZ(4,"th",40),g.TgZ(5,"input",78),g.NdJ("click",function(e){return g.CHM(i),g.oxw(3).faCheckedAll(e.target.checked)}),g.qZA(),g.TgZ(6,"span",79),g.NdJ("click",function(e){return g.CHM(i),g.oxw(3).showAllUserCheckBox(e,"fa")}),g.qZA(),g.qZA(),g.TgZ(7,"th",43),g._uU(8),g.qZA(),g.TgZ(9,"th",44),g._uU(10),g.qZA(),g.TgZ(11,"th",45),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,W,10,9,"tr",46),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Q6J("dtOptions",n.dtOptions),g.xp6(4),g.Q6J("disabled",0==(null==n.faRoles?null:n.faRoles.length)||!n.scopeWriteAccess),g.xp6(3),g.Oqu(n.language.roles),g.xp6(2),g.Oqu(n.language.Decription),g.xp6(2),g.Oqu(n.language.Action),g.xp6(2),g.Q6J("ngForOf",n.faRoles)}}function K(e,t){if(1&e&&(g.TgZ(0,"div",76),g.YNc(1,X,15,6,"div",11),g.qZA()),2&e){var i=g.oxw(2);g.xp6(1),g.Q6J("ngIf",i.dataAvailable)}}function ee(e,t){if(1&e&&(g.TgZ(0,"div",16),g.TgZ(1,"div",17),g._uU(2),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(2),g.hij(" ",i.language.cco_roles," ")}}function te(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",86),g.NdJ("click",function(){return g.CHM(i),g.oxw(3).deleteMultiRoles("cco")}),g._uU(1),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Oqu(n.language.delete)}}function ie(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",13),g.TgZ(1,"div",32),g.TgZ(2,"div",33),g.YNc(3,te,2,1,"button",84),g.TgZ(4,"button",85),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).addRole("cco")}),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(3),g.Q6J("ngIf",0!=n.ccoDeletes.length),g.xp6(2),g.Oqu(n.language.addnewrole)}}function ne(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"i",92),g.NdJ("click",function(){g.CHM(i);var e=g.oxw().$implicit;return g.oxw(4).roleDelete(e)}),g.qZA()}if(2&e){var n=g.oxw(5);g.s9C("title",n.language.delete)}}function ae(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",47),g.TgZ(2,"input",80),g.NdJ("click",function(e){var t=g.CHM(i).$implicit;return g.oxw(4).ccoCheckedOne(t,e.target.checked)}),g.qZA(),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td",49),g.TgZ(8,"i",90),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw(4).gotoRoleDetail(e,"cco")}),g.qZA(),g.YNc(9,ne,1,1,"i",91),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,a=g.oxw(4);g.xp6(2),g.MGl("name","cco_del_",n._id,""),g.s9C("id",n._id),g.s9C("value",n.roles),g.Q6J("checked",a.ccoChecked)("disabled",!a.scopeWriteAccess),g.xp6(2),g.Oqu(n.name),g.xp6(2),g.Oqu(n.description||""),g.xp6(2),g.s9C("title",a.language.Edit),g.xp6(1),g.Q6J("ngIf",a.scopeWriteAccess)}}function se(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",37),g.TgZ(1,"table",87),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g.TgZ(4,"th",40),g.TgZ(5,"input",88),g.NdJ("click",function(e){return g.CHM(i),g.oxw(3).ccoCheckedAll(e.target.checked)}),g.qZA(),g.TgZ(6,"span",89),g.NdJ("click",function(e){return g.CHM(i),g.oxw(3).showAllUserCheckBox(e,"cco")}),g.qZA(),g.qZA(),g.TgZ(7,"th",43),g._uU(8),g.qZA(),g.TgZ(9,"th",44),g._uU(10),g.qZA(),g.TgZ(11,"th",45),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,ae,10,9,"tr",46),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Q6J("dtOptions",n.dtOptions),g.xp6(4),g.Q6J("disabled",0==(null==n.ccoRoles?null:n.ccoRoles.length)||!n.scopeWriteAccess),g.xp6(3),g.Oqu(n.language.roles),g.xp6(2),g.Oqu(n.language.Decription),g.xp6(2),g.Oqu(n.language.Action),g.xp6(2),g.Q6J("ngForOf",n.ccoRoles)}}function oe(e,t){if(1&e&&(g.TgZ(0,"div",76),g.YNc(1,se,15,6,"div",11),g.qZA()),2&e){var i=g.oxw(2);g.xp6(1),g.Q6J("ngIf",i.dataAvailable)}}function re(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"button",95),g.NdJ("click",function(){return g.CHM(i),g.oxw(3).deleteMultiRoles("foundation")}),g._uU(1),g.qZA()}if(2&e){var n=g.oxw(3);g.xp6(1),g.Oqu(n.language.delete)}}function le(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",13),g.TgZ(1,"div",32),g.TgZ(2,"div",33),g.YNc(3,re,2,1,"button",93),g.TgZ(4,"button",94),g.NdJ("click",function(){return g.CHM(i),g.oxw(2).addRole("foundation")}),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(3),g.Q6J("ngIf",0!=n.foundationDeletes.length),g.xp6(2),g.Oqu(n.language.addnewrole)}}function ce(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"i",101),g.NdJ("click",function(){g.CHM(i);var e=g.oxw().$implicit;return g.oxw(3).roleDelete(e)}),g.qZA()}if(2&e){var n=g.oxw(4);g.s9C("title",n.language.delete)}}function de(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",47),g.TgZ(2,"input",69),g.NdJ("click",function(e){var t=g.CHM(i).$implicit;return g.oxw(3).foundationCheckedOne(t,e.target.checked)}),g.qZA(),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td",49),g.TgZ(8,"i",99),g.NdJ("click",function(){var e=g.CHM(i).$implicit;return g.oxw(3).gotoRoleDetail(e,"foundation")}),g.qZA(),g.YNc(9,ce,1,1,"i",100),g.qZA(),g.qZA()}if(2&e){var n=t.$implicit,a=g.oxw(3);g.xp6(2),g.MGl("name","foundation_del_",n._id,""),g.s9C("id",n._id),g.s9C("value",n.roles),g.Q6J("checked",a.foundationChecked)("disabled",!a.scopeWriteAccess),g.xp6(2),g.Oqu(n.name),g.xp6(2),g.Oqu(n.description||""),g.xp6(3),g.Q6J("ngIf",a.scopeWriteAccess)}}function ue(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",37),g.TgZ(1,"table",96),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g.TgZ(4,"th",40),g.TgZ(5,"input",97),g.NdJ("click",function(e){return g.CHM(i),g.oxw(2).foundationCheckedAll(e.target.checked)}),g.qZA(),g.TgZ(6,"span",98),g.NdJ("click",function(e){return g.CHM(i),g.oxw(2).showAllUserCheckBox(e,"foundation")}),g.qZA(),g.qZA(),g.TgZ(7,"th",43),g._uU(8),g.qZA(),g.TgZ(9,"th",44),g._uU(10),g.qZA(),g.TgZ(11,"th",45),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"tbody"),g.YNc(14,de,10,8,"tr",46),g.qZA(),g.qZA(),g.qZA()}if(2&e){var n=g.oxw(2);g.xp6(1),g.Q6J("dtOptions",n.dtOptions),g.xp6(4),g.Q6J("disabled",0==(null==n.foundationRoles?null:n.foundationRoles.length)||!n.scopeWriteAccess),g.xp6(3),g.Oqu(n.language.roles),g.xp6(2),g.Oqu(n.language.Decription),g.xp6(2),g.Oqu(n.language.Action),g.xp6(2),g.Q6J("ngForOf",n.foundationRoles)}}function ge(e,t){if(1&e&&(g.TgZ(0,"tr"),g._UZ(1,"td"),g.TgZ(2,"td"),g._uU(3),g.qZA(),g.TgZ(4,"td"),g._uU(5),g.qZA(),g.qZA()),2&e){var i=t.$implicit;g.xp6(3),g.Oqu(i.name),g.xp6(2),g.Oqu(i.description||"")}}function pe(e,t){if(1&e&&(g.TgZ(0,"div",37),g.TgZ(1,"table",102),g.TgZ(2,"thead",39),g.TgZ(3,"tr"),g._UZ(4,"th",103),g.TgZ(5,"th",43),g._uU(6),g.qZA(),g.TgZ(7,"th",104),g._uU(8),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"tbody"),g.YNc(10,ge,6,2,"tr",46),g.qZA(),g.qZA(),g.qZA()),2&e){var i=g.oxw(2);g.xp6(1),g.Q6J("dtOptions",i.dtOptions),g.xp6(5),g.Oqu(i.language.roles),g.xp6(2),g.Oqu(i.language.Decription),g.xp6(2),g.Q6J("ngForOf",i.systemRoles)}}function he(e,t){if(1&e&&(g.TgZ(0,"div",4),g.YNc(1,C,5,1,"div",5),g.YNc(2,y,6,1,"div",6),g.YNc(3,k,7,1,"div",7),g.YNc(4,q,3,1,"div",8),g.YNc(5,O,6,2,"div",9),g.TgZ(6,"div",10),g.YNc(7,U,15,6,"div",11),g.qZA(),g.YNc(8,D,3,1,"div",8),g.YNc(9,I,6,2,"div",12),g.TgZ(10,"div",13),g.YNc(11,P,15,6,"div",11),g.qZA(),g.YNc(12,L,3,1,"div",8),g.YNc(13,R,6,2,"div",14),g.YNc(14,z,2,1,"div",14),g.YNc(15,B,3,1,"div",8),g.YNc(16,V,6,2,"div",14),g.YNc(17,K,2,1,"div",15),g.YNc(18,ee,3,1,"div",8),g.YNc(19,ie,6,2,"div",14),g.YNc(20,oe,2,1,"div",15),g.TgZ(21,"div",16),g.TgZ(22,"div",17),g._uU(23),g.qZA(),g.qZA(),g.YNc(24,le,6,2,"div",14),g.TgZ(25,"div",13),g.YNc(26,ue,15,6,"div",11),g.qZA(),g.TgZ(27,"div",16),g.TgZ(28,"div",17),g._uU(29),g.qZA(),g.qZA(),g.TgZ(30,"div",13),g.YNc(31,pe,11,4,"div",11),g.qZA(),g.qZA()),2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",!i.dataAvailable),g.xp6(1),g.Q6J("ngIf",i.error),g.xp6(1),g.Q6J("ngIf",i.success),g.xp6(1),g.Q6J("ngIf",i.supportCloudShow),g.xp6(1),g.Q6J("ngIf",i.supportCloudShow&&i.scopeWriteAccess),g.xp6(1),g.Q6J("ngClass",i.tableDisplay?"row my-2 display-visible":"row my-2 visiblity-hidden"),g.xp6(1),g.Q6J("ngIf",i.dataAvailable),g.xp6(1),g.Q6J("ngIf",i.marketingCloudShow&&i.scopeWriteAccess),g.xp6(1),g.Q6J("ngIf",i.marketingCloudShow&&i.scopeWriteAccess),g.xp6(2),g.Q6J("ngIf",i.dataAvailable),g.xp6(1),g.Q6J("ngIf",i.smartHomeShow),g.xp6(1),g.Q6J("ngIf",i.smartHomeShow&&i.scopeWriteAccess),g.xp6(1),g.Q6J("ngIf",i.smartHomeShow),g.xp6(1),g.Q6J("ngIf",i.faShow),g.xp6(1),g.Q6J("ngIf",i.faShow&&i.scopeWriteAccess),g.xp6(1),g.Q6J("ngIf",!1),g.xp6(1),g.Q6J("ngIf",i.ccoRoleShow),g.xp6(1),g.Q6J("ngIf",i.ccoRoleShow&&i.scopeWriteAccess),g.xp6(1),g.Q6J("ngIf",i.ccoRoleShow),g.xp6(3),g.hij(" ",i.language.foundation_roles," "),g.xp6(1),g.Q6J("ngIf",i.foundationRoleShow&&i.scopeWriteAccess),g.xp6(2),g.Q6J("ngIf",i.dataAvailable),g.xp6(3),g.hij(" ",i.language.systemroles," "),g.xp6(2),g.Q6J("ngIf",i.dataAvailable)}}function fe(e,t){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"div",105),g.TgZ(2,"h1",106),g._uU(3,"Page under construction!"),g.qZA(),g.TgZ(4,"h4"),g._uU(5,"Will be available soon"),g.qZA(),g.qZA(),g.TgZ(6,"div",107),g.TgZ(7,"div",108),g._UZ(8,"img",109),g.qZA(),g.qZA(),g.qZA())}function me(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",110),g.TgZ(1,"h4",111),g._uU(2),g.qZA(),g.TgZ(3,"button",112),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeModal()}),g._UZ(4,"span",113),g.qZA(),g.qZA(),g.TgZ(5,"div",114),g._uU(6),g._UZ(7,"br"),g._uU(8),g.qZA(),g.TgZ(9,"div",115),g.TgZ(10,"button",116),g.NdJ("click",function(){return g.CHM(i),g.oxw().confirmDelete()}),g._uU(11),g.qZA(),g.TgZ(12,"button",117),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeModal()}),g._uU(13),g.qZA(),g.qZA()}if(2&e){var n=g.oxw();g.xp6(2),g.Oqu(n.modalTitle),g.xp6(4),g.hij(" ",n.language["Are you sure you want to delete this Role"],"?"),g.xp6(2),g.hij(" (",n.modalInfo,") "),g.xp6(3),g.Oqu(n.language.yes),g.xp6(2),g.Oqu(n.language.no)}}function ve(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"div",110),g.TgZ(1,"h4",111),g._uU(2),g.qZA(),g.TgZ(3,"button",112),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeModal()}),g._UZ(4,"span",113),g.qZA(),g.qZA(),g.TgZ(5,"div",114),g._uU(6),g._UZ(7,"br"),g._uU(8),g.qZA(),g.TgZ(9,"div",115),g.TgZ(10,"button",116),g.NdJ("click",function(){return g.CHM(i),g.oxw().confirmDeleteSecleted()}),g._uU(11),g.qZA(),g.TgZ(12,"button",117),g.NdJ("click",function(){return g.CHM(i),g.oxw().closeModal()}),g._uU(13),g.qZA(),g.qZA()}if(2&e){var n=g.oxw();g.xp6(2),g.Oqu(n.modalTitle),g.xp6(4),g.hij(" ",n.language["Are you sure you want to delete these selected Roles"],"?"),g.xp6(2),g.hij(" (",n.modalInfo,") "),g.xp6(3),g.Oqu(n.language.yes),g.xp6(2),g.Oqu(n.language.no)}}var Ze,be=((Ze=function(){function e(t,i,n,s,o,r,l){var c=this;a(this,e),this.commonOrgService=t,this.router=i,this.organizationApiService=n,this.sso=s,this.dialogService=o,this.translateService=r,this.titleService=l,this.tableDisplay=!1,this.pageAvailable=!1,this.supportCloudRolesData=[],this.marketingCloudRolesData=[],this.smartHomeRoles=[],this.faRoles=[],this.systemRoles=[],this.foundationRoles=[],this.ccoRoles=[],this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthChange:!1,ordering:!1,searching:!1,drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.errorInfo="",this.successInfo="",this.supportCloudChecked=!1,this.supportCloudDataSelcted=[],this.marketingCloudChecked=!1,this.marketingCloudCheckedSelected=[],this.smartHomeChecked=!1,this.smartHomeCheckedSelected=[],this.faChecked=!1,this.faSelected=[],this.ccoChecked=!1,this.ccoSelected=[],this.foundationChecked=!1,this.foundationSelected=[],this.dataAvailable=!1,this.supportCloudDeletes=[],this.marketingCloudDeletes=[],this.smartHomeDeletes=[],this.faDeletes=[],this.deleteRoles=[],this.ccoDeletes=[],this.foundationDeletes=[],this.MODULE="calixAdmin",this.supportCloudShow=!1,this.marketingCloudShow=!1,this.smartHomeShow=!1,this.faShow=!1,this.pageReady=!1,this.ccoRoleShow=!1,this.foundationRoleShow=!1,this.scopeWriteAccess=!1;var d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.MODULE=this.sso.getRedirectModule(d),this.sso.getScopes(),this.scopeWriteAccess=this.checkScope(),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){c.language=e,c.dataAvailable=!1,c.setTableOptions("language"),c.titleService.setTitle("".concat(c.language.roles," - ").concat("systemAdministration"===c.MODULE?c.language["System Administration"]:c.language.administration," - ").concat(c.language["Calix Cloud"]))}),this.commonOrgService.currentPageAdder("roles"),this.getData(),this.frTable=this.translateService.fr,this.titleService.setTitle("".concat(this.language.roles," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"onClick",value:function(e){var t=e.target.className,i=e.target.localName,n="";"a"==i&&(n=e.target.attributes["aria-controls"].value),t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"supportCloud-table"==n?this.supportTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"marketingCloud-table"==n?this.marketingTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"smartHome-table"==n?this.smartHomeTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"fa-table"==n?this.faTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"cco-table"==n?this.ccoTablePageChange():t.indexOf("paginate_button")>-1&&-1==t.indexOf("disabled")&&-1==t.indexOf("current")&&"a"==i&&"foundation-table"==n&&this.foundationTablePageChange()}},{key:"ngOnInit",value:function(){this.showConstructionPage=!c.N.VALIDATE_SCOPE,this.closeAlert(),this.tableLanguageOptions()}},{key:"ngOnDestroy",value:function(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.delRoleSubs&&this.delRoleSubs.unsubscribe()}},{key:"getData",value:function(){var e=this,t=[];["".concat(c.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/roles")].forEach(function(i){var n=e.organizationApiService.callRestApi(i).pipe((0,d.U)(function(e){return e}),(0,u.K)(function(e){return(0,s.of)(e)}));t.push(n)}),this.combineLatest=(0,r.aj)(t),this.makeParallelRequest()}},{key:"makeParallelRequest",value:function(){var e=this;this.parallelReqSubscribtion=this.combineLatest.subscribe(function(t){var i=t[0];if(e.showRoles(),e.systemRoles=[],e.marketingCloudRolesData=[],e.supportCloudRolesData=[],e.smartHomeRoles=[],e.faRoles=[],e.foundationRoles=[],e.ccoRoles=[],e.resetAllDeletes(),null!=i&&null!=i.error)return e.pageErrorHandle(i),void(e.dataAvailable=!0);i.forEach(function(t){0==t.apptype?e.systemRoles.push(t):118==t.apptype?e.supportCloudRolesData.push(t):119==t.apptype?e.marketingCloudRolesData.push(t):"shad"==t.apptype?e.smartHomeRoles.push(t):102==t.apptype?e.ccoRoles.push(t):200==t.apptype&&e.foundationRoles.push(t)}),e.dataAvailable=!0,setTimeout(function(){e.tableDisplay=!0},100)})}},{key:"setTableOptions",value:function(e){var t=this;this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthChange:!1,ordering:!1,searching:!1,drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.tableLanguageOptions(e),e||setTimeout(function(){t.dataAvailable=!0},200)}},{key:"roleDelete",value:function(e){this.deleteData=e,this.modalTitle=this.language["Delete Role"],this.modalInfo="".concat(e.name),this.openDeleteModal()}},{key:"confirmDelete",value:function(){var e=this;this.closeModal(),this.delRoleSubs=this.organizationApiService.RoleDelete(this.deleteData._id).subscribe(function(t){e.dataAvailable=!1,e.closeAlert(),e.getData()},function(t){e.pageErrorHandle(t),e.dataAvailable=!0})}},{key:"someClickHandler",value:function(e){}},{key:"addRole",value:function(e){sessionStorage.setItem("calixAdminAddRole",e),this.router.navigate(["".concat(this.MODULE,"/addRole")])}},{key:"gotoRoleDetail",value:function(e,t){sessionStorage.setItem("calixAdminAddRole",t),sessionStorage.setItem("calixAdminAddRoleId",e._id),this.router.navigate(["".concat(this.MODULE,"/roleDetails")])}},{key:"supportCloudCheckall",value:function(e){var t,i=0,n=this;e?$('input[name^="support_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!0),t=$(this).attr("id"),n.supportCloudRolesData.forEach(function(e){e._id==t&&n.supportCloudDeletes.push(e)}),i++}):$('input[name^="support_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!1),n.supportCloudDeletes=[],i++})}},{key:"supportCloudCheckOne",value:function(e,t){if(t){this.supportCloudDeletes.push(e);var i=$('input[name^="support_del"]').length;this.supportCloudDeletes.length>=i&&5==i?($("#supportCloudCheckall").prop("checked",!0),$("#supportCloudCheckall-span").hide()):this.supportCloudDeletes.length>=i&&5!=i?(this.tableMinView=this.supportCloudDeletes.length,this.tableMinView>=i&&(document.getElementById("supportCloudCheckall").checked=!0,document.getElementById("supportCloudCheckall-span").style.display="none")):$("#supportCloudCheckall-span").show()}else{this.supportCloudDeletes=this.supportCloudDeletes.filter(function(t){return t._id!=e._id});var n=$('input[name^="support_del"]').length;this.supportCloudDeletes.length?this.supportCloudDeletes.length!=n||this.tableMinView!=n?($("#supportCloudCheckall").prop("checked",!1),$("#supportCloudCheckall-span").show()):$("#supportCloudCheckall-span").hide():($("#supportCloudCheckall").prop("checked",!1),$("#supportCloudCheckall-span").hide())}}},{key:"showAllUserCheckBox",value:function(e,t){$("#"+e.target.id).hide(),"supportCloud"==t?($("#supportCloudCheckall").prop("checked",!0),this.supportCloudCheckall(!0)):"marketingCloud"==t?($("#marketingCloudCheckedAll").prop("checked",!0),this.marketingCloudCheckedAll(!0)):"smartHome"==t?($("#smartHomeCheckedAll").prop("checked",!0),this.smartHomeCheckedAll(!0)):"cco"==t?($("#ccoCheckedAll").prop("checked",!0),this.ccoCheckedAll(!0)):"foundation"==t?(document.getElementById("foundationCheckedAll").checked=!0,this.foundationCheckedAll(!0)):($("#faCheckedAll").prop("checked",!0),this.faCheckedAll(!0))}},{key:"marketingCloudCheckedAll",value:function(e){var t,i=0,n=this;e?$('input[name^="marketing_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!0),t=$(this).attr("id"),n.marketingCloudRolesData.forEach(function(e){e._id==t&&n.marketingCloudDeletes.push(e)}),i++}):$('input[name^="marketing_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!1),n.marketingCloudDeletes=[],i++})}},{key:"marketingCloudCheckedOne",value:function(e,t){if(t){this.marketingCloudDeletes.push(e);var i=$('input[name^="marketing_del"]').length;this.marketingCloudDeletes.length>=i&&5==i?($("#marketingCloudCheckedAll").prop("checked",!0),$("#marketingCloudCheckedAll-span").hide()):this.marketingCloudDeletes.length>=i&&5!=i?(this.tableMinView=this.marketingCloudDeletes.length,this.tableMinView>=i&&(document.getElementById("marketingCloudCheckedAll").checked=!0,document.getElementById("marketingCloudCheckedAll-span").style.display="none")):$("#marketingCloudCheckedAll-span").show()}else{this.marketingCloudDeletes=this.marketingCloudDeletes.filter(function(t){return t._id!=e._id});var n=$('input[name^="marketing_del"]').length;this.marketingCloudDeletes.length?this.marketingCloudDeletes.length!=n||this.tableMinView!=n?($("#marketingCloudCheckedAll").prop("checked",!1),$("#marketingCloudCheckedAll-span").show()):$("#marketingCloudCheckedAll-span").hide():($("#marketingCloudCheckedAll").prop("checked",!1),$("#marketingCloudCheckedAll-span").hide())}}},{key:"smartHomeCheckedAll",value:function(e){var t,i=0,n=this;e?$('input[name^="smarthome_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!0),t=$(this).attr("id"),n.smartHomeRoles.forEach(function(e){e._id==t&&n.smartHomeDeletes.push(e)}),i++}):$('input[name^="smarthome_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!1),n.smartHomeDeletes=[],i++})}},{key:"smartHomeCheckedOne",value:function(e,t){if(t){this.smartHomeDeletes.push(e);var i=$('input[name^="smarthome_del"]').length;this.smartHomeDeletes.length>=i&&5==i?($("#smartHomeCheckedAll").prop("checked",!0),$("#smartHomeCheckedAll-span").hide()):this.smartHomeDeletes.length>=i&&5!=i?(this.tableMinView=this.smartHomeDeletes.length,this.tableMinView>=i&&(document.getElementById("smartHomeCheckedAll").checked=!0,document.getElementById("smartHomeCheckedAll-span").style.display="none")):$("#smartHomeCheckedAll-span").show()}else{this.smartHomeDeletes=this.smartHomeDeletes.filter(function(t){return t._id!=e._id});var n=$('input[name^="smarthome_del"]').length;this.smartHomeDeletes.length?this.smartHomeDeletes.length!=n||this.tableMinView!=n?($("#smartHomeCheckedAll").prop("checked",!1),$("#smartHomeCheckedAll-span").show()):$("#smartHomeCheckedAll-span").hide():($("#smartHomeCheckedAll").prop("checked",!1),$("#smartHomeCheckedAll-span").hide())}}},{key:"faCheckedAll",value:function(e){var t,i=0,n=this;e?$('input[name^="fa_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!0),t=$(this).attr("id"),n.faRoles.forEach(function(e){e._id==t&&n.faDeletes.push(e)}),i++}):$('input[name^="fa_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!1),n.faDeletes=[],i++})}},{key:"faCheckedOne",value:function(e,t){if(t){this.faDeletes.push(e);var i=$('input[name^="fa_del"]').length;this.faDeletes.length>=i&&5==i?($("#faCheckedAll").prop("checked",!0),$("#faCheckedAll-span").hide()):this.faDeletes.length>=i&&5!=i?(this.tableMinView=this.faDeletes.length,this.tableMinView>=i&&(document.getElementById("faCheckedAll").checked=!0,document.getElementById("faCheckedAll-span").style.display="none")):$("#faCheckedAll-span").show()}else{this.faDeletes=this.faDeletes.filter(function(t){return t._id!=e._id});var n=$('input[name^="fa_del"]').length;this.faDeletes.length?this.faDeletes.length!=n||this.tableMinView!=n?($("#faCheckedAll").prop("checked",!1),$("#faCheckedAll-span").show()):$("#faCheckedAll-span").hide():($("#faCheckedAll").prop("checked",!1),$("#faCheckedAll-span").hide())}}},{key:"ccoCheckedAll",value:function(e){var t,i=0,n=this;e?$('input[name^="cco_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!0),t=$(this).attr("id"),n.ccoRoles.forEach(function(e){e._id==t&&n.ccoDeletes.push(e)}),i++}):$('input[name^="cco_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!1),n.ccoDeletes=[],i++})}},{key:"ccoCheckedOne",value:function(e,t){if(t){this.ccoDeletes.push(e);var i=$('input[name^="cco_del"]').length;this.ccoDeletes.length>=i&&5==i?($("#ccoCheckedAll").prop("checked",!0),$("#ccoCheckedAll-span").hide()):this.ccoDeletes.length>=i&&5!=i?(this.tableMinView=this.ccoDeletes.length,this.tableMinView>=i&&(document.getElementById("ccoCheckedAll").checked=!0,document.getElementById("ccoCheckedAll-span").style.display="none")):$("#ccoCheckedAll-span").show()}else{this.ccoDeletes=this.ccoDeletes.filter(function(t){return t._id!=e._id});var n=$('input[name^="cco_del"]').length;this.ccoDeletes.length?this.ccoDeletes.length!=n||this.tableMinView!=n?($("#ccoCheckedAll").prop("checked",!1),$("#ccoCheckedAll-span").show()):$("#ccoCheckedAll-span").hide():($("#ccoCheckedAll").prop("checked",!1),$("#ccoCheckedAll-span").hide())}}},{key:"foundationCheckedAll",value:function(e){var t,i=0,n=this;e?$('input[name^="foundation_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!0),t=$(this).attr("id"),n.foundationRoles.forEach(function(e){e._id==t&&n.foundationDeletes.push(e)}),i++}):$('input[name^="foundation_del"]').each(function(){if(i>=5)return!1;$(this).prop("checked",!1),n.foundationDeletes=[],i++})}},{key:"foundationCheckedOne",value:function(e,t){if(t){this.foundationDeletes.push(e);var i=$('input[name^="foundation_del"]').length;this.foundationDeletes.length>=i&&5==i?($("#foundationCheckedAll").prop("checked",!0),$("#foundationCheckedAll-span").hide()):this.foundationDeletes.length>=i&&5!=i?(this.tableMinView=this.foundationDeletes.length,this.tableMinView>=i&&(document.getElementById("foundationCheckedAll").checked=!0,document.getElementById("foundationCheckedAll-span").style.display="none")):$("#foundationCheckedAll-span").show()}else{this.foundationDeletes=this.foundationDeletes.filter(function(t){return t._id!=e._id});var n=$('input[name^="foundation_del"]').length;this.foundationDeletes.length?this.foundationDeletes.length!=n||this.tableMinView!=n?($("#foundationCheckedAll").prop("checked",!1),$("#foundationCheckedAll-span").show()):$("#foundationCheckedAll-span").hide():($("#foundationCheckedAll").prop("checked",!1),$("#foundationCheckedAll-span").hide())}}},{key:"deleteMultiRoles",value:function(e){this.deleteRoles="supportCloud"==e?this.supportCloudDeletes:"marketingCloud"==e?this.marketingCloudDeletes:"smartHome"==e?this.smartHomeDeletes:"cco"==e?this.ccoDeletes:"foundation"==e?this.foundationDeletes:this.faDeletes,this.modalTitle=this.language["Delete Multiple Roles"];var i=[];this.deleteRoles.forEach(function(e){i.push(e.name)});var n=t(new Set(i));this.modalInfo=n.join(", "),this.openMultiDeleteModal()}},{key:"confirmDeleteSecleted",value:function(){var e=this;this.closeModal();var t=[];this.deleteRoles.forEach(function(i){t.push(e.organizationApiService.RoleDelete(i._id))}),(0,l.D)(t).subscribe(function(t){e.supportCloudDeletes=[],e.marketingCloudDeletes=[],e.smartHomeDeletes=[],e.faDeletes=[],e.ccoDeletes=[],e.foundationDeletes=[],e.deleteRoles=[],e.dataAvailable=!1,e.getData()},function(t){e.pageErrorHandle(t)})}},{key:"roleDetails",value:function(){this.router.navigate(["".concat(this.MODULE,"/roleDetails")])}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"openDeleteModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"openMultiDeleteModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal,{backdrop:"static",keyboard:!1})}},{key:"resetAllDeletes",value:function(){this.supportCloudDeletes=[],this.marketingCloudDeletes=[],this.smartHomeDeletes=[],this.faDeletes=[],this.ccoDeletes=[]}},{key:"showRoles",value:function(){this.supportCloudShow=!0,this.marketingCloudShow=!0,this.smartHomeShow=!1,this.faShow=!1,this.ccoRoleShow=!0,this.foundationRoleShow=!0}},{key:"tableLanguageOptions",value:function(e){var t=this;"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language,this.marketingCloudDeletes=[],this.supportCloudDeletes=[],this.foundationDeletes=[],this.ccoDeletes=[],e&&setTimeout(function(){t.dataAvailable=!0},200)}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"supportTablePageChange",value:function(){var e=this;setTimeout(function(){$("#supportCloudCheckall-span").hide(),$("#supportCloudCheckall").prop("checked",!1),e.supportCloudCheckall(!1)},100)}},{key:"marketingTablePageChange",value:function(){var e=this;setTimeout(function(){$("#marketingCloudCheckedAll-span").hide(),$("#marketingCloudCheckedAll").prop("checked",!1),e.marketingCloudCheckedAll(!1)},100)}},{key:"smartHomeTablePageChange",value:function(){var e=this;setTimeout(function(){$("#smartHomeCheckedAll-span").hide(),$("#smartHomeCheckedAll").prop("checked",!1),e.smartHomeCheckedAll(!1)},100)}},{key:"faTablePageChange",value:function(){var e=this;setTimeout(function(){$("#faCheckedAll-span").hide(),$("#faCheckedAll").prop("checked",!1),e.faCheckedAll(!1)},100)}},{key:"ccoTablePageChange",value:function(){var e=this;setTimeout(function(){$("#ccoCheckedAll-span").hide(),$("#ccoCheckedAll").prop("checked",!1),e.ccoCheckedAll(!1)},100)}},{key:"foundationTablePageChange",value:function(){var e=this;setTimeout(function(){$("#foundationCheckedAll-span").hide(),$("#foundationCheckedAll").prop("checked",!1),e.foundationCheckedAll(!1)},100)}},{key:"checkScope",value:function(){var e=this.sso.getScopes();return!c.N.VALIDATE_SCOPE||!(!e||!e["cloud.admin.roles"]||-1===e["cloud.admin.roles"].indexOf("write"))}}]),e}()).\u0275fac=function(e){return new(e||Ze)(g.Y36(p.v),g.Y36(h.F0),g.Y36(f.F),g.Y36(m.t6),g.Y36(v.FF),g.Y36(Z.s),g.Y36(b.Dx))},Ze.\u0275cmp=g.Xpm({type:Ze,selectors:[["app-roles"]],viewQuery:function(e,t){var i;1&e&&(g.Gf(T,7),g.Gf(_,7)),2&e&&(g.iGM(i=g.CRH())&&(t.deleteModal=i.first),g.iGM(i=g.CRH())&&(t.multiDeleteModal=i.first))},hostBindings:function(e,t){1&e&&g.NdJ("click",function(e){return t.onClick(e)})},decls:6,vars:2,consts:[["class","container position-relative",4,"ngIf"],[4,"ngIf"],["deleteModal",""],["multiDeleteModal",""],[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["class","row mt-3",4,"ngIf"],["class","row mb-1",4,"ngIf"],[3,"ngClass"],["class","col",4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"row","my-2"],["class","row my-2",4,"ngIf"],["class","row myy-2",4,"ngIf"],[1,"row","mt-3"],[1,"col","ccl-title"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"d-inline-flex","align-items-center"],[1,"d-inline-flex","mr-2"],["src","../../../assets/img/ic_success-circle-outline.svg"],[1,"row","mb-1"],[1,"col-md-4","offset-md-8","pr-0"],[1,"text-right","flat-right"],["id","del-mul-support","class","btn-default primary px-3 mx-2",3,"click",4,"ngIf"],["id","add-role-support",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-support",1,"btn-default","primary","px-3","mx-2",3,"click"],[1,"col"],["id","supportCloud-table","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions"],[1,""],["width","5%",1,"checkbox-column"],["type","checkbox","name","supportCloudCheckall","id","supportCloudCheckall",3,"disabled","click"],["id","supportCloudCheckall-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["width","35%"],["width","40%"],["width","20%"],[4,"ngFor","ngForOf"],[1,"checkbox-column"],["type","checkbox",3,"name","checked","value","id","disabled","change"],[1,"actions"],["id","role-detail-support",1,"fas","fa-pencil-alt","p-1","cursor-pointer","primary",3,"title","click"],["id","role-del-support","class","fas fa-trash-alt p-1 cursor-pointer primary",3,"title","click",4,"ngIf"],["id","role-del-support",1,"fas","fa-trash-alt","p-1","cursor-pointer","primary",3,"title","click"],[1,"row","mb-2"],["id","del-mul-marketing","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-marketing",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-marketing",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","marketingCloud-table","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions"],["type","checkbox","name","marketingCloudCheckedAll","id","marketingCloudCheckedAll",3,"disabled","click"],["id","marketingCloudCheckedAll-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["id","role-detail-marketing",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-marketing","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-marketing",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-smart","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-smart",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-smart",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","smartHome-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["type","checkbox","name","smartHomeCheckedAll","id","smartHomeCheckedAll",3,"disabled","click"],["id","smartHomeCheckedAll-span",1,"checkbox-ui",2,"display","none",3,"click"],["type","checkbox",3,"name","id","checked","value","disabled","click"],["id","role-detail-smart",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-smart","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-smart",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-fa","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-fa",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-fa",1,"btn-default","primary","px-3","mx-3",3,"click"],[1,"row","myy-2"],["id","fa-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["type","checkbox","name","faCheckedAll","id","faCheckedAll",3,"disabled","click"],["id","faCheckedAll-span",1,"checkbox-ui",2,"display","none",3,"click"],["type","checkbox",3,"name","id","checked","disabled","value","click"],["id","role-detail-fa",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-fa","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-fa",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-cco","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-cco",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-cco",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","cco-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["type","checkbox","name","ccoCheckedAll","id","ccoCheckedAll",3,"disabled","click"],["id","ccoCheckedAll-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["id","role-detail-cco",1,"fas","fa-pencil-alt","p-1","primary",3,"title","click"],["id","role-del-cco","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-cco",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","del-mul-foundation","class","btn-default primary px-3 mx-3",3,"click",4,"ngIf"],["id","add-role-foundation",1,"btn-default","primary","px-3",3,"click"],["id","del-mul-foundation",1,"btn-default","primary","px-3","mx-3",3,"click"],["id","foundation-table","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions"],["type","checkbox","name","foundationCheckedAll","id","foundationCheckedAll",3,"disabled","click"],["id","foundationCheckedAll-span",1,"checkbox-ui","check-intermediate",2,"display","none",3,"click"],["id","role-detail-foundation",1,"fas","fa-pencil-alt","p-1","primary",3,"click"],["id","role-del-foundation","class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],["id","role-del-foundation",1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["id","system-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],["width","5%"],["width","60%"],[1,"text-center"],[1,"primary"],[1,"row"],[1,"col-md-12","text-center"],["src","./assets/images/under-construction-illustration.svg","alt","Page under construction!",1,"w-50"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(g.YNc(0,he,32,24,"div",0),g.YNc(1,fe,9,0,"div",1),g.YNc(2,me,14,5,"ng-template",null,2,g.W1O),g.YNc(4,ve,14,5,"ng-template",null,3,g.W1O)),2&e&&(g.Q6J("ngIf",!t.showConstructionPage),g.xp6(1),g.Q6J("ngIf",t.showConstructionPage))},directives:[A.O5,A.mk,x.G,A.sg],styles:[".wip[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}input[type=checkbox][_ngcontent-%COMP%] + .check-intermediate[_ngcontent-%COMP%]{position:absolute!important;left:0px!important;top:11px!important}input[type=checkbox][_ngcontent-%COMP%] + .checkbox-ui[_ngcontent-%COMP%]{width:13px!important;height:13px!important}"]}),Ze)},63859:function(e,t,i){i.d(t,{U:function(){return d}});var n,s=i(91841),r=i(92340),l=i(37716),c={headers:new s.WM({})},d=((n=function(){function e(t){a(this,e),this.httpClient=t,this.baseURL=r.N.calixAdminURL,this.org_id=r.N.faAdminOrgId,this.addRole=this.baseURL+"role",this.users=this.baseURL+"users"}return o(e,[{key:"RoleAdd",value:function(e){return this.httpClient.put("".concat(this.addRole),e,c)}},{key:"RoleUpdate",value:function(e,t){return this.httpClient.post("".concat(this.baseURL,"role/").concat(t,"/info"),e,c)}},{key:"UsersCountByOrgId",value:function(e){return this.httpClient.get("".concat(this.baseURL,"org/").concat(e,"/users/_count"),c)}},{key:"UsersListByOrgId",value:function(e,t){return this.httpClient.get("".concat(this.baseURL,"org/").concat(e,"/users?size=").concat(t),c)}},{key:"RoleData",value:function(e){return this.httpClient.get("".concat(this.baseURL,"role/").concat(e),c)}},{key:"AddUsersByRoleId",value:function(e,t){return this.httpClient.post("".concat(this.baseURL,"role/").concat(t,"/users"),e,c)}},{key:"AllPemissionsData",value:function(e){return this.httpClient.get("".concat(this.baseURL,"app/").concat(e,"/scopes"),c)}},{key:"AddRolePermissions",value:function(e,t){return this.httpClient.post("".concat(this.addRole,"/").concat(t,"/perms"),e,c)}}]),e}()).\u0275fac=function(e){return new(e||n)(l.LFG(s.eN))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},20497:function(e,t,i){i.d(t,{w:function(){return c}});var n,s=i(92340),r=i(37716),l=i(91841),c=((n=function(){function e(t){a(this,e),this.httpClient=t,this.baseURL=s.N.API_BASE,this.apiQuotaDetails="retrieve/quota/values"}return o(e,[{key:"getaApiQuotaDetails",value:function(e){return this.httpClient.get("".concat(this.baseURL,"/v1/retrieve/quota/values/").concat(e))}},{key:"getOrgUsageStatus",value:function(e){return this.httpClient.get("".concat(this.baseURL,"/v1/org/admin/orgstats/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||n)(r.LFG(l.eN))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},56890:function(e,t,i){i.d(t,{s:function(){return d}});var n,s=i(91841),r=i(92340),l=i(37716),c={headers:new s.WM({})},d=((n=function(){function e(t){a(this,e),this.httpClient=t,this.baseUrl=r.N.CALIX_ADMIN_BASE_URL+"dpu";var i=new s.WM({"Content-Type":"application/json"});this.options={headers:i}}return o(e,[{key:"getBlacklistUsers",value:function(){return this.httpClient.get("".concat(this.baseUrl,"/list"),c)}},{key:"updateBlacklistUsers",value:function(e){return this.httpClient.put("".concat(this.baseUrl),e,c)}},{key:"searchBlacklistUser",value:function(e){return this.httpClient.get("".concat(this.baseUrl,"/").concat(e),c)}},{key:"ReactivatetUser",value:function(e){return this.httpClient.delete("".concat(this.baseUrl,"/").concat(e),c)}},{key:"getBlacklistUsersByOrgId",value:function(e){return this.httpClient.get("".concat(r.N.CALIX_ADMIN_BASE_URL,"org/").concat(e,"/dpu/list"),c)}},{key:"updateBlacklistUsersByOrgId",value:function(e,t){return this.httpClient.put("".concat(r.N.CALIX_ADMIN_BASE_URL,"org/").concat(t,"/dpu"),e,c)}},{key:"ReactivatetUserByOrgId",value:function(e,t){return this.httpClient.delete("".concat(r.N.CALIX_ADMIN_BASE_URL,"org/").concat(t,"/dpu/").concat(e),c)}}]),e}()).\u0275fac=function(e){return new(e||n)(l.LFG(s.eN))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},9406:function(e,t,i){i.d(t,{V:function(){return c}});var n,s=i(92340),r=i(37716),l=i(91841),c=((n=function(){function e(t){a(this,e),this.httpClient=t}return o(e,[{key:"createChatBot",value:function(e){return this.httpClient.post("".concat(s.N.API_BASE_URL,"chatbot/config"),e)}},{key:"deleteChatbotRequest",value:function(e){return this.httpClient.put("".concat(s.N.API_BASE_URL,"chatbot/config"),e)}},{key:"verifyChatBotConfig",value:function(e){return this.httpClient.get("".concat(s.N.API_BASE_URL,"chatbot/config?orgId=").concat(e))}},{key:"downloadChatConfig",value:function(e,t){return this.httpClient.get("".concat(s.N.API_BASE_URL,"/chatbot/config/download?orgId=").concat(e),t)}}]),e}()).\u0275fac=function(e){return new(e||n)(r.LFG(l.eN))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},5826:function(e,t,i){i.d(t,{q:function(){return u}});var n,s=i(91841),r=i(92340),l=i(16738),c=i(37716),d={headers:new s.WM({})},u=((n=function(){function e(t){a(this,e),this.http=t}return o(e,[{key:"getSCLByOrg",value:function(e){return this.http.get("".concat(r.N.CALIX_ADMIN_BASE_URL,"org-access/org/").concat(e,"/_expand"),d)}},{key:"getOrgList",value:function(){return this.http.get("".concat(r.N.CALIX_ADMIN_ORG_BASE_URL,"organizations"),d)}},{key:"getOrgListByUsername",value:function(e){return this.http.get("".concat(r.N.CALIX_ADMIN_BASE_URL,"org-access/username/").concat(e),d)}},{key:"AddOrgListByUsername",value:function(e,t){return this.http.post("".concat(r.N.CALIX_ADMIN_BASE_URL,"org-access/username/").concat(e),t,d)}},{key:"checkType",value:function(e){return e.indexOf("write")>-1?"Read and Write":"Read only\t"}},{key:"checkExpiry",value:function(e){if(-1==e.endTime)return sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?"Pas d'expiration":sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?"Sin caducidad":sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?"Kein Ablaufdatum":(sessionStorage.getItem("defaultLanguage")&&sessionStorage.getItem("defaultLanguage"),"No Expiry");if(e.beginTime&&e.endTime){var t=this.roundOffTimestamp(e.beginTime),i=this.roundOffTimestamp(e.endTime);return sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(l.locale("fr"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - ").concat(l(i).format("DD MMM YYYY, HH:mm"))):sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?(l.locale("es"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - ").concat(l(i).format("DD MMM YYYY, HH:mm"))):sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?(l.locale("de_DE"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - ").concat(l(i).format("DD MMM YYYY, HH:mm"))):sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")?(l.locale("en"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - ").concat(l(i).format("DD MMM YYYY, HH:mm"))):"".concat(new Date(t).toLocaleString()," - ").concat(new Date(i).toLocaleString())}}},{key:"checkExpiryOrgAccess",value:function(e){if(-1==e.endTime){var t=this.roundOffTimestamp(e.beginTime);return sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")?(l.locale("en"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - No Expiry")):sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(l.locale("fr"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - Pas d'expiration")):sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?(l.locale("es"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - Sin caducidad")):sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?(l.locale("de_DE"),"".concat(l(t).format("DD MMM YYYY, HH:mm")," - Kein Ablaufdatum ")):"".concat(new Date(t).toLocaleString()," - No Expiry\t")}if(e.beginTime&&e.endTime){var i=this.roundOffTimestamp(e.beginTime),n=this.roundOffTimestamp(e.endTime);return sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(l.locale("fr"),"".concat(l(i).format("DD MMM YYYY, HH:mm")," - ").concat(l(n).format("DD MMM YYYY, HH:mm"))):sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")?(l.locale("en"),"".concat(l(i).format("DD MMM YYYY, HH:mm")," - ").concat(l(n).format("DD MMM YYYY, HH:mm"))):sessionStorage.getItem("defaultLanguage")&&"es"==sessionStorage.getItem("defaultLanguage")?(l.locale("es"),"".concat(l(i).format("DD MMM YYYY, HH:mm")," - ").concat(l(n).format("DD MMM YYYY, HH:mm"))):sessionStorage.getItem("defaultLanguage")&&"de_DE"==sessionStorage.getItem("defaultLanguage")?(l.locale("de_DE"),"".concat(l(i).format("DD MMM YYYY, HH:mm")," - ").concat(l(n).format("DD MMM YYYY, HH:mm"))):"".concat(new Date(i).toLocaleString()," - ").concat(new Date(n).toLocaleString())}}},{key:"localTimestampToUTC",value:function(e){var t=new Date(e);return t.getTime()+60*t.getTimezoneOffset()*1e3}},{key:"utcTimestampTolocal",value:function(e){return e-60*(new Date).getTimezoneOffset()*1e3}},{key:"roundOffTimestamp",value:function(e){return 1e3*Math.floor(e/1e3)}}]),e}()).\u0275fac=function(e){return new(e||n)(c.LFG(s.eN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},89342:function(e,t,i){i.d(t,{z:function(){return g}});var n,s=i(91841),r=i(40205),l=i(92340),c=i(5304),d=i(37716),u={headers:new s.WM({})},g=((n=function(){function e(t){a(this,e),this.httpClient=t,this.baseURL=l.N.CALIX_ADMIN_BASE_URL,this.orgBaseURL=l.N.CALIX_ADMIN_ORG_BASE_URL,this.org_id=l.N.faAdminOrgId}return o(e,[{key:"OrgsList",value:function(){return this.httpClient.get("".concat(this.orgBaseURL,"organizations"),u)}},{key:"AddOrg",value:function(e){return this.httpClient.post("".concat(this.orgBaseURL,"organizations"),e,u)}},{key:"DeleteOrg",value:function(e){return this.httpClient.delete("".concat(this.orgBaseURL,"organizations/").concat(e),u)}},{key:"Entitlements",value:function(e){return this.httpClient.get("".concat(this.orgBaseURL,"entitlements/cloud/all"),u)}},{key:"EntitlementsByOrgId",value:function(e){return this.httpClient.get("".concat(this.orgBaseURL,"entitlements/").concat(e),u)}},{key:"callRestApi",value:function(e,t){return this.httpClient.get("".concat(e),u).pipe((0,c.K)(this.handleError))}},{key:"handleError",value:function(e){return(0,r._)(e)}},{key:"RoleData",value:function(e){return this.httpClient.get("".concat(this.baseURL,"role/").concat(e),u)}},{key:"AddAdmin",value:function(e,t){return this.httpClient.post("".concat(this.baseURL,"role/").concat(t,"/users"),e,u)}},{key:"addEntitlements",value:function(e,t){return this.httpClient.post(e,t,u)}},{key:"changeEntitlements",value:function(e,t){return this.httpClient.put(e,t,u)}},{key:"UsersListByOrgId",value:function(e,t){return this.httpClient.get("".concat(this.baseURL,"org/").concat(e,"/users?size=").concat(t),u)}}]),e}()).\u0275fac=function(e){return new(e||n)(d.LFG(s.eN))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},77745:function(e,t,i){i.d(t,{g:function(){return u}});var n,s=i(91841),r=i(92340),l=i(37716),c=i(89097),d=i(39895),u=((n=function(){function e(t,i,n){a(this,e),this.httpClient=t,this.ssoAuthService=i,this.router=n,this.baseURL=r.N.API_BASE,this.ssoAuthService.getRedirectModule(this.router.url)}return o(e,[{key:"getHttpHeaders",value:function(){return new s.WM({"X-Calix-OrgId":this.ssoAuthService.getOrganizationID(this.router.url)})}},{key:"saveProspectFile",value:function(e,t){var i=new FormData;return i.append("file",e),i.append("listName",t),this.httpClient.post("".concat(this.baseURL,"/v1/cmc-campaigns/match/list/prospects"),i,{headers:this.getHttpHeaders()})}},{key:"saveSubscriberFile",value:function(e,t){var i=new FormData;return i.append("file",e),i.append("listName",t),this.httpClient.post("".concat(this.baseURL,"/v1/cmc-campaigns/match/list/subscribers"),i,{headers:this.getHttpHeaders()})}},{key:"getFileData",value:function(e,t){return this.httpClient.get("".concat(this.baseURL,"/v1/cmc-campaigns/match/list/").concat(t,"/").concat(e),{headers:this.getHttpHeaders()})}},{key:"getFileList",value:function(){return this.httpClient.get("".concat(this.baseURL,"/v1/cmc-campaigns/match/list"),{headers:this.getHttpHeaders()})}},{key:"deleteProspect",value:function(e){return this.httpClient.delete("".concat(this.baseURL,"/v1/cmc-campaigns/match/list/prospects/").concat(e),{headers:this.getHttpHeaders()})}},{key:"deleteSubscriber",value:function(e){return this.httpClient.delete("".concat(this.baseURL,"/v1/cmc-campaigns/match/list/subscribers/").concat(e),{headers:this.getHttpHeaders()})}}]),e}()).\u0275fac=function(e){return new(e||n)(l.LFG(s.eN),l.LFG(c.t6),l.LFG(d.F0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},91395:function(e,t,i){i.d(t,{q:function(){return p}});var n,s=i(91841),r=i(40205),l=i(92340),c=i(5304),d=i(37716),u=i(89097),g={headers:new s.WM({})},p=((n=function(){function e(t,i){a(this,e),this.httpClient=t,this.Sso=i,this.baseURL=l.N.calixAdminURL,this.org_id=l.N.faAdminOrgId,this.user=this.baseURL+"user",this.acl=this.baseURL+"useracl",this.roles=this.baseURL+"roles"}return o(e,[{key:"UpdatePasswordByUserId",value:function(e,t){return this.httpClient.post("".concat(this.user,"/").concat(t),e,g)}},{key:"AclListByUsername",value:function(e){return this.httpClient.get("".concat(this.baseURL,"/useracl/").concat(e),g)}},{key:"UpdateAclListByUserEmail",value:function(e,t,i){var n=this.Sso.getOrg(i);return this.httpClient.post("".concat(this.acl,"/").concat(t,"?").concat(n),e,g)}},{key:"RolesList",value:function(){return this.httpClient.get(this.roles,g)}},{key:"RolesListByUserId",value:function(e){return this.httpClient.get("".concat(this.user,"/").concat(e,"/roles"),g)}},{key:"UpdateRolesListByUserId",value:function(e,t){return this.httpClient.post("".concat(this.user,"/").concat(e,"/roles/").concat(t),{},g)}},{key:"callRestApi",value:function(e,t){return this.httpClient.get("".concat(e),g).pipe((0,c.K)(this.handleError))}},{key:"handleError",value:function(e){return(0,r._)(e)}},{key:"DeleteAclListByUserEmail",value:function(e,t){var i=this.Sso.getOrg(t);return this.httpClient.delete("".concat(this.baseURL,"useracl/").concat(e,"?").concat(i),g)}},{key:"DeleteRolesListByUserId",value:function(e){return this.httpClient.delete("".concat(this.user,"/").concat(e,"/roles"),g)}},{key:"updateRolesListByGranteeUserId",value:function(e){return this.httpClient.post("".concat(e),{},g)}},{key:"deleteRolesListByGranteeUserId",value:function(e){return this.httpClient.delete("".concat(e),g)}}]),e}()).\u0275fac=function(e){return new(e||n)(d.LFG(s.eN),d.LFG(u.t6))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},82823:function(e,t,i){i.d(t,{F:function(){return u}});var n,s=i(91841),r=i(92340),l=i(37716),c=i(89097),d=i(39895),u=((n=function(){function e(t,i,n){a(this,e),this.httpClient=t,this.ssoAuthService=i,this.router=n,this.baseURL=r.N.API_BASE,this.zipcodeNameurl="cmc-campaigns/zipdata/alias",this.zipcodeListUrl="cmc-campaigns/zipdata",this.cmcCloudChecktUrl="cmc-campaigns/organization",this.MODULE=this.ssoAuthService.getRedirectModule(this.router.url),this.calixOrgId()}return o(e,[{key:"calixOrgId",value:function(){var e;e=new s.WM({"X-Calix-OrgId":this.ssoAuthService.getOrganizationID(this.router.url)}),this.httpOptions={headers:e}}},{key:"zipCodeListNames",value:function(){return this.calixOrgId(),this.httpClient.get("".concat(this.baseURL,"/v1/").concat(this.zipcodeNameurl),this.httpOptions)}},{key:"saveZipPlusFile",value:function(e){return this.calixOrgId(),this.httpClient.post("".concat(this.baseURL,"/v1/").concat(this.zipcodeNameurl),e,this.httpOptions)}},{key:"modifyZipcode",value:function(e){return this.calixOrgId(),this.httpClient.put("".concat(this.baseURL,"/v1/").concat(this.zipcodeNameurl),e,this.httpOptions)}},{key:"removeZipcode",value:function(e){return this.calixOrgId(),this.httpClient.delete("".concat(this.baseURL,"/v1/").concat(this.zipcodeNameurl,"?list-name=").concat(e),this.httpOptions)}},{key:"zipCodeEntryList",value:function(e){return this.calixOrgId(),this.httpClient.get("".concat(this.baseURL,"/v1/").concat(this.zipcodeListUrl,"/?list-name=").concat(e),this.httpOptions)}},{key:"editZipcodeEntryList",value:function(e){return this.calixOrgId(),this.httpClient.put("".concat(this.baseURL,"/v1/").concat(this.zipcodeListUrl,"/"),e,this.httpOptions)}},{key:"deleteZipcodeEntryList",value:function(e){return this.calixOrgId(),this.httpClient.delete("".concat(this.baseURL,"/v1/").concat(this.zipcodeListUrl,"/?ids=").concat(e),this.httpOptions)}},{key:"addZipcodeEntryList",value:function(e){return this.calixOrgId(),this.httpClient.post("".concat(this.baseURL,"/v1/").concat(this.zipcodeListUrl,"/"),e,this.httpOptions)}},{key:"marketingCloudCheck",value:function(){return this.calixOrgId(),this.httpClient.get("".concat(this.baseURL,"/v1/").concat(this.cmcCloudChecktUrl),this.httpOptions)}},{key:"marketingCloudCheckUpdate",value:function(e){return this.calixOrgId(),this.httpClient.put("".concat(this.baseURL,"/v1/").concat(this.cmcCloudChecktUrl),e,this.httpOptions)}}]),e}()).\u0275fac=function(e){return new(e||n)(l.LFG(s.eN),l.LFG(c.t6),l.LFG(d.F0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n)},98325:function(e,t,i){i.d(t,{v:function(){return O}});var n=i(92340),s=i(37716),r=i(49342),l=i(53668),c=i(39895),d=i(7450),u=i(89097),g=i(12664),p=i(39075),h=i(20904),f=i(38583),m=i(3679),v=i(74062),Z=["deleteModal"],b=["infoModal"],A=["updateModal"],x=["errorModal"];function T(e,t){1&e&&(s.TgZ(0,"div",22),s.TgZ(1,"div",23),s.TgZ(2,"div",24),s.TgZ(3,"span",25),s._uU(4,"Loading..."),s.qZA(),s.qZA(),s.qZA(),s.qZA())}function _(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",26),s.TgZ(1,"span",27),s._UZ(2,"img",28),s.qZA(),s.TgZ(3,"button",29),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeAlert()}),s._UZ(4,"span"),s.qZA(),s._UZ(5,"div",30),s.qZA()}if(2&e){var n=s.oxw();s.xp6(5),s.Q6J("innerHtml",n.errorInfo,s.oJD)}}function C(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",31),s.TgZ(1,"div",32),s.TgZ(2,"div",33),s._UZ(3,"img",34),s.qZA(),s.TgZ(4,"div",35),s._UZ(5,"span",36),s.qZA(),s.TgZ(6,"div",37),s.TgZ(7,"button",29),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeAlert()}),s._UZ(8,"span"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){var n=s.oxw();s.xp6(5),s.Q6J("innerHtml",n.successInfo,s.oJD)}}function y(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",38),s.TgZ(1,"h4",39),s._uU(2),s.qZA(),s.TgZ(3,"button",40),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeModal()}),s._UZ(4,"span",41),s.qZA(),s.qZA(),s.TgZ(5,"div",42),s.TgZ(6,"p"),s._uU(7),s.qZA(),s.TgZ(8,"p"),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div",43),s.TgZ(11,"button",44),s.NdJ("click",function(){return s.CHM(i),s.oxw().confirmDeleteSecleted()}),s._uU(12),s.qZA(),s.TgZ(13,"button",45),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeModal()}),s._uU(14),s.qZA(),s.qZA()}if(2&e){var n=s.oxw();s.xp6(2),s.Oqu(n.modalTitle),s.xp6(5),s.Oqu(n.modalInfo),s.xp6(2),s.Oqu(n.modalInfocontent),s.xp6(3),s.Oqu(n.language.yes),s.xp6(2),s.Oqu(n.language.no)}}function k(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",38),s.TgZ(1,"h4",39),s._uU(2),s.qZA(),s.TgZ(3,"button",40),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeModal()}),s._UZ(4,"span",41),s.qZA(),s.qZA(),s.TgZ(5,"div",42),s.TgZ(6,"p"),s._uU(7),s.qZA(),s.TgZ(8,"p"),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div",43),s.TgZ(11,"button",44),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeModal()}),s._uU(12),s.qZA(),s.qZA()}if(2&e){var n=s.oxw();s.xp6(2),s.Oqu(n.modalTitle),s.xp6(5),s.Oqu(n.modalInfo),s.xp6(2),s.Oqu(n.modalInfocontent),s.xp6(3),s.Oqu(n.language.ok)}}function q(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"div",38),s.TgZ(1,"h4",39),s._uU(2),s.qZA(),s.TgZ(3,"button",40),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeModal()}),s._UZ(4,"span",41),s.qZA(),s.qZA(),s.TgZ(5,"div",42),s.TgZ(6,"p"),s._uU(7),s.qZA(),s.TgZ(8,"p"),s._uU(9),s.qZA(),s.qZA(),s.TgZ(10,"div",43),s.TgZ(11,"button",44),s.NdJ("click",function(){return s.CHM(i),s.oxw().updateSSO()}),s._uU(12),s.qZA(),s.TgZ(13,"button",45),s.NdJ("click",function(){return s.CHM(i),s.oxw().closeModal()}),s._uU(14),s.qZA(),s.qZA()}if(2&e){var n=s.oxw();s.xp6(2),s.Oqu(n.modalTitle),s.xp6(5),s.Oqu(n.modalInfo),s.xp6(2),s.Oqu(n.modalInfocontent),s.xp6(3),s.Oqu(n.language.yes),s.xp6(2),s.Oqu(n.language.no)}}var w,O=((w=function(){function e(t,i,n,s,o,r,l,c){a(this,e),this.commonOrgService=t,this.organizationApiService=i,this.router=n,this.translateService=s,this.sso=o,this.dialogService=r,this.titleService=l,this.common=c,this.pageAvailable=!1,this.formError=!1,this.add={_id:"",domain:"",orgId:"",type:"saml",config:{sp_options:{entity_id:"https://cloud-stg.calix.com/sso-metadata",assert_endpoint:"https://cloud-stg.calix.com/sso-acs?samlid=nEtmrw7czte5eDmv4"},idp_options:{sso_login_url:"",sso_logout_url:"",certificates:""}}},this.languages=[{name:"English"},{name:"French Canadian"}],this.errorTitle="",this.errorBody="",this.loading=!0;var d=this.router.url;this.ORG_ID=this.sso.getOrganizationID(d),this.commonOrgService.currentPageAdder("sso"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.getHostData(),this.MODULE=this.sso.getRedirectModule(d)}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.ssoconfig," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language.ssoconfig," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.success=!1,this.error=!1,this.logoutFieldHide=!0,this.reset()}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getConfigSubs&&this.getConfigSubs.unsubscribe(),this.ssoUpdateSubs&&this.ssoUpdateSubs.unsubscribe(),this.ssoAddSubs&&this.ssoAddSubs.unsubscribe(),this.ssoDeleteSubs&&this.ssoDeleteSubs.unsubscribe()}},{key:"getHostData",value:function(){var e=this;this.organizationApiService.GetHostData("assets/config/config.json").subscribe(function(t){e.HOSTDATA=t,e.getSSOConfigData()})}},{key:"getSSOConfigData",value:function(){var e=this;this.getConfigSubs=this.organizationApiService.SSOConfigGet(this.ORG_ID).subscribe(function(t){t&&"object"==typeof t&&null!=t._id?(e.SSOconfigData=t,e.configId=t._id,e.entity=e.SSOconfigData.config.sp_options.entity_id?e.SSOconfigData.config.sp_options.entity_id:"",e.acs=e.SSOconfigData.config.sp_options.assert_endpoint?e.SSOconfigData.config.sp_options.assert_endpoint:"",e.emaildomainname=e.SSOconfigData.domain,e.idp=e.SSOconfigData.config.idp_options.certificates,e.ssologin=e.SSOconfigData.config.idp_options.sso_login_url,e.ssologout=e.SSOconfigData.config.idp_options.sso_logout_url,e.deletebuttonDisabled=!1,e.savebuttonDisabled=!0,e.loading=!1):e.showDefaultData()},function(t){e.deletebuttonDisabled=!0,e.showDefaultData(),404!=t.status&&e.pageErrorHandle(t)},function(){setTimeout(function(){e.loading=!1},1e3)})}},{key:"showDefaultData",value:function(){this.domain=this.HOSTDATA.apiURL?this.HOSTDATA.apiURL:n.N.SSO_API_URL,this.generatedId=this.makeid(17),this.entity="".concat(this.domain,"/sso-metadata"),this.acs=this.HOSTDATA.isCAInstance?"".concat(this.domain,"/v1/authentication/samlcacallback?samlid=").concat(this.generatedId):"".concat(this.domain,"/v1/authentication/samlcallback?samlid=").concat(this.generatedId),this.loading=!1}},{key:"makeid",value:function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length,a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*n));return t}},{key:"uuidv4",value:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"save",value:function(){this.configId?this.updateConfirmModal():this.addSSO()}},{key:"updateConfirmModal",value:function(){return this.modalInfocontent=void 0,null!=this.emaildomainname&&""!=this.emaildomainname&&this.validateDomain(this.emaildomainname)?null==this.idp||""==this.idp.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["Certificate Not Valid"],void this.openErrorModal()):null!=this.ssologin&&""!=this.ssologin.trim()&&this.validateURL(this.ssologin.trim())?null==this.ssologout||""==this.ssologout.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Logout URL Not Valid"],void this.openErrorModal()):(this.modalTitle=this.language.Warning,this.modalInfo=this.language["Current SSO settings will be overwritten."],this.modalInfocontent=this.language["Are you sure you want to continue?"],void this.openUpdateModal()):(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Login URL Not Valid"],void this.openErrorModal()):(this.modalTitle=this.language.Error,this.modalInfo=this.language["Domain Name Not Valid"],void this.openErrorModal())}},{key:"updateSSO",value:function(){var e=this;if(null==this.emaildomainname||""==this.emaildomainname||!this.validateDomain(this.emaildomainname))return this.modalTitle=this.language.Error,this.modalInfo=this.language["Domain Name Not Valid"],void this.openErrorModal();if(null==this.idp||""==this.idp.trim())return this.modalTitle=this.language.Error,this.modalInfo=this.language["Certificate Not Valid"],void this.openErrorModal();if(null==this.ssologin||""==this.ssologin.trim()||!this.validateURL(this.ssologin.trim()))return this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Login URL Not Valid"],void this.openErrorModal();if(null==this.ssologout||""==this.ssologout.trim())return this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Logout URL Not Valid"],void this.openErrorModal();var t=this.add;t._id=this.configId,t.orgId=this.ORG_ID,t.type="saml",this.SSOconfigData&&this.SSOconfigData.config.sp_options?(t.config.sp_options.entity_id=this.SSOconfigData.config.sp_options.entity_id,t.config.sp_options.assert_endpoint=this.SSOconfigData.config.sp_options.assert_endpoint):(t.config.sp_options.entity_id=this.entity,t.config.sp_options.assert_endpoint=this.acs),t.domain=this.emaildomainname,t.config.idp_options.certificates=this.idp,t.config.idp_options.sso_login_url=this.ssologin,t.config.idp_options.sso_logout_url=this.ssologout,this.loading=!0,this.closeModal(),this.ssoUpdateSubs=this.organizationApiService.SSOConfigUpdate(t,this.configId).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["SSO Configuration Updated Successfully"],e.success=!0,e.loading=!1,e.commonOrgService.pageScrollTop(),setTimeout(function(){e.closeAlert()},2500),e.getSSOConfigData()},function(t){e.pageErrorHandle(t),e.loading=!1})}},{key:"addSSO",value:function(){var e=this,t=this.add;return null!=this.emaildomainname&&""!=this.emaildomainname&&this.validateDomain(this.emaildomainname)?null==this.idp||""==this.idp.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["Certificate Not Valid"],void this.openErrorModal()):null!=this.ssologin&&""!=this.ssologin.trim()&&this.validateURL(this.ssologin.trim())?null==this.ssologout||""==this.ssologout.trim()?(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Logout URL Not Valid"],void this.openErrorModal()):(t._id=this.generatedId,t.orgId=this.ORG_ID,t.type="saml",this.SSOconfigData&&this.SSOconfigData.config.sp_options?(t.config.sp_options.entity_id=this.SSOconfigData.config.sp_options.entity_id,t.config.sp_options.assert_endpoint=this.SSOconfigData.config.sp_options.assert_endpoint):(t.config.sp_options.entity_id=this.entity,t.config.sp_options.assert_endpoint=this.acs),t.domain=this.emaildomainname,t.config.idp_options.certificates=this.idp,t.config.idp_options.sso_login_url=this.ssologin,t.config.idp_options.sso_logout_url=this.ssologout,this.loading=!0,this.closeModal(),void(this.ssoAddSubs=this.organizationApiService.SSOConfigAdd(t).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["SSO Configuration added Successfully"],e.success=!0,e.loading=!1,e.commonOrgService.pageScrollTop(),setTimeout(function(){e.closeAlert()},2500),e.getSSOConfigData()},function(t){e.pageErrorHandle(t),e.loading=!1}))):(this.modalTitle=this.language.Error,this.modalInfo=this.language["SSO Login URL Not Valid"],void this.openErrorModal()):(this.modalTitle=this.language.Error,this.modalInfo=this.language["Domain Name Not Valid"],void this.openErrorModal())}},{key:"on_ChangeInput",value:function(){this.savebuttonDisabled=!(null!=this.emaildomainname&&this.emaildomainname.length||null!=this.idp&&this.idp.length||null!=this.ssologin&&this.ssologin.length||null!=this.ssologout&&this.ssologout.length)}},{key:"domainChange",value:function(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.emaildomainname==this.SSOconfigData.domain}},{key:"idpChange",value:function(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.idp==this.SSOconfigData.config.idp_options.certificates}},{key:"ssoLoginChange",value:function(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.ssologin==this.SSOconfigData.config.idp_options.sso_login_url}},{key:"ssoLogoutChange",value:function(){null==this.SSOconfigData?this.on_ChangeInput():this.savebuttonDisabled=this.ssologout==this.SSOconfigData.config.idp_options.sso_logout_url}},{key:"deleteSSOinfo",value:function(){this.modalTitle=this.language.Warning,this.modalInfo=this.language["Current SSO settings will be deleted."],this.modalInfocontent=this.language["Are you sure you want to continue?"],this.openDeleteModal()}},{key:"confirmDeleteSecleted",value:function(){var e=this;null!=this.configId&&(this.loading=!0,this.closeModal(),this.ssoDeleteSubs=this.organizationApiService.SSOConfigDelete(this.configId).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["SSO Configuration Deleted Successfully"],e.success=!0,e.loading=!1,e.commonOrgService.pageScrollTop(),setTimeout(function(){e.closeAlert()},2500),e.reset(),e.getSSOConfigData()},function(t){e.pageErrorHandle(t),e.loading=!1}))}},{key:"reset",value:function(){this.entity="",this.acs="",this.emaildomainname="",this.idp="",this.ssologin="",this.ssologout="",this.SSOconfigData=void 0,this.configId=void 0,this.savebuttonDisabled=!0,this.deletebuttonDisabled=!0}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.translateService.changeLanguage(e)}},{key:"openDeleteModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"openUpdateModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.updateModal,{backdrop:"static",keyboard:!1})}},{key:"openErrorModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}},{key:"validateDomain",value:function(e){return/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/gi.test(e)&&this.notEndsWithDot(e)}},{key:"validateURL",value:function(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(e)}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"notEndsWithDot",value:function(e){return!!((e=e?e.trim():"")&&e.length>1&&"."!==e.substring(e.length-1,e.length))}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}]),e}()).\u0275fac=function(e){return new(e||w)(s.Y36(r.v),s.Y36(l.F),s.Y36(c.F0),s.Y36(d.s),s.Y36(u.t6),s.Y36(g.FF),s.Y36(p.Dx),s.Y36(h.i))},w.\u0275cmp=s.Xpm({type:w,selectors:[["app-sso-configuration"]],viewQuery:function(e,t){var i;1&e&&(s.Gf(Z,7),s.Gf(b,7),s.Gf(A,7),s.Gf(x,7)),2&e&&(s.iGM(i=s.CRH())&&(t.deleteModal=i.first),s.iGM(i=s.CRH())&&(t.infoModal=i.first),s.iGM(i=s.CRH())&&(t.updateModal=i.first),s.iGM(i=s.CRH())&&(t.errorModal=i.first))},decls:52,vars:20,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mb-1"],[1,"col-md-12","ccl-title"],[1,"row","mb-3"],[1,"col-md-12","ccl-form"],["type","text","readonly","","name","entity","value","","id","entity","autocomplete","new-password",1,"",3,"ngModel","ngModelChange"],["type","text","name","acs","readonly","","value","","id","acs","autocomplete","new-password",1,"",3,"ngModel","ngModelChange"],["type","text","name","emaildomainname","id","emaildomainname","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","keyup","ngModelChange","blur"],[1,"col-md-12"],["name","idp","rows","3","id","idp","trimSpace","",1,"form-control",3,"ngModel","ngModelChange","keyup","blur"],["type","text","name","ssologin","placeholder","","id","ssologin","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","keyup","ngModelChange","blur"],["type","text","name","ssologout","placeholder","","id","ssologout","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","keyup","ngModelChange","blur"],[1,"row"],[1,"col-md-12","text-right"],["type","submit",1,"btn-default","primary","mr-3",3,"disabled","click"],["type","submit",1,"btn-default","primary",3,"disabled","click"],["deleteModal",""],["infoModal",""],["updateModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,T,5,0,"div",1),s.YNc(2,_,6,1,"div",2),s.YNc(3,C,9,1,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"div",6),s.TgZ(8,"div",7),s.TgZ(9,"input",8),s.NdJ("ngModelChange",function(e){return t.entity=e}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"div",5),s._uU(12),s.qZA(),s.qZA(),s.TgZ(13,"div",6),s.TgZ(14,"div",7),s.TgZ(15,"input",9),s.NdJ("ngModelChange",function(e){return t.acs=e}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",4),s.TgZ(17,"div",5),s._uU(18),s.qZA(),s.qZA(),s.TgZ(19,"div",6),s.TgZ(20,"div",7),s.TgZ(21,"input",10),s.NdJ("keyup",function(){return t.domainChange()})("ngModelChange",function(e){return t.emaildomainname=e})("blur",function(){return t.removeUnwantedSpace("emaildomainname",t.emaildomainname)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"div",4),s.TgZ(23,"div",5),s._uU(24),s.qZA(),s.qZA(),s.TgZ(25,"div",6),s.TgZ(26,"div",11),s.TgZ(27,"textarea",12),s.NdJ("ngModelChange",function(e){return t.idp=e})("keyup",function(){return t.idpChange()})("blur",function(){return t.removeUnwantedSpace("idp",t.idp)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(28,"div",4),s.TgZ(29,"div",5),s._uU(30),s.qZA(),s.qZA(),s.TgZ(31,"div",6),s.TgZ(32,"div",7),s.TgZ(33,"input",13),s.NdJ("keyup",function(){return t.ssoLoginChange()})("ngModelChange",function(e){return t.ssologin=e})("blur",function(){return t.removeUnwantedSpace("ssologin",t.ssologin)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(34,"div",4),s.TgZ(35,"div",5),s._uU(36),s.qZA(),s.qZA(),s.TgZ(37,"div",6),s.TgZ(38,"div",7),s.TgZ(39,"input",14),s.NdJ("keyup",function(){return t.ssoLogoutChange()})("ngModelChange",function(e){return t.ssologout=e})("blur",function(){return t.removeUnwantedSpace("ssologout",t.ssologout)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(40,"div",15),s.TgZ(41,"div",16),s.TgZ(42,"button",17),s.NdJ("click",function(){return t.save()}),s._uU(43),s.qZA(),s.TgZ(44,"button",18),s.NdJ("click",function(){return t.deleteSSOinfo()}),s._uU(45),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(46,y,15,5,"ng-template",null,19,s.W1O),s.YNc(48,k,13,4,"ng-template",null,20,s.W1O),s.YNc(50,q,15,5,"ng-template",null,21,s.W1O)),2&e&&(s.xp6(1),s.Q6J("ngIf",t.loading),s.xp6(1),s.Q6J("ngIf",t.error),s.xp6(1),s.Q6J("ngIf",t.success),s.xp6(3),s.Oqu(t.language.entityID),s.xp6(3),s.Q6J("ngModel",t.entity),s.xp6(3),s.hij("",t.language.acs," "),s.xp6(3),s.Q6J("ngModel",t.acs),s.xp6(3),s.Oqu(t.language.emaildomainname),s.xp6(3),s.s9C("placeholder",t.language.domainnametext),s.Q6J("ngModel",t.emaildomainname),s.xp6(3),s.Oqu(t.language.idp),s.xp6(3),s.Q6J("ngModel",t.idp),s.xp6(3),s.Oqu(t.language.ssologin),s.xp6(3),s.Q6J("ngModel",t.ssologin),s.xp6(3),s.Oqu(t.language.ssologout),s.xp6(3),s.Q6J("ngModel",t.ssologout),s.xp6(3),s.Q6J("disabled",t.savebuttonDisabled),s.xp6(1),s.Oqu(t.language.saveEnregistrer),s.xp6(1),s.Q6J("disabled",t.deletebuttonDisabled),s.xp6(1),s.Oqu(t.language.delete))},directives:[f.O5,m.Fj,m.JJ,m.On,v.f],styles:[""]}),w)},3483:function(e,t,i){i.d(t,{y:function(){return O}});var n=i(23771),s=i(79765),r=i(37716),l=i(7450),c=i(12664),d=i(39895),u=i(77745),g=i(89097),p=i(39075),h=i(49342),f=i(38583),m=i(3679),v=i(86640);function Z(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",41),r.TgZ(1,"span",42),r._UZ(2,"img",43),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.TgZ(5,"button",44),r.NdJ("click",function(){return r.CHM(i),r.oxw().closeAlert()}),r._UZ(6,"span"),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(4),r.Oqu(n.errorMessage)}}function b(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",45),r.TgZ(1,"span",46),r._UZ(2,"img",47),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.TgZ(5,"button",44),r.NdJ("click",function(){return r.CHM(i),r.oxw().closeAlert()}),r._UZ(6,"span"),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(4),r.Oqu(n.successMessage)}}function A(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"span",48),r.NdJ("click",function(){return r.CHM(i),r.oxw().clearText()}),r._UZ(1,"img",49),r.qZA()}}function x(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td",50),r.TgZ(10,"span",51),r.TgZ(11,"span"),r._uU(12),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){var i=t.$implicit;r.xp6(2),r.Oqu(i.firstName),r.xp6(2),r.Oqu(i.lastName),r.xp6(2),r.xDo("",i.addressLine1,", ",i.addressLine2,", ",i.city,", ",i.state,", ",i.zip,""),r.xp6(2),r.Oqu(i.email),r.xp6(2),r.Q6J("ngClass",i.matched?"icon-checked":"icon-close"),r.xp6(2),r.Oqu(i.matched)}}function T(e,t){if(1&e&&(r.TgZ(0,"div",52),r.TgZ(1,"div",53),r.TgZ(2,"span",54),r._uU(3),r.qZA(),r.qZA(),r.qZA()),2&e){var i=r.oxw();r.xp6(3),r.Oqu(i.language.Loading)}}function _(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",55),r.TgZ(1,"button",56),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",57),r.TgZ(4,"div",58),r._uU(5),r.qZA(),r.TgZ(6,"div",59),r.TgZ(7,"label"),r._uU(8),r.qZA(),r._UZ(9,"input",60),r.qZA(),r.TgZ(10,"div",61),r.TgZ(11,"button",62),r._uU(12),r.qZA(),r.TgZ(13,"button",63),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(14),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu("Edit File Name"),r.xp6(3),r.Oqu(n.language.fileName),r.xp6(1),r.s9C("value",n.selectedFile.listName),r.xp6(3),r.Oqu(n.language["Save Changes"]),r.xp6(2),r.Oqu(n.language.Cancel)}}function C(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",64),r.TgZ(1,"button",56),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",57),r.TgZ(4,"div",65),r._uU(5),r.qZA(),r.TgZ(6,"div",66),r.TgZ(7,"div",67),r.TgZ(8,"div",68),r.TgZ(9,"label"),r._uU(10),r.qZA(),r._UZ(11,"input",69),r.qZA(),r.TgZ(12,"div",68),r.TgZ(13,"label"),r._uU(14),r.qZA(),r._UZ(15,"input",69),r.qZA(),r.qZA(),r.TgZ(16,"div",67),r.TgZ(17,"div",70),r.TgZ(18,"label"),r._uU(19),r.qZA(),r._UZ(20,"input",69),r.qZA(),r.qZA(),r.TgZ(21,"div",67),r.TgZ(22,"div",68),r.TgZ(23,"label"),r._uU(24),r.qZA(),r._UZ(25,"input",69),r.qZA(),r.TgZ(26,"div",68),r.TgZ(27,"label"),r._uU(28),r.qZA(),r._UZ(29,"input",69),r.qZA(),r.qZA(),r.TgZ(30,"div",67),r.TgZ(31,"div",68),r.TgZ(32,"label"),r._uU(33),r.qZA(),r._UZ(34,"input",69),r.qZA(),r.TgZ(35,"div",68),r.TgZ(36,"label"),r._uU(37),r.qZA(),r._UZ(38,"input",69),r.qZA(),r.qZA(),r.TgZ(39,"div",67),r.TgZ(40,"div",71),r.TgZ(41,"label"),r._uU(42),r.qZA(),r._UZ(43,"input",72),r.qZA(),r.qZA(),r.qZA(),r.TgZ(44,"div",61),r.TgZ(45,"button",62),r._uU(46),r.qZA(),r.TgZ(47,"button",63),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(48),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu("Add Entry"),r.xp6(5),r.Oqu(n.language["First Name"]),r.xp6(4),r.Oqu(n.language["Last Name"]),r.xp6(5),r.Oqu("Email(s)"),r.xp6(5),r.Oqu(n.language["Street Address"]),r.xp6(4),r.Oqu("Apt, Suite, etc."),r.xp6(5),r.Oqu("Town"),r.xp6(4),r.Oqu("State/Province"),r.xp6(5),r.Oqu("ZIP/ZIP+4/Postal Code"),r.xp6(4),r.Oqu(n.language.Save),r.xp6(2),r.Oqu(n.language.Cancel)}}function y(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",64),r.TgZ(1,"button",56),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",57),r.TgZ(4,"div",65),r._uU(5),r.qZA(),r.TgZ(6,"div",66),r.TgZ(7,"div",67),r.TgZ(8,"div",68),r.TgZ(9,"label"),r._uU(10),r.qZA(),r._UZ(11,"input",73),r.qZA(),r.TgZ(12,"div",68),r.TgZ(13,"label"),r._uU(14),r.qZA(),r._UZ(15,"input",74),r.qZA(),r.qZA(),r.TgZ(16,"div",67),r.TgZ(17,"div",70),r.TgZ(18,"label"),r._uU(19),r.qZA(),r._UZ(20,"input",69),r.qZA(),r.qZA(),r.TgZ(21,"div",67),r.TgZ(22,"div",68),r.TgZ(23,"label"),r._uU(24),r.qZA(),r._UZ(25,"input",69),r.qZA(),r.TgZ(26,"div",68),r.TgZ(27,"label"),r._uU(28),r.qZA(),r._UZ(29,"input",69),r.qZA(),r.qZA(),r.TgZ(30,"div",67),r.TgZ(31,"div",68),r.TgZ(32,"label"),r._uU(33),r.qZA(),r._UZ(34,"input",69),r.qZA(),r.TgZ(35,"div",68),r.TgZ(36,"label"),r._uU(37),r.qZA(),r._UZ(38,"input",69),r.qZA(),r.qZA(),r.TgZ(39,"div",67),r.TgZ(40,"div",71),r.TgZ(41,"label"),r._uU(42),r.qZA(),r._UZ(43,"input",75),r.qZA(),r.qZA(),r.qZA(),r.TgZ(44,"div",61),r.TgZ(45,"button",62),r._uU(46),r.qZA(),r.TgZ(47,"button",63),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(48),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu("Edit Entry"),r.xp6(5),r.Oqu(n.language["First Name"]),r.xp6(4),r.Oqu(n.language["Last Name"]),r.xp6(5),r.Oqu("Email(s)"),r.xp6(5),r.Oqu(n.language["Street Address"]),r.xp6(4),r.Oqu("Apt, Suite, etc."),r.xp6(5),r.Oqu("Town"),r.xp6(4),r.Oqu("State/Province"),r.xp6(5),r.Oqu("ZIP/ZIP+4/Postal Code"),r.xp6(4),r.Oqu(n.language["Save Changes"]),r.xp6(2),r.Oqu(n.language.Cancel)}}function k(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",55),r.TgZ(1,"button",56),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",57),r.TgZ(4,"div",76),r.TgZ(5,"div",77),r._UZ(6,"img",78),r.qZA(),r.TgZ(7,"div"),r.TgZ(8,"div",79),r._uU(9),r.qZA(),r.TgZ(10,"button",62),r._uU(11),r.qZA(),r.TgZ(12,"button",80),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(9),r.hij("Are you sure you want to delete ",n.selectedFile.listName,"?"),r.xp6(2),r.Oqu(n.language.Delete),r.xp6(2),r.Oqu(n.language.Cancel)}}function q(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",55),r.TgZ(1,"button",56),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",57),r.TgZ(4,"div",76),r.TgZ(5,"div",77),r._UZ(6,"img",78),r.qZA(),r.TgZ(7,"div"),r.TgZ(8,"div",79),r._uU(9,"Are you sure you want to delete the following Subscriber(s)?"),r.qZA(),r.TgZ(10,"ul",81),r.TgZ(11,"li"),r._uU(12," Bessie "),r.qZA(),r.TgZ(13,"li"),r._uU(14," Darrell "),r.qZA(),r.TgZ(15,"li"),r._uU(16," Kathryn "),r.qZA(),r.qZA(),r.TgZ(17,"button",62),r._uU(18),r.qZA(),r.TgZ(19,"button",80),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(20),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(18),r.Oqu(n.language.Delete),r.xp6(2),r.Oqu(n.language.Cancel)}}var w,O=((w=function(){function e(t,i,n,o,r,l,c){var d,u,g;a(this,e),this.translateService=t,this.dialogService=i,this.router=n,this.prospectSubscriberService=o,this.sso=r,this.titleService=l,this.commonOrgService=c,this.dtOptions={},this.selectedFilter="All",this.loading=!1,this.prospectListDetailError=!1,this.successMessage="",this.subscriptions=[],this.dtTrigger=new s.xQ,this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("subscriber-prospect-list"),this.selectedFile=null===(g=null===(u=null===(d=this.router.getCurrentNavigation())||void 0===d?void 0:d.extras)||void 0===u?void 0:u.state)||void 0===g?void 0:g.selectedFile,this.selectedFile||this.goBackToSubscriber()}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,retrieve:!0,processing:!1,dom:"tipr",searching:!0,ordering:!0,order:[4,"asc"],columnDefs:[{targets:[0,1,2,3],orderable:!1}]},this.language=this.translateService.defualtLanguage,this.titleService.setTitle("".concat(this.language.Subscriber," ").concat(this.language.Prospect," ").concat(this.language.File," ").concat(this.language.Upload,"-").concat("systemAdministration"===this.MODULE?"System Administration":"Administration"," - ").concat(this.language["Calix Cloud"])),this.subscriptions.push(this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.Subscriber," ").concat(e.language.Prospect," ").concat(e.language.File," ").concat(e.language.Upload,"-").concat("systemAdministration"===e.MODULE?"System Administration":"Administration"," - Calix Cloud")),e.getFileDetails(),e.setTableOptions()})),this.getFileDetails(),this.tableLanguageOptions()}},{key:"getFileDetails",value:function(){var e=this;this.loading=!0,this.subscriptions.push(this.prospectSubscriberService.getFileData(this.selectedFile.id,this.selectedFile.listType).subscribe(function(t){e.reRender(),e.prospectListDetailError=!1,t&&t.fileData&&t.fileData.length>0?(e.prospectListDetailError=!1,e.prospectDetailLists=t.fileData,e.prospectAllLists=t.fileData,e.prospectMetaData=t.metaData):e.goBackToSubscriber(),setTimeout(function(){e.reRender(),e.searchText&&e.searchName(e.searchText),e.loading=!1},500)},function(t){e.prospectListDetailError=!0,setTimeout(function(){return e.reRender()},500),e.loading=!1,e.errorMessage=e.errorHandler(t),e.successMessage=""}))}},{key:"allSelected",value:function(){var e=this;this.loading=!0,this.reRender(),"Match"===this.selectedFilter?this.prospectDetailLists=this.prospectAllLists.filter(function(e){return!0===e.matched}):"Non-Match"===this.selectedFilter?this.prospectDetailLists=this.prospectAllLists.filter(function(e){return!e.matched}):"All"===this.selectedFilter&&(this.prospectDetailLists=this.prospectAllLists),setTimeout(function(){e.reRender(),e.searchText&&e.searchName(e.searchText),e.loading=!1},500)}},{key:"reRender",value:function(){var e,t,i=this;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(function(e){e.destroy(),i.dtTrigger.next()}),this.dtTrigger.next()}},{key:"errorHandler",value:function(e){return e.error?e.error.errorDesc?this.errorMessage=e.error.errorDesc:500==e.error.status?this.errorMessage="Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?this.errorMessage="An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status&&(this.errorMessage="User Unauthorized"):this.errorMessage=this.commonOrgService.pageErrorHandle(e),this.errorMessage}},{key:"searchName",value:function(e){var t,i;null===(i=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===i||i.then(function(t){t.search(e).draw()}),this.closeAlert()}},{key:"clearText",value:function(){this.searchText="",this.searchName(this.searchText)}},{key:"closeAlert",value:function(){this.errorMessage="",this.successMessage=""}},{key:"goBackToSubscriber",value:function(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/subscriber-prospect-upload"])}},{key:"SubscriberEditFileNameModal",value:function(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-custom-modal"})}},{key:"SubscriberAddEntryModal",value:function(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-custom-modal"})}},{key:"SubscriberEditModal",value:function(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-custom-modal"})}},{key:"SubscriberDeleteModal",value:function(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-delete-modal"})}},{key:"SubscriberListDeleteModal",value:function(e){this.modalRef=this.dialogService.open(e,{centered:!0,windowClass:"custom-modal subscriber-delete-modal"})}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&delete this.dtOptions.language}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return null==e?void 0:e.unsubscribe()}),this.dtTrigger&&this.dtTrigger.unsubscribe()}},{key:"setTableOptions",value:function(){var e=this;this.tableLanguageOptions(),setTimeout(function(){e.reRender()},200)}}]),e}()).\u0275fac=function(e){return new(e||w)(r.Y36(l.s),r.Y36(c.FF),r.Y36(d.F0),r.Y36(u.g),r.Y36(g.t6),r.Y36(p.Dx),r.Y36(h.v))},w.\u0275cmp=r.Xpm({type:w,selectors:[["app-subscriber-prospect-list"]],viewQuery:function(e,t){var i;1&e&&r.Gf(n.G,5),2&e&&r.iGM(i=r.CRH())&&(t.dtElement=i.first)},decls:67,vars:24,consts:[[1,"container","position-relative"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","mb-3"],[1,"d-flex","w-100","align-items-center","border-bottom-gray","pb-3"],[1,"col-9","px-0"],[1,"ccl-admin-title","align-items-center","row"],[1,"col-auto","text-nowrap","subs-name","pr-2"],[1,"col","pt-3"],[1,"col-3","px-0"],[1,"d-flex","align-items-center","justify-content-end"],[1,"subscriber-dot","mr-3"],["type","button",1,"close",3,"click"],[1,"row",3,"hidden"],[1,"table-filter","w-100"],[1,"mb-3"],[1,"text-capitalize"],[1,"ccl-form"],[1,"table-filter","d-flex","flex-wrap","justify-content-between","align-items-center","w-100"],[1,"d-flex","flex-wrap"],[1,"search-input","pr-4"],["type","text",3,"placeholder","ngModel","ngModelChange","input"],["class","pos-abs-right",3,"click",4,"ngIf"],[1,"d-inline-flex","align-items-center"],[1,"ngselect-min"],[1,"w-100",3,"ngModel","change","ngModelChange"],["value","All"],["value","Match"],["value","Non-Match"],[1,"overflow-auto","w-100","mt-3"],["datatable","",1,"zip-code-table","table","table-hover",3,"dtOptions","dtTrigger"],[1,"w-20"],[1,"w-30"],[1,"w-10"],[4,"ngFor","ngForOf"],["class","center-chart flex mt-60",4,"ngIf"],["SubscriberEditFileName",""],["SubscriberAddEntry",""],["SubscriberEdit",""],["SubscriberDelModal",""],["SubscriberListDelModal",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","mt-10",3,"click"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"text-center"],[3,"ngClass"],[1,"center-chart","flex","mt-60"],[1,"spinner-border","text-primary","mt-60"],[1,"sr-only"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"subscriber-modal-content"],[1,"ccl-admin-title","mb-3"],[1,"ccl-form","mb-2"],["type","text",3,"value"],[1,"mt-4"],[1,"btn-default","primary","mr-3"],[1,"btn-link","primary",3,"click"],[1,"w-100","pb-3"],["id","AddSubscriberListTitle",1,"ccl-admin-title","mb-2"],[1,"modal-form-container"],[1,"row"],[1,"col-sm-6","ccl-form","mb-2"],["type","text"],[1,"col-12","ccl-form","mb-2"],[1,"col-6","ccl-form","mb-2"],["type","text",1,"max-160px"],["type","text","value","Stev"],["type","text","value","Smith"],["type","text","value","600015",1,"max-160px"],[1,"d-flex"],[1,"warn-icon-min"],["src","../../../assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title","mb-3"],[1,"btn-dft","btn-default","py-1",3,"click"],[1,"my-3","pl-4","pb-4"]],template:function(e,t){var i,n;1&e&&(r.TgZ(0,"div",0),r.YNc(1,Z,7,1,"div",1),r.YNc(2,b,7,1,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"div",5),r.TgZ(6,"div",6),r.TgZ(7,"div",7),r._uU(8),r.qZA(),r._UZ(9,"div",8),r.qZA(),r.qZA(),r.TgZ(10,"div",9),r.TgZ(11,"div",10),r._UZ(12,"div",11),r.TgZ(13,"button",12),r.NdJ("click",function(){return t.goBackToSubscriber()}),r._UZ(14,"span"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"div",13),r.TgZ(16,"div",14),r.TgZ(17,"div",15),r.TgZ(18,"p"),r.TgZ(19,"b"),r._uU(20),r.qZA(),r.TgZ(21,"span",16),r._uU(22),r.qZA(),r._uU(23),r.qZA(),r.qZA(),r.TgZ(24,"div",17),r.TgZ(25,"div",18),r.TgZ(26,"div",17),r.TgZ(27,"div",19),r.TgZ(28,"div",20),r.TgZ(29,"input",21),r.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)}),r.qZA(),r.YNc(30,A,2,0,"span",22),r.qZA(),r.qZA(),r.qZA(),r.TgZ(31,"div",23),r.TgZ(32,"div",24),r.TgZ(33,"ng-select",25),r.NdJ("change",function(){return t.allSelected()})("ngModelChange",function(e){return t.selectedFilter=e}),r.TgZ(34,"ng-option",26),r._uU(35),r.qZA(),r.TgZ(36,"ng-option",27),r._uU(37),r.qZA(),r.TgZ(38,"ng-option",28),r._uU(39),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(40,"div",29),r.TgZ(41,"table",30),r.TgZ(42,"thead"),r.TgZ(43,"tr"),r.TgZ(44,"th",31),r._uU(45),r.qZA(),r.TgZ(46,"th",31),r._uU(47),r.qZA(),r.TgZ(48,"th",32),r._uU(49),r.qZA(),r.TgZ(50,"th",31),r._uU(51),r.qZA(),r.TgZ(52,"th",33),r._uU(53),r.qZA(),r.qZA(),r.qZA(),r.TgZ(54,"tbody"),r.YNc(55,x,13,10,"tr",34),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(56,T,4,1,"div",35),r.YNc(57,_,15,5,"ng-template",null,36,r.W1O),r.YNc(59,C,49,11,"ng-template",null,37,r.W1O),r.YNc(61,y,49,11,"ng-template",null,38,r.W1O),r.YNc(63,k,14,3,"ng-template",null,39,r.W1O),r.YNc(65,q,21,2,"ng-template",null,40,r.W1O)),2&e&&(r.xp6(1),r.Q6J("ngIf",t.errorMessage),r.xp6(1),r.Q6J("ngIf",t.successMessage),r.xp6(6),r.hij(" ",null==t.selectedFile?null:t.selectedFile.listName," "),r.xp6(7),r.Q6J("hidden",t.loading),r.xp6(5),r.Oqu(null!==(i=null==t.prospectMetaData?null:t.prospectMetaData.matchedCount)&&void 0!==i?i:0),r.xp6(2),r.hij(" ",null!==(n=null==t.prospectMetaData?null:t.prospectMetaData.listType)&&void 0!==n?n:""," "),r.xp6(1),r.hij(" ",t.language["successfully matched to existing records"]," "),r.xp6(6),r.s9C("placeholder",t.language.Search),r.Q6J("ngModel",t.searchText),r.xp6(1),r.Q6J("ngIf",t.searchText),r.xp6(3),r.Q6J("ngModel",t.selectedFilter),r.xp6(2),r.AsE("",t.language.All," ",t.language.entries,""),r.xp6(2),r.Oqu(t.language["Matching entries"]),r.xp6(2),r.Oqu(t.language["Non-Matching entries"]),r.xp6(2),r.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),r.xp6(4),r.Oqu(t.language["First Name"]),r.xp6(2),r.Oqu(t.language["Last Name"]),r.xp6(2),r.Oqu(t.language["Street Address"]),r.xp6(2),r.Oqu(t.language["Email(s)"]),r.xp6(2),r.Oqu(t.language["Record Match"]),r.xp6(2),r.Q6J("ngForOf",t.prospectDetailLists),r.xp6(1),r.Q6J("ngIf",t.loading))},directives:[f.O5,m.Fj,m.JJ,m.On,v.w9,v.xv,n.G,f.sg,f.mk],styles:[".border-bottom-gray[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.subs-name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}.icon-checked[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{content:url(success-icon.4b28f44149a093cf0dfa.svg);max-width:20px;margin-right:14px;font-size:0}.icon-close[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{content:url(ic_error_grey.48fa69db1aebd3a5abca.svg);max-width:20px;margin-right:14px;font-size:0}.ngselect-min[_ngcontent-%COMP%]{min-width:160px}.th-del-action[_ngcontent-%COMP%]{min-width:40px}.subscriber-dot[_ngcontent-%COMP%]{display:inline-flex}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 5px 15px #80808040;-webkit-box-shadow:0px 5px 15px rgba(128,128,128,.25);border-color:#0000000d!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer;width:100%!important;border-radius:0!important;text-align:left;line-height:24px;height:34px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#edf5ff!important}.subscriber-dot[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{outline:none!important;width:32px;height:32px;background:#F8F8FA;border-radius:26px;border-color:transparent}.dropdown-toggle[_ngcontent-%COMP%]:before{display:none!important}.subscriber-dot[_ngcontent-%COMP%]   .dropdown-toggle.show[_ngcontent-%COMP%]{color:#0279ff}.del-btn.btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.min-110px[_ngcontent-%COMP%]{width:110px}.min-90px[_ngcontent-%COMP%]{width:90px}  .subscriber-delete-modal .modal-dialog{max-width:45.33%!important}  .subscriber-custom-modal .modal-dialog{max-width:46.89%!important}  .subscriber-delete-modal .modal-content{background:#FFF9F5!important}  .subscriber-modal-content{padding:0 20px 15px}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.subscriber-modal-content[_ngcontent-%COMP%]{padding:0 20px 15px}.subscriber-modal-content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.max-160px[_ngcontent-%COMP%]{max-width:160px}.modal-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}"]}),w)},57923:function(e,t,i){i.d(t,{B:function(){return R}});var n=i(23771),s=i(79765),r=i(37716),l=i(7450),c=i(12664),d=i(77745),u=i(53668),g=i(39895),p=i(89097),h=i(49342),f=i(39075),m=i(20904),v=i(13149),Z=i(38583),b=i(3679),A=i(74062);function x(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",27),r.TgZ(1,"span",28),r._UZ(2,"img",29),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.TgZ(5,"button",30),r.NdJ("click",function(){return r.CHM(i),r.oxw().closeAlert()}),r._UZ(6,"span"),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(4),r.Oqu(n.errorMessage)}}function T(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",31),r.TgZ(1,"span",32),r._UZ(2,"img",33),r.qZA(),r.TgZ(3,"span"),r._uU(4),r.qZA(),r.TgZ(5,"button",30),r.NdJ("click",function(){return r.CHM(i),r.oxw().closeAlert()}),r._UZ(6,"span"),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(4),r.Oqu(n.successMessage)}}function _(e,t){if(1&e&&(r.TgZ(0,"div",34),r._uU(1),r.qZA()),2&e){var i=r.oxw();r.xp6(1),r.hij(" ",i.language["subscriber-prospect-upload"]," ")}}function C(e,t){if(1&e&&(r.TgZ(0,"div",34),r._uU(1),r.qZA()),2&e){var i=r.oxw();r.xp6(1),r.lnq(" ",i.language.Subscriber,"\xa0",i.language.File,"\xa0",i.language.Upload," ")}}function y(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"span",35),r.NdJ("click",function(){return r.CHM(i),r.oxw().clearText()}),r._UZ(1,"img",36),r.qZA()}}function k(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"a",41),r.NdJ("click",function(){r.CHM(i);var e=r.oxw().$implicit,t=r.oxw(),n=r.MAs(46);return t.openSubscriberDeleteModal(e,n)}),r._UZ(1,"i",42),r.qZA()}}function q(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r.TgZ(2,"a",37),r.NdJ("click",function(){var e=r.CHM(i).$implicit;return r.oxw().goToSubscriber(e)}),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"td",38),r._uU(5),r.qZA(),r.TgZ(6,"td",38),r._uU(7),r.qZA(),r.TgZ(8,"td"),r._uU(9),r.ALo(10,"date"),r.qZA(),r.TgZ(11,"td"),r.TgZ(12,"div",39),r.YNc(13,k,2,0,"a",40),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=t.$implicit,a=r.oxw();r.xp6(3),r.Oqu(n.listName),r.xp6(2),r.Oqu(n.listType),r.xp6(2),r.Oqu(n.processed?a.language.Ready:a.language.Unprocessed),r.xp6(2),r.Oqu(r.xi3(10,5,n.createdTime,"d MMMM, y")),r.xp6(4),r.Q6J("ngIf",!n.processed||n.processed&&0==n.audienceSize)}}function w(e,t){if(1&e&&(r.TgZ(0,"div",43),r.TgZ(1,"div",44),r.TgZ(2,"span",45),r._uU(3),r.qZA(),r.qZA(),r.qZA()),2&e){var i=r.oxw();r.xp6(3),r.Oqu(i.language.Loading)}}function O(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"a",59),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).downloadFunction()}),r._uU(1),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(1),r.hij(" ",n.language["Download Template"],"")}}function S(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"a",59),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).downloadFunction()}),r._uU(1),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(1),r.hij(" ",n.language["Download Template"],"")}}function M(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",46),r.TgZ(1,"button",47),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",48),r.TgZ(4,"div",49),r._uU(5),r.qZA(),r.TgZ(6,"p"),r._uU(7),r.qZA(),r.TgZ(8,"p"),r._uU(9),r.qZA(),r.TgZ(10,"div",50),r._uU(11),r.qZA(),r.TgZ(12,"div",51),r.TgZ(13,"div",3),r.TgZ(14,"div",52),r.TgZ(15,"table",53),r.TgZ(16,"thead"),r.TgZ(17,"tr"),r.TgZ(18,"th"),r._uU(19),r.qZA(),r.TgZ(20,"th"),r._uU(21),r.qZA(),r.TgZ(22,"th"),r._uU(23),r.qZA(),r.TgZ(24,"th"),r._uU(25),r.qZA(),r.TgZ(26,"th"),r._uU(27),r.qZA(),r.TgZ(28,"th"),r._uU(29),r.qZA(),r.TgZ(30,"th"),r._uU(31,"Zip"),r.qZA(),r.TgZ(32,"th"),r._uU(33),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"tbody"),r.TgZ(35,"tr"),r.TgZ(36,"td"),r._uU(37,"Tom"),r.qZA(),r.TgZ(38,"td"),r._uU(39,"Jones"),r.qZA(),r.TgZ(40,"td"),r._uU(41,"123 East Lane"),r.qZA(),r.TgZ(42,"td"),r._uU(43,"Ap # 6"),r.qZA(),r.TgZ(44,"td"),r._uU(45,"San Jose"),r.qZA(),r.TgZ(46,"td"),r._uU(47,"CA"),r.qZA(),r.TgZ(48,"td"),r._uU(49,"23137"),r.qZA(),r.TgZ(50,"td"),r._uU(51,"tom.j@email.com; tom2@email.com"),r.qZA(),r.qZA(),r.TgZ(52,"tr"),r.TgZ(53,"td"),r._uU(54,"Bailey"),r.qZA(),r.TgZ(55,"td"),r._uU(56,"Thompson"),r.qZA(),r.TgZ(57,"td"),r._uU(58,"P.O. Box 132"),r.qZA(),r.TgZ(59,"td"),r._uU(60,"77 Sunny St."),r.qZA(),r.TgZ(61,"td"),r._uU(62,"Omaha"),r.qZA(),r.TgZ(63,"td"),r._uU(64,"Idaho"),r.qZA(),r.TgZ(65,"td"),r._uU(66,"32140"),r.qZA(),r._UZ(67,"td"),r.qZA(),r.TgZ(68,"tr"),r.TgZ(69,"td"),r._uU(70,"Tina"),r.qZA(),r.TgZ(71,"td"),r._uU(72,"Hawkins"),r.qZA(),r.TgZ(73,"td"),r._uU(74,"22-109 Great Avenue"),r.qZA(),r._UZ(75,"td"),r.TgZ(76,"td"),r._uU(77,"Chicago"),r.qZA(),r.TgZ(78,"td"),r._uU(79,"IL"),r.qZA(),r.TgZ(80,"td"),r._uU(81,"00011"),r.qZA(),r.TgZ(82,"td"),r._uU(83,"tina@email.com"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(84,"div",54),r.TgZ(85,"button",55),r._uU(86),r.TgZ(87,"input",56),r.NdJ("change",function(e){r.CHM(i);var t=r.oxw(),n=r.MAs(42);return t.fileSelected(e,n)}),r.qZA(),r.qZA(),r.YNc(88,O,2,1,"a",57),r.YNc(89,S,2,1,"a",57),r.TgZ(90,"button",58),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(91),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu(n.language["Upload File"]),r.xp6(2),r.Oqu(n.language["All uploaded files should have 8 columns or fewer,and fewer than 10,000 rows.Street Address1,City,State,ZIP are required(may not be blank)."]),r.xp6(2),r.Oqu(n.language["Please use the column formats shown below:"]),r.xp6(2),r.hij("",n.language["File Example"]," "),r.xp6(8),r.Oqu(n.language["First Name"]),r.xp6(2),r.Oqu(n.language["Last Name"]),r.xp6(2),r.hij("",n.language["Street Address"]," 1"),r.xp6(2),r.hij("",n.language["Street Address"]," 2"),r.xp6(2),r.Oqu(n.language.City),r.xp6(2),r.Oqu(n.language.State),r.xp6(4),r.Oqu(n.language["Email(s)"]),r.xp6(53),r.hij(" ",n.language.Browse," "),r.xp6(1),r.s9C("title",n.language["no file chosen"]),r.xp6(1),r.Q6J("ngIf",n.apps.cmcPro),r.xp6(1),r.Q6J("ngIf",!n.apps.cmcPro),r.xp6(2),r.Oqu(n.language.Cancel)}}function U(e,t){if(1&e&&(r.TgZ(0,"div",62),r.TgZ(1,"label"),r._uU(2),r.qZA(),r.qZA()),2&e){var i=r.oxw(2);r.xp6(2),r.Oqu(i.language.Type)}}function D(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",69),r.TgZ(1,"input",73),r.NdJ("change",function(e){return r.CHM(i),r.oxw(3).prospectSelected(e.target.checked)}),r.qZA(),r.TgZ(2,"label",74),r._uU(3),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(3);r.xp6(1),r.Q6J("checked",n.prospectChecked),r.xp6(2),r.hij(" ",n.language.prospects," ")}}function N(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",62),r.TgZ(1,"div",68),r.TgZ(2,"div",69),r.TgZ(3,"input",70),r.NdJ("change",function(e){return r.CHM(i),r.oxw(2).subscriberSelected(e.target.checked)}),r.qZA(),r.TgZ(4,"label",71),r._uU(5),r.qZA(),r.qZA(),r.YNc(6,D,4,2,"div",72),r._UZ(7,"div"),r._UZ(8,"div"),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(3),r.Q6J("checked",n.subscriberChecked),r.xp6(2),r.hij(" ",n.language.Subscribers," "),r.xp6(1),r.Q6J("ngIf",n.apps.cmcPro)}}function I(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"button",75),r.NdJ("click",function(){return r.CHM(i),r.oxw(2).saveFile()}),r._uU(1),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(1),r.Oqu(n.language.Save)}}function E(e,t){if(1&e&&(r.TgZ(0,"button",76),r._uU(1),r.qZA()),2&e){var i=r.oxw(2);r.xp6(1),r.Oqu(i.language.Save)}}function F(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",46),r.TgZ(1,"button",47),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",60),r.TgZ(4,"div",61),r._uU(5),r.qZA(),r.TgZ(6,"div",62),r.TgZ(7,"label"),r._uU(8),r.qZA(),r.TgZ(9,"input",63),r.NdJ("ngModelChange",function(e){return r.CHM(i),r.oxw().selectedFileName=e})("blur",function(){r.CHM(i);var e=r.oxw();return e.removeUnwantedSpace("selectedFileName",e.selectedFileName)}),r.qZA(),r.qZA(),r.YNc(10,U,3,1,"div",64),r.YNc(11,N,9,3,"div",64),r.TgZ(12,"div",65),r.YNc(13,I,2,1,"button",66),r.YNc(14,E,2,1,"button",67),r.TgZ(15,"button",58),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(16),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu(n.language.fileName),r.xp6(3),r.Oqu(n.language.Name),r.xp6(1),r.Q6J("ngModel",n.selectedFileName),r.xp6(1),r.Q6J("ngIf",n.apps.cmcPro),r.xp6(1),r.Q6J("ngIf",n.apps.cmcPro),r.xp6(2),r.Q6J("ngIf",n.selectedFileName),r.xp6(1),r.Q6J("ngIf",!n.selectedFileName),r.xp6(2),r.Oqu(n.language.Cancel)}}function P(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",46),r.TgZ(1,"button",47),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",60),r.TgZ(4,"div",61),r._uU(5),r.qZA(),r.TgZ(6,"div",62),r.TgZ(7,"label"),r._uU(8),r.qZA(),r._UZ(9,"input",77),r.qZA(),r.TgZ(10,"div",65),r.TgZ(11,"button",78),r._uU(12),r.qZA(),r.TgZ(13,"button",58),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(14),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(5),r.Oqu(n.language.fileName),r.xp6(3),r.Oqu(n.language.Name),r.xp6(4),r.Oqu(n.language["Save Changes"]),r.xp6(2),r.Oqu(n.language.Cancel)}}function L(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",46),r.TgZ(1,"button",47),r.NdJ("click",function(){return r.CHM(i).$implicit.dismiss("Cross click")}),r._UZ(2,"span"),r.qZA(),r.qZA(),r.TgZ(3,"div",60),r.TgZ(4,"div",79),r.TgZ(5,"div",80),r._UZ(6,"img",81),r.qZA(),r.TgZ(7,"div"),r.TgZ(8,"div",82),r._uU(9),r.qZA(),r.TgZ(10,"button",75),r.NdJ("click",function(){return r.CHM(i),r.oxw().deleteFile()}),r._uU(11),r.qZA(),r.TgZ(12,"button",83),r.NdJ("click",function(){return r.CHM(i).$implicit.close("Close click")}),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(9),r.AsE("",n.language["Are you sure you want to delete"],"",n.fileTodelete.listName," "),r.xp6(2),r.Oqu(n.language.Delete),r.xp6(2),r.Oqu(n.language.Cancel)}}var J,R=((J=function(){function e(t,i,n,o,r,l,c,d,u,g){a(this,e),this.translateService=t,this.dialogService=i,this.prospectSubscriberService=n,this.organizationApiService=o,this.router=r,this.sso=l,this.commonOrgService=c,this.titleService=d,this.CommonFunctionsService=u,this.exportExcelService=g,this.dtOptions={},this.loading=!1,this.errorMessage="",this.successMessage="",this.saveButtonShow=!1,this.prospectListError=!1,this.subscriberChecked=!0,this.prospectChecked=!1,this.selectedFileName="",this.listName="",this.subscriptions=[],this.apps={cmcPro:!1,cmc:!1},this.dtTrigger=new s.xQ;var p=this.router.url;this.MODULE=this.sso.getRedirectModule(p),this.ORG_ID=this.sso.getOrganizationID(p),this.commonOrgService.currentPageAdder("subscriber-prospect-upload")}return o(e,[{key:"ngOnInit",value:function(){var e=this;"systemAdministration"===this.MODULE?this.getorgInfoData():this.showApps(),this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,ordering:!0,order:[0,"asc"],searching:!0,dom:"tipr",retrieve:!0,processing:!1,columnDefs:[{targets:[3,4],orderable:!1}]},this.language=this.translateService.defualtLanguage,this.titleService.setTitle("".concat(this.language.Subscriber," ").concat(this.language.Prospect," ").concat(this.language.File," ").concat(this.language.Upload," - ").concat("systemAdministration"===this.MODULE?"System Administration":"Administration"," - ").concat(this.language["Calix Cloud"])),this.subscriptions.push(this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language.Subscriber," ").concat(e.language.Prospect," ").concat(e.language.File," ").concat(e.language.Upload," - ").concat("systemAdministration"===e.MODULE?"System Administration":"Administration"," - ").concat(e.language["Calix Cloud"])),e.closeAlert(),e.getFileList(),e.setTableOptions()})),this.getFileList(),this.tableLanguageOptions()}},{key:"subscriberSelected",value:function(e){this.subscriberChecked=e,this.prospectChecked=!e}},{key:"prospectSelected",value:function(e){this.prospectChecked=e,this.subscriberChecked=!e}},{key:"fileSelected",value:function(e,t){var i,n=this,a=e.target.files[0],s=this,o=new FileReader;if(o.readAsText(a),o.onload=function(e){var t=e.target.result.split("\n");t[0]="First Name,Last Name,Street Address 1,Street Address 2,City,State,Zip,Email(s)";var n=t.join("\n");i=new Blob([n],{type:"text/csv"}),s.selectedFile=new File([i],a.name,{type:"text/csv"})},!a||!a.name.endsWith(".csv"))return this.errorMessage=this.language["Please upload a file with valid format (.csv)"],void setTimeout(function(){n.scrollTop(),n.dialogService.dismissAll()},200);this.openSubscriberFileNameModal(t),this.selectedFileName=a.name.replace(/\.[^/.]+$/gm,"").replace(/[^a-zA-Z0-9 _.-]+/gm,""),this.selectedFile=a,e.target.value="",this.subscriberSelected(!0)}},{key:"saveFile",value:function(){var e,t=this;this.closeAlert(),this.loading=!0,this.selectedFileName=this.selectedFileName.trim(),e=this.subscriberChecked?this.prospectSubscriberService.saveSubscriberFile(this.selectedFile,this.selectedFileName):this.prospectChecked?this.prospectSubscriberService.saveProspectFile(this.selectedFile,this.selectedFileName):this.prospectSubscriberService.saveSubscriberFile(this.selectedFile,this.selectedFileName),this.subscriptions.push(e.subscribe(function(e){t.successMessage=t.language["Saved Successfully"],t.errorMessage="",t.getFileList()},function(e){t.errorMessage=t.errorHandler(e),t.successMessage="",t.loading=!1})),setTimeout(function(){t.scrollTop(),t.dialogService.dismissAll()},500)}},{key:"deleteFile",value:function(){var e,t=this;this.loading=!0,"prospects"==this.fileTodelete.listType?e=this.prospectSubscriberService.deleteProspect(this.fileTodelete.id):"subscribers"==this.fileTodelete.listType&&(e=this.prospectSubscriberService.deleteSubscriber(this.fileTodelete.id)),this.subscriptions.push(e.subscribe(function(e){t.successMessage=t.language["Deleted Successfully"],console.log(t.successMessage),t.errorMessage="",t.getFileList()},function(e){t.errorMessage=t.errorHandler(e),t.successMessage="",t.loading=!1})),setTimeout(function(){t.scrollTop(),t.dialogService.dismissAll()},500)}},{key:"scrollTop",value:function(){window.scroll({top:0,left:0,behavior:"smooth"})}},{key:"closeAlert",value:function(){this.errorMessage="",this.successMessage=""}},{key:"redirectToFileUpload",value:function(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/subscriber-prospect-upload"])}},{key:"searchName",value:function(e){this.dtElement.dtInstance.then(function(t){t.search(e).draw()})}},{key:"clearText",value:function(){this.searchText="",this.searchName(this.searchText)}},{key:"getFileList",value:function(){var e=this;this.loading=!0,this.subscriptions.push(this.prospectSubscriberService.getFileList().subscribe(function(t){e.reRender(),e.prospectListError=!1,t&&t.length>0?(e.prospectListError=!1,e.apps.cmcPro||(t=t.filter(function(e){return"prospects"!=e.listType})),e.prospectLisData=t):(e.prospectListError=!0,e.prospectLisData=[]),setTimeout(function(){e.reRender(),e.searchText&&e.searchName(e.searchText),e.loading=!1},500)},function(t){e.prospectListError=!0,setTimeout(function(){return e.reRender()},500),e.loading=!1,e.errorMessage=e.errorHandler(t),e.successMessage=""}))}},{key:"errorHandler",value:function(e){return e.error?e.error.errorDesc?this.errorMessage=e.error.errorDesc:500==e.error.status?this.errorMessage="Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?this.errorMessage="An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status?this.errorMessage="User Unauthorized":e.error.message&&(this.errorMessage=e.error.message):this.errorMessage=this.commonOrgService.pageErrorHandle(e),this.errorMessage}},{key:"reRender",value:function(){var e,t,i=this;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(function(e){e.destroy(),i.dtTrigger.next()}),this.dtTrigger.next()}},{key:"openSubscriberFileNameModal",value:function(e){this.modalRef=this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"custom-modal subscriber-custom-edit"})}},{key:"openSubscriberEditFileNameModal",value:function(e){this.modalRef=this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"custom-modal subscriber-custom-edit"})}},{key:"openSubscriberDeleteModal",value:function(e,t){this.closeAlert(),this.modalRef=this.dialogService.open(t,{centered:!0,windowClass:"custom-modal subscriber-alert-delete",backdrop:"static",keyboard:!1}),this.fileTodelete=e}},{key:"openSubscriberUploadModal",value:function(e){this.closeAlert(),this.modalRef=this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"custom-modal subscriber-custom-upload"})}},{key:"goToSubscriber",value:function(e){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/subscriber-prospect-list"],{state:{selectedFile:e}})}},{key:"validateFileName",value:function(){return/^[A-Za-z0-9 _.-]+$/gm.test(this.selectedFileName.trim())}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&delete this.dtOptions.language}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return null==e?void 0:e.unsubscribe()}),this.dtTrigger&&this.dtTrigger.unsubscribe()}},{key:"showApps",value:function(){this.sso.getEntitlements()[209]&&(this.apps.cmcPro=!0)}},{key:"setTableOptions",value:function(){var e=this;this.tableLanguageOptions(),setTimeout(function(){e.reRender()},200)}},{key:"getorgInfoData",value:function(){var e=this;this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(function(t){var i;if(e.orgInfoEntitlementdata=t,t){for(var n={},a=0;a<(null===(i=e.orgInfoEntitlementdata)||void 0===i?void 0:i.length);a++)n[e.orgInfoEntitlementdata[a].appType]=e.orgInfoEntitlementdata[a];e.apps.cmc=!!(n[119]&&"Expired"!==n[119].status||n[209]&&"Expired"!==n[209].status),e.apps.cmcPro=!(!n[209]||"Expired"===n[209].status)}},function(e){})}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}},{key:"downloadFunction",value:function(){var e="";this.apps.cmcPro&&(e="".concat(this.language.Subscriber,"_").concat(this.language.Prospect,"_").concat(this.language.Template)),this.apps.cmcPro||(e="".concat(this.language.Subscriber,"_").concat(this.language.Template));var t=this,i=[];[{"First Name":"Tom","Last Name":"Jones","Street Address1":"123 East Lane","Street Address2":"Ap # 6",City:"San Jose",State:"CA",Zip:"23137","Email(s)":"tom.j@email.com; tom2@email.com"},{"First Name":"Bailey","Last Name":"Thompson","Street Address1":"P.O. Box 132","Street Address2":"77 Sunny St.",City:"Omaha",State:"Idaho",Zip:"32140","Email(s)":""},{"First Name":"Tina","Last Name":"Hawkins","Street Address1":"22-109 Great Avenue","Street Address2":"",City:"Chicago",State:"IL",Zip:"00011","Email(s)":"tina@email.com"}].map(function(e){return function(e){var n={};for(var a in e){var s=void 0,o=t.language[a];("Street Address1"==a||"Street Address2"==a)&&(s=a.substring(0,a.length-1),o=t.language[s]),o?"Street Address1"==a?n["".concat(o," 1")]=e[a]:"Street Address2"==a?n["".concat(o," 2")]=e[a]:n[o]=e[a]:n[a]=e[a]}return i.push(n),n}(e)}),this.exportExcelService.downLoadCSVRevenue(e,i)}}]),e}()).\u0275fac=function(e){return new(e||J)(r.Y36(l.s),r.Y36(c.FF),r.Y36(d.g),r.Y36(u.F),r.Y36(g.F0),r.Y36(p.t6),r.Y36(h.v),r.Y36(f.Dx),r.Y36(m.i),r.Y36(v.O))},J.\u0275cmp=r.Xpm({type:J,selectors:[["app-subscriber-prospect-upload"]],viewQuery:function(e,t){var i;1&e&&r.Gf(n.G,5),2&e&&r.iGM(i=r.CRH())&&(t.dtElement=i.first)},decls:47,vars:21,consts:[[1,"container","position-relative"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"w-100"],["class","ccl-admin-title",4,"ngIf"],[1,"w-100","d-flex","flex-wrap","align-items-center","mt-1"],[1,"btn-default","primary",3,"click"],[1,"row",3,"hidden"],[1,"table-filter"],[1,"ccl-form"],[1,"d-flex","flex-wrap"],[1,"search-input","position-relative","pr-4"],["type","text",3,"placeholder","ngModel","ngModelChange","input"],["class","pos-abs-right",3,"click",4,"ngIf"],[1,"overflow-auto","w-100","mt-3"],["datatable","",1,"zip-code-table","table","table-hover",3,"dtOptions","dtTrigger"],[1,"sorting_disabled"],[1,"th-del-action"],[3,"ngClass"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-center"],["class","center-chart flex mt-60",4,"ngIf"],["SubscriberUploadModal",""],["SubscriberFileName",""],["SubscriberEditFileName",""],["SubscriberDeleteModal",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close","mt-10",3,"click"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"ccl-admin-title"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"primary","cursor-pointer","text-decoration-none","text-break",3,"click"],[1,"text-capitalize"],[1,"action-icons-row","text-center"],["class","primary cursor-pointer",3,"click",4,"ngIf"],[1,"primary","cursor-pointer",3,"click"],[1,"fa","fa-trash-o"],[1,"center-chart","flex","mt-60"],[1,"spinner-border","text-primary","mt-60"],[1,"sr-only"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"px-4"],["id","upload-csv-modal-title",1,"ccl-admin-title","mb-2"],[1,"subscriber-file-title"],[1,"subscriber-file-example-table","mb-2"],[1,"col-md-12"],[1,"table-example","w-100"],[1,"my-3"],[1,"btn-default","primary","file-browse-btn","mr-3"],["type","file","accept",".csv",3,"title","change"],["class","btn-dft btn-default text-decoration-none py-1 mr-3",3,"click",4,"ngIf"],[1,"btn-link","primary",3,"click"],[1,"btn-dft","btn-default","text-decoration-none","py-1","mr-3",3,"click"],[1,"subscriber-alert"],[1,"ccl-admin-title","mb-4"],[1,"ccl-form","mb-2"],["type","text","minlength","1","maxlength","500","trimSpace","",3,"ngModel","ngModelChange","blur"],["class","ccl-form mb-2",4,"ngIf"],[1,"mt-4"],["class","btn-default primary mr-3",3,"click",4,"ngIf"],["class","btn-default primary mr-3","disabled","",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-align-center"],["type","radio","id","subscriberChecked",3,"checked","change"],["for","subscriberChecked",1,"form-check-label"],["class","d-flex flex-align-center",4,"ngIf"],["type","radio","id","prospectChecked",3,"checked","change"],["for","prospectChecked",1,"form-check-label"],[1,"btn-default","primary","mr-3",3,"click"],["disabled","",1,"btn-default","primary","mr-3"],["type","text","value","Harbourfront"],[1,"btn-default","primary","mr-3"],[1,"d-flex"],[1,"warn-icon-min"],["src","../../../assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title","mb-3"],[1,"btn-dft","btn-default","py-1",3,"click"]],template:function(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",0),r.YNc(1,x,7,1,"div",1),r.YNc(2,T,7,1,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.YNc(5,_,2,1,"div",5),r.YNc(6,C,2,3,"div",5),r.TgZ(7,"p"),r._uU(8),r.qZA(),r.qZA(),r.TgZ(9,"div",6),r.TgZ(10,"button",7),r.NdJ("click",function(){r.CHM(i);var e=r.MAs(40);return t.openSubscriberUploadModal(e)}),r._uU(11),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",8),r.TgZ(13,"div",9),r.TgZ(14,"div",10),r.TgZ(15,"div",11),r.TgZ(16,"div",12),r.TgZ(17,"input",13),r.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)}),r.qZA(),r.YNc(18,y,2,0,"span",14),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"div",15),r.TgZ(20,"table",16),r.TgZ(21,"thead"),r.TgZ(22,"tr"),r.TgZ(23,"th"),r._uU(24),r.qZA(),r.TgZ(25,"th",17),r._uU(26),r.qZA(),r.TgZ(27,"th",17),r._uU(28),r.qZA(),r.TgZ(29,"th",17),r._uU(30),r.qZA(),r._UZ(31,"th",18),r.qZA(),r.qZA(),r.TgZ(32,"tbody",19),r.YNc(33,q,14,8,"tr",20),r.qZA(),r.TgZ(34,"tbody",19),r.TgZ(35,"tr"),r.TgZ(36,"td",21),r._uU(37),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(38,w,4,1,"div",22),r.qZA(),r.YNc(39,M,92,16,"ng-template",null,23,r.W1O),r.YNc(41,F,17,8,"ng-template",null,24,r.W1O),r.YNc(43,P,15,4,"ng-template",null,25,r.W1O),r.YNc(45,L,14,4,"ng-template",null,26,r.W1O)}2&e&&(r.xp6(1),r.Q6J("ngIf",t.errorMessage),r.xp6(1),r.Q6J("ngIf",t.successMessage),r.xp6(3),r.Q6J("ngIf",t.apps.cmcPro),r.xp6(1),r.Q6J("ngIf",!t.apps.cmcPro),r.xp6(2),r.hij(" ",t.language["Upload a subscriber .CSV file by clicking the \u201cBrowse\u201d button below. Uploaded files may take up to 24 hours to be processed and matched with existing records."]," "),r.xp6(3),r.hij("",t.language["Upload .CSV File"]," "),r.xp6(1),r.Q6J("hidden",t.loading),r.xp6(5),r.s9C("placeholder",t.language.Search),r.Q6J("ngModel",t.searchText),r.xp6(1),r.Q6J("ngIf",t.searchText),r.xp6(2),r.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),r.xp6(4),r.Oqu(t.language.Name),r.xp6(2),r.Oqu(t.language.Type),r.xp6(2),r.Oqu(t.language.Status),r.xp6(2),r.Oqu(t.language["Date Added"]),r.xp6(2),r.Q6J("ngClass",t.prospectListError?"d-none":"table-row-group"),r.xp6(1),r.Q6J("ngForOf",t.prospectLisData),r.xp6(1),r.Q6J("ngClass",t.prospectListError?"table-row-group":"d-none"),r.xp6(3),r.Oqu(t.language.nodata),r.xp6(1),r.Q6J("ngIf",t.loading))},directives:[Z.O5,b.Fj,b.JJ,b.On,n.G,Z.mk,Z.sg,b.wO,b.nD,A.f],pipes:[Z.uU],styles:[".file-browse-btn[_ngcontent-%COMP%]{position:relative}.file-browse-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;font-size:0;opacity:0}.table-filter[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;justify-content:space-between;align-items:center;margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px}.table-filter[_ngcontent-%COMP%]   .ngselect-min[_ngcontent-%COMP%]{min-width:160px}.del-btn[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.max-w-36[_ngcontent-%COMP%]{max-width:36px}.table-row-selected[_ngcontent-%COMP%]{background:#EDF5FF!important}.th-del-action[_ngcontent-%COMP%]{min-width:100px;max-width:100px}.action-icons-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;min-width:38px;display:inline-block}.zip-code-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:20%}  .subscriber-alert-delete .modal-dialog,   .subscriber-custom-edit .modal-dialog{max-width:45.33%!important}  .subscriber-alert-delete .modal-content{background:#FFF9F5!important}  .subscriber-custom-upload .modal-dialog{max-width:90%!important}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.subscriber-alert[_ngcontent-%COMP%]{padding:0 20px 15px}.subscriber-alert[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.btn-default.btn-dft[_ngcontent-%COMP%]{cursor:pointer}.subscriber-file-title[_ngcontent-%COMP%]{color:#4c4c4c;font-weight:600;font-size:16px;line-height:20px;margin-bottom:10px}.table-example[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#4c4c4c;font-weight:600;font-size:16px;line-height:20px}.table-example[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-example[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;border:1px solid #EBEAEF}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}"]}),J)},35555:function(i,n,s){s.r(n),s.d(n,{SysAdminModule:function(){return Dt}});var r=s(38583),l=s(3679),c=s(39895),d=s(5457),u=s(18202),g=s(96951),p=s(37423),h=s(48705),f=s(46517),m=s(22098),v=s(68895),Z=s(37716),b=s(49342),A=s(30900),x=s(89342),T=s(39075),_=s(20904),C=s(74062);function y(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",24),Z.TgZ(1,"span",25),Z._UZ(2,"img",26),Z.qZA(),Z.TgZ(3,"button",27),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",28),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.nameErrorInfo,Z.oJD)}}function k(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",29),Z.TgZ(1,"span",30),Z._UZ(2,"img",31),Z.qZA(),Z.TgZ(3,"button",27),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",32),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.successInfo,Z.oJD)}}var q,w=((q=function(){function e(t,i,n,s,o,r){var l=this;a(this,e),this.router=t,this.commonOrgService=i,this.customTranslateService=n,this.api=s,this.titleService=o,this.CommonFunctionsService=r,this.pageAvailable=!1,this.alertVisible=!1,this.secondalertVisible=!1,this.successalertvisible=!1,this.orgName="",this.orgDescription="",this.add={name:"",description:"",externalOrgRef:null,salesforceId:null,oracleId:null,parentId:null,capStatus:null,capOverride:null,capExpires:null,bypassCAP:!1,inheritList:null,parentOrgName:null,territory:null,cloudGeography:null,country:null},this.loader=!1,this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){l.language=e,l.titleService.setTitle("".concat(l.language.addOrganization," - ").concat(l.language["System Administration"]," - ").concat(l.language["Calix Cloud"]))}),this.commonOrgService.currentPageAdder("organizations"),this.titleService.setTitle("".concat(this.language.addOrganization," - ").concat(this.language["System Administration"]," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.success=!1,this.nameError=!1}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.addSubs&&this.addSubs.unsubscribe()}},{key:"goToOrgList",value:function(){this.router.navigate(["systemAdministration/organizations"])}},{key:"addNewOrg",value:function(){var e=this;if(this.nameError=!1,this.validation(),!this.nameError){var t=this.add;t.name=this.orgName,t.description=this.orgDescription?this.orgDescription:"",this.loader=!0,this.addSubs=this.api.AddOrg(t).subscribe(function(t){e.loader=!1,e.successInfo="Organization added Successfully",e.success=!0,e.commonOrgService.pageScrollTop(),setTimeout(function(){e.closeAlert(),e.goToOrgList()},1e3)},function(t){e.loader=!1,e.nameErrorInfo=401==t.status?e.language["Access Denied"]:500==t.status?"Internal Server Error":null!=t.error&&"object"==typeof t.error&&t.error.errorMessage?"".concat(t.error.errorMessage):"".concat(t.message),e.closeAlert(),e.commonOrgService.pageScrollTop(),e.nameError=!0})}}},{key:"validation",value:function(){var e=this.orgName.trim();""==e?(this.nameErrorInfo=this.language["Organization name is mandatory!"],this.nameError=!0,this.alertVisible=!0,this.secondalertVisible=!1,this.successalertvisible=!1):e.length<2&&(this.nameErrorInfo=this.language["Organization name must be of at least 2 letters"],this.nameError=!0,this.secondalertVisible=!0,this.alertVisible=!1,this.successalertvisible=!1)}},{key:"cancel",value:function(){this.goToOrgList()}},{key:"closeAlert",value:function(){this.success=!1,this.nameError=!1}},{key:"pageErrorHandle",value:function(e){this.nameErrorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.nameError=!0}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.CommonFunctionsService.trimSpaceFromNonObjectInputs(t)}}]),e}()).\u0275fac=function(e){return new(e||q)(Z.Y36(c.F0),Z.Y36(b.v),Z.Y36(A.d),Z.Y36(x.z),Z.Y36(T.Dx),Z.Y36(_.i))},q.\u0275cmp=Z.Xpm({type:q,selectors:[["app-add-organization"]],decls:33,vars:12,consts:[["id","scrollTopId",1,"container","position-relative"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","justify-content-end","mb-3"],[1,"col-md-4"],[1,"ccl-title"],[1,"col-md-8","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],[1,"container","px-0"],["autocomplete","off"],[1,"row"],[1,"col-md-6","my-3"],[1,"form-group","ccl-form"],["for","first"],[1,"required-field"],["type","text","id","orgName","name","orgName","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],[1,"col-md-6","my-3","pr-0"],["for","last"],["type","text","id","orgDescription","name","orgDescription","autocomplete","new-password","trimSpace","",1,"",3,"ngModel","placeholder","ngModelChange","blur"],[1,"w-100","my-2","text-right","pr-0"],["_ngcontent-veq-c50","",1,"btn-default","primary","mx-3",3,"click"],["_ngcontent-veq-c50","",1,"btn-default","btn-dft","py-1",3,"click"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[3,"innerHtml"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.YNc(1,y,6,1,"div",1),Z.YNc(2,k,6,1,"div",2),Z.TgZ(3,"div",3),Z.TgZ(4,"div",4),Z.TgZ(5,"div",5),Z._uU(6),Z.qZA(),Z.qZA(),Z.TgZ(7,"div",6),Z.TgZ(8,"div",7),Z.TgZ(9,"a",8),Z.NdJ("click",function(){return t.goToOrgList()}),Z._UZ(10,"i",9),Z._uU(11),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"div",10),Z.TgZ(13,"form",11),Z.TgZ(14,"div",12),Z.TgZ(15,"div",13),Z.TgZ(16,"div",14),Z.TgZ(17,"label",15),Z._uU(18),Z.qZA(),Z.TgZ(19,"span",16),Z._uU(20,"*"),Z.qZA(),Z.TgZ(21,"input",17),Z.NdJ("ngModelChange",function(e){return t.orgName=e})("blur",function(){return t.removeUnwantedSpace("orgName",t.orgName)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"div",18),Z.TgZ(23,"div",14),Z.TgZ(24,"label",19),Z._uU(25),Z.qZA(),Z.TgZ(26,"input",20),Z.NdJ("ngModelChange",function(e){return t.orgDescription=e})("blur",function(){return t.removeUnwantedSpace("orgDescription",t.orgDescription)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(27,"div",12),Z.TgZ(28,"div",21),Z.TgZ(29,"button",22),Z.NdJ("click",function(){return t.addNewOrg()}),Z._uU(30),Z.qZA(),Z.TgZ(31,"button",23),Z.NdJ("click",function(){return t.cancel()}),Z._uU(32),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(1),Z.Q6J("ngIf",t.nameError),Z.xp6(1),Z.Q6J("ngIf",t.success),Z.xp6(4),Z.Oqu(t.language.addOrganization),Z.xp6(5),Z.hij(" ",t.language.backToOrganizationList,""),Z.xp6(7),Z.Oqu(t.language.organizationName),Z.xp6(3),Z.s9C("placeholder",t.language.EnterOrganizationName),Z.Q6J("ngModel",t.orgName),Z.xp6(4),Z.Oqu(t.language.description),Z.xp6(1),Z.s9C("placeholder",t.language.EnterDescription),Z.Q6J("ngModel",t.orgDescription),Z.xp6(4),Z.Oqu(t.language.submit),Z.xp6(2),Z.Oqu(t.language.Cancel))},directives:[r.O5,l._Y,l.JL,l.F,l.Fj,C.f,l.JJ,l.On],styles:[""]}),q),O=s(95399),S=s(18890),M=s(61157),U=s(56219),D=s(86039),N=s(43949),I=s(81162),E=s(10584),F=s(86355),P=s(71376),L=s(12978),J=s(79765),R=s(25917),H=s(9112),Y=s(29923),Q=s(92340),z=s(23771),B=s(88002),j=s(5304),V=s(89097),G=s(12664),W=s(86640),X=["deleteModal"];function K(e,t){1&e&&(Z.TgZ(0,"div",25),Z.TgZ(1,"div",26),Z.TgZ(2,"div",27),Z.TgZ(3,"span",28),Z._uU(4,"Loading..."),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA())}function ee(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",29),Z.TgZ(1,"span",30),Z._UZ(2,"img",31),Z.qZA(),Z.TgZ(3,"button",32),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",33),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.errorInfo,Z.oJD)}}function te(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",34),Z.TgZ(1,"button",32),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(2,"span"),Z.qZA(),Z._UZ(3,"div",35),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(3),Z.Q6J("innerHtml",n.successInfo,Z.oJD)}}function ie(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",29),Z.TgZ(1,"span",30),Z._UZ(2,"img",31),Z.qZA(),Z.TgZ(3,"button",32),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlertWarning()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",33),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.warningInfo,Z.oJD)}}function ne(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"tr",36),Z.TgZ(1,"td"),Z._uU(2),Z.qZA(),Z.TgZ(3,"td",37),Z.TgZ(4,"i",38),Z.NdJ("click",function(){var e=Z.CHM(i).$implicit;return Z.oxw().deleteUser(e)}),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=t.$implicit,a=Z.oxw();Z.s9C("id",n.id),Z.xp6(2),Z.hij(" ",n.username," "),Z.xp6(2),Z.s9C("title",a.language.delete)}}var ae=function(){return["active","about_to_expire","in_grace_period"]},se=function(){return{standalone:!0}};function oe(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"tr"),Z.TgZ(1,"td"),Z._UZ(2,"input",44),Z._UZ(3,"input",45),Z._uU(4),Z.qZA(),Z.TgZ(5,"td",42),Z.TgZ(6,"div",46),Z.TgZ(7,"label",47),Z.TgZ(8,"input",48),Z.NdJ("click",function(e){return Z.CHM(i),Z.oxw(2).preventClick(e)}),Z.qZA(),Z._uU(9,"\xa0\xa0\xa0 "),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(10,"td",42),Z.TgZ(11,"div",46),Z.TgZ(12,"label",47),Z.TgZ(13,"input",49),Z.NdJ("click",function(e){return Z.CHM(i),Z.oxw(2).preventClick(e)}),Z.qZA(),Z._uU(14," \xa0\xa0\xa0 "),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(15,"td"),Z._uU(16),Z.qZA(),Z.TgZ(17,"td"),Z._uU(18),Z.qZA(),Z.TgZ(19,"td",50),Z._UZ(20,"input",51),Z.TgZ(21,"ng-select",52),Z.NdJ("ngModelChange",function(e){var t=Z.CHM(i).index;return Z.oxw(2).entStatus[t]=e})("change",function(){var e=Z.CHM(i).index,t=Z.oxw(2);return t.removePlaceholder(e),t.showSubmitButtons=!0}),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=t.$implicit,a=t.index,s=Z.oxw(2);Z.xp6(2),Z.s9C("value",n.appType),Z.xp6(1),Z.s9C("value",n.name),Z.xp6(1),Z.hij(" ",n.name," "),Z.xp6(4),Z.Gre("",n.appType," not-allow d-none"),Z.MGl("id","",n.appType,"_entitled"),Z.s9C("value",n.appType),Z.Q6J("checked",Z.DdM(24,ae).includes((s.entStatus[a]||"").toLowerCase()))("readonly",!0),Z.xp6(5),Z.Gre("",n.appType," not-allow d-none"),Z.MGl("id","",n.appType,"_inherited"),Z.Q6J("checked",!1)("readonly",!0),Z.xp6(3),Z.Oqu(n.startDate?n.startDate:""),Z.xp6(2),Z.Oqu(n.endDate?n.endDate:""),Z.xp6(2),Z.s9C("value",n.overrideEndDate),Z.xp6(1),Z.s9C("placeholder",s.language.Select),Z.Q6J("id","status-list"+a)("items",s.statusList)("ngModel",s.entStatus[a])("ngModelOptions",Z.DdM(25,se))}}function re(e,t){if(1&e&&(Z.TgZ(0,"div",39),Z.TgZ(1,"form",40),Z.TgZ(2,"table",41),Z.TgZ(3,"thead",19),Z.TgZ(4,"tr"),Z.TgZ(5,"th"),Z._uU(6),Z.qZA(),Z._UZ(7,"th",42),Z._UZ(8,"th",42),Z.TgZ(9,"th"),Z._uU(10),Z.qZA(),Z.TgZ(11,"th"),Z._uU(12),Z.qZA(),Z.TgZ(13,"th"),Z._uU(14),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(15,"tbody"),Z.YNc(16,oe,22,26,"tr",43),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(2),Z.Q6J("dtOptions",i.dtOptions),Z.xp6(4),Z.Oqu(i.language.appName),Z.xp6(4),Z.Oqu(i.language.salesStartdate),Z.xp6(2),Z.Oqu(i.language.salesEnddate),Z.xp6(2),Z.Oqu(i.language.Status),Z.xp6(2),Z.Q6J("ngForOf",i.entitlements)}}function le(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",53),Z.TgZ(1,"div",54),Z.TgZ(2,"button",55),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().save()}),Z._uU(3),Z.qZA(),Z.TgZ(4,"button",56),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().cancel()}),Z._uU(5),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(3),Z.Oqu(n.language.saveEnregistrer),Z.xp6(2),Z.Oqu(n.language.Cancel)}}function ce(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",57),Z.TgZ(1,"h4",58),Z._uU(2),Z.qZA(),Z.TgZ(3,"button",59),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeModal()}),Z._UZ(4,"span",60),Z.qZA(),Z.qZA(),Z.TgZ(5,"div",61),Z._uU(6),Z.qZA(),Z.TgZ(7,"div",62),Z.TgZ(8,"button",63),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().confirmDeleteSecleted()}),Z._uU(9),Z.qZA(),Z.TgZ(10,"button",64),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeModal()}),Z._uU(11),Z.qZA(),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(2),Z.Oqu(n.modalTitle),Z.xp6(4),Z.AsE(" ",n.language["Are you sure you want to delete this administrator"],"? (",n.modalInfo,") "),Z.xp6(3),Z.Oqu(n.language.yes),Z.xp6(2),Z.Oqu(n.language.no)}}var de=s(91704),ue=function(){var i=function(){function i(e,t,n,s,o,r,l){a(this,i),this.customTranslateService=e,this.commonOrgService=t,this.router=n,this.api=s,this.sso=o,this.dialogService=r,this.titleService=l,this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.appsTableData=[],this.userTableOptions={},this.entitlementAvailable=!1,this.roles=[],this.usersList=[],this.addedUsersList=[],this.dtTrigger=new J.xQ,this.isRerender=!1,this.tableOptions={pagingType:"full_numbers",pageLength:10,processing:!0,searching:!1,ordering:!1,lengthChange:!1,language:{emptyTable:"No users available in table"},drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&de(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.dtOptions={lengthChange:!1,searching:!1,ordering:!1,paging:!1,dom:"t"},this.loader=!0,this.errorInfo="",this.successInfo="",this.warningInfo="",this.endDates={"118_endDate":"","119_endDate":"","120_endDate":"","122_endDate":"","131_endDate":"","200_endDate":"","201_endDate":"","202_endDate":"","203_endDate":"","204_endDate":"","205_endDate":""},this.usersCount=0,this.showSubmitButtons=!1,this.orgRoleAvail=!0,this.sysAdminRoute="systemAdministration",this.model={year:parseInt("2020"),month:parseInt("10"),day:parseInt("1")},this.statusList=[],this.entStatus=[];var c=this.router.url;this.ORG_ID=this.sso.getOrganizationID(c),this.commonOrgService.currentPageAdder("orgDetail"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.orgData&&(this.orgName=this.orgData.name?this.orgData.name:"Calix"),this.getData(),this.sysAdminRoute=Q.N.SYS_ADMIN_ROUTE,this.sso.getRedirectModule(c)}return o(i,[{key:"ngOnInit",value:function(){var e=this,t=this.sso.getRedirectModule(this.router.url);this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(i){e.language=i,e.loader=!0,e.dataAvailable=!1,e.isRerender=!0,e.renderUsersTable("language"),e.titleService.setTitle("".concat(e.language["Organization detail"]," - ").concat("systemAdministration"===t?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language["Organization detail"]," - ").concat("systemAdministration"===t?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.frTable=this.customTranslateService.fr,this.tableLanguageOptions(),this.closeAlert(),this.setYearRange(),this.statusList=[{label:this.language.Active,value:"active"},{label:this.language["About to Expire"],value:"about_to_expire"},{label:this.language["In Grace Period"],value:"in_grace_period"},{label:this.language.Expired,value:"expired"}]}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.usersAvailInterval&&clearInterval(this.usersAvailInterval),this.translateSubscribe&&this.translateSubscribe.unsubscribe()}},{key:"getData",value:function(){var e=this,t=[];["".concat(Q.N.CALIX_ADMIN_ORG_BASE_URL,"entitlements/cloud/all"),"".concat(Q.N.CALIX_ADMIN_ORG_BASE_URL,"entitlements/").concat(this.ORG_ID),"".concat(Q.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/roles"),"".concat(Q.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/users/_count")].forEach(function(i){var n=e.api.callRestApi(i).pipe((0,B.U)(function(e){return e}),(0,j.K)(function(e){return(0,R.of)(e)}));t.push(n)}),this.combineLatest=(0,H.aj)(t),this.makeParallelRequest()}},{key:"makeParallelRequest",value:function(){var t=this;this.parallelReqSubscribtion=this.combineLatest.subscribe(function(i){if(t.entitlements=i[0],t.orgEntitlements=i[1],t.roles=i[2],t.usersCount=i[3],i.length){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(null!=s&&null!=s.error)return t.loader=!1,t.pageErrorHandle(s),t.commonOrgService.pageScrollTop(),t.addedUsersList=[],t.renderUsersTable(),void(t.entitlementAvailable=!0)}}catch(o){a.e(o)}finally{a.f()}}t.roles.length?t.getOrgAdminUsers():(t.addedUsersList=[],t.renderUsersTable()),t.orgEntitlements&&t.combineData(),t.getOrgUsersList()},function(e){t.loader=!1,t.pageErrorHandle(e),t.commonOrgService.pageScrollTop()},function(){t.loader=!1})}},{key:"getOrgUsersList",value:function(){var e=this;this.api.UsersListByOrgId(this.ORG_ID,this.usersCount).subscribe(function(t){e.usersList=t||[],e.usersAvail=!0},function(t){e.loader=!1,e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()})}},{key:"getOrgAdminUsers",value:function(){var e=this.roles.filter(function(e){return"OrgAdmin"===e.name});e&&e.length?(this.orgAdminRoleId=e[0]._id,this.roleData(),this.orgRoleAvail=!0):(this.orgRoleAvail=!1,this.addedUsersList=[],this.renderUsersTable(),this.errorInfo=this.language["Role (null) not found"],this.error=!0,this.commonOrgService.pageScrollTop())}},{key:"roleData",value:function(){var e=this;this.api.RoleData(this.orgAdminRoleId).subscribe(function(t){e.addedUsersList=t.users?e.addId(t.users):[],e.renderUsersTable(),setTimeout(function(){e.checkSelected()},500)},function(t){e.loader=!1,e.pageErrorHandle(t),e.commonOrgService.pageScrollTop(),e.addedUsersList=[],e.renderUsersTable()})}},{key:"addId",value:function(e){return e.forEach(function(e){e._id=e.userId}),e}},{key:"addUser",value:function(){var e=this;this.warning=!1;var i,n=[];this.selectedUsers.forEach(function(a){if(e.addedUsersList.filter(function(e){return e._id===a._id}).length>0)return e.warningInfo="".concat(a.username," - User already added"),void(e.warning=!0);i=e.usersList.findIndex(function(e){return e._id===a._id}),e.usersList[i].disabled=!0,e.usersList=t(e.usersList),n.push(a)}),!this.warning&&(this.addedUsersList=[].concat(t(this.addedUsersList),n),this.selectedUsers=[],this.isRerender=!0,this.renderUsersTable(),this.showButtons())}},{key:"deleteUser",value:function(e){this.deleteItem=e,this.modalTitle=this.language["Delete Administrator"],this.modalInfo="".concat(e.username),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDeleteSecleted",value:function(){this.closeModal();var e,i=this.deleteItem,n=[];this.addedUsersList.forEach(function(e){e._id!==i._id&&n.push(e)}),-1!==(e=this.usersList.findIndex(function(e){return e._id===i._id}))&&(this.usersList[e].disabled=!1),this.usersList=t(this.usersList),this.addedUsersList=n,this.isRerender=!0,this.renderUsersTable(),this.deleteItem=void 0,this.showButtons()}},{key:"renderUsersTable",value:function(e){var t=this;this.setTableOptions(),e&&"language"==e?setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next(),t.loader=!1},50):this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},{key:"setTableOptions",value:function(){var e=this;this.tableOptions={pagingType:"full_numbers",pageLength:10,processing:!0,searching:!1,ordering:!1,lengthChange:!1,language:{emptyTable:"No users available in table"},drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&de(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.tableLanguageOptions(),this.dataAvailable=!0,setTimeout(function(){e.hideSearch()},500)}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"redraw",value:function(){this.dtElement.dtInstance.then(function(e){e.draw()})}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}},{key:"someClickHandler",value:function(e){}},{key:"addOrg",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/addOrg")])}},{key:"goToOrgList",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/organizations")])}},{key:"goToUserList",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/blacklist")])}},{key:"processData",value:function(e){for(var t=e,i={},n=0;n<t.length;n++)i[t[n].appType]=t[n].overrideEndDate;this.selectedEntitlements=i}},{key:"combineData",value:function(){for(var e=this,t={},i=[],n={},a=!1,s=(new Date).getTime(),o=0;o<this.orgEntitlements.length;o++)t[this.orgEntitlements[o].appType]=this.orgEntitlements[o];for(var r,l=!1,c=0;c<this.entitlements.length;c++){var d=void 0;if(l=!1,t[r=this.entitlements[c].appType]){d=t[r].overrideEndDate?new Date(t[r].overrideEndDate):void 0,a=this.checkEnttlmnt(t[r]);var u=t[r].overrideEndDate?new Date("".concat(t[r].overrideEndDate," 23:59:59")):new Date;(u=u.getTime())&&u>=s&&(l=!0),i.push(Object.assign(Object.assign({},t[r]),{checked:a,override:"".concat(r,"_endDate"),greenColor:l,overrideEndDate_obj_date:d,overrideEndDate_obj:{day:1,month:11,year:2020}})),n[r]=Object.assign(Object.assign({},t[r]),{checked:a,override:"".concat(r,"_endDate"),greenColor:l,overrideEndDate_obj_date:d,overrideEndDate_obj:{day:1,month:11,year:2020}}),this.endDates["".concat(r,"_endDate")]=t[r].overrideEndDate}else i.push(Object.assign(Object.assign({},this.entitlements[c]),{overrideEndDate:null,checked:!1,override:"".concat(r,"_endDate"),overrideEndDate_obj_date:void 0,overrideEndDate_obj:{day:1,month:11,year:2020}}))}this.selectedEntitlements=n,this.entitlements=i,this.entitlements=this.sortByTimestamp(this.entitlements,"timestamp","desc"),this.entStatus=this.entitlements.map(function(e){return(e.status||"").toLowerCase()}),setTimeout(function(){e.entStatus.forEach(function(t,i){t||de("#status-list".concat(i," input")).attr("placeholder",e.language.Select)})},100),this.entitlementAvailable=!0,this.loader=!1}},{key:"checkEnttlmnt",value:function(e){var t,i,n=(new Date).getTime();return t=e.endDate?new Date(e.endDate):"",i=e.overrideEndDate?new Date("".concat(e.overrideEndDate," 23:59:59")):"",!(!e.entitlement||!(!t&&!i&&!e.endDate||t&&t>n||i&&i>n))}},{key:"setOverrideDate",value:function(e,t,i,n){var a=this;if(n){var s,o,r=this.entitlements.find(function(e,t){return a.objIndex=t,e.appType==i}),l=(new Date).getTime(),c="".concat(n," 23:59:59");o=t.endDate?new Date(t.endDate).getTime():"",s=(s=new Date(c)).getTime(),t.entitlement&&(!o&&!c&&!t.endDate||o&&o>l||s&&s>l)||!o&&!c&&!t.endDate||o&&o>l||s&&s>l?(r.overrideEndDate=this.formatDate(c),r.checked=!0,r.greenColor=!!(s&&s>l)):(r.overrideEndDate=this.formatDate(c),r.checked=!1,r.greenColor=!1),this.endDates[i+"_endDate"]=n,this.entitlements[this.objIndex]=r,this.showButtons()}else this.clearOverrideEndDate(e,t,i,n)}},{key:"formatDate",value:function(e){var t=new Date(e),i=""+(t.getMonth()+1),n=""+t.getDate(),a=t.getFullYear();return i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),[a,i,n].join("-")}},{key:"checkDate",value:function(e){var t;return t="object"==typeof e?new Date(e):new Date(e+" 23:59:59"),new Date<t}},{key:"save",value:function(){if(!this.orgRoleAvail)return this.errorInfo=this.language["Role (null) not found"],this.error=!0,void this.commonOrgService.pageScrollTop();this.updateAdmins()}},{key:"updateAdmins",value:function(){var e=this;this.loader=!0;var t=[];this.addedUsersList.forEach(function(e){t.push(e._id)}),this.api.AddAdmin(t,this.orgAdminRoleId).subscribe(function(t){e.saveEntitlements(),e.successMessage()},function(t){e.loader=!1,e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()},function(){e.loader=!1})}},{key:"saveEntitlements",value:function(){var e,t,i,n,a,s,o,r,l={},c={"":null,active:"Active",about_to_expire:"About_to_Expire",in_grace_period:"In_Grace_Period",expired:"Expired"},d=de("#entitlementsForm").serializeArray();de.each(d,function(e,t){void 0!==l[t.name]?("array"!=jQuery.type(l[t.name])&&(l[t.name]=[l[t.name]]),l[t.name].push(t.value)):l[t.name]=t.value});var u=l.appType,g=l.entitlement?l.entitlement:[],p=[],h={};h.appType=l.appType,h.entitlement=l.entitlement?l.entitlement:[],h.name=l.name?l.name:[],h.overrideEndDate=l.overrideEndDate?l.overrideEndDate:[],h.status=[];for(var f=u.length,m=0;m<f;m++)h.status.push(c[this.entStatus[m]]);l=h;for(var v=[],Z=[],b=0;b<l.appType.length;b++){var A={createTime:null,updateTime:null,id:null,appType:999,name:"Service Cloud",entitlement:100,disabledFlag:!1,startDate:null,endDate:null,overrideEndDate:"2021-06-30",contractNumber:null,productFamily:null,partCategory:null,partNumber:null,partDescription:null,qty:null,customer:null,organizationId:this.ORG_ID,status:null,serviceName:null,serviceEdition:null},x=g.indexOf(l.appType[b]);g&&-1!==x?null!=this.selectedEntitlements[l.appType[b]]?(A.appType=l.appType[b],A.name=l.name[b],A.overrideEndDate=l.overrideEndDate[b],A.disabledFlag=!1,A.id=this.selectedEntitlements[l.appType[b]].id,A.startDate=this.selectedEntitlements[l.appType[b]].startDate,A.endDate=this.selectedEntitlements[l.appType[b]].endDate,A.createTime=this.selectedEntitlements[l.appType[b]].createTime,A.updateTime=this.selectedEntitlements[l.appType[b]].updateTime,A.contractNumber=this.selectedEntitlements[l.appType[b]].contractNumber,A.productFamily=this.selectedEntitlements[l.appType[b]].productFamily,A.partCategory=this.selectedEntitlements[l.appType[b]].partCategory,A.partDescription=this.selectedEntitlements[l.appType[b]].partDescription,A.qty=this.selectedEntitlements[l.appType[b]].qty,A.customer=this.selectedEntitlements[l.appType[b]].customer,A.status=l.status[b]||null,A.serviceName=void 0!==(null===(e=this.selectedEntitlements[l.appType[b]])||void 0===e?void 0:e.serviceName)?null===(t=this.selectedEntitlements[l.appType[b]])||void 0===t?void 0:t.serviceName:null,A.serviceEdition=void 0!==(null===(i=this.selectedEntitlements[l.appType[b]])||void 0===i?void 0:i.serviceEdition)?null===(n=this.selectedEntitlements[l.appType[b]])||void 0===n?void 0:n.serviceEdition:null,Z.push(A),p.push(A)):(A.appType=l.appType[b],A.name=l.name[b],A.overrideEndDate=l.overrideEndDate[b],A.status=l.status[b]||null,A.disabledFlag=!1,v.push(A),p.push(A)):null!=this.selectedEntitlements[l.appType[b]]?(A.appType=l.appType[b],A.name=l.name[b],A.overrideEndDate=l.overrideEndDate[b],A.disabledFlag=!1,A.id=this.selectedEntitlements[l.appType[b]].id,A.startDate=this.selectedEntitlements[l.appType[b]].startDate,A.endDate=this.selectedEntitlements[l.appType[b]].endDate,A.createTime=this.selectedEntitlements[l.appType[b]].createTime,A.updateTime=this.selectedEntitlements[l.appType[b]].updateTime,A.contractNumber=this.selectedEntitlements[l.appType[b]].contractNumber,A.productFamily=this.selectedEntitlements[l.appType[b]].productFamily,A.partCategory=this.selectedEntitlements[l.appType[b]].partCategory,A.partDescription=this.selectedEntitlements[l.appType[b]].partDescription,A.qty=this.selectedEntitlements[l.appType[b]].qty,A.customer=this.selectedEntitlements[l.appType[b]].customer,A.status=l.status[b]||null,A.serviceName=void 0!==(null===(a=this.selectedEntitlements[l.appType[b]])||void 0===a?void 0:a.serviceName)?null===(s=this.selectedEntitlements[l.appType[b]])||void 0===s?void 0:s.serviceName:null,A.serviceEdition=void 0!==(null===(o=this.selectedEntitlements[l.appType[b]])||void 0===o?void 0:o.serviceEdition)?null===(r=this.selectedEntitlements[l.appType[b]])||void 0===r?void 0:r.serviceEdition:null,Z.push(A),p.push(A)):l.status[b]&&(A.appType=l.appType[b],A.name=l.name[b],A.overrideEndDate=l.overrideEndDate[b],A.status=l.status[b]||null,A.disabledFlag=!1,v.push(A),p.push(A))}if(!v.length&&!Z.length)return this.loader=!1,void this.successMessage();this.newEntitlesUpdate=v,this.changedEntitlesUpdate=Z,this.updateEnt()}},{key:"updateEnt",value:function(){var e=this;this.loader=!0;var t=[],i=[],n=[],a="".concat(Q.N.CALIX_ADMIN_ORG_BASE_URL,"entitlements/");this.newEntitlesUpdate.forEach(function(n){"Expired"===n.status?i.push(e.api.addEntitlements(a,n)):t.push(e.api.addEntitlements(a,n))}),this.changedEntitlesUpdate.forEach(function(i){var a=!1;if(e.orgEntitlements.forEach(function(e){Number(i.appType)===e.appType&&i.status===e.status&&(a=!0)}),!a){var s="".concat(Q.N.CALIX_ADMIN_ORG_BASE_URL,"entitlements/").concat(i.id);"Expired"===i.status?n.push(e.api.changeEntitlements(s,i)):t.push(e.api.changeEntitlements(s,i))}});var s=t.length,o=0;Y.z.apply(void 0,i.concat(n,t)).subscribe(function(t){o++,s==o&&i.length==o&&n.length==o&&e.successMessage()},function(t){e.loader=!1,e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()})}},{key:"cancel",value:function(){this.goToOrgList()}},{key:"changeDate",value:function(e,t,i){i=i.toString(),this.checkDateObject(i)?de("#".concat(t,"_entitled")).prop("checked",!0):de("#".concat(t,"_entitled")).prop("checked",!1)}},{key:"checkDateObject",value:function(e){var t;return t=new Date(e),new Date<t}},{key:"dateF",value:function(e){return new Date(e)}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"closeAlertWarning",value:function(){this.warning=!1}},{key:"hideSearch",value:function(){setTimeout(function(){de("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),de("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},100)}},{key:"showButtons",value:function(){this.showSubmitButtons=!0}},{key:"successMessage",value:function(){var e=this;this.closeAlert(),this.successInfo=this.language["Organization updated successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),setTimeout(function(){e.loader=!1,e.closeAlert(),e.goToOrgList()},1500)}},{key:"checkSelected",value:function(){var e=this;this.usersAvail?(this.usersList.forEach(function(t){e.addedUsersList.filter(function(e){return t._id===e.userId}).length&&(t.disabled=!0)}),this.usersList=t(this.usersList)):this.usersAvailInterval=setInterval(function(){e.usersAvail&&(e.checkSelected(),clearInterval(e.usersAvailInterval))},500)}},{key:"tableLanguageOptions",value:function(){sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?(this.tableOptions.language=this.frTable,this.tableOptions.language.emptyTable="Aucune utilisateur disponible dans le tableau"):"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")&&this.tableOptions.language&&(delete this.tableOptions.language,this.tableOptions.language={emptyTable:"No users available in table"})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0}},{key:"setYearRange",value:function(){this.yRange="2000:2030";var e=(new Date).getFullYear();this.yRange="".concat(e-20,":").concat(e+30)}},{key:"sortByTimestamp",value:function(e,t,i){var n=[],a=[],s=[],o=(new Date).getTime();return e.forEach(function(e){e.timestamp=e.overrideEndDate?new Date(e.overrideEndDate).getTime():0}),t="timestamp",e.sort(function(e,i){return e[t]=e[t]?parseInt(e[t]):0,i[t]=i[t]?parseInt(i[t]):0,i[t]-e[t]}),e.forEach(function(e){e.timestamp&&e.timestamp<o?n.push(e):e.timestamp&&e.timestamp>o?a.push(e):(!e.timestamp||e.timestamp==o)&&s.push(e)}),[].concat(n,a,s)}},{key:"clearOverrideEndDate",value:function(e,t,i,n){var a=this,s=!1,o=this.entitlements.find(function(e,t){return a.objIndex=t,e.appType==i});o.overrideEndDate&&(s=!0),(new Date).getTime();var r="".concat(n," 23:59:59");t.endDate&&new Date(t.endDate).getTime(),new Date(r).getTime(),o.overrideEndDate=null,o.checked=!1,o.greenColor=!1,this.endDates[i+"_endDate"]="",this.entitlements[this.objIndex]=o,s&&this.showButtons()}},{key:"preventClick",value:function(e){e.preventDefault()}},{key:"removePlaceholder",value:function(e){de("#status-list".concat(e," input")).attr("placeholder","")}}]),i}();return i.\u0275fac=function(e){return new(e||i)(Z.Y36(A.d),Z.Y36(b.v),Z.Y36(c.F0),Z.Y36(x.z),Z.Y36(V.t6),Z.Y36(G.FF),Z.Y36(T.Dx))},i.\u0275cmp=Z.Xpm({type:i,selectors:[["app-organization-detail"]],viewQuery:function(e,t){var i;(1&e&&(Z.Gf(X,7),Z.Gf(z.G,5)),2&e)&&(Z.iGM(i=Z.CRH())&&(t.deleteModal=i.first),Z.iGM(i=Z.CRH())&&(t.dtElement=i.first))},decls:43,vars:25,consts:[[1,"container","mh-65","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row","my-3"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0"],[1,"text-right"],["id","back-org-list",1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-3"],[1,"col-md-6"],[1,"row","my-3","ccl-form"],[1,"col-md-8","pr-0"],["id","admins-list","bindLabel","username","placeholder","",1,"ccl-select-box",3,"items","ngModel","clearable","ngModelOptions","multiple","disabled","ngModelChange"],[1,"col-md-4"],["_ngcontent-veq-c50","","id","add-user",1,"btn-default","primary","px-1",3,"disabled","click"],[1,"col-md-12",3,"hidden"],["id","org-detail-users","width","100%","datatable","",1,"row-border","hover","table-alter","w-100",3,"dtOptions","dtTrigger"],[1,""],[3,"id",4,"ngFor","ngForOf"],[1,"col-md-12"],["class","col-md-12 my-2",4,"ngIf"],["class","row",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[3,"id"],[1,"actions","text-nowrap"],["id","delete-user",1,"fas","fa-trash-alt","primary","p-1","cursor-pointer",3,"title","click"],[1,"col-md-12","my-2"],["id","entitlementsForm"],["datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,"hiddenCol","p-0"],[4,"ngFor","ngForOf"],["type","hidden","name","appType",3,"value"],["type","hidden","name","name",3,"value"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","name","entitlement",3,"id","checked","value","readonly","click"],["type","checkbox","name","inherited",3,"id","checked","readonly","click"],[1,"org-detail-status"],["type","hidden","name","overrideEndDate",3,"value"],["bindLabel","label","bindValue","value",1,"ccl-select-box",3,"id","placeholder","items","ngModel","ngModelOptions","ngModelChange","change"],[1,"row"],[1,"col-md-6","offset-md-6","my-2","text-right","pr-0"],["_ngcontent-veq-c50","","id","submit",1,"btn-default","primary",3,"click"],["_ngcontent-veq-c50","","id","cancel",1,"btn-default","btn-dft","mx-3",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.YNc(1,K,5,0,"div",1),Z.YNc(2,ee,6,1,"div",2),Z.YNc(3,te,4,1,"div",3),Z.TgZ(4,"div",4),Z.TgZ(5,"div",5),Z.TgZ(6,"div",6),Z._uU(7),Z.qZA(),Z.qZA(),Z.TgZ(8,"div",7),Z.TgZ(9,"div",8),Z.TgZ(10,"a",9),Z.NdJ("click",function(){return t.goToOrgList()}),Z._UZ(11,"i",10),Z._uU(12),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(13,"div",4),Z.TgZ(14,"div",11),Z.TgZ(15,"div",6),Z._uU(16),Z.qZA(),Z.TgZ(17,"div",12),Z.TgZ(18,"div",13),Z.TgZ(19,"ng-select",14),Z.NdJ("ngModelChange",function(e){return t.selectedUsers=e}),Z.qZA(),Z.qZA(),Z.TgZ(20,"div",15),Z.TgZ(21,"button",16),Z.NdJ("click",function(){return t.addUser()}),Z._uU(22),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(23,"div",4),Z.TgZ(24,"div",17),Z.YNc(25,ie,6,1,"div",2),Z.TgZ(26,"table",18),Z.TgZ(27,"thead",19),Z.TgZ(28,"tr"),Z.TgZ(29,"th"),Z._uU(30),Z.qZA(),Z.TgZ(31,"th"),Z._uU(32),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(33,"tbody"),Z.YNc(34,ne,5,3,"tr",20),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(35,"div",4),Z.TgZ(36,"div",21),Z.TgZ(37,"div",6),Z._uU(38),Z.qZA(),Z.qZA(),Z.YNc(39,re,17,6,"div",22),Z.qZA(),Z.YNc(40,le,6,2,"div",23),Z.qZA(),Z.YNc(41,ce,12,5,"ng-template",null,24,Z.W1O)),2&e&&(Z.xp6(1),Z.Q6J("ngIf",t.loader),Z.xp6(1),Z.Q6J("ngIf",t.error),Z.xp6(1),Z.Q6J("ngIf",t.success),Z.xp6(4),Z.hij("",t.orgName," "),Z.xp6(5),Z.Oqu(t.language.backtoorg),Z.xp6(4),Z.hij("",t.language.addadmin," "),Z.xp6(3),Z.Q6J("items",t.usersList)("ngModel",t.selectedUsers)("clearable",!1)("ngModelOptions",Z.DdM(24,se))("multiple",!0)("disabled",!(null!=t.usersList&&t.usersList.length)),Z.xp6(2),Z.Q6J("disabled",!(null!=t.usersList&&t.usersList.length)),Z.xp6(1),Z.Oqu(t.language.add),Z.xp6(2),Z.Q6J("hidden",!t.dataAvailable),Z.xp6(1),Z.Q6J("ngIf",t.warning),Z.xp6(1),Z.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),Z.xp6(4),Z.Oqu(t.language.username),Z.xp6(2),Z.Oqu(t.language.action),Z.xp6(2),Z.Q6J("ngForOf",t.addedUsersList),Z.xp6(4),Z.hij("",t.language.entitlements," "),Z.xp6(1),Z.Q6J("ngIf",t.entitlementAvailable),Z.xp6(1),Z.Q6J("ngIf",t.showSubmitButtons))},directives:[r.O5,W.w9,l.JJ,l.On,z.G,r.sg,l._Y,l.JL,l.F],styles:[".overriden-input-remove[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;right:30px;padding:0 8px 0 0;cursor:pointer}.overriden-input-remove[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;padding-bottom:3px}.org-detail-status[_ngcontent-%COMP%]{width:150px!important}.hiddenCol[_ngcontent-%COMP%]{width:0px!important}"]}),i}(),ge=s(61411),pe=s(97171),he=s(94634),fe=s(83909),me=s(5826);function ve(e,t){1&e&&(Z.TgZ(0,"div",11),Z.TgZ(1,"div",12),Z.TgZ(2,"div",13),Z.TgZ(3,"span",14),Z._uU(4,"Loading..."),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA())}function Ze(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",15),Z.TgZ(1,"span",16),Z._UZ(2,"img",17),Z.qZA(),Z.TgZ(3,"button",18),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",19),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.errorInfo,Z.oJD)}}function be(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"tr",24),Z.TgZ(1,"td"),Z._uU(2),Z.qZA(),Z.TgZ(3,"td"),Z._uU(4),Z.qZA(),Z.TgZ(5,"td"),Z._uU(6),Z.qZA(),Z.TgZ(7,"td",25),Z.TgZ(8,"button",26),Z.NdJ("click",function(){var e=Z.CHM(i).$implicit;return Z.oxw(2).gotoSecuredAccessData(e)}),Z._UZ(9,"img",27),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=t.$implicit,a=Z.oxw(2);Z.s9C("id",n.id),Z.xp6(2),Z.Oqu(n.username),Z.xp6(2),Z.hij(" ","Read and Write"==a.checkType(n.type)?a.language["Read and Write"]:a.language["Read only"]," "),Z.xp6(2),Z.Oqu(a.checkExpiry(n))}}function Ae(e,t){if(1&e&&(Z.TgZ(0,"div",20),Z.TgZ(1,"table",21),Z.TgZ(2,"thead",22),Z.TgZ(3,"tr"),Z.TgZ(4,"th"),Z._uU(5),Z.qZA(),Z.TgZ(6,"th"),Z._uU(7),Z.qZA(),Z.TgZ(8,"th"),Z._uU(9),Z.qZA(),Z.TgZ(10,"th"),Z._uU(11),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"tbody"),Z.YNc(13,be,10,4,"tr",23),Z.qZA(),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("dtOptions",i.tableOptions),Z.xp6(4),Z.Oqu(i.language.users),Z.xp6(2),Z.Oqu(i.language.accesstype),Z.xp6(2),Z.Oqu(i.language.duration),Z.xp6(2),Z.Oqu(i.language.action),Z.xp6(2),Z.Q6J("ngForOf",i.securedTableData)}}var xe=function(){var e=function(){function e(t,i,n,s,o,r){a(this,e),this.customTranslateService=t,this.commonOrgService=i,this.router=n,this.service=s,this.sso=o,this.titleService=r,this.securedAccessTableOptions={},this.pageAvailable=!1,this.tableOptions={drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.languages=[{name:"English"},{name:"French Canadian"}],this.loader=!0,this.sysAdminRoute="systemAdministration",this.ORG_ID=this.sso.getOrganizationID(this.router.url),this.commonOrgService.currentPageAdder("orgSecuredAccess"),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.orgData&&(this.orgName=this.orgData.name?this.orgData.name:"Calix"),this.sysAdminRoute=Q.N.SYS_ADMIN_ROUTE}return o(e,[{key:"ngOnInit",value:function(){var e=this,t=this.sso.getRedirectModule(this.router.url);this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(i){e.language=i,e.dataAvailable=!1,e.setTableOptions("language"),e.titleService.setTitle("".concat(e.language["Secured Access Users"]," - ").concat("systemAdministration"===t?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language["Secured Access Users"]," - ").concat("systemAdministration"===t?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.frTable=this.customTranslateService.fr,this.tableLanguageOptions(),this.closeAlert(),this.getSAList()}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.saListSubs&&this.saListSubs.unsubscribe()}},{key:"someClickHandler",value:function(e){}},{key:"setTableOptions",value:function(e){var t=this;this.tableOptions={rowId:"id",pagingType:"full_numbers",lengthChange:!1,searching:!1,dom:"tipr",columnDefs:[{targets:[-1],orderable:!1}],drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.dataAvailable=!0,t.loader=!1},150):(this.dataAvailable=!0,this.loader=!1)}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}},{key:"goToOrgList",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/organizations")])}},{key:"getSAList",value:function(){var e=this;this.saListSubs=this.service.getSCLByOrg(this.ORG_ID).subscribe(function(t){e.securedTableData=t,e.setTableOptions()},function(t){e.securedTableData=[],e.setTableOptions(),e.loader=!1,e.errorInfo=401==t.status?e.language["Access Denied"]:e.commonOrgService.pageErrorHandle(t),e.closeAlert(),e.error=!0})}},{key:"gotoSecuredAccessData",value:function(e){sessionStorage.setItem("SecuredAccessUser",JSON.stringify(e)),this.router.navigate(["".concat(this.sysAdminRoute,"/UserSecuredAccess")])}},{key:"checkType",value:function(e){return this.service.checkType(e)}},{key:"checkExpiry",value:function(e){return this.service.checkExpiry(e)}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}},{key:"closeAlert",value:function(){this.error=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(A.d),Z.Y36(b.v),Z.Y36(c.F0),Z.Y36(me.q),Z.Y36(V.t6),Z.Y36(T.Dx))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-secured-access"]],decls:14,vars:5,consts:[[1,"container","mh-65","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"row","my-3"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","mr-1"],["class","col-md-12",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"col-md-12"],["id","secure-access-list","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,""],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"actions",2,"white-space","nowrap"],[1,"",2,"font-size","12px","border","none","background-color","transparent",3,"click"],["src","assets/images/user_secure_access_icon.png"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.YNc(1,ve,5,0,"div",1),Z.YNc(2,Ze,6,1,"div",2),Z.TgZ(3,"div",3),Z.TgZ(4,"div",4),Z.TgZ(5,"div",5),Z._uU(6),Z.qZA(),Z.qZA(),Z.TgZ(7,"div",6),Z.TgZ(8,"div",7),Z.TgZ(9,"a",8),Z.NdJ("click",function(){return t.goToOrgList()}),Z._UZ(10,"i",9),Z._uU(11),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"div",3),Z.YNc(13,Ae,14,6,"div",10),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(1),Z.Q6J("ngIf",!t.dataAvailable),Z.xp6(1),Z.Q6J("ngIf",t.error),Z.xp6(4),Z.Oqu(t.orgName),Z.xp6(5),Z.hij(" ",t.language.backtoorg," "),Z.xp6(2),Z.Q6J("ngIf",t.dataAvailable))},directives:[r.O5,z.G,r.sg],styles:[""]}),e}(),Te=s(98325),_e=s(3483),Ce=s(57923),ye=s(7450),ke=s(93517),qe=s(42821),we=s(20497),Oe=s(53668),Se=s(91841),Me=s(82823),Ue=function(){return["active"]};function De(e,t){1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",20),Z._uU(2,"Account Management"),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(1,Ue)))}function Ne(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",21),Z._uU(2),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(2,Ue)),Z.xp6(1),Z.Oqu(i.language["Operations Cloud"])}}function Ie(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",22),Z._uU(2),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(2,Ue)),Z.xp6(1),Z.Oqu(i.language["Call Outcome"])}}function Ee(e,t){if(1&e&&(Z.TgZ(0,"a",24),Z._uU(1),Z.qZA()),2&e){var i=Z.oxw(2);Z.ekj("active",i.router.isActive("/systemAdministration/block_page_template_list",!1)||i.router.isActive("/systemAdministration/block_page_template",!1)||i.router.isActive("/systemAdministration/block_page_template_update",!1)),Z.xp6(1),Z.hij("",i.language.Block_Page_Temp," ")}}function Fe(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.YNc(1,Ee,2,3,"a",23),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",i.showBlackPage)}}function Pe(e,t){if(1&e&&(Z.TgZ(0,"a",25),Z._uU(1),Z.qZA()),2&e){var i=Z.oxw();Z.ekj("active",i.router.isActive("systemAdministration/SmartTownWi-Fi",!1)),Z.xp6(1),Z.Oqu(i.language.myCommunityIQ)}}function Le(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._uU(1),Z.qZA()),2&e){var i=Z.oxw(2);Z.xp6(1),Z.Oqu(i.language["subscriber-prospect-upload"])}}function Je(e,t){if(1&e&&(Z.TgZ(0,"span"),Z._uU(1),Z.qZA()),2&e){var i=Z.oxw(2);Z.xp6(1),Z.lnq("",i.language.Subscriber,"\xa0",i.language.File,"\xa0",i.language.Upload,"")}}function Re(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",26),Z.YNc(2,Le,2,1,"span",27),Z.YNc(3,Je,2,3,"span",27),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.ekj("active",i.router.url.includes("subscriber-prospect-upload")||i.router.url.includes("subscriber-prospect-list")),Z.xp6(1),Z.Q6J("ngIf",i.apps.cmcPro),Z.xp6(1),Z.Q6J("ngIf",!i.apps.cmcPro)}}function He(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",28),Z._uU(2),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(2,Ue)),Z.xp6(1),Z.Oqu(i.language["API Usage"])}}function Ye(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",29),Z._uU(2),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("ngClass","commandWorx"==i.currentPage||"commandiq-create"==i.currentPage||"commandWorx-create"==i.currentPage||"commandWorx-update"==i.currentPage||"commandiq-update"==i.currentPage||"commandiq"==i.currentPage||"support-information"==i.currentPage?"active":""),Z.xp6(1),Z.Oqu(i.language["Mobile App"])}}function Qe(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",30),Z._uU(2),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(2,Ue)),Z.xp6(1),Z.hij("",i.language.cmcName," ")}}function ze(e,t){if(1&e&&(Z.TgZ(0,"li",2),Z.TgZ(1,"a",31),Z._uU(2),Z.qZA(),Z.qZA()),2&e){var i=Z.oxw();Z.xp6(1),Z.Q6J("ngClass",i.router.url.includes("chatbot")||i.router.url.includes("chatbot-create")?"active":""),Z.xp6(1),Z.Oqu(i.language.Chatbot)}}var Be=function(){var e=function(){function e(t,i,n,s,o,r,l,c){var d=this;a(this,e),this.commonOrgService=t,this.customTranslateService=i,this.sso=n,this.router=s,this.apiUsageService=o,this.organizationApiService=r,this.http=l,this.zipcodeService=c,this.currentPage="organizations",this.orgName="",this.isSysAdmin=!1,this.showCOC=!1,this.showAPIUsage=!1,this.showMobileApp=!1,this.billingStatusEnabled=!1,this.isCA=!1,this.apps={cmc:!1,csc:!1,fa:!1,shad:!1,orgAdmin:!1,calixAdmin:!1,foundation:!1,Community:!1,cmcPro:!1,chatBot:!0},this.showAccountManagement=!1,this.commonOrgService.currentPageData.subscribe(function(e){d.currentPage=e||"organizations"}),this.orgData=JSON.parse(sessionStorage.getItem("calixAdminOrgDetail")),this.orgData&&(this.orgName=this.orgData.name?this.orgData.name:"Calix"),this.commonOrgService.currentOrgData.subscribe(function(e){d.orgName=e});var u=this.router.url;this.isSysAdmin=this.checkApplication(u),this.ORG_ID=this.sso.getOrganizationID(u),this.getorgInfoData()}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.isCA=!!qe.f.prototype.nativeWindow.includes("calixcloud-ca.calix.com"),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(t){e.language=t}),this.userInfo=this.sso.getUserInfo(),this.getBillingList();var t=this.sso.getEntitlements();(t[118]||t[120])&&(this.apps.csc=!0),(t[214]||t[222]||t[223])&&(this.apps.Community=!0),(t[119]||t[209])&&(this.apps.cmc=!0),t[209]&&(this.apps.cmcPro=!0),this.orgName=this.orgName?this.orgName:"Calix","https://api.calix.ai"!==Q.N.SSO_API_URL&&(this.showCOC=!0);var i=this.sso.getScopes();Q.N.VALIDATE_SCOPE?(i["cloud.rbac.csc.calloutcome.createview"]=i["cloud.rbac.csc.calloutcome.createview"]?i["cloud.rbac.csc.calloutcome.createview"]:[],i["cloud.rbac.csc.calloutcome.createview"]&&i["cloud.rbac.csc.calloutcome.createview"].includes("read")&&(this.calloutcomeRead=!0),i["cloud.rbac.csc.calloutcome.createview"]&&i["cloud.rbac.csc.calloutcome.createview"].includes("write")&&(this.calloutcomeWrite=!0),i["cloud.admin.orgs"]&&(i["cloud.admin.orgs"].includes("write")||i["cloud.admin.orgs"].includes("read"))&&(this.showBlackPage=!0,this.showCommandIQ=!0),i["cloud.admin.users"]&&(i["cloud.admin.users"].includes("write")||i["cloud.admin.users"].includes("read"))&&(this.showBlackPage=!0,this.showCommandIQ=!0)):(this.calloutcomeRead=!0,this.calloutcomeWrite=!0),this.commonOrgService.showApiUsage.subscribe(function(t){e.showAPIUsage=t||!1});var n=localStorage.getItem("apiUsage");this.showAPIUsage=!(!n||"true"!=n),this.getGranteeOrgs(),this.commonOrgService.showAccountManagement.subscribe(function(t){t&&(e.ORG_ID=t,e.getorgInfoData(),e.getGranteeOrgs())})}},{key:"getorgInfoData",value:function(){var e=this;this.orgInfoSubs=this.organizationApiService.orgInfoEntitlement(this.ORG_ID).subscribe(function(t){var i,n,a;if(e.orgInfoEntitlementdata=t,t){for(var s={},o=0;o<(null===(i=e.orgInfoEntitlementdata)||void 0===i?void 0:i.length);o++)s[e.orgInfoEntitlementdata[o].appType]=e.orgInfoEntitlementdata[o];("Expired"!==(null===(n=s[218])||void 0===n?void 0:n.status)||s[200]&&"Expired"!==s[200].status||s[201]&&"Expired"!==s[201].status)&&(e.apps.foundation=!0,e.showMobileApp=!0),e.apps.cmc=!!(s[119]&&"Expired"!==s[119].status||s[209]&&"Expired"!==s[209].status),e.apps.cmcPro=!(!s[209]||"Expired"===s[209].status),e.apps.chatBot=!(!s[118]||"Expired"==(null===(a=s[118])||void 0===a?void 0:a.status))}},function(e){})}},{key:"goToLink",value:function(e){window.open(e,"_blank")}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}},{key:"showApps",value:function(){this.apps=Object.assign(Object.assign({},this.apps),this.sso.showApps()),this.apps.fa=this.apps.cco}},{key:"checkApplication",value:function(e){return e.indexOf("/systemAdministration/")>-1}},{key:"getGranteeOrgs",value:function(){var e=this;this.http.get("".concat(Q.N.API_BASE_URL,"federated/").concat(this.ORG_ID,"/grantee")).pipe((0,j.K)(function(e){return e["api-error"]=!0,(0,R.of)(e)})).subscribe(function(t){(null==t?void 0:t["api-error"])||(e.showAccountManagement=!!(null==t?void 0:t.length))})}},{key:"getBillingList",value:function(){var e=this;this.zipcodeService.marketingCloudCheck().subscribe(function(t){t&&(e.billingStatusEnabled=t.billingStatusEnabled)},function(t){e.billingStatusEnabled=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(b.v),Z.Y36(A.d),Z.Y36(V.t6),Z.Y36(c.F0),Z.Y36(we.w),Z.Y36(Oe.F),Z.Y36(Se.eN),Z.Y36(Me.F))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-side-menu"]],decls:60,vars:53,consts:[[1,""],[1,"nav","flex-column","left-menu"],[1,"nav-item"],["routerLink","organizations",1,"list-group-item","list-group-item-action","active"],[1,"nav-item",3,"ngClass"],["routerLink","orgSecuredAccess",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],[3,"ngClass"],[1,"list-group-item","list-group-item-action","active"],["routerLink","users",1,"list-group-item","list-group-item-action",3,"ngClass"],["routerLink","UserSecuredAccess",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","blacklist",1,"list-group-item","list-group-item-action",3,"ngClass"],["class","nav-item",4,"ngIf"],["routerLink","roles",1,"list-group-item","list-group-item-action",3,"ngClass"],["routerLink","csccfg",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","orginfo",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","flowAnalyze",1,"list-group-item","list-group-item-action"],["routerLink","orgacl",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","sso",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["class","list-group-item list-group-item-action","routerLink","./SmartTownWi-Fi",3,"active",4,"ngIf"],["routerLink","./zip-code-upload",1,"list-group-item","list-group-item-action"],["routerLink","account-management",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","cco-admin",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","admin-call-outcome",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["class","list-group-item list-group-item-action","routerLink","./block_page_template_list",3,"active",4,"ngIf"],["routerLink","./block_page_template_list",1,"list-group-item","list-group-item-action"],["routerLink","./SmartTownWi-Fi",1,"list-group-item","list-group-item-action"],["routerLink","subscriber-prospect-upload",1,"list-group-item","list-group-item-action"],[4,"ngIf"],["routerLink","api-usage",1,"list-group-item","list-group-item-action",3,"routerLinkActive"],["routerLink","mobile-app/commandiq",1,"list-group-item","list-group-item-action",3,"ngClass"],["routerLink","engagement-cloud",1,"list-group-item","list-group-item-action","ml-0",3,"routerLinkActive"],["routerLink","chatbot",1,"list-group-item","list-group-item-action",3,"ngClass"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.TgZ(1,"ul",1),Z.TgZ(2,"li",2),Z.TgZ(3,"a",3),Z._uU(4),Z.qZA(),Z.qZA(),Z.TgZ(5,"li",4),Z.TgZ(6,"a",5),Z._uU(7),Z.qZA(),Z.qZA(),Z.TgZ(8,"section",6),Z.TgZ(9,"li",2),Z.TgZ(10,"a",7),Z._uU(11),Z.ALo(12,"slice"),Z.qZA(),Z.qZA(),Z.TgZ(13,"li",2),Z.TgZ(14,"a",8),Z._uU(15),Z.qZA(),Z.qZA(),Z.TgZ(16,"li",4),Z.TgZ(17,"a",9),Z._uU(18),Z.qZA(),Z.qZA(),Z.TgZ(19,"li",4),Z.TgZ(20,"a",7),Z._uU(21),Z.qZA(),Z.qZA(),Z.TgZ(22,"li",2),Z.TgZ(23,"a",10),Z._uU(24),Z.qZA(),Z.qZA(),Z.YNc(25,De,3,2,"li",11),Z.TgZ(26,"li",2),Z.TgZ(27,"a",12),Z._uU(28),Z.qZA(),Z.qZA(),Z.TgZ(29,"li",4),Z.TgZ(30,"a",7),Z._uU(31),Z.qZA(),Z.qZA(),Z.TgZ(32,"li",2),Z.TgZ(33,"a",13),Z._uU(34),Z.qZA(),Z.qZA(),Z.TgZ(35,"li",2),Z.TgZ(36,"a",14),Z._uU(37),Z.qZA(),Z.qZA(),Z.TgZ(38,"li",2),Z.TgZ(39,"a",15),Z._uU(40),Z.qZA(),Z.qZA(),Z.TgZ(41,"li",2),Z.TgZ(42,"a",16),Z._uU(43),Z.qZA(),Z.qZA(),Z.TgZ(44,"li",2),Z.TgZ(45,"a",17),Z._uU(46),Z.qZA(),Z.qZA(),Z.YNc(47,Ne,3,3,"li",11),Z.YNc(48,Ie,3,3,"li",11),Z.YNc(49,Fe,2,1,"li",11),Z.TgZ(50,"li",2),Z.YNc(51,Pe,2,3,"a",18),Z.qZA(),Z.TgZ(52,"li",2),Z.TgZ(53,"a",19),Z._uU(54),Z.qZA(),Z.qZA(),Z.YNc(55,Re,4,4,"li",11),Z.YNc(56,He,3,3,"li",11),Z.YNc(57,Ye,3,2,"li",11),Z.YNc(58,Qe,3,3,"li",11),Z.YNc(59,ze,3,2,"li",11),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(4),Z.Oqu(t.language.allorganisation),Z.xp6(1),Z.Q6J("ngClass","orgSecuredAccess"==t.currentPage?"dblock":"dnone"),Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(47,Ue)),Z.xp6(1),Z.Oqu(t.language.securedaccess),Z.xp6(1),Z.Q6J("ngClass","organizations"!=t.currentPage&&"orgSecuredAccess"!=t.currentPage&&"orgDetail"!=t.currentPage?"dblock":"dnone"),Z.xp6(3),Z.Oqu(t.orgName.length>30?Z.Dn7(12,43,t.orgName,0,30)+"..":t.orgName),Z.xp6(3),Z.Q6J("ngClass","users"==t.currentPage||"addUser"==t.currentPage||"usersDetail"==t.currentPage||"UserSecuredAccess"==t.currentPage?"active":""),Z.xp6(1),Z.Oqu(t.language.users),Z.xp6(1),Z.Q6J("ngClass","UserSecuredAccess"==t.currentPage?"dblock":"dnone"),Z.xp6(1),Z.Q6J("routerLinkActive",Z.DdM(48,Ue)),Z.xp6(1),Z.Oqu(t.language.securedaccess),Z.xp6(1),Z.Q6J("ngClass","usersDetail"==t.currentPage?"dblock":"dnone"),Z.xp6(2),Z.Oqu(t.language.usersdetail),Z.xp6(2),Z.Q6J("ngClass","blacklist"==t.currentPage||"blacklistAddUser"==t.currentPage?"active":""),Z.xp6(1),Z.Oqu(t.language.deactivatedusers),Z.xp6(1),Z.Q6J("ngIf",t.showAccountManagement),Z.xp6(2),Z.Q6J("ngClass","roles"==t.currentPage||"addRole"==t.currentPage||"roleDetails"==t.currentPage?"active":""),Z.xp6(1),Z.Oqu(t.language.roles),Z.xp6(1),Z.Q6J("ngClass","addRole"==t.currentPage?"dblock":"dnone"),Z.xp6(2),Z.Oqu(t.language.addnewrole),Z.xp6(2),Z.Q6J("routerLinkActive",Z.DdM(49,Ue)),Z.xp6(1),Z.Oqu(t.language.acsConfig),Z.xp6(2),Z.Q6J("routerLinkActive",Z.DdM(50,Ue)),Z.xp6(1),Z.Oqu(t.language.orginfo),Z.xp6(2),Z.ekj("active",t.router.url.includes("devices-name-placeholder")||t.router.url.includes("flowAnalyze")),Z.xp6(1),Z.Oqu(t.language.flowconfiguration),Z.xp6(2),Z.Q6J("routerLinkActive",Z.DdM(51,Ue)),Z.xp6(1),Z.Oqu(t.language.orgacl),Z.xp6(2),Z.Q6J("routerLinkActive",Z.DdM(52,Ue)),Z.xp6(1),Z.Oqu(t.language.ssoconfig),Z.xp6(1),Z.Q6J("ngIf",t.apps.fa),Z.xp6(1),Z.Q6J("ngIf",t.apps.csc&&t.calloutcomeRead),Z.xp6(1),Z.Q6J("ngIf",t.apps.foundation),Z.xp6(2),Z.Q6J("ngIf",t.apps.Community),Z.xp6(2),Z.ekj("active",t.router.isActive("systemAdministration/zip-code-upload",!1)||t.router.isActive("systemAdministration/zip-code-entrylist",!1)),Z.xp6(1),Z.Oqu(t.language["ZIP Code File Upload"]),Z.xp6(1),Z.Q6J("ngIf",t.apps.cmc&&!t.isCA),Z.xp6(1),Z.Q6J("ngIf",t.showAPIUsage),Z.xp6(1),Z.Q6J("ngIf",t.showMobileApp),Z.xp6(1),Z.Q6J("ngIf",(t.apps.cmc||t.apps.cmcPro)&&t.billingStatusEnabled),Z.xp6(1),Z.Q6J("ngIf",t.apps.chatBot))},directives:[c.yS,r.mk,c.Od,r.O5],pipes:[r.OU],styles:[".left-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-left:inherit!important;border-right:inherit!important;border-top:inherit!important;word-break:break-word;padding-right:10px}"]}),e}(),$e=s(93702),je=["scrollTopId"];function Ve(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",8),Z.TgZ(1,"span",9),Z._UZ(2,"img",10),Z.qZA(),Z.TgZ(3,"button",11),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",12),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.errorInfo,Z.oJD)}}function Ge(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",13),Z.TgZ(1,"button",11),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(2,"span"),Z.qZA(),Z._uU(3),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(3),Z.hij(" ",n.successInfo," ")}}var We=function(){var e=function(){function e(t,i,n,s){var o=this;a(this,e),this.common=t,this.router=i,this.translateSerice=n,this.titleService=s,this.showRecord=this.common.recordView,this.rouerSubs=this.router.events.subscribe(function(e){e instanceof c.OD&&o.common.closeAlert()}),this.language=this.translateSerice.defualtLanguage,this.languageSubject=this.translateSerice.selectedLanguage.subscribe(function(e){o.language=e})}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.scrollSubs=this.common.scrollTop.subscribe(function(){try{e.scrollTop()}catch(t){}}),this.closeSubs=this.common.closeAlerts.subscribe(function(){e.closeAlert()}),this.successSubs=this.common.successAlert.subscribe(function(t){e.openSuccessAlert(t)}),this.errorSubs=this.common.errorAlert.subscribe(function(t){e.openErrorAlert(t)})}},{key:"onActivate",value:function(e){window.scroll({top:0,left:0,behavior:"smooth"})}},{key:"ngOnDestroy",value:function(){this.scrollSubs&&this.scrollSubs.unsubscribe(),this.closeSubs&&this.closeSubs.unsubscribe(),this.successSubs&&this.successSubs.unsubscribe(),this.errorSubs&&this.errorSubs.unsubscribe(),this.rouerSubs&&this.rouerSubs.unsubscribe(),this.languageSubject.unsubscribe()}},{key:"scrollTop",value:function(){this.scrollTopId.nativeElement.scrollIntoView()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"openSuccessAlert",value:function(e){e&&(this.successInfo=e,this.success=!0)}},{key:"openErrorAlert",value:function(e){e&&(this.errorInfo=e,this.error=!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(b.v),Z.Y36(c.F0),Z.Y36(ye.s),Z.Y36(T.Dx))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-sys-admin"]],viewQuery:function(e,t){var i;(1&e&&Z.Gf(je,7),2&e)&&(Z.iGM(i=Z.CRH())&&(t.scrollTopId=i.first))},decls:11,vars:5,consts:[[1,"maximus","sys-admin-cont"],[1,"row"],[3,"ngClass","hidden"],[3,"ngClass"],["scrollTopId",""],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[3,"activate"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z._UZ(1,"app-admin-header"),Z.TgZ(2,"div",1),Z.TgZ(3,"div",2),Z._UZ(4,"app-side-menu"),Z.qZA(),Z.TgZ(5,"div",3,4),Z.YNc(7,Ve,6,1,"div",5),Z.YNc(8,Ge,4,1,"div",6),Z.TgZ(9,"router-outlet",7),Z.NdJ("activate",function(e){return t.onActivate(e)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z._UZ(10,"app-admin-footer")),2&e&&(Z.xp6(3),Z.Q6J("ngClass",!0!==(null==t.showRecord?null:t.showRecord.show)?"col-md-3 col-sm-3 col-xs-12 pr-2":"")("hidden",null==t.showRecord?null:t.showRecord.show),Z.xp6(2),Z.Q6J("ngClass",!0===(null==t.showRecord?null:t.showRecord.show)?"col-md-12 col-sm-12 col-xs-12":"col-md-9 col-sm-9 col-xs-12"),Z.xp6(2),Z.Q6J("ngIf",t.error),Z.xp6(1),Z.Q6J("ngIf",t.success))},directives:[ke.G,r.mk,Be,r.O5,c.lC,$e.c],styles:[""]}),e}(),Xe=s(18638),Ke=["deleteModal"],et=["picker_start"],tt=["picker_end"];function it(e,t){1&e&&(Z.TgZ(0,"div",13),Z.TgZ(1,"div",14),Z.TgZ(2,"div",15),Z.TgZ(3,"span",16),Z._uU(4,"Loading..."),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA())}function nt(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",17),Z.TgZ(1,"span",18),Z._UZ(2,"img",19),Z.qZA(),Z.TgZ(3,"button",20),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(4,"span"),Z.qZA(),Z._UZ(5,"div",21),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(5),Z.Q6J("innerHtml",n.errorInfo,Z.oJD)}}function at(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",22),Z.TgZ(1,"button",20),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeAlert()}),Z._UZ(2,"span"),Z.qZA(),Z._UZ(3,"div",23),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(3),Z.Q6J("innerHtml",n.successInfo,Z.oJD)}}function st(e,t){if(1&e&&(Z.TgZ(0,"div",57),Z._uU(1),Z.qZA()),2&e){var i=Z.oxw(2);Z.xp6(1),Z.Oqu(i.language["Please select an organization(s)"])}}function ot(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"tr"),Z.TgZ(1,"td"),Z._uU(2),Z.qZA(),Z.TgZ(3,"td"),Z._uU(4),Z.qZA(),Z.TgZ(5,"td"),Z._uU(6),Z.qZA(),Z.TgZ(7,"td",58),Z.TgZ(8,"a"),Z.TgZ(9,"i",59),Z.NdJ("click",function(){var e=Z.CHM(i).$implicit;return Z.oxw(2).deleteOneData(e)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=t.$implicit,a=Z.oxw(2);Z.xp6(2),Z.Oqu(a.language[n.orgName]||n.orgName),Z.xp6(2),Z.hij(" ","Read and Write"==a.checkType(n.type)?a.language["Read and Write"]:a.language["Read only"]," "),Z.xp6(2),Z.Oqu(a.checkExpiry(n)),Z.xp6(3),Z.s9C("title",a.language.delete)}}function rt(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",60),Z.TgZ(1,"div",61),Z.TgZ(2,"button",62),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw(2).save()}),Z._uU(3),Z.qZA(),Z.TgZ(4,"button",63),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw(2).cancel()}),Z._uU(5),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=Z.oxw(2);Z.xp6(3),Z.Oqu(n.language.saveEnregistrer),Z.xp6(2),Z.Oqu(n.language.Cancel)}}var lt=function(){return{standalone:!0}},ct=function(){return{width:"100%",height:"36px"}},dt=function(){return{height:"36px"}};function ut(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div"),Z.TgZ(1,"div",24),Z.TgZ(2,"form"),Z.TgZ(3,"div",25),Z.TgZ(4,"div",26),Z.TgZ(5,"div",27),Z.TgZ(6,"input",28),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().isAllOrgs=e}),Z.qZA(),Z.TgZ(7,"label",29),Z._uU(8),Z.qZA(),Z.qZA(),Z.TgZ(9,"ng-select",30),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().selectedOrgs=e}),Z.qZA(),Z.YNc(10,st,2,1,"div",31),Z.qZA(),Z.TgZ(11,"div",26),Z.TgZ(12,"div",32),Z.TgZ(13,"input",33),Z.NdJ("click",function(e){return Z.CHM(i),Z.oxw().checkAllOrgs(e.target.checked)})("ngModelChange",function(e){return Z.CHM(i),Z.oxw().isAllOrgs=e}),Z.qZA(),Z.TgZ(14,"label",34),Z._uU(15),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(16,"div",35),Z.TgZ(17,"p",36),Z._uU(18),Z.qZA(),Z.TgZ(19,"div",37),Z.TgZ(20,"label",38),Z.TgZ(21,"input",39),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().isReadOnly=e}),Z.qZA(),Z._uU(22),Z.qZA(),Z.qZA(),Z.TgZ(23,"div",40),Z.TgZ(24,"label",38),Z.TgZ(25,"input",39),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().isReadOnly=e}),Z.qZA(),Z._uU(26),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(27,"div",35),Z.TgZ(28,"p",36),Z._uU(29),Z.qZA(),Z.TgZ(30,"div",41),Z.TgZ(31,"div",42),Z.TgZ(32,"p",36),Z._uU(33),Z.qZA(),Z.TgZ(34,"p-calendar",43),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().startDate=e})("onSelect",function(){return Z.CHM(i),Z.oxw().changeDate()}),Z.qZA(),Z.qZA(),Z.TgZ(35,"div",42),Z.TgZ(36,"p",36),Z._uU(37),Z.qZA(),Z.TgZ(38,"p-calendar",44),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().endDate=e}),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(39,"div",45),Z.TgZ(40,"label",46),Z.TgZ(41,"input",47),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().hasEndTime=e}),Z.qZA(),Z._uU(42),Z.qZA(),Z.qZA(),Z.TgZ(43,"div",40),Z.TgZ(44,"label",48),Z.TgZ(45,"input",49),Z.NdJ("ngModelChange",function(e){return Z.CHM(i),Z.oxw().hasEndTime=e}),Z.qZA(),Z._uU(46),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(47,"div",50),Z.TgZ(48,"button",51),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().addNewDatas()}),Z._uU(49),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(50,"div",52),Z.TgZ(51,"div",53),Z.TgZ(52,"table",54),Z.TgZ(53,"thead",24),Z.TgZ(54,"tr"),Z.TgZ(55,"th"),Z._uU(56),Z.qZA(),Z.TgZ(57,"th"),Z._uU(58),Z.qZA(),Z.TgZ(59,"th"),Z._uU(60),Z.qZA(),Z.TgZ(61,"th"),Z._uU(62),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(63,"tbody"),Z.YNc(64,ot,10,4,"tr",55),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(65,rt,6,2,"div",56),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(6),Z.Q6J("value",!1)("ngModel",n.isAllOrgs),Z.xp6(2),Z.hij(" ",n.language["Select Organizations"]," "),Z.xp6(1),Z.s9C("placeholder",n.language.selectAnOrganization),Z.Q6J("items",n.orgsList)("ngModel",n.selectedOrgs)("multiple",!0)("ngModelOptions",Z.DdM(61,lt))("clearable",!1)("searchable",!0)("disabled",n.isAllOrgs),Z.xp6(1),Z.Q6J("ngIf",n.showErrorMsg&&!n.selectedOrgs.length),Z.xp6(3),Z.Q6J("value",!0)("ngModel",n.isAllOrgs),Z.xp6(2),Z.hij(" ",n.language["All Organizations"]," "),Z.xp6(3),Z.Oqu(n.language["Access Type"]),Z.xp6(3),Z.Q6J("value",!0)("ngModel",n.isReadOnly),Z.xp6(1),Z.hij("",n.language["Read only"]," "),Z.xp6(3),Z.Q6J("value",!1)("ngModel",n.isReadOnly),Z.xp6(1),Z.hij("",n.language["Write and Read"]," "),Z.xp6(3),Z.Oqu(n.language["Access Duration"]),Z.xp6(4),Z.Oqu(n.language["Start Time"]),Z.xp6(1),Z.Akn(Z.DdM(62,ct)),Z.Q6J("ngModel",n.startDate)("minDate",n.minimumDate)("showTime",!0)("inputStyle",Z.DdM(63,dt))("autoZIndex",!0)("showIcon",!0)("ngModelOptions",Z.DdM(64,lt))("minDate",n.minimumDate),Z.xp6(3),Z.Oqu(n.language["End Time"]),Z.xp6(1),Z.Akn(Z.DdM(65,ct)),Z.Q6J("ngModel",n.endDate)("minDate",n.startDate)("showTime",!0)("inputStyle",Z.DdM(66,dt))("autoZIndex",!0)("showIcon",!0)("ngModelOptions",Z.DdM(67,lt))("minDate",n.minimumDate),Z.xp6(3),Z.Q6J("value",!0)("ngModel",n.hasEndTime),Z.xp6(1),Z.hij("",n.language["Has End Time"]," "),Z.xp6(3),Z.Q6J("value",!1)("ngModel",n.hasEndTime),Z.xp6(1),Z.hij("",n.language["No End Time"]," "),Z.xp6(3),Z.Oqu(n.language.add),Z.xp6(2),Z.Q6J("hidden",!n.dataAvailable),Z.xp6(1),Z.Q6J("dtOptions",n.tableOptions)("dtTrigger",n.dtTrigger),Z.xp6(4),Z.Oqu(n.language.Organizations),Z.xp6(2),Z.Oqu(n.language["Access Type"]),Z.xp6(2),Z.Oqu(n.language.Duration),Z.xp6(2),Z.Oqu(n.language.Action),Z.xp6(2),Z.Q6J("ngForOf",n.addedOrgsList),Z.xp6(1),Z.Q6J("ngIf",n.showButtons)}}function gt(e,t){if(1&e){var i=Z.EpF();Z.TgZ(0,"div",64),Z.TgZ(1,"h4",65),Z._uU(2),Z.qZA(),Z.TgZ(3,"button",66),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeModal()}),Z._UZ(4,"span",67),Z.qZA(),Z.qZA(),Z.TgZ(5,"div",68),Z._uU(6),Z._UZ(7,"br"),Z._uU(8),Z.qZA(),Z.TgZ(9,"div",69),Z.TgZ(10,"button",70),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().confirmDeleteSecleted()}),Z._uU(11),Z.qZA(),Z.TgZ(12,"button",71),Z.NdJ("click",function(){return Z.CHM(i),Z.oxw().closeModal()}),Z._uU(13),Z.qZA(),Z.qZA()}if(2&e){var n=Z.oxw();Z.xp6(2),Z.Oqu(n.modalTitle),Z.xp6(4),Z.hij(" ",n.language["Are you sure you want to delete"],"?"),Z.xp6(2),Z.hij(" (",n.modalInfo,") "),Z.xp6(3),Z.Oqu(n.language.yes),Z.xp6(2),Z.Oqu(n.language.no)}}s(91704);var pt=function(){var e=function(){function e(t,i,n,s,o,r,c){var d=this;a(this,e),this.commonOrgService=t,this.router=i,this.customTranslateService=n,this.service=s,this.sso=o,this.dialogService=r,this.titleService=c,this.pageAvailable=!1,this.criteria=[],this.tableOptions={rowId:"id",processing:!0,lengthChange:!1,searching:!1,ordering:!1,paging:!1,dom:"t"},this.dtTrigger=new J.xQ,this.isRerender=!1,this.orgsList=[],this.selectedOrgs=[],this.addedOrgsList=[],this.isAllOrgs=!1,this.isReadOnly=!0,this.hasEndTime=!0,this.loader=!0,this.errorInfo="",this.successInfo="",this.showButtons=!1,this.sysAdminRoute="systemAdministration",this.minDate=new Date,this.formGroup=new l.cw({date:new l.NI(null,[l.kI.required]),date2:new l.NI(null,[l.kI.required])}),this.dateControl=new l.NI(new Date),this.dateControlMinMax=new l.NI(new Date),this.options=[{value:!0,label:"True"},{value:!1,label:"False"}],this.listColors=["primary","accent","warn"],this.stepHours=[1,2,3,4,5],this.stepMinutes=[1,5,10,15,20,25],this.stepSeconds=[1,5,10,15,20,25],this.showErrorMsg=!1;var u=this.router.url;this.ORG_ID=this.sso.getOrganizationID(u),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){d.language=e,d.titleService.setTitle("".concat(d.language.securedaccess," - ").concat("systemAdministration"===g?d.language["System Administration"]:d.language.administration," - ").concat(d.language["Calix Cloud"])),d.dataAvailable=!1,d.loader=!0,d.isRerender=!0,d.setTableOptions("language"),d.setLanguage()}),this.frTable=this.customTranslateService.fr,this.commonOrgService.currentPageAdder("UserSecuredAccess"),this.securedUser=JSON.parse(sessionStorage.getItem("SecuredAccessUser")),this.setUserInfo(),this.setLanguage(),this.setDate();var g=this.sso.getRedirectModule(u);this.titleService.setTitle("".concat(this.language.securedaccess," - ").concat("systemAdministration"===g?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return o(e,[{key:"ngOnInit",value:function(){this.criteria=[{name:"Test Org",value:"test org"},{name:"OneCloudOne",value:"onecloudone"},{name:"Srinivas Telephone",value:"srinivas telephone"}],this.getData(),this.setDate(),this.tableLanguageOptions()}},{key:"ngOnDestroy",value:function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.orgListSubs&&this.orgListSubs.unsubscribe(),this.accessOrgsListSubs&&this.accessOrgsListSubs.unsubscribe(),this.updateOrgListSubs&&this.updateOrgListSubs.unsubscribe()}},{key:"getData",value:function(){this.getAllOrgsList()}},{key:"goToUsersList",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/users")])}},{key:"goToOrgSecuredAccess",value:function(){this.router.navigate(["".concat(this.sysAdminRoute,"/orgSecuredAccess")])}},{key:"getAllOrgsList",value:function(){var e=this;this.orgListSubs=this.service.getOrgList().subscribe(function(t){e.orgsList=t,e.getSelectedOrgsList()},function(t){e.loader=!1,e.pageErrorHandle(t),e.renderOrgsTable()})}},{key:"getSelectedOrgsList",value:function(){var e=this;this.accessOrgsListSubs=this.service.getOrgListByUsername(this.securedUser.username).subscribe(function(t){e.addedOrgsList=t,e.renderOrgsTable()},function(t){e.loader=!1,e.pageErrorHandle(t),e.renderOrgsTable()})}},{key:"addNewDatas",value:function(){if(0!=this.isAllOrgs||0!=this.selectedOrgs.length){var e=this.startDate.getTime(),i=this.endDate.getTime(),n={},a=this.service.roundOffTimestamp(e);if(this.hasEndTime){var s=this.service.roundOffTimestamp(i);n={orgId:"",orgName:"",type:this.isReadOnly?"*:read":"*:write",beginTime:a,endTime:s}}else n={orgId:"",orgName:"",type:this.isReadOnly?"*:read":"*:write",beginTime:a,endTime:-1};if(this.showButtons=!0,this.isAllOrgs)n.orgId="*",n.orgName="All Organizations",this.addedOrgsList=[n];else{var o=this.addedOrgsList,r=[];if(1==o.length&&"*"==o[0].orgId&&(o=[]),o.length){var l=[];this.selectedOrgs.forEach(function(e){l.push({orgId:e.id,orgName:e.name,type:n.type,beginTime:n.beginTime,endTime:n.endTime})}),o.forEach(function(e){l.filter(function(t){return t.orgId===e.orgId}).length?(l=l.filter(function(t){return t.orgId!==e.orgId}),r.push({orgId:e.orgId,orgName:e.orgName,type:n.type,beginTime:n.beginTime,endTime:n.endTime})):r.push(e)}),r=[].concat(t(r),t(l))}else this.selectedOrgs.forEach(function(e){r.push({orgId:e.id,orgName:e.name,type:n.type,beginTime:n.beginTime,endTime:n.endTime})});this.addedOrgsList=r}this.showErrorMsg=!1,this.showButtons=!0,this.isRerender=!0,this.renderOrgsTable(),this.resetForm()}else this.showErrorMsg=!0}},{key:"deleteOneData",value:function(e){this.deleteItem=e,this.modalTitle="Delete Secured Access Organization",this.modalInfo="".concat(e.orgName," : ").concat(this.checkType(e.type)," : ").concat(this.checkExpiry(e)),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal)}},{key:"confirmDeleteSecleted",value:function(){this.closeModal();var e=this.deleteItem;this.addedOrgsList=this.addedOrgsList.filter(function(t){return t.orgId!==e.orgId}),this.showButtons=!0,this.isRerender=!0,this.renderOrgsTable()}},{key:"renderOrgsTable",value:function(){this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"setTableOptions",value:function(e){var t=this;this.tableOptions={rowId:"id",processing:!0,lengthChange:!1,searching:!1,ordering:!1,paging:!1,dom:"t",columnDefs:[{targets:[-1],orderable:!1}]},this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.dataAvailable=!0,t.rerender(),setTimeout(function(){t.loader=!1},100)},100):(this.dataAvailable=!0,this.loader=!1)}},{key:"checkType",value:function(e){return this.service.checkType(e)}},{key:"checkExpiry",value:function(e){return this.service.checkExpiry(e)}},{key:"save",value:function(){var e=this,t=[];this.addedOrgsList.forEach(function(e){t.push({orgId:e.orgId,type:e.type,beginTime:e.beginTime,endTime:e.endTime})}),this.loader=!0,this.updateOrgListSubs=this.service.AddOrgListByUsername(this.securedUser.username,t).subscribe(function(t){e.closeAlert(),e.successInfo="User secured Access saved successfully",e.success=!0,e.commonOrgService.pageScrollTop(),e.loader=!1,setTimeout(function(){e.closeAlert(),e.goToUsersList()},1500)},function(t){e.pageErrorHandle(t),e.loader=!1})}},{key:"cancel",value:function(){this.goToUsersList()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"setDate",value:function(){var e=new Date;this.startDate=e,this.endDate=new Date(e.getTime()+6e4),this.minimumDate=e}},{key:"setUserInfo",value:function(){var e=this.securedUser;this.userTitle=null!=(null==e?void 0:e.firstName)&&""!==(null==e?void 0:e.firstName)?null!=e.lastName?"".concat(e.firstName," ").concat(e.lastName):"".concat(e.firstName):"".concat(null==e?void 0:e.username)}},{key:"resetForm",value:function(){this.isAllOrgs=!1,this.isReadOnly=!0,this.hasEndTime=!0}},{key:"checkAllOrgs",value:function(e){this.showErrorMsg=!1,this.selectedOrgs=[]}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.tableOptions.language=this.frTable:"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&delete this.tableOptions.language}},{key:"setLanguage",value:function(){sessionStorage.getItem("defaultLanguage")&&"fr"==sessionStorage.getItem("defaultLanguage")?this.curLang="fr":sessionStorage.getItem("defaultLanguage")&&"en"==sessionStorage.getItem("defaultLanguage")&&(this.curLang="en")}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"addEventTwo",value:function(e,t){this.startDate=new Date(t.value)}},{key:"changeDate",value:function(){this.startDate>this.endDate&&(this.endDate=new Date(this.startDate.getTime()+6e4))}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(b.v),Z.Y36(c.F0),Z.Y36(A.d),Z.Y36(me.q),Z.Y36(V.t6),Z.Y36(G.FF),Z.Y36(T.Dx))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-user-secured-access"]],viewQuery:function(e,t){var i;(1&e&&(Z.Gf(Ke,7),Z.Gf(z.G,5),Z.Gf(et,5),Z.Gf(tt,5)),2&e)&&(Z.iGM(i=Z.CRH())&&(t.deleteModal=i.first),Z.iGM(i=Z.CRH())&&(t.dtElement=i.first),Z.iGM(i=Z.CRH())&&(t.picker_start=i.first),Z.iGM(i=Z.CRH())&&(t.picker_end=i.first))},decls:16,vars:6,consts:[[1,"conatiner","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","px-1"],[4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,""],[1,"row","my-2"],[1,"col-md-6"],[1,"form-check","mb-3","d-flex","align-items-center"],["type","radio","id","Select_Organizations","name"," organization",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","Select_Organizations",1,"form-check-label"],["id","usage_criteria","bindLabel","name",1,"w-100",3,"items","ngModel","multiple","placeholder","ngModelOptions","clearable","searchable","disabled","ngModelChange"],["class","mandatory-msg",4,"ngIf"],[1,"form-check","d-flex","align-items-center"],["type","radio","name","organization","id","All_Organizations",1,"form-check-input",3,"value","ngModel","click","ngModelChange"],["for","All_Organizations",1,"form-check-label"],[1,"mt-4"],[1,"ml-2","ccl-title"],[1,"form-check-inline","mt-2"],[1,"form-check-label"],["type","radio","name","type",1,"form-check-input",3,"value","ngModel","ngModelChange"],[1,"form-check-inline"],[1,"row","mt-2"],[1,"col-sm-6","col-12","ccl-form"],["id","start_date","hourFormat","12","appendTo","body","placeholder","","readonlyInput","true","dateFormat","mm-dd-yy",3,"ngModel","minDate","showTime","inputStyle","autoZIndex","showIcon","ngModelOptions","ngModelChange","onSelect"],["id","start_date","hourFormat","12","appendTo","body","placeholder","","readonlyInput","true","dateFormat","mm-dd-yy",3,"ngModel","minDate","showTime","inputStyle","autoZIndex","showIcon","ngModelOptions","ngModelChange"],[1,"form-check-inline","mt-3"],["for","endtime",1,"form-check-label"],["type","radio","id","endtime","name","endtime",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","noendtime",1,"form-check-label"],["type","radio","id","noendtime","name","endtime",1,"form-check-input",3,"value","ngModel","ngModelChange"],[1,"row","col","ccl-form","my-3"],[1,"btn-default","primary",3,"click"],[1,"table-div"],["id","users-list-table",1,"mt-2",3,"hidden"],["width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["class","row my-4",4,"ngIf"],[1,"mandatory-msg"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],[1,"row","my-4"],[1,"col-4","offset-md-8","text-right"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(Z.TgZ(0,"div",0),Z.YNc(1,it,5,0,"div",1),Z.YNc(2,nt,6,1,"div",2),Z.YNc(3,at,4,1,"div",3),Z.TgZ(4,"div",4),Z.TgZ(5,"div",5),Z.TgZ(6,"div",6),Z._uU(7),Z.qZA(),Z.qZA(),Z.TgZ(8,"div",7),Z.TgZ(9,"div",8),Z.TgZ(10,"a",9),Z.NdJ("click",function(){return t.goToUsersList()}),Z._UZ(11,"i",10),Z._uU(12),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(13,ut,66,68,"div",11),Z.qZA(),Z.YNc(14,gt,14,5,"ng-template",null,12,Z.W1O)),2&e&&(Z.xp6(1),Z.Q6J("ngIf",t.loader),Z.xp6(1),Z.Q6J("ngIf",t.error),Z.xp6(1),Z.Q6J("ngIf",t.success),Z.xp6(4),Z.Oqu(t.userTitle),Z.xp6(5),Z.hij(" ",t.language.backToUsersList,""),Z.xp6(1),Z.Q6J("ngIf",t.pageAvailable))},directives:[r.O5,l._Y,l.JL,l.F,l._,l.Fj,l.JJ,l.On,W.w9,Xe.f,z.G,r.sg],styles:["[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){left:auto}"]}),e}(),ht=s(91387),ft=s(66066),mt=s(85656),vt=s(98953),Zt=s(75495),bt=s(67679),At=s(75769),xt=function(){var e=function(){function e(t,i){a(this,e),this.sso=t,this.router=i}return o(e,[{key:"canActivate",value:function(e,t){var i=t.url;if(this.sso.getOrganizationID(i))return!0;var n=this.sso.getRedirectModule(i);this.router.navigateByUrl(n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.LFG(V.t6),Z.LFG(c.F0))},e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Tt=s(65895),_t=s(55908),Ct=s(64697),yt=[{path:"",component:We,data:{title:"Calix Cloud - Org Admin"},children:[{path:"organizations",component:pe.f,data:{title:"Calix Cloud - Calix Admin"}},{path:"addOrg",component:w,data:{title:"Calix Cloud - Calix Admin"}},{path:"orgSecuredAccess",component:xe,data:{title:"Calix Cloud - Calix Admin"},canActivate:[xt]},{path:"UserSecuredAccess",component:pt,data:{title:"Calix Cloud - Calix Admin"},canActivate:[xt]},{path:"orgDetail",component:ue,data:{title:"Calix Cloud - Calix Admin"},canActivate:[xt]},{path:"users",component:ft.b,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"addUser",component:S.J,data:{title:"Calix Cloud - Calix Admin"},canActivate:[xt]},{path:"usersDetail",component:ht.Y,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"blacklist",component:N.X,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"blacklistAddUser",component:D.N,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"roles",component:fe.y,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"roleDetails",component:he.W,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"addRole",component:O.Z,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"csccfg",loadChildren:function(){return s.e(9829).then(s.bind(s,9829)).then(function(e){return e.CalixSupportCloudModule})},canActivate:[xt]},{path:"orginfo",component:ge.Q,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"externalticketingsystem",component:I.l,data:{title:"Calix Cloud - Org Admin"}},{path:"flowAnalyze",loadChildren:function(){return Promise.all([s.e(4555),s.e(9870),s.e(5865),s.e(1873),s.e(9256)]).then(s.bind(s,9256)).then(function(e){return e.FlowConfigurationModule})},canActivate:[xt]},{path:"orgacl",component:L.U,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"sso",component:Te.v,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"admin-call-outcome",component:M.h,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"foundation",loadChildren:function(){return s.e(6854).then(s.bind(s,86854)).then(function(e){return e.FoundationModule})}},{path:"cco-admin",loadChildren:function(){return Promise.all([s.e(7162),s.e(6916),s.e(3122)]).then(s.bind(s,3122)).then(function(e){return e.CcoAdminModule})},canActivate:[xt]},{path:"mobile-app",loadChildren:function(){return Promise.all([s.e(5994),s.e(6513)]).then(s.bind(s,46513)).then(function(e){return e.MobileAppModule})},canActivate:[xt]},{path:"block_page_template_list",component:u.t,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template/:id",component:d.w,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template",component:d.w,data:{title:"Calix Cloud - Org Admin"}},{path:"block_page_template_update/:id",component:g.U,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel",component:m.e,data:{title:"Calix Cloud - Org Admin"}},{path:"commandIQ",component:p.t,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel-create",component:h.x,data:{title:"Calix Cloud - Org Admin"}},{path:"whitelabel-update",component:f.E,data:{title:"Calix Cloud - Org Admin"}},{path:"SmartTownWi-Fi/confirm-users",component:bt.F},{path:"SmartTownWi-Fi",component:P.L,loadChildren:function(){return Promise.all([s.e(7162),s.e(6916),s.e(10)]).then(s.bind(s,90010)).then(function(e){return e.MyCommunityIqModule})},data:{title:"Calix Cloud - Org Admin"}},{path:"SmartTownWi-Fi",component:P.L,data:{title:"Calix Cloud - Org Admin"},canActivate:[xt]},{path:"USOC-Upload",component:mt.o,data:{title:"Calix Cloud - Org Admin"}},{path:"applications-audit",component:At.F,canActivate:[xt]},{path:"",redirectTo:"organizations",pathMatch:"full"},{path:"zip-code-upload",component:Zt.f,data:{title:"Calix Cloud - Org Admin"}},{path:"zip-code-entrylist",component:vt.K,data:{title:"Calix Cloud - Org Admin"}},{path:"account-management",component:v.I,data:{title:"Calix Cloud - Account Management"}},{path:"federated-user-details",component:E.I,data:{title:"Calix Cloud - Account Management - User details"}},{path:"subscriber-prospect-upload",component:Ce.B,data:{title:"Calix Cloud - Org Admin"}},{path:"subscriber-prospect-list",component:_e.y,data:{title:"Calix Cloud - Org Admin"}},{path:"api-usage",component:U.i,data:{title:"Calix Cloud - Org Admin"}},{path:"engagement-cloud",component:F.a},{path:"devices-name-placeholder",component:Tt.P,data:{title:"Calix Cloud - Org Admin"}},{path:"chatbot",component:_t.x,data:{title:"Calix Cloud - Org Admin"}},{path:"chatbot-create",component:Ct.s,data:{title:"Calix Cloud - Org Admin"}},{path:"",redirectTo:"organizations",pathMatch:"full"}]},{path:"cco-admin",loadChildren:function(){return Promise.all([s.e(7162),s.e(6916),s.e(3122)]).then(s.bind(s,3122)).then(function(e){return e.CcoAdminModule})}}],kt=function(){var e=o(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[c.Bz.forChild(yt)],c.Bz]}),e}();s(72863);var qt=[],wt=function(){var e=o(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[c.Bz.forChild(qt)],c.Bz]}),e}(),Ot=s(23830),St=function(){var e=o(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[r.ez,l.u5,wt,z.T,W.A0,Ot.o]]}),e}();s(99225);var Mt=s(96718),Ut=s(44466),Dt=function(){var e=o(function e(){a(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e,bootstrap:[ue]}),e.\u0275inj=Z.cJS({providers:[T.Dx],imports:[[r.ez,l.u5,kt,z.T,St,G.IJ,W.A0,G.M,l.u5,l.UX,Xe._8,Ot.o,Mt.e4,Ut.m]]}),e}()},91387:function(i,n,s){s.d(n,{Y:function(){return ne}});var r=s(23771),l=s(79765),c=s(25917),d=s(9112),u=s(92340),g=s(88002),p=s(5304),h=s(37716),f=s(404),m=s(49342),v=s(39895),Z=s(30900),b=s(91395),A=s(89097),x=s(12664),T=s(39075),_=s(20904),C=s(63859),y=s(38583),k=s(3679),q=s(74062),w=s(86640),O=["deleteModal"];function S(e,t){if(1&e&&(h.TgZ(0,"div",39),h.TgZ(1,"div",40),h.TgZ(2,"div",41),h.TgZ(3,"span",42),h._uU(4),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(4),h.Oqu(i.language.Loading)}}function M(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",43),h.TgZ(1,"span",44),h._UZ(2,"img",45),h.qZA(),h.TgZ(3,"button",46),h.NdJ("click",function(){return h.CHM(i),h.oxw().closeAlert()}),h._UZ(4,"span"),h.qZA(),h._UZ(5,"div",47),h.qZA()}if(2&e){var n=h.oxw();h.xp6(5),h.Q6J("innerHtml",n.errorInfo,h.oJD)}}function U(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",48),h.TgZ(1,"button",46),h.NdJ("click",function(){return h.CHM(i),h.oxw().closeAlert()}),h._UZ(2,"span"),h.qZA(),h._UZ(3,"div",49),h.qZA()}if(2&e){var n=h.oxw();h.xp6(3),h.Q6J("innerHtml",n.successInfo,h.oJD)}}function D(e,t){if(1&e&&(h.TgZ(0,"em",62),h._uU(1),h.qZA()),2&e){var i=h.oxw(2);h.xp6(1),h.Oqu(i.language["This field is required"])}}function N(e,t){if(1&e&&(h.TgZ(0,"span",63),h._uU(1),h.qZA()),2&e){var i=h.oxw(2);h.xp6(1),h.hij("",i.language["Please enter the same value again"],".")}}var I=function(e){return[e]};function E(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"form"),h.TgZ(1,"div",50),h.TgZ(2,"div",51),h.TgZ(3,"div",52),h.TgZ(4,"label",53),h._uU(5),h.qZA(),h.TgZ(6,"input",54),h.NdJ("ngModelChange",function(e){return h.CHM(i),h.oxw().editUserPassword=e})("keyup",function(){return h.CHM(i),h.oxw().changePassword()}),h.qZA(),h.TgZ(7,"span",55),h.NdJ("click",function(){return h.CHM(i),h.oxw().toggleShowPassword()}),h.qZA(),h.YNc(8,D,2,1,"em",56),h.qZA(),h.qZA(),h.TgZ(9,"div",57),h.TgZ(10,"div",58),h.TgZ(11,"label",59),h._uU(12),h.qZA(),h.TgZ(13,"input",60),h.NdJ("ngModelChange",function(e){return h.CHM(i),h.oxw().editUserCPassword=e})("keyup",function(){return h.CHM(i),h.oxw().changeConfirmPassword()}),h.qZA(),h.TgZ(14,"span",55),h.NdJ("click",function(){return h.CHM(i),h.oxw().toggleShowPasswords()}),h.qZA(),h.YNc(15,N,2,1,"span",61),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var n=h.oxw();h.xp6(3),h.Q6J("ngClass",h.VKq(14,I,n.passwordError?"ccl-error":"")),h.xp6(2),h.Oqu(n.language.password),h.xp6(1),h.s9C("placeholder",n.language["Enter new password"]),h.Q6J("ngModel",n.editUserPassword),h.uIk("type",n.showPassword?"text":"password"),h.xp6(1),h.Q6J("ngClass",n.showPassword?"password_view":"password_hide"),h.xp6(1),h.Q6J("ngIf",!n.editUserPassword&&n.cpasswordError),h.xp6(2),h.Q6J("ngClass",h.VKq(16,I,n.cpasswordError?"ccl-error":"")),h.xp6(2),h.Oqu(n.language.confirmPassword),h.xp6(1),h.s9C("placeholder",n.language["Re-enter to confirm"]),h.Q6J("ngModel",n.editUserCPassword),h.uIk("type",n.showPasswords?"text":"password"),h.xp6(1),h.Q6J("ngClass",n.showPasswords?"password_view":"password_hide"),h.xp6(1),h.Q6J("ngIf",n.cpasswordError)}}function F(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",64),h.TgZ(1,"div",65),h.TgZ(2,"div",66),h.NdJ("click",function(){var e=h.CHM(i).index;return h.oxw().removeSubnet(e)}),h._UZ(3,"i",67),h.qZA(),h._uU(4),h.qZA(),h.qZA()}if(2&e){var n=t.$implicit;h.xp6(4),h.hij(" ",n," ")}}function P(e,t){if(1&e&&(h.TgZ(0,"em",68),h._uU(1),h.qZA()),2&e){var i=h.oxw();h.xp6(1),h.Oqu(i.subnetErrorInfo)}}function L(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",69),h.TgZ(1,"button",46),h.NdJ("click",function(){return h.CHM(i),h.oxw().closeAlertRole()}),h._uU(2,"\xd7"),h.qZA(),h._UZ(3,"div",49),h.qZA()}if(2&e){var n=h.oxw();h.xp6(3),h.Q6J("innerHtml",n.existingRoleErrorInfo,h.oJD)}}function J(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"tr",70),h.TgZ(1,"td",71),h._uU(2),h.qZA(),h.TgZ(3,"td",72),h.TgZ(4,"i",73),h.NdJ("click",function(){var e=h.CHM(i).$implicit;return h.oxw().deleteRole(e)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){var n=t.$implicit,a=h.oxw();h.s9C("id",n._id),h.xp6(2),h.Oqu(n.name),h.xp6(2),h.s9C("title",a.language.delete)}}function R(e,t){if(1&e&&(h.TgZ(0,"div",13),h.TgZ(1,"div",74),h._uU(2),h.qZA(),h.qZA()),2&e){var i=h.oxw();h.xp6(2),h.hij(" ",i.language.permissions," ")}}function H(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",4),h.TgZ(2,"div",80),h.TgZ(3,"div",86),h.TgZ(4,"div"),h._uU(5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(6,"div",82),h._uU(7),h.qZA(),h.qZA(),h.qZA()),2&e){var i=t.$implicit,n=h.oxw(10);h.xp6(5),h.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),h.xp6(2),h.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," ")}}function Y(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,H,8,2,"div",83),h.qZA()),2&e){var i=h.oxw().$implicit;h.xp6(1),h.Q6J("ngForOf",i.permissions3)}}function Q(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",4),h.TgZ(2,"div",80),h.TgZ(3,"div",85),h.TgZ(4,"div"),h._uU(5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(6,"div",82),h._uU(7),h.qZA(),h.qZA(),h.YNc(8,Y,2,1,"div",12),h.qZA()),2&e){var i=t.$implicit,n=h.oxw(8);h.xp6(5),h.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),h.xp6(2),h.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," "),h.xp6(1),h.Q6J("ngIf",i.permissions3.length)}}function z(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,Q,9,3,"div",83),h.qZA()),2&e){var i=h.oxw().$implicit;h.xp6(1),h.Q6J("ngForOf",i.permissions2)}}function B(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"div",4),h.TgZ(2,"div",80),h.TgZ(3,"div",84),h.TgZ(4,"div"),h._uU(5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(6,"div",82),h._uU(7),h.qZA(),h.qZA(),h.YNc(8,z,2,1,"div",12),h.qZA()),2&e){var i=t.$implicit,n=h.oxw(6);h.xp6(5),h.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),h.xp6(2),h.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," "),h.xp6(1),h.Q6J("ngIf",i.permissions2.length)}}function j(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,B,9,3,"div",83),h.qZA()),2&e){var i=h.oxw().$implicit;h.xp6(1),h.Q6J("ngForOf",i.permissions)}}function V(e,t){if(1&e&&(h.TgZ(0,"div",34),h.TgZ(1,"div",79),h.TgZ(2,"div",80),h.TgZ(3,"div",81),h.TgZ(4,"div"),h._uU(5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(6,"div",82),h._uU(7),h.qZA(),h.qZA(),h.YNc(8,j,2,1,"div",12),h.qZA()),2&e){var i=t.$implicit,n=h.oxw(4);h.xp6(5),h.hij(" ",n.scopeDisplayName[i.scopeDisplayName]||n.language[i.scopeDisplayName]||i.scopeDisplayName," "),h.xp6(2),h.hij(" ","read,write"==i.action?n.language["Read and Write"]:"read"==i.action?n.language.Read:""," "),h.xp6(1),h.Q6J("ngIf",i.permissions.length)}}function G(e,t){if(1&e&&(h.TgZ(0,"div",75),h.TgZ(1,"div",76),h.TgZ(2,"form",77),h.YNc(3,V,9,3,"div",78),h.qZA(),h.qZA(),h.qZA()),2&e){var i=h.oxw(3);h.xp6(3),h.Q6J("ngForOf",i.rolePermissions)}}function W(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,G,4,1,"div",37),h.qZA()),2&e){var i=h.oxw(2);h.xp6(1),h.Q6J("ngIf",i.rolePermissions.length)}}function X(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,W,2,1,"div",12),h.qZA()),2&e){var i=h.oxw();h.xp6(1),h.Q6J("ngIf",i.permissionAvailableDeploy)}}function K(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",75),h.TgZ(1,"div",87),h.TgZ(2,"button",88),h.NdJ("click",function(){return h.CHM(i),h.oxw().updateUsersDetails()}),h._uU(3),h.qZA(),h.TgZ(4,"button",89),h.NdJ("click",function(){return h.CHM(i),h.oxw().cancelUpdate()}),h._uU(5),h.qZA(),h.qZA(),h.qZA()}if(2&e){var n=h.oxw();h.xp6(3),h.Oqu(n.language.saveEnregistrer),h.xp6(2),h.Oqu(n.language.Cancel)}}function ee(e,t){if(1&e){var i=h.EpF();h.TgZ(0,"div",90),h.TgZ(1,"h4",91),h._uU(2),h.qZA(),h.TgZ(3,"button",92),h.NdJ("click",function(){return h.CHM(i),h.oxw().closeModal()}),h._UZ(4,"span",93),h.qZA(),h.qZA(),h.TgZ(5,"div",94),h._uU(6),h.qZA(),h.TgZ(7,"div",95),h.TgZ(8,"button",96),h.NdJ("click",function(){return h.CHM(i),h.oxw().confirmDeleteSecleted()}),h._uU(9),h.qZA(),h.TgZ(10,"button",97),h.NdJ("click",function(){return h.CHM(i),h.oxw().closeModal()}),h._uU(11),h.qZA(),h.qZA()}if(2&e){var n=h.oxw();h.xp6(2),h.Oqu(n.modalTitle),h.xp6(4),h.AsE(" ",n.language["Are you sure you want to delete this role"]," ? (",n.modalInfo,") "),h.xp6(3),h.Oqu(n.language.yes),h.xp6(2),h.Oqu(n.language.no)}}var te,ie=function(){return{standalone:!0}},ne=((te=function(){function i(e,t,n,s,o,r,c,d,u,g){var p=this;a(this,i),this.commonFunctionsService=e,this.commonOrgService=t,this.router=n,this.customTranslateService=s,this.apiService=o,this.sso=r,this.dialogService=c,this.titleService=d,this.common=u,this.addRoleService=g,this.pageAvailable=!1,this.createSubnets=[],this.tableOptions={rowId:"_id",pageLength:10,processing:!0,ordering:!1,searching:!1,paging:!1,info:!1,language:{emptyTable:"No role available for current user."},rowCallback:function(e,t,i){var n=p;return $("td",e).unbind("click"),$("td",e).bind("click",function(){n.displaySelectedRolePerms(t._id)}),e},drawCallback:function(e){$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),p.highlightRowCallback()}},this.roles=[],this.rolesSelected=[],this.rolesTableData=[],this.rolesTableOptions={},this.dtTrigger=new l.xQ,this.isRerender=!1,this.subnetError=!1,this.subnetErrorInfo="Invalid Subnet",this.rolesList=[],this.addedRolesList=[],this.countOfRolesAtStart=0,this.rolePermissions=[],this.usersSubnets=[],this.isLocalUser=!1,this.userTitle="",this.errorInfo="",this.successInfo="",this.MODULE="calixAdmin",this.saveCancelShow=!1,this.isPasswordChanged=!1,this.isSubnetChanged=!1,this.isRoleChanged=!1,this.oldRolesList=[],this.oldSubnets=[],this.loading=!0,this.addedRolesName=[],this.addedRolesNameAtStart=[],this.scopeDisplayName={WiFi:"WiFi",XDSL:"XDSL",Devices:"Devices","Subscriber Mgmt":"Subscriber Mgmt"},this.permissionAvailable=!1,this.permissionAvailableDeploy=!0,this.subPermissionAvailable=!0,this.rolesItems=[],this.showPassword=!1,this.showPasswords=!1;var h=this.router.url;this.ORG_ID=this.sso.getOrganizationID(h),this.MODULE=this.sso.getRedirectModule(h),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(function(e){p.language=e,p.dataAvailable=!1,p.isRerender=!0,p.titleService.setTitle("".concat(p.language.usersDetail," - ").concat("systemAdministration"===p.MODULE?p.language["System Administration"]:p.language.administration," - ").concat(p.language["Calix Cloud"])),p.renderRolesTable("language")}),this.titleService.setTitle("".concat(this.language.usersDetail," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.user=JSON.parse(sessionStorage.getItem("calixAdminUserDetail")||"{}"),this.frTable=this.customTranslateService.fr,this.isLocalUser=this.checkUserType(this.user),this.getData()}return o(i,[{key:"ngOnInit",value:function(){this.setUserInfo(),this.saveCancelShow=!1,this.commonOrgService.currentPageAdder("usersDetail")}},{key:"ngOnDestroy",value:function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.parallelReqSubscribtion&&this.parallelReqSubscribtion.unsubscribe(),this.parallelReqSubscribtionUpdate&&this.parallelReqSubscribtionUpdate.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.passSubs&&this.passSubs.unsubscribe()}},{key:"getData",value:function(){var e,t,i=this,n=["".concat(u.N.CALIX_ADMIN_BASE_URL,"useracl/").concat(null===(e=this.user)||void 0===e?void 0:e.username,"?orgid=").concat(this.ORG_ID),"".concat(u.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/roles"),"".concat(u.N.CALIX_ADMIN_BASE_URL,"user/").concat(null===(t=this.user)||void 0===t?void 0:t._id,"/roles")],a=[];n.forEach(function(e){var t=i.apiService.callRestApi(e).pipe((0,g.U)(function(e){return e}),(0,p.K)(function(e){return(0,c.of)(e)}));a.push(t)}),this.combineLatest=(0,d.aj)(a),this.makeParallelRequest()}},{key:"makeParallelRequest",value:function(){var e=this;this.parallelReqSubscribtion=this.combineLatest.subscribe(function(t){var i,n=t;if(e.rolesItems=t&&t[1]&&e.sso.isSecureAccess()?null===(i=t[1])||void 0===i?void 0:i.filter(function(e){return"SysAdmin"!==(null==e?void 0:e.name)}):t[1],e.createSubnets=t[0].acl?t[0].acl:[],e.usersSubnets=e.createSubnets,e.rolesList=t[1],e.addedRolesList=t[2]?t[2]:[],e.oldRolesList=t[2]?t[2]:[],e.oldSubnets=n[0].acl&&n[0].acl.length?n[0].acl.slice(0):[],e.countOfRolesAtStart=e.addedRolesList?e.addedRolesList.length:0,e.addedRolesName=e.addedRolesList?e.getRoleNames(e.addedRolesList):[],e.addedRolesNameAtStart=e.addedRolesList?e.getRoleNames(e.addedRolesList):[],null!=t[0]&&null!=t[0].error){if(e.loading=!1,404!=t[0].status)return e.pageErrorHandle(t[0]),void e.commonOrgService.pageScrollTop()}else if(null!=t[1]&&null!=t[1].error){if(e.loading=!1,404!=t[1].status)return e.pageErrorHandle(t[1]),void e.commonOrgService.pageScrollTop()}else if(null!=t[2]&&null!=t[2].error&&(e.loading=!1,404!=t[2].status))return e.pageErrorHandle(t[2]),e.commonOrgService.pageScrollTop(),e.renderRolesTable(),void(e.countOfRolesAtStart=0);setTimeout(function(){e.renderRolesTable(),e.addedRolesList.length&&(e.permissionProcess(e.addedRolesList[0]),e.highlightRow(e.addedRolesList[0]._id)),e.countOfRolesAtStart=e.addedRolesList?e.addedRolesList.length:0,e.rolesAvail=!0,e.checkSelected(),e.checkSubnetsToShowButtons(),setTimeout(function(){e.loading=!1},1e3)},100)})}},{key:"checkUserType",value:function(e){return!(!e||"local"!=e.idpType)}},{key:"changePassword",value:function(){this.passwordError=!1,this.passwordError=""==this.editUserPassword,this.editUserPassword==this.editUserCPassword?(this.passwordError=!1,this.cpasswordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}},{key:"changeConfirmPassword",value:function(){this.editUserPassword==this.editUserCPassword?(this.cpasswordError=!1,this.passwordError=!1,this.isPasswordChanged=!0):this.cpasswordError=!0,this.checkShowButtons()}},{key:"addSubnet",value:function(){var e=this;if(this.subnetError=!1,null==this.createCurrentSubnet||""==this.createCurrentSubnet)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet cannot be empty"]);if(this.validateSubnet(this.createCurrentSubnet),!this.subnetError){if(this.createSubnets.filter(function(t){return t===e.createCurrentSubnet}).length>0)return this.subnetError=!0,void(this.subnetErrorInfo=this.language["Subnet already added"]);this.createSubnets.push(this.createCurrentSubnet),this.createCurrentSubnet="",this.subnetError=!1,this.checkSubnetsToShowButtons()}}},{key:"removeSubnet",value:function(e){this.createSubnets.splice(e,1),this.checkSubnetsToShowButtons()}},{key:"validateSubnet",value:function(e){this.subnetError=!1,e||(this.subnetErrorInfo=this.language["Invalid subnet"],this.subnetError=!0);var t=this.commonFunctionsService.trimSubnet(e);t?!this.commonFunctionsService.isValidSubnetV4(t)&&!this.commonFunctionsService.isValidSubnetV6(t)&&(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"]):(this.subnetError=!0,this.subnetErrorInfo=this.language["Invalid subnet"])}},{key:"addRole",value:function(){var e=this;this.existingRoleError=!1;var i,n=[];this.selectedRoles.forEach(function(a){if(e.addedRolesList.filter(function(e){return e._id===a._id}).length>0)return e.existingRoleErrorInfo="".concat(a.username," - ").concat(e.language["Role already added"]),void(e.existingRoleError=!0);i=e.rolesList.findIndex(function(e){return e._id===a._id}),e.rolesList[i].disabled=!0,e.rolesList=t(e.rolesList),i=e.rolesItems.findIndex(function(e){return e._id===a._id}),e.rolesItems[i].disabled=!0,e.rolesItems=t(e.rolesItems),n.push(a)}),!this.existingRoleError&&(this.selectedRoles=[],setTimeout(function(){var i=[].concat(t(e.addedRolesList),n);e.addedRolesList=i,e.addedRolesName=e.getRoleNames(i);var a=e.addedRolesList.length-1;e.permissionProcess(e.addedRolesList[a]),e.highlightRow(e.addedRolesList[a]._id),e.isRerender=!0,e.rerender(),e.checkRoleChanged()},200))}},{key:"deleteRole",value:function(e){this.deleteData=e,this.modalTitle=this.language["Delete Role"],this.modalInfo="".concat(e.name),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDeleteSecleted",value:function(){var e,i=this.deleteData;this.addedRolesList=this.addedRolesList.filter(function(e){return e._id!==i._id}),-1!==(e=this.rolesList.findIndex(function(e){return e._id===i._id}))&&(this.rolesList[e].disabled=!1,this.rolesList=t(this.rolesList)),-1!==(e=this.rolesItems.findIndex(function(e){return e._id===i._id}))&&(this.rolesItems[e].disabled=!1,this.rolesItems=t(this.rolesItems)),this.closeModal(),this.deleteData=void 0,this.isRerender=!0,this.rerender(),0==this.addedRolesList.length?this.rolePermissions=[]:(this.permissionProcess(this.addedRolesList[this.addedRolesList.length-1]),this.highlightRow(this.addedRolesList[this.addedRolesList.length-1]._id)),this.addedRolesName=this.getRoleNames(this.addedRolesList),this.checkRoleChanged()}},{key:"renderRolesTable",value:function(e){var t=this;this.setTableOptions(),e&&"language"==e?(setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next()},150),this.dataAvailable=!0):setTimeout(function(){t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next(),t.dataAvailable=!0},150)}},{key:"setTableOptions",value:function(){this.tableLanguageOptions()}},{key:"changeDataForTable",value:function(){var t,i=[],n=e(this.roles);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.rolesSelected.includes(a.value)&&i.push(a)}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"updateUsersDetails",value:function(){this.isLocalUser&&null!=this.editUserPassword&&""!=this.editUserPassword?this.updateUserPassword():this.updateUsersDetailsOthers()}},{key:"updateUserPassword",value:function(){var e=this;if(null==this.editUserCPassword||""==this.editUserCPassword||this.editUserPassword!==this.editUserCPassword)return this.cpasswordError=!0,void this.commonOrgService.pageScrollTop();var t={firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email,password:this.editUserPassword};this.loading=!0,this.passSubs=this.apiService.UpdatePasswordByUserId(t,this.user._id).subscribe(function(t){e.updateUsersDetailsOthers()},function(t){e.loading=!1,e.pageErrorHandle(t)})}},{key:"updateUsersDetailsOthers",value:function(){var e=[];if(this.createSubnets.length){var t;t=this.createSubnets;var i=this.apiService.UpdateAclListByUserEmail(t,this.user.username,this.ORG_ID).pipe((0,g.U)(function(e){return e}),(0,p.K)(function(e){return(0,c.of)(e)}));e.push(i)}else{var n=this.apiService.DeleteAclListByUserEmail(this.user.username,this.ORG_ID).pipe((0,g.U)(function(e){return e}),(0,p.K)(function(e){return(0,c.of)(e)}));e.push(n)}if(this.loading=!0,this.addedRolesList.length){var a,s=[];this.addedRolesList.forEach(function(e){s.push(e._id)}),a=s.join(",");var o=this.apiService.UpdateRolesListByUserId(this.user._id,a).pipe((0,g.U)(function(e){return e}),(0,p.K)(function(e){return(0,c.of)(e)}));e.push(o)}else if(this.countOfRolesAtStart){var r=this.apiService.DeleteRolesListByUserId(this.user._id).pipe((0,g.U)(function(e){return e}),(0,p.K)(function(e){return(0,c.of)(e)}));e.push(r)}this.combineLatestUpdate=(0,d.aj)(e),this.makeParallelUpdateRequests()}},{key:"makeParallelUpdateRequests",value:function(){var t=this;this.parallelReqSubscribtionUpdate=this.combineLatestUpdate.subscribe(function(i){if(t.loading=!1,i.length){var n,a=e(i);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(null!=s&&null!=s.error)return t.loading=!1,void t.pageErrorHandle(s)}}catch(o){a.e(o)}finally{a.f()}}t.successMessage()})}},{key:"cancelUpdate",value:function(){this.goToUsersList()}},{key:"goToUsersList",value:function(){this.router.navigate(["".concat(this.MODULE,"/users")])}},{key:"permissionProcess",value:function(e){null!=e?"118"==e.apptype||"119"==e.apptype||"102"==e.apptype?(this.rolePermissions=this.commonOrgService.permProcessForUserDetailV21(e),this.displayName(e.apptype),this.subParentName(e.apptype)):"200"==e.apptype?(this.rolePermissions=this.commonOrgService.permProcessForUserDetailDeployment(e),this.subParentNameDeployment(e.apptype)):(this.rolePermissions=this.commonOrgService.permProcessForUserDetail(e),this.displayName(e.apptype),this.subParentName(e.apptype)):this.rolePermissions=[]}},{key:"subParentNameDeployment",value:function(e){var t=this;this.permissionAvailable=!1,this.permissionAvailableDeploy=!1,this.rolePermissions.forEach(function(i,n){var a=i,s=i.scopeName.split("."),o=s[0]+"."+s[1]+"."+s[2];t.addRoleService.AllPemissionsData(e).subscribe(function(e){e.forEach(function(e){o==e.name&&(a.scopeDisplayName=e.displayName),t.rolePermissions.length-1==n&&(t.permissionAvailableDeploy=!0,t.permissionAvailable=!0)})})})}},{key:"subParentName",value:function(e){var t=this;this.permissionAvailable=!1,this.addRoleService.AllPemissionsData(e).subscribe(function(e){e.forEach(function(e){t.rolePermissions.forEach(function(i,n){i.permissions.forEach(function(t){t.scopeName===e.name&&(t.scopeDisplayName=e.displayName)}),t.rolePermissions.length-1==n&&(t.permissionAvailable=!0)})})})}},{key:"displayName",value:function(e){var t,i=this,n=null;this.permissionAvailable=!1,this.addRoleService.AllPemissionsData(e).subscribe(function(e){t=e,i.rolePermissions.forEach(function(e,a){t.forEach(function(t){e.scopeName===t.name&&(n=t,e.scopeDisplayName=n.displayName)}),i.rolePermissions.length-1==a&&(i.permissionAvailable=!0)})})}},{key:"setUserInfo",value:function(){var e=this.user;this.userTitle=null!=e.firstName&&""!==e.firstName?null!=e.lastName?"".concat(e.firstName," ").concat(e.lastName):"".concat(e.firstName):"".concat(e.username)}},{key:"closeAlertRole",value:function(){this.existingRoleError=!1}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"checkSubnetsToShowButtons",value:function(){var e=this;this.isSubnetChanged=!1,this.createSubnets.length!==this.oldSubnets.length?(this.isSubnetChanged=!0,this.checkShowButtons()):this.createSubnets.length===this.oldSubnets.length&&this.createSubnets.length?(this.createSubnets.forEach(function(t){if(!e.oldSubnets.includes(t))return e.isSubnetChanged=!0,void e.checkShowButtons()}),this.checkShowButtons()):this.createSubnets.length===this.oldSubnets.length&&!this.oldSubnets.length&&(this.isSubnetChanged=!1,this.checkShowButtons())}},{key:"checkRoleChanged",value:function(){var e=this;this.isRoleChanged=!1,this.addedRolesName.length!==this.addedRolesNameAtStart.length?(this.isRoleChanged=!0,this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&this.addedRolesNameAtStart.length?(this.addedRolesName.forEach(function(t){if(!e.addedRolesNameAtStart.includes(t))return e.isRoleChanged=!0,void e.checkShowButtons()}),this.checkShowButtons()):this.addedRolesName.length===this.addedRolesNameAtStart.length&&!this.addedRolesNameAtStart.length&&(this.isRoleChanged=!1,this.checkShowButtons())}},{key:"checkShowButtons",value:function(){this.saveCancelShow=!!(this.isPasswordChanged||this.isRoleChanged||this.isSubnetChanged)}},{key:"hideSearch",value:function(){setTimeout(function(){$("#table-div .dataTables_wrapper .dataTables_filter").css("display","none"),$("#table-div .dataTables_wrapper .dataTables_length").css("display","none")},100)}},{key:"displaySelectedRolePerms",value:function(e){if(e){var t=this.addedRolesList.filter(function(t){return t._id===e});t.length&&(this.selectedRoleId=t[0]._id,this.permissionProcess(t[0]),this.highlightRow(t[0]._id))}}},{key:"successMessage",value:function(){var e=this;this.closeAlert(),this.successInfo=this.language["User details saved successfully"],this.success=!0,this.commonOrgService.pageScrollTop(),this.loading=!1,setTimeout(function(){e.goToUsersList()},1500)}},{key:"highlightRow",value:function(e){this.selectedRoleId=e,setTimeout(function(){$(".user-details-row.odd").css("background-color","#FFF"),$(".user-details-row.even").css("background-color","#FFF"),$("#"+e).css("background-color","whitesmoke")},100)}},{key:"highlightRowCallback",value:function(){this.selectedRoleId&&$("#"+this.selectedRoleId).css("background-color","whitesmoke")}},{key:"checkSelected",value:function(){var e=this;this.rolesList.forEach(function(t){e.addedRolesList.filter(function(e){return t._id===e._id}).length&&(t.disabled=!0)}),this.rolesList=t(this.rolesList),this.rolesItems.forEach(function(t){e.addedRolesList.filter(function(e){return t._id===e._id}).length&&(t.disabled=!0)}),this.rolesItems=t(this.rolesItems)}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?(this.tableOptions.language=this.frTable,this.tableOptions.language.emptyTable="Aucune r\xf4le disponible pour l'utilisateur actuel."):"es"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.es:"de_DE"==this.language.fileLanguage?this.tableOptions.language=this.customTranslateService.de_DE:"en"==this.language.fileLanguage&&this.tableOptions.language&&(delete this.tableOptions.language,this.tableOptions.language={emptyTable:"No role available for current user."})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"subnetChange",value:function(){this.createCurrentSubnet||(this.subnetError=!1)}},{key:"updateAddedRolesName",value:function(e,i,n){if(n)this.addedRolesName=this.addedRolesName.filter(function(e){return e!==i});else{var a=[];e.forEach(function(e){a.push(e.name)}),this.addedRolesName=[].concat(t(this.addedRolesName),a)}}},{key:"getRoleNames",value:function(e){var t=[];return e.forEach(function(e){t.push(e.name)}),t}},{key:"toggleShowPassword",value:function(){this.showPassword=!this.showPassword}},{key:"toggleShowPasswords",value:function(){this.showPasswords=!this.showPasswords}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}]),i}()).\u0275fac=function(e){return new(e||te)(h.Y36(f.i),h.Y36(m.v),h.Y36(v.F0),h.Y36(Z.d),h.Y36(b.q),h.Y36(A.t6),h.Y36(x.FF),h.Y36(T.Dx),h.Y36(_.i),h.Y36(C.U))},te.\u0275cmp=h.Xpm({type:te,selectors:[["app-users-detail"]],viewQuery:function(e,t){var i;1&e&&(h.Gf(O,7),h.Gf(r.G,5)),2&e&&(h.iGM(i=h.CRH())&&(t.deleteModal=i.first),h.iGM(i=h.CRH())&&(t.dtElement=i.first))},decls:64,vars:35,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"ccl-title"],[1,"col-md-4","px-0"],[1,"text-right"],[1,"back-text",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left","px-1"],[1,"container","my-3","pr-0"],[4,"ngIf"],[1,"row","my-2"],[1,"col-md-12","px-0"],[1,"error"],[1,"row","ccl-form","my-2"],["class","mb-2",4,"ngFor","ngForOf"],[1,"row","ccl-form"],[1,"col-md-4","pl-0",3,"ngClass"],["id","userACLSEL","type","text","name","createCurrentSubnet","placeholder","","autocomplete","new-password","trimSpace","",1,"add-subnet-input",3,"ngModel","ngModelChange","change","keyup","blur"],["id","subnet-error","class","ccl-error",4,"ngIf"],[1,"col-md-2","pl-0"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"click"],["_ngcontent-thh-c50","","aria-hidden","true",1,"fa","fa-plus"],[1,"row","my-2","pl-0"],[1,"ccl-title","col-md-12","pl-0"],[1,"col-md-4","pl-0"],["bindLabel","name","placeholder","",1,"w-100",3,"items","ngModel","multiple","ngModelOptions","searchable","disabled","ngModelChange"],["_ngcontent-thh-c50","",1,"btn-default","primary",3,"disabled","click"],[1,"row","my-4"],["class","w-100 alert alert-warning fade show",4,"ngIf"],[1,"col-md-12","px-0",3,"hidden"],["width","100%","datatable","",1,"table","row-border","hover",3,"dtOptions","dtTrigger"],[1,""],["class","user-details-row",3,"id",4,"ngFor","ngForOf"],["class","row my-2",4,"ngIf"],["class","row my-4 px-3",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[3,"innerHtml"],[1,"row","my-3"],[1,"col-md-6","pl-0"],[1,"ccl-form","required","detail-form",3,"ngClass"],["for","Password",1,"ccl-title"],["id","editUserPassword","name","editUserPassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","editUserPassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],[1,"pwd-icon",3,"ngClass","click"],["id","editUserPassword-error","class","invalid",4,"ngIf"],[1,"col-md-6","pr-0"],[1,"ccl-form","detail-form",3,"ngClass"],["for","Confirm Password",1,"ccl-title"],["id","confirmpassword","name","confirmpassword","type","password","required","","maxlength","100","aria-required","true","aria-describedby","confirmpassword-error","autocomplete","new-password",1,"",3,"ngModel","placeholder","ngModelChange","keyup"],["id","confirmpassword-error","class","state-error error",4,"ngIf"],["id","editUserPassword-error",1,"invalid"],["id","confirmpassword-error",1,"state-error","error"],[1,"mb-2"],[1,"add-subnet"],["role","button",1,"add-subnet-close-icon","primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],["id","subnet-error",1,"ccl-error"],[1,"w-100","alert","alert-warning","fade","show"],[1,"user-details-row",3,"id"],[1,"cursor-pointer"],[1,"actions"],[1,"fas","fa-trash-alt","p-1","cursor-pointer","primary",3,"title","click"],[1,"ccl-title","col-md-12"],[1,"row","my-4","px-3"],[1,"col-md-12","pr-0"],["id","permissionsForm"],["class","",4,"ngFor","ngForOf"],[1,"row","row-bg-grey"],[1,"box-of-permission","col-md-8"],[1,"custom-flex"],[1,"box-of-permission","col-md-4"],[4,"ngFor","ngForOf"],[1,"custom-flex","ml-3"],[1,"custom-flex","ml-5"],[1,"custom-flex","ml-5r"],[1,"col-12","text-right","px-0"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-default","btn-dft","py-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.YNc(1,S,5,1,"div",1),h.YNc(2,M,6,1,"div",2),h.YNc(3,U,4,1,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"div",6),h._uU(7),h.qZA(),h.qZA(),h.TgZ(8,"div",7),h.TgZ(9,"div",8),h.TgZ(10,"a",9),h.NdJ("click",function(){return t.goToUsersList()}),h._UZ(11,"i",10),h._uU(12),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(13,"div",11),h.YNc(14,E,16,18,"form",12),h.TgZ(15,"div",13),h.TgZ(16,"div",14),h.TgZ(17,"span",6),h._uU(18),h.qZA(),h._UZ(19,"br"),h.TgZ(20,"span"),h._uU(21),h.qZA(),h.qZA(),h.qZA(),h.TgZ(22,"div",4),h.TgZ(23,"span",6),h._uU(24),h.TgZ(25,"span",15),h._uU(26,"*"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(27,"div",16),h.TgZ(28,"div",7),h.YNc(29,F,5,1,"div",17),h.qZA(),h.qZA(),h.TgZ(30,"div",18),h.TgZ(31,"div",19),h.TgZ(32,"input",20),h.NdJ("ngModelChange",function(e){return t.createCurrentSubnet=e})("change",function(){return t.subnetChange()})("keyup",function(){return t.subnetChange()})("blur",function(){return t.removeUnwantedSpace("createCurrentSubnet",t.createCurrentSubnet)}),h.qZA(),h.YNc(33,P,2,1,"em",21),h.qZA(),h.TgZ(34,"div",22),h.TgZ(35,"button",23),h.NdJ("click",function(){return t.addSubnet()}),h._UZ(36,"i",24),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(37,"div",11),h.TgZ(38,"div",25),h.TgZ(39,"div",26),h._uU(40),h.qZA(),h.qZA(),h.TgZ(41,"div",18),h.TgZ(42,"div",27),h.TgZ(43,"ng-select",28),h.NdJ("ngModelChange",function(e){return t.selectedRoles=e}),h.qZA(),h.qZA(),h.TgZ(44,"div",22),h.TgZ(45,"button",29),h.NdJ("click",function(){return t.addRole()}),h._uU(46),h.qZA(),h.qZA(),h.qZA(),h.TgZ(47,"div",30),h.YNc(48,L,4,1,"div",31),h.TgZ(49,"div",32),h.TgZ(50,"table",33),h.TgZ(51,"thead",34),h.TgZ(52,"tr"),h.TgZ(53,"th"),h._uU(54),h.qZA(),h.TgZ(55,"th"),h._uU(56),h.qZA(),h.qZA(),h.qZA(),h.TgZ(57,"tbody"),h.YNc(58,J,5,3,"tr",35),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(59,R,3,1,"div",36),h.YNc(60,X,2,1,"div",12),h.YNc(61,K,6,2,"div",37),h.YNc(62,ee,12,5,"ng-template",null,38,h.W1O),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngIf",t.loading),h.xp6(1),h.Q6J("ngIf",t.error),h.xp6(1),h.Q6J("ngIf",t.success),h.xp6(4),h.Oqu(t.userTitle),h.xp6(5),h.hij(" ",t.language.backToUsersList,""),h.xp6(2),h.Q6J("ngIf",t.isLocalUser),h.xp6(4),h.Oqu(t.language.accessControlList),h.xp6(3),h.Oqu(t.language.aclInfo),h.xp6(3),h.hij("",t.language.addSubnets," "),h.xp6(5),h.Q6J("ngForOf",t.createSubnets),h.xp6(2),h.Q6J("ngClass",h.VKq(32,I,t.subnetError?"ccl-error":"")),h.xp6(1),h.Q6J("ngModel",t.createCurrentSubnet),h.xp6(1),h.Q6J("ngIf",t.subnetError),h.xp6(7),h.hij(" ",t.language.addDeleteRoles," "),h.xp6(3),h.Q6J("items",t.rolesItems)("ngModel",t.selectedRoles)("multiple",!0)("ngModelOptions",h.DdM(34,ie))("searchable",!0)("disabled",!(null!=t.rolesItems&&t.rolesItems.length)),h.xp6(2),h.Q6J("disabled",!(null!=t.rolesItems&&t.rolesItems.length)),h.xp6(1),h.Oqu(t.language.add),h.xp6(2),h.Q6J("ngIf",t.existingRoleError),h.xp6(1),h.Q6J("hidden",!t.dataAvailable),h.xp6(1),h.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),h.xp6(4),h.Oqu(t.language.roles),h.xp6(2),h.Oqu(t.language.action),h.xp6(2),h.Q6J("ngForOf",t.addedRolesList),h.xp6(1),h.Q6J("ngIf",t.rolePermissions.length),h.xp6(1),h.Q6J("ngIf",t.permissionAvailable),h.xp6(1),h.Q6J("ngIf",t.saveCancelShow))},directives:[y.O5,y.sg,y.mk,k.Fj,q.f,k.JJ,k.On,w.w9,r.G,k._Y,k.JL,k.F,k.Q7,k.nD],styles:[".box-of-permission[_ngcontent-%COMP%]{padding:10px;border:.5px solid #ccc;vertical-align:middle}.ml-5r[_ngcontent-%COMP%]{margin-left:5rem!important}.row-bg-grey[_ngcontent-%COMP%]{background-color:#d9dfe6}.detail-form[_ngcontent-%COMP%]{position:relative}.detail-form[_ngcontent-%COMP%]   .password-eye-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:12px;font-size:16px;z-index:1;color:gray;padding-top:4px}.pwd-icon[_ngcontent-%COMP%]{top:41px}"]}),te)},66066:function(e,t,i){i.d(t,{b:function(){return E}});var n=i(23771),s=i(79765),r=i(92340),l=i(37716),c=i(49342),d=i(39895),u=i(53668),g=i(91841),p=i(89097),h=i(12664),f=i(7450),m=i(39075),v=i(38583),Z=["deleteModal"];function b(e,t){if(1&e&&(l.TgZ(0,"div",8),l.TgZ(1,"div",9),l.TgZ(2,"div",10),l.TgZ(3,"span",11),l._uU(4),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var i=l.oxw();l.xp6(4),l.Oqu(i.language.Loading)}}function A(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",12),l.TgZ(1,"span",13),l._UZ(2,"img",14),l.qZA(),l.TgZ(3,"button",15),l.NdJ("click",function(){return l.CHM(i),l.oxw().closeAlert()}),l._UZ(4,"span"),l.qZA(),l._UZ(5,"div",16),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Q6J("innerHtml",n.errorInfo,l.oJD)}}function x(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",17),l.TgZ(1,"div",18),l.TgZ(2,"div",19),l._UZ(3,"img",20),l.qZA(),l.TgZ(4,"div",21),l._UZ(5,"span",22),l.qZA(),l.TgZ(6,"div",23),l.TgZ(7,"button",15),l.NdJ("click",function(){return l.CHM(i),l.oxw().closeAlert()}),l._UZ(8,"span"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Q6J("innerHtml",n.successInfo,l.oJD)}}function T(e,t){if(1&e&&(l.TgZ(0,"div",24),l.TgZ(1,"div",25),l._uU(2),l.qZA(),l.qZA()),2&e){var i=l.oxw();l.xp6(2),l.Oqu(i.language.users)}}function _(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",38),l.TgZ(1,"button",39),l._uU(2," ... "),l.qZA(),l.TgZ(3,"div",40),l.TgZ(4,"a",41),l.NdJ("click",function(){return l.CHM(i),l.oxw(2).openMFAForm()}),l.TgZ(5,"span",42),l._uU(6),l.qZA(),l._UZ(7,"img",43),l.qZA(),l.TgZ(8,"p",44),l._uU(9),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw(2);l.xp6(6),l.Oqu(n.language["MFA Request Form"]),l.xp6(3),l.Oqu(n.language["To enable MFA for your organization, complete this MFA request form."])}}function C(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"button",45),l.NdJ("click",function(){return l.CHM(i),l.oxw(2).addUser()}),l._uU(1),l.qZA()}if(2&e){var n=l.oxw(2);l.xp6(1),l.Oqu(n.language.addUsers)}}function y(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",26),l.TgZ(1,"div",27),l.TgZ(2,"div",28),l.TgZ(3,"div",29),l.YNc(4,_,10,2,"div",30),l.YNc(5,C,2,1,"button",31),l.qZA(),l.TgZ(6,"div",32),l.TgZ(7,"div",33),l.TgZ(8,"input",34,35),l.NdJ("keyup",function(e){return l.CHM(i),l.oxw().search(e.target.value)})("search",function(e){return l.CHM(i),l.oxw().search(e.target.value)}),l.qZA(),l.TgZ(10,"span",36),l.NdJ("click",function(){l.CHM(i);var e=l.MAs(9);return l.oxw().onSearchClearing(e)}),l._UZ(11,"img",37),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(4),l.Q6J("ngIf",n.showMFARequestForm),l.xp6(1),l.Q6J("ngIf",n.isCalixAdminModule||n.showAddUsers),l.xp6(3),l.s9C("placeholder",n.language.searchUsers),l.xp6(2),l.Q6J("hidden",!n.searchClearable)}}function k(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"button",58),l.NdJ("click",function(){l.CHM(i);var e=l.oxw().$implicit;return l.oxw(4).gotoUserSecuredAccess(e)}),l._UZ(1,"img",59),l.qZA()}}function q(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"i",60),l.NdJ("click",function(){l.CHM(i);var e=l.oxw().$implicit;return l.oxw(4).deleteUser(e)}),l.qZA()}if(2&e){var n=l.oxw(5);l.s9C("title",n.language.delete)}}function w(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"tr",52),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td",53),l.YNc(10,k,2,0,"button",54),l.TgZ(11,"a",55),l.NdJ("click",function(){var e=l.CHM(i).$implicit;return l.oxw(4).gotoUserDetail(e)}),l._UZ(12,"i",56),l.qZA(),l.YNc(13,q,1,1,"i",57),l.qZA(),l.qZA()}if(2&e){var n=t.$implicit,a=l.oxw(4);l.s9C("id",n._id),l.xp6(2),l.Oqu(n.username),l.xp6(2),l.Oqu(n.email),l.xp6(2),l.Oqu(n.firstName),l.xp6(2),l.Oqu(n.lastName),l.xp6(2),l.Q6J("ngIf",a.isCalixAdminModule&&a.isLoggedUserSameOrganization),l.xp6(2),l.s9C("title",a.language.Edit),l.xp6(1),l.Q6J("ngIf",a.isCalixAdminModule||a.showAddUsers)}}function O(e,t){if(1&e&&(l.TgZ(0,"tbody"),l.YNc(1,w,14,8,"tr",51),l.qZA()),2&e){var i=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",i.usersTableData)}}function S(e,t){if(1&e&&(l.TgZ(0,"tbody"),l.TgZ(1,"tr"),l.TgZ(2,"td",61),l._uU(3),l.qZA(),l.qZA(),l.qZA()),2&e){var i=l.oxw(3);l.xp6(3),l.Oqu(i.language["No matching records found"])}}function M(e,t){if(1&e&&(l.TgZ(0,"div",47),l.TgZ(1,"table",48),l.TgZ(2,"thead",49),l.TgZ(3,"tr"),l.TgZ(4,"th"),l._uU(5),l.qZA(),l.TgZ(6,"th"),l._uU(7),l.qZA(),l.TgZ(8,"th"),l._uU(9),l.qZA(),l.TgZ(10,"th"),l._uU(11),l.qZA(),l.TgZ(12,"th"),l._uU(13),l.qZA(),l.qZA(),l.qZA(),l.YNc(14,O,2,1,"tbody",50),l.YNc(15,S,4,1,"tbody",50),l._UZ(16,"tbody"),l.qZA(),l.qZA()),2&e){var i=l.oxw(2);l.Q6J("hidden",!i.dataAvailable),l.xp6(1),l.Q6J("dtOptions",i.dtOptions),l.xp6(4),l.Oqu(i.language.username),l.xp6(2),l.Oqu(i.language.emailAddress),l.xp6(2),l.Oqu(i.language.firstname),l.xp6(2),l.Oqu(i.language.lastname),l.xp6(2),l.Oqu(i.language.action),l.xp6(1),l.Q6J("ngIf",0!=(null==i.usersTableData?null:i.usersTableData.length)),l.xp6(1),l.Q6J("ngIf",0==(null==i.usersTableData?null:i.usersTableData.length)||"undefined"!=i.usersCount&&0===i.usersCount||"undefined"!=i.filterCount&&0===i.filterCount)}}function U(e,t){if(1&e&&(l.TgZ(0,"div",26),l.YNc(1,M,17,9,"div",46),l.qZA()),2&e){var i=l.oxw();l.xp6(1),l.Q6J("ngIf",i.countReceived)}}function D(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",62),l.TgZ(1,"h4",63),l._uU(2),l.qZA(),l.TgZ(3,"button",64),l.NdJ("click",function(){return l.CHM(i),l.oxw().closeModal()}),l._UZ(4,"span",65),l.qZA(),l.qZA(),l.TgZ(5,"div",66),l._uU(6),l.qZA(),l.TgZ(7,"div",67),l.TgZ(8,"button",68),l.NdJ("click",function(){return l.CHM(i),l.oxw().confirmDeleteSecleted()}),l._uU(9),l.qZA(),l.TgZ(10,"button",69),l.NdJ("click",function(){return l.CHM(i),l.oxw().closeModal()}),l._uU(11),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(2),l.Oqu(n.modalTitle),l.xp6(4),l.hij(" ",n.modalInfo," "),l.xp6(3),l.Oqu(n.language.yes),l.xp6(2),l.Oqu(n.language.no)}}var N,I=i(91704),E=((N=function(){function e(t,i,n,o,l,c,d,u){var g=this;a(this,e),this.commonOrgService=t,this.router=i,this.organizationApiService=n,this.http=o,this.sso=l,this.dialogService=c,this.translateService=d,this.titleService=u,this.pageAvailable=!1,this.usersTableData=[],this.dtTrigger=new s.xQ,this.isCalixAdminModule=!1,this.errorInfo="",this.successInfo="",this.MODULE="systemAdministration",this.filterCount=0,this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!0,dom:"tipr",columnDefs:[{targets:[3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:function(e){e._iRecordsDisplay<=e._iDisplayLength&&I(e.nTableWrapper).find("#users-table_last").addClass("disabled")}},this.isLoggedUserSameOrganization=!1,this.loader=!1,this.showAddUsers=!1,this.mfaRequestForm=r.N.EMBEDDING_LINK,this.showMFARequestForm=!1,this.searchClearable=!1;var p=this.router.url;this.ORG_ID=this.sso.getOrganizationID(p),this.isCalixAdminModule=this.checkModule(p),this.showAddUsers=this.checkShowAddUsers(p),this.MODULE=this.sso.getRedirectModule(p),this.language=this.translateService.defualtLanguage,this.tableLanguageOptions(),this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){g.language=e,g.titleService.setTitle("".concat(g.language.users," - ").concat("systemAdministration"===g.MODULE?g.language["System Administration"]:g.language.administration," - ").concat(g.language["Calix Cloud"])),g.tableLanguageOptions(),g.reloadCurrentRoute()}),this.commonOrgService.currentPageAdder("users"),this.getUsersCount(),this.checkUserOrganization(),this.frTable=this.translateService.fr}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.titleService.setTitle("".concat(this.language.users," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.tableRender(),this.closeAlert(),this.tableLanguageOptions(),I("body").off("click",".languageContent ul li a"),I("body").on("click",".languageContent ul li a",function(){e.changeTableStatusLanguage({_iDisplayStart:e.tableCounts.start,_iDisplayLength:e.tableCounts.displayCount,_iRecordsDisplay:e.tableCounts.displayed,_iRecordsTotal:e.tableCounts.total,oPreviousSearch:{sSearch:e.tableCounts.searchText}})}),this.showMFARequestForm=!("systemAdministration"===this.MODULE||this.sso.isSecureAccess())}},{key:"ngOnDestroy",value:function(){I("body").off("click",".languageContent ul li a"),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.rolesDeleteSubs&&this.rolesDeleteSubs.unsubscribe(),this.userDeleteSubs&&this.userDeleteSubs.unsubscribe(),this.getCountSubs&&this.getCountSubs.unsubscribe(),this.getOrgInfoSubs&&this.getOrgInfoSubs.unsubscribe(),this.dtTrigger&&this.dtTrigger.unsubscribe(),this.tableAjaxSubscription&&this.tableAjaxSubscription.unsubscribe(),this.dest()}},{key:"getUserOrgDetails",value:function(){var e=this;this.getOrgInfoSubs=this.organizationApiService.orgInformation(this.ORG_ID).subscribe(function(t){e.sso.setAdminOrgInfo(t)})}},{key:"getUsersCount",value:function(){var e=this;this.getCountSubs=this.organizationApiService.UsersCountByOrgId(this.ORG_ID).subscribe(function(t){e.usersCount=t,e.countReceived=!0},function(t){e.pageErrorHandle(t),e.commonOrgService.pageScrollTop(),e.usersCount=void 0,e.countReceived=!0})}},{key:"tableRender",value:function(){var e=this,t="".concat(r.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/users"),i=this;this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!1,dom:"tipr",columnDefs:[{targets:[3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],ajax:function(n,a){e.sortBy=n.order[0].column,e.sortType=n.order[0].dir,i.callCount(n.search.value),i.tableAjaxSubscription=i.http.get("".concat(t,"?offset=").concat(n.start,"&size=").concat(n.length,"&filter=").concat(n.search.value)).subscribe(function(t){i.usersTableData=e.sortData(t,i.sortBy,i.sortType),i.hideNoDataRow(),i.dataAvailable=!0,e.tableLanguageOptions(),setTimeout(function(){a({recordsTotal:null!=i.usersCount?i.usersCount:0,recordsFiltered:null!=i.filterCount?i.filterCount:i.usersCount,data:[]})},100)},function(t){404==t.status?(i.usersTableData=[],i.hideNoDataRow(),i.dataAvailable=!0,e.tableLanguageOptions(),setTimeout(function(){a({recordsTotal:null!=i.usersCount?i.usersCount:0,recordsFiltered:null!=i.filterCount?i.filterCount:i.usersCount,data:[]})},100)):(e.pageErrorHandle(t),e.dataAvailable=!0)})},drawCallback:function(e){e._iRecordsDisplay<=e._iDisplayLength&&I(e.nTableWrapper).find("#users-table_last").addClass("disabled")},columns:[{data:"username"},{data:"email"},{data:"firstName"},{data:"lastName"},{data:""}]},this.tableLanguageOptions()}},{key:"callCount",value:function(e){var t=this;this.http.get("".concat(r.N.CALIX_ADMIN_BASE_URL,"org/").concat(this.ORG_ID,"/users/_count?filter=").concat(e)).subscribe(function(e){t.filterCount=e})}},{key:"hideNoDataRow",value:function(){setTimeout(function(){I(".odd").css("display","none")},100)}},{key:"search",value:function(e){var t,i;this.searchClearable=!!e.length,null===(i=null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)||void 0===i||i.then(function(t){t.search(e).draw()})}},{key:"onSearchClearing",value:function(e){this.searchClearable=!1,e.value="",this.dtElement.dtInstance.then(function(t){t.search(e.value).draw()})}},{key:"gotoUserDetail",value:function(e){sessionStorage.setItem("calixAdminUserDetail",JSON.stringify(e)),this.router.navigate(["".concat(this.MODULE,"/usersDetail")])}},{key:"deleteUser",value:function(e){this.deleteData=e,this.modalTitle=this.language["Delete user"],this.modalInfo="".concat(this.language["Are you sure you want to delete"]," ").concat(e.username,"?"),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDeleteSecleted",value:function(){var e=this;this.closeModal(),this.rolesDeleteSubs=this.organizationApiService.DeleteRolesListByUserId(this.deleteData._id).subscribe(function(t){e.userDeleteSubs=e.organizationApiService.UserDelete(e.deleteData._id).subscribe(function(t){e.closeAlert(),e.successInfo=e.language["User deleted Successfully"],e.success=!0,e.commonOrgService.pageScrollTop(),e.dataAvailable=!1,e.usersCount=void 0,e.filterCount=void 0,e.deleteData=void 0,e.getUsersCount(),e.redraw(),setTimeout(function(){e.closeAlert()},1500)},function(t){e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()})},function(t){e.pageErrorHandle(t),e.commonOrgService.pageScrollTop()})}},{key:"redraw",value:function(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(function(e){e.draw()})}},{key:"redrawnew",value:function(){var e,t,i=this;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(function(e){e.destroy(),i.tableRender()})}},{key:"addUser",value:function(){this.router.navigate(["".concat(this.MODULE,"/addUser")])}},{key:"hideSearch",value:function(){setTimeout(function(){I("#users-list-table .dataTables_wrapper .dataTables_filter").css("display","none"),I("#users-list-table .dataTables_wrapper .dataTables_length").css("display","none")},50)}},{key:"checkModule",value:function(e){return e.indexOf("/".concat(r.N.SYS_ADMIN_ROUTE,"/"))>-1}},{key:"checkShowAddUsers",value:function(e){var t,i=this.sso.getRoles();return t=this.sso.getOrgSFID(),!(this.sso.isSecureAccess()||!(e.indexOf("/organization-admin/")>-1)||void 0===t||""!=t&&null!=t||!i.includes("OrgAdmin"))}},{key:"openDeleteModal",value:function(){document.getElementById("deleteModalHiddenButton").click()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"sortData",value:function(e,t,i){var n=[];return 0==t?n=this.sortByColumn(e,i,"username"):1==t?n=this.sortByColumn(e,i,"email"):2==t&&(n=this.sortByColumn(e,i,"firstName")),n}},{key:"sortByColumn",value:function(e,t,i){return e.sort(function(e,n){var a=e[i]?e[i].toUpperCase():"",s=n[i]?n[i].toUpperCase():"";if("asc"==t){if(a<s)return-1;if(a>s)return 1}else{if(a>s)return-1;if(a<s)return 1}return 0}),e}},{key:"gotoUserSecuredAccess",value:function(e){sessionStorage.setItem("SecuredAccessUser",JSON.stringify(e)),this.router.navigate(["".concat(this.MODULE,"/UserSecuredAccess")])}},{key:"checkUserOrganization",value:function(){var e=this.sso.getOrgId();this.isLoggedUserSameOrganization=this.ORG_ID==e}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.dtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}},{key:"dest",value:function(){var e,t;null===(t=null===(e=this.dtElement)||void 0===e?void 0:e.dtInstance)||void 0===t||t.then(function(e){e.destroy()})}},{key:"changeTableStatusLanguage",value:function(e){var t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.trim(),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};var i="fr"==sessionStorage.getItem("defaultLanguage"),n=e.oPreviousSearch.sSearch.trim()?i?"(filtr\xe9es \xe0 partir des ".concat(t.format(e._iRecordsTotal)," entr\xe9es totales)"):"(filtered from ".concat(t.format(e._iRecordsTotal)," total entries)"):"",a=0==e._iRecordsDisplay?-1:e._iDisplayStart,s=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;I('div [role="status"]').text(i?"Affichage de ".concat(t.format(a+1)," \xe0 ").concat(t.format(s)," des ").concat(t.format(e._iRecordsDisplay)," entr\xe9es ").concat(n):"Showing ".concat(t.format(a+1)," to ").concat(t.format(s)," of ").concat(t.format(e._iRecordsDisplay)," entries ").concat(n)),I(".first").text(i?"Le d\xe9but":"First"),I(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),I(".next").text(i?"Suivant":"Next"),I(".last").text(i?"Derni\xe8re":"Last")}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}},{key:"reloadCurrentRoute",value:function(){var e=this,t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){e.router.navigate([t])})}},{key:"openMFAForm",value:function(){window.open(this.mfaRequestForm,"_blank")}}]),e}()).\u0275fac=function(e){return new(e||N)(l.Y36(c.v),l.Y36(d.F0),l.Y36(u.F),l.Y36(g.eN),l.Y36(p.t6),l.Y36(h.FF),l.Y36(f.s),l.Y36(m.Dx))},N.\u0275cmp=l.Xpm({type:N,selectors:[["app-users"]],viewQuery:function(e,t){var i;1&e&&(l.Gf(Z,7),l.Gf(n.G,5)),2&e&&(l.iGM(i=l.CRH())&&(t.deleteModal=i.first),l.iGM(i=l.CRH())&&(t.dtElement=i.first))},decls:10,vars:6,consts:[["id","scrollTopId",1,"container","position-relative"],["scrollTopId",""],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["class","row mb-3",4,"ngIf"],["class","row my-3",4,"ngIf"],["deleteModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-alert-wrapper","align-items-center"],[1,"success-alert-icon"],["src","../../../assets/img/success-icon.svg","alt",""],[1,"success-alert-msg"],[3,"innerHtml"],[1,"success-alert-close"],[1,"row","mb-3"],[1,"col-md-12","ccl-admin-title"],[1,"row","my-3"],[1,"col-12"],[1,"d-flex","flex-wrap","w-100","justify-content-end"],[1,"mr-3","mb-2"],["class","dropdown dropleft d-inline-flex mb-2",4,"ngIf"],["class","btn-default primary d-inline-flex ml-3",3,"click",4,"ngIf"],[1,"search-min","mb-2"],[1,"ccl-form"],["type","text","name","searchbox",1,"input-sm",3,"placeholder","keyup","search"],["searchBar",""],[1,"clear-icon",3,"hidden","click"],["src","assets/img/close-icon.svg"],[1,"dropdown","dropleft","d-inline-flex","mb-2"],["type","button","id","userDropdownMenuBtn","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","dropdown-toggle","px-0"],["aria-labelledby","userDropdownMenuBtn",1,"dropdown-menu","mt-4","ml-5"],["target","_blank",1,"dropdown-link","d-block","text-center","mt-1","mb-2","cursor-pointer",3,"click"],[1,"mr-2"],["src","../../../assets/img/Preview-icon.svg",1,"ml-2"],[1,"text-center","mt-1"],[1,"btn-default","primary","d-inline-flex","ml-3",3,"click"],["class","col",3,"hidden",4,"ngIf"],[1,"col",3,"hidden"],["id","users-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,""],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"actions"],["class","btn-trans-icon",3,"click",4,"ngIf"],[3,"click"],[1,"fas","fa-pencil-alt","p-1","primary","cursor-pointer",3,"title"],["class","fas fa-trash-alt p-1 primary cursor-pointer",3,"title","click",4,"ngIf"],[1,"btn-trans-icon",3,"click"],["src","assets/images/user_secure_access_icon.png"],[1,"fas","fa-trash-alt","p-1","primary","cursor-pointer",3,"title","click"],["colspan","5",1,"no-data-available"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0,1),l.YNc(2,b,5,1,"div",2),l.YNc(3,A,6,1,"div",3),l.YNc(4,x,9,1,"div",4),l.YNc(5,T,3,1,"div",5),l.YNc(6,y,12,4,"div",6),l.YNc(7,U,2,1,"div",6),l.qZA(),l.YNc(8,D,12,4,"ng-template",null,7,l.W1O)),2&e&&(l.xp6(2),l.Q6J("ngIf",!t.dataAvailable),l.xp6(1),l.Q6J("ngIf",t.error),l.xp6(1),l.Q6J("ngIf",t.success),l.xp6(1),l.Q6J("ngIf",t.pageAvailable),l.xp6(1),l.Q6J("ngIf",t.pageAvailable),l.xp6(1),l.Q6J("ngIf",t.pageAvailable))},directives:[v.O5,n.G,v.sg],styles:[".btn-trans-icon[_ngcontent-%COMP%]{font-size:12px;border:none;background-color:transparent}.dropdown-link[_ngcontent-%COMP%]{color:#0279ff;font-weight:400;font-size:16px;line-height:20px}.dropleft[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:before{display:none!important}.dropdown-toggle[_ngcontent-%COMP%]{outline:none!important;border:none!important;background-color:transparent!important;box-shadow:none;font-size:24px;padding:0;line-height:16px;color:#4c4c4c}.dropdown-toggle[_ngcontent-%COMP%]:hover{color:#0279ff}.dropdown-toggle[_ngcontent-%COMP%]:active{color:#0054b2}.dropdown-toggle[_ngcontent-%COMP%]:focus{color:#0279ff}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 5px 15px #80808040;-webkit-box-shadow:0px 5px 15px rgba(128,128,128,.25);border-color:#0000000d!important;min-width:210px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]{width:100%!important;border-radius:0!important;text-align:left;padding:10px 25px}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#edf5ff!important}.search-min[_ngcontent-%COMP%]{min-width:235px}.clear-icon[_ngcontent-%COMP%]{position:relative;right:-200px;top:-33px;cursor:pointer;width:13px!important}.clear-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px!important}#userDropdownMenuBtn[_ngcontent-%COMP%]{min-height:28px}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:30px;top:5px;cursor:pointer;width:12px}"]}),N)},85656:function(e,t,i){i.d(t,{o:function(){return A}});var n=i(37716),s=i(86451),r=i(7450),l=i(49342),c=i(39075),d=i(39895),u=i(89097),g=i(38583),p=i(3679);function h(e,t){if(1&e&&(n.TgZ(0,"div",20),n.TgZ(1,"div",21),n.TgZ(2,"div",22),n.TgZ(3,"span",23),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var i=n.oxw();n.xp6(4),n.Oqu(i.language.Loading)}}function f(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",24),n.TgZ(1,"span",25),n._UZ(2,"img",26),n.qZA(),n.TgZ(3,"button",27),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",28),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.language[a.errorInfo]||a.errorInfo,n.oJD)}}function m(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div",29),n.TgZ(1,"span",30),n._UZ(2,"img",31),n.qZA(),n.TgZ(3,"button",27),n.NdJ("click",function(){return n.CHM(i),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",28),n.qZA()}if(2&e){var a=n.oxw();n.xp6(5),n.Q6J("innerHtml",a.language[a.successInfo]||a.successInfo,n.oJD)}}function v(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"input",32),n.NdJ("ngModelChange",function(e){return n.CHM(i),n.oxw().uploadfile=e}),n.qZA()}if(2&e){var a=n.oxw();n.Q6J("ngModel",a.uploadfile)("disabled",!0)}}function Z(e,t){if(1&e){var i=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"button",33),n.NdJ("click",function(){return n.CHM(i),n.oxw().fullImportUpload()}),n._uU(2),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(2),n.Oqu(a.language.Upload)}}var b,A=((b=function(){function e(t,i,n,s,o,r){a(this,e),this.communityService=t,this.translateService=i,this.commonOrgService=n,this.titleService=s,this.router=o,this.sso=r,this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("USOC-Upload")}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.titleService.setTitle("".concat(e.language["USOC-Upload"]," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language["USOC-Upload"]," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}},{key:"fullImportUpload",value:function(){var e,t=this;this.loader=!0;var i=new FormData;i.append("uploadfile",this.file,null===(e=this.file)||void 0===e?void 0:e.name),this.uploadcsvFile=this.communityService.Uploadcsv(i).subscribe(function(e){t.loader=!1,t.success=!0,t.hideUpload=!1,t.error=!1,t.successInfo="".concat(t.uploadfile," has been uploaded successfully")},function(e){t.loader=!1,t.pageErrorHandle(e)})}},{key:"GoInstruction",value:function(){window.open("http://community.calix.com/s/article/Updating-Service-Codes-for-Calix-Cloud","_blank")}},{key:"pageErrorHandle",value:function(e){this.errorInfo=401==e.status?this.language["Access Denied"]:504==e.status?"Gateway Timeout":503==e.status?"Service Temporarily Unavailable":this.commonOrgService.pageErrorHandle(e),this.closeAlert(),this.error=!0,this.success=!1,this.commonOrgService.pageScrollTop()}},{key:"closeAlert",value:function(){this.error=!1,this.success=!1}},{key:"readURL",value:function(e){var t;this.file=e.target.files[0],this.uploadfile=null===(t=this.file)||void 0===t?void 0:t.name,this.hideUpload=!0,e.target.value=""}}]),e}()).\u0275fac=function(e){return new(e||b)(n.Y36(s.l),n.Y36(r.s),n.Y36(l.v),n.Y36(c.Dx),n.Y36(d.F0),n.Y36(u.t6))},b.\u0275cmp=n.Xpm({type:b,selectors:[["app-usoc-upload"]],decls:29,vars:10,consts:[[1,"contaniner","position-relative"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"pl-1"],[3,"innerHtml"],[1,"f-size-16px","primary","pointer",3,"click"],["src","./assets/img/Preview-icon.svg"],[1,"col-md-5"],[1,"form-group"],["id","fullImportUpload-div",1,"ccl-form"],[1,""],["for","text",1,"col-md-3","pl-1"],["id","fullImportUpload","class","col-md-9 inp-disabled","name","text","type","text","data-toggle","tooltip","data-placement","top","title","Tooltip on top",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["for","logo",1,"primary","m-0","pointer","usoc-upload-button","btn-default","my-1","ml-1"],["type","file","accept",".csv","name","logo","required","","id","logo",1,"type-file",2,"display","none",3,"change"],["logo",""],[4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],["id","fullImportUpload","name","text","type","text","data-toggle","tooltip","data-placement","top","title","Tooltip on top",1,"col-md-9","inp-disabled",3,"ngModel","disabled","ngModelChange"],["type","button",1,"usoc-upload-button","btn-default","primary","ml-1",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,h,5,1,"div",1),n.YNc(2,f,6,1,"div",2),n.YNc(3,m,6,1,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div"),n.TgZ(7,"h4"),n._uU(8),n.qZA(),n.qZA(),n.TgZ(9,"p",6),n._UZ(10,"span",7),n.TgZ(11,"span",8),n.NdJ("click",function(){return t.GoInstruction()}),n._uU(12),n._UZ(13,"img",9),n.qZA(),n._uU(14,". "),n.qZA(),n.qZA(),n.TgZ(15,"div",10),n.TgZ(16,"form"),n.TgZ(17,"div",11),n.TgZ(18,"div",12),n.TgZ(19,"div",13),n.TgZ(20,"label",14),n._uU(21),n.qZA(),n.YNc(22,v,1,2,"input",15),n.qZA(),n.TgZ(23,"label",16),n.TgZ(24,"a"),n._uU(25),n.qZA(),n.qZA(),n.TgZ(26,"input",17,18),n.NdJ("change",function(e){return t.readURL(e)}),n.qZA(),n.qZA(),n.YNc(28,Z,3,1,"div",19),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.loader),n.xp6(1),n.Q6J("ngIf",t.error),n.xp6(1),n.Q6J("ngIf",t.success),n.xp6(5),n.hij(" ",t.language["USOC File Upload"],""),n.xp6(2),n.Q6J("innerHtml",t.language.usoc_file_upload,n.oJD),n.xp6(2),n.hij(" ",t.language.instructions," "),n.xp6(9),n.Oqu(t.language["CSV File"]),n.xp6(1),n.Q6J("ngIf",t.uploadfile),n.xp6(3),n.Oqu(t.language.Browse),n.xp6(3),n.Q6J("ngIf",t.uploadfile))},directives:[g.O5,p._Y,p.JL,p.F,p.Fj,p.JJ,p.On],styles:[".usoc-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px}input.inp-disabled[_ngcontent-%COMP%]:hover{cursor:not-allowed!important}.usoc-upload-button[_ngcontent-%COMP%]{position:relative}.usoc-upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0;top:0;width:100%;height:100%;opacity:0}.usoc-upload-button[_ngcontent-%COMP%]:focus{outline:none!important}.card[_ngcontent-%COMP%]{border:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}.btn-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}[aria-expanded=true][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:rotate(180deg)}.csv-data-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:26px}.csv-data-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:disc}"]}),b)},98953:function(e,t,i){i.d(t,{K:function(){return H}});var n=i(23771),s=i(79765),r=i(38583),l=i(37716),c=i(12664),d=i(82823),u=i(39895),g=i(89097),p=i(39075),h=i(49342),f=i(7450),m=i(20904),v=i(3679),Z=i(74062),b=["deleteZipcodeFilterList"],A=["editZipcodeFilterName"],x=["addZipModal"],T=["delteZipcodes"],_=["editZipModal"];function C(e,t){if(1&e&&(l.TgZ(0,"div",34),l.TgZ(1,"div",35),l.TgZ(2,"span",36),l._uU(3),l.qZA(),l.qZA(),l.qZA()),2&e){var i=l.oxw();l.xp6(3),l.Oqu(i.language.Loading)}}function y(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",37),l.TgZ(1,"span",38),l._UZ(2,"img",39),l.qZA(),l.TgZ(3,"button",10),l.NdJ("click",function(){return l.CHM(i),l.oxw().closeAlert()}),l._UZ(4,"span"),l.qZA(),l._UZ(5,"div",40),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Q6J("innerHtml",n.errorMessage,l.oJD)}}function k(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",37),l.TgZ(1,"span",38),l._UZ(2,"img",39),l.qZA(),l.TgZ(3,"button",10),l.NdJ("click",function(){return l.CHM(i),l.oxw().closeAlert()}),l._UZ(4,"span"),l.qZA(),l._UZ(5,"div",40),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Q6J("innerHtml",n.requiredZipcodeName,l.oJD)}}function q(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"span",41),l.NdJ("click",function(){return l.CHM(i),l.oxw().clearText()}),l._UZ(1,"img",42),l.qZA()}}function w(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",43),l.TgZ(1,"button",44),l.NdJ("click",function(){return l.CHM(i),l.oxw().deleteEntryListZipcode()}),l._UZ(2,"i",45),l._uU(3),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(3),l.hij(" ",n.language["Delete Selection"]," ")}}function O(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td",46),l.TgZ(2,"div",21),l.TgZ(3,"input",47),l.NdJ("change",function(e){var t=l.CHM(i).index;return l.oxw().selectedOne(e.target.checked,t)})("ngModelChange",function(e){return l.CHM(i).$implicit.checked=e}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"td"),l._uU(5),l.qZA(),l.TgZ(6,"td"),l._uU(7),l.qZA(),l.TgZ(8,"td"),l._uU(9),l.qZA(),l.TgZ(10,"td"),l._uU(11),l.qZA(),l.TgZ(12,"td"),l.TgZ(13,"div",48),l.TgZ(14,"a",49),l.NdJ("click",function(){var e=l.CHM(i).$implicit;return l.oxw().editZip(e)}),l._UZ(15,"i",50),l.qZA(),l.TgZ(16,"a",49),l.NdJ("click",function(){var e=l.CHM(i).$implicit;return l.oxw().deleteEntryListZipcode(e.id)}),l._UZ(17,"i",51),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=t.$implicit,a=l.oxw();l.xp6(3),l.Q6J("ngModel",n.checked),l.xp6(2),l.Oqu(n.zipcode),l.xp6(2),l.Oqu(n.zipPlusFour),l.xp6(2),l.Oqu(a.traslateDate(n.createdTime)),l.xp6(2),l.Oqu(a.language[n.hasService]||n.hasService),l.xp6(4),l.s9C("title",a.language.edit),l.xp6(2),l.s9C("title",a.language.delete)}}function S(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",70),l._uU(2),l.qZA(),l.qZA()),2&e){var i=l.oxw(2);l.xp6(2),l.Oqu(i.language["Zip code should be 5 characters long, only numeric (no special characters)"])}}function M(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",70),l._uU(2),l.qZA(),l.qZA()),2&e){var i=l.oxw(2);l.xp6(2),l.Oqu(i.language["Zip+4 should be 4 characters long, only numeric (no special characters)"])}}function U(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",52),l.TgZ(1,"button",53),l.NdJ("click",function(){return l.CHM(i).$implicit.dismiss("Cross click")}),l._UZ(2,"span"),l.qZA(),l.qZA(),l.TgZ(3,"div",54),l.TgZ(4,"div",55),l._uU(5),l.qZA(),l.TgZ(6,"div",56),l.TgZ(7,"div",57),l.TgZ(8,"label"),l._uU(9),l.qZA(),l.TgZ(10,"input",58),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().addZipcode=e})("input",function(e){return l.CHM(i),l.oxw().onChangeAddZipcode(e.target.value)})("blur",function(){l.CHM(i);var e=l.oxw();return e.removeUnwantedSpace("addZipcode",e.addZipcode)}),l.qZA(),l.qZA(),l.TgZ(11,"div",59),l.TgZ(12,"label"),l._uU(13,"+4"),l.qZA(),l.TgZ(14,"input",60),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().addZipPlusfour=e})("input",function(e){return l.CHM(i),l.oxw().onChangeAddZipPlusFour(e.target.value)})("blur",function(){l.CHM(i);var e=l.oxw();return e.removeUnwantedSpace("addZipPlusfour",e.addZipPlusfour)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",61),l.TgZ(16,"label",62),l._uU(17),l.qZA(),l.TgZ(18,"div",63),l.TgZ(19,"input",64),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().hasServiceCheck=e}),l.qZA(),l.TgZ(20,"label",65),l._uU(21),l.qZA(),l.qZA(),l.qZA(),l.YNc(22,S,3,1,"div",66),l.YNc(23,M,3,1,"div",66),l.TgZ(24,"div",67),l.TgZ(25,"button",68),l.NdJ("click",function(){return l.CHM(i),l.oxw().postZipcodeToList()}),l._uU(26),l.qZA(),l.TgZ(27,"button",69),l.NdJ("click",function(){return l.CHM(i).$implicit.close("Close click")}),l._uU(28),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Oqu(n.language["Add ZIP"]),l.xp6(4),l.Oqu(n.language["ZIP Code"]),l.xp6(1),l.Q6J("ngModel",n.addZipcode),l.xp6(4),l.Q6J("ngModel",n.addZipPlusfour),l.xp6(3),l.Oqu(n.language["Has Service"]),l.xp6(2),l.Q6J("ngModel",n.hasServiceCheck),l.xp6(2),l.hij("",n.language.Yes," "),l.xp6(1),l.Q6J("ngIf",n.zipcodeNameError),l.xp6(1),l.Q6J("ngIf",n.zipcodePlusError),l.xp6(2),l.Q6J("disabled",!n.saveButtonShow),l.xp6(1),l.Oqu(n.language.Save),l.xp6(2),l.Oqu(n.language.Cancel)}}function D(e,t){if(1&e&&(l.TgZ(0,"li"),l._uU(1),l.qZA()),2&e){var i=t.$implicit;l.xp6(1),l.AsE("",i.zipcode,"",i.zipPlusFour?"-"+i.zipPlusFour:""," ")}}function N(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",52),l.TgZ(1,"button",53),l.NdJ("click",function(){return l.CHM(i).$implicit.dismiss("Cross click")}),l._UZ(2,"span"),l.qZA(),l.qZA(),l.TgZ(3,"div",71),l.TgZ(4,"div",72),l.TgZ(5,"div",73),l._UZ(6,"img",74),l.qZA(),l.TgZ(7,"div"),l.TgZ(8,"div",75),l._uU(9),l.qZA(),l.TgZ(10,"ul",76),l.YNc(11,D,2,2,"li",27),l.qZA(),l.TgZ(12,"button",77),l.NdJ("click",function(){return l.CHM(i),l.oxw().deleteEntryZipcodes()}),l._uU(13),l.qZA(),l.TgZ(14,"button",78),l.NdJ("click",function(){return l.CHM(i).$implicit.close("Close click")}),l._uU(15),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(9),l.Oqu(n.language["Are you sure you want to delete the following ZIP Code(s)?"]),l.xp6(2),l.Q6J("ngForOf",n.deleteZipcodeZipPlusfour),l.xp6(2),l.Oqu(n.language.Delete),l.xp6(2),l.Oqu(n.language.Cancel)}}function I(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",70),l._uU(2),l.qZA(),l.qZA()),2&e){var i=l.oxw(2);l.xp6(2),l.Oqu(i.language["File name must only have alphanumeric characters and spaces"])}}function E(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",52),l.TgZ(1,"button",53),l.NdJ("click",function(){return l.CHM(i).$implicit.dismiss("Cross click")}),l._UZ(2,"span"),l.qZA(),l.qZA(),l.TgZ(3,"div",54),l.TgZ(4,"div",79),l._uU(5),l.qZA(),l.TgZ(6,"div",80),l.TgZ(7,"label"),l._uU(8),l.qZA(),l.TgZ(9,"input",81),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().zipcodeName=e})("input",function(e){return l.CHM(i),l.oxw().onChangeZipcodeFilterName(e.target.value)})("blur",function(){l.CHM(i);var e=l.oxw();return e.removeUnwantedSpace("zipcodeName",e.zipcodeName)}),l.qZA(),l.qZA(),l.YNc(10,I,3,1,"div",66),l.TgZ(11,"div",82),l.TgZ(12,"button",68),l.NdJ("click",function(){return l.CHM(i),l.oxw().updateZipcodeName()}),l._uU(13),l.qZA(),l.TgZ(14,"button",69),l.NdJ("click",function(){return l.CHM(i).$implicit.close("Close click")}),l._uU(15),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Oqu(n.language["ZIP Code Filter Name"]),l.xp6(3),l.Oqu(n.language.Name),l.xp6(1),l.Q6J("ngModel",n.zipcodeName),l.xp6(1),l.Q6J("ngIf",n.zipcodeNameError),l.xp6(2),l.Q6J("disabled",!n.saveButtonShow||!n.zipcodeName),l.xp6(1),l.Oqu(n.language["Save Changes"]),l.xp6(2),l.Oqu(n.language.Cancel)}}function F(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",52),l.TgZ(1,"button",53),l.NdJ("click",function(){return l.CHM(i).$implicit.dismiss("Cross click")}),l._UZ(2,"span"),l.qZA(),l.qZA(),l.TgZ(3,"div",71),l.TgZ(4,"div",72),l.TgZ(5,"div",73),l._UZ(6,"img",74),l.qZA(),l.TgZ(7,"div"),l.TgZ(8,"div",83),l._uU(9),l.qZA(),l.TgZ(10,"button",77),l.NdJ("click",function(){return l.CHM(i),l.oxw().deleteZipcodeName()}),l._uU(11),l.qZA(),l.TgZ(12,"button",78),l.NdJ("click",function(){return l.CHM(i).$implicit.close("Close click")}),l._uU(13),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(9),l.AsE("",n.language["Are you sure you want to delete"]," ",n.zipcodeName,"?"),l.xp6(2),l.Oqu(n.language.Delete),l.xp6(2),l.Oqu(n.language.Cancel)}}function P(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",70),l._uU(2),l.qZA(),l.qZA()),2&e){var i=l.oxw(2);l.xp6(2),l.Oqu(i.language["Zip code should be 5 characters long, only numeric (no special characters)"])}}function L(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",70),l._uU(2),l.qZA(),l.qZA()),2&e){var i=l.oxw(2);l.xp6(2),l.Oqu(i.language["Zip+4 should be 4 characters long, only numeric (no special characters)"])}}function J(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"div",52),l.TgZ(1,"button",53),l.NdJ("click",function(){return l.CHM(i).$implicit.dismiss("Cross click")}),l._UZ(2,"span"),l.qZA(),l.qZA(),l.TgZ(3,"div",54),l.TgZ(4,"div",79),l._uU(5),l.qZA(),l.TgZ(6,"div",56),l.TgZ(7,"div",57),l.TgZ(8,"label"),l._uU(9),l.qZA(),l.TgZ(10,"input",84),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().entryZipcode=e})("input",function(e){return l.CHM(i),l.oxw().onChangeEditZipcode(e.target.value)})("blur",function(){l.CHM(i);var e=l.oxw();return e.removeUnwantedSpace("entryZipcode",e.entryZipcode)}),l.qZA(),l.qZA(),l.TgZ(11,"div",59),l.TgZ(12,"label"),l._uU(13,"+4"),l.qZA(),l.TgZ(14,"input",85),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().entryPlusFour=e})("input",function(e){return l.CHM(i),l.oxw().onChangeEditZipPlusFour(e.target.value)})("blur",function(){l.CHM(i);var e=l.oxw();return e.removeUnwantedSpace("entryPlusFour",e.entryPlusFour)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",61),l.TgZ(16,"label",62),l._uU(17),l.qZA(),l.TgZ(18,"div",63),l.TgZ(19,"input",86),l.NdJ("ngModelChange",function(e){return l.CHM(i),l.oxw().entryHasService=e})("change",function(e){return l.CHM(i),l.oxw().hasServiceChange(e.target.checked)}),l.qZA(),l.TgZ(20,"label",65),l._uU(21),l.qZA(),l.qZA(),l.qZA(),l.YNc(22,P,3,1,"div",66),l.YNc(23,L,3,1,"div",66),l.TgZ(24,"div",67),l.TgZ(25,"button",68),l.NdJ("click",function(){return l.CHM(i),l.oxw().updatedEntryZipcode()}),l._uU(26),l.qZA(),l.TgZ(27,"button",69),l.NdJ("click",function(){return l.CHM(i).$implicit.close("Close click")}),l._uU(28),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=l.oxw();l.xp6(5),l.Oqu(n.language["Edit ZIP"]),l.xp6(4),l.Oqu(n.language["ZIP Code"]),l.xp6(1),l.Q6J("ngModel",n.entryZipcode),l.xp6(4),l.Q6J("ngModel",n.entryPlusFour),l.xp6(3),l.Oqu(n.language["Has Service"]),l.xp6(2),l.Q6J("ngModel",n.entryHasService),l.xp6(2),l.hij("",n.language.Yes," "),l.xp6(1),l.Q6J("ngIf",n.zipcodeNameError),l.xp6(1),l.Q6J("ngIf",n.zipcodePlusError),l.xp6(2),l.Q6J("disabled",!n.saveButtonShow||!n.entryZipcode),l.xp6(1),l.Oqu(n.language["Save Changes"]),l.xp6(2),l.Oqu(n.language.Cancel)}}var R,H=((R=function(){function e(t,i,n,o,r,l,c,d){var u,g,p;a(this,e),this.dialogService=t,this.zipcodeService=i,this.router=n,this.sso=o,this.titleService=r,this.commonOrgService=l,this.translateService=c,this.common=d,this.listIds=[],this.allChecked=!1,this.deleteSelectionButtonShow=!1,this.loading=!1,this.errorShow=!1,this.saveButtonShow=!1,this.requiredZipcodeNameShow=!1,this.zipcodeListArrayResultError=!1,this.isRerender=!1,this.newArray=[],this.zipcodeNameError=!1,this.zipcodePlusError=!1,this.hasServiceCheck=!1,this.entryHasService=!1,this.previousEntryChecked=!1,this.zipCodeDtOptions={},this.dtTrigger=new s.xQ,this.MODULE=this.sso.getRedirectModule(this.router.url),this.titleService.setTitle("Zip Code File Upload - ".concat("systemAdministration"===this.MODULE?"System Administration":"Administration"," - Calix Cloud")),this.commonOrgService.currentPageAdder("zip-code-list"),this.selectedListName=null===(p=null===(g=null===(u=this.router.getCurrentNavigation())||void 0===u?void 0:u.extras)||void 0===g?void 0:g.state)||void 0===p?void 0:p.fileName,this.selectedListName||this.redirectToZipcodeUpload()}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.zipCodeDtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!1,ordering:!0,order:[1,"asc"],searching:!0,dom:"tipr",retrieve:!0,processing:!0,columnDefs:[{targets:[0,3,4,5],orderable:!1}],drawCallback:function(t){e.Table=$("#example").DataTable(),e.info=e.Table.page.info(),e.newArray=e.Table.context[0].aiDisplay,e.table(t)}},this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.getZipcodeEntryList(),e.setTableOptions("language")}),this.getZipcodeEntryList(),this.tableLanguageOptions()}},{key:"table",value:function(e){this.allChecked=!1,this.listIds=[];for(var t=0;t<e.aoData.length;t++)this.zipCodeDetailLists[t].checked=!1;this.deleteSelectionButtonShow=!1,this.deleteZipcodeZipPlusfour=[]}},{key:"delModalOpen",value:function(e){this.closeAlert(),this.dialogService.open(this.deleteZipcodeFilterList,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-custom-delete-modal"}),this.zipcodeName=e}},{key:"modalOpen",value:function(e){this.closeAlert(),this.dialogService.open(this.editZipcodeFilterName,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-default-modal"}),this.zipcodeName=e,this.zipcodeUpdatedName=e,this.saveButtonShow=!1,this.zipcodeNameError=!1,this.zipcodePlusError=!1}},{key:"addZipcodeToList",value:function(){this.closeAlert(),this.dialogService.open(this.addZipModal,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"}),this.addZipcode="",this.addZipPlusfour="",this.hasServiceCheck=!1,this.saveButtonShow=!1,this.zipcodeNameError=!1,this.zipcodePlusError=!1}},{key:"searchName",value:function(e){this.dtElement.dtInstance.then(function(t){t.search(e).draw()}),this.closeAlert()}},{key:"clearText",value:function(){this.searchText="",this.searchName(this.searchText)}},{key:"deleteEntryListZipcode",value:function(e){var t=e?[e]:this.listIds;this.dialogService.open(this.delteZipcodes,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"}),this.deleteZipcodeZipPlusfour=this.zipCodeDetailLists.filter(function(e){return-1!==t.indexOf(e.id)})}},{key:"selectAll",value:function(e){var t=this;this.listIds=[],this.allChecked=e,this.deleteSelectionButtonShow=e,this.newArray.slice(this.info.start,this.info.end).forEach(function(i){t.zipCodeDetailLists[i].checked=e}),e?this.zipCodeDetailLists.map(function(e){e.checked&&t.listIds.push(e.id)}):this.listIds=[]}},{key:"selectedOne",value:function(e,t){var i=this;this.listIds=[];var n=this.info.end-this.info.start;this.zipCodeDetailLists[t].checked=e,this.zipCodeDetailLists.filter(function(e){1==e.checked&&i.listIds.push(e.id)}),this.allChecked=this.listIds.length==n,this.deleteSelectionButtonShow=this.listIds.length>0}},{key:"getZipcodeEntryList",value:function(){var e=this;this.loading=!0,this.zipcodeService.zipCodeEntryList(encodeURIComponent(this.selectedListName)).subscribe(function(t){e.zipcodeListArrayResultError=!1,e.isRerender?(e.rerender(),t&&(e.zipcodeListArrayResultError=!1,e.zipCodeDetailLists=t,e.isRerender=!0,e.dtTrigger.next())):(e.isRerender=!0,e.dtTrigger.next(),t&&(e.zipcodeListArrayResultError=!1,e.zipCodeDetailLists=t)),e.dtTrigger.next(),e.loading=!1,e.searchText&&e.searchName(e.searchText),t&&0==t.length&&0==e.zipCodeDetailLists.length&&(e.zipcodeListArrayResultError=!0,e.redirectToZipcodeUpload())},function(t){e.zipcodeListArrayResultError=!0,e.dtTrigger.next(),e.rerender(),e.loading=!1,e.errorShow=!0,e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"postZipcodeToList",value:function(){var e=this;this.closeDialogModal(),this.zipcodeService.addZipcodeEntryList({listName:this.selectedListName,zipcode:this.addZipcode,zipPlusFour:this.addZipPlusfour,hasService:this.hasServiceCheck?"Yes":"No"}).subscribe(function(t){t&&(e.addZipResponse=t,e.closeDialogModal(),e.getZipcodeEntryList())},function(t){e.closeDialogModal(),e.errorShow=!0,e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"deleteEntryZipcodes",value:function(){var e,t=this;this.closeDialogModal();var i=null===(e=this.deleteZipcodeZipPlusfour)||void 0===e?void 0:e.map(function(e){return e.id}).join();this.zipcodeService.deleteZipcodeEntryList(i).subscribe(function(e){e&&(t.deleteResponse=e,t.closeDialogModal(),t.getZipcodeEntryList()),t.allChecked=!1,t.deleteSelectionButtonShow=!1,t.listIds=[]},function(e){t.closeDialogModal(),t.allChecked=!1,t.listIds=[],t.deleteSelectionButtonShow=!1,t.errorShow=!0,t.errorMessage=e.error.errorDesc?e.error.errorDesc:t.errorHandler(e)})}},{key:"redirectToZipcodeUpload",value:function(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/zip-code-upload"])}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"setTableOptions",value:function(e){var t=this;this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.rerender()},200):this.loading=!1}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.zipCodeDtOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.zipCodeDtOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.zipCodeDtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.zipCodeDtOptions.language&&delete this.zipCodeDtOptions.language}},{key:"editZip",value:function(e){this.previousValue=e.zipcode,this.previousZipPlusFourValue=e.zipPlusFour,this.previousEntryChecked="Yes"==e.hasService,this.dialogService.open(this.editZipModal,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"}),this.entryZipcodeId=e.id,this.entryZipcode=e.zipcode,this.entryPlusFour=e.zipPlusFour,this.entryHasService="Yes"==e.hasService,this.saveButtonShow=!1,this.zipcodeNameError=!1,this.zipcodePlusError=!1}},{key:"closeAlert",value:function(){this.requiredZipcodeNameShow=!1,this.errorShow=!1}},{key:"updateZipcodeName",value:function(){var e=this;this.closeDialogModal(),this.zipcodeName||(this.requiredZipcodeNameShow=!0,this.requiredZipcodeName="ZipcodeName Required"),this.zipcodeService.modifyZipcode({listName:this.zipcodeUpdatedName,newListName:this.zipcodeName}).subscribe(function(t){t&&(e.updateZipNameResponse=t,e.selectedListName=e.zipcodeName,e.getZipcodeEntryList(),e.closeDialogModal())},function(t){e.closeDialogModal(),e.errorShow=!0,e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"deleteZipcodeName",value:function(){var e=this;this.closeDialogModal(),this.zipcodeService.removeZipcode(this.zipcodeName).subscribe(function(t){t&&(e.closeDialogModal(),e.redirectToZipcodeUpload())},function(t){e.closeDialogModal(),e.errorShow=!0,e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"updatedEntryZipcode",value:function(){var e=this;this.closeDialogModal(),this.zipcodeService.editZipcodeEntryList({id:this.entryZipcodeId,zipcode:this.entryZipcode,zipPlusFour:this.entryPlusFour,hasService:this.entryHasService?"Yes":"No"}).subscribe(function(t){t&&(e.updateEntryZipResponse=t,e.closeDialogModal(),e.getZipcodeEntryList())},function(t){e.closeDialogModal(),e.errorShow=!0,e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"closeDialogModal",value:function(){this.dialogService.dismissAll()}},{key:"onChangeEditZipcode",value:function(e){this.zipcodeNameError=!1,/^[0-9]+$/gm.test(e)&&5==e.length&&!this.zipcodePlusError&&e!=this.previousValue?this.saveButtonShow=!0:((this.entryZipcode&&!/^[0-9]+$/gm.test(e)&&!this.zipcodePlusError||this.entryZipcode.length<5&&this.entryZipcode.length)&&(this.zipcodeNameError=!0),this.saveButtonShow=!1),this.saveButtonShow=!(e==this.previousValue&&(this.entryPlusFour?this.entryPlusFour:null)==this.previousZipPlusFourValue||this.zipcodeNameError||this.zipcodePlusError)}},{key:"onChangeEditZipPlusFour",value:function(e){this.zipcodePlusError=!1,e.length&&/^[0-9]+$/gm.test(e)&&4==e.length&&this.entryZipcode&&!this.zipcodeNameError?this.saveButtonShow=!0:((!/^[0-9]+$/gm.test(e)&&e.length||this.entryPlusFour.length<4&&this.entryPlusFour.length)&&(this.zipcodePlusError=!0),this.saveButtonShow=!1),0==this.entryPlusFour.length&&null!=this.previousZipPlusFourValue&&(this.saveButtonShow=!0),(e||null)==this.previousZipPlusFourValue&&this.entryHasService==this.previousEntryChecked&&this.entryZipcode==this.previousValue||this.zipcodePlusError||this.zipcodeNameError?this.saveButtonShow=!1:/^[0-9]+$/gm.test(this.entryZipcode)?this.saveButtonShow=!0:(this.saveButtonShow=!1,this.zipcodeNameError=!0)}},{key:"onChangeZipcodeFilterName",value:function(e){0==e.length||e==this.zipcodeUpdatedName?(this.zipcodeNameError=!1,this.saveButtonShow=!1):/^[A-Za-z0-9 ]+$/gm.test(e)?(this.zipcodeNameError=!1,this.saveButtonShow=!0):(this.zipcodeNameError=!0,this.saveButtonShow=!1)}},{key:"onChangeAddZipcode",value:function(e){this.zipcodeNameError=!1,/^[0-9]+$/gm.test(e)&&5==e.length&&!this.zipcodePlusError?this.saveButtonShow=!0:((this.addZipcode&&!/^[0-9]+$/gm.test(e)&&!this.zipcodePlusError||this.addZipcode.length<5&&this.addZipcode.length)&&(this.zipcodeNameError=!0),this.saveButtonShow=!1)}},{key:"onChangeAddZipPlusFour",value:function(e){this.zipcodePlusError=!1,e.length&&/^[0-9]+$/gm.test(e)&&4==e.length&&this.addZipcode&&!this.zipcodeNameError?this.saveButtonShow=!0:((!/^[0-9]+$/gm.test(e)&&e.length||this.addZipPlusfour.length<4&&this.addZipPlusfour.length)&&(this.zipcodePlusError=!0),this.saveButtonShow=!1),0==this.addZipPlusfour.length&&(this.saveButtonShow=!0,this.onChangeAddZipcode(this.addZipcode))}},{key:"hasServiceChange",value:function(e){this.saveButtonShow=!(this.entryZipcode==this.previousValue&&(this.entryPlusFour?this.entryPlusFour:null)==this.previousZipPlusFourValue&&e==this.previousEntryChecked||this.zipcodeNameError||this.zipcodePlusError||5!=this.entryZipcode.length)}},{key:"errorHandler",value:function(e){return this.errorMessage=500==e.error.status?"Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?"An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status?"User Unauthorized":this.commonOrgService.pageErrorHandle(e),this.errorMessage}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}},{key:"traslateDate",value:function(e){return(e=new r.uU("en-US").transform(e,"d MMMM, y").split(" "))[1]=e[1].slice(0,-1),e[1]=this.language[e[1]],"".concat(e[0]," ").concat(e[1],", ").concat(e[2])}}]),e}()).\u0275fac=function(e){return new(e||R)(l.Y36(c.FF),l.Y36(d.F),l.Y36(u.F0),l.Y36(g.t6),l.Y36(p.Dx),l.Y36(h.v),l.Y36(f.s),l.Y36(m.i))},R.\u0275cmp=l.Xpm({type:R,selectors:[["app-zip-code-entrylist"]],viewQuery:function(e,t){var i;1&e&&(l.Gf(n.G,5),l.Gf(b,5),l.Gf(A,5),l.Gf(x,5),l.Gf(T,5),l.Gf(_,5)),2&e&&(l.iGM(i=l.CRH())&&(t.dtElement=i.first),l.iGM(i=l.CRH())&&(t.deleteZipcodeFilterList=i.first),l.iGM(i=l.CRH())&&(t.editZipcodeFilterName=i.first),l.iGM(i=l.CRH())&&(t.addZipModal=i.first),l.iGM(i=l.CRH())&&(t.delteZipcodes=i.first),l.iGM(i=l.CRH())&&(t.editZipModal=i.first))},decls:57,vars:22,consts:[[1,"position-relative"],["class","no-data",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],[1,"container"],[1,"row"],[1,"w-100","d-flex","flex-wrap","align-items-center","border-bottom-gray","pb-3"],[1,"ccl-admin-title","admin-title-grow","text-break"],[1,"btn-link","primary","mr-3",3,"click"],[1,"btn-dft","btn-default","mr-3",3,"click"],[1,"btn-default","primary","mr-4",3,"click"],["type","button",1,"close",3,"click"],[1,"table-filter","d-flex","flex-wrap","justify-content-between","align-items-center","w-100"],[1,"ccl-form"],[1,"d-flex","flex-wrap"],[1,"search-input","pr-4"],["type","text",3,"placeholder","ngModel","ngModelChange","input"],["class","pos-abs-right",3,"click",4,"ngIf"],["class","del-btn",4,"ngIf"],[1,"overflow-auto","w-100","mt-3"],["datatable","","id","example",1,"zip-code-table","table",3,"dtOptions","dtTrigger"],[1,"w-10","sorting_disabled","max-w-36"],[1,"form-check"],["type","checkbox",1,"checkbox",3,"checked","disabled","change"],[1,"w-20"],[1,"w-30"],[1,"w-10","th-del-action"],[3,"ngClass"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],["addZipModal",""],["delteZipcodes",""],["editZipcodeFilterName",""],["deleteZipcodeFilterList",""],["editZipModal",""],[1,"no-data"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex",3,"innerHtml"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"del-btn"],[1,"btn-default","primary",3,"click"],[1,"fa","fa-trash-o","mr-1"],[1,"max-w-36"],["type","checkbox",3,"ngModel","change","ngModelChange"],[1,"action-icons-row","text-center"],[1,"primary","cursor-pointer",3,"click"],[1,"fa","fa-pencil",3,"title"],[1,"fa","fa-trash-o",3,"title"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"px-4"],["id","add-zipcoe-modal-title",1,"ccl-admin-title","mb-4"],[1,"d-flex","w-100"],[1,"ccl-form","mb-2","min-110px","mr-2"],["type","text","pattern","/^[0-9]+$/gm","maxlength","5","min","0","id","add-zipcode","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[1,"ccl-form","mb-2","min-90px"],["type","text","pattern","/^[0-9]+$/gm","maxlength","4","min","0","id","add-zipplusfour","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[1,"mb-2","w-100"],[1,"d-block"],[1,"form-group","d-inline-flex","pl-20"],["type","checkbox","id","hasServiceCheck2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","hasServiceCheck2",1,"form-check-label"],[4,"ngIf"],[1,"mt-3","mb-3"],[1,"btn-default","primary","mr-3",3,"disabled","click"],[1,"btn-link","primary",3,"click"],[1,"mandatory-msg","mb-0"],[1,"zipcode-alert"],[1,"d-flex"],[1,"warn-icon-min"],["src","../../../assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title"],[1,"my-3","pl-4","pb-4"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-dft","btn-default",3,"click"],["id","edit-zip-modal-title",1,"ccl-admin-title","mb-4"],[1,"ccl-form","mb-2"],["type","text","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[1,"mt-5","mb-3"],[1,"ccl-Secondary-title","mb-3","text-break"],["type","text","pattern","/^[0-9]+$/gm","maxlength","5","min","0","id","entry-zipcode","trimSpace","",3,"ngModel","ngModelChange","input","blur"],["type","text","pattern","/^[0-9]+$/gm","maxlength","4","min","0","id","entry-zipplusfour","trimSpace","",3,"ngModel","ngModelChange","input","blur"],["type","checkbox","id","hasServiceCheck2",1,"form-check-input",3,"ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.YNc(1,C,4,1,"div",1),l.YNc(2,y,6,1,"div",2),l.YNc(3,k,6,1,"div",2),l.TgZ(4,"section"),l.TgZ(5,"div",3),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"div",6),l._uU(9),l.qZA(),l.TgZ(10,"button",7),l.NdJ("click",function(){return t.delModalOpen(t.selectedListName)}),l._uU(11),l.qZA(),l.TgZ(12,"button",8),l.NdJ("click",function(){return t.modalOpen(t.selectedListName)}),l._uU(13),l.qZA(),l.TgZ(14,"button",9),l.NdJ("click",function(){return t.addZipcodeToList()}),l._uU(15),l.qZA(),l.TgZ(16,"button",10),l.NdJ("click",function(){return t.redirectToZipcodeUpload()}),l._UZ(17,"span"),l.qZA(),l.qZA(),l.TgZ(18,"div",11),l.TgZ(19,"div",12),l.TgZ(20,"div",13),l.TgZ(21,"div",14),l.TgZ(22,"input",15),l.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)}),l.qZA(),l.YNc(23,q,2,0,"span",16),l.qZA(),l.qZA(),l.qZA(),l.YNc(24,w,4,1,"div",17),l.qZA(),l.TgZ(25,"div",18),l.TgZ(26,"table",19),l.TgZ(27,"thead"),l.TgZ(28,"tr"),l.TgZ(29,"th",20),l.TgZ(30,"div",21),l.TgZ(31,"input",22),l.NdJ("change",function(e){return t.selectAll(e.target.checked)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(32,"th",23),l._uU(33),l.qZA(),l.TgZ(34,"th",24),l._uU(35,"+4"),l.qZA(),l.TgZ(36,"th",23),l._uU(37),l.qZA(),l.TgZ(38,"th",23),l._uU(39),l.qZA(),l._UZ(40,"th",25),l.qZA(),l.qZA(),l.TgZ(41,"tbody",26),l.YNc(42,O,18,7,"tr",27),l.qZA(),l.TgZ(43,"tbody",26),l.TgZ(44,"tr"),l.TgZ(45,"td",28),l._uU(46),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(47,U,29,12,"ng-template",null,29,l.W1O),l.YNc(49,N,16,4,"ng-template",null,30,l.W1O),l.YNc(51,E,16,7,"ng-template",null,31,l.W1O),l.YNc(53,F,14,4,"ng-template",null,32,l.W1O),l.YNc(55,J,29,12,"ng-template",null,33,l.W1O)),2&e&&(l.xp6(1),l.Q6J("ngIf",t.loading),l.xp6(1),l.Q6J("ngIf",t.errorShow),l.xp6(1),l.Q6J("ngIf",t.requiredZipcodeNameShow),l.xp6(6),l.hij(" ",t.selectedListName," "),l.xp6(2),l.hij(" ",t.language["Delete List"]," "),l.xp6(2),l.hij(" ",t.language["Edit Name"]," "),l.xp6(2),l.hij(" ",t.language["Add ZIP"]," "),l.xp6(7),l.s9C("placeholder",t.language.Search),l.Q6J("ngModel",t.searchText),l.xp6(1),l.Q6J("ngIf",t.searchText),l.xp6(1),l.Q6J("ngIf",t.deleteSelectionButtonShow),l.xp6(2),l.Q6J("dtOptions",t.zipCodeDtOptions)("dtTrigger",t.dtTrigger),l.xp6(5),l.Q6J("checked",t.allChecked)("disabled",0==(null==t.zipCodeDetailLists?null:t.zipCodeDetailLists.length)||0==(null==t.newArray?null:t.newArray.length)),l.xp6(2),l.Oqu(t.language["ZIP Code"]),l.xp6(4),l.Oqu(t.language["Date Added"]),l.xp6(2),l.Oqu(t.language.SERVICE),l.xp6(2),l.Q6J("ngClass",t.zipcodeListArrayResultError?"d-none":"table-row-group"),l.xp6(1),l.Q6J("ngForOf",t.zipCodeDetailLists),l.xp6(1),l.Q6J("ngClass",t.zipcodeListArrayResultError?"table-row-group":"d-none"),l.xp6(3),l.Oqu(t.language.nodata))},directives:[r.O5,v.Fj,v.JJ,v.On,n.G,r.mk,r.sg,v.Wl,v.c5,v.nD,Z.f],styles:['.file-browse-btn[_ngcontent-%COMP%]{position:relative;cursor:pointer}.file-browse-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;font-size:0;opacity:0;cursor:pointer}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{min-width:264px;position:relative}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.del-btn[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.max-w-36[_ngcontent-%COMP%]{max-width:36px}.table-row-selected[_ngcontent-%COMP%]{background:#EDF5FF!important}.checkbox-intermediate[_ngcontent-%COMP%]{position:relative}.checkbox-intermediate[_ngcontent-%COMP%]:before{content:"_";position:absolute;left:0;width:100%;height:100%;color:#fff;z-index:1;text-align:center;font-weight:bold;top:-10px}.checkbox-intermediate[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;background:#0279ff;border-radius:3px;left:0;top:0}.th-del-action[_ngcontent-%COMP%]{min-width:100px;max-width:100px}.action-icons-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;min-width:38px;display:inline-block}  .admin-custom-delete-modal .modal-dialog{max-width:45.33%!important}  .admin-custom-delete-modal .modal-content{background:#FFF9F5!important}  .admin-default-modal .modal-dialog{max-width:41%!important}  .admin-modal-upload .modal-dialog{max-width:57%!important}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.zipcode-alert[_ngcontent-%COMP%]{padding:0 20px 15px}.zipcode-alert[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.admin-title-grow[_ngcontent-%COMP%]{flex-grow:1}.border-bottom-gray[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.w-10[_ngcontent-%COMP%]{width:10%!important}.w-20[_ngcontent-%COMP%]{width:20%!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.w-50[_ngcontent-%COMP%]{width:50%!important}.w-30[_ngcontent-%COMP%]{width:30%!important}.min-110px[_ngcontent-%COMP%]{width:110px}.min-90px[_ngcontent-%COMP%]{width:90px}.ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#F8F8FA}.table-uplod-csv[_ngcontent-%COMP%]{table-layout:fixed}.table-uplod-csv[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #EBEAEF;padding-top:7px;padding-bottom:7px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}.pl-20[_ngcontent-%COMP%]{padding-left:20px}']}),R)},75495:function(e,t,i){i.d(t,{f:function(){return F}});var n=i(23771),s=i(79765),r=i(84487),l=i(38583),c=i(37716),d=i(7450),u=i(12664),g=i(82823),p=i(39895),h=i(89097),f=i(49342),m=i(39075),v=i(20904),Z=i(3679),b=i(74062),A=["editZipcodeFilterName"],x=["deleteZipcodeFilterList"],T=["messageDialog"];function _(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",29),c.TgZ(1,"span",30),c._UZ(2,"img",31),c.qZA(),c.TgZ(3,"span"),c._uU(4),c.qZA(),c.TgZ(5,"button",32),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeAlert()}),c._UZ(6,"span"),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Oqu(n.errorMessage)}}function C(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",33),c.TgZ(1,"span",34),c._UZ(2,"img",35),c.qZA(),c.TgZ(3,"span"),c._uU(4),c.qZA(),c.TgZ(5,"button",32),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeAlert()}),c._UZ(6,"span"),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Oqu(n.successMessage)}}function y(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",36),c.TgZ(1,"button",37),c.NdJ("click",function(){return c.CHM(i).$implicit.dismiss("Cross click")}),c._UZ(2,"span"),c.qZA(),c.qZA(),c.TgZ(3,"div",38),c.TgZ(4,"div",39),c._uU(5),c.qZA(),c.TgZ(6,"div"),c.TgZ(7,"span"),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"div",40),c.TgZ(10,"button",41),c.NdJ("click",function(){return c.CHM(i).$implicit.close("Close click")}),c._uU(11),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.hij(" ",n.language["Invalid file format"]," "),c.xp6(3),c.Oqu(n.modalMessage),c.xp6(3),c.Oqu(n.language.Okay)}}function k(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"span",42),c.NdJ("click",function(){return c.CHM(i),c.oxw().clearText()}),c._UZ(1,"img",43),c.qZA()}}function q(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"a",44),c.NdJ("click",function(){var e=c.CHM(i).$implicit;return c.oxw().zipcodeFilter(e.listName)}),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.TgZ(6,"td"),c.TgZ(7,"div",45),c.TgZ(8,"a",46),c.NdJ("click",function(){var e=c.CHM(i).$implicit;return c.oxw().modalOpen(e.listName)}),c._UZ(9,"i",47),c.qZA(),c.TgZ(10,"a",46),c.NdJ("click",function(){var e=c.CHM(i).$implicit;return c.oxw().delModalOpen(e.listName)}),c._UZ(11,"i",48),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw();c.xp6(3),c.Oqu(n.listName),c.xp6(2),c.Oqu(a.traslateDate(n.createdTime)),c.xp6(4),c.s9C("title",a.language.edit),c.xp6(2),c.s9C("title",a.language.delete)}}function w(e,t){if(1&e&&(c.TgZ(0,"div",49),c.TgZ(1,"div",50),c.TgZ(2,"span",51),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw();c.xp6(3),c.Oqu(i.language.Loading)}}function O(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"small",59),c._uU(2),c.qZA(),c.qZA()),2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(i.language["File name must only have alphanumeric characters and spaces"])}}function S(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",36),c.TgZ(1,"button",37),c.NdJ("click",function(){return c.CHM(i).$implicit.dismiss("Cross click")}),c._UZ(2,"span"),c.qZA(),c.qZA(),c.TgZ(3,"div",38),c.TgZ(4,"div",52),c._uU(5),c.qZA(),c.TgZ(6,"div",53),c.TgZ(7,"label"),c._uU(8),c.qZA(),c.TgZ(9,"input",54),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().zipcodeName=e})("input",function(e){return c.CHM(i),c.oxw().onChangeZipcodeFilterName(e.target.value)})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("zipcodeName",e.zipcodeName)}),c.qZA(),c.qZA(),c.YNc(10,O,3,1,"div",55),c.TgZ(11,"div",56),c.TgZ(12,"button",57),c.NdJ("click",function(){return c.CHM(i),c.oxw().updateZipcodeName()}),c._uU(13),c.qZA(),c.TgZ(14,"button",58),c.NdJ("click",function(){return c.CHM(i).$implicit.close("Close click")}),c._uU(15),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.Oqu(n.language["ZIP Code Filter Name"]),c.xp6(3),c.Oqu(n.language.Name),c.xp6(1),c.Q6J("ngModel",n.zipcodeName),c.xp6(1),c.Q6J("ngIf",n.zipcodeNameError),c.xp6(2),c.Q6J("disabled",!n.saveButtonShow),c.xp6(1),c.Oqu(n.language["Save Changes"]),c.xp6(2),c.Oqu(n.language.Cancel)}}function M(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",36),c.TgZ(1,"button",37),c.NdJ("click",function(){return c.CHM(i).$implicit.dismiss("Cross click")}),c._UZ(2,"span"),c.qZA(),c.qZA(),c.TgZ(3,"div",60),c.TgZ(4,"div",61),c.TgZ(5,"div",62),c._UZ(6,"img",63),c.qZA(),c.TgZ(7,"div"),c.TgZ(8,"div",64),c._uU(9),c.qZA(),c.TgZ(10,"button",65),c.NdJ("click",function(){return c.CHM(i),c.oxw().deleteZipcodeName()}),c._uU(11),c.qZA(),c.TgZ(12,"button",66),c.NdJ("click",function(){return c.CHM(i).$implicit.close("Close click")}),c._uU(13),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(9),c.AsE("",n.language["Are you sure you want to delete"]," ",n.zipcodeName,"?"),c.xp6(2),c.Oqu(n.language.Delete),c.xp6(2),c.Oqu(n.language.Cancel)}}function U(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",36),c.TgZ(1,"button",37),c.NdJ("click",function(){return c.CHM(i).$implicit.dismiss("Cross click")}),c._UZ(2,"span"),c.qZA(),c.qZA(),c.TgZ(3,"div",38),c.TgZ(4,"div",67),c._uU(5),c.qZA(),c.TgZ(6,"p"),c._uU(7),c.qZA(),c.TgZ(8,"div",5),c.TgZ(9,"div",68),c.TgZ(10,"div",69),c._uU(11),c.qZA(),c.TgZ(12,"table",70),c.TgZ(13,"tbody"),c.TgZ(14,"tr"),c.TgZ(15,"td"),c._uU(16,"32137"),c.qZA(),c._UZ(17,"td"),c._UZ(18,"td"),c.qZA(),c.TgZ(19,"tr"),c.TgZ(20,"td"),c._uU(21,"32007"),c.qZA(),c._UZ(22,"td"),c._UZ(23,"td"),c.qZA(),c.TgZ(24,"tr"),c.TgZ(25,"td"),c._uU(26,"32127"),c.qZA(),c._UZ(27,"td"),c._UZ(28,"td"),c.qZA(),c.TgZ(29,"tr"),c.TgZ(30,"td"),c._uU(31,"32140"),c.qZA(),c._UZ(32,"td"),c._UZ(33,"td"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(34,"div",68),c.TgZ(35,"div",69),c._uU(36),c.qZA(),c.TgZ(37,"table",71),c.TgZ(38,"tbody"),c.TgZ(39,"tr"),c.TgZ(40,"td"),c._uU(41,"32137"),c.qZA(),c.TgZ(42,"td"),c._uU(43,"7563"),c.qZA(),c._UZ(44,"td"),c.qZA(),c.TgZ(45,"tr"),c.TgZ(46,"td"),c._uU(47,"32007"),c.qZA(),c.TgZ(48,"td"),c._uU(49,"7160"),c.qZA(),c._UZ(50,"td"),c.qZA(),c.TgZ(51,"tr"),c.TgZ(52,"td"),c._uU(53,"32127"),c.qZA(),c.TgZ(54,"td"),c._uU(55,"0112"),c.qZA(),c._UZ(56,"td"),c.qZA(),c.TgZ(57,"tr"),c.TgZ(58,"td"),c._uU(59,"32140"),c.qZA(),c.TgZ(60,"td"),c._uU(61,"9118"),c.qZA(),c._UZ(62,"td"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(63,"div",5),c.TgZ(64,"div",68),c.TgZ(65,"div",69),c._uU(66),c.qZA(),c.TgZ(67,"table",71),c.TgZ(68,"tbody"),c.TgZ(69,"tr"),c.TgZ(70,"td"),c._uU(71,"32137"),c.qZA(),c._UZ(72,"td"),c.TgZ(73,"td"),c._uU(74),c.qZA(),c.qZA(),c.TgZ(75,"tr"),c.TgZ(76,"td"),c._uU(77,"32007"),c.qZA(),c._UZ(78,"td"),c.TgZ(79,"td"),c._uU(80),c.qZA(),c.qZA(),c.TgZ(81,"tr"),c.TgZ(82,"td"),c._uU(83,"32127"),c.qZA(),c._UZ(84,"td"),c._UZ(85,"td"),c.qZA(),c.TgZ(86,"tr"),c.TgZ(87,"td"),c._uU(88,"32140"),c.qZA(),c._UZ(89,"td"),c.TgZ(90,"td"),c._uU(91),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(92,"div",68),c.TgZ(93,"div",69),c._uU(94),c.qZA(),c.TgZ(95,"table",71),c.TgZ(96,"tbody"),c.TgZ(97,"tr"),c.TgZ(98,"td"),c._uU(99,"32137"),c.qZA(),c.TgZ(100,"td"),c._uU(101,"7563"),c.qZA(),c.TgZ(102,"td"),c._uU(103),c.qZA(),c.qZA(),c.TgZ(104,"tr"),c.TgZ(105,"td"),c._uU(106,"32007"),c.qZA(),c.TgZ(107,"td"),c._uU(108,"7160"),c.qZA(),c.TgZ(109,"td"),c._uU(110),c.qZA(),c.qZA(),c.TgZ(111,"tr"),c.TgZ(112,"td"),c._uU(113,"32127"),c.qZA(),c._UZ(114,"td"),c._UZ(115,"td"),c.qZA(),c.TgZ(116,"tr"),c.TgZ(117,"td"),c._uU(118,"32140"),c.qZA(),c.TgZ(119,"td"),c._uU(120,"9118"),c.qZA(),c.TgZ(121,"td"),c._uU(122),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(123,"div",56),c.TgZ(124,"button",72),c._uU(125),c.TgZ(126,"input",73),c.NdJ("change",function(e){c.CHM(i);var t=c.oxw(),n=c.MAs(47);return t.fileSelected(e,n)}),c.qZA(),c.qZA(),c.TgZ(127,"button",58),c.NdJ("click",function(){return c.CHM(i).$implicit.close("Close click")}),c._uU(128),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.Oqu(n.language["Upload CSV"]),c.xp6(2),c.Oqu(n.language["Please use one of the following formats exactly as they are shown below:"]),c.xp6(4),c.Oqu(n.language["ZIP Code Example"]),c.xp6(25),c.Oqu(n.language["ZIP+4 Example"]),c.xp6(30),c.Oqu(n.language["ZIP Code & Service Example"]),c.xp6(8),c.Oqu(n.language.Yes),c.xp6(6),c.Oqu(n.language.No),c.xp6(11),c.Oqu(n.language.No),c.xp6(3),c.Oqu(n.language["ZIP+4 & Service Example"]),c.xp6(9),c.Oqu(n.language.Yes),c.xp6(7),c.Oqu(n.language.No),c.xp6(12),c.Oqu(n.language.No),c.xp6(3),c.hij("",n.language.Browse," "),c.xp6(1),c.s9C("title",n.language["no file chosen"]),c.xp6(2),c.Oqu(n.language.Cancel)}}function D(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"button",65),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).saveZipPlusCsv()}),c._uU(1),c.qZA()}if(2&e){var n=c.oxw(2);c.xp6(1),c.Oqu(n.language.Save)}}function N(e,t){if(1&e&&(c.TgZ(0,"button",77),c._uU(1),c.qZA()),2&e){var i=c.oxw(2);c.xp6(1),c.Oqu(i.language.Save)}}function I(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",36),c.TgZ(1,"button",37),c.NdJ("click",function(){return c.CHM(i).$implicit.dismiss("Cross click")}),c._UZ(2,"span"),c.qZA(),c.qZA(),c.TgZ(3,"div",38),c.TgZ(4,"div",52),c._uU(5),c.qZA(),c.TgZ(6,"label"),c._uU(7),c.qZA(),c.TgZ(8,"div",53),c.TgZ(9,"input",74),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().listName=e})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("listName",e.listName)}),c.qZA(),c.qZA(),c.TgZ(10,"div",56),c.YNc(11,D,2,1,"button",75),c.YNc(12,N,2,1,"button",76),c.TgZ(13,"button",58),c.NdJ("click",function(){return c.CHM(i).$implicit.close("Close click")}),c._uU(14),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.Oqu(n.language["ZIP Code Filter Name"]),c.xp6(2),c.Oqu(n.language.Name),c.xp6(2),c.s9C("placeholder",n.language.Name),c.Q6J("ngModel",n.listName),c.xp6(2),c.Q6J("ngIf",n.listName.trim()),c.xp6(1),c.Q6J("ngIf",!n.listName.trim()),c.xp6(2),c.Oqu(n.language.Cancel)}}var E,F=((E=function(){function e(t,i,n,o,r,l,c,d){a(this,e),this.translateService=t,this.dialogService=i,this.zipcodeService=n,this.router=o,this.sso=r,this.commonOrgService=l,this.titleService=c,this.common=d,this.loading=!1,this.errorMessage="",this.successMessage="",this.modalMessage="",this.saveButtonShow=!1,this.zipcodeArrayResultError=!1,this.isRerender=!1,this.listName="",this.zipData={list_name:"",zip_data:[]},this.zipCodeFilterOptions={},this.dtTrigger=new s.xQ,this.zipcodeNameError=!1,this.MODULE=this.sso.getRedirectModule(this.router.url),this.commonOrgService.currentPageAdder("zip-code-upload")}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.zipCodeFilterOptions={pagingType:"full_numbers",processing:!0,pageLength:10,lengthChange:!1,ordering:!0,searching:!0,dom:"tipr",retrieve:!0,columnDefs:[{targets:[1],orderable:!1},{targets:[-1],orderable:!1}]},this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(t){e.language=t,e.setTableOptions("language"),e.getZipcodeListNames(),e.titleService.setTitle("".concat(e.language["ZIP Code File Upload"]," - ").concat("systemAdministration"===e.MODULE?e.language["System Administration"]:e.language.administration," - ").concat(e.language["Calix Cloud"]))}),this.titleService.setTitle("".concat(this.language["ZIP Code File Upload"]," - ").concat("systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.getZipcodeListNames(),this.tableLanguageOptions()}},{key:"searchName",value:function(e){this.dtElement.dtInstance.then(function(t){t.search(e).draw()})}},{key:"clearText",value:function(){this.searchText="",this.searchName(this.searchText)}},{key:"getZipcodeListNames",value:function(){var e=this;this.loading=!0,this.zipcodeService.zipCodeListNames().subscribe(function(t){e.zipcodeArrayResultError=!1,e.isRerender?(e.rerender(),t&&(e.zipcodeArrayResultError=!1,e.zipCodeFilterList=t,e.isRerender=!0,e.dtTrigger.next())):(e.isRerender=!0,e.dtTrigger.next(),t&&(e.zipcodeArrayResultError=!1,e.zipCodeFilterList=t)),e.dtTrigger.next(),e.loading=!1,e.searchText&&e.searchName(e.searchText),t&&0==t.length&&(e.zipcodeArrayResultError=!0)},function(t){e.zipcodeArrayResultError=!0,e.dtTrigger.next(),e.rerender(),e.loading=!1,e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"fileSelected",value:function(e,t){var i=this,n=e.target.files[0];if(this.closeAlert(),this.resetUploadCsv(),this.zipData={list_name:"",zip_data:[]},this.listName="",!n||![".csv",".xlsx",".txt"].some(function(e){return n.name.endsWith(e)}))return this.modalMessage=this.language["Please upload a file with valid format (.csv, .xlsx, .txt)"],void this.messageModalOpen();var a=new FileReader;n.name.endsWith(".xlsx")?a.readAsArrayBuffer(n):a.readAsText(n),a.onload=function(){var e=a.result,s=[];if(n.name.endsWith(".xlsx")){for(var o=new Uint8Array(e),l=new Array,c=0;c!=o.length;++c)l[c]=String.fromCharCode(o[c]);var d=l.join(""),u=r.read(d,{type:"binary"});s=r.utils.sheet_to_csv(u.Sheets[u.SheetNames[0]]).split(/\r\n|\n/).filter(function(e){return e})}else s=e.split(/\r\n|\n/).filter(function(e){return e});if(s.some(function(e){return e.split(",").filter(function(e){return e}).length>3}))return i.modalMessage=i.language["Please upload a file with valid format (contains more than 3 columns)"],void i.messageModalOpen();s.forEach(function(e){var t=e.split(",").filter(function(e){return e});if(t.length>2){var n=t[0].trim(),a=t[1].trim(),s=t[2].trim();"S\ufffd"==s&&(s=s.replace("\ufffd","\xed")),("Oui"==s||"Ja"==s||"S\xed"==s)&&(s="Yes"),("Non"==s||"Nein"==s||"No"==s)&&(s="No"),i.zipData.zip_data.push({zipcode:n,zipPlusFour:a,hasService:s})}else if(2===t.length){var o=t[0].trim(),r="",l="";/^\d+$/.test(t[1].trim())?r=t[1].trim():l=t[1].trim(),"S\ufffd"==l&&(l=l.replace("\ufffd","\xed")),("Oui"==l||"Ja"==l||"S\xed"==l)&&(l="Yes"),("Non"==l||"Nein"==l||"No"==l)&&(l="No"),i.zipData.zip_data.push({zipcode:o,zipPlusFour:r,hasService:l})}else if(1===t.length){var c=t[0].trim();i.zipData.zip_data.push({zipcode:c,zipPlusFour:"",hasService:""})}else i.zipData.zip_data.push({zipcode:"",zipPlusFour:"",hasService:""})}),i.listName=n.name.replace(/\.[^/.]+$/,""),i.dialogService.dismissAll(),i.uploadModalOpen(t)},e.target.value=""}},{key:"resetUploadCsv",value:function(){this.listName="",this.zipData={list_name:"",zip_data:[]}}},{key:"messageModalOpen",value:function(){this.dialogService.dismissAll(),this.dialogService.open(this.messageDialog,{backdrop:"static",keyboard:!1,windowClass:"message-modal"})}},{key:"saveZipPlusCsv",value:function(){var e=this;this.closeAlert(),this.zipData.list_name=this.listName.trim(),this.zipcodeService.saveZipPlusFile(this.zipData).subscribe(function(t){e.zipUploadCSVResponse=t,e.successMessage=e.language["CSV Uploaded Successfully"],e.errorMessage="",setTimeout(function(){return e.zipcodeFilter(e.zipData.list_name)},600)},function(t){e.successMessage="",e.errorMessage=t.error.errorDesc}),setTimeout(function(){return e.dialogService.dismissAll()},500)}},{key:"modalOpen",value:function(e){this.closeAlert(),this.dialogService.open(this.editZipcodeFilterName,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-default-modal"}),this.zipcodeName=e,this.zipcodeUpdatedName=e,this.saveButtonShow=!1,this.zipcodeNameError=!1}},{key:"uploadModalOpen",value:function(e){this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-default-modal"})}},{key:"delModalOpen",value:function(e){this.closeAlert(),this.dialogService.open(this.deleteZipcodeFilterList,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-custom-delete-modal"}),this.zipcodeName=e}},{key:"uploadModal",value:function(e){this.closeAlert(),this.dialogService.open(e,{backdrop:"static",keyboard:!1,centered:!0,windowClass:"admin-modal-upload"})}},{key:"updateZipcodeName",value:function(){var e=this;this.closeDialogModal(),this.zipcodeName||(this.errorMessage="ZipcodeName Required"),this.zipcodeService.modifyZipcode({listName:this.zipcodeUpdatedName,newListName:this.zipcodeName}).subscribe(function(t){t&&(e.updateResponse=t,e.closeDialogModal(),e.selectedListName=e.zipcodeName,e.getZipcodeListNames())},function(t){e.closeDialogModal(),e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"deleteZipcodeName",value:function(){var e=this;this.closeDialogModal(),this.zipcodeService.removeZipcode(this.zipcodeName).subscribe(function(t){t&&(e.deletResponse=t,e.closeDialogModal(),e.redirectToZipcodeUpload(),e.getZipcodeListNames())},function(t){e.closeDialogModal(),e.errorMessage=t.error.errorDesc?t.error.errorDesc:e.errorHandler(t)})}},{key:"zipcodeFilter",value:function(e){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/zip-code-entrylist"],{state:{fileName:e}})}},{key:"redirectToZipcodeUpload",value:function(){this.router.navigate([("systemAdministration"===this.MODULE?"systemAdministration":"organization-admin")+"/zip-code-upload"])}},{key:"closeAlert",value:function(){this.errorMessage="",this.successMessage="",this.modalMessage=""}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"ngOnDestroy",value:function(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtTrigger&&this.dtTrigger.unsubscribe()}},{key:"setTableOptions",value:function(e){var t=this;this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.rerender()},200):this.loading=!1}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?this.zipCodeFilterOptions.language=this.translateService.fr:"es"==this.language.fileLanguage?this.zipCodeFilterOptions.language=this.translateService.es:"de_DE"==this.language.fileLanguage?this.zipCodeFilterOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&delete this.zipCodeFilterOptions.language}},{key:"closeDialogModal",value:function(){this.dialogService.dismissAll()}},{key:"onChangeZipcodeFilterName",value:function(e){0==e.length||e==this.zipcodeUpdatedName?(this.zipcodeNameError=!1,this.saveButtonShow=!1):/^[A-Za-z0-9 ]+$/gm.test(e)?(this.zipcodeNameError=!1,this.saveButtonShow=!0):(this.zipcodeNameError=!0,this.saveButtonShow=!1)}},{key:"errorHandler",value:function(e){return this.errorMessage=500==e.error.status?"Internal Server Error":"Unknown Error"==e.error.statusText&&0==e.error.status?"An unknown error has occurred. Refresh the page to try again":e.error.status&&401==e.error.status?"User Unauthorized":this.commonOrgService.pageErrorHandle(e),this.errorMessage}},{key:"validateFileName",value:function(e){this.listName=e.replace(/[^a-zA-Z0-9 ]+/g,"")}},{key:"isValidZipCode",value:function(e){return/^\d{5}$/g.test(e)}},{key:"isValidZipPlus",value:function(e){return/^\d{4}$/g.test(e)}},{key:"isValidService",value:function(e){return/^(?:Yes|No)$/.test(e)}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}},{key:"traslateDate",value:function(e){return(e=new l.uU("en-US").transform(e,"d MMMM, y").split(" "))[1]=e[1].slice(0,-1),e[1]=this.language[e[1]],"".concat(e[0]," ").concat(e[1],", ").concat(e[2])}}]),e}()).\u0275fac=function(e){return new(e||E)(c.Y36(d.s),c.Y36(u.FF),c.Y36(g.F),c.Y36(p.F0),c.Y36(h.t6),c.Y36(f.v),c.Y36(m.Dx),c.Y36(v.i))},E.\u0275cmp=c.Xpm({type:E,selectors:[["app-zip-code-upload"]],viewQuery:function(e,t){var i;1&e&&(c.Gf(n.G,5),c.Gf(A,5),c.Gf(x,5),c.Gf(T,5)),2&e&&(c.iGM(i=c.CRH())&&(t.dtElement=i.first),c.iGM(i=c.CRH())&&(t.editZipcodeFilterName=i.first),c.iGM(i=c.CRH())&&(t.deleteZipcodeFilterList=i.first),c.iGM(i=c.CRH())&&(t.messageDialog=i.first))},decls:48,vars:18,consts:[[1,"container","position-relative"],["class","w-100 alert alert-danger fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["messageDialog",""],[1,"container"],[1,"row"],[1,"w-100"],[1,"ccl-admin-title"],[1,"btn-default","primary","mt-1","mb-3",3,"click"],[1,"row",3,"hidden"],[1,"table-filter","d-flex","flex-wrap","justify-content-between","align-items-center","w-100"],[1,"ccl-form"],[1,"d-flex","flex-wrap"],[1,"search-input","pr-4"],["type","text","trimSpace","",3,"placeholder","ngModel","ngModelChange","input","blur"],["class","pos-abs-right",3,"click",4,"ngIf"],[1,"overflow-auto","w-100","my-3"],["datatable","",1,"zip-code-table","table",3,"dtOptions","dtTrigger"],[1,"w-50"],[1,"w-30","sorting_disabled"],[1,"th-del-action","w-20"],[3,"ngClass"],[4,"ngFor","ngForOf"],["colspan","9",1,"text-center"],["class","center-chart flex mt-60",4,"ngIf"],["editZipcodeFilterName",""],["deleteZipcodeFilterList",""],["zipCodeUploadModal",""],["uploadZipcodeFilterName",""],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"w-100","py-3"],["type","button","aria-label","Close",1,"close","mt-1",3,"click"],[1,"px-4"],[1,"ccl-admin-title","mb-4"],[1,"mt-3","mb-3"],[1,"btn-default","primary","float-right",3,"click"],[1,"pos-abs-right",3,"click"],["src","../../../../../assets/img/close-icon.svg"],[1,"primary","cursor-pointer","text-decoration-none","text-break",3,"click"],[1,"action-icons-row","text-center"],[1,"primary","cursor-pointer",3,"click"],[1,"fa","fa-pencil",3,"title"],[1,"fa","fa-trash-o",3,"title"],[1,"center-chart","flex","mt-60"],[1,"spinner-border","text-primary","mt-60"],[1,"sr-only"],["id","edit-zip-modal-title",1,"ccl-admin-title","mb-4"],[1,"ccl-form","mb-2"],["type","text","trimSpace","",3,"ngModel","ngModelChange","input","blur"],[4,"ngIf"],[1,"mt-5","mb-3"],[1,"btn-default","primary","mr-3",3,"disabled","click"],[1,"btn-link","primary",3,"click"],[1,"mandatory-msg"],[1,"zipcode-alert"],[1,"d-flex"],[1,"warn-icon-min"],["src","/assets/img/warning-icon-36px.svg"],[1,"ccl-Secondary-title","mb-3","text-break"],[1,"btn-default","primary","mr-3",3,"click"],[1,"btn-dft","btn-default",3,"click"],["id","upload-csv-modal-title",1,"ccl-admin-title","mb-2"],[1,"col-6"],[1,"mb-1"],["id","Upload-CSV-ZIPCode",1,"table","table-uplod-csv"],["id","Upload-CSV-ZIP",1,"table","table-uplod-csv"],["id","Browse-Zipcode-File",1,"btn-default","primary","file-browse-btn","mr-3"],["type","file","accept",".csv,.xlsx,.txt",3,"title","change"],["type","text","minlength","1","maxlength","500","trimSpace","",3,"placeholder","ngModel","ngModelChange","blur"],["class","btn-default primary mr-3",3,"click",4,"ngIf"],["class","btn-default primary mr-3","disabled","",4,"ngIf"],["disabled","",1,"btn-default","primary","mr-3"]],template:function(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"section"),c.TgZ(1,"div",0),c.YNc(2,_,7,1,"div",1),c.YNc(3,C,7,1,"div",2),c.YNc(4,y,12,3,"ng-template",null,3,c.W1O),c.qZA(),c.qZA(),c.TgZ(6,"section"),c.TgZ(7,"div",4),c.TgZ(8,"div",5),c.TgZ(9,"div",6),c.TgZ(10,"div",7),c._uU(11),c.qZA(),c.TgZ(12,"p"),c._uU(13),c.qZA(),c.TgZ(14,"button",8),c.NdJ("click",function(){c.CHM(i);var e=c.MAs(45);return t.uploadModal(e)}),c._uU(15),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",9),c.TgZ(17,"div",10),c.TgZ(18,"div",11),c.TgZ(19,"div",12),c.TgZ(20,"div",13),c.TgZ(21,"input",14),c.NdJ("ngModelChange",function(e){return t.searchText=e})("input",function(e){return t.searchName(e.target.value)})("blur",function(){return t.removeUnwantedSpace("searchText",t.searchText)}),c.qZA(),c.YNc(22,k,2,0,"span",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",16),c.TgZ(24,"table",17),c.TgZ(25,"thead"),c.TgZ(26,"tr"),c.TgZ(27,"th",18),c.TgZ(28,"span"),c._uU(29),c.qZA(),c.qZA(),c.TgZ(30,"th",19),c._uU(31),c.qZA(),c._UZ(32,"th",20),c.qZA(),c.qZA(),c.TgZ(33,"tbody",21),c.YNc(34,q,12,4,"tr",22),c.qZA(),c.TgZ(35,"tbody",21),c.TgZ(36,"tr"),c.TgZ(37,"td",23),c._uU(38),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(39,w,4,1,"div",24),c.qZA(),c.qZA(),c.YNc(40,S,16,7,"ng-template",null,25,c.W1O),c.YNc(42,M,14,4,"ng-template",null,26,c.W1O),c.YNc(44,U,129,15,"ng-template",null,27,c.W1O),c.YNc(46,I,15,7,"ng-template",null,28,c.W1O)}2&e&&(c.xp6(2),c.Q6J("ngIf",t.errorMessage),c.xp6(1),c.Q6J("ngIf",t.successMessage),c.xp6(8),c.hij(" ",t.language["ZIP Code Filter Lists"]," "),c.xp6(2),c.Oqu(t.language.ZIP_Code_Filter_Lists_Description),c.xp6(2),c.hij(" ",t.language["Upload CSV"]," "),c.xp6(1),c.Q6J("hidden",t.loading),c.xp6(5),c.s9C("placeholder",t.language.Search),c.Q6J("ngModel",t.searchText),c.xp6(1),c.Q6J("ngIf",t.searchText),c.xp6(2),c.Q6J("dtOptions",t.zipCodeFilterOptions)("dtTrigger",t.dtTrigger),c.xp6(5),c.Oqu(t.language.Name),c.xp6(2),c.Oqu(t.language["Date Added"]),c.xp6(2),c.Q6J("ngClass",t.zipcodeArrayResultError?"d-none":"table-row-group"),c.xp6(1),c.Q6J("ngForOf",t.zipCodeFilterList),c.xp6(1),c.Q6J("ngClass",t.zipcodeArrayResultError?"table-row-group":"d-none"),c.xp6(3),c.Oqu(t.language.nodata),c.xp6(1),c.Q6J("ngIf",t.loading))},directives:[l.O5,Z.Fj,b.f,Z.JJ,Z.On,n.G,l.mk,l.sg,Z.wO,Z.nD],styles:['.file-browse-btn[_ngcontent-%COMP%]{position:relative;cursor:pointer}.file-browse-btn[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;font-size:0;opacity:0;cursor:pointer}.table-filter[_ngcontent-%COMP%]{margin-top:32px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{position:relative;min-width:264px}.table-filter[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-height:35px;padding-right:40px}.del-btn[_ngcontent-%COMP%]   .btn-default[_ngcontent-%COMP%]{padding:3px 20px!important;font-size:14px!important;line-height:18px!important}.max-w-36[_ngcontent-%COMP%]{max-width:36px}.table-row-selected[_ngcontent-%COMP%]{background:#EDF5FF!important}.checkbox-intermediate[_ngcontent-%COMP%]{position:relative}.checkbox-intermediate[_ngcontent-%COMP%]:before{content:"_";position:absolute;left:0;width:100%;height:100%;color:#fff;z-index:1;text-align:center;font-weight:bold;top:-10px}.checkbox-intermediate[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;background:#0279ff;border-radius:3px;left:0;top:0}.th-del-action[_ngcontent-%COMP%]{min-width:100px;max-width:100px}.action-icons-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;min-width:38px;display:inline-block}  .admin-custom-delete-modal .modal-dialog{max-width:45.33%!important}  .admin-custom-delete-modal .modal-content{background:#FFF9F5!important}  .admin-default-modal .modal-dialog{max-width:41%!important}  .admin-modal-upload .modal-dialog{max-width:57%!important}.warn-icon-min[_ngcontent-%COMP%]{min-width:73px;padding-right:25px}.warn-icon-min[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px}.zipcode-alert[_ngcontent-%COMP%]{padding:0 20px 15px}.zipcode-alert[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#4c4c4c;list-style-type:disc}.btn-link[_ngcontent-%COMP%]{background:none;border:none;text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{background:none}.admin-title-grow[_ngcontent-%COMP%]{flex-grow:1}.border-bottom-gray[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc}.w-10[_ngcontent-%COMP%]{width:10%!important}.w-20[_ngcontent-%COMP%]{width:20%!important}.w-40[_ngcontent-%COMP%]{width:40%!important}.w-50[_ngcontent-%COMP%]{width:50%!important}.w-30[_ngcontent-%COMP%]{width:30%!important}.min-110px[_ngcontent-%COMP%]{width:110px}.min-90px[_ngcontent-%COMP%]{width:90px}.ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#F8F8FA}.table-uplod-csv[_ngcontent-%COMP%]{table-layout:fixed}.table-uplod-csv[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #EBEAEF;padding-top:7px;padding-bottom:7px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:40px;top:4px;z-index:1;cursor:pointer}.pos-abs-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:13px;opacity:.8}.pos-abs-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:1}']}),E)}}])}();