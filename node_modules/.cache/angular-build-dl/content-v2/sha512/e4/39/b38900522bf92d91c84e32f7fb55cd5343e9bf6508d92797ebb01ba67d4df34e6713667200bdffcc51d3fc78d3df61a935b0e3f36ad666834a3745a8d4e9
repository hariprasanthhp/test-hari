"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[6873],{26873:function(t,e,s){s.r(e),s.d(e,{OrgAdminsModule:function(){return E}});var i=s(38583),a=s(3679),n=s(39895),r=s(23771),o=s(79765),l=s(92340),c=s(37716),u=s(49342),d=s(30900),g=s(53668),h=s(91841),m=s(89097),p=s(12664),f=s(39075);function b(t,e){1&t&&(c.TgZ(0,"div",7),c.TgZ(1,"div",8),c.TgZ(2,"div",9),c.TgZ(3,"span",10),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function A(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"span",12),c._UZ(2,"img",13),c.qZA(),c.TgZ(3,"button",14),c.NdJ("click",function(){return c.CHM(t),c.oxw().closeAlert()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",15),c.qZA()}if(2&t){const t=c.oxw();c.xp6(5),c.Q6J("innerHtml",t.errorInfo,c.oJD)}}function Z(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",16),c.TgZ(1,"span",17),c._UZ(2,"img",18),c.qZA(),c.TgZ(3,"button",14),c.NdJ("click",function(){return c.CHM(t),c.oxw().closeAlert()}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",15),c.qZA()}if(2&t){const t=c.oxw();c.xp6(5),c.Q6J("innerHtml",t.successInfo,c.oJD)}}function v(t,e){if(1&t&&(c.TgZ(0,"div",19),c.TgZ(1,"div",20),c._uU(2),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.AsE("",t.ORG_NAME," ",t.language.adminsList,"")}}function T(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",19),c.TgZ(1,"div",21),c.TgZ(2,"div",22),c.TgZ(3,"div",23),c._UZ(4,"div",24),c.TgZ(5,"div",25),c.TgZ(6,"div",26),c.TgZ(7,"input",27,28),c.NdJ("keyup",function(e){return c.CHM(t),c.oxw().search(e.target.value)})("search",function(e){return c.CHM(t),c.oxw().search(e.target.value)}),c.qZA(),c.TgZ(9,"span",29),c.NdJ("click",function(){c.CHM(t);const e=c.MAs(8);return c.oxw().onSearchClearing(e)}),c._UZ(10,"img",30),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(7),c.s9C("placeholder",t.language.searchAdmins),c.xp6(2),c.Q6J("hidden",!t.searchClearable)}}function C(t,e){if(1&t&&(c.TgZ(0,"tr",38),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.qZA()),2&t){const t=e.$implicit;c.s9C("id",t._id),c.xp6(2),c.Oqu(t.firstName?t.firstName:""),c.xp6(2),c.Oqu(t.lastName?t.lastName:""),c.xp6(2),c.Oqu(t.email?t.email:"")}}function _(t,e){if(1&t&&(c.TgZ(0,"tbody"),c.YNc(1,C,7,4,"tr",37),c.qZA()),2&t){const t=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",t.adminsTableData)}}function y(t,e){if(1&t&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td",39),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw(3);c.xp6(3),c.Oqu(t.searchClearable?t.language["No matching records found"]:t.language["No data available in table"])}}function S(t,e){if(1&t&&(c.TgZ(0,"div",33),c.TgZ(1,"table",34),c.TgZ(2,"thead",35),c.TgZ(3,"tr"),c.TgZ(4,"th"),c._uU(5),c.qZA(),c.TgZ(6,"th"),c._uU(7),c.qZA(),c.TgZ(8,"th"),c._uU(9),c.qZA(),c.qZA(),c.qZA(),c.YNc(10,_,2,1,"tbody",36),c.YNc(11,y,4,1,"tbody",36),c._UZ(12,"tbody"),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.Q6J("dtOptions",t.dtOptions),c.xp6(4),c.Oqu(t.language.firstname),c.xp6(2),c.Oqu(t.language.lastname),c.xp6(2),c.Oqu(t.language.emailAddress),c.xp6(1),c.Q6J("ngIf",0!=(null==t.adminsTableData?null:t.adminsTableData.length)),c.xp6(1),c.Q6J("ngIf",0==(null==t.adminsTableData?null:t.adminsTableData.length)||"undefined"!=t.adminsCount&&0===t.adminsCount||"undefined"!=t.filterCount&&0===t.filterCount)}}function x(t,e){if(1&t&&(c.TgZ(0,"div",31),c.YNc(1,S,13,6,"div",32),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.dataAvailable)}}const O=s(91704);let D=(()=>{class t{constructor(t,e,s,i,a,n,r,l){this.commonOrgService=t,this.router=e,this.customTranslateService=s,this.organizationApiService=i,this.http=a,this.sso=n,this.dialogService=r,this.titleService=l,this.pageAvailable=!1,this.adminsTableData=[],this.dtTrigger=new o.xQ,this.isCalixAdminModule=!1,this.errorInfo="",this.successInfo="",this.MODULE="systemAdministration",this.filterCount=0,this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!0,dom:"tipr",columnDefs:[{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:t=>{t._iRecordsDisplay<=t._iDisplayLength&&O(t.nTableWrapper).find("#admins-table_last").addClass("disabled")}},this.isLoggedUserSameOrganization=!1,this.loader=!1,this.loading=!0,this.ORG_NAME="",this.searchClearable=!1;let c=this.router.url;this.ORG_ID=this.sso.getOrgId(),this.ORG_NAME=this.sso.getOrgName(),this.MODULE=this.sso.getRedirectModule(c),this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.customTranslateService.selectedLanguage.subscribe(t=>{this.language=t,setTimeout(()=>{this.redraw()},500),this.titleService.setTitle(`${this.language["Organization Admins"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language["Organization Admins"]} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.commonOrgService.currentPageAdder("org-admins"),this.getadminsCount(),this.frTable=this.customTranslateService.fr}ngOnInit(){this.closeAlert(),this.tableLanguageOptions(),O("body").off("click",".languageContent ul li a"),O("body").on("click",".languageContent ul li a",()=>{this.changeTableStatusLanguage({_iDisplayStart:this.tableCounts.start,_iDisplayLength:this.tableCounts.displayCount,_iRecordsDisplay:this.tableCounts.displayed,_iRecordsTotal:this.tableCounts.total,oPreviousSearch:{sSearch:this.tableCounts.searchText}})})}ngOnDestroy(){O("body").off("click",".languageContent ul li a"),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.rolesDeleteSubs&&this.rolesDeleteSubs.unsubscribe()}getadminsCount(){this.http.get(`${l.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/orgadmin/users/_count`).subscribe(t=>{this.adminsCount=t,this.dataAvailable=!0,this.tableRender()},t=>{this.pageErrorHandle(t),this.dataAvailable=!0,this.tableRender(),this.loading=!1})}tableRender(){let t=`${l.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/orgadmin/users`;const e=this;this.dtOptions={pagingType:"full_numbers",pageLength:20,lengthChange:!1,serverSide:!0,processing:!1,dom:"tipr",columnDefs:[{targets:[0],orderable:!0}],order:[0,"asc"],ajax:(s,i)=>{this.sortBy=s.order[0].column,this.sortType=s.order[0].dir,e.callCount(s.search.value),e.http.get(`${t}?offset=${s.start}&size=${s.length}&filter=${s.search.value}`).subscribe(t=>{e.adminsTableData=this.sortData(t,e.sortBy,e.sortType),e.hideNoDataRow(),e.loading=!1,this.tableLanguageOptions(),setTimeout(()=>{i({recordsTotal:null!=e.adminsCount?e.adminsCount:0,recordsFiltered:null!=e.filterCount?e.filterCount:e.adminsCount,data:[]})},100)},t=>{404==t.status?(e.adminsTableData=[],e.hideNoDataRow(),e.loading=!1,this.tableLanguageOptions(),setTimeout(()=>{i({recordsTotal:null!=e.adminsCount?e.adminsCount:0,recordsFiltered:null!=e.filterCount?e.filterCount:e.adminsCount,data:[]})},100)):(this.pageErrorHandle(t),e.loading=!1)})},drawCallback:t=>{this.changeTableStatusLanguage(t),t._iRecordsDisplay<=t._iDisplayLength&&O(t.nTableWrapper).find("#admins-table_last").addClass("disabled")}},this.tableLanguageOptions()}callCount(t){this.http.get(`${l.N.CALIX_ADMIN_BASE_URL}org/${this.ORG_ID}/orgadmin/users/_count?filter=${t}`).subscribe(t=>{this.filterCount=t})}hideNoDataRow(){setTimeout(()=>{O(".odd").css("display","none")},100)}search(t){this.searchClearable=!!t.length,this.dtElement.dtInstance.then(e=>{e.search(t).draw()})}onSearchClearing(t){this.searchClearable=!1,t.value="",this.dtElement.dtInstance.then(e=>{e.search(t.value).draw()})}gotoUserDetail(t){sessionStorage.setItem("calixAdminUserDetail",JSON.stringify(t)),this.router.navigate([`${this.MODULE}/usersDetail`])}redraw(){this.dtElement.dtInstance.then(t=>{t.draw()})}hideSearch(){setTimeout(()=>{O("#admins-list-table .dataTables_wrapper .dataTables_filter").css("display","none"),O("#admins-list-table .dataTables_wrapper .dataTables_length").css("display","none")},50)}closeAlert(){this.error=!1,this.success=!1}sortData(t,e,s){let i=[];return 0==e?i=this.sortByColumn(t,s,"firstName"):1==e?i=this.sortByColumn(t,s,"lastName"):2==e&&(i=this.sortByColumn(t,s,"email")),i}sortByColumn(t,e,s){return t.sort((t,i)=>{var a=t[s]?t[s].toUpperCase():"",n=i[s]?i[s].toUpperCase():"";if("asc"==e){if(a<n)return-1;if(a>n)return 1}else{if(a>n)return-1;if(a<n)return 1}return 0}),t}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}changeTableStatusLanguage(t){const e=new Intl.NumberFormat;this.tableCounts={searchText:t.oPreviousSearch.sSearch.trim(),total:t._iRecordsTotal,displayCount:t._iDisplayLength,displayed:t._iRecordsDisplay,start:t._iDisplayStart};const s="fr"==sessionStorage.getItem("defaultLanguage"),i=t.oPreviousSearch.sSearch.trim()?s?`(filtr\xe9es \xe0 partir des ${e.format(t._iRecordsTotal)} entr\xe9es totales)`:`(filtered from ${e.format(t._iRecordsTotal)} total entries)`:"",a=0==t._iRecordsDisplay?-1:t._iDisplayStart,n=t._iDisplayStart+t._iDisplayLength>t._iRecordsDisplay?t._iRecordsDisplay:t._iDisplayStart+t._iDisplayLength;O('div [role="status"]').text(s?`Affichage de ${e.format(a+1)} \xe0 ${e.format(n)} des ${e.format(t._iRecordsDisplay)} entr\xe9es ${i}`:`Showing ${e.format(a+1)} to ${e.format(n)} of ${e.format(t._iRecordsDisplay)} entries ${i}`),O(".first").text(s?"Le d\xe9but":"First"),O(".previous").text(s?"Pr\xe9c\xe9dent":"Previous"),O(".next").text(s?"Suivant":"Next"),O(".last").text(s?"Derni\xe8re":"Last")}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(t){this.errorInfo=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.closeAlert(),this.error=!0,this.commonOrgService.pageScrollTop()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.v),c.Y36(n.F0),c.Y36(d.d),c.Y36(g.F),c.Y36(h.eN),c.Y36(m.t6),c.Y36(p.FF),c.Y36(f.Dx))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-admins-list"]],viewQuery:function(t,e){if(1&t&&c.Gf(r.G,5),2&t){let t;c.iGM(t=c.CRH())&&(e.dtElement=t.first)}},decls:8,vars:6,consts:[["id","scrollTopId",1,"container","position-relative"],["scrollTopId",""],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger  fade show",4,"ngIf"],["class","w-100 alert alert-success fade show",4,"ngIf"],["class","row my-3",4,"ngIf"],["class","row my-3","style","min-height: 65vh;",4,"ngIf"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"row","my-3"],[1,"col-md-12","ccl-title"],[1,"col-md-6","offset-md-6"],[1,"text-right","flat-right"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"ccl-form","admins-list"],["type","text","name","searchbox",1,"input-sm",3,"placeholder","keyup","search"],["searchBar",""],[1,"clear-icon",3,"hidden","click"],["src","assets/img/close-icon.svg"],[1,"row","my-3",2,"min-height","65vh"],["class","col",4,"ngIf"],[1,"col"],["id","admins-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,""],[4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["colspan","5",1,"no-data-available"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0,1),c.YNc(2,b,5,0,"div",2),c.YNc(3,A,6,1,"div",3),c.YNc(4,Z,6,1,"div",4),c.YNc(5,v,3,2,"div",5),c.YNc(6,T,11,2,"div",5),c.YNc(7,x,2,1,"div",6),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngIf",e.loading),c.xp6(1),c.Q6J("ngIf",e.error),c.xp6(1),c.Q6J("ngIf",e.success),c.xp6(1),c.Q6J("ngIf",e.pageAvailable),c.xp6(1),c.Q6J("ngIf",1),c.xp6(1),c.Q6J("ngIf",e.pageAvailable))},directives:[i.O5,r.G,i.sg],styles:[".admins-list[_ngcontent-%COMP%]{position:relative}.admins-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;width:15%;right:16px;top:5px}.admins-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:12px}"]}),t})();var w=s(93517),q=s(7450);const I=function(){return["active"]};let L=(()=>{class t{constructor(t){this.translateService=t}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(t=>{this.language=t})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(q.s))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-org-admins-side-menu"]],decls:5,vars:3,consts:[[1,""],[1,"nav","flex-column","left-menu"],[1,"nav-item"],["routerLink","all",1,"list-group-item","list-group-item-action",3,"routerLinkActive"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"ul",1),c.TgZ(2,"li",2),c.TgZ(3,"a",3),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("routerLinkActive",c.DdM(2,I)),c.xp6(1),c.Oqu(e.language["Organization Admins"]))},directives:[n.yS,n.Od],styles:[""]}),t})();var N=s(93702);const U=["scrollTopId"],R=[{path:"",component:(()=>{class t{constructor(t,e){this.common=t,this.router=e,this.rouerSubs=this.router.events.subscribe(t=>{t instanceof n.OD&&this.common.closeAlert()})}ngOnInit(){this.scrollSubs=this.common.scrollTop.subscribe(()=>{try{this.scrollTop()}catch(t){}}),this.closeSubs=this.common.closeAlerts.subscribe(()=>{this.closeAlert()}),this.successSubs=this.common.successAlert.subscribe(t=>{this.openSuccessAlert(t)}),this.errorSubs=this.common.errorAlert.subscribe(t=>{this.openErrorAlert(t)})}ngOnDestroy(){this.scrollSubs&&this.scrollSubs.unsubscribe(),this.closeSubs&&this.closeSubs.unsubscribe(),this.successSubs&&this.successSubs.unsubscribe(),this.errorSubs&&this.errorSubs.unsubscribe(),this.rouerSubs&&this.rouerSubs.unsubscribe()}scrollTop(){this.scrollTopId.nativeElement.scrollIntoView()}closeAlert(){this.error=!1,this.success=!1}openSuccessAlert(t){t&&(this.successInfo=t,this.success=!0)}openErrorAlert(t){t&&(this.errorInfo=t,this.error=!0)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.v),c.Y36(n.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-org-admins"]],viewQuery:function(t,e){if(1&t&&c.Gf(U,7),2&t){let t;c.iGM(t=c.CRH())&&(e.scrollTopId=t.first)}},decls:9,vars:0,consts:[[1,"maximus","sys-admin-cont"],[1,"row"],[1,"col-md-2","col-sm-3","col-xs-12","pr-2"],[1,"col-md-10","col-sm-9","col-xs-12"],["scrollTopId",""]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-admin-header"),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c._UZ(4,"app-org-admins-side-menu"),c.qZA(),c.TgZ(5,"div",3,4),c._UZ(7,"router-outlet"),c.qZA(),c.qZA(),c.qZA(),c._UZ(8,"app-admin-footer"))},directives:[w.G,L,n.lC,N.c],styles:[""]}),t})(),data:{title:"Calix Cloud - Org Admins"},children:[{path:"all",component:D,data:{title:"Calix Cloud - Org Admins"}},{path:"",redirectTo:"all",pathMatch:"full"}]}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.Bz.forChild(R)],n.Bz]}),t})();var $=s(35555);let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,a.u5,M,$.SysAdminModule,r.T]]}),t})()}}]);