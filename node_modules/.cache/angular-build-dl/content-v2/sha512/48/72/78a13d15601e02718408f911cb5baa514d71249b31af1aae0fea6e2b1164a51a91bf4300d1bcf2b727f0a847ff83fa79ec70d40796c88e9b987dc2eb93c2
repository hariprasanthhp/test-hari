"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[9642],{80139:function(o,t,n){n.d(t,{q:function(){return l}});var e=n(79765),i=n(37716);let l=(()=>{class o{constructor(){this.outageTabChanged$=new e.xQ}setOutageTabChange(){this.outageTabChanged$.next(!0)}updateRegLoc(o){var t,n,e,i,l,a;if(null==o?void 0:o.region){if(-1!==(null===(t=null==o?void 0:o.region)||void 0===t?void 0:t.indexOf("All"))){let t=null===(n=null==o?void 0:o.region)||void 0===n?void 0:n.indexOf("All");-1!==t&&(null===(e=null==o?void 0:o.region)||void 0===e||e.splice(t,1,"11111111-1111-1111-1111-111111111111"))}}else o.region=["11111111-1111-1111-1111-111111111111"];if(null==o?void 0:o.location){if(-1!==(null===(i=null==o?void 0:o.location)||void 0===i?void 0:i.indexOf("All"))){let t=null===(l=null==o?void 0:o.location)||void 0===l?void 0:l.indexOf("All");-1!==t&&(null===(a=null==o?void 0:o.location)||void 0===a||a.splice(t,1,"11111111-1111-1111-1111-111111111111"))}}else o.location=["11111111-1111-1111-1111-111111111111"];return o}updateRegLocToAll(o){var t,n,e,i,l,a;if(null==o?void 0:o.region){if(-1!==(null===(t=null==o?void 0:o.region)||void 0===t?void 0:t.indexOf("11111111-1111-1111-1111-111111111111"))){let t=null===(n=null==o?void 0:o.region)||void 0===n?void 0:n.indexOf("11111111-1111-1111-1111-111111111111");-1!==t&&(null===(e=null==o?void 0:o.region)||void 0===e||e.splice(t,1,"All"))}}else o.region=["All"];if(null==o?void 0:o.location){if(-1!==(null===(i=null==o?void 0:o.location)||void 0===i?void 0:i.indexOf("11111111-1111-1111-1111-111111111111"))){let t=null===(l=null==o?void 0:o.location)||void 0===l?void 0:l.indexOf("11111111-1111-1111-1111-111111111111");-1!==t&&(null===(a=null==o?void 0:o.location)||void 0===a||a.splice(t,1,"All"))}}else o.location=["All"];return o}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},19642:function(o,t,n){n.d(t,{O:function(){return T}});var e=n(92340),i=n(37716),l=n(7450),a=n(48483),r=n(91841),s=n(39895),g=n(49342),d=n(80139),c=n(21693),u=n(39075),f=n(38583),h=n(1570);function v(o,t){if(1&o&&(i.TgZ(0,"div",10),i.TgZ(1,"div",11),i.TgZ(2,"div",12),i._uU(3),i.qZA(),i.TgZ(4,"div",13),i.TgZ(5,"a",14),i._UZ(6,"img",15),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&o){const o=i.oxw(2);i.xp6(2),i.s9C("title",null==o.workflowObj?null:o.workflowObj.name),i.xp6(1),i.hij(" ",null==o.workflowObj?null:o.workflowObj.name," ")}}function p(o,t){if(1&o&&(i.TgZ(0,"tr"),i.TgZ(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i.qZA()),2&o){const o=i.oxw(2);i.xp6(2),i.Oqu(o.language["All Regions"]),i.xp6(2),i.Oqu(o.language["All Locations"])}}function w(o,t){if(1&o&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&o){const o=i.oxw(4);i.xp6(1),i.hij("",o.language["All Locations"]," ")}}function O(o,t){if(1&o&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&o){const o=i.oxw(2).$implicit,t=i.oxw(2);i.xp6(1),i.AsE("",null==o||null==o.value?null:o.value.length," ",t.language["Location(s)"],"")}}function m(o,t){if(1&o&&(i.TgZ(0,"span"),i._UZ(1,"br"),i._uU(2),i.qZA()),2&o){const o=t.$implicit;i.xp6(2),i.Oqu(o)}}function b(o,t){if(1&o&&(i.TgZ(0,"div"),i.YNc(1,w,2,1,"span",0),i.YNc(2,O,2,2,"span",0),i.YNc(3,m,3,1,"span",8),i.qZA()),2&o){const o=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",!(null!=o&&null!=o.value&&o.value.length)),i.xp6(1),i.Q6J("ngIf",null==o||null==o.value?null:o.value.length),i.xp6(1),i.Q6J("ngForOf",null==o?null:o.value)}}function x(o,t){if(1&o&&(i.TgZ(0,"div"),i.TgZ(1,"span"),i._uU(2),i.qZA(),i.qZA()),2&o){const o=i.oxw(3);i.xp6(2),i.Oqu(o.language["All Locations"])}}function Z(o,t){if(1&o&&(i.TgZ(0,"tr"),i.TgZ(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i.YNc(4,b,4,3,"div",0),i.YNc(5,x,3,1,"div",0),i.qZA(),i.qZA()),2&o){const o=t.$implicit,n=i.oxw(2);i.xp6(2),i.Oqu(n.regionsObj[null==o?null:o.key]),i.xp6(2),i.Q6J("ngIf",null==n.workflowObj||null==n.workflowObj.location?null:n.workflowObj.location.length),i.xp6(1),i.Q6J("ngIf",!(null!=n.workflowObj&&null!=n.workflowObj.location&&n.workflowObj.location.length))}}function A(o,t){if(1&o&&(i.TgZ(0,"section"),i.YNc(1,v,7,2,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i._uU(5),i.qZA(),i.TgZ(6,"div",5),i.TgZ(7,"table",6),i.TgZ(8,"tbody"),i.TgZ(9,"tr"),i.TgZ(10,"td"),i._uU(11),i.qZA(),i.TgZ(12,"td"),i._uU(13),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",3),i.TgZ(15,"div",4),i._uU(16),i.qZA(),i.TgZ(17,"div",7),i.TgZ(18,"table",6),i.TgZ(19,"tbody"),i.YNc(20,p,5,2,"tr",0),i.YNc(21,Z,6,3,"tr",8),i.ALo(22,"keyvalue"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(23,"div",3),i.TgZ(24,"div",4),i._uU(25),i.qZA(),i.TgZ(26,"div",7),i._UZ(27,"app-summary-recepients",9),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&o){const o=i.oxw();i.xp6(1),i.Q6J("ngIf",o.showTitle),i.xp6(4),i.hij(" ",o.language["Notification Trigger"]," "),i.xp6(6),i.Oqu(o.language["Frequency Threshold"]),i.xp6(2),i.AsE("",null==o.workflowObj?null:o.workflowObj.outagePollInterval," ",o.language["Minute(s)"],""),i.xp6(3),i.Oqu(o.language["Regions & Locations"]),i.xp6(4),i.Q6J("ngIf",o.showAllRegions),i.xp6(1),i.Q6J("ngForOf",i.lcZ(22,10,o.geoInfo)),i.xp6(4),i.Oqu(o.language.Recipients),i.xp6(2),i.Q6J("workflowObj",o.recepientsInfo)}}function _(o,t){if(1&o&&(i.TgZ(0,"section"),i.TgZ(1,"div",16),i.TgZ(2,"div",17),i.TgZ(3,"div",18),i.TgZ(4,"div",19),i.TgZ(5,"div",20),i.TgZ(6,"div",21),i.TgZ(7,"span",22),i._uU(8),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&o){const o=i.oxw();i.xp6(8),i.Oqu(o.language.Loading)}}let T=(()=>{class o{constructor(o,t,n,e,i,l,a,r){this.translateService=o,this.dateUtils=t,this.http=n,this.route=e,this.commonOrgService=i,this.otgWrkflwSrvc=l,this.issueService=a,this.titleService=r,this.loader=!1,this.regionsObj={},this.geoInfo={},this.showAllRegions=!1,this.loading=!1,this.showTitle=!1,this.exclusions=[]}set workflowObj(o){var t;console.log(o),this.recepientsInfo={emailRecipients:o.emails,emailNotes:o.notes,sms:null==o?void 0:o.sms,webhooks:null==o?void 0:o.webhooks},-1!==(null===(t=null==(o=this.otgWrkflwSrvc.updateRegLocToAll(o))?void 0:o.region)||void 0===t?void 0:t.indexOf("All"))&&(this.showAllRegions=!0),this.generateExclusionDatazForDisplay(null==o?void 0:o.filter),this._workflowObj=o}get workflowObj(){return this._workflowObj}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(o=>{this.language=o});let o=this.route.snapshot.paramMap.get("notificationId");o?(this.titleService.setTitle("Internet Outage Notifications - Email Notifications - Network Operations - Operations - Operations - Calix Cloud"),this.showTitle=!0,this.getRecordById(o)):this.getRegions()}getRegions(){this.regionsSubject=this.issueService.getRegions().subscribe(o=>{var t;if(o){o=this.issueService.appendFqn(o);let n={};null==o||o.forEach(o=>{var t,e,i,l;n[null==o?void 0:o.id]=null==o?void 0:o.name,(null===(e=null===(t=this.workflowObj)||void 0===t?void 0:t.region)||void 0===e?void 0:e.length)&&-1!==(null===(l=null===(i=this.workflowObj)||void 0===i?void 0:i.region)||void 0===l?void 0:l.indexOf(null==o?void 0:o.id))&&(this.geoInfo[null==o?void 0:o.id]=[])}),this.regionsObj=n,(null===(t=this.workflowObj)||void 0===t?void 0:t.region)&&this.loadLocationValue()}},o=>{console.log(o)})}loadLocationValue(){let o=this.workflowObj.region;if(null==o?void 0:o.length){let t="";if(o.length){if(-1!==o.indexOf("All"))return;o.forEach(o=>{"All"!=o&&(t&&(t+="&"),t+=`region=${o}`)}),this.locationsSubject=this.http.get(`${e.N.API_BASE_URL}nfa/locations?${t}`).subscribe(o=>{var t,n;if(null===(n=null===(t=this.workflowObj)||void 0===t?void 0:t.location)||void 0===n?void 0:n.length){o=this.issueService.appendFqn(o);let t=this.geoInfo;null==o||o.forEach(o=>{var n,e;-1!==(null===(e=null===(n=this.workflowObj)||void 0===n?void 0:n.location)||void 0===e?void 0:e.indexOf(null==o?void 0:o.id))&&(t[null==o?void 0:o.regionId]?t[null==o?void 0:o.regionId].push(null==o?void 0:o.name):t[null==o?void 0:o.regionId]=[null==o?void 0:o.name])}),console.log(t),this.geoInfo=t}},o=>{})}}}generateExclusionDatazForDisplay(o){let t=[];null==o||o.forEach(o=>{t.push({daysOfWeek:null==o?void 0:o.daysOfWeek,fromTime:this.getStartDate(null==o?void 0:o.fromTime),toTime:this.getEndDate(null==o?void 0:o.toTime)})}),this.exclusions=t}getEndDate(o="23:59"){return new Date(`${this.dateUtils.getTodayDateStr()} ${o}`)}getStartDate(o="00:00"){return new Date(`${this.dateUtils.getTodayDateStr()} ${o}`)}getRecordById(o){this.loader=!0,this.http.get(`${e.N.API_BASE_URL}analytics-engine/outageworkflow?outageWorkflowId=${o}`).subscribe(o=>{o&&Object.keys(o).length&&(this.workflowObj=Object.assign(Object.assign({},this.workflowObj),o)),this.getRegions(),this.loader=!1},o=>{console.log(o),this.pageErrorHandle(o)})}pageErrorHandle(o){this.errorInfo=401==o.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(o),this.error=!0,this.loader=!1}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(l.s),i.Y36(a.s),i.Y36(r.eN),i.Y36(s.gz),i.Y36(g.v),i.Y36(d.q),i.Y36(c.v),i.Y36(u.Dx))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-outge-wrkflw-summary"]],inputs:{workflowObj:"workflowObj"},decls:2,vars:2,consts:[[4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"heading-4"],[1,"summary-info-table","monitored"],[1,"table"],[1,"summary-info-table"],[4,"ngFor","ngForOf"],[3,"workflowObj"],[1,"row","mb-2"],[1,"col-md-12","pb-1","position-relative"],[1,"ccl-admin-title","text-truncate","pr-3",3,"title"],[1,"close-page"],["routerLink","/cco/operations/alarms/health-alarm-notifications","routerLinkActive","active",1,"cursor-pointer"],["src","assets/img/ic_close-44px.svg","alt",""],[1,"container"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(o,t){1&o&&(i.YNc(0,A,28,12,"section",0),i.YNc(1,_,9,1,"section",0)),2&o&&(i.Q6J("ngIf",!t.loader),i.xp6(1),i.Q6J("ngIf",t.loader))},directives:[f.O5,f.sg,h.f,s.yS,s.Od],pipes:[f.Nd],styles:[".heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px;margin-bottom:16px}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF!important}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400!important;line-height:24px;letter-spacing:0em;text-align:left;color:#4c4c4c;border:none!important;padding:0 10px 0 0}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF!important}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400!important;line-height:24px;letter-spacing:0em;text-align:left;color:gray;width:50%;border:none!important;padding:0 10px;word-break:break-word!important}.monitored[_ngcontent-%COMP%]{max-height:300px;overflow:auto}.monitored[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%}.alarm-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-size:42px;font-style:normal;font-weight:300;line-height:53px;letter-spacing:0em;text-align:left;overflow:hidden;text-overflow:ellipsis}.subgroups-but[_ngcontent-%COMP%]{background-color:#fff;border:none}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:950px!important}.modal-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px;word-wrap:break-word;color:#1a1f22}.alarm-name-list[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;height:26px}.alarm-name-list-box[_ngcontent-%COMP%]{max-height:550px;overflow-y:scroll}.hover-row[_ngcontent-%COMP%]{color:#0279ff!important}.hover-row[_ngcontent-%COMP%]:hover{text-decoration:underline}.width-60[_ngcontent-%COMP%]{width:60%!important}.min-height-div[_ngcontent-%COMP%]{min-height:15px}.marg-b-38px[_ngcontent-%COMP%]{margin-bottom:38px}.close-page[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px}"]}),o})()}}]);