"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[2408],{52408:function(t,e,i){i.r(e),i.d(e,{ConfigurationModule:function(){return H}});var a=i(38583),n=i(3679),s=i(39895),o=i(37716),l=i(30900),g=i(89097),r=i(89044);const u=function(){return["active"]};function d(t,e){if(1&t&&(o.TgZ(0,"li",5),o.TgZ(1,"a",6),o._uU(2),o.qZA(),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.s9C("id",t.title),o.s9C("routerLink",t.link),o.Q6J("routerLinkActive",o.DdM(4,u)),o.xp6(1),o.Oqu(t.title)}}function c(t,e){if(1&t&&(o.TgZ(0,"div",2),o.TgZ(1,"ul",3),o.YNc(2,d,3,5,"li",4),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.Q6J("ngForOf",t.menus)}}let h=(()=>{class t{constructor(t,e,i,a){this.router=t,this.customTranslateService=e,this.sso=i,this.service=a,this.pageAvailable=!1,this.menus=[],this.isSecureAccess=!1,this.isProd=!1,this.isSysAdmin=!1,this.cocEntitlementCheck=!1;let n=this.router.url;this.ORG_ID=this.sso.getOrganizationID(n),this.MODULE=this.sso.getRedirectModule(n),this.isSecureAccess=this.sso.isSecureAccess(),this.isProd=this.sso.isProdCheckFromBaseURL(),this.checkSysAdmin()}ngOnInit(){this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.service.flowDataSync.subscribe(t=>{if(!t.flowDataTab&&this.menus){const t=this.menus.findIndex(t=>t.link.includes("flow-data"));-1!==t&&this.menus.splice(t,1)}}),this.customTranslateService.selectedLanguage.subscribe(t=>{this.language=t,this.menus[0].title=this.language["Real-time Delay"],this.menus[1].title=this.language["Flow Data"],3===this.menus.length?this.menus[2].title=this.language["Unmapped IP Aggregation"]:4===this.menus.length&&(this.menus[2].title=this.language["1-Minute Aggregation"],this.menus[3].title=this.language["Unmapped IP Aggregation"])}),this.menus=[{title:this.language["Real-time Delay"],link:"realtime-delay",subMenuLink:`/${this.MODULE}/flowAnalyze/configurations/realtime-delay`}],this.getData(),this.activeRoute=this.router.url}ngOnDestroy(){this.orgSubs&&this.orgSubs.unsubscribe()}onActivate(t){window.scroll({top:0,left:0,behavior:"smooth"})}languageChange(t){sessionStorage.setItem("defaultLanguage",t),this.customTranslateService.changeLanguage(t)}goPage(t){this.router.navigate([t])}pageChange(t){this.activeRoute=t.subMenuLink}checkSysAdmin(){let t=this.sso.getRoles();this.isSysAdmin=!!(null==t?void 0:t.includes("SysAdmin"))}getData(){this.orgSubs=this.service.getOrg(this.ORG_ID).subscribe(t=>{this.cocEntitlementCheck=!!t&&!!(t&&t.entitlement&&t.entitlement.length)&&!!t.entitlement.split(",").includes("COC"),"systemAdministration"===this.MODULE&&!this.isSecureAccess&&(this.cocEntitlementCheck||this.menus.push({title:this.language["1-Minute Aggregation"],link:"one-minute-agggregation",subMenuLink:`/${this.MODULE}/flowAnalyze/configurations/one-minute-agggregation`}),this.menus.push({title:this.language["Unmapped IP Aggregation"],link:"unmapped-ip-aggregation",subMenuLink:`/${this.MODULE}/flowAnalyze/configurations/unmapped-ip-aggregation`})),t.useAsmApplications&&this.menus.push({title:this.language["Flow Data"],link:"flow-data",subMenuLink:`/${this.MODULE}/flowAnalyze/configurations/flow-data`})})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s.F0),o.Y36(l.d),o.Y36(g.t6),o.Y36(r.U))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-configuration"]],decls:2,vars:1,consts:[["class","flow-config-sub-tab",4,"ngIf"],[3,"activate"],[1,"flow-config-sub-tab"],[1,"nav"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"id","routerLink","routerLinkActive"]],template:function(t,e){1&t&&(o.YNc(0,c,3,1,"div",0),o.TgZ(1,"router-outlet",1),o.NdJ("activate",function(t){return e.onActivate(t)}),o.qZA()),2&t&&o.Q6J("ngIf",e.pageAvailable)},directives:[a.O5,s.lC,a.sg,s.yS,s.Od],styles:[""]}),t})();var p=i(7450),m=i(39075),f=i(49342),b=i(12664);const v=["infoModal"];function Z(t,e){1&t&&(o.TgZ(0,"div",14),o.TgZ(1,"div",15),o.TgZ(2,"div",16),o.TgZ(3,"span",17),o._uU(4,"Loading..."),o.qZA(),o.qZA(),o.qZA(),o.qZA())}function A(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",18),o.TgZ(1,"h4",19),o._uU(2),o.qZA(),o.TgZ(3,"button",20),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._UZ(4,"span",21),o.qZA(),o.qZA(),o.TgZ(5,"div",22),o._uU(6),o.qZA(),o.TgZ(7,"div",23),o.TgZ(8,"button",24),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._uU(9),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.Oqu(t.infoTitle),o.xp6(4),o.hij(" ",t.infoBody," "),o.xp6(3),o.Oqu(t.language.Okay)}}let y=(()=>{class t{constructor(t,e,i,a,n,s,o){this.translateService=t,this.titleService=e,this.router=i,this.sso=a,this.service=n,this.commonOrgService=s,this.dialogService=o,this.oneMinuteAggregationStatus=!1,this.showButton=!1;const l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.language=this.translateService.defualtLanguage,this.translateService.selectedLanguage.subscribe(t=>{this.language=t,this.titleService.setTitle(`${this.language["1-Minute Aggregation"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)});const g=this.sso.getRedirectModule(l);this.titleService.setTitle(`${this.language["1-Minute Aggregation"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.getData()}ngOnDestroy(){this.orgSubs&&this.orgSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe()}getData(){this.loading=!0,this.orgSubs=this.service.getOrg(this.ORG_ID).subscribe(t=>{this.orgData=t,this.oneMinuteAggregationStatus=!!this.orgData&&!!(this.orgData&&this.orgData.entitlement&&this.orgData.entitlement.length)&&!!this.orgData.entitlement.split(",").includes("REPORT1MINAGG"),this.loading=!1},t=>{this.pageErrorHandle(t)})}submit(){this.loading=!0,this.commonOrgService.closeAlert(),this.updateSubs=this.service.add1MinuteAggregation(this.ORG_ID,this.oneMinuteAggregationStatus).subscribe(t=>{this.loading=!1,this.showButton=!1,this.getData(),this.closeModal()},t=>{this.closeModal(),this.getData(),this.pageErrorHandle(t)})}changeOneMinuteAggregation(){var t,e,i;this.oneMinuteAggregationStatus=!this.oneMinuteAggregationStatus;const a=!!(null===(i=null===(e=null===(t=this.orgData)||void 0===t?void 0:t.entitlement)||void 0===e?void 0:e.split(","))||void 0===i?void 0:i.includes("REPORT1MINAGG"));this.showButton=this.oneMinuteAggregationStatus!==a}closeModal(){this.modalRef&&this.modalRef.close()}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}pageErrorHandle(t){let e="";400==t.status||404==t.status?(this.infoBody=null===t.error?this.language["Invalid Request"]:this.commonOrgService.pageInvalidRqstErrorHandle(t),this.infoTitle="Error",this.openInfoModal(),this.loading=!1):(401==t.status&&(e=this.language["Access Denied"]),this.commonOrgService.openErrorAlert(e),this.commonOrgService.pageScrollTop(),this.loading=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(p.s),o.Y36(m.Dx),o.Y36(s.F0),o.Y36(g.t6),o.Y36(r.U),o.Y36(f.v),o.Y36(b.FF))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-one-minute-aggregation"]],viewQuery:function(t,e){if(1&t&&o.Gf(v,7),2&t){let t;o.iGM(t=o.CRH())&&(e.infoModal=t.first)}},decls:23,vars:6,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],[1,"row","my-3","p-2"],[1,"col-12"],[1,"w-100"],[1,"row"],[1,"col-md-3","col-lg-3","col-xl-3"],[1,"toggle-swtbtn","checkbox","switcher"],["for","OneMinuteAggregationSwitch"],["type","checkbox","name","status","id","OneMinuteAggregationSwitch",3,"checked","change"],[1,"ml-3"],[1,"col-12","mt-2"],["type","submit","id","one-minute-aggregation-btn",1,"btn-default","btn-primary","mr-3",3,"disabled","click"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,Z,5,0,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"form",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"label"),o._uU(8),o.qZA(),o.qZA(),o.TgZ(9,"div",6),o.TgZ(10,"div",7),o.TgZ(11,"label",8),o.TgZ(12,"input",9),o.NdJ("change",function(){return e.changeOneMinuteAggregation()}),o.qZA(),o.TgZ(13,"span"),o._UZ(14,"small"),o.qZA(),o.qZA(),o.TgZ(15,"label",10),o._uU(16),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",5),o.TgZ(18,"div",11),o.TgZ(19,"button",12),o.NdJ("click",function(){return e.submit()}),o._uU(20),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(21,A,10,3,"ng-template",null,13,o.W1O)),2&t&&(o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(7),o.Oqu(e.language["1-Minute Aggregation"]),o.xp6(4),o.Q6J("checked",e.oneMinuteAggregationStatus),o.xp6(4),o.Oqu(e.oneMinuteAggregationStatus?e.language.enabled:e.language.Disabled),o.xp6(3),o.Q6J("disabled",!e.showButton),o.xp6(1),o.hij(" ",e.language.submit," "))},directives:[a.O5,n._Y,n.JL,n.F],styles:[".switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:not(:checked):disabled + span[_ngcontent-%COMP%]{border-color:#93c5ff;cursor:not-allowed}.switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:not(:checked):disabled + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{background:#93C5FF}.switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:disabled + span[_ngcontent-%COMP%]{background:#93C5FF;border-color:#93c5ff;cursor:not-allowed}.switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:disabled + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{background:#fff}"]}),t})();var T=i(23771),M=i(79765);const O=["infoModal"],q=["confirmModal"];function w(t,e){if(1&t&&(o.TgZ(0,"div",27),o.TgZ(1,"div",28),o.TgZ(2,"div",29),o.TgZ(3,"span",30),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}function S(t,e){if(1&t&&(o.TgZ(0,"div",7),o._uU(1),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.hij("",t.language["Success, please refresh the real time dashboard and check the later flow table after 5 minutes."]," ")}}function x(t,e){if(1&t&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o.TgZ(2,"b"),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"td"),o.TgZ(5,"b"),o._uU(6),o.qZA(),o._uU(7),o.qZA(),o.TgZ(8,"td"),o.TgZ(9,"b"),o._uU(10),o.qZA(),o._uU(11),o.qZA(),o.TgZ(12,"td"),o.TgZ(13,"b"),o._uU(14),o.qZA(),o._uU(15),o.qZA(),o.qZA()),2&t){const t=e.$implicit,i=o.oxw();o.xp6(3),o.Oqu(null==t?null:t.interval),o.xp6(3),o.Oqu(null==t?null:t.window5),o.xp6(1),o.hij(" ",i.language.packets(i.bitsToSize(null==t?null:t.window5Packet,!1,2))," "),o.xp6(3),o.Oqu(null==t?null:t.window10),o.xp6(1),o.hij(" ",i.language.packets(i.bitsToSize(null==t?null:t.window10Packet,!1,2))," "),o.xp6(3),o.Oqu(null==t?null:t.window15),o.xp6(1),o.hij(" ",i.language.packets(i.bitsToSize(null==t?null:t.window15Packet,!1,2))," ")}}function D(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",31),o.TgZ(1,"h4",32),o._uU(2),o.qZA(),o.TgZ(3,"button",33),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._UZ(4,"span",34),o.qZA(),o.qZA(),o.TgZ(5,"div",35),o._uU(6),o.qZA(),o.TgZ(7,"div",36),o.TgZ(8,"button",37),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._uU(9),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.Oqu(t.infoTitle),o.xp6(4),o.hij(" ",t.infoBody," "),o.xp6(3),o.Oqu(t.language.Okay)}}function C(t,e){if(1&t){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",31),o.TgZ(2,"h4",32),o._uU(3),o.qZA(),o.TgZ(4,"button",33),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._UZ(5,"span",34),o.qZA(),o.qZA(),o.TgZ(6,"div",35),o._UZ(7,"div",38),o.qZA(),o.TgZ(8,"div",36),o.TgZ(9,"button",37),o.NdJ("click",function(){return o.CHM(t),o.oxw().save()}),o._uU(10),o.qZA(),o.TgZ(11,"button",39),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._uU(12),o.qZA(),o.qZA(),o.BQk()}if(2&t){const t=o.oxw();o.xp6(3),o.Oqu(t.infoTitle),o.xp6(4),o.Q6J("innerHtml",t.infoBody,o.oJD),o.xp6(3),o.Oqu(t.language.Okay),o.xp6(2),o.Oqu(t.language.Cancel)}}let _=(()=>{class t{constructor(t,e,i,a,n,s,o){this.router=t,this.sso=e,this.dialogService=i,this.commonOrgService=a,this.translateService=n,this.service=s,this.titleService=o,this.dtOptions={},this.dtTrigger=new M.xQ,this.languageChange=!1,this.warningmsg=!1;let l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.language=this.translateService.defualtLanguage,this.translateSubscribe=this.translateService.selectedLanguage.subscribe(t=>{this.language=t,this.titleService.setTitle(`${this.language["Realtime Delay"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.tableLanguageOptions(),this.rerender(),this.getDelayData(!0,!1)}),this.commonOrgService.closeAlert();let g=this.sso.getRedirectModule(l);this.titleService.setTitle(`${this.language["Realtime Delay"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.renderedOnce=!0,this.dtOptions={pagingType:"full_numbers",pageLength:-1,paging:!1,lengthChange:!0,info:!1,processing:!1,dom:"tipr",ordering:!1,destroy:!0},this.tableLanguageOptions(),this.getData(!1),this.getDelayData(!0,!1)}ngAfterViewInit(){this.loaded=!0,this.dtTrigger.next()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.Delaydata&&this.Delaydata.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe()}getData(t){this.loading=!0,this.listSubs=this.service.getOrg(this.ORG_ID).subscribe(e=>{this.orgData=e,e&&this.orgData&&null!=this.orgData.realtimeLateflowDelay&&(this.delay=Math.ceil(this.orgData.realtimeLateflowDelay/60)),this.loading=!1,t&&(this.warningmsg=!0)},t=>{this.pageErrorHandle(t)})}changeDelay(t){var e,i,a,n;"."===t.key&&t.preventDefault(),this.showButton=!(!this.delay||(!(null===(e=this.orgData)||void 0===e?void 0:e.realtimeLateflowDelay)||(null===(i=this.orgData)||void 0===i?void 0:i.realtimeLateflowDelay)/60===this.delay)&&(null===(a=this.orgData)||void 0===a?void 0:a.realtimeLateflowDelay)&&(null===(n=this.orgData)||void 0===n?void 0:n.realtimeLateflowDelay)/60===this.delay),this.delay=parseInt(this.delay)}validateTimeDelay(){if(!this.delay||isNaN(this.delay)||this.delay<1||this.delay>5)return this.infoBody=this.language["Late Delay should be between 1 to 5 Minutes"],this.closeModal(),void(this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1}));this.openConfirmModal()}openConfirmModal(){this.infoTitle=this.language["Confirm change :"],this.infoBody=`${this.language.LateDelay}: ${this.delay} ${this.language["Minute(s)"]}`,this.closeModal(),this.modalRef=this.dialogService.open(this.confirmModal,{backdrop:"static",keyboard:!1})}save(){this.loading=!0,this.commonOrgService.closeAlert(),this.updateSubs=this.service.updateOrgPatch(this.ORG_ID,{realtimeLateflowDelay:60*this.delay}).subscribe(t=>{this.orgData=t,this.loading=!1,this.showButton=!1,this.getData(!0),this.getDelayData(!0,!1),this.closeModal()},t=>{this.closeModal(),this.pageErrorHandle(t)})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(t,e){let i="";400==t.status?(this.infoBody=null===t.error?this.language["Invalid Request"]:this.commonOrgService.pageInvalidRqstErrorHandle(t),this.infoTitle="Error",this.openInfoModal(),this.loading=!1):(401==t.status?i=this.language["Access Denied"]:(i=this.commonOrgService.pageErrorHandle(t),404==t.status&&"Invalid organization provided for update"==i&&(i=this.language["Invalid Late Delay value provided for update"])),this.commonOrgService.openErrorAlert(i),this.commonOrgService.pageScrollTop(),this.loading=!1)}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}getDelayData(t,e){this.loading=!0;let i=e;this.Delaydata=this.service.getDelay(this.ORG_ID).subscribe(t=>{var e,a,n,s,o,l,g;this.loading=!1,this.delaydata=t||{};let r=(null===(a=null===(e=this.delaydata)||void 0===e?void 0:e.summarize)||void 0===a?void 0:a.length)-1;this.interval=[];for(let i=0;i<(null===(s=null===(n=this.delaydata)||void 0===n?void 0:n.summarize)||void 0===s?void 0:s.length);i++){if(0==i&&(this.intvalue=`${null===(o=this.delaydata)||void 0===o?void 0:o.curDelay} +`),i!==r){var u=i+(null===(l=this.delaydata)||void 0===l?void 0:l.curDelay);this.intvalue=`${u} +`}i===r&&(u=i+(null===(g=this.delaydata)||void 0===g?void 0:g.curDelay),this.intvalue=`${u} +`),this.delaydata.summarize[i].interval=this.intvalue,this.interval.push(this.intvalue)}this.renderTable(!1),i&&(this.warningmsg=!1)},t=>{this.loading=!1,this.delaydata=t,this.renderTable(!1),i&&(this.warningmsg=!1)})}renderTable(t){this.tableLanguageOptions(),this.renderedOnce?(this.rerender(),this.loading=!1):(this.rerender(),this.renderedOnce=!0,this.loading=!1)}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next()})}tableLanguageOptions(){"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.translateService.de_DE:"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}bitsToSize(t,e,i){if(!+t)return"0";const a=i<0?0:i,n=Math.floor(Math.log(t)/Math.log(1e3));return`${parseFloat((t/Math.pow(1e3,n)).toFixed(a))} ${["","K","M","G","T","P","E","Z","Y"][n]}`}getChartFormat(t){let e=new Date(t);return`${new a.uU("en-US").transform(e,"YYYY-MM-dd HH:mm:ss")}`}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s.F0),o.Y36(g.t6),o.Y36(b.FF),o.Y36(f.v),o.Y36(p.s),o.Y36(r.U),o.Y36(m.Dx))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-realtime-delay"]],viewQuery:function(t,e){if(1&t&&(o.Gf(O,7),o.Gf(q,7),o.Gf(T.G,5)),2&t){let t;o.iGM(t=o.CRH())&&(e.infoModal=t.first),o.iGM(t=o.CRH())&&(e.confirmModal=t.first),o.iGM(t=o.CRH())&&(e.dtElement=t.first)}},decls:53,vars:19,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],[1,"row","my-3"],[1,"col-md-12"],[1,"fw100"],[1,"form-group","row"],["for","age",1,"col-sm-2"],[1,"error"],[1,"col-sm-10"],[1,"row"],[1,"ccl-form","col-sm-3"],["type","number","id","delay","placeholder","","name","delay","maxlength","1","min","1","max","5",1,"",3,"ngModel","ngModelChange","keyup","change"],[1,"col-sm-9","pl-0"],[1,"d-inline-flex","align-items-center"],[1,"age-out-days-text","pt-1","mr-2"],["type","button","id","apply-btn",1,"btn-default","btn-primary","px-2","mr-2",3,"disabled","click"],["class","error",4,"ngIf"],[1,"late-flow-table"],["id","refresh-data",1,"icon-btn",3,"click"],["aria-hidden","true",1,"fa","fa-refresh","primary"],["id","realtime-dt","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"row","col-md-12"],[1,"col-sm-6","pl-0"],[1,"age-out-days-text"],["infoModal",""],["confirmModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[3,"innerHtml"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,w,5,1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"form",4),o.TgZ(5,"div",5),o.TgZ(6,"label",6),o._uU(7),o.TgZ(8,"span",7),o._uU(9,"*"),o.qZA(),o.qZA(),o.TgZ(10,"div",8),o.TgZ(11,"div",9),o.TgZ(12,"div",10),o.TgZ(13,"input",11),o.NdJ("ngModelChange",function(t){return e.delay=t})("keyup",function(t){return e.changeDelay(t)})("change",function(t){return e.changeDelay(t)}),o.qZA(),o.qZA(),o.TgZ(14,"div",12),o.TgZ(15,"div",13),o.TgZ(16,"label",14),o._uU(17),o.qZA(),o.TgZ(18,"button",15),o.NdJ("click",function(){return e.validateTimeDelay()}),o._uU(19),o.qZA(),o.YNc(20,S,2,1,"div",16),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"div",9),o.TgZ(22,"div",3),o.TgZ(23,"div",17),o.TgZ(24,"button",18),o.NdJ("click",function(){return e.getDelayData(!1,!0)}),o._UZ(25,"i",19),o.qZA(),o.TgZ(26,"table",20),o.TgZ(27,"thead"),o.TgZ(28,"tr"),o.TgZ(29,"th"),o._uU(30),o.qZA(),o.TgZ(31,"th"),o._uU(32),o.qZA(),o.TgZ(33,"th"),o._uU(34),o.qZA(),o.TgZ(35,"th"),o._uU(36),o.qZA(),o.qZA(),o.qZA(),o.TgZ(37,"tbody"),o.YNc(38,x,16,7,"tr",21),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(39,"div",22),o.TgZ(40,"div"),o._uU(41),o.qZA(),o.qZA(),o.TgZ(42,"div",22),o.TgZ(43,"div"),o._uU(44),o.qZA(),o._uU(45,"\xa0 "),o.TgZ(46,"div",23),o.TgZ(47,"label",24),o._uU(48),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(49,D,10,3,"ng-template",null,25,o.W1O),o.YNc(51,C,13,4,"ng-template",null,26,o.W1O)),2&t&&(o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(6),o.hij("",e.language["Current Real-Time Delay"]," "),o.xp6(6),o.Q6J("ngModel",e.delay),o.xp6(4),o.Oqu(e.language["Minute(s)"]),o.xp6(1),o.Q6J("disabled",!e.showButton),o.xp6(1),o.hij("",e.language.submit," "),o.xp6(1),o.Q6J("ngIf",e.warningmsg),o.xp6(6),o.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),o.xp6(4),o.hij(" ",e.language.lateMinute," "),o.xp6(2),o.hij(" ",e.language["Late 5 mins"]," "),o.xp6(2),o.hij(" ",e.language["Late 10 mins"]," "),o.xp6(2),o.hij(" ",e.language["Late 15 mins"]," "),o.xp6(2),o.Q6J("ngForOf",null==e.delaydata?null:e.delaydata.summarize),o.xp6(3),o.AsE("",e.language["Last Reported Time"],": ",null!=e.delaydata&&e.delaydata.lastUpdateTime?e.getChartFormat(null==e.delaydata?null:e.delaydata.lastUpdateTime):"",""),o.xp6(3),o.AsE("",e.language["Effective Real-time delay"],": ",null!=e.delaydata&&e.delaydata.curDelay?null==e.delaydata?null:e.delaydata.curDelay:"",""),o.xp6(4),o.Oqu(e.language["Minute(s)"]))},directives:[a.O5,n._Y,n.JL,n.F,n.qQ,n.Fd,n.wV,n.Fj,n.nD,n.JJ,n.On,T.G,a.sg],styles:[".late-flow-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.late-flow-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px;padding-bottom:7px;border-bottom:1px solid #CCCCCC}.icon-btn[_ngcontent-%COMP%]{border:none;background-color:transparent;outline:0;float:right}.icon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0279ff;font-size:16px;cursor:pointer}#apply-btn[_ngcontent-%COMP%]{min-width:90px}"]}),t})();const k=["infoModal"];function U(t,e){1&t&&(o.TgZ(0,"div",14),o.TgZ(1,"div",15),o.TgZ(2,"div",16),o.TgZ(3,"span",17),o._uU(4,"Loading..."),o.qZA(),o.qZA(),o.qZA(),o.qZA())}function I(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",18),o.TgZ(1,"h4",19),o._uU(2),o.qZA(),o.TgZ(3,"button",20),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._UZ(4,"span",21),o.qZA(),o.qZA(),o.TgZ(5,"div",22),o._uU(6),o.qZA(),o.TgZ(7,"div",23),o.TgZ(8,"button",24),o.NdJ("click",function(){return o.CHM(t),o.oxw().closeModal()}),o._uU(9),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.Oqu(t.infoTitle),o.xp6(4),o.hij(" ",t.infoBody," "),o.xp6(3),o.Oqu(t.language.Okay)}}let L=(()=>{class t{constructor(t,e,i,a,n,s,o){this.translateService=t,this.titleService=e,this.router=i,this.sso=a,this.service=n,this.commonOrgService=s,this.dialogService=o,this.unmappedIpAggregationStatus=!1,this.showButton=!1;const l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.language=this.translateService.defualtLanguage,this.translateService.selectedLanguage.subscribe(t=>{this.language=t,this.titleService.setTitle(`${this.language["Unmapped IP Aggregation"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)});const g=this.sso.getRedirectModule(l);this.titleService.setTitle(`${this.language["Unmapped IP Aggregation"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.getData()}ngOnDestroy(){this.orgSubs&&this.orgSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe()}getData(){this.loading=!0,this.orgSubs=this.service.getOrg(this.ORG_ID).subscribe(t=>{this.orgData=t,this.orgData&&this.orgData&&this.orgData.entitlement&&this.orgData.entitlement.length?(this.unmappedIpAggregationStatus=!!this.orgData.entitlement.split(",").includes("ALLOWUNMAPPED"),this.orgData.entitlement.split(",").includes("ALLOWUNMAPPED")):this.unmappedIpAggregationStatus=!1,this.loading=!1},t=>{this.pageErrorHandle(t)})}submit(){this.loading=!0,this.commonOrgService.closeAlert(),this.updateSubs=this.service.addUnmappedIdAggregation(this.ORG_ID,this.unmappedIpAggregationStatus).subscribe(t=>{this.loading=!1,this.showButton=!1,this.getData(),this.closeModal()},t=>{this.closeModal(),this.getData(),this.pageErrorHandle(t)})}changeUnmappedIpAggregation(){var t,e,i;this.unmappedIpAggregationStatus=!this.unmappedIpAggregationStatus;const a=!!(null===(i=null===(e=null===(t=this.orgData)||void 0===t?void 0:t.entitlement)||void 0===e?void 0:e.split(","))||void 0===i?void 0:i.includes("ALLOWUNMAPPED"));this.showButton=this.unmappedIpAggregationStatus!==a}closeModal(){this.modalRef&&this.modalRef.close()}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}pageErrorHandle(t){let e="";400==t.status||404==t.status?(this.infoBody=null===t.error?this.language["Invalid Request"]:this.commonOrgService.pageInvalidRqstErrorHandle(t),this.infoTitle="Error",this.openInfoModal(),this.loading=!1):(401==t.status&&(e=this.language["Access Denied"]),this.commonOrgService.openErrorAlert(e),this.commonOrgService.pageScrollTop(),this.loading=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(p.s),o.Y36(m.Dx),o.Y36(s.F0),o.Y36(g.t6),o.Y36(r.U),o.Y36(f.v),o.Y36(b.FF))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-unmapped-ip-aggregation"]],viewQuery:function(t,e){if(1&t&&o.Gf(k,7),2&t){let t;o.iGM(t=o.CRH())&&(e.infoModal=t.first)}},decls:23,vars:6,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],[1,"row","my-3","p-2"],[1,"col-12"],[1,"w-100"],[1,"row"],[1,"col-md-3","col-lg-3","col-xl-3"],[1,"toggle-swtbtn","checkbox","switcher"],["for","UnmappedIpAggregationSwitch"],["type","checkbox","name","status","id","UnmappedIpAggregationSwitch",3,"checked","change"],[1,"ml-3"],[1,"col-12","mt-2"],["type","submit","id","unmapped-ip-sub-btn",1,"btn-default","btn-primary","mr-3",3,"disabled","click"],["infoModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,U,5,0,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"form",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"label"),o._uU(8),o.qZA(),o.qZA(),o.TgZ(9,"div",6),o.TgZ(10,"div",7),o.TgZ(11,"label",8),o.TgZ(12,"input",9),o.NdJ("change",function(){return e.changeUnmappedIpAggregation()}),o.qZA(),o.TgZ(13,"span"),o._UZ(14,"small"),o.qZA(),o.qZA(),o.TgZ(15,"label",10),o._uU(16),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"div",5),o.TgZ(18,"div",11),o.TgZ(19,"button",12),o.NdJ("click",function(){return e.submit()}),o._uU(20),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(21,I,10,3,"ng-template",null,13,o.W1O)),2&t&&(o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(7),o.Oqu(e.language["Unmapped IP Aggregation"]),o.xp6(4),o.Q6J("checked",e.unmappedIpAggregationStatus),o.xp6(4),o.Oqu(e.unmappedIpAggregationStatus?e.language.enabled:e.language.Disabled),o.xp6(3),o.Q6J("disabled",!e.showButton),o.xp6(1),o.hij(" ",e.language.submit," "))},directives:[a.O5,n._Y,n.JL,n.F],styles:[".switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:not(:checked):disabled + span[_ngcontent-%COMP%]{border-color:#93c5ff;cursor:not-allowed}.switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:not(:checked):disabled + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{background:#93C5FF}.switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:disabled + span[_ngcontent-%COMP%]{background:#93C5FF;border-color:#93c5ff;cursor:not-allowed}.switcher[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:disabled + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{background:#fff}"]}),t})();var P=i(86640);const R=["infoModal"];function E(t,e){if(1&t&&(o.TgZ(0,"div",10),o.TgZ(1,"div",11),o.TgZ(2,"div",12),o.TgZ(3,"span",13),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(4),o.Oqu(t.language.Loading)}}function $(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",14),o.TgZ(1,"span",15),o._UZ(2,"img",16),o.qZA(),o.TgZ(3,"button",17),o.NdJ("click",function(){return o.CHM(t),o.oxw().success=!1}),o._UZ(4,"span"),o.qZA(),o.TgZ(5,"div",18),o._uU(6),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(6),o.hij(" ",t.language["Changes saved successfully"]," ")}}function Y(t,e){if(1&t&&(o.TgZ(0,"div",19),o._uU(1),o.qZA(),o.TgZ(2,"div",20),o._uU(3),o.qZA()),2&t){const t=e.item;o.s9C("title",t.name),o.xp6(1),o.hij(" ",t.name," "),o.xp6(1),o.s9C("title",t.content),o.xp6(1),o.hij(" ",t.content," ")}}const J=[{path:"",component:h,children:[{path:"realtime-delay",component:_,data:{title:"Calix Cloud - Flow Configuration"}},{path:"one-minute-agggregation",component:y,data:{title:"Calix Cloud - Flow Configuration"}},{path:"flow-data",component:(()=>{class t{constructor(t,e,i,a,n,s,o){this.router=t,this.dialogService=e,this.sso=i,this.commonOrgService=a,this.translateService=n,this.service=s,this.titleService=o,this.loading=!1,this.showButton=!1,this.languageChange=!1,this.useAsmApplication=!0,this.success=!1,this.dataSourceItems=[];const l=this.router.url;this.ORG_ID=this.sso.getOrganizationID(l),this.language=this.translateService.defualtLanguage,this.translateSubscribe=this.translateService.selectedLanguage.subscribe(t=>{this.language=t,this.titleService.setTitle(`${this.language["ASM Application"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.MODULE=this.sso.getRedirectModule(l),this.titleService.setTitle(`${this.language["ASM Application"]} - ${this.language.Configurations} - ${this.language.flowconfiguration} - ${"systemAdministration"===this.MODULE?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.language=this.translateService.defualtLanguage,this.translateService.selectedLanguage.subscribe(t=>{this.language=t}),this.dataSourceItems=[{name:this.language["Use ASM applications data"],value:!0,content:this.language["Uses information detected in IPFIX data provided from AXOS systems"]},{name:this.language["Use application data defined by my organization"],value:!1,content:this.language["Uses definitions from the Applications > Definitions tab"]}],this.getData()}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.listSubs&&this.listSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe()}getData(){this.loading=!0,this.listSubs=this.service.getOrg(this.ORG_ID).subscribe(t=>{t?(this.orgData=t,this.useAsmApplication=null==t?void 0:t.useAsmApplications):this.showButton=!0,this.loading=!1},t=>{this.pageErrorHandle(t)})}closeModal(){this.modalRef&&this.modalRef.close()}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal)}save(){this.loading=!0,this.commonOrgService.closeAlert(),this.updateSubs=this.service.updateOrgPatch(this.ORG_ID,{useAsmApplications:this.useAsmApplication}).subscribe(t=>{this.useAsmApplication=null==t?void 0:t.useAsmApplications,this.useAsmApplication||this.routeToRealTimeDelay(),this.loading=!1,this.showButton=!1,this.success=!0,this.getData()},t=>{this.closeModal(),this.pageErrorHandle(t)})}detectChange(t){var e;this.showButton=this.useAsmApplication!==(null===(e=this.orgData)||void 0===e?void 0:e.useAsmApplications)}pageErrorHandle(t,e){let i="";400==t.status?(this.infoBody=null===t.error?this.language["Invalid Request"]:this.commonOrgService.pageInvalidRqstErrorHandle(t),this.infoTitle="Error",this.openInfoModal(),this.loading=!1):(i=401==t.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(t),this.commonOrgService.openErrorAlert(i),this.commonOrgService.pageScrollTop(),this.loading=!1)}routeToRealTimeDelay(){this.service.flowDataSync.next({flowDataTab:!1}),this.router.navigateByUrl(`/${this.MODULE}/flowAnalyze/configurations/realtime-delay`)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s.F0),o.Y36(b.FF),o.Y36(g.t6),o.Y36(f.v),o.Y36(p.s),o.Y36(r.U),o.Y36(m.Dx))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-flow-data"]],viewQuery:function(t,e){if(1&t&&o.Gf(R,7),2&t){let t;o.iGM(t=o.CRH())&&(e.infoModal=t.first)}},decls:12,vars:9,consts:[[1,"container","px-0","position-relative"],["class","loader",4,"ngIf"],[1,"row"],[1,"col-6","ccl-form","mt-3"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],[1,"mb-0"],["width","100%","bindValue","value","bindLabel","name",1,"ng-select-datasource",3,"items","clearable","searchable","ngModel","ngModelChange","change"],["ng-option-tmp",""],[1,"col-12"],["type","button",1,"btn-default","btn-primary","mt-3",3,"disabled","click"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"mr-3"],["src","../../../../assets/img/ic_success-circle-outline.svg","width","24px"],["type","button",1,"close",3,"click"],[1,"d-inline-flex"],[1,"text-truncate",3,"title"],[1,"text-truncate","select-muted-text",3,"title"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,E,5,1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.YNc(4,$,7,1,"div",4),o.TgZ(5,"label",5),o._uU(6),o.qZA(),o.TgZ(7,"ng-select",6),o.NdJ("ngModelChange",function(t){return e.useAsmApplication=t})("change",function(t){return e.detectChange(t)}),o.YNc(8,Y,4,4,"ng-template",7),o.qZA(),o.qZA(),o.TgZ(9,"div",8),o.TgZ(10,"button",9),o.NdJ("click",function(){return e.save()}),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",e.loading),o.xp6(3),o.Q6J("ngIf",e.success),o.xp6(2),o.Oqu(e.language["Data Source"]),o.xp6(1),o.Q6J("items",e.dataSourceItems)("clearable",!1)("searchable",!1)("ngModel",e.useAsmApplication),o.xp6(3),o.Q6J("disabled",!e.showButton),o.xp6(1),o.hij(" ",e.language.save," "))},directives:[a.O5,P.w9,n.JJ,n.On,P.Z2],styles:[".select-muted-text[_ngcontent-%COMP%]{color:gray}  .ng-select-datasource .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{height:auto!important}"]}),t})(),data:{title:"Calix Cloud - Flow Data"}},{path:"unmapped-ip-aggregation",component:L,data:{title:"Calix Cloud - Flow Configuration"}},{path:"",redirectTo:"realtime-delay",pathMatch:"full"}]}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.Bz.forChild(J)],s.Bz]}),t})();var N=i(23830);let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[a.ez,n.u5,F,T.T,P.A0,N.o]]}),t})()}}]);