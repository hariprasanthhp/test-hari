!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?r:String(r)),n)}var a,r}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[218],{70218:function(t,n,r){r.r(n),r.d(n,{EndpointModule:function(){return Wt}});var s=r(38583),o=r(3679),l=r(39895),c=r(37716),u=r(30900),d=r(38048),g=function(){return["active"]};function p(e,t){if(1&e&&(c.TgZ(0,"li",5),c.TgZ(1,"a",6),c._uU(2),c.qZA(),c.qZA()),2&e){var i=t.$implicit;c.xp6(1),c.s9C("id",i.title),c.s9C("routerLink",i.link),c.Q6J("routerLinkActive",c.DdM(4,g)),c.xp6(1),c.Oqu(i.title)}}function h(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"ul",3),c.YNc(2,p,3,5,"li",4),c.qZA(),c.qZA()),2&e){var i=c.oxw();c.xp6(2),c.Q6J("ngForOf",i.menus)}}var m,f=((m=function(){function e(t,n,a){i(this,e),this.router=t,this.customTranslateService=n,this.sso=a,this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.MODULE=this.sso.getRedirectModule(this.router.url)}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(function(t){e.language=t,e.menus[0].title=e.language.mappingsource,e.menus[1].title=e.language.management,e.menus[2].title=e.language.subnet,e.menus[3].title=e.language.settings}),this.menus=[{title:this.language.mappingsource,link:"mapping_source",subMenuLink:"/".concat(this.MODULE,"/flowAnalyze/endpoint/mapping_source")},{title:this.language.management,link:"management",subMenuLink:"/".concat(this.MODULE,"/flowAnalyze/endpoint/management")},{title:this.language.subnet,link:"subnets",subMenuLink:"/".concat(this.MODULE,"/flowAnalyze/endpoint/subnets")},{title:this.language.settings,link:"settings",subMenuLink:"/".concat(this.MODULE,"/flowAnalyze/endpoint/settings")}],this.activeRoute=this.router.url}},{key:"languageChange",value:function(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}},{key:"goPage",value:function(e){this.router.navigate([e])}},{key:"pageChange",value:function(e){this.activeRoute=e.subMenuLink}},{key:"onActivate",value:function(e){window.scroll({top:0,left:0,behavior:"smooth"})}}]),e}()).\u0275fac=function(e){return new(e||m)(c.Y36(l.F0),c.Y36(u.d),c.Y36(d.t6))},m.\u0275cmp=c.Xpm({type:m,selectors:[["app-endpoint"]],decls:2,vars:1,consts:[["class","flow-config-sub-tab",4,"ngIf"],[3,"activate"],[1,"flow-config-sub-tab"],[1,"nav"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"id","routerLink","routerLinkActive"]],template:function(e,t){1&e&&(c.YNc(0,h,3,1,"div",0),c.TgZ(1,"router-outlet",1),c.NdJ("activate",function(e){return t.onActivate(e)}),c.qZA()),2&e&&c.Q6J("ngIf",t.pageAvailable)},directives:[s.O5,l.lC,s.sg,l.yS,l.Od],styles:[""]}),m),b=r(23771),v=r(79765),Z=r(35758),_=r(92340),x=r(404),A=r(89044),y=r(91841),T=r(13149),C=r(93822),I=r(12664),D=r(49342),S=r(7450),k=r(39075),O=r(20904),M=r(86640),w=["infoModal"],q=["deleteModal"],R=["multiDeleteModal"],N=["importModal"],E=["importFullInput"],P=["importInput"],U=["aggGroupsModal"];function F(e,t){if(1&e&&(c.TgZ(0,"div",16),c.TgZ(1,"div",17),c.TgZ(2,"div",18),c.TgZ(3,"span",19),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw();c.xp6(4),c.Oqu(i.language.Loading)}}function J(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",20),c.TgZ(1,"div",21),c.TgZ(2,"div",22),c.TgZ(3,"div"),c.TgZ(4,"button",23),c.NdJ("click",function(){return c.CHM(i),c.oxw().showCreate()}),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"div"),c.TgZ(7,"button",24),c.NdJ("click",function(){return c.CHM(i),c.oxw().export()}),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"div",25),c.TgZ(10,"button",26),c.NdJ("click",function(){return c.CHM(i),c.oxw().fullImportUpload()}),c._uU(11),c.qZA(),c.TgZ(12,"input",27,28),c.NdJ("change",function(e){return c.CHM(i),c.oxw().fullImport(e,!0)}),c.qZA(),c.qZA(),c.TgZ(14,"div",25),c.TgZ(15,"label",29),c._uU(16),c.qZA(),c.TgZ(17,"input",30,31),c.NdJ("change",function(e){return c.CHM(i),c.oxw().fullImport(e,!1)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",32),c.TgZ(20,"div",33),c._UZ(21,"input",34),c.TgZ(22,"button",35),c._UZ(23,"i",36),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.Oqu(n.language.create),c.xp6(3),c.Oqu(n.language.exportAssigned),c.xp6(3),c.Oqu(n.language.fullImportAssigned),c.xp6(5),c.hij("",n.language.incrementalImportAssigned," ")}}var H=function(){return{standalone:!0}};function L(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"section"),c.TgZ(1,"div",37),c.TgZ(2,"div",38),c.TgZ(3,"form"),c.TgZ(4,"div",39),c.TgZ(5,"div",40),c.TgZ(6,"label",41),c._uU(7),c.TgZ(8,"span",42),c._uU(9,"*"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",43),c.TgZ(11,"ng-select",44),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().subnetVersionsSelected=e})("change",function(){return c.CHM(i),c.oxw().subnetVerChoose()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",39),c.TgZ(13,"div",40),c.TgZ(14,"label",41),c._uU(15),c.qZA(),c.qZA(),c.TgZ(16,"div",43),c._UZ(17,"label",45),c.TgZ(18,"input",46),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().newIpv4=e})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("newIpv4",e.newIpv4)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",39),c.TgZ(20,"div",40),c.TgZ(21,"label",41),c._uU(22),c.qZA(),c.qZA(),c.TgZ(23,"div",43),c._UZ(24,"label",45),c.TgZ(25,"input",47),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().newIpv6=e})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("newIpv6",e.newIpv6)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",39),c.TgZ(27,"div",40),c.TgZ(28,"label",41),c._uU(29),c.TgZ(30,"span",42),c._uU(31,"*"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(32,"div",43),c._UZ(33,"label",45),c.TgZ(34,"input",48),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().createName=e})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("createName",e.createName)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"div",49),c.TgZ(36,"div",50),c._UZ(37,"label",51),c.qZA(),c.TgZ(38,"button",52),c.NdJ("click",function(){return c.CHM(i),c.oxw().submit()}),c._uU(39),c.qZA(),c.TgZ(40,"button",53),c.NdJ("click",function(){return c.CHM(i),c.oxw().hideCreate()}),c._uU(41),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(7),c.hij("",n.language.ip," "),c.xp6(4),c.Q6J("items",n.subnetVersions)("multiple",!1)("ngModel",n.subnetVersionsSelected)("ngModelOptions",c.DdM(17,H))("clearable",!1)("searchable",!1),c.xp6(4),c.Oqu(n.language.ipv4),c.xp6(3),c.Q6J("ngModel",n.newIpv4)("disabled","IP-V6"==n.subnetVersionsSelected),c.xp6(4),c.Oqu(n.language.ipv6),c.xp6(3),c.Q6J("ngModel",n.newIpv6)("disabled","IP-V4"==n.subnetVersionsSelected),c.xp6(4),c.hij("",n.language.name," "),c.xp6(5),c.Q6J("ngModel",n.createName),c.xp6(5),c.Oqu(n.language.submit),c.xp6(2),c.Oqu(n.language.Cancel)}}function j(e,t){if(1&e&&(c.TgZ(0,"tr",62),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.qZA()),2&e){var i=t.$implicit;c.s9C("id",i.id),c.xp6(2),c.Oqu(i.action),c.xp6(2),c.Oqu(i.name?i.name:""),c.xp6(2),c.Oqu(i.ipAddress?i.ipAddress:""),c.xp6(2),c.Oqu(i.ipAddress_old?i.ipAddress_old:"")}}function V(e,t){if(1&e&&(c.TgZ(0,"div",9),c.TgZ(1,"div",59),c.TgZ(2,"table",60),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th"),c._uU(6),c.qZA(),c.TgZ(7,"th"),c._uU(8),c.qZA(),c.TgZ(9,"th"),c._uU(10),c.qZA(),c.TgZ(11,"th"),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,j,9,5,"tr",61),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw(2);c.xp6(2),c.Q6J("dtOptions",i.importTableOptions),c.xp6(4),c.Oqu(i.language.action),c.xp6(2),c.Oqu(i.language.name),c.xp6(2),c.Oqu(i.language.ip),c.xp6(2),c.AsE("",i.language.old," ",i.language.ip,""),c.xp6(2),c.Q6J("ngForOf",i.importTableData)}}function B(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"section"),c.YNc(1,V,15,7,"div",54),c.TgZ(2,"div",55),c.TgZ(3,"div",56),c.TgZ(4,"button",57),c.NdJ("click",function(){return c.CHM(i),c.oxw().importSubmit(!1)}),c._uU(5),c.qZA(),c.TgZ(6,"button",58),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeImport()}),c._uU(7),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.tablePreview),c.xp6(3),c.Q6J("disabled",!n.enableImportSubmit),c.xp6(1),c.Oqu(n.language.submit),c.xp6(2),c.Oqu(n.language.Cancel)}}function Y(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",80),c.TgZ(1,"div",65),c.TgZ(2,"span",81),c.TgZ(3,"div",82),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw(3).edit(e)}),c._UZ(4,"i",83),c.qZA(),c.qZA(),c.TgZ(5,"span",81),c.TgZ(6,"input",84),c.NdJ("click",function(e){c.CHM(i);var t=c.oxw().$implicit;return c.oxw(3).getDeleteIds(e,t)}),c.qZA(),c.qZA(),c.TgZ(7,"span",81),c.TgZ(8,"div",85),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw(3).delete(e)}),c._UZ(9,"i",71),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw().$implicit,a=c.oxw(3);c.xp6(3),c.s9C("title",a.language.Edit),c.Q6J("ngClass",n.assignedName?"":"disabled"),c.xp6(3),c.Gre("delete_id_",n.id,""),c.s9C("value",n.id),c.MGl("name","delete_id_",n.id,""),c.s9C("title",a.language.Select),c.xp6(2),c.s9C("title",a.language.Delete)}}function Q(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",86),c.TgZ(1,"div",65),c.TgZ(2,"span",87),c.TgZ(3,"div",88),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw(3).updateSave(e.id)}),c._UZ(4,"i",89),c.qZA(),c.qZA(),c.TgZ(5,"span",87),c.TgZ(6,"div",90),c.NdJ("click",function(){return c.CHM(i),c.oxw(4).updateCancel()}),c._UZ(7,"i",91),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}function G(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){var i=c.oxw().$implicit;c.xp6(1),c.hij(" ",i.name?i.name:""," ")}}function $(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",33),c.TgZ(1,"input",92),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(4).editName=e}),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(4);c.xp6(1),c.Q6J("ngModel",n.editName)("ngModelOptions",c.DdM(2,H))}}function z(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){var i=c.oxw().$implicit;c.xp6(1),c.hij(" ",i.ipAddress?i.ipAddress:""," ")}}function K(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",93),c.TgZ(1,"ng-select",94),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(4).editIPVersionsSelected=e}),c.qZA(),c.TgZ(2,"input",95),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(4).editIPAddress=e})("blur",function(){c.CHM(i);var e=c.oxw(4);return e.removeUnwantedSpace("editIPAddress",e.editIPAddress)}),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(4);c.xp6(1),c.Q6J("items",n.subnetVersions)("multiple",!1)("ngModel",n.editIPVersionsSelected)("ngModelOptions",c.DdM(8,H))("clearable",!1)("searchable",!1),c.xp6(1),c.Q6J("ngModel",n.editIPAddress)("ngModelOptions",c.DdM(9,H))}}function W(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"span",96),c.TgZ(1,"span",97),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw(3).openAggregatedGroupsModal(e)}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(4);c.xp6(2),c.Oqu(n.language.show?n.language.show:"Show")}}function X(e,t){if(1&e&&(c.TgZ(0,"tr",62),c.TgZ(1,"td",64),c.YNc(2,Y,10,9,"div",75),c.YNc(3,Q,8,0,"div",76),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.YNc(6,G,2,1,"div",3),c.YNc(7,$,2,3,"div",77),c.qZA(),c.TgZ(8,"td"),c.YNc(9,z,2,1,"div",3),c.YNc(10,K,3,10,"div",78),c.qZA(),c.TgZ(11,"td",74),c.TgZ(12,"div"),c._uU(13),c.qZA(),c.qZA(),c.TgZ(14,"td",74),c._uU(15),c.YNc(16,W,3,1,"span",79),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=c.oxw(3);c.s9C("id",i.id),c.xp6(2),c.Q6J("ngIf",n.editOnValue!=i.id),c.xp6(1),c.Q6J("ngIf",n.editOnValue==i.id),c.xp6(2),c.hij(" ",i.name?i.name:""," "),c.xp6(1),c.Q6J("ngIf",n.editOnValue!=i.id&&0),c.xp6(1),c.Q6J("ngIf",n.editOnValue==i.id&&0),c.xp6(2),c.Q6J("ngIf",n.editOnValue!=i.id),c.xp6(1),c.Q6J("ngIf",n.editOnValue==i.id),c.xp6(3),c.hij(" ",i.ipAddress&&i.mappedBy?i.mappedBy:""," "),c.xp6(2),c.hij(" ",n.isAggregatedGroupAvail(i)?n.language.Yes:n.language.No," "),c.xp6(1),c.Q6J("ngIf",n.isAggregatedGroupAvail(i))}}function ee(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,X,17,11,"tr",61),c.qZA()),2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",i.managementData)}}function te(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td",98),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw(2);c.xp6(3),c.Oqu(i.filterAndSearchFlag?i.language["No matching records found"]:i.language["No data available in table"])}}function ie(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",59),c.TgZ(1,"table",63),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"th",64),c.TgZ(5,"div",65),c.TgZ(6,"div",66),c.TgZ(7,"input",67),c.NdJ("change",function(e){return c.CHM(i),c.oxw().selectDeselectAll(e.target.checked)}),c.qZA(),c.TgZ(8,"span",68),c.NdJ("click",function(e){return c.CHM(i),c.oxw().showAllInnerCheckBox(e)}),c.qZA(),c.qZA(),c.TgZ(9,"div",69),c.TgZ(10,"button",70),c.NdJ("click",function(){return c.CHM(i),c.oxw().deleteAllSelected()}),c._UZ(11,"i",71),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"th",72),c._uU(14),c.qZA(),c.TgZ(15,"th",73),c._uU(16),c.qZA(),c.TgZ(17,"th",74),c._uU(18),c.qZA(),c.TgZ(19,"th",74),c._uU(20),c.qZA(),c.qZA(),c.qZA(),c.YNc(21,ee,2,1,"tbody",3),c.YNc(22,te,4,1,"tbody",3),c._UZ(23,"tbody"),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(1),c.Q6J("dtOptions",n.dtOptions),c.xp6(5),c.Q6J("hidden",n.editOnValue),c.xp6(1),c.Q6J("hidden",n.editOnValue)("disabled",0==(null==n.managementData?null:n.managementData.length)),c.xp6(1),c.Q6J("hidden",n.editOnValue),c.xp6(1),c.Q6J("hidden",n.editOnValue),c.xp6(1),c.Q6J("disabled",!(null!=n.managementData&&n.managementData.length&&null!=n.deleteIds&&n.deleteIds.length)),c.xp6(2),c.hij(" ",n.language.selected," "),c.xp6(2),c.Oqu(n.language.name),c.xp6(2),c.Oqu(n.language.ip),c.xp6(2),c.Oqu(n.language.namerule),c.xp6(2),c.Oqu(n.language["Aggregated Groups"]),c.xp6(1),c.Q6J("ngIf",0!=(null==n.managementData?null:n.managementData.length)),c.xp6(1),c.Q6J("ngIf",(!(null!=n.managementData&&n.managementData.length)||null!=n.tableCount&&0==n.tableCount||null!=n.filterCount&&0==n.filterCount)&&!n.filterLoading)}}function ne(e,t){if(1&e&&(c.TgZ(0,"li",111),c._uU(1),c.qZA()),2&e){var i=t.$implicit;c.xp6(1),c.Oqu(i.name)}}function ae(e,t){if(1&e&&(c.TgZ(0,"ul",109),c.YNc(1,ne,2,1,"li",110),c.qZA()),2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",i.invalidImportEndPoint)}}function re(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",99),c.TgZ(1,"h4",100),c._uU(2),c.qZA(),c.TgZ(3,"button",101),c.NdJ("click",function(){c.CHM(i);var e=c.oxw();return e.closeModal(),e.editOnValue=void 0,e.getTableCount(!0)}),c._UZ(4,"span",102),c.qZA(),c.qZA(),c.TgZ(5,"div",103),c.TgZ(6,"p",104),c._uU(7),c.qZA(),c.TgZ(8,"div",105),c.TgZ(9,"p",104),c._uU(10),c.qZA(),c.YNc(11,ae,2,1,"ul",106),c.qZA(),c.qZA(),c.TgZ(12,"div",107),c.TgZ(13,"button",108),c.NdJ("click",function(){c.CHM(i);var e=c.oxw();return e.closeModal(),e.editOnValue=void 0,e.getTableCount(!0)}),c._uU(14),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(5),c.Oqu(n.invalidImportEndPoint.length?n.language.Note+" - "+n.language["No endpoints imported"]:""),c.xp6(3),c.Oqu(n.infoBody),c.xp6(1),c.Q6J("ngIf",n.invalidImportEndPoint.length),c.xp6(3),c.Oqu(n.language.Okay)}}function se(e,t){if(1&e){var i=c.EpF();c.ynx(0),c.TgZ(1,"div",99),c.TgZ(2,"h4",100),c._uU(3),c.qZA(),c.TgZ(4,"button",101),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(5,"span",102),c.qZA(),c.qZA(),c.TgZ(6,"div",112),c.TgZ(7,"table",105),c.TgZ(8,"tr"),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",107),c.TgZ(16,"button",108),c.NdJ("click",function(){c.CHM(i);var e=c.oxw();return e.closeModal(),e.confirmDelete()}),c._uU(17),c.qZA(),c.TgZ(18,"button",113),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(19),c.qZA(),c.qZA(),c.BQk()}if(2&e){var n=c.oxw();c.xp6(3),c.Oqu(n.infoTitle),c.xp6(7),c.Oqu(n.deleteData&&n.deleteData.name?n.deleteData.name:""),c.xp6(2),c.Oqu(n.deleteData&&n.deleteData.ipAddress?n.deleteData.ipAddress:""),c.xp6(2),c.Oqu(n.deleteData&&n.deleteData.mappedBy?n.deleteData.mappedBy:""),c.xp6(3),c.Oqu(n.language.Okay),c.xp6(2),c.Oqu(n.language.Cancel)}}function oe(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=t.index,a=c.oxw(2);c.xp6(2),c.Oqu(a.deleteEndpoints[n].name?a.deleteEndpoints[n].name:""),c.xp6(2),c.Oqu(i||""),c.xp6(2),c.Oqu(a.deleteEndpoints[n].mappedBy?a.deleteEndpoints[n].mappedBy:"")}}function le(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",99),c.TgZ(1,"h4",100),c._uU(2),c.qZA(),c.TgZ(3,"button",101),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",102),c.qZA(),c.qZA(),c.TgZ(5,"div",103),c.TgZ(6,"table",105),c.YNc(7,oe,7,3,"tr",114),c.qZA(),c.qZA(),c.TgZ(8,"div",107),c.TgZ(9,"button",108),c.NdJ("click",function(){c.CHM(i);var e=c.oxw();return e.closeModal(),e.confirmDeleteSecleted()}),c._uU(10),c.qZA(),c.TgZ(11,"button",113),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(12),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(5),c.Q6J("ngForOf",n.endpointIps),c.xp6(3),c.Oqu(n.language.Okay),c.xp6(2),c.Oqu(n.language.Cancel)}}function ce(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",99),c.TgZ(1,"h4",100),c._uU(2),c.qZA(),c.TgZ(3,"button",101),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",102),c.qZA(),c.qZA(),c.TgZ(5,"div",112),c._UZ(6,"table",115),c.qZA(),c.TgZ(7,"div",107),c.TgZ(8,"button",108),c.NdJ("click",function(){return c.CHM(i),c.oxw().proceedImport()}),c._uU(9),c.qZA(),c.TgZ(10,"button",113),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(11),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(4),c.Q6J("innerHtml",n.infoBody,c.oJD),c.xp6(3),c.Oqu(n.language.Okay),c.xp6(2),c.Oqu(n.language.Cancel)}}function ue(e,t){1&e&&(c.TgZ(0,"div",120),c.TgZ(1,"div",17),c.TgZ(2,"div",121),c._UZ(3,"span",19),c.qZA(),c.qZA(),c.qZA())}function de(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",122),c.TgZ(1,"span",123),c._UZ(2,"img",124),c.qZA(),c.TgZ(3,"button",125),c.NdJ("click",function(){c.CHM(i);var e=c.oxw(2);return e.aggError=!e.aggError}),c._UZ(4,"span"),c.qZA(),c._UZ(5,"div",126),c.qZA()}if(2&e){var n=c.oxw(2);c.xp6(5),c.Q6J("innerHtml",n.aggErrorInfo,c.oJD)}}function ge(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td",72),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td",72),c._uU(6),c.qZA(),c.qZA()),2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.name?i.name:""),c.xp6(2),c.Oqu(i.ipAddress?i.ipAddress:""),c.xp6(2),c.Oqu(i.ipAddress&&i.mappedBy?i.mappedBy:"")}}function pe(e,t){if(1&e&&(c.TgZ(0,"table",127),c.TgZ(1,"thead"),c.TgZ(2,"tr"),c.TgZ(3,"th",72),c._uU(4),c.qZA(),c.TgZ(5,"th"),c._uU(6),c.qZA(),c.TgZ(7,"th",72),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"tbody"),c.YNc(10,ge,7,3,"tr",114),c.qZA(),c.qZA()),2&e){var i=c.oxw(2);c.Q6J("dtOptions",i.aggTableOptions),c.xp6(4),c.Oqu(i.language.name),c.xp6(2),c.Oqu(i.language.ip),c.xp6(2),c.Oqu(i.language.mapped),c.xp6(2),c.Q6J("ngForOf",i.aggregatedGroups)}}function he(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",99),c.TgZ(1,"h4",100),c._uU(2),c.qZA(),c.TgZ(3,"button",101),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",102),c.qZA(),c.qZA(),c.TgZ(5,"div",116),c.YNc(6,ue,4,0,"div",117),c.YNc(7,de,6,1,"div",118),c.YNc(8,pe,11,5,"table",119),c.qZA(),c.TgZ(9,"div",107),c.TgZ(10,"button",108),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(11),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(4),c.Q6J("ngIf",n.aggregatedGroupsLoading),c.xp6(1),c.Q6J("ngIf",n.aggError),c.xp6(1),c.Q6J("ngIf",n.aggreDataAvail),c.xp6(3),c.Oqu(n.language.Close)}}var me=r(91704),fe=function(){var t=function(){function t(e,n,a,r,s,o,l,c,u,d,g,p){var h=this;i(this,t),this.commonFunctionsService=e,this.router=n,this.apiService=a,this.http=r,this.exportExcel=s,this.dataTablecreatorService=o,this.sso=l,this.dialogService=c,this.commonOrgService=u,this.translateService=d,this.titleService=g,this.common=p,this.pageAvailable=!1,this.subnetVersions=["IP-V4","IP-V6"],this.subnetVersionsSelected="IP-V4",this.tablePreview=!1,this.createSubnets=[],this.tableOptions={drawCallback:function(e){e.aoData.length<=e._iDisplayLength&&me(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.managementData=[],this.dtTrigger=new v.xQ,this.isRerender=!1,this.dtOptions={order:[1,"asc"],columnDefs:[{targets:[0],orderable:!1}],stateSave:!1},this.editIPAddress="",this.IPError=!1,this.nameError=!1,this.importTableOptions={pagingType:"full_numbers",pageLength:10,order:[0,"asc"],dom:"tipr"},this.filters=[{label:"IP",value:"ip_address"},{label:"Name",value:"name"},{label:"Mapped By",value:"mapped_by"}],this.filterBy={label:"IP",value:"ip_address"},this.filtersDev=[{label:"ALL",value:"NONE"},{label:"ASSIGNED",value:"ASSIGNED"},{label:"DHCP",value:"DHCP"},{label:"CC",value:"CC"},{label:"CUSTOM",value:"CUSTOM"},{label:"RADIUS",value:"RADIUS"},{label:"CMS",value:"CMS"},{label:"SMx",value:"SMx"}],this.filterByDev={label:"ALL",value:"NONE"},this.empty={IP:"",Name:""},this.storageData={},this.importTableData=[],this.enableImportSubmit=!1,this.buttonVisible=!0,this.assignedData=[],this.importDeleteData=[],this.importData=[],this.loading=!0,this.importUpdateASCreate=[],this.mappedData={},this.allManagementData=[],this.aggTableOptions={dom:"t",ordering:!1},this.columnName={ipAddress:"IP",name:"Name"},this.showTable=!1,this.filterAndSearchFlag=!1,this.invalidImportEndPoint=[],this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[];var m=this.router.url;this.ORG_ID=this.sso.getOrganizationID(m),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.exportColoumnNames={ipAddress:this.language.ip,name:this.language.name},this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){h.language=e,h.exportColoumnNames={ipAddress:h.language.ip,name:h.language.name},h.titleService.setTitle("".concat(h.language.management," - ").concat(h.language.end," - ").concat(h.language.flowconfiguration," - ").concat("systemAdministration"===f?h.language["System Administration"]:h.language.administration," - ").concat(h.language["Calix Cloud"])),h.reloadCurrentRoute(),h.setFilterOptions()});var f=this.sso.getRedirectModule(m);this.titleService.setTitle("".concat(this.language.management," - ").concat(this.language.end," - ").concat(this.language.flowconfiguration," - ").concat("systemAdministration"===f?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),this.commonOrgService.closeAlert(),this.getTableCount(!0),this.frTable=this.translateService.fr}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.reset(),this.removeState(),this.tableLanguageOptions(),this.setFilterOptions();var t=JSON.parse(localStorage.getItem("calix.login_data"));this.storageData.clientIp=null==t?void 0:t.clientIp,this.storageData.UserId=null==t?void 0:t.UserId,this.jsonSubs=this.dataTablecreatorService.jsonDataOfCSV.subscribe(function(t){e.invalidImportEndPoint=[];try{var i=!0;(t||[]).forEach(function(t){e.commonFunctionsService.keysFromColumnName(t,e.exportColoumnNames),t.name&&t.name.length>64&&(e.invalidImportEndPoint.push(t),e.infoTitle=e.language["Invalid Value"],e.infoBody="".concat(e.language["Invalid Name - Name should not exceed 64 characters."]),i=!1,e.openInfoModal(!0))}),i&&e.compareJsonToTableData(t)}catch(i){}})}},{key:"ngAfterViewInit",value:function(){this.loaded=!0}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.jsonSubs&&this.jsonSubs.unsubscribe(),this.impAssignedSubs&&this.impAssignedSubs.unsubscribe(),this.listSubs&&this.listSubs.unsubscribe(),this.createSubs&&this.createSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.exportSubs&&this.exportSubs.unsubscribe(),this.countSubs&&this.countSubs.unsubscribe(),this.aggregatedGroupsSubs&&this.aggregatedGroupsSubs.unsubscribe()}},{key:"getTableCount",value:function(e){var t=this;this.showTable=!1,this.managementData=[],this.countSubs=this.apiService.getCount(this.ORG_ID).subscribe(function(i){t.tableCount=i,e&&t.getAssignedData(),setTimeout(function(){t.showTable=!0,t.tableRender()},1e3)},function(e){t.pageErrorHandle(e)})}},{key:"tableRender",value:function(){var e,t=this,i=this,n=this.ORG_ID,a="".concat(_.N.faAdminCorrelatorURL,"flowendpoint");this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,order:[1,"asc"],columnDefs:[{targets:[0],orderable:!1}],searchDelay:1500,stateSave:!1,ajax:function(r,s){var o,l;switch(i.filterLoading=!0,t.sortBy=r.order[0].column,t.sortType=r.order[0].dir,t.sortBy){case 1:o="name";break;case 2:o="ip";break;case 3:o="mappedby";break;case 4:o="agggroup"}t.filterCount=void 0,e=0==r.start?0:r.start/r.length,r.search.value&&r.search.value.trim()&&r.search.value.length?(t.filterByDev=t.filtersDev.find(function(e){return"NONE"===e.value}),t.filterAndSearchFlag=!0,a="".concat(_.N.faAdminCorrelatorURL,"flowendpoint?org-id=").concat(n,"&searchstring=").concat(r.search.value.trim(),"&pagenumber=").concat(e,"&pagesize=").concat(r.length),t.sortType&&o&&(a="".concat(a,"&sortdirection=").concat(t.sortType,"&orderby=").concat(o)),l="".concat(a,"&count=true"),t.getFilterCount(l),i.filtering=!0):(a="".concat(_.N.faAdminCorrelatorURL,"flowendpoint?org-id=").concat(n,"&pagenumber=").concat(e,"&pagesize=").concat(r.length,"&mappedby=").concat(t.filterByDev.value),t.sortType&&o&&(a="".concat(a,"&sortdirection=").concat(t.sortType,"&orderby=").concat(o)),l="".concat(a,"&count=true"),t.getFilterCount(l),i.filtering=!0,t.filterAndSearchFlag="NONE"!==t.filterByDev.value),i.filtering?i.filterCountSubs.subscribe(function(e){t.filterCount=e,i.http.get(a).subscribe(function(e){i.managementData=Array.isArray(e)?t.sortData(e,i.sortBy,i.sortType):[e],i.commonOrgService.closeAlert(),i.hideNoDataRow(),setTimeout(function(){s({recordsTotal:null!=i.tableCount?i.tableCount:100,recordsFiltered:null!=i.filterCount?i.filterCount:i.tableCount,data:[]}),i.filterLoading=!1},200)},function(e){404==e.status?(i.managementData=[],t.dataAvailable=!0,i.hideNoDataRow(),setTimeout(function(){s({recordsTotal:null!=i.tableCount?i.tableCount:100,recordsFiltered:null!=i.filterCount?i.filterCount:i.tableCount,data:[]}),i.filterLoading=!1},200)):(t.pageErrorHandle(e),t.dataAvailable=!0,i.filterLoading=!1)})},function(e){404==e.status?t.filterCount=0:t.pageErrorHandle(e),i.http.get(a).subscribe(function(e){i.managementData=Array.isArray(e)?t.sortData(e,i.sortBy,i.sortType):[e],i.commonOrgService.closeAlert(),i.hideNoDataRow(),setTimeout(function(){s({recordsTotal:null!=i.tableCount?i.tableCount:100,recordsFiltered:null!=i.filterCount?i.filterCount:i.tableCount,data:[]}),i.filterLoading=!1},200)},function(e){404==e.status?(i.managementData=[],t.dataAvailable=!0,i.hideNoDataRow(),setTimeout(function(){s({recordsTotal:null!=i.tableCount?i.tableCount:100,recordsFiltered:null!=i.filterCount?i.filterCount:i.tableCount,data:[]}),i.filterLoading=!1},200)):(t.pageErrorHandle(e),t.dataAvailable=!0,i.filterLoading=!1)})}):i.http.get(a).subscribe(function(e){i.managementData=Array.isArray(e)?t.sortData(e,i.sortBy,i.sortType):[e],i.commonOrgService.closeAlert(),i.hideNoDataRow(),setTimeout(function(){s({recordsTotal:null!=i.tableCount?i.tableCount:100,recordsFiltered:null!=i.filterCount?i.filterCount:i.tableCount,data:[]}),i.filterLoading=!1},200)},function(e){404==e.status?(i.managementData=[],t.dataAvailable=!0,i.hideNoDataRow(),setTimeout(function(){s({recordsTotal:null!=i.tableCount?i.tableCount:100,recordsFiltered:null!=i.filterCount?i.filterCount:i.tableCount,data:[]}),i.filterLoading=!1},200)):(t.pageErrorHandle(e),t.dataAvailable=!0,i.filterLoading=!1)})},drawCallback:function(e){t.tableLanguageOptions(),t.getMappedData(),setTimeout(function(){i.loading=!1,i.filterLoading=!1,t.selectDeselectAll(!1),me("#selectDeselectAll").prop("checked",!1),me("#selectDeselectAll-span").hide()},200)}},this.tableLanguageOptions()}},{key:"hideNoDataRow",value:function(){setTimeout(function(){me(".odd").css("display","none")},100)}},{key:"getFilterCount",value:function(e){this.filterCountSubs=this.http.get(e)}},{key:"redraw",value:function(e){this.dtElement.dtInstance.then(function(t){e?t.search("").draw("page"):t.draw("page")})}},{key:"setTableOptions",value:function(){var e=this;this.tableOptions={rowId:"id",drawCallback:function(t){var i=t.aoData.length,n=t._iDisplayLength;setTimeout(function(){e.resetDelete()},0),i<=n&&me(t.nTableWrapper).find("#".concat(t.sTableId,"_last")).addClass("disabled")}},this.dataAvailable=!0}},{key:"processData",value:function(e){return e}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.destroy(),e.dtTrigger.next()})}},{key:"showCreate",value:function(){this.createView=!0,this.buttonVisible=!1,this.tablePreview=!1}},{key:"hideCreate",value:function(){this.createView=!1,this.buttonVisible=!0,this.tablePreview=!1}},{key:"submit",value:function(){var e=this;if(this.validation(),this.valid){if(this.createName&&this.createName.length>64)return this.infoTitle=this.language["Invalid Value"],this.infoBody="".concat(this.language["Invalid Name - Name should not exceed 64 characters."]),void this.openInfoModal(!1);var t=this.createName.trim();this.loading=!0,this.createSubs=this.apiService.AddIP("".concat(_.N.faAdminCorrelatorURL,"assigned/subscriber?org-id=").concat(this.ORG_ID,"&ipAddress=").concat(this.newIP,"&name=").concat(t)).subscribe(function(t){e.getTableCount(!0),e.reset(),e.hideCreate()},function(t){e.pageErrorHandle(t)})}}},{key:"validation",value:function(){var e=this.subnetVersionsSelected;return this.IPError=!1,this.nameError=!1,"IP-V4"==e&&null!=this.newIpv4&&""!=this.newIpv4?this.ipValidatorIpv4(this.newIpv4):"IP-V6"==e&&null!=this.newIpv6&&""!=this.newIpv6?this.ipValidatorIpv6(this.newIpv6):this.IPError=!0,this.IPError?(this.showInfo(this.language["Invalid Request"],this.language["Please enter a valid IP address"]),void(this.valid=!1)):null==this.createName||""==this.createName.trim()?(this.nameError=!0,this.showInfo(this.language["Invalid Request"],this.language["Name cannot be empty"]),void(this.valid=!1)):void(!this.IPError&&!this.nameError&&(this.valid=!0))}},{key:"ipValidatorIpv4",value:function(e){this.IPError=!1,e&&""!=e&&(this.commonFunctionsService.isValidIpV4Addr(e)?(this.newIP=e,this.IPError=!1):this.IPError=!0)}},{key:"ipValidatorIpv6",value:function(e){this.IPError=!1,e&&""!=e&&(this.commonFunctionsService.isValidIpV6Addr(e)?(this.newIP=e,this.IPError=!1):this.IPError=!0)}},{key:"reset",value:function(){this.createName=void 0,this.newIpv4=void 0,this.newIpv6=void 0,this.subnetVersionsSelected="IP-V4"}},{key:"edit",value:function(e){if(""!=e.assignedName&&e.assignedName){this.editData=e,this.editOnValue=e.id,this.editName=e.name,this.editIPVersionsSelected=this.commonFunctionsService.isValidIpV4Addr(e.ipAddress)?"IP-V4":"IP-V6",this.editIPAddress=e.ipAddress,this.editMapped=e.cmMappedBy;var t=e.ipAddress?e.ipAddress:"";if(-1!==this.deleteIds.indexOf(e.id)){this.deleteIds.splice(this.deleteIds.indexOf(e.id),1),this.endpointIps.splice(this.endpointIps.indexOf(t),1),this.deleteEndpoints=this.deleteEndpoints.filter(function(t){return t.id!==e.id});var i=me('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=i?(me("#selectDeselectAll").prop("checked",!1),me("#selectDeselectAll-span").show()):me("#selectDeselectAll-span").hide():(me("#selectDeselectAll").prop("checked",!1),me("#selectDeselectAll-span").hide())}}}},{key:"updateSave",value:function(e){var t=this,i=this.editData,n=this.editIPVersionsSelected;this.editIPAddress=this.editIPAddress.trim();var a=!1;if("IP-V4"==n&&""!=this.editIPAddress&&this.commonFunctionsService.isValidIpV4Addr(this.editIPAddress)||"IP-V6"==n&&""!=this.editIPAddress&&this.commonFunctionsService.isValidIpV6Addr(this.editIPAddress)?i.ipAddress=this.editIPAddress:a=!0,a)return this.showInfo(this.language["Invalid Request"],this.language["Please enter a valid IP address"]),void(this.valid=!1);this.loading=!0,this.updateSubs=this.apiService.updateManagement(this.ORG_ID,i).subscribe(function(e){t.getTableCount(!0),t.reset(),t.hideCreate(),t.editOnValue=void 0},function(e){t.pageErrorHandle(e)})}},{key:"updateCancel",value:function(){this.editOnValue=void 0}},{key:"subnetVerChoose",value:function(){}},{key:"editSubnetVerChoose",value:function(){"SubnetIPV4"==this.editIPVersionsSelected?this.editSubnetv6=void 0:this.editSubnetv4=void 0}},{key:"cancelMultiDelete",value:function(){}},{key:"gotoSubsDashboard",value:function(e){sessionStorage.setItem("management_subscriber_data",JSON.stringify(e)),this.router.navigate(["/subscriber-dashboard"])}},{key:"showInfo",value:function(e,t){this.infoTitle=e,this.infoBody=t,this.openInfoModal(!1)}},{key:"changeFilter",value:function(){this.filterAndSearchFlag="NONE"!==this.filterByDev.value,this.getTableCount(!1)}},{key:"sortData",value:function(e,t,i){var n=[];return 1==t?n=this.commonFunctionsService.sortByColumn(e,i,"name"):2==t?n=this.commonFunctionsService.sortByColumn(e,i,"ipAddress"):3==t?n=this.commonFunctionsService.sortByColumn(e,i,"mappedBy"):4==t&&(n=this.commonFunctionsService.sortByColumnAggregated(e,i,"aggregated")),n}},{key:"delete",value:function(e){var t=e.ipAddress?e.ipAddress:"";this.deleteData=e,e.name=e.name?e.name:"",e.hostName=e.mappedBy?e.mappedBy:"",this.infoTitle=this.language["Delete endpoint"],this.infoBody="<tr><td>".concat(e.name,"</td><td>").concat(t,"</td><td>").concat(e.mappedBy,"</td></tr>"),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDelete",value:function(){var e=this,t="".concat(_.N.faAdminCorrelatorURL,"/flowendpoint?org-id=").concat(this.ORG_ID,"&flowId=").concat(this.deleteData.id);this.loading=!0,this.apiService.EndpointDelete(t).subscribe(function(t){e.deleteIds=[],e.endpointIps=[],e.deleteEndpoints=[],e.getTableCount(!0),e.reset(),e.hideCreate(),e.closeDeleteModal()},function(t){e.pageErrorHandle(t)})}},{key:"closeDeleteModal",value:function(){this.deleteData=void 0,this.closeModal()}},{key:"getDeleteIds",value:function(e,t){var i=t.ipAddress?t.ipAddress:"",n=this.deleteEndpoints;if(e.target.checked){if(-1===this.deleteIds.indexOf(t.id)){this.deleteIds.push(t.id),this.endpointIps.push(i),this.deleteEndpoints.push(t);var a=me('input[name^="delete_id_"]').length;this.deleteIds.length==a?(me("#selectDeselectAll").prop("checked",!0),me("#selectDeselectAll-span").hide()):me("#selectDeselectAll-span").show()}}else{this.deleteIds.splice(this.deleteIds.indexOf(t.id),1),this.endpointIps.splice(this.endpointIps.indexOf(i),1),n=n.filter(function(e){return e.id!==t.id});var r=me('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=r?(me("#selectDeselectAll").prop("checked",!1),me("#selectDeselectAll-span").show()):me("#selectDeselectAll-span").hide():(me("#selectDeselectAll").prop("checked",!1),me("#selectDeselectAll-span").hide())}this.deleteEndpoints=n}},{key:"selectDeselectAll",value:function(e){this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[];var t=0,i=me('input[name^="delete_id_"]').length,n=this;e?me('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;me(this).prop("checked",!0);var e=me(this).attr("class").split(" ")[0].substring("delete_id_".length),a=n.managementData.filter(function(t){return t.id===e}),r=a[0].ipAddress?a[0].ipAddress:"";n.deleteIds.push(e),n.endpointIps.push(r),n.deleteEndpoints.push(a[0]),t++}):me('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;me(this).prop("checked",!1),n.deleteIds=[],n.endpointIps=[],n.deleteEndpoints=[],t++})}},{key:"showAllInnerCheckBox",value:function(e){me("#"+e.target.id).hide(),me("#selectDeselectAll").prop("checked",!0),this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[],this.selectDeselectAll(!0)}},{key:"deleteAllSelected",value:function(){if(this.endpointIps){this.infoTitle=this.language[1===this.endpointIps.length?"Delete selected endpoint?":"Delete selected endpoints?"];for(var e="",t=0;t<this.endpointIps.length;t++)this.deleteEndpoints[t].name=this.deleteEndpoints[t].name?this.deleteEndpoints[t].name:"",this.deleteEndpoints[t].mappedBy=this.deleteEndpoints[t].mappedBy?this.deleteEndpoints[t].mappedBy:"",e+="<tr><td>".concat(this.deleteEndpoints[t].name,"<td>").concat(this.endpointIps[t],"<td>").concat(this.deleteEndpoints[t].mappedBy,"</td></tr>");this.infoBody=e,this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal,{backdrop:"static",keyboard:!1})}}},{key:"confirmDeleteSecleted",value:function(){for(var e=this,t=[],i="".concat(_.N.faAdminCorrelatorURL,"flowendpoint?org-id=").concat(this.ORG_ID,"&flowId="),n=0;n<this.deleteIds.length;n++)t.push(this.apiService.NonAssignedEndpointDelete("".concat(i).concat(this.deleteIds[n])));this.loading=!0,(0,Z.D)(t).subscribe(function(t){e.deleteIds=[],e.endpointIps=[],e.deleteEndpoints=[],e.getTableCount(!0),e.reset(),e.hideCreate(),e.closeMultiDeleteModal()},function(t){e.pageErrorHandle(t)})}},{key:"closeMultiDeleteModal",value:function(){this.deleteIds=[],this.endpointIps=[],this.closeModal()}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?(this.dtOptions.language=this.translateService.fr,this.importTableOptions.language=this.frTable):"es"==this.language.fileLanguage?(this.dtOptions.language=this.translateService.es,this.importTableOptions.language=this.translateService.es):"de_DE"==this.language.fileLanguage?(this.dtOptions.language=this.translateService.de_DE,this.importTableOptions.language=this.translateService.de_DE):"en"==this.language.fileLanguage&&this.dtOptions.language&&(delete this.dtOptions.language,delete this.importTableOptions.language)}},{key:"changeTableStatusLanguage",value:function(e){var t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.trim(),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};var i="fr"==sessionStorage.getItem("defaultLanguage"),n=e.oPreviousSearch.sSearch.trim()?i?"(filtr\xe9es \xe0 partir des ".concat(t.format(e._iRecordsTotal)," entr\xe9es totales)"):"(filtered from ".concat(t.format(e._iRecordsTotal)," total entries)"):"",a=0==e._iRecordsDisplay?-1:e._iDisplayStart,r=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;me('div [role="status"]').text(i?"Affichage de ".concat(t.format(a+1)," \xe0 ").concat(t.format(r)," des ").concat(t.format(e._iRecordsDisplay)," entr\xe9es ").concat(n):"Showing ".concat(t.format(a+1)," to ").concat(t.format(r)," of ").concat(t.format(e._iRecordsDisplay)," entries ").concat(n)),me(".dataTables_filter label")[0].childNodes[0].nodeValue=i?"Chercher:":"Search:",me(".dataTables_length label")[0].childNodes[0].nodeValue=i?"Afficher les ":"Show ",me(".dataTables_length label")[0].childNodes[2].nodeValue=i?" entr\xe9es":" entries",me(".first").text(i?"Le d\xe9but":"First"),me(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),me(".next").text(i?"Suivant":"Next"),me(".last").text(i?"Derni\xe8re":"Last"),me(".dataTables_empty").text(i?"Pas de donn\xe9es disponibles dans la table":"No data available in table")}},{key:"resetDelete",value:function(){this.selectDeselectAll(!1),me("#selectDeselectAll").prop("checked",!1),me("#selectDeselectAll-span").hide(),this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[]}},{key:"setFilterOptions",value:function(){this.filtersDev=[{label:this.language.ALL,value:"NONE"},{label:this.language.ASSIGNED,value:"ASSIGNED"},{label:this.language.DHCP,value:"DHCP"},{label:this.language.CC,value:"CC"},{label:this.language.CUSTOM,value:"CUSTOM"},{label:this.language.RADIUS,value:"RADIUS"},{label:this.language.CMS,value:"CMS"},{label:this.language.SMx,value:"SMx"}],this.filterByDev={label:this.language[this.filterByDev.label],value:this.filterByDev.value}}},{key:"export",value:function(){var e=this,t=this.commonFunctionsService.generateExportName("endpoint_export_file",!0);this.exportSubs=this.apiService.Export(this.ORG_ID).subscribe(function(i){e.exportData=e.exportDataConvertor(i),e.exportExcel.downLoadCSV(t,e.exportData&&e.exportData.length?e.exportData:[e.empty])},function(t){e.pageErrorHandle(t)})}},{key:"exportPdf",value:function(){}},{key:"exportDataConvertor",value:function(e){var t=this;return Array.isArray(e)&&(0===e.length&&e.push({ipAddress:"",name:""}),e.forEach(function(e){for(var i in e)"boolean"==typeof e[i]&&(e[i]=1==e[i]?"Yes":"No");delete(e=t.commonFunctionsService.columnNameFromKeys(e,t.exportColoumnNames)).id,delete e.result})),e}},{key:"cancelImport",value:function(){}},{key:"fullImportUpload",value:function(){this.infoTitle=this.language.fullImport,this.infoBody=this.language.fullImportPrompt,this.closeModal(),this.modalRef=this.dialogService.open(this.importModal,{backdrop:"static",keyboard:!1})}},{key:"proceedImport",value:function(){this.closeModal(),me("#fullImportUpload").click()}},{key:"fullImport",value:function(e,t){this.importData=[],this.importDeleteData=[],this.importTableData=[],this.isFullImport=t,this.dataTablecreatorService.getJsonFromCsv(e),this.importFullInput.nativeElement.value="",this.importInput.nativeElement.value=""}},{key:"compareJsonToTableData",value:function(e){var t=this,i=this.assignedData.length?this.assignedData:[];sessionStorage.getItem("importType"),this.importDeleteData=[];var n=[];if(e.forEach(function(e){if(e.name||e.ipAddress){var a="Create";!1,i.filter(function(t){return e.name&&t.name&&t.name==e.name}).length&&(!0,a=t.isFullImport?"Create":"Update"),n.push({action:a,ipAddress:e.ipAddress,name:e.name})}}),!n.length)return this.cancel(),this.infoTitle=this.language.noAvailableChange,this.infoBody="",void this.openInfoModal(!1);if(this.isFullImport){var a=[],r=n.map(function(e){return e.name});i.forEach(function(e){r.includes(e.name)||a.push({action:"Delete",ipAddress:e.ipAddress,name:e.name})}),this.importDeleteData=a}this.importSubmit(!0,n)}},{key:"importSubmit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,n={clientIP:this.storageData.clientIp,dry_run:t,full_import:this.isFullImport,import_data:[],orgId:this.ORG_ID,userId:this.sso.getUserId()},a=t?i:[];if(t||this.importTableData.forEach(function(t){t.result&&"ok"==t.result.toLowerCase()&&a.push({action:e.isFullImport?"Create":t.action,ipAddress:t.ipAddress,name:t.name})}),!a.length)return this.cancel(),this.infoTitle=this.language.noAvailableChange,this.infoBody="",void this.openInfoModal(!1);n.import_data=a,this.impAssignedSubs=this.apiService.importAssigned(n,this.ORG_ID).subscribe(function(i){t?(i&&i.data&&0==i.data.length&&(e.infoTitle=e.language.noAvailableChange,e.infoBody="",e.openInfoModal(!1)),e.importData=i||[],e.checkDryRunData(i)):(e.getTableCount(!0),e.hideCreate())},function(t){e.loading=!1,e.enableImportSubmit=!1,e.closeImport(),e.pageErrorHandle(t)})}},{key:"checkDryRunData",value:function(e){var t=this;e&&e.length&&(this.enableImportSubmit=!0);var i=this.assignedData.length?this.assignedData:[];e.forEach(function(e){e.result&&"ok"==e.result.toLowerCase()?t.enableImportSubmit=!0:e.action=e.result,e.ipAddress_old="";var n=i.filter(function(t){return t.name==e.name});n.length&&(t.isFullImport&&"Create"==e.action&&(e.action="Update"),e.ipAddress_old=n[0].ipAddress?n[0].ipAddress:""),t.importTableData.push(e)}),this.isFullImport&&this.importDeleteData.length&&this.importDeleteData.forEach(function(e){e.ipAddress_old="",t.importTableData.push(e)}),this.createView=!1,this.buttonVisible=!1,this.tablePreview=!0}},{key:"cancel",value:function(){this.createView=!1,this.buttonVisible=!0,this.tablePreview=!1,this.reset()}},{key:"closeImport",value:function(){this.cancel(),this.isFullImport=!1,this.enableImportSubmit=!1,this.importTableData=[],this.importData=[],this.importDeleteData=[],this.commonOrgService.closeAlert()}},{key:"getAssignedData",value:function(){var e=this;this.apiService.getAssignedCount(this.ORG_ID).subscribe(function(t){e.assignedDataCount=t,t?e.getAssigned():e.assignedData=[]})}},{key:"getAssigned",value:function(){var t=this,i=[],n=1;this.assignedDataCount>1e3&&(n=Math.ceil(this.assignedDataCount/1e3));for(var a=0;a<n;a++)i.push(this.apiService.getAssigned(this.ORG_ID,a));(0,Z.D)(i).subscribe(function(i){i.forEach(function(i){t.assignedData=[].concat(e(t.assignedData),e(i))})},function(e){t.pageErrorHandle(e)})}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modalRef&&this.modalRef.close(),e&&this.aggregatedGroupsSubs&&this.aggregatedGroupsSubs.unsubscribe()}},{key:"pageErrorHandle",value:function(e,t){var i,n,a="";400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle="Error",this.openInfoModal(!1),this.loading=!1):(a=401==e.status?this.language["Access Denied"]:500==e.status?"Internal Server Error":417==e.status&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.error)?null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.error:this.commonOrgService.pageErrorHandle(e),t&&"agg-groups"===t?(this.aggErrorInfo=a,this.aggError=!0):(this.infoBody=a,this.infoTitle="Error",this.openInfoModal(!1)),this.loading=!1)}},{key:"openInfoModal",value:function(e){e||(this.invalidImportEndPoint=[]),this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}},{key:"getMappedData",value:function(){var e=this;this.managementData&&this.managementData.length?this.managementData.forEach(function(t){e.mappedData[t.id]||(e.mappedData[t.id]=t.mappedBy?t.mappedBy.toUpperCase():"")}):this.mappedData={}}},{key:"removeState",value:function(){this.commonOrgService.removeTableState("management",this.router.url)}},{key:"isAggregatedGroupAvail",value:function(e){return this.commonFunctionsService.isAggregatedGroupAvail(e)}},{key:"openAggregatedGroupsModal",value:function(e){this.aggregatedGroups=[],this.infoTitle="Aggregated Groups",this.closeModal(),this.aggreDataAvail=!1,this.modalRef=this.dialogService.open(this.aggGroupsModal,{centered:!0,backdrop:"static",keyboard:!1,windowClass:"custom-modal"}),this.getAggregatedGroups(e)}},{key:"getAggregatedGroups",value:function(e){var t=this;this.aggregatedGroupsLoading=!0,this.aggError=!1,this.aggregatedGroupsSubs=this.apiService.getAggregatedGroups(this.ORG_ID,e.aggGroup).subscribe(function(e){t.aggregatedGroups=e&&e.length?e:[],t.aggreDataAvail=!0,t.aggregatedGroupsLoading=!1},function(e){404==e.status||400==e.status?(t.aggregatedGroups=[],t.aggreDataAvail=!0,t.aggregatedGroupsLoading=!1):(t.aggregatedGroupsLoading=!1,t.aggreDataAvail=!0,t.pageErrorHandle(e,"agg-groups"))})}},{key:"reloadCurrentRoute",value:function(){var e=this,t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){e.router.navigate([t])})}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(x.i),c.Y36(l.F0),c.Y36(A.U),c.Y36(y.eN),c.Y36(T.O),c.Y36(C.L),c.Y36(d.t6),c.Y36(I.FF),c.Y36(D.v),c.Y36(S.s),c.Y36(k.Dx),c.Y36(O.i))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-management"]],viewQuery:function(e,t){var i;(1&e&&(c.Gf(w,7),c.Gf(q,7),c.Gf(R,7),c.Gf(N,7),c.Gf(E,5),c.Gf(P,5),c.Gf(U,7),c.Gf(b.G,5)),2&e)&&(c.iGM(i=c.CRH())&&(t.infoModal=i.first),c.iGM(i=c.CRH())&&(t.deleteModal=i.first),c.iGM(i=c.CRH())&&(t.multiDeleteModal=i.first),c.iGM(i=c.CRH())&&(t.importModal=i.first),c.iGM(i=c.CRH())&&(t.importFullInput=i.first),c.iGM(i=c.CRH())&&(t.importInput=i.first),c.iGM(i=c.CRH())&&(t.aggGroupsModal=i.first),c.iGM(i=c.CRH())&&(t.dtElement=i.first))},decls:23,vars:13,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","row py-4",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-end","my-2"],[1,"col-md-12","pr-0"],[1,"ccl-form","d-flex","text-right","justify-content-end"],[1,"col-form-label","mr-4"],["placeholder","",1,"ng-select-mapped",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],[1,"row"],["class","col-md-12 ccl-admin-table",4,"ngIf"],["infoModal",""],["deleteModal",""],["multiDeleteModal",""],["importModal",""],["aggGroupsModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row","py-4"],[1,"col-md-9"],[1,"d-flex"],["id","create-btn",1,"btn-default","primary","mx-2",3,"click"],["id","export-btn",1,"btn-default","primary","px-2","mx-2",3,"click"],[1,"upload-btn-wrapper"],[1,"btn-default","primary","mx-2","px-2",3,"click"],["type","file","accept",".csv","id","fullImportUpload",2,"display","none",3,"change"],["importFullInput",""],["for","inc-import",1,"btn-default","primary","mx-2","cursor-pointer"],["type","file","id","inc-import","accept",".csv",2,"display","none",3,"change"],["importInput",""],[1,"col-sm-3","align-self-end","d-none"],[1,"ccl-form"],["type","search","name","searchbox","placeholder","",1,"input-sm"],[1,"serach-but","btn-default","primary","btn-icon-md","inline"],["aria-hidden","true",1,"fa","fa-search"],[1,"row","my-3","py-3"],[1,"col-md-12"],[1,"row","form-inline"],[1,"form-group","mb-2","col-md-2","align-self-start"],["for","staticEmail2",1,""],[1,"error"],[1,"ccl-form","mx-sm-3","mb-2","align-self-end"],["placeholder","",1,"ng-select-250",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["for","inputPassword2",1,"sr-only"],["type","text","name","newSubnetV4","placeholder","","trimSpace","",1,"w-250px",3,"ngModel","disabled","ngModelChange","blur"],["type","text","name","newSubnetV6","placeholder","","trimSpace","",1,"w-250px",3,"ngModel","disabled","ngModelChange","blur"],["type","text","id","createName","placeholder","","name","createName","trimSpace","",1,"w-250px",3,"ngModel","ngModelChange","blur"],[1,"row","form-inline","my-3"],[1,"form-group","mb-2","col-md-2"],["for","staticEmail2",1,"sr-only"],["type","submit","id","submit-btn",1,"btn-default","btn-primary","mx-4",3,"click"],["type","submit","id","cancel-btn",1,"btn-default","btn-dft","py-1","ml-2",3,"click"],["class","row",4,"ngIf"],[1,"row","my-4"],[1,"col-md-8","offset-md-4"],[1,"btn-default","primary","px-3","mx-3",3,"disabled","click"],[1,"btn-default","btn-dft","py-1","px-3",3,"click"],[1,"col-md-12","ccl-admin-table"],["id","example","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["id","management-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,"th-action"],[1,"ccl-fc-table-icon"],[1,"d-flex","align-items-center",3,"hidden"],["type","checkbox","value","","id","selectDeselectAll",1,"",3,"hidden","disabled","change"],["id","selectDeselectAll-span",1,"checkbox-ui",2,"display","none",3,"hidden","click"],[1,"text-center","justify-content-center",3,"hidden"],["id","delete-selected-btn",1,"btn-default","primary","px-2","mx-2",3,"disabled","click"],[1,"far","fa-trash-alt"],[1,"w-250px"],[1,"min-w-160px"],[1,"w-200px"],["class","editable-td text-center",4,"ngIf"],["class","save-cancel-btn-group d-flex justify-content-center",4,"ngIf"],["class","ccl-form",4,"ngIf"],["class","ccl-form subnet-select-div",4,"ngIf"],["class","remove",4,"ngIf"],[1,"editable-td","text-center"],[1,"pr-2"],["id","edit-btn",1,"primary",3,"ngClass","title","click"],[1,"fas","fa-pencil-alt"],["type","checkbox",3,"value","name","title","click"],["id","delete-btn",1,"primary",3,"title","click"],[1,"save-cancel-btn-group","d-flex","justify-content-center"],[1,"pr-1"],["id","save-btn",1,"primary","mx-3",3,"click"],[1,"fas","fa-check"],["id","cancel-btn",1,"primary",3,"click"],[1,"fas","fa-times"],["type","text","name","editName",3,"ngModel","ngModelOptions","ngModelChange"],[1,"ccl-form","subnet-select-div"],["placeholder","","appendTo","body",1,"select-custom-top","text-left",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange"],["type","text","trimSpacetrimSpace","",1,"subnet-edit-input",3,"ngModel","ngModelOptions","ngModelChange","blur"],[1,"remove"],[1,"btn-default","btn-dft","cursor-pointer",3,"click"],["colspan","5",1,"no-data-available"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"f-size-16px"],[1,"w-100"],["class","list-two",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[1,"list-two"],["class","text-break",4,"ngFor","ngForOf"],[1,"text-break"],[1,"modal-body"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"],[4,"ngFor","ngForOf"],[3,"innerHtml"],[1,"modal-body","loader-wrapper"],["class","loader-wrapper-info",4,"ngIf"],["class","py-3 alert alert-danger",4,"ngIf"],["datatable","","width","100%","class","row-border hover table-alter",3,"dtOptions",4,"ngIf"],[1,"loader-wrapper-info"],["role","status",1,"spinner-border","text-primary"],[1,"py-3","alert","alert-danger"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button","id","close-error-btn","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["datatable","","width","100%",1,"row-border","hover","table-alter",3,"dtOptions"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,F,5,1,"div",1),c.YNc(2,J,24,4,"div",2),c.YNc(3,L,42,18,"section",3),c.YNc(4,B,8,4,"section",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"label",7),c._uU(9),c.qZA(),c.TgZ(10,"ng-select",8),c.NdJ("ngModelChange",function(e){return t.filterByDev=e})("change",function(){return t.changeFilter()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",9),c.YNc(12,ie,24,14,"div",10),c.qZA(),c.qZA(),c.YNc(13,re,15,5,"ng-template",null,11,c.W1O),c.YNc(15,se,20,6,"ng-template",null,12,c.W1O),c.YNc(17,le,13,4,"ng-template",null,13,c.W1O),c.YNc(19,ce,12,4,"ng-template",null,14,c.W1O),c.YNc(21,he,12,5,"ng-template",null,15,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading||t.allDataLoading||t.filterLoading),c.xp6(1),c.Q6J("ngIf",t.buttonVisible),c.xp6(1),c.Q6J("ngIf",t.createView),c.xp6(1),c.Q6J("ngIf",t.tablePreview),c.xp6(5),c.Oqu(t.language["Mapped By"]),c.xp6(1),c.Q6J("items",t.filtersDev)("multiple",!1)("ngModel",t.filterByDev)("ngModelOptions",c.DdM(12,H))("clearable",!1)("searchable",!1),c.xp6(2),c.Q6J("ngIf",t.showTable))},directives:[s.O5,M.w9,o.JJ,o.On,o._Y,o.JL,o.F,o.Fj,b.G,s.sg,s.mk],styles:[".subnet-select-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.subnet-select-div[_ngcontent-%COMP%]   ng-select[_ngcontent-%COMP%]{width:50%}.subnet-select-div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.modal-scrll[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.table-alter[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-break:break-all}.no-data-available[_ngcontent-%COMP%]{text-align:center}.ccl-fc-table-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .fa-pencil-alt[_ngcontent-%COMP%]{color:#8c8c8c!important;cursor:not-allowed}.ng-select-250[_ngcontent-%COMP%]{text-align:left;width:250px}.w-250px[_ngcontent-%COMP%]{width:250px}.w-200px[_ngcontent-%COMP%]{width:200px}.ng-select-mapped[_ngcontent-%COMP%]{text-align:left;min-width:30%}.th-action[_ngcontent-%COMP%]{white-space:nowrap;max-width:200px!important}.min-w-160px[_ngcontent-%COMP%]{min-width:160px}.editable-td[_ngcontent-%COMP%]{font-size:13px}.upload-btn-wrapper[_ngcontent-%COMP%]{overflow:inherit!important}.list-two[_ngcontent-%COMP%]{list-style-type:disc;margin-left:30px}"]}),t}(),be=r(61020),ve=r(23815),Ze=function(){var e=function(){function e(t){i(this,e),this.http=t}return a(e,[{key:"getList",value:function(e){return this.http.get("".concat(_.N.FA_API_BASE_URL,"config/organization?org-id=").concat(e))}},{key:"save",value:function(e,t){return this.http.post("".concat(_.N.FA_API_BASE_URL,"config/organization?org-id=").concat(t),e)}},{key:"update",value:function(e,t){return this.http.put("".concat(_.N.FA_API_BASE_URL,"config/organization?org-id=").concat(t),e)}},{key:"delete",value:function(e){return this.http.delete("".concat(_.N.FA_API_BASE_URL,"config/organization?org-id=").concat(e))}},{key:"patchUpdate",value:function(e,t){return this.http.patch("".concat(_.N.FA_API_BASE_URL,"config/organization?org-id=").concat(t),e)}},{key:"createOrg",value:function(e,t){return this.http.post("".concat(_.N.FA_API_BASE_URL,"config/organization?org-id=").concat(e),t)}},{key:"getDHCPKeyConfiguration",value:function(e){return this.http.get("".concat(_.N.FA_API_BASE_URL,"config/dhcpkey?org-id=").concat(e))}},{key:"addDHCPKeyConfiguration",value:function(e,t){return this.http.post("".concat(_.N.FA_API_BASE_URL,"config/dhcpkey?org-id=").concat(e),t)}},{key:"updateDHCPKeyConfiguration",value:function(e,t){return this.http.put("".concat(_.N.FA_API_BASE_URL,"config/dhcpkey?org-id=").concat(e),t)}},{key:"deleteDHCPKeyConfiguration",value:function(e){return this.http.delete("".concat(_.N.FA_API_BASE_URL,"config/dhcpkey?org-id=").concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(y.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),_e=["infoModal"],xe=["aggregWarningModal"];function Ae(e,t){1&e&&(c.TgZ(0,"div",6),c.TgZ(1,"div",7),c.TgZ(2,"div",8),c.TgZ(3,"div",9),c._UZ(4,"span",10),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function ye(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"li",25),c._uU(2),c.qZA(),c.BQk()),2&e){var i=t.$implicit;c.xp6(2),c.hij(" ",i||""," ")}}function Te(e,t){if(1&e&&(c.TgZ(0,"ul",26),c.TgZ(1,"li",27),c.TgZ(2,"span",28),c._UZ(3,"i",29),c._uU(4),c.qZA(),c._uU(5),c.qZA(),c.qZA()),2&e){var i=c.oxw().$implicit,n=c.oxw(3);c.xp6(4),c.hij(" ",n.language.aggregationRule,": "),c.xp6(1),c.hij(" ",n.aggregationRuleNames(i.name)?n.aggregationRuleNames(i.name):""," ")}}function Ce(e,t){if(1&e&&(c.TgZ(0,"ul",26),c.TgZ(1,"li",27),c.TgZ(2,"span",28),c._UZ(3,"i",29),c._uU(4),c.qZA(),c._uU(5),c.qZA(),c.qZA()),2&e){var i=c.oxw(4);c.xp6(4),c.hij(" ","Unique key",": "),c.xp6(1),c.hij(" ",i.checkKeyConfigStatus(!0)?i.checkKeyConfigStatus(!0):""," ")}}function Ie(e,t){if(1&e&&(c.TgZ(0,"div",18),c.TgZ(1,"a",19),c._UZ(2,"i",20),c._uU(3),c.qZA(),c.TgZ(4,"div",21),c.TgZ(5,"ul",22),c.YNc(6,ye,3,1,"ng-container",23),c.qZA(),c.YNc(7,Te,6,2,"ul",24),c.YNc(8,Ce,6,2,"ul",24),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=c.oxw(3);c.xp6(1),c.MGl("href","#collapse",i.name,"",c.LSH),c.xp6(2),c.hij(" ",n.language[n.getTitle(i.name)]," "),c.xp6(1),c.MGl("id","collapse",i.name,""),c.xp6(2),c.Q6J("ngForOf",i.data),c.xp6(1),c.Q6J("ngIf",n.aggregationMatchRules[i.name]&&n.aggregationMatchRules[i.name].length),c.xp6(1),c.Q6J("ngIf","DHCP"==i.name&&n.checkKeyConfigStatus())}}function De(e,t){if(1&e&&(c.TgZ(0,"div",16),c.YNc(1,Ie,9,6,"div",17),c.qZA()),2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",i.selectList)("ngForTrackBy",i.trackItem)}}function Se(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"div",12),c.TgZ(2,"button",13),c.NdJ("click",function(){return c.CHM(i),c.oxw().doEdit()}),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",14),c.YNc(5,De,2,2,"div",15),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(3),c.hij(" ",n.language.edit," "),c.xp6(2),c.Q6J("ngIf",n.selectList)}}function ke(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"i",46),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw(2).deleteMapping(e)}),c._uU(1,"\xa0\xa0 "),c.qZA()}}function Oe(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"i",47),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw(2).getCurrentRule(e.key)}),c._uU(1,"\xa0\xa0 "),c.qZA()}}function Me(e,t){if(1&e&&(c.TgZ(0,"div",41),c.TgZ(1,"p",42),c._UZ(2,"i",20),c._uU(3),c.YNc(4,ke,2,0,"i",43),c.YNc(5,Oe,2,0,"i",44),c.TgZ(6,"i",45),c._uU(7,"\xa0\xa0 "),c.qZA(),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=c.oxw(2);c.xp6(3),c.hij(" ",n.language[n.getTitle(i.name)]," "),c.xp6(1),c.Q6J("ngIf",!n.showTab),c.xp6(1),c.Q6J("ngIf",!n.showTab),c.xp6(1),c.MGl("id","sxa-color-gold-",i.key,"")}}function we(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",48),c.NdJ("click",function(){var e=c.CHM(i).$implicit;return c.oxw(2).addItemTolist(e)}),c.TgZ(1,"i",20),c._uU(2,"\xa0\xa0 "),c.qZA(),c._uU(3),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(2);c.xp6(3),c.hij("",a.language[a.getTitle(n.name)]," ")}}function qe(e,t){if(1&e&&(c.TgZ(0,"li",54),c.TgZ(1,"a",71),c._uU(2),c.qZA(),c.qZA()),2&e){var i=c.oxw(3);c.xp6(2),c.Oqu(i.language.Subscriber_Match_Rule)}}function Re(e,t){1&e&&(c.TgZ(0,"li",54),c.TgZ(1,"a",72),c._uU(2,"Key Configuration"),c.qZA(),c.qZA())}function Ne(e,t){if(1&e&&(c.TgZ(0,"li",54),c.TgZ(1,"a",73),c._uU(2),c.qZA(),c.qZA()),2&e){var i=c.oxw(3);c.xp6(2),c.Oqu(i.language.aggregationRule)}}function Ee(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",87),c._UZ(1,"i",88),c._uU(2),c.TgZ(3,"i",89),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw(2).index;return c.oxw(4).deleteAttr(e,t)}),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(6);c.xp6(2),c.Oqu(a.language[a.getTitle(n)]),c.xp6(1),c.MGl("id","attr_delete",n,"")}}function Pe(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ul",85),c.NdJ("cdkDropListDropped",function(e){c.CHM(i);var t=c.oxw().index;return c.oxw(4).dropFiledToCurrentRuleData(e,t)}),c.YNc(1,Ee,4,2,"li",86),c.qZA()}if(2&e){var n=c.oxw().$implicit;c.xp6(1),c.Q6J("ngForOf",n.attrs)}}var Ue=function(){return{standalone:!0}};function Fe(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"form",90),c.TgZ(1,"div",91),c.TgZ(2,"label",92),c._uU(3),c.qZA(),c.TgZ(4,"div",39),c.TgZ(5,"ng-select",93),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().$implicit.delimiter=e})("change",function(e){c.CHM(i);var t=c.oxw().index;return c.oxw(4).changeDelimiter(e,t)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw().$implicit,a=c.oxw(4);c.xp6(3),c.Oqu(a.language.delimiter),c.xp6(2),c.Q6J("items",a.delimiters)("multiple",!1)("ngModel",n.delimiter)("ngModelOptions",c.DdM(7,Ue))("clearable",!1)("searchable",!0)}}function Je(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",94),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw().index,n=c.oxw(4);return n.addItemToMappingRule(n.ruleName,t,e)}),c.TgZ(1,"i",20),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(5);c.xp6(2),c.hij("\xa0\xa0 ",a.language[a.getTitle(n)],"")}}var He=function(e){return{disabled:e}};function Le(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",76),c._UZ(1,"i",77),c._uU(2),c.TgZ(3,"i",78),c.NdJ("click",function(){var e=c.CHM(i).index,t=c.oxw(4);return t.deleteRule(t.currentRuleData.name,e)}),c.qZA(),c.YNc(4,Pe,2,1,"ul",79),c.YNc(5,Fe,6,8,"form",80),c.TgZ(6,"div",81),c._UZ(7,"i",82),c._uU(8),c.qZA(),c.TgZ(9,"ul",83),c.YNc(10,Je,3,1,"li",84),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=t.index,r=c.oxw(4);c.xp6(2),c.AsE("",r.language[r.getTitle(r.currentRuleData.name)]," ",r.language.mappingRule,""),c.xp6(2),c.Q6J("ngIf",n.attrs),c.xp6(1),c.Q6J("ngIf",r.checkFieldsLength(r.ruleName,a)),c.xp6(1),c.Q6J("ngClass",c.VKq(7,He,!r.mappingRuleFieldsLength)),c.xp6(2),c.hij("",r.language.addField," "),c.xp6(2),c.Q6J("ngForOf",r.mappingRuleFields)}}function je(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ul",74),c.NdJ("cdkDropListDropped",function(e){return c.CHM(i),c.oxw(3).dropCurrentRuleData(e)}),c.YNc(1,Le,11,9,"li",75),c.qZA()}if(2&e){var n=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",n.currentRuleData.rules)}}function Ve(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",95),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw(3);return t.addRule(t.ruleName,e)}),c.TgZ(1,"i",20),c._uU(2,"\xa0\xa0 "),c.qZA(),c._uU(3),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(3);c.xp6(3),c.hij("",a.language[a.getTitle(n)]," ")}}function Be(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",87),c._UZ(1,"i",88),c._uU(2),c.TgZ(3,"i",89),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw(2).index;return c.oxw(4).deleteSbscbrAttr(e,t)}),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(6);c.xp6(2),c.Oqu(a.language[a.getTitle(n)]),c.xp6(1),c.MGl("id","attr_delete",n,"")}}function Ye(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ul",85),c.NdJ("cdkDropListDropped",function(e){c.CHM(i);var t=c.oxw().index;return c.oxw(4).dropFiledToCurrentRuleData(e,t)}),c.YNc(1,Be,4,2,"li",86),c.qZA()}if(2&e){var n=c.oxw().$implicit;c.xp6(1),c.Q6J("ngForOf",n.attrs)}}function Qe(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",94),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw().index,n=c.oxw(4);return n.addItemToSbscbrMappingRule(n.ruleName,t,e)}),c.TgZ(1,"i",20),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(5);c.xp6(2),c.hij("\xa0\xa0 ",a.language[a.getTitle(n)],"")}}function Ge(e,t){if(1&e&&(c.TgZ(0,"li",76),c._UZ(1,"i",77),c._uU(2),c.YNc(3,Ye,2,1,"ul",79),c.TgZ(4,"div",96),c._UZ(5,"i",82),c._uU(6),c.qZA(),c.TgZ(7,"ul",83),c.YNc(8,Qe,3,1,"li",84),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=c.oxw(4);c.xp6(2),c.hij("",n.language[n.getTitle(n.sbscbrCurrentRuleData.name)]," Subscriber Rule "),c.xp6(1),c.Q6J("ngIf",i.attrs),c.xp6(1),c.Q6J("ngClass",c.VKq(5,He,!n.sbscbrRuleFieldsLength)),c.xp6(2),c.hij("",n.language.addField," "),c.xp6(2),c.Q6J("ngForOf",n.sbscbrRuleFields)}}function $e(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ul",74),c.NdJ("cdkDropListDropped",function(e){return c.CHM(i),c.oxw(3).dropCurrentRuleData(e)}),c.YNc(1,Ge,9,7,"li",75),c.qZA()}if(2&e){var n=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",n.sbscbrCurrentRuleData.rules)}}function ze(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",97),c.TgZ(1,"ul"),c.TgZ(2,"li"),c.TgZ(3,"h4"),c._uU(4,"Unique Key Configuration"),c.qZA(),c.qZA(),c.TgZ(5,"li"),c.TgZ(6,"div",98),c.TgZ(7,"div",99),c.TgZ(8,"input",100),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(3).keyConfigEditObj.macAddress=e})("change",function(){return c.CHM(i),c.oxw(3).changeKeyConfig()}),c.qZA(),c.TgZ(9,"label",101),c._uU(10),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",98),c.TgZ(12,"div",99),c.TgZ(13,"input",102),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(3).keyConfigEditObj.remoteId=e})("change",function(){return c.CHM(i),c.oxw(3).changeKeyConfig()}),c.qZA(),c.TgZ(14,"label",103),c._uU(15),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",98),c.TgZ(17,"div",99),c.TgZ(18,"input",104),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(3).keyConfigEditObj.circuitId=e})("change",function(){return c.CHM(i),c.oxw(3).changeKeyConfig()}),c.qZA(),c.TgZ(19,"label",105),c._uU(20),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",98),c.TgZ(22,"div",99),c.TgZ(23,"input",106),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(3).keyConfigEditObj.subscriberId=e})("change",function(){return c.CHM(i),c.oxw(3).changeKeyConfig()}),c.qZA(),c.TgZ(24,"label",107),c._uU(25),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",98),c.TgZ(27,"div",99),c.TgZ(28,"input",108),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(3).keyConfigEditObj.clientHostName=e})("change",function(){return c.CHM(i),c.oxw(3).changeKeyConfig()}),c.qZA(),c.TgZ(29,"label",109),c._uU(30),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(3);c.xp6(8),c.Q6J("ngModel",n.keyConfigEditObj.macAddress),c.xp6(2),c.hij(" ",n.language[n.getTitle("macAddress")]," "),c.xp6(3),c.Q6J("ngModel",n.keyConfigEditObj.remoteId),c.xp6(2),c.hij(" ",n.language[n.getTitle("dhcpRemoteId")]," "),c.xp6(3),c.Q6J("ngModel",n.keyConfigEditObj.circuitId),c.xp6(2),c.hij(" ",n.language[n.getTitle("dhcpCircuitId")]," "),c.xp6(3),c.Q6J("ngModel",n.keyConfigEditObj.subscriberId),c.xp6(2),c.hij(" ",n.language[n.getTitle("dhcpSubscriberId")]," "),c.xp6(3),c.Q6J("ngModel",n.keyConfigEditObj.clientHostName),c.xp6(2),c.hij(" ",n.language[n.getTitle("dhcpClientHostName")]," ")}}function Ke(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",87),c._UZ(1,"i",88),c._uU(2),c.TgZ(3,"i",89),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw(2).index;return c.oxw(4).deleteAggregationAttr(e,t)}),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(6);c.xp6(2),c.Oqu(a.language[a.getTitle(n)]),c.xp6(1),c.MGl("id","attr_delete",n,"")}}function We(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"ul",85),c.NdJ("cdkDropListDropped",function(e){c.CHM(i);var t=c.oxw().index;return c.oxw(4).dropFieledToCurrentAggreRuleData(e,t)}),c.YNc(1,Ke,4,2,"li",86),c.qZA()}if(2&e){var n=c.oxw().$implicit;c.xp6(1),c.Q6J("ngForOf",n.attrs)}}function Xe(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"form",90),c.TgZ(1,"div",91),c.TgZ(2,"label",92),c._uU(3),c.qZA(),c.TgZ(4,"div",39),c.TgZ(5,"ng-select",93),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(5).aggregationdelimiterSelected=e})("change",function(){c.CHM(i);var e=c.oxw(5);return e.changeAggregationDelimiter(e.ruleName)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(5);c.xp6(3),c.Oqu(n.language.delimiter),c.xp6(2),c.Q6J("items",n.delimiters)("multiple",!1)("ngModel",n.aggregationdelimiterSelected)("ngModelOptions",c.DdM(7,Ue))("clearable",!1)("searchable",!0)}}function et(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",94),c.NdJ("click",function(){var e=c.CHM(i).$implicit,t=c.oxw().index,n=c.oxw(4);return n.addItemToAggregationMappingRule(n.ruleName,t,e)}),c.TgZ(1,"i",20),c._uU(2),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit,a=c.oxw(5);c.xp6(2),c.hij("\xa0\xa0 ",a.language[a.getTitle(n)],"")}}function tt(e,t){if(1&e&&(c.TgZ(0,"li",112),c._UZ(1,"i",77),c._uU(2),c.YNc(3,We,2,1,"ul",79),c.YNc(4,Xe,6,8,"form",80),c.TgZ(5,"div",96),c._UZ(6,"i",82),c._uU(7),c.qZA(),c.TgZ(8,"ul",83),c.YNc(9,et,3,1,"li",84),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=t.index,a=c.oxw(4);c.xp6(2),c.hij("",a.language[a.getTitle(a.aggregationCurrentRuleData.name)]," Aggregation Rule "),c.xp6(1),c.Q6J("ngIf",i.attrs),c.xp6(1),c.Q6J("ngIf",a.checkAggreFieldsLength(a.ruleName,n)),c.xp6(1),c.Q6J("ngClass",c.VKq(6,He,!a.aggregationRuleFieldsLength)),c.xp6(2),c.hij("",a.language.addField," "),c.xp6(2),c.Q6J("ngForOf",a.aggregationRuleFields)}}function it(e,t){if(1&e&&(c.TgZ(0,"ul",110),c.YNc(1,tt,10,8,"li",111),c.qZA()),2&e){var i=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",i.aggregationCurrentRuleData.rules)}}function nt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",49),c.TgZ(1,"div",50),c.TgZ(2,"div",51),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).closeTab()}),c._UZ(3,"i",52),c.qZA(),c.TgZ(4,"ul",53),c.TgZ(5,"li",54),c.TgZ(6,"a",55),c._uU(7),c.qZA(),c.qZA(),c.YNc(8,qe,3,1,"li",56),c.YNc(9,Re,3,0,"li",56),c.YNc(10,Ne,3,1,"li",56),c.qZA(),c.TgZ(11,"div",57),c.TgZ(12,"div",58),c.YNc(13,je,2,1,"ul",59),c.TgZ(14,"div"),c.TgZ(15,"div",60),c._UZ(16,"i",61),c._uU(17),c.qZA(),c.TgZ(18,"ul",62),c.YNc(19,Ve,4,1,"li",63),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"div",64),c.YNc(21,$e,2,1,"ul",59),c.qZA(),c.YNc(22,ze,31,10,"div",65),c.TgZ(23,"div",66),c.YNc(24,it,2,1,"ul",67),c.qZA(),c.TgZ(25,"div",68),c.TgZ(26,"button",69),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).applyAggregationRuleModalOpen()}),c._uU(27),c.qZA(),c.TgZ(28,"button",70),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).cancelAggregationRuleApply()}),c._uU(29),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(2);c.xp6(7),c.Oqu(n.language.mappingRule),c.xp6(1),c.Q6J("ngIf",n.showSubsRule),c.xp6(1),c.Q6J("ngIf",n.showKeyConfig),c.xp6(1),c.Q6J("ngIf",n.showAggregation),c.xp6(3),c.Q6J("ngIf",n.currentRuleData),c.xp6(2),c.Q6J("ngClass",c.VKq(13,He,!n.mappingRuleFieldsLength)),c.xp6(2),c.hij(" ",n.language.addRule," "),c.xp6(2),c.Q6J("ngForOf",n.mappingRuleFields),c.xp6(2),c.Q6J("ngIf",n.sbscbrCurrentRuleData),c.xp6(1),c.Q6J("ngIf",n.showKeyConfig),c.xp6(2),c.Q6J("ngIf",n.aggregationCurrentRuleData),c.xp6(3),c.hij(" ",n.language.apply," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}function at(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"div",30),c.TgZ(2,"div",31),c.TgZ(3,"section",32),c.NdJ("cdkDropListDropped",function(e){return c.CHM(i),c.oxw().dropMappingSource(e)}),c.YNc(4,Me,8,4,"div",33),c.qZA(),c.TgZ(5,"div",34),c.TgZ(6,"button",35),c._UZ(7,"i",36),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"ul",37),c.YNc(10,we,4,1,"li",38),c.qZA(),c.qZA(),c.TgZ(11,"div",39),c._uU(12),c.qZA(),c.qZA(),c.YNc(13,nt,30,15,"div",40),c.qZA()}if(2&e){var n=c.oxw();c.xp6(4),c.Q6J("ngForOf",n.selectList),c.xp6(2),c.Q6J("disabled",n.showTab||!n.unselectList.length),c.xp6(2),c.hij(" ",n.language.addMappingSource," "),c.xp6(2),c.Q6J("ngForOf",n.unselectList),c.xp6(2),c.hij(" ",n.language["Please note that new mapping sources take up to 12 hours to take effect."],""),c.xp6(1),c.Q6J("ngIf",n.showTab)}}function rt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",113),c.TgZ(1,"div",114),c.TgZ(2,"button",115),c.NdJ("click",function(){return c.CHM(i),c.oxw().save()}),c._uU(3),c.qZA(),c.TgZ(4,"button",116),c.NdJ("click",function(){return c.CHM(i),c.oxw().cancelWithGet()}),c._uU(5),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(3),c.hij(" ",n.language.submit," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}function st(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",117),c.TgZ(1,"h4",118),c._uU(2),c.qZA(),c.TgZ(3,"button",119),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",120),c.qZA(),c.qZA(),c.TgZ(5,"div",121),c._uU(6),c.qZA(),c.TgZ(7,"div",122),c.TgZ(8,"button",123),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(9),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(4),c.hij(" ",n.infoBody," "),c.xp6(3),c.hij(" ",n.language.Okay," ")}}function ot(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",117),c.TgZ(1,"h4",118),c._uU(2),c.qZA(),c.TgZ(3,"button",119),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",120),c.qZA(),c.qZA(),c.TgZ(5,"div",121),c._uU(6),c.qZA(),c.TgZ(7,"div",122),c.TgZ(8,"button",123),c.NdJ("click",function(){return c.CHM(i),c.oxw().confirmAggregationRuleApply()}),c._uU(9),c.qZA(),c.TgZ(10,"button",124),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(11),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(4),c.hij(" ","DHCP"==n.ruleName?n.language["Endpoint history will start over for new key configurations. Proceed ?"]:n.language["Endpoint history will start over for new aggregates. Proceed ?"]," "),c.xp6(3),c.hij(" ",n.language.Okay," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}r(91704);var lt=function(){var t=function(){function t(e,n,a,r,s,o,l){var c=this;i(this,t),this.service=e,this.sso=n,this.router=a,this.dialogService=r,this.commonOrgService=s,this.translateService=o,this.titleService=l,this.pageAvailable=!1,this.load=!1,this.selectList=[],this.unselectList=[],this.edit=!1,this.showTab=!1,this.mpngRuleObj={},this.mpnPrcdnce=[],this.sbscbrRuleObj={},this.sbscbrselectList=[],this.unsbscbrselectList=[],this.aggregationRuleObj={},this.aggregationRuleFields=[],this.aggregationMatchRules={DHCP:[],AA:[],CUSTOM:[],SMx:[],DHCP_DELIMITER:"",AA_DELIMITER:"",CUSTOM_DELIMITER:"",SMx_DELIMITER:""},this.aggregationRuleFieldsLength=0,this.mappingRuleFields=["MAC Address","Serial Number","Registration Id","Phone","account","Region","Network AID","Port Type","Subscriber Info","Subscriber Description","Additional Info","B-RAS IP","Router Interface","VLAN","DSLAM Node","DSLAM Vendor"],this.customMappingRules=["Name"],this.mpngRuleObjDefault={DHCP:["dhcpCircuitId","dhcpRemoteId","dhcpClientHostName","macAddress","dhcpSubscriberId"],RADIUS:["radiusUserName"],CC:["serialNumber","subscriberName","registrationId","subscriberAccount"],AA:["macAddress","cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],CUSTOM:["cmSerialNumber","cmRegistrationId","cmAccount","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],RDNS:["cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],MAC:["cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],ASSIGNED:["assignedName"],CMS:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],FA:["cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],AXOS:["ipAddress","macAddress","cmSerialNumber"],EXA:["ipAddress","macAddress","cmSerialNumber"],SMx:["cmSerialNumber","cmRegistrationId","cmAccount","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"]},this.aggregationRuleObjDefault={AA:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],CUSTOM:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],SMx:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"]},this.delimiters=["_","-","/","~","#"],this.delimiterSelected="_",this.aggregationdelimiterSelected="_",this.allPrcdns=["DHCP","RADIUS","CC","AA","CUSTOM","RDNS","MAC","ASSIGNED","AXOS","EXA","SMx"],this.mappingRuleFieldsLength=0,this.sbscbrRuleFieldsLength=0,this.subscriberMatchRules=[],this.sbscbrRuleFields=["MAC Address","Serial Number","Registration Id","Phone","account","Region","Network AID","Port Type","Subscriber Info","Subscriber Description","Additional Info","B-RAS IP","Router Interface","VLAN","DSLAM Node","DSLAM Vendor"],this.sbscbrRuleObjDefault={DHCP:["ip_address","mac_address","dhcp_circuit_id","dhcp_client_host_name","dhcp_remote_id","dhcp_subscriber_id"],RADIUS:["ip_address","mac_address","radius_user_name"],CC:["ip_address","mac_address","cc_server_info_id","cc_cpe_id","serial_number","registration_id","provisioning_code","persistent_data","subscriber_type","subscriber_name","subscriber_account","sxa_cc_subscriber_id","subscriber_phone","email"],AA:["ip_address","mac_address","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","vlan","cmDslamNode","cmDslamVendor"],CUSTOM:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],RDNS:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],MAC:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],ASSIGNED:["ip_address","mac_address","assigned_name"],CMS:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],FA:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],SMx:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"]},this.sbscbrallPrcdns=["DHCP","RADIUS","CC","AA","CUSTOM","RDNS","MAC","ASSIGNED","CMS","FA"],this.title={cmSerialNumber:"Serial Number",dhcp_circuit_id:"DHCP Circuit Id",dhcp_client_host_name:"DHCP Client Hostname",dhcp_remote_id:"DHCP Remote Id",dhcp_subscriber_id:"DHCP Subscriber Id",serial_number:"Serial Number",dhcpCircuitId:"DHCP Circuit Id",dhcpRemoteId:"DHCP Remote Id",dhcpClientHostName:"DHCP Client Hostname",dhcpSubscriberId:"DHCP Subscriber Id",radiusUserName:"Radius Username",serialNumber:"Serial Number",subscriberName:"SubscriberName",registrationId:"Registration Id",subscriberAccount:"Location_ID",cmRegistrationId:"Registration Id",cmPhone:"Phone",cmRegion:"Region",cmMappedName:"Mapped Name",cmNetworkName:"Network Name",cmDeviceType:"Device Type",cmNetworkAid:"Network AID",cmPortType:"Port Type",cmSubscriberInfo:"Subscriber Info",cmSubscriberDesc:"Subscriber Description",cmBrasIp:"B-RAS IP",cmRouterIf:"Router Interface",cmOrgSpecific:"Org Specific",vlan:"VLAN",cmDslamNode:"DSLAM Node",cmDslamVendor:"DSLAM Vendor",assigned_name:"Assigned Name",DHCP:"DHCP",RADIUS:"RADIUS",CC:"Consumer Connect",AA:"Access Analyze",CUSTOM:"Custom",RDNS:"RDNS",MAC:"MAC",ASSIGNED:"ASSIGNED",CMS:"CMS",FA:"FLOW ANALYZE",ip_address:"Ip Address",mac_address:"MAC Address",cm_serial_number:"Serial Number",cm_registration_id:"Registration Id",cm_mapped_name:"Mapped Name",cm_address:"Address",cm_phone:"Phone",cm_email:"Email",cm_account:"Account",cm_region:"Region",cm_network_name:"Network Name",cm_device_type:"Device Type",cm_network_aid:"Network Aid",cm_port_type:"Port Type",cm_subscriber_info:"Subscriber Info",cm_subscriber_desc:"Subscriber Desc",cm_org_specific:"Org Specific",cm_alt_title:"Alt Title",cm_bras_ip:"B-RAS IP",cm_router_intf:"Router Interface",cm_vlan:"VLAN",cm_dslam_node:"DSLAM Node",cm_dslam_vendor:"DSLAM Vendor",radius_user_name:"Radius User Name",cc_server_info_id:"Server Info Id",cc_cpe_id:"CPE Id",registration_id:"Registration Id",provisioning_code:"Provisioning Code",persistent_data:"Persistent Data",subscriber_type:"Subscriber Type",subscriber_name:"Subscriber Name",subscriber_account:"Location_ID",sxa_cc_subscriber_id:"Subscriber Id",subscriber_phone:"Subscriber Phone",email:"Email",macAddress:"MAC Address",cmVlan:"VLAN",assignedName:"Assigned Name",cmAccount:"Account",AXOS:"AXOS",EXA:"EXA",ipAddress:"Ip Address"},this.emptyRule=[{attrs:[],delimiter:""}],this.loading=!0,this.keyConfigDefaultObj={macAddress:!1,remoteId:!1,circuitId:!1,subscriberId:!1,clientHostName:!1},this.keyConfigEditObj={},this.keyConfigEditBFRObj={},this.keyConfigs={},this.isProd=!1,this.showAggregation=!1,this.new=!0;var u=this.router.url;if(this.ORG_ID=this.sso.getOrganizationID(u),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){c.language=e,c.titleService.setTitle("".concat(c.language.mappingsource," - ").concat(c.language.end," - ").concat(c.language.flowconfiguration," - ").concat("systemAdministration"===c.module?c.language["System Administration"]:c.language.administration," - ").concat(c.language["Calix Cloud"])),c.getData()}),this.commonOrgService.closeAlert(),this.isDev=this.sso.isDevCheckFromBaseURL(),this.isProd=this.sso.isProdCheckFromBaseURL(),this.module=this.sso.getRedirectModule(u),this.titleService.setTitle("".concat(this.language.mappingsource," - ").concat(this.language.end," - ").concat(this.language.flowconfiguration," - ").concat("systemAdministration"===this.module?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"])),"systemAdministration"!==this.module){var d=this.sso.getEntitlements();d&&!d[102]&&(this.allPrcdns=this.allPrcdns.filter(function(e){return!["AXOS","EXA"].includes(e)}))}}return a(t,[{key:"ngOnInit",value:function(){this.getData()}},{key:"ngAfterViewInit",value:function(){this.loaded=!0}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getListSubs&&this.getListSubs.unsubscribe(),this.saveSubs&&this.saveSubs.unsubscribe(),this.createOrgSubs&&this.createOrgSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.keyConfigSubs&&this.keyConfigSubs.unsubscribe(),this.addKeyConfigSusbs&&this.addKeyConfigSusbs.unsubscribe()}},{key:"doEdit",value:function(){this.edit=!0}},{key:"addItemTolist",value:function(e){this.selectList.push(e);var t=this.unselectList.filter(function(t){return t.id!==e.id});this.unselectList=t}},{key:"deleteItemFromList",value:function(){}},{key:"cancel",value:function(){this.edit=!1}},{key:"cancelWithGet",value:function(){this.selectList=[],this.cancel(),this.getData()}},{key:"submit",value:function(){this.edit=!1}},{key:"addItemToMappingRule",value:function(e,t,i){var n,a;this.mpngRuleObj[e]?this.mpngRuleObj[e]&&!(null===(a=null===(n=this.mpngRuleObj[e])||void 0===n?void 0:n.rules)||void 0===a?void 0:a.length)&&this.mpngRuleObj[e].rules.push({attrs:[],delimiter:""}):this.mpngRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:[],delimiter:""}]};var r=this.mpngRuleObj[e];r.rules[t].attrs.push(i),r.rules[t].attrs&&2==r.rules[t].attrs.length&&(r.rules[t].delimiter="_"),this.mpngRuleObj[e]=r,this.currentRuleData=r;var s=this.mappingRuleFields,o=s.indexOf(i);s.splice(o,1),this.mappingRuleFields=s,this.mappingRuleFieldsLength=this.mappingRuleFields.length}},{key:"addItemToSbscbrMappingRule",value:function(e,t,i){var n=this.sbscbrRuleObj[e];n.rules[t].attrs.push(i),this.sbscbrRuleObj[e]=n,this.sbscbrCurrentRuleData=n;var a=this.sbscbrRuleFields,r=a.indexOf(i);a.splice(r,1),this.sbscbrRuleFields=a,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length,i&&-1===this.subscriberMatchRules.indexOf(i)&&this.subscriberMatchRules.push(i)}},{key:"addItemToAggregationMappingRule",value:function(e,t,i){var n=this.aggregationRuleObj[e];n.rules[t].attrs.push(i),n.rules[t].attrs&&2==n.rules[t].attrs.length&&(this.aggregationdelimiterSelected="_"),this.aggregationRuleObj[e]=n,this.sbscbrCurrentRuleData=n;var a=this.aggregationRuleFields,r=a.indexOf(i);a.splice(r,1),this.aggregationRuleFields=a,this.aggregationRuleFieldsLength=this.aggregationRuleFields.length,i&&-1===this.aggregationMatchRules[e].indexOf(i)&&this.aggregationMatchRules[e].push(i),this.aggregationMatchRules["".concat(e,"_DELIMITER")]=this.aggregationdelimiterSelected}},{key:"changeAggregationDelimiter",value:function(e){this.aggregationMatchRules["".concat(e,"_DELIMITER")]=this.aggregationdelimiterSelected}},{key:"getCurrentRule",value:function(t){var i,n=this;this.mpngRuleObj[t]||(this.mpngRuleObj[t]={data:[],key:t,name:t,rules:[{attrs:[],delimiter:""}]}),this.currentRuleData=this.mpngRuleObj[t],this.showTab=!0,this.ruleName=t,document.getElementById("sxa-color-gold-"+t).style.display="block";for(var a=this.currentRuleData.rules,r=e(this.mpngRuleObjDefault[t]),s=0;s<a.length;s++){var o=a[s].attrs,l=a[s].delimiter;if(l&&!this.delimiters.includes(l)&&(a[s].delimiter="_"),o.length)for(var c=0;c<o.length;c++){var u=r.indexOf(o[c]);-1!==u&&r.splice(u,1)}}this.mappingRuleFields=r,this.mappingRuleFieldsLength=this.mappingRuleFields.length;var d=[];r=[];var g=this.sbscbrRuleObjDefault[t]?this.sbscbrRuleObjDefault[t]:[];this.showSubsRule=!1,this.sbscbrRuleObjDefault[t]&&(this.showSubsRule=!0);for(var p=0;p<g.length;p++)-1!==this.subscriberMatchRules.indexOf(g[p])?d.push(g[p]):r.push(g[p]);this.sbscbrRuleObj[t]?this.sbscbrRuleObj[t].rules[0].attrs=d:this.sbscbrRuleObj[t]={data:[],key:t,name:t,rules:[{attrs:d,delimiter:""}]},this.sbscbrCurrentRuleData=this.sbscbrRuleObj[t],this.sbscbrRuleFields=r,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length,d=[],r=[],Object.keys(this.aggregationRuleObjDefault).forEach(function(e){n.aggregationRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:n.aggregationMatchRules[e],delimiter:""}]}});var h=null===(i=this.aggregationRuleObjDefault[t])||void 0===i?void 0:i.slice(0);h?function(){n.showAggregation=!0;var e=n.aggregationMatchRules[t]?n.aggregationMatchRules[t]:[];r=h;for(var i=function(t){r.includes(e[t])&&(d.push(e[t]),r=r.filter(function(i){return i!==e[t]}))},a=0;a<e.length;a++)i(a);!n.aggregationRuleObj[t]&&h?n.aggregationRuleObj[t]={data:[],key:t,name:t,rules:[{attrs:d,delimiter:""}]}:n.aggregationRuleObj[t].rules[0].attrs=d,n.aggregationdelimiterSelected=n.aggregationMatchRules["".concat(t,"_DELIMITER")]?n.aggregationMatchRules["".concat(t,"_DELIMITER")]:"_",n.aggregationCurrentRuleData=n.aggregationRuleObj[t],n.latestAggreData=n.aggregationCurrentRuleData?ve.cloneDeep(n.aggregationCurrentRuleData):{},n.latestAggreDataDeLimit=n.aggregationdelimiterSelected,n.aggregationRuleFields=r,n.aggregationRuleFieldsLength=n.aggregationRuleFields.length}():(this.showAggregation=!1,this.latestAggreData=void 0),this.showTab=!0,this.ruleName=t,"DHCP"==t?(this.keyConfigEditObj&&!Object.keys(this.keyConfigEditObj).length&&(this.keyConfigEditObj=ve.cloneDeep(this.keyConfigDefaultObj)),this.keyConfigEditBFRObj=ve.cloneDeep(this.keyConfigEditObj),this.showKeyConfig=!0):this.showKeyConfig=!1}},{key:"deleteAttr",value:function(e,t){var i=this.currentRuleData,n=i.rules[t].attrs.indexOf(e);i.rules[t].attrs.splice(n,1),i.rules[t].attrs&&i.rules[t].attrs.length<2&&(i.rules[t].delimiter="_"),this.currentRuleData=i,this.mpngRuleObj[this.ruleName]=i,this.mappingRuleFields.push(e),this.mappingRuleFields=Object.assign([],this.mappingRuleFields),this.mappingRuleFieldsLength=this.mappingRuleFields.length}},{key:"deleteSbscbrAttr",value:function(e,t){var i=this.sbscbrCurrentRuleData,n=i.rules[t].attrs.indexOf(e);i.rules[t].attrs.splice(n,1),this.sbscbrCurrentRuleData=i,this.sbscbrRuleObj[this.ruleName]=i,this.sbscbrRuleFields.push(e),this.sbscbrRuleFields=Object.assign([],this.sbscbrRuleFields),this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length;var a=this.subscriberMatchRules.indexOf(e);a>-1&&this.subscriberMatchRules.splice(a,1)}},{key:"deleteAggregationAttr",value:function(e,t){var i=this.aggregationCurrentRuleData,n=i.rules[t].attrs.indexOf(e);i.rules[t].attrs.splice(n,1),i.rules[t].attrs&&i.rules[t].attrs.length<2&&(this.aggregationdelimiterSelected="_"),this.aggregationCurrentRuleData=i,this.aggregationRuleObj[this.ruleName]=i,this.aggregationRuleFields.push(e),this.aggregationRuleFields=Object.assign([],this.aggregationRuleFields),this.aggregationRuleFieldsLength=this.aggregationRuleFields.length;var a=this.aggregationMatchRules[i.name].indexOf(e);a>-1&&this.aggregationMatchRules[i.name].splice(a,1)}},{key:"deleteRule",value:function(t,i){var n=this.currentRuleData,a=[];if(n.rules[i].attrs)for(var r=0;r<n.rules[i].attrs.length;r++)a.push(n.rules[i].attrs[r]);this.mappingRuleFields=[].concat(e(this.mappingRuleFields),a),n.rules.splice(i,1),this.currentRuleData=n,this.mpngRuleObj[this.ruleName]=n,this.mappingRuleFieldsLength=this.mappingRuleFields.length}},{key:"deleteSbscbrRule",value:function(e,t){var i=this.sbscbrCurrentRuleData,n=[];if(i.rules[t].attrs)for(var a=0;a<i.rules[t].attrs.length;a++)n.push(i.rules[t].attrs[a]);this.sbscbrRuleFields=Array.prototype.push.apply(this.sbscbrRuleFields,n),this.sbscbrRuleFields=Object.assign([],this.sbscbrRuleFields),i.rules.splice(t,1),this.sbscbrCurrentRuleData=i,this.sbscbrRuleObj[this.ruleName]=i,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length}},{key:"deleteMapping",value:function(e){var t=this.selectList;t=t.filter(function(t){return t.name!==e.name}),this.selectList=t;var i=this.unselectList;i.push(e),this.unselectList=i,this.mpngRuleObj[e.key]&&delete this.mpngRuleObj[e.key]}},{key:"openTab",value:function(){this.showTab=!0}},{key:"closeTab",value:function(){this.cancelAggregationRuleApply()}},{key:"applyAggregationRuleModalOpen",value:function(){if(this.aggregationCurrentRuleData&&this.latestAggreData&&(JSON.stringify(this.latestAggreData)!==JSON.stringify(this.aggregationCurrentRuleData)||this.latestAggreDataDeLimit&&this.latestAggreDataDeLimit!==this.aggregationdelimiterSelected))this.closeModal(),this.modalRef=this.dialogService.open(this.aggregWarningModal,{backdrop:"static",keyboard:!1});else if(this.ruleName&&"DHCP"==this.ruleName&&!ve.isEqual(this.keyConfigEditBFRObj,this.keyConfigEditObj)&&this.mpnPrcdnce.includes("DHCP"))this.closeModal(),this.modalRef=this.dialogService.open(this.aggregWarningModal,{backdrop:"static",keyboard:!1});else{this.showTab=!1;var e=document.getElementById("sxa-color-gold-"+this.ruleName);e&&(e.style.display="none")}}},{key:"confirmAggregationRuleApply",value:function(){this.showTab=!1;var e=document.getElementById("sxa-color-gold-"+this.ruleName);e&&(e.style.display="none"),this.closeModal()}},{key:"cancelAggregationRuleApply",value:function(){var e=this,t="";this.aggregationCurrentRuleData&&((t=this.aggregationCurrentRuleData.key?this.aggregationCurrentRuleData.key:"")&&this.latestAggreData&&(this.aggregationCurrentRuleData.rules[0].attrs=this.latestAggreData.rules[0].attrs,this.aggregationMatchRules[t]=this.latestAggreData.rules[0].attrs,this.aggregationMatchRules["".concat(t,"_DELIMITER")]=this.latestAggreDataDeLimit),this.closeModal(),setTimeout(function(){e.aggregationCurrentRuleData=void 0},0)),this.ruleName&&"DHCP"==this.ruleName&&(this.keyConfigEditObj=ve.cloneDeep(this.keyConfigEditBFRObj)),this.showTab=!1;var i=document.getElementById("sxa-color-gold-"+this.ruleName);i&&(i.style.display="none")}},{key:"addRule",value:function(e,t){var i=this.mpngRuleObj[e];i.rules.push({attrs:[t],delimiter:""}),this.mpngRuleObj[e]=i,this.currentRuleData=this.mpngRuleObj[e];var n=this.mappingRuleFields,a=n.indexOf(t);n.splice(a,1),this.mappingRuleFields=n,this.mappingRuleFieldsLength=this.mappingRuleFields.length}},{key:"addSbscbrRule",value:function(e,t){var i=this.sbscbrRuleObj[e];i.rules.push({attrs:[t],delimiter:""}),this.sbscbrRuleObj[e]=i,this.sbscbrCurrentRuleData=this.sbscbrRuleObj[e];var n=this.sbscbrRuleFields,a=n.indexOf(t);n.splice(a,1),this.sbscbrRuleFields=n,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length}},{key:"dropMappingSource",value:function(e){(0,be.bA)(this.selectList,e.previousIndex,e.currentIndex)}},{key:"dropCurrentRuleData",value:function(e){(0,be.bA)(this.currentRuleData.rules,e.previousIndex,e.currentIndex)}},{key:"dropFiledToCurrentRuleData",value:function(e,t){(0,be.bA)(this.currentRuleData.rules[t].attrs,e.previousIndex,e.currentIndex)}},{key:"dropFieledToCurrentAggreRuleData",value:function(e,t){(0,be.bA)(this.aggregationCurrentRuleData.rules[t].attrs,e.previousIndex,e.currentIndex)}},{key:"changeDelimiter",value:function(e,t){}},{key:"checkFieldsLength",value:function(e,t,i){return this.mpngRuleObj[e].rules[t].attrs.length>1}},{key:"checkSbscbrFieldsLength",value:function(e,t,i){return this.sbscbrRuleObj[e].rules[t].attrs.length>1}},{key:"checkAggreFieldsLength",value:function(e,t,i){var n,a=this.aggregationRuleObj[e];return!!(a&&(null===(n=null==a?void 0:a.rules[t])||void 0===n?void 0:n.attrs.length)>1)}},{key:"getData",value:function(){var t=this,i=[],n=[],a=[];this.resetKeyConfigurations(),this.getListSubs=this.service.getList(this.ORG_ID).subscribe(function(r){if(t.loading=!1,t.new=!1,t.mpnPrcdnce=r.mappingPrecedence?r.mappingPrecedence.split(","):[],r&&Object.keys(r)){if("systemAdministration"!==t.module){var s=t.sso.getEntitlements();s&&!s[102]&&(t.mpnPrcdnce=t.mpnPrcdnce.filter(function(e){return!["AXOS","EXA"].includes(e)}))}t.mpnPrcdnce=t.mpnPrcdnce.filter(function(e){return e&&"CMS"!=e.toUpperCase()}),t.mpnPrcdnce=t.mpnPrcdnce.filter(function(e){return e&&"FA"!=e.toUpperCase()}),t.mpnPrcdnce=t.mpnPrcdnce.filter(function(e){return e&&("AXOS"!=e.toUpperCase()||"EXA"!=e.toUpperCase())});var o=t.mpnPrcdnce.filter(function(e){return e&&"DHCP"==e.toUpperCase()}).length;if(t.mpnPrcdnce=t.mpnPrcdnce.filter(function(e){return e&&"STATIC"!=e.toUpperCase()}),o?t.getKeyConfigurations():t.resetKeyConfigurations(),r.nameFormat)!function(){var e=JSON.parse(r.nameFormat);if("systemAdministration"!==t.module){var a=t.sso.getEntitlements();a&&!a[102]&&(e=e.filter(function(e){return!["AXOS","EXA"].includes(e.name)}))}for(var s=0;s<e.length;s++)if(!(e[s].name&&"CMS"==e[s].name||e[s].name&&"FA"==e[s].name)){e[s].data=[];for(var o=0;o<e[s].rules.length;o++){for(var l=[],c=0;c<e[s].rules[o].attrs.length;c++)l.push(t.language[t.title[e[s].rules[o].attrs[c]]]||t.title[e[s].rules[o].attrs[c]]);e[s].data.push(l.join(e[s].rules[o].delimiter))}e[s].key=e[s].name,t.mpngRuleObj[e[s].name]=e[s],n.push(e[s]),i.push(e[s].name)}var u=r.nameFormat?JSON.parse(r.nameFormat):[],d=t.mpnPrcdnce;if(d.length&&!u.length)for(var g=0;g<d.length;g++)n.push({name:d[g],rules:t.emptyRule,key:d[g],data:[]}),i.push(d[g]);else if(d.length&&u.length&&d.length!=u.length){for(var p=d,h=function(e){u.filter(function(t){return t.name==d[e]}).length&&(p=p.filter(function(t){return t!==d[e]}))},m=0;m<d.length;m++)h(m);if(p.length)for(var f=0;f<p.length;f++)n.push({name:p[f],rules:t.emptyRule,key:p[f],data:[]}),i.push(p[f])}else!d.length&&!u.length&&t.resetMappingRuleObj()}();else{var l=t.mpnPrcdnce;if(l.length)for(var c=0;c<l.length;c++)n.push({name:l[c],rules:t.emptyRule,key:l[c],data:[]}),i.push(l[c]);else t.resetMappingRuleObj()}n&&n.length&&(n=t.makeOrderByMapPrecedence(n,t.mpnPrcdnce)),t.selectList=n,t.selectList=e(t.selectList),n.length&&(t.new=!1);for(var u=0;u<t.allPrcdns.length;u++)-1===i.indexOf(t.allPrcdns[u])&&a.push({id:u+1,name:t.allPrcdns[u],data:["Name"],key:t.allPrcdns[u]});t.unselectList=a;var d;if(d=r.subscriberMatchRule?r.subscriberMatchRule.split(","):[],t.subscriberMatchRules=d,!n.length){for(var g=0;g<t.allPrcdns.length;g++)a.push({id:g+1,name:t.allPrcdns[g],data:["Name"],key:t.allPrcdns[g]});t.unselectList=a,t.unselectList=t.unselectList.filter(function(e,t,i){return i.findIndex(function(t){return t.id==e.id})==t})}if(r.aggregationRules){var p=JSON.parse(r.aggregationRules);p=p.filter(function(e){return"DHCP"!=e.name});for(var h=0;h<p.length;h++){p[h].data=[];for(var m=[],f=0;f<p[h].attrs.length;f++)m.push(p[h].attrs[f]);t.aggregationMatchRules[p[h].name]=m,t.aggregationMatchRules["".concat(p[h].name,"_DELIMITER")]=p[h].delimiter?p[h].delimiter:""}p.length||Object.keys(t.aggregationRuleObjDefault).forEach(function(e){t.aggregationMatchRules[e]=[]}),Object.keys(t.aggregationRuleObjDefault).forEach(function(e){t.aggregationRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:t.aggregationMatchRules[e],delimiter:""}]}})}}else{for(var b=0;b<t.allPrcdns.length;b++)a.push({id:b+1,name:t.allPrcdns[b],data:["Name"],key:t.allPrcdns[b]});t.unselectList=a,t.new=!0}setTimeout(function(){t.loading=!1},1e3)},function(e){404==e.status?(t.new=!0,t.loading=!1):t.pageErrorHandle(e)})}},{key:"save",value:function(){for(var e=this,t=[],i=[],n=[],a=0,r=[],s=0;s<this.selectList.length;s++){t.push(this.selectList[s].name);var o=ve.cloneDeep(this.mpngRuleObj[this.selectList[s].name]);o&&(delete o.data,delete o.key,o&&o.rules.length&&(o.rules=o.rules.filter(function(e){return e.attrs&&e.attrs.length}),o.rules.length&&i.push(o)));var l=this.sbscbrRuleObj[this.selectList[s].name];l&&(delete l.data,delete l.key,n.push(l))}if(t.forEach(function(e){i.filter(function(t){return t.name&&e&&t.name===e}).length||(r.push(e),a++)}),a&&(1!==a||"STATIC"!==r[0]))return this.infoBody=this.language["Please select at least one Mapping Rule for selected Mapping Sources"],this.infoTitle=this.language["Invalid Request"],void this.openInfoModal();if(-1!==t.indexOf("DHCP")){var c=this.keyConfigEditObj&&Object.keys(this.keyConfigEditObj).length?this.keyConfigEditObj:this.keyConfigDefaultObj;if(-1==Object.values(c).indexOf(!0))return this.infoBody=this.language["Please select at least one Unique Key in the DHCP Key Configuration"],this.infoTitle=this.language["Invalid Request"],void this.openInfoModal()}var u=Object.keys(this.aggregationRuleObj),d=[];if(u)for(var g=0;g<u.length;g++){var p={name:u[g],attrs:this.aggregationRuleObj[u[g]].rules[0].attrs,delimiter:this.aggregationMatchRules["".concat(u[g],"_DELIMITER")]?this.aggregationMatchRules["".concat(u[g],"_DELIMITER")]:""};p.attrs&&p.attrs.length&&d.push(p)}var h={mappingPrecedence:t.join(","),nameFormat:JSON.stringify(i),orgId:this.ORG_ID,subscriberMatchRule:this.subscriberMatchRules?this.subscriberMatchRules.join(","):"",aggregationRules:JSON.stringify(d),tenantId:0};if(this.loading=!0,this.new){var m=h;i.length||delete m.nameFormat,""==m.subscriberMatchRule&&delete m.subscriberMatchRule,this.saveSubs=this.service.save(m,this.ORG_ID).subscribe(function(t){if(-1!==h.mappingPrecedence.indexOf("DHCP")){var i=e.keyConfigEditObj&&Object.keys(e.keyConfigEditObj).length?e.keyConfigEditObj:e.keyConfigDefaultObj;e.addKeyConfigSusbs=e.service.addDHCPKeyConfiguration(e.ORG_ID,{macAddress:!!i.macAddress&&i.macAddress,remoteId:!!i.remoteId&&i.remoteId,circuitId:!!i.circuitId&&i.circuitId,subscriberId:!!i.subscriberId&&i.subscriberId,clientHostName:!!i.clientHostName&&i.clientHostName}).subscribe(function(t){e.closeTab(),e.cancel(),e.getData()},function(t){t.error&&t.error.error_code&&e.pageErrorHandle(t)})}else e.closeTab(),e.cancel(),e.getData()},function(t){409==t.status&&t.error&&t.error.error_code&&t.error.error_code.indexOf("already exists")>-1?e.updatePatchMappingSource(h):t.error&&t.error.error_code&&e.pageErrorHandle(t)})}else this.updatePatchMappingSource(h)}},{key:"updatePatchMappingSource",value:function(e){var t=this,i=[];if(i.push(this.service.patchUpdate({mappingPrecedence:e.mappingPrecedence},this.ORG_ID)),i.push(this.service.patchUpdate({nameFormat:e.nameFormat},this.ORG_ID)),""!=e.subscriberMatchRule&&i.push(this.service.patchUpdate({subscriberMatchRule:e.subscriberMatchRule},this.ORG_ID)),e.aggregationRules&&i.push(this.service.patchUpdate({aggregationRules:e.aggregationRules},this.ORG_ID)),-1!==e.mappingPrecedence.indexOf("DHCP")){var n=this.keyConfigEditObj&&Object.keys(this.keyConfigEditObj).length?this.keyConfigEditObj:this.keyConfigDefaultObj,a={macAddress:!!n.macAddress&&n.macAddress,remoteId:!!n.remoteId&&n.remoteId,circuitId:!!n.circuitId&&n.circuitId,subscriberId:!!n.subscriberId&&n.subscriberId,clientHostName:!!n.clientHostName&&n.clientHostName};this.keyConfigs&&Object.keys(this.keyConfigs).length?(a._id=this.keyConfigs._id,i.push(this.service.updateDHCPKeyConfiguration(this.ORG_ID,a))):i.push(this.service.addDHCPKeyConfiguration(this.ORG_ID,a))}else-1===e.mappingPrecedence.indexOf("DHCP")&&this.keyConfigs&&Object.keys(this.keyConfigs).length&&i.push(this.service.deleteDHCPKeyConfiguration(this.ORG_ID));(0,Z.D)(i).subscribe(function(e){t.closeTab(),t.cancel(),t.getData()},function(e){t.loading=!1,t.pageErrorHandle(e)})}},{key:"getTitle",value:function(e){return this.title[e]?this.title[e]:e}},{key:"trackItem",value:function(e,t){return t.name}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){var t="";400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=this.language.Error,this.openInfoModal(),this.loading=!1):(t=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1)}},{key:"openInfoModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}},{key:"aggregationRuleNames",value:function(e){var t=this,i=[];this.aggregationMatchRules[e].forEach(function(e){i.push(t.title[e]?t.title[e]:e)});return i.join(this.aggregationMatchRules["".concat(e,"_DELIMITER")]?this.aggregationMatchRules["".concat(e,"_DELIMITER")]:"_")}},{key:"makeOrderByMapPrecedence",value:function(e,t){return e.sort(function(e,i){return t.indexOf(e.name)<t.indexOf(i.name)?-1:t.indexOf(e.name)>t.indexOf(i.name)?1:0})}},{key:"changeKeyConfig",value:function(){}},{key:"resetKeyConfigurations",value:function(){this.keyConfigDefaultObj={macAddress:!1,remoteId:!1,circuitId:!1,subscriberId:!1,clientHostName:!1},this.keyConfigEditObj={},this.keyConfigs={}}},{key:"getKeyConfigurations",value:function(){var e=this;this.keyConfigLoading=!0,this.keyConfigSubs=this.service.getDHCPKeyConfiguration(this.ORG_ID).subscribe(function(t){e.keyConfigs=t||{},e.keyConfigDefaultObj=t&&Object.keys(t).length?{macAddress:!!t.macAddress&&t.macAddress,remoteId:!!t.remoteId&&t.remoteId,circuitId:!!t.circuitId&&t.circuitId,subscriberId:!!t.subscriberId&&t.subscriberId,clientHostName:!!t.clientHostName&&t.clientHostName}:{macAddress:!1,remoteId:!1,circuitId:!1,subscriberId:!1,clientHostName:!1}},function(e){})}},{key:"checkKeyConfigStatus",value:function(e){if(e){var t=[];return this.keyConfigDefaultObj.macAddress&&t.push("MAC Address"),this.keyConfigDefaultObj.remoteId&&t.push("DHCP Remote Id"),this.keyConfigDefaultObj.circuitId&&t.push("DHCP Circuit Id"),this.keyConfigDefaultObj.subscriberId&&t.push("DHCP Subscriber Id"),this.keyConfigDefaultObj.clientHostName&&t.push("DHCP Client Hostname"),t.join(", ")}return!!(this.keyConfigDefaultObj.macAddress||this.keyConfigDefaultObj.remoteId||this.keyConfigDefaultObj.circuitId||this.keyConfigDefaultObj.subscriberId||this.keyConfigDefaultObj.clientHostName)}},{key:"resetMappingRuleObj",value:function(){var e=this,t=Object.keys(this.mpngRuleObj);t&&t.forEach(function(t){e.mpngRuleObj[t]={data:[],key:t,name:t,rules:[{attrs:[],delimiter:""}]}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(Ze),c.Y36(d.t6),c.Y36(l.F0),c.Y36(I.FF),c.Y36(D.v),c.Y36(S.s),c.Y36(k.Dx))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-mapping-source"]],viewQuery:function(e,t){var i;(1&e&&(c.Gf(_e,7),c.Gf(xe,7)),2&e)&&(c.iGM(i=c.CRH())&&(t.infoModal=i.first),c.iGM(i=c.CRH())&&(t.aggregWarningModal=i.first))},decls:9,vars:4,consts:[[1,"container","loader-wrapper","position-relative"],["class","loader-wrapper-info",4,"ngIf"],["class","row",4,"ngIf"],["class","row edit-submit-wrapper my-3",4,"ngIf"],["infoModal",""],["aggregWarningModal",""],[1,"loader-wrapper-info"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row"],[1,"col-md-12","mapping-edit-btn"],[1,"btn-default","primary","my-2",3,"click"],[1,"col-md-5","mt20"],["id","accordion",4,"ngIf"],["id","accordion"],["class","card violent-bg mb-6px",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","violent-bg","mb-6px"],["data-toggle","collapse",1,"collapsed","card-link","white","h-30px",3,"href"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"ul-li-style","collapse",3,"id"],[1,"mapping-rl"],[4,"ngFor","ngForOf"],["class","aggre-rl",4,"ngIf"],[1,"sxa-color-white"],[1,"aggre-rl"],[1,"ml15-li-none"],[1,"w-nowrap"],[1,"fa","fa-th-list"],[1,"col-md-6"],[1,"mapping-src-wrapper"],["cdkDropList","",1,"added_mapping_src",3,"cdkDropListDropped"],["cdkDrag","","class","card violent-bg mb-6px",4,"ngFor","ngForOf"],["id","add_mapping_src","data-toggle","dropdown",1,"endpoint-dropdown","drop-down-container","mapping-src-btn-wrapper"],[1,"fa-custom-btn","btn-default","primary","px-3",3,"disabled"],["aria-hidden","true",1,"fa","fa-plus","add-mapping-i"],["id","main-edit-dropdown",1,"dropdown-menu","endpoint-dropdown-menu","white","drop-down"],["id","endpoint_added_RADIUS","class","endpoint-dropdown-menu-list sxa-bgcolor-violet white cursor-pointer","data-sname","RADIUS",3,"click",4,"ngFor","ngForOf"],[1,""],["class","col-md-5",4,"ngIf"],["cdkDrag","",1,"card","violent-bg","mb-6px"],[1,"card-link","white"],["class","fa fa-trash pull-right pointer","aria-hidden","true",3,"click",4,"ngIf"],["class","fas fa-pencil-alt pull-right pointer","aria-hidden","true",3,"click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-arrow-right","fa-2x","sxa-color-gold","pull-right","pointer","gold-right-pointer",2,"display","none",3,"id"],["aria-hidden","true",1,"fa","fa-trash","pull-right","pointer",3,"click"],["aria-hidden","true",1,"fas","fa-pencil-alt","pull-right","pointer",3,"click"],["id","endpoint_added_RADIUS","data-sname","RADIUS",1,"endpoint-dropdown-menu-list","sxa-bgcolor-violet","white","cursor-pointer",3,"click"],[1,"col-md-5"],[1,"rule-tabs-wrapper"],[1,"rule-tabs-close-icon",3,"click"],["id","mapping_src_rule_close_CUSTOM","data-sname","CUSTOM","aria-hidden","false",1,"fa","fa-times"],["id","myTab","role","tablist",1,"nav","mainmenu-fa","flow-config-tab"],[1,"main-menu-item"],["id","home-tab","data-toggle","tab","href","#home","role","tab","aria-controls","home","aria-selected","true",1,"nav-link","active"],["class","main-menu-item",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["cdkDropList","","id","draggable_pool_for_rules","class","draggable_mappring_ul_src ui-sortable",3,"cdkDropListDropped",4,"ngIf"],["id","add_rule","data-toggle","dropdown",1,"mx-4","mt-30px","btn-default","primary","px-3","dropdown","endpoint-dropdown","pointer",3,"ngClass"],["aria-hidden","true",1,"fa","fa-plus","add-icon"],[1,"dropdown-menu","endpoint-dropdown-menu","white"],["id","add-rules-li","class","endpoint-dropdown-menu-list sxa-bgcolor-violet white","data-sname","RADIUS",3,"click",4,"ngFor","ngForOf"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],["class","tab-pane fade key-config","id","key_config","role","tabpanel","aria-labelledby","key_config-tab",4,"ngIf"],["id","aggregationRule","role","tabpanel","aria-labelledby","aggregationRule-tab",1,"tab-pane","fade"],["id","draggable_pool_for_rules","class","draggable_mappring_ul_src ui-sortable",4,"ngIf"],[1,"my-3","text-center-mt30"],[1,"btn-default","primary","text-center",3,"click"],[1,"btn-default","btn-dft","py-1","text-center-ml15",3,"click"],["id","profile-tab","data-toggle","tab","href","#profile","role","tab","aria-controls","profile","aria-selected","false",1,"nav-link"],["id","key_config-tab","data-toggle","tab","href","#key_config","role","tab","aria-controls","key_config","aria-selected","false",1,"nav-link"],["id","aggregationRule-tab","data-toggle","tab","href","#aggregationRule","role","tab","aria-controls","aggregationRule","aria-selected","false",1,"nav-link"],["cdkDropList","","id","draggable_pool_for_rules",1,"draggable_mappring_ul_src","ui-sortable",3,"cdkDropListDropped"],["cdkDrag","","class","rule_class draggable_mapping_element sxa-color-white draggable",4,"ngFor","ngForOf"],["cdkDrag","",1,"rule_class","draggable_mapping_element","sxa-color-white","draggable"],[1,"fa","fa-ellipsis-v","mr-cur-resize"],["id","mapping_src_rule_delete_DHCP0",1,"rule_trash","fa","fa-trash","f-right-cp",3,"click"],["cdkDropList","","id","draggable_pool_attrs_DHCP0","class","ui-sortable draggable_pool_attr_ul",3,"cdkDropListDropped",4,"ngIf"],["class","delimiter-wrapper",4,"ngIf"],["data-toggle","dropdown",1,"btn-default","primary","px-3","append_mapping_src_attr","fa-custom-btn","dropdown","endpoint-dropdown","pointer",3,"ngClass"],[1,"fa","fa-plus","add-icon"],[1,"dropdown-menu","endpoint-dropdown-menu"],["class","endpoint-dropdown-menu-list sxa-bgcolor-violet white","data-sname","RADIUS",3,"click",4,"ngFor","ngForOf"],["cdkDropList","","id","draggable_pool_attrs_DHCP0",1,"ui-sortable","draggable_pool_attr_ul",3,"cdkDropListDropped"],["cdkDrag","","class","attr_class draggable sxa-color-white","data-attrname","dhcpSubscriberId",4,"ngFor","ngForOf"],["cdkDrag","","data-attrname","dhcpSubscriberId",1,"attr_class","draggable","sxa-color-white"],[1,"fa","fa-ellipsis-v","mx1-c-resize"],["data-sname","DHCP","data-rule-index","0","data-attrname","dhcpSubscriberId",1,"rule_trash","rule-trash-item","fa","fa-trash",3,"id","click"],[1,"delimiter-wrapper"],[1,"form-group","row"],["for","inputEmail3",1,"col-form-label"],["placeholder","","appendTo","body",1,"delimiter-select",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["data-sname","RADIUS",1,"endpoint-dropdown-menu-list","sxa-bgcolor-violet","white",3,"click"],["id","add-rules-li","data-sname","RADIUS",1,"endpoint-dropdown-menu-list","sxa-bgcolor-violet","white",3,"click"],["data-toggle","dropdown",1,"btn-default","primary","append_mapping_src_attr","fa-custom-btn","dropdown","endpoint-dropdown","pointer",3,"ngClass"],["id","key_config","role","tabpanel","aria-labelledby","key_config-tab",1,"tab-pane","fade","key-config"],[1,"row","key-config-checkbox-group"],[1,"col-md-12"],["type","checkbox","name","macAddress","id","key_config_1",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_1",1,""],["type","checkbox","name","remoteId","id","key_config_2",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_2",1,""],["type","checkbox","id","key_config_3","name","circuitId",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_3",1,""],["type","checkbox","value","","id","key_config_4","name","subscriberId",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_4",1,""],["type","checkbox","value","","id","key_config_5","name","clientHostName",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_5",1,""],["id","draggable_pool_for_rules",1,"draggable_mappring_ul_src","ui-sortable"],["class","rule_class draggable_mapping_element sxa-color-white draggable",4,"ngFor","ngForOf"],[1,"rule_class","draggable_mapping_element","sxa-color-white","draggable"],[1,"row","edit-submit-wrapper","my-3"],[1,"col-md-5","d-inline-block"],["id","mapping_src_mgr_submit",1,"btn-default","primary","mx-2","text-center",3,"click"],["id","mapping_src_mgr_cancel",1,"btn-default","btn-dft","py-1","text-center","ml-2",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Ae,5,0,"div",1),c.YNc(2,Se,6,2,"div",2),c.YNc(3,at,14,6,"div",2),c.YNc(4,rt,6,2,"div",3),c.qZA(),c.YNc(5,st,10,3,"ng-template",null,4,c.W1O),c.YNc(7,ot,12,4,"ng-template",null,5,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngIf",!t.edit),c.xp6(1),c.Q6J("ngIf",t.edit),c.xp6(1),c.Q6J("ngIf",t.edit&&!t.showTab))},directives:[s.O5,s.sg,be.Wj,be.Zt,s.mk,o._Y,o.JL,o.F,M.w9,o.JJ,o.On,o.Wl],styles:['@charset "UTF-8";.main-menu-item[_ngcontent-%COMP%]{text-align:center;color:#7c7c7c;font-size:13px;font-weight:600;background-color:#fff;margin:0 1px 1px}.rule-tabs-wrapper[_ngcontent-%COMP%]{border:1px solid black;margin-top:-1px}.violent-bg[_ngcontent-%COMP%]{background-color:#f8f8fa;color:#1a1f22}.white[_ngcontent-%COMP%]{color:#1a1f22}#accordion[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1a1f22}.blue-bg[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff}.sxa-bgcolor-violet[_ngcontent-%COMP%]{background-color:#f8f8fa;color:#1a1f22}.endpoint-dropdown-menu-list[_ngcontent-%COMP%]{border-color:#005;margin:0 5px 5px;padding:5px;font-size:1.2em;font-style:inherit;display:block;text-align:left}@media only screen and (min-device-width: 765px) and (max-device-width: 1025px){.violent-bg[_ngcontent-%COMP%]{height:50px!important}}.endpoint-dropdown-menu[_ngcontent-%COMP%]{top:inherit;left:inherit;max-height:195px;overflow-y:auto;overflow-x:hidden;margin-top:-10px;width:85%;position:relative}#add_mapping_src[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]{margin-bottom:120px}.draggable_mapping_element[_ngcontent-%COMP%]{background-color:gray;border-color:#005;margin:0 5px 5px;padding:5px;font-size:1.2em;font-style:inherit;display:block;text-align:left;width:97%;cursor:default}.sxa-color-white[_ngcontent-%COMP%]{color:#1a1f22}.draggable_mappring_ul_src[_ngcontent-%COMP%]{overflow:auto!important;overflow-y:hidden!important;background-color:#eee;border:5px solid #eee;list-style-type:none;margin:10px;padding:5px 0 0;min-height:45px}.drop-down-container[_ngcontent-%COMP%]{position:relative}.drop-down[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}[data-toggle=collapse][_ngcontent-%COMP%]:after{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\f054";transform:rotate(90deg);transition:all linear .25s;float:right}[data-toggle=collapse].collapsed[_ngcontent-%COMP%]:after{transform:rotate(0)}.violent-bg[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .violent-bg[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{height:30px;padding:10px;margin-bottom:6px}.mapping-src-wrapper[_ngcontent-%COMP%]{border:1px solid black;padding:10px}.added_mapping_src[_ngcontent-%COMP%]{padding:10px}.mapping-src-btn-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:30px}.add-mapping-src-btn[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:2px 2px #000;width:100%}.gold-right-pointer[_ngcontent-%COMP%]{margin-top:-4px}.draggable_pool_attr_ul[_ngcontent-%COMP%]{margin-top:10px;overflow:auto!important;overflow-y:hidden!important;margin-left:20px;margin-right:10px}.add-icon[_ngcontent-%COMP%]{margin-right:5px}.append_mapping_src_attr[_ngcontent-%COMP%], .add-rule-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:93%;margin:10px auto;border:none!important}.attr_class[_ngcontent-%COMP%]{opacity:1;background-color:#9e9e9e!important;margin-bottom:10px;height:30px;padding:3px 3px 2px}.rule-tabs-close-icon[_ngcontent-%COMP%]{float:right;cursor:pointer;padding:10px;position:absolute;right:20px;top:-5px}.delimiter-wrapper[_ngcontent-%COMP%]{margin-left:55px;margin-right:10px}.delimiter-select[_ngcontent-%COMP%]{width:115px;margin-left:10px}.pointer[_ngcontent-%COMP%]{cursor:pointer}div.disabled[_ngcontent-%COMP%]{pointer-events:none;background:#0279FF!important;border:1px solid #0279FF!important;cursor:not-allowed;opacity:.5;color:#81bcff}.ul-li-style[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:circle!important}.ul-li-style[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:35px}.ul-li-style[_ngcontent-%COMP%]   ul.aggre-rl[_ngcontent-%COMP%]{border-top:1px solid white}.key-config[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:15px}.key-config[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .key-config-checkbox-group[_ngcontent-%COMP%]{padding-left:25px}.key-config[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .key-config-checkbox-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px;cursor:pointer}.mb-6px[_ngcontent-%COMP%]{margin-bottom:6px}.h-30px[_ngcontent-%COMP%]{height:30px}.ml15-li-none[_ngcontent-%COMP%]{margin-left:15px;list-style:none}.w-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.add-mapping-i[_ngcontent-%COMP%]{margin-right:5px;margin-top:3px}.mr-cur-resize[_ngcontent-%COMP%]{margin-right:5px;cursor:n-resize}.f-right-cp[_ngcontent-%COMP%]{float:right;margin-top:5px;cursor:pointer}.mx1-c-resize[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px;cursor:n-resize}.rule-trash-item[_ngcontent-%COMP%]{margin-top:4px;margin-right:5px;cursor:pointer;float:right}.mt-30px[_ngcontent-%COMP%]{margin-top:30px}.text-center-mt30[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.text-center-ml15[_ngcontent-%COMP%]{text-align:center;margin-left:15px}']}),t}(),ct=["infoModal"],ut=["confirmModal"],dt=["closeConfirm"];function gt(e,t){1&e&&(c.TgZ(0,"div",18),c.TgZ(1,"div",19),c.TgZ(2,"div",20),c.TgZ(3,"span",21),c._uU(4,"Loading..."),c.qZA(),c.qZA(),c.qZA(),c.qZA())}function pt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",22),c.TgZ(1,"h4",23),c._uU(2),c.qZA(),c.TgZ(3,"button",24),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",25),c.qZA(),c.qZA(),c.TgZ(5,"div",26),c._uU(6),c.qZA(),c.TgZ(7,"div",27),c.TgZ(8,"button",28),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(9),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(4),c.hij(" ",n.infoBody," "),c.xp6(3),c.Oqu(n.language.Okay)}}function ht(e,t){if(1&e){var i=c.EpF();c.ynx(0),c.TgZ(1,"div",22),c.TgZ(2,"h4",23),c._uU(3),c.qZA(),c.TgZ(4,"button",24),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(5,"span",25),c.qZA(),c.qZA(),c.TgZ(6,"div",26),c._UZ(7,"div",29),c.qZA(),c.TgZ(8,"div",27),c.TgZ(9,"button",28),c.NdJ("click",function(){c.CHM(i);var e=c.oxw();return e.mappingSourceFlag?e.openConfirmModal(!0):e.save()}),c._uU(10),c.qZA(),c.TgZ(11,"button",30),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(12),c.qZA(),c.qZA(),c.BQk()}if(2&e){var n=c.oxw();c.xp6(3),c.Oqu(n.infoTitle),c.xp6(4),c.Q6J("innerHtml",n.infoBody,c.oJD),c.xp6(3),c.Oqu(n.language.Okay),c.xp6(2),c.Oqu(n.language.Cancel)}}r(91704);var mt=function(){var e=function(){function e(t,n,a,r,s,o,l){var c=this;i(this,e),this.router=t,this.service=n,this.sso=a,this.dialogService=r,this.commonOrgService=s,this.translateService=o,this.titleService=l,this.pageAvailable=!1,this.endpointDiscoverySelected="outbound",this.mappingSourceFlag=!1;var u=this.router.url;this.ORG_ID=this.sso.getOrganizationID(u),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateService.selectedLanguage.subscribe(function(e){c.language=e,c.titleService.setTitle("".concat(c.language.Settings," - ").concat(c.language.end," - ").concat(c.language.flowconfiguration," - ").concat("systemAdministration"===d?c.language["System Administration"]:c.language.administration," - ").concat(c.language["Calix Cloud"]))}),this.commonOrgService.closeAlert();var d=this.sso.getRedirectModule(u);this.titleService.setTitle("".concat(this.language.Settings," - ").concat(this.language.end," - ").concat(this.language.flowconfiguration," - ").concat("systemAdministration"===d?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return a(e,[{key:"ngOnInit",value:function(){this.getData()}},{key:"ngAfterViewInit",value:function(){this.loaded=!0}},{key:"ngOnDestroy",value:function(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.listSubs&&this.listSubs.unsubscribe(),this.createSubs&&this.createSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe()}},{key:"getData",value:function(){var e=this;this.listSubs=this.service.getOrg(this.ORG_ID).subscribe(function(t){e.orgData=t,t&&e.orgData&&null!=e.orgData.retentionPeriodDays&&(e.age=e.orgData.retentionPeriodDays)},function(t){e.pageErrorHandle(t)})}},{key:"createData",value:function(){var e=this;this.createSubs=this.service.createOrg(this.ORG_ID,{orgId:this.ORG_ID,tenantId:0}).subscribe(function(t){e.orgData=t,e.loading=!1,e.showButton=!1,e.orgData&&null!=e.orgData.retentionPeriodDays&&(e.age=e.orgData.retentionPeriodDays)},function(t){e.pageErrorHandle(t)})}},{key:"changeAge",value:function(){this.showButton=!this.orgData||!this.orgData.retentionPeriodDays||this.orgData.retentionPeriodDays!=this.age}},{key:"validateTimeDelay",value:function(){if(null==this.age||isNaN(this.age)||this.age<5||this.age>200)return this.infoTitle="",this.infoBody=this.language["Age Out days should be between 5 to 200"],this.closeModal(),void(this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1}));this.orgData&&this.orgData.nameFormat&&JSON.parse(this.orgData.nameFormat).length?this.openConfirmModal(!0):(this.mappingSourceFlag=!0,this.openConfirmModal(!1))}},{key:"openConfirmModal",value:function(e){e?(this.infoTitle=this.language["Confirm change :"],this.infoBody="".concat(this.language.ageOut,": ").concat(this.age," ").concat(this.language.days),this.mappingSourceFlag=!1):(this.infoTitle="".concat(this.language.Info," :"),this.infoBody=this.language["There is no mapping source. Would you like to continue?"]),this.closeModal(),this.modalRef=this.dialogService.open(this.confirmModal,{backdrop:"static",keyboard:!1})}},{key:"save",value:function(){var e=this;this.commonOrgService.closeAlert();var t=this.orgData&&null!=this.orgData?this.orgData:{orgId:this.ORG_ID};t.retentionPeriodDays=null!=this.age?this.age:180,this.updateSubs=this.service.updateOrgPUT(this.ORG_ID,t).subscribe(function(t){e.orgData=t,e.loading=!1,e.showButton=!1,e.orgData&&e.orgData.retentionPeriodDays&&(e.age=e.orgData.retentionPeriodDays),e.closeModal()},function(t){e.closeModal(),e.pageErrorHandle(t)})}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e){var t="";400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle="Error",this.openInfoModal(),this.loading=!1):(401==e.status?(this.errorMessage=this.language["Access Denied"],t=this.language["Access Denied"]):(t=this.commonOrgService.pageErrorHandle(e),404==e.status&&"Invalid organization provided for update"==t&&(t=this.language["Invalid Age Out value provided for update"])),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1)}},{key:"openInfoModal",value:function(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.F0),c.Y36(A.U),c.Y36(d.t6),c.Y36(I.FF),c.Y36(D.v),c.Y36(S.s),c.Y36(k.Dx))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-settings"]],viewQuery:function(e,t){var i;(1&e&&(c.Gf(ct,7),c.Gf(ut,7),c.Gf(dt,7)),2&e)&&(c.iGM(i=c.CRH())&&(t.infoModal=i.first),c.iGM(i=c.CRH())&&(t.confirmModal=i.first),c.iGM(i=c.CRH())&&(t.closeConfirm=i.first))},decls:25,vars:7,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],[1,"row","my-3","p-2"],[1,"col-md-12"],[1,"fw100"],[1,"form-group","row"],["for","age",1,"col-sm-2"],[1,"error"],[1,"col-sm-6"],[1,"row"],[1,"ccl-form","col-sm-6"],["type","number","id","age","placeholder","","name","age","min","5","max","200",1,"",3,"ngModel","ngModelChange","keyup","change"],[1,"col-sm-6","pl-0"],[1,"age-out-days-text","pt-1"],["id","",1,"form-text","text-muted"],["type","button","id","apply-btn",1,"btn-default","btn-primary",3,"disabled","click"],["infoModal",""],["confirmModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[3,"innerHtml"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,gt,5,0,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"form",4),c.TgZ(5,"div",5),c.TgZ(6,"label",6),c._uU(7),c.TgZ(8,"span",7),c._uU(9,"*"),c.qZA(),c.qZA(),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c.TgZ(12,"div",10),c.TgZ(13,"input",11),c.NdJ("ngModelChange",function(e){return t.age=e})("keyup",function(){return t.changeAge()})("change",function(){return t.changeAge()}),c.qZA(),c.qZA(),c.TgZ(14,"div",12),c.TgZ(15,"label",13),c._uU(16),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"small",14),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"button",15),c.NdJ("click",function(){return t.validateTimeDelay()}),c._uU(20),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(21,pt,10,3,"ng-template",null,16,c.W1O),c.YNc(23,ht,13,4,"ng-template",null,17,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(6),c.hij("",t.language.ageOut," "),c.xp6(6),c.Q6J("ngModel",t.age),c.xp6(3),c.Oqu(t.language.days),c.xp6(2),c.hij("(",t.language.byDefault,")"),c.xp6(1),c.Q6J("disabled",!t.showButton),c.xp6(1),c.Oqu(t.language.apply))},directives:[s.O5,o._Y,o.JL,o.F,o.qQ,o.Fd,o.wV,o.Fj,o.JJ,o.On],styles:[""]}),e}(),ft=function(){var e=function(){function e(t){i(this,e),this.httpClient=t,this.subnet="subnet",this.staticSubnet="staticsubnet",this.arrayToObject=function(e,t){return e.reduce(function(e,i){return e[i[t]]=i,e},{})},this.baseUrl=_.N.faAdminURL;var n=new y.WM({"Content-Type":"application/json"});this.options={headers:n},this.export=this.baseUrl+"export/"}return a(e,[{key:"getSubnets",value:function(e){return this.httpClient.get("".concat(_.N.FLOW_BASE_URL,"agg/aggregationsubnet?org-id=").concat(e))}},{key:"addSubnet",value:function(e,t){return this.httpClient.post("".concat(_.N.FLOW_BASE_URL,"agg/aggregationsubnet?org-id=").concat(t,"&name=").concat(e.name,"&subnets=").concat(e.subnets),this.options)}},{key:"importSubnets",value:function(e,t){return this.httpClient.post("".concat(_.N.FLOW_BASE_URL,"agg/aggregationsubnet/import?org-id=").concat(t),e)}},{key:"deleteSubnet",value:function(e,t){return this.httpClient.request("DELETE","".concat(_.N.FLOW_BASE_URL,"agg/aggregationsubnet?org-id=").concat(e),{body:t})}},{key:"updateSubnet",value:function(e,t,i){return this.httpClient.put("".concat(_.N.FLOW_BASE_URL,"agg/aggregationsubnet?org-id=").concat(i),t,this.options)}},{key:"exportProcess",value:function(e){var t=[];return e.forEach(function(e){t.push({subnet:e.subnet?e.subnet:"",excluded:e.excluded?e.excluded:""})}),t}},{key:"importDataProcess",value:function(e,t){return e.forEach(function(e){e.excluded=!("N"==e.excluded.toUpperCase()||"NO"==e.excluded.toUpperCase()),e.isstatic=!1,e.isv4=!0,e.action=t?"Create":"Update"}),e}},{key:"checkData",value:function(e){if(Array.isArray(e[0])){var t=[];return e.forEach(function(e){t.push({subnet:e[0],excluded:e[1]})}),t}return e}},{key:"trimSubnet",value:function(e){for(e=e.trim();"."===e[e.length-1];)e=e.slice(0,-1);return e}},{key:"isSubnetV4",value:function(e){return 4==e.split("/")[0].split(".").length}},{key:"isSubnetV6",value:function(e){return 6==e.split("/")[0].split(".").length}},{key:"deleteObjectFromArray",value:function(e,t){return e.filter(function(e){return e._id!==t})}},{key:"Export",value:function(e){return this.httpClient.post("".concat(_.N.FLOW_BASE_URL,"agg/aggregationsubnet/export?org-id=").concat(e),{})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(y.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),bt=["infoModal"],vt=["deleteModal"],Zt=["multiDeleteModal"],_t=["importModal"],xt=["fullImportInput"],At=["incImportInput"];function yt(e,t){if(1&e&&(c.TgZ(0,"div",20),c.TgZ(1,"div",21),c.TgZ(2,"div",22),c.TgZ(3,"span",23),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw();c.xp6(4),c.Oqu(i.language.Loading)}}function Tt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",24),c.TgZ(1,"div",25),c.TgZ(2,"div",26),c.TgZ(3,"div"),c.TgZ(4,"button",27),c.NdJ("click",function(){return c.CHM(i),c.oxw().create()}),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"div"),c.TgZ(7,"button",28),c.NdJ("click",function(){return c.CHM(i),c.oxw().export()}),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"div",29),c.TgZ(10,"button",30),c.NdJ("click",function(){return c.CHM(i),c.oxw().fullImportUpload()}),c._uU(11),c.qZA(),c.TgZ(12,"input",31,32),c.NdJ("change",function(e){return c.CHM(i),c.oxw().fullImport(e,!0)}),c.qZA(),c.qZA(),c.TgZ(14,"div",29),c.TgZ(15,"label",33),c._uU(16),c.qZA(),c.TgZ(17,"input",34,35),c.NdJ("change",function(e){return c.CHM(i),c.oxw().fullImport(e,!1)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",36),c.TgZ(20,"div",37),c._UZ(21,"input",38),c.TgZ(22,"button",39),c._UZ(23,"i",40),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(5),c.hij(" ",n.language.create," "),c.xp6(3),c.hij(" ",n.language.export," "),c.xp6(3),c.hij(" ",n.language.fullImport," "),c.xp6(5),c.hij("",n.language.incrementalImport," ")}}function Ct(e,t){if(1&e&&(c.TgZ(0,"div",59),c.TgZ(1,"span",60),c._uU(2),c.qZA(),c.qZA()),2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(i.language.addSubnets)}}function It(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",59),c.TgZ(1,"span",60),c._uU(2),c.qZA(),c.TgZ(3,"span",61),c.NdJ("click",function(){var e=c.CHM(i).index;return c.oxw(2).removeSubnet(e)}),c._UZ(4,"i",62),c.qZA(),c.qZA()}if(2&e){var n=t.$implicit;c.xp6(2),c.Oqu(n)}}function Dt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"section"),c.TgZ(1,"div",41),c.TgZ(2,"div",42),c.TgZ(3,"form"),c.TgZ(4,"div",43),c.TgZ(5,"div",44),c.TgZ(6,"label",45),c._uU(7),c.TgZ(8,"span",46),c._uU(9,"*"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",47),c.TgZ(11,"input",48),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().createName=e})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("createName",e.createName)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",43),c.TgZ(13,"div",44),c.TgZ(14,"label",45),c._uU(15),c.TgZ(16,"span",46),c._uU(17,"*"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"div",47),c.YNc(19,Ct,3,1,"div",49),c.YNc(20,It,5,1,"div",50),c._UZ(21,"label",51),c.TgZ(22,"input",52),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw().createSubnet=e})("blur",function(){c.CHM(i);var e=c.oxw();return e.removeUnwantedSpace("createSubnet",e.createSubnet)}),c.qZA(),c.qZA(),c.TgZ(23,"button",53),c.NdJ("click",function(){return c.CHM(i),c.oxw().addSubnet()}),c._uU(24),c.qZA(),c.qZA(),c.TgZ(25,"div",54),c.TgZ(26,"div",55),c._UZ(27,"label",56),c.qZA(),c.TgZ(28,"button",57),c.NdJ("click",function(){return c.CHM(i),c.oxw().submit()}),c._uU(29),c.qZA(),c.TgZ(30,"button",58),c.NdJ("click",function(){return c.CHM(i),c.oxw().cancel()}),c._uU(31),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(7),c.hij("",n.language.name," "),c.xp6(4),c.Q6J("ngModel",n.createName),c.xp6(4),c.hij("",n.language.subnets," "),c.xp6(4),c.Q6J("ngIf",!n.createSubnetsList.length),c.xp6(1),c.Q6J("ngForOf",n.createSubnetsList),c.xp6(2),c.Q6J("ngModel",n.createSubnet),c.xp6(2),c.hij(" ",n.language.Add," "),c.xp6(5),c.hij(" ",n.language.submit," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}function St(e,t){if(1&e&&(c.TgZ(0,"tr",70),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.qZA()),2&e){var i=t.$implicit;c.s9C("id",i._id),c.xp6(2),c.Oqu(i.action),c.xp6(2),c.Oqu(i.name),c.xp6(2),c.Oqu(i.subnets),c.xp6(2),c.Oqu(i.subnets_old?i.subnets_old:"")}}function kt(e,t){if(1&e&&(c.TgZ(0,"div",4),c.TgZ(1,"div",68),c.TgZ(2,"table",69),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th"),c._uU(6),c.qZA(),c.TgZ(7,"th"),c._uU(8),c.qZA(),c.TgZ(9,"th"),c._uU(10),c.qZA(),c.TgZ(11,"th"),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,St,9,5,"tr",15),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var i=c.oxw(2);c.xp6(2),c.Q6J("dtOptions",i.importTableOptions),c.xp6(4),c.Oqu(i.language.action),c.xp6(2),c.Oqu(i.language.name),c.xp6(2),c.Oqu(i.language.subnets),c.xp6(2),c.AsE("",i.language.old," ",i.language.subnets,""),c.xp6(2),c.Q6J("ngForOf",i.importTableData)}}function Ot(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"section"),c.YNc(1,kt,15,7,"div",63),c.TgZ(2,"div",64),c.TgZ(3,"div",65),c.TgZ(4,"button",66),c.NdJ("click",function(){return c.CHM(i),c.oxw().submitImport()}),c._uU(5),c.qZA(),c.TgZ(6,"button",67),c.NdJ("click",function(){return c.CHM(i),c.oxw().cancel()}),c._uU(7),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.tablePreview),c.xp6(3),c.Q6J("disabled",n.disabledSubmitBtn()),c.xp6(1),c.hij(" ",n.language.submit," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}function Mt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",74),c.TgZ(1,"div",8),c.TgZ(2,"span",75),c.TgZ(3,"div",76),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw().edit(e)}),c._UZ(4,"i",77),c.qZA(),c.qZA(),c.TgZ(5,"span",75),c.TgZ(6,"input",78),c.NdJ("click",function(e){c.CHM(i);var t=c.oxw().$implicit;return c.oxw().getDeleteIds(e,t)}),c.qZA(),c.qZA(),c.TgZ(7,"span",75),c.TgZ(8,"div",79),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw().delete(e)}),c._UZ(9,"i",14),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw().$implicit,a=c.oxw();c.xp6(3),c.s9C("title",a.language.Edit),c.xp6(3),c.Gre("delete_id_",n._id,""),c.s9C("id",n._id),c.s9C("value",n._id),c.MGl("name","delete_id_",n._id,""),c.s9C("title",a.language.Select),c.xp6(2),c.s9C("title",a.language.Delete)}}function wt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",80),c.TgZ(1,"div",81),c.TgZ(2,"span",82),c.TgZ(3,"div",83),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().$implicit;return c.oxw().updateSave(e._id)}),c._UZ(4,"i",84),c.qZA(),c.qZA(),c.TgZ(5,"span",82),c.TgZ(6,"div",85),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).updateCancel()}),c._UZ(7,"i",86),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}function qt(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){var i=c.oxw().$implicit;c.xp6(1),c.hij(" ",i.newSubnets[0]?i.newSubnets[0]:""," ")}}function Rt(e,t){if(1&e&&(c.ynx(0),c._uU(1),c._UZ(2,"br"),c.BQk()),2&e){var i=t.$implicit;c.xp6(1),c.hij(" ",i,"")}}function Nt(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",87),c._UZ(2,"i",88),c._UZ(3,"i",89),c._uU(4," \xa0\xa0( "),c.TgZ(5,"span",90),c._uU(6),c.qZA(),c._uU(7," ) "),c.TgZ(8,"span",91),c._uU(9),c.qZA(),c.qZA(),c.TgZ(10,"div",92),c.YNc(11,Rt,3,1,"ng-container",93),c.qZA(),c.qZA()),2&e){var i=c.oxw().$implicit;c.xp6(1),c.uIk("id","collapse-btn-v4-"+i._id)("data-target","#collapse-subs-"+i._id)("aria-controls","collapse-subs-"+i._id),c.xp6(5),c.Oqu(i.newSubnets.length),c.xp6(2),c.uIk("id","collapse-address-v4-"+i._id),c.xp6(1),c.hij("\xa0\xa0",i.newSubnets[0],""),c.xp6(1),c.uIk("id","collapse-subs-"+i._id),c.xp6(1),c.Q6J("ngForOf",i.newSubnets)}}function Et(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"li",104),c.TgZ(1,"span",105),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().index;return c.oxw(3).showEditDataInput(e,"subnet")}),c._uU(2),c.qZA(),c.TgZ(3,"span",106),c.NdJ("click",function(){c.CHM(i);var e=c.oxw().index;return c.oxw(3).removeEditSubnet(e)}),c._UZ(4,"i",107),c.qZA(),c.qZA()}if(2&e){var n=c.oxw().$implicit;c.xp6(2),c.hij(" ",n,"")}}function Pt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",108),c.TgZ(1,"div",37),c.TgZ(2,"input",109),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(4).newEditDataValue=e})("blur",function(){c.CHM(i);var e=c.oxw(4);return e.removeUnwantedSpace("newEditDataValue",e.newEditDataValue)}),c.qZA(),c.TgZ(3,"div",110),c.TgZ(4,"i",111),c.NdJ("click",function(){return c.CHM(i),c.oxw(4).modifyEditData()}),c.qZA(),c.TgZ(5,"i",112),c.NdJ("click",function(){return c.CHM(i),c.oxw(4).hideEditDataInput()}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(4);c.xp6(2),c.Q6J("ngModel",n.newEditDataValue)}}function Ut(e,t){if(1&e&&(c.TgZ(0,"ul",101),c.YNc(1,Et,5,1,"li",102),c.YNc(2,Pt,6,1,"div",103),c.qZA()),2&e){var i=t.index,n=c.oxw(3);c.xp6(1),c.Q6J("ngIf",null==(null==n.modifyDataInfo?null:n.modifyDataInfo.index)||(null==n.modifyDataInfo?null:n.modifyDataInfo.index)!=i),c.xp6(1),c.Q6J("ngIf",(null==n.modifyDataInfo?null:n.modifyDataInfo.index)==i)}}function Ft(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",94),c.ynx(2),c.YNc(3,Ut,3,2,"ul",95),c.BQk(),c.qZA(),c.TgZ(4,"div",96),c.TgZ(5,"div",97),c.TgZ(6,"input",98),c.NdJ("ngModelChange",function(e){return c.CHM(i),c.oxw(2).editSubnet=e})("blur",function(){c.CHM(i);var e=c.oxw(2);return e.removeUnwantedSpace("editSubnet",e.editSubnet)}),c.qZA(),c.TgZ(7,"span",99),c.NdJ("click",function(){return c.CHM(i),c.oxw(2).addEditSubnet()}),c._UZ(8,"i",100),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var n=c.oxw(2);c.xp6(3),c.Q6J("ngForOf",n.editSubnetsList),c.xp6(3),c.Q6J("ngModel",n.editSubnet)}}function Jt(e,t){if(1&e&&(c.TgZ(0,"tr",70),c.TgZ(1,"td",71),c.YNc(2,Mt,10,9,"div",72),c.YNc(3,wt,8,0,"div",73),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.TgZ(6,"td"),c.YNc(7,qt,2,1,"div",3),c.YNc(8,Nt,12,8,"div",3),c.YNc(9,Ft,9,2,"div",3),c.qZA(),c.qZA()),2&e){var i=t.$implicit,n=c.oxw();c.s9C("id",i._id),c.xp6(2),c.Q6J("ngIf",n.editOnValue!=i._id),c.xp6(1),c.Q6J("ngIf",n.editOnValue==i._id),c.xp6(2),c.hij(" ",i.name?i.name:""," "),c.xp6(2),c.Q6J("ngIf",n.editOnValue!=i._id&&1==i.newSubnets.length),c.xp6(1),c.Q6J("ngIf",n.editOnValue!=i._id&&i.newSubnets.length>1),c.xp6(1),c.Q6J("ngIf",n.editOnValue==i._id)}}function Ht(e,t){if(1&e&&(c.TgZ(0,"li",124),c._uU(1),c.qZA()),2&e){var i=t.$implicit;c.xp6(1),c.Oqu(i.name)}}function Lt(e,t){if(1&e&&(c.TgZ(0,"ul",122),c.YNc(1,Ht,2,1,"li",123),c.qZA()),2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",i.invalidImportSubnet)}}function jt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",113),c.TgZ(1,"h4",114),c._uU(2),c.qZA(),c.TgZ(3,"button",115),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",116),c.qZA(),c.qZA(),c.TgZ(5,"div",117),c.TgZ(6,"p",118),c._uU(7),c.qZA(),c.TgZ(8,"div",59),c.TgZ(9,"p",118),c._uU(10),c.qZA(),c.YNc(11,Lt,2,1,"ul",119),c.qZA(),c.qZA(),c.TgZ(12,"div",120),c.TgZ(13,"button",121),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(14),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(5),c.hij("",n.invalidImportSubnet.length?n.language.Note+" - "+n.language["No subnet imported"]:""," "),c.xp6(3),c.Oqu(n.infoBody),c.xp6(1),c.Q6J("ngIf",n.invalidImportSubnet.length),c.xp6(3),c.hij(" ",n.language.Okay," ")}}function Vt(e,t){if(1&e){var i=c.EpF();c.ynx(0),c.TgZ(1,"div",113),c.TgZ(2,"h4",114),c._uU(3),c.qZA(),c.TgZ(4,"button",115),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(5,"span",116),c.qZA(),c.qZA(),c.TgZ(6,"div",125),c.TgZ(7,"table",59),c.TgZ(8,"tr"),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",120),c.TgZ(12,"button",121),c.NdJ("click",function(){return c.CHM(i),c.oxw().confirmDelete()}),c._uU(13),c.qZA(),c.TgZ(14,"button",126),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(15),c.qZA(),c.qZA(),c.BQk()}if(2&e){var n=c.oxw();c.xp6(3),c.Oqu(n.infoTitle),c.xp6(7),c.Oqu(n.deleteData.name?n.deleteData.name:""),c.xp6(3),c.hij(" ",n.language.Okay," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}function Bt(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.qZA()),2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i||"")}}function Yt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",113),c.TgZ(1,"h4",114),c._uU(2),c.qZA(),c.TgZ(3,"button",115),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",116),c.qZA(),c.qZA(),c.TgZ(5,"div",117),c.TgZ(6,"table",59),c.YNc(7,Bt,3,1,"tr",93),c.qZA(),c.qZA(),c.TgZ(8,"div",120),c.TgZ(9,"button",121),c.NdJ("click",function(){return c.CHM(i),c.oxw().confirmDeleteSecleted()}),c._uU(10),c.qZA(),c.TgZ(11,"button",126),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(12),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(5),c.Q6J("ngForOf",n.deleteSubnets),c.xp6(3),c.hij(" ",n.language.Okay," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}function Qt(e,t){if(1&e){var i=c.EpF();c.TgZ(0,"div",113),c.TgZ(1,"h4",114),c._uU(2),c.qZA(),c.TgZ(3,"button",115),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._UZ(4,"span",116),c.qZA(),c.qZA(),c.TgZ(5,"div",125),c._UZ(6,"table",127),c.qZA(),c.TgZ(7,"div",120),c.TgZ(8,"button",121),c.NdJ("click",function(){return c.CHM(i),c.oxw().proceedImport()}),c._uU(9),c.qZA(),c.TgZ(10,"button",126),c.NdJ("click",function(){return c.CHM(i),c.oxw().closeModal()}),c._uU(11),c.qZA(),c.qZA()}if(2&e){var n=c.oxw();c.xp6(2),c.Oqu(n.infoTitle),c.xp6(4),c.Q6J("innerHtml",n.infoBody,c.oJD),c.xp6(3),c.hij(" ",n.language.Okay," "),c.xp6(2),c.hij(" ",n.language.Cancel," ")}}var Gt=r(91704),$t=[{path:"",component:f,children:[{path:"management",component:fe,data:{title:"Calix Cloud - Flow Configuration"}},{path:"mapping_source",component:lt,data:{title:"Calix Cloud - Flow Configuration"}},{path:"settings",component:mt,data:{title:"Calix Cloud - Flow Configuration"}},{path:"subnets",component:function(){var t=function(){function t(e,n,a,r,s,o,l,c,u,d,g){var p=this;i(this,t),this.commonFunctionsService=e,this.exportExcel=n,this.dataTablecreatorService=a,this.sso=r,this.router=s,this.service=o,this.dialogService=l,this.commonOrgService=c,this.translateService=u,this.titleService=d,this.common=g,this.pageAvailable=!1,this.formVisible=!1,this.buttonVisible=!0,this.currentTableRowCount=0,this.selectOptions=["No","Yes"],this.selectedSubnet="No",this.tableOptions={pagingType:"full_numbers",order:[1,"asc"],columnDefs:[{targets:[0],orderable:!1}],stateSave:!0,drawCallback:function(e){p.sortData={column:e.aaSorting[0][0]?e.aaSorting[0][0]:1,type:e.aaSorting[0][1]?e.aaSorting[0][1]:"asc"},setTimeout(function(){p.resetDelete()},0),p.currentTableRowCount=e.aiDisplay.length,e.aoData.length<=e._iDisplayLength&&Gt(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.newSubnet="",this.empty={Subnets:"",Name:""},this.add={name:"",subnets:""},this.importTableOptions={pagingType:"full_numbers",pageLength:10,order:[0,"asc"],dom:"tipr"},this.tablePreview=!1,this.fullLoader=!0,this.isFullImport=!0,this.subnetError=!1,this.isIPv4=!0,this.dtTrigger=new v.xQ,this.isRerender=!1,this.deleteIds=[],this.deleteSubnets=[],this.subnetVersions=["SubnetIPV4","SubnetIPV6"],this.subnetVersionsSelected="SubnetIPV4",this.loading=!0,this.createSubnetsList=[],this.editSubnet="",this.editSubnetsList=[],this.storageData={},this.importDeleteData=[],this.importData=[],this.importTableData=[],this.importUpdateASCreate=[],this.sortData={column:1,type:"asc"},this.modifyDataInfo={},this.newEditDataValue="",this.columnName={subnets:"Subnets",name:"Name"},this.invalidImportSubnet=[],this.disableIcImportSubmitBtn=!1,this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(function(e){p.language=e,p.reloadCurrentRoute(),p.titleService.setTitle("".concat(p.language.Subnet," - ").concat(p.language.end," - ").concat(p.language.flowconfiguration," - ").concat("systemAdministration"===m?p.language["System Administration"]:p.language.administration," - ").concat(p.language["Calix Cloud"])),p.dataAvailable=!1,p.isRerender=!0,p.setTableOptions("language"),p.exportColoumnNames={subnets:p.language.subnets,name:p.language.Name}}),this.exportColoumnNames={subnets:this.language.subnets,name:this.language.Name},this.commonOrgService.closeAlert();var h=this.router.url;this.ORG_ID=this.sso.getOrganizationID(h),this.frTable=this.translateService.fr;var m=this.sso.getRedirectModule(h);this.titleService.setTitle("".concat(this.language.Subnet," - ").concat(this.language.end," - ").concat(this.language.flowconfiguration," - ").concat("systemAdministration"===m?this.language["System Administration"]:this.language.administration," - ").concat(this.language["Calix Cloud"]))}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.removeState(),this.getSubnets(),this.tableLanguageOptions(),this.compareJSONSubs=this.dataTablecreatorService.jsonDataOfCSV.subscribe(function(t){e.invalidImportSubnet=[];try{var i=!0;(t||[]).forEach(function(t){if(e.commonFunctionsService.keysFromColumnName(t,e.exportColoumnNames),t.name&&t.name.length>64)return e.invalidImportSubnet.push(t),e.infoTitle=e.language["Invalid Value"],e.infoBody="".concat(e.language["Invalid Name - Name should not exceed 64 characters."]),i=!1,void e.openInfoModal(!0)}),i&&(e.recreateTable=t,e.compareJsonToTableData(t))}catch(i){}}),this.setStorageData()}},{key:"ngAfterViewInit",value:function(){this.loaded=!0}},{key:"ngOnDestroy",value:function(){this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getSubnetsSubs&&this.getSubnetsSubs.unsubscribe(),this.addSubs&&this.addSubs.unsubscribe(),this.editSubs&&this.editSubs.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.fileChangeSubs&&this.fileChangeSubs.unsubscribe(),this.exportCSVSubs&&this.exportCSVSubs.unsubscribe(),this.exportPDFSubs&&this.exportPDFSubs.unsubscribe(),this.importSubs&&this.importSubs.unsubscribe(),this.compareJSONSubs&&this.compareJSONSubs.unsubscribe()}},{key:"create",value:function(){this.buttonVisible=!1,this.formVisible=!0,this.reset()}},{key:"getSubnets",value:function(){var t=this;this.getSubnetsSubs=this.service.getSubnets(this.ORG_ID).subscribe(function(i){t.subnetResponseData=i,i&&(t.subnetData=e(t.processData(i)),t.setTableOptions(),t.isRerender?(t.rerender(),t.isRerender=!1):t.dtTrigger.next(),setTimeout(function(){t.resetDelete()},100))},function(e){t.setTableOptions(),t.isRerender?t.rerender():t.dtTrigger.next(),t.pageErrorHandle(e)})}},{key:"setTableOptions",value:function(e){var t=this;this.tableOptions={pagingType:"full_numbers",order:[this.sortData.column,this.sortData.type],columnDefs:[{targets:[0],orderable:!1}],stateSave:!0,drawCallback:function(e){t.sortData={column:e.aaSorting[0][0]?e.aaSorting[0][0]:1,type:e.aaSorting[0][1]?e.aaSorting[0][1]:"asc"},setTimeout(function(){t.resetDelete()},0),t.currentTableRowCount=e.aiDisplay.length,e.aoData.length<=e._iDisplayLength&&Gt(e.nTableWrapper).find("#".concat(e.sTableId,"_last")).addClass("disabled")}},this.tableLanguageOptions(),e&&"language"==e?setTimeout(function(){t.rerender(),t.dataAvailable=!0,t.loading=!1},200):setTimeout(function(){t.dataAvailable=!0,t.loading=!1},200)}},{key:"rerender",value:function(){var e,t=this;null===(e=null==this?void 0:this.dtElement.dtInstance)||void 0===e||e.then(function(e){e.destroy(),t.tableOptions.order=[t.sortData.column,t.sortData.type],setTimeout(function(){t.dtTrigger.next()},10)})}},{key:"processData",value:function(e){var t=this;return e.forEach(function(e){e.newSubnets=t.commonFunctionsService.splitData(e.subnets,"|"),e._id=t.uuidv4()}),e}},{key:"addSubnet",value:function(){if(this.createSubnet=this.createSubnet.trim(),""!=this.createSubnet&&""!=this.createSubnet){if(!this.subnetValidatorIpv4(this.createSubnet)&&!this.subnetValidatorIpv6(this.createSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody="".concat(this.createSubnet),void this.openInfoModal(!1);if(this.createSubnetsList.includes(this.createSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);this.createSubnetsList.push(this.createSubnet),this.createSubnet=""}}},{key:"removeSubnet",value:function(e){this.createSubnetsList.splice(e,1)}},{key:"submit",value:function(){var t=this;if(this.commonOrgService.closeAlert(),this.createName=this.createName?this.createName.trim():"",!this.createName)return this.infoTitle=this.language["Name Cannot be empty"],this.infoBody="",void this.openInfoModal(!1);if(this.createName.length>64)return this.infoTitle=this.language["Invalid Value"],this.infoBody="".concat(this.language["Invalid Name"]," - Name should not exceed 64 characters."),void this.openInfoModal(!1);if(this.subnetData.filter(function(e){return e.name==t.createName}).length)return this.infoTitle="Name Cannot be duplicate",this.infoBody="",void this.openInfoModal(!1);if(this.createSubnet=this.createSubnet?this.createSubnet.trim():"",""==this.createSubnet&&!this.createSubnetsList.length)return this.infoTitle=this.language["Invalid subnet"],this.infoBody="",void this.openInfoModal(!1);var i=this.createSubnetsList;if(""!=this.createSubnet){if(!this.subnetValidatorIpv4(this.createSubnet)&&!this.subnetValidatorIpv6(this.createSubnet))return this.infoTitle=this.language["Invalid subnet"],this.infoBody="".concat(this.createSubnet),void this.openInfoModal(!1);if(i.includes(this.createSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);i=[this.createSubnet].concat(e(i))}var n=this.add;n.name=this.createName?encodeURI(this.createName).replace(/-/g,"%2D"):"",n.subnets=0!=i.length?i.join("|"):"",n.orgId=this.ORG_ID,this.loading=!0,this.addSubs=this.service.addSubnet(n,this.ORG_ID).subscribe(function(e){t.addSubnetResponse=e,t.isRerender=!0,t.cancel(),t.getSubnets()},function(e){t.pageErrorHandle(e,t.language["Create Fail!"])})}},{key:"edit",value:function(e){if(this.editData=e,this.editOnValue=e._id,this.editName=e.name,this.editSubnetsList=this.commonFunctionsService.splitData(e.subnets,"|"),-1!==this.deleteIds.indexOf(e._id)){this.deleteIds.splice(this.deleteIds.indexOf(e._id),1),this.deleteSubnets.splice(this.deleteSubnets.indexOf(e.name),1);var t=Gt('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=t?(Gt("#selectDeselectAll").prop("checked",!1),Gt("#selectDeselectAll-span").show()):Gt("#selectDeselectAll-span").hide():(Gt("#selectDeselectAll").prop("checked",!1),Gt("#selectDeselectAll-span").hide())}var i=this.deleteSubnets.findIndex(function(t){return t==e.subnets});this.deleteSubnets.splice(i,1),this.hideEditDataInput()}},{key:"updateSave",value:function(t){var i,n=this;if(this.editName&&""==this.editName)return this.infoTitle=this.language["Invalid name"],this.infoBody="",void this.openInfoModal(!1);if((null===(i=this.editName)||void 0===i?void 0:i.length)>64)return this.infoTitle=this.language["Invalid Value"],this.infoBody="".concat(this.language["Invalid Name"]," - Name should not exceed 64 characters."),void this.openInfoModal(!1);if(this.editSubnet=this.editSubnet.trim(),""==this.editSubnet&&!this.editSubnetsList.length)return this.infoTitle=this.language["Invalid subnet"],this.infoBody="",void this.openInfoModal(!1);var a=this.editSubnetsList;if(""!=this.editSubnet){if(!this.subnetValidatorIpv4(this.editSubnet)&&!this.subnetValidatorIpv6(this.editSubnet))return this.infoTitle=this.language["Invalid subnet"],this.infoBody="".concat(this.editSubnet),void this.openInfoModal(!1);if(a.includes(this.editSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);a=[this.editSubnet].concat(e(a))}var r={name:this.editName?this.editName:"",subnets:0!=a.length?a.join("|"):""};this.loading=!0,this.editSubs=this.service.updateSubnet(this.editData._id,r,this.ORG_ID).subscribe(function(e){n.updateResponse=e,n.isRerender=!0,n.cancel(),n.getSubnets(),n.editOnValue=void 0},function(e){n.pageErrorHandle(e)})}},{key:"updateCancel",value:function(){this.editOnValue=void 0}},{key:"validateSubnetv4",value:function(e){if(this.subnetError=!1,e){var t=this.service.trimSubnet(e);return t&&this.commonFunctionsService.isValidSubnetV4(t)?(this.isIPv4=!0,this.subnet=t,!0):void(this.subnetError=!0)}this.subnetError=!0}},{key:"validateSubnetv6",value:function(e){if(this.subnetError=!1,e){var t=this.service.trimSubnet(e);return t&&this.commonFunctionsService.isValidSubnetV6(t)?(this.isIPv4=!1,void(this.subnet=t)):void(this.subnetError=!0)}this.subnetError=!0}},{key:"cancel",value:function(){this.formVisible=!1,this.buttonVisible=!0,this.tablePreview=!1,this.disableIcImportSubmitBtn=!1,this.reset()}},{key:"getDeleteIds",value:function(e,t){if(e.target.checked){this.deleteIds.push(t._id),this.deleteSubnets.push(t.name);var i=Gt('input[name^="delete_id_"]').length;this.deleteIds.length==i?(Gt("#selectDeselectAll").prop("checked",!0),Gt("#selectDeselectAll-span").hide()):Gt("#selectDeselectAll-span").show()}else{this.deleteIds.splice(this.deleteIds.indexOf(t._id),1),this.deleteSubnets.splice(this.deleteSubnets.indexOf(t.name),1);var n=Gt('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=n?(Gt("#selectDeselectAll").prop("checked",!1),Gt("#selectDeselectAll-span").show()):Gt("#selectDeselectAll-span").hide():(Gt("#selectDeselectAll").prop("checked",!1),Gt("#selectDeselectAll-span").hide())}}},{key:"delete",value:function(e){this.deleteData=e,this.infoTitle=this.language["Delete endpoint subnet rule?"],this.infoBody="".concat(e.name),this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}},{key:"confirmDelete",value:function(){var e=this;this.deleteSubs=this.service.deleteSubnet(this.ORG_ID,[{name:this.deleteData.name,subnets:this.deleteData.subnets}]).subscribe(function(t){e.deleteResponse=t,e.isRerender=!0,e.getSubnets(),e.closeDeleteModal()},function(t){e.pageErrorHandle(t)})}},{key:"cancelDelete",value:function(){this.deleteData=void 0}},{key:"closeDeleteModal",value:function(){this.deleteData=void 0,this.closeModal()}},{key:"selectDeselectAll",value:function(e){this.deleteIds=[],this.deleteSubnets=[];var t=0,i=Gt('input[name^="delete_id_"]').length,n=this;e?Gt('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;Gt(this).prop("checked",!0);var e=Gt(this).attr("class").split(" ")[0].substring("delete_id_".length),a=n.subnetData.filter(function(t){return t._id===e});n.deleteIds.push(e),n.deleteSubnets.push(a[0].name),t++}):Gt('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;Gt(this).prop("checked",!1),n.deleteIds=[],n.deleteSubnets=[],t++})}},{key:"showAllInnerCheckBox",value:function(e){Gt("#"+e.target.id).hide(),Gt("#selectDeselectAll").prop("checked",!0),this.deleteIds=[],this.deleteSubnets=[],this.selectDeselectAll(!0)}},{key:"deleteAllSelected",value:function(){this.deleteSubnets&&(this.deleteSubnets.sort(),this.deleteIds.sort(),this.infoTitle=this.language[1===this.deleteSubnets.length?"Delete selected endpoint subnet rule?":"Delete selected endpoint subnet rules?"],this.infoBody=this.deleteSubnets.join(", <br>"),this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal,{backdrop:"static",keyboard:!1}))}},{key:"confirmDeleteSecleted",value:function(){var e,t=this,i=[];null===(e=this.subnetData)||void 0===e||e.forEach(function(e){t.deleteIds.includes(e._id)&&i.push({name:e.name,subnets:e.subnets})}),this.deleteSubs=this.service.deleteSubnet(this.ORG_ID,i).subscribe(function(e){t.selectedDelete=e,t.isRerender=!0,t.deleteIds=[],t.deleteSubnets=[],t.getSubnets(),t.closeMultiDeleteModal()},function(e){t.pageErrorHandle(e)})}},{key:"closeMultiDeleteModal",value:function(){this.deleteIds=[],this.deleteSubnets=[],this.closeModal()}},{key:"export",value:function(){var e=this,t=this.commonFunctionsService.generateExportName("subnet_rule",!0);this.exportCSVSubs=this.service.Export(this.ORG_ID).subscribe(function(i){e.exportData=e.exportDataConvertor(i),e.exportExcel.downLoadCSV(t,e.exportData&&e.exportData.length?e.exportData:[e.empty])},function(t){e.pageErrorHandle(t)})}},{key:"exportDataConvertor",value:function(e){var t=this;return Array.isArray(e)&&(0===e.length&&e.push({name:"",subnets:""}),e.forEach(function(e){for(var i in delete(e=t.commonFunctionsService.columnNameFromKeys(e,t.exportColoumnNames))._id,e)"boolean"==typeof e[i]&&(e[i]=1==e[i]?"Yes":"No")})),e}},{key:"fullImportUpload",value:function(){this.infoTitle=this.language.fullImport,this.infoBody=this.language.fullImportPrompt,this.closeModal(),this.modalRef=this.dialogService.open(this.importModal,{backdrop:"static",keyboard:!1})}},{key:"proceedImport",value:function(){Gt("#fullImportUpload").click(),this.closeModal()}},{key:"fullImport",value:function(t,i){if(this.isFullImport=i,"csv"!=e(t.target.files)[0].name.split(".").pop())return t.target.value="",this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1,void this.cancel();this.dataTablecreatorService.getJsonFromCsv(t),t.target.value=""}},{key:"disabledSubmitBtn",value:function(){return!!(!this.isFullImport&&this.disableIcImportSubmitBtn||this.isFullImport&&!this.disableSubmitFullImport||this.isFullImport&&!this.disableSubmitImport)}},{key:"compareJsonToTableData",value:function(e){var t=this,i=this.subnetData.length?this.subnetData:[],n=[];if(e.forEach(function(e){var a="Create";!1,i.filter(function(t){return t.subnets==e.subnets}).length&&(!0,a="Update",t.isFullImport?(a="Create",e.action=a,t.importUpdateASCreate.push(e)):a="Update"),(e.subnets||e.name)&&n.push({action:a,subnets:e.subnets,name:e.name})}),!n.length)return this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1,void this.cancel();if(this.isFullImport){var a=[];i.forEach(function(e){!1,0==n.filter(function(t){return t.subnets==e.subnets}).length&&a.push({action:"Delete",subnets:e.subnets,name:e.name})}),this.importDeleteData=a}var r={};n.reduce(function(e,t){return r[t.name]?r[t.name].subnets="".concat(r[t.name].subnets,"|").concat(t.subnets):r[t.name]=t,r},{}),n=Object.values(r),this.loading=!0,this.submitImport(!0,n)}},{key:"submitImport",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;this.disableIcImportSubmitBtn=!1;var n={clientIP:this.storageData.clientIp,dry_run:t,full_import:this.isFullImport,import_data:[],orgId:this.ORG_ID?this.ORG_ID:50,userId:this.sso.getUserId()},a=t?i:[];if(!t){if(this.importData.forEach(function(t){["Create","Update"].includes(t.action)&&a.push({action:e.isFullImport?"Create":t.action,subnets:t.subnets,name:t.name})}),!a.length&&this.importDeleteData.length&&(this.disableSubmitFullImport=!1,this.disableSubmitImport=!1),!a.length&&!this.importDeleteData.length)return this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1,void this.cancel();if(!this.isFullImport){var r=this.subnetData.map(function(e){return String(e.subnets)});a=a.filter(function(e){return!r.includes(String(e.subnets))})}}n.import_data=a,this.importSubs=this.service.importSubnets(n,this.ORG_ID).subscribe(function(i){t?(i&&i.data&&0==i.data.length&&(e.infoTitle=e.language.noAvailableChange,e.infoBody="",e.openInfoModal(!1),e.loading=!1),e.importData=i||[],e.checkDryRunData(i),e.loading=!1):(e.cancel(),e.isRerender=!0,e.getSubnets())},function(i){400==i.status&&t?(e.infoTitle=e.language.objectNotFound,e.infoBody="",e.closeModal(),e.modalRef=e.dialogService.open(e.infoModal,{backdrop:"static",keyboard:!1})):e.pageErrorHandle(i),e.loading=!1})}},{key:"checkDryRunData",value:function(e){var t,i,n,a=this,r=e?e.slice(0):[];this.enableImportSubmit=!1,this.importTableData=[];var s=(null===(t=this.subnetData)||void 0===t?void 0:t.length)?this.subnetData:[];if(r.forEach(function(e){"ok"!=e.validationResult.toLowerCase()&&(e.action=e.validationResult),"ok"==e.validationResult.toLowerCase()&&(a.enableImportSubmit=!0),e.subnets_old="";var t=s.filter(function(t){return t.name==e.name});t.length&&(a.isFullImport&&"Create"==e.action&&(e.action="Update"),e.subnets_old=t[0].subnets?t[0].subnets:""),a.importTableData.push(e)}),!this.isFullImport){var o=s.map(function(e){return String(e.subnets)});this.disableIcImportSubmitBtn=!r.filter(function(e){return!o.includes(String(e.subnets))&&"ok"===e.validationResult}).length}this.isFullImport&&this.importDeleteData.length&&this.importDeleteData.forEach(function(e){e.subnets_old="",a.importTableData.push(e)}),this.importTableData&&(this.disableSubmitFullImport=null===(i=this.importTableData)||void 0===i?void 0:i.some(function(e){return"Invalid subnet"!==e.validationResult}),this.disableSubmitImport=null===(n=this.importTableData)||void 0===n?void 0:n.some(function(e){return"Not in a valid subnet"!==e.validationResult})),this.formVisible=!1,this.buttonVisible=!1,this.tablePreview=!0}},{key:"reset",value:function(){this.createName="",this.createSubnet="",this.editName="",this.editSubnet="",this.createSubnetsList=[],this.editSubnetsList=[],this.editData=void 0,this.editOnValue=void 0}},{key:"tableLanguageOptions",value:function(){"fr"==this.language.fileLanguage?(this.tableOptions.language=this.frTable,this.importTableOptions.language=this.frTable):"es"==this.language.fileLanguage?(this.tableOptions.language=this.translateService.es,this.importTableOptions.language=this.translateService.es):"de_DE"==this.language.fileLanguage?(this.importTableOptions.language=this.translateService.de_DE,this.tableOptions.language=this.translateService.de_DE):("en"==this.language.fileLanguage&&this.tableOptions.language||"en"==this.language.fileLanguage&&this.importTableOptions.language)&&(delete this.tableOptions.language,delete this.importTableOptions.language)}},{key:"resetDelete",value:function(){this.selectDeselectAll(!1),Gt("#selectDeselectAll").prop("checked",!1),Gt("#selectDeselectAll-span").hide(),this.deleteIds=[],this.deleteSubnets=[]}},{key:"subnetValidatorIpv4",value:function(e){if(e&&""!=e)return!!this.commonFunctionsService.isValidSubnetV4(e)}},{key:"subnetValidatorIpv6",value:function(e){if(e&&""!=e)return!!this.commonFunctionsService.isValidSubnetV6(e)}},{key:"addEditSubnet",value:function(){if(this.editSubnet=this.editSubnet.trim(),""!=this.editSubnet){if(!this.subnetValidatorIpv4(this.editSubnet)&&!this.subnetValidatorIpv6(this.editSubnet))return this.infoTitle="Invalid request",this.infoBody="",void this.openInfoModal(!1);if(this.editSubnetsList.includes(this.editSubnet))return this.infoTitle="Invalid request",this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);this.editSubnetsList.push(this.editSubnet),this.editSubnet=""}}},{key:"removeEditSubnet",value:function(e){this.editSubnetsList.splice(e,1)}},{key:"setStorageData",value:function(){var e=JSON.parse(localStorage.getItem("calix.login_data"));this.storageData.clientIp=null==e?void 0:e.clientIp,this.storageData.UserId=null==e?void 0:e.UserId}},{key:"closeModal",value:function(){this.modalRef&&this.modalRef.close()}},{key:"pageErrorHandle",value:function(e,t){var i,n,a=this,r="";400==e.status||417==e.status?(this.infoBody=417==e.status&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message)?null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message:this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=t||"Error",this.openInfoModal(!1),this.loading=!1):(r=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(r),this.commonOrgService.pageScrollTop(),this.loading=!1,setTimeout(function(){a.commonOrgService.closeAlert()},3e3))}},{key:"openInfoModal",value:function(e){e||(this.invalidImportSubnet=[]),this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}},{key:"uuidv4",value:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"removeState",value:function(){this.commonOrgService.removeTableState("endpoint_subnets",this.router.url)}},{key:"showEditDataInput",value:function(e,t){this.modifyDataInfo={index:e,type:t},this.newEditDataValue="",this.newEditDataValue=this.editSubnetsList[e]}},{key:"hideEditDataInput",value:function(){this.modifyDataInfo={index:void 0,type:void 0}}},{key:"modifyEditData",value:function(){var e=this.modifyDataInfo.index;return this.newEditDataValue=this.newEditDataValue.trim(),""==this.newEditDataValue?(this.infoTitle=this.language["Subnet cannot be empty"],this.infoBody="",void this.openInfoModal(!1)):this.subnetValidatorIpv4(this.newEditDataValue)||this.subnetValidatorIpv4(this.newEditDataValue)?this.editSubnetsList.includes(this.newEditDataValue)&&this.editSubnetsList.indexOf(this.newEditDataValue)!=e?(this.infoTitle=this.language["Duplicate Subnet"],this.infoBody="".concat(this.newEditDataValue),void this.openInfoModal(!1)):(this.editSubnetsList[e]=this.newEditDataValue,this.newEditDataValue="",void this.hideEditDataInput()):(this.infoTitle=this.language["Invalid Subnet format"],this.infoBody="".concat(this.newEditDataValue),void this.openInfoModal(!1))}},{key:"removeUnwantedSpace",value:function(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}},{key:"reloadCurrentRoute",value:function(){var e=this,t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){e.router.navigate([t])})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(x.i),c.Y36(T.O),c.Y36(C.L),c.Y36(d.t6),c.Y36(l.F0),c.Y36(ft),c.Y36(I.FF),c.Y36(D.v),c.Y36(S.s),c.Y36(k.Dx),c.Y36(O.i))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-subnet"]],viewQuery:function(e,t){var i;(1&e&&(c.Gf(bt,7),c.Gf(vt,7),c.Gf(Zt,7),c.Gf(_t,7),c.Gf(xt,5),c.Gf(At,5),c.Gf(b.G,5)),2&e)&&(c.iGM(i=c.CRH())&&(t.infoModal=i.first),c.iGM(i=c.CRH())&&(t.deleteModal=i.first),c.iGM(i=c.CRH())&&(t.multiDeleteModal=i.first),c.iGM(i=c.CRH())&&(t.importModal=i.first),c.iGM(i=c.CRH())&&(t.fullImportInput=i.first),c.iGM(i=c.CRH())&&(t.incImportInput=i.first),c.iGM(i=c.CRH())&&(t.dtElement=i.first))},decls:33,vars:18,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","row py-4",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-md-12","ccl-admin-table",3,"hidden"],["id","subnets-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions","dtTrigger"],[1,"mxw-200","w-nowrap-200"],[1,"ccl-fc-table-icon","mxw-200"],[1,"d-flex","align-items-center",3,"hidden"],["type","checkbox","value","","id","selectDeselectAll",1,"",3,"hidden","disabled","change"],["id","selectDeselectAll-span",1,"checkbox-ui",2,"display","none",3,"hidden","click"],[1,"text-center","justify-content-center",3,"hidden"],["id","delete-selected-btn",1,"btn-default","primary","px-2","mx-2",3,"title","disabled","click"],[1,"far","fa-trash-alt"],[3,"id",4,"ngFor","ngForOf"],["infoModal",""],["deleteModal",""],["multiDeleteModal",""],["importModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row","py-4"],[1,"col-md-9"],[1,"d-flex"],["id","create-btn",1,"btn-default","primary","mx-2",3,"click"],["id","export-btn",1,"btn-default","primary","mx-2",3,"click"],[1,"upload-btn-wrapper"],[1,"btn-default","primary","mx-2","px-3",3,"click"],["type","file","accept",".csv","id","fullImportUpload",2,"display","none",3,"change"],["fullImportInput",""],["for","inc-import",1,"btn-default","primary","mx-2","px-3","cursor-pointer"],["type","file","id","inc-import","accept",".csv",2,"display","none",3,"change"],["incImportInput",""],[1,"col-sm-3","align-self-end","d-none"],[1,"ccl-form"],["type","search","name","searchbox","placeholder","",1,"input-sm"],[1,"serach-but","btn-default","primary","btn-icon-md","inline"],["aria-hidden","true",1,"fa","fa-search"],[1,"row","my-3","py-3"],[1,"col-md-12"],[1,"row","form-inline"],[1,"form-group","mb-2","col-md-2","align-self-start"],["for","staticEmail2",1,""],[1,"error"],[1,"ccl-form","mx-sm-3","mb-2","align-self-end"],["type","text","id","createName","placeholder","","name","createName","trimSpace","",1,"w-250px",3,"ngModel","ngModelChange","blur"],["class","w-100",4,"ngIf"],["class","w-100",4,"ngFor","ngForOf"],["for","inputPassword2",1,"sr-only"],["type","text","id","createSubnet","placeholder","","name","createSubnet","trimSpace","",1,"form-control","w-250px",3,"ngModel","ngModelChange","blur"],["type","submit",1,"mb-2","btn-default","btn-primary","align-self-end",3,"click"],[1,"row","form-inline","my-3"],[1,"form-group","mb-2","col-md-2"],["for","staticEmail2",1,"sr-only"],["type","submit","id","submit-btn",1,"btn-default","btn-primary","mx-4",3,"click"],["type","submit","id","cancel-btn",1,"btn-default","btn-dft","py-1","ml-2",3,"click"],[1,"w-100"],[1,"w-75"],[1,"w-25",3,"click"],["aria-hidden","true",1,"fa","fa-times","primary"],["class","row",4,"ngIf"],[1,"row","my-4"],[1,"col-md-8","offset-md-4"],[1,"btn-default","primary","px-3","mx-3",3,"disabled","click"],[1,"btn-default","btn-dft","py-1","px-3",3,"click"],[1,"col-md-12","ccl-admin-table"],["id","example","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[3,"id"],[1,"action-button","w-nowrap"],["class","editable-td text-center f-size13",4,"ngIf"],["class","save-cancel-btn-group d-flex justify-content-center",4,"ngIf"],[1,"editable-td","text-center","f-size13"],[1,"pr-2"],["id","edit-btn",1,"primary",3,"title","click"],[1,"fas","fa-pencil-alt"],["type","checkbox",3,"id","value","name","title","click"],["id","delete-btn",1,"primary",3,"title","click"],[1,"save-cancel-btn-group","d-flex","justify-content-center"],[1,"ccl-fc-table-icon"],[1,"pr-1"],["id","save-btn",1,"primary","mx-3",3,"click"],[1,"fas","fa-check"],["id","cancel-btn",1,"primary",3,"click"],[1,"fas","fa-times"],["role","button","data-toggle","collapse","aria-expanded","false",1,"collapse-btn","w-nowrap"],["id","'collapse-icon-v4-' + item._id",1,"fa","fa-chevron-right","collapse-icon"],["id","'collapse-icon-v4-' + item._id",1,"fa","fa-chevron-down","collapse-icon"],[1,"sxa-bold","f-style-italic"],[1,"collapse-address"],[1,"collapse","multi-collapse"],[4,"ngFor","ngForOf"],[1,"form-group","w-250"],["class","nav flex-column",4,"ngFor","ngForOf"],[1,"form-group","row","fw100","m-0"],[1,"ccl-form","input-group","flex-nowrap"],["type","text","name","editSubnet","placeholder","","trimSpace","",1,"w150","add-subnet-input","w-200px",3,"ngModel","ngModelChange","blur"],[1,"ccl-fc-add-icon","align-self-center","mx-2",3,"click"],[1,"fa","fa-plus"],[1,"nav","flex-column"],["class","nav-item subnet-value-size",4,"ngIf"],["class","my-2 position-relative",4,"ngIf"],[1,"nav-item","subnet-value-size"],["title","Click to edit",1,"pointer",3,"click"],["data-key","",1,"remove-subnet-btn","primary","float-r22",3,"click"],[1,"fa","fa-times"],[1,"my-2","position-relative"],["type","text","name","new-edit-subnet","placeholder","","trimSpace","",1,"pr-btn","m-w200px",3,"ngModel","ngModelChange","blur"],[1,"pos-abs-right"],[1,"fas","fa-check","primary","d-inline-flex","mr-2","pointer",3,"click"],[1,"fas","fa-times","primary","d-inline-flex","pointer",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"f-size-16px"],["class","list-two",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[1,"list-two"],["class","text-break",4,"ngFor","ngForOf"],[1,"text-break"],[1,"modal-body"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"],[3,"innerHtml"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,yt,5,1,"div",1),c.YNc(2,Tt,24,4,"div",2),c.YNc(3,Dt,32,9,"section",3),c.YNc(4,Ot,8,4,"section",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"table",6),c.TgZ(8,"thead"),c.TgZ(9,"tr"),c.TgZ(10,"th",7),c.TgZ(11,"div",8),c.TgZ(12,"div",9),c.TgZ(13,"input",10),c.NdJ("change",function(e){return t.selectDeselectAll(e.target.checked)}),c.qZA(),c.TgZ(14,"span",11),c.NdJ("click",function(e){return t.showAllInnerCheckBox(e)}),c.qZA(),c.qZA(),c.TgZ(15,"div",12),c.TgZ(16,"button",13),c.NdJ("click",function(){return t.deleteAllSelected()}),c._UZ(17,"i",14),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"th"),c._uU(20),c.qZA(),c.TgZ(21,"th"),c._uU(22),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"tbody"),c.YNc(24,Jt,10,7,"tr",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(25,jt,15,5,"ng-template",null,16,c.W1O),c.YNc(27,Vt,16,4,"ng-template",null,17,c.W1O),c.YNc(29,Yt,13,4,"ng-template",null,18,c.W1O),c.YNc(31,Qt,12,4,"ng-template",null,19,c.W1O)),2&e&&(c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(1),c.Q6J("ngIf",t.buttonVisible),c.xp6(1),c.Q6J("ngIf",t.formVisible),c.xp6(1),c.Q6J("ngIf",t.tablePreview),c.xp6(2),c.Q6J("hidden",!t.dataAvailable),c.xp6(1),c.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),c.xp6(5),c.Q6J("hidden",t.editOnValue),c.xp6(1),c.Q6J("hidden",t.editOnValue)("disabled",0==(null==t.subnetData?null:t.subnetData.length)||0==t.currentTableRowCount),c.xp6(1),c.Q6J("hidden",t.editOnValue),c.xp6(1),c.Q6J("hidden",t.editOnValue),c.xp6(1),c.s9C("title",t.language["Delete selected"]),c.Q6J("disabled",!(null!=t.subnetData&&t.subnetData.length&&null!=t.deleteIds&&t.deleteIds.length)),c.xp6(2),c.hij(" ",t.language.selected," "),c.xp6(2),c.Oqu(t.language.name),c.xp6(2),c.Oqu(t.language.subnets),c.xp6(2),c.Q6J("ngForOf",t.subnetData))},directives:[s.O5,b.G,s.sg,o._Y,o.JL,o.F,o.Fj,o.JJ,o.On],styles:["div[aria-expanded=true][_ngcontent-%COMP%]   .fa-chevron-right[_ngcontent-%COMP%]{display:none}div[aria-expanded=true][_ngcontent-%COMP%]   .collapse-address[_ngcontent-%COMP%]{display:none}div[aria-expanded=false][_ngcontent-%COMP%]   .fa-chevron-down[_ngcontent-%COMP%]{display:none}.modal-scrll[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.pr-btn[_ngcontent-%COMP%]{padding-right:55px}#subnets-table[_ngcontent-%COMP%]{table-layout:fixed}.list-two[_ngcontent-%COMP%]{list-style-type:disc;margin-left:30px}.w-250px[_ngcontent-%COMP%]{width:250px}.w-200px[_ngcontent-%COMP%]{width:200px}.f-style-italic[_ngcontent-%COMP%]{font-style:italic}.float-r22[_ngcontent-%COMP%]{float:right;margin-right:22px}.w-nowrap-200[_ngcontent-%COMP%]{white-space:nowrap;max-width:200px}.w-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.f-size13[_ngcontent-%COMP%]{font-size:13px}.m-w200px[_ngcontent-%COMP%]{min-width:200px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;z-index:11;right:20px;top:10px}"]}),t}(),data:{title:"Calix Cloud - Flow Configuration"}},{path:"",redirectTo:"mapping_source",pathMatch:"full"}]}],zt=function(){var e=a(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild($t)],l.Bz]}),e}(),Kt=r(23830),Wt=function(){var e=a(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.ez,o.u5,zt,b.T,M.A0,Kt.o,be._t]]}),e}()}}])}();