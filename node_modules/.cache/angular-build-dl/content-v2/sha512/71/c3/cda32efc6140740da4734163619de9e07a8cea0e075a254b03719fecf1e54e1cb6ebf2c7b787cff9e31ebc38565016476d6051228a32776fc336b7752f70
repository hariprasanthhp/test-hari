!function(){"use strict";function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function o(n,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,(i=e.key,l=void 0,"symbol"==typeof(l=function(n,o){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,o||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(n)}(i,"string"))?l:String(l)),e)}var i,l}function t(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[9642],{80139:function(o,e,i){i.d(e,{q:function(){return u}});var l,a=i(79765),r=i(37716),u=((l=function(){function o(){n(this,o),this.outageTabChanged$=new a.xQ}return t(o,[{key:"setOutageTabChange",value:function(){this.outageTabChanged$.next(!0)}},{key:"updateRegLoc",value:function(n){var o,t,e,i,l,a;if(null==n?void 0:n.region){if(-1!==(null===(o=null==n?void 0:n.region)||void 0===o?void 0:o.indexOf("All"))){var r=null===(t=null==n?void 0:n.region)||void 0===t?void 0:t.indexOf("All");-1!==r&&(null===(e=null==n?void 0:n.region)||void 0===e||e.splice(r,1,"11111111-1111-1111-1111-111111111111"))}}else n.region=["11111111-1111-1111-1111-111111111111"];if(null==n?void 0:n.location){if(-1!==(null===(i=null==n?void 0:n.location)||void 0===i?void 0:i.indexOf("All"))){var u=null===(l=null==n?void 0:n.location)||void 0===l?void 0:l.indexOf("All");-1!==u&&(null===(a=null==n?void 0:n.location)||void 0===a||a.splice(u,1,"11111111-1111-1111-1111-111111111111"))}}else n.location=["11111111-1111-1111-1111-111111111111"];return n}},{key:"updateRegLocToAll",value:function(n){var o,t,e,i,l,a;if(null==n?void 0:n.region){if(-1!==(null===(o=null==n?void 0:n.region)||void 0===o?void 0:o.indexOf("11111111-1111-1111-1111-111111111111"))){var r=null===(t=null==n?void 0:n.region)||void 0===t?void 0:t.indexOf("11111111-1111-1111-1111-111111111111");-1!==r&&(null===(e=null==n?void 0:n.region)||void 0===e||e.splice(r,1,"All"))}}else n.region=["All"];if(null==n?void 0:n.location){if(-1!==(null===(i=null==n?void 0:n.location)||void 0===i?void 0:i.indexOf("11111111-1111-1111-1111-111111111111"))){var u=null===(l=null==n?void 0:n.location)||void 0===l?void 0:l.indexOf("11111111-1111-1111-1111-111111111111");-1!==u&&(null===(a=null==n?void 0:n.location)||void 0===a||a.splice(u,1,"All"))}}else n.location=["All"];return n}}]),o}()).\u0275fac=function(n){return new(n||l)},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l)},19642:function(o,e,i){i.d(e,{O:function(){return q}});var l=i(92340),a=i(37716),r=i(7450),u=i(48483),g=i(91841),c=i(39895),s=i(49342),d=i(80139),f=i(21693),v=i(39075),p=i(38583),h=i(1570);function w(n,o){if(1&n&&(a.TgZ(0,"div",10),a.TgZ(1,"div",11),a.TgZ(2,"div",12),a._uU(3),a.qZA(),a.TgZ(4,"div",13),a.TgZ(5,"a",14),a._UZ(6,"img",15),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&n){var t=a.oxw(2);a.xp6(2),a.s9C("title",null==t.workflowObj?null:t.workflowObj.name),a.xp6(1),a.hij(" ",null==t.workflowObj?null:t.workflowObj.name," ")}}function m(n,o){if(1&n&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.qZA()),2&n){var t=a.oxw(2);a.xp6(2),a.Oqu(t.language["All Regions"]),a.xp6(2),a.Oqu(t.language["All Locations"])}}function b(n,o){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){var t=a.oxw(4);a.xp6(1),a.hij("",t.language["All Locations"]," ")}}function O(n,o){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){var t=a.oxw(2).$implicit,e=a.oxw(2);a.xp6(1),a.AsE("",null==t||null==t.value?null:t.value.length," ",e.language["Location(s)"],"")}}function x(n,o){if(1&n&&(a.TgZ(0,"span"),a._UZ(1,"br"),a._uU(2),a.qZA()),2&n){var t=o.$implicit;a.xp6(2),a.Oqu(t)}}function Z(n,o){if(1&n&&(a.TgZ(0,"div"),a.YNc(1,b,2,1,"span",0),a.YNc(2,O,2,2,"span",0),a.YNc(3,x,3,1,"span",8),a.qZA()),2&n){var t=a.oxw().$implicit;a.xp6(1),a.Q6J("ngIf",!(null!=t&&null!=t.value&&t.value.length)),a.xp6(1),a.Q6J("ngIf",null==t||null==t.value?null:t.value.length),a.xp6(1),a.Q6J("ngForOf",null==t?null:t.value)}}function A(n,o){if(1&n&&(a.TgZ(0,"div"),a.TgZ(1,"span"),a._uU(2),a.qZA(),a.qZA()),2&n){var t=a.oxw(3);a.xp6(2),a.Oqu(t.language["All Locations"])}}function k(n,o){if(1&n&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a.YNc(4,Z,4,3,"div",0),a.YNc(5,A,3,1,"div",0),a.qZA(),a.qZA()),2&n){var t=o.$implicit,e=a.oxw(2);a.xp6(2),a.Oqu(e.regionsObj[null==t?null:t.key]),a.xp6(2),a.Q6J("ngIf",null==e.workflowObj||null==e.workflowObj.location?null:e.workflowObj.location.length),a.xp6(1),a.Q6J("ngIf",!(null!=e.workflowObj&&null!=e.workflowObj.location&&e.workflowObj.location.length))}}function y(n,o){if(1&n&&(a.TgZ(0,"section"),a.YNc(1,w,7,2,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a._uU(5),a.qZA(),a.TgZ(6,"div",5),a.TgZ(7,"table",6),a.TgZ(8,"tbody"),a.TgZ(9,"tr"),a.TgZ(10,"td"),a._uU(11),a.qZA(),a.TgZ(12,"td"),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",3),a.TgZ(15,"div",4),a._uU(16),a.qZA(),a.TgZ(17,"div",7),a.TgZ(18,"table",6),a.TgZ(19,"tbody"),a.YNc(20,m,5,2,"tr",0),a.YNc(21,k,6,3,"tr",8),a.ALo(22,"keyvalue"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",3),a.TgZ(24,"div",4),a._uU(25),a.qZA(),a.TgZ(26,"div",7),a._UZ(27,"app-summary-recepients",9),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&n){var t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.showTitle),a.xp6(4),a.hij(" ",t.language["Notification Trigger"]," "),a.xp6(6),a.Oqu(t.language["Frequency Threshold"]),a.xp6(2),a.AsE("",null==t.workflowObj?null:t.workflowObj.outagePollInterval," ",t.language["Minute(s)"],""),a.xp6(3),a.Oqu(t.language["Regions & Locations"]),a.xp6(4),a.Q6J("ngIf",t.showAllRegions),a.xp6(1),a.Q6J("ngForOf",a.lcZ(22,10,t.geoInfo)),a.xp6(4),a.Oqu(t.language.Recipients),a.xp6(2),a.Q6J("workflowObj",t.recepientsInfo)}}function T(n,o){if(1&n&&(a.TgZ(0,"section"),a.TgZ(1,"div",16),a.TgZ(2,"div",17),a.TgZ(3,"div",18),a.TgZ(4,"div",19),a.TgZ(5,"div",20),a.TgZ(6,"div",21),a.TgZ(7,"span",22),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&n){var t=a.oxw();a.xp6(8),a.Oqu(t.language.Loading)}}var _,q=((_=function(){function o(t,e,i,l,a,r,u,g){n(this,o),this.translateService=t,this.dateUtils=e,this.http=i,this.route=l,this.commonOrgService=a,this.otgWrkflwSrvc=r,this.issueService=u,this.titleService=g,this.loader=!1,this.regionsObj={},this.geoInfo={},this.showAllRegions=!1,this.loading=!1,this.showTitle=!1,this.exclusions=[]}return t(o,[{key:"workflowObj",get:function(){return this._workflowObj},set:function(n){var o;console.log(n),this.recepientsInfo={emailRecipients:n.emails,emailNotes:n.notes,sms:null==n?void 0:n.sms,webhooks:null==n?void 0:n.webhooks},-1!==(null===(o=null==(n=this.otgWrkflwSrvc.updateRegLocToAll(n))?void 0:n.region)||void 0===o?void 0:o.indexOf("All"))&&(this.showAllRegions=!0),this.generateExclusionDatazForDisplay(null==n?void 0:n.filter),this._workflowObj=n}},{key:"ngOnInit",value:function(){var n=this;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(function(o){n.language=o});var o=this.route.snapshot.paramMap.get("notificationId");o?(this.titleService.setTitle("Internet Outage Notifications - Email Notifications - Network Operations - Operations - Operations - Calix Cloud"),this.showTitle=!0,this.getRecordById(o)):this.getRegions()}},{key:"getRegions",value:function(){var n=this;this.regionsSubject=this.issueService.getRegions().subscribe(function(o){var t;if(o){o=n.issueService.appendFqn(o);var e={};null==o||o.forEach(function(o){var t,i,l,a;e[null==o?void 0:o.id]=null==o?void 0:o.name,(null===(i=null===(t=n.workflowObj)||void 0===t?void 0:t.region)||void 0===i?void 0:i.length)&&-1!==(null===(a=null===(l=n.workflowObj)||void 0===l?void 0:l.region)||void 0===a?void 0:a.indexOf(null==o?void 0:o.id))&&(n.geoInfo[null==o?void 0:o.id]=[])}),n.regionsObj=e,(null===(t=n.workflowObj)||void 0===t?void 0:t.region)&&n.loadLocationValue()}},function(n){console.log(n)})}},{key:"loadLocationValue",value:function(){var n=this,o=this.workflowObj.region;if(null==o?void 0:o.length){var t="";if(o.length){if(-1!==o.indexOf("All"))return;o.forEach(function(n){"All"!=n&&(t&&(t+="&"),t+="region=".concat(n))}),this.locationsSubject=this.http.get("".concat(l.N.API_BASE_URL,"nfa/locations?").concat(t)).subscribe(function(o){var t,e;if(null===(e=null===(t=n.workflowObj)||void 0===t?void 0:t.location)||void 0===e?void 0:e.length){o=n.issueService.appendFqn(o);var i=n.geoInfo;null==o||o.forEach(function(o){var t,e;-1!==(null===(e=null===(t=n.workflowObj)||void 0===t?void 0:t.location)||void 0===e?void 0:e.indexOf(null==o?void 0:o.id))&&(i[null==o?void 0:o.regionId]?i[null==o?void 0:o.regionId].push(null==o?void 0:o.name):i[null==o?void 0:o.regionId]=[null==o?void 0:o.name])}),console.log(i),n.geoInfo=i}},function(n){})}}}},{key:"generateExclusionDatazForDisplay",value:function(n){var o=this,t=[];null==n||n.forEach(function(n){t.push({daysOfWeek:null==n?void 0:n.daysOfWeek,fromTime:o.getStartDate(null==n?void 0:n.fromTime),toTime:o.getEndDate(null==n?void 0:n.toTime)})}),this.exclusions=t}},{key:"getEndDate",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"23:59";return new Date("".concat(this.dateUtils.getTodayDateStr()," ").concat(n))}},{key:"getStartDate",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00:00";return new Date("".concat(this.dateUtils.getTodayDateStr()," ").concat(n))}},{key:"getRecordById",value:function(n){var o=this;this.loader=!0,this.http.get("".concat(l.N.API_BASE_URL,"analytics-engine/outageworkflow?outageWorkflowId=").concat(n)).subscribe(function(n){n&&Object.keys(n).length&&(o.workflowObj=Object.assign(Object.assign({},o.workflowObj),n)),o.getRegions(),o.loader=!1},function(n){console.log(n),o.pageErrorHandle(n)})}},{key:"pageErrorHandle",value:function(n){this.errorInfo=401==n.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(n),this.error=!0,this.loader=!1}}]),o}()).\u0275fac=function(n){return new(n||_)(a.Y36(r.s),a.Y36(u.s),a.Y36(g.eN),a.Y36(c.gz),a.Y36(s.v),a.Y36(d.q),a.Y36(f.v),a.Y36(v.Dx))},_.\u0275cmp=a.Xpm({type:_,selectors:[["app-outge-wrkflw-summary"]],inputs:{workflowObj:"workflowObj"},decls:2,vars:2,consts:[[4,"ngIf"],["class","row mb-2",4,"ngIf"],[1,"row"],[1,"col-md-4"],[1,"heading-4"],[1,"summary-info-table","monitored"],[1,"table"],[1,"summary-info-table"],[4,"ngFor","ngForOf"],[3,"workflowObj"],[1,"row","mb-2"],[1,"col-md-12","pb-1","position-relative"],[1,"ccl-admin-title","text-truncate","pr-3",3,"title"],[1,"close-page"],["routerLink","/cco/operations/alarms/health-alarm-notifications","routerLinkActive","active",1,"cursor-pointer"],["src","assets/img/ic_close-44px.svg","alt",""],[1,"container"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(n,o){1&n&&(a.YNc(0,y,28,12,"section",0),a.YNc(1,T,9,1,"section",0)),2&n&&(a.Q6J("ngIf",!o.loader),a.xp6(1),a.Q6J("ngIf",o.loader))},directives:[p.O5,p.sg,h.f,c.yS,c.Od],pipes:[p.Nd],styles:[".heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px;margin-bottom:16px}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF!important}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400!important;line-height:24px;letter-spacing:0em;text-align:left;color:#4c4c4c;border:none!important;padding:0 10px 0 0}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #EBEAEF!important}.summary-info-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400!important;line-height:24px;letter-spacing:0em;text-align:left;color:gray;width:50%;border:none!important;padding:0 10px;word-break:break-word!important}.monitored[_ngcontent-%COMP%]{max-height:300px;overflow:auto}.monitored[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%}.alarm-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-size:42px;font-style:normal;font-weight:300;line-height:53px;letter-spacing:0em;text-align:left;overflow:hidden;text-overflow:ellipsis}.subgroups-but[_ngcontent-%COMP%]{background-color:#fff;border:none}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{border-radius:26px;max-width:950px!important}.modal-title[_ngcontent-%COMP%]{font-weight:300;font-size:42px;line-height:53px;word-wrap:break-word;color:#1a1f22}.alarm-name-list[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;height:26px}.alarm-name-list-box[_ngcontent-%COMP%]{max-height:550px;overflow-y:scroll}.hover-row[_ngcontent-%COMP%]{color:#0279ff!important}.hover-row[_ngcontent-%COMP%]:hover{text-decoration:underline}.width-60[_ngcontent-%COMP%]{width:60%!important}.min-height-div[_ngcontent-%COMP%]{min-height:15px}.marg-b-38px[_ngcontent-%COMP%]{margin-bottom:38px}.close-page[_ngcontent-%COMP%]{position:absolute;right:15px;top:10px}"]}),_)}}])}();