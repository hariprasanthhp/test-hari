!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,"symbol"==typeof(s=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"))?s:String(s)),i)}var n,s}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[2965],{21693:function(t,i,n){n.d(i,{v:function(){return b}});var s=n(79765),a=n(39897),o=n(40205),u=n(92340),c=n(88002),l=n(5304),v=n(23815),m=n(37716),h=n(91841),d=n(38048),p=n(3679),f=n(48483),y=n(39895),b=function(){var t=function(){function t(r,i,n,a,o){e(this,t),this.httpClient=r,this.ssoAuthService=i,this.fb=n,this.dateUtilsService=a,this.router=o,this.appliedFilters={},this.alertType="",this.transformedAlarms=["multiple-onts-down-network","multiple-onts-down-pon","multiple-onts-down-olt"],this.baseURL=u.N.API_BASE_URL,this.issuesFilterChanged$=new s.xQ,this.geoMapFilterChanged$=new s.xQ,this.homegeomapNavigation$=new s.xQ,this.isIssueMap=!1,this.issuesGeoMapFiltersParams={},this.geoMapAppliedFilters={},this.filtersForm=this.fb.group({startDate:[""],endDate:[""],alarmType:[""],region:[""],location:[""],system:[""],fsan:[""],severity:[""],category:[""],customCategory:[""],eventName:"All",cco_ack:"all",cco_shelv:"all"}),this.selectedDate=new s.xQ,this.filterCount$=this.selectedDate.asObservable(),this.currentIssuesFilterParams={},this.geoMapHomeFilterParams={},this.alertsCount={alerts:0,events:0},this.mapViewFilters={},this.regions=this.baseURL+"nfa/regions?tenant=0",this.locations=this.baseURL+"nfa/locations?tenant=0",this.systems=this.baseURL+"nfa/systems?tenant=0"}return r(t,[{key:"filterCounts",value:function(e){return this.selectedDate.next(e),this.dateParams=e,this.dateParams}},{key:"listen",value:function(e){return new a.y(function(e){})}},{key:"emit",value:function(e,t){}},{key:"getRegions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";return e&&(t+="&includeDeleted=true"),this.httpClient.get("".concat(this.regions).concat(t)).pipe((0,c.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,l.K)(this.handleError))}},{key:"getLocations",value:function(e){return this.httpClient.get("".concat(this.locations).concat("&region="+e)).pipe((0,c.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,l.K)(this.handleError))}},{key:"getSystems",value:function(e,t){return this.httpClient.get("".concat(this.systems).concat("&region="+e).concat("&location="+t)).pipe((0,c.U)(function(e){return e.sort(function(e,t){return(e.name||"").toString().localeCompare((t.name||"").toString(),"en",{numeric:!1})}),e}),(0,l.K)(this.handleError))}},{key:"prepareLocationRegionHierachy",value:function(e){var t=[],r={};return e.map(function(e){r.hasOwnProperty(e[0])||(t.push({value:e[0],parent:"All"}),r[e[0]]=!0),t.push({value:e[1],parent:e[0]})}),t}},{key:"handleError",value:function(e){return(0,o._)(e)}},{key:"getAlarmSubscriberInfo",value:function(e){return this.httpClient.get("".concat(this.baseURL,"/analytics-engine/alarmSubscriberList?historyReport=false&alarmId=").concat(e))}},{key:"setCurrentIssuesFilterParams",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;this.currentIssuesFilterParams=e,r||this.issuesFilterChanged$.next(t)}},{key:"getCurrentIssuesFilterParams",value:function(){return this.currentIssuesFilterParams}},{key:"setgeoMapHomeFilterParams",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;this.geoMapHomeFilterParams=e,r||this.issuesFilterChanged$.next(t)}},{key:"getgeoMapHomeFilterParams",value:function(){return this.geoMapHomeFilterParams}},{key:"setGeoMapFilters",value:function(e){this.geoMapFilterChanged$.next(e)}},{key:"callGotoHomeGeomap",value:function(){this.homegeomapNavigation$.next()}},{key:"fromMapNavigation",value:function(e){this.isIssueMap=e}},{key:"isMap",value:function(){return this.isIssueMap}},{key:"setIssuesGeoMapFilters",value:function(e){this.issuesGeoMapFiltersParams=e}},{key:"getIssuesGeoMapFilters",value:function(){return this.issuesGeoMapFiltersParams}},{key:"ngOnDestroy",value:function(){this.issuesFilterChanged$&&this.issuesFilterChanged$.unsubscribe(),this.geoMapFilterChanged$&&this.geoMapFilterChanged$.unsubscribe(),this.homegeomapNavigation$&&this.homegeomapNavigation$.unsubscribe(),this.selectedDate.unsubscribe()}},{key:"generateResourceForUI",value:function(e,t){var r,i,n,s,a,o,u,c,l="",v="",m="";return e&&e.subject&&(e.subject.region&&(l+="".concat(e.subject.region)),e.subject.location&&(v+="".concat(l?"/":"").concat(e.subject.location)),e.subject.deviceName&&(m+="".concat(v?"/":"").concat(e.subject.deviceName))),t?(e.subject.resourceForUI="(".concat(l," ").concat(v," ").concat(m,") ").concat(e.subject.source),"object"==typeof(null===(i=null===(r=e.subject)||void 0===r?void 0:r.additionalAttributes)||void 0===i?void 0:i["ring-name"])?e.subject.resourceForUI+="(".concat(null===(s=null===(n=e.subject)||void 0===n?void 0:n.additionalAttributes)||void 0===s?void 0:s["ring-name"].value,")"):(null===(o=null===(a=e.subject)||void 0===a?void 0:a.additionalAttributes)||void 0===o?void 0:o["ring-name"])&&(e.subject.resourceForUI+="(".concat(null===(c=null===(u=e.subject)||void 0===u?void 0:u.additionalAttributes)||void 0===c?void 0:c["ring-name"],")"))):-1===this.transformedAlarms.indexOf(e.subject.alarmEventName)?e.subject.resourceForUI="(".concat(l," ").concat(v," ").concat(m,") ").concat(e.subject.source):e.subject&&"multiple-onts-down-network"===e.subject.alarmEventName?e.subject.resourceForUI="(".concat(l," ").concat(v,")"):e.subject&&"multiple-onts-down-pon"===e.subject.alarmEventName?e.subject.resourceForUI="(".concat(l," ").concat(v," ").concat(m,") ").concat(e.subject.source):e.subject&&"multiple-onts-down-olt"===e.subject.alarmEventName&&(e.subject.resourceForUI="(".concat(l," ").concat(v," ").concat(m,")")),e.subject.resourceForUI}},{key:"appendFqn",value:function(e){var t=this;return(null==e?void 0:e.length)&&(null==e||e.forEach(function(r){if(t.findObjectsCountByValue(e,r.name)>1){var i="";if(r.fqn){var n=r.fqn.split(",");if(n.length){var s=n[0];if(s){var a=s.split("=");a.length&&a[1]&&(i=a[1])}}}r.tempName="".concat(r.name," ").concat(i?"(".concat(i,")"):"")}else r.tempName=r.name}),e.forEach(function(e){e.name=e.tempName})),e}},{key:"findObjectsCountByValue",value:function(e,t){var r=0;if(e&&e.length)for(var i=0;i<e.length;i++)void 0!==e[i].isDeleted&&!e[i].isDeleted&&e[i].name.toLowerCase()==t.toLowerCase()&&r++;return r}},{key:"getDateParam",value:function(e,t){var r;return(null===(r=null==e?void 0:e.date)||void 0===r?void 0:r.length)?(e.date[1]||(e.date[1]=new Date),t?"".concat(this.dateUtilsService.getStartUtcTimeByDays(0)-864e5,",").concat(this.dateUtilsService.getUtCMilliSecByDateObj(e.date[1],!0)):"".concat(this.dateUtilsService.getUtCMilliSecByDateObj(e.date[0]),",").concat(this.dateUtilsService.getUtCMilliSecByDateObj(e.date[1],!0))):""}},{key:"setAlertType",value:function(e){this.alertType=e}},{key:"getAlertType",value:function(){return this.alertType}},{key:"getRemoveFiltersData",value:function(){return{SYSTEM:[],TRANSFORMED:["category","customCategory","fsan"],HEALTH:["category","customCategory"],CONNECTIVITY:["category","customCategory","fsan"],EVENTS:["severity","cco_ack","cco_shelv","customCategory"]}}},{key:"getPageTitle",value:function(){return{SYSTEM:"System Alarms",TRANSFORMED:"Transform Alarms",HEALTH:"Health Alerts",CONNECTIVITY:"Cloud Connectivity",EVENTS:"Events"}}},{key:"getAlarmAlertTypes",value:function(){return["SYSTEM","TRANSFORMED","HEALTH","CONNECTIVITY"]}},{key:"buildQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(var r in e)null==e[r]||""==e[r]||(""!=t&&(t+="&"),t+=r+"="+encodeURIComponent(e[r]));return t}},{key:"getAppliedFilters",value:function(){return this.appliedFilters}},{key:"setAppliedFilters",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.appliedFilters=e,t&&this.issuesFilterChanged$.next(!1)}},{key:"setGeomapAppliedFilters",value:function(e){this.geoMapAppliedFilters=e}},{key:"getGeomapAppliedFilters",value:function(){return this.geoMapAppliedFilters}},{key:"gotoHomeGeomap",value:function(){var e=v.pickBy(Object.assign(Object.assign({},this.getMapViewFilters()),this.getAppliedFilters()),function(e,t){return e});"DISRUPTION"===this.getAlertType()&&(e.fsan_serialno=e.fsan),this.router.navigate(["/cco/home/active-systems-geomap"],{state:{filters:e}})}},{key:"getAlertScopes",value:function(){return{SYSTEM:{realtime:"cloud.rbac.coc.issues.systemalarms.realtime",active:"cloud.rbac.coc.issues.systemalarms.activereports",history:"cloud.rbac.coc.issues.systemalarms.historicalreports"},TRANSFORMED:{realtime:"cloud.rbac.coc.issues.transformalarms.realtime",active:"cloud.rbac.coc.issues.transformalarms.activereports",history:"cloud.rbac.coc.issues.transformalarms.historicalreports"},HEALTH:{realtime:"cloud.rbac.coc.issues.healthalerts.realtime",active:"cloud.rbac.coc.issues.healthalerts.activereports",history:"cloud.rbac.coc.issues.healthalerts.historicalreports"},CONNECTIVITY:{realtime:"cloud.rbac.coc.issues.cloudconnectivity.realtime",active:"cloud.rbac.coc.issues.cloudconnectivity.activereports",history:"cloud.rbac.coc.issues.cloudconnectivity.historicalreports"},EVENTS:"cloud.rbac.coc.issues.events",DISRUPTION:"cloud.rbac.coc.issues.servicedisruptions"}}},{key:"setAlertsCount",value:function(e){var t,r=0,i=0;if(null==e?void 0:e.alarm)for(var n in e.alarm)if(e.alarm[n])for(var s in e.alarm[n])r+=e.alarm[n][s];(null===(t=null==e?void 0:e.event)||void 0===t?void 0:t.count)&&(i=e.event.count),this.alertsCount={alerts:r,events:i}}},{key:"getAlertsCount",value:function(){return this.alertsCount}},{key:"setMapViewFilters",value:function(e){this.mapViewFilters=e}},{key:"getMapViewFilters",value:function(){return this.mapViewFilters}},{key:"getFileName",value:function(e,t){var r;try{r=e.headers.get("Content-Disposition").split("=")[1]}catch(i){r="subsciberDisruption"==t?"Subscriber Disruptions.csv":"ServiceDisruptions.csv"}return r}},{key:"getFileTitleMap",value:function(){return{SYSTEM:"SystemAlarms",TRANSFORMED:"TransformAlarms",HEALTH:"HealthAlerts",CONNECTIVITY:"CloudConnectivity",EVENTS:"Events"}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m.LFG(h.eN),m.LFG(d.t6),m.LFG(p.qu),m.LFG(f.s),m.LFG(y.F0))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},64432:function(t,i,n){n.d(i,{q:function(){return d}});var s,a=n(79765),o=n(26215),u=n(91841),c=n(92340),l=n(5304),v=n(37716),m=n(404),h=n(38048),d=((s=function(){function t(r,i,n){e(this,t),this.commonFunctionsService=r,this.http=i,this.sso=n,this.currentPageData=new a.xQ,this.ccoPageExport=new a.xQ,this.showCountStatus=new o.X(!1),this.showCountStatus$=this.showCountStatus.asObservable(),this.textSearch=new a.xQ}return r(t,[{key:"save",value:function(e){return this.productList=e,this.productList}},{key:"savesubscriber",value:function(e){return this.subscriberValue=e,this.subscriberValue}},{key:"savesevice1",value:function(e){return this.servicevalue1={pppoe:{username:e.username,password:e.password},VLanId:e.VLanId,Pbit:e.Pbit},this.servicevalue1}},{key:"savesevice2",value:function(e){return this.servicevalue2={FaxT38:{Enable:e.FaxT38},ServiceType:e.ServiceType,DialPlan:e.DialPlan},this.servicevalue2}},{key:"savesevice3",value:function(e){return this.servicevalue3=e,this.servicevalue3}},{key:"savesevice4",value:function(e){return this.servicevalue4=e,this.servicevalue4}},{key:"savesevice5",value:function(e){return this.servicevalue5=e,this.servicevalue5}},{key:"savesevice6",value:function(e){return this.servicevalue6=e,this.servicevalue6}},{key:"currentPageAdder",value:function(e){this.currentPageData.next(e)}},{key:"doExport",value:function(e){this.ccoPageExport.next(e)}},{key:"exportDataConvertor",value:function(e){return Array.isArray(e)&&e.forEach(function(e){for(var t in delete e._id,e)"boolean"==typeof e[t]&&(e[t]=1==e[t]?"Yes":"No")}),e}},{key:"generateExportName",value:function(e){return this.commonFunctionsService.generateExportName(e)}},{key:"showCount",value:function(e){this.showCountStatus.next(e)}},{key:"performSearch",value:function(e,t,r,i){var n=(new u.LE).set("filter",t||"").set("pageNumber",r).set("pageSize",i);return this.sso.getOrg(e)&&n.set("orgId",e),this.http.get("".concat(c.N.SUPPORT_URL,"/subscriber-search"),{params:n}).pipe((0,l.K)(this.handleError))}},{key:"handleError",value:function(e){throw new Error("Method not implemented.")}},{key:"searchTextEmit",value:function(e){this.textSearch.next(e)}}],[{key:"save",value:function(e){throw new Error("Method not implemented.")}}]),t}()).\u0275fac=function(e){return new(e||s)(v.LFG(m.i),v.LFG(u.eN),v.LFG(h.t6))},s.\u0275prov=v.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s)},9534:function(t,i,n){n.d(i,{Q:function(){return c}});var s,a=n(25917),o=n(37716),u=n(404),c=((s=function(){function t(r){e(this,t),this.commonFunctionsService=r}return r(t,[{key:"getNetworkSystemList",value:function(){var e;return e=[{serielNumber:"KH912924",type:"OLT",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Pre-provisioned"},{serielNumber:"KH912924",type:"ASM",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Active"},{serielNumber:"KH912924",type:"OLT",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Offline"},{serielNumber:"KH912924",type:"OLT",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Active"},{serielNumber:"KH912924",type:"ASM",model:"E93",name:"SD9212969",region:"SD9212969",location:"SD9212969",connection_status:"Lees_Router",software_version:"Offline"}],(0,a.of)(e)}},{key:"getSubscribersSystemList",value:function(){var e;return e=[{serielNumber:"KH912924",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912925",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912926",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912927",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912928",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"},{serielNumber:"KH912929",ontSerielNumber:"OLT",name:"SD9212969",status:"Pre-provisioned",model:"E93",macAddress:"E7:3F:2B:10:9A:EF",wan:"1",wifiradio:"1",subscriberName:"Courtney Lee",accountID:"Courtney",subscriberStatus:"Active",revenue_edge_suits:"ProductIQ",service_plan:"Tier 1"}],(0,a.of)(e)}},{key:"exportDataConvertor",value:function(e){return Array.isArray(e)&&e.forEach(function(e){for(var t in delete e._id,e)"boolean"==typeof e[t]&&(e[t]=1==e[t]?"Yes":"No")}),e}},{key:"generateExportName",value:function(e){return this.commonFunctionsService.generateExportName(e)}}]),t}()).\u0275fac=function(e){return new(e||s)(o.LFG(u.i))},s.\u0275prov=o.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s)}}])}();