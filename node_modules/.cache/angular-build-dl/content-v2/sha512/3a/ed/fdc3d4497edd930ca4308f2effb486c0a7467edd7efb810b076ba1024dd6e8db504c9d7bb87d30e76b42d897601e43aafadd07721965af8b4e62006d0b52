"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[1623],{34558:function(e,t,i){i.d(t,{r:function(){return n}});var o=i(79765),a=i(37716);let n=(()=>{class e{constructor(){this.currentPageData=new o.xQ}currentPageAdder(e){this.currentPageData.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},31623:function(e,t,i){i.r(t),i.d(t,{FoundationSystemsModule:function(){return C}});var o=i(38583),a=i(39895),n=i(92340),s=i(37716),c=i(7450),r=i(34558),l=i(12664),g=i(1963),u=i(96045),d=i(64432),h=i(89097),f=i(39075);const m=["GetStartedModal"];function p(e,t){if(1&e&&(s.TgZ(0,"div",9),s.TgZ(1,"div",10),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(2),s.Oqu(e.language.Systems)}}function v(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",11),s.TgZ(1,"div",12),s.TgZ(2,"div",13),s._uU(3),s.qZA(),s.TgZ(4,"img",14),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).gotoServiceProfiles()}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(3),s.AsE("",e.ccoSearchText," : ",e.language["Provisioned Subscribers"],"")}}function b(e,t){if(1&e&&(s.TgZ(0,"section",4),s.TgZ(1,"div",5),s.TgZ(2,"div",6),s.YNc(3,p,3,1,"div",7),s.qZA(),s.YNc(4,v,5,2,"div",8),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(3),s.Q6J("ngIf",!e.isProvisioned),s.xp6(1),s.Q6J("ngIf",e.isProvisioned&&e.ccoSearchText)}}function Z(e,t){if(1&e&&(s.TgZ(0,"li",19),s.TgZ(1,"a",20),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("ngClass","foundation-manage"==e.currentPage?"active":""),s.xp6(1),s.hij(" ",e.language.Manage," ")}}function x(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"li",19),s.TgZ(1,"a",21),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).setCurrentTab("foundation-geographic-view")}),s._uU(2),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(2),s.hij(" ",e.language.Geographic_View," ")}}function w(e,t){if(1&e&&(s.TgZ(0,"section"),s.TgZ(1,"div",15),s.TgZ(2,"div",6),s.TgZ(3,"div",9),s.TgZ(4,"div",16),s.TgZ(5,"ul",17),s.YNc(6,Z,3,2,"li",18),s.YNc(7,x,3,1,"li",18),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(6),s.Q6J("ngIf",e.scopeFlag.manage),s.xp6(1),s.Q6J("ngIf",e.scopeFlag.geographic)}}function S(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",22),s.TgZ(1,"div",23),s._UZ(2,"div",24),s.TgZ(3,"div",25),s.TgZ(4,"span",26),s.NdJ("click",function(){return s.CHM(e),s.oxw().closeAllModal()}),s._UZ(5,"img",27),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"div",28),s.TgZ(7,"div",29),s._UZ(8,"img",30),s.qZA(),s.TgZ(9,"div",31),s._uU(10),s._UZ(11,"br"),s._uU(12),s.qZA(),s.TgZ(13,"div",32),s._uU(14),s._UZ(15,"br"),s._uU(16),s.qZA(),s.TgZ(17,"div",33),s.NdJ("click",function(){return s.CHM(e),s.oxw().goToInitialOnboarding()}),s.TgZ(18,"span",34),s._uU(19),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(10),s.Oqu(e.language["Welcome to"]),s.xp6(2),s.hij(" ",e.language["Revenue EDGE Deployment Cloud"]," "),s.xp6(2),s.hij(" ",e.language["Before you jump in, we'd like to walk you"],""),s.xp6(2),s.hij(" ",e.language["through your system onboarding setup"],". "),s.xp6(3),s.Oqu(e.language.Lets_Started)}}function T(e,t){1&e&&s._UZ(0,"router-outlet")}const A=i(91704),y=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,s,c,r,l){this.translateService=e,this.foundation=t,this.router=i,this.modalService=o,this.home=n,this.api=s,this.ccoCommonService=c,this.ssoService=r,this.titleService=l,this.language={},this.currentPage="foundation-manage",this.showTabs=!1,this.scopeFlag={manage:!1,geographic:!1},this.ORG_ID=this.ssoService.getOrgId(),this.getScopes(),this.currentPageSubs=this.foundation.currentPageData.subscribe(e=>{this.currentPage=e,setTimeout(()=>{"foundation-geographic-view"==e&&A("#manage").hasClass("active")&&A("#manage").removeClass("active")},100)}),this.checkShowTabs(),this.routeChangeSubs=this.router.events.subscribe(e=>{e instanceof a.m2&&this.checkShowTabs()})}setTitle(e){e.includes("/foundation-systems/foundation-geographic-view")?this.titleService.setTitle(`${this.language.Geographic_View} - ${this.language.Systems} - ${this.language.Deployment} - ${this.language["Calix Cloud"]}`):this.titleService.setTitle(`${this.language.Manage} - ${this.language.Systems} - ${this.language.Deployment} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.HideModel=!!window.localStorage.getItem("HideModel"),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.setTitle(this.router.url)}),this.getHSI(),this.setTitle(this.router.url),this.ccoCommonService.textSearch.subscribe(e=>{this.ccoSearchText=e.searchText,this.isProvisioned=e.isProvisioned})}ngOnDestroy(){this.languageSubject.unsubscribe(),this.currentPageSubs.unsubscribe(),this.routeChangeSubs.unsubscribe()}ngAfterViewChecked(){-1===this.router.url.indexOf("/foundation-manage/")&&A("#manage").hasClass("active")&&A("#manage").removeClass("active")}setCurrentTab(e){this.currentPage=e,this.foundation.currentPageAdder(e)}checkShowTabs(){let e=this.router.url;this.showTabs=e.indexOf("/foundation-system-list")>-1||e.indexOf("/foundation-geographic-view")>-1}getScopes(){this.validateScopeStage=`${n.N.API_BASE}`.indexOf("/dev.api.calix.ai")>-1;let e=this.ssoService.getScopes();e["cloud.rbac.foundation.systems"]=e["cloud.rbac.foundation.systems"]?e["cloud.rbac.foundation.systems"]:[],e&&e["cloud.rbac.foundation.systems"]&&((-1!==e["cloud.rbac.foundation.systems"].indexOf("read")||-1!==e["cloud.rbac.foundation.systems"].indexOf("write"))&&(this.scopeFlag.manage=!0),this.scopeFlag.geographic=!0)}getHSI(){this.api.GetWorkflowGrid(this.ORG_ID).subscribe(e=>{0==e.length&&this.home.getHSI(this.ORG_ID).subscribe(e=>{e?this.dataAvailable=!0:this.HideModel||(this.modalRef=this.modalService.open(this.GetStartedModal,{size:"lg",centered:!0,backdrop:"static",keyboard:!1,windowClass:"custom-modal"}))},e=>{404!=e.status||this.HideModel?this.dataAvailable=!0:this.modalRef=this.modalService.open(this.GetStartedModal,{size:"lg",centered:!0,backdrop:"static",keyboard:!1,windowClass:"custom-modal"})})})}goToInitialOnboarding(){this.modalService.dismissAll("closed"),this.router.navigate(["/cco-foundation/foundation-configuration/configuration-workflow/workflows"])}closeAllModal(){this.HideModel=!0,window.localStorage.setItem("HideModel","true"),this.modalService.dismissAll()}gotoServiceProfiles(){this.router.navigate(["/cco-foundation/foundation-configuration/configuration-prerequisites/foundation-profiles/ONT-profile"])}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(c.s),s.Y36(r.r),s.Y36(a.F0),s.Y36(l.FF),s.Y36(g.h),s.Y36(u.A),s.Y36(d.q),s.Y36(h.t6),s.Y36(f.Dx))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-foundation-systems"]],viewQuery:function(e,t){if(1&e&&s.Gf(m,7),2&e){let e;s.iGM(e=s.CRH())&&(t.GetStartedModal=e.first)}},decls:5,vars:3,consts:[["class","mb-2",4,"ngIf"],[4,"ngIf"],["class","col-md-12"],["GetStartedModal",""],[1,"mb-2"],[1,"container"],[1,"row"],["class","col-md-12 px-0",4,"ngIf"],["class","row ccl-tabs",4,"ngIf"],[1,"col-md-12","px-0"],[1,"cco-title"],[1,"row","ccl-tabs"],[1,"col-md-12","px-0","d-flex","justify-content-between","nav-tabs","mb-0"],[1,"cco-title","pb-3"],["src","assets/img/ic_close-44px.svg","alt","",1,"mr-3","service-profiles-img","cursor-pointer",3,"click"],[1,"container","mb-2"],[1,"ccl-tabs"],["id","tabs",1,"nav","nav-tabs","sub-tab"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/cco-foundation/foundation-systems/foundation-manage/foundation-system-list","id","manage","routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"ngClass"],["routerLink","/cco-foundation/foundation-systems/foundation-geographic-view","id","geographic","routerLinkActive","active","data-toggle","tab",1,"nav-link",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"col-md-10"],[1,"col-md-2","text-right"],[1,"close-icon","pointer",3,"click"],["src","assets/img/close-icon.svg","alt",""],[1,"modal-body",2,"text-align","center","padding","42px 30px"],[1,""],["src","assets/img/calix-Cloud-logo.svg",2,"width","290px"],[1,"cco-title","mb-4"],[1,"cco-secondary-title","mb-4",2,"line-height","initial !important"],[1,"cco-secondary-title",2,"color","#0279ff !important",3,"click"],[1,"cursor-pointer"]],template:function(e,t){1&e&&(s.YNc(0,b,5,2,"section",0),s.YNc(1,w,8,2,"section",1),s.YNc(2,S,20,5,"ng-template",2,3,s.W1O),s.YNc(4,T,1,0,"router-outlet",1)),2&e&&(s.Q6J("ngIf",t.showTabs),s.xp6(1),s.Q6J("ngIf",t.showTabs&&!t.isProvisioned),s.xp6(3),s.Q6J("ngIf",t.scopeFlag.manage||t.scopeFlag.geographic))},directives:[o.O5,a.yS,a.Od,o.mk,a.lC],styles:[".service-profiles-img[_ngcontent-%COMP%]{width:22px}"]}),e})(),children:[{path:"",redirectTo:"foundation-manage",pathMatch:"full"},{path:"foundation-manage",loadChildren:()=>Promise.all([i.e(7418),i.e(5482)]).then(i.bind(i,65482)).then(e=>e.FoundationManageModule)},{path:"foundation-geographic-view",component:i(69794).G}]}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[a.Bz.forChild(y)],a.Bz]}),e})();var k=i(12610);let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[k._],imports:[[o.ez,q]]}),e})()}}]);