"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[5980],{35980:function(a,o,t){t.r(o),t.d(o,{AlarmNotificationsModule:function(){return wo}});var i=t(38583),e=t(39895),l=t(64762),n=t(3679),r=t(79765),s=t(92340),d=t(9128),c=t(2792),m=t(37716),u=t(7450),w=t(91841),h=t(49342),g=t(89097),v=t(75709),D=t(39075),k=t(21693),f=t(12664);let p=(()=>{class a{constructor(a){this.control=a,this.notApplied=!1,this._oldvalue="",this.regExpr=void 0}set mask(a){"*"==a?this.notApplied=!0:this.regExpr=new RegExp(a)}change(a){var o;if(this.notApplied&&!this.regExpr)return;let t=a.target,i=t.value,e=t.selectionStart;i&&this.regExpr&&!(null===(o=this.regExpr)||void 0===o?void 0:o.test(i))?(t.selectionStart=t.selectionEnd=e-1,t.value.length<this._oldvalue.length&&0==e&&(e=2),this.control&&this.control.control.setValue(this._oldvalue,{emit:!1}),t.value=this._oldvalue,t.selectionStart=t.selectionEnd=e-1):this._oldvalue=i}}return a.\u0275fac=function(o){return new(o||a)(m.Y36(n.a5,8))},a.\u0275dir=m.lG2({type:a,selectors:[["input"]],hostBindings:function(a,o){1&a&&m.NdJ("input",function(a){return o.change(a)})},inputs:{mask:"mask"}}),a})();var F=t(74062);const A=["notification_name"];function C(a,o){if(1&a&&(m.TgZ(0,"div",16),m.TgZ(1,"div",17),m.TgZ(2,"div",18),m.TgZ(3,"div",19),m.TgZ(4,"div",20),m.TgZ(5,"span",21),m._uU(6),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&a){const a=m.oxw();m.xp6(6),m.Oqu(a.language.Loading)}}function y(a,o){if(1&a&&(m.TgZ(0,"div",24),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["This field is required."]," ")}}function b(a,o){1&a&&(m.TgZ(0,"div",24),m._uU(1," Please fill out this field, 1-50 characters including letters, numbers and spaces only "),m.qZA())}function T(a,o){1&a&&(m.TgZ(0,"div",24),m._uU(1," Please fill out this field, 1-50 characters including letters, numbers and spaces only "),m.qZA())}function x(a,o){if(1&a&&(m.TgZ(0,"div",22),m.YNc(1,y,2,1,"div",23),m.YNc(2,b,2,0,"div",23),m.YNc(3,T,2,0,"div",23),m.qZA()),2&a){const a=m.oxw();m.xp6(1),m.Q6J("ngIf",null==a.workFlowDetailsData||null==a.workFlowDetailsData.workFlowDetailsForm||null==a.workFlowDetailsData.workFlowDetailsForm.controls.name||null==a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors?null:a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.required),m.xp6(1),m.Q6J("ngIf",null==a.workFlowDetailsData||null==a.workFlowDetailsData.workFlowDetailsForm||null==a.workFlowDetailsData.workFlowDetailsForm.controls.name||null==a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors?null:a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.invalidName),m.xp6(1),m.Q6J("ngIf",!(null!=a.workFlowDetailsData&&null!=a.workFlowDetailsData.workFlowDetailsForm&&null!=a.workFlowDetailsData.workFlowDetailsForm.controls.name&&null!=a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors&&a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.invalidName)&&(null==a.workFlowDetailsData||null==a.workFlowDetailsData.workFlowDetailsForm||null==a.workFlowDetailsData.workFlowDetailsForm.controls.name||null==a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors?null:a.workFlowDetailsData.workFlowDetailsForm.controls.name.errors.maxlength))}}let Z=(()=>{class a{constructor(a,o){this.translateService=a,this.formBuilder=o,this._workFlowDetailsData={},this.getWorkFlowAPIEmitter=new m.vpe}set workFlowDetailsData(a){var o,t,i;this._workFlowDetailsData=a,""!=(null==a?void 0:a.workflowId)&&(null===(i=null===(t=null===(o=this.workFlowDetailsData)||void 0===o?void 0:o.workFlowDetailsForm)||void 0===t?void 0:t.controls.name)||void 0===i||i.disable())}get workFlowDetailsData(){return this._workFlowDetailsData}ngOnInit(){this.loadOnEdit&&this.loadOnEdit.subscribe(a=>{this.loading=a}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(a=>{this.language=a}),(!this.workFlowDetailsData||!this.workFlowDetailsData.workFlowDetailsForm||this.workFlowDetailsData.workFlowDetailsForm.controls)&&this.workFlowDetailsData.workFlowDetailsForm.valueChanges.subscribe(a=>{a.name&&(this.workFlowDetailsData.isNameEntered=!0)})}callMultipleAPI(){return(0,l.mG)(this,void 0,void 0,function*(){this.getWorkFlowAPIEmitter.emit(!0)})}avoidInitialSpacing(a){0===a.target.selectionStart&&"Space"===a.code&&a.preventDefault()}keyPressAlphanumeric(a){var o=String.fromCharCode(a.keyCode);return!!/[a-zA-Z0-9]/.test(o)||(a.preventDefault(),!1)}clearSearch(){this.workFlowDetailsData.description=""}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return a.\u0275fac=function(o){return new(o||a)(m.Y36(u.s),m.Y36(n.qu))},a.\u0275cmp=m.Xpm({type:a,selectors:[["app-workflow-details"]],viewQuery:function(a,o){if(1&a&&m.Gf(A,7),2&a){let a;m.iGM(a=m.CRH())&&(o.notification_name=a.first)}},inputs:{workFlowDetailsData:"workFlowDetailsData",loadOnEdit:"loadOnEdit"},outputs:{getWorkFlowAPIEmitter:"getWorkFlowAPIEmitter"},decls:24,vars:9,consts:[[1,"container"],["class","row mb-3",4,"ngIf"],[1,"row"],[1,"col-md-4","px-0"],[3,"formGroup"],[1,"ccl-form"],["for","notification_name"],[1,"error"],["type","text","id","notification_name","formControlName","name","aria-describedby","name","trimSpace","",1,"form-control",3,"placeholder"],["class","errorMessage",4,"ngIf"],[1,"form-group","ccl-form","mt-2"],["for","description"],["id","description","formControlName","description","rows","3","minlength","0","maxlength","200","trimSpace","",1,"form-control",3,"placeholder"],["id","the-count",1,"text-right"],["id","current"],["id","maximum"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"errorMessage"],["class","mt-1",4,"ngIf"],[1,"mt-1"]],template:function(a,o){1&a&&(m.TgZ(0,"section"),m.TgZ(1,"div",0),m.YNc(2,C,7,1,"div",1),m.TgZ(3,"div",2),m.TgZ(4,"div",3),m.TgZ(5,"form",4),m.TgZ(6,"div",5),m.TgZ(7,"label",6),m._uU(8),m.TgZ(9,"span",7),m._uU(10,"*"),m.qZA(),m.qZA(),m._UZ(11,"input",8),m.YNc(12,x,4,3,"div",9),m.qZA(),m.TgZ(13,"div",10),m.TgZ(14,"label",11),m._uU(15),m.TgZ(16,"small"),m._uU(17),m.qZA(),m.qZA(),m._UZ(18,"textarea",12),m.TgZ(19,"div",13),m.TgZ(20,"span",14),m._uU(21),m.qZA(),m.TgZ(22,"span",15),m._uU(23,"/200"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&a&&(m.xp6(2),m.Q6J("ngIf",o.loading),m.xp6(3),m.Q6J("formGroup",null==o.workFlowDetailsData?null:o.workFlowDetailsData.workFlowDetailsForm),m.xp6(3),m.hij("",o.language.Name," "),m.xp6(3),m.s9C("placeholder",o.language.Name),m.xp6(1),m.Q6J("ngIf",(null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm||null==o.workFlowDetailsData.workFlowDetailsForm.controls.name?null:o.workFlowDetailsData.workFlowDetailsForm.controls.name.invalid)&&((null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm||null==o.workFlowDetailsData.workFlowDetailsForm.controls.name?null:o.workFlowDetailsData.workFlowDetailsForm.controls.name.dirty)||(null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm||null==o.workFlowDetailsData.workFlowDetailsForm.controls.name?null:o.workFlowDetailsData.workFlowDetailsForm.controls.name.touched))),m.xp6(3),m.Oqu(o.language.description),m.xp6(2),m.hij(" (",o.language.Optional,")"),m.xp6(1),m.s9C("placeholder",o.language.Decription),m.xp6(3),m.Oqu(null!=o.workFlowDetailsData&&null!=o.workFlowDetailsData.workFlowDetailsForm&&null!=o.workFlowDetailsData.workFlowDetailsForm.controls.description&&o.workFlowDetailsData.workFlowDetailsForm.controls.description.value?null==o.workFlowDetailsData||null==o.workFlowDetailsData.workFlowDetailsForm?null:o.workFlowDetailsData.workFlowDetailsForm.controls.description.value.length:0))},directives:[i.O5,n._Y,n.JL,n.sg,p,n.Fj,n.JJ,n.u,F.f,n.wO,n.nD],styles:[".disable[_ngcontent-%COMP%]{pointer-events:none}.cursornallow[_ngcontent-%COMP%]{cursor:not-allowed}input[_ngcontent-%COMP%]:disabled{cursor:no-drop}"]}),a})();var S=t(23771),_=t(22759),O=t(45435),q=t(54395),M=t(87519),I=t(68307),P=t(30900),N=t(86640);const E=["searchAlarmsInput"],J=["checkAllViewChild"];function j(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"span",19),m.NdJ("click",function(){return m.CHM(a),m.oxw().clearSearch()}),m._uU(1,"\xd7"),m.qZA()}}function U(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",20),m.TgZ(1,"button",21),m.NdJ("click",function(){m.CHM(a);const o=m.oxw();return o.addRemoveSelectedAlarmList("add",null==o.alarmData?null:o.alarmData.table)}),m._uU(2),m._UZ(3,"img",22),m.qZA(),m.qZA()}if(2&a){const a=m.oxw();m.xp6(1),m.Q6J("disabled",!a.canAdd),m.xp6(1),m.hij(" ",a.language["Add Selected"]," ")}}function V(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",23),m.TgZ(1,"button",24),m.NdJ("click",function(){m.CHM(a);const o=m.oxw();return o.addRemoveSelectedAlarmList("remove",null==o.alarmData?null:o.alarmData.table)}),m._UZ(2,"img",25),m._uU(3),m.qZA(),m.qZA()}if(2&a){const a=m.oxw();m.xp6(1),m.Q6J("disabled",!a.canRemove),m.xp6(2),m.hij("",a.language["Remove Selected"]," ")}}function Q(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",26),m.TgZ(1,"ng-select",27),m.NdJ("ngModelChange",function(o){return m.CHM(a),m.oxw().alarmData.searchCategory=o})("change",function(o){return m.CHM(a),m.oxw().searchAlarms(o,"category")})("input",function(o){return m.CHM(a),m.oxw().searchAlarms(o,"category")}),m.qZA(),m.qZA()}if(2&a){const a=m.oxw();m.xp6(1),m.s9C("placeholder",a.language[null==a.alarmData?null:a.alarmData.searchCategoryPlaceHolder]),m.Q6J("ngModel",a.alarmData.searchCategory)("items",null==a.alarmData?null:a.alarmData.categoryList)}}function L(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",26),m.TgZ(1,"ng-select",28),m.NdJ("ngModelChange",function(o){return m.CHM(a),m.oxw().alarmData.searchSeverity=o})("change",function(o){return m.CHM(a),m.oxw().searchAlarms(o,"severity")})("input",function(o){return m.CHM(a),m.oxw().searchAlarms(o,"severity")}),m.TgZ(2,"ng-option",29),m._uU(3),m.qZA(),m.TgZ(4,"ng-option",30),m._uU(5),m.qZA(),m.TgZ(6,"ng-option",31),m._uU(7),m.qZA(),m.TgZ(8,"ng-option",32),m._uU(9),m.qZA(),m.TgZ(10,"ng-option",33),m._uU(11),m.qZA(),m.qZA(),m.qZA()}if(2&a){const a=m.oxw();m.xp6(1),m.s9C("placeholder",a.language[null==a.alarmData?null:a.alarmData.searchSeverityPlaceHolder]),m.Q6J("searchable",!1)("ngModel",a.alarmData.searchSeverity),m.xp6(2),m.Oqu(a.language.critical),m.xp6(2),m.Oqu(a.language.major),m.xp6(2),m.Oqu(a.language.minor),m.xp6(2),m.Oqu(a.language.Warning),m.xp6(2),m.Oqu(a.language.Info)}}function H(a,o){if(1&a&&(m.TgZ(0,"div",34),m.TgZ(1,"div",35),m.TgZ(2,"div",36),m.TgZ(3,"div",37),m.TgZ(4,"div",38),m.TgZ(5,"span",39),m._uU(6),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&a){const a=m.oxw();m.xp6(6),m.Oqu(a.language.Loading)}}function R(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"tr"),m.TgZ(1,"td"),m.TgZ(2,"div",15),m.TgZ(3,"input",40),m.NdJ("click",function(o){const t=m.CHM(a).index,i=m.oxw();return i.onCheckRow(null==i.alarmData?null:i.alarmData.tableType,o,t)})("ngModelChange",function(o){return m.CHM(a).$implicit.isChecked=o}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(4,"td"),m._uU(5),m.qZA(),m.TgZ(6,"td"),m._uU(7),m.qZA(),m.TgZ(8,"td",41),m._uU(9),m.qZA(),m.TgZ(10,"td"),m._uU(11),m.qZA(),m.TgZ(12,"td"),m._uU(13),m.qZA(),m.TgZ(14,"td"),m._uU(15),m.qZA(),m.TgZ(16,"td"),m._uU(17),m.qZA(),m.TgZ(18,"td"),m._uU(19),m.qZA(),m.qZA()}if(2&a){const a=o.$implicit;m.xp6(3),m.Q6J("ngModel",a.isChecked)("disabled",a.disabled),m.xp6(2),m.Oqu(a.alarm_name),m.xp6(2),m.Oqu(a.alarm_category),m.xp6(2),m.Oqu(a.group_name),m.xp6(2),m.Oqu(a.no_of_alarms),m.xp6(2),m.Oqu(a.severity),m.xp6(2),m.Oqu(a.alarm_id),m.xp6(2),m.Oqu(a.alarmRuleId),m.xp6(2),m.Oqu(a.group_id)}}const G=function(a){return{showHideTable:a}};let Y=(()=>{class a{constructor(a,o){this.translateService=a,this.customTranslateService=o,this.searchAlarm=void 0,this.canAdd=!1,this.canRemove=!1,this.language={},this.dtOptions={},this.dtTrigger=new r.xQ,this.canShowTableBody=!1,this.addRemoveAlarmList=new m.vpe,this.frTable=this.translateService.fr,this.esTable=this.translateService.es,this.germanTable=this.translateService.de_DE,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(a=>{this.language=a,setTimeout(()=>{this._alarmData=Object.assign({},this._alarmData),this.alarmData=Object.assign({},this.alarmData)},1e3),this.tableLanguageOptions(),this.rerender(!0,!0)})}set alarmData(a){this._alarmData=a}get alarmData(){return this._alarmData}ngOnInit(){this.alarmData&&this.alarmData.table&&("individual"==this.alarmData.table||"monitoredIndividual"==this.alarmData.table)&&(jQuery.fn.dataTable.ext.type.detect.unshift(function(a){return"CRITICAL"===a||"MAJOR"===a||"MINOR"===a||"WARNING"===a||"INFO"===a?"severity-order":null}),jQuery.fn.dataTable.ext.type.order["severity-order-pre"]=function(a){switch(a){case"CRITICAL":return 1;case"MAJOR":return 2;case"MINOR":return 3;case"WARNING":return 4;case"INFO":return 5}return 0}),this.alarmData&&this.alarmData.rerenderSubject&&this.alarmData.rerenderSubject.subscribe(a=>{var o;this.rerender(!0),this.onCheckRow(null===(o=this.alarmData)||void 0===o?void 0:o.tableType,void 0,-1)}),this.renderTable(!0),this.canShowTableBodyInputSubject&&this.canShowTableBodyInputSubject.subscribe(a=>{this.canShowTableBody=!0}),this.tableLanguageOptions()}ngAfterViewInit(){(0,_.R)(this.searchAlarmsInput.nativeElement,"keyup").pipe((0,O.h)(Boolean),(0,q.b)(1500),(0,M.x)(),(0,I.b)(a=>{var o;this.searchAlarms(this.searchAlarmsInput.nativeElement.value,null===(o=this.alarmData)||void 0===o?void 0:o.table)})).subscribe()}ngOnChanges(a){this.doSearch(a,"ngOnChange")}doSearch(a,o){var t,i;this.alarmData="ngOnChange"==o?null===(t=a.alarmData)||void 0===t?void 0:t.currentValue:a,this.alarmData.searchCategory&&""!=this.alarmData.searchCategory&&this.searchAlarms(this.alarmData.searchCategory,"category"),this.alarmData.searchSeverity&&""!=this.alarmData.searchSeverity&&this.searchAlarms(this.alarmData.searchSeverity,"severity"),this.searchAlarm&&""!=this.searchAlarm&&this.searchAlarms(this.searchAlarm,null===(i=this.alarmData)||void 0===i?void 0:i.table)}searchCategorySeverity(){this.alarmData.searchCategory&&""!=this.alarmData.searchCategory?(this.searchCategory=this.alarmData.searchCategory,this.searchAlarms(this.alarmData.searchCategory,"category")):this.alarmData.searchSeverity&&""!=this.alarmData.searchSeverity?(this.searchSeverity=this.alarmData.searchSeverity,this.searchAlarms(this.alarmData.searchSeverity,"severity")):!this.alarmData.searchCategory&&!this.alarmData.searchSeverity&&"individual"==this.alarmData.table&&this.rerender(!0)}renderTable(a){this.canShowTableBody=!1,this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthChange:!0,processing:!1,dom:"tipr",columnDefs:this.alarmData&&this.alarmData.columnDefs?this.alarmData.columnDefs:[],order:this.alarmData&&this.alarmData.order?this.alarmData.order:[]},setTimeout(()=>{this.dtTrigger.next()},200),setTimeout(()=>{this.handleCheckAll()},1500),setTimeout(()=>{this.canShowTableBody=!0},2500)}rerender(a,o){var t;a&&(this.canShowTableBody=!1),this.dtElement&&(null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)&&this.dtElement.dtInstance.then(a=>{a.destroy(),this.dtTrigger.next()}),a&&setTimeout(()=>{this.canShowTableBody=!0},2e3),a&&setTimeout(()=>{this.handleCheckAll()},1500),o&&this.doSearch(this.alarmData)}handleCheckAll(){var a;let o,t,i,e=this,l="";"group"==this.alarmData.table||"monitoredGroup"==this.alarmData.table?(l="group_id",t=8):"transform"==this.alarmData.table||"monitoredTransform"==this.alarmData.table?(l="alarmRuleId",t=7):("individual"==this.alarmData.table||"monitoredIndividual"==this.alarmData.table)&&(l="alarm_id",t=6),e.alarmData&&e.alarmData.data&&e.alarmData.data.length>0?(e.checkAllViewChild.nativeElement.checked=!0,o=!0):(e.checkAllViewChild.nativeElement.checked=!1,o=!1),this.dtElement&&(null===(a=this.dtElement)||void 0===a?void 0:a.dtInstance)&&this.dtElement.dtInstance.then(a=>{var n,r,s;(null===(n=a.rows({search:"applied"}))||void 0===n?void 0:n.data())&&(null===(s=null===(r=a.rows({search:"applied"}))||void 0===r?void 0:r.data())||void 0===s?void 0:s.length)>0?a.rows({search:"applied"}).every(function(){var a,n,r=this.data();let s=null===(n=null===(a=e._alarmData)||void 0===a?void 0:a.data)||void 0===n?void 0:n.find(a=>a[l].trim()==r[t].trim());s&&!s.isChecked&&(e.checkAllViewChild.nativeElement.checked=!1),s.selectedAlready||(o=!1,i=!0)}):(e.checkAllViewChild.nativeElement.checked=!1,o=!1),e.alarmData.allSelected=o})}tableLanguageOptions(){this.language&&this.language.fileLanguage&&"fr"==this.language.fileLanguage?this.dtOptions.language=this.frTable:this.language&&this.language.fileLanguage&&"es"==this.language.fileLanguage?this.dtOptions.language=this.esTable:this.language&&this.language.fileLanguage&&"de_DE"==this.language.fileLanguage?this.dtOptions.language=this.germanTable:this.language&&this.language.fileLanguage&&"en"==this.language.fileLanguage&&this.dtOptions.language&&delete this.dtOptions.language}checkUncheckAll(a,o){var t;let i,e=this,l=o.target.checked,n=l,r="";"group"==this.alarmData.table||"monitoredGroup"==this.alarmData.table?(r="group_id",i=8):"transform"==this.alarmData.table||"monitoredTransform"==this.alarmData.table?(r="alarmRuleId",i=7):("individual"==this.alarmData.table||"monitoredIndividual"==this.alarmData.table)&&(r="alarm_id",i=6),this.dtElement&&(null===(t=this.dtElement)||void 0===t?void 0:t.dtInstance)&&this.dtElement.dtInstance.then(a=>{a.rows({search:"applied"}).every(function(){var a,o,t=this.data();let n=null===(o=null===(a=e._alarmData)||void 0===a?void 0:a.data)||void 0===o?void 0:o.find(a=>{var o;return a[r].trim()==(null===(o=t[i])||void 0===o?void 0:o.trim())});n&&(l||!l&&!n.disabled)&&(n.isChecked=l)}),a.rows().every(function(){var a,o,t=this.data();let l=null===(o=null===(a=e._alarmData)||void 0===a?void 0:a.data)||void 0===o?void 0:o.find(a=>{var o;return a[r].trim()==(null===(o=t[i])||void 0===o?void 0:o.trim())});l&&!l.selectedAlready&&l.isChecked&&(n=!0)})}),setTimeout(()=>{"monitored"==a?this.canRemove=n:this.canAdd=n},500),this.alarmData.data=[...this._alarmData.data]}onCheckRow(a,o,t){var i,e,l,n,r;o&&(this.alarmData.data[t].isChecked=!!(null===(i=null==o?void 0:o.target)||void 0===i?void 0:i.checked)&&o.target.checked),"monitored"==a?(this.canRemove=!1,(null===(l=null===(e=this.alarmData)||void 0===e?void 0:e.data)||void 0===l?void 0:l.some(a=>a.isChecked))&&(this.canRemove=!0)):"non-monitored"==a&&(this.canAdd=!1,null===(r=null===(n=this.alarmData)||void 0===n?void 0:n.data)||void 0===r||r.forEach(a=>{!a.selectedAlready&&a.isChecked&&(this.canAdd=!0)}))}searchAlarms(a,o){this.canShowTableBody=!1;let t=0;"category"==o||"severity"==o?(a=a&&""!=a?"string"==typeof a?a:a.id:"","category"==o?(this.tempCategory=this.alarmData.searchCategory,t=2,this.alarmData.searchCategory=""!=a?a:void 0):(this.tempSeverity=this.alarmData.searchSeverity,t=5,this.alarmData.searchSeverity=""!=a?a:void 0,a=a&&""!=a?(a="string"==typeof a?a:a.id).toUpperCase():"")):(t="individual"!=o&&"monitoredIndividual"!=o?3:1,"group"==o&&"monitoredGroup"==o?t=3:("individual"==o||"monitoredIndividual"==o||"monitoredTransform"==o||"transform"==o)&&(t=1),this.searchAlarm=a),setTimeout(()=>{var o;this.dtElement&&(null===(o=this.dtElement)||void 0===o?void 0:o.dtInstance)&&this.dtElement.dtInstance.then(o=>{o.columns(t).search(a).draw()})},200),setTimeout(()=>{this.handleCheckAll(),this.canShowTableBody=!0},1500)}clearSearch(){this.searchAlarms("",this.alarmData.table)}addRemoveSelectedAlarmList(a,o){this.canShowTableBody=!1,this.addRemoveAlarmList.emit({mode:a,table:o})}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.dtTrigger.unsubscribe()}}return a.\u0275fac=function(o){return new(o||a)(m.Y36(u.s),m.Y36(P.d))},a.\u0275cmp=m.Xpm({type:a,selectors:[["app-workflow-datatable"]],viewQuery:function(a,o){if(1&a&&(m.Gf(S.G,5),m.Gf(E,7),m.Gf(J,7)),2&a){let a;m.iGM(a=m.CRH())&&(o.dtElement=a.first),m.iGM(a=m.CRH())&&(o.searchAlarmsInput=a.first),m.iGM(a=m.CRH())&&(o.checkAllViewChild=a.first)}},inputs:{canShowTableBodyInputSubject:"canShowTableBodyInputSubject",alarmData:"alarmData"},outputs:{addRemoveAlarmList:"addRemoveAlarmList"},features:[m.TTD],decls:39,vars:23,consts:[[1,"row","justify-content-between","marg-27"],[1,"col-md-7","pl-0"],[1,"ccl-form","search-ccl"],["type","text","id","org-list-search",1,"ccl-input",3,"ngModel","placeholder","ngModelChange"],["searchAlarmsInput",""],["aria-hidden","true","class","custom-clear",3,"click",4,"ngIf"],["class","col-md-5 pr-0 text-right",4,"ngIf"],["class","col-md-5 text-right pr-0",4,"ngIf"],[1,"col-md-6","pl-0","mt-3"],["class","ccl-form",4,"ngIf"],[1,"col-md-6","pr-0","mt-3"],["class","row mb-3",4,"ngIf"],[1,"overflow-auto","w-100"],["datatable","",1,"row-border","hover","alarm-table-alt","table-alter","dataTable",3,"ngClass","dtTrigger","dtOptions"],["scope","col"],[1,"form-check"],["type","checkbox","name","alarmCheckAll","id","alarmCheckAll",3,"disabled","click"],["checkAllViewChild",""],[4,"ngFor","ngForOf"],["aria-hidden","true",1,"custom-clear",3,"click"],[1,"col-md-5","pr-0","text-right"],["type","button","id","nextbtn",1,"btn-arrow","btn-arr-nxt","primary","px-3","mr-2",3,"disabled","click"],["src","assets/img/ic_chevron-r-w.svg"],[1,"col-md-5","text-right","pr-0"],["type","button","id","nextbtn",1,"btn-arrow","btn-arr-nxt","px-3","ml-2","primary",3,"disabled","click"],["src","assets/img/ic_chevron-r-w.svg",1,"mr-2","ml-0","transform-180"],[1,"ccl-form"],["bindValue","id","bindLabel","name",3,"ngModel","placeholder","items","ngModelChange","change","input"],[3,"searchable","ngModel","placeholder","ngModelChange","change","input"],["value","critical"],["value","major"],["value","minor"],["value","warning"],["value","info"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["type","checkbox","name","alarm_name",3,"ngModel","disabled","click","ngModelChange"],[1,"text-break"]],template:function(a,o){1&a&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"input",3,4),m.NdJ("ngModelChange",function(a){return o.searchAlarm=a}),m.qZA(),m.YNc(5,j,2,0,"span",5),m.qZA(),m.qZA(),m.YNc(6,U,4,2,"div",6),m.YNc(7,V,4,2,"div",7),m.TgZ(8,"div",8),m.YNc(9,Q,2,3,"div",9),m.qZA(),m.TgZ(10,"div",10),m.YNc(11,L,12,8,"div",9),m.qZA(),m.qZA(),m.YNc(12,H,7,1,"div",11),m.TgZ(13,"div",12),m.TgZ(14,"table",13),m.TgZ(15,"thead"),m.TgZ(16,"tr"),m.TgZ(17,"th",14),m.TgZ(18,"div",15),m.TgZ(19,"input",16,17),m.NdJ("click",function(a){return o.checkUncheckAll(null==o.alarmData?null:o.alarmData.tableType,a)}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"th",14),m._uU(22),m.qZA(),m.TgZ(23,"th",14),m._uU(24),m.qZA(),m.TgZ(25,"th",14),m._uU(26),m.qZA(),m.TgZ(27,"th",14),m._uU(28),m.qZA(),m.TgZ(29,"th",14),m._uU(30),m.qZA(),m.TgZ(31,"th",14),m._uU(32),m.qZA(),m.TgZ(33,"th",14),m._uU(34),m.qZA(),m.TgZ(35,"th",14),m._uU(36),m.qZA(),m.qZA(),m.qZA(),m.TgZ(37,"tbody"),m.YNc(38,R,20,10,"tr",18),m.qZA(),m.qZA(),m.qZA()),2&a&&(m.xp6(3),m.s9C("placeholder",(o.alarmData&&o.alarmData.searchPlaceHolder?o.language[o.alarmData.searchPlaceHolder]:o.alarmData&&o.alarmData.searchPlaceHolder?o.alarmData.searchPlaceHolder:"")||(o.alarmData&&o.alarmData.searchPlaceHolder?o.alarmData.searchPlaceHolder:"")),m.Q6J("ngModel",o.searchAlarm),m.xp6(2),m.Q6J("ngIf",o.searchAlarm&&o.searchAlarm.length>0),m.xp6(1),m.Q6J("ngIf","non-monitored"==(null==o.alarmData?null:o.alarmData.tableType)),m.xp6(1),m.Q6J("ngIf","monitored"==(null==o.alarmData?null:o.alarmData.tableType)),m.xp6(2),m.Q6J("ngIf","individual"==(null==o.alarmData?null:o.alarmData.table)||"monitoredIndividual"==(null==o.alarmData?null:o.alarmData.table)),m.xp6(2),m.Q6J("ngIf","individual"==(null==o.alarmData?null:o.alarmData.table)||"monitoredIndividual"==(null==o.alarmData?null:o.alarmData.table)),m.xp6(1),m.Q6J("ngIf",!o.canShowTableBody),m.xp6(2),m.Q6J("ngClass",m.VKq(21,G,!o.canShowTableBody))("dtTrigger",o.dtTrigger)("dtOptions",o.dtOptions),m.xp6(5),m.Q6J("disabled",o.alarmData&&o.alarmData.allSelected||o.alarmData&&o.alarmData.data&&0==o.alarmData.data.length),m.xp6(3),m.Oqu(o.language["Alarm Name"]),m.xp6(2),m.Oqu(o.language.Category),m.xp6(2),m.Oqu(o.language["Group Name"]),m.xp6(2),m.Oqu(o.language["Number of Alarms"]),m.xp6(2),m.Oqu(o.language.Severity),m.xp6(2),m.Oqu(o.language["Alarm Id"]),m.xp6(2),m.Oqu(o.language["Alarm Rule Id"]),m.xp6(2),m.Oqu(o.language["Group Id"]),m.xp6(2),m.Q6J("ngForOf",null==o.alarmData?null:o.alarmData.data))},directives:[p,n.Fj,n.JJ,n.On,i.O5,S.G,i.mk,i.sg,N.w9,N.xv,n.Wl],styles:[".dataTable[_ngcontent-%COMP%]{width:100%!important}.cursor-deft[_ngcontent-%COMP%]{cursor:default}.alarm-table-alt[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:5px!important;padding-bottom:5px!important}  .ng-clear-wrapper{display:block}.custom-clear[_ngcontent-%COMP%]{position:absolute;right:25px;top:7px;z-index:999;cursor:pointer;width:20px;height:20px;text-align:center}.showHideTable[_ngcontent-%COMP%]{visibility:hidden}.search-ccl[_ngcontent-%COMP%]   .custom-clear[_ngcontent-%COMP%]{top:2px;color:gray;font-size:22px}.marg-27[_ngcontent-%COMP%]{margin:27px 0 21px}.transform-180[_ngcontent-%COMP%]{transform:rotate(180deg)}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0;cursor:pointer!important}input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed!important}"]}),a})();const W=["nonMonitoredView"],B=["monitoredView"],$=["deleteModal"];function z(a,o){}function K(a,o){if(1&a&&m.YNc(0,z,0,0,"ng-template",26),2&a){m.oxw();const a=m.MAs(52);m.Q6J("ngTemplateOutlet",a)}}function X(a,o){}function aa(a,o){if(1&a&&m.YNc(0,X,0,0,"ng-template",26),2&a){m.oxw();const a=m.MAs(50);m.Q6J("ngTemplateOutlet",a)}}function oa(a,o){if(1&a&&(m.TgZ(0,"div",27),m.TgZ(1,"span"),m._uU(2),m.qZA(),m._UZ(3,"br"),m._UZ(4,"br"),m._UZ(5,"br"),m.TgZ(6,"span"),m._uU(7),m._UZ(8,"br"),m._uU(9),m.qZA(),m.qZA()),2&a){const a=m.oxw();m.xp6(2),m.hij(" ",a.language["There are no monitored alarms"],""),m.xp6(5),m.hij(" ",a.language["From the left panel, select and add"]," "),m.xp6(2),m.hij(" ",a.language["the alarms you wish to monitor"],"")}}function ta(a,o){if(1&a&&(m.TgZ(0,"div",27),m.TgZ(1,"span"),m._uU(2),m.qZA(),m._UZ(3,"br"),m._UZ(4,"br"),m._UZ(5,"br"),m.qZA()),2&a){const a=m.oxw();m.xp6(2),m.hij(" ",a.language["There are no alarms"],"")}}function ia(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",28),m.TgZ(1,"h4",29),m._uU(2,"Remove"),m.qZA(),m.TgZ(3,"button",30),m.NdJ("click",function(){return m.CHM(a),m.oxw().close("No")}),m._UZ(4,"span",31),m.qZA(),m.qZA(),m.TgZ(5,"div",32),m._UZ(6,"p",33),m.qZA(),m.TgZ(7,"div",34),m.TgZ(8,"button",35),m.NdJ("click",function(){return m.CHM(a),m.oxw().close("No")}),m._uU(9),m.qZA(),m.TgZ(10,"button",36),m.NdJ("click",function(){return m.CHM(a),m.oxw().doRemoveAlarms()}),m._uU(11),m.qZA(),m.qZA()}if(2&a){const a=m.oxw();m.xp6(6),m.Q6J("innerHtml",a.removeName,m.oJD),m.xp6(3),m.hij(" ",a.language.no," "),m.xp6(2),m.hij(" ",a.language.Yes," ")}}const ea=function(a){return{active:a}};let la=(()=>{class a{constructor(a,o,t){this.translateService=a,this.modalService=o,this.dialogService=t,this._workFlowAlarmsData={},this.alarmsActiveTab="individual_alarm",this.selectedAlarmsActiveTab="selected_individual_alarms",this.baseUrl=`${s.N.API_BASE_URL}analytics-engine/`,this.getWorkFlowAPIEmitter=new m.vpe,this.errorMsg=new m.vpe,this.canShowTableBodySubject=new r.xQ}set workFlowAlarmsData(a){this._workFlowAlarmsData=a}get workFlowAlarmsData(){return this._workFlowAlarmsData}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(a=>{this.language=a}),this.workFlowAlarmsData.alarmsFormEntered||(this.workFlowAlarmsData.individualAlarmData={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.data?this.workFlowAlarmsData.individualAlarmData.data:[],cols:["Alarm Name","Category"],table:"individual",tableType:"non-monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new r.xQ,searchCategory:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.searchCategory?this.workFlowAlarmsData.individualAlarmData.searchCategory:void 0,searchSeverity:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.searchSeverity?this.workFlowAlarmsData.individualAlarmData.searchSeverity:void 0,prevSearchCategory:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.prevSearchCategory?this.workFlowAlarmsData.individualAlarmData.prevSearchCategory:void 0,prevSearchSeverity:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity?this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity:void 0,categoryOrSeverity:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity?this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity:void 0,searchPlaceHolder:"Search Alarms",searchCategoryPlaceHolder:"Search Category",searchSeverityPlaceHolder:"Search Severity",severityList:[{id:"critical",name:"Critical"},{id:"major",name:"Major"},{id:"minor",name:"Minor"},{id:"warning",name:"Warning"},{id:"info",name:"Info"}],categoryList:this.workFlowAlarmsData&&this.workFlowAlarmsData.individualAlarmData&&this.workFlowAlarmsData.individualAlarmData.categoryList?this.workFlowAlarmsData.individualAlarmData.categoryList:[],columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,4,6,7,8]},{type:"severity-order",targets:-1}],order:[5,"asc"]},this.workFlowAlarmsData.groupAlarmData={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.groupAlarmData&&this.workFlowAlarmsData.groupAlarmData.data?this.workFlowAlarmsData.groupAlarmData.data:[],cols:["Alarm Name"],table:"group",tableType:"non-monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new r.xQ,searchPlaceHolder:"Search Alarm Category Subgroups",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[1,2,5,6,7,8]}],order:[3,"asc"]},this.workFlowAlarmsData.transformAlarmData={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.transformAlarmData&&this.workFlowAlarmsData.transformAlarmData.data?this.workFlowAlarmsData.transformAlarmData.data:"",cols:["Alarm Name"],table:"transform",tableType:"non-monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new r.xQ,searchPlaceHolder:"Search Transformed Alarms",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,2,4,5,6,7,8]}],order:[1,"asc"]},this.workFlowAlarmsData.monitoredIndividualAlarm={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredIndividualAlarm&&this.workFlowAlarmsData.monitoredIndividualAlarm.data?this.workFlowAlarmsData.monitoredIndividualAlarm.data:[],cols:["Alarm Name","Category"],table:"monitoredIndividual",tableType:"monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new r.xQ,searchCategory:void 0,searchSeverity:void 0,searchPlaceHolder:"Search Alarms",searchCategoryPlaceHolder:"Search Category",searchSeverityPlaceHolder:"Search Severity",severityList:[{id:"critical",name:"Critical"},{id:"major",name:"Major"},{id:"minor",name:"Minor"},{id:"warning",name:"Warning"},{id:"info",name:"Info"}],categoryList:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredIndividualAlarm&&this.workFlowAlarmsData.monitoredIndividualAlarm.categoryList?this.workFlowAlarmsData.monitoredIndividualAlarm.categoryList:[],columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,4,6,7,8]},{type:"severity-order",targets:-1}],order:[5,"asc"]},this.workFlowAlarmsData.monitoredGroupAlarm={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredGroupAlarm&&this.workFlowAlarmsData.monitoredGroupAlarm.data?this.workFlowAlarmsData.monitoredGroupAlarm.data:[],cols:["Alarm Name"],table:"monitoredGroup",tableType:"monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new r.xQ,searchPlaceHolder:"Search Alarm Category Subgroups",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[1,2,5,6,7,8]}],order:[3,"asc"]},this.workFlowAlarmsData.monitoredTransformAlarm={data:this.workFlowAlarmsData&&this.workFlowAlarmsData.monitoredTransformAlarm&&this.workFlowAlarmsData.monitoredTransformAlarm.data?this.workFlowAlarmsData.monitoredTransformAlarm.data:[],cols:["Alarm Name"],table:"monitoredTransform",tableType:"monitored",allSelected:!1,renderOnce:!0,rerenderSubject:new r.xQ,searchPlaceHolder:"Search Transformed Alarms",columnDefs:[{targets:0,orderable:!1},{visible:!1,targets:[3,2,4,5,6,7,8]}],order:[1,"asc"]},this.workFlowAlarmsData.alarmsFormEntered=!0),this.callMultipleAPI()}callMultipleAPI(){return(0,l.mG)(this,void 0,void 0,function*(){this.getWorkFlowAPIEmitter.emit(!0)})}removeDuplicate(a,o){return a.reduce(function(a,t){return 0==a.filter(a=>a[o]===t[o]).length&&a.push(t),a},[])}addSelectedIndividualAlarmList(){let a=JSON.parse(JSON.stringify(this.workFlowAlarmsData.individualAlarmData.data.filter(a=>1==a.isChecked)));this.workFlowAlarmsData.monitoredIndividualAlarm.data=[...this.workFlowAlarmsData.monitoredIndividualAlarm.data,...a.map(a=>(delete a.isChecked,delete a.disabled,delete a.selectedAlready,a))],this.workFlowAlarmsData.monitoredIndividualAlarm.data=this.removeDuplicate(this.workFlowAlarmsData.monitoredIndividualAlarm.data,"alarm_id"),this.workFlowAlarmsData.individualAlarmData.data.forEach(a=>{1==a.isChecked&&(a.disabled=!0,a.selectedAlready=!0)}),this.workFlowAlarmsData.monitoredIndividualAlarm=Object.assign({},this.workFlowAlarmsData.monitoredIndividualAlarm),this.workFlowAlarmsData.monitoredIndividualAlarm.data=[...this.workFlowAlarmsData.monitoredIndividualAlarm.data],this.workFlowAlarmsData.individualAlarmData=Object.assign({},this.workFlowAlarmsData.individualAlarmData),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.monitoredIndividualAlarm.rerenderSubject.next(!0),this.workFlowAlarmsData.individualAlarmData.rerenderSubject.next(!0)}addSelectedGroupAlarmList(){let a=JSON.parse(JSON.stringify(this.workFlowAlarmsData.groupAlarmData.data.filter(a=>1==a.isChecked)));this.workFlowAlarmsData.monitoredGroupAlarm.data=[...this.workFlowAlarmsData.monitoredGroupAlarm.data,...a.map(a=>(delete a.isChecked,delete a.disabled,delete a.selectedAlready,a))],this.workFlowAlarmsData.monitoredGroupAlarm.data=this.removeDuplicate(this.workFlowAlarmsData.monitoredGroupAlarm.data,"group_id"),this.workFlowAlarmsData.groupAlarmData.data.forEach(a=>{1==a.isChecked&&(a.disabled=!0,a.selectedAlready=!0)}),this.workFlowAlarmsData.monitoredGroupAlarm=Object.assign({},this.workFlowAlarmsData.monitoredGroupAlarm),this.workFlowAlarmsData.monitoredGroupAlarm.data=[...this.workFlowAlarmsData.monitoredGroupAlarm.data],this.workFlowAlarmsData.groupAlarmData=Object.assign({},this.workFlowAlarmsData.groupAlarmData),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.monitoredGroupAlarm.rerenderSubject.next(!0),this.workFlowAlarmsData.groupAlarmData.rerenderSubject.next(!0)}addSelectedTransformAlarmList(){let a=JSON.parse(JSON.stringify(this.workFlowAlarmsData.transformAlarmData.data.filter(a=>1==a.isChecked)));this.workFlowAlarmsData.monitoredTransformAlarm.data=[...this.workFlowAlarmsData.monitoredTransformAlarm.data,...a.map(a=>(delete a.isChecked,delete a.disabled,delete a.selectedAlready,a))],this.workFlowAlarmsData.monitoredTransformAlarm.data=this.removeDuplicate(this.workFlowAlarmsData.monitoredTransformAlarm.data,"alarmRuleId"),this.workFlowAlarmsData.transformAlarmData.data.forEach(a=>{1==a.isChecked&&(a.disabled=!0,a.selectedAlready=!0)}),this.workFlowAlarmsData.monitoredTransformAlarm=Object.assign({},this.workFlowAlarmsData.monitoredTransformAlarm),this.workFlowAlarmsData.monitoredTransformAlarm.data=[...this.workFlowAlarmsData.monitoredTransformAlarm.data],this.workFlowAlarmsData.transformAlarmData=Object.assign({},this.workFlowAlarmsData.transformAlarmData),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.monitoredTransformAlarm.rerenderSubject.next(!0),this.workFlowAlarmsData.transformAlarmData.rerenderSubject.next(!0)}removeSelectedIndividualAlarmList(){this.workFlowAlarmsData.individualAlarmData.data.forEach(a=>{!a.selectedAlready&&a.isChecked&&(a.isChecked=!1,a.checkedTemporarily=!0)}),this.workFlowAlarmsData.monitoredIndividualAlarm.data.forEach(a=>{if(a.isChecked){let o=this.workFlowAlarmsData.individualAlarmData.data.filter(o=>o.alarm_id==a.alarm_id);o&&o.length>0&&o.forEach(a=>{a.disabled=!1,a.isChecked=!1,a.selectedAlready=!1})}}),this.workFlowAlarmsData.monitoredIndividualAlarm.data=this.workFlowAlarmsData.individualAlarmData.data.filter(a=>1==a.isChecked),this.workFlowAlarmsData.monitoredIndividualAlarm.data=JSON.parse(JSON.stringify(this.workFlowAlarmsData.monitoredIndividualAlarm.data)),this.workFlowAlarmsData.monitoredIndividualAlarm.data.forEach(a=>{a.disabled=!1,a.isChecked=!1,a.selectedAlready=!1}),this.workFlowAlarmsData.individualAlarmData.data.forEach(a=>{a.checkedTemporarily&&(a.isChecked=!0,a.checkedTemporarily=!1)}),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.individualAlarmData=Object.assign({},this.workFlowAlarmsData.individualAlarmData),this.workFlowAlarmsData.individualAlarmData.data=[...this.workFlowAlarmsData.individualAlarmData.data],this.workFlowAlarmsData.monitoredIndividualAlarm=Object.assign({},this.workFlowAlarmsData.monitoredIndividualAlarm),this.workFlowAlarmsData.monitoredIndividualAlarm.data=[...this.workFlowAlarmsData.monitoredIndividualAlarm.data],this.workFlowAlarmsData.individualAlarmData.rerenderSubject.next(!0),this.workFlowAlarmsData.monitoredIndividualAlarm.rerenderSubject.next(!0)}removeSelectedGroupAlarmList(){this.workFlowAlarmsData.groupAlarmData.data.forEach(a=>{!a.selectedAlready&&a.isChecked&&(a.isChecked=!1,a.checkedTemporarily=!0)}),this.workFlowAlarmsData.monitoredGroupAlarm.data.forEach(a=>{if(a.isChecked){let o=this.workFlowAlarmsData.groupAlarmData.data.find(o=>o.group_id==a.group_id);o&&(o.disabled=!1,o.selectedAlready=!1,o.isChecked=!1)}}),this.workFlowAlarmsData.monitoredGroupAlarm.data=this.workFlowAlarmsData.groupAlarmData.data.filter(a=>1==a.isChecked),this.workFlowAlarmsData.monitoredGroupAlarm.data=JSON.parse(JSON.stringify(this.workFlowAlarmsData.monitoredGroupAlarm.data)),this.workFlowAlarmsData.monitoredGroupAlarm.data.forEach(a=>{a.disabled=!1,a.selectedAlready=!1,a.isChecked=!1}),this.workFlowAlarmsData.groupAlarmData.data.forEach(a=>{a.checkedTemporarily&&(a.isChecked=!0,a.checkedTemporarily=!1)}),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.groupAlarmData=Object.assign({},this.workFlowAlarmsData.groupAlarmData),this.workFlowAlarmsData.groupAlarmData.data=[...this.workFlowAlarmsData.groupAlarmData.data],this.workFlowAlarmsData.monitoredGroupAlarm=Object.assign({},this.workFlowAlarmsData.monitoredGroupAlarm),this.workFlowAlarmsData.monitoredGroupAlarm.data=[...this.workFlowAlarmsData.monitoredGroupAlarm.data],this.workFlowAlarmsData.groupAlarmData.rerenderSubject.next(!0),this.workFlowAlarmsData.monitoredGroupAlarm.rerenderSubject.next(!0)}removeSelectedTransformAlarmList(){this.workFlowAlarmsData.transformAlarmData.data.forEach(a=>{!a.selectedAlready&&a.isChecked&&(a.isChecked=!1,a.checkedTemporarily=!0)}),this.workFlowAlarmsData.monitoredTransformAlarm.data.forEach(a=>{if(a.isChecked){let o=this.workFlowAlarmsData.transformAlarmData.data.find(o=>o.alarmRuleId==a.alarmRuleId);o&&(o.disabled=!1,o.isChecked=!1,o.selectedAlready=!1)}}),this.workFlowAlarmsData.monitoredTransformAlarm.data=this.workFlowAlarmsData.transformAlarmData.data.filter(a=>1==a.isChecked),this.workFlowAlarmsData.monitoredTransformAlarm.data=JSON.parse(JSON.stringify(this.workFlowAlarmsData.monitoredTransformAlarm.data)),this.workFlowAlarmsData.monitoredTransformAlarm.data.forEach(a=>{a.disabled=!1,a.isChecked=!1,a.selectedAlready=!1}),this.workFlowAlarmsData.transformAlarmData.data.forEach(a=>{a.checkedTemporarily&&(a.isChecked=!0,a.checkedTemporarily=!1)}),this.calculateTotalMonitoredAlarms(),this.workFlowAlarmsData.transformAlarmData=Object.assign({},this.workFlowAlarmsData.transformAlarmData),this.workFlowAlarmsData.transformAlarmData.data=[...this.workFlowAlarmsData.transformAlarmData.data],this.workFlowAlarmsData.monitoredTransformAlarm=Object.assign({},this.workFlowAlarmsData.monitoredTransformAlarm),this.workFlowAlarmsData.monitoredTransformAlarm.data=[...this.workFlowAlarmsData.monitoredTransformAlarm.data],this.workFlowAlarmsData.transformAlarmData.rerenderSubject.next(!0),this.workFlowAlarmsData.monitoredTransformAlarm.rerenderSubject.next(!0)}calculateTotalMonitoredAlarms(){let a=this.workFlowAlarmsData.monitoredGroupAlarm.data.reduce((a,o)=>a+Number(o.no_of_alarms),0);this.workFlowAlarmsData.totMonitoredAlarms=this.workFlowAlarmsData.monitoredIndividualAlarm.data.length+a+this.workFlowAlarmsData.monitoredTransformAlarm.data.length}callAddRemove(a){"group"==a.table&&"add"==a.mode?(this.selectedAlarmsActiveTab="selected_alarm_groups",this.addSelectedGroupAlarmList()):"transform"==a.table&&"add"==a.mode?(this.selectedAlarmsActiveTab="selected_transform_alarms",this.addSelectedTransformAlarmList()):"individual"==a.table&&"add"==a.mode?(this.selectedAlarmsActiveTab="selected_individual_alarms",this.checkrulesExist()):"monitoredGroup"==a.table&&"remove"==a.mode?(this.alarmsActiveTab="alarm_group",this.removeSelectedGroupAlarmList()):"monitoredTransform"==a.table&&"remove"==a.mode?(this.alarmsActiveTab="transform_alarm",this.removeSelectedTransformAlarmList()):"monitoredIndividual"==a.table&&"remove"==a.mode&&(this.alarmsActiveTab="individual_alarm",this.removeSelectedIndividualAlarmList())}checkrulesExist(){let a=this.workFlowAlarmsData.individualAlarmData.data.filter(a=>a.alarm_name.includes("multiple-onts-down")&&"PON transformed"==a.alarm_category&&1==a.isChecked);if(0==a.length)this.errorMsg.emit(!1),this.addSelectedIndividualAlarmList();else{let o=!1,t="";if(a.forEach(a=>{a.rulesnotexist&&(t+=this.language.rulesNotExist(a.alarm_name),o=!0)}),o)return this.errorMsg.emit(t),this.canShowTableBodySubject.next(!0),!1;this.errorMsg.emit(!1),this.addSelectedIndividualAlarmList()}}checkCategorySeverity(){let a,o=!1;!this.workFlowAlarmsData.individualAlarmData.prevSearchCategory&&!this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity&&this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory||!this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity&&!this.workFlowAlarmsData.individualAlarmData.prevSearchCategory&&this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity||this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory&&this.workFlowAlarmsData.individualAlarmData.prevSearchCategory==this.workFlowAlarmsData.individualAlarmData.searchCategory||this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity&&this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity==this.workFlowAlarmsData.individualAlarmData.searchSeverity?o=!0:"CATEGORY"==this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity&&this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity?a=`Are you sure you want to remove the Monitored Alarms in Category <b> (${this.workFlowAlarmsData.individualAlarmData.prevSearchCategory}-${this.workFlowAlarmsData.monitoredIndividualAlarm.data.length}) </b>?`:"SEVERITY"==this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity&&this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory?a=`Are you sure you want to remove the Monitored Alarms in Severity <b> (${this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.charAt(0).toUpperCase()+this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.slice(1)}-${this.workFlowAlarmsData.monitoredIndividualAlarm.data.length}) </b> ?`:this.workFlowAlarmsData.individualAlarmData.searchCategory&&""!=this.workFlowAlarmsData.individualAlarmData.searchCategory&&this.workFlowAlarmsData.individualAlarmData.prevSearchCategory!=this.workFlowAlarmsData.individualAlarmData.searchCategory?a=`Are you sure you want to remove the Monitored Alarms in Category <b> (${this.workFlowAlarmsData.individualAlarmData.prevSearchCategory}-${this.workFlowAlarmsData.monitoredIndividualAlarm.data.length}) </b> ?`:this.workFlowAlarmsData.individualAlarmData.searchSeverity&&""!=this.workFlowAlarmsData.individualAlarmData.searchSeverity&&this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity!=this.workFlowAlarmsData.individualAlarmData.searchSeverity&&(a=`Are you sure you want to remove the Monitored Alarms in Severity <b> (${this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.charAt(0).toUpperCase()+this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity.slice(1)}-${this.workFlowAlarmsData.monitoredIndividualAlarm.data.length}) </b> ?`),o?(this.workFlowAlarmsData.individualAlarmData.searchCategory&&(this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity=void 0,this.workFlowAlarmsData.individualAlarmData.prevSearchCategory=this.workFlowAlarmsData.individualAlarmData.searchCategory,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="CATEGORY"),this.workFlowAlarmsData.individualAlarmData.searchSeverity&&(this.workFlowAlarmsData.individualAlarmData.prevSearchCategory=void 0,this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity=this.workFlowAlarmsData.individualAlarmData.searchSeverity,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="SEVERITY"),this.addSelectedIndividualAlarmList()):this.removeAlarms(a)}changeNavPills(a,o,t){t.preventDefault(),"non-monitored"==o?this.alarmsActiveTab=a:this.selectedAlarmsActiveTab=a}removeAlarms(a){this.alarmRemoveError="",this.removeName=a,this.modalRef&&this.close(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}close(a){this.modalLoader=!1,this.modalService.dismissAll(),this.modalRef.close(),"No"==a&&this.canShowTableBodySubject.next(!0)}closeAlert(){this.canShowTableBodySubject.next(!0),this.alarmRemoveError=""}doRemoveAlarms(){this.workFlowAlarmsData.individualAlarmData.searchCategory&&(this.workFlowAlarmsData.individualAlarmData.prevSearchCategory=this.workFlowAlarmsData.individualAlarmData.searchCategory,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="CATEGORY"),this.workFlowAlarmsData.individualAlarmData.searchSeverity&&(this.workFlowAlarmsData.individualAlarmData.prevSearchSeverity=this.workFlowAlarmsData.individualAlarmData.searchSeverity,this.workFlowAlarmsData.individualAlarmData.categoryOrSeverity="SEVERITY"),this.workFlowAlarmsData.individualAlarmData.data.forEach(a=>{1==a.selectedAlready&&(a.disabled=!1,a.selectedAlready=!1,a.isChecked=!1)}),this.workFlowAlarmsData.monitoredIndividualAlarm.data=[],this.addSelectedIndividualAlarmList(),this.close()}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return a.\u0275fac=function(o){return new(o||a)(m.Y36(u.s),m.Y36(f.FF),m.Y36(f.FF))},a.\u0275cmp=m.Xpm({type:a,selectors:[["app-workflow-alarms"]],viewQuery:function(a,o){if(1&a&&(m.Gf(W,7),m.Gf(B,7),m.Gf($,7)),2&a){let a;m.iGM(a=m.CRH())&&(o.nonMonitoredView=a.first),m.iGM(a=m.CRH())&&(o.monitoredView=a.first),m.iGM(a=m.CRH())&&(o.deleteModal=a.first)}},inputs:{workFlowAlarmsData:"workFlowAlarmsData"},outputs:{getWorkFlowAPIEmitter:"getWorkFlowAPIEmitter",errorMsg:"errorMsg"},decls:55,vars:26,consts:[[1,"container"],[1,"row","justify-content-between"],[1,"col-md-6","pl-0"],[1,"row"],[1,"col-md-12"],[1,"heading-4"],[1,"Lists"],[1,"box-list"],[1,"alarm-menu-list"],[1,"nav","nav-pills"],["nonMonitoredView",""],["data-toggle","pill","href","#individual_alarms",3,"ngClass","click"],[1,"tab-content"],["id","individual_alarms",1,"tab-pane","alarm-menu-info",3,"ngClass"],[1,"alarm-menu-info"],[3,"alarmData","canShowTableBodyInputSubject","addRemoveAlarmList"],[4,"ngIf"],[1,"col-md-6","pr-0"],[1,"error"],["monitoredView",""],["data-toggle","pill","href","#individual_alarms_selected",3,"ngClass","click"],["id","individual_alarms_selected",1,"tab-pane","alarm-menu-info",3,"ngClass"],[3,"alarmData","addRemoveAlarmList"],["noMonitoredAlarmsTemplate",""],["noAlarmsTemplate",""],["deleteModal",""],[3,"ngTemplateOutlet"],[1,"text-center",2,"color","#808080","margin-top","100px"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHtml"],[1,"modal-footer"],["type","button",1,"btn-default","btn-dft",3,"click"],["type","button",1,"btn","btn-primary",2,"margin-left","3px",3,"click"]],template:function(a,o){1&a&&(m.TgZ(0,"section"),m.TgZ(1,"div",0),m.TgZ(2,"div",1),m.TgZ(3,"div",2),m.TgZ(4,"div",3),m.TgZ(5,"div",4),m.TgZ(6,"div",5),m._uU(7),m.qZA(),m.TgZ(8,"span",6),m._uU(9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"div",3),m.TgZ(11,"div",4),m.TgZ(12,"div",7),m.TgZ(13,"div",8),m.TgZ(14,"ul",9,10),m.TgZ(16,"li"),m.TgZ(17,"a",11),m.NdJ("click",function(a){return o.changeNavPills("individual_alarm","non-monitored",a)}),m._uU(18),m.qZA(),m.qZA(),m.qZA(),m.TgZ(19,"div",12),m.TgZ(20,"div",13),m.TgZ(21,"div",14),m.TgZ(22,"app-workflow-datatable",15),m.NdJ("addRemoveAlarmList",function(a){return o.callAddRemove(a)}),m.qZA(),m.qZA(),m.YNc(23,K,1,1,void 0,16),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(24,"div",17),m.TgZ(25,"div",3),m.TgZ(26,"div",4),m.TgZ(27,"div",5),m._uU(28),m.TgZ(29,"span",18),m._uU(30,"*"),m.qZA(),m._uU(31),m.ALo(32,"number"),m.qZA(),m.TgZ(33,"span",6),m._uU(34),m.qZA(),m.qZA(),m.qZA(),m.TgZ(35,"div",3),m.TgZ(36,"div",4),m.TgZ(37,"div",7),m.TgZ(38,"div",8),m.TgZ(39,"ul",9,19),m.TgZ(41,"li"),m.TgZ(42,"a",20),m.NdJ("click",function(a){return o.changeNavPills("selected_individual_alarms","monitored",a)}),m._uU(43),m.qZA(),m.qZA(),m.qZA(),m.TgZ(44,"div",12),m.TgZ(45,"div",21),m.TgZ(46,"div",14),m.TgZ(47,"app-workflow-datatable",22),m.NdJ("addRemoveAlarmList",function(a){return o.callAddRemove(a)}),m.qZA(),m.qZA(),m.YNc(48,aa,1,1,void 0,16),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(49,oa,10,3,"ng-template",null,23,m.W1O),m.YNc(51,ta,6,1,"ng-template",null,24,m.W1O),m.YNc(53,ia,12,3,"ng-template",null,25,m.W1O),m.qZA()),2&a&&(m.xp6(7),m.Oqu(o.language["All Alarms"]),m.xp6(2),m.hij(" ",o.language["Select and add the alarms you wish to monitor"]," "),m.xp6(8),m.Q6J("ngClass",m.VKq(18,ea,"individual_alarm"==o.alarmsActiveTab)),m.xp6(1),m.Oqu(o.language.Alarms),m.xp6(2),m.Q6J("ngClass",m.VKq(20,ea,"individual_alarm"==o.alarmsActiveTab)),m.xp6(2),m.Q6J("alarmData",o.workFlowAlarmsData.individualAlarmData)("canShowTableBodyInputSubject",o.canShowTableBodySubject),m.xp6(1),m.Q6J("ngIf",(null==o.workFlowAlarmsData||null==o.workFlowAlarmsData.individualAlarmData||null==o.workFlowAlarmsData.individualAlarmData.data?null:o.workFlowAlarmsData.individualAlarmData.data.length)<=0),m.xp6(5),m.hij(" ",o.language["Monitored Alarms"],""),m.xp6(3),m.hij(" (",m.lcZ(32,16,o.workFlowAlarmsData.totMonitoredAlarms),") "),m.xp6(3),m.hij(" ",o.language["The following alarms will be monitored by this notification schedule"]," "),m.xp6(8),m.Q6J("ngClass",m.VKq(22,ea,"selected_individual_alarms"==o.selectedAlarmsActiveTab)),m.xp6(1),m.Oqu(o.language.Alarms),m.xp6(2),m.Q6J("ngClass",m.VKq(24,ea,"selected_individual_alarms"==o.selectedAlarmsActiveTab)),m.xp6(2),m.Q6J("alarmData",o.workFlowAlarmsData.monitoredIndividualAlarm),m.xp6(1),m.Q6J("ngIf",(null==o.workFlowAlarmsData||null==o.workFlowAlarmsData.monitoredIndividualAlarm||null==o.workFlowAlarmsData.monitoredIndividualAlarm.data?null:o.workFlowAlarmsData.monitoredIndividualAlarm.data.length)<=0))},directives:[i.mk,Y,i.O5,i.tP],pipes:[i.JJ],styles:[".heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px}.Lists[_ngcontent-%COMP%]{font-size:15px;font-style:normal;font-weight:400;line-height:24px;letter-spacing:0em;text-align:left;color:gray}.box-list[_ngcontent-%COMP%]{border:1px solid #EBEAEF;box-sizing:border-box;box-shadow:2px 3px 43px -12px #4d4d4d26;border-radius:24px;padding:26px;height:940px;overflow-y:hidden;margin-top:16px;margin-bottom:24px}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;position:relative;border-radius:26px;background-color:#edf5ff;width:-moz-max-content;width:max-content}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;min-width:110px;text-align:center}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:4px 12px 4px 13px;color:#333;font-size:14px;line-height:18px;text-decoration:none}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#0054b2;color:#fff;border-radius:26px}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#0054b2;color:#fff;border-radius:26px}.alarm-menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.alarm-menu-info[_ngcontent-%COMP%]{width:100%}.add-search-icon[_ngcontent-%COMP%]{background-color:#0279ff;width:40px;height:100%;border-radius:25px;position:absolute;right:15px;top:0px;padding:7px}  .dataTables_length{display:none!important}  .dataTables_filter{display:none!important}"]}),a})();var na=t(40205),ra=t(88002),sa=t(5304),da=t(55533),ca=t(18638);const ma=function(a){return{"mr-3":a}};function ua(a,o){if(1&a&&(m.ynx(0),m.TgZ(1,"div",11),m._UZ(2,"input",12),m.TgZ(3,"label",13),m._uU(4),m.qZA(),m.qZA(),m.BQk()),2&a){const a=o.$implicit,t=m.oxw();m.xp6(1),m.Q6J("ngClass",m.VKq(5,ma,"immediately"==a.name)),m.xp6(1),m.s9C("id",a.value),m.s9C("value",a.value),m.xp6(1),m.s9C("for",a.value),m.xp6(1),m.hij(" ",t.language[a.name]," ")}}function wa(a,o){if(1&a&&(m.TgZ(0,"div",40),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["Please enter value less than or equal to"]," 10000. ")}}function ha(a,o){if(1&a&&(m.TgZ(0,"div",40),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["Please enter value greater than or equal to"]," 1. ")}}function ga(a,o){if(1&a&&(m.TgZ(0,"div",40),m.TgZ(1,"p",41),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}function va(a,o){if(1&a&&(m.TgZ(0,"div",40),m.TgZ(1,"p",41),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}function Da(a,o){if(1&a&&(m.TgZ(0,"div",42),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["Please enter value less than or equal to"]," 120. ")}}function ka(a,o){if(1&a&&(m.TgZ(0,"div",42),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["Please enter value greater than or equal to"]," 1. ")}}function fa(a,o){if(1&a&&(m.TgZ(0,"div",40),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["Please enter value less than or equal to"]," 240. ")}}function pa(a,o){if(1&a&&(m.TgZ(0,"div",40),m._uU(1),m.qZA()),2&a){const a=m.oxw(2);m.xp6(1),m.hij(" ",a.language["Please enter value greater than or equal to"]," 0. ")}}function Fa(a,o){if(1&a&&(m.TgZ(0,"div",40),m.TgZ(1,"p",41),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}function Aa(a,o){}function Ca(a,o){if(1&a&&(m.TgZ(0,"div",42),m.TgZ(1,"p"),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}const ya=function(a){return{"mt-3":a}},ba=function(){return{width:"100%",height:"36px"}},Ta=function(){return{height:"36px"}};function xa(a,o){if(1&a){const a=m.EpF();m.ynx(0,43),m.TgZ(1,"div",44),m.TgZ(2,"div",45),m.TgZ(3,"div",46),m.TgZ(4,"input",47),m.NdJ("click",function(o){const t=m.CHM(a).index;return m.oxw(2).onCheckExclusionDays(o,t)}),m.qZA(),m.TgZ(5,"label",13),m._uU(6),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"div",48),m.TgZ(8,"p-calendar",49),m.NdJ("input",function(o){const t=m.CHM(a).index;return m.oxw(2).onChangeExclusionTime(o,"dayFrom",t,"input")})("onSelect",function(o){const t=m.CHM(a).index;return m.oxw(2).onChangeExclusionTime(o,"dayFrom",t,"select")}),m.qZA(),m.qZA(),m.TgZ(9,"div",50),m._uU(10),m.qZA(),m.TgZ(11,"div",48),m.TgZ(12,"p-calendar",51),m.NdJ("input",function(o){const t=m.CHM(a).index;return m.oxw(2).onChangeExclusionTime(o,"dayTo",t,"input")})("onSelect",function(o){const t=m.CHM(a).index;return m.oxw(2).onChangeExclusionTime(o,"dayTo",t,"select")}),m.qZA(),m.qZA(),m.qZA(),m.BQk()}if(2&a){const a=o.index,t=m.oxw(2);m.Q6J("formGroupName",a),m.xp6(1),m.Q6J("ngClass",m.VKq(22,ya,0==a)),m.xp6(3),m.s9C("id",null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].value),m.Q6J("readonly","false"==(null==t.workFlowConditionsData||null==t.workFlowConditionsData.workFlowConditionsForm||null==t.workFlowConditionsData.workFlowConditionsForm.controls||null==t.workFlowConditionsData.workFlowConditionsForm.controls.immediate?null:t.workFlowConditionsData.workFlowConditionsForm.controls.immediate.value)),m.xp6(1),m.s9C("for",null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].value),m.xp6(1),m.hij("",t.language[null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].name]," "),m.xp6(2),m.Akn(m.DdM(24,ba)),m.s9C("id",null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].dayFrom),m.Q6J("maxDate",t.workFlowConditionsData.weekDays[a].maxTime)("inputStyle",m.DdM(25,Ta))("autoZIndex",!0)("showIcon",!1),m.xp6(2),m.Oqu(t.language.to),m.xp6(2),m.Akn(m.DdM(26,ba)),m.s9C("id",null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].dayTo),m.Q6J("defaultDate",t.workFlowConditionsData.weekDays[a].defaultTime)("minDate",t.workFlowConditionsData.weekDays[a].minTime)("inputStyle",m.DdM(27,Ta))("autoZIndex",!0)("showIcon",!1)}}const Za=function(a){return{cursornallow:a}},Sa=function(a){return{"diable-div":a}};function _a(a,o){if(1&a){const a=m.EpF();m.ynx(0),m.TgZ(1,"div",14),m.TgZ(2,"div",15),m.TgZ(3,"div",16),m._uU(4),m.TgZ(5,"span",17),m._uU(6,"*"),m.qZA(),m.qZA(),m._UZ(7,"div",18),m.TgZ(8,"div",19),m.TgZ(9,"div",20),m.TgZ(10,"div",21),m.TgZ(11,"input",22),m.NdJ("keyup",function(o){return m.CHM(a),m.oxw().enforceMinMax(o,"raiseThreshold")})("keydown",function(o){return m.CHM(a),m.oxw().avoidInvalidValues(o)}),m.qZA(),m.qZA(),m.TgZ(12,"label",23),m._uU(13),m.qZA(),m.YNc(14,wa,2,1,"div",24),m.YNc(15,ha,2,1,"div",24),m.YNc(16,ga,3,1,"div",24),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",15),m.TgZ(18,"div",16),m._uU(19),m.TgZ(20,"span",17),m._uU(21,"*"),m.qZA(),m.qZA(),m._UZ(22,"div",18),m.TgZ(23,"div",19),m.TgZ(24,"div",20),m.TgZ(25,"div",21),m.TgZ(26,"input",25),m.NdJ("keyup",function(o){return m.CHM(a),m.oxw().enforceMinMax(o,"duration")})("keydown",function(o){return m.CHM(a),m.oxw().avoidInvalidValues(o)}),m.qZA(),m.qZA(),m.TgZ(27,"label",26),m._uU(28),m.qZA(),m.YNc(29,va,3,1,"div",24),m.YNc(30,Da,2,1,"div",27),m.YNc(31,ka,2,1,"div",27),m.qZA(),m.qZA(),m.qZA(),m.TgZ(32,"div",15),m.TgZ(33,"div",16),m._uU(34),m.TgZ(35,"span",17),m._uU(36,"*"),m.qZA(),m.qZA(),m._UZ(37,"div",28),m.TgZ(38,"div",19),m.TgZ(39,"div",20),m.TgZ(40,"div",21),m.TgZ(41,"input",29),m.NdJ("keyup",function(o){return m.CHM(a),m.oxw().enforceMinMax(o,"soakTime")})("keydown",function(o){return m.CHM(a),m.oxw().avoidInvalidValues(o)}),m.qZA(),m.qZA(),m.TgZ(42,"label",30),m._uU(43),m.qZA(),m.YNc(44,fa,2,1,"div",24),m.YNc(45,pa,2,1,"div",24),m.YNc(46,Fa,3,1,"div",24),m.qZA(),m.qZA(),m.qZA(),m.TgZ(47,"div",15),m.TgZ(48,"div",16),m._uU(49),m.qZA(),m.TgZ(50,"div",31),m._uU(51),m.qZA(),m.YNc(52,Aa,0,0,"ng-template",32),m.qZA(),m.TgZ(53,"div",33),m.TgZ(54,"div",16),m._uU(55),m.qZA(),m.TgZ(56,"div",34),m._UZ(57,"input",35),m._UZ(58,"label",36),m.qZA(),m.YNc(59,Ca,3,1,"div",27),m.qZA(),m.TgZ(60,"div",15),m.TgZ(61,"div",37),m.TgZ(62,"div",16),m._uU(63),m.qZA(),m.qZA(),m._UZ(64,"div",28),m.ynx(65,38),m.YNc(66,xa,13,28,"ng-container",39),m.BQk(),m.qZA(),m.qZA(),m.BQk()}if(2&a){const a=m.oxw(),o=m.MAs(14);m.xp6(4),m.AsE("",a.language.Alarm," ",a.language["Quantity Threshold"],""),m.xp6(3),m.Q6J("innerHtml",a.language.quantity_threshold_description,m.oJD),m.xp6(4),m.Q6J("min",a.workFlowConditionsData.minRaiseThreshold-1!=0?a.workFlowConditionsData.minRaiseThreshold-1:a.workFlowConditionsData.minRaiseThreshold)("max",1e4),m.xp6(2),m.Oqu(a.language["Alarm(s)"]),m.xp6(1),m.Q6J("ngIf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.max),m.xp6(1),m.Q6J("ngIf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.min),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold?null:a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold?null:a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold||null==a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.required))&&!(null!=a.workFlowConditionsData&&null!=a.workFlowConditionsData.workFlowConditionsForm&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors&&a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.max)&&!(null!=a.workFlowConditionsData&&null!=a.workFlowConditionsData.workFlowConditionsForm&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors&&a.workFlowConditionsData.workFlowConditionsForm.controls.raiseThreshold.errors.min)),m.xp6(3),m.AsE("",a.language.Alarm," ",a.language["Duration Threshold"],""),m.xp6(3),m.Q6J("innerHtml",a.language.time_duration_description,m.oJD),m.xp6(6),m.Oqu(a.language["Minute(s)"]),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration?null:a.workFlowConditionsData.workFlowConditionsForm.controls.duration.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration?null:a.workFlowConditionsData.workFlowConditionsForm.controls.duration.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.required))&&!(null!=a.workFlowConditionsData&&null!=a.workFlowConditionsData.workFlowConditionsForm&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.duration&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors&&a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.max)&&!(null!=a.workFlowConditionsData&&null!=a.workFlowConditionsData.workFlowConditionsForm&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.duration&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors&&a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.min)),m.xp6(1),m.Q6J("ngIf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.max),m.xp6(1),m.Q6J("ngIf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration||null==a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.duration.errors.min),m.xp6(3),m.AsE("",a.language.Alarm," ",a.language["Soak Time"],""),m.xp6(3),m.Q6J("innerHTML",a.language["The duration for which all thresholds must be met in order to trigger this notification"],m.oJD),m.xp6(6),m.Oqu(a.language["Minute(s)"]),m.xp6(1),m.Q6J("ngIf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.max),m.xp6(1),m.Q6J("ngIf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.min),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime?null:a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime?null:a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime||null==a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.required))&&!(null!=a.workFlowConditionsData&&null!=a.workFlowConditionsData.workFlowConditionsForm&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors&&a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.max)&&!(null!=a.workFlowConditionsData&&null!=a.workFlowConditionsData.workFlowConditionsForm&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime&&null!=a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors&&a.workFlowConditionsData.workFlowConditionsForm.controls.soakTime.errors.min)),m.xp6(3),m.Oqu(a.language.Geography),m.xp6(2),m.hij(" ",a.language.immediate_geography_msg," "),m.xp6(1),m.Q6J("ngTemplateOutlet",o),m.xp6(1),m.Q6J("ngClass",m.VKq(35,Za,(null==a.workFlowConditionsData?null:a.workFlowConditionsData.soakTime)>0)),m.xp6(2),m.hij(" ",a.language["Cleared Alarm Notification"]," "),m.xp6(2),m.Q6J("ngClass",m.VKq(37,Sa,(null==a.workFlowConditionsData?null:a.workFlowConditionsData.soakTime)>0)),m.xp6(1),m.Q6J("ngClass",m.VKq(39,Sa,(null==a.workFlowConditionsData?null:a.workFlowConditionsData.soakTime)>0))("innerHTML",a.language.clearedAlarmNotificationLabel,m.oJD),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold?null:a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold?null:a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold||null==a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.clearThreshold.errors.required))),m.xp6(4),m.Oqu(a.language.Exclusions),m.xp6(1),m.Q6J("innerHTML",a.language["Select the days that will not be included in this schedule"],m.oJD),m.xp6(2),m.Q6J("ngForOf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls||null==a.workFlowConditionsData.workFlowConditionsForm.controls.weekDays?null:a.workFlowConditionsData.workFlowConditionsForm.controls.weekDays.controls)}}function Oa(a,o){if(1&a&&m._uU(0),2&a){const a=o.item,t=m.oxw(2);m.hij(" ",t.language[a.name]," ")}}function qa(a,o){if(1&a&&m._uU(0),2&a){const a=o.item,t=m.oxw(2);m.hij(" ",t.language[a.name]," ")}}const Ma=function(a,o){return{"select-day":a,day:o}};function Ia(a,o){if(1&a){const a=m.EpF();m.ynx(0,43),m.TgZ(1,"div",66),m.NdJ("click",function(){const o=m.CHM(a).index,t=m.oxw(3);return t.selectWeeklySchedule(null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[o])}),m.TgZ(2,"span",67),m._uU(3),m.qZA(),m.qZA(),m.BQk()}if(2&a){const a=o.index,t=m.oxw(3);m.Q6J("formGroupName",a),m.xp6(1),m.s9C("id",null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].scheduleWeekly),m.Q6J("ngClass",m.WLB(4,Ma,1==(null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].scheduleWeeklyStatus),0==(null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].scheduleWeeklyStatus))),m.xp6(2),m.hij("",null==t.workFlowConditionsData?null:t.workFlowConditionsData.weekDays[a].scheduleWeekly," ")}}function Pa(a,o){if(1&a&&(m.TgZ(0,"div",65),m.ynx(1,38),m.YNc(2,Ia,4,7,"ng-container",39),m.BQk(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls||null==a.workFlowConditionsData.workFlowConditionsForm.controls.weekDays?null:a.workFlowConditionsData.workFlowConditionsForm.controls.weekDays.controls)}}function Na(a,o){if(1&a){const a=m.EpF();m.ynx(0),m.TgZ(1,"label",68),m._uU(2),m.TgZ(3,"span",17),m._uU(4,"*"),m.qZA(),m.qZA(),m.TgZ(5,"div",69),m.TgZ(6,"input",70),m.NdJ("keyup",function(o){return m.CHM(a),m.oxw(2).enforceMinMax(o,"dayOfMonth")}),m.qZA(),m.qZA(),m.BQk()}if(2&a){const a=m.oxw(2);m.xp6(2),m.Oqu(a.language.Day)}}function Ea(a,o){if(1&a&&(m.TgZ(0,"div",42),m.TgZ(1,"p"),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}function Ja(a,o){}const ja=function(a){return{"w-100":a}};function Ua(a,o){if(1&a&&(m.ynx(0),m.TgZ(1,"div",2),m.TgZ(2,"div",3),m.TgZ(3,"div",52),m._uU(4),m.qZA(),m.TgZ(5,"div",2),m.TgZ(6,"div",15),m.TgZ(7,"label",53),m._uU(8),m.qZA(),m.TgZ(9,"p"),m._uU(10),m.qZA(),m.TgZ(11,"div",54),m.TgZ(12,"ng-select",55),m.YNc(13,Oa,1,1,"ng-template",56),m.YNc(14,qa,1,1,"ng-template",57),m.qZA(),m.qZA(),m.YNc(15,Pa,3,1,"div",58),m.TgZ(16,"div",59),m.TgZ(17,"label",60),m._uU(18),m.qZA(),m.TgZ(19,"div",61),m.YNc(20,Na,7,1,"ng-container",9),m.TgZ(21,"div",62),m._UZ(22,"p-calendar",63),m.qZA(),m.qZA(),m.YNc(23,Ea,3,1,"div",27),m.qZA(),m.qZA(),m.TgZ(24,"div",15),m.TgZ(25,"label",64),m._uU(26),m.qZA(),m.TgZ(27,"div",31),m._uU(28),m.qZA(),m.YNc(29,Ja,0,0,"ng-template",32),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&a){const a=m.oxw(),o=m.MAs(14);m.xp6(4),m.hij(" ",a.language.TOptions," "),m.xp6(4),m.Oqu(a.language.Schedule),m.xp6(2),m.Oqu(a.language.alarm_shedule_msg),m.xp6(2),m.Q6J("items",a.recurrenceList)("searchable",!0)("clearable",!1),m.xp6(3),m.Q6J("ngIf","weekly"==(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm.controls.recurrence?null:a.workFlowConditionsData.workFlowConditionsForm.controls.recurrence.value)),m.xp6(3),m.Oqu(a.language["Start Schedule"]),m.xp6(2),m.Q6J("ngIf","monthly"==(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm.controls.recurrence?null:a.workFlowConditionsData.workFlowConditionsForm.controls.recurrence.value)),m.xp6(1),m.Q6J("ngClass",m.VKq(18,ja,"monthly"!=(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm.controls.recurrence?null:a.workFlowConditionsData.workFlowConditionsForm.controls.recurrence.value))),m.xp6(1),m.Q6J("autoZIndex",!0)("timeOnly",!0)("showTime",!0)("showIcon",!0),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth?null:a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth?null:a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth||null==a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.dayOfMonth.errors.required))||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime?null:a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime?null:a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime||null==a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.scheduleStartTime.errors.required))),m.xp6(3),m.Oqu(a.language.Geography),m.xp6(2),m.hij(" ",a.language.alarm_geography_msg," "),m.xp6(1),m.Q6J("ngTemplateOutlet",o)}}function Va(a,o){if(1&a&&(m.TgZ(0,"div",42),m.TgZ(1,"p"),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}function Qa(a,o){if(1&a&&(m.TgZ(0,"div",42),m.TgZ(1,"p"),m._uU(2),m.qZA(),m.qZA()),2&a){const a=m.oxw(2);m.xp6(2),m.hij("",a.language["This field is required"],".")}}function La(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",71),m.TgZ(1,"label",72),m._uU(2),m.qZA(),m.TgZ(3,"div",4),m.TgZ(4,"ng-select",73),m.NdJ("add",function(o){return m.CHM(a),m.oxw().validateRegion(o)})("remove",function(o){return m.CHM(a),m.oxw().loadLocationValue(o)}),m.qZA(),m.YNc(5,Va,3,1,"div",27),m.qZA(),m.qZA(),m.TgZ(6,"div",71),m.TgZ(7,"label",72),m._uU(8),m.qZA(),m.TgZ(9,"div",4),m.TgZ(10,"ng-select",74),m.NdJ("add",function(o){return m.CHM(a),m.oxw().validateLocation(o)})("remove",function(o){return m.CHM(a),m.oxw().removeLocationValue(o)}),m.qZA(),m.YNc(11,Qa,3,1,"div",27),m.qZA(),m.qZA()}if(2&a){const a=m.oxw();m.xp6(2),m.Oqu(a.language["Region(s)"]),m.xp6(2),m.s9C("placeholder",a.language.region),m.Q6J("multiple",!0)("items",null==a.workFlowConditionsData?null:a.workFlowConditionsData.regionsDataArray)("clearable",!1)("searchable",!0),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.region?null:a.workFlowConditionsData.workFlowConditionsForm.controls.region.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.region?null:a.workFlowConditionsData.workFlowConditionsForm.controls.region.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.region||null==a.workFlowConditionsData.workFlowConditionsForm.controls.region.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.region.errors.required))),m.xp6(3),m.hij(" ",a.language["Location(s)"],""),m.xp6(2),m.s9C("placeholder",a.language.Location),m.Q6J("multiple",!0)("items",null==a.workFlowConditionsData?null:a.workFlowConditionsData.locationDataArray)("clearable",!1)("searchable",!0),m.xp6(1),m.Q6J("ngIf",(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.location?null:a.workFlowConditionsData.workFlowConditionsForm.controls.location.touched)&&((null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.location?null:a.workFlowConditionsData.workFlowConditionsForm.controls.location.invalid)||(null==a.workFlowConditionsData||null==a.workFlowConditionsData.workFlowConditionsForm||null==a.workFlowConditionsData.workFlowConditionsForm.controls.location||null==a.workFlowConditionsData.workFlowConditionsForm.controls.location.errors?null:a.workFlowConditionsData.workFlowConditionsForm.controls.location.errors.required)))}}let Ha=(()=>{class a{constructor(a,o,t,i,e){this.ssoService=a,this.http=o,this.translateService=t,this.workflowService=i,this.issueService=e,this.regionSelected="All",this.locationSelected="All",this.scheduleMinDate=new Date,this._workFlowConditionsData={},this.recurrenceList=[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"}],this.triggerType=[{value:"true",name:"immediately"},{value:"false",name:"On a schedule"}],this.getWorkFlowAPIEmitter=new m.vpe}set workFlowConditionsData(a){this._workFlowConditionsData=a}get workFlowConditionsData(){return this._workFlowConditionsData}ngOnInit(){var a,o,t,i,e,l,r,s;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(a=>{this.language=a}),this.workFlowConditionsData.conditionsFormEntered||(this.workFlowConditionsData&&this.workFlowConditionsData.workFlowConditionsForm&&(this.workFlowConditionsData.workFlowConditionsForm.get("region").setValue(["All"]),this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(["All"])),this.workFlowConditionsData.conditionsFormEntered=!0);const d=this.workFlowConditionsData&&this.workFlowConditionsData.workFlowConditionsForm?this.workFlowConditionsData.workFlowConditionsForm.controls:{};d&&(this.onChangeRecurrenceSubject=null===(o=null===(a=d.recurrence)||void 0===a?void 0:a.valueChanges)||void 0===o?void 0:o.subscribe(a=>{this.onSelectReccurence()}),this.onChangeTriggerSubject=null===(i=null===(t=d.immediate)||void 0===t?void 0:t.valueChanges)||void 0===i?void 0:i.subscribe(a=>{this.onSelectReccurence()}),this.onChangeSoakTimeSubject=null===(l=null===(e=d.soakTime)||void 0===e?void 0:e.valueChanges)||void 0===l?void 0:l.subscribe(a=>{this.workFlowConditionsData.soakTime=a,this.workFlowConditionsData.soakTime&&this.workFlowConditionsData.soakTime>0?(this.workFlowConditionsData.soakTimeChanged||(this.workFlowConditionsData.oldNotifyOnClear=d.notifyOnClear.value,this.workFlowConditionsData.soakTimeChanged=!0),d.notifyOnClear.setValue(!0)):(d.notifyOnClear.setValue(!(!this.workFlowConditionsData.oldNotifyOnClear&&0!=this.workFlowConditionsData.oldNotifyOnClear)&&this.workFlowConditionsData.oldNotifyOnClear),this.workFlowConditionsData.soakTimeChanged=!1)}),null===(r=d.raiseThreshold)||void 0===r||r.setValidators([n.kI.required,n.kI.min(this.workFlowConditionsData.minRaiseThreshold-1!=0?this.workFlowConditionsData.minRaiseThreshold-1:this.workFlowConditionsData.minRaiseThreshold)])),this.conditionFormSubject=null===(s=this.conditionFormSubmitted)||void 0===s?void 0:s.subscribe(a=>{var o,t;null===(t=null===(o=this.workFlowConditionsData)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t||t.markAllAsTouched()}),this.callMultipleAPI()}callMultipleAPI(){return(0,l.mG)(this,void 0,void 0,function*(){this.getWorkFlowAPIEmitter.emit(!0)})}validateRegion(a){let o=this.workFlowConditionsData.workFlowConditionsForm.get("region").value;if("All"===a)o=["All"];else{let a=o.indexOf("All");a>-1&&o.splice(a,1)}this.workFlowConditionsData.workFlowConditionsForm.get("region").setValue(o),this.loadLocationValue("")}loadLocationValue(a){this.clickedRegion="",this.locationSelected="All";let o=this.workFlowConditionsData.workFlowConditionsForm.get("region").value;if(this.regionSelected=o,this.regionSelected&&this.regionSelected!=["All"]){let a="";if(o.length&&o!==["All"]){if(-1!==o.indexOf("All"))return this.regionName=null,this.locationName=null,void(this.workFlowConditionsData.locationDataArray=["All"]);o.forEach(o=>{"All"!=o&&(a+=`&region=${o}`)}),this.locationsSubject=this.http.get(`${s.N.API_BASE_URL}nfa/locations?tenant=0${a}`).pipe((0,ra.U)(a=>((a=this.issueService.appendFqn(a)).sort((a,o)=>(a.name||"").toString().localeCompare((o.name||"").toString(),"en",{numeric:!1})),a)),(0,sa.K)(this.handleError)).subscribe(a=>{this.workFlowConditionsData.locationDataArray=["All"];let o=a.map(a=>{let o=a.fqn.split(",").find(a=>a.includes("REGION"));return o.split("=").length>0&&(a.region_name=o.split("=")[1]),a});o.forEach((a,o)=>{var t;a.check_region_name=a.region_name+" ("+(null===(t=a.fqn)||void 0===t?void 0:t.split("=")[1].split(",")[0])+")"}),this.workFlowConditionsData.locationDataArray=[...this.workFlowConditionsData.locationDataArray,...o];let t=this.workFlowConditionsData.workFlowConditionsForm.get("location").value;t&&t.length>0&&t.forEach((a,o)=>{var i;"All"!=a&&-1==(null===(i=this.workFlowConditionsData.locationDataArray)||void 0===i?void 0:i.findIndex(o=>o.id==a))&&(t=null==t?void 0:t.filter(o=>o!=a))}),(!t||0==t.length)&&(t=["All"]),this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(t)},a=>{}),this.regionName=o}else this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(["All"]),this.workFlowConditionsData.workFlowConditionsForm.get("region").setValue(["All"]),this.regionName=null,this.locationName=null,this.workFlowConditionsData.locationDataArray=["All"]}}removeLocationValue(a){let o=this.workFlowConditionsData.workFlowConditionsForm.get("location").value;o&&o!=["All"]&&(0==o.length||!o)&&this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(["All"])}validateLocation(a){let o=this.workFlowConditionsData.workFlowConditionsForm.get("location").value;if("All"===a)o=["All"];else{let a=o.indexOf("All");a>-1&&o.splice(a,1)}this.workFlowConditionsData.workFlowConditionsForm.get("location").setValue(o)}enforceMinMax(a,o){setTimeout(()=>{let t=this.workflowService.enforceMinMax(a);-1!=t&&this.workFlowConditionsData.workFlowConditionsForm.get(o).setValue(t)},1e3)}onChangeExclusionTime(a,o,t,i){var e,l;const n=this.workFlowConditionsData.workFlowConditionsForm.get("weekDays").at(t);if(n.value.dayFrom){let a=new Date(n.value.dayFrom);a.setSeconds(0),n.value.dayFrom=a}if(n.value.dayTo){let a=new Date(n.value.dayTo);a.setSeconds(0),n.value.dayTo=a}if("dayFrom"==o&&n.value.dayFrom&&(a&&a.target&&a.target.value&&(null===(e=a.target)||void 0===e?void 0:e.value.length)>=8||"select"==i)){let a=this.getDefaultMinDate(n.value.dayFrom,"min"),o=this.getDefaultMinDate(n.value.dayFrom,"default");n.value.dayTo&&n.value.dayFrom>=n.value.dayTo&&n.patchValue({dayTo:""}),this.workFlowConditionsData.weekDays[t].minTime=a,this.workFlowConditionsData.weekDays[t].defaultTime=o}else"dayTo"==o&&n.value.dayTo&&(a&&a.target&&a.target.value&&(null===(l=a.target)||void 0===l?void 0:l.value.length)>=8||"select"==i)&&n.value.dayFrom>=n.value.dayTo&&n.patchValue({dayTo:""})}onCheckExclusionDays(a,o){let t=a.target.checked;const i=this.workFlowConditionsData.workFlowConditionsForm.get("weekDays").at(o);if(t){if(!i.value.dayFrom&&!i.value.dayTo){let a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);let t=new Date;t.setHours(23),t.setMinutes(59),t.setSeconds(0),i.patchValue({dayFrom:a,dayTo:t});let e=this.getDefaultMinDate(a,"min"),l=this.getDefaultMinDate(a,"default");this.workFlowConditionsData.weekDays[o].minTime=e,this.workFlowConditionsData.weekDays[o].defaultTime=l}}else i.patchValue({dayFrom:"",dayTo:""})}getDefaultMinDate(a,o){let t=new Date(a);return"default"==o?(t.setHours(23),t.setMinutes(59),t.setSeconds(0)):t.setMinutes(t.getMinutes()+1),t}onSelectReccurence(){var a,o,t,i,e,l;const r=null===(i=null===(t=null===(o=null===(a=this.workFlowConditionsData)||void 0===a?void 0:a.workFlowConditionsForm)||void 0===o?void 0:o.controls)||void 0===t?void 0:t.recurrence)||void 0===i?void 0:i.value,s=null===(l=null===(e=this.workFlowConditionsData)||void 0===e?void 0:e.workFlowConditionsForm)||void 0===l?void 0:l.controls;s&&("false"==s.immediate.value?(("daily"==r||"weekly"==r||"monthly"==r)&&s.scheduleStartTime.setValidators([n.kI.required]),"monthly"==r&&s.dayOfMonth.setValidators([n.kI.required]),("daily"==r||"weekly"==r||""==r)&&(s.dayOfMonth.setErrors(null),s.dayOfMonth.clearValidators())):(s.dayOfMonth.setErrors(null),s.dayOfMonth.clearValidators(),s.scheduleStartTime.setErrors(null),s.scheduleStartTime.clearValidators()))}selectWeeklySchedule(a){var o,t,i;let e=this.workFlowConditionsData.weekDays.find(o=>o.value==a.value);e.scheduleWeeklyStatus=!e.scheduleWeeklyStatus,null===(i=(null===(t=null===(o=this.workFlowConditionsData)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t?void 0:t.controls).weekDays)||void 0===i||i.controls.forEach(o=>{var t;o.value.value==a.value&&(null===(t=null==o?void 0:o.controls.scheduleWeeklyStatus)||void 0===t||t.setValue(e.scheduleWeeklyStatus))})}handleError(a){return(0,na._)(a)}avoidInvalidValues(a){("."===a.key||8!=(null==a?void 0:a.which)&&0!=(null==a?void 0:a.which)&&((null==a?void 0:a.which)<48||(null==a?void 0:a.which)>57)&&((null==a?void 0:a.which)<96||(null==a?void 0:a.which)>105))&&a.preventDefault()}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.locationsSubject&&this.locationsSubject.unsubscribe(),this.regionsSubject&&this.regionsSubject.unsubscribe(),this.onChangeRecurrenceSubject&&this.onChangeRecurrenceSubject.unsubscribe(),this.onChangeTriggerSubject&&this.onChangeTriggerSubject.unsubscribe(),this.onChangeSoakTimeSubject&&this.onChangeSoakTimeSubject.unsubscribe()}}return a.\u0275fac=function(o){return new(o||a)(m.Y36(g.t6),m.Y36(w.eN),m.Y36(u.s),m.Y36(da.z),m.Y36(k.v))},a.\u0275cmp=m.Xpm({type:a,selectors:[["app-workflow-conditions"]],inputs:{conditionFormSubmitted:"conditionFormSubmitted",workFlowConditionsData:"workFlowConditionsData"},outputs:{getWorkFlowAPIEmitter:"getWorkFlowAPIEmitter"},decls:15,vars:11,consts:[[3,"formGroup"],[1,"container","px-0"],[1,"row"],[1,"col-12"],[1,"w-100"],[1,"mb-0"],[3,"ngClass"],[1,"w-100","mb-3",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],["geographyTemplate",""],[1,"form-check","d-inline-flex","mr-3",3,"ngClass"],["formControlName","immediate","type","radio","name","immediate",1,"form-check-input",3,"id","value"],[1,"form-check-label",3,"for"],[1,"row","mb-3"],[1,"col-sm-6","col-md-4","col-lg-4","col-xl-4"],[1,"heading-4"],[1,"error"],[1,"info-text",3,"innerHtml"],[1,"my-3"],[1,"ccl-form","row"],[1,"col-sm-5"],["id","wf_raiseThreshold","name","wf_raiseThreshold","type","number","formControlName","raiseThreshold","aria-required","true","aria-describedby","wf_raiseThreshold-error","placeholder","1",1,"form-control",3,"min","max","keyup","keydown"],["for","wf_raiseThreshold",1,"col-form-label"],["class","errorMessage w-100",4,"ngIf"],["id","wf_duration","name","wf_duration","min","1","max","120","type","number","formControlName","duration","aria-required","true","aria-describedby","wf_duration-error","placeholder","0",1,"form-control",3,"keyup","keydown"],["for","wf_duration",1,"col-form-label"],["class","errorMessage",4,"ngIf"],[1,"info-text",3,"innerHTML"],["id","wf_soak_time","name","wf_soak_time","min","0","max","240","type","number","formControlName","soakTime","aria-required","true","aria-describedby","wf_soak_time-error","placeholder","0",1,"form-control",3,"keyup","keydown"],["for","wf_soak_time",1,"col-form-label"],[1,"info-text"],[3,"ngTemplateOutlet"],[1,"col-sm-6","col-md-4","col-lg-4","col-xl-4",3,"ngClass"],[1,"form-group","form-check"],["formControlName","notifyOnClear","type","checkbox","id","mailNotifyOnClear",1,"form-check-input",3,"ngClass"],["for","mailNotifyOnClear",1,"form-check-label","info-text","cursor-pointer",3,"ngClass","innerHTML"],[1,"d-flex","justify-content-between"],["formArrayName","weekDays"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"errorMessage","w-100"],[1,"pl-3"],[1,"errorMessage"],[3,"formGroupName"],[1,"exclusions-container","align-items-center",3,"ngClass"],[1,"exclusions-item"],[1,"form-group","form-check","mr-3"],["formControlName","checked","type","checkbox",1,"form-check-input",3,"readonly","id","click"],[1,"exclusions-item","w-100-imp","ccl-form"],["formControlName","dayFrom","placeholder","12:00 AM","appendTo","body","timeOnly","true","hourFormat","12",3,"maxDate","id","inputStyle","autoZIndex","showIcon","input","onSelect"],[1,"exclusions-item","mx-1"],["formControlName","dayTo","placeholder","11:59 PM","appendTo","body","timeOnly","true","hourFormat","12",3,"defaultDate","minDate","id","inputStyle","autoZIndex","showIcon","input","onSelect"],[1,"sectitle","border-bottom","mb-3","pb-1"],["id","options-schedule",1,"w-100","label-highlight"],[1,"w-100","max-w165"],["formControlName","recurrence","bindLabel","name","bindValue","id",3,"items","searchable","clearable"],["ng-label-tmp",""],["ng-option-tmp",""],["class","day-selection w-100 mt-3 week-container",4,"ngIf"],[1,"w-100","my-3"],[1,"mb-0","label-highlight"],[1,"d-flex"],[1,"ccl-form","position-relative",3,"ngClass"],["formControlName","scheduleStartTime","id","scheduleStartTimeId","appendTo","body","view","date","hourFormat","12",1,"start-item",3,"autoZIndex","timeOnly","showTime","showIcon"],[1,"w-100","label-highlight"],[1,"day-selection","w-100","mt-3","week-container"],["ngDefaultControl","","formControlName","scheduleWeeklyStatus",1,"cursor-pointer",3,"id","ngClass","click"],[1,"week-circle"],[1,"mb-0","mr-2","mt-1"],[1,"ccl-form","w-25"],["type","number","placeholder","1","id","dayOfMonthId","name","dayOfMonth","formControlName","dayOfMonth","min","1","max","31","aria-required","true",1,"form-control",3,"keyup"],[1,""],["for","inputEmail3",1,"col-form-label"],["formControlName","region","bindValue","id","bindLabel","name",3,"multiple","items","clearable","searchable","placeholder","add","remove"],["formControlName","location","bindValue","id","bindLabel","name",3,"multiple","items","placeholder","clearable","searchable","add","remove"]],template:function(a,o){1&a&&(m.TgZ(0,"section"),m.TgZ(1,"form",0),m.TgZ(2,"div",1),m.TgZ(3,"div",2),m.TgZ(4,"div",3),m.TgZ(5,"div",4),m.TgZ(6,"label",5),m._uU(7),m.qZA(),m.qZA(),m.TgZ(8,"div",6),m.TgZ(9,"div",7),m.YNc(10,ua,5,7,"ng-container",8),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(11,_a,67,41,"ng-container",9),m.YNc(12,Ua,30,20,"ng-container",9),m.YNc(13,La,12,14,"ng-template",null,10,m.W1O),m.qZA(),m.qZA(),m.qZA()),2&a&&(m.xp6(1),m.Q6J("formGroup",null==o.workFlowConditionsData?null:o.workFlowConditionsData.workFlowConditionsForm),m.xp6(6),m.Oqu(o.language["Notification Trigger"]),m.xp6(1),m.Q6J("ngClass",m.VKq(7,Za,"PAUSE"==o.workFlowConditionsData.workFlowStatus)),m.xp6(1),m.Q6J("ngClass",m.VKq(9,Sa,"PAUSE"==o.workFlowConditionsData.workFlowStatus)),m.xp6(1),m.Q6J("ngForOf",o.triggerType),m.xp6(1),m.Q6J("ngIf","true"==(null==o.workFlowConditionsData||null==o.workFlowConditionsData.workFlowConditionsForm.controls.immediate?null:o.workFlowConditionsData.workFlowConditionsForm.controls.immediate.value)),m.xp6(1),m.Q6J("ngIf","false"==(null==o.workFlowConditionsData||null==o.workFlowConditionsData.workFlowConditionsForm.controls.immediate?null:o.workFlowConditionsData.workFlowConditionsForm.controls.immediate.value)))},directives:[n._Y,n.JL,n.sg,i.mk,i.sg,i.O5,p,n.Fj,n._,n.JJ,n.u,n.wV,n.qQ,n.Fd,i.tP,n.Wl,n.CE,n.x0,ca.f,N.w9,N.bb,N.Z2],styles:['.heading-4[_ngcontent-%COMP%]{font-size:24px;font-style:normal;font-weight:400;line-height:30px;letter-spacing:0em;text-align:left;border-bottom:1px solid #CCCCCC;padding-bottom:5px}.info-text[_ngcontent-%COMP%]{font-size:16px;font-style:normal;font-weight:400;line-height:20px;letter-spacing:0em;text-align:left}.info-text[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:600!important}.raise-note[_ngcontent-%COMP%]{padding:10px 10px 0 15px}.sectitle[_ngcontent-%COMP%]{font-size:18px;font-weight:400;color:#1a1f22}.max-w165[_ngcontent-%COMP%]{max-width:165px}.label-highlight[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#1a1f22;line-height:20px}  .p-calendar{width:100%}  .p-datepicker-header{display:none!important}.icon-p-cal[_ngcontent-%COMP%]{position:absolute;z-index:1;right:15px;top:4px}.day-selection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:28px;height:28px;display:inline-block;font-weight:400;font-size:14px;line-height:28px;color:#4c4c4c;background:#F8F8FA;border-radius:26px;text-align:center;margin-bottom:0;margin-right:10px}.day-selection[_ngcontent-%COMP%]   .day-selected[_ngcontent-%COMP%]{background:#0279FF;color:#fff}.week-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.week-container[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{width:35px;height:35px;color:#4c4c4c;background-color:#f8f8fa;text-align:center;line-height:35px;border-radius:50%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]   .select-day[_ngcontent-%COMP%]{width:35px;height:35px;color:#fff;background-color:#0279ff;text-align:center;line-height:35px;border-radius:50%;margin-bottom:2%}.week-container[_ngcontent-%COMP%]   .week-circle[_ngcontent-%COMP%]{padding:4px}.start-item[_ngcontent-%COMP%]{width:100%;height:"36px"}.exclusions-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.exclusions-item[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:3%}.exclusions-item[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.exclusions-item[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{width:80px!important}.exclusions-item[_ngcontent-%COMP%]   .p-calendar[_ngcontent-%COMP%]{width:80%!important}.exclusions-item[_ngcontent-%COMP%] + .exclusions-item[_ngcontent-%COMP%]{text-align:center}.diable-div[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.cursornallow[_ngcontent-%COMP%]{cursor:not-allowed}.p-button-icon[_ngcontent-%COMP%]{cursor:pointer}.w-100-imp[_ngcontent-%COMP%]{width:100px!important}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{cursor:pointer}']}),a})();var Ra=t(67236),Ga=t(15835);function Ya(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",26),m.TgZ(1,"span",27),m._UZ(2,"img",28),m.qZA(),m.TgZ(3,"button",29),m.NdJ("click",function(){return m.CHM(a),m.oxw().closeAlert()}),m._UZ(4,"span"),m.qZA(),m._UZ(5,"div",30),m.qZA()}if(2&a){const a=m.oxw();m.xp6(5),m.Q6J("innerHtml",a.language[a.errorInfo]||a.errorInfo,m.oJD)}}function Wa(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",31),m.TgZ(1,"span",32),m._UZ(2,"img",33),m.qZA(),m.TgZ(3,"button",29),m.NdJ("click",function(){return m.CHM(a),m.oxw().success=!1}),m._UZ(4,"span"),m.qZA(),m._UZ(5,"div",30),m.qZA()}if(2&a){const a=m.oxw();m.xp6(5),m.Q6J("innerHtml",a.language[a.successInfo]||a.successInfo,m.oJD)}}function Ba(a,o){if(1&a&&(m.TgZ(0,"div",34),m.TgZ(1,"div",35),m.TgZ(2,"div",36),m.TgZ(3,"div",37),m.TgZ(4,"div",38),m.TgZ(5,"span",39),m._uU(6),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&a){const a=m.oxw();m.xp6(6),m.Oqu(a.language.Loading)}}const $a=function(a,o){return{"step-current":a,"step-done":o}};function za(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"li"),m.TgZ(1,"button",40),m.NdJ("click",function(){const o=m.CHM(a).index;return m.oxw().onTabChange(o,"stepperClick")}),m.TgZ(2,"span"),m._uU(3),m.qZA(),m.qZA(),m.qZA()}if(2&a){const a=o.$implicit,t=o.index,i=m.oxw();m.xp6(1),m.s9C("title",i.language[a.name]),m.Q6J("ngClass",m.WLB(3,$a,i.activeTab===a.value,i.levelsPassed>t&&i.activeTab!==a.value)),m.xp6(2),m.Oqu(i.language[a.name])}}const Ka=function(a){return{"pe-none":a}};function Xa(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"button",41),m.NdJ("click",function(){m.CHM(a);const o=m.oxw();return o.onTabChange(o.selectedTabIndex+1,"forward")}),m._uU(1),m._UZ(2,"img",42),m.qZA()}if(2&a){const a=m.oxw();m.MGl("title","  ",a.language.save_and_continue,""),m.Q6J("ngClass",m.VKq(3,Ka,1==a.btnDisabled)),m.xp6(1),m.hij(" ",a.language.save_and_continue," ")}}function ao(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"button",43),m.NdJ("click",function(){return m.CHM(a),m.oxw().pauseContinueWorkflow("pause")}),m._uU(1),m.qZA()}if(2&a){const a=m.oxw();m.MGl("title"," ",a.language.save_and_pause,""),m.Q6J("ngClass",m.VKq(3,Ka,1==a.btnDisabled)),m.xp6(1),m.hij(" ",a.language.save_and_pause," ")}}function oo(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"button",44),m.NdJ("click",function(){return m.CHM(a),m.oxw().pauseContinueWorkflow("activate")}),m._uU(1),m.qZA()}if(2&a){const a=m.oxw();m.MGl("title"," ",a.language.save_and_activate,""),m.Q6J("ngClass",m.VKq(3,Ka,1==a.btnDisabled)),m.xp6(1),m.hij(" ",a.language.save_and_activate," ")}}function to(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"div",45),m.TgZ(1,"span",27),m._UZ(2,"img",28),m.qZA(),m.TgZ(3,"button",29),m.NdJ("click",function(){return m.CHM(a),m.oxw().onCloseError()}),m._UZ(4,"span"),m.qZA(),m._UZ(5,"div",30),m.qZA()}if(2&a){const a=m.oxw();m.xp6(5),m.Q6J("innerHtml",a.language[a.errorMsg]||a.errorMsg,m.oJD)}}function io(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"app-workflow-details",46),m.NdJ("getWorkFlowAPIEmitter",function(o){return m.CHM(a),m.oxw().getWorkflowData(o)}),m.qZA()}if(2&a){const a=m.oxw();m.Q6J("loadOnEdit",a.loadEditable.asObservable())("workFlowDetailsData",a.notificationsData.details)}}function eo(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"app-workflow-alarms",47),m.NdJ("getWorkFlowAPIEmitter",function(o){return m.CHM(a),m.oxw().getWorkflowData(o)})("errorMsg",function(o){return m.CHM(a),m.oxw().getErrorMsg(o)}),m.qZA()}if(2&a){const a=m.oxw();m.Q6J("workFlowAlarmsData",a.notificationsData.alarms)}}function lo(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"app-workflow-conditions",48),m.NdJ("getWorkFlowAPIEmitter",function(o){return m.CHM(a),m.oxw().getWorkflowData(o)}),m.qZA()}if(2&a){const a=m.oxw();m.Q6J("conditionFormSubmitted",a.conditionFormSubmit)("workFlowConditionsData",a.notificationsData.conditions)}}function no(a,o){if(1&a&&m._UZ(0,"app-recepients",49),2&a){const a=m.oxw();m.Q6J("dynamicFields",a.recepientFormFields)("dynamicFieldsObj",a.recepientFormFieldsObj)("workflowObj",a.notificationsData.notification)}}function ro(a,o){if(1&a){const a=m.EpF();m.TgZ(0,"app-workflow-summary",50),m.NdJ("getWorkFlowAPIEmitter",function(o){return m.CHM(a),m.oxw().getWorkflowData(o)}),m.qZA()}if(2&a){const a=m.oxw();m.Q6J("workFlowSummaryData",a.notificationsData)}}const so=[{path:"",component:(()=>{class a{constructor(a,o,t,i,e,l,c,m,u,w,h,g,v){this.translateService=a,this.http=o,this.commonOrgService=t,this.ssoService=i,this.router=e,this.route=l,this.formBuilder=c,this.apiPreDataSevice=m,this.titleService=u,this.issueService=w,this.document=h,this.commonWorkflowService=g,this.modalService=v,this.recepientFormFields=[{key:"mailRecepients",required:!0},{key:"notes",required:!1},{key:"sms",required:!0},{key:"webhooks",required:!0}],this.recepientFormFieldsObj={emailRecipients:"mailRecepients",emailNotes:"notes",sms:"sms",webhooks:"webhooks"},this.isDev=!1,this.loadEditable=new r.xQ,this.scheduleFormSubmit=new r.xQ,this.conditionFormSubmit=new r.xQ,this.errorInfo="",this.successInfo="",this.loading=!1,this.btnDisabled=!1,this.alarmNotificationsSteppers=[{name:"Details",value:"Details"},{name:"Alarms",value:"Alarms"},{name:"Notification Trigger",value:"Conditions"},{name:"Recipients",value:"notification"},{name:"Summary",value:"Summary"}],this.activeTab="Details",this.levelsPassed=0,this.selectedTabIndex=0,this.isTabChange=!0,this.errorMsg=void 0,this.notificationsData={alarm_notifications_summary:!0,workFlowData:{},workFlowTab:this.alarmNotificationsSteppers,workflowId:"",details:{name:void 0,description:void 0,isNameEntered:!0,workFlowSaved:!1,workflowId:"",workFlowDetailsForm:this.formBuilder.group({name:["",[n.kI.required,n.kI.maxLength(50),d.q]],description:[""]})},alarms:{workFlowSaved:!1,alarmSelectedList:[],exisitingAlarmSelectedList:[],workFlowAlarmsForm:void 0,alarmsFormEntered:!1,receiveAlert:"No",alert_threshold:0,clear_threshold:0,duration:0,totMonitoredAlarms:0,groupAlarmData:{data:[]},individualAlarmData:{data:[],categoryList:[],searchCategory:void 0,searchSeverity:void 0,prevSearchCategory:void 0,prevSearchSeverity:void 0,categoryOrSeverity:void 0},transformAlarmData:{data:[]},monitoredIndividualAlarm:{data:[],categoryList:[]},monitoredGroupAlarm:{data:[]},monitoredTransformAlarm:{data:[]}},conditions:{workFlowStatus:void 0,workFlowSaved:!1,isFormValid:!1,immediate:"true",exclusionsValid:"valid",weeklyScheduleValid:"valid",conditionsFormEntered:!1,regionsDataArray:["All"],locationDataArray:["All"],minRaiseThreshold:1,recurrence:"daily",weekDays:[],soakTime:0,minClearThreshold:0,oldNotifyOnClear:!1,soakTimeChanged:!1,workFlowConditionsForm:this.formBuilder.group({region:["",n.kI.required],location:["",n.kI.required],soakTime:[0,[n.kI.required,n.kI.max(240),n.kI.min(0)]],raiseThreshold:[1,[n.kI.required,n.kI.max(1e4)]],duration:[1,[n.kI.required,n.kI.max(120),n.kI.min(1)]],immediate:["true",n.kI.required],clearThreshold:[0],notifyOnClear:[!1],weekDays:new n.Oe([]),recurrence:["daily"],scheduleStartTime:[new Date((new Date).setMonth(11))],dayOfMonth:[1],timezone:[""]})},notification:{mailRecepients:[],mailEntered:!0,workFlowSaved:!1,isFormValid:!1,scheduleFormEntered:!1,isConsentMsgSmsPopupAccepted:!1,isLoadConsentMsgSmsPopupApplicable:!0,workFlowScheduleForm:this.formBuilder.group({notes:[""]}),sms:[],webhooks:[]},summary:{workFlowSaved:!1}},this.baseUrl=`${s.N.API_BASE_URL}analytics-engine/`,window,this.isDev=`${s.N.API_BASE}`.indexOf("/dev.api.calix.ai")>-1}ngOnInit(){this.route.params.subscribe(a=>{this.notificationsData.workflowId=a.workflowId?a.workflowId:"",this.notificationsData.details.workflowId=a.workflowId?a.workflowId:""}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(a=>{this.language=a,this.titleService.setTitle(`${this.language.alarm_notifications} - ${this.language["Email Notifications"]} - ${this.language.Network_Operations} - ${this.language.Operations} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.alarm_notifications} - ${this.language["Email Notifications"]} - ${this.language.Network_Operations} - ${this.language.Operations} - ${this.language.Operations} - ${this.language["Calix Cloud"]}`),this.setDefaultWeekDays(),this.callMultipleAPI()}openModal(){const a=this.modalService.open(c.J);a.componentInstance.workflowObj=this.notificationsData.notification,a.result.then(a=>{a&&(console.log(a),this.onTabChange(this.selectedTabIndex+1,"forward"))}).catch(a=>{})}callMultipleAPI(){return(0,l.mG)(this,void 0,void 0,function*(){yield Promise.all([this.getCategories(),this.getIndividualAlarmData(),this.getTransformAlarmData(),this.regionsApiLoader()]),this.mergeAlarmRules(),""!=this.notificationsData.workflowId&&this.getWorkflowData()})}getCategories(){return new Promise((a,o)=>{this.apiPreDataSevice.getCategories().then(o=>{this.notificationsData.alarms.individualAlarmData.categoryList=[...o],this.notificationsData.alarms.monitoredIndividualAlarm.categoryList=[...o],a()})})}getIndividualAlarmData(){return new Promise((a,o)=>{this.apiPreDataSevice.getIndividualAlarmData().then(o=>{this.notificationsData.alarms.individualAlarmData.data=[...o],this.notificationsData.alarms.individualAlarmData=Object.assign({},this.notificationsData.alarms.individualAlarmData),a()})})}getGroupAlarmData(){return new Promise((a,o)=>{this.apiPreDataSevice.getGroupAlarmData().then(o=>{this.notificationsData.alarms.groupAlarmData.data=[...o],this.notificationsData.alarms.groupAlarmData=Object.assign({},this.notificationsData.alarms.groupAlarmData),a()})})}getTransformAlarmData(){return new Promise((a,o)=>{this.apiPreDataSevice.getTransformAlarmData().then(o=>{this.notificationsData.alarms.transformAlarmData.data=[...o],this.notificationsData.alarms.transformAlarmData=Object.assign({},this.notificationsData.alarms.transformAlarmData),a()})})}regionsApiLoader(){return new Promise((a,o)=>{this.apiPreDataSevice.regionsApiLoader().then(o=>{this.notificationsData.conditions.regionsDataArray=[...this.notificationsData.conditions.regionsDataArray,...o],a()})})}mergeAlarmRules(){if(this.notificationsData.alarms.individualAlarmData.data.length>0){let a=this.notificationsData.alarms.individualAlarmData.data.filter(a=>a.alarm_name.includes("multiple-onts-down")&&"PON transformed"==a.alarm_category);a.length>0&&a.forEach(a=>{let o=this.notificationsData.alarms.transformAlarmData.data.find(o=>o.alarm_name==a.alarm_name);o?(a.alarm_id=o.alarmRuleId,a.rulesexist=!0):a.rulesnotexist=!0})}}patchNotificationFormValue(){const a=this.notificationsData.conditions.workFlowConditionsForm.get("weekDays");a.controls&&(a.controls.length=0),this.notificationsData.conditions.weekDays.forEach(o=>{o.scheduleWeeklyStatus=!!o.scheduleWeeklyStatus&&o.scheduleWeeklyStatus,a.push(new n.cw({name:new n.NI(o.name),short_name:new n.NI(o.short_name),value:new n.NI(o.value),dayFrom:new n.NI(o.dayFrom),dayTo:new n.NI(o.dayTo),defaultTime:new n.NI(o.defaultTime),minTime:new n.NI(o.minTime),maxTime:new n.NI(o.maxTime),checked:new n.NI(o.checked||!1),scheduleWeeklyStatus:new n.NI(o.scheduleWeeklyStatus)}))})}onTabChange(a,o){var t,i,e,l,n,r,s,d,c,m,u,w,h,g,v,D,k,f,p,F,A,C,y,b,T,x,Z,S,_,O,q,M,I,P,N,E,J,j,U,V,Q,L,H,R,G,Y,W,B,$,z,K,X,aa,oa,ta;if(this.errorMsg=void 0,this.notificationsData.notification.mailEntered=!0,this.notificationsData.conditions.exclusionsValid="valid",this.notificationsData.conditions.weeklyScheduleValid="valid","forward"==o)if((null===(e=null===(i=null===(t=this.notificationsData)||void 0===t?void 0:t.details)||void 0===i?void 0:i.workFlowDetailsForm)||void 0===e?void 0:e.valid)&&a<2&&"Details"==this.activeTab||((null===(l=this.notificationsData.alarms.monitoredIndividualAlarm)||void 0===l?void 0:l.data.length)>0||(null===(n=this.notificationsData.alarms.monitoredGroupAlarm)||void 0===n?void 0:n.data.length)>0||(null===(r=this.notificationsData.alarms.monitoredTransformAlarm)||void 0===r?void 0:r.data.length)>0)&&2==a&&"Alarms"==this.activeTab||3==a&&"Conditions"==this.activeTab&&this.exclusionValidations()&&!this.weeklyScheduleValidation()&&(null===(d=null===(s=this.notificationsData.conditions)||void 0===s?void 0:s.workFlowConditionsForm)||void 0===d?void 0:d.valid)||(null===(m=null===(c=this.notificationsData.notification)||void 0===c?void 0:c.mailRecepients)||void 0===m?void 0:m.length)>0||(null===(w=null===(u=this.notificationsData.notification)||void 0===u?void 0:u.sms)||void 0===w?void 0:w.length)>0||(null===(g=null===(h=this.notificationsData.notification)||void 0===h?void 0:h.webhooks)||void 0===g?void 0:g.length)>0&&4==a&&"notification"==this.activeTab){if((null===(v=this.notificationsData.notification)||void 0===v?void 0:v.isLoadConsentMsgSmsPopupApplicable)&&!(null===(D=this.notificationsData.notification)||void 0===D?void 0:D.isConsentMsgSmsPopupAccepted)&&(null===(f=null===(k=this.notificationsData.notification)||void 0===k?void 0:k.sms)||void 0===f?void 0:f.length))return void this.openModal();this.saveAndContinue(a)}else 4==a&&(null===(F=null===(p=this.notificationsData.notification)||void 0===p?void 0:p.mailRecepients)||void 0===F?void 0:F.length)<=0&&(null===(C=null===(A=this.notificationsData.notification)||void 0===A?void 0:A.sms)||void 0===C?void 0:C.length)<=0&&(null===(b=null===(y=this.notificationsData.notification)||void 0===y?void 0:y.webhooks)||void 0===b?void 0:b.length)<=0?this.commonWorkflowService.setTabChange():3!=a||this.notificationsData.conditions.workFlowConditionsForm.valid&&"not-valid"!=this.notificationsData.conditions.exclusionsValid&&"not-valid"!=this.notificationsData.conditions.weeklyScheduleValid?2==a&&(0==(null===(x=null===(T=this.notificationsData.alarms)||void 0===T?void 0:T.monitoredIndividualAlarm)||void 0===x?void 0:x.data.length)&&0==(null===(S=null===(Z=this.notificationsData.alarms)||void 0===Z?void 0:Z.monitoredGroupAlarm)||void 0===S?void 0:S.data.length)||0==(null===(O=null===(_=this.notificationsData.alarms)||void 0===_?void 0:_.monitoredTransformAlarm)||void 0===O?void 0:O.data.length))?this.errorMsg="Please add at least one alarm.":(this.notificationsData.details.workFlowDetailsForm.markAllAsTouched(),this.notificationsData.details.isNameEntered=0===a):("not-valid"==this.notificationsData.conditions.exclusionsValid?this.errorMsg="Please select start time and end time of all selected exclusion days.":"not-valid"==this.notificationsData.conditions.weeklyScheduleValid&&(this.errorMsg="Please select at least one day."),this.conditionFormSubmit.next(!0));else if("backward"==o)setTimeout(()=>{this.updateStepperCompleted(a)},1e3);else if("stepperClick"==o)if(a>this.selectedTabIndex){if((a-1==this.selectedTabIndex||this.notificationsData[this.alarmNotificationsSteppers[a].value.toLowerCase()].workFlowSaved)&&a!=this.selectedTabIndex)if(this.notificationsData.details.workFlowDetailsForm.valid&&"Details"==this.activeTab||((null===(q=this.notificationsData.alarms.monitoredIndividualAlarm)||void 0===q?void 0:q.data.length)>0||(null===(M=this.notificationsData.alarms.monitoredGroupAlarm)||void 0===M?void 0:M.data.length)>0||(null===(I=this.notificationsData.alarms.monitoredTransformAlarm)||void 0===I?void 0:I.data.length)>0)&&"Alarms"==this.activeTab||"Conditions"==this.activeTab&&(null===(N=null===(P=this.notificationsData.conditions)||void 0===P?void 0:P.workFlowConditionsForm)||void 0===N?void 0:N.valid)&&!this.weeklyScheduleValidation()&&this.exclusionValidations()||"notification"==this.activeTab&&(null===(E=this.notificationsData.notification)||void 0===E?void 0:E.mailRecepients.length)>0||(null===(j=null===(J=this.notificationsData.notification)||void 0===J?void 0:J.sms)||void 0===j?void 0:j.length)>0||(null===(V=null===(U=this.notificationsData.notification)||void 0===U?void 0:U.webhooks)||void 0===V?void 0:V.length)>0||"Summary"==this.activeTab){if((null===(Q=this.notificationsData.notification)||void 0===Q?void 0:Q.isLoadConsentMsgSmsPopupApplicable)&&!(null===(L=this.notificationsData.notification)||void 0===L?void 0:L.isConsentMsgSmsPopupAccepted)&&(null===(R=null===(H=this.notificationsData.notification)||void 0===H?void 0:H.sms)||void 0===R?void 0:R.length))return void this.openModal();this.saveAndContinue(a)}else"Alarms"==this.activeTab&&(0==(null===(Y=null===(G=this.notificationsData.alarms)||void 0===G?void 0:G.monitoredIndividualAlarm)||void 0===Y?void 0:Y.data.length)&&0==(null===(B=null===(W=this.notificationsData.alarms)||void 0===W?void 0:W.monitoredGroupAlarm)||void 0===B?void 0:B.data.length)||0==(null===(z=null===($=this.notificationsData.alarms)||void 0===$?void 0:$.monitoredTransformAlarm)||void 0===z?void 0:z.data.length))?this.errorMsg="Please add at least one alarm.":"Conditions"!=this.activeTab||this.notificationsData.conditions.workFlowConditionsForm.valid&&"not-valid"!=this.notificationsData.conditions.exclusionsValid&&"not-valid"!=this.notificationsData.conditions.weeklyScheduleValid?"notification"==this.activeTab&&(null===(K=this.notificationsData.notification)||void 0===K?void 0:K.mailRecepients.length)<=0&&(null===(aa=null===(X=this.notificationsData.notification)||void 0===X?void 0:X.sms)||void 0===aa?void 0:aa.length)<=0&&(null===(ta=null===(oa=this.notificationsData.notification)||void 0===oa?void 0:oa.webhooks)||void 0===ta?void 0:ta.length)<=0?this.commonWorkflowService.setTabChange():!this.notificationsData.details.workFlowDetailsForm.valid&&"Details"==this.activeTab&&(this.notificationsData.details.isNameEntered=!1):("not-valid"==this.notificationsData.conditions.exclusionsValid?this.errorMsg="Please select start time and end time of all selected exclusion days.":"not-valid"==this.notificationsData.conditions.weeklyScheduleValid&&(this.errorMsg="Please select atleast one day."),this.conditionFormSubmit.next(!0))}else setTimeout(()=>{this.updateStepperCompleted(a)},1e3)}weeklyScheduleValidation(){var a,o,t;const i=Object.assign({},null===(t=null===(o=null===(a=this.notificationsData)||void 0===a?void 0:a.conditions)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t?void 0:t.value);let e=!1;return i.weekDays.length>0&&i.weekDays&&"false"==i.immediate&&"weekly"==i.recurrence&&(e=i.weekDays.every(a=>!a.scheduleWeeklyStatus),e&&(this.notificationsData.conditions.weeklyScheduleValid="not-valid")),e}exclusionValidations(){var a,o,t;const i=Object.assign({},null===(t=null===(o=null===(a=this.notificationsData)||void 0===a?void 0:a.conditions)||void 0===o?void 0:o.workFlowConditionsForm)||void 0===t?void 0:t.value);let e=!0;return i.weekDays.length>0&&i.weekDays&&"true"==i.immediate&&(i.weekDays=i.weekDays.forEach(a=>{a.checked&&(""==a.dayFrom||""==a.dayTo)&&(this.notificationsData.conditions.exclusionsValid="not-valid",e=!1)})),e}saveAndContinue(a){var o,t,i,e,l,n,r;if("Summary"==this.activeTab)this.updateStepperCompleted(a);else if("Details"==this.activeTab&&""==this.notificationsData.workflowId){let e=Object.assign({},null===(o=this.notificationsData.details.workFlowDetailsForm)||void 0===o?void 0:o.controls),l={name:null===(t=e.name)||void 0===t?void 0:t.value,description:(null===(i=e.description)||void 0===i?void 0:i.value)?e.description.value:""};this.loading=!0,this.btnDisabled=!0,this.errorMsg=void 0,this.error=!1,this.http.post(`${this.baseUrl}workflow`,l,{responseType:"text"}).subscribe(o=>{o&&""!=o?(this.loading=!1,this.success=!0,setTimeout(()=>{this.btnDisabled=!1,this.success=!1},2e3),this.notificationsData.workflowId=o,this.notificationsData.details.workflowId=o,this.successInfo="Successfully Saved",this.updateStepperCompleted(a)):(this.loading=!1,this.btnDisabled=!1,this.errorMsg=this.language.Error)},a=>{this.error=!0,this.loading=!1,this.btnDisabled=!1,this.pageErrorHandle(a)})}else{let o={};if("Details"==this.activeTab){let a=Object.assign({},null===(e=this.notificationsData.details.workFlowDetailsForm)||void 0===e?void 0:e.controls);o={name:null===(l=a.name)||void 0===l?void 0:l.value,description:(null===(n=a.description)||void 0===n?void 0:n.value)?a.description.value:""}}else if("Alarms"==this.activeTab){let a="CATEGORY";o={alarmGroups:this.notificationsData.alarms.monitoredGroupAlarm.data.map(a=>a.group_id),alarmNames:this.notificationsData.alarms.monitoredIndividualAlarm.data.filter(a=>!a.rulesexist).map(a=>a.alarm_id),transformAlarms:this.notificationsData.alarms.monitoredIndividualAlarm.data.filter(a=>a.rulesexist).map(a=>a.alarm_id)},o.workflowAlarmFilterValues=[],o.workflowAlarmFilter=a}else if("Conditions"==this.activeTab){let a=Object.assign({},null===(r=this.notificationsData.conditions.workFlowConditionsForm)||void 0===r?void 0:r.value);if(o={region:a.region&&a.region.length>0?-1!=a.region.indexOf("All")?["11111111-1111-1111-1111-111111111111"]:a.region:[],location:a.location&&a.location.length>0?-1!=a.location.indexOf("All")?["11111111-1111-1111-1111-111111111111"]:a.location:[]},o.timezone=a.timezone,o.schedule={},"true"==a.immediate){o.raiseThreshold=a.raiseThreshold?a.raiseThreshold:1,o.duration=a.duration?a.duration:1,o.soakTime=a.soakTime?a.soakTime:0,1==a.notifyOnClear?(o.notifyOnClear=!0,o.clearThreshold=a.clearThreshold?a.clearThreshold:0):0==a.notifyOnClear&&(o.notifyOnClear=!1,o.clearThreshold=0);let t=[];a.weekDays.forEach(a=>{var o;if(a.checked){let i={};i.fromTime=(a.dayFrom.getHours()<10?"0":"")+a.dayFrom.getHours()+":"+(a.dayFrom.getMinutes()<10?"0":"")+a.dayFrom.getMinutes(),i.toTime=(a.dayTo.getHours()<10?"0":"")+a.dayTo.getHours()+":"+(a.dayTo.getMinutes()<10?"0":"")+a.dayTo.getMinutes(),i.daysOfWeek=null===(o=a.short_name)||void 0===o?void 0:o.toUpperCase(),t.push(i)}}),o.schedule.immediate=!0,o.filter=t}else if(o.schedule.immediate=!1,o.schedule.recurrencePattern={},o.schedule.type=a.recurrence,"daily"==a.recurrence){o.schedule.recurrencePattern.daily={};let t=new Date(a.scheduleStartTime);o.schedule.recurrencePattern.daily.startTime=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()}else if("weekly"==a.recurrence){let t=a.weekDays.map(a=>{if(a.scheduleWeeklyStatus&&a.short_name)return a.short_name.toUpperCase()}).filter(a=>void 0!==a);o.schedule.recurrencePattern.weekly={},o.schedule.recurrencePattern.weekly.days=t;let i=new Date(a.scheduleStartTime);o.schedule.recurrencePattern.weekly.startTime=(i.getHours()<10?"0":"")+i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes()}else if("monthly"==a.recurrence){o.schedule.recurrencePattern.monthly={},o.schedule.recurrencePattern.monthly.dayOfMonth=a.dayOfMonth?a.dayOfMonth:1;let t=new Date(a.scheduleStartTime);o.schedule.recurrencePattern.monthly.startTime=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()}}else"notification"==this.activeTab&&(o={notes:this.notificationsData.notification.notes,emails:this.notificationsData.notification.mailRecepients&&this.notificationsData.notification.mailRecepients.length>0?this.notificationsData.notification.mailRecepients.map(a=>a):[],sms:this.notificationsData.notification.sms,webhooks:this.notificationsData.notification.webhooks});this.loading=!0,this.btnDisabled=!0,this.errorMsg=void 0,this.http.put(`${this.baseUrl}workflow/${this.notificationsData.workflowId}`,o,{responseType:"text"}).subscribe(o=>{o&&""!=o?(this.loading=!1,this.success=!0,setTimeout(()=>{this.btnDisabled=!1,this.success=!1},2e3),this.successInfo="Successfully Saved",this.updateStepperCompleted(a)):(this.loading=!1,this.btnDisabled=!1,this.errorMsg=this.language.Error)},a=>{this.error=!0,this.loading=!1,this.btnDisabled=!1,this.pageErrorHandle(a)})}}updateStepperCompleted(a){this.notificationsData[this.activeTab.toLowerCase()].workFlowSaved=!0,this.goToNextStepper(a)}goToNextStepper(a){this.activeTab=this.alarmNotificationsSteppers[a].value,this.selectedTabIndex=a,this.isTabChange=!this.isTabChange,this.levelsPassed<a&&(this.levelsPassed=a)}getWorkflowData(a){this.loadEditable.next(!0),this.http.get(`${this.baseUrl}workflow?workflowId=${this.notificationsData.workflowId}`).subscribe(a=>{var o,t,i,e,l,n,r,s,d,c,m,u,w,h,g,v,D,k,f,p,F,A,C;if(a&&Object.entries(a).length>0){this.notificationsData.workFlowData=JSON.parse(JSON.stringify(a)),this.notificationsData.details.workFlowSaved=!0,this.levelsPassed=1;const y=Object.assign({},null===(i=null===(t=null===(o=this.notificationsData)||void 0===o?void 0:o.details)||void 0===t?void 0:t.workFlowDetailsForm)||void 0===i?void 0:i.controls);y&&Object.entries(y).length>0&&(y.name.setValue(a.name?a.name:null===(e=y.name)||void 0===e?void 0:e.value),y.description.setValue(a.description?a.description:null===(l=y.description)||void 0===l?void 0:l.value)),(a.alarmGroups&&a.alarmGroups.length>0||a.transformAlarms&&a.transformAlarms.length>0||a.alarmNames&&a.alarmNames.length>0)&&(this.notificationsData.alarms.workFlowSaved=!0,this.levelsPassed=2),(null===(r=null===(n=this.notificationsData.alarms)||void 0===n?void 0:n.monitoredGroupAlarm)||void 0===r?void 0:r.data)&&(this.notificationsData.alarms.monitoredGroupAlarm.data=[]),this.notificationsData.alarms.groupAlarmData.data&&this.notificationsData.alarms.groupAlarmData.data.length>0&&this.notificationsData.alarms.groupAlarmData.data.forEach(a=>{a.isChecked=!1,a.disabled=!1,a.selectedAlready=!1}),a.alarmGroups&&a.alarmGroups.length>0&&a.alarmGroups.forEach(a=>{let o=this.notificationsData.alarms.groupAlarmData.data.find(o=>o.group_id==a);o&&(delete o.isChecked,delete o.disabled,delete o.selectedAlready,this.notificationsData.alarms.monitoredGroupAlarm.data.push(Object.assign({},o)),o.isChecked=!0,o.disabled=!0,o.selectedAlready=!0)}),(null===(d=null===(s=this.notificationsData.alarms)||void 0===s?void 0:s.monitoredGroupAlarm)||void 0===d?void 0:d.rerenderSubject)&&this.notificationsData.alarms.monitoredGroupAlarm.rerenderSubject.next(!0),(null===(m=null===(c=this.notificationsData.alarms)||void 0===c?void 0:c.monitoredTransformAlarm)||void 0===m?void 0:m.data)&&(this.notificationsData.alarms.monitoredTransformAlarm.data=[]),this.notificationsData.alarms.transformAlarmData.data&&this.notificationsData.alarms.transformAlarmData.data.length>0&&this.notificationsData.alarms.transformAlarmData.data.forEach(a=>{a.isChecked=!1,a.disabled=!1,a.selectedAlready=!1}),a.transformAlarms&&a.transformAlarms.length>0&&a.transformAlarms.forEach(a=>{let o=this.notificationsData.alarms.transformAlarmData.data.find(o=>o.alarmRuleId==a);o&&(delete o.isChecked,delete o.disabled,delete o.selectedAlready,this.notificationsData.alarms.monitoredTransformAlarm.data.push(Object.assign({},o)),o.isChecked=!0,o.disabled=!0,o.selectedAlready=!0)}),(null===(w=null===(u=this.notificationsData.alarms)||void 0===u?void 0:u.monitoredTransformAlarm)||void 0===w?void 0:w.rerenderSubject)&&this.notificationsData.alarms.monitoredTransformAlarm.rerenderSubject.next(!0),(null===(g=null===(h=this.notificationsData.alarms)||void 0===h?void 0:h.monitoredIndividualAlarm)||void 0===g?void 0:g.data)&&(this.notificationsData.alarms.monitoredIndividualAlarm.data=[]),this.notificationsData.alarms.individualAlarmData.data&&this.notificationsData.alarms.individualAlarmData.data.length>0&&this.notificationsData.alarms.individualAlarmData.data.forEach(a=>{a.isChecked=!1,a.disabled=!1,a.selectedAlready=!1}),(null===(k=null===(D=null===(v=this.notificationsData)||void 0===v?void 0:v.alarms)||void 0===D?void 0:D.individualAlarmData)||void 0===k?void 0:k.searchCategory)&&(this.notificationsData.alarms.individualAlarmData.searchCategory=void 0,this.notificationsData.alarms.individualAlarmData.prevSearchCategory=void 0),(null===(F=null===(p=null===(f=this.notificationsData)||void 0===f?void 0:f.alarms)||void 0===p?void 0:p.individualAlarmData)||void 0===F?void 0:F.searchSeverity)&&(this.notificationsData.alarms.individualAlarmData.searchSeverity=void 0,this.notificationsData.alarms.individualAlarmData.prevSearchSeverity=void 0),(a.alarmNames&&a.alarmNames.length>0||a.transformAlarms&&a.transformAlarms.length>0)&&(a.alarmNames=[...a.alarmNames,...a.transformAlarms],this.notificationsData.alarms.monitoredTransformAlarm.data=[],a.alarmNames.forEach(a=>{let o=this.notificationsData.alarms.individualAlarmData.data.find(o=>o.alarm_id==a);o&&(delete o.isChecked,delete o.disabled,delete o.selectedAlready,this.notificationsData.alarms.monitoredIndividualAlarm.data.push(Object.assign({},o)),o.isChecked=!0,o.disabled=!0,o.selectedAlready=!0)})),(null===(C=null===(A=this.notificationsData.alarms)||void 0===A?void 0:A.monitoredIndividualAlarm)||void 0===C?void 0:C.rerenderSubject)&&this.notificationsData.alarms.monitoredIndividualAlarm.rerenderSubject.next(!0),setTimeout(()=>{this.notificationsData.alarms.individualAlarmData&&(this.notificationsData.alarms.individualAlarmData=Object.assign({},this.notificationsData.alarms.individualAlarmData))},500),this.calculateTotalMonitoredAlarms(),this.setConditionPageData(a),this.loadEditable.next(!1)}},a=>{this.loadEditable.next(!1),this.error=!0,this.pageErrorHandle(a)})}setConditionPageData(a){var o,t,i,e,n,r,s,d,c,m,u,w,h,g,v,D,k,f,p,F,A,C,y,b,T,x,Z,S,_,O,q,M,I,P,N,E,J;return(0,l.mG)(this,void 0,void 0,function*(){this.setDefaultWeekDays(),a.region&&a.region.length>0&&(a.region=null===(t=null===(o=this.notificationsData.conditions.regionsDataArray)||void 0===o?void 0:o.filter(o=>{var t;return null===(t=a.region)||void 0===t?void 0:t.includes(o.id)}))||void 0===t?void 0:t.map(a=>a.id),this.notificationsData.conditions.workFlowSaved=!0,this.levelsPassed=3),this.notificationsData.conditions.workFlowStatus=a&&a.status?a.status:void 0;const l=Object.assign({},null===(n=null===(e=null===(i=this.notificationsData)||void 0===i?void 0:i.conditions)||void 0===e?void 0:e.workFlowConditionsForm)||void 0===n?void 0:n.controls);if(l&&Object.entries(l).length>0){if(a.region&&a.region.length>0){this.notificationsData.conditions.locationDataArray=yield this.loadLocationValue(a.region),this.notificationsData.conditions.locationDataArray=this.issueService.appendFqn(this.notificationsData.conditions.locationDataArray),this.notificationsData.conditions.locationDataArray=this.notificationsData.conditions.locationDataArray.sort((a,o)=>(a.name||"").toString().localeCompare((o.name||"").toString(),"en",{numeric:!1}));let o=this.notificationsData.conditions.locationDataArray.map(a=>{let o=a.fqn.split(",").find(a=>a.includes("REGION"));return o.split("=").length>0&&(a.region_name=o.split("=")[1]),a}),t={};o.forEach((a,i)=>{o.find((o,t)=>o.region_name==a.region_name&&o.regionId!=a.regionId&&t!=i)&&(t[a.region_name]=(t[a.region_name]||0)+1)}),o.forEach((a,o)=>{var i;a.check_region_name=a.region_name+" ("+(null===(i=a.fqn)||void 0===i?void 0:i.split("=")[1].split(",")[0])+")",t[a.region_name]>1&&(a.region_name=a.check_region_name)}),this.notificationsData.conditions.locationDataArray=[...o],this.notificationsData.conditions.locationDataArray.unshift({name:"All",id:"All"}),-1==a.region.indexOf("11111111-1111-1111-1111-111111111111")?l.region.setValue(a.region):l.region.setValue(["All"])}a.location=null===(s=null===(r=this.notificationsData.conditions.locationDataArray)||void 0===r?void 0:r.filter(o=>{var t;return null===(t=a.location)||void 0===t?void 0:t.includes(o.id)}))||void 0===s?void 0:s.map(a=>a.id),a.location&&a.location.length>0&&(-1==a.location.indexOf("11111111-1111-1111-1111-111111111111")?l.location.setValue(a.location):l.location.setValue(["All"])),l.duration.setValue(1),l.soakTime.setValue(0),l.raiseThreshold.setValue(1),l.notifyOnClear.setValue(!1),l.clearThreshold.setValue(0),l.recurrence.setValue("daily");let o=(new Date).toString().split(" ");if(l.timezone.setValue((o[5]?o[5]:"")+" "+(o[6]?o[6]:"")+" "+(o[7]?o[7]:"")+" "+(o[8]?o[8]:"")),a.timezone&&""!=a.timezone&&l.timezone.setValue(a.timezone),l.immediate.setValue((null==a?void 0:a.schedule)?(null===(d=null==a?void 0:a.schedule)||void 0===d?void 0:d.immediate)&&1==a.schedule.immediate?"true":this.notificationsData.conditions.workFlowSaved?"false":"true":"true"),null===(c=null==a?void 0:a.schedule)||void 0===c?void 0:c.immediate)this.notificationsData.conditions.minClearThreshold=0,a.duration&&""!=a.duration&&l.duration.setValue(a.duration),(a.soakTime&&""!=a.soakTime||0==a.soakTime)&&(l.soakTime.setValue(a.soakTime),this.notificationsData.conditions.soakTime=a.soakTime),a.raiseThreshold&&""!=a.raiseThreshold&&(l.raiseThreshold.setValue(a.raiseThreshold),this.notificationsData.conditions.minClearThreshold=a.raiseThreshold),a&&null!=a.soakTime&&null!=a.soakTime&&a.soakTime>0?(l.notifyOnClear.setValue(!0),l.clearThreshold.setValue((null==a?void 0:a.clearThreshold)?a.clearThreshold:0)):a&&null!=a.soakTime&&null!=a.soakTime&&0==a.soakTime&&(l.notifyOnClear.setValue(1==(null==a?void 0:a.notifyOnClear)),l.clearThreshold.setValue((null==a?void 0:a.clearThreshold)?a.clearThreshold:0)),(null==a?void 0:a.filter)&&a.filter.length>0&&(null===(m=l.weekDays)||void 0===m?void 0:m.value)&&(null===(u=l.weekDays.value)||void 0===u?void 0:u.length)>0&&a.filter.forEach(a=>{let o=l.weekDays.value.findIndex(o=>{var t,i;return(null===(t=o.short_name)||void 0===t?void 0:t.toLowerCase())==(null===(i=a.daysOfWeek)||void 0===i?void 0:i.toLowerCase())});if(o>=0){let t=new Date,i=new Date,e=a.fromTime.split(":"),n=a.toTime.split(":");t.setHours(e[0]),t.setMinutes(e[1]),i.setHours(n[0]),i.setMinutes(n[1]),l.weekDays.controls[o].controls.dayFrom.setValue(t),l.weekDays.controls[o].controls.dayTo.setValue(i),l.weekDays.controls[o].controls.checked.setValue(!0)}});else{let o=new Date;if("daily"==(null===(w=null==a?void 0:a.schedule)||void 0===w?void 0:w.type)){if(null===(v=null===(g=null===(h=null==a?void 0:a.schedule)||void 0===h?void 0:h.recurrencePattern)||void 0===g?void 0:g.daily)||void 0===v?void 0:v.startTime){let t=a.schedule.recurrencePattern.daily.startTime.split(":");o.setHours(t[0]),o.setMinutes(t[1])}(null===(f=null===(k=null===(D=null==a?void 0:a.schedule)||void 0===D?void 0:D.recurrencePattern)||void 0===k?void 0:k.daily)||void 0===f?void 0:f.startTime)&&l.scheduleStartTime.setValue(o),l.recurrence.setValue("daily")}else if("weekly"==(null===(p=null==a?void 0:a.schedule)||void 0===p?void 0:p.type)&&(null===(C=null===(A=null===(F=null==a?void 0:a.schedule)||void 0===F?void 0:F.recurrencePattern)||void 0===A?void 0:A.weekly)||void 0===C?void 0:C.days)&&a.schedule.recurrencePattern.weekly.days.length>0){if(null===(T=null===(b=null===(y=null==a?void 0:a.schedule)||void 0===y?void 0:y.recurrencePattern)||void 0===b?void 0:b.weekly)||void 0===T?void 0:T.startTime){let t=a.schedule.recurrencePattern.weekly.startTime.split(":");o.setHours(t[0]),o.setMinutes(t[1])}l.scheduleStartTime.setValue(o),(null===(x=l.weekDays)||void 0===x?void 0:x.value)&&(null===(Z=l.weekDays.value)||void 0===Z?void 0:Z.length)>0&&(l.recurrence.setValue("weekly"),l.weekDays.value.forEach((o,t)=>{o&&""!=o&&(-1!=a.schedule.recurrencePattern.weekly.days.findIndex(a=>{var t;return(null==a?void 0:a.toLowerCase())==(null===(t=o.short_name)||void 0===t?void 0:t.toLowerCase())})?l.weekDays.controls[t].controls.scheduleWeeklyStatus.setValue(!0):l.weekDays.controls[t].controls.scheduleWeeklyStatus.setValue(!1))}),this.notificationsData.conditions.weekDays&&(null===(O=null===(_=null===(S=this.notificationsData)||void 0===S?void 0:S.conditions)||void 0===_?void 0:_.weekDays)||void 0===O?void 0:O.length)>0&&this.notificationsData.conditions.weekDays.forEach((o,t)=>{o&&""!=o&&(o.scheduleWeeklyStatus=-1!=a.schedule.recurrencePattern.weekly.days.findIndex(a=>{var t;return(null==a?void 0:a.toLowerCase())==(null===(t=o.short_name)||void 0===t?void 0:t.toLowerCase())}))}))}else if("monthly"==(null===(q=null==a?void 0:a.schedule)||void 0===q?void 0:q.type)&&(null===(P=null===(I=null===(M=null==a?void 0:a.schedule)||void 0===M?void 0:M.recurrencePattern)||void 0===I?void 0:I.monthly)||void 0===P?void 0:P.dayOfMonth)&&a.schedule.recurrencePattern.monthly.dayOfMonth>=0){if(null===(J=null===(E=null===(N=null==a?void 0:a.schedule)||void 0===N?void 0:N.recurrencePattern)||void 0===E?void 0:E.monthly)||void 0===J?void 0:J.startTime){let t=a.schedule.recurrencePattern.monthly.startTime.split(":");o.setHours(t[0]),o.setMinutes(t[1]),l.scheduleStartTime.setValue(o)}l.recurrence.setValue("monthly"),l.dayOfMonth.setValue(a.schedule.recurrencePattern.monthly.dayOfMonth)}}}this.setNotificationsPageData(a)})}setNotificationsPageData(a){var o,t,i,e,l,n;((null===(o=null==a?void 0:a.emails)||void 0===o?void 0:o.length)||(null===(t=null==a?void 0:a.sms)||void 0===t?void 0:t.length)||(null===(i=null==a?void 0:a.webhooks)||void 0===i?void 0:i.length))&&(this.notificationsData.notification.workFlowSaved=!0,this.notificationsData.summary.workFlowSaved=!0,this.levelsPassed=5);const r=Object.assign({},null===(e=this.notificationsData.notification.workFlowScheduleForm)||void 0===e?void 0:e.controls);r&&Object.entries(r).length>0&&(r.notes.setValue(""),a.notes&&""!=a.notes&&r.notes.setValue(a.notes),this.notificationsData.notification.mailRecepients=a.emails&&a.emails.length>0?[...a.emails]:[],(null===(l=null==a?void 0:a.sms)||void 0===l?void 0:l.length)?(this.notificationsData.notification.sms=[...a.sms],this.notificationsData.notification.isConsentMsgSmsPopupAccepted=!0,this.notificationsData.notification.isLoadConsentMsgSmsPopupApplicable=!1):this.notificationsData.notification.sms=[],this.notificationsData.notification.webhooks=(null===(n=null==a?void 0:a.webhooks)||void 0===n?void 0:n.length)?[...a.webhooks]:[],this.notificationsData.notification.notes=null==a?void 0:a.notes)}setDefaultWeekDays(){let a=new Date;a.setHours(23),a.setMinutes(58),a.setSeconds(0),this.notificationsData.conditions.weekDays=[{name:"Monday",short_name:"Mon",value:"monday",dayFrom:"",dayTo:"",scheduleWeekly:"M",defaultTime:"",minTime:"",maxTime:a},{name:"Tuesday",short_name:"Tue",value:"tuesday",dayFrom:"",dayTo:"",scheduleWeekly:"T",defaultTime:"",minTime:"",maxTime:a},{name:"Wednesday",short_name:"Wed",value:"wednesday",dayFrom:"",dayTo:"",scheduleWeekly:"W",defaultTime:"",minTime:"",maxTime:a},{name:"Thursday",short_name:"Thu",value:"thursday",dayFrom:"",dayTo:"",scheduleWeekly:"Th",defaultTime:"",minTime:"",maxTime:a},{name:"Friday",short_name:"Fri",value:"friday",dayFrom:"",dayTo:"",scheduleWeekly:"F",defaultTime:"",minTime:"",maxTime:a},{name:"Saturday",short_name:"Sat",value:"saturday",dayFrom:"",dayTo:"",scheduleWeekly:"Sat",defaultTime:"",minTime:"",maxTime:a},{name:"Sunday",short_name:"Sun",value:"sunday",dayFrom:"",dayTo:"",scheduleWeekly:"Sun",defaultTime:"",minTime:"",maxTime:a}],this.patchNotificationFormValue()}loadLocationValue(a){if(a&&a!=["All"]&&a!=["11111111-1111-1111-1111-111111111111"]&&a.length>0){let o="";return a.forEach(a=>{"All"==a||"11111111-1111-1111-1111-111111111111"==a||(o+=`&region=${a}`)}),""!=o?this.http.get(`${s.N.API_BASE_URL}nfa/locations?tenant=0${o}`).toPromise():[]}}calculateTotalMonitoredAlarms(){let a=this.notificationsData.alarms.monitoredGroupAlarm.data.reduce((a,o)=>a+Number(o.no_of_alarms),0);this.notificationsData.alarms.totMonitoredAlarms=this.notificationsData.alarms.monitoredIndividualAlarm.data.length+a+this.notificationsData.alarms.monitoredTransformAlarm.data.length}onCloseError(){this.errorMsg=void 0}pageErrorHandle(a){this.errorInfo=401==a.status?"Access Denied":this.commonOrgService.pageErrorHandle(a),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1,this.success=!1}pauseContinueWorkflow(a){var o;let t=`workflowId=${this.notificationsData.workflowId}`,i=null===(o=null==history?void 0:history.state)||void 0===o?void 0:o.ccoAlarmNotificationsText;"pause"==a?t=t.concat("&status=PAUSE"):"activate"==a&&(t=t.concat("&status=RUN")),this.loading=!0,this.btnDisabled=!0,this.errorMsg=void 0,this.successInfo=void 0,this.http.put(`${this.baseUrl}deployWorkflow?${t}`,null,{responseType:"text"}).subscribe(a=>{"Workflow successfully deployed"==a||"Workflow successfully deployed!"==a?(this.success=!0,this.successInfo="Alarm Notification Schedule successfully deployed",setTimeout(()=>{this.success=!1,this.loading=!1,this.btnDisabled=!1,this.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications",{state:{ccoAlarmNotificationsText:i||""}})},3e3)):"Workflow successfully paused"==a||"Workflow successfully paused!"==a?(this.success=!0,this.loading=!1,this.btnDisabled=!1,this.successInfo="Alarm Notification Schedule successfully paused",setTimeout(()=>{this.success=!1,this.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications",{state:{ccoAlarmNotificationsText:i||""}})},3e3)):(this.error=!0,this.loading=!1,this.btnDisabled=!1,this.errorInfo="Something went wrong")},a=>{this.error=!0,this.loading=!1,this.btnDisabled=!1,this.pageErrorHandle(a)})}goToListView(){var a;let o=null===(a=null==history?void 0:history.state)||void 0===a?void 0:a.ccoAlarmNotificationsText;this.router.navigateByUrl("/cco/operations/alarms/health-alarm-notifications",{state:{ccoAlarmNotificationsText:o||""}})}getErrorMsg(a){a?(this.errorMsg=a,this.document.body.scrollIntoView({block:"start",behavior:"smooth"})):this.errorMsg=void 0}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return a.\u0275fac=function(o){return new(o||a)(m.Y36(u.s),m.Y36(w.eN),m.Y36(h.v),m.Y36(g.t6),m.Y36(e.F0),m.Y36(e.gz),m.Y36(n.qu),m.Y36(v.V),m.Y36(D.Dx),m.Y36(k.v),m.Y36(i.K0),m.Y36(d.Z),m.Y36(f.FF))},a.\u0275cmp=m.Xpm({type:a,selectors:[["app-alarm-notifications"]],decls:29,vars:17,consts:[[1,"container"],["class","w-100 alert alert-danger fade show my-3",4,"ngIf"],["class","w-100 alert alert-success fade show my-3",4,"ngIf"],["class","row mb-3",4,"ngIf"],[1,"row","border-bottom"],[1,"col-md-11","pl-0"],[1,"alarm-title"],[1,"col-md-1","d-flex","align-items-center","justify-content-end"],["href","javascript:void(0)",3,"click"],["src"," assets/img/close-icon.svg","alt",""],[1,"my-4"],[1,"col-md-12","px-0"],[1,"stepper-ui"],[4,"ngFor","ngForOf"],[1,"pos-abs-right"],["type","button","id","previousbtn",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2",3,"disabled","hidden","click"],["src","assets/img/ic_chevronleft_grey.svg"],["type","button","id","nextbtn","class","btn-default primary btn-arr-nxt px-3 mr-2","data-toggle","tooltip","data-placement","top",3,"ngClass","title","click",4,"ngIf"],["type","button","id","finishbtn","class","small-screen-but btn-default primary px-3 mr-2","data-toggle","tooltip","data-placement","top",3,"ngClass","title","click",4,"ngIf"],["type","button","id","finishbtn","class","small-screen-but btn-default primary px-3","data-toggle","tooltip","data-placement","top",3,"ngClass","title","click",4,"ngIf"],["class","w-100 alert alert-danger fade show ng-star-inserted",4,"ngIf"],[3,"loadOnEdit","workFlowDetailsData","getWorkFlowAPIEmitter",4,"ngIf"],[3,"workFlowAlarmsData","getWorkFlowAPIEmitter","errorMsg",4,"ngIf"],[3,"conditionFormSubmitted","workFlowConditionsData","getWorkFlowAPIEmitter",4,"ngIf"],[3,"dynamicFields","dynamicFieldsObj","workflowObj",4,"ngIf"],[3,"workFlowSummaryData","getWorkFlowAPIEmitter",4,"ngIf"],[1,"w-100","alert","alert-danger","fade","show","my-3"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"w-100","alert","alert-success","fade","show","my-3"],[1,"success-img"],["src","./assets/img/success-icon.svg"],[1,"row","mb-3"],[1,"col-md-12"],[1,"loader","mt-5"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[3,"title","ngClass","click"],["type","button","id","nextbtn","data-toggle","tooltip","data-placement","top",1,"btn-default","primary","btn-arr-nxt","px-3","mr-2",3,"ngClass","title","click"],["src","assets/img/ic_chevron-r-w.svg"],["type","button","id","finishbtn","data-toggle","tooltip","data-placement","top",1,"small-screen-but","btn-default","primary","px-3","mr-2",3,"ngClass","title","click"],["type","button","id","finishbtn","data-toggle","tooltip","data-placement","top",1,"small-screen-but","btn-default","primary","px-3",3,"ngClass","title","click"],[1,"w-100","alert","alert-danger","fade","show","ng-star-inserted"],[3,"loadOnEdit","workFlowDetailsData","getWorkFlowAPIEmitter"],[3,"workFlowAlarmsData","getWorkFlowAPIEmitter","errorMsg"],[3,"conditionFormSubmitted","workFlowConditionsData","getWorkFlowAPIEmitter"],[3,"dynamicFields","dynamicFieldsObj","workflowObj"],[3,"workFlowSummaryData","getWorkFlowAPIEmitter"]],template:function(a,o){1&a&&(m.TgZ(0,"section"),m.TgZ(1,"div",0),m.YNc(2,Ya,6,1,"div",1),m.YNc(3,Wa,6,1,"div",2),m.YNc(4,Ba,7,1,"div",3),m.TgZ(5,"div",4),m.TgZ(6,"div",5),m.TgZ(7,"div",6),m._uU(8),m.qZA(),m.qZA(),m.TgZ(9,"div",7),m.TgZ(10,"a",8),m.NdJ("click",function(){return o.goToListView()}),m._UZ(11,"img",9),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"section",10),m.TgZ(13,"div",11),m.TgZ(14,"ul",12),m.YNc(15,za,4,6,"li",13),m.qZA(),m.TgZ(16,"div",14),m.TgZ(17,"button",15),m.NdJ("click",function(){return o.onTabChange(o.selectedTabIndex-1,"backward")}),m._UZ(18,"img",16),m._uU(19),m.qZA(),m.YNc(20,Xa,3,5,"button",17),m.YNc(21,ao,2,5,"button",18),m.YNc(22,oo,2,5,"button",19),m.qZA(),m.YNc(23,to,6,1,"div",20),m.qZA(),m.qZA(),m.YNc(24,io,1,2,"app-workflow-details",21),m.YNc(25,eo,1,1,"app-workflow-alarms",22),m.YNc(26,lo,1,2,"app-workflow-conditions",23),m.YNc(27,no,1,3,"app-recepients",24),m.YNc(28,ro,1,1,"app-workflow-summary",25)),2&a&&(m.xp6(2),m.Q6J("ngIf",o.error),m.xp6(1),m.Q6J("ngIf",o.success),m.xp6(1),m.Q6J("ngIf",o.loading),m.xp6(4),m.hij(" ",""!=(null==o.notificationsData||null==o.notificationsData.details||null==o.notificationsData.details.workFlowDetailsForm||null==o.notificationsData.details.workFlowDetailsForm.controls||null==o.notificationsData.details.workFlowDetailsForm.controls.name?null:o.notificationsData.details.workFlowDetailsForm.controls.name.value)?null==o.notificationsData||null==o.notificationsData.details||null==o.notificationsData.details.workFlowDetailsForm||null==o.notificationsData.details.workFlowDetailsForm.controls||null==o.notificationsData.details.workFlowDetailsForm.controls.name?null:o.notificationsData.details.workFlowDetailsForm.controls.name.value:o.notificationsData.workflowId&&""!=o.notificationsData.workflowId?o.language["Notification Schedule"]||"Notification Schedule":o.language["New Notification Schedule"]," "),m.xp6(7),m.Q6J("ngForOf",o.alarmNotificationsSteppers),m.xp6(2),m.Q6J("disabled",0===o.selectedTabIndex)("hidden",0===o.selectedTabIndex),m.xp6(2),m.hij(" ",o.language["Go back"]," "),m.xp6(1),m.Q6J("ngIf",o.selectedTabIndex+1!==(null==o.alarmNotificationsSteppers?null:o.alarmNotificationsSteppers.length)),m.xp6(1),m.Q6J("ngIf",o.selectedTabIndex+1===(null==o.alarmNotificationsSteppers?null:o.alarmNotificationsSteppers.length)),m.xp6(1),m.Q6J("ngIf",o.selectedTabIndex+1===(null==o.alarmNotificationsSteppers?null:o.alarmNotificationsSteppers.length)),m.xp6(1),m.Q6J("ngIf",o.errorMsg),m.xp6(1),m.Q6J("ngIf","Details"===o.activeTab),m.xp6(1),m.Q6J("ngIf","Alarms"===o.activeTab),m.xp6(1),m.Q6J("ngIf","Conditions"===o.activeTab),m.xp6(1),m.Q6J("ngIf","notification"===o.activeTab),m.xp6(1),m.Q6J("ngIf","Summary"===o.activeTab))},directives:[i.O5,i.sg,i.mk,Z,la,Ha,Ra.F,Ga.l],styles:['.stepper-ui[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0 0 10px;padding:0;overflow:hidden}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:2px 10px 0 30px;background:#ffffff;color:#1a1f22;position:relative;height:32px;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;border-right:0px!important;border-left:0px!important;outline:none!important;width:110px;overflow:hidden;text-overflow:ellipsis}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";width:30px;height:100%;background:transparent;position:absolute;top:0;right:-10px;transform:rotate(48deg);z-index:1;border:1px ridge transparent;border-top-color:#0279ff;border-right-color:#0279ff;border-top-right-radius:5px}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{background-color:#0279ff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{background-color:#82bf00;border-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{background-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled{background-color:#82bf00!important;border-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{border-top-color:#fff!important;border-right-color:#fff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{border-top-color:#0279ff!important;border-right-color:#0279ff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   button[_ngcontent-%COMP%]{border-top-left-radius:30px;border-bottom-left-radius:30px}button[_ngcontent-%COMP%]:disabled{background:transparent!important;border:1px solid #0279ff!important;cursor:not-allowed;color:#4c4c4c}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{opacity:.8;color:#fff!important}.alarm-title[_ngcontent-%COMP%]{font-family:Source Sans Pro;font-size:42px;font-style:normal;font-weight:300;line-height:53px;letter-spacing:0em;text-align:left}.pe-none[_ngcontent-%COMP%]{pointer-events:none}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;right:0px;top:0px}.small-screen-but[_ngcontent-%COMP%]{overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}']}),a})()}];let co=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=m.oAB({type:a}),a.\u0275inj=m.cJS({imports:[[e.Bz.forChild(so)],e.Bz]}),a})();var mo=t(44466),uo=t(89043);let wo=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=m.oAB({type:a}),a.\u0275inj=m.cJS({imports:[[i.ez,co,S.T,N.A0,n.u5,n.UX,ca._8,mo.m,uo.R]]}),a})()},55533:function(a,o,t){t.d(o,{z:function(){return e}});var i=t(37716);let e=(()=>{class a{constructor(){}enforceMinMax(a){let o=null==a?void 0:a.target.min,t=null==a?void 0:a.target.max,i=null==a?void 0:a.target.value;return""!=i?(parseFloat(i)<parseFloat(o)&&(a.target.value=o),parseFloat(i)>parseFloat(t)&&(a.target.value=t),a.target.value):-1}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);