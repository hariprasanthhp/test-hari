"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[164],{164:function(e,t,i){i.r(t),i.d(t,{SupportOverviewModule:function(){return Ke}});var s=i(38583),a=i(39895),n=i(37716),r=i(7450),o=i(89097);let l=(()=>{class e{constructor(e,t,i){this.translateService=e,this.sso=t,this.route=i}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(r.s),n.Y36(o.t6),n.Y36(a.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-support-overview"]],decls:1,vars:0,template:function(e,t){1&e&&n._UZ(0,"router-outlet")},directives:[a.lC],styles:['.string-slider[_ngcontent-%COMP%]   .ngx-slider-pointer[_ngcontent-%COMP%]{position:relative}  .string-slider{height:88px;margin-bottom:20px;position:relative}  .string-slider .ngx-slider-bubble{display:none!important}  .string-slider .ngx-slider-bar{background:linear-gradient(90deg,#FF734F 0%,#F7C343 47.94%,#82BF00 95.83%)!important;border-radius:26px!important;height:21px!important}  .string-slider [ng-reflect-value="0"] .ngx-slider-bar{background:#bcbcbc!important}  .string-slider .ngx-slider .ngx-slider-pointer{border-radius:100px;width:88px;height:88px;top:-30px;border:1px solid #82BF00;background-color:transparent!important}  .string-slider .ngx-slider-pointer:before{content:"";position:absolute;top:2.3px;left:2.3px;width:81.77px;height:81.77px;background:#fff;border-radius:100px;z-index:-1;border:1px solid #82BF00}  .string-slider .ngx-slider .ngx-slider-pointer:after{position:absolute;left:0;z-index:999;width:100%!important;height:100%!important;color:#000;background-color:transparent!important;text-align:center;line-height:56px;font-size:16px}  .string-slider [aria-valuetext="0"]{border-color:#ccc!important;display:none!important}  .string-slider [aria-valuetext="0"]:before{background-color:#f8f8fa!important;border-color:#ccc!important}  .string-slider [aria-valuetext="0"]:after{content:"No Data"!important;color:#bcbcbc!important}  .string-slider [aria-valuetext="1"]:after,   .string-slider [aria-valuetext="2"]:after{content:"Low"!important}  .string-slider [aria-valuetext="3"]:after{content:"Medium"!important}  .string-slider [aria-valuetext="4"]:after,   .string-slider [aria-valuetext="5"]:after{content:"High"!important}  .multi-point-slider{position:relative;z-index:1}  .multi-point-slider .ngx-slider-bar{height:5px!important;background:#EBEAEF!important;border-radius:6px}  .multi-point-slider .ngx-slider .ngx-slider-bubble{color:#4c4c4c!important;font-size:14px!important;font-weight:600;bottom:8px!important;padding:0 15px!important}  .multi-point-slider .ngx-slider-pointer{background-color:#0279ff!important;cursor:pointer;width:32px!important;height:12px!important;top:-3px!important}  .multi-point-slider .ngx-slider-pointer:after{display:none}  .multi-point-slider .left-most-slider-time,   .multi-point-slider .right-most-slider-time{position:absolute;color:#4c4c4c;font-size:12px;font-weight:normal;bottom:-16px}  .multi-point-slider .left-most-slider-time{left:0}  .multi-point-slider .right-most-slider-time{right:0}  .multi-point-slider .dir-arrows{cursor:pointer;position:absolute;top:5px;right:0;z-index:999;background-repeat:no-repeat!important;width:20px;height:15px}  .multi-point-slider #slider-click-next{background:url(ic_chevronright_blue.fd81c30020686fc07c55.svg);background-position:14px 0px!important}  .multi-point-slider #slider-click-prev{background:url(ic_chevronleft_blue.fe45f1210cc5f8e5cadf.svg);left:0}  .ce-modal .modal-dialog{width:75.5%!important;max-width:75.5%!important}  .ce-modal .modal-dialog .modal-content{width:100%!important;left:auto!important;float:none}']}),e})();var d=i(92340),h=i(25193),c=i(94802),u=i(39075),g=i(99608),p=i(4030),m=i(4350),v=i(86640),f=i(3679),D=i(23771);function y(e,t){if(1&e&&(n.TgZ(0,"li",24),n.TgZ(1,"a",25),n.TgZ(2,"span",8),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.MGl("routerLink","/",e.MODULE,"/overview/topology"),n.xp6(2),n.Oqu(e.language.Topology)}}function b(e,t){if(1&e&&(n.TgZ(0,"li",26),n.TgZ(1,"a",25),n.TgZ(2,"span",8),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.MGl("routerLink","/",e.MODULE,"/overview/quality-of-experience"),n.xp6(2),n.Oqu(e.language["Quality of Experience"])}}function T(e,t){if(1&e&&(n.TgZ(0,"div",27),n.TgZ(1,"div",28),n.TgZ(2,"div",29),n.TgZ(3,"span",30),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Oqu(e.language.Loading)}}function I(e,t){if(1&e&&(n.TgZ(0,"div",40),n._uU(1),n.qZA()),2&e){const e=n.oxw().index,t=n.oxw(2);n.xp6(1),n.Oqu(t.Description[e]?t.Description[e]:"")}}function A(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",47),n.TgZ(1,"i",48),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().index,i=n.oxw(2);return i.clickicon=i.clickicon==t?-1:t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw().index,t=n.oxw(2);n.xp6(1),n.Q6J("ngClass",t.clickicon==e?"fa fa-minus-circle":"fa fa-plus-circle")}}function _(e,t){1&e&&(n.TgZ(0,"span",49),n._UZ(1,"img",50),n.qZA())}function x(e,t){1&e&&(n.TgZ(0,"span",49),n._UZ(1,"img",51),n.qZA())}function w(e,t){1&e&&(n.TgZ(0,"span",49),n._UZ(1,"img",52),n.qZA())}function S(e,t){1&e&&(n.TgZ(0,"span",49),n._UZ(1,"img",53),n.qZA())}function C(e,t){1&e&&(n.TgZ(0,"span",49),n._UZ(1,"img",54),n.qZA())}function E(e,t){if(1&e&&(n.TgZ(0,"span"),n.TgZ(1,"div",55),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw(3);n.xp6(2),n.Oqu(e.language.Issue)}}function k(e,t){if(1&e&&(n.TgZ(0,"span"),n.TgZ(1,"div",56),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw(3);n.xp6(2),n.Oqu(e.language.Warning)}}function M(e,t){if(1&e&&(n.TgZ(0,"span"),n.TgZ(1,"div",57),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw(3);n.xp6(2),n.Oqu(e.language.Resolved)}}function O(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"button",58),n.NdJ("click",function(){n.CHM(e);const t=n.oxw(2).$implicit;return n.oxw(2).routeforbutton(t)}),n._uU(2),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2),t=e.$implicit,i=e.index,s=n.oxw(2);n.xp6(2),n.hij("",s.ReasonDescription(t.code,t,i)," ")}}function N(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,O,3,1,"div",38),n.qZA()),2&e){const e=n.oxw(),t=e.index,i=e.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",1==s.primaryActionButton[t]&&i.isValid)}}function P(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr",39),n.NdJ("mouseover",function(){const t=n.CHM(e).index;return n.oxw(2).hoveredIndex=t}),n.TgZ(1,"td"),n.TgZ(2,"div",40),n._uU(3),n._UZ(4,"br"),n.qZA(),n.TgZ(5,"div",41),n.YNc(6,I,2,1,"div",42),n.qZA(),n.qZA(),n.TgZ(7,"td",43),n.YNc(8,A,2,1,"a",44),n.qZA(),n.TgZ(9,"td"),n.YNc(10,_,2,0,"span",45),n.YNc(11,x,2,0,"span",45),n.YNc(12,w,2,0,"span",45),n.YNc(13,S,2,0,"span",45),n.YNc(14,C,2,0,"span",45),n._uU(15),n.qZA(),n.TgZ(16,"td",46),n.YNc(17,E,3,1,"span",38),n.YNc(18,k,3,1,"span",38),n.YNc(19,M,3,1,"span",38),n.qZA(),n.TgZ(20,"td",46),n.YNc(21,N,2,1,"div",38),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,i=t.index,s=n.oxw(2);n.xp6(3),n.AsE("",(s.ReasonDescription(e.code,e,i)," "),"",s.reason[i]?s.reason[i]:" "," "),n.xp6(2),n.s9C("id","collapseReason"+i),n.xp6(1),n.Q6J("ngIf",i==s.clickicon),n.xp6(2),n.Q6J("ngIf",i==s.hoveredIndex),n.xp6(2),n.Q6J("ngIf","SERVICE"==e.type||"Service"==e.type),n.xp6(1),n.Q6J("ngIf","Router/Satellite"==e.type||"ROUTER"==e.type||"Router"==e.type),n.xp6(1),n.Q6J("ngIf","WI-FI"==e.type||"WIFI"==e.type),n.xp6(1),n.Q6J("ngIf","DEVICE"==e.type||"CLIENT"==e.type||"Client"==e.type||"Device"==e.type),n.xp6(1),n.Q6J("ngIf","APPLICATION"==e.type||"Application"==e.type),n.xp6(1),n.hij("",e.source," "),n.xp6(2),n.Q6J("ngIf","0"==e.severity),n.xp6(1),n.Q6J("ngIf","1"==e.severity),n.xp6(1),n.Q6J("ngIf","0"!=e.severity&&"1"!=e.severity),n.xp6(2),n.Q6J("ngIf",i==s.hoveredIndex)}}function Z(e,t){if(1&e&&(n.TgZ(0,"tbody"),n.TgZ(1,"tr"),n.TgZ(2,"td",59),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw(2);n.xp6(3),n.Oqu(e.language["No data available in table"])}}function F(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",31),n.TgZ(1,"table",32),n.NdJ("mouseleave",function(){return n.CHM(e),n.oxw().hoveredIndex=null}),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n.TgZ(4,"th"),n._uU(5),n.qZA(),n._UZ(6,"th",33),n.TgZ(7,"th",34),n._uU(8),n.qZA(),n.TgZ(9,"th",35),n._uU(10),n.qZA(),n._UZ(11,"th",36),n.qZA(),n.qZA(),n.TgZ(12,"tbody"),n.YNc(13,P,22,15,"tr",37),n.qZA(),n.YNc(14,Z,4,1,"tbody",38),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("dtOptions",e.dtOptions),n.xp6(4),n.Oqu(e.language.Issue),n.xp6(3),n.Oqu(e.language.Source),n.xp6(2),n.Oqu(e.language.Severity),n.xp6(3),n.Q6J("ngForOf",e.issueData),n.xp6(1),n.Q6J("ngIf",0==(null==e.issueData?null:e.issueData.length))}}let L=(()=>{class e{constructor(e,t,i,s,a,n,r,o,l){this.translateService=e,this.ssoAuthService=t,this.issuseservice=i,this.router=s,this.route=a,this.service=n,this.titleService=r,this.marketingCommonService=o,this.supportWifiService=l,this.isIconClicked=[],this.serialNo=[],this.scopeFlag={},this.sample="/support/router",this.serialNumber=" ",this.Description=[],this.severity=[],this.isWifi=!1,this.loading=!1,this.isqosalert=!1,this.primaryActionButton=[],this.reason=[],this.allDeviceissues=[],this.clickicon=-1,this.searchText="",this.severityfilter="All",this.codelist=["LATENCY_HIGH","VIRUS_ATTACK","CLIENT_DEVICE_LOW_SIGNAL_DETECTED","CLIENT_DEVICE_LOW_EFFICIENCY_SCORE_DETECTED","CLIENT_DEVICE_LOW_PHY_RATE_DETECTED","CLIENT_DEVICE_LEGACY_DEVICE_DETECTED","REBOOT_ISSUE","SOFTWARE_UPGRADE_FAILED","STALE_SOFTWARE_VERSION","GATEWAY_FAILED","WIFI_RADIO_DISABLED_24G","WIFI_RADIO_DISABLED_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G","BACKHAUL_TOO_CLOSE","BACKHAUL_TOO_FAR","MESH_DEGRADE","ATTACK_DETECTED","GATEWAY_FAILED","WAP_FAILED","SPEED_LOW_75","SPEED_LOW_75_80","TRAFFIC_HIGH","QOS_DAMP_ALERT","WIFI_INTERFERENCE_HIGH_24G","WIFI_INTERFERENCE_HIGH_5G","DS_SPEED_LOW_85","US_SPEED_LOW_85","DS_SPEED_LOW_75","US_SPEED_LOW_75","SFP_THERMAL_TOO_HIGH","SFP_THERMAL_HIGH","ONT_OFFLINE","GC_MAX_DOWNSTREAM_ACHIEVED","GC_MAX_UPSTREAM_ACHIEVED","WFH_SSID_WITHOUT_CIQ","MAP_CONNECTIVITY_FAILED","WIFI_RADIO_DISABLED_6G","NOT_CERTIFIED_AND_SFP_NOT_SUPPORTED","LAN_DISABLED","CERTIFIED_BUT_SFP_NOT_SUPPORTED_IN_CURRENT_VERSION","THERMAL_HIGH","THERMAL_TOO_HIGH","UI_CREATED_ISSUE_FOR_TR069MAPDOWN","LOW_ONT_LIGHT_LEVELS","PON_ERRORS","LOW_ONT_LEVEL_ISSUE","ONT_DS_SDBER_ISSUE","ONT_US_SDBER_ISSUE","NETWORK_RESILIENCE_ACTIVE_WITH_TR69_CONNECTED","NETWORK_RESILIENCE_ACTIVE_WITH_TR69_DISCONNECTED","NETWORK_RESILIENCE_INACTIVE"],this.apiCallDone=!1,this.MODULE="support",this.scope={qoeRead:!1,topologyRead:!1},this.isExosModel=!1,this.SupportCloud=!1,this.opsCloud=!1,this.exosModelTemp={GM1028_h:85,GS2028E_h:85,"GM1028-2_h":85,"GS2028E-2_h":85,GM1028_vh:105,GS2028E_vh:105,"GM1028-2_vh":105,"GS2028E-2_vh":105,GS2020E_h:110,GS2026E_h:110,GS4220E_h:110,GS4227E_h:110,"GS4220E-2_h":110,"GS4227E-2_h":110,GS2020E_vh:135,GS2026E_vh:135,GS4220E_vh:135,GS4227E_vh:135,"GS4220E-2_vh":135,"GS4227E-2_vh":135,GM1020_h:110,GM1020_vh:135},this.showTopologyTab=!1,this.showQoeTab=!1,this.backupWifiStatus=null,this.realtimescope=!1,this.isDevEnv=!1,this.dtOptions={},s.events.subscribe(e=>{"popstate"===e.navigationTrigger&&"/support/netops-management/subscriber-management"===e.url&&this.router.navigateByUrl("/support/netops-management/subscriber-management",{state:{searchText:this.searchText||""}})}),sessionStorage.setItem("qoeCheck",null);let d=this.router.url;"true"!=sessionStorage.getItem("stopOverviewActions")&&this.ssoAuthService.setActionLog("CSC","pageHit","ISSUE",d,"Issue page loaded"),this.MODULE=d.indexOf("/support/")>-1?"support":"cco"}ngOnInit(){this.qoeCheck(),this.commandIQDataSubs=this.ssoAuthService.commandIQData.subscribe(e=>{this.scope.qoeRead=!0,this.qoeCheck()}),this.isDevEnv=this.ssoAuthService.API.includes("dev"),JSON.parse(sessionStorage.getItem("calix.deviceData")),this.route.queryParams.subscribe(e=>{var t;if(history.state){let i=history.state.searchText?history.state.searchText:"";this.searchText=e.searchText||i||(null===(t=history.state)||void 0===t?void 0:t.subscriberId)}}),this.issuseservice.setIssues(""),this.dtOptions={paging:!1,info:!1,columnDefs:[{targets:[1,2,3,4],orderable:!1}],searching:!1},this.hiconplus="fa fa-plus-circle",this.hiconminus="fa fa-minus-circle",this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.Issues} - ${this.language.Overview} - ${this.language.Service} - ${this.language["Calix Cloud"]}`)}),this.titleService.setTitle(`${this.language.Issues} - ${this.language.Overview} - ${this.language.Service} - ${this.language["Calix Cloud"]}`);let e=this.ssoAuthService.getSerialNo();""!=e&&(this.Devices=JSON.parse(e)),localStorage.setItem("isqosalert",JSON.stringify(this.isqosalert)),!this.getScopes()&&(this.loading=!0,setTimeout(()=>{this.qoeCheck()},2e3),this.service.showTopology.subscribe(e=>{this.showTopologyTab=e}),setTimeout(()=>{this.qoeSubscribed=this.service.showQoe.subscribe(e=>{this.showQoeTab=e})},100))}qoeCheck(){let e=this.ssoAuthService.getScopes();return Object.keys(e),this.scope.qoeRead=!1,d.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.qoe"]=e["cloud.rbac.csc.qoe"]?e["cloud.rbac.csc.qoe"]:[],e&&e["cloud.rbac.csc.qoe"]&&e["cloud.rbac.csc.qoe"].length&&-1!==e["cloud.rbac.csc.qoe"].indexOf("read")&&(this.scope.qoeRead=!0)):this.scope.qoeRead=!0,sessionStorage.getItem("calix.userFdUser"),this.isExosModel=this.ssoAuthService.exosVersionCheck("21.4")&&this.scope.qoeRead,sessionStorage.setItem("qoeCheck",this.isExosModel.toString()),sessionStorage.getItem("qoeCheck")}ngOnDestroy(){this.languageSubject&&this.languageSubject.unsubscribe(),this.subscription&&this.subscription.unsubscribe(),this.commandIQDataSubs&&this.commandIQDataSubs.unsubscribe(),this.qoeSubscribed&&this.qoeSubscribed.unsubscribe()}getScopes(){let e="DME"==this.ssoAuthService.getCscType(),t=this.ssoAuthService.getScopes(),i=Object.keys(t);if(d.N.VALIDATE_SCOPE?(t["cloud.rbac.csc.topology"]=t["cloud.rbac.csc.topology"]?t["cloud.rbac.csc.topology"]:[],t&&t["cloud.rbac.csc.topology"]&&t["cloud.rbac.csc.topology"].length&&-1!==t["cloud.rbac.csc.topology"].indexOf("read")&&(this.scope.topologyRead=!0),t&&t["cloud.rbac.coc.issues.systemalarms.realtime"]&&(this.realtimescope=!0)):(this.scope.topologyRead=!0,this.realtimescope=!0),e&&d.N.VALIDATE_SCOPE&&i){let e={};for(let t=0;t<i.length;t++)-1===i[t].indexOf("cloud.rbac.csc.services")?-1===i[t].indexOf("cloud.rbac.csc.cpe")?-1===i[t].indexOf("cloud.rbac.csc.wifi")?-1===i[t].indexOf("cloud.rbac.csc.devices")||(e.devicesRead=!0):e.wifiRead=!0:e.routerTabRead=!0:e.serviceTabRead=!0;e.serviceTabRead||e.routerTabRead||e.wifiRead||e.devicesRead?e.serviceTabRead?this.router.navigate([`./${this.MODULE}/service`]):e.routerTabRead?this.router.navigate([`./${this.MODULE}/router`]):e.wifiRead?this.router.navigate([`./${this.MODULE}/wifi`]):e.devicesRead&&this.router.navigate([`./${this.MODULE}/device`]):this.router.navigate([`./${this.MODULE}/application`])}else e&&(!d.N.VALIDATE_SCOPE||!i)&&this.router.navigate([`./${this.MODULE}/service`]);return e}getIssues(){this.orgId=this.ssoAuthService.getOrgId(),this.Devices=JSON.parse(this.ssoAuthService.getSerialNo()),this.SubscriberId=this.ssoAuthService.getCSCSubscriberId(),this.Devices.forEach(e=>{if(e.serialNumber){var t={};t.serialNumber=e.serialNumber,t.opMode=e.opMode,this.serialNo.push(t)}});let e={subscriberId:this.SubscriberId,devices:this.serialNo};this.loading=!0,this.issuseservice.putissues(this.orgId,e).subscribe(e=>{this.apiCallDone=!0,this.issueData=e,this.issueData=this.issueData.filter(e=>{var t,i;return this.codelist.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?1:e.severity>t.severity?-1:0),this.issueList=this.issueData,this.issuseservice.setIssues(this.issueData),this.totalissues=this.issueList.length,this.initalize(),this.get(),this.loading=!1},e=>{this.apiCallDone=!0,this.loading=!1})}initalize(){for(let e=0;e<this.totalissues;e++)this.isIconClicked[e]=!1,this.primaryActionButton[e]=!1,this.Description[e]=" ",this.reason[e]=" ",this.severity[e]=" "}ReasonDescription(e,t,i){var s,a,n;t&&(this.serialNumber=t?t.serialNumber:"",this.Devices.forEach(e=>{e.serialNumber==this.serialNumber&&e.serialNumber&&(s=e.opMode,a=e.modelName,n=e.manufacturer)}),this.macadd=t.sourceId?t.sourceId:" ",e=t.Code?t.Code.toUpperCase():t.code.toUpperCase());switch(e){case"ATTACK_DETECTED":case"VIRUS_ATTACK":{this.path="/"+this.MODULE+"/application/protect-iq";const e=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(e=>{if("RG"==e.opMode&&e.hasOwnProperty("modelName")&&this.ssoAuthService.acceptGSModel(e.modelName))return e});return this.stateinfo={containGS:e.length,hasSubscriber:sessionStorage.getItem("calix.subscriberId")},"DEVICE"!==t.type?(this.Description[i]=this.language.Issue_Description1,this.reason[i]=this.language.Issue_Reason1):(this.Description[i]=this.language.Issue_Description_DEVICE1,this.reason[i]=this.language.Issue_Reason_DEVICE1),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Application"]}case"CLIENT_DEVICE_LOW_SIGNAL_DETECTED":return sessionStorage.getItem(`${this.ssoAuthService.getTabId()}calix.routerOnboard`),"RG"!=s?(this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason2,this.Description[i]=this.language.Issue_Description2,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To WiFi"]):(this.path="/"+this.MODULE+"/device",this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,ssR:!0,allDeviceissues:this.allDeviceissues},this.reason[i]=this.language.Issue_Reason_DEVICE2,this.Description[i]=this.language.Issue_Description_DEVICE2,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Client Detail"]);case"CLIENT_DEVICE_LOW_EFFICIENCY_SCORE_DETECTED":return this.path="/"+this.MODULE+"/device","DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason3,this.Description[i]=this.language.Issue_Description3):(this.reason[i]=this.language.Issue_Reason_DEVICE3,this.Description[i]=this.language.Issue_Description_DEVICE3),this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,dhyRW:!0,allDeviceissues:this.allDeviceissues},this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Client Detail"];case"CLIENT_DEVICE_LOW_PHY_RATE_DETECTED":return this.path="/"+this.MODULE+"/device",this.reason[i]=this.language.Issue_Reason_new4,this.Description[i]=this.language.Issue_Description_new4,this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,dhyRW:!0,allDeviceissues:this.allDeviceissues},this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Client Detail"];case"CLIENT_DEVICE_LEGACY_DEVICE_DETECTED":return this.path="/"+this.MODULE+"/device",this.stateinfo={serialNumber:this.serialNumber,macAddress:this.macadd,isDataModel:!0,rmode:!0,allDeviceissues:this.allDeviceissues},"DEVICE"!==t.type?(this.Description[i]=this.language.Issue_Description4,this.reason[i]=this.language.Issue_Reason4):(this.Description[i]=this.language.Issue_Description_DEVICE4,this.reason[i]=this.language.Issue_Reason_DEVICE4),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Client Detail"];case"REBOOT_ISSUE":{this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason5,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};const e=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(e=>e.serialNumber==this.serialNumber).map(e=>e.opMode),t=e.length&&"RG"==e[0]?e[0]:"Mesh";return this.Description[i]=this.language.Issue_Description5.replace(/RG/g,t),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"].replace("Router",t).replace("Routeur",`Go To ${t}`)}case"SOFTWARE_UPGRADE_FAILED":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,modelName:a,isRouter:!0},"Device"!==t.type?(this.reason[i]=this.language.Issue_Reason6,this.Description[i]=this.language.Issue_Description6):(this.reason[i]=this.language.Issue_Reason_DEVICE6,this.Description[i]=this.language.Issue_Description_DEVICE6),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"STALE_SOFTWARE_VERSION":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,modelName:a,manufacturer:n,isUpgrade:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason7,this.Description[i]=this.language.Issue_Description7):(this.reason[i]=this.language.Issue_Reason_DEVICE7,this.Description[i]=this.language.Issue_Description_DEVICE7),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Upgrade Software"];case"WAP_FAILED":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason43,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,isFactoryReset:!0},this.Description[i]=this.language.Issue_Description43,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Mesh(SAT)"];case"GATEWAY_FAILED":{this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,isFactoryReset:!0};let e={reason:"",description:""};return"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason44+" "+e.reason,this.Description[i]=this.language.Issue_Description44+" "+e.description):(this.reason[i]=this.language.Issue_Reason_DEVICE11+" "+e.reason,this.Description[i]=this.language.Issue_Description_DEVICE11+" "+e.description),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"]}case"SPEED_LOW_75_80":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason12,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description12,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"SPEED_LOW_75":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason13,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description13,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Speed Test"];case"TRAFFIC_HIGH":return this.service.getStoredSubscriberInfo(),this.path="/"+this.MODULE+"/insights",this.reason[i]=this.language.Issue_Reason14,this.stateinfo={id:this.ssoAuthService.getCSCSubscriberId(),value:"",isCSCResult:!0},this.marketingCommonService.setCSCtrueOrFalse(!0),this.marketingCommonService.setSubscriberID(this.ssoAuthService.getCSCSubscriberId()),this.Description[i]=this.language.Issue_Description14,this.primaryActionButton[i]=!0,this.severity[i]=1,this.ssoAuthService.getEntitlements()[119]||(t.isValid=!1),this.language["Go To Upsell"];case"LATENCY_HIGH":return this.path="/"+this.MODULE+"/service/data",this.reason[i]=this.language.Issue_Reason15,this.stateinfo={serialNumber:this.serialNumber,islatency:!0},this.Description[i]=this.language.Issue_Description15,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Latency"];case"WIFI_INTERFERENCE_HIGH_24G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Radiodisable2g:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason17,this.Description[i]=this.language.Issue_Description17):(this.reason[i]=this.language.Issue_Reason_DEVICE17,this.Description[i]=this.language.Issue_Reason_DEVICE17),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To WiFi"];case"QOS_DAMP_ALERT":return this.path="/"+this.MODULE+"/application",this.stateinfo={iseiqfromissue:!0},this.reason[i]=this.language.Issue_Reason41,this.Description[i]=this.language.Issue_Description41,this.primaryActionButton[i]=!0,this.severity[i]=0,this.isqosalert=!0,localStorage.setItem("isqosalert",JSON.stringify(this.isqosalert)),this.language.qos_issues;case"WIFI_INTERFERENCE_HIGH_5G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Radiodisable5g:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason18,this.Description[i]=this.language.Issue_Description18):(this.reason[i]=this.language.Issue_Reason_DEVICE18,this.Description[i]=this.language.Issue_Description_DEVICE18),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To WiFi"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0},this.reason[i]=this.language.Issue_Reason19,this.Description[i]=this.language.Issue_Description19,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0,Show5Gtab:!0},this.reason[i]=this.language.Issue_Reason20,this.Description[i]=this.language.Issue_Description20,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason21,this.Description[i]=this.language.Issue_Description21):(this.reason[i]=this.language.Issue_Reason_DEVICE21,this.Description[i]=this.language.Issue_Description_DEVICE21),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={Sitescan:!0,Show5Gtab:!0},"DEVICE"!==t.type?(this.reason[i]=this.language.Issue_Reason22,this.Description[i]=this.language.Issue_Description22):(this.reason[i]=this.language.Issue_Reason_DEVICE22,this.Description[i]=this.language.Issue_Description_DEVICE22),this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Site Scan"];case"MESH_DEGRADE":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isReboot:!0,isRouter:!0},this.reason[i]=this.language.Issue_Reason23,this.Description[i]=this.language.Issue_Description23,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language.Reboot;case"BACKHAUL_TOO_CLOSE":return this.path="/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={backhaul:!0},this.reason[i]=this.language.Issue_Reason24,this.Description[i]=this.language.Issue_Description24,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go  To Backhaul"];case"BACKHAUL_TOO_FAR":return this.path="/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={backhaul:!0},this.reason[i]=this.language.Issue_Reason25,this.Description[i]=this.language.Issue_Description25,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go  To Backhaul"];case"WIFI_RADIO_DISABLED":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0,isReboot:!0},this.reason[i]=this.language.Issue_Reason28,this.Description[i]=this.language.Issue_Description28,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"WIFI_RADIO_DISABLED_24G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason29,this.Description[i]=this.language.Issue_Description29,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"WIFI_RADIO_DISABLED_5G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason30,this.Description[i]=this.language.Issue_Description30,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"DS_SPEED_LOW_85":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason31,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description31,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"US_SPEED_LOW_85":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason32,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description32,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"DS_SPEED_LOW_75":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason33,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description33,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Speed Test"];case"US_SPEED_LOW_75":return this.path=this.MODULE+"/service",this.reason[i]=this.language.Issue_Reason34,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.Issue_Description34,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To Speed Test"];case"SFP_THERMAL_HIGH":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason35,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.Description[i]=this.language.Issue_Description35,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"SFP_THERMAL_TOO_HIGH":return this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.Issue_Reason36,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.Description[i]=this.language.Issue_Description36,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"];case"THERMAL_HIGH":{this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.THERMAL_HIGH_Reason,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};const e=this.exosModelTemp[this.ssoAuthService.getModelWithSn(this.serialNumber)+"_h"];return this.Description[i]=this.language.THERMAL_HIGH_Description(e),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"]}case"THERMAL_TOO_HIGH":{this.path="/"+this.MODULE+"/router",this.reason[i]=this.language.THERMAL_TOO_HIGH_Reason,this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};const e=this.exosModelTemp[this.ssoAuthService.getModelWithSn(this.serialNumber)+"_vh"];return this.Description[i]=this.language.THERMAL_TOO_HIGH_Description(e),this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["Go To System"]}case"ONT_OFFLINE":return this.path="./../../../cco/alerts/system/realtime/current-issues",this.reason[i]=this.language.issue_reason37,this.stateinfo=this.serialNumber,this.Description[i]=this.language.issue_description37,this.primaryActionButton[i]=!!(this.ssoAuthService.getEntitlementsArr().indexOf("102")>-1&&this.realtimescope),this.severity[i]=0,this.language["Open Operations Cloud"];case"GC_MAX_DOWNSTREAM_ACHIEVED":return this.path="/"+this.MODULE+"/service",this.reason[i]=this.language.issue_reason38,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.issue_description38,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"GC_MAX_UPSTREAM_ACHIEVED":return this.path="/"+this.MODULE+"/service",this.reason[i]=this.language.issue_reason39,this.stateinfo={isSpeedtest:!0},this.Description[i]=this.language.issue_description39,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Speed Test"];case"WFH_SSID_WITHOUT_CIQ":return this.path="/"+this.MODULE+"/wifi/ssid",this.reason[i]=this.language.issue_reason40,this.stateinfo={},this.Description[i]=this.language.issue_description40,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To SSID"];case"MAP_CONNECTIVITY_FAILED":{this.path="/"+this.MODULE+"/router";const e=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(e=>e.serialNumber==this.serialNumber).map(e=>e.opMode),t=e.length&&"RG"==e[0]?"11":"10";return this.reason[i]=this.language[`Issue_Reason${t}`],this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.Description[i]=this.language[`Issue_Description${t}`],this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["10"==t?"Go To Mesh(SAT)":"Go To System"]}case"WIFI_RADIO_DISABLED_6G":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason42,this.Description[i]=this.language.Issue_Description42,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Re-Enable Band"];case"NOT_CERTIFIED_AND_SFP_NOT_SUPPORTED":return this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber},this.reason[i]=this.language.Issue_Reason45,this.Description[i]=this.language.Issue_Description45,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To System"];case"CERTIFIED_BUT_SFP_NOT_SUPPORTED_IN_CURRENT_VERSION":return this.path="RG"==s?"/"+this.MODULE+"/wifi/rg/"+this.serialNumber:"/"+this.MODULE+"/wifi/extender/"+this.serialNumber,this.stateinfo={},this.reason[i]=this.language.Issue_Reason46,this.Description[i]=this.language.Issue_Description46,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To WiFi"];case"LAN_DISABLED":return this.path=this.MODULE+"/service",this.stateinfo={},this.reason[i]=this.language.Issue_Reason47,this.Description[i]=this.language.Issue_Description47,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];case"UI_CREATED_ISSUE_FOR_TR069MAPDOWN":{this.path="/"+this.MODULE+"/router",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0};const e=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(e=>e.serialNumber==this.serialNumber).map(e=>e.opMode),t=e.length&&"RG"==e[0]?"11":"10";let s={reason:"",description:""};return this.reason[i]=this.language[`Issue_Reason_mapNtr${t}`]+" "+s.reason,this.Description[i]=this.language[`Issue_Description_mapNtr${t}`]+" "+s.description,this.primaryActionButton[i]=!0,this.severity[i]=0,this.language["10"==t?"Go To Mesh(SAT)":"Go To System"]}case"LOW_ONT_LEVEL_ISSUE":return this.path="./../../../cco/alerts/system/realtime/current-issues",this.reason[i]=this.language["low power levels measured at the ONT"],this.stateinfo=this.serialNumber,this.Description[i]=this.language["ONT has low power level"],this.primaryActionButton[i]=!!(this.ssoAuthService.getEntitlementsArr().indexOf("102")>-1&&this.realtimescope),this.severity[i]=0,this.language["Open Operations Cloud"];case"ONT_DS_SDBER_ISSUE":return this.path="./../../../cco/alerts/system/realtime/current-issues",this.reason[i]=this.language["ONT downstream SDBER rate exceeded"],this.stateinfo=this.serialNumber,this.Description[i]=this.language["Downstream Signal Degrade Bit Error Rate"],this.primaryActionButton[i]=!!(this.ssoAuthService.getEntitlementsArr().indexOf("102")>-1&&this.realtimescope),this.severity[i]=0,this.language["Open Operations Cloud"];case"ONT_US_SDBER_ISSUE":return this.path="./../../../cco/alerts/system/realtime/current-issues",this.reason[i]=this.language["ONT upstream SDBER rate exceeded"],this.stateinfo=this.serialNumber,this.Description[i]=this.language["Upstream Signal Degrade Bit Error Rate"],this.primaryActionButton[i]=!!(this.ssoAuthService.getEntitlementsArr().indexOf("102")>-1&&this.realtimescope),this.severity[i]=0,this.language["Open Operations Cloud"];case"NETWORK_RESILIENCE_ACTIVE_WITH_TR69_CONNECTED":return this.path=this.MODULE+"/service",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.reason[i]=this.language.Issue_Reason48,this.Description[i]=this.language.Issue_Description48,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];case"NETWORK_RESILIENCE_ACTIVE_WITH_TR69_DISCONNECTED":return this.path=this.MODULE+"/service",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.reason[i]=this.language.Issue_Reason49,this.Description[i]=this.language.Issue_Description49,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];case"NETWORK_RESILIENCE_INACTIVE":return this.path=this.MODULE+"/service",this.stateinfo={serialNumber:this.serialNumber,isRouter:!0},this.reason[i]=this.language.Issue_Reason50,this.Description[i]=this.language.Issue_Description50,this.primaryActionButton[i]=!0,this.severity[i]=1,this.language["Go To Service"];default:return this.Description[i]=" ",this.reason[i]=" ",this.primaryActionButton[i]=!1,""}}onIconClick(e,t){t&&this.ReasonDescription(t);for(let i=0;i<this.issueData.length;i++)this.isIconClicked[i]=e===i&&!this.isIconClicked[i]}routeforissues(e,t){if(1==this.primaryActionButton[t])return" ";let i;if(i=e.Code?e.Code:e.code,this.ReasonDescription(i,e)," "==this.path)return" ";this.router.navigate([this.path],{state:this.stateinfo})}routeforbutton(e,t){let i,s;if(i=e.Code?e.Code:e.code,s=e.Code?e.Code.toUpperCase():e.code.toUpperCase(),this.ReasonDescription(i,e)," "==this.path)return" ";"ONT_OFFLINE"===s||"LOW_ONT_LEVEL_ISSUE"===s||"ONT_US_SDBER_ISSUE"===s||"ONT_DS_SDBER_ISSUE"===s?window.open(`./../../../cco/alerts/system/realtime/current-issues?fsan=${this.stateinfo}`,"_blank"):this.router.navigate([this.path],{state:this.stateinfo})}getdate(e){return new Date(e).getTime()}sort(){this.issueData=[],"All"==this.severityfilter?this.issueData=this.issueList:"Issues"==this.severityfilter?this.issueList.forEach(e=>{0==e.severity&&this.issueData.push(e)}):"Warning"==this.severityfilter&&this.issueList.forEach(e=>{1==e.severity&&this.issueData.push(e)})}responseFromStatus(e){this.loading=!1,this.severityfilter="All";let t=this.service.getSubscriberTabInfoData()?this.service.getSubscriberTabInfoData():"";if(t){let e=this.ssoAuthService.getEntitlements();e[118]&&(this.SupportCloud=!0),e[102]&&(this.opsCloud=!0);let i=null==t?void 0:t.allIssues,s=[];const a=i.filter(e=>["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)).map(e=>e.serialNumber);i=i.filter((e,t)=>{if(!a.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;s.push(null==e?void 0:e.serialNumber)});for(let t=i.length-1;t>=0;t--)if(s.includes(i[t].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(i[t].code)){if(["GATEWAY_FAILED"].includes(i[t].code)){const e=JSON.parse(sessionStorage.getItem("calix.subscriberInfo"));this.isSmbOnboarded=((null==e?void 0:e.devices)||[]).filter(e=>e.bSmbMode).length&&(null==e?void 0:e.isSmbOnboarded);let t=e.commandIQ?e.commandIQ.userId:"";t&&this.supportWifiService.getBackupWanStatus(t).subscribe(e=>{this.backupWifiStatus=e})}i.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:i[t].serialNumber,source:i[t].serialNumber,sourceId:i[t].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),i.splice(t,1)}this.issueData=i.filter(e=>{var t,i;return this.codelist.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize()}}get(){if(this.issueData.length>0){let e=this.issueData.filter(e=>e.type.includes("CLIENT")||e.type.includes("Client")||e.type.includes("DEVICE")||e.type.includes("Device"));this.allDeviceissues=[],e.forEach(e=>{if("CLIENT_DEVICE_LOW_SIGNAL_DETECTED"==e.code)(t={}).serialNumber=e.sourceId,t.warning="ssR",this.allDeviceissues.push(t);else if("CLIENT_DEVICE_LOW_PHY_RATE_DETECTED"==e.code)(t={}).serialNumber=e.sourceId,t.warning="dhyRW",this.allDeviceissues.push(t);else if("CLIENT_DEVICE_LOW_Efficiency_SCORE_DETECTED"==e.code)(t={}).serialNumber=e.sourceId,t.warning="dhyRW",this.allDeviceissues.push(t);else if("CLIENT_DEVICE_LEGACY_DEVICE_DETECTED"==e.code){var t;(t={}).serialNumber=e.sourceId,t.warning="rmode",this.allDeviceissues.push(t)}}),this.issuseservice.setDeviceIssues(this.allDeviceissues?this.allDeviceissues:{})}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(r.s),n.Y36(o.t6),n.Y36(h.F),n.Y36(a.F0),n.Y36(a.gz),n.Y36(c.Q),n.Y36(u.Dx),n.Y36(g._),n.Y36(p.O))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-issues"]],decls:36,vars:16,consts:[[3,"issues","responseFromIssuse","issuesAndReasons","apiCallDone"],[1,"row"],[1,"col-12"],[1,"m-2"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["id","iss-issues-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],[1,"big-text"],["class","nav-item","id","iss-topology-tab",4,"ngIf"],["class","nav-item","id","iss-qoe-tab",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["class","loader load",4,"ngIf"],[1,"col-sm-12","col-md-12","col-lg-10","col-xl-10"],[1,"ml-4"],[1,"col-sm-12","col-md-12","col-lg-2","col-xl-2"],[3,"ngModel","searchable","ngModelChange","change"],["value","All"],["value","Issues"],["value","Warning"],["class","accordion mb-5","id","accordion",4,"ngIf"],["id","iss-topology-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"],["id","iss-qoe-tab",1,"nav-item"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],["id","accordion",1,"accordion","mb-5"],["id","scrolldi","data-ordering","false","datatable","",1,"row-border","hover",3,"dtOptions","mouseleave"],["width","3%"],["width","15%"],["width","6%"],["width","22%"],[3,"mouseover",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"mouseover"],[1,"mt-2","mb-2"],[3,"id"],["class","mt-2 mb-2",4,"ngIf"],["valign","center"],["class","primary","href","javascript:void(0)",4,"ngIf"],["class","img-float",4,"ngIf"],[1,"text-center"],["href","javascript:void(0)",1,"primary"],[3,"ngClass","click"],[1,"img-float"],["height","16","width","16","src","./assets/img/ic_cloud.svg","alt","warning",1,"mr-1"],["height","16","width","16","src","./assets/img/ic_modem.svg","alt","warning",1,"mr-1","modem-icon"],["height"," 16","width","16","src","./assets/img/ic_wifi.svg","alt","warning",1,"mr-1","ic-wifi"],["height"," 16","width","16","src","./assets/img/ic_alldevices.svg","alt","warning",1,"mr-1"],["height"," 16","width","16","src","./assets/img/ic_chart.svg","alt","warning",1,"mr-1"],[1,"issue"],[1,"warning"],[1,"resolved"],[1,"btn-default","primary","px-2","py-0",3,"click"],["colspan","8",1,"no-data-available"]],template:function(e,t){1&e&&(n.TgZ(0,"app-subscriber-menu",0),n.NdJ("apiCallDone",function(e){return t.responseFromStatus(e)}),n.qZA(),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"section",3),n.TgZ(4,"div",1),n.TgZ(5,"div",4),n.TgZ(6,"ul",5),n.TgZ(7,"li",6),n.TgZ(8,"a",7),n.NdJ("Click",function(e){return e.preventDefault()}),n.TgZ(9,"span",8),n._uU(10),n.qZA(),n.qZA(),n.qZA(),n.YNc(11,y,4,2,"li",9),n.YNc(12,b,4,2,"li",10),n.qZA(),n.TgZ(13,"div",11),n.TgZ(14,"div",12),n._UZ(15,"div",13),n.qZA(),n.TgZ(16,"div",14),n._UZ(17,"div",13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"div",1),n.TgZ(19,"div",2),n.YNc(20,T,5,1,"div",15),n.TgZ(21,"div",1),n.TgZ(22,"div",16),n.TgZ(23,"span",17),n._uU(24),n.qZA(),n.qZA(),n.TgZ(25,"div",18),n.TgZ(26,"label"),n._uU(27),n.qZA(),n.TgZ(28,"ng-select",19),n.NdJ("ngModelChange",function(e){return t.severityfilter=e})("change",function(){return t.sort()}),n.TgZ(29,"ng-option",20),n._uU(30),n.qZA(),n.TgZ(31,"ng-option",21),n._uU(32),n.qZA(),n.TgZ(33,"ng-option",22),n._uU(34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(35,F,15,6,"div",23),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("issues",t.issueData)("responseFromIssuse",t.apiCallDone)("issuesAndReasons",t.reason),n.xp6(8),n.MGl("routerLink","/",t.MODULE,"/overview/issues"),n.xp6(2),n.Oqu(t.language.Issues),n.xp6(1),n.Q6J("ngIf",t.showTopologyTab),n.xp6(1),n.Q6J("ngIf",t.showQoeTab),n.xp6(8),n.Q6J("ngIf",t.loading),n.xp6(4),n.hij("",t.language["Hover over an issue and click available options to see more details"],"."),n.xp6(3),n.Oqu(t.language.Severity),n.xp6(1),n.Q6J("ngModel",t.severityfilter)("searchable",!1),n.xp6(2),n.hij("",t.language.all," "),n.xp6(2),n.Oqu(t.language.Issue),n.xp6(2),n.Oqu(t.language.Warning),n.xp6(1),n.Q6J("ngIf",!t.loading))},directives:[m.e,a.yS,a.Od,s.O5,v.w9,f.JJ,f.On,v.xv,D.G,s.sg,s.mk],styles:[".issue[_ngcontent-%COMP%]{color:#c70000}.warning[_ngcontent-%COMP%]{color:orange}.resolved[_ngcontent-%COMP%]{color:#000}[_nghost-%COMP%]     .dataTables_empty{display:none}.no-data-available[_ngcontent-%COMP%]{text-align:center}.btn-white[_ngcontent-%COMP%]{border-radius:16px;padding:5px;min-width:40px;text-align:center;font-size:16px;font-weight:400;color:#000;box-shadow:3px 3px 6px #00000026;border:0;background-color:#fff;margin:2px}i[_ngcontent-%COMP%]{font-size:16px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;font-weight:400;vertical-align:middle;border-top:0!important;border-bottom:1px solid #cccccc;word-break:break-word}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0!important}table.dataTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#4c4c4c;padding:0 10px;border-top:0!important;border-bottom:1px solid transparent;word-break:break-word;min-height:45px}.img-float[_ngcontent-%COMP%]{height:100%;float:left;width:20%;margin-right:10px;text-align:center}.img-float[_ngcontent-%COMP%]   .modem-icon[_ngcontent-%COMP%]{width:100%}.img-float[_ngcontent-%COMP%]   .ic-wifi[_ngcontent-%COMP%]{width:100%}"]}),e})();var R=i(81486),q=i(91841),H=i(95593);function B(e,t){if(1&e&&(n.TgZ(0,"div",19),n.TgZ(1,"div",20),n.TgZ(2,"div",21),n.TgZ(3,"span",22),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Oqu(e.language.Loading)}}let $=(()=>{class e{constructor(e,t,i,s,a,n,r){this.service=e,this.translateService=t,this.http=i,this.route=s,this.spinner=a,this.ssoAuthService=n,this.issuseservice=r,this.isIconClicked=[],this.primaryActionButton=[],this.Description=[],this.severity=[],this.reason=[],this.apiCallDone=!1,this.loading=!1,this.lastDeviceClickData={},this.uniqueDevices=[],this.uniqueHostnames=[],this.clientData={},this.codelist=["LATENCY_HIGH","VIRUS_ATTACK","CLIENT_DEVICE_LOW_SIGNAL_DETECTED","CLIENT_DEVICE_LOW_PHY_RATE_DETECTED","CLIENT_DEVICE_LEGACY_DEVICE_DETECTED","REBOOT_ISSUE","SOFTWARE_UPGRADE_FAILED","STALE_SOFTWARE_VERSION","GATEWAY_FAILED","WIFI_RADIO_DISABLED_24G","WIFI_RADIO_DISABLED_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G","LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G","BACKHAUL_TOO_CLOSE","BACKHAUL_TOO_FAR","MESH_DEGRADE","ATTACK_DETECTED","GATEWAY_FAILED","WAP_FAILED","SPEED_LOW_75","SPEED_LOW_75_80","TRAFFIC_HIGH","WIFI_INTERFERENCE_HIGH_24G","WIFI_INTERFERENCE_HIGH_5G","DS_SPEED_LOW_85","US_SPEED_LOW_85","DS_SPEED_LOW_75","US_SPEED_LOW_75","THERMAL_TOO_HIGH","THERMAL_HIGH"],this.twoHrsCategory=[],this.twoHrsData=[],this.sixHrsCategory=[{label:"6hrs ago"},{label:"5hrs 30mins ago"},{label:"5hrs ago"},{label:"4hrs 30mins ago"},{label:"4hrs ago"},{label:"3hrs 30mins ago"},{label:"3hrs ago"},{label:"2hrs 30mins ago"},{label:"2hrs ago"},{label:"1hrs 30mins ago"},{label:"1hrs ago"},{label:"30mins ago"}],this.sixHrsData=[],this.oneDayCategory=[{label:"24hrs ago"},{label:"22hrs ago"},{label:"20hrs ago"},{label:"18hrs ago"},{label:"16hrs ago"},{label:"14hrs ago"},{label:"12hrs ago"},{label:"10hrs ago"},{label:"8hrs ago"},{label:"6hrs ago"},{label:"4hrs ago"},{label:"2hrs ago"}],this.oneDayData=[],this.weekCategory=[{label:"7 days ago"},{label:"6 days ago"},{label:"5 days ago"},{label:"4 days ago"},{label:"3 days ago"},{label:"2 days ago"},{label:"1 day ago"}],this.data={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:this.twoHrsCategory}],dataset:this.twoHrsData},this.width="100%",this.height=400,this.type="msline",this.dataFormat="json",this.dataSource=this.data,this.menuActive="2 Hours",this.chartMenu=[{id:1,value:"2 Hours"},{id:2,value:"6 Hours"},{id:3,value:"1 Day"},{id:4,value:"1 Week"}],this.closeDevicesArray=[],this.mediumDevicesArray=[],this.farDevicesArray=[],this.dataArray=[],this.deviceDataWithAll=[],this.closeDevicesSplit=!1,this.mediumDevicesSplit=!1,this.farDevicesSplit=!1,this.allObject={type:"All",key4:"All",key6:"All"},this.routerTooltip="  IP Address: 192.168.1.65,\n  Device: Calix Router,\n  Connection: connected",this.accesPointTooltip="IP Address: 192.168.1.1,\n  Device:AccessPoint 1,\n  Connection: connected",this.isActive1=!0,this.isActive2=!1,this.isSingleClick=!0,this.clickCount=0,this.title="app",this.preventSingleClick=!1,this.dblcount=0,this.snglcount=0,this.showChart=!1,this.apInformtion="",this.VisitedPage="",this.routerKey="",this.nextVisitedPage="",this.nextRouterKey="",this.nextTabledataUniqueId="",this.currentPage="main",this.dblClkFired=!1,this.$=R.GraphObject.make,this.topologyData={phy:[],legacy:[],clientWifi:[]},this.topologyView=!0,this.tplgyType="",this.tableView=!1,this.legacyChecked=!1,this.phyChecked=!1,this.signalChecked=!1,this.filterEnabled=!1,this.successFilterEnabled=!1,this.deviceDatas=[],this.deviceDatasUpdated=[],this.backBtnDisabled=!0,this.accessPointId="",this.nodeDataArray=[],this.linkDataArray=[],this.hostnameFilterData=[],this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},actions:!1,columns:{accessPoint:{filter:!1,title:"Access Point"},image_url:{title:"DeviceType",type:"html",valuePrepareFunction:e=>`<img width="50%" src="${e}"/>`,width:"50px",height:"10px"},hostname:{title:"HostName",filter:{type:"list",config:{selectText:"All"}}},"fingerprint-model":{filter:!1,title:"Model"},"fingerpint-vendor":{filter:!1,title:"Vendor"},"ip-address":{filter:!1,title:"Ip address"},ssid:{filter:!1,title:"SSID"},radio:{filter:!1,title:"Radio"},siganl_image:{title:"Signal",filter:!1,type:"html",valuePrepareFunction:e=>`<img width="100%" src="${e.url}" title="${e["signal-strength"]}"/>`,width:"50px",height:"50px"},"DS-phy-rate":{filter:!1,title:"DS PHY Rate"},"US-phy-rate":{filter:!1,title:"US PHY Rate"},"DS-packet-drops":{filter:!1,title:"Packets Dropped DS"},"client-efficiency-score":{filter:!1,title:"Wi-Fi Score Current (Average)"},"client-note":{filter:!1,title:"Reason for failure"}}},this.images=["assets/images/tv-all-clear.png","assets/images/printer-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png","assets/images/phone-all-clear-state.png","assets/images/camera-clear.png","assets/images/audiobox-clear.png","assets/images/gaming-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png"],this.imagesObj={Television:"assets/images/tv-all-clear.png",Tablet:"assets/images/ipad-all-clear.png",Phone:"assets/images/phone-all-clear-state.png",Camera:"assets/images/camera-clear.png","Media Player":"assets/images/audiobox-clear.png",Console:"assets/images/gaming-clear.png","Wi-Fi IoT":"assets/images/iot.png","Wi Fi IoT":"assets/images/iot.png","Wifi IoT":"assets/images/iot.png",Computer:"assets/images/computer.png",Printer:"assets/images/printer-clear.png",Network:"assets/images/network.png",Voip:"assets/images/voip.png",Fridge:"assets/images/iot.png","Television-red":"assets/images/tv-critical-issues.png","Tablet-red":"assets/images/ipad-critical.png","Phone-red":"assets/images/phone-critical-state.png","Camera-red":"assets/images/camera-critical.png","Media Player-red":"assets/images/audiobox-critical.png","Console-red":"assets/images/gaming-critical.png","Wi-Fi IoT-red":"assets/images/iot-critical.png","Wi Fi IoT-red":"assets/images/iot-critical.png","Wifi IoT-red":"assets/images/iot-critical.png","Computer-red":"assets/images/computer-critical.png","Printer-red":"assets/images/printer-critical.png","Network-red":"assets/images/network-critical.png","Voip-red":"assets/images/voip-critical.png","Fridge-red":"assets/images/iot-critical.png","iot-red":"assets/images/iot-critical.png"},this.ssid="",this.radio="",this.ethOrAPType="",this.ethOrAPImageUrl="",this.accessPointImages={yellow:"assets/images/access-point-minor-issues.mp4",green:"assets/images/access-point-clear.png",red:"assets/images/access-point-critical.mp4"},this.apData={},this.apImageUrl="",this.apNodeData=[],this.apLinkData=[],this.dataForUploadDownLoadChart=[],this.dataForSignalStrengthChart=[],this.dataForClientScoreChart=[],this.dataSource1={},this.dataSource2={},R.Diagram.licenseKey="73f04ee5b03c08c702d90776423d6af919a17564cf814aa4090413f6eb0d6b06329dee7159d08ec9d4aa4dfa137ec989ddc26f79c74a523fe633d7d947e283f0b13774e71409458bf31136c5ccaa2ca1ae2870e0d2b676a1db678eede9"}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),document.getElementById("myDiagramDiv2").style.display="none",this.backBtnDisabled=!0,this.route.queryParams.subscribe(e=>{this.routerMac=e.routerMac,this.getData(),this.getAllClientsData(this.routerMac)})}ngAfterViewInit(){}dataGenerator(){this.sixHrsData=[],this.oneDayData=[];let e={},t={};e.data=[],t.data=[];for(let i=0;i<=12;i++){let i={value:Math.floor(100*Math.random())},s={value:Math.floor(100*Math.random())};e.data.push(i),t.data.push(s)}}chartTimeChange(e){this.menuActive=e,"2 Hours"==e?(this.data.categories=[{category:this.twoHrsCategory}],this.data.dataset=this.dataForUploadDownLoadChart):"6 Hours"==e?(this.data.categories=[{category:this.sixHrsCategory}],this.dataGenerator(),this.data.dataset=this.sixHrsData):"1 Day"==e?(this.data.categories=[{category:this.oneDayCategory}],this.dataGenerator(),this.data.dataset=this.oneDayData):"1 Week"==e&&(this.data.categories=[{category:this.weekCategory}],this.data.dataset=[])}hideDDMenu(){document.getElementById("myDropdown")&&document.getElementById("myDropdown").classList.contains("show")&&document.getElementById("myDropdown").classList.remove("show")}rangeFilter(e){this.closeDevicesSplit=!1,this.mediumDevicesSplit=!1,this.farDevicesSplit=!1,this.closeDevicesArray=[],this.mediumDevicesArray=[],this.farDevicesArray=[],e.forEach(e=>{"close"==e["client-distance"]?this.closeDevicesArray.push(e):"medium"==e["client-distance"]?this.mediumDevicesArray.push(e):"far"==e["client-distance"]&&this.farDevicesArray.push(e)}),this.closeDevicesArray.length>4&&(this.closeDevicesSplit=!0),this.mediumDevicesArray.length>4&&(this.mediumDevicesSplit=!0),this.farDevicesArray.length>4&&(this.farDevicesSplit=!0)}deviceTypeChange(e){if(this.selectedDeviceType=null!=e?e["client-type"]:"All","All"==this.selectedDeviceType)this.rangeFilter(this.deviceDataWithAll);else{let e=this.deviceDataWithAll.filter(e=>e["client-type"]==this.selectedDeviceType);this.rangeFilter(e)}this.selectedHostName=void 0,this.selectedMacAddress=void 0}hostNameChange(e){if(this.selectedHostName=null!=e?e.hostname:"All","All"==this.selectedHostName)this.rangeFilter(this.deviceDataWithAll);else{let e=this.deviceDataWithAll.filter(e=>e.hostname==this.selectedHostName);this.rangeFilter(e)}this.selectedDeviceType=void 0,this.selectedMacAddress=void 0}macAddressChange(e){if(this.selectedMacAddress=null!=e?e.key6:"All","All"==this.selectedMacAddress)this.rangeFilter(this.deviceDataWithAll);else{let e=this.deviceDataWithAll.filter(e=>e.key6==this.selectedMacAddress);this.rangeFilter(e)}this.selectedHostName=void 0,this.selectedDeviceType=void 0}imageDblClick(e){document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="block",this.topologyView=!1,this.tableView=!0,this.currentPage="table",this.VisitedPage="middle",this.nextVisitedPage="table",this.deviceDatasUpdated=[],0==e||this.deviceDatasUpdated.push(e),this.clientData=e,this.getClientData(e.mac)}rangeDeviceFilter(e){0==e?(this.rangeFilter(this.deviceDatas),this.deviceDataWithAll=this.deviceDatas,this.deviceDataWithAll.unshift(this.allObject)):(this.dataArray=this.deviceDatas.filter(t=>t.key1==e),this.rangeFilter(this.dataArray),this.deviceDataWithAll=this.dataArray,this.deviceDataWithAll.unshift(this.allObject))}customSort(e,t){return"PASS"===e["signal-strength-test-result"]&&"PASS"===t["signal-strength-test-result"]&&"PASS"===e["legacy-device-test-result"]&&"PASS"===t["legacy-device-test-result"]?1:-1}loadfirst(){this.currentPage="main";let e=this.$;t&&(t.div=null);var t=e(R.Diagram,"myDiagramDiv1",{initialContentAlignment:R.Spot.Center,"undoManager.isEnabled":!0,initialAutoScale:R.Diagram.UniformToFill,layout:e(R.LayeredDigraphLayout,{direction:0,layerSpacing:110,columnSpacing:33,linkSpacing:7,isOngoing:!1})});function i(e,t){e.data.isCollapsed||(e.diagram.model.setDataProperty(e.data,"isCollapsed",!0),e!==t&&e.diagram.model.setDataProperty(e.data,"visible",!1),e.findNodesOutOf().each(i))}function s(e,t){!e.data.isCollapsed||(e.diagram.model.setDataProperty(e.data,"isCollapsed",!1),e!==t&&e.diagram.model.setDataProperty(e.data,"visible",!0),e.findNodesOutOf().each(s))}t.toolManager.toolTipDuration=6e4,t.toolManager.hoverDelay=500,R.Shape.getArrowheadGeometries().toKeySet().toArray(),e(R.Adornment,"Spot",{background:"transparent",mouseLeave:function(e,t){t.part.adornedPart.removeAdornment("mouseHover")}},e(R.Placeholder,{background:"transparent",isActionable:!0,click:function(e,t){var i=t.part.adornedPart;i.diagram.select(i)}}),e("Button",{alignment:R.Spot.TopCenter,alignmentFocus:R.Spot.TopCenter},{click:(e,t)=>{this.dblClkFired=!1,this.accessPointId=t.part.data.accessPointId,this.VisitedPage="main",this.routerKey=t.part.data.key,this.getAPData(t.part.data.key,!0,"")}},e(R.TextBlock,"+"))),t.nodeTemplate=e(R.Node,"Auto",new R.Binding("visible"),e(R.Shape,{width:150,height:130,margin:4,fill:null,strokeWidth:2}),{background:"white",fromSpot:R.Spot.RightSide,toSpot:R.Spot.LeftSide,selectionAdorned:!1},e(R.Panel,"Horizontal",e(R.Picture,{width:70,height:70},new R.Binding("source","source",function(e){return e||""}),new R.Binding("element","source-video",function(e){return e||""})),e(R.Panel,"Vertical",new R.Binding("width","label",function(e){return e?70:0}),new R.Binding("height","label",function(e){return e?110:0}),e(R.Panel,"Vertical",{margin:new R.Margin(40,0,0,0)},new R.Binding("background","label",function(e){return e?"#eaeaea":""}),new R.Binding("padding","label",function(e){return e?10:""}),e(R.TextBlock,{margin:new R.Margin(0,0,0,0),maxSize:new R.Size(100,30),isMultiline:!1},new R.Binding("text","label",function(e){return e||""}))),e("Button",{visible:!1,margin:new R.Margin(15,0,0,0)},new R.Binding("visible","isTreeLeaf",function(e){return!e}).ofObject(),e(R.Shape,{name:"ButtonIcon",figure:"MinusLine",desiredSize:new R.Size(8,8)},new R.Binding("figure","isCollapsed",function(e){return e?"PlusLine":"MinusLine"})),{click:function(e,t){e.diagram.startTransaction();var a=t.part;a.data.isCollapsed?s(a,a):i(a,a),e.diagram.commitTransaction("toggled visibility of dependencies")}}))),e(R.Panel,"Auto",new R.Binding("margin","label",function(e){return e?new R.Margin(-65,0,0,50):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Circle",{width:24,height:24,fill:"white",stroke:"green",strokeWidth:2,margin:5,visible:!1,click:(e,t)=>{"internet"!==t.part.data.key&&"ethernet"!==t.part.data.key&&(this.lastDeviceClickData=t.part.data,this.apInformtion=t.part.data["rg-tech-notes"],this.accessPointId=t.part.data.accessPointId,this.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.dblClkFired=!0,this.getAPData(t.part.data.key,"",!0),this.showChart=!1,this.phyChecked=t.part.data.customFilterObj.phyChecked,this.legacyChecked=t.part.data.customFilterObj.legacyChecked,this.successFilterEnabled=!0)}},new R.Binding("visible","passed-clients",function(e){return e||!1})),e(R.TextBlock,{click:(e,t)=>{"internet"!==t.part.data.key&&"ethernet"!==t.part.data.key&&(this.lastDeviceClickData=t.part.data,this.apInformtion=t.part.data["rg-tech-notes"],this.accessPointId=t.part.data.accessPointId,this.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.dblClkFired=!0,this.getAPData(t.part.data.key,"",!0),this.showChart=!1,this.phyChecked=t.part.data.customFilterObj.phyChecked,this.legacyChecked=t.part.data.customFilterObj.legacyChecked,this.successFilterEnabled=!0)},margin:5},new R.Binding("text","passed-clients",function(e){return e||""}))),e(R.Panel,"Auto",new R.Binding("margin","label",function(e){return e?new R.Margin(-45,0,0,90):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Circle",{width:24,height:24,fill:"white",stroke:"orange",strokeWidth:2,margin:5,visible:!1,click:(e,t)=>{"internet"!==t.part.data.key&&"ethernet"!==t.part.data.key&&(this.lastDeviceClickData=t.part.data,this.apInformtion=t.part.data["ap-tech-note"],this.accessPointId=t.part.data.accessPointId,this.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.dblClkFired=!0,this.getAPData(t.part.data.key,"",!0),this.showChart=!1,this.phyChecked=t.part.data.customFilterObj.phyChecked,this.legacyChecked=t.part.data.customFilterObj.legacyChecked,this.filterEnabled=!0)},toolTip:e("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},e(R.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new R.Binding("text","failedClientsNote")))},new R.Binding("visible","failed-clients",function(e){return e||!1})),e(R.TextBlock,{click:(e,t)=>{"internet"!==t.part.data.key&&"ethernet"!==t.part.data.key&&(this.lastDeviceClickData=t.part.data,this.apInformtion=t.part.data["ap-tech-note"],this.accessPointId=t.part.data.accessPointId,this.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.dblClkFired=!0,this.getAPData(t.part.data.key,"",!0),this.showChart=!1,this.phyChecked=t.part.data.customFilterObj.phyChecked,this.legacyChecked=t.part.data.customFilterObj.legacyChecked,this.filterEnabled=!0)},margin:5,toolTip:e("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},e(R.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new R.Binding("text","failedClientsNote")))},new R.Binding("text","failed-clients",function(e){return e||""}))),e(R.Panel,"Auto",new R.Binding("margin","label",function(e){return e?new R.Margin(-65,0,0,3):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Square",{width:15,height:15,fill:"#eaeaea",stroke:"black",strokeWidth:1,margin:5,visible:!1,click:(e,t)=>{this.dblClkFired=!1,this.accessPointId=t.part.data.accessPointId,this.lastDeviceClickData=t.part.data,this.VisitedPage="main",this.routerKey=t.part.data.key,this.getAPData(t.part.data.key,!0,"")}},new R.Binding("visible","showBtn",function(e){return e||!1})),e(R.TextBlock,{click:(e,t)=>{this.dblClkFired=!1,this.accessPointId=t.part.data.accessPointId,this.lastDeviceClickData=t.part.data,this.VisitedPage="main",this.routerKey=t.part.data.key,this.getAPData(t.part.data.key,!0,"")}},new R.Binding("text","showBtn",function(e){return e?"+":""}))),{click:(e,t)=>{this.apInformtion=t.part.data["ap-tech-note"]?t.part.data["ap-tech-note"]:t.part.data["rg-tech-notes"]},mouseHover:function(e,t){},contextClick:(e,t)=>{alert("Right Clicked on "+t.part.data.key)},doubleClick:(e,t)=>{"internet"!==t.part.data.key&&"ethernet"!==t.part.data.key&&(this.accessPointId=t.part.data.accessPointId,this.VisitedPage="main",document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.dblClkFired=!0,this.getAPData(t.part.data.key,"",!0),this.showChart=!1)},toolTip:e("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},e(R.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new R.Binding("text","text")))}),t.nodes.each(function(e){let t=e.part;"01:00:00:00:00:01"==e.part.key&&i(t,t)}),t.linkTemplate=e(R.Link,{curve:R.Link.Bezier,toShortLength:6,relinkableFrom:!0,relinkableTo:!0},e(R.Shape,{strokeWidth:3,width:200},new R.Binding("stroke","color"),new R.Binding("strokeWidth","thick")),{toolTip:e("ToolTip",e(R.TextBlock,{margin:2},new R.Binding("text","",function(e){return`${e.name}`})))}),t.model=new R.GraphLinksModel(this.nodeDataArray,this.linkDataArray),this.diagramRedrawInt=setInterval(()=>{t.redraw()},600)}second(e,t){this.apInformtion="",this.VisitedPage="main",this.routerKey=e,this.currentPage="middle",t&&(this.nextVisitedPage="middle",this.nextRouterKey=e),this.topologyView=!0,this.tableView=!1,document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="block",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.myDiagramDiv2&&(this.myDiagramDiv2.div=null);let i=this.$;this.myDiagramDiv2=i(R.Diagram,"apTopologyView",{initialContentAlignment:R.Spot.Center,"undoManager.isEnabled":!0,initialAutoScale:R.Diagram.UniformToFill,layout:i(R.LayeredDigraphLayout,{direction:0,layerSpacing:100,columnSpacing:7})}),setInterval(()=>{this.myDiagramDiv2.redraw()},60),this.myDiagramDiv2.nodeTemplate=i(R.Node,"Auto",{background:"white",selectionAdorned:!1},i(R.Panel,"Horizontal"),i(R.Picture,{width:65,height:65},new R.Binding("width","isClient",function(e){return e?35:65}),new R.Binding("height","isClient",function(e){return e?35:65}),new R.Binding("source","source",function(e){return e||""}),new R.Binding("element","source-video",function(e){return e||""})),i(R.Panel,"Vertical",new R.Binding("margin","label",function(e){return e?new R.Margin(110,0,0,0):""}),new R.Binding("background","label",function(e){return e?"#eaeaea":""}),new R.Binding("padding","label",function(e){return e?3:""}),i(R.TextBlock,{margin:new R.Margin(0,0,0,0),maxSize:new R.Size(100,30),isMultiline:!1},new R.Binding("text","label",function(e){return e||""}))),{click:(e,t)=>{"ethernet"===t.part.data.key||"ap"===t.part.data.key||(t.part.data.isClient?this.imageDblClick(t.part.data):this.showTableView("",!1))},toolTip:i("ToolTip",{"Border.stroke":"#2a6dc0","Border.strokeWidth":1},i(R.TextBlock,"Arrowheads",{margin:4},{font:"bold 12px sans-serif"},new R.Binding("text","text")))}),this.myDiagramDiv2.linkTemplate=i(R.Link,{curve:R.Link.Bezier,toShortLength:6,relinkableFrom:!0,relinkableTo:!0},i(R.Shape,new R.Binding("stroke","color"),new R.Binding("strokeWidth","thick")),{toolTip:i("ToolTip",i(R.TextBlock,{margin:2},new R.Binding("text","",function(e){return`${e.name}`})))});var s=i(R.GraphLinksModel);s.nodeDataArray=this.apNodeData,s.linkDataArray=this.apLinkData,this.myDiagramDiv2.model=s}goBack(){this.showChart=!1,this.hideDDMenu(),this.tableView?(this.tableView=!1,this.topologyView=!0):(this.tableView=!0,this.topologyView=!1),"main"===this.VisitedPage?(this.tableView=!1,this.topologyView=!0,this.getAllClientsData(this.routerMac),this.currentPage="main",document.getElementById("myDiagramDiv1").style.display="block",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!0,this.nextRouterKey=this.routerKey,this.nextVisitedPage=this.dblClkFired?"table":"middle"):"middle"===this.VisitedPage&&this.second(this.routerKey)}goForward(){"middle"===this.nextVisitedPage?this.second(this.nextRouterKey):"table"===this.nextVisitedPage&&(document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="none",this.backBtnDisabled=!1,this.showTableView(this.nextTabledataUniqueId,this.dblClkFired))}loadTabledata(e){if(this.deviceDatasUpdated=[],!e)if(this.accessPointId){this.deviceDatasUpdated=[];for(let e=0;e<this.deviceDatas.length;e++)this.deviceDatas[e].key1===this.accessPointId&&this.deviceDatasUpdated.push(this.deviceDatas[e])}else"All"==this.deviceDatas[0].type?(this.deviceDatas.shift(),this.deviceDatasUpdated=this.deviceDatas):this.deviceDatasUpdated=this.deviceDatas}loadTopologyDataByType(e){this.tplgyType=e,this.deviceDatasUpdated=[];for(let t=0;t<this.deviceDatas.length;t++)this.deviceDatas[t].deviceType===e&&"All"!=this.deviceDatas[t].deviceType&&this.deviceDatasUpdated.push(this.deviceDatas[t])}loadTopologydata(){if(event.stopImmediatePropagation(),this.hideDDMenu(),this.topologyView=!0,this.tableView=!1,this.deviceDatasUpdated=[],this.topologyData={phy:[],legacy:[],clientWifi:[]},this.deviceDatas.length){for(let e=0;e<this.deviceDatas.length;e++)"phy"===this.deviceDatas[e].deviceType?this.topologyData.phy.push(this.deviceDatas[e]):"legacy"===this.deviceDatas[e].deviceType?this.topologyData.legacy.push(this.deviceDatas[e]):this.topologyData.clientWifi.push(this.deviceDatas[e]);this.loadTopologyDataByType("phy")}this.VisitedPage=this.currentPage,document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="block",this.backBtnDisabled=!1}filterByLegacyType(e){this.legacyChecked=!!e.target.checked,this.filterTableData()}filterByPhyType(e){this.phyChecked=!!e.target.checked,this.filterTableData()}filterTableData(){if(this.deviceDatasUpdated=this.deviceDatas,this.legacyChecked||this.phyChecked){this.deviceDatasUpdated=[];for(let e=0;e<this.deviceDatas.length;e++)("PASS"!==this.deviceDatas[e]["legacy-device-test-result"]&&this.legacyChecked||"PASS"!==this.deviceDatas[e]["signal-strength-test-result"]&&this.phyChecked||"PASS"!==this.deviceDatas[e]["phy-rate-test-result"]&&this.phyChecked)&&this.deviceDatasUpdated.push(this.deviceDatas[e])}this.setCustomFilterInTable()}filterTableSuccessData(){this.deviceDatasUpdated=[];for(let e=0;e<this.deviceDatas.length;e++)"PASS"===this.deviceDatas[e]["legacy-device-test-result"]&&"PASS"===this.deviceDatas[e]["signal-strength-test-result"]&&this.deviceDatasUpdated.push(this.deviceDatas[e]);this.setCustomFilterInTable()}showTableView(e,t){event.stopImmediatePropagation(),this.topologyView=!1,this.tableView=!0,this.currentPage="table",this.deviceDatasUpdated=this.deviceDatasUpdated.filter(function(e){return"All"!==e["client-type"]}),this.VisitedPage=t?"main":"middle",this.nextVisitedPage="table",this.nextTabledataUniqueId=e,document.getElementById("myDiagramDiv1").style.display="none",document.getElementById("myDiagramDiv2").style.display="none",document.getElementById("card2").style.display="block",this.backBtnDisabled=!1}openMenu(){event.stopImmediatePropagation(),document.getElementById("myDropdown").classList.toggle("show")}play(){return!0}getData(){this.routerMac||(this.routerMac="01:00:00:00:00:01"),this.spinner.show();let e=`http://52.12.71.176:8080/topology/landing/${this.routerMac}`;e="assets/data/rg.json",this.orgId=this.ssoAuthService.getOrgId(),this.serialNo=this.ssoAuthService.getSerialNo(),this.http.get("assets/data/rg.json").subscribe(e=>{var t,i,s,a,n,r;this.spinner.hide();let o=[],l=[],d=this.accessPointImages,h={text:`MAC : ${null===(i=null===(t=null==e?void 0:e.landing)||void 0===t?void 0:t.uplink)||void 0===i?void 0:i.mac} \n Download Rate : ${null===(a=null===(s=null==e?void 0:e.landing)||void 0===s?void 0:s.uplink)||void 0===a?void 0:a.downloadRate} Mbps \n Upload Rate : ${null===(r=null===(n=null==e?void 0:e.landing)||void 0===n?void 0:n.uplink)||void 0===r?void 0:r.uploadRate} Mbps `,source:"assets/images/internet.png",key:"internet",accessPointId:""},c={text:"Ethernet ",source:"assets/images/tar.png",key:"ethernet",accessPointId:""};if(e.landing&&e.landing.rg&&e.landing.rg.aps){let t;if(t=e.landing.rg.online?"green":"red",o.push(h),l.push({from:h.key,to:e.landing.rg.mac,color:t,thick:3,routing:R.Link.Normal,name:h.text}),e.landing.rg.text=`Ip address : ${e.landing.rg.ip} \n MAC : ${e.landing.rg.mac} \n Version : ${e.landing.rg.version} \n Device : ${e.landing.rg.hostname} \n`,e.landing.rg.source=e.landing.rg.online?"assets/images/alarm-all-clear.png":"assets/images/router-critical-state.png",e.landing.rg.key=e.landing.rg.mac,e.landing.rg.accessPointId="",e.landing.rg.label=`${e.landing.rg.hostname}`,e.landing.rg.failedClientsNote="",e.landing.rg.showBtn=!0,e.landing.rg.customFilterObj={legacyChecked:!1,phyChecked:!1},e.landing.rg["failed-clients"]){let t="",i=1;for(let s=0;s<e.landing.rg.clients.length;s++)("FAIL"==e.landing.rg.clients[s]["phy-rate-test-result"]||"FAIL"==e.landing.rg.clients[s]["signal-strength-test-result"]||"FAIL"==e.landing.rg.clients[s]["legacy-device-test-result"])&&("FAIL"==e.landing.rg.clients[s]["legacy-device-test-result"]?(e.landing.rg.customFilterObj.legacyChecked=!0,t+=`${i}) ${e.landing.rg.clients[s].hostname} : ${e.landing.rg.clients[s]["client-note"]} \n`):("FAIL"==e.landing.rg.clients[s]["signal-strength-test-result"]||"FAIL"==e.landing.rg.clients[s]["phy-rate-test-result"])&&(e.landing.rg.customFilterObj.phyChecked=!0,t+=`${i}) ${e.landing.rg.clients[s].hostname} : ${e.landing.rg.clients[s]["client-note"]} \n`),i++);e.landing.rg.failedClientsNote=t}o.push(e.landing.rg);let i=e.landing.rg.aps;for(let s=0;s<i.length;s++)if(i[s]&&i[s]["int-type"]){if(i[s].text=`Ip address : ${i[s].ip}\n MAC : ${i[s].mac} \n Version : ${i[s].version} \n Device : ${i[s].hostname} \n Note : ${i[s]["ap-tech-note"]} \n`,"green"===i[s]["ap-color"]&&(i[s].source=d[i[s]["ap-color"]]?d[i[s]["ap-color"]]:"assets/images/access-point-clear.png"),"green"!==i[s]["ap-color"]){let e=d[i[s]["ap-color"]],t=document.createElement("video");t.setAttribute("preload","auto"),t.setAttribute("type","video/mp4"),t.autoplay=!0,t.setAttribute("width","320"),t.setAttribute("height","240"),t.src=e,t.loop=!0,i[s]["source-video"]=t}if(i[s].key=i[s].mac,i[s].accessPointId="CXNK005A77E9",i[s].label=`${i[s].hostname}`,i[s].showBtn=!0,i[s].failedClientsNote="",i[s].customFilterObj={legacyChecked:!1,phyChecked:!1},i[s]["failed-clients"]){let e="",t=1;for(let a=0;a<i[s].clients.length;a++)("FAIL"==i[s].clients[a]["phy-rate-test-result"]||"FAIL"==i[s].clients[a]["signal-strength-test-result"]||"FAIL"==i[s].clients[a]["legacy-device-test-result"])&&("FAIL"==i[s].clients[a]["legacy-device-test-result"]?(i[s].customFilterObj.legacyChecked=!0,e+=`${t}) ${i[s].clients[a].hostname}: ${i[s].clients[a]["client-note"]} \n`):("FAIL"==i[s].clients[a]["signal-strength-test-result"]||"FAIL"==i[s].clients[a]["phy-rate-test-result"])&&(i[s].customFilterObj.phyChecked=!0,e+=`${t}) ${i[s].clients[a].hostname}: ${i[s].clients[a]["client-note"]} \n`),t++);i[s].failedClientsNote=e}if("UNKNOWN"===i[s]["int-type"]&&(i[s].source="assets/images/cloud.png",i[s]["failed-clients"]=e.landing.rg["failed-clients"],i[s]["passed-clients"]=e.landing.rg["passed-clients"],i[s].failedClientsNote=e.landing.rg.failedClientsNote,i[s].customFilterObj=e.landing.rg.customFilterObj,i[s].label="Unknown",e.landing.rg["failed-clients"]=0,e.landing.rg["passed-clients"]=0,e.landing.rg.showBtn=!1),i[s].backhaul["rx-phy-rate"]=this.bytesToSize(i[s].backhaul["rx-phy-rate"]?i[s].backhaul["rx-phy-rate"]:0),i[s].backhaul["tx-phy-rate"]=this.bytesToSize(i[s].backhaul["tx-phy-rate"]?i[s].backhaul["tx-phy-rate"]:0),o.push(i[s]),"eth"===i[s]["int-type"]?(t="black",o.push(c),l.push({from:e.landing.rg.mac,to:c.key,color:t,thick:3,routing:R.Link.Normal,name:`${e.landing.rg.hostname} to Ethernet`}),l.push({from:c.key,to:i[s].mac,color:t,thick:3,routing:R.Link.Normal,name:`Ethernet to ${i[s].hostname}`})):(t=i[s].backhaul["backhaul-color"],"yellow"===t&&(t="#e0b34c"),l.push({from:e.landing.rg.mac,to:i[s].mac,color:t,thick:3,routing:R.Link.Normal,name:`Transmit rate: ${i[s].backhaul["tx-phy-rate"]} \n Receive rate: ${i[s].backhaul["rx-phy-rate"]}`})),i[s].aps.length)for(let a=0;a<i[s].aps.length;a++)if(i[s].aps[a]){if(i[s].aps[a].text=`Ip address : ${i[s].aps[a].ip} \n MAC : ${i[s].aps[a].mac} \n Version : ${i[s].aps[a].version} \n Device : ${i[s].aps[a].hostname} \n Note : ${i[s].aps[a]["ap-tech-note"]}`,"green"===i[s].aps[a]["ap-color"]&&(i[s].aps[a].source=d[i[s].aps[a]["ap-color"]]?d[i[s].aps[a]["ap-color"]]:"assets/images/access-point-clear.png"),"green"!==i[s].aps[a]["ap-color"]){let e=d[i[s].aps[a]["ap-color"]],t=document.createElement("video");t.setAttribute("preload","auto"),t.setAttribute("type","video/mp4"),t.autoplay=!0,t.setAttribute("width","320"),t.setAttribute("height","240"),t.src=e,t.loop=!0,i[s].aps[a]["source-video"]=t}if(i[s].aps[a].key=i[s].aps[a].mac,i[s].aps[a].accessPointId="CXNK005A77E9",i[s].aps[a].backhaul["rx-phy-rate"]=this.bytesToSize(i[s].aps[a].backhaul["rx-phy-rate"]?i[s].aps[a].backhaul["rx-phy-rate"]:0),i[s].aps[a].backhaul["tx-phy-rate"]=this.bytesToSize(i[s].aps[a].backhaul["tx-phy-rate"]?i[s].aps[a].backhaul["tx-phy-rate"]:0),i[s].aps[a].label=`${i[s].aps[a].hostname}`,i[s].aps[a].showBtn=!0,i[s].aps[a].failedClientsNote="",i[s].aps[a].customFilterObj={legacyChecked:!1,phyChecked:!1},i[s].aps[a]["failed-clients"]){let e="",t=1;for(let n=0;n<i[s].aps[a].clients.length;n++)("FAIL"==i[s].aps[a].clients[n]["phy-rate-test-result"]||"FAIL"==i[s].aps[a].clients[n]["signal-strength-test-result"]||"FAIL"==i[s].aps[a].clients[n]["legacy-device-test-result"])&&("FAIL"==i[s].aps[a].clients[n]["legacy-device-test-result"]?(i[s].aps[a].customFilterObj.legacyChecked=!0,e+=`${t}) ${i[s].aps[a].clients[n].hostname} :  ${i[s].aps[a].clients[n]["client-note"]} \n`):("FAIL"==i[s].aps[a].clients[n]["signal-strength-test-result"]||"FAIL"==i[s].aps[a].clients[n]["phy-rate-test-result"])&&(i[s].aps[a].customFilterObj.phyChecked=!0,e+=`${t}) ${i[s].aps[a].clients[n].hostname} :  ${i[s].aps[a].clients[n]["client-note"]} \n`),t++);i[s].aps[a].failedClientsNote=e}if(o.push(i[s].aps[a]),"eth"===i[s].aps[a]["int-type"]?(t="black",o.push(c),l.push({from:i[s].mac,to:c.key,color:"#546caf",thick:3,routing:R.Link.Normal,name:`Internet to ${e.landing.rg.hostname}`}),l.push({from:c.key,to:i[s].aps[a].mac,color:t,thick:3,routing:R.Link.Normal,name:`${i[s].hostname} to ${i[s].aps[a].hostname}`})):(t=i[s].aps[a].backhaul["backhaul-color"],"yellow"===t&&(t="#e0b34c"),l.push({from:i[s].mac,to:i[s].aps[a].mac,color:t,thick:3,routing:R.Link.Normal,name:`Transmit rate: ${i[s].aps[a].backhaul["tx-phy-rate"]} \n Receive rate: ${i[s].aps[a].backhaul["rx-phy-rate"]}`})),i[s].aps[a].aps.length)for(let n=0;n<i[s].aps[a].aps.length;n++)if(i[s].aps[a].aps[n]){if(i[s].aps[a].aps[n].text=`Ip address : ${i[s].aps[a].aps[n].ip} \n MAC : ${i[s].aps[a].aps[n].mac} \n Version : ${i[s].aps[a].aps[n].version} \n Device : ${i[s].aps[a].aps[n].hostname} \n Note : ${i[s].aps[a].aps[n]["ap-tech-note"]}`,"green"===i[s].aps[a].aps[n]["ap-color"]&&(i[s].aps[a].aps[n].source=d[i[s].aps[a].aps[n]["ap-color"]]?d[i[s].aps[a].aps[n]["ap-color"]]:"assets/images/access-point-clear.png"),"green"!==i[s].aps[a].aps[n]["ap-color"]){let e=d[i[s].aps[a].aps[n]["ap-color"]],t=document.createElement("video");t.setAttribute("preload","auto"),t.setAttribute("type","video/mp4"),t.autoplay=!0,t.setAttribute("width","320"),t.setAttribute("height","240"),t.src=e,t.loop=!0,i[s].aps[a].aps[n]["source-video"]=t}if(i[s].aps[a].aps[n].key=i[s].aps[a].aps[n].mac,i[s].aps[a].aps[n].accessPointId="CXNK00207B91",i[s].aps[a].aps[n].backhaul["rx-phy-rate"]=this.bytesToSize(i[s].aps[a].aps[n].backhaul["rx-phy-rate"]?i[s].aps[a].aps[n].backhaul["rx-phy-rate"]:0),i[s].aps[a].aps[n].backhaul["tx-phy-rate"]=this.bytesToSize(i[s].aps[a].aps[n].backhaul["tx-phy-rate"]?i[s].aps[a].aps[n].backhaul["tx-phy-rate"]:0),i[s].aps[a].aps[n].label=`${i[s].aps[a].aps[n].hostname}`,i[s].aps[a].aps[n].showBtn=!0,i[s].aps[a].aps[n].failedClientsNote="",i[s].aps[a].aps[n].customFilterObj={legacyChecked:!1,phyChecked:!1},i[s].aps[a].aps[n]["failed-clients"]){let e="",t=1;for(let r=0;r<i[s].aps[a].aps[n].clients.length;r++)("FAIL"==i[s].aps[a].aps[n].clients[r]["phy-rate-test-result"]||"FAIL"==i[s].aps[a].aps[n].clients[r]["signal-strength-test-result"]||"FAIL"==i[s].aps[a].aps[n].clients[r]["legacy-device-test-result"])&&("FAIL"==i[s].aps[a].aps[n].clients[r]["legacy-device-test-result"]?(i[s].aps[a].aps[n].customFilterObj.legacyChecked=!0,e+=`${t}) ${i[s].aps[a].aps[n].clients[r].hostname} : ${i[s].aps[a].aps[n].clients[r]["client-note"]} \n`):("FAIL"==i[s].aps[a].aps[n].clients[r]["signal-strength-test-result"]||"FAIL"==i[s].aps[a].aps[n].clients[r]["phy-rate-test-result"])&&(i[s].aps[a].aps[n].customFilterObj.phyChecked=!0,e+=`${t}) ${i[s].aps[a].aps[n].clients[r].hostname} : ${i[s].aps[a].aps[n].clients[r]["client-note"]} \n`),t++);i[s].aps[a].aps[n].failedClientsNote=e}o.push(i[s].aps[a].aps[n]),"eth"===i[s].aps[a].aps[n]["int-type"]?(t="black",o.push(c),l.push({from:i[s].aps[a].mac,to:c.key,color:"#546caf",thick:3,routing:R.Link.Normal,name:`Internet to ${e.landing.rg.hostname}`}),l.push({from:c.key,to:i[s].aps[a].aps[n].mac,color:t,thick:3,routing:R.Link.Normal,name:`${i[s].aps[a].hostname} to ${i[s].aps[a].aps[n].hostname}`})):(t=i[s].aps[a].aps[n].backhaul["backhaul-color"],"yellow"===t&&(t="#e0b34c"),l.push({from:i[s].aps[a].mac,to:i[s].aps[a].aps[n].mac,color:t,thick:3,routing:R.Link.Normal,name:`Transmit rate: ${i[s].aps[a].aps[n].backhaul["tx-phy-rate"]} \n Receive rate: ${i[s].aps[a].aps[n].backhaul["rx-phy-rate"]}`}))}}}this.nodeDataArray=o,this.linkDataArray=l,this.loadfirst()}},e=>{})}switchView(){if(event.stopImmediatePropagation(),this.topologyView)return this.deviceDatasUpdated=this.deviceDatas,this.showTableView("","main"==this.currentPage),this.phyChecked=!0,this.legacyChecked=!0,void this.filterTableData();this.tableView&&this.goBack()}onUserRowSelect(e){this.deviceDatasUpdated=[],this.deviceDatasUpdated.push(e.data),this.clientData=e.data,this.getClientData(e.data.mac)}getAPData(e,t,i){let s={0:"assets/images/no-wifi-signal.png",1:"assets/images/low-wifi-signal.png",2:"assets/images/all-green-wifi.png",3:"assets/images/all-green-wifi.png"};this.spinner.show(),this.apInformtion="","UNKNOWN"==this.lastDeviceClickData["int-type"]&&(e=this.routerMac),this.http.get(`http://52.12.71.176:8080/topology/ap_view/${e}`).subscribe(a=>{if(this.spinner.hide(),!a["ap-view"])return void this.goBack();this.apData=a["ap-view"].ap;let n=[],r=[],o=this.accessPointImages;this.ethOrAPType=this.lastDeviceClickData["int-type"];let l="",d="",h=o[this.apData["ap-color"]];this.ethOrAPType?"eth"===this.ethOrAPType?(this.ethOrAPImageUrl="assets/images/tar.png",d="Ethernet",l="ethernet"):"UNKNOWN"===this.ethOrAPType?(this.ethOrAPImageUrl="assets/images/alarm-all-clear.png",d="Router",l="router",h="assets/images/cloud.png"):(this.ethOrAPImageUrl="assets/images/access-point-clear.png",d="AP",l="ap"):(this.ethOrAPImageUrl="assets/images/internet.png",d="Internet",l="internet",h=this.lastDeviceClickData.online?"assets/images/alarm-all-clear.png":"assets/images/router-critical-state.png");let c,u={text:d,source:this.ethOrAPImageUrl,key:l};if(c=this.apData["ap-color"],this.apLinkTooolTip=this.apData.backhaul["tx-phy-rate"]?`Transmit Rate ${this.apData.backhaul["tx-phy-rate"]} \n Receive Rate ${this.apData.backhaul["rx-phy-rate"]}`:`Ethernet to ${this.apData.hostname}`,n.push(u),r.push({from:u.key,to:this.apData.mac,color:c,thick:"UNKNOWN"==this.lastDeviceClickData["int-type"]?0:3,routing:R.Link.Normal,name:this.apLinkTooolTip}),this.apData.text=`Ip address : ${this.apData.ip} \n MAC : ${this.apData.mac} \n Version : ${this.apData.version} \n Device : ${this.apData.hostname} \n Note : ${this.apData["ap-tech-note"]} \n `,this.apData.source=h,"green"!==this.apData["ap-color"]&&"ap"==l){let e=o[this.apData["ap-color"]],t=document.createElement("video");t.autoplay=!0,t.setAttribute("width","320"),t.setAttribute("height","240"),t.src=e,t.loop=!0,t.setAttribute("preload","auto"),this.apData["source-video"]=t}this.apData.key=this.apData.mac,this.apData.label="UNKNOWN"==this.lastDeviceClickData["int-type"]?"Unknown":`${this.apData.hostname}`,n.push(this.apData);let g=a["ap-view"].clients;this.ethOrAPType=a["ap-view"].ap["int-type"],this.ethOrAPImageUrl="eth"===this.ethOrAPType?"assets/images/tar.png":"assets/images/access-point-clear.png",this.apImageUrl=o[a["ap-view"].ap["ap-color"]],this.apData=a["ap-view"].ap,this.apToolTip=`Ip address : ${this.apData.ip} \n MAC : ${this.apData.mac} \n Version : ${this.apData.version} \n Device : ${this.apData.hostname} \n Note : ${this.apData["ap-tech-note"]} \n `,this.apLinkTooolTip=this.apData.backhaul["tx-phy-rate"]?`Transmit Rate ${this.apData.backhaul["tx-phy-rate"]} \n Receive Rate ${this.apData.backhaul["rx-phy-rate"]}`:`Ethernet to ${this.apData.hostname}`,this.ssid=a["ap-view"].ap["radio-info"][0].ssid,this.radio=a["ap-view"].ap["radio-info"][0]["freq-band"]+"GHZ",this.deviceDatasUpdated=[];for(let e=0;e<g.length;e++)!g[e]||(g[e].radio=this.radio,g[e].accessPoint=g[e]["ap-hostname"]?g[e]["ap-hostname"]:g[e]["access-point-hostname"],g[e].image_url="far"==g[e]["client-distance"]&&this.imagesObj[g[e]["client-type"]+"-red"]?this.imagesObj[g[e]["client-type"]+"-red"]:this.imagesObj[g[e]["client-type"]],g[e].siganl_image={url:s[g[e]["signal-bars"]]?s[g[e]["signal-bars"]]:"assets/images/all-green-wifi.png","signal-strength":g[e]["signal-strength"]+" dB"},g[e]["signal-strength"]=g[e]["signal-strength"]+"dB",this.deviceDatasUpdated.push(g[e]),"eth"===g[e]["intf-type"]&&(g[e].isClient=!0,g[e].text=`Ip address : ${g[e]["ip-address"]} \n MAC : ${g[e].mac} \n Device : ${g[e].hostname} \n Note : ${g[e]["client-note"]} \n `,g[e].source=g[e].image_url,g[e].key=g[e].mac,g[e].label=`${g[e].hostname} - ${g[e]["client-type"]}`,n.push(g[e]),r.push({from:this.apData.key,to:g[e].mac,color:"black",thick:3,routing:R.Link.Normal,name:`Ethernet to ${g[e].hostname}`})));this.apNodeData=n,this.apLinkData=r,this.deviceDatasUpdated=this.deviceDatasUpdated.sort(this.customSort),this.deviceDatas=this.deviceDatasUpdated;let p={},m=[{"client-type":"All"}];for(let e=0;e<this.deviceDatas.length;e++)p[this.deviceDatas[e]["client-type"]]||(p[this.deviceDatas[e]["client-type"]]=!0,m.push(this.deviceDatas[e]));this.uniqueDevices=m;let v={},f=[{hostname:"All"}];for(let e=0;e<this.deviceDatas.length;e++)v[this.deviceDatas[e].hostname]||(v[this.deviceDatas[e].hostname]=!0,f.push(this.deviceDatas[e]));this.uniqueHostnames=f,i&&this.showTableView("",!0),t&&(this.second(e,!0),this.rangeDeviceFilter(0)),this.deviceDatas&&"All"==this.deviceDatas[0].type?(this.deviceDatas.shift(),this.deviceDatasUpdated=this.deviceDatas):this.deviceDatasUpdated=this.deviceDatas,this.filterEnabled?(this.filterEnabled=!1,this.filterTableData()):this.successFilterEnabled?(this.successFilterEnabled=!1,this.legacyChecked=!1,this.phyChecked=!1,this.filterTableSuccessData()):(this.legacyChecked=!0,this.phyChecked=!0,this.filterTableData())})}getClientData(e,t,i){let s={y_Client_Score:"Client Score","y_Downloaded MBytes":"Downloaded MBytes","y_Uploaded MBytes":"Uploaded MBytes","y_Signal Strength dBm":"Signal Strength dBm",time_value:"Time"};this.spinner.show(),this.http.get(`http://52.12.71.176:8080/topology/client/${e}`).subscribe(e=>{this.spinner.hide();let t=e.clients.pm_data,i=t.length;if(i){this.twoHrsData=[];for(let e=0;e<i;e++)if("time_value"===t[e].series_name){this.twoHrsCategory=[];let i=t[e].series_data.split(",");for(let e=0;e<i.length;e++)this.twoHrsCategory.push({label:i[e]})}else{let i=t[e].series_data.split(","),a=[];for(let e=0;e<i.length;e++)a.push({value:i[e]});this.twoHrsData.push({seriesname:s[t[e].series_name]?s[t[e].series_name]:t[e].series_name,data:a})}this.dataForClientScoreChart=[],this.dataForSignalStrengthChart=[],this.dataForUploadDownLoadChart=[];for(let e=0;e<this.twoHrsData.length;e++)"Client Score"===this.twoHrsData[e].seriesname?this.dataForClientScoreChart.push(this.twoHrsData[e]):"Signal Strength dBm"===this.twoHrsData[e].seriesname?this.dataForSignalStrengthChart.push(this.twoHrsData[e]):this.dataForUploadDownLoadChart.push(this.twoHrsData[e]);this.data={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:this.twoHrsCategory}],dataset:this.dataForUploadDownLoadChart},this.dataSource=this.data,this.dataSource1={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:this.twoHrsCategory}],dataset:this.dataForClientScoreChart},this.dataSource2={chart:{showhovereffect:"1",drawcrossline:"1",plottooltext:"<b>$dataValue</b> on $seriesName",theme:"fusion"},categories:[{category:this.twoHrsCategory}],dataset:this.dataForSignalStrengthChart},this.showChart=!0}})}getAllClientsData(e,t,i){let s={0:"assets/images/no-wifi-signal.png",1:"assets/images/low-wifi-signal.png",2:"assets/images/all-green-wifi.png",3:"assets/images/all-green-wifi.png"};this.spinner.show(),this.http.get(`http://52.12.71.176:8080/topology/subscriber_clients/${e}`).subscribe(a=>{this.spinner.hide();let n=a.clients;this.legacyChecked=!1,this.phyChecked=!1,this.deviceDatasUpdated=[];for(let e=0;e<n.length;e++)!n[e]||(n[e].ssid=this.ssid?this.ssid:"-",n[e].radio=this.radio?this.radio:"-",n[e].accessPoint=n[e]["ap-hostname"]?n[e]["ap-hostname"]:n[e]["access-point-hostname"],n[e].image_url=n[e]["signal-bars"]<2?this.imagesObj[n[e]["client-type"]+"-red"]?this.imagesObj[n[e]["client-type"]+"-red"]:this.imagesObj["iot-red"]:this.imagesObj[n[e]["client-type"]],n[e].siganl_image={url:s[n[e]["signal-bars"]]?s[n[e]["signal-bars"]]:"assets/images/all-green-wifi.png","signal-strength":n[e]["signal-strength"]+" dB"},n[e]["signal-strength"]=n[e]["signal-strength"]+"dB",this.deviceDatasUpdated.push(n[e]));this.deviceDatasUpdated=this.deviceDatasUpdated.sort(this.customSort),this.deviceDatas=this.deviceDatasUpdated,i&&this.showTableView("",!0),t&&(this.second(e,!0),this.rangeDeviceFilter(0))})}setCustomFilterInTable(){let e={},t=[];for(let i=0;i<this.deviceDatasUpdated.length;i++)e[this.deviceDatasUpdated[i].hostname]||(e[this.deviceDatasUpdated[i].hostname]=!0,t.push({value:this.deviceDatasUpdated[i].hostname,title:this.deviceDatasUpdated[i].hostname}));this.hostnameFilterData=t,this.settings.columns.hostname.filter.config.list=t,this.settings=Object.assign({},this.settings)}bytesToSize(e){return e+" Bytes"}ngOnDestroy(){this.diagramRedrawInt&&clearInterval(this.diagramRedrawInt)}responseFromStatus(e){this.loading=!1;let t=this.service.getSubscriberTabInfoData()?this.service.getSubscriberTabInfoData():"";if(t){let e=null==t?void 0:t.allIssues;this.issueData=null==e?void 0:e.filter(e=>this.codelist.indexOf(e.hasOwnProperty("code")?e.code.toUpperCase():e.Code.toUpperCase())>-1),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize()}}initalize(){for(let e=0;e<this.totalissues;e++)this.isIconClicked[e]=!1,this.primaryActionButton[e]=!1,this.Description[e]=" ",this.reason[e]=" ",this.severity[e]=" "}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(c.Q),n.Y36(r.s),n.Y36(q.eN),n.Y36(a.gz),n.Y36(H.t2),n.Y36(o.t6),n.Y36(h.F))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-topology"]],decls:27,vars:5,consts:[[3,"issues","responseFromIssuse","apiCallDone"],[1,"row"],[1,"col-12"],["class","loader load",4,"ngIf"],[1,"m-2"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/support/overview/issues","data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"Click"],[1,"big-text"],["routerLink","/support/overview/topology","data-toggle","tab","routerLinkActive","active",1,"nav-link","small"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],[1,"col-md-12"],["id","myDiagramDiv1",2,"width","100%","height","800px"],[1,"col-sm-6"],["id","myDiagramDiv2",2,"width","100%","height","300px"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(e,t){1&e&&(n.TgZ(0,"app-subscriber-menu",0),n.NdJ("apiCallDone",function(e){return t.responseFromStatus(e)}),n.qZA(),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.YNc(3,B,5,1,"div",3),n.TgZ(4,"section",4),n.TgZ(5,"div",1),n.TgZ(6,"div",5),n.TgZ(7,"ul",6),n.TgZ(8,"li",7),n.TgZ(9,"a",8),n.NdJ("Click",function(e){return e.preventDefault()}),n.TgZ(10,"span",9),n._uU(11),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"li",7),n.TgZ(13,"a",10),n.TgZ(14,"span",9),n._uU(15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",11),n.TgZ(17,"div",12),n._UZ(18,"div",13),n.qZA(),n.TgZ(19,"div",14),n._UZ(20,"div",13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",1),n.TgZ(22,"div",15),n._UZ(23,"div",16),n.qZA(),n.qZA(),n.TgZ(24,"div",1),n.TgZ(25,"div",17),n._UZ(26,"div",18),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("issues",t.issueData)("responseFromIssuse",t.apiCallDone),n.xp6(3),n.Q6J("ngIf",t.loading),n.xp6(8),n.Oqu(t.language.Issues),n.xp6(4),n.Oqu(t.language.Topology))},directives:[m.e,s.O5,a.yS,a.Od],styles:[""]}),e})();var U=i(65744),W=i(64762),G=i(79765),Y=i(54395),V=i(49342),J=i(91703);const z=["APDiagram"],Q=["searchValue"],j=["issueBox"];function K(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",15),n.TgZ(1,"span",16),n._UZ(2,"img",17),n.qZA(),n.TgZ(3,"button",18),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeAlert()}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",19),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("innerHtml",e.errorInfo,n.oJD)}}function X(e,t){if(1&e&&(n.TgZ(0,"li",20),n.TgZ(1,"a",21),n.TgZ(2,"span",7),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.MGl("routerLink","/",e.MODULE,"/overview/topology"),n.xp6(2),n.Oqu(e.language.Topology)}}function ee(e,t){if(1&e&&(n.TgZ(0,"li",22),n.TgZ(1,"a",21),n.TgZ(2,"span",7),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.MGl("routerLink","/",e.MODULE,"/overview/quality-of-experience"),n.xp6(2),n.Oqu(e.language["Quality of Experience"])}}function te(e,t){if(1&e&&(n.TgZ(0,"div",52),n.TgZ(1,"div",53),n.TgZ(2,"div",54),n.TgZ(3,"span",55),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw(3);n.xp6(4),n.Oqu(e.language.Loading)}}function ie(e,t){if(1&e&&(n.TgZ(0,"div",49,50),n.YNc(2,te,5,1,"div",51),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("ngIf",e.loading)}}function se(e,t){if(1&e&&(n.TgZ(0,"div",56),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e.language.nodata)}}function ae(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",64),n.TgZ(2,"span",65),n._uU(3),n.qZA(),n._uU(4," - "),n.TgZ(5,"span"),n._uU(6),n.qZA(),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(3),n.Oqu(e.name),n.xp6(3),n.Oqu(e.note)}}function ne(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p"),n.TgZ(2,"span",65),n._uU(3),n.qZA(),n._uU(4," - "),n.TgZ(5,"span"),n._uU(6),n.qZA(),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(3),n.Oqu(e.name),n.xp6(3),n.Oqu(e.note)}}function re(e,t){if(1&e&&(n.TgZ(0,"div",61),n.YNc(1,ne,7,2,"div",62),n.qZA()),2&e){const e=n.oxw(4);n.xp6(1),n.Q6J("ngForOf",e.clientArr)}}function oe(e,t){if(1&e&&(n.TgZ(0,"div",59),n.TgZ(1,"p",60),n._uU(2),n.qZA(),n.TgZ(3,"div",61),n.YNc(4,ae,7,2,"div",62),n.qZA(),n.YNc(5,re,2,1,"div",63),n.qZA()),2&e){const e=n.oxw(3);n.xp6(2),n.hij("",e.language.issue,":"),n.xp6(2),n.Q6J("ngForOf",e.rgArr),n.xp6(1),n.Q6J("ngIf",e.selectedAPValue)}}function le(e,t){if(1&e&&(n.TgZ(0,"div",null,57),n.YNc(2,oe,6,3,"div",58),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("ngIf",e.rgflag)}}const de=function(){return{standalone:!0}};function he(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1),n.TgZ(1,"div",23),n.TgZ(2,"div",24),n.TgZ(3,"div",25),n.TgZ(4,"label",26),n.TgZ(5,"span",27),n.NdJ("click",function(){return n.CHM(e),n.oxw().refreshClick()}),n._UZ(6,"i",28),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",29),n.TgZ(8,"div",30),n.TgZ(9,"div",31),n.TgZ(10,"input",32,33),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().searchText=t})("ngModelChange",function(){return n.CHM(e),n.oxw().searchDiagram()}),n.qZA(),n.TgZ(12,"div",34),n.TgZ(13,"img",35),n.NdJ("click",function(){return n.CHM(e),n.oxw().searchDiagram()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"label",36),n.TgZ(15,"input",37),n.NdJ("change",function(){return n.CHM(e),n.oxw().accessPoint()}),n.qZA(),n.TgZ(16,"span"),n._UZ(17,"small"),n.qZA(),n._uU(18),n.qZA(),n.TgZ(19,"div",38),n.TgZ(20,"div",39),n.TgZ(21,"span",40),n.NdJ("click",function(t){return n.CHM(e),n.oxw().changeScaleDiagram(t,"decrease")}),n._UZ(22,"img",41),n.qZA(),n.TgZ(23,"span",42),n.TgZ(24,"ng-select",43),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().zoomScale=t})("ngModelChange",function(t){return n.CHM(e),n.oxw().changeScaleDiagram(t,"dropDown")}),n.qZA(),n.qZA(),n.TgZ(25,"span",44),n.NdJ("click",function(t){return n.CHM(e),n.oxw().changeScaleDiagram(t,"increase")}),n._UZ(26,"img",45),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(27,ie,3,1,"div",46),n.YNc(28,se,2,1,"div",47),n.YNc(29,le,3,1,"div",48),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(10),n.s9C("placeholder",e.language.Topology_Search),n.Q6J("ngModel",e.searchText),n.xp6(8),n.hij(" ",e.language.Show_Connectivity," "),n.xp6(6),n.Q6J("ngModel",e.zoomScale)("items",e.zoomFactorList)("clearable",!1)("searchable",!1)("ngModelOptions",n.DdM(11,de)),n.xp6(3),n.Q6J("ngIf",!e.noData),n.xp6(1),n.Q6J("ngIf",e.noData),n.xp6(1),n.Q6J("ngIf",(null==e.rgArr?null:e.rgArr.length)>0||(null==e.clientArr?null:e.clientArr.length)>0)}}let ce=(()=>{class e{constructor(e,t,i,s,a,n,r,o,l,h,c,u,g){this.translateService=e,this.http=t,this.issuseservice=i,this.route=s,this.spinner=a,this.ssoAuthService=n,this.dataService=r,this.router=o,this.changeDetector=l,this.commonOrgService=h,this.api=c,this.healthService=u,this.titleService=g,this.expandedNodes=[],this.nodeLinkColor={green:"#c8d652",red:"#c7a9a2",yellow:"#ffeb3b"},this.nodeColor={green:"#f6f8e9",red:"#f6e6e8",yellow:"#fff17a8c"},this.searchSubject=new G.xQ,this.locationFixed=!1,this.MODULE="support",this.serialNumber=" ",this.isIconClicked=[],this.primaryActionButton=[],this.Description=[],this.severity=[],this.reason=[],this.apiCallDone=!1,this.loading=!1,this.lastDeviceClickData={},this.uniqueDevices=[],this.uniqueHostnames=[],this.clientData={},this.twoHrsCategory=[],this.twoHrsData=[],this.sixHrsData=[],this.oneDayData=[],this.width="100%",this.height=400,this.type="msline",this.title="app",this.apInformtion="",this.VisitedPage="",this.routerKey="",this.nextVisitedPage="",this.nextRouterKey="",this.nextTabledataUniqueId="",this.currentPage="main",this.dblClkFired=!1,this.$=R.GraphObject.make,this.apData={},this.apImageUrl="",this.apNodeData=[],this.apLinkData=[],this.topologyData={phy:[],legacy:[],clientWifi:[]},this.topologyView=!0,this.tplgyType="",this.tableView=!1,this.legacyChecked=!1,this.phyChecked=!1,this.signalChecked=!1,this.filterEnabled=!1,this.successFilterEnabled=!1,this.deviceDatas=[],this.deviceDatasUpdated=[],this.backBtnDisabled=!0,this.accessPointId="",this.nodeDataArray=[],this.linkDataArray=[],this.hostnameFilterData=[],this.topRow=!0,this.onClickClients="",this.clientArr=[],this.rgArr=[],this.clientDeviceSSID=!1,this.rgflag=!1,this.rgDetails=[],this.rgModel="",this.raManufacture="",this.ipv4="",this.ipv6="",this.pageNumber=1,this.pageSize=10,this.makemodel=[],this.zoomFactorList=[{factor:"25%",value:.25},{factor:"50%",value:.5},{factor:"75%",value:.75},{factor:"100%",value:1},{factor:"125%",value:1.25},{factor:"150%",value:1.5},{factor:"175%",value:1.75},{factor:"200%",value:2}],this.zoomScale=1,this.images=["assets/images/tv-all-clear.png","assets/images/printer-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png","assets/images/phone-all-clear-state.png","assets/images/camera-clear.png","assets/images/audiobox-clear.png","assets/images/gaming-clear.png","assets/images/ipad-all-clear.png","assets/images/laptop-all-clear.png"],this.clientDevicesImages=["assets/images/deviceicons/question_mark_grey_icon.png","assets/images/deviceicons/phone_grey_icon.png","assets/images/deviceicons/computer_grey_icon.png","assets/images/deviceicons/console_grey_icon.png","assets/images/deviceicons/media_player_grey_icon.png","assets/images/deviceicons/printer_grey_icon.png","assets/images/deviceicons/television_grey_icon.png","assets/images/deviceicons/network_icon_grey.png","assets/images/deviceicons/camera_grey_icon.png","assets/images/deviceicons/tablet_grey_icon.png","assets/images/deviceicons/voip_grey.png","assets/images/deviceicons/iot_grey.png","assets/images/deviceicons/ic_modem-24px.svg","assets/images/deviceicons/question_mark_grey_icon.png"],this.imagesObj={Television:"assets/images/tv-all-clear.png",Tablet:"assets/images/ipad-all-clear.png",Phone:"assets/images/phone-all-clear-state.png",Camera:"assets/images/camera-clear.png","Media Player":"assets/images/audiobox-clear.png",Console:"assets/images/gaming-clear.png","Wi-Fi IoT":"assets/images/iot.png","Wi Fi IoT":"assets/images/iot.png","Wifi IoT":"assets/images/iot.png",Computer:"assets/images/computer.png",Printer:"assets/images/printer-clear.png",Network:"assets/images/network.png",Voip:"assets/images/voip.png",Fridge:"assets/images/iot.png","Television-red":"assets/images/tv-critical-issues.png","Tablet-red":"assets/images/ipad-critical.png","Phone-red":"assets/images/phone-critical-state.png","Camera-red":"assets/images/camera-critical.png","Media Player-red":"assets/images/audiobox-critical.png","Console-red":"assets/images/gaming-critical.png","Wi-Fi IoT-red":"assets/images/iot-critical.png","Wi Fi IoT-red":"assets/images/iot-critical.png","Wifi IoT-red":"assets/images/iot-critical.png","Computer-red":"assets/images/computer-critical.png","Printer-red":"assets/images/printer-critical.png","Network-red":"assets/images/network-critical.png","Voip-red":"assets/images/voip-critical.png","Fridge-red":"assets/images/iot-critical.png","iot-red":"assets/images/iot-critical.png","wireless-excellent":"assets/img/wireless-excellent.svg","wireless-good":"assets/img/wireless-good.svg","wireless-toofar":"assets/img/wireless-toofar.svg","wireless-tooclose":"assets/img/wireless-tooclose.svg","wireless-unavailable":"assets/img/wireless-unavailable.svg"},this.accessPointImages={yellow:"assets/images/myRouter_yellow.svg",green:"assets/images/myRouter.svg",red:"assets/images/myRouter_red.svg"},this.ssid="",this.radio="",this.ethOrAPType="",this.ethOrAPImageUrl="",this.accesspoint=!1,this.noData=!1,this.noRG=!1,this.innerChildsNodes=[],this.isDevEnv=!1,this.ont_serialNo="",this.issue_reason="",this.aps_issue="",this.client_issue="",this.ont_issue="",this.isAPSNodeClicked=!1,this.issueCode="",this.issueType="",this.issueName="",this.bhissueCode="",this.bhissueType="",this.bhissueName="",this.isClientNodeClicked=!1,this.backhaul_issue="",this.isBHNodeClicked=!1,this.isrgWithIssue=!1,this.isapWithIssue=!1,this.scope={qoeRead:!1},this.showTopologyTab=!1,this.showQoeTab=!1,R.Diagram.licenseKey=d.N.GO_JS_KEY,R.Shape.defineFigureGenerator("Badge",function(e,t,i){var s=i/2,a=new R.Geometry;return a.add(new R.PathFigure(0,s).add(new R.PathSegment(R.PathSegment.Arc,90,180,s,s,s,s)).add(new R.PathSegment(R.PathSegment.Line,t-s,0)).add(new R.PathSegment(R.PathSegment.Arc,270,180,t-s,s,s,s)).add(new R.PathSegment(R.PathSegment.Line,s,i).close())),a.spot1=new R.Spot(0,0,.1*s,.1*s),a.spot2=new R.Spot(1,1,-.1*s,0),a}),this.MODULE=this.router.url.indexOf("/support/")>-1?"support":"cco"}ngOnInit(){this.isDevEnv=this.ssoAuthService.API.includes("dev"),this.commandIQDataSubs=this.ssoAuthService.commandIQData.subscribe(e=>{this.scope.qoeRead=!0}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.Topology} - ${this.language.Overview} - ${this.language.Service} - ${this.language["Calix Cloud"]}`),this.rgArr=[],this.getData()}),this.titleService.setTitle(`${this.language.Topology} - ${this.language.Overview} - ${this.language.Service} - ${this.language["Calix Cloud"]}`),this.backBtnDisabled=!0,this.route.queryParams.subscribe(e=>{this.routerMac=e.routerMac,this.getData(),this.getAllClientsData(this.routerMac)}),this.dataService.showTopology.subscribe(e=>{this.showTopologyTab=e}),setTimeout(()=>{this.qoeSubscribed=this.dataService.showQoe.subscribe(e=>{this.showQoeTab=e})},100)}ngAfterViewInit(){}getData(){this.loading=!0;var e=JSON.parse(this.ssoAuthService.getSerialNo()),t=this.ssoAuthService.getCSCSubscriberId(),i=[];let s=JSON.parse(sessionStorage.getItem(`${this.ssoAuthService.getTabId()}calix.deviceData`)),a="",n="";e.forEach(e=>{if(e.serialNumber){var t={};t.serialNumber=e.serialNumber,t.opMode=e.opMode,s.forEach(e=>{if(e.hasOwnProperty("ont")){this.ont_serialNo=e.serialNumber;let i=e.ont;a=i.uuid,n=e.serialNumber,t.isOnt=!0,t.ontSerialNumber=i.serialNo,t.vendorId=i.vendorId}}),i.push(t)}});let r={subscriberId:t,devices:i},o=+localStorage.getItem("calix.org_id");this.issuseservice.topologyValue(o,r).subscribe(e=>{if(this.swVersion=parseFloat(e.landing.rg.version),Object.keys(e.landing.rg).length>0&&e.landing.rg.aps&&0==e.landing.rg.aps.length)return this.loading=!1,void(this.noData=!0);if(e.landing.ont&&this.ont_serialNo!=e.landing.rg.sn&&("red"==e.landing.ont["ont-color"]||"yellow"==e.landing.ont["ont-color"])){this.rgflag=!0;let t="";t=this.ont_serialNo;let i=e.landing.ont["ont-issue-list"],s=[];const a=i.filter(e=>["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)).map(e=>e.serialNumber);i=i.filter((e,t)=>{if(!a.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;s.push(null==e?void 0:e.serialNumber)});for(let e=i.length-1;e>=0;e--)s.includes(i[e].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(i[e].code)&&(i.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:i[e].serialNumber,source:i[e].serialNumber,sourceId:i[e].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),i.splice(e,1));if(this.issueData=i.filter(e=>{var t,i;return this.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize(),i.length>0){this.ont_issue="";for(let e=0;e<i.length;e++)this.issueDescription(i[e].code,"ont",t,"")}JSON.stringify(this.rgArr.push({name:t,note:this.ont_issue}))}if("red"==e.landing.rg["rg-color"]||"yellow"==e.landing.rg["rg-color"]){this.rgflag=!0;let t="";t=e.landing.rg.hostname?e.landing.rg.hostname:e.landing.rg.sn;let i=e.landing.rg["rg-issue-list"],s=[];const a=i.filter(e=>["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)).map(e=>e.serialNumber);i=i.filter((e,t)=>{if(!a.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;s.push(null==e?void 0:e.serialNumber)});for(let e=i.length-1;e>=0;e--)s.includes(i[e].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(i[e].code)&&(i.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:i[e].serialNumber,source:i[e].serialNumber,sourceId:i[e].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),i.splice(e,1));if(this.issueData=i.filter(e=>{var t,i;return this.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize(),i.length>0){this.issue_reason="";for(let e=0;e<i.length;e++)this.issueDescription(i[e].code,"rg",t,"");JSON.stringify(this.rgArr.push({name:t,note:this.issue_reason}))}}var t=new Date;let i=new Date(t.getTime()-864e6),s=new Date,a={tenant:"0",granularity:"15min",fsan:n,startTime:`${this.startISODate(i,!1)}`,endTime:`${this.startISODate(s,!0)}`},r="";for(var l in a)null==a[l]||"undefined"==a[l]||""==a[l]||(""!=r&&(r+="&"),r+=l+"="+encodeURIComponent(a[l]));let d="";!e.landing.rg.mac&&e.landing.rg.aps&&e.landing.rg.aps.length>0?(d=e.landing.rg.aps[0].sn,this.noRG=!0):e.landing.rg.sn&&(d=e.landing.rg.sn),e.landing.ont?this.healthService.timeseries(r,"ont").subscribe(t=>{if(this.loading=!1,t&&t.length>0){let e="",i="",s=!1,a=!1,n=!1,r=!1;for(let o=t.length-1;o>=0;o--)t[o].neOptSignalLvl&&t[o].neOptSignalLvl>-40&&!s&&(this.lightLevel=t[o].neOptSignalLvl.toFixed("2"),s=!0),t[o].rxOptPwr&&t[o].rxOptPwr>-40&&!a&&(this.rxPower=t[o].rxOptPwr.toFixed("2"),a=!0),(t[o].dsBipErr||0==t[o].dsBipErr)&&!n&&(e=e||""!=e?e:t[o].dsBipErr,this.downStream=e.toString(),n=!0),(t[o].usBipErr||0==t[o].usBipErr)&&!r&&(i=i||""!=i?i:t[o].usBipErr,this.upStream=i.toString(),r=!0)}this.dataService.performSearch(o,d,1,10).subscribe(t=>(0,W.mG)(this,void 0,void 0,function*(){this.loading=!1,this.rgDetails=t;for(let e=0;e<this.rgDetails.records.length;e++)for(let t=0;t<this.rgDetails.records[e].devices.length;t++)this.rgDetails.records[e].devices[t].serialNumber==d&&(this.rgModel=this.rgDetails.records[e].devices[t].modelName,this.raManufacture=this.rgDetails.records[e].devices[t].manufacturer,this.ipv4=this.rgDetails.records[e].devices[t].ipAddress,this.ipv6=this.rgDetails.records[e].devices[t].secondIpAddress),this.makemodel.push({model:this.rgDetails.records[e].devices[t].modelName,manufacture:this.rgDetails.records[e].devices[t].manufacturer,sno:this.rgDetails.records[e].devices[t].serialNumber});this.resValue=e,this.loadInitialDiagram(e)}),e=>{this.pageErrorHandle(e),this.loading=!1})},e=>{this.pageErrorHandle(e),this.loading=!1}):this.dataService.performSearch(o,d,1,10).subscribe(t=>(0,W.mG)(this,void 0,void 0,function*(){this.loading=!1,this.rgDetails=t;for(let e=0;e<this.rgDetails.records.length;e++)for(let t=0;t<this.rgDetails.records[e].devices.length;t++)this.rgDetails.records[e].devices[t].serialNumber==d&&(this.rgModel=this.rgDetails.records[e].devices[t].modelName,this.raManufacture=this.rgDetails.records[e].devices[t].manufacturer,this.ipv4=this.rgDetails.records[e].devices[t].ipAddress,this.ipv6=this.rgDetails.records[e].devices[t].secondIpAddress),this.makemodel.push({model:this.rgDetails.records[e].devices[t].modelName,manufacture:this.rgDetails.records[e].devices[t].manufacturer,sno:this.rgDetails.records[e].devices[t].serialNumber});this.resValue=e,this.loadInitialDiagram(e)}),e=>{this.pageErrorHandle(e),this.loading=!1})},e=>{this.pageErrorHandle(e),this.loading=!1})}loadInitialDiagram(e){var t;return(0,W.mG)(this,void 0,void 0,function*(){this.nodeDataArray=[],this.linkDataArray=[];let i,s="",a="",n=[],r=[],o="";Object.keys(e.landing.uplink).length>0&&(i=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e.landing.uplink.mac&&(n=[{columns:[{attr:"property",text:this.language.MAC},{attr:"value",text:`${e.landing.uplink.mac}`}]}],r=[{columns:[{attr:"property",text:this.language.Download_Rate},{attr:"value",text:`${e.landing.uplink.downloadRate} Mbps`}]},{columns:[{attr:"property",text:this.language.Upload_Rate},{attr:"value",text:`${e.landing.uplink.uploadRate} Mbps`}]}]));let l=!0,d={},h=this.ssoAuthService.getEntitlementsArr(),c=this.ssoAuthService.getCscType();if(e.landing.ont&&Object.keys(e.landing.ont).length>0)if(h.indexOf("102")>-1&&"EME"==c){o=e.landing.ont.discoveredSerialNumber,e.landing.rg.ontSN=this.ont_serialNo,o==e.landing.rg.sn.substring(e.landing.rg.sn.indexOf("CXNK00")+6)?(e.landing.rg.category="ontNode",l=!0):(l=!1,d={isONT:!0,label:this.ont_serialNo,source:"assets/images/ic_ONT.svg",key:e.landing.ont.ontId,width:15,height:30,category:"otherNode"},e.landing.rg.category="otherNode");let t="";t="true"==e.landing.ont["ont-online"]?`ONT ${this.language.Connection}: ${this.language.Online}`:`ONT ${this.language.Connection}: ${this.language.Offline}`,e.landing.rg.ontSourceIcon="assets/images/ic_ONT.svg",e.landing.rg.props="Serial Number \n CLEI \n Model \n Pon Port \n ONT Issues",e.landing.rg.values=`${e.landing.ont.discoveredVendorId}${o} \n ${e.landing.ont.clei} \n ${e.landing.ont.discoveredModel} \n ${e.landing.ont.discoveredPonPort} \n ${e.landing.ont["ont-tech-note"]}`;let i=e.landing.ont.discoveredMacAddress?e.landing.ont.discoveredMacAddress:"-",s=e.landing.ont.discoveredVersion?e.landing.ont.discoveredVersion:"-",a=e.landing.ont.discoveredModel?e.landing.ont.discoveredModel:"-",n=e.landing.ont.discoveredPonPort?e.landing.ont.discoveredPonPort:"-",r=e.landing.ont.oltName?e.landing.ont.oltName:"-",h=`${e.landing.ont.region?e.landing.ont.region:"-"}/${e.landing.ont.location?e.landing.ont.location:"-"}`,c=e.landing.ont.ontId?e.landing.ont.ontId:"-";if(e.landing.ont["ont-tech-note"]){this.ont_issue="";for(let t=0;t<e.landing.ont["ont-issue-list"].length;t++)this.issueDescription(e.landing.ont["ont-issue-list"][t].code,"ont","","")}let u=e.landing.ont["ont-tech-note"]?this.ont_issue:"-";e.landing.rg.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];let g=this.lightLevel?`${this.lightLevel} dBm`:"-",p=this.rxPower?`${this.rxPower} dBm`:"-",m=this.downStream?this.downStream:"-",v=this.upStream?this.upStream:"-";e.landing.rg.isontIssue=u,e.landing.rg["ont/rgData"]=[{columns:[{attr:"property",text:`ONT - ${this.ont_serialNo}`},{attr:"value",text:""}]},{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:this.ont_serialNo}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:i}]},{columns:[{attr:"property",text:this.language.Version},{attr:"value",text:s}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:a}]},{columns:[{attr:"property",text:this.language.Pon_Port},{attr:"value",text:n}]},{columns:[{attr:"property",text:this.language.ONT_Name},{attr:"value",text:r}]},{columns:[{attr:"property",text:this.language.Region_Location},{attr:"value",text:h}]},{columns:[{attr:"property",text:this.language.ONT_ID},{attr:"value",text:c}]},{columns:[{attr:"property",text:this.language.OLT_Rx_Power},{attr:"value",text:g}]},{columns:[{attr:"property",text:this.language.ONT_Rx_Power},{attr:"value",text:p}]},{columns:[{attr:"property",text:this.language.DS_BIP_Error_Count},{attr:"value",text:m}]},{columns:[{attr:"property",text:this.language.US_BIP_Error_Count},{attr:"value",text:v}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:u}]}],e.landing.rg.ontData=[{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:this.ont_serialNo}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:i}]},{columns:[{attr:"property",text:this.language.Version},{attr:"value",text:s}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:a}]},{columns:[{attr:"property",text:this.language.Pon_Port},{attr:"value",text:n}]},{columns:[{attr:"property",text:this.language.ONT_Name},{attr:"value",text:r}]},{columns:[{attr:"property",text:this.language.Region_Location},{attr:"value",text:h}]},{columns:[{attr:"property",text:this.language.ONT_ID},{attr:"value",text:c}]},{columns:[{attr:"property",text:this.language.OLT_Rx_Power},{attr:"value",text:g}]},{columns:[{attr:"property",text:this.language.ONT_Rx_Power},{attr:"value",text:p}]},{columns:[{attr:"property",text:this.language.DS_BIP_Error_Count},{attr:"value",text:m}]},{columns:[{attr:"property",text:this.language.US_BIP_Error_Count},{attr:"value",text:v}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:u}]}],d.columnDefinitions=e.landing.rg.columnDefinitions,d.rgData=e.landing.rg.ontData,"green"==e.landing.ont["ont-color"]?d.color=this.nodeColor.green:"red"==e.landing.ont["ont-color"]?d.color=this.nodeColor.red:"yellow"==e.landing.ont["ont-color"]&&(d.color="#fff17a8c")}else e.landing.rg.category="otherNode";else e.landing.rg.category="otherNode";let u="",g="";g=this.ipv6&&this.ssoAuthService.isIpv6Address(this.ipv6?this.ipv6.split("/")[0]:"")?this.ipv6:g,"true"==e.landing.rg.online&&g?u=`IPv4: ${this.language.Connected} \n IPv6: ${this.language.Connected}`:"true"!=e.landing.rg.online||g?"false"==e.landing.rg.online&&g&&(u=`IPv4: ${this.language.Disconnected} \n IPv6: ${this.language.Connected}`,a=this.nodeLinkColor.red):(u=`IPv4: ${this.language.Connected} \n IPv6: ${this.language.Disconnected}`,a=this.nodeLinkColor.red),s="#f3f3f3",a="grey",("false"==e.landing.rg.online||(null===(t=e.landing.rg["rg-tech-notes"])||void 0===t?void 0:t.includes("The RG is not reachable")))&&(u=`IPv4: ${this.language.Disconnected} \n IPv6: ${this.language.Disconnected}`,a=this.nodeLinkColor.red);let p={isInternet:!0,columnDefinitions:i,rgData:n,label:u,source:"assets/images/global.svg",key:"Internet",accessPointId:"",width:30,height:30,color:"#f3f3f3",mac:"Internet",category:"otherNode"},m={text:"Ethernet Port",label:"Ethernet Port",source:"assets/images/ethernet.png",key:"ethernet",accessPointId:"",color:"#f3f3f3",width:17,height:30};if(e.landing&&e.landing.rg.mac){let t;t=e.landing.rg.online?"red":"green",l?this.linkDataArray.push({from:p.key,to:e.landing.rg.mac,color:a,thick:2,routing:R.Link.Normal,linkColumn:i,linkText:r}):(this.linkDataArray.push({from:p.key,to:d.key,color:a,thick:2,routing:R.Link.Normal,linkColumn:i,linkText:r}),this.linkDataArray.push({from:d.key,to:e.landing.rg.mac,color:a,thick:2,routing:R.Link.Normal,linkColumn:i,linkText:r}));let s="",n="";e.landing.rg.online&&(n="true"==e.landing.rg.online?this.language.Online:this.language.Offline);let o=e.landing.rg.ip?`${e.landing.rg.ip}`:"-",h=e.landing.rg.mac?`${e.landing.rg.mac}`:"-",c=e.landing.rg.name?`${e.landing.rg.name}`:"-",u=e.landing.rg.version?`${e.landing.rg.version}`:"-",g=e.landing.rg.sn?`${e.landing.rg.sn}`:"-",D=JSON.parse(sessionStorage.getItem("calix.deviceData")).find(e=>e.modelName==this.rgModel),y=e.landing.rg.hostname?`${e.landing.rg.hostname}`:D.opModeWithOnt,b=this.rgModel?`${this.rgModel}`:"-",T=this.raManufacture?`${this.raManufacture}`:"",I="";if(e.landing.rg["radio-info"]){var v=e.landing.rg["radio-info"],f=[];if(v.length>0){for(let e=0;e<v.length;e++)f.push(v[e]["freq-band"]+"GHz");s=f.join(", ")}I=s?`${s}`:"-"}let A="";if(e.landing.rg.clients){for(let t=0;t<e.landing.rg.clients.length;t++)"red"==e.landing.rg.clients[t]["client-color"]&&(this.isrgWithIssue=!0);1==this.isrgWithIssue&&(e.landing.rg.isrgWithIssue=!0),e.landing.rg.clients.length>0&&(A=e.landing.rg.clients.length)}let _=A||0,x=0!=e.landing.rg["passed-clients"]?`${e.landing.rg["passed-clients"]}`:"0",w=0!=e.landing.rg["failed-clients"]?`${e.landing.rg["failed-clients"]}`:"0",S=e.landing.rg["rg-tech-notes"]?`${this.issue_reason}`:"-";e.landing.rg.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e.landing.rg.isrgIssue=S,e.landing.rg["rg/ontData"]=[{columns:[{attr:"property",text:`RG - ${this.ont_serialNo}`},{attr:"value",text:""}]},{columns:[{attr:"property",text:this.language.Connection},{attr:"value",text:`${n}`}]},{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:`${o}`}]},{columns:[{attr:"property",text:this.language.Device},{attr:"value",text:`${y}`}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:`${T}`}]},{columns:[{attr:"property",text:this.language.Frequency_Band},{attr:"value",text:`${I}`}]},{columns:[{attr:"property",text:this.language.Total_Clients},{attr:"value",text:`${_}`}]},{columns:[{attr:"property",text:this.language.Devices_without_issues_and_warnings},{attr:"value",text:`${x}`}]},{columns:[{attr:"property",text:this.language.Devices_with_issues_and_warnings},{attr:"value",text:`${w}`}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:`${S}`}]}],e.landing.rg.rgData=[{columns:[{attr:"property",text:this.language.Connection},{attr:"value",text:`${n}`}]},{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:`${o}`}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:`${h}`}]},{columns:[{attr:"property",text:this.language.Name},{attr:"value",text:`${c}`}]},{columns:[{attr:"property",text:this.language.Software_Version},{attr:"value",text:`${u}`}]},{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:`${g}`}]},{columns:[{attr:"property",text:this.language.Device},{attr:"value",text:`${y}`}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:`${b}`}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:`${T}`}]},{columns:[{attr:"property",text:this.language.Frequency_Band},{attr:"value",text:`${I}`}]},{columns:[{attr:"property",text:this.language.Total_Clients},{attr:"value",text:`${_}`}]},{columns:[{attr:"property",text:this.language.Devices_without_issues_and_warnings},{attr:"value",text:`${x}`}]},{columns:[{attr:"property",text:this.language.Devices_with_issues_and_warnings},{attr:"value",text:`${w}`}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:`${S}`}]}],e.landing.rg.source=e.landing.rg.online?"assets/images/myRouter.svg":"assets/images/router-critical-state.png",e.landing.rg["rg-tech-notes"].includes("The RG is not reachable")&&(e.landing.rg.source=this.accessPointImages.red),e.landing.rg.key=e.landing.rg.mac,this.rgKey=e.landing.rg.mac,"ontNode"!=e.landing.rg.category?"green"==e.landing.rg["rg-color"]?e.landing.rg.color=this.nodeColor.green:"red"==e.landing.rg["rg-color"]?e.landing.rg.color=this.nodeColor.red:"yellow"==e.landing.rg["rg-color"]&&(e.landing.rg.color="#fff17a8c"):"green"==e.landing.rg["rg-color"]&&"green"==e.landing.ont["ont-color"]?e.landing.rg.color=this.nodeColor.green:"red"==e.landing.rg["rg-color"]||"red"==e.landing.ont["ont-color"]?e.landing.rg.color=this.nodeColor.red:("yellow"==e.landing.rg["rg-color"]||"yellow"==e.landing.ont["ont-color"])&&(e.landing.rg.color="#fff17a8c"),"false"==e.landing.rg.online&&(e.landing.rg.color=this.nodeColor.red),e.landing.rg.width=30,e.landing.rg.height=30,e.landing.rg.model=this.rgModel,e.landing.rg.isRg=!0,e.landing.rg.name&&(e.landing.rg.isInternet=!0),e.landing.rg.ethernetId=`ethernet-${e.landing.rg.sn}`,e.landing.rg.label=e.landing.rg.name?e.landing.rg.hostname?`${e.landing.rg.hostname} \n ${e.landing.rg.name}`:`${e.landing.rg.sn} ${e.landing.rg.name}`:e.landing.rg.hostname?`${e.landing.rg.hostname}`:`${e.landing.rg.sn}`,this.expandedNodes.push(p.key);let C=e.landing.rg.aps;this.nodeDataArray.push(p),this.nodeDataArray.push(d),this.nodeDataArray.push(e.landing.rg),C&&C.length>0&&(yield this.populateAps(C,e,e.landing.rg,m)),this.setClientDetailsNode()}else{let t=e.landing.rg.aps;p.noRg=!0,this.nodeDataArray.push(p),t&&t.length>0&&(yield this.populateAps(t,e,p,m)),this.setClientDetailsNode()}})}issueDescription(e,t,i,s){let a="";if("ATTACK_DETECTED"==(e=e.toUpperCase())||"VIRUS_ATTACK"==e)a=`${this.language.Issue_Reason1}`;else if("CLIENT_DEVICE_LOW_SIGNAL_DETECTED"==e)a=`${this.language.Issue_Reason2}`;else if("CLIENT_DEVICE_LOW_EFFICIENCY_SCORE_DETECTED"==e)a=`${this.language.Issue_Reason3}`;else if("CLIENT_DEVICE_LOW_PHY_RATE_DETECTED"==e)a=`${this.language.Issue_Reason_new4}`;else if("CLIENT_DEVICE_LEGACY_DEVICE_DETECTED"==e)a=`${this.language.Issue_Reason4}`;else if("REBOOT_ISSUE"==e)a=`${this.language.Issue_Reason5}`;else if("SOFTWARE_UPGRADE_FAILED"==e)a=`${this.language.Issue_Reason6}`;else if("STALE_SOFTWARE_VERSION"==e)a=`${this.language.Issue_Reason7}`;else if("The memory usage on the RG has crossed X threshold - discussion on if to track "==e)a=`${this.language.Issue_Reason_DEVICE8}`;else if("The Operation Temperature has crossed X threshold - intenral threshold"==e)a=`${this.language.Issue_Reason9}`;else if("WAP_FAILED"==e)a=`${this.language.Issue_Reason_mapNtr10}`;else if("GATEWAY_FAILED"==e)a=`${this.language.Issue_Reason44}`;else if("SPEED_LOW_75_80"==e)a=`${this.language.Issue_Reason12}`;else if("SPEED_LOW_75"==e)a=`${this.language.Issue_Reason13}`;else if("TRAFFIC_HIGH"==e)a=`${this.language.Issue_Reason14}`;else if("LATENCY_HIGH"==e)a=`${this.language.Issue_Reason15}`;else if("A configured voice service has been detect as down."==e)a=`${this.language.Issue_Reason16}`;else if("WIFI_INTERFERENCE_HIGH_24G"==e)a=`${this.language.Issue_Reason17}`;else if("WIFI_INTERFERENCE_HIGH_5G"==e)a=`${this.language.Issue_Reason18}`;else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_24G"==e)a=`${this.language.Issue_Reason19}`;else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_ON_5G"==e)a=`${this.language.Issue_Reason20}`;else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_24G"==e)a=`${this.language.Issue_Reason21}`;else if("LOW_CHANNEL_SCORE_WITH_SELFHEAL_OFF_5G"==e)a=`${this.language.Issue_Reason22}`;else if("MESH_DEGRADE"==e)a=`${this.language.Issue_Reason23}`;else if("BACKHAUL_TOO_CLOSE"==e)a=`${this.language.Issue_Reason24}`;else if("BACKHAUL_TOO_FAR"==e)a=`${this.language.Issue_Reason25}`;else if("Utilization of Wi-Fi Airtime has crossed 50% Average for bin on radio (2.4Ghz|5Ghz)"==e)a=`${this.language.Issue_Reason26}`;else if("Detected DFS (radar)"==e)a=`${this.language.Issue_Reason27}`;else if("WIFI_RADIO_DISABLED"==e)a=`${this.language.Issue_Reason28}`;else if("WIFI_RADIO_DISABLED_24G"==e)a=`${this.language.Issue_Reason29}`;else if("WIFI_RADIO_DISABLED_5G"==e)a=`${this.language.Issue_Reason30}`;else if("DS_SPEED_LOW_85"==e)a=`${this.language.Issue_Reason31}`;else if("US_SPEED_LOW_85"==e)a=`${this.language.Issue_Reason32}`;else if("DS_SPEED_LOW_75"==e)a=`${this.language.Issue_Reason33}`;else if("US_SPEED_LOW_75"==e)a=`${this.language.Issue_Reason34}`;else if("THERMAL_HIGH"==e)a=`${this.language.Issue_Reason35}`;else if("THERMAL_TOO_HIGH"==e)a=`${this.language.Issue_Reason36}`;else if("ONT_OFFLINE"==e)a=`${this.language.issue_reason37}`;else if("GC_MAX_DOWNSTREAM_ACHIEVED"==e)a=`${this.language.issue_reason38}`;else if("GC_MAX_UPSTREAM_ACHIEVED"==e)a=`${this.language.issue_reason39}`;else if("WFH_SSID_WITHOUT_CIQ"==e)a=`${this.language.issue_reason40}`;else if("QOS_DAMP_ALERT"==e)a=`${this.language.Issue_Reason41}`;else if("MAP_CONNECTIVITY_FAILED"==e){const e=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(e=>e.serialNumber==i).map(e=>e.opMode);a=`${this.language["Issue_Reason"+(e.length&&"RG"==e[0]?"11":"10")]}`}else if("UI_CREATED_ISSUE_FOR_TR069MAPDOWN"==e){const e=JSON.parse(sessionStorage.getItem("calix.deviceData")).filter(e=>e.serialNumber==i).map(e=>e.opMode);a=`${this.language["Issue_Reason_mapNtr"+(e.length&&"RG"==e[0]?"11":"10")]}`}"rg"==t?"."==a.slice(-1)?this.issue_reason+=a+" ":this.issue_reason+=a.substring(0,a.length)+". ":"aps"==t?("."==a.slice(-1)?this.aps_issue+=a+" ":this.aps_issue+=a.substring(0,a.length)+". ",s+1==this.aps_issue_length&&JSON.stringify(this.clientArr.push({note:this.aps_issue,name:i}))):"client"==t?("."==a.slice(-1)?this.client_issue+=a+" ":this.client_issue+=a.substring(0,a.length)+". ",s+1==this.client_issue_length&&JSON.stringify(this.clientArr.push({note:this.client_issue,name:i}))):"backhaul"==t?("."==a.slice(-1)?this.backhaul_issue+=a+" ":this.backhaul_issue+=a.substring(0,a.length)+". ",s+1==this.backhaul_issue_length&&JSON.stringify(this.clientArr.push({note:this.backhaul_issue,name:this.language.Backhaul_Issue}))):"ont"==t&&("."==a.slice(-1)?this.ont_issue+=a+" ":this.ont_issue+=a.substring(0,a.length)+". ")}loadSupportTopology(){this.clientDeviceSSID||this.nodeDataArray.forEach(function(e){delete e.isSSIDClient});let e=this.$;this.APTopology&&(this.APTopology.div=null),this.APTopology=e(R.Diagram,"mainDiagram",{minScale:.25,maxScale:2,initialContentAlignment:R.Spot.Top,"undoManager.isEnabled":!0,LayoutCompleted:e=>{this.updateDivHeight(),this.enableAllCommandHandler(),this.rgArr.length>0&&this.scroll()},InitialLayoutCompleted:e=>{this.setZoomScaleToFit(),function(){(0,W.mG)(this,void 0,void 0,function*(){yield(n.APTopology.startTransaction("CollapseExpandTree"),n.APTopology.nodes.each(function(e){let t=e.part;var i=t.findTreeParentNode();if(n.clientDeviceSSID||((t.data.isInternet&&t.data._primariesExpethernetanded||t.data.isRg&&t.data._primariesExpanded||t.data.isAPS&&t.data.apHasChildAp&&t.data._primariesExpanded||t.data.isONT&&t.data._primariesExpanded)&&(n.expandedNodes.push(t.data.key),n.APTopology.model.set(t.data,"_primariesExpanded",!0)),t.data.isAPS&&i&&null!=i&&n.expandedNodes.push(i.data.sn+"-"+t.data.ssid,`ethernet-${t.data["eth-port"]}-${i.data.sn}`),n.expandedNodes=[...new Set(n.expandedNodes)]),(!t.data.isInternet&&!t.data.isRg&&!t.data.isONT&&!t.data.isAPS&&!t.data.noRg||t.data.isAPS&&!(null==i?void 0:i.data._primariesExpanded)&&!(null==i?void 0:i.data.isAPSSID)||t.data.isAPS&&!(null==i?void 0:i.data._primariesExpanded)&&"true"==t.data["ap-online"]&&!(null==i?void 0:i.data.isAPSSID)||n.noRG&&t.data.isClient)&&(n.APTopology.model.set(t.data,"_primariesExpanded",!1),t.visible=!1,t.collapseTree()),null==i?void 0:i.data.isAPSSID){let e=i.findTreeParentNode();e&&null!=e&&(t.data.isAPS&&!(null==e?void 0:e.data._primariesExpanded)||t.data.isAPS&&!(null==e?void 0:e.data._primariesExpanded)&&"true"==t.data["ap-online"])&&(n.APTopology.model.set(t.data,"_primariesExpanded",!1),t.visible=!1,t.collapseTree())}if(n.noRG){let e=n.APTopology.findNodesByExample({isInternet:!0});e&&null!=e&&e.each(function(e){var t=e.part.findTreeChildrenNodes();t&&null!=t&&t.count>0&&t.each(function(e){e.visible=!0,e.expandTree()})})}}),void n.APTopology.commitTransaction("CollapseExpandTree")),n.APTopology.startTransaction("CollapseExpandTree"),n.APTopology.findTreeRoots().each(function(e){e.data.isInternet&&(e.location.y=e.location.y+1),n.locationFixed=!0}),n.APTopology.commitTransaction("CollapseExpandTree"),n.APTopology.startTransaction("CollapseExpandTree"),n.APTopology.nodes.each(function(e){let t=e.part;if(n.expandedNodes.includes(t.data.key)){if(t.data.isSSID||t.data.isAPSSID){let e=!1,i=!1,s=!1;t.findTreeChildrenNodes().each(function(t){t.data.isPassedClient?e=!0:t.data.isFailedClient?i=!0:t.data.isAPS&&(s=!0)}),(t.findTreeParentNode().data._othersPassedExpanded&&e||t.findTreeParentNode().data._othersFailedExpanded&&i||t.findTreeParentNode().data._primariesExpanded&&s)&&(t.visible=!0,t.expandTree())}else t.visible=!0,t.expandTree();var i=n.APTopology.findNodesByExample({mac:t.data["parent-host-name"]});(t.data.isSSID||t.data.isAPSSID)&&n.APTopology.model.set(t.data,"_primariesExpanded",!0),i&&i.each(e=>{!e.data.isSSID&&!e.data.isAPSSID&&!e.data.isInternet&&n.APTopology.model.set(e.data,t.data.isPassedClient?"_othersPassedExpanded":t.data.isFailedClient?"_othersFailedExpanded":"_primariesExpanded",!0)})}}),n.APTopology.commitTransaction("CollapseExpandTree")})}(),n.APTopology.startTransaction("CollapseExpandTree"),n.APTopology.nodes.each(function(e){let t=e.part,i=e.part.findTreeChildrenNodes(),s=!1;i.each(function(e){var i=e.data;(!i.isClient||i.isSSIDClient)&&(s=!0),n.APTopology.model.set(t.data,"apHasChildAp",s)})}),n.APTopology.commitTransaction("CollapseExpandTree")},initialAutoScale:R.Diagram.UniformToFill,layout:e(R.TreeLayout,{layerSpacing:110,angle:0})}),this.APTopology.toolManager.toolTipDuration=6e4,this.APTopology.toolManager.hoverDelay=500,this.APTopology.linkSelectionAdornmentTemplate.pickable=!1;var t=e(R.Node,"Auto",{selectionAdorned:!1,click:(e,t)=>{var i,s,a;let n;this.clientArr=[],this.selectedAPValue="",t.part.data["ap-tech-note"]||t.part.data.backhaul?(this.selectedAPValue=t.part.data,t.part.data["ap-tech-note"]&&(n={note:t.part.data["ap-tech-note"],name:t.part.data.sn},JSON.stringify(this.clientArr.push(n))),(null===(i=t.part.data.backhaul)||void 0===i?void 0:i["backhaul-tech-note"])&&t.part.data["ap-tech-note"]!=(null===(s=t.part.data.backhaul)||void 0===s?void 0:s["backhaul-tech-note"])&&(n={note:null===(a=t.part.data.backhaul)||void 0===a?void 0:a["backhaul-tech-note"],name:`${this.language.Backhaul_Issue}:`},JSON.stringify(this.clientArr.push(n)))):t.part.data["client-note"]&&(this.selectedAPValue=t.part.data,n={note:t.part.data["client-note"],name:t.part.data.hostname?t.part.data.hostname:t.part.data.mac},JSON.stringify(this.clientArr.push(n))),this.clientArr.length>0&&this.scroll()},mouseHover:function(e,t){}},e(R.Shape,{width:210,height:150,fill:"white"},new R.Binding("strokeWidth","isHighlighted",function(e){return e?2:0}).ofObject(),new R.Binding("stroke","isHighlighted",function(e){return e?"gold":"white"}).ofObject()),e(R.Shape,"RoundedRectangle",new R.Binding("cursor","label",function(e){return e?"pointer":""}),{width:210,height:80,strokeWidth:0,parameter1:25},new R.Binding("fill","",function(e){return e.color||"white"})),e(R.Panel,"Vertical",new R.Binding("cursor","label",function(e){return e?"pointer":""}),{width:210,height:80},e(R.Panel,"Auto",{margin:new R.Margin(0,0,0,15),toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","ontData",function(e){return e.length>0}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray",width:900}),e(R.Panel,"Table",{padding:10,alignment:R.Spot.TopLeft},new R.Binding("itemArray","ont/rgData"),e(R.RowColumnDefinition,{column:0}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(230,NaN),minSize:new R.Size(200,NaN),isMultiline:!0,spacingAbove:5},new R.Binding("text"),new R.Binding("font","",function(e){return e.text.includes("ONT -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}),e(R.Panel,"Table",{padding:10,alignment:R.Spot.TopRight},new R.Binding("itemArray","rg/ontData"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Right,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(230,NaN),minSize:new R.Size(200,NaN),isMultiline:!0,spacingAbove:5},new R.Binding("text"),new R.Binding("font","",function(e){return e.text.includes("RG -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}))},e(R.Shape,"RoundedRectangle",{parameter1:10,width:210,height:40,strokeWidth:0,fill:"transparent"}),e(R.Panel,"Horizontal",{width:210,height:40},e(R.Panel,"Auto",{height:40,width:60},e(R.Picture,{width:13,height:30,margin:new R.Margin(5,0,0,25)},new R.Binding("source","ontSourceIcon",function(e){return e||""}))),e(R.Panel,"Auto",{height:40,width:160},e(R.TextBlock,{margin:new R.Margin(13,0,0,0),width:120,overflow:R.TextBlock.OverflowEllipsis},new R.Binding("text","ontSN",function(e){return e||""}),new R.Binding("maxLines","",function(e){return e.isInternet?2:1}))))),e(R.Panel,"Auto",{margin:new R.Margin(0,0,0,15),toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","rgData",function(e){return e.length>0}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray",width:900}),e(R.Panel,"Table",{padding:10,alignment:R.Spot.TopLeft},new R.Binding("itemArray","ont/rgData"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(230,NaN),minSize:new R.Size(200,NaN),isMultiline:!0,spacingAbove:5},new R.Binding("text"),new R.Binding("font","",function(e){return e.text.includes("ONT -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}),e(R.Panel,"Table",{padding:10,alignment:R.Spot.TopRight},new R.Binding("itemArray","rg/ontData"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(230,NaN),minSize:new R.Size(200,NaN),isMultiline:!0,spacingAbove:5},new R.Binding("text"),new R.Binding("font","",function(e){return e.text.includes("RG -")?"bold 16px Source Sans Pro":"normal 15px Source Sans Pro"})))})}))},e(R.Shape,"RoundedRectangle",{parameter1:10,width:210,height:40,strokeWidth:0,fill:"transparent"}),e(R.Panel,"Horizontal",{width:210,height:40},e(R.Panel,"Auto",{height:40,width:60},e(R.Picture,{margin:new R.Margin(6,0,0,18),height:28},new R.Binding("source","source",function(e){return e||""}),new R.Binding("element","source-video",function(e){return e||""}),new R.Binding("width","width"))),e(R.Panel,"Auto",{height:40,width:160},e(R.TextBlock,{margin:new R.Margin(10,0,0,0),width:120,overflow:R.TextBlock.OverflowEllipsis},new R.Binding("text","label",function(e){return e||""}),new R.Binding("maxLines","",function(e){return e.isInternet?2:1})))))),e(R.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,n.clientDeviceSSID?l(i,!0,"isPassedClient"):o(i,!0,"isPassedClient"))}},new R.Binding("margin","label",function(e){return e?new R.Margin(-70,0,0,50):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Circle",{width:24,height:24,stroke:"green",strokeWidth:2,margin:5,visible:!1},new R.Binding("fill","_othersPassedExpanded",function(e){return e?"green":"white"}),new R.Binding("visible","passed-clients",function(e){return e||!1})),e(R.TextBlock,{margin:5},new R.Binding("stroke","",function(e){return e._othersPassedExpanded?"white":"black"}),new R.Binding("text","passed-clients",function(e){return e||""}))),e(R.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,n.clientDeviceSSID?l(i,!0,"isFailedClient"):o(i,!0,"isFailedClient"))}},new R.Binding("margin","label",function(e){return e?new R.Margin(-60,0,0,90):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Circle",{width:24,height:24,strokeWidth:2,margin:5,visible:!1},new R.Binding("fill","",function(e){return e._othersFailedExpanded&&(e.isrgWithIssue||e.isapWithIssue)?"red":!e._othersFailedExpanded||e.isrgWithIssue&&e.isapWithIssue?"white":"orange"}),new R.Binding("visible","failed-clients",function(e){return e||!1}),new R.Binding("stroke","",function(e){return e.isrgWithIssue||e.isapWithIssue?"red":"orange"})),e(R.TextBlock,{margin:5},new R.Binding("stroke","",function(e){return e._othersFailedExpanded?"white":"black"}),new R.Binding("text","failed-clients",function(e){return e||""}))),e(R.Panel,"Auto",{margin:new R.Margin(0,0,0,175)},r(!1)));function i(e,t){for(var i=e.columnDefinitions,s=0;s<i.length;s++)if(i[s].attr===t)return i[s];return null}var s=new R.Map;s.add("ontNode",t),this.APTopology.nodeTemplateMap=s;var a=e(R.Node,"Auto",{selectionAdorned:!1,click:(e,t)=>{var i,s,a,n;if(this.clientArr=[],this.selectedAPValue="",t.part.data["ap-tech-note"]||t.part.data.backhaul){if(this.selectedAPValue=t.part.data,t.part.data["ap-tech-note"]){this.isAPSNodeClicked=!0,this.isClientNodeClicked=!1;let e=t.part.data["ap-issue-list"],i=[];const s=e.filter(e=>["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)).map(e=>e.serialNumber);e=e.filter((e,t)=>{if(!s.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;i.push(null==e?void 0:e.serialNumber)});for(let t=e.length-1;t>=0;t--)i.includes(e[t].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(e[t].code)&&(e.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:e[t].serialNumber,source:e[t].serialNumber,sourceId:e[t].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),e.splice(t,1));if(this.issueData=e.filter(e=>{var t,i;return this.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize(),e.length>0){this.rgflag=!0,this.aps_issue="",this.aps_issue_length=e.length,this.clickedAPS=t.part.data;for(let i=0;i<e.length;i++)this.issueDescription(e[i].code,"aps",t.part.data.sn,i),this.issueCode=e[i].code,this.serialNumber=e[i].serialNumber,this.issueType="aps",this.issueName=t.part.data.sn}}if((null===(i=t.part.data.backhaul)||void 0===i?void 0:i["backhaul-tech-note"])&&t.part.data["ap-tech-note"]!=(null===(s=t.part.data.backhaul)||void 0===s?void 0:s["backhaul-tech-note"])){let e=null===(a=t.part.data.backhaul)||void 0===a?void 0:a["backhaul-issue-list"];this.isBHNodeClicked=!0,this.isClientNodeClicked=!1,this.backhaul_issue="";let i=`${this.language.Backhaul_Issue}:`;this.backhaul_issue_length=e.length,this.clickedBackhaul=null===(n=t.part.data.backhaul)||void 0===n?void 0:n["backhaul-issue-list"];for(let t=0;t<e.length;t++)this.issueDescription(e[t].code,"backhaul",i,t),this.bhissueCode=e[t].code,this.bhissueType="backhaul",this.bhissueName=`${this.language.Backhaul_Issue}:`}}else if(t.part.data["client-note"]){this.isAPSNodeClicked=!1,this.isBHNodeClicked=!1,this.isClientNodeClicked=!0,this.selectedAPValue=t.part.data;let e=t.part.data["client-issue-list"];if(e.length>0){this.rgflag=!0,this.client_issue="",this.client_issue_length=e.length,this.clickedClient=t.part.data;let i=t.part.data.hostname?t.part.data.hostname:t.part.data.mac;for(let t=0;t<e.length;t++)this.issueDescription(e[t].code,"client",i,t),this.issueCode=e[t].code,this.issueType="client",this.issueName=i}}this.clientArr.length>0&&this.scroll()},mouseHover:function(e,t){}},e(R.Shape,{width:210,height:120,fill:"white"},new R.Binding("strokeWidth","isHighlighted",function(e){return e?2:0}).ofObject(),new R.Binding("stroke","isHighlighted",function(e){return e?"gold":"white"}).ofObject()),e(R.Shape,"Badge",{visible:!1},new R.Binding("cursor","label",function(e){return e?"pointer":""}),new R.Binding("visible","",function(e){return!(!e.isConnectivityNode&&!e.isInternet)}),{width:210,height:40,strokeWidth:0,toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","rgData",function(e){return e.length>0}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),e(R.Panel,"Table",{margin:new R.Margin(0,5,0,5)},new R.Binding("itemArray","rgData"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(350,NaN),minSize:new R.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new R.Binding("text")))})}))},new R.Binding("fill","",function(e){return e.color||"white"})),e(R.Shape,"RoundedRectangle",{visible:!1,parameter1:15},new R.Binding("cursor","label",function(e){return e?"pointer":""}),new R.Binding("visible","",function(e){return!e.isConnectivityNode&&!e.isInternet}),{width:210,height:40,strokeWidth:0,toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","rgData",function(e){return e.length>0}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),e(R.Panel,"Table",{margin:new R.Margin(0,5,0,5)},new R.Binding("itemArray","rgData"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(350,NaN),minSize:new R.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new R.Binding("text")))})}))},new R.Binding("fill","",function(e){return e.color||"white"})),e(R.Panel,"Auto",new R.Binding("cursor","label",function(e){return e?"pointer":""}),{width:220,height:120},e(R.Panel,"Spot",{visible:!1},e(R.Picture,{desiredSize:new R.Size(25,20),alignment:R.Spot.TopLeft,visible:!1,margin:new R.Margin(25,0,0,10),toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","",function(e){return"LAN"!=e["int-type"]&&"true"==e["ap-online"]&&e.hasOwnProperty("satPlacementRating")}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),e(R.Panel,"Table",{margin:new R.Margin(0,5,0,5)},new R.Binding("itemArray","ap_rssi_tooltip"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(350,NaN),minSize:new R.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new R.Binding("text")))})}))},new R.Binding("source","wirelessIcon",function(e){return e||""}),new R.Binding("width","width",function(e){return e-5}),new R.Binding("height","height",function(e){return e-10}),new R.Binding("visible","",function(e){return"LAN"!=e["int-type"]&&"true"==e["ap-online"]&&e.hasOwnProperty("satPlacementRating")})),new R.Binding("visible","",function(e){return"LAN"!=e["int-type"]&&"true"==e["ap-online"]&&e.hasOwnProperty("satPlacementRating")})),e(R.Panel,"Spot",{visible:!1,alignment:R.Spot.TopLeft},new R.Binding("visible","freqBand",function(e){return""!=e}),e(R.TextBlock,{margin:new R.Margin(25,0,0,10)},new R.Binding("text","freqBand"))),e(R.Panel,"Horizontal",e(R.Panel,"Horizontal",{height:35,width:60},e(R.Picture,{margin:new R.Margin(0,0,0,25)},new R.Binding("source","source",function(e){return e||""}),new R.Binding("element","source-video",function(e){return e||""}),new R.Binding("width","width"),new R.Binding("height","height"))),e(R.Panel,"Horizontal",{height:40,width:160},e(R.TextBlock,{margin:new R.Margin(0,0,0,10),width:120,overflow:R.TextBlock.OverflowEllipsis},new R.Binding("text","label",function(e){return e||""}),new R.Binding("maxLines","",function(e){return e.isInternet?2:1}))),{toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","rgData",function(e){return e.length>0}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),e(R.Panel,"Table",{margin:new R.Margin(0,5,0,5)},new R.Binding("itemArray","rgData"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var s=i(t.part.data,e);if(null!==s)return s.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(350,NaN),minSize:new R.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new R.Binding("text")))})}))}),e(R.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,n.clientDeviceSSID?l(i,!0,"isPassedClient"):o(i,!0,"isPassedClient"))}},new R.Binding("margin","label",function(e){return e?new R.Margin(-55,0,0,50):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Circle",{width:24,height:24,stroke:"green",strokeWidth:2,margin:5,visible:!1},new R.Binding("fill","_othersPassedExpanded",function(e){return e?"green":"white"}),new R.Binding("visible","passed-clients",function(e){return e||!1})),e(R.TextBlock,{margin:5},new R.Binding("stroke","",function(e){return e._othersPassedExpanded?"white":"black"}),new R.Binding("text","passed-clients",function(e){return e||""}))),e(R.Panel,"Auto",{click:function(e,t){var i=t.part;null!==i&&(e.handled=!0,n.clientDeviceSSID?l(i,!0,"isFailedClient"):o(i,!0,"isFailedClient"))}},new R.Binding("margin","label",function(e){return e?new R.Margin(-45,0,0,90):""}),new R.Binding("cursor","label",function(e){return e?"pointer":""}),e(R.Shape,"Circle",{width:24,height:24,stroke:"orange",strokeWidth:2,margin:5,visible:!1},new R.Binding("fill","",function(e){return e._othersFailedExpanded&&(e.isrgWithIssue||e.isapWithIssue)?"red":!e._othersFailedExpanded||e.isrgWithIssue&&e.isapWithIssue?"white":"orange"}),new R.Binding("visible","failed-clients",function(e){return e||!1}),new R.Binding("stroke","",function(e){return e.isrgWithIssue||e.isapWithIssue?"red":"orange"})),e(R.TextBlock,{margin:5},new R.Binding("stroke","",function(e){return e._othersFailedExpanded?"white":"black"}),new R.Binding("text","failed-clients",function(e){return e||""}))),e(R.Panel,"Auto",{margin:new R.Margin(0,0,0,175)},r(!1))));s.add("otherNode",a),this.APTopology.nodeTemplateMap=s,this.APTopology.linkTemplate=e(R.Link,{curve:R.Link.Bezier,relinkableFrom:!0,relinkableTo:!0},e(R.Shape,{strokeWidth:3,width:200},new R.Binding("stroke","color"),new R.Binding("strokeWidth","thick")),{toolTip:e(R.Adornment,"Auto",{visible:!1,isShadowed:!0,shadowColor:"rgba(128, 128, 128, 0.25)",shadowOffset:new R.Point(4,4)},new R.Binding("visible","linkText",function(e){return e.length>0}),e(R.Shape,"RoundedRectangle",{fill:"white",parameter1:10,strokeWidth:1,stroke:"lightgray"}),e(R.Panel,"Table",{margin:new R.Margin(0,5,0,5)},new R.Binding("itemArray","linkText"),e(R.RowColumnDefinition,{column:0,width:200}),{name:"TABLE",defaultAlignment:R.Spot.Left,itemTemplate:e(R.Panel,"TableRow",new R.Binding("itemArray","columns"),{itemTemplate:e(R.Panel,{margin:new R.Margin(3,0,3,0),stretch:R.GraphObject.Fill,alignment:R.Spot.TopLeft},new R.Binding("column","attr",function(e,t){var i=function(e,t){for(var i=e.linkColumn,s=0;s<i.length;s++)if(i[s].attr===t)return i[s];return null}(t.part.data,e);if(null!==i)return i.column;throw new Error("unknown column name: "+e)}),e(R.TextBlock,{maxSize:new R.Size(350,NaN),minSize:new R.Size(100,NaN),isMultiline:!0,font:"normal 15px Source Sans Pro",spacingAbove:5},new R.Binding("text")))})}))});let n=this;function r(t){return e("Button",{visible:!1,click:function(e,i){var s=i.part;null!==s&&(e.handled=!0,n.clientDeviceSSID?l(s,t,"isClient"):o(s,t,"isClient"))}},e(R.Shape,{name:"ButtonIcon",figure:"TriangleLeft",stroke:"#424242",strokeWidth:2,desiredSize:new R.Size(8,8)},new R.Binding("figure",t?"_othersExpanded":"_primariesExpanded",function(e,t){return e?"TriangleLeft":"TriangleRight"})),new R.Binding("visible","",function(e){return!(e.isTreeLeaf||!e.apHasChildAp)}))}function o(e,t,i){n.APTopology.startTransaction("CollapseExpandTree"),e.findTreeChildrenNodes().each(function(s){var a=s.data;if((!t||a[i])&&(t||!a[i]))if(s.visible){var r=!1,o=!1,l=!1;n.clientDeviceSSID?s.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?r=!0:e.data.isFailedClient?o=!0:e.data.isAPS&&(l=!0)}):(n.expandedNodes=n.expandedNodes.filter(e=>e!=s.data.key),e.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?r=!0:e.data.isFailedClient?o=!0:e.data.isAPS&&(l=!0)})),"isPassedClient"==i&&((!o||!e.data._othersFailedExpanded)&&(n.expandedNodes=n.expandedNodes.filter(t=>t!=e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client")),(!o||!e.data._othersFailedExpanded)&&(!l||!e.data._primariesExpanded)&&(n.expandedNodes=n.expandedNodes.filter(t=>t!=`ethernet-${s.data["eth-port"]}-${e.data.sn}`))),"isFailedClient"==i&&((!r||!e.data._othersPassedExpanded)&&(n.expandedNodes=n.expandedNodes.filter(t=>t!=e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client")),(!r||!e.data._othersPassedExpanded)&&(!l||!e.data._primariesExpanded)&&(n.expandedNodes=n.expandedNodes.filter(t=>t!=`ethernet-${s.data["eth-port"]}-${e.data.sn}`))),n.expandedNodes=n.expandedNodes.filter("isPassedClient"==i&&!e.data._othersFailedExpanded&&!e.data._primariesExpanded||"isFailedClient"==i&&!e.data._othersPassedExpanded&&!e.data._primariesExpanded?t=>t!=s.data.key&&t!=e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client"&&t!=`ethernet-${e.data.sn}`:"isPassedClient"==i||"isFailedClient"==i?e=>e!=s.data.key:t=>t!=s.data.key&&t!=e.data.sn+"-"+s.data.ssid&&t!=`ethernet-${e.data.sn}`),s.visible=!1,s.collapseTree(),!s.data.isPassedClient&&!s.data.isFailedClient&&d(s,e)}else s.data.isPassedClient||s.data.isFailedClient?n.expandedNodes.push(s.data.key,e.data.key,e.data.sn+"-"+s.data.ssid+"-"+s.data["freq-band"]+"-client",`ethernet-${s.data["eth-port"]}-${e.data.sn}`):n.expandedNodes.push(s.data.key,e.data.key,e.data.sn+"-"+s.data.ssid,`ethernet-${e.data.sn}`),n.expandedNodes=[...new Set(n.expandedNodes)],s.visible=!0,s.expandTree()}),t?"isPassedClient"==i?n.APTopology.model.set(e.data,"_othersPassedExpanded",!e.data._othersPassedExpanded):"isFailedClient"==i&&n.APTopology.model.set(e.data,"_othersFailedExpanded",!e.data._othersFailedExpanded):n.APTopology.model.set(e.data,"_primariesExpanded",!e.data._primariesExpanded),n.APTopology.commitTransaction("CollapseExpandTree")}function l(e,t,i){var s;t=!!e.data.isSSID||t,e.data.isSSID||e.data.isAPSSID?function(e,t,i){n.APTopology.startTransaction("CollapseExpandTree");var s=e.findTreeChildrenNodes(),a=e.findTreeParentNode();a.findTreeChildrenNodes().each(function(e){}),a.data._othersFailedExpanded&&a.data._othersPassedExpanded&&a.data._primariesExpanded?i="allClients":a.data._othersFailedExpanded&&a.data._othersPassedExpanded?i="passedFailedClients":a.data._othersFailedExpanded&&a.data._primariesExpanded?i="primaryFailedClients":a.data._othersPassedExpanded&&a.data._primariesExpanded?i="primaryPassedClients":a.data._othersFailedExpanded?i="isFailedClient":a.data._othersPassedExpanded?i="isPassedClient":a.data._primariesExpanded&&(i="isClient"),s.each(function(e){("isPassedClient"==i&&e.data.isPassedClient||"isFailedClient"==i&&e.data.isFailedClient||"passedFailedClients"==i&&!e.data.isAPS||"primaryFailedClients"==i&&!e.data.isPassedClient||"primaryPassedClients"==i&&!e.data.isFailedClient||"isClient"==i&&e.data.isAPS||"allClients"==i)&&(e.visible?(e.visible=!1,e.collapseTree()):(e.visible=!0,e.expandTree()))}),n.APTopology.model.set(e.data,"_primariesExpanded",!e.data._primariesExpanded),n.APTopology.commitTransaction("CollapseExpandTree")}(e,0,i):(n.APTopology.startTransaction("CollapseExpandTree"),e.findTreeChildrenNodes().each(function(t){var a=!1,r=!1,o=!1;t.findTreeChildrenNodes().each(function(e){e.data.isPassedClient?a=!0:e.data.isFailedClient?r=!0:e.data.isAPS&&(o=!0)}),(t.data.offlineAP||t.data.isRg)&&(o=!0),"isPassedClient"==i&&a&&!e.data._othersPassedExpanded||"isFailedClient"==i&&r&&!e.data._othersFailedExpanded||"isClient"==i&&o&&!e.data._primariesExpanded?((t.data.offlineAP||t.data.isRg)&&n.expandedNodes.push(t.data.key),t.visible=!0,t.expandTree()):((!r||!e.data._othersFailedExpanded)&&(!o||!e.data._primariesExpanded)&&"isPassedClient"==i||(!a||!e.data._othersPassedExpanded)&&(!o||!e.data._primariesExpanded)&&"isFailedClient"==i||(!a||!e.data._othersPassedExpanded)&&(!r||!e.data._othersFailedExpanded)&&"isClient"==i)&&(n.expandedNodes=n.expandedNodes.filter(e=>e!=t.data.key),t.visible=!1,t.collapseTree());var l=t.findTreeChildrenNodes();if(l&&null!=l&&l.count>0){var h=!1;l.each(function(a){"isPassedClient"==i&&!a.data.isPassedClient||"isFailedClient"==i&&!a.data.isFailedClient||"isClient"==i&&!a.data.isAPS||("isPassedClient"==i&&e.data._othersPassedExpanded||"isFailedClient"==i&&e.data._othersFailedExpanded||"isClient"==i&&e.data._primariesExpanded?(n.expandedNodes=n.expandedNodes.filter(e=>e!=a.data.key),a.visible=!1,a.collapseTree(),s=!1):(("isClient"==i&&t.data._primariesExpanded||t.data._primariesExpanded||!e.data._othersPassedExpanded&&!e.data._primariesExpanded&&!e.data._othersFailedExpanded)&&(h=!0,a.visible=!0,a.expandTree()),s=!0,n.expandedNodes.push(a.data.key,t.data.key)),!a.data.isPassedClient&&!a.data.isFailedClient&&d(a,t,h))}),(t.data.isAPSSID||t.data.isSSID)&&h&&n.APTopology.model.set(t.data,"_primariesExpanded",!0)}("false"==t.data["ap-online"]||t.data.isRg)&&!e.data._primariesExpanded&&(s=!0)}),s?"isPassedClient"==i?n.APTopology.model.set(e.data,"_othersPassedExpanded",!0):"isFailedClient"==i?n.APTopology.model.set(e.data,"_othersFailedExpanded",!0):"isClient"==i&&n.APTopology.model.set(e.data,"_primariesExpanded",!0):"isPassedClient"==i?n.APTopology.model.set(e.data,"_othersPassedExpanded",!1):"isFailedClient"==i?n.APTopology.model.set(e.data,"_othersFailedExpanded",!1):"isClient"==i&&n.APTopology.model.set(e.data,"_primariesExpanded",!1),n.expandedNodes=[...new Set(n.expandedNodes)],n.APTopology.commitTransaction("CollapseExpandTree"))}function d(e,t,i=!1){var s=e.findTreeChildrenNodes();s&&null!=s&&s.count>0?s.each(function(i){i.visible=!1,i.collapseTree(),n.innerChildsNodes.push(i.data.key),n.expandedNodes=n.expandedNodes.filter(e=>e!=i.data.key),t.findTreeParentNode(),n.clientDeviceSSID?i.data.isPassedClient?n.APTopology.model.set(t.data,"_othersPassedExpanded",!1):i.data.isFailedClient?n.APTopology.model.set(t.data,"_othersFailedExpanded",!1):(i.data.isAPS||i.data.isSSID||i.data.isAPSSID)&&n.APTopology.model.set(e.data,"_primariesExpanded",!1):i.data.isPassedClient?n.APTopology.model.set(e.data,"_othersPassedExpanded",!1):i.data.isFailedClient?n.APTopology.model.set(e.data,"_othersFailedExpanded",!1):(i.data.isAPS||i.data.isSSID||i.data.isAPSSID)&&n.APTopology.model.set(e.data,"_primariesExpanded",!1);var s=i.findTreeChildrenNodes();s&&null!=s&&s.count>0&&!i.data.isPassedClient&&!i.data.isFailedClient&&d(i,e)}):(t.data.isAPSSID||t.data.isSSID)&&i&&n.APTopology.model.set(t.data,"_primariesExpanded",!0)}n.APTopology.model=new R.GraphLinksModel(n.nodeDataArray,n.linkDataArray),this.APDiagram.nativeElement.querySelector("canvas").style.outline="none"}setClientDetailsNode(){return(0,W.mG)(this,void 0,void 0,function*(){yield this.nodeDataArray.forEach(e=>{e.clients&&e.clients.length>0&&(this.objData=e,this.onClickClients="",this.getAPData(this.objData))}),this.setOthersPrimary()})}setOthersPrimary(){this.nodeDataArray.forEach(e=>{let t=!1;(e.isInternet||e.isRg||e.isAPS)&&!e.hasOwnProperty("_primariesExpanded")&&(t=!0),e.apHasChildAp=!!e.hasOwnProperty("apHasChildAp")&&e.apHasChildAp,e._othersPassedExpanded=!!e.hasOwnProperty("_othersPassedExpanded")&&e._othersPassedExpanded,e._othersFailedExpanded=!!e.hasOwnProperty("_othersFailedExpanded")&&e._othersFailedExpanded,e._primariesExpanded=e.hasOwnProperty("_primariesExpanded")?e._primariesExpanded:t}),this.loadSupportTopology()}clientNodeDetails(e){this.clientDetails="";let t=e["ip-address"]?e["ip-address"]:"-",i=e.hostname?e.hostname:"-",s=e.mac?e.mac:"-",a=e["fingerprint-model"]&&"Unknown"!=e["fingerprint-model"]?e["fingerprint-model"]:"-",n=e["fingerprint-vendor"]&&"Unknown"!=e["fingerprint-vendor"]?e["fingerprint-vendor"]:"-",r=e["intf-type"]?e["intf-type"]:"-",o=e["signal-strength"]?`${e["signal-strength"]}dBm`:"-",l="",d="",h=(null==e?void 0:e["client-efficiency-score"])>0?(100*(null==e?void 0:e["client-efficiency-score"])).toFixed(2):(null==e?void 0:e["client-efficiency-score"])<0||0==(null==e?void 0:e["client-efficiency-score"])?(0).toFixed(2):"-";parseInt(h)>=45?d="Good":parseInt(h)>=20&&parseInt(h)<45?d="Fair":parseInt(h)<20&&(d="Poor"),l="-"!=h?h+"% ("+d+")":h;let c=e["Airtime-usage"]?e["Airtime-usage"]:"-",u=e["Channel-number"]?e["Channel-number"]:"-",g="";g=e["DS-phy-rate"]||e["US-phy-rate"]?`${this.kbpsTO(e["DS-phy-rate"])}bps/${this.kbpsTO(e["US-phy-rate"])}bps`:"-";let p="";p=e["RX-bandwidth-usage"]||e["TX-bandwidth-usage"]?`${this.kbpsTO(e["RX-bandwidth-usage"])}bps/${this.kbpsTO(e["TX-bandwidth-usage"])}bps`:"-";let m=e.SNR?`${e.SNR}dB`:"-",v=e["freq-band"]?`${e["freq-band"]}GHz`:"-";if(e["client-issue-list"]&&!this.isClientNodeClicked){this.client_issue="";for(let t=0;t<e["client-issue-list"].length;t++)this.issueDescription(e["client-issue-list"][t].code,"client","",t)}let f=e["client-note"]?this.client_issue:"-",D={};this.swVersion>21.2&&(D={columns:[{attr:"property",text:this.language.Efficiency_Score},{attr:"value",text:`${l}`}]}),e.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];let y={};"-"!=c&&(y={columns:[{attr:"property",text:this.language.Airtime_Usage},{attr:"value",text:`${c}`}]}),"WiFi"==e["intf-type"]?e.rgData=[{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:`${t}`}]},{columns:[{attr:"property",text:this.language.Hostname},{attr:"value",text:`${i}`}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:`${s}`}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:`${a}`}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:`${n}`}]},{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:`${r}`}]},{columns:[{attr:"property",text:this.language.Signal_Strength},{attr:"value",text:`${o}`}]},D,y,{columns:[{attr:"property",text:this.language.Channel_Number},{attr:"value",text:`${u}`}]},{columns:[{attr:"property",text:this.language.DS_US_Phy_Rate},{attr:"value",text:`${g}`}]},{columns:[{attr:"property",text:this.language.RX_TX_BW_Usage},{attr:"value",text:`${p}`}]},{columns:[{attr:"property",text:"SNR"},{attr:"value",text:`${m}`}]},{columns:[{attr:"property",text:this.language.Frequency_Band},{attr:"value",text:`${v}`}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:`${f}`}]}]:"LAN"==e["intf-type"]&&(e.rgData=[{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:`${t}`}]},{columns:[{attr:"property",text:this.language.Hostname},{attr:"value",text:`${i}`}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:`${s}`}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:`${a}`}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:`${n}`}]},{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:`${r}`}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:`${f}`}]}])}getAPData(e){this.searchText="",this.apInformtion="",e.clients&&e.clients.length>0&&this.populateClientDevices(e.clients,e)}getAllClientsData(e,t,i){this.spinner.show()}accessPoint(){this.clientDeviceSSID=!this.clientDeviceSSID,this.loadInitialDiagram(this.resValue)}enableAllCommandHandler(){this.enable("ScrollToPart",this.APTopology.commandHandler.canScrollToPart())}enable(e,t){var i=document.getElementById(e);i&&(i.disabled=!t)}zoomfunctionalities(e){"ScrollToPart"==e&&this.APTopology.commandHandler.scrollToPart()}searchDiagram(){if(this.searchText.length>1){let e=this;this.searchSubject.next(),this.searchSubject.pipe((0,Y.b)(1e3)).subscribe(()=>{if(e.APTopology.focus(),e.APTopology.startTransaction("highlight search"),e.searchText){var t=e.searchText.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(t,"i"),s=e.APTopology.findNodesByExample({label:i},{mac:i},{model:i});e.APTopology.highlightCollection(s),e.APTopology.highlighteds.each(t=>{let i=t.findTreeParentNode();function s(t,i,s,a){i&&e.APTopology.model.set(t.data,"_othersPassedExpanded",!0),s&&e.APTopology.model.set(t.data,"_othersFailedExpanded",!0),a&&e.APTopology.model.set(t.data,"_primariesExpanded",!0)}i&&function e(i){t.visible=!0,t.expandTree();var a=!1,n=!1,r=!1;i.findTreeChildrenNodes().each(e=>{e.data.isPassedClient&&(a=!0),e.data.isFailedClient&&(n=!0),e.data.isClient||(r=!0),e.visible=!0,e.expandTree(),s(e,a,n,r)});let o=i.findTreeParentNode();s(i,a,n,r),o&&e(o)}(i)}),s.count>0&&e.APTopology.centerRect(s.first().actualBounds)}else e.APTopology.clearHighlighteds();e.APTopology.commitTransaction("highlight search"),e.searchValue.nativeElement.focus(),setTimeout(()=>{e.zoomfunctionalities("ScrollToPart")},100)})}}refreshClick(){if(0==this.loading){this.searchText="",this.clientArr=[],this.rgArr=[],this.nodeDataArray=[],this.linkDataArray=[],this.expandedNodes=[];let e=document.getElementById("showConnection");e&&(e.checked=!1),this.clientDeviceSSID=!1,this.APTopology.clearHighlighteds(),this.getData()}}changeScaleDiagram(e,t){var i=this.APTopology.scale;"dropDown"==t?this.APTopology.scale=e:"decrease"==t?this.APTopology.scale=i-.25:"increase"==t&&(this.APTopology.scale=i+.25),this.zoomScale=this.APTopology.scale,this.updateDivHeight()}setZoomScaleToFit(){let e=!1;this.zoomScale=1;do{this.APTopology.scale=this.zoomScale,e=!1}while(e);this.updateDivHeight()}updateDivHeight(){document.getElementById("mainDiagram").style.height=Number(this.APTopology.documentBounds.height)+100+"px"||0,this.APTopology.requestUpdate()}kbpsTO(e,t,i){return this.api.kbpsTO(e,t,i)}bytesToSize(e){let t=0,i=parseInt(e,10)||0;for(;i>=1024&&++t;)i/=1024;return i.toFixed(i<10&&t>0?1:0)+" "+["bytes","Kbps","Mbps","Gbps","Tbps","Pbps","Ebps","Zbps","Ybps"][t]}scroll(){setTimeout(()=>{this.issueBox.nativeElement.scrollIntoView()},100)}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.ssoAuthService.pageErrorHandle(e),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1}populateAps(e,t,i,s){if(1==this.isAPSNodeClicked){this.clientArr=[],this.aps_issue="",this.aps_issue_length=this.clickedAPS["ap-issue-list"].length;let e=this.clickedAPS["ap-issue-list"],t=[];const i=e.filter(e=>["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)).map(e=>e.serialNumber);e=e.filter((e,s)=>{if(!i.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;t.push(null==e?void 0:e.serialNumber)});for(let s=e.length-1;s>=0;s--)t.includes(e[s].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(e[s].code)&&(e.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:e[s].serialNumber,source:e[s].serialNumber,sourceId:e[s].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),e.splice(s,1));this.issueData=e.filter(e=>{var t,i;return this.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize();for(let s=0;s<e.length;s++)this.issueDescription(e[s].code,this.issueType,this.issueName,s);if(1==this.isBHNodeClicked){this.backhaul_issue="";let e=this.clickedBackhaul;for(let t=0;t<e.length;t++)this.issueDescription(e[t].code,this.bhissueType,this.bhissueName,t)}}e.forEach(e=>{var a,n,r,o,l,d,h,c,u,g,p,m,v,f,D,y,b;let T="",I="",A="";e.isRg||(e.category="otherNode"),e.ssid||(e.backhaul={Band:"5"},e.ssid="Backhaul SSID");let _=e.ip?`${e.ip}`:"-",x=e.name?`${e.name}`:"-",w=e.mac?`${e.mac}`:"-",S=e.version?`${e.version}`:"-",C=e.sn?`${e.sn}`:"-";if(this.makemodel)for(let t=0;t<this.makemodel.length;t++)e.sn==this.makemodel[t].sno&&(e.model=`${this.makemodel[t].model}`,T=this.makemodel[t].model,"WAP"==JSON.parse(sessionStorage.getItem("calix.deviceData")).find(e=>e.modelName==T).opModeWithOnt&&(A="Mesh(SAT)"),I=this.makemodel[t].manufacture);let E=T||"-",k=I||"-",M="";(null===(a=e.backhaul)||void 0===a?void 0:a["client-efficiency-score"])&&(M=`${Number((100*Number(null===(n=e.backhaul)||void 0===n?void 0:n["client-efficiency-score"])).toFixed(2))}%`);let O=M||"-";var N="";e.backhaul&&Object.keys(e.backhaul).length>0&&(N=e.backhaul.Band+"GHz");let P="";if(e.clients){for(let t=0;t<e.clients.length;t++)"red"==e.clients[t]["client-color"]&&(this.isapWithIssue=!0);1==this.isapWithIssue&&(e.isapWithIssue=!0),e.clients.length>0&&(P=`${e.clients.length}`)}let Z=P||0,F=e["passed-clients"]?e["passed-clients"]:"0",L=e["failed-clients"]?e["failed-clients"]:" 0";if(e.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e["ap-issue-list"]&&!this.isAPSNodeClicked){this.aps_issue="",this.aps_issue_length=e["ap-issue-list"].length;let t=e["ap-issue-list"],i=[];const s=t.filter(e=>["GATEWAY_FAILED","WAP_FAILED"].includes(null==e?void 0:e.code)).map(e=>e.serialNumber);t=t.filter((e,t)=>{if(!s.includes(null==e?void 0:e.serialNumber)||"MAP_CONNECTIVITY_FAILED"!=(null==e?void 0:e.code))return e;i.push(null==e?void 0:e.serialNumber)});for(let e=t.length-1;e>=0;e--)i.includes(t[e].serialNumber)&&["GATEWAY_FAILED","WAP_FAILED"].includes(t[e].code)&&(t.push({code:"UI_CREATED_ISSUE_FOR_TR069MAPDOWN",subscriberId:"",serialNumber:t[e].serialNumber,source:t[e].serialNumber,sourceId:t[e].serialNumber,type:"ROUTER",severity:0,reason:"High Operating Temperature Observed",isValid:!0}),t.splice(e,1));this.issueData=t.filter(e=>{var t,i;return this.issueCode.indexOf(e.hasOwnProperty("code")?null===(t=e.code)||void 0===t?void 0:t.toUpperCase():null===(i=e.Code)||void 0===i?void 0:i.toUpperCase())>-1}),this.issueData=this.issueData.sort((e,t)=>e.severity<t.severity?-1:e.severity>t.severity?1:0),this.issueList=this.issueData,this.totalissues=this.issueList.length,this.initalize();for(let e=0;e<t.length;e++)this.issueDescription(t[e].code,"aps","",e);if(null===(r=e.backhaul)||void 0===r?void 0:r["backhaul-issue-list"]){this.backhaul_issue="";for(let t=0;t<(null===(o=e.backhaul)||void 0===o?void 0:o["backhaul-issue-list"].length);t++)this.issueDescription(null===(l=e.backhaul)||void 0===l?void 0:l["backhaul-issue-list"][t].code,"backhaul","",t)}}let q=(null===(d=e.backhaul)||void 0===d?void 0:d["backhaul-tech-note"])?this.backhaul_issue:"-",H={};this.swVersion>21.2&&(H={columns:[{attr:"property",text:this.language.Efficiency_Score},{attr:"value",text:`${O}`}]}),e.rgData=[{columns:[{attr:"property",text:this.language.IP_Address},{attr:"value",text:`${_}`}]},{columns:[{attr:"property",text:this.language.MAC_Address},{attr:"value",text:`${w}`}]},{columns:[{attr:"property",text:this.language.Name},{attr:"value",text:`${x}`}]},{columns:[{attr:"property",text:this.language.Software_Version},{attr:"value",text:`${S}`}]},{columns:[{attr:"property",text:this.language.Serial_Number},{attr:"value",text:`${C}`}]},{columns:[{attr:"property",text:this.language.Device},{attr:"value",text:`${A}`}]},{columns:[{attr:"property",text:this.language.Model},{attr:"value",text:`${E}`}]},{columns:[{attr:"property",text:this.language.Manufacturer},{attr:"value",text:`${k}`}]},H,{columns:[{attr:"property",text:this.language.Total_Clients},{attr:"value",text:`${Z}`}]},{columns:[{attr:"property",text:this.language.Devices_without_issues_and_warnings},{attr:"value",text:`${F}`}]},{columns:[{attr:"property",text:this.language.Devices_with_issues_and_warnings},{attr:"value",text:`${L}`}]},{columns:[{attr:"property",text:this.language.issue},{attr:"value",text:`${e["ap-tech-note"]?this.aps_issue:"-"}`}]},{columns:[{attr:"property",text:this.language.Backhaul_Issue},{attr:"value",text:`${q}`}]}],"green"==e["ap-color"]&&"green"==(null===(h=e.backhaul)||void 0===h?void 0:h["backhaul-color"])||"green"==e["ap-color"]||"red"==(null===(c=e.backhaul)||void 0===c?void 0:c["backhaul-color"])?(e.color=this.nodeColor.green,e.source=this.accessPointImages.green):"red"==e["ap-color"]||"red"==(null===(u=e.backhaul)||void 0===u?void 0:u["backhaul-color"])?(e.color=this.nodeColor.red,e.source=this.accessPointImages.red):("yellow"==e["ap-color"]||"yellow"==(null===(g=e.backhaul)||void 0===g?void 0:g["backhaul-color"]))&&(e.color="#fff17a8c",e.source=this.accessPointImages.yellow),"false"==e["ap-online"]&&(e.color=this.nodeColor.red),e.width=30,e.height=30,e.key=e.mac,e.isAPS=!0,e.name&&(e.isInternet=!0),e["parent-host-name"]=i.mac,e.label=e.name?e.hostname?`${e.hostname}\n ${e.name}`:`${e.sn} \n ${e.name}`:e.hostname?`${e.hostname}`:`${e.sn}`;let B=(null===(p=e.backhaul)||void 0===p?void 0:p["rx-phy-rate"])?this.kbpsTO(null===(m=e.backhaul)||void 0===m?void 0:m["rx-phy-rate"])+"bps":this.kbpsTO(0)+"bps",$=(null===(v=e.backhaul)||void 0===v?void 0:v["tx-phy-rate"])?this.kbpsTO(null===(f=e.backhaul)||void 0===f?void 0:f["tx-phy-rate"])+"bps":this.kbpsTO(0)+"bps";if("WiFi"==e["int-type"]&&e.backhaul.satPlacementRating){10==e.backhaul.satPlacementRating?(e.wirelessIcon=this.imagesObj["wireless-excellent"],e.satellite_placement="Excellent"):11==e.backhaul.satPlacementRating?(e.wirelessIcon=this.imagesObj["wireless-good"],e.satellite_placement="Good"):12==e.backhaul.satPlacementRating?(e.wirelessIcon=this.imagesObj["wireless-good"],e.satellite_placement="Ok"):13==e.backhaul.satPlacementRating?(e.wirelessIcon=this.imagesObj["wireless-toofar"],e.satellite_placement="Too Far"):0==e.backhaul.satPlacementRating?(e.wirelessIcon=this.imagesObj["wireless-tooclose"],e.satellite_placement="Too Close"):-1==e.backhaul.satPlacementRating&&(e.wirelessIcon=this.imagesObj["wireless-unavailable"],e.satellite_placement="Unknown"),e.backhaul.rssi>=-50?e.rssi_signal_strength="Excellent":e.backhaul.rssi>=-66&&e.backhaul.rssi<=-51?e.rssi_signal_strength="Good":e.backhaul.rssi>=-69&&e.backhaul.rssi<=-67?e.rssi_signal_strength="Ok":e.backhaul.rssi>=-79&&e.backhaul.rssi<=-70?e.rssi_signal_strength="Weak":e.backhaul.rssi<=-80&&(e.rssi_signal_strength="Very Weak"),e.ap_rssi=e.backhaul.rssi,e.satPlacementRating=e.backhaul.satPlacementRating,e.ap_rssi_signal_strength=e.backhaul.rssi,e.ap_backhaul_tech_note=(null===(D=e.backhaul)||void 0===D?void 0:D["backhaul-tech-note"])||"-";let t=e.satellite_placement?e.satellite_placement:"-",i=e.ap_rssi?e.ap_rssi:"-",s=e.ap_backhaul_tech_note?this.backhaul_issue:"-";e.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],e.ap_rssi_tooltip=[{columns:[{attr:"property",text:this.language.Satellite_Placement},{attr:"value",text:`${t}`}]},{columns:[{attr:"property",text:"RSSI"},{attr:"value",text:`${i} dBm`}]},{columns:[{attr:"property",text:`${this.language.issue} ${this.language.warning}`},{attr:"value",text:`${s}`}]}]}if(this.nodeDataArray.push(e),this.clientDeviceSSID&&"true"==e["ap-online"]){var U="Ethernet Port";e["eth-port"]&&(U=`${U} ${e["eth-port"]}`);var W={text:"ssid",key:`${i.sn}-${e.ssid}`,accessPointId:"",color:"#f3f3f3",label:e.ssid,source:"assets/images/Icon_Device_Wifi scaled.svg",freqBand:N,ssidKey:"",isAPSSID:!0,isConnectivityNode:!0,category:"otherNode"},G={text:"ethernet",key:`ethernet-${e["eth-port"]}-${i.sn}`,accessPointId:"",color:"#f3f3f3",label:U,source:"assets/images/ethernet.png",width:17,height:30,isAPSSID:!0,isEthernet:!0,isConnectivityNode:!0,category:"otherNode"};W.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];let t="-",s="-";i["radio-airtime"]&&i["radio-airtime"].forEach(i=>{var a,n=i.name.split("RadioAirtime");(null===(a=null==e?void 0:e.ssid)||void 0===a?void 0:a.includes(n[1]))&&(t=i.result.ChannelUtilization,s=i.result.ChannelInterferenceTime)}),W.rgData=[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:this.language.Channel},{attr:"value",text:(null===(y=e.backhaul)||void 0===y?void 0:y.channel)?null===(b=e.backhaul)||void 0===b?void 0:b.channel:"-"}]},{columns:[{attr:"property",text:"Airtime Utilization"},{attr:"value",text:t}]},{columns:[{attr:"property",text:"Airtime Interference"},{attr:"value",text:s}]}],G.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],G.rgData=[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]}],i.ethernetId=G.key,i.ssidId=W.key;let a,n=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];if(a=e&&"WiFi"==e["int-type"]?[{columns:[{attr:"property",text:this.language.Transmit_rate},{attr:"value",text:$}]},{columns:[{attr:"property",text:this.language.Receive_rate},{attr:"value",text:B}]}]:[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]}],"WiFi"==e["int-type"]){if(e.ssid&&(this.nodeDataArray.find(e=>e.key==W.key)||(this.nodeDataArray.push(W),W.ssidKey=e.ssid)),!this.linkDataArray.find(e=>e.from==i.mac&&e.to==W.key)){let t=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],s=[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:this.language.Band},{attr:"value",text:`${e.backhaul.Band}GHz`}]},{columns:[{attr:"property",text:this.language.Mode},{attr:"value",text:e.backhaul.Mode}]}];e.ssid&&this.linkDataArray.push({from:i.mac,to:W.key,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,linkColumn:t,linkText:s})}this.linkDataArray.push(e.ssid?{from:W.key,to:e.mac,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,linkColumn:n,linkText:a}:{from:i.mac,to:e.mac,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,name:""})}else"eth"===e["int-type"]||"LAN"==e["int-type"]?(e["int-type"]&&(this.nodeDataArray.find(e=>e.key==G.key)||this.nodeDataArray.push(G)),this.linkDataArray.find(e=>e.from==i.mac&&e.to==G.key)||this.linkDataArray.push({from:i.mac,to:G.key,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,linkColumn:n,linkText:[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]}]}),this.linkDataArray.push({from:G.key,to:e.mac,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,linkColumn:n,linkText:a})):this.linkDataArray.push({from:i.mac,to:e.mac,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,name:""})}else{let t=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];if("false"==e["ap-online"]&&this.clientDeviceSSID&&(e.offlineAP=!0),"eth"===e["int-type"]||"LAN"===e["int-type"])this.linkDataArray.push({from:i.mac,to:e.mac,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,linkColumn:t,linkText:[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]}]});else{let s;s=e&&"WiFi"==e["int-type"]?[{columns:[{attr:"property",text:this.language.Transmit_rate},{attr:"value",text:$}]},{columns:[{attr:"property",text:this.language.Receive_rate},{attr:"value",text:B}]}]:e&&"LAN"==e["int-type"]?[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["int-type"]}]}]:"","false"==e["ap-online"]&&(s=""),this.linkDataArray.push({from:i.mac,to:e.mac,color:"true"==e["ap-online"]?this.nodeLinkColor.green:this.nodeLinkColor.red,thick:2,routing:R.Link.Normal,linkColumn:t,linkText:s})}}Array.isArray(e.aps)&&e.aps.length>0&&this.populateAps(e.aps,t,e,s)})}populateClientDevices(e,t){if(e.sort(function(e,t){var i,s,a,n;return(null===(i=e.hostname)||void 0===i?void 0:i.toLowerCase())<(null===(s=t.hostname)||void 0===s?void 0:s.toLowerCase())?-1:(null===(a=e.hostname)||void 0===a?void 0:a.toLowerCase())>(null===(n=t.hostname)||void 0===n?void 0:n.toLowerCase())?1:0}),1==this.isClientNodeClicked){this.clientArr=[],this.client_issue="";let e=this.clickedClient["client-issue-list"];for(let t=0;t<e.length;t++)this.issueDescription(e[t].code,this.issueType,this.issueName,t)}e.forEach(e=>{this.clientNodeDetails(e),e.key=e.mac,e.category="otherNode",e["parent-host-name"]=t.key;var i=e["signal-strength-test-result"],s=e["legacy-device-test-result"],a=e["phy-rate-test-result"];let n=e["signal-strength"]?`${e["signal-strength"]} dBm`:"-",r=e["wifi-mode"]?e["wifi-mode"]:"-",o="";o=e["DS-phy-rate"]?this.kbpsTO(e["DS-phy-rate"])+"bps":this.kbpsTO(0)+"bps";let l="";l=e["US-phy-rate"]?this.kbpsTO(e["US-phy-rate"])+"bps":this.kbpsTO(0)+"bps";let d="";d=e.hostname?e.hostname:e.mac;let h=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],c=[{columns:[{attr:"property",text:"RSSI"},{attr:"value",text:n}]},{columns:[{attr:"property",text:this.language.Mode},{attr:"value",text:r}]},{columns:[{attr:"property",text:this.language.DS_PHY_Rate},{attr:"value",text:o}]},{columns:[{attr:"property",text:this.language.US_PHY_Rate},{attr:"value",text:l}]},{columns:[{attr:"property",text:this.language.Band},{attr:"value",text:e["freq-band"]?`${e["freq-band"]}GHz`:"-"}]},{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["intf-type"]?e["intf-type"]:"-"}]}],u=[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["intf-type"]}]}];e.label=d,e.width=30,e.height=30,e.model=e["fingerprint-model"];let g="";"red"==e["client-color"]?(e.color=this.nodeColor.red,g=this.nodeLinkColor.red):"green"==e["client-color"]?(e.color=this.nodeColor.green,g=this.nodeLinkColor.green):"yellow"==e["client-color"]?(e.color=this.nodeColor.yellow,g=this.nodeLinkColor.yellow):e.color="#f3f3f3",e.source=30!=e["client-type"]&&[0,1,2,3,4,5,6,7,8,9,10,11].includes(e["client-type"])?this.clientDevicesImages[e["client-type"]]:30==e["client-type"]?this.clientDevicesImages[12]:this.clientDevicesImages[13],this.nodeDataArray.push(e);var p={};if("PASS"!=i||"PASS"!=s||"PASS"!=a||"red"==e["client-color"]||e["client-note"].includes("Low efficiency score observed")?(e.isFailedClient=!0,p={from:t.key,to:e.key,color:g,thick:2,routing:R.Link.Normal,linkColumn:h,linkText:"WiFi"!=e["intf-type"]?u:c}):(e.isPassedClient=!0,p={from:t.key,to:e.key,color:g,thick:2,routing:R.Link.Normal,linkColumn:h,linkText:"WiFi"!=e["intf-type"]?u:c}),this.clientDeviceSSID){e.isSSIDClient=!0;var m="Ethernet Port";e["eth-port"]&&(m=`${m} ${e["eth-port"]}`);var v=e["Channel-number"]?`${e["Channel-number"]}`:"",f={text:"ssid",key:`${t.sn}-${e.ssid}-${e["freq-band"]}-client`,accessPointId:"",color:"#f3f3f3",label:e.ssid,source:"assets/images/Icon_Device_Wifi scaled.svg",freqBand:`${e["freq-band"]}GHz`,ssidKey:"",isClient:!0,isSSID:!0,isConnectivityNode:!0,category:"otherNode"},D={text:"ethernet",key:`ethernet-${e["eth-port"]}-${t.sn}`,accessPointId:"",color:"#f3f3f3",label:m,source:"assets/images/ethernet.png",width:17,height:30,isClient:!0,isSSID:!0,isEthernet:!0,isConnectivityNode:!0,category:"otherNode"};f.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];let i="-",s="-";t["radio-airtime"].forEach(t=>{var a,n=t.name.split("RadioAirtime");(null===(a=e.Connection)||void 0===a?void 0:a.includes(n[1]))&&(i=t.result.ChannelUtilization,s=t.result.ChannelInterferenceTime)}),f.rgData=[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["intf-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:this.language.Channel},{attr:"value",text:v}]},{columns:[{attr:"property",text:"Airtime Utilization"},{attr:"value",text:i}]},{columns:[{attr:"property",text:"Airtime Interference"},{attr:"value",text:s}]}],D.columnDefinitions=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}],D.rgData=[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["intf-type"]}]}];let a=[{attr:"property",text:"",column:0},{attr:"value",text:"",column:1}];"WiFi"==e["intf-type"]?(e.ssid&&(this.nodeDataArray.find(e=>e.key==f.key&&!e.isAPSSID)||(this.nodeDataArray.push(f),f.ssidKey=e.ssid)),this.linkDataArray.find(e=>e.from==t.key&&e.to==f.key)||this.linkDataArray.push({from:t.key,to:f.key,color:g,thick:2,routing:R.Link.Normal,linkColumn:a,linkText:[{columns:[{attr:"property",text:this.language.Connection_Type},{attr:"value",text:e["intf-type"]}]},{columns:[{attr:"property",text:"SSID"},{attr:"value",text:e.ssid}]},{columns:[{attr:"property",text:this.language.Band},{attr:"value",text:`${e["freq-band"]}GHz`}]},{columns:[{attr:"property",text:this.language.Mode},{attr:"value",text:e["wifi-mode"]}]}]}),this.linkDataArray.push({from:f.key,to:e.key,color:g,thick:2,routing:R.Link.Normal,linkColumn:a,linkText:c})):("eth"===e["intf-type"]||"LAN"==e["intf-type"])&&(e["intf-type"]&&(this.nodeDataArray.find(e=>e.key==D.key&&!e.isAPSSID)||this.nodeDataArray.push(D)),this.linkDataArray.find(e=>e.from==t.key&&e.to==D.key)||this.linkDataArray.push({from:t.key,to:D.key,color:g,thick:2,routing:R.Link.Normal,linkColumn:a,linkText:D.rgData}),this.linkDataArray.push({from:D.key,to:e.key,color:g,thick:2,routing:R.Link.Normal,linkColumn:a,linkText:D.rgData}))}else"PASS"!=i||"PASS"!=s||"PASS"!=a||"red"==e["client-color"]||e["client-note"].includes("Low efficiency score observed")?e.isFailedClient=!0:e.isPassedClient=!0,e.isClient=!0,this.linkDataArray.push(p)})}startISODate(e,t){if(null==e)return;let i,s=new Date(e),a=s.getFullYear(),n=`${s.getMonth()+1}`,r=`${s.getDate()}`;return n.length<2&&(n=`0${n}`),r.length<2&&(r=`0${r}`),i=t?`${a}-${n}-${r}T23:59:00Z`:`${a}-${n}-${r}T00:00:00Z`,i}initalize(){for(let e=0;e<this.totalissues;e++)this.isIconClicked[e]=!1,this.primaryActionButton[e]=!1,this.Description[e]=" ",this.reason[e]=" ",this.severity[e]=" "}ngOnDestroy(){this.commandIQDataSubs&&this.commandIQDataSubs.unsubscribe(),this.qoeSubscribed&&this.qoeSubscribed.unsubscribe()}qoeCheck(){let e=this.ssoAuthService.getScopes();Object.keys(e),this.scope.qoeRead=!1,d.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.qoe"]=e["cloud.rbac.csc.qoe"]?e["cloud.rbac.csc.qoe"]:[],e&&e["cloud.rbac.csc.qoe"]&&e["cloud.rbac.csc.qoe"].length&&-1!==e["cloud.rbac.csc.qoe"].indexOf("read")&&(this.scope.qoeRead=!0)):this.scope.qoeRead=!0;let t=sessionStorage.getItem("calix.deviceData")?JSON.parse(sessionStorage.getItem("calix.deviceData"))[0].modelName:"";return sessionStorage.getItem("calix.userFdUser"),this.ssoAuthService.acceptGSModel(t)?(this.showQoeTab=this.ssoAuthService.exosVersionCheck("21.4")&&this.scope.qoeRead,sessionStorage.getItem("qoeCheck")):(this.showQoeTab=this.scope.qoeRead,sessionStorage.getItem("qoeCheck"))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(r.s),n.Y36(q.eN),n.Y36(h.F),n.Y36(a.gz),n.Y36(H.t2),n.Y36(o.t6),n.Y36(c.Q),n.Y36(a.F0),n.Y36(n.sBO),n.Y36(V.v),n.Y36(p.O),n.Y36(J.z),n.Y36(u.Dx))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-support-topology"]],viewQuery:function(e,t){if(1&e&&(n.Gf(z,5),n.Gf(Q,5),n.Gf(j,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.APDiagram=e.first),n.iGM(e=n.CRH())&&(t.searchValue=e.first),n.iGM(e=n.CRH())&&(t.issueBox=e.first)}},decls:18,vars:6,consts:[[1,"m-2"],[1,"row"],["class","w-100 alert alert alert-danger fade show",4,"ngIf"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["id","top-issue-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],[1,"big-text"],["class","nav-item","id","top-topology-tab",4,"ngIf"],["class","nav-item","id","top-qoe-tab",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["class","row",4,"ngIf"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["id","top-topology-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"],["id","top-qoe-tab",1,"nav-item"],[1,"col-md-12"],[1,"toggle-swtbtn","checkbox","switcher"],[1,"col-md-3"],[1,"refreshButton"],["id","serviceDataRefresh",1,"cursor-pointer","primary",3,"click"],[1,"fas","fa-sync","refreshicon"],[1,"col-md-9","pr-0"],[1,"accessPoint"],[1,"d-inline-flex","align-items-center","justify-content-between","search-box-input"],["name","search","id","mySearch","id","mySearch",3,"placeholder","ngModel","ngModelChange"],["searchValue",""],[1,"search-box-icon"],["id","searchSubscriberIcon","src","assets/img/ic_search_white.svg",1,"search-icon","primary",3,"click"],["for","showConnection",2,"margin-top","10px"],["type","checkbox","id","showConnection",3,"change"],[1,"zoom"],[1,"cus-button"],["id","ZoomIn",1,"mr-2","pointer",2,"font-size","24px",3,"click"],["src","assets/images/iconmonstr-minus.svg",2,"height","25px"],[1,"icon-hl",2,"width","70px"],["bindLabel","factor","bindValue","value",2,"width","75px","background-color","#ffffff","border","none",3,"ngModel","items","clearable","searchable","ngModelOptions","ngModelChange"],["id","ZoomOut",1,"pointer",2,"font-size","24px",3,"click"],["src","assets/images/iconmonstr-plus.svg",2,"height","25px"],["id","mainDiagram","class","diagram-info",4,"ngIf"],["class","nodata-info",4,"ngIf"],[4,"ngIf"],["id","mainDiagram",1,"diagram-info"],["APDiagram",""],["class","loader load",4,"ngIf"],[1,"loader","load"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"nodata-info"],["issueBox",""],["class","topo-info-box",4,"ngIf"],[1,"topo-info-box"],[2,"font-weight","600","line-height","0.4"],[2,"margin-left","10px"],[4,"ngFor","ngForOf"],["style","margin-left: 10px",4,"ngIf"],[1,"m-0"],[2,"font-weight","600"]],template:function(e,t){1&e&&(n._UZ(0,"app-subscriber-menu"),n.TgZ(1,"section",0),n.TgZ(2,"div",1),n.YNc(3,K,6,1,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"ul",4),n.TgZ(6,"li",5),n.TgZ(7,"a",6),n.NdJ("Click",function(e){return e.preventDefault()}),n.TgZ(8,"span",7),n._uU(9),n.qZA(),n.qZA(),n.qZA(),n.YNc(10,X,4,2,"li",8),n.YNc(11,ee,4,2,"li",9),n.qZA(),n.TgZ(12,"div",10),n.TgZ(13,"div",11),n._UZ(14,"div",12),n.qZA(),n.TgZ(15,"div",13),n._UZ(16,"div",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(17,he,30,12,"div",14)),2&e&&(n.xp6(3),n.Q6J("ngIf",t.error),n.xp6(4),n.MGl("routerLink","/",t.MODULE,"/overview/issues"),n.xp6(2),n.Oqu(t.language.Issues),n.xp6(1),n.Q6J("ngIf",t.showTopologyTab),n.xp6(1),n.Q6J("ngIf",t.showQoeTab),n.xp6(6),n.Q6J("ngIf",t.showTopologyTab))},directives:[m.e,s.O5,a.yS,a.Od,f.Fj,f.JJ,f.On,v.w9,s.sg],styles:[".gshHeader{border-color:#a768be;font-size:13px;margin-bottom:7px}.diagram-info[_ngcontent-%COMP%]{width:100%;min-height:500px;margin-top:20px}.nodata-info[_ngcontent-%COMP%]{text-align:center;min-height:100px;margin-top:50px}.toggle-swtbtn[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.toggle-swtbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:13px}.toggle-swtbtn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:40px;cursor:pointer;color:#0279ff;font-size:larger;font-weight:700}.toggle-swtbtn[_ngcontent-%COMP%]   .refreshButton[_ngcontent-%COMP%]   .refreshicon[_ngcontent-%COMP%]{font-size:24px;color:#0279ff;margin-left:30px}.toggle-swtbtn[_ngcontent-%COMP%]   .accessPoint[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.toggle-swtbtn[_ngcontent-%COMP%]   .accessPoint[_ngcontent-%COMP%]   .zoom[_ngcontent-%COMP%]{margin-left:40px;display:flex}.cus-button[_ngcontent-%COMP%]{float:right;min-width:168px;position:relative;height:42px;display:block;border-radius:60px;border:1px solid #dcdcdc;padding:0 0 0 12px}.cus-button[_ngcontent-%COMP%]   span.icon-hl[_ngcontent-%COMP%]{display:inline-block}.cus-button[_ngcontent-%COMP%]   .bord-right[_ngcontent-%COMP%]{border-right:1px solid #dcdcdc;padding-right:8px}.cus-button[_ngcontent-%COMP%]   .bord-left[_ngcontent-%COMP%]{border-left:1px solid #dcdcdc;padding-left:8px}.cus-button[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{background-color:#fff!important;border:none!important}.cus-button[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]{overflow-y:hidden!important}.cus-button[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]{width:75px!important}.topo-info-box[_ngcontent-%COMP%]{width:100%;padding:15px;background-color:#ebeaef;border-radius:10px}.ng-dropdown-panel[_ngcontent-%COMP%]   .ng-dropdown-panel-items[_ngcontent-%COMP%]{max-height:240px!important}.search-box-input[_ngcontent-%COMP%]{border-radius:26px;background:#F8F8FA;padding:0 0 0 15px;font-size:14px;font-weight:400;width:30%;color:#646363;border:1px solid #dfdfdf;margin-right:5px}.search-box-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:38px;line-height:inherit!important;border-radius:26px;background:transparent;padding:0;font-size:14px;font-weight:400;color:#646363;border:none}.search-box-icon[_ngcontent-%COMP%]{width:42px;height:40px;background-color:#0279ff;padding:10px;border-radius:25px;cursor:pointer}"]}),e})();var ue=i(1282),ge=i(16738),pe=i(91704),me=i(12664),ve=i(20723),fe=i(18638),De=i(94555);const ye=["clientEfficencyChartTest"];function be(e,t){1&e&&n._UZ(0,"app-subscriber-menu")}function Te(e,t){if(1&e&&(n.TgZ(0,"li",45),n.TgZ(1,"a",46),n.TgZ(2,"span",6),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.MGl("routerLink","/",e.MODULE,"/overview/topology"),n.xp6(2),n.hij(" ",e.language.Topology,"")}}function Ie(e,t){if(1&e&&(n.TgZ(0,"li",47),n.TgZ(1,"a",46),n.TgZ(2,"span",6),n._uU(3),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.MGl("routerLink","/",e.MODULE,"/overview/quality-of-experience"),n.xp6(2),n.Oqu(e.language["Quality of Experience"])}}function Ae(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",48),n.TgZ(1,"span",49),n._UZ(2,"img",50),n.qZA(),n.TgZ(3,"button",51),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).isError=!1}),n._UZ(4,"span"),n.qZA(),n._UZ(5,"div",52),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(5),n.Q6J("innerHtml",e.alertMessage,n.oJD)}}function _e(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",48),n.TgZ(1,"span",49),n._UZ(2,"img",50),n._uU(3),n.qZA(),n.TgZ(4,"button",51),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).isDateAreEqual=!1}),n._UZ(5,"span"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(3),n.Oqu(e.language["Both Start Time And End Time are Same"])}}function xe(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",15),n.TgZ(1,"label",16),n._uU(2),n.qZA(),n.TgZ(3,"ng-select",17),n.NdJ("change",function(){return n.CHM(e),n.oxw(2).dropDownchange()})("ngModelChange",function(t){return n.CHM(e),n.oxw(2).TimeFrame=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.language.TTimeFrame),n.xp6(1),n.Q6J("clearable",!1)("searchable",!1)("items",e.FrameSV)("ngModel",e.TimeFrame)}}function we(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",53),n.TgZ(1,"label",16),n._uU(2),n.qZA(),n.TgZ(3,"ng-select",54),n.NdJ("change",function(){return n.CHM(e),n.oxw(2).dropDownchange()})("ngModelChange",function(t){return n.CHM(e),n.oxw(2).WeekFrame=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.language.Day_s),n.xp6(1),n.Q6J("items",e.WeekFramedata)("clearable",!1)("searchable",!1)("ngModel",e.WeekFrame)}}function Se(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",55),n.TgZ(1,"i",56),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).reload()}),n.qZA(),n.qZA()}}const Ce=function(){return{width:"100%",height:"38px"}},Ee=function(){return{height:"36px"}},ke=function(){return{standalone:!0}};function Me(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",65),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.TgZ(3,"p-calendar",66),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(3).weekDate=t})("onSelect",function(){return n.CHM(e),n.oxw(3).dayUpdate()}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(3);n.xp6(2),n.Oqu(e.language.Date),n.xp6(1),n.Akn(n.DdM(10,Ce)),n.Q6J("inputStyle",n.DdM(11,Ee))("autoZIndex",!0)("ngModel",e.weekDate)("showIcon",!0)("ngModelOptions",n.DdM(12,ke))("maxDate",e.maxDate)("minDate",e.minDate)}}function Oe(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",67),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.TgZ(3,"p-calendar",68),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(3).startDate=t})("onSelect",function(){return n.CHM(e),n.oxw(3).startTimeUpdate()}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(3);n.xp6(2),n.hij("",e.language["Start Time"]," "),n.xp6(1),n.Akn(n.DdM(13,Ce)),n.Q6J("ngModel",e.startDate)("stepMinute",e.stepMinuteVal)("inputStyle",n.DdM(14,Ee))("autoZIndex",!0)("showIcon",!0)("ngModelOptions",n.DdM(15,ke))("timeOnly",e.showHrs)("panelStyleClass",e.isLastDay15minSelected?"":"hideMin")("minDate",e.minStartTime)("maxDate",e.maxStartTime)}}function Ne(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",67),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.TgZ(3,"p-calendar",69),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(3).endDate=t})("onSelect",function(){return n.CHM(e),n.oxw(3).endTimeUpdate()}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(3);n.xp6(2),n.hij("",e.language["End Time"]," "),n.xp6(1),n.Akn(n.DdM(14,Ce)),n.Q6J("stepMinute",e.stepMinuteVal)("inputStyle",n.DdM(15,Ee))("autoZIndex",!0)("ngModel",e.endDate)("showIcon",!0)("ngModelOptions",n.DdM(16,ke))("timeOnly",e.showHrs)("disabled",e.isEndDateDisabled)("panelStyleClass",e.isLastDay15minSelected?"":"hideMin")("minDate",e.minEndTime)("maxDate",e.maxEndTime)}}function Pe(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",57),n.TgZ(1,"div",58),n.TgZ(2,"label"),n._uU(3),n.qZA(),n.TgZ(4,"ng-select",59),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).onTimeFrameChange(t)})("ngModelChange",function(t){return n.CHM(e),n.oxw(2).TimeFrame=t}),n.qZA(),n.qZA(),n.YNc(5,Me,4,13,"div",60),n.YNc(6,Oe,4,16,"div",61),n.YNc(7,Ne,4,17,"div",61),n.TgZ(8,"div",62),n.TgZ(9,"div",63),n.TgZ(10,"button",64),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).loadChart()}),n._uU(11),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(3),n.Oqu(e.language.TTimeFrame),n.xp6(1),n.Q6J("items",e.Frame)("ngModel",e.TimeFrame),n.xp6(1),n.Q6J("ngIf",e.start&&!e.isLastDay15minSelected),n.xp6(1),n.Q6J("ngIf",e.start),n.xp6(1),n.Q6J("ngIf",e.start),n.xp6(4),n.hij(" ",e.language.apply," ")}}function Ze(e,t){1&e&&(n.TgZ(0,"div",73),n.TgZ(1,"div",74),n.TgZ(2,"div",75),n.TgZ(3,"div",76),n._UZ(4,"span",77),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function Fe(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.Oqu(e.language["Last 24h"])}}function Le(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.Oqu(e.language["Last 1week"])}}function Re(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",78),n.TgZ(1,"ngx-slider",79),n.NdJ("valueChange",function(t){return n.CHM(e),n.oxw(3).selectedInterval=t})("userChangeEnd",function(){return n.CHM(e),n.oxw(3).sliderEvent()}),n.qZA(),n.TgZ(2,"span",80),n.TgZ(3,"label"),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"span",81),n.TgZ(6,"label"),n._uU(7),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("value",e.selectedInterval)("options",e.timeIntervalOptions),n.xp6(3),n.hij(" ",e.leftSliderTime,""),n.xp6(3),n.Oqu(e.rightSliderTime)}}function qe(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",57),n.TgZ(1,"div",82),n.TgZ(2,"div",63),n.TgZ(3,"button",64),n.NdJ("click",function(){return n.CHM(e),n.oxw(3).loadChart()}),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(3);n.xp6(4),n.hij(" ",e.language.apply," ")}}function He(e,t){if(1&e&&(n.TgZ(0,"section",70),n.YNc(1,Ze,5,0,"div",24),n.TgZ(2,"div",71),n.TgZ(3,"label"),n._uU(4),n.qZA(),n.YNc(5,Fe,2,1,"span",0),n.YNc(6,Le,2,1,"span",0),n.qZA(),n.YNc(7,Re,8,4,"div",72),n.YNc(8,qe,5,1,"div",21),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.loader),n.xp6(1),n.s9C("title",e.language["Chart Timeframe"]),n.xp6(2),n.Oqu(e.language["Chart Timeframe"]),n.xp6(1),n.Q6J("ngIf",6==e.TimeFrame),n.xp6(1),n.Q6J("ngIf",4==e.TimeFrame),n.xp6(1),n.Q6J("ngIf",e.showIntervalSlider),n.xp6(1),n.Q6J("ngIf",!1)}}function Be(e,t){1&e&&(n.TgZ(0,"div",73),n.TgZ(1,"div",74),n.TgZ(2,"div",75),n.TgZ(3,"div",76),n._UZ(4,"span",77),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function $e(e,t){1&e&&(n.TgZ(0,"div",73),n.TgZ(1,"div",74),n.TgZ(2,"div",75),n.TgZ(3,"div",76),n._UZ(4,"span",77),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function Ue(e,t){1&e&&(n.TgZ(0,"div",73),n.TgZ(1,"div",74),n.TgZ(2,"div",75),n.TgZ(3,"div",76),n._UZ(4,"span",77),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function We(e,t){1&e&&(n.TgZ(0,"div",73),n.TgZ(1,"div",74),n.TgZ(2,"div",75),n.TgZ(3,"div",76),n._UZ(4,"span",77),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function Ge(e,t){if(1&e&&(n.TgZ(0,"div",74),n.TgZ(1,"div",75),n.TgZ(2,"div",76),n.TgZ(3,"span",77),n._uU(4),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw(3);n.xp6(4),n.Oqu(e.language.Loading)}}function Ye(e,t){if(1&e){const e=n.EpF();n.YNc(0,Ge,5,1,"div",83),n.TgZ(1,"div",84),n._UZ(2,"h4",85),n.TgZ(3,"button",86),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).close()}),n._UZ(4,"span",87),n.qZA(),n.qZA(),n.TgZ(5,"div",88),n.TgZ(6,"section"),n.TgZ(7,"div",57),n.TgZ(8,"div",25),n.TgZ(9,"div",89),n._uU(10),n.TgZ(11,"span",90),n._uU(12),n.qZA(),n.qZA(),n.TgZ(13,"div",27),n._UZ(14,"div",91),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("ngIf",e.effLoader),n.xp6(10),n.hij(" ",e.language["Client Efficiency"]," - "),n.xp6(2),n.hij("",e.clientDates," ")}}const Ve=function(e){return{opac:e}};function Je(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"ul",3),n.TgZ(4,"li",4),n.TgZ(5,"a",5),n.NdJ("Click",function(e){return e.preventDefault()}),n.TgZ(6,"span",6),n._uU(7),n.qZA(),n.qZA(),n.qZA(),n.YNc(8,Te,4,2,"li",7),n.YNc(9,Ie,4,2,"li",8),n.qZA(),n.TgZ(10,"div",9),n.TgZ(11,"div",10),n._UZ(12,"div",11),n.qZA(),n.TgZ(13,"div",12),n._UZ(14,"div",11),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"section"),n.YNc(16,Ae,6,1,"div",13),n.YNc(17,_e,6,1,"div",13),n.TgZ(18,"div",14),n.TgZ(19,"div",15),n.TgZ(20,"label",16),n._uU(21),n.qZA(),n.TgZ(22,"ng-select",17),n.NdJ("change",function(){return n.CHM(e),n.oxw().dropDownchange()})("ngModelChange",function(t){return n.CHM(e),n.oxw().TimeFrame=t}),n.qZA(),n.qZA(),n.YNc(23,xe,4,5,"div",18),n.YNc(24,we,4,5,"div",19),n.YNc(25,Se,2,0,"span",20),n.qZA(),n.YNc(26,Pe,12,7,"div",21),n.YNc(27,He,9,7,"section",22),n.qZA(),n.TgZ(28,"section"),n.TgZ(29,"div",23),n.YNc(30,Be,5,0,"div",24),n.TgZ(31,"div",25),n.TgZ(32,"div",26),n._uU(33),n.qZA(),n.TgZ(34,"div",27),n._UZ(35,"div",28),n.TgZ(36,"div",29),n._UZ(37,"span",30),n.TgZ(38,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(1,"qoeGood")}),n._uU(39),n.qZA(),n._UZ(40,"span",32),n.TgZ(41,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(1,"qoeFair")}),n._uU(42),n.qZA(),n._UZ(43,"span",33),n.TgZ(44,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(1,"qoePoor")}),n._uU(45),n.qZA(),n._UZ(46,"span",34),n.TgZ(47,"span",35),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(1,"qoeNoData")}),n._uU(48),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(49,"section"),n.TgZ(50,"div",23),n.YNc(51,$e,5,0,"div",24),n.TgZ(52,"div",25),n.TgZ(53,"div",36),n._uU(54),n.qZA(),n.TgZ(55,"div",27),n._UZ(56,"div",37),n.TgZ(57,"div",29),n._UZ(58,"span",30),n.TgZ(59,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(2,"serviceGood")}),n._uU(60),n.qZA(),n._UZ(61,"span",32),n.TgZ(62,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(2,"serviceFair")}),n._uU(63),n.qZA(),n._UZ(64,"span",33),n.TgZ(65,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(2,"servicePoor")}),n._uU(66),n.qZA(),n._UZ(67,"span",34),n.TgZ(68,"span",35),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(2,"serviceNoData")}),n._uU(69),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(70,"section"),n.TgZ(71,"div",23),n.YNc(72,Ue,5,0,"div",24),n.TgZ(73,"div",25),n.TgZ(74,"div",38),n._uU(75),n.qZA(),n.TgZ(76,"div",27),n._UZ(77,"div",39),n.TgZ(78,"div",29),n._UZ(79,"span",30),n.TgZ(80,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(3,"contGood")}),n._uU(81),n.qZA(),n._UZ(82,"span",33),n.TgZ(83,"span",31),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(3,"contPoor")}),n._uU(84),n.qZA(),n._UZ(85,"span",34),n.TgZ(86,"span",35),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(3,"contNoData")}),n._uU(87),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(88,"section"),n.TgZ(89,"div",23),n.YNc(90,We,5,0,"div",24),n.TgZ(91,"div",25),n.TgZ(92,"div",40),n._uU(93),n.qZA(),n.TgZ(94,"div",27),n._UZ(95,"div",41),n.TgZ(96,"div",29),n._UZ(97,"span",42),n.TgZ(98,"span",43),n.NdJ("click",function(){return n.CHM(e),n.oxw().filterContent(4,"homeData")}),n._uU(99),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(100,Ye,15,3,"ng-template",null,44,n.W1O),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.MGl("routerLink","/",e.MODULE,"/overview/issues"),n.xp6(2),n.hij(" ",e.language.Issues,""),n.xp6(1),n.Q6J("ngIf",e.showTopologyTab),n.xp6(1),n.Q6J("ngIf",e.showQoeTab),n.xp6(7),n.Q6J("ngIf",e.isError),n.xp6(1),n.Q6J("ngIf",e.isDateAreEqual),n.xp6(4),n.Oqu(e.language.TTimeFrame),n.xp6(1),n.Q6J("clearable",!1)("searchable",!1)("items",e.Frame)("ngModel",e.TimeFrame),n.xp6(1),n.Q6J("ngIf",e.softwareVersion<22.1),n.xp6(1),n.Q6J("ngIf",4==e.TimeFrame),n.xp6(1),n.Q6J("ngIf",!0),n.xp6(1),n.Q6J("ngIf",!1),n.xp6(1),n.Q6J("ngIf",6==e.TimeFrame||4==e.TimeFrame),n.xp6(3),n.Q6J("ngIf",e.loader),n.xp6(3),n.hij("",e.language["QoE Score"]," "),n.xp6(5),n.Q6J("ngClass",n.VKq(48,Ve,!e.legendType.qoeGood)),n.xp6(1),n.Oqu(e.language.Good),n.xp6(2),n.Q6J("ngClass",n.VKq(50,Ve,!e.legendType.qoeFair)),n.xp6(1),n.Oqu(e.language.Fair),n.xp6(2),n.Q6J("ngClass",n.VKq(52,Ve,!e.legendType.qoePoor)),n.xp6(1),n.Oqu(e.language.Poor),n.xp6(2),n.Q6J("ngClass",n.VKq(54,Ve,!e.legendType.qoeNoData)),n.xp6(1),n.Oqu(e.language["No Data Available"]),n.xp6(3),n.Q6J("ngIf",e.loader),n.xp6(3),n.hij(" ",e.language["WAN Service"]," "),n.xp6(5),n.Q6J("ngClass",n.VKq(56,Ve,!e.legendType.serviceGood)),n.xp6(1),n.Oqu(e.language.Good),n.xp6(2),n.Q6J("ngClass",n.VKq(58,Ve,!e.legendType.serviceFair)),n.xp6(1),n.Oqu(e.language.Fair),n.xp6(2),n.Q6J("ngClass",n.VKq(60,Ve,!e.legendType.servicePoor)),n.xp6(1),n.Oqu(e.language.Poor),n.xp6(2),n.Q6J("ngClass",n.VKq(62,Ve,!e.legendType.serviceNoData)),n.xp6(1),n.Oqu(e.language["No Data Available"]),n.xp6(3),n.Q6J("ngIf",e.loader),n.xp6(3),n.hij(" ",e.language["WAN Continuity"]," "),n.xp6(5),n.Q6J("ngClass",n.VKq(64,Ve,!e.legendType.contGood)),n.xp6(1),n.Oqu(e.language["WAN Up"]),n.xp6(2),n.Q6J("ngClass",n.VKq(66,Ve,!e.legendType.contPoor)),n.xp6(1),n.Oqu(e.language["WAN Down"]),n.xp6(2),n.Q6J("ngClass",n.VKq(68,Ve,!e.legendType.contNoData)),n.xp6(1),n.Oqu(e.language["No Data Available"]),n.xp6(3),n.Q6J("ngIf",e.loader),n.xp6(3),n.hij(" ",e.language["Whole Home Efficiency"],""),n.xp6(5),n.Q6J("ngClass",n.VKq(70,Ve,!e.legendType.homeData)),n.xp6(1),n.Oqu(e.language["Whole Home Efficiency Score"])}}const ze=[{path:"",component:l,children:[{path:"issues",component:L,data:{title:"Calix Suppport Cloud - issues"}},{path:"topology",component:ce,data:{title:"Calix Suppport Cloud - topology"}},{path:"quality-of-experience",component:(()=>{class e{constructor(e,t,i,a,n,r,o,l,d,h){this.router=e,this.dialogService=t,this.translateService=i,this.dataChartService=a,this.ssoService=n,this.deviceService=r,this.IssuesService=o,this.titleService=l,this.elementRef=d,this.cdRef=h,this.lastSeventhDay=ge().subtract(144,"hours").format("dddd"),this.lastSixthDay=ge().subtract(120,"hours").format("dddd"),this.lastfifthDay=ge().subtract(96,"hours").format("dddd"),this.lastFourthDay=ge().subtract(72,"hours").format("dddd"),this.lastThirdDay=ge().subtract(48,"hours").format("dddd"),this.yesterDay=ge().subtract(24,"hours").format("dddd"),this.toDay=ge().format("dddd"),this.WeekFramedata=[],this.pipe=new s.uU("en-US"),this.MODULE="support",this.deviceInfo=[],this.globalObj={},this.mess=!1,this.isError=!1,this.error=!1,this.loader=!1,this.effLoader=!1,this.showHrs=!0,this.scope={qoeRead:!1,topologyRead:!1},this.isDateAreEqual=!1,this.appliedTimeFrame=2,this.avgEff={},this.summaryData=[],this.legendType={qoeDash:!0,qoeSolid:!0,serviceGood:!0,serviceFair:!0,servicePoor:!0,qoeGood:!0,qoeFair:!0,qoePoor:!0,qoeNoData:!0,serviceNoData:!0,contGood:!0,contFair:!0,contPoor:!0,contNoData:!0,homeData:!0,clientData:!0},this.timeIntervalOptions={hideLimitLabels:!0,onlyBindHandles:!0,stepsArray:[]},this.showIntervalSlider=!1,this.TimeInterval=1,this.showTopologyTab=!1,this.showQoeTab=!1,this.isDevEnv=!1,this.userClickTimeout=setTimeout(()=>{},0),this.value3=0,this.options3={disabled:!0,showTicksValues:!1,stepsArray:[{value:0},{value:1},{value:2},{value:3},{value:4},{value:5}]},this.WeekFrame=7,this.TimeFrame=2,this.Frame=[{id:1,name:"Last 7 days"},{id:2,name:"Last 24 hours"},{id:3,name:"Last 3 hours"},{id:5,name:"Last 15 minutes"},{id:6,name:"Any 15 minutes within last day"},{id:4,name:"Any 3 Hours within last week"}],this.FrameSV=[{id:2,name:"Last 24 hours"},{id:3,name:"Last 3 hours"},{id:5,name:" Last 15 minutes"},{id:6,name:" Any 15 minutes within last day"}],this.maxDate=new Date,this.minDate=new Date,this.formDate=new Date(this.minDate.setDate(this.minDate.getDate()-6)),this.stepMinuteVal=0,this.isEndDateDisabled=!0,this.isLastDay15minSelected=!1,this.minStartTime=new Date,this.maxStartTime=new Date,this.minEndTime=new Date,this.maxEndTime=new Date,this.silderDataAvail=!1,this.time="",this.MODULE=this.router.url.indexOf("/support/")>-1?"support":"cco",this.qoeCheck(),this.getScopes(),this.lastdays15MinOfValues()}inClick(e){let t=e.target.id?e.target.id:"";if("slider-click-next"==t||"slider-click-prev"==t){e.stopPropagation();let i=e.target.className?e.target.className.split(" ")[0]:"",s=this.timeIntervals.length-1;if("slider-click-next"==t){let e=parseInt(i.split("-")[1]);e+1<=s&&(this.selectedInterval=e+1)}if("slider-click-prev"==t){let e=parseInt(i.split("-")[1]);e-1>=0&&(this.selectedInterval=e-1)}this.handleUserTime()}}ngAfterViewInit(){this.Frame=[{id:1,name:this.language["Last 7 days"]},{id:2,name:this.language.Last_hours},{id:3,name:this.language["Last 3 hours"]},{id:5,name:this.language["Last 15 minutes"]},{id:6,name:this.language["Any 15 minutes within last day"]},{id:4,name:this.language["Any 3 Hours within last week"]}]}reload(){this.lastdays15MinOfValues(),this.loadChart()}handleUserTime(){clearTimeout(this.userClickTimeout),this.userClickTimeout=setTimeout(()=>{this.loadChart()},2e3)}ngOnInit(){var e,t;this.weekDate=this.maxDate=new Date,this.endDate=ge(this.startDate).add(15,"m").toDate(),pe(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE");let i,s=JSON.parse(sessionStorage.getItem("calix.deviceData"));this.isDevEnv=this.ssoService.API.includes("dev"),(null==s?void 0:s.length)>0&&(i=s.filter(e=>"RG"==e.opMode),(i.length||this.ssoService.acceptGSModel((null===(e=i[0])||void 0===e?void 0:e.modelName)||""))&&(this.softwareVersion=null===(t=i[0].softwareVersion)||void 0===t?void 0:t.substring(0,4),this.serialNumberSelected=i[0].serialNumber,this.mac=i[0].macAddress,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language["Quality of Experience"]} - ${this.language.Overview} - ${this.language.Service} - ${this.language["Calix Cloud"]}`),this.Frame=[{id:1,name:this.language["Last 7 days"]},{id:2,name:this.language.Last_hours},{id:3,name:this.language["Last 3 hours"]},{id:5,name:this.language["Last 15 minutes"]},{id:6,name:this.language["Any 15 minutes within last day"]},{id:4,name:this.language["Any 3 Hours within last week"]}],this.loadChart();let t=Object.keys(this.legendType);for(let i of t)this.legendType[i]=!0}),this.titleService.setTitle(`${this.language["Quality of Experience"]} - ${this.language.Overview} - ${this.language.Service} - ${this.language["Calix Cloud"]}`),this.orgId=this.ssoService.getOrgId(),this.IssuesService.rebootAndUpgradeEvent(this.orgId,this.serialNumberSelected).subscribe(e=>{this.WanShowup=e}),this.loadChart(),this.dataChartService.showTopology.subscribe(e=>{this.showTopologyTab=e}),this.qoeSubscribed=this.dataChartService.showQoe.subscribe(e=>{this.showQoeTab=e})))}ngOnDestroy(){this.qoeSubscribed&&this.qoeSubscribed.unsubscribe()}clearFilter(){this.startDate="",this.endDate=""}startTimeUpdate(){this.endDate=ge(this.startDate).add(this.stepMinuteVal,"m").toDate(),this.isEndDateDisabled=this.isLastDay15minSelected,this.isDateAreEqual=this.start&&ge(this.startDate).isSame(this.endDate),4==this.TimeFrame&&(this.minEndTime=ge(this.startDate).add(60,"m").toDate())}endTimeUpdate(){this.isDateAreEqual=this.start&&ge(this.startDate).isSame(this.endDate)}onTimeFrameChange(e){if(this.isEndDateDisabled=!0,this.isLastDay15minSelected=6==e,6==e){this.start=!0,this.stepMinuteVal=15;var t=9e5,i=new Date;this.startDate=this.endDate=new Date(Math.floor(i.getTime()/t)*t),this.startDate=ge(this.endDate).add(-15,"m").toDate(),this.showHrs=!0,this.setMinMax(6)}else 4==e?(this.startDate=this.endDate="",this.isEndDateDisabled=!1,this.start=!0,this.stepMinuteVal=60,t=3e5,(i=new Date).setMinutes(0),this.startDate=this.endDate=new Date(Math.round(i.getTime()/t)*t),this.startDate=ge(this.endDate).add(-60,"m").toDate(),this.setMinMax(4),this.showHrs=!0):this.start=!1}setMinMax(e){let t=this.weekDate;if(t.setMinutes(0),4==e){var i=3e5;if(ge(t).isSame(Date.now(),"day")){var s=new Date;s.setMinutes(0),this.startDate=this.endDate=new Date(Math.round(s.getTime()/i)*i),this.startDate=ge(this.endDate).add(-60,"m").toDate();let e=ge(t).startOf("day").toDate();this.minStartTime=e,this.minEndTime=ge(this.startDate).add(60,"m").toDate(),this.maxStartTime=this.startDate,this.maxEndTime=this.endDate}else{let e,i;e=ge(t).startOf("day").toDate(),i=ge(t).endOf("day").toDate(),this.minStartTime=e,this.minEndTime=ge(this.startDate).add(60,"m").toDate(),this.maxStartTime=ge(i).add(-60,"m").toDate(),this.maxEndTime=i}}else if(6==e){let e=ge(new Date).startOf("day").toDate();this.minStartTime=e,this.minEndTime=ge(this.startDate).add(15,"m").toDate(),this.maxStartTime=ge(this.endDate).add(-15,"m").toDate(),this.maxEndTime=this.endDate}}dayUpdate(){this.setMinMax(this.TimeFrame)}sliderEvent(){setTimeout(()=>{(6==this.TimeFrame||4==this.TimeFrame)&&(this.showIntervalSlider=!0),this.loadChart()},500)}dropDownchangeweek(){var e=this.WeekFrame;if(1==e){let e,s=new Date,a=9e5,n=this,r=0;var t,i;let o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(0,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(2==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(24,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(3==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(48,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).add(15,"minutes").format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).add(15,"minutes").format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(72,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(5==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(96,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(6==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(120,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(7==e){let e,i,s=new Date,a=6e4,n=this,r=0;i=ge(new Date(Math.floor(s.getTime()/a)*a)).minutes(0).seconds(0).milliseconds(0);let o=ge(i).subtract(144,"hours");t=new Date(o._d.setHours(144,0,0,0));let l=(new Date).setSeconds(0,0);Math.ceil((l-new Date(ge(t).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let d,h=ge(t),c=0;for(ge();h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),d=Math.floor((i._d.getHours()-h._d.getHours())/3),h.add(d>0?180:60,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>{let i=ge(n.timeIntervals[e].date);var s,a;return parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0?(s=i.subtract(180,"minutes").format("MMM DD hh:mm A"),a=ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")):(s=i.subtract(60,"minutes").format("MMM DD hh:mm A"),a=ge(n.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")),`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${s} - ${a} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `},this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}4==this.TimeFrame&&(this.showIntervalSlider=!1),this.sliderEvent()}dropDownchange(){this.lastdays15MinOfValues(),(6==this.TimeFrame||4==this.TimeFrame)&&(this.showIntervalSlider=!1),this.sliderEvent()}loadChart(e,t){this.startTime=e,this.endTime=t;let i,[s,a]=this.timeForFilter(new Date,new Date);if(this.appliedTimeFrame=this.TimeFrame,4==this.TimeFrame){let e,t,i;parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0?(i=this.timeIntervals[this.selectedInterval].date,t=ge(i),e=ge(i).subtract(180,"minutes")):(i=this.timeIntervals[this.selectedInterval].date,t=ge(i),e=this.timeIntervals[this.selectedInterval-1].date),[s,a]=[this.getISOString(e),this.getISOString(t)]}if(6==this.TimeFrame)if(this.startTime)[s,a]=this.timeForFilter(this.startTime,this.endTime),this.timeForDeviceEfficiency=this.endTime;else{let e=this.timeIntervals[this.selectedInterval].date,t=ge(e).subtract(15,"minutes");[s,a]=[this.getISOString(t),this.getISOString(e)],this.timeForDeviceEfficiency=e}i=1==this.TimeFrame?{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:s,end:a,tz:0}:{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:s,end:a,tz:-(new Date).getTimezoneOffset()/60},this.loader=!0,this.IssuesService.getQoeSummary(i).subscribe(e=>{this.loader=!1,this.summaryData=e||[],e.rawData.length&&!this.silderDataAvail&&(this.value3=e.rawData[e.rawData.length-1].qoeScore,this.silderDataAvail=!0,setTimeout(()=>{pe(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE")},10)),ue.chart("qoeScoreChart",this.qoeChartOption(e||[])),ue.chart("wanServiceChart",this.wanService(e||[])),ue.chart("wanContinuityChart",this.wanContinuity(e||[],this.WanShowup)),ue.chart("wholeHomeEfficiencyChart",this.wholeHomeEfficiencyOption(e||[])),setTimeout(()=>{this.loader=!1},4200)},e=>{this.value3=0,this.summaryData=[],this.loader=!1,this.silderDataAvail=!0,setTimeout(()=>{pe(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE")},10),this.pageErrorHandle(e)})}loadSlider(){let e,[t,i]=[new Date,new Date];i.setMinutes(i.getMinutes()-1),t.setMinutes(t.getMinutes()-16),t=t.toISOString().substr(0,16)+":00",i=i.toISOString().substr(0,16)+":00",e=1==this.TimeFrame?{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:5,start:t,end:i,tz:0}:{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:5,start:t,end:i,tz:-(new Date).getTimezoneOffset()/60},this.loader=!0,this.IssuesService.getQoeSummary(e).subscribe(e=>{this.loader=!1},e=>{this.value3=0,this.loader=!1,this.silderDataAvail=!0,setTimeout(()=>{pe(".string-slider .ngx-slider-pointer-min").attr("title","Realtime QoE")},10),this.pageErrorHandle(e)})}timeForFilter(e,t){switch(this.TimeFrame){case 1:return e.setDate(e.getDate()-6),e.setHours(5,30,0,0),t.setMinutes(t.getMinutes()),[e.toISOString().substring(0,11)+"00:00:00",t.toISOString().substring(0,19)];case 2:e.setHours(e.getHours()-24),e.setMinutes(e.getMinutes()+15),[e,t]=this.minuteAligner(e,t);break;case 3:e.setHours(e.getHours()-3),[e,t]=this.minuteAligner(e,t);break;case 4:break;case 5:e.setMinutes(e.getMinutes()-16),t.setMinutes(t.getMinutes()-1)}return[e.toISOString().substring(0,16)+":00",t.toISOString().substring(0,16)+":00"]}minuteAligner(e,t){let[i,s]=[e.getMinutes(),t.getMinutes()];const a=[45,30,15,0];for(let n=0;n<a.length;n++)!a.includes(i)&&i>a[n]&&(e.setMinutes(a[n]),i=a[n]),!a.includes(s)&&s>a[n]&&(t.setMinutes(a[n]),s=a[n]);return[e,t]}averageTimeSetter(e,t,i=!1){const s=[2,3,4].includes(this.TimeFrame)?i?-15:15:i?-1:1;return 1==this.TimeFrame?e.setHours(e.getHours()-24):e.setMinutes(e.getMinutes()-s),[e.toISOString().substr(0,16)+":00",t.toISOString().substr(0,16)+":00"]}averageTimeSetterNew(e,t,i=!1){let s=[5,6].includes(this.TimeFrame)?1:15;return 1==this.TimeFrame?this.clientDates==ge().format("MM/DD/yyyy")?(e.setHours(5,30,0,0),e.setHours(e.getHours()),(t=new Date).setMinutes(t.getMinutes()+330),[e.toISOString().substring(0,11)+"00:00:00",t.toISOString().substring(0,19)]):(e.setHours(5,30,0,0),e.setHours(e.getHours()),t.setHours(28,89,59,0),[e.toISOString().substring(0,11)+"00:00:00",t.toISOString().substring(0,11)+"23:59:59"]):(t.setMinutes(t.getMinutes()+s),[e.toISOString().substr(0,16)+":00",t.toISOString().substr(0,16)+":00"])}roundOffDate(e,t){if(e&&t&&e>t){let i=t.split("T"),s=i[0].split("-");return s[2]=(s[2]<9?"0":"")+(parseInt(s[2])+1),t=s.join("-")+"T"+i[1],this.roundOffDate(e,t)}return[e,t]}clickToGet15Mins(e){var t;if(2==this.TimeFrame||3==this.TimeFrame){this.TimeFrame=6;let t=e.category.split(":"),i=parseInt(t[0]),s=parseInt(t[1]);this.time=t[1].split(/\s/)[1],("PM"==this.time&&12!==i||12===i&&"AM"==this.time)&&(i+=12),this.date=new Date,this.date.setHours(i),this.date.setMinutes(s),this.date.setSeconds(0,0),this.date>new Date&&this.date.setDate(this.date.getDate()-1);let a,n=this.date,r=ge(n).subtract(15,"minutes"),o=new Date,l=this.date,d=9e5,h=this,c=0,u=ge(new Date(Math.floor(o.getTime()/d)*d)).seconds(0).milliseconds(0),g=ge(u).subtract(24,"hours"),p=(new Date).setSeconds(0,0);const m=Math.ceil((p-new Date(ge(g).toDate()).getTime())/36e5)>24?15:30;g=ge(g).add(m,"minutes"),this.timeIntervals1=[],this.timeIntervals=[];let v=ge(g),f=0,D=ge(new Date(Math.floor(l.getTime()/d)*d)).seconds(0).milliseconds(0);for(;v<=D;)this.timeIntervals1.push({value:f,legend:ge(v).format("MM/DD/YYYY HH:mm"),date:ge(v).toDate()}),a=ge(v),v.add(15,"minutes"),f++;for(v=ge(g),f=0;v<=u;)this.timeIntervals.push({value:f,legend:ge(v).format("MM/DD/YYYY HH:mm"),date:ge(v).toDate()}),a=ge(v),v.add(15,"minutes"),f++;c=this.timeIntervals1.length;let y=this.timeIntervals.length;this.selectedInterval=this.timeIntervals1[c-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(h.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A ")} - ${ge(h.timeIntervals[e].date).format("MMM DD hh:mm A ")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(15,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[y-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3),this.loadChart(r,n)}if(1==this.TimeFrame){this.TimeFrame=4;let n,r=e.category.split("/"),o=r[2]+r[0]+r[1];if(n=(null===(t=this.summaryData.rawData)||void 0===t?void 0:t.findIndex(e=>e.date==o))+1,this.WeekFrame=n,4==this.TimeFrame){var i=this.WeekFrame;if(1==i){let e,t=new Date,i=9e5,n=this,r=0;var s,a;let o=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");s=new Date(l._d.setHours(0,0,0,0)),a=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let h=ge(s),c=0;for(;h<=a;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(2==i){let e,t=new Date,i=9e5,n=this,r=0,o=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");s=new Date(l._d.setHours(24,0,0,0)),a=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let h=ge(s),c=0;for(;h<=a;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(3==i){let e,t=new Date,i=9e5,n=this,r=0,o=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");s=new Date(l._d.setHours(48,0,0,0)),a=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let h=ge(s),c=0;for(;h<=a;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==i){let e,t=new Date,i=9e5,n=this,r=0,o=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");s=new Date(l._d.setHours(72,0,0,0)),a=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let h=ge(s),c=0;for(;h<=a;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(5==i){let e,t=new Date,i=9e5,n=this,r=0,o=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");s=new Date(l._d.setHours(96,0,0,0)),a=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let h=ge(s),c=0;for(;h<=a;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(6==i){let e,t=new Date,i=9e5,n=this,r=0,o=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");s=new Date(l._d.setHours(120,0,0,0)),a=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let h=ge(s),c=0;for(;h<=a;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(7==i){let e,t,i=new Date,a=6e4,n=this,r=0;t=ge(new Date(Math.floor(i.getTime()/a)*a)).minutes(0).seconds(0).milliseconds(0);let o=ge(t).subtract(144,"hours");s=new Date(o._d.setHours(144,0,0,0));let l=(new Date).setSeconds(0,0);Math.ceil((l-new Date(ge(s).toDate()).getTime())/36e5),s=ge(s).add(180,"minutes"),this.timeIntervals=[];let d,h=ge(s),c=0;for(ge();h<=t;){if(this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),d=Math.floor((t._d.getHours()-h._d.getHours())/3),d>0)h.add(180,"minutes");else{const e=2==Math.ceil(t._d.getHours()-h._d.getHours())?120:60;h.add(e,"minutes")}c++}r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>{let i=ge(n.timeIntervals[e].date);var s,a;return parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0?(s=i.subtract(180,"minutes").format("MMM DD hh:mm A"),a=ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")):(s=ge(this.timeIntervals[r-2].date).format("MMM DD hh:mm A"),a=ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")),`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${s} - ${a} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `},this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}this.loadChart(ge(this.time).subtract(180,"minutes"),ge(this.time)),setTimeout(()=>{this.WeekFramedata=[{id:1,name:this.language[this.lastSeventhDay]},{id:2,name:this.language[this.lastSixthDay]},{id:3,name:this.language[this.lastfifthDay]},{id:4,name:this.language[this.lastFourthDay]},{id:5,name:this.language[this.lastThirdDay]},{id:6,name:this.language[this.yesterDay]},{id:7,name:this.language[this.toDay]}]},2e3)}}e.category.split(" "),ge(new Date).format("MM/DD/YY");let n=9e5;const r=ge(new Date(Math.floor((new Date).getTime()/n)*n)).seconds(0).milliseconds(0).startOf("hour"),o=ge(e.category);if(ge.duration(r.diff(o)).asHours()<=24&&4==this.TimeFrame){this.TimeFrame=6;let t=e.category.split(" "),i=t[1].split(":"),s=parseInt(i[0]),a=parseInt(i[1]);this.time=t[2],("PM"==this.time&&12!==s||12===s&&"AM"==this.time)&&(s+=12),this.date=new Date,this.date.setHours(s),this.date.setMinutes(a),this.date.setSeconds(0,0),this.date>new Date&&this.date.setDate(this.date.getDate()-1);let n,r=this.date,o=ge(r).subtract(15,"minutes"),l=new Date,d=this.date,h=9e5,c=this,u=0,g=ge(new Date(Math.floor(l.getTime()/h)*h)).seconds(0).milliseconds(0),p=ge(g).subtract(24,"hours"),m=(new Date).setSeconds(0,0);const v=Math.ceil((m-new Date(ge(p).toDate()).getTime())/36e5)>24?15:30;p=ge(p).add(v,"minutes"),this.timeIntervals1=[],this.timeIntervals=[];let f=ge(p),D=0,y=ge(new Date(Math.floor(d.getTime()/h)*h)).seconds(0).milliseconds(0);for(this.showIntervalSlider=!1;f<=y;)this.timeIntervals1.push({value:D,legend:ge(f).format("MM/DD/YYYY HH:mm"),date:ge(f).toDate()}),n=ge(f),f.add(15,"minutes"),D++;for(f=ge(p),D=0;f<=g;)this.timeIntervals.push({value:D,legend:ge(f).format("MM/DD/YYYY HH:mm"),date:ge(f).toDate()}),n=ge(f),f.add(15,"minutes"),D++;u=this.timeIntervals1.length;let b=this.timeIntervals.length;this.selectedInterval=this.timeIntervals1[u-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(c.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A ")} - ${ge(c.timeIntervals[e].date).format("MMM DD hh:mm A ")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.cdRef.detectChanges(),this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(15,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[b-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3),this.loadChart(o,r)}}qoeChartOption(e){let t,i=this,s=[],a=[],n=[],r=0;const o=["#C70000","#C70000","rgba(252, 114, 53)","#82BF00","#82BF00"];let l=this.TimeFrame;a=(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).filter(e=>{if(e.qoeScore){t=e.qoeScore>=1?"#0A77FB":"gray";const i=e.date;let a=i.substring(0,4),n=i.substring(6,4),r=i.substring(6),o=n+"/"+r+"/"+a,l=n+"/"+r+"/"+i.substring(2,4);const d=e.time;let h,c=o+" "+(1==this.TimeFrame?"":d.substring(0,2)+":"+d.substring(2,4));if(1==this.TimeFrame)c=o;else if(4==this.TimeFrame)h=l+" "+ge(d.substring(0,2)+":"+d.substring(2,4),["HH:mm"]).format("hh:mm A"),c=h;else if(6==this.TimeFrame){let e=ge(d.substring(0,2)+":"+d.substring(2,4),["HH:mm"]).format("hh:mm A");e=e.split(/\s/),d.toString().slice(0,2)>12&&(this.time="PM"),d.toString().slice(0,2)<=12&&(this.time="AM"),e[1]=this.time,c=e.join(" ")}else c=ge(d.substring(0,2)+":"+d.substring(2,4),["HH:mm"]).format("hh:mm A");return s.push(c),e}}).map((e,t)=>{if(e.qoeScore){r=e.qoeScore>0?e.qoeScore:r;const i=e.qoeScore>0?e.qoeScore:r>0?-r:e.qoeScore;return n.push({value:t,dashStyle:i>=1?"solid":"dash",color:i>=1?"#0A77FB":"gray"}),{y:"string"==typeof i?i.substring(0,1):Math.abs(i),color:i>=1?o[i-1]:"gray",qoeCode:(null==e?void 0:e.qoeHelpingCode)||[]}}});const d=this;return{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},xAxis:{categories:s,labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,tickInterval:function(){let e=a.length?a.length:0,t=1;return 2===l&&(e>90?t=4:e>70?t=3:e>30&&(t=2)),t}()},tooltip:{formatter:function(){var e;return`${d.language.score_table} : <b>${this.point.y}</b>`+((null===(e=this.point)||void 0===e?void 0:e.qoeCode)||[]).map(e=>`<br>${d.language[e]?d.language[e]:e}`).join("")}},yAxis:{min:1,max:5,tickInterval:1,title:{text:this.language["QoE Score"],style:{fontSize:"15px"},margin:40},lineColor:"#ddd"},plotOptions:{series:{cursor:5!=this.TimeFrame&&6!=this.TimeFrame?"pointer":"context-menu",point:{events:{click:function(){i.clickToGet15Mins(this)}}}}},series:[{type:"line",min:1,max:5,data:a,marker:{radius:4},zoneAxis:"x",zones:n,color:"#0A77FB"}]}}wanService(e){let t,i=[],s="",a={0:"#C70000",1:"#C70000",2:"rgba(252, 114, 53)",3:"#82BF00"},n=[],r=this.TimeFrame;(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).filter(e=>"GOOD"==(null==e?void 0:e.wanService)||"OK"==(null==e?void 0:e.wanService)||"BAD"==(null==e?void 0:e.wanService)||"BAD(GREY)"==(null==e?void 0:e.wanService)).map((e,s)=>{let r=e.wanService.toUpperCase().includes("GREY");const o=e.wanService.toUpperCase().includes("BAD")?1:e.wanService.toUpperCase().includes("OK")?2:3;t='<tr><th>Value:</th><td style="padding-left: 3px;"></td></tr>';const l=e.date;let d=l.substring(0,4),h=l.substring(6,4),c=l.substring(6),u=h+"/"+c+"/"+d,g=h+"/"+c+"/"+l.substring(2,4);const p=e.time;let m,v=u+" "+(1==this.TimeFrame?"":p.substring(0,2)+":"+p.substring(2,4));if(1==this.TimeFrame)v=u;else if(4==this.TimeFrame)m=g+" "+ge(p.substring(0,2)+":"+p.substring(2,4),["HH:mm"]).format("hh:mm A"),v=m;else if(6==this.TimeFrame){let e=ge(p.substring(0,2)+":"+p.substring(2,4),["HH:mm"]).format("hh:mm A");e=e.split(/\s/),p.toString().slice(0,2)>12&&(this.time="PM"),p.toString().slice(0,2)<=12&&(this.time="AM"),e[1]=this.time,v=e.join(" ")}else v=ge(p.substring(0,2)+":"+p.substring(2,4),["HH:mm"]).format("hh:mm A");i.push(v),n.push({x:s,y:o?4:null,color:r?"grey":a[o],level:o,wanServiceCode:(null==e?void 0:e.wanserviceHelpingCode)||[]})}),s=this.language.Health;let o=this;return{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},plotOptions:{series:{states:{hover:{enabled:!1}}}},xAxis:{categories:i,padding:"50px",labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,tickInterval:function(){let e=n.length?n.length:0,t=1;return 2===r&&(e>90?t=4:e>70?t=3:e>30&&(t=2)),t}()},tooltip:{formatter:function(){var e;return((null===(e=this.point)||void 0===e?void 0:e.wanServiceCode)||[]).map(e=>`${o.language[e]?o.language[e]:e}<br>`).join("")||!1}},yAxis:[{title:{text:s,margin:40,style:{fontSize:"15px"}},padding:"5px",gridLineWidth:1,tickAmount:4,labels:{formatter:function(e){var t,i,s,a,r;if((null===(i=null===(t=null==e?void 0:e.axis)||void 0===t?void 0:t.tickPositions)||void 0===i?void 0:i.length)>0){let t=e.axis.tickPositions.indexOf(this.pos);for(let i=0;i<(null==n?void 0:n.length);i++)1==n[i].level?n[i].y=null===(s=e.axis)||void 0===s?void 0:s.tickPositions[1]:2==n[i].level?n[i].y=null===(a=e.axis)||void 0===a?void 0:a.tickPositions[2]:3==n[i].level&&(n[i].y=null===(r=e.axis)||void 0===r?void 0:r.tickPositions[3]);if(-1!=t)return""}}}},{opposite:!0,tickAmount:4,padding:"5px",title:{text:""},labels:{format:"{value} Mbps"}}],series:[{type:"scatter",data:n,name:"",marker:{symbol:"circle",shadow:!1,radius:8},color:"black"},{name:"",data:[],marker:{symbol:"circle",shadow:!1,radius:8},color:"black",states:{hover:{enabled:!1}},yAxis:1}]}}wanContinuity(e,t){let i=[],s="",a={0:"#C70000",1:"#C70000",2:"#82BF00",3:"#82BF00"},n=[];const r=this;let o=this.TimeFrame;return(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).filter(e=>e.wanContinuity).map((s,r)=>{let o=s.wanContinuity.toUpperCase().includes("GREY"),l=s.wanContinuity.toUpperCase().includes("GOOD")?2:1;new Date(1e3*s.dl_created);const d=s.date;let h=d.substr(0,4),c=d.substr(4,2),u=d.substr(6,2),g=c+"/"+u+"/"+h,p=c+"/"+u+"/"+d.substring(2,4);const m=s.time;let v,f=g+" "+(1==this.TimeFrame?"":m.substring(0,2)+":"+m.substring(2,4));if(1==this.TimeFrame)f=g;else if(4==this.TimeFrame)v=p+" "+ge(m.substring(0,2)+":"+m.substring(2,4),["HH:mm"]).format("hh:mm A"),f=v;else if(6==this.TimeFrame){let e=ge(m.substring(0,2)+":"+m.substring(2,4),["HH:mm"]).format("hh:mm A");e=e.split(/\s/),m.toString().slice(0,2)>12&&(this.time="PM"),m.toString().slice(0,2)<=12&&(this.time="AM"),e[1]=this.time,f=e.join(" ")}else f=ge(m.substring(0,2)+":"+m.substring(2,4),["HH:mm"]).format("hh:mm A");i.push(f),n.push({x:r,y:l?4:null,color:o?"grey":a[l],level:l,marker:{lineColor:"blue",lineWidth:this.downfallCalc(t,e,r).length?3:0}})}),s=this.language.Status,{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},plotOptions:{series:{states:{hover:{enabled:!1}}}},xAxis:{categories:i,labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,padding:"50px",tickInterval:function(){let e=n.length?n.length:0,t=1;return 2===o&&(e>90?t=4:e>70?t=3:e>30&&(t=2)),t}()},tooltip:{formatter:function(){var i;return r.downfallCalc(t,e,null===(i=this.point)||void 0===i?void 0:i.x).join("<br>")||!1}},yAxis:[{title:{text:s,margin:40,style:{fontSize:"15px"}},padding:"5px",gridLineWidth:1,tickAmount:3,labels:{formatter:function(e){var t,i,s,a;if((null===(i=null===(t=null==e?void 0:e.axis)||void 0===t?void 0:t.tickPositions)||void 0===i?void 0:i.length)>0){let t=e.axis.tickPositions.indexOf(this.pos);for(let i=0;i<(null==n?void 0:n.length);i++)1==n[i].level?n[i].y=null===(s=e.axis)||void 0===s?void 0:s.tickPositions[1]:2==n[i].level&&(n[i].y=null===(a=e.axis)||void 0===a?void 0:a.tickPositions[2]);if(-1!=t)return""}}}},{opposite:!0,tickAmount:4,padding:"50px",title:{text:""},labels:{format:"{value} Mbps"}}],series:[{type:"scatter",data:n,name:"",pointWidth:1e3,pointPadding:0,marker:{enabled:!0,symbol:"circle",shadow:!1,radius:8,states:{hover:{enabled:!1}}},color:"black"},{name:"",data:[],marker:{symbol:"circle",shadow:!1,radius:8},color:"black",states:{hover:{color:"#a4edba",borderColor:"gray"}},yAxis:1}]}}convertDate(e){return ge(e).format(" DD/MM/YYYY, hh:mm A")}downfallCalc(e,t,i){let s=this,a=[];if((null==e?void 0:e.length)>0&&1!=this.TimeFrame){let n=i,r=t.rawData[n].date,o=r.slice(0,4),l=r.slice(4,6)+"/"+r.slice(6,8)+"/"+o,d=t.rawData[n].time,h=d.slice(0,2),c=d.slice(2,4),u=new Date(l+" "+h+":"+c);u.setSeconds(59),u.setMilliseconds(0);let g=new Date(u);g.setSeconds(0),[5,6].includes(this.TimeFrame)||g.setMinutes(g.getMinutes()-14),e.forEach(e=>{let t=new Date(e.timestamp),i=t.toISOString(),n=this.convertDate(i);if(t.setSeconds(0),t.setMilliseconds(0),g.getTime()<=t.getTime()&&t.getTime()<=u.getTime())return"SW"==e.type.slice(0,2)&&(e.type="Software"+e.type.slice(2)),void a.push(`<b>${n} : </b> ${s.language[e.type]}`)})}return a}wholeHomeEfficiencyOption(e){let t=this,i=[],s=0,a="",n=this,r=this.TimeFrame,o=[],l=[];l=(e[1==this.TimeFrame?"dailyData":"rawData"]||[]).map((e,t)=>{const n=e.date;s=e.homeScore>0?e.homeScore:s;const r=e.homeScore>0?e.homeScore:s>0?-s:e.homeScore;a=e.homeScore>0?` ${this.language["Efficiency Score"]} : <b>{point.y}%</b>`:` ${this.language["Efficiency Score"]} : <b>{point.y}%</b><br>No client activity for Efficiency score`,i.push({value:t,dashStyle:e.homeScore>0?"solid":"dash",color:e.homeScore>0?"#0a77fb":"gray"});let l=n.substring(0,4),d=n.substring(6,4),h=n.substring(6),c=d+"/"+h+"/"+l;const u=null==e?void 0:e.time;let g,p=d+"/"+h+"/"+n.substring(2,4),m=1==this.TimeFrame?c:ge((null==u?void 0:u.substring(0,2))+":"+(null==u?void 0:u.substring(2,4)),["HH:mm"]).format("hh:mm A"),v=c+" "+(1==this.TimeFrame?"":u.substring(0,2)+":"+u.substring(2,4));if(1==this.TimeFrame)v=c,o.push(v);else if(4==this.TimeFrame)g=p+" "+ge(u.substring(0,2)+":"+u.substring(2,4),["HH:mm"]).format("hh:mm A"),o.push(g);else{const e=ge(u.substring(0,2)+":"+u.substring(2,4),["HH:mm"]).format("hh:mm A");g=c+" "+ge(u.substring(0,2)+":"+u.substring(2,4),["HH:mm"]).format("hh:mm A"),v=e,o.push(e)}return{y:"string"==typeof e.homeScore?parseFloat(r.substring(0,5)):Math.abs(r),color:r>0?"#0a77fb":"gray",WHECode:parseFloat(null==e?void 0:e.homeScore)||0,qtime:m,pointDate:v,pointDateTime:g}});let d=this.language.Efficiency_Score;return{title:{text:this.language["Click on the sample to view client efficiency of the selected point."],style:{fontSize:"14px"},align:"left"},credits:{enabled:!1},chart:{type:"column"},tooltip:{formatter:function(){var e='<span class="f-s-10px">'+this.point.qtime+"</span><br>"+d+" : <b>"+(0==this.point.y?this.point.y:this.point.y.toFixed(2))+"%</b>";return 0==this.point.WHECode&&(e+=`</br> ${t.language["No client activity for Efficiency score"]}`),e}},xAxis:{categories:o||[],labels:{rotation:-45,style:{fontSize:"10px"}},overflow:!1,tickInterval:function(){let e=o.length?o.length:0,t=1;return 2===r&&(e>90?t=4:e>70?t=3:e>30&&(t=2)),t}()},yAxis:{min:0,max:100,tickInterval:20,lineColor:"#ddd",title:{text:this.language.Efficiency_Score+" (%)",style:{fontSize:"15px"}}},plotOptions:{series:{maxPointWidth:20,borderRadius:0,cursor:"pointer",marker:{enabled:!1,states:{hover:{enabled:!0,radius:6.5}}},point:{events:{click:function(){n.showClientEfficencyChart(this.options)}}}}},series:[{type:"line",name:"",data:l,zoneAxis:"x",zones:i,color:"#0a77fb",showInLegend:!1}]}}clientEfficiency(e){let t,i;this.globalObj.latencyCreateTime="",[t,i]=1==this.TimeFrame?[new Date(e.pointDate.replace("<br>"," ")),new Date(e.pointDate.replace("<br>"," "))]:[new Date(e.pointDateTime.replace("<br>"," ")),new Date(e.pointDateTime.replace("<br>"," "))];let s,[a,n]=this.averageTimeSetterNew(t,i);s=1==this.TimeFrame?{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:a,end:n,tz:0}:{sn:this.serialNumberSelected,orgId:this.orgId,mac:this.mac,period:this.TimeFrame,start:a,end:n,tz:-(new Date).getTimezoneOffset()/60},this.avgEff=Object.assign({},s),this.effLoader=!0,this.IssuesService.getAverageScore(s).subscribe(t=>{this.effLoader=!1,ue.chart("clientEfficiencyChartDiv",this.clientEfficiencyChartPopup(t||[],e.y))},e=>{this.effLoader=!1,this.pageErrorHandle(e)})}getEfficiensyColor(e){return e>45?"#82BF00":e>15?"rgba(252, 114, 53)":"#C70000"}clientEfficiencyChartPopup(e,t){let i=[],s=[],a=this;const n="average-effciency-score";e[n].sort((e,t)=>e.eff_score-t.eff_score);let r=e[n].filter(e=>""!==e.client_name||""==e.client_name);e[n]=r,e[n].map((e,t)=>{const a=parseFloat(e.eff_score.toFixed(2));i.push(e.client_name||e.mesh_mac||e.station_mac_addr||"");var n=!1;e.is_online_now&&(n=e.is_online_now),s.push({x:t,y:a,color:this.getEfficiensyColor(a),level:a,routerMac:e.router_mac,stationMac:e.station_mac_addr,client_name:e.client_name,is_online_now:n,eff_score:e.eff_score,mesh_mac:e.mesh_mac||""})});let o=e["average-effciency-score"].reduce(function(e,t,i,s){return e+t.eff_score/s.length},0);o=parseFloat(o.toFixed(2));let l=this.TimeFrame,d=this;return{credits:{enabled:!1},legend:{enabled:!1},title:{text:""},xAxis:{categories:i,padding:"5px"},tooltip:{formatter:function(){var e="<b>"+this.x+" "+d.language.Efficiency+": "+this.y+" %</b>";return(this.point.options.client_name||null==this.point.options.client_name&&1!=this.point.options.is_online_now)&&(e+="</br>"+d.language["Click to go to device details"]),e}},yAxis:[{min:0,max:100,tickInterval:20,title:{text:this.language["Device Efficiency"]+" (%)",style:{fontSize:"15px"}},plotLines:[{color:"#5ACFEA",value:t?t.toFixed(2):0,width:"2",zIndex:4,label:{text:`${this.language["Whole Home Efficiency"]} - ${t?t.toFixed(2):0} % `,align:"right"}}]},{opposite:!0,tickAmount:4,padding:"5px",title:{text:""},labels:{format:"{value} Mbps"}}],plotOptions:{series:{maxPointWidth:20,borderRadius:0,cursor:"pointer",point:{events:{click:function(){a.deviceService.efficiencyChart=!0;const e={routerMac:this.options.routerMac,stationMac:this.options.stationMac,is_online_now:this.options.is_online_now,eff_score:this.options.eff_score,period:a.periodForFilter(l),WeekFrame:a.periodForWeekFrame(l),endTime:a.endForFilter()};this.options.stationMac&&this.options.client_name&&(a.close(),a.router.navigate(["/support/device"],{state:e}))}}}},column:{minPointLength:3}},series:[{type:"column",data:s,name:""}]}}endForFilter(){let[e,t,i]=[new Date,new Date,new Date,new Date,new Date,new Date];switch(this.TimeFrame){case 1:if(this.clientDates==ge().format("MM/DD/yyyy")){t=new Date(this.clientDates),e=new Date(this.clientDates);let i=new Date,s=(new Date).getHours();t=new Date(new Date(i.setMinutes(i.getMinutes())).setHours(s,0,0,0))}else t=new Date(this.clientDates),e=new Date(this.clientDates),t.setHours(t.getHours()+24);break;case 2:case 3:t=new Date(this.clientDates),e=new Date(this.clientDates),e.setMinutes(e.getMinutes()-15);break;case 4:if(parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0){let s=this.timeIntervals[this.selectedInterval].date;i=new Date(this.timeIntervals[this.selectedInterval].date),s=ge(s).subtract(15,"minutes"),t=new Date(s),e=new Date(s),e.setMinutes(e.getMinutes()-165)}else{let s=this.timeIntervals[this.selectedInterval].date;i=new Date(this.timeIntervals[this.selectedInterval].date),s=ge(s).subtract(15,"minutes"),t=new Date(s),e=this.timeIntervals[this.selectedInterval-1].date,e.setMinutes(e.getMinutes())}break;case 5:e=new Date,e.setMinutes(e.getMinutes()-16),t.setMinutes(t.getMinutes()+1);break;case 6:let s=this.timeIntervals[this.selectedInterval].date;t=new Date(s),e=new Date(s),e.setMinutes(e.getMinutes()-15)}return[e,t,i]}periodForWeekFrame(e){switch(this.WeekFrame){case 1:e=1;break;case 2:e=2;break;case 3:e=3;break;case 4:e=4;break;case 5:e=5;break;case 6:e=6;break;case 7:e=7}return e}periodForFilter(e){switch(this.TimeFrame){case 1:e=7;break;case 2:case 3:e=6;break;case 4:e=4;break;case 5:e=5;break;case 6:e=6}return e}showClientEfficencyChart(e){this.clientDates=1==this.TimeFrame?ge(new Date(e.pointDate)).format("MM/DD/YYYY"):4==this.TimeFrame?ge(new Date(ge(e.pointDate).toString())).format("MM/DD/YYYY hh:mm A"):ge(new Date(ge(e.pointDateTime).toString())).format("MM/DD/YYYY hh:mm A"),this.modalRef=this.dialogService.open(this.clientEfficencyChartTest,{windowClass:"ce-modal"}),this.clientEfficiency(e),this.modalRef.dismissed.subscribe(()=>{setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},100)})}close(){this.modalRef.close(),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},100)}pageErrorHandle(e){this.alertMessage=this.ssoService.pageErrorHandle(e),this.isError=!0,this.error=!0,pe("body").scrollTop(0)}qoeCheck(){let e=this.ssoService.getScopes();Object.keys(e),d.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.qoe"]=e["cloud.rbac.csc.qoe"]?e["cloud.rbac.csc.qoe"]:[],e&&e["cloud.rbac.csc.qoe"]&&e["cloud.rbac.csc.qoe"].length&&-1!==e["cloud.rbac.csc.qoe"].indexOf("read")&&(this.scope.qoeRead=!0)):this.scope.qoeRead=!0;let t=sessionStorage.getItem("calix.deviceData")?JSON.parse(sessionStorage.getItem("calix.deviceData"))[0].modelName:"";return sessionStorage.getItem("calix.userFdUser"),this.ssoService.acceptGSModel(t)?(this.showQOE=this.ssoService.exosVersionCheck("21.4")&&this.scope.qoeRead,sessionStorage.getItem("qoeCheck")):(this.showQOE=this.scope.qoeRead,sessionStorage.getItem("qoeCheck"))}getScopes(){let e=this.ssoService.getScopes();Object.keys(e),d.N.VALIDATE_SCOPE?(e["cloud.rbac.csc.topology"]=e["cloud.rbac.csc.topology"]?e["cloud.rbac.csc.topology"]:[],e&&e["cloud.rbac.csc.topology"]&&e["cloud.rbac.csc.topology"].length&&-1!==e["cloud.rbac.csc.topology"].indexOf("read")&&(this.scope.topologyRead=!0)):this.scope.topologyRead=!0}lastdays15MinOfValues(){if(6==this.TimeFrame){let e,t=new Date,i=9e5,s=this,a=0,n=ge(new Date(Math.floor(t.getTime()/i)*i)).seconds(0).milliseconds(0),r=ge(n).subtract(24,"hours"),o=(new Date).setSeconds(0,0);const l=Math.ceil((o-new Date(ge(r).toDate()).getTime())/36e5)>24?15:30;r=ge(r).add(l,"minutes"),this.timeIntervals=[];let d=ge(r),h=0;for(;d<=n;)this.timeIntervals.push({value:h,legend:ge(d).format("MM/DD/YYYY HH:mm"),date:ge(d).toDate()}),e=ge(d),d.add(15,"minutes"),h++;a=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[a-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(s.timeIntervals[e].date).subtract(15,"minutes").format("MMM DD hh:mm A")} - ${ge(s.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(15,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[a-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==this.TimeFrame){var e=this.WeekFrame;if(1==e){let e,s=new Date,a=9e5,n=this,r=0;var t,i;let o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(0,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(2==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(24,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(3==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(48,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(4==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(72,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(5==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(96,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(6==e){let e,s=new Date,a=9e5,n=this,r=0,o=ge(new Date(Math.floor(s.getTime()/a)*a)).seconds(0).milliseconds(0),l=ge(o).subtract(144,"hours");t=new Date(l._d.setHours(120,0,0,0)),i=new Date(l._d.setHours(24,0,0,0));let d=(new Date).setSeconds(0,0);Math.ceil((d-new Date(ge(l).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let h=ge(t),c=0;for(;h<=i;)this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),h.add(180,"minutes"),c++;r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${ge(n.timeIntervals[e].date).subtract(180,"minutes").format("MMM DD hh:mm A")} - ${ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `,this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}else if(7==e){let e,i,s=new Date,a=6e4,n=this,r=0;i=ge(new Date(Math.floor(s.getTime()/a)*a)).minutes(0).seconds(0).milliseconds(0);let o=ge(i).subtract(144,"hours");t=new Date(o._d.setHours(144,0,0,0));let l=(new Date).setSeconds(0,0);Math.ceil((l-new Date(ge(t).toDate()).getTime())/36e5),t=ge(t).add(180,"minutes"),this.timeIntervals=[];let d,h=ge(t),c=0;for(ge();h<=i;){if(this.timeIntervals.push({value:c,legend:ge(h).format("MM/DD/YYYY HH:mm"),date:ge(h).toDate()}),e=ge(h),d=Math.floor((i._d.getHours()-h._d.getHours())/3),d>0)h.add(180,"minutes");else{const e=2==Math.ceil(i._d.getHours()-h._d.getHours())?120:60;h.add(e,"minutes")}c++}r=this.timeIntervals.length,this.selectedInterval=this.timeIntervals[r-1].value,this.timeIntervalOptions.stepsArray=[...this.timeIntervals],this.timeIntervalOptions.translate=(e,t)=>{let i=ge(n.timeIntervals[e].date);var s,a;return parseInt(this.timeIntervals[this.selectedInterval].legend.substring(11,13)||"0")%3==0?(s=i.subtract(180,"minutes").format("MMM DD hh:mm A"),a=ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")):(s=ge(this.timeIntervals[r-2].date).format("MMM DD hh:mm A"),a=ge(n.timeIntervals[e].date).format("MMM DD hh:mm A")),`<span id="slider-click-prev" class="point-${e} dir-arrows" > </span> ${s} - ${a} <span id="slider-click-next" class="point-${e} dir-arrows"></span > `},this.leftSliderTime=ge(this.timeIntervals[0].date).subtract(180,"minutes").format("MMM DD hh:mm A"),this.rightSliderTime=ge(this.timeIntervals[r-1].date).format("MMM DD hh:mm A"),setTimeout(()=>{this.showIntervalSlider=!0,setTimeout(()=>{pe(".multi-point-slider .ngx-slider-pointer-min").attr("title","Drag to select Time frame")},10)},1e3)}setTimeout(()=>{this.WeekFramedata=[{id:1,name:this.language[this.lastSeventhDay]},{id:2,name:this.language[this.lastSixthDay]},{id:3,name:this.language[this.lastfifthDay]},{id:4,name:this.language[this.lastFourthDay]},{id:5,name:this.language[this.lastThirdDay]},{id:6,name:this.language[this.yesterDay]},{id:7,name:this.language[this.toDay]}]},2e3)}}getISOString(e){return e.toISOString().substr(0,16)+":00"}filterContent(e,t){var i;if(this.legendType[t]=!this.legendType[t],1==e){const e=[this.legendType.qoeGood?5:"",this.legendType.qoeGood?4:"",this.legendType.qoeFair?3:"",this.legendType.qoePoor?2:"",this.legendType.qoePoor?1:"",...this.legendType.qoeNoData?[-1]:[""]],t=1==this.TimeFrame?"dailyData":"rawData";ue.chart("qoeScoreChart",this.qoeChartOption(1==this.TimeFrame?{dailyData:(this.summaryData[t]||[]).filter(t=>t.qoeScore&&e.includes(t.qoeScore))}:{rawData:(this.summaryData[t]||[]).filter(t=>t.qoeScore&&e.includes(t.qoeScore))}))}else if(2==e){const e=[this.legendType.serviceGood?"GOOD":"",this.legendType.serviceFair?"OK":"",this.legendType.servicePoor?"BAD":"",...this.legendType.serviceNoData?["GOOD(GREY)","BAD(GREY)","OK(GREY)"]:[""]],t=1==this.TimeFrame?"dailyData":"rawData";ue.chart("wanServiceChart",this.wanService(1==this.TimeFrame?{dailyData:(this.summaryData[t]||[]).filter(t=>t.wanService&&e.includes(t.wanService.toUpperCase()))}:{rawData:(this.summaryData[t]||[]).filter(t=>t.wanService&&e.includes(t.wanService.toUpperCase()))}))}else if(3==e){const e=[this.legendType.contGood?"GOOD":"",this.legendType.contGood?"OK":"",this.legendType.contPoor?"BAD":"",...this.legendType.contNoData?["GOOD(GREY)","BAD(GREY)","OK(GREY)"]:[""]],t=1==this.TimeFrame?"dailyData":"rawData";ue.chart("wanContinuityChart",this.wanContinuity(1==this.TimeFrame?{dailyData:(this.summaryData[t]||[]).filter(t=>t.wanContinuity&&e.includes(t.wanContinuity.toUpperCase()))}:{rawData:(this.summaryData[t]||[]).filter(t=>t.wanContinuity&&e.includes(t.wanContinuity.toUpperCase()))},this.WanShowup))}else 4==e&&ue.chart("wholeHomeEfficiencyChart",this.wholeHomeEfficiencyOption(this.legendType.homeData&&this.legendType.clientData?this.summaryData:this.legendType.homeData||this.legendType.clientData?{rawData:((null===(i=this.summaryData)||void 0===i?void 0:i.rawData)||[]).filter(e=>!!this.legendType.homeData&&e.homeScore)}:{rawData:[]}))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(a.F0),n.Y36(me.FF),n.Y36(r.s),n.Y36(c.Q),n.Y36(o.t6),n.Y36(ve.U),n.Y36(h.F),n.Y36(u.Dx),n.Y36(n.SBq),n.Y36(n.sBO))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-quality-of-experience"]],viewQuery:function(e,t){if(1&e&&n.Gf(ye,5),2&e){let e;n.iGM(e=n.CRH())&&(t.clientEfficencyChartTest=e.first)}},hostBindings:function(e,t){1&e&&n.NdJ("click",function(e){return t.inClick(e)})},decls:2,vars:2,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-12","ccl-tabs"],["id","tabs",1,"nav","nav-tabs"],["id","qe-issues-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink","Click"],[1,"big-text"],["class","nav-item","id","qe-topology-tab",4,"ngIf"],["class","nav-item","id","qe-qoe-tab",4,"ngIf"],["id","tabsContent",1,"tab-content"],["id","issue",1,"tab-pane","fade","active","show"],[1,"row","pb-2"],["id","topology",1,"tab-pane","fade"],["class","w-100 alert alert alert-danger fade show",4,"ngIf"],[1,"d-flex","align-items-center","my-2"],[1,"col-md-12","col-lg-3","col-xl-3"],[1,"f-s-14px","mb-0"],["bindLabel","name","bindValue","id",3,"clearable","searchable","items","ngModel","change","ngModelChange"],["class","col-md-12 col-lg-3 col-xl-3",4,"ngIf"],["class","col-md-12 col-lg-2 col-xl-2 cus-select-height-24",4,"ngIf"],["class","cursor-pointer primary mt-4",4,"ngIf"],["class","row mb-3",4,"ngIf"],["class","time-frame-section mb-3","style","min-height: 100px;","id","qoe-chart-timeframe-filter",4,"ngIf"],[1,"row","mb-3","loader-wrapper"],["class","loader-wrapper-info",4,"ngIf"],[1,"col-md-12"],["id","qoe-score-title",1,"ccl-Secondary-title","border-bottom","mb-4"],[1,""],["id","qoeScoreChart",1,"chart-box",2,"height","300px"],[1,"row","d-flex","justify-content-center"],[1,"serviceLegend","mr-1",2,"background-color","#82BF00"],[1,"cursor-pointer","mr-3",3,"ngClass","click"],[1,"serviceLegend","mr-1",2,"background-color","rgba(252, 114, 53)"],[1,"serviceLegend","mr-1",2,"background-color","#C70000"],[1,"serviceLegend","mr-1",2,"background-color","grey"],[1,"cursor-pointer",3,"ngClass","click"],["id","qoe-WAN-service",1,"ccl-Secondary-title","border-bottom","mb-3"],["id","wanServiceChart",1,"chart-box",2,"height","210px"],["id","qoe-wan-continuity",1,"ccl-Secondary-title","border-bottom","mb-3"],["id","wanContinuityChart",1,"chart-box",2,"height","210px"],["id","qoe-home-efficiency",1,"ccl-Secondary-title","border-bottom","mb-4"],["id","wholeHomeEfficiencyChart",1,"chart-box",2,"height","300px"],[1,"serviceLegend","mr-1",2,"background-color","#0a77fb"],[1,"cursor-pointer","mr-2",3,"ngClass","click"],["clientEfficencyChartTest",""],["id","qe-topology-tab",1,"nav-item"],["data-toggle","tab","routerLinkActive","active",1,"nav-link","small",3,"routerLink"],["id","qe-qoe-tab",1,"nav-item"],[1,"w-100","alert","alert","alert-danger","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],[1,"col-md-12","col-lg-2","col-xl-2","cus-select-height-24"],["bindLabel","name","bindValue","id",3,"items","clearable","searchable","ngModel","change","ngModelChange"],[1,"cursor-pointer","primary","mt-4"],[1,"fas","fa-sync",3,"click"],[1,"row","mb-3"],[1,"col-md-3"],["bindLabel","name","bindValue","id",3,"items","ngModel","ngModelChange"],["class","col-md-2",4,"ngIf"],["class","col-md-2 form-check",4,"ngIf"],[1,"col-md-3","col-lg-3","text-right","btns-con","smy-2",2,"margin-top","40px"],[1,"d-inline-flex","mr-3"],["type","button",1,"btn-default","primary","px-3",3,"click"],[1,"col-md-2"],["id","week_Date","appendTo","body","placeholder","weekDate","value","#{dateBean.date}",1,"ccl-form",3,"inputStyle","autoZIndex","ngModel","showIcon","ngModelOptions","maxDate","minDate","ngModelChange","onSelect"],[1,"col-md-2","form-check"],["id","start_date","appendTo","body","placeholder","Time","hourFormat","12",1,"ccl-form",3,"ngModel","stepMinute","inputStyle","autoZIndex","showIcon","ngModelOptions","timeOnly","panelStyleClass","minDate","maxDate","ngModelChange","onSelect"],["id","end_date","appendTo","body","placeholder","Time","hourFormat","12",1,"ccl-form",3,"stepMinute","inputStyle","autoZIndex","ngModel","showIcon","ngModelOptions","timeOnly","disabled","panelStyleClass","minDate","maxDate","ngModelChange","onSelect"],["id","qoe-chart-timeframe-filter",1,"time-frame-section","mb-3",2,"min-height","100px"],["data-toggle","tooltip","data-placement","top",1,"left-label",3,"title"],["class","multi-point-slider",4,"ngIf"],[1,"loader-wrapper-info"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"multi-point-slider"],[3,"value","options","valueChange","userChangeEnd"],[1,"left-most-slider-time"],[1,"right-most-slider-time"],[1,"col-md-3","col-lg-3","text-left","btns-con","smy-2",2,"margin-top","15px"],["class","loader",4,"ngIf"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","qoe-client-efficiency",1,"ccl-Secondary-title","border-bottom","mb-4"],["id","date"],["id","clientEfficiencyChartDiv",1,"chart-box",2,"height","300px"]],template:function(e,t){1&e&&(n.YNc(0,be,1,0,"app-subscriber-menu",0),n.YNc(1,Je,102,72,"div",0)),2&e&&(n.Q6J("ngIf",t.showQOE),n.xp6(1),n.Q6J("ngIf",t.showQOE))},directives:[s.O5,m.e,a.yS,a.Od,v.w9,f.JJ,f.On,s.mk,fe.f,De.w5],styles:['.hideMin .p-minute-picker{color:gray;cursor:not-allowed!important;text-decoration:none}.hideMin .p-minute-picker button{cursor:not-allowed!important;color:gray}.string-slider .ngx-slider-pointer{position:relative}::ng-deep .string-slider{height:88px;margin-bottom:20px}::ng-deep .string-slider .ngx-slider-bubble{display:none!important}::ng-deep .string-slider .ngx-slider-bar{background:linear-gradient(90deg,#FF734F 40%,#F7C343 20%,#82BF00 40%)!important;border-radius:26px!important;height:21px!important}::ng-deep .string-slider .ngx-slider .ngx-slider-pointer{border-radius:100px;width:88px;height:88px;top:-30px;border:1px solid #82BF00;background-color:transparent!important}::ng-deep .string-slider .ngx-slider-pointer:before{content:"";position:absolute;top:2.3px;left:2.3px;width:81.77px;height:81.77px;background:#fff;border-radius:100px;z-index:-1;border:1px solid #82BF00}::ng-deep .string-slider .ngx-slider .ngx-slider-pointer:after{position:absolute;left:0;z-index:999;width:100%!important;height:100%!important;color:#000!important;background-color:transparent!important;text-align:center;line-height:56px;font-size:16px}::ng-deep .string-slider [aria-valuetext="1"]:after,::ng-deep .string-slider [aria-valuetext="2"]:after{content:"Low"!important}::ng-deep .string-slider [aria-valuetext="3"]:after{content:"Medium"!important}::ng-deep .string-slider [aria-valuetext="4"]:after,::ng-deep .string-slider [aria-valuetext="5"]:after{content:"High"!important}::ng-deep .string-slider [aria-valuetext="0"]:after{content:"No Data"!important}.modal.fade .modal-dialog .modal-content .modal-header{padding:10px!important;border-bottom:transparent}.loader-wrapper{position:relative}.time-frame-section{padding:2px 0 1px 140px;position:relative;overflow:hidden}.time-frame-section .left-label{position:absolute;left:0;top:25px;font-size:16px}.time-frame-section .left-label label{margin-bottom:-8px!important;display:block;overflow:hidden;text-overflow:ellipsis;width:136px;white-space:nowrap}.time-frame-section .left-label span{color:#9e9e9e;font-size:12px}.legendDash{width:20px;height:3px;border-top:2px dashed grey;margin-top:.8rem!important}.legendSolid{width:20px;height:3px;border-top:2px solid #0a77fb;margin-top:.8rem!important}.serviceLegend{width:13px;height:13px;margin-top:.4rem!important;border-radius:50%}.opac{opacity:.5}.no-realtime-data{position:absolute}#clientEfficiencyChartDiv .highcharts-root{min-height:310px}.f-s-10px{font-size:10px}\n'],encapsulation:2}),e})(),data:{title:"Calix Suppport Cloud - quality-of-experience"}},{path:"demo-topology",component:U.b,data:{title:"Calix Suppport Cloud - demo-topology"}},{path:"topology3",component:$,data:{title:"Calix Suppport Cloud - topology"}},{path:"",redirectTo:"issues",pathMatch:"full"}]}];let Qe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[a.Bz.forChild(ze)],a.Bz]}),e})();var je=i(65681);let Ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,Qe,je.m,D.T,v.A0,f.u5,f.UX,fe._8,De.kx]]}),e})()}}]);