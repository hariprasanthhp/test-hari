"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[4541],{17022:function(e,t,i){var a,s,o;o=function(e){function t(e,t,i,a){e.hasOwnProperty(t)||(e[t]=a.apply(null,i))}t(e=e?e._modules:{},"Extensions/Drilldown.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Axis/Axis.js"],e["Core/Chart/Chart.js"],e["Core/Color/Color.js"],e["Series/Column/ColumnSeries.js"],e["Core/FormatUtilities.js"],e["Core/Globals.js"],e["Core/DefaultOptions.js"],e["Core/Series/Point.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Axis/Tick.js"],e["Core/Utilities.js"]],function(e,t,i,a,s,o,r,n,l,c,h,d,u,m){var p=e.animObject,g=o.format,b=r.noop,y=m.addEvent,f=m.removeEvent,v=m.extend,j=m.fireEvent,S=m.merge,x=m.objectEach,C=m.pick,O=m.syncTimeout;h=h.seriesTypes.pie;var D=1;v((e=n.defaultOptions).lang,{drillUpText:"\u25c1 Back to {series.name}"}),e.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}},d.prototype.Element.prototype.fadeIn=function(e){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:C(this.newOpacity,1)},e||{duration:250})},i.prototype.addSeriesAsDrilldown=function(e,t){this.addSingleSeriesAsDrilldown(e,t),this.applyDrilldown()},i.prototype.addSingleSeriesAsDrilldown=function(e,t){var i,s=e.series,o=s.xAxis,r=s.yAxis,n=[],l=[],c=this.styledMode?{colorIndex:C(e.colorIndex,s.colorIndex)}:{color:e.color||s.color};this.drilldownLevels||(this.drilldownLevels=[]);var h=s.options._levelNumber||0;(i=this.drilldownLevels[this.drilldownLevels.length-1])&&i.levelNumber!==h&&(i=void 0),t=v(v({_ddSeriesId:D++},c),t);var d=s.points.indexOf(e);s.chart.series.forEach(function(e){e.xAxis!==o||e.isDrilling||(e.options._ddSeriesId=e.options._ddSeriesId||D++,e.options._colorIndex=e.userOptions._colorIndex,e.options._levelNumber=e.options._levelNumber||h,i?(n=i.levelSeries,l=i.levelSeriesOptions):(n.push(e),e.purgedOptions=S({_ddSeriesId:e.options._ddSeriesId,_levelNumber:e.options._levelNumber,selected:e.options.selected},e.userOptions),l.push(e.purgedOptions)))}),e=v({levelNumber:h,seriesOptions:s.options,seriesPurgedOptions:s.purgedOptions,levelSeriesOptions:l,levelSeries:n,shapeArgs:e.shapeArgs,bBox:e.graphic?e.graphic.getBBox():{},color:e.isNull?a.parse(c.color).setOpacity(0).get():c.color,lowerSeriesOptions:t,pointOptions:s.options.data[d],pointIndex:d,oldExtremes:{xMin:o&&o.userMin,xMax:o&&o.userMax,yMin:r&&r.userMin,yMax:r&&r.userMax},resetZoomButton:this.resetZoomButton},c),this.drilldownLevels.push(e),o&&o.names&&(o.names.length=0),(t=e.lowerSeries=this.addSeries(t,!1)).options._levelNumber=h+1,o&&(o.oldPos=o.pos,o.userMin=o.userMax=null,r.userMin=r.userMax=null),s.type===t.type&&(t.animate=t.animateDrilldown||b,t.options.animation=!0)},i.prototype.applyDrilldown=function(){var e=this.drilldownLevels;if(e&&0<e.length){var t=e[e.length-1].levelNumber;this.drilldownLevels.forEach(function(e){e.levelNumber===t&&e.levelSeries.forEach(function(e){e.options&&e.options._levelNumber===t&&e.remove(!1)})})}this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton),this.pointer.reset(),this.redraw(),this.showDrillUpButton(),j(this,"afterDrilldown")},i.prototype.getDrilldownBackText=function(){var e=this.drilldownLevels;if(e&&0<e.length)return(e=e[e.length-1]).series=e.seriesOptions,g(this.options.lang.drillUpText||"",e)},i.prototype.showDrillUpButton=function(){var e,t=this,i=this.getDrilldownBackText(),a=t.options.drilldown.drillUpButton,s="chart"===a.relativeTo||"spacingBox"===a.relativeTo?null:"scrollablePlotBox";if(this.drillUpButton)this.drillUpButton.attr({text:i}).align();else{var o=(e=a.theme)&&e.states;this.drillUpButton=this.renderer.button(i,null,null,function(){t.drillUp()},e,o&&o.hover,o&&o.select).addClass("highcharts-drillup-button").attr({align:a.position.align,zIndex:7}).add().align(a.position,!1,s)}},i.prototype.drillUp=function(){if(this.drilldownLevels&&0!==this.drilldownLevels.length){for(var e,t,i,a,s=this,o=s.drilldownLevels,r=o[o.length-1].levelNumber,n=o.length,l=s.series,c=function(e){l.forEach(function(t){t.options._ddSeriesId===e._ddSeriesId&&(o=t)});var o=o||s.addSeries(e,!1);o.type===i.type&&o.animateDrillupTo&&(o.animate=o.animateDrillupTo),e===t.seriesPurgedOptions&&(a=o)};n--;)if((t=o[n]).levelNumber===r){if(o.pop(),!(i=t.lowerSeries).chart)for(e=l.length;e--;)if(l[e].options.id===t.lowerSeriesOptions.id&&l[e].options._levelNumber===r+1){i=l[e];break}i.xData=[],t.levelSeriesOptions.forEach(c),j(s,"drillup",{seriesOptions:t.seriesPurgedOptions||t.seriesOptions}),this.resetZoomButton&&this.resetZoomButton.destroy(),a.type===i.type&&(a.drilldownLevel=t,a.options.animation=s.options.drilldown.animation,i.animateDrillupFrom&&i.chart&&i.animateDrillupFrom(t)),a.options._levelNumber=r,i.remove(!1),a.xAxis&&(a.xAxis.setExtremes((e=t.oldExtremes).xMin,e.xMax,!1),a.yAxis.setExtremes(e.yMin,e.yMax,!1)),t.resetZoomButton&&(s.resetZoomButton=t.resetZoomButton,s.resetZoomButton.show())}this.redraw(),0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align(),this.ddDupes.length=[],j(s,"drillupall")}},y(i,"afterInit",function(){var e=this;e.drilldown={update:function(t,i){S(!0,e.options.drilldown,t),C(i,!0)&&e.redraw()}}}),y(i,"afterShowResetZoom",function(){var e=this.resetZoomButton&&this.resetZoomButton.getBBox(),t=this.options.drilldown&&this.options.drilldown.drillUpButton;this.drillUpButton&&e&&t&&t.position&&t.position.x&&this.drillUpButton.align({x:t.position.x-e.width-10,y:t.position.y,align:t.position.align},!1,t.relativeTo||"plotBox")}),y(i,"render",function(){(this.xAxis||[]).forEach(function(e){e.ddPoints={},e.series.forEach(function(t){var i,a=t.xData||[],s=t.points;for(i=0;i<a.length;i++){var o=t.options.data[i];"number"!=typeof o&&(o=t.pointClass.prototype.optionsToObject.call({series:t},o)).drilldown&&(e.ddPoints[a[i]]||(e.ddPoints[a[i]]=[]),o=i-(t.cropStart||0),e.ddPoints[a[i]].push(!(s&&0<=o&&o<s.length)||s[o]))}}),x(e.ticks,u.prototype.drillable)})}),s.prototype.animateDrillupTo=function(e){if(!e){var t=this,i=t.drilldownLevel;this.points.forEach(function(e){var t=e.dataLabel;e.graphic&&e.graphic.hide(),t&&(t.hidden="hidden"===t.attr("visibility"),t.hidden||(t.hide(),e.connector&&e.connector.hide()))}),O(function(){if(t.points){var e=[];t.data.forEach(function(t){e.push(t)}),t.nodes&&(e=e.concat(t.nodes)),e.forEach(function(e,t){t=t===(i&&i.pointIndex)?"show":"fadeIn";var a=e.dataLabel;e.graphic&&e.graphic[t]("show"===t||void 0),a&&!a.hidden&&(a.fadeIn(),e.connector&&e.connector.fadeIn())})}},Math.max(this.chart.options.drilldown.animation.duration-50,0)),delete this.animate}},s.prototype.animateDrilldown=function(e){var t,i=this,a=this.chart,s=a.drilldownLevels,o=p(a.options.drilldown.animation),r=this.xAxis,n=a.styledMode;e||(s.forEach(function(e){i.options._ddSeriesId===e.lowerSeriesOptions._ddSeriesId&&(t=e.shapeArgs,n||(t.fill=e.color))}),t.x+=C(r.oldPos,r.pos)-r.pos,this.points.forEach(function(e){n||(e.shapeArgs.fill=e.color),e.graphic&&e.graphic.attr(t).animate(v(e.shapeArgs,{fill:e.color||i.color}),o),e.dataLabel&&e.dataLabel.fadeIn(o)}),delete this.animate)},s.prototype.animateDrillupFrom=function(e){var t=p(this.chart.options.drilldown.animation),i=this.group,a=i!==this.chart.columnGroup,s=this;s.trackerGroups.forEach(function(e){s[e]&&s[e].on("mouseover")}),a&&delete this.group,this.points.forEach(function(o){var r=o.graphic,n=e.shapeArgs,l=function(){r.destroy(),i&&a&&(i=i.destroy())};r&&n&&(delete o.graphic,s.chart.styledMode||(n.fill=e.color),t.duration?r.animate(n,S(t,{complete:l})):(r.attr(n),l()))})},h&&v(h.prototype,{animateDrillupTo:s.prototype.animateDrillupTo,animateDrillupFrom:s.prototype.animateDrillupFrom,animateDrilldown:function(e){var t=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],i=this.chart.options.drilldown.animation;if(this.is("item")&&(i.duration=0),this.center){var a=t.shapeArgs,s=a.start,o=(a.end-s)/this.points.length,r=this.chart.styledMode;e||(this.points.forEach(function(e,n){var l=e.shapeArgs;r||(a.fill=t.color,l.fill=e.color),e.graphic&&e.graphic.attr(S(a,{start:s+n*o,end:s+(n+1)*o}))[i?"animate":"attr"](l,i)}),delete this.animate)}}}),l.prototype.doDrilldown=function(){this.runDrilldown()},l.prototype.runDrilldown=function(e,t,i){var a=this.series.chart,s=a.options.drilldown,o=(s.series||[]).length;for(a.ddDupes||(a.ddDupes=[]);o--&&!r;)if(s.series[o].id===this.drilldown&&-1===a.ddDupes.indexOf(this.drilldown)){var r=s.series[o];a.ddDupes.push(this.drilldown)}j(a,"drilldown",{point:this,seriesOptions:r,category:t,originalEvent:i,points:void 0!==t&&this.series.xAxis.getDDPoints(t).slice(0)},function(t){var i=t.point.series&&t.point.series.chart,a=t.seriesOptions;i&&a&&(e?i.addSingleSeriesAsDrilldown(t.point,a):i.addSeriesAsDrilldown(t.point,a))})},t.prototype.drilldownCategory=function(e,t){this.getDDPoints(e).forEach(function(i){i&&i.series&&i.series.visible&&i.runDrilldown&&i.runDrilldown(!0,e,t)}),this.chart.applyDrilldown()},t.prototype.getDDPoints=function(e){return this.ddPoints&&this.ddPoints[e]||[]},u.prototype.drillable=function(){var e=this.pos,t=this.label,i=this.axis,a="xAxis"===i.coll&&i.getDDPoints,s=a&&i.getDDPoints(e),o=i.chart.styledMode;a&&(t&&s&&s.length?(t.drillable=!0,t.basicStyles||o||(t.basicStyles=S(t.styles)),t.addClass("highcharts-drilldown-axis-label"),t.removeOnDrillableClick&&f(t.element,"click"),t.removeOnDrillableClick=y(t.element,"click",function(t){t.preventDefault(),i.drilldownCategory(e,t)}),o||t.css(i.chart.options.drilldown.activeAxisLabelStyle)):t&&t.drillable&&t.removeOnDrillableClick&&(o||(t.styles={},t.css(t.basicStyles)),t.removeOnDrillableClick(),t.removeClass("highcharts-drilldown-axis-label")))},y(l,"afterInit",function(){return this.drilldown&&!this.unbindDrilldownClick&&(this.unbindDrilldownClick=y(this,"click",w)),this}),y(l,"update",function(e){(e=e.options||{}).drilldown&&!this.unbindDrilldownClick?this.unbindDrilldownClick=y(this,"click",w):!e.drilldown&&void 0!==e.drilldown&&this.unbindDrilldownClick&&(this.unbindDrilldownClick=this.unbindDrilldownClick())});var w=function(e){var t=this.series;t.xAxis&&!1===t.chart.options.drilldown.allowPointDrilldown?t.xAxis.drilldownCategory(this.x,e):this.runDrilldown(void 0,void 0,e)};y(c,"afterDrawDataLabels",function(){var e=this.chart.options.drilldown.activeDataLabelStyle,t=this.chart.renderer,i=this.chart.styledMode;this.points.forEach(function(a){var s=a.options.dataLabels,o=C(a.dlOptions,s&&s.style,{});a.drilldown&&a.dataLabel&&("contrast"!==e.color||i||(o.color=t.getContrast(a.color||this.color)),s&&s.color&&(o.color=s.color),a.dataLabel.addClass("highcharts-drilldown-data-label"),i||a.dataLabel.css(e).css(o))},this)});var k=function(e,t,i,a){e[i?"addClass":"removeClass"]("highcharts-drilldown-point"),a||e.css({cursor:t})};y(c,"afterDrawTracker",function(){var e=this.chart.styledMode;this.points.forEach(function(t){t.drilldown&&t.graphic&&k(t.graphic,"pointer",!0,e)})}),y(l,"afterSetState",function(){var e=this.series.chart.styledMode;this.drilldown&&this.series.halo&&"hover"===this.state?k(this.series.halo,"pointer",!0,e):this.series.halo&&k(this.series.halo,"auto",!1,e)}),y(i,"selection",function(e){!0===e.resetSelection&&this.drillUpButton&&(e=this.options.drilldown&&this.options.drilldown.drillUpButton)&&e.position&&this.drillUpButton.align({x:e.position.x,y:e.position.y,align:e.position.align},!1,e.relativeTo||"plotBox")}),y(i,"drillup",function(){this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy())})}),t(e,"masters/modules/drilldown.src.js",[],function(){})},e.exports?(o.default=o,e.exports=o):(a=[i(1282)],void 0!==(s=(function(e){return o(e),o.Highcharts=e,o}).apply(t,a))&&(e.exports=s))},14541:function(e,t,i){i.d(t,{t:function(){return j}});var a=i(25917),s=i(11067),o=i(65424),r=i.n(o),n=i(17022),l=i.n(n),c=i(53363),h=i.n(c),d=i(33439),u=i.n(d),m=i(38583),p=i(92340),g=i(37716),b=i(7450),y=i(48483),f=i(39895),v=i(91703);i(65424)(s),i(28184)(s),i(66841)(s),i(66263)(s),i(66030)(s),r()(s),l()(s),h()(s),u()(s),i(91704);let j=(()=>{class e{constructor(e,t,i,a){this.translateService=e,this.dateUtils=t,this.router=i,this.healthService=a,this.subTitleObj={alarm:{byday:"",severity:"",region:"",location:"",system:""},event:{region:"",location:"",system:""}},this.colors={critical:"#C70000",major:"#FC7235",minor:"#F3B426",warning:"#f7e9c1",info:"#7cb5ec"},this.fadecolors={critical:"#ff8585",major:"#fdb89b",minor:"#f9d88b",warning:"#faf2db",info:"#b8d7f5"},this.filters=["region","location","system","fsan_serialnumber","severity","category","customCategory","alarmEventName","cco_ack","cco_shelv"],this.filtersObj={region:"Region",location:"Location",system:"System",severity:"Severity",category:"Category",customCategory:"Alarm Group",alarmEventName:-1!==window.location.pathname.indexOf("/history-reports")?"Alarm/Event Name":"Alarm Name",fsan_serialnumber:"FSAN",cco_ack:"Acknowledged Alarms",cco_shelv:"Shelved Alarms"},this.pieChartColurs=["#0027FF","#5ACFEA","#B926F0","#FF8238"],this.stackedColumnColors=["#5ACFEA","#0027FF"],this.stackedWfhColors=["#0027FF","#5ACFEA"],this.stackedAqiteColors=["#84BBF8","#FC6784","#FD9E4C","#A3A5ED","#CBC75F"],this.stackedSubsColors=["#5ACFEA","#349885","#0027FF"],this.stackedSubsbarColors=["#F3B426","#FC7235","#C70000"],this.stackedSubsbarnewColors=["#C70000","#FC7235","#F3B426"],this.commonHighChartOptions={exporting:{enabled:!1},credits:{enabled:!1},title:{text:""},responsive:{rules:[{condition:{},chartOptions:{chart:{styledMode:!0},navigator:{enabled:!1}}}]}},this.regions={},this.locations={},this.systems={},this.userFilters={alarm:{byday:{},severity:{},region:{},location:{},system:{}},event:{region:{},location:{},system:{}}},this.language=this.translateService.defualtLanguage,this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}alarmBarChart(){let e=Object.assign(Object.assign({},this.commonHighChartOptions),{colors:this.stackedSubsbarColors,chart:{type:"column",inverted:!1},credits:{enabled:!1},legend:{},yAxis:{min:0,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:"Duplicated Alarms (%)"},stackLabels:{enabled:!0,style:{fontSize:"10px",font:"Source Sans Pro,Regular",color:"#4c4c4c"},formatter:function(){return this.total+"%"}}},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},xAxis:{categories:["S-CMM-1","S-CMM-2","S-CMM-1","S-CMM-2","S-CMM-1","S-CMM-2","S-CMM-1","S-CMM-2","S-CMM-1","S-CMM-2","S-CMM-1","S-CMM-2"],crosshair:!1},plotOptions:{series:{maxPointWidth:16,states:{inactive:{enabled:!1}}},column:{stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[{name:"Critical",data:[2,2,3,2,1,23,2,2,3,2,1,23],stack:"criticalMajor"},{name:"Major",data:[3,4,4,2,5,2,2,3,2,1,23,2],stack:"criticalMajor"},{name:"Minor",data:[5,3,4,7,2,2,2,3,2,1,23,2],stack:"Minor"}]});return(0,a.of)(e)}alarmBarHistoryChart(){let e=Object.assign(Object.assign({},this.commonHighChartOptions),{colors:this.stackedSubsbarColors,chart:{type:"column",inverted:!1},yAxis:{min:0,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:"Duplicated Alarms (%)"},stackLabels:{enabled:!0,style:{fontSize:"10px",font:"Source Sans Pro,Regular",color:"#4c4c4c"},formatter:function(){return this.total+"%"}}},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},xAxis:{categories:["E7-AXOS","E7-20","CMS","E7-2","E7-AXOS","E7-20","CMS","E7-2"],crosshair:!1},plotOptions:{series:{maxPointWidth:16,states:{inactive:{enabled:!1}}},column:{stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[{name:"E7-AXOS",data:[5,3,4,7,2]},{name:"E7-20",data:[2,2,3,2,1]},{name:"CMS",data:[3,4,4,2,5]},{name:"E7-2",data:[3,4,4,2,5]}]});return(0,a.of)(e)}pieChartBlockedThreatOptions(){let e=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},colors:this.pieChartColurs,tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{series:{states:{inactive:{enabled:!1}}},pie:{size:"80%",allowPointSelect:!0,cursor:"pointer",borderWidth:0,dataLabels:{enabled:!0,format:"{point.name}",crop:!1,distance:2,overflow:"visible",style:{width:"100px",fontSize:"10px",font:"Source Sans Pro,Regular",color:"#4C4C4C"}}}},series:[{name:"Brands",colorByPoint:!0,data:[{name:"Critical(123)",y:61.41,sliced:!1,selected:!0},{name:"Major(123)",y:11.84},{name:"Minor(90)",y:10.85}]}]});return(0,a.of)(e)}severityChartOptions(e,t,i,a={}){new m.rS;let o=this.getSubTitle(a,{},{},"alarm","severity");this.filters.forEach((e,t)=>{a[e]&&"system"===e&&("object"==typeof a[e]?a[e].forEach((t,i)=>{a[e][i]=a[e][i].replace("device=",""),a[e][i]=a[e][i].replace("DEVICE=","")}):(a[e]=a[e].replace("device=",""),a[e]=a[e].replace("DEVICE=","")))});let r=e,n=[],l="small"==i?"70%":"100%",c=t.split(" ")[1];r&&r.minor>=0&&n.push({name:`${this.language.minor} (${r.minor})`,y:r.minor?r.minor:null,color:p.N.OPERATIONS_HOME_ACTIVE_ALARMS_COLORS.minor,legendIndex:3,severity:"Minor"}),r&&r.major>=0&&n.push({name:`${this.language.major} (${r.major})`,y:r.major?r.major:null,color:p.N.OPERATIONS_HOME_ACTIVE_ALARMS_COLORS.major,legendIndex:2,severity:"Major"}),r&&r.critical>=0&&n.push({name:`${this.language.critical} (${r.critical})`,y:r.critical?r.critical:null,color:p.N.OPERATIONS_HOME_ACTIVE_ALARMS_COLORS.critical,legendIndex:1,severity:"Critical"}),r&&r.warning>=0&&n.push({name:`${this.language.Warning} (${r.warning})`,y:r.warning?r.warning:null,color:p.N.OPERATIONS_HOME_ACTIVE_ALARMS_COLORS.warning,legendIndex:4,severity:"Warning"}),r&&r.info>=0&&n.push({name:`${this.language.Info} (${r.info})`,y:r.info?r.info:null,color:p.N.OPERATIONS_HOME_ACTIVE_ALARMS_COLORS.info,legendIndex:5,severity:"Info"});let h=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"active"==i?"":this.language[t]||t},subtitle:{text:o},tooltip:{formatter:function(){var e=this.key.indexOf("("),t=this.key.substr(0,e),i=s.numberFormat(Math.abs(this.percentage),2);return`<b> ${t} : ${this.y} </b><br/>\n          <p>${this.series.name}<span>: <b>${i}%</b><br/></span></p>`}},accessibility:{point:{valueSuffix:"%"}},lang:{noData:(null==e?void 0:e.length)?"":this.language["No Data Available"]},plotOptions:{series:{cursor:"pointer",point:{events:{}},colors:["#E87B00","#44367D","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],states:{inactive:{enabled:!1}}},pie:{size:l,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[]}),d=!1;return r&&Object.keys(r).length&&Object.keys(r).forEach(e=>{if(r[e]>0)return d=!0,!0}),n.length>0&&d&&(h.series=[{data:n,name:this.language[c]||c}]),h}BIPErrorRateChart(e){let t=0;const i=this;var a=[],s=[],o="region";return e.length&&((e=this.healthService.duplicateDataHandle(e,o,"regionId")).forEach(e=>{a.push(e[o]),s.push({y:e.count?e.count:0,color:this.healthService.chart_color(e,"count")})}),t=a.length>20?21:a.length),{credits:{enabled:!1},chart:{type:"column"},scrollbar:{enabled:!1},legend:{enabled:!0},exporting:{enabled:!1},title:{style:{display:"none"}},subtitle:{text:void 0},xAxis:{categories:a,min:0,max:t-1,scrollbar:{barBackgroundColor:"#CCCCCC",barBorderColor:"#ccc",rifleColor:"transparent",barBorderRadius:3,trackBorderRadius:3,buttonArrowColor:"transparent",trackBackgroundColor:"#EBEAEF",height:6,enabled:21==t}},yAxis:{min:0,softMax:1,allowDecimals:!1,title:{text:this.language["PON Interface Count"]},gridLineWidth:1,style:{stacking:"normal"}},tooltip:{useHTML:!0,borderColor:p.N.OPERATIONS.HEALTH.HEALTH_BAR_CHART_COLORS.first,formatter:function(){var e="",t="",a=" ";return this.points.forEach(s=>{(s.color==p.N.OPERATIONS.HEALTH.HEALTH_DELETED_BAR_CHART_COLORS.first||s.color==p.N.OPERATIONS.HEALTH.DELETED_TRANSPARENT.first)&&(a=" (Deleted)"),t=`<span style = "font-size:10px"> ${s.key} ${a}  </span><table>`,e+=`<tr><td style='color:${i.healthService.toolip_color(s.color)};padding:0'> ${s.series.name} : </td>\n            <td style='padding:0;margin-left:10px'>&nbsp ${s.y} </b></td></tr>`}),t+(e+"</table>")},shared:!0},lang:{noData:(null==e?void 0:e.length)?"":this.language["No Data Available"]},plotOptions:{series:{minPointLength:3,point:{events:{}}},column:{borderWidth:0,dataLabels:{enabled:!1}}},series:[{name:this.language["BIP Error Interfaces"],data:s||[],color:"#0027FF"}]}}systemChartOptions(e,t=!1,i,a={},s){let o="";o=s&&Object.keys(s).length?this.getSubTitle(i,a,s,"alarm","system"):this.getSubTitle(i,a,{},"alarm","system");let r=[],n=[],l=[];if(e){let i=[],a=[];e.forEach(e=>{e.displayName=s&&Object.keys(s).length?s[e.system]?s[e.system].name:e.system:this.systems[e.system]?this.systems[e.system].name:e.system}),(e=null==e?void 0:e.sort((e,t)=>{var i;return null===(i=null==e?void 0:e.displayName)||void 0===i?void 0:i.localeCompare(null==t?void 0:t.displayName)})).forEach(e=>{if(e.system){l.push(e.displayName),e.original_system=e.system,e.system=e.system.replace("device=",""),e.system=e.system.replace("DEVICE=","");let t=e.alarm?e.alarm:e;t&&t.cleared&&(i=[...i,...Object.keys(t.cleared)]),t&&t.raised&&(a=[...a,...Object.keys(t.raised)])}}),i=i.filter((e,t,i)=>i.indexOf(e)===t),a=a.filter((e,t,i)=>i.indexOf(e)===t),n=a.length>i.length?a:i;let o={},c=["raised"];t||c.push("cleared");let h="";n&&n.forEach(t=>{c.forEach(i=>{o={},o.name=this.language[t],o.data=[],o.color=this.colors[t],o.stack=i,"cleared"===i&&(o.linkedTo=":previous"),e.forEach(e=>{let a=e.alarm?e.alarm:e;h=s&&Object.keys(s).length?s[e.system]&&s[e.system].isDeleted?this.fadecolors[t]:this.colors[t]:this.systems[e.system]&&this.systems[e.system].isDeleted?this.fadecolors[t]:this.colors[t],o.data.push({y:a[i][t]?a[i][t]:null,category:e.original_system,systemId:e.original_system,severity:t,color:h})}),r.push(o)})})}let c=this,h=new m.rS,d=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"column",inverted:!1,zoomType:"y"},subtitle:{text:o},title:{text:t?"":`R-${this.language.Raised}, C-${this.language.Cleared}`,align:"right",floating:!1,style:{fontSize:"12px",fontWeight:"normal",fontFamily:"Source Sans Pro"}},yAxis:{min:0,allowDecimals:!1,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:"Count"},minRange:1,stackLabels:{enabled:!t,crop:!1,overflow:"none",formatter:function(){let e="C";return"raised"===this.stack&&(e="R"),`<span style="font-size: 12px; font-family: Source Sans Pro;font-style: normal;font-weight: normal;"> ${e} </span>`}}},tooltip:{formatter:function(){return"<b>"+c.language[h.transform(this.series.userOptions.stack)]+"</b><br/><b>"+this.x+"</b><br/>"+h.transform(this.series.name)+": "+this.y+"<br/>"+c.language.Total+": "+this.point.stackTotal}},xAxis:{categories:l},lang:{noData:(null==r?void 0:r.length)?"":this.language["No Data Available"]},plotOptions:{series:{cursor:"pointer",point:{events:{}},states:{inactive:{enabled:!1}}},column:{minPointLength:2.5,stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[]});return r.length>0&&(d.series=r),d}locationChartOptions(e,t=!1,i={},a){let s="";s=a&&Object.keys(a).length?this.getSubTitle(i,a,{},"alarm","location"):this.getSubTitle(i,{},{},"alarm","location");let o=[],r=[],n=[];if(e){let i=[],s=[];e.forEach(e=>{e.displayName=a&&Object.keys(a).length?a[e.location]?a[e.location].name:e.location:this.locations[e.location]?this.locations[e.location].name:e.location}),(e=null==e?void 0:e.sort((e,t)=>{var i;return null===(i=null==e?void 0:e.displayName)||void 0===i?void 0:i.localeCompare(null==t?void 0:t.displayName)})).forEach(e=>{n.push(e.displayName);let t=e.alarm?e.alarm:e;t&&t.cleared&&(i=[...i,...Object.keys(t.cleared)]),t&&t.raised&&(s=[...s,...Object.keys(t.raised)])}),i=i.filter((e,t,i)=>i.indexOf(e)===t),s=s.filter((e,t,i)=>i.indexOf(e)===t),r=s.length>i.length?s:i;let l={},c=["raised"];t||c.push("cleared");let h="";r&&r.forEach(t=>{c.forEach(i=>{l={},l.name=this.language[t],l.data=[],l.color=this.colors[t],l.stack=i,"cleared"===i&&(l.linkedTo=":previous"),e.forEach(e=>{let s=e.alarm?e.alarm:e;h=a&&Object.keys(a).length?a[e.location]&&a[e.location].isDeleted?this.fadecolors[t]:this.colors[t]:this.locations[e.location]&&this.locations[e.location].isDeleted?this.fadecolors[t]:this.colors[t],l.data.push({y:s[i][t]?s[i][t]:null,locationId:e.location,severity:t,color:h})}),o.push(l)})})}let l=this,c=new m.rS,h=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"column",inverted:!1,zoomType:"y"},subtitle:{text:s},title:{text:t?"":`R-${this.language.Raised}, C-${this.language.Cleared}`,align:"right",floating:!1,style:{fontSize:"12px",fontWeight:"normal",fontFamily:"Source Sans Pro"}},yAxis:{min:0,allowDecimals:!1,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:this.language.Count},minRange:1,stackLabels:{enabled:!t,crop:!1,overflow:"none",formatter:function(){let e="C";return"raised"===this.stack&&(e="R"),`<span style="font-size: 12px; font-family: Source Sans Pro;font-style: normal;font-weight: normal;"> ${e} </span>`}}},tooltip:{formatter:function(){return"<b>"+l.language[c.transform(this.series.userOptions.stack)]+"</b><br/><b>"+this.x+"</b><br/>"+c.transform(this.series.name)+": "+this.y+"<br/>"+l.language.Total+": "+this.point.stackTotal}},xAxis:{categories:n},lang:{noData:(null==o?void 0:o.length)?"":this.language["No Data Available"]},plotOptions:{series:{cursor:"pointer",point:{events:{}},states:{inactive:{enabled:!1}}},column:{minPointLength:2.5,stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[]});return o.length>0&&(h.series=o),h}regionChartOptions(e,t=!1,i={}){let a=this.getSubTitle(i,{},{},"alarm","region"),s=[],o=[],r=[];if("object"==typeof e){let i=[],a=[];e.forEach(e=>{e.displayName=this.regions[e.region]?this.regions[e.region].name:e.region}),(e=null==e?void 0:e.sort((e,t)=>{var i;return null===(i=null==e?void 0:e.displayName)||void 0===i?void 0:i.localeCompare(null==t?void 0:t.displayName)})).forEach(e=>{r.push(e.displayName);let t=e.alarm?e.alarm:e;t&&t.cleared&&(i=[...i,...Object.keys(t.cleared)]),t&&t.raised&&(a=[...a,...Object.keys(t.raised)])}),i=i.filter((e,t,i)=>i.indexOf(e)===t),a=a.filter((e,t,i)=>i.indexOf(e)===t),o=a.length>i.length?a:i;let n={},l=["raised"];t||l.push("cleared"),n.stack="",o&&o.forEach(t=>{l.forEach(i=>{n={},n.name=this.language[t],n.data=[],n.color=this.colors[t],n.stack=i,"cleared"===i&&(n.linkedTo=":previous"),e.forEach(e=>{let a=e.alarm?e.alarm:e;n.data.push({y:a[i][t]?a[i][t]:null,regionId:e.region,severity:t,color:this.regions[e.region]&&this.regions[e.region].isDeleted?this.fadecolors[t]:this.colors[t]})}),s.push(n)})})}let n=new m.rS,l=this;return Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"column",inverted:!1,zoomType:"y"},title:{text:t?"":`R-${this.language.Raised}, C-${this.language.Cleared}`,align:"right",floating:!1,style:{fontSize:"12px",fontWeight:"normal",fontFamily:"Source Sans Pro"}},subtitle:{text:a},yAxis:{min:0,allowDecimals:!1,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:`${this.language.Count}`},minRange:1,stackLabels:{enabled:!t,crop:!1,overflow:"none",formatter:function(){let e="C";return"raised"===this.stack&&(e="R"),`<span style="font-size: 12px; font-family: Source Sans Pro;font-style: normal;font-weight: normal;"> ${e} </span>`}}},tooltip:{formatter:function(){return"<b>"+l.language[n.transform(this.series.userOptions.stack)]+"</b><br/><b>"+this.x+"</b><br/>"+n.transform(this.series.name)+": "+this.y+"<br/>"+l.language.Total+": "+this.point.stackTotal}},xAxis:{categories:r},lang:{noData:(null==s?void 0:s.length)?" ":this.language["No Data Available"]},plotOptions:{series:{cursor:"pointer",point:{events:{}},states:{inactive:{enabled:!1}}},column:{stacking:"normal",minPointLength:2.5,borderWidth:0,dataLabels:{enabled:!1}}},series:s})}severityEventChartOptions(e,t,i){let a=e,o=[],r="small"==i?"70%":"100%",n=t.split(" ")[1];a.minor>0&&o.push({name:this.language.minor,y:a.minor,color:"#F3B426"}),a.major>0&&o.push({name:this.language.major,y:a.major,color:"#FC7235"}),a.critical>0&&o.push({name:this.language.critical,y:a.critical,color:"#C70000"});let l=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:t},tooltip:{formatter:function(){var e=s.numberFormat(Math.abs(this.percentage),2);return`<b> ${this.key} : ${this.y} </b><br/>\n          <p>${this.series.name}<span>: <b>${e} %</b><br/></span></p>`}},accessibility:{point:{valueSuffix:"%"}},lang:{noData:(null==o?void 0:o.length)?"":this.language["No Data Available"]},plotOptions:{series:{cursor:"pointer",point:{events:{}},colors:["#E87B00","#44367D","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"],states:{inactive:{enabled:!1}}},pie:{size:r,allowPointSelect:!0,cursor:"pointer",borderWidth:0,showInLegend:!1,dataLabels:{enabled:!0,format:"{point.name}",crop:!1,distance:2,overflow:"visible",style:{width:"100px",fontSize:"10px",font:"Source Sans Pro,Regular",color:"#4C4C4C"}}}},series:[]});return o.length>0&&(l.series=[{data:o,name:n}]),l}systemEventChartOptions(e){let t=[],i=[],a=[],s=[],o=[],r=[],n=[],l=[];e&&e.forEach(e=>{i.push(e.system),e.raised&&(a.push(e.raised.minor?e.raised.minor:0),s.push(e.raised.critical?e.raised.critical:0),o.push(e.raised.major?e.raised.major:0)),e.cleared&&(r.push(e.cleared.minor?e.cleared.minor:0),n.push(e.cleared.critical?e.cleared.critical:0),l.push(e.cleared.major?e.cleared.major:0))}),a.length>0&&t.push({name:this.language.minor,data:a,stack:"raised",color:"#F3B426"}),r.length>0&&t.push({name:this.language.minor+" (Cleared)",data:r,stack:"cleared",color:"#F3B426",linkedTo:":previous"}),o.length>0&&t.push({name:this.language.major,data:o,stack:"raised",color:"#FC7235"}),l.length>0&&t.push({showInLegend:!1,name:this.language.major+" (Cleared)",data:l,stack:"cleared",color:"#FC7235",linkedTo:":previous"}),s.length>0&&t.push({name:this.language.critical,data:s,stack:"raised",color:"#C70000"}),n.length>0&&t.push({showInLegend:!1,name:this.language.critical+" (Cleared)",data:n,stack:"cleared",color:"#C70000",linkedTo:":previous"});let c=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"column",inverted:!1},yAxis:{min:0,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:"Count"},minRange:1},tooltip:{formatter:function(){if(!this.series.name.includes("(Cleared)")){if(this.series.name.includes("(Raised)"))return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal;this.series.name=this.series.name+" (Raised)"}return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},xAxis:{categories:i},lang:{noData:(null==t?void 0:t.length)?"":this.language["No Data Available"]},plotOptions:{series:{states:{inactive:{enabled:!1}}},column:{stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[]});return t.length>0&&(c.series=t),c}locationEventChartOptions(e){let t=[],i=[],a=[],s=[],o=[],r=[],n=[],l=[];e&&e.forEach(e=>{i.push(e.location),e.raised&&(a.push(e.raised.minor?e.raised.minor:0),s.push(e.raised.critical?e.raised.critical:0),o.push(e.raised.major?e.raised.major:0)),e.cleared&&(r.push(e.cleared.minor?e.cleared.minor:0),n.push(e.cleared.critical?e.cleared.critical:0),l.push(e.cleared.major?e.cleared.major:0))}),a.length>0&&t.push({name:this.language.minor,data:a,stack:"raised",color:"#F3B426"}),r.length>0&&t.push({name:this.language.minor+" (Cleared)",data:r,stack:"cleared",color:"#F3B426",linkedTo:":previous"}),o.length>0&&t.push({name:this.language.major,data:o,stack:"raised",color:"#FC7235"}),l.length>0&&t.push({showInLegend:!1,name:this.language.major+" (Cleared)",data:l,stack:"cleared",color:"#FC7235",linkedTo:":previous"}),s.length>0&&t.push({name:this.language.critical,data:s,stack:"raised",color:"#C70000"}),n.length>0&&t.push({showInLegend:!1,name:this.language.critical+" (Cleared)",data:n,stack:"cleared",color:"#C70000",linkedTo:":previous"});let c=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"column",inverted:!1},yAxis:{min:0,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:"Count"},minRange:1},lang:{noData:(null==t?void 0:t.length)?"":this.language["No Data Available"]},tooltip:{formatter:function(){if(!this.series.name.includes("(Cleared)")){if(this.series.name.includes("(Raised)"))return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal;this.series.name=this.series.name+" (Raised)"}return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},xAxis:{categories:i},plotOptions:{series:{point:{events:{}},states:{inactive:{enabled:!1}}},column:{stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[]});return t.length>0&&(c.series=t),c}regionEventChartOptions(e){let t=[],i=[],a=[],s=[],o=[],r=[],n=[],l=[];e&&e.forEach(e=>{i.push(e.region),e.raised&&(a.push(e.raised.minor?e.raised.minor:0),s.push(e.raised.critical?e.raised.critical:0),o.push(e.raised.major?e.raised.major:0)),e.cleared&&(r.push(e.cleared.minor?e.cleared.minor:0),n.push(e.cleared.critical?e.cleared.critical:0),l.push(e.cleared.major?e.cleared.major:0))}),a.length>0&&t.push({name:this.language.minor,data:a,stack:"raised",color:"#F3B426"}),r.length>0&&t.push({name:this.language.minor+" (Cleared)",data:r,stack:"cleared",color:"#F3B426",linkedTo:":previous"}),o.length>0&&t.push({name:this.language.major,data:o,stack:"raised",color:"#FC7235"}),l.length>0&&t.push({showInLegend:!1,name:this.language.major+" (Cleared)",data:l,stack:"cleared",color:"#FC7235",linkedTo:":previous"}),s.length>0&&t.push({name:this.language.critical,data:s,stack:"raised",color:"#C70000"}),n.length>0&&t.push({showInLegend:!1,name:this.language.critical+" (Cleared)",data:n,stack:"cleared",color:"#C70000",linkedTo:":previous"});let c=Object.assign(Object.assign({},this.commonHighChartOptions),{chart:{type:"column",inverted:!1},yAxis:{min:0,title:{style:{fontSize:"10px",font:"Source Sans Pro,Regular"},text:"Count"},minRange:1},tooltip:{formatter:function(){if(!this.series.name.includes("(Cleared)")){if(this.series.name.includes("(Raised)"))return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal;this.series.name=this.series.name+" (Raised)"}return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},xAxis:{categories:i},lang:{noData:(null==t?void 0:t.length)?"":this.language["No Data Available"]},plotOptions:{series:{point:{events:{}},states:{inactive:{enabled:!1}}},column:{stacking:"normal",borderWidth:0,dataLabels:{enabled:!1}}},series:[]});return t.length>0&&(c.series=t),c}getEventOptions(e,t,i={},a,s,o){let r="";r=s&&Object.keys(s).length?this.getSubTitle(i,a,s,"event",t):a&&Object.keys(a).length?this.getSubTitle(i,a,{},"event",t):this.getSubTitle(i,{},{},"event",t);let n=[],l=[],c=[];return e&&e.length&&(e.forEach(e=>{e[t]&&("region"===t?e.displayName=this.regions[e[t]]?this.regions[e[t]].name:e[t]:"location"===t?e.displayName=a&&Object.keys(a).length?a[e[t]]?a[e[t]].name:e[t]:this.locations[e[t]]?this.locations[e[t]].name:e[t]:"system"===t&&(e.displayName=s&&Object.keys(s).length?s[e[t]]?s[e[t]].name:e[t]:this.systems[e[t]]?this.systems[e[t]].name:e[t]))}),(e=null==e?void 0:e.sort((e,t)=>{var i;return null===(i=null==e?void 0:e.displayName)||void 0===i?void 0:i.localeCompare(null==t?void 0:t.displayName)})).forEach(e=>{e[t]&&(e[t]=e[t].replace("device=",""),e[t]=e[t].replace("DEVICE=",""),n.push(e.displayName),e.event&&null!=typeof e.event.count&&c.push({y:e.event.count?e.event.count:null,uuid:e[t]}))}),c&&c.length&&l.push({name:"Events",data:c})),{chart:{type:"column",zoomType:"y"},title:{text:""},subtitle:{text:r},xAxis:{categories:n,crosshair:!0},yAxis:{min:0,title:{text:"Count"}},tooltip:{shared:!0,useHTML:!0,formatter:function(){var e="<b>"+this.x+"</b>";return this.points.forEach(t=>{e+='<br/><span style="color:'+t.color+'">\u25cf</span> Events: '+t.y}),e}},plotOptions:{series:{minPointLength:2.5,cursor:"pointer",point:{events:{}}},column:{pointPadding:.2,borderWidth:0}},series:l,credits:{enabled:!1},exporting:{enabled:!1},lang:{noData:(null==c?void 0:c.length)?"":this.language["No Data Available"]}}}getLineChartOptions(e,t=!1,i={}){new m.rS;let a=this.getSubTitle(i,{},{},"alarm","byday"),s=this.getDateDiff(i),o="M/d/yy";s<=3&&(o="M/d/yy HH:mm");let r=[],n=[],l=[],c=[];return e&&"object"==typeof e&&(e.forEach(e=>{if(r.push(this.dateUtils.getChartDateByFormat(e.time,o)),!t&&e.alarm&&e.alarm.cleared){let t=Object.keys(e.alarm.cleared),i=0;t.forEach(t=>{i+=e.alarm.cleared[t]}),c.push(i)}if(e.alarm&&e.alarm.raised){let t=Object.keys(e.alarm.raised),i=0;t.forEach(t=>{i+=e.alarm.raised[t]}),l.push(i)}}),n.push({name:`${this.language.Raised}`,data:l}),t||n.push({name:"Cleared",data:c})),Object.assign(Object.assign({},this.commonHighChartOptions),{title:{text:""},subtitle:{text:a},credits:{enabled:!1},chart:{type:"line",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"},plotBorderWidth:1},colors:["#0027FF","#5ACFEA"],xAxis:[{min:0,gridLineWidth:1,categories:r}],yAxis:[{min:0,allowDecimals:!1,title:{text:`${this.language.Count}`,style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{symbol:"square",enabled:!0},tooltip:{shared:!0,crosshairs:!0},series:n,plotOptions:{series:{cursor:"pointer",marker:{enabled:!1},pointPlacement:"on",point:{events:{}}},states:{inactive:{enabled:!1}}},responsive:{rules:[{condition:{}}]}})}getPieChartOptionsForFS(e,t,i,a){let s=new m.rS,o=[],r="",n=this;i&&a&&(r=this.getSubTitleForFullScreen(i.toLowerCase(),a.toLowerCase())),e&&"object"==typeof e&&e.forEach(e=>{if(e.alarm&&e.alarm[t]){let i=Object.keys(e.alarm[t]),a=0;i.forEach(i=>{a+=e.alarm[t][i]}),a&&o.push({name:e.alarmEventName,y:a,extraData:e.alarm[t]})}});let l=this.getCountForAlarmNameData(e,t);return Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:`${this.language.Alarms} ${this.language[s.transform(t)]||s.transform(t)}`},subtitle:{text:r},tooltip:{formatter:function(){return this.point.extraData.critical?`<b> ${this.key}</b><br> ${n.language.Total} : ${this.y} <br>\n            ${n.language.critical}: ${this.point.extraData.critical} <br/>`:this.point.extraData.major?`<b> ${this.key}</b><br> ${n.language.Total} : ${this.y} <br>\n            ${n.language.major}: ${this.point.extraData.major} <br/>`:this.point.extraData.minor?`<b> ${this.key}</b><br> ${n.language.Total} : ${this.y} <br>\n            ${n.language.minor}: ${this.point.extraData.minor} <br/>`:this.point.extraData.warning?`<b> ${this.key}</b><br> ${n.language.Total} : ${this.y} <br>\n            ${n.language.warning}: ${this.point.extraData.warning} <br/>`:this.point.extraData.info?`<b> ${this.key}</b><br> ${n.language.Total} : ${this.y} <br>\n            ${n.language.info}: ${this.point.extraData.info} <br/>`:void 0}},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer"},scrollbar:{enabled:!0},series:{cursor:"pointer",point:{events:{}}}},lang:{noData:(null==e?void 0:e.length)&&l?"":this.language["No Data Available"]},series:[{name:"Brands",colorByPoint:!0,data:o}]})}getCountForAlarmNameData(e,t){let i=0;return e&&"object"==typeof e&&t?e.forEach(e=>{e.alarm&&e.alarm[t]&&Object.keys(e.alarm[t]).forEach(a=>{i+=e.alarm[t][a]})}):e&&"object"==typeof e&&e.forEach(e=>{["raised","cleared"].forEach(t=>{e.alarm&&e.alarm[t]&&Object.keys(e.alarm[t]).forEach(a=>{i+=e.alarm[t][a]})})}),i}getCountForEventNameData(e,t){let i=0;return e&&"object"==typeof e&&e.forEach(e=>{e.event&&e.event.count&&(i+=e.event.count)}),i}getDateDiff(e={}){let t=0;if(Object.keys(e).length&&e.date){let i=e.date.split(",");i[0]=Number(i[0]),i[1]=Number(i[1]);let a=new Date(i[1]),s=new Date(i[0]);const o=Math.abs(a-s);t=Math.ceil(o/864e5)}return t}getEndDate(e={}){if(Object.keys(e).length&&e.date){let t=e.date.split(",");return t[0]=Number(t[0]),t[1]=Number(t[1]),t[1]}return 0}getLineChartOptionsNew(e,t=!1,i={},a={}){let s={},o=this.getSubTitle(i,{},{},"alarm","byday"),r=[],n=[],l=[];if(e&&e.length){"object"==typeof e&&e.forEach(e=>{s[e.time]=e});let o=10;a.startDate&&(o=this.getDateDiff(i));let c=[];a.startDate?c=o>5?this.dateUtils.getUtcHoursTimeArrByDate(a.startDate,a.endDate):this.dateUtils.getUtcMinsTimeArrByDate(a.startDate,a.endDate):e&&"object"==typeof e&&e[0]&&"object"==typeof e[0]&&(null==e||e.sort((e,t)=>e.time-t.time),c=o>5?this.dateUtils.getUtcHoursTimeArrFromTimeToCurrentTime(e[0].time):this.dateUtils.getUtcMinsTimeArrFromTimeToCurrentTime(e[0].time));let h={};c.forEach(e=>{h[e]=s[e]?s[e]:{time:e,alarm:{cleared:{critical:0,major:0,minor:0,warning:0,info:0},raised:{critical:0,major:0,minor:0,warning:0,info:0}},event:{count:0}}});let d=[];for(let e in h)d.push(h[e]);(e=d)&&"object"==typeof e&&(e.forEach(e=>{if(!t&&e.alarm&&e.alarm.cleared){let t=Object.keys(e.alarm.cleared),i=0;t.forEach(t=>{i+=e.alarm.cleared[t]}),l.push([e.time,i])}if(e.alarm&&e.alarm.raised){let t=Object.keys(e.alarm.raised),i=0;t.forEach(t=>{i+=e.alarm.raised[t]}),n.push([e.time,i])}}),r.push({name:this.language.issue_raised,data:n,tooltip:{valueDecimals:0}}),t||r.push({name:this.language.Cleared,data:l,tooltip:{valueDecimals:0}}))}let c={chart:{height:300,zoomType:"xy",type:"line"},time:{useUTC:!1},title:{text:""},subtitle:{text:o},credits:{enabled:!1},colors:["#0027FF","#5ACFEA"],xAxis:{type:"datetime"},yAxis:[{opposite:!1,min:0,allowDecimals:!1,title:{text:this.language.Count,style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{enabled:!0,symbolRadius:6,symbolWidth:12},tooltip:{shared:!0,crosshairs:!0},rangeSelector:{},navigator:{enabled:!1},scrollbar:{enabled:!1},exporting:{enabled:!1},plotOptions:{series:{dataGrouping:{enabled:!1}}},lang:{noData:(null==e?void 0:e.length)?"":this.language["No Data Available"]},series:r};return e&&e.length&&(c.rangeSelector={buttons:[{type:"hour",count:1,text:"1h"},{type:"day",count:1,text:"1d"},{type:"week",count:1,text:"1w"},{type:"all",text:"All"}],selected:3,inputEnabled:!1,enabled:!0}),c}getLineChartOptionForActiveReports(e,t=!1,i={},a={},s=!1){var o,r;let n={},l=[],c={},h=this.getSubTitle(i,{},{},"alarm","byday");if(e&&e.length){"object"==typeof e&&e.forEach(e=>{n[e.time]=e});let t=10;a.startDate&&(t=this.getDateDiff(i));let h=[];if(a.startDate)if(s){let e=null===(o=i.date)||void 0===o?void 0:o.split(",")[0],t=null===(r=i.date)||void 0===r?void 0:r.split(",")[1];h=e&&t?this.dateUtils.getUtcMinsTimeArrByDateMillis(Number(e),Number(t)):this.dateUtils.getUtcMinsTimeArrByDate(a.startDate,a.endDate)}else h=t>5?this.dateUtils.getUtcHoursTimeArrByDate(a.startDate,a.endDate):this.dateUtils.getUtcMinsTimeArrByDate(a.startDate,a.endDate);else e&&"object"==typeof e&&e[0]&&"object"==typeof e[0]&&(null==e||e.sort((e,t)=>e.time-t.time),h=t>5?this.dateUtils.getUtcHoursTimeArrFromTimeToCurrentTime(e[0].time):this.dateUtils.getUtcMinsTimeArrFromTimeToCurrentTime(e[0].time));let d={};h.forEach(e=>{d[e]=n[e]?n[e]:{time:e,alarm:{cleared:{critical:0,major:0,minor:0,warning:0,info:0},raised:{critical:0,major:0,minor:0,warning:0,info:0}},event:{count:0}}});let u=[];for(let e in d)u.push(d[e]);if((e=u)&&"object"==typeof e){e.forEach(e=>{e.alarm&&e.alarm.raised&&Object.keys(e.alarm.raised).forEach(t=>{"object"==typeof c[t]||(c[t]=[]),c[t].push([e.time,e.alarm.raised[t]])})});let t=Object.keys(c);t.length&&t.forEach(e=>{let t=[];i.severity?i.severity&&i.severity===e&&(t=c[e]):t=c[e],l.push({name:this.language[e],data:t,tooltip:{valueDecimals:0},color:this.colors[e]})})}}let d={chart:{height:300,zoomType:"xy",type:"line"},time:{useUTC:!1},title:{text:""},subtitle:{text:h},credits:{enabled:!1},colors:["#0027FF","#5ACFEA"],xAxis:{type:"datetime"},yAxis:[{opposite:!1,min:0,allowDecimals:!1,title:{text:this.language.Count,style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{enabled:!0,symbolRadius:6,symbolWidth:12},tooltip:{shared:!0,crosshairs:!0,split:!0,distance:30,padding:5},rangeSelector:{},navigator:{enabled:!1},scrollbar:{enabled:!1},exporting:{enabled:!1},plotOptions:{series:{dataGrouping:{enabled:!1}}},lang:{noData:(null==e?void 0:e.length)?"":this.language["No Data Available"]},series:l};return e&&e.length&&(d.rangeSelector={buttons:[{type:"hour",count:1,text:"1h"},{type:"day",count:1,text:"1d"},{type:"week",count:1,text:"1w"},{type:"all",text:"All"}],selected:3,inputEnabled:!1,enabled:!0}),d}getSubTitle(e,t={},i={},a,s){var o,r;let n={},l=new m.rS,c=new m.uU("en-US"),h="",d="",u=["cco_ack","cco_shelv"],p={cco_ack:{true:"Show Acknowledged Alarms",false:"Hide Acknowledged Alarms"},cco_shelv:{true:"Show Shelved Alarms",false:"Hide Shelved Alarms"}};if(e.date){let t=null===(o=e.date)||void 0===o?void 0:o.split(",")[0],i=null===(r=e.date)||void 0===r?void 0:r.split(",")[1];d+=`${this.language.Start_Date}: ${c.transform(t,"MM/dd/yyyy h:mm a")}  \r\n${this.language.enddate}: ${c.transform(i,"MM/dd/yyyy h:mm a")}  \r\n`}return this.filters.forEach((s,o)=>{var r;if(("event"!==a||"severity"!==s&&"customCategory"!==s)&&e[s]){let a=[];if("region"===s)"object"==typeof e[s]?e[s].forEach((t,i)=>{a.push(this.regions[e[s][i]]?this.regions[e[s][i]].name:e[s][i])}):a.push(this.regions[e[s]]?this.regions[e[s]].name:e[s]);else if("location"===s)t&&Object.keys(t).length?"object"==typeof e[s]?e[s].forEach((i,o)=>{a.push(t[e[s][o]]?t[e[s][o]].name:e[s][o])}):a.push(t[e[s]]?t[e[s]].name:e[s]):"object"==typeof e[s]?e[s].forEach((t,i)=>{a.push(this.locations[e[s][i]]?this.locations[e[s][i]].name:e[s][i])}):a.push(this.locations[e[s]]?this.locations[e[s]].name:e[s]);else if("system"===s)i&&Object.keys(i).length?"object"==typeof e[s]?e[s].forEach((t,o)=>{a.push(i[e[s][o]]?i[e[s][o]].name:e[s][o])}):a.push(i[e[s]]?i[e[s]].name:e[s]):"object"==typeof e[s]?e[s].forEach((t,i)=>{a.push(this.systems[e[s][i]]?this.systems[e[s][i]].name:e[s][i])}):a.push(this.systems[e[s]]?this.systems[e[s]].name:e[s]);else if(-1!==u.indexOf(s)){if("all"===(null===(r=e[s])||void 0===r?void 0:r.toLowerCase()))return;a=p[s][e[s]]}else a=e[s];let o=["fsan_serialnumber","region","location","system","customCategory","alarmEventName","category","cco_ack","cco_shelv"];"object"==typeof a&&-1===o.indexOf(s)?a=a.map(e=>l.transform(e)):(-1===o.indexOf(s)?a=l.transform(a):"fsan_serialnumber"===s&&(a=a.toUpperCase()),a=[a]),h&&(h+=", "),n[this.filtersObj[s]]=a.join(", "),h+=`<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">${this.language[this.filtersObj[s]]||this.filtersObj[s]}: ${a.join(", ")}</span>`,d+=`${this.language[`${this.filtersObj[s]}`]}:${a.join("&")} \r\n`}}),this.userFilters[a][s]=n,this.subTitleObj[a][s]=`${d}`,h}setRegionsInfo(e){this.regions={};let t={};e&&e.forEach(e=>{t[e.id]={name:e.name,isDeleted:e.isDeleted}}),this.regions=t}getRegionsObj(){return this.regions}setLocationsInfo(e){this.locations={};let t={};e&&e.forEach(e=>{t[e.id]={name:e.name,isDeleted:e.isDeleted}}),this.locations=t}getLocationsObj(){return this.locations}setSystemsInfo(e){this.systems={};let t={};e&&e.forEach(e=>{t[e.uuid]={name:e.name,isDeleted:e.isDeleted}}),this.systems=t}getSystemsObj(){return this.systems}setFiltersObj(){this.filtersObj={region:"Region",location:"Location",system:"System",severity:"Severity",category:"Category",customCategory:"Alarm Group",alarmEventName:-1!==window.location.pathname.indexOf("/history-reports")?"Alarm / Event Name":"Alarm Name",fsan_serialnumber:"FSAN",cco_ack:"Acknowledged Alarms",cco_shelv:"Shelved Alarms"}}prepareAlarmCSVDataforSeverity(e,t="histoy",i={}){let a=new m.rS,s=[];return Object.keys(e).length&&Object.keys(e).forEach(o=>{if("active"===t&&"cleared"===o||!e[o])return;let r=Object.keys(e[o]),n={};n.Type=a.transform(o),Object.keys(i).length&&i.severity?n[a.transform(i.severity)]=e[o][i.severity]:r.forEach(t=>{n[a.transform(t)]=e[o][t]}),s.push(Object.assign(n))}),s}prepareAlarmCSVDataforRegion(e,t="histoy",i={}){let a=new m.rS,s=[];return e.forEach(e=>{let o=e.alarm;o&&Object.keys(o).length&&Object.keys(o).forEach(r=>{if("active"===t&&"cleared"===r)return;let n={},l=Object.keys(o[r]);n.Type=a.transform(r),n.Region=this.regions[e.region]?this.regions[e.region].name:e.region,Object.keys(i).length&&i.severity?n[a.transform(i.severity)]=o[r][i.severity]:l.forEach(e=>{n[a.transform(e)]=o[r][e]}),s.push(Object.assign(n))})}),s}prepareAlarmCSVDataforLocation(e,t,i="histoy",a={}){let s=new m.rS,o=[];return null==e||e.forEach(e=>{let r=e.alarm;r&&Object.keys(r).length&&Object.keys(r).forEach(n=>{if("active"===i&&"cleared"===n)return;let l={},c=Object.keys(r[n]);l.Type=s.transform(n),l.Location=t&&Object.keys(t).length?t[e.location]?t[e.location].name:e.location:this.locations[e.location]?this.locations[e.location].name:e.location,Object.keys(a).length&&a.severity?l[s.transform(a.severity)]=r[n][a.severity]:c.forEach(e=>{l[s.transform(e)]=r[n][e]}),o.push(Object.assign(l))})}),o}prepareAlarmCSVDataforSystem(e,t,i="histoy",a={}){let s=new m.rS,o=[];return null==e||e.forEach(e=>{let r=e.alarm;r&&Object.keys(r).length&&Object.keys(r).forEach(n=>{if("active"===i&&"cleared"===n)return;let l={},c=Object.keys(r[n]);l.Type=s.transform(n),l.System=t&&Object.keys(t).length?t[e.system]?t[e.system].name:e.system:this.systems[e.system]?this.systems[e.system].name:e.system,Object.keys(a).length&&a.severity?l[s.transform(a.severity)]=r[n][a.severity]:c.forEach(e=>{l[s.transform(e)]=r[n][e]}),o.push(Object.assign(l))})}),o}prepareAlarmCSVDataforDay(e,t="histoy",i={}){let a=[],s=new m.rS,o=new m.uU("en-US");return null==e||e.forEach(e=>{let r=e.alarm;r&&Object.keys(r).length&&Object.keys(r).forEach(n=>{if("active"===t&&"cleared"===n)return;let l={},c=Object.keys(r[n]);l.Type=s.transform(n),l["Date Time"]=o.transform(new Date(e.time),"short"),Object.keys(i).length&&i.severity?l[s.transform(i.severity)]=r[n][i.severity]:c.forEach(e=>{l[s.transform(e)]=r[n][e]}),a.push(Object.assign(l))})}),a}prepareEventCSVDataforRegion(e){let t=[];return e&&e.length&&e.forEach(e=>{let i={};i.Region=this.regions[e.region]?this.regions[e.region].name:e.region,t.push(Object.assign(i,{Count:e.event?e.event.count:0}))}),t}prepareEventCSVDataforLocation(e,t){let i=[];return e&&e.length&&e.forEach(e=>{let a={};a.Location=t&&Object.keys(t).length?t[e.location]?t[e.location].name:e.location:this.locations[e.location]?this.locations[e.location].name:e.location,i.push(Object.assign(a,{Count:e.event?e.event.count:0}))}),i}prepareEventCSVDataforSystem(e,t){let i=[];return e&&e.length&&e.forEach(e=>{let a={};a.System=t&&Object.keys(t).length?t[e.system]?t[e.system].name:e.system:this.systems[e.system]?this.systems[e.system].name:e.system,i.push(Object.assign(a,{Count:e.event?e.event.count:0}))}),i}getSubTitleStr(e,t){return this.subTitleObj[e][t]}getUserFilters(e,t){return this.userFilters[e][t]}setUserFilters(e,t,i){return this.userFilters[e][t]=i}getSubTitleForFullScreen(e,t){let i=this.getUserFilters(e,t),a="",s=Object.keys(i);return s.length>0&&s.forEach(e=>{a&&(a+=", "),a+=`<span style="font-family: Lato; color: #000000; font-size: 12px; line-height: 1.1640625;">${this.language[e]?this.language[e]:e}: ${this.language[i[e]]||i[e]}</span>`}),a}prepareAlarmCSVData(e,t="alarm"){let i=new m.rS,a=new m.uU("en-US"),s=[];return e.forEach(e=>{let o={};o={"Reported Time":e.subject&&e.subject.timeRaised?a.transform(new Date(Number(e.subject.timeRaised)),"short"):"","Synced Time":e.time?a.transform(new Date(Number(e.time)),"short"):""},"alarm"===t?(o["Alarm Name"]=e.subject?e.subject.alarmEventName:"",o["Alarm Category"]=e.subject?e.subject.category:"",e.subject&&e.subject.transformedAlarms?(o.Resource=`${e.subject&&e.subject.region?e.subject.region:""}${e.subject&&e.subject.location?`/${e.subject.location}`:""}${e.subject&&e.subject.deviceName?`/${e.subject.deviceName}`:""}, ${e.subject&&e.subject.transformedAlarms?e.subject.transformedAlarms:""} `,o.Type=e.type):(o.Resource=`${e.subject&&e.subject.region?e.subject.region:""}${e.subject&&e.subject.location?`/${e.subject.location}`:""}${e.subject&&e.subject.deviceName?`/${e.subject.deviceName}`:""}, ${e.subject&&e.subject.source?e.subject.source:""} `,o.Type=e&&e.subject?e.subject.alarmType:""),o.Severity=e.subject?e.subject.perceivedSeverity:""):(o["Event Name"]=e.subject?e.subject.alarmEventName:"",o.Category=e.subject?e.subject.category:""),o.Decription=e&&e.subject?e.subject.description:"",o.Details=e&&e.subject?e.subject.details:"",o["Manual Acknowledged"]=e&&e.subject&&e.subject.manualAcknowledged?"Yes":"No",o["Manual Shelved"]=e&&e.subject&&e.subject.manualShelved?"Yes":"No",o["Repair Action"]=e&&e.subject?e.subject.repairAction:"",o["Service Affecting"]=e&&e.subject&&e.subject.serviceAffecting?"Yes":"No",o["Service Impacting"]=e&&e.subject&&e.subject.serviceImpacting?"Yes":"No",o.Source=e&&e.subject&&e.subject.transformedAlarms?e.subject.transformedAlarms:e.subject.source,o.Notes=e&&e.subject?e.subject.notes:"",e&&e.subject&&"object"==typeof e.subject.additionalAttributes&&e.subject.additionalAttributes&&Object.keys(e.subject.additionalAttributes).forEach(t=>{o[i.transform(t)]="object"==typeof e.subject.additionalAttributes[t]?e.subject.additionalAttributes[t].value:e.subject.additionalAttributes[t]}),o.Source=`\t${o.Source}`,o["Repair Action"]&&(o["Repair Action"]=o["Repair Action"].replace(/,/g,""),o["Repair Action"]=o["Repair Action"].replace(/'/g,"")),o.Notes&&(o.Notes=o.Notes.replace(/,/g,""),o.Notes=o.Notes.replace(/'/g,"")),s.push(o)}),s}}return e.\u0275fac=function(t){return new(t||e)(g.LFG(b.s),g.LFG(y.s),g.LFG(f.F0),g.LFG(v.z))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);