"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[218],{70218:function(e,t,i){i.r(t),i.d(t,{EndpointModule:function(){return Qt}});var n=i(38583),s=i(3679),a=i(39895),l=i(37716),o=i(30900),r=i(38048);const d=function(){return["active"]};function c(e,t){if(1&e&&(l.TgZ(0,"li",5),l.TgZ(1,"a",6),l._uU(2),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.s9C("id",e.title),l.s9C("routerLink",e.link),l.Q6J("routerLinkActive",l.DdM(4,d)),l.xp6(1),l.Oqu(e.title)}}function u(e,t){if(1&e&&(l.TgZ(0,"div",2),l.TgZ(1,"ul",3),l.YNc(2,c,3,5,"li",4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.Q6J("ngForOf",e.menus)}}let g=(()=>{class e{constructor(e,t,i){this.router=e,this.customTranslateService=t,this.sso=i,this.pageAvailable=!1,this.languages=[{name:"English"},{name:"French Canadian"}],this.MODULE=this.sso.getRedirectModule(this.router.url)}ngOnInit(){this.language=this.customTranslateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.customTranslateService.selectedLanguage.subscribe(e=>{this.language=e,this.menus[0].title=this.language.mappingsource,this.menus[1].title=this.language.management,this.menus[2].title=this.language.subnet,this.menus[3].title=this.language.settings}),this.menus=[{title:this.language.mappingsource,link:"mapping_source",subMenuLink:`/${this.MODULE}/flowAnalyze/endpoint/mapping_source`},{title:this.language.management,link:"management",subMenuLink:`/${this.MODULE}/flowAnalyze/endpoint/management`},{title:this.language.subnet,link:"subnets",subMenuLink:`/${this.MODULE}/flowAnalyze/endpoint/subnets`},{title:this.language.settings,link:"settings",subMenuLink:`/${this.MODULE}/flowAnalyze/endpoint/settings`}],this.activeRoute=this.router.url}languageChange(e){sessionStorage.setItem("defaultLanguage",e),this.customTranslateService.changeLanguage(e)}goPage(e){this.router.navigate([e])}pageChange(e){this.activeRoute=e.subMenuLink}onActivate(e){window.scroll({top:0,left:0,behavior:"smooth"})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.F0),l.Y36(o.d),l.Y36(r.t6))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-endpoint"]],decls:2,vars:1,consts:[["class","flow-config-sub-tab",4,"ngIf"],[3,"activate"],[1,"flow-config-sub-tab"],[1,"nav"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"id","routerLink","routerLinkActive"]],template:function(e,t){1&e&&(l.YNc(0,u,3,1,"div",0),l.TgZ(1,"router-outlet",1),l.NdJ("activate",function(e){return t.onActivate(e)}),l.qZA()),2&e&&l.Q6J("ngIf",t.pageAvailable)},directives:[n.O5,a.lC,n.sg,a.yS,a.Od],styles:[""]}),e})();var h=i(23771),p=i(79765),m=i(35758),b=i(92340),f=i(404),Z=i(89044),_=i(91841),x=i(13149),A=i(93822),v=i(12664),T=i(49342),C=i(7450),I=i(39075),D=i(20904),S=i(86640);const y=["infoModal"],O=["deleteModal"],M=["multiDeleteModal"],w=["importModal"],q=["importFullInput"],R=["importInput"],N=["aggGroupsModal"];function k(e,t){if(1&e&&(l.TgZ(0,"div",16),l.TgZ(1,"div",17),l.TgZ(2,"div",18),l.TgZ(3,"span",19),l._uU(4),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(e.language.Loading)}}function E(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",20),l.TgZ(1,"div",21),l.TgZ(2,"div",22),l.TgZ(3,"div"),l.TgZ(4,"button",23),l.NdJ("click",function(){return l.CHM(e),l.oxw().showCreate()}),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"div"),l.TgZ(7,"button",24),l.NdJ("click",function(){return l.CHM(e),l.oxw().export()}),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"div",25),l.TgZ(10,"button",26),l.NdJ("click",function(){return l.CHM(e),l.oxw().fullImportUpload()}),l._uU(11),l.qZA(),l.TgZ(12,"input",27,28),l.NdJ("change",function(t){return l.CHM(e),l.oxw().fullImport(t,!0)}),l.qZA(),l.qZA(),l.TgZ(14,"div",25),l.TgZ(15,"label",29),l._uU(16),l.qZA(),l.TgZ(17,"input",30,31),l.NdJ("change",function(t){return l.CHM(e),l.oxw().fullImport(t,!1)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",32),l.TgZ(20,"div",33),l._UZ(21,"input",34),l.TgZ(22,"button",35),l._UZ(23,"i",36),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(5),l.Oqu(e.language.create),l.xp6(3),l.Oqu(e.language.exportAssigned),l.xp6(3),l.Oqu(e.language.fullImportAssigned),l.xp6(5),l.hij("",e.language.incrementalImportAssigned," ")}}const P=function(){return{standalone:!0}};function U(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section"),l.TgZ(1,"div",37),l.TgZ(2,"div",38),l.TgZ(3,"form"),l.TgZ(4,"div",39),l.TgZ(5,"div",40),l.TgZ(6,"label",41),l._uU(7),l.TgZ(8,"span",42),l._uU(9,"*"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",43),l.TgZ(11,"ng-select",44),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().subnetVersionsSelected=t})("change",function(){return l.CHM(e),l.oxw().subnetVerChoose()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",39),l.TgZ(13,"div",40),l.TgZ(14,"label",41),l._uU(15),l.qZA(),l.qZA(),l.TgZ(16,"div",43),l._UZ(17,"label",45),l.TgZ(18,"input",46),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().newIpv4=t})("blur",function(){l.CHM(e);const t=l.oxw();return t.removeUnwantedSpace("newIpv4",t.newIpv4)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",39),l.TgZ(20,"div",40),l.TgZ(21,"label",41),l._uU(22),l.qZA(),l.qZA(),l.TgZ(23,"div",43),l._UZ(24,"label",45),l.TgZ(25,"input",47),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().newIpv6=t})("blur",function(){l.CHM(e);const t=l.oxw();return t.removeUnwantedSpace("newIpv6",t.newIpv6)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"div",39),l.TgZ(27,"div",40),l.TgZ(28,"label",41),l._uU(29),l.TgZ(30,"span",42),l._uU(31,"*"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(32,"div",43),l._UZ(33,"label",45),l.TgZ(34,"input",48),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().createName=t})("blur",function(){l.CHM(e);const t=l.oxw();return t.removeUnwantedSpace("createName",t.createName)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(35,"div",49),l.TgZ(36,"div",50),l._UZ(37,"label",51),l.qZA(),l.TgZ(38,"button",52),l.NdJ("click",function(){return l.CHM(e),l.oxw().submit()}),l._uU(39),l.qZA(),l.TgZ(40,"button",53),l.NdJ("click",function(){return l.CHM(e),l.oxw().hideCreate()}),l._uU(41),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(7),l.hij("",e.language.ip," "),l.xp6(4),l.Q6J("items",e.subnetVersions)("multiple",!1)("ngModel",e.subnetVersionsSelected)("ngModelOptions",l.DdM(17,P))("clearable",!1)("searchable",!1),l.xp6(4),l.Oqu(e.language.ipv4),l.xp6(3),l.Q6J("ngModel",e.newIpv4)("disabled","IP-V6"==e.subnetVersionsSelected),l.xp6(4),l.Oqu(e.language.ipv6),l.xp6(3),l.Q6J("ngModel",e.newIpv6)("disabled","IP-V4"==e.subnetVersionsSelected),l.xp6(4),l.hij("",e.language.name," "),l.xp6(5),l.Q6J("ngModel",e.createName),l.xp6(5),l.Oqu(e.language.submit),l.xp6(2),l.Oqu(e.language.Cancel)}}function F(e,t){if(1&e&&(l.TgZ(0,"tr",62),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.s9C("id",e.id),l.xp6(2),l.Oqu(e.action),l.xp6(2),l.Oqu(e.name?e.name:""),l.xp6(2),l.Oqu(e.ipAddress?e.ipAddress:""),l.xp6(2),l.Oqu(e.ipAddress_old?e.ipAddress_old:"")}}function J(e,t){if(1&e&&(l.TgZ(0,"div",9),l.TgZ(1,"div",59),l.TgZ(2,"table",60),l.TgZ(3,"thead"),l.TgZ(4,"tr"),l.TgZ(5,"th"),l._uU(6),l.qZA(),l.TgZ(7,"th"),l._uU(8),l.qZA(),l.TgZ(9,"th"),l._uU(10),l.qZA(),l.TgZ(11,"th"),l._uU(12),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"tbody"),l.YNc(14,F,9,5,"tr",61),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Q6J("dtOptions",e.importTableOptions),l.xp6(4),l.Oqu(e.language.action),l.xp6(2),l.Oqu(e.language.name),l.xp6(2),l.Oqu(e.language.ip),l.xp6(2),l.AsE("",e.language.old," ",e.language.ip,""),l.xp6(2),l.Q6J("ngForOf",e.importTableData)}}function H(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section"),l.YNc(1,J,15,7,"div",54),l.TgZ(2,"div",55),l.TgZ(3,"div",56),l.TgZ(4,"button",57),l.NdJ("click",function(){return l.CHM(e),l.oxw().importSubmit(!1)}),l._uU(5),l.qZA(),l.TgZ(6,"button",58),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeImport()}),l._uU(7),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.tablePreview),l.xp6(3),l.Q6J("disabled",!e.enableImportSubmit),l.xp6(1),l.Oqu(e.language.submit),l.xp6(2),l.Oqu(e.language.Cancel)}}function L(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",80),l.TgZ(1,"div",65),l.TgZ(2,"span",81),l.TgZ(3,"div",82),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(3).edit(t)}),l._UZ(4,"i",83),l.qZA(),l.qZA(),l.TgZ(5,"span",81),l.TgZ(6,"input",84),l.NdJ("click",function(t){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(3).getDeleteIds(t,i)}),l.qZA(),l.qZA(),l.TgZ(7,"span",81),l.TgZ(8,"div",85),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(3).delete(t)}),l._UZ(9,"i",71),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw().$implicit,t=l.oxw(3);l.xp6(3),l.s9C("title",t.language.Edit),l.Q6J("ngClass",e.assignedName?"":"disabled"),l.xp6(3),l.Gre("delete_id_",e.id,""),l.s9C("value",e.id),l.MGl("name","delete_id_",e.id,""),l.s9C("title",t.language.Select),l.xp6(2),l.s9C("title",t.language.Delete)}}function j(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",86),l.TgZ(1,"div",65),l.TgZ(2,"span",87),l.TgZ(3,"div",88),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(3).updateSave(t.id)}),l._UZ(4,"i",89),l.qZA(),l.qZA(),l.TgZ(5,"span",87),l.TgZ(6,"div",90),l.NdJ("click",function(){return l.CHM(e),l.oxw(4).updateCancel()}),l._UZ(7,"i",91),l.qZA(),l.qZA(),l.qZA(),l.qZA()}}function $(e,t){if(1&e&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",e.name?e.name:""," ")}}function V(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",33),l.TgZ(1,"input",92),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(4).editName=t}),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(4);l.xp6(1),l.Q6J("ngModel",e.editName)("ngModelOptions",l.DdM(2,P))}}function B(e,t){if(1&e&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",e.ipAddress?e.ipAddress:""," ")}}function Y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",93),l.TgZ(1,"ng-select",94),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(4).editIPVersionsSelected=t}),l.qZA(),l.TgZ(2,"input",95),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(4).editIPAddress=t})("blur",function(){l.CHM(e);const t=l.oxw(4);return t.removeUnwantedSpace("editIPAddress",t.editIPAddress)}),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(4);l.xp6(1),l.Q6J("items",e.subnetVersions)("multiple",!1)("ngModel",e.editIPVersionsSelected)("ngModelOptions",l.DdM(8,P))("clearable",!1)("searchable",!1),l.xp6(1),l.Q6J("ngModel",e.editIPAddress)("ngModelOptions",l.DdM(9,P))}}function Q(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"span",96),l.TgZ(1,"span",97),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(3).openAggregatedGroupsModal(t)}),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(4);l.xp6(2),l.Oqu(e.language.show?e.language.show:"Show")}}function G(e,t){if(1&e&&(l.TgZ(0,"tr",62),l.TgZ(1,"td",64),l.YNc(2,L,10,9,"div",75),l.YNc(3,j,8,0,"div",76),l.qZA(),l.TgZ(4,"td"),l._uU(5),l.YNc(6,$,2,1,"div",3),l.YNc(7,V,2,3,"div",77),l.qZA(),l.TgZ(8,"td"),l.YNc(9,B,2,1,"div",3),l.YNc(10,Y,3,10,"div",78),l.qZA(),l.TgZ(11,"td",74),l.TgZ(12,"div"),l._uU(13),l.qZA(),l.qZA(),l.TgZ(14,"td",74),l._uU(15),l.YNc(16,Q,3,1,"span",79),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=l.oxw(3);l.s9C("id",e.id),l.xp6(2),l.Q6J("ngIf",i.editOnValue!=e.id),l.xp6(1),l.Q6J("ngIf",i.editOnValue==e.id),l.xp6(2),l.hij(" ",e.name?e.name:""," "),l.xp6(1),l.Q6J("ngIf",i.editOnValue!=e.id&&0),l.xp6(1),l.Q6J("ngIf",i.editOnValue==e.id&&0),l.xp6(2),l.Q6J("ngIf",i.editOnValue!=e.id),l.xp6(1),l.Q6J("ngIf",i.editOnValue==e.id),l.xp6(3),l.hij(" ",e.ipAddress&&e.mappedBy?e.mappedBy:""," "),l.xp6(2),l.hij(" ",i.isAggregatedGroupAvail(e)?i.language.Yes:i.language.No," "),l.xp6(1),l.Q6J("ngIf",i.isAggregatedGroupAvail(e))}}function z(e,t){if(1&e&&(l.TgZ(0,"tbody"),l.YNc(1,G,17,11,"tr",61),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.managementData)}}function K(e,t){if(1&e&&(l.TgZ(0,"tbody"),l.TgZ(1,"tr"),l.TgZ(2,"td",98),l._uU(3),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(3),l.Oqu(e.filterAndSearchFlag?e.language["No matching records found"]:e.language["No data available in table"])}}function W(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",59),l.TgZ(1,"table",63),l.TgZ(2,"thead"),l.TgZ(3,"tr"),l.TgZ(4,"th",64),l.TgZ(5,"div",65),l.TgZ(6,"div",66),l.TgZ(7,"input",67),l.NdJ("change",function(t){return l.CHM(e),l.oxw().selectDeselectAll(t.target.checked)}),l.qZA(),l.TgZ(8,"span",68),l.NdJ("click",function(t){return l.CHM(e),l.oxw().showAllInnerCheckBox(t)}),l.qZA(),l.qZA(),l.TgZ(9,"div",69),l.TgZ(10,"button",70),l.NdJ("click",function(){return l.CHM(e),l.oxw().deleteAllSelected()}),l._UZ(11,"i",71),l._uU(12),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"th",72),l._uU(14),l.qZA(),l.TgZ(15,"th",73),l._uU(16),l.qZA(),l.TgZ(17,"th",74),l._uU(18),l.qZA(),l.TgZ(19,"th",74),l._uU(20),l.qZA(),l.qZA(),l.qZA(),l.YNc(21,z,2,1,"tbody",3),l.YNc(22,K,4,1,"tbody",3),l._UZ(23,"tbody"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("dtOptions",e.dtOptions),l.xp6(5),l.Q6J("hidden",e.editOnValue),l.xp6(1),l.Q6J("hidden",e.editOnValue)("disabled",0==(null==e.managementData?null:e.managementData.length)),l.xp6(1),l.Q6J("hidden",e.editOnValue),l.xp6(1),l.Q6J("hidden",e.editOnValue),l.xp6(1),l.Q6J("disabled",!(null!=e.managementData&&e.managementData.length&&null!=e.deleteIds&&e.deleteIds.length)),l.xp6(2),l.hij(" ",e.language.selected," "),l.xp6(2),l.Oqu(e.language.name),l.xp6(2),l.Oqu(e.language.ip),l.xp6(2),l.Oqu(e.language.namerule),l.xp6(2),l.Oqu(e.language["Aggregated Groups"]),l.xp6(1),l.Q6J("ngIf",0!=(null==e.managementData?null:e.managementData.length)),l.xp6(1),l.Q6J("ngIf",(!(null!=e.managementData&&e.managementData.length)||null!=e.tableCount&&0==e.tableCount||null!=e.filterCount&&0==e.filterCount)&&!e.filterLoading)}}function X(e,t){if(1&e&&(l.TgZ(0,"li",111),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Oqu(e.name)}}function ee(e,t){if(1&e&&(l.TgZ(0,"ul",109),l.YNc(1,X,2,1,"li",110),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.invalidImportEndPoint)}}function te(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",99),l.TgZ(1,"h4",100),l._uU(2),l.qZA(),l.TgZ(3,"button",101),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.closeModal(),t.editOnValue=void 0,t.getTableCount(!0)}),l._UZ(4,"span",102),l.qZA(),l.qZA(),l.TgZ(5,"div",103),l.TgZ(6,"p",104),l._uU(7),l.qZA(),l.TgZ(8,"div",105),l.TgZ(9,"p",104),l._uU(10),l.qZA(),l.YNc(11,ee,2,1,"ul",106),l.qZA(),l.qZA(),l.TgZ(12,"div",107),l.TgZ(13,"button",108),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.closeModal(),t.editOnValue=void 0,t.getTableCount(!0)}),l._uU(14),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(5),l.Oqu(e.invalidImportEndPoint.length?e.language.Note+" - "+e.language["No endpoints imported"]:""),l.xp6(3),l.Oqu(e.infoBody),l.xp6(1),l.Q6J("ngIf",e.invalidImportEndPoint.length),l.xp6(3),l.Oqu(e.language.Okay)}}function ie(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",99),l.TgZ(2,"h4",100),l._uU(3),l.qZA(),l.TgZ(4,"button",101),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(5,"span",102),l.qZA(),l.qZA(),l.TgZ(6,"div",112),l.TgZ(7,"table",105),l.TgZ(8,"tr"),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td"),l._uU(12),l.qZA(),l.TgZ(13,"td"),l._uU(14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",107),l.TgZ(16,"button",108),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.closeModal(),t.confirmDelete()}),l._uU(17),l.qZA(),l.TgZ(18,"button",113),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(19),l.qZA(),l.qZA(),l.BQk()}if(2&e){const e=l.oxw();l.xp6(3),l.Oqu(e.infoTitle),l.xp6(7),l.Oqu(e.deleteData&&e.deleteData.name?e.deleteData.name:""),l.xp6(2),l.Oqu(e.deleteData&&e.deleteData.ipAddress?e.deleteData.ipAddress:""),l.xp6(2),l.Oqu(e.deleteData&&e.deleteData.mappedBy?e.deleteData.mappedBy:""),l.xp6(3),l.Oqu(e.language.Okay),l.xp6(2),l.Oqu(e.language.Cancel)}}function ne(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=t.index,n=l.oxw(2);l.xp6(2),l.Oqu(n.deleteEndpoints[i].name?n.deleteEndpoints[i].name:""),l.xp6(2),l.Oqu(e||""),l.xp6(2),l.Oqu(n.deleteEndpoints[i].mappedBy?n.deleteEndpoints[i].mappedBy:"")}}function se(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",99),l.TgZ(1,"h4",100),l._uU(2),l.qZA(),l.TgZ(3,"button",101),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",102),l.qZA(),l.qZA(),l.TgZ(5,"div",103),l.TgZ(6,"table",105),l.YNc(7,ne,7,3,"tr",114),l.qZA(),l.qZA(),l.TgZ(8,"div",107),l.TgZ(9,"button",108),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.closeModal(),t.confirmDeleteSecleted()}),l._uU(10),l.qZA(),l.TgZ(11,"button",113),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(12),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(5),l.Q6J("ngForOf",e.endpointIps),l.xp6(3),l.Oqu(e.language.Okay),l.xp6(2),l.Oqu(e.language.Cancel)}}function ae(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",99),l.TgZ(1,"h4",100),l._uU(2),l.qZA(),l.TgZ(3,"button",101),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",102),l.qZA(),l.qZA(),l.TgZ(5,"div",112),l._UZ(6,"table",115),l.qZA(),l.TgZ(7,"div",107),l.TgZ(8,"button",108),l.NdJ("click",function(){return l.CHM(e),l.oxw().proceedImport()}),l._uU(9),l.qZA(),l.TgZ(10,"button",113),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(11),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(4),l.Q6J("innerHtml",e.infoBody,l.oJD),l.xp6(3),l.Oqu(e.language.Okay),l.xp6(2),l.Oqu(e.language.Cancel)}}function le(e,t){1&e&&(l.TgZ(0,"div",120),l.TgZ(1,"div",17),l.TgZ(2,"div",121),l._UZ(3,"span",19),l.qZA(),l.qZA(),l.qZA())}function oe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",122),l.TgZ(1,"span",123),l._UZ(2,"img",124),l.qZA(),l.TgZ(3,"button",125),l.NdJ("click",function(){l.CHM(e);const t=l.oxw(2);return t.aggError=!t.aggError}),l._UZ(4,"span"),l.qZA(),l._UZ(5,"div",126),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(5),l.Q6J("innerHtml",e.aggErrorInfo,l.oJD)}}function re(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td",72),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",72),l._uU(6),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e.name?e.name:""),l.xp6(2),l.Oqu(e.ipAddress?e.ipAddress:""),l.xp6(2),l.Oqu(e.ipAddress&&e.mappedBy?e.mappedBy:"")}}function de(e,t){if(1&e&&(l.TgZ(0,"table",127),l.TgZ(1,"thead"),l.TgZ(2,"tr"),l.TgZ(3,"th",72),l._uU(4),l.qZA(),l.TgZ(5,"th"),l._uU(6),l.qZA(),l.TgZ(7,"th",72),l._uU(8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"tbody"),l.YNc(10,re,7,3,"tr",114),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.Q6J("dtOptions",e.aggTableOptions),l.xp6(4),l.Oqu(e.language.name),l.xp6(2),l.Oqu(e.language.ip),l.xp6(2),l.Oqu(e.language.mapped),l.xp6(2),l.Q6J("ngForOf",e.aggregatedGroups)}}function ce(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",99),l.TgZ(1,"h4",100),l._uU(2),l.qZA(),l.TgZ(3,"button",101),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",102),l.qZA(),l.qZA(),l.TgZ(5,"div",116),l.YNc(6,le,4,0,"div",117),l.YNc(7,oe,6,1,"div",118),l.YNc(8,de,11,5,"table",119),l.qZA(),l.TgZ(9,"div",107),l.TgZ(10,"button",108),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(11),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(4),l.Q6J("ngIf",e.aggregatedGroupsLoading),l.xp6(1),l.Q6J("ngIf",e.aggError),l.xp6(1),l.Q6J("ngIf",e.aggreDataAvail),l.xp6(3),l.Oqu(e.language.Close)}}const ue=i(91704);let ge=(()=>{class e{constructor(e,t,i,n,s,a,l,o,r,d,c,u){this.commonFunctionsService=e,this.router=t,this.apiService=i,this.http=n,this.exportExcel=s,this.dataTablecreatorService=a,this.sso=l,this.dialogService=o,this.commonOrgService=r,this.translateService=d,this.titleService=c,this.common=u,this.pageAvailable=!1,this.subnetVersions=["IP-V4","IP-V6"],this.subnetVersionsSelected="IP-V4",this.tablePreview=!1,this.createSubnets=[],this.tableOptions={drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&ue(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.managementData=[],this.dtTrigger=new p.xQ,this.isRerender=!1,this.dtOptions={order:[1,"asc"],columnDefs:[{targets:[0],orderable:!1}],stateSave:!1},this.editIPAddress="",this.IPError=!1,this.nameError=!1,this.importTableOptions={pagingType:"full_numbers",pageLength:10,order:[0,"asc"],dom:"tipr"},this.filters=[{label:"IP",value:"ip_address"},{label:"Name",value:"name"},{label:"Mapped By",value:"mapped_by"}],this.filterBy={label:"IP",value:"ip_address"},this.filtersDev=[{label:"ALL",value:"NONE"},{label:"ASSIGNED",value:"ASSIGNED"},{label:"DHCP",value:"DHCP"},{label:"CC",value:"CC"},{label:"CUSTOM",value:"CUSTOM"},{label:"RADIUS",value:"RADIUS"},{label:"CMS",value:"CMS"},{label:"SMx",value:"SMx"}],this.filterByDev={label:"ALL",value:"NONE"},this.empty={IP:"",Name:""},this.storageData={},this.importTableData=[],this.enableImportSubmit=!1,this.buttonVisible=!0,this.assignedData=[],this.importDeleteData=[],this.importData=[],this.loading=!0,this.importUpdateASCreate=[],this.mappedData={},this.allManagementData=[],this.aggTableOptions={dom:"t",ordering:!1},this.columnName={ipAddress:"IP",name:"Name"},this.showTable=!1,this.filterAndSearchFlag=!1,this.invalidImportEndPoint=[],this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[];let g=this.router.url;this.ORG_ID=this.sso.getOrganizationID(g),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.exportColoumnNames={ipAddress:this.language.ip,name:this.language.name},this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.exportColoumnNames={ipAddress:this.language.ip,name:this.language.name},this.titleService.setTitle(`${this.language.management} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===h?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.reloadCurrentRoute(),this.setFilterOptions()});let h=this.sso.getRedirectModule(g);this.titleService.setTitle(`${this.language.management} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===h?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.commonOrgService.closeAlert(),this.getTableCount(!0),this.frTable=this.translateService.fr}ngOnInit(){this.reset(),this.removeState(),this.tableLanguageOptions(),this.setFilterOptions();const e=JSON.parse(localStorage.getItem("calix.login_data"));this.storageData.clientIp=null==e?void 0:e.clientIp,this.storageData.UserId=null==e?void 0:e.UserId,this.jsonSubs=this.dataTablecreatorService.jsonDataOfCSV.subscribe(e=>{this.invalidImportEndPoint=[];try{let t=!0;(e||[]).forEach(e=>{this.commonFunctionsService.keysFromColumnName(e,this.exportColoumnNames),e.name&&e.name.length>64&&(this.invalidImportEndPoint.push(e),this.infoTitle=this.language["Invalid Value"],this.infoBody=`${this.language["Invalid Name - Name should not exceed 64 characters."]}`,t=!1,this.openInfoModal(!0))}),t&&this.compareJsonToTableData(e)}catch(t){}})}ngAfterViewInit(){this.loaded=!0}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.jsonSubs&&this.jsonSubs.unsubscribe(),this.impAssignedSubs&&this.impAssignedSubs.unsubscribe(),this.listSubs&&this.listSubs.unsubscribe(),this.createSubs&&this.createSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.exportSubs&&this.exportSubs.unsubscribe(),this.countSubs&&this.countSubs.unsubscribe(),this.aggregatedGroupsSubs&&this.aggregatedGroupsSubs.unsubscribe()}getTableCount(e){this.showTable=!1,this.managementData=[],this.countSubs=this.apiService.getCount(this.ORG_ID).subscribe(t=>{this.tableCount=t,e&&this.getAssignedData(),setTimeout(()=>{this.showTable=!0,this.tableRender()},1e3)},e=>{this.pageErrorHandle(e)})}tableRender(){const e=this;let t,i=this.ORG_ID,n=`${b.N.faAdminCorrelatorURL}flowendpoint`;this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,order:[1,"asc"],columnDefs:[{targets:[0],orderable:!1}],searchDelay:1500,stateSave:!1,ajax:(s,a)=>{let l,o;switch(e.filterLoading=!0,this.sortBy=s.order[0].column,this.sortType=s.order[0].dir,this.sortBy){case 1:l="name";break;case 2:l="ip";break;case 3:l="mappedby";break;case 4:l="agggroup"}this.filterCount=void 0,t=0==s.start?0:s.start/s.length,s.search.value&&s.search.value.trim()&&s.search.value.length?(this.filterByDev=this.filtersDev.find(e=>"NONE"===e.value),this.filterAndSearchFlag=!0,n=`${b.N.faAdminCorrelatorURL}flowendpoint?org-id=${i}&searchstring=${s.search.value.trim()}&pagenumber=${t}&pagesize=${s.length}`,this.sortType&&l&&(n=`${n}&sortdirection=${this.sortType}&orderby=${l}`),o=`${n}&count=true`,this.getFilterCount(o),e.filtering=!0):(n=`${b.N.faAdminCorrelatorURL}flowendpoint?org-id=${i}&pagenumber=${t}&pagesize=${s.length}&mappedby=${this.filterByDev.value}`,this.sortType&&l&&(n=`${n}&sortdirection=${this.sortType}&orderby=${l}`),o=`${n}&count=true`,this.getFilterCount(o),e.filtering=!0,this.filterAndSearchFlag="NONE"!==this.filterByDev.value),e.filtering?e.filterCountSubs.subscribe(t=>{this.filterCount=t,e.http.get(n).subscribe(t=>{e.managementData=Array.isArray(t)?this.sortData(t,e.sortBy,e.sortType):[t],e.commonOrgService.closeAlert(),e.hideNoDataRow(),setTimeout(()=>{a({recordsTotal:null!=e.tableCount?e.tableCount:100,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount,data:[]}),e.filterLoading=!1},200)},t=>{404==t.status?(e.managementData=[],this.dataAvailable=!0,e.hideNoDataRow(),setTimeout(()=>{a({recordsTotal:null!=e.tableCount?e.tableCount:100,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount,data:[]}),e.filterLoading=!1},200)):(this.pageErrorHandle(t),this.dataAvailable=!0,e.filterLoading=!1)})},t=>{404==t.status?this.filterCount=0:this.pageErrorHandle(t),e.http.get(n).subscribe(t=>{e.managementData=Array.isArray(t)?this.sortData(t,e.sortBy,e.sortType):[t],e.commonOrgService.closeAlert(),e.hideNoDataRow(),setTimeout(()=>{a({recordsTotal:null!=e.tableCount?e.tableCount:100,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount,data:[]}),e.filterLoading=!1},200)},t=>{404==t.status?(e.managementData=[],this.dataAvailable=!0,e.hideNoDataRow(),setTimeout(()=>{a({recordsTotal:null!=e.tableCount?e.tableCount:100,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount,data:[]}),e.filterLoading=!1},200)):(this.pageErrorHandle(t),this.dataAvailable=!0,e.filterLoading=!1)})}):e.http.get(n).subscribe(t=>{e.managementData=Array.isArray(t)?this.sortData(t,e.sortBy,e.sortType):[t],e.commonOrgService.closeAlert(),e.hideNoDataRow(),setTimeout(()=>{a({recordsTotal:null!=e.tableCount?e.tableCount:100,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount,data:[]}),e.filterLoading=!1},200)},t=>{404==t.status?(e.managementData=[],this.dataAvailable=!0,e.hideNoDataRow(),setTimeout(()=>{a({recordsTotal:null!=e.tableCount?e.tableCount:100,recordsFiltered:null!=e.filterCount?e.filterCount:e.tableCount,data:[]}),e.filterLoading=!1},200)):(this.pageErrorHandle(t),this.dataAvailable=!0,e.filterLoading=!1)})},drawCallback:t=>{this.tableLanguageOptions(),this.getMappedData(),setTimeout(()=>{e.loading=!1,e.filterLoading=!1,this.selectDeselectAll(!1),ue("#selectDeselectAll").prop("checked",!1),ue("#selectDeselectAll-span").hide()},200)}},this.tableLanguageOptions()}hideNoDataRow(){setTimeout(()=>{ue(".odd").css("display","none")},100)}getFilterCount(e){this.filterCountSubs=this.http.get(e)}redraw(e){this.dtElement.dtInstance.then(t=>{e?t.search("").draw("page"):t.draw("page")})}setTableOptions(){this.tableOptions={rowId:"id",drawCallback:e=>{let t=e.aoData.length,i=e._iDisplayLength;setTimeout(()=>{this.resetDelete()},0),t<=i&&ue(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.dataAvailable=!0}processData(e){return e}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}showCreate(){this.createView=!0,this.buttonVisible=!1,this.tablePreview=!1}hideCreate(){this.createView=!1,this.buttonVisible=!0,this.tablePreview=!1}submit(){if(this.validation(),!this.valid)return;if(this.createName&&this.createName.length>64)return this.infoTitle=this.language["Invalid Value"],this.infoBody=`${this.language["Invalid Name - Name should not exceed 64 characters."]}`,void this.openInfoModal(!1);let e=this.createName.trim();this.loading=!0,this.createSubs=this.apiService.AddIP(`${b.N.faAdminCorrelatorURL}assigned/subscriber?org-id=${this.ORG_ID}&ipAddress=${this.newIP}&name=${e}`).subscribe(e=>{this.getTableCount(!0),this.reset(),this.hideCreate()},e=>{this.pageErrorHandle(e)})}validation(){let e=this.subnetVersionsSelected;return this.IPError=!1,this.nameError=!1,"IP-V4"==e&&null!=this.newIpv4&&""!=this.newIpv4?this.ipValidatorIpv4(this.newIpv4):"IP-V6"==e&&null!=this.newIpv6&&""!=this.newIpv6?this.ipValidatorIpv6(this.newIpv6):this.IPError=!0,this.IPError?(this.showInfo(this.language["Invalid Request"],this.language["Please enter a valid IP address"]),void(this.valid=!1)):null==this.createName||""==this.createName.trim()?(this.nameError=!0,this.showInfo(this.language["Invalid Request"],this.language["Name cannot be empty"]),void(this.valid=!1)):void(!this.IPError&&!this.nameError&&(this.valid=!0))}ipValidatorIpv4(e){this.IPError=!1,e&&""!=e&&(this.commonFunctionsService.isValidIpV4Addr(e)?(this.newIP=e,this.IPError=!1):this.IPError=!0)}ipValidatorIpv6(e){this.IPError=!1,e&&""!=e&&(this.commonFunctionsService.isValidIpV6Addr(e)?(this.newIP=e,this.IPError=!1):this.IPError=!0)}reset(){this.createName=void 0,this.newIpv4=void 0,this.newIpv6=void 0,this.subnetVersionsSelected="IP-V4"}edit(e){if(""!=e.assignedName&&e.assignedName){this.editData=e,this.editOnValue=e.id,this.editName=e.name,this.editIPVersionsSelected=this.commonFunctionsService.isValidIpV4Addr(e.ipAddress)?"IP-V4":"IP-V6",this.editIPAddress=e.ipAddress,this.editMapped=e.cmMappedBy;let t=e.ipAddress?e.ipAddress:"";if(-1!==this.deleteIds.indexOf(e.id)){this.deleteIds.splice(this.deleteIds.indexOf(e.id),1),this.endpointIps.splice(this.endpointIps.indexOf(t),1),this.deleteEndpoints=this.deleteEndpoints.filter(function(t){return t.id!==e.id});let i=ue('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=i?(ue("#selectDeselectAll").prop("checked",!1),ue("#selectDeselectAll-span").show()):ue("#selectDeselectAll-span").hide():(ue("#selectDeselectAll").prop("checked",!1),ue("#selectDeselectAll-span").hide())}}}updateSave(e){let t=this.editData,i=this.editIPVersionsSelected;this.editIPAddress=this.editIPAddress.trim();let n=!1;if("IP-V4"==i&&""!=this.editIPAddress&&this.commonFunctionsService.isValidIpV4Addr(this.editIPAddress)||"IP-V6"==i&&""!=this.editIPAddress&&this.commonFunctionsService.isValidIpV6Addr(this.editIPAddress)?t.ipAddress=this.editIPAddress:n=!0,n)return this.showInfo(this.language["Invalid Request"],this.language["Please enter a valid IP address"]),void(this.valid=!1);this.loading=!0,this.updateSubs=this.apiService.updateManagement(this.ORG_ID,t).subscribe(e=>{this.getTableCount(!0),this.reset(),this.hideCreate(),this.editOnValue=void 0},e=>{this.pageErrorHandle(e)})}updateCancel(){this.editOnValue=void 0}subnetVerChoose(){}editSubnetVerChoose(){"SubnetIPV4"==this.editIPVersionsSelected?this.editSubnetv6=void 0:this.editSubnetv4=void 0}cancelMultiDelete(){}gotoSubsDashboard(e){sessionStorage.setItem("management_subscriber_data",JSON.stringify(e)),this.router.navigate(["/subscriber-dashboard"])}showInfo(e,t){this.infoTitle=e,this.infoBody=t,this.openInfoModal(!1)}changeFilter(){this.filterAndSearchFlag="NONE"!==this.filterByDev.value,this.getTableCount(!1)}sortData(e,t,i){let n=[];return 1==t?n=this.commonFunctionsService.sortByColumn(e,i,"name"):2==t?n=this.commonFunctionsService.sortByColumn(e,i,"ipAddress"):3==t?n=this.commonFunctionsService.sortByColumn(e,i,"mappedBy"):4==t&&(n=this.commonFunctionsService.sortByColumnAggregated(e,i,"aggregated")),n}delete(e){let t=e.ipAddress?e.ipAddress:"";this.deleteData=e,e.name=e.name?e.name:"",e.hostName=e.mappedBy?e.mappedBy:"",this.infoTitle=this.language["Delete endpoint"],this.infoBody=`<tr><td>${e.name}</td><td>${t}</td><td>${e.mappedBy}</td></tr>`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDelete(){let e=`${b.N.faAdminCorrelatorURL}/flowendpoint?org-id=${this.ORG_ID}&flowId=${this.deleteData.id}`;this.loading=!0,this.apiService.EndpointDelete(e).subscribe(e=>{this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[],this.getTableCount(!0),this.reset(),this.hideCreate(),this.closeDeleteModal()},e=>{this.pageErrorHandle(e)})}closeDeleteModal(){this.deleteData=void 0,this.closeModal()}getDeleteIds(e,t){let i=t.ipAddress?t.ipAddress:"",n=this.deleteEndpoints;if(e.target.checked){if(-1===this.deleteIds.indexOf(t.id)){this.deleteIds.push(t.id),this.endpointIps.push(i),this.deleteEndpoints.push(t);let e=ue('input[name^="delete_id_"]').length;this.deleteIds.length==e?(ue("#selectDeselectAll").prop("checked",!0),ue("#selectDeselectAll-span").hide()):ue("#selectDeselectAll-span").show()}}else{this.deleteIds.splice(this.deleteIds.indexOf(t.id),1),this.endpointIps.splice(this.endpointIps.indexOf(i),1),n=n.filter(function(e){return e.id!==t.id});let e=ue('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=e?(ue("#selectDeselectAll").prop("checked",!1),ue("#selectDeselectAll-span").show()):ue("#selectDeselectAll-span").hide():(ue("#selectDeselectAll").prop("checked",!1),ue("#selectDeselectAll-span").hide())}this.deleteEndpoints=n}selectDeselectAll(e){this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[];let t=0,i=ue('input[name^="delete_id_"]').length;var n=this;e?ue('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;ue(this).prop("checked",!0);let e=ue(this).attr("class").split(" ")[0].substring("delete_id_".length),s=n.managementData.filter(t=>t.id===e),a=s[0].ipAddress?s[0].ipAddress:"";n.deleteIds.push(e),n.endpointIps.push(a),n.deleteEndpoints.push(s[0]),t++}):ue('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;ue(this).prop("checked",!1),n.deleteIds=[],n.endpointIps=[],n.deleteEndpoints=[],t++})}showAllInnerCheckBox(e){ue("#"+e.target.id).hide(),ue("#selectDeselectAll").prop("checked",!0),this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[],this.selectDeselectAll(!0)}deleteAllSelected(){if(this.endpointIps){this.infoTitle=this.language[1===this.endpointIps.length?"Delete selected endpoint?":"Delete selected endpoints?"];let e="";for(let t=0;t<this.endpointIps.length;t++)this.deleteEndpoints[t].name=this.deleteEndpoints[t].name?this.deleteEndpoints[t].name:"",this.deleteEndpoints[t].mappedBy=this.deleteEndpoints[t].mappedBy?this.deleteEndpoints[t].mappedBy:"",e+=`<tr><td>${this.deleteEndpoints[t].name}<td>${this.endpointIps[t]}<td>${this.deleteEndpoints[t].mappedBy}</td></tr>`;this.infoBody=e,this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal,{backdrop:"static",keyboard:!1})}}confirmDeleteSecleted(){const e=[];let t=`${b.N.faAdminCorrelatorURL}flowendpoint?org-id=${this.ORG_ID}&flowId=`;for(let i=0;i<this.deleteIds.length;i++)e.push(this.apiService.NonAssignedEndpointDelete(`${t}${this.deleteIds[i]}`));this.loading=!0,(0,m.D)(e).subscribe(e=>{this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[],this.getTableCount(!0),this.reset(),this.hideCreate(),this.closeMultiDeleteModal()},e=>{this.pageErrorHandle(e)})}closeMultiDeleteModal(){this.deleteIds=[],this.endpointIps=[],this.closeModal()}tableLanguageOptions(){"fr"==this.language.fileLanguage?(this.dtOptions.language=this.translateService.fr,this.importTableOptions.language=this.frTable):"es"==this.language.fileLanguage?(this.dtOptions.language=this.translateService.es,this.importTableOptions.language=this.translateService.es):"de_DE"==this.language.fileLanguage?(this.dtOptions.language=this.translateService.de_DE,this.importTableOptions.language=this.translateService.de_DE):"en"==this.language.fileLanguage&&this.dtOptions.language&&(delete this.dtOptions.language,delete this.importTableOptions.language)}changeTableStatusLanguage(e){const t=new Intl.NumberFormat;this.tableCounts={searchText:e.oPreviousSearch.sSearch.trim(),total:e._iRecordsTotal,displayCount:e._iDisplayLength,displayed:e._iRecordsDisplay,start:e._iDisplayStart};const i="fr"==sessionStorage.getItem("defaultLanguage"),n=e.oPreviousSearch.sSearch.trim()?i?`(filtr\xe9es \xe0 partir des ${t.format(e._iRecordsTotal)} entr\xe9es totales)`:`(filtered from ${t.format(e._iRecordsTotal)} total entries)`:"",s=0==e._iRecordsDisplay?-1:e._iDisplayStart,a=e._iDisplayStart+e._iDisplayLength>e._iRecordsDisplay?e._iRecordsDisplay:e._iDisplayStart+e._iDisplayLength;ue('div [role="status"]').text(i?`Affichage de ${t.format(s+1)} \xe0 ${t.format(a)} des ${t.format(e._iRecordsDisplay)} entr\xe9es ${n}`:`Showing ${t.format(s+1)} to ${t.format(a)} of ${t.format(e._iRecordsDisplay)} entries ${n}`),ue(".dataTables_filter label")[0].childNodes[0].nodeValue=i?"Chercher:":"Search:",ue(".dataTables_length label")[0].childNodes[0].nodeValue=i?"Afficher les ":"Show ",ue(".dataTables_length label")[0].childNodes[2].nodeValue=i?" entr\xe9es":" entries",ue(".first").text(i?"Le d\xe9but":"First"),ue(".previous").text(i?"Pr\xe9c\xe9dent":"Previous"),ue(".next").text(i?"Suivant":"Next"),ue(".last").text(i?"Derni\xe8re":"Last"),ue(".dataTables_empty").text(i?"Pas de donn\xe9es disponibles dans la table":"No data available in table")}resetDelete(){this.selectDeselectAll(!1),ue("#selectDeselectAll").prop("checked",!1),ue("#selectDeselectAll-span").hide(),this.deleteIds=[],this.endpointIps=[],this.deleteEndpoints=[]}setFilterOptions(){this.filtersDev=[{label:this.language.ALL,value:"NONE"},{label:this.language.ASSIGNED,value:"ASSIGNED"},{label:this.language.DHCP,value:"DHCP"},{label:this.language.CC,value:"CC"},{label:this.language.CUSTOM,value:"CUSTOM"},{label:this.language.RADIUS,value:"RADIUS"},{label:this.language.CMS,value:"CMS"},{label:this.language.SMx,value:"SMx"}],this.filterByDev={label:this.language[this.filterByDev.label],value:this.filterByDev.value}}export(){let e=this.commonFunctionsService.generateExportName("endpoint_export_file",!0);this.exportSubs=this.apiService.Export(this.ORG_ID).subscribe(t=>{this.exportData=this.exportDataConvertor(t),this.exportExcel.downLoadCSV(e,this.exportData&&this.exportData.length?this.exportData:[this.empty])},e=>{this.pageErrorHandle(e)})}exportPdf(){}exportDataConvertor(e){return Array.isArray(e)&&(0===e.length&&e.push({ipAddress:"",name:""}),e.forEach(e=>{for(const t in e)"boolean"==typeof e[t]&&(e[t]=1==e[t]?"Yes":"No");delete(e=this.commonFunctionsService.columnNameFromKeys(e,this.exportColoumnNames)).id,delete e.result})),e}cancelImport(){}fullImportUpload(){this.infoTitle=this.language.fullImport,this.infoBody=this.language.fullImportPrompt,this.closeModal(),this.modalRef=this.dialogService.open(this.importModal,{backdrop:"static",keyboard:!1})}proceedImport(){this.closeModal(),ue("#fullImportUpload").click()}fullImport(e,t){this.importData=[],this.importDeleteData=[],this.importTableData=[],this.isFullImport=t,this.dataTablecreatorService.getJsonFromCsv(e),this.importFullInput.nativeElement.value="",this.importInput.nativeElement.value=""}compareJsonToTableData(e){let t=this.assignedData.length?this.assignedData:[];sessionStorage.getItem("importType"),this.importDeleteData=[];let i=[],n=!1;if(e.forEach(e=>{if(!e.name&&!e.ipAddress)return;let s="Create";n=!1,t.filter(t=>e.name&&t.name&&t.name==e.name).length&&(n=!0,s=this.isFullImport?"Create":"Update"),i.push({action:s,ipAddress:e.ipAddress,name:e.name})}),!i.length)return this.cancel(),this.infoTitle=this.language.noAvailableChange,this.infoBody="",void this.openInfoModal(!1);if(this.isFullImport){let e=[];const n=i.map(e=>e.name);t.forEach(t=>{n.includes(t.name)||e.push({action:"Delete",ipAddress:t.ipAddress,name:t.name})}),this.importDeleteData=e}this.importSubmit(!0,i)}importSubmit(e=!1,t){let i={clientIP:this.storageData.clientIp,dry_run:e,full_import:this.isFullImport,import_data:[],orgId:this.ORG_ID,userId:this.sso.getUserId()},n=e?t:[];if(e||this.importTableData.forEach(e=>{e.result&&"ok"==e.result.toLowerCase()&&n.push({action:this.isFullImport?"Create":e.action,ipAddress:e.ipAddress,name:e.name})}),!n.length)return this.cancel(),this.infoTitle=this.language.noAvailableChange,this.infoBody="",void this.openInfoModal(!1);i.import_data=n,this.impAssignedSubs=this.apiService.importAssigned(i,this.ORG_ID).subscribe(t=>{e?(t&&t.data&&0==t.data.length&&(this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1)),this.importData=t||[],this.checkDryRunData(t)):(this.getTableCount(!0),this.hideCreate())},e=>{this.loading=!1,this.enableImportSubmit=!1,this.closeImport(),this.pageErrorHandle(e)})}checkDryRunData(e){e&&e.length&&(this.enableImportSubmit=!0);let t=this.assignedData.length?this.assignedData:[];e.forEach(e=>{e.result&&"ok"==e.result.toLowerCase()?this.enableImportSubmit=!0:e.action=e.result,e.ipAddress_old="";let i=t.filter(t=>t.name==e.name);i.length&&(this.isFullImport&&"Create"==e.action&&(e.action="Update"),e.ipAddress_old=i[0].ipAddress?i[0].ipAddress:""),this.importTableData.push(e)}),this.isFullImport&&this.importDeleteData.length&&this.importDeleteData.forEach(e=>{e.ipAddress_old="",this.importTableData.push(e)}),this.createView=!1,this.buttonVisible=!1,this.tablePreview=!0}cancel(){this.createView=!1,this.buttonVisible=!0,this.tablePreview=!1,this.reset()}closeImport(){this.cancel(),this.isFullImport=!1,this.enableImportSubmit=!1,this.importTableData=[],this.importData=[],this.importDeleteData=[],this.commonOrgService.closeAlert()}getAssignedData(){this.apiService.getAssignedCount(this.ORG_ID).subscribe(e=>{this.assignedDataCount=e,e?this.getAssigned():this.assignedData=[]})}getAssigned(){const e=[];let t=1;this.assignedDataCount>1e3&&(t=Math.ceil(this.assignedDataCount/1e3));for(let i=0;i<t;i++)e.push(this.apiService.getAssigned(this.ORG_ID,i));(0,m.D)(e).subscribe(e=>{e.forEach(e=>{this.assignedData=[...this.assignedData,...e]})},e=>{this.pageErrorHandle(e)})}closeModal(e=!1){this.modalRef&&this.modalRef.close(),e&&this.aggregatedGroupsSubs&&this.aggregatedGroupsSubs.unsubscribe()}pageErrorHandle(e,t){var i,n;let s="";400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle="Error",this.openInfoModal(!1),this.loading=!1):(s=401==e.status?this.language["Access Denied"]:500==e.status?"Internal Server Error":417==e.status&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.error)?null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.error:this.commonOrgService.pageErrorHandle(e),t&&"agg-groups"===t?(this.aggErrorInfo=s,this.aggError=!0):(this.infoBody=s,this.infoTitle="Error",this.openInfoModal(!1)),this.loading=!1)}openInfoModal(e){e||(this.invalidImportEndPoint=[]),this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}getMappedData(){this.managementData&&this.managementData.length?this.managementData.forEach(e=>{this.mappedData[e.id]||(this.mappedData[e.id]=e.mappedBy?e.mappedBy.toUpperCase():"")}):this.mappedData={}}removeState(){this.commonOrgService.removeTableState("management",this.router.url)}isAggregatedGroupAvail(e){return this.commonFunctionsService.isAggregatedGroupAvail(e)}openAggregatedGroupsModal(e){this.aggregatedGroups=[],this.infoTitle="Aggregated Groups",this.closeModal(),this.aggreDataAvail=!1,this.modalRef=this.dialogService.open(this.aggGroupsModal,{centered:!0,backdrop:"static",keyboard:!1,windowClass:"custom-modal"}),this.getAggregatedGroups(e)}getAggregatedGroups(e){this.aggregatedGroupsLoading=!0,this.aggError=!1,this.aggregatedGroupsSubs=this.apiService.getAggregatedGroups(this.ORG_ID,e.aggGroup).subscribe(e=>{this.aggregatedGroups=e&&e.length?e:[],this.aggreDataAvail=!0,this.aggregatedGroupsLoading=!1},e=>{404==e.status||400==e.status?(this.aggregatedGroups=[],this.aggreDataAvail=!0,this.aggregatedGroupsLoading=!1):(this.aggregatedGroupsLoading=!1,this.aggreDataAvail=!0,this.pageErrorHandle(e,"agg-groups"))})}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(f.i),l.Y36(a.F0),l.Y36(Z.U),l.Y36(_.eN),l.Y36(x.O),l.Y36(A.L),l.Y36(r.t6),l.Y36(v.FF),l.Y36(T.v),l.Y36(C.s),l.Y36(I.Dx),l.Y36(D.i))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-management"]],viewQuery:function(e,t){if(1&e&&(l.Gf(y,7),l.Gf(O,7),l.Gf(M,7),l.Gf(w,7),l.Gf(q,5),l.Gf(R,5),l.Gf(N,7),l.Gf(h.G,5)),2&e){let e;l.iGM(e=l.CRH())&&(t.infoModal=e.first),l.iGM(e=l.CRH())&&(t.deleteModal=e.first),l.iGM(e=l.CRH())&&(t.multiDeleteModal=e.first),l.iGM(e=l.CRH())&&(t.importModal=e.first),l.iGM(e=l.CRH())&&(t.importFullInput=e.first),l.iGM(e=l.CRH())&&(t.importInput=e.first),l.iGM(e=l.CRH())&&(t.aggGroupsModal=e.first),l.iGM(e=l.CRH())&&(t.dtElement=e.first)}},decls:23,vars:13,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","row py-4",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-end","my-2"],[1,"col-md-12","pr-0"],[1,"ccl-form","d-flex","text-right","justify-content-end"],[1,"col-form-label","mr-4"],["placeholder","",1,"ng-select-mapped",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],[1,"row"],["class","col-md-12 ccl-admin-table",4,"ngIf"],["infoModal",""],["deleteModal",""],["multiDeleteModal",""],["importModal",""],["aggGroupsModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row","py-4"],[1,"col-md-9"],[1,"d-flex"],["id","create-btn",1,"btn-default","primary","mx-2",3,"click"],["id","export-btn",1,"btn-default","primary","px-2","mx-2",3,"click"],[1,"upload-btn-wrapper"],[1,"btn-default","primary","mx-2","px-2",3,"click"],["type","file","accept",".csv","id","fullImportUpload",2,"display","none",3,"change"],["importFullInput",""],["for","inc-import",1,"btn-default","primary","mx-2","cursor-pointer"],["type","file","id","inc-import","accept",".csv",2,"display","none",3,"change"],["importInput",""],[1,"col-sm-3","align-self-end","d-none"],[1,"ccl-form"],["type","search","name","searchbox","placeholder","",1,"input-sm"],[1,"serach-but","btn-default","primary","btn-icon-md","inline"],["aria-hidden","true",1,"fa","fa-search"],[1,"row","my-3","py-3"],[1,"col-md-12"],[1,"row","form-inline"],[1,"form-group","mb-2","col-md-2","align-self-start"],["for","staticEmail2",1,""],[1,"error"],[1,"ccl-form","mx-sm-3","mb-2","align-self-end"],["placeholder","",1,"ng-select-250",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["for","inputPassword2",1,"sr-only"],["type","text","name","newSubnetV4","placeholder","","trimSpace","",1,"w-250px",3,"ngModel","disabled","ngModelChange","blur"],["type","text","name","newSubnetV6","placeholder","","trimSpace","",1,"w-250px",3,"ngModel","disabled","ngModelChange","blur"],["type","text","id","createName","placeholder","","name","createName","trimSpace","",1,"w-250px",3,"ngModel","ngModelChange","blur"],[1,"row","form-inline","my-3"],[1,"form-group","mb-2","col-md-2"],["for","staticEmail2",1,"sr-only"],["type","submit","id","submit-btn",1,"btn-default","btn-primary","mx-4",3,"click"],["type","submit","id","cancel-btn",1,"btn-default","btn-dft","py-1","ml-2",3,"click"],["class","row",4,"ngIf"],[1,"row","my-4"],[1,"col-md-8","offset-md-4"],[1,"btn-default","primary","px-3","mx-3",3,"disabled","click"],[1,"btn-default","btn-dft","py-1","px-3",3,"click"],[1,"col-md-12","ccl-admin-table"],["id","example","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["id","management-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[1,"th-action"],[1,"ccl-fc-table-icon"],[1,"d-flex","align-items-center",3,"hidden"],["type","checkbox","value","","id","selectDeselectAll",1,"",3,"hidden","disabled","change"],["id","selectDeselectAll-span",1,"checkbox-ui",2,"display","none",3,"hidden","click"],[1,"text-center","justify-content-center",3,"hidden"],["id","delete-selected-btn",1,"btn-default","primary","px-2","mx-2",3,"disabled","click"],[1,"far","fa-trash-alt"],[1,"w-250px"],[1,"min-w-160px"],[1,"w-200px"],["class","editable-td text-center",4,"ngIf"],["class","save-cancel-btn-group d-flex justify-content-center",4,"ngIf"],["class","ccl-form",4,"ngIf"],["class","ccl-form subnet-select-div",4,"ngIf"],["class","remove",4,"ngIf"],[1,"editable-td","text-center"],[1,"pr-2"],["id","edit-btn",1,"primary",3,"ngClass","title","click"],[1,"fas","fa-pencil-alt"],["type","checkbox",3,"value","name","title","click"],["id","delete-btn",1,"primary",3,"title","click"],[1,"save-cancel-btn-group","d-flex","justify-content-center"],[1,"pr-1"],["id","save-btn",1,"primary","mx-3",3,"click"],[1,"fas","fa-check"],["id","cancel-btn",1,"primary",3,"click"],[1,"fas","fa-times"],["type","text","name","editName",3,"ngModel","ngModelOptions","ngModelChange"],[1,"ccl-form","subnet-select-div"],["placeholder","","appendTo","body",1,"select-custom-top","text-left",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange"],["type","text","trimSpacetrimSpace","",1,"subnet-edit-input",3,"ngModel","ngModelOptions","ngModelChange","blur"],[1,"remove"],[1,"btn-default","btn-dft","cursor-pointer",3,"click"],["colspan","5",1,"no-data-available"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"f-size-16px"],[1,"w-100"],["class","list-two",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[1,"list-two"],["class","text-break",4,"ngFor","ngForOf"],[1,"text-break"],[1,"modal-body"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"],[4,"ngFor","ngForOf"],[3,"innerHtml"],[1,"modal-body","loader-wrapper"],["class","loader-wrapper-info",4,"ngIf"],["class","py-3 alert alert-danger",4,"ngIf"],["datatable","","width","100%","class","row-border hover table-alter",3,"dtOptions",4,"ngIf"],[1,"loader-wrapper-info"],["role","status",1,"spinner-border","text-primary"],[1,"py-3","alert","alert-danger"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],["type","button","id","close-error-btn","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],[1,"d-inline-flex",3,"innerHtml"],["datatable","","width","100%",1,"row-border","hover","table-alter",3,"dtOptions"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.YNc(1,k,5,1,"div",1),l.YNc(2,E,24,4,"div",2),l.YNc(3,U,42,18,"section",3),l.YNc(4,H,8,4,"section",3),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"label",7),l._uU(9),l.qZA(),l.TgZ(10,"ng-select",8),l.NdJ("ngModelChange",function(e){return t.filterByDev=e})("change",function(){return t.changeFilter()}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",9),l.YNc(12,W,24,14,"div",10),l.qZA(),l.qZA(),l.YNc(13,te,15,5,"ng-template",null,11,l.W1O),l.YNc(15,ie,20,6,"ng-template",null,12,l.W1O),l.YNc(17,se,13,4,"ng-template",null,13,l.W1O),l.YNc(19,ae,12,4,"ng-template",null,14,l.W1O),l.YNc(21,ce,12,5,"ng-template",null,15,l.W1O)),2&e&&(l.xp6(1),l.Q6J("ngIf",t.loading||t.allDataLoading||t.filterLoading),l.xp6(1),l.Q6J("ngIf",t.buttonVisible),l.xp6(1),l.Q6J("ngIf",t.createView),l.xp6(1),l.Q6J("ngIf",t.tablePreview),l.xp6(5),l.Oqu(t.language["Mapped By"]),l.xp6(1),l.Q6J("items",t.filtersDev)("multiple",!1)("ngModel",t.filterByDev)("ngModelOptions",l.DdM(12,P))("clearable",!1)("searchable",!1),l.xp6(2),l.Q6J("ngIf",t.showTable))},directives:[n.O5,S.w9,s.JJ,s.On,s._Y,s.JL,s.F,s.Fj,h.G,n.sg,n.mk],styles:[".subnet-select-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.subnet-select-div[_ngcontent-%COMP%]   ng-select[_ngcontent-%COMP%]{width:50%}.subnet-select-div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.modal-scrll[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.table-alter[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-break:break-all}.no-data-available[_ngcontent-%COMP%]{text-align:center}.ccl-fc-table-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .fa-pencil-alt[_ngcontent-%COMP%]{color:#8c8c8c!important;cursor:not-allowed}.ng-select-250[_ngcontent-%COMP%]{text-align:left;width:250px}.w-250px[_ngcontent-%COMP%]{width:250px}.w-200px[_ngcontent-%COMP%]{width:200px}.ng-select-mapped[_ngcontent-%COMP%]{text-align:left;min-width:30%}.th-action[_ngcontent-%COMP%]{white-space:nowrap;max-width:200px!important}.min-w-160px[_ngcontent-%COMP%]{min-width:160px}.editable-td[_ngcontent-%COMP%]{font-size:13px}.upload-btn-wrapper[_ngcontent-%COMP%]{overflow:inherit!important}.list-two[_ngcontent-%COMP%]{list-style-type:disc;margin-left:30px}"]}),e})();var he=i(61020),pe=i(23815);let me=(()=>{class e{constructor(e){this.http=e}getList(e){return this.http.get(`${b.N.FA_API_BASE_URL}config/organization?org-id=${e}`)}save(e,t){return this.http.post(`${b.N.FA_API_BASE_URL}config/organization?org-id=${t}`,e)}update(e,t){return this.http.put(`${b.N.FA_API_BASE_URL}config/organization?org-id=${t}`,e)}delete(e){return this.http.delete(`${b.N.FA_API_BASE_URL}config/organization?org-id=${e}`)}patchUpdate(e,t){return this.http.patch(`${b.N.FA_API_BASE_URL}config/organization?org-id=${t}`,e)}createOrg(e,t){return this.http.post(`${b.N.FA_API_BASE_URL}config/organization?org-id=${e}`,t)}getDHCPKeyConfiguration(e){return this.http.get(`${b.N.FA_API_BASE_URL}config/dhcpkey?org-id=${e}`)}addDHCPKeyConfiguration(e,t){return this.http.post(`${b.N.FA_API_BASE_URL}config/dhcpkey?org-id=${e}`,t)}updateDHCPKeyConfiguration(e,t){return this.http.put(`${b.N.FA_API_BASE_URL}config/dhcpkey?org-id=${e}`,t)}deleteDHCPKeyConfiguration(e){return this.http.delete(`${b.N.FA_API_BASE_URL}config/dhcpkey?org-id=${e}`)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(_.eN))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const be=["infoModal"],fe=["aggregWarningModal"];function Ze(e,t){1&e&&(l.TgZ(0,"div",6),l.TgZ(1,"div",7),l.TgZ(2,"div",8),l.TgZ(3,"div",9),l._UZ(4,"span",10),l.qZA(),l.qZA(),l.qZA(),l.qZA())}function _e(e,t){if(1&e&&(l.ynx(0),l.TgZ(1,"li",25),l._uU(2),l.qZA(),l.BQk()),2&e){const e=t.$implicit;l.xp6(2),l.hij(" ",e||""," ")}}function xe(e,t){if(1&e&&(l.TgZ(0,"ul",26),l.TgZ(1,"li",27),l.TgZ(2,"span",28),l._UZ(3,"i",29),l._uU(4),l.qZA(),l._uU(5),l.qZA(),l.qZA()),2&e){const e=l.oxw().$implicit,t=l.oxw(3);l.xp6(4),l.hij(" ",t.language.aggregationRule,": "),l.xp6(1),l.hij(" ",t.aggregationRuleNames(e.name)?t.aggregationRuleNames(e.name):""," ")}}function Ae(e,t){if(1&e&&(l.TgZ(0,"ul",26),l.TgZ(1,"li",27),l.TgZ(2,"span",28),l._UZ(3,"i",29),l._uU(4),l.qZA(),l._uU(5),l.qZA(),l.qZA()),2&e){const e=l.oxw(4);l.xp6(4),l.hij(" ","Unique key",": "),l.xp6(1),l.hij(" ",e.checkKeyConfigStatus(!0)?e.checkKeyConfigStatus(!0):""," ")}}function ve(e,t){if(1&e&&(l.TgZ(0,"div",18),l.TgZ(1,"a",19),l._UZ(2,"i",20),l._uU(3),l.qZA(),l.TgZ(4,"div",21),l.TgZ(5,"ul",22),l.YNc(6,_e,3,1,"ng-container",23),l.qZA(),l.YNc(7,xe,6,2,"ul",24),l.YNc(8,Ae,6,2,"ul",24),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=l.oxw(3);l.xp6(1),l.MGl("href","#collapse",e.name,"",l.LSH),l.xp6(2),l.hij(" ",i.language[i.getTitle(e.name)]," "),l.xp6(1),l.MGl("id","collapse",e.name,""),l.xp6(2),l.Q6J("ngForOf",e.data),l.xp6(1),l.Q6J("ngIf",i.aggregationMatchRules[e.name]&&i.aggregationMatchRules[e.name].length),l.xp6(1),l.Q6J("ngIf","DHCP"==e.name&&i.checkKeyConfigStatus())}}function Te(e,t){if(1&e&&(l.TgZ(0,"div",16),l.YNc(1,ve,9,6,"div",17),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.selectList)("ngForTrackBy",e.trackItem)}}function Ce(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",11),l.TgZ(1,"div",12),l.TgZ(2,"button",13),l.NdJ("click",function(){return l.CHM(e),l.oxw().doEdit()}),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"div",14),l.YNc(5,Te,2,2,"div",15),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(3),l.hij(" ",e.language.edit," "),l.xp6(2),l.Q6J("ngIf",e.selectList)}}function Ie(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"i",46),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(2).deleteMapping(t)}),l._uU(1,"\xa0\xa0 "),l.qZA()}}function De(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"i",47),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw(2).getCurrentRule(t.key)}),l._uU(1,"\xa0\xa0 "),l.qZA()}}function Se(e,t){if(1&e&&(l.TgZ(0,"div",41),l.TgZ(1,"p",42),l._UZ(2,"i",20),l._uU(3),l.YNc(4,Ie,2,0,"i",43),l.YNc(5,De,2,0,"i",44),l.TgZ(6,"i",45),l._uU(7,"\xa0\xa0 "),l.qZA(),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=l.oxw(2);l.xp6(3),l.hij(" ",i.language[i.getTitle(e.name)]," "),l.xp6(1),l.Q6J("ngIf",!i.showTab),l.xp6(1),l.Q6J("ngIf",!i.showTab),l.xp6(1),l.MGl("id","sxa-color-gold-",e.key,"")}}function ye(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",48),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).addItemTolist(t)}),l.TgZ(1,"i",20),l._uU(2,"\xa0\xa0 "),l.qZA(),l._uU(3),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(2);l.xp6(3),l.hij("",i.language[i.getTitle(e.name)]," ")}}function Oe(e,t){if(1&e&&(l.TgZ(0,"li",54),l.TgZ(1,"a",71),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(3);l.xp6(2),l.Oqu(e.language.Subscriber_Match_Rule)}}function Me(e,t){1&e&&(l.TgZ(0,"li",54),l.TgZ(1,"a",72),l._uU(2,"Key Configuration"),l.qZA(),l.qZA())}function we(e,t){if(1&e&&(l.TgZ(0,"li",54),l.TgZ(1,"a",73),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(3);l.xp6(2),l.Oqu(e.language.aggregationRule)}}function qe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",87),l._UZ(1,"i",88),l._uU(2),l.TgZ(3,"i",89),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw(2).index;return l.oxw(4).deleteAttr(t,i)}),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(6);l.xp6(2),l.Oqu(i.language[i.getTitle(e)]),l.xp6(1),l.MGl("id","attr_delete",e,"")}}function Re(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ul",85),l.NdJ("cdkDropListDropped",function(t){l.CHM(e);const i=l.oxw().index;return l.oxw(4).dropFiledToCurrentRuleData(t,i)}),l.YNc(1,qe,4,2,"li",86),l.qZA()}if(2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",e.attrs)}}const Ne=function(){return{standalone:!0}};function ke(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"form",90),l.TgZ(1,"div",91),l.TgZ(2,"label",92),l._uU(3),l.qZA(),l.TgZ(4,"div",39),l.TgZ(5,"ng-select",93),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().$implicit.delimiter=t})("change",function(t){l.CHM(e);const i=l.oxw().index;return l.oxw(4).changeDelimiter(t,i)}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw().$implicit,t=l.oxw(4);l.xp6(3),l.Oqu(t.language.delimiter),l.xp6(2),l.Q6J("items",t.delimiters)("multiple",!1)("ngModel",e.delimiter)("ngModelOptions",l.DdM(7,Ne))("clearable",!1)("searchable",!0)}}function Ee(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",94),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw().index,n=l.oxw(4);return n.addItemToMappingRule(n.ruleName,i,t)}),l.TgZ(1,"i",20),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(5);l.xp6(2),l.hij("\xa0\xa0 ",i.language[i.getTitle(e)],"")}}const Pe=function(e){return{disabled:e}};function Ue(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",76),l._UZ(1,"i",77),l._uU(2),l.TgZ(3,"i",78),l.NdJ("click",function(){const t=l.CHM(e).index,i=l.oxw(4);return i.deleteRule(i.currentRuleData.name,t)}),l.qZA(),l.YNc(4,Re,2,1,"ul",79),l.YNc(5,ke,6,8,"form",80),l.TgZ(6,"div",81),l._UZ(7,"i",82),l._uU(8),l.qZA(),l.TgZ(9,"ul",83),l.YNc(10,Ee,3,1,"li",84),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=l.oxw(4);l.xp6(2),l.AsE("",n.language[n.getTitle(n.currentRuleData.name)]," ",n.language.mappingRule,""),l.xp6(2),l.Q6J("ngIf",e.attrs),l.xp6(1),l.Q6J("ngIf",n.checkFieldsLength(n.ruleName,i)),l.xp6(1),l.Q6J("ngClass",l.VKq(7,Pe,!n.mappingRuleFieldsLength)),l.xp6(2),l.hij("",n.language.addField," "),l.xp6(2),l.Q6J("ngForOf",n.mappingRuleFields)}}function Fe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ul",74),l.NdJ("cdkDropListDropped",function(t){return l.CHM(e),l.oxw(3).dropCurrentRuleData(t)}),l.YNc(1,Ue,11,9,"li",75),l.qZA()}if(2&e){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.currentRuleData.rules)}}function Je(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",95),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw(3);return i.addRule(i.ruleName,t)}),l.TgZ(1,"i",20),l._uU(2,"\xa0\xa0 "),l.qZA(),l._uU(3),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(3);l.xp6(3),l.hij("",i.language[i.getTitle(e)]," ")}}function He(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",87),l._UZ(1,"i",88),l._uU(2),l.TgZ(3,"i",89),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw(2).index;return l.oxw(4).deleteSbscbrAttr(t,i)}),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(6);l.xp6(2),l.Oqu(i.language[i.getTitle(e)]),l.xp6(1),l.MGl("id","attr_delete",e,"")}}function Le(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ul",85),l.NdJ("cdkDropListDropped",function(t){l.CHM(e);const i=l.oxw().index;return l.oxw(4).dropFiledToCurrentRuleData(t,i)}),l.YNc(1,He,4,2,"li",86),l.qZA()}if(2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",e.attrs)}}function je(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",94),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw().index,n=l.oxw(4);return n.addItemToSbscbrMappingRule(n.ruleName,i,t)}),l.TgZ(1,"i",20),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(5);l.xp6(2),l.hij("\xa0\xa0 ",i.language[i.getTitle(e)],"")}}function $e(e,t){if(1&e&&(l.TgZ(0,"li",76),l._UZ(1,"i",77),l._uU(2),l.YNc(3,Le,2,1,"ul",79),l.TgZ(4,"div",96),l._UZ(5,"i",82),l._uU(6),l.qZA(),l.TgZ(7,"ul",83),l.YNc(8,je,3,1,"li",84),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=l.oxw(4);l.xp6(2),l.hij("",i.language[i.getTitle(i.sbscbrCurrentRuleData.name)]," Subscriber Rule "),l.xp6(1),l.Q6J("ngIf",e.attrs),l.xp6(1),l.Q6J("ngClass",l.VKq(5,Pe,!i.sbscbrRuleFieldsLength)),l.xp6(2),l.hij("",i.language.addField," "),l.xp6(2),l.Q6J("ngForOf",i.sbscbrRuleFields)}}function Ve(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ul",74),l.NdJ("cdkDropListDropped",function(t){return l.CHM(e),l.oxw(3).dropCurrentRuleData(t)}),l.YNc(1,$e,9,7,"li",75),l.qZA()}if(2&e){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.sbscbrCurrentRuleData.rules)}}function Be(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",97),l.TgZ(1,"ul"),l.TgZ(2,"li"),l.TgZ(3,"h4"),l._uU(4,"Unique Key Configuration"),l.qZA(),l.qZA(),l.TgZ(5,"li"),l.TgZ(6,"div",98),l.TgZ(7,"div",99),l.TgZ(8,"input",100),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(3).keyConfigEditObj.macAddress=t})("change",function(){return l.CHM(e),l.oxw(3).changeKeyConfig()}),l.qZA(),l.TgZ(9,"label",101),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",98),l.TgZ(12,"div",99),l.TgZ(13,"input",102),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(3).keyConfigEditObj.remoteId=t})("change",function(){return l.CHM(e),l.oxw(3).changeKeyConfig()}),l.qZA(),l.TgZ(14,"label",103),l._uU(15),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"div",98),l.TgZ(17,"div",99),l.TgZ(18,"input",104),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(3).keyConfigEditObj.circuitId=t})("change",function(){return l.CHM(e),l.oxw(3).changeKeyConfig()}),l.qZA(),l.TgZ(19,"label",105),l._uU(20),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"div",98),l.TgZ(22,"div",99),l.TgZ(23,"input",106),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(3).keyConfigEditObj.subscriberId=t})("change",function(){return l.CHM(e),l.oxw(3).changeKeyConfig()}),l.qZA(),l.TgZ(24,"label",107),l._uU(25),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"div",98),l.TgZ(27,"div",99),l.TgZ(28,"input",108),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(3).keyConfigEditObj.clientHostName=t})("change",function(){return l.CHM(e),l.oxw(3).changeKeyConfig()}),l.qZA(),l.TgZ(29,"label",109),l._uU(30),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(3);l.xp6(8),l.Q6J("ngModel",e.keyConfigEditObj.macAddress),l.xp6(2),l.hij(" ",e.language[e.getTitle("macAddress")]," "),l.xp6(3),l.Q6J("ngModel",e.keyConfigEditObj.remoteId),l.xp6(2),l.hij(" ",e.language[e.getTitle("dhcpRemoteId")]," "),l.xp6(3),l.Q6J("ngModel",e.keyConfigEditObj.circuitId),l.xp6(2),l.hij(" ",e.language[e.getTitle("dhcpCircuitId")]," "),l.xp6(3),l.Q6J("ngModel",e.keyConfigEditObj.subscriberId),l.xp6(2),l.hij(" ",e.language[e.getTitle("dhcpSubscriberId")]," "),l.xp6(3),l.Q6J("ngModel",e.keyConfigEditObj.clientHostName),l.xp6(2),l.hij(" ",e.language[e.getTitle("dhcpClientHostName")]," ")}}function Ye(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",87),l._UZ(1,"i",88),l._uU(2),l.TgZ(3,"i",89),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw(2).index;return l.oxw(4).deleteAggregationAttr(t,i)}),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(6);l.xp6(2),l.Oqu(i.language[i.getTitle(e)]),l.xp6(1),l.MGl("id","attr_delete",e,"")}}function Qe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ul",85),l.NdJ("cdkDropListDropped",function(t){l.CHM(e);const i=l.oxw().index;return l.oxw(4).dropFieledToCurrentAggreRuleData(t,i)}),l.YNc(1,Ye,4,2,"li",86),l.qZA()}if(2&e){const e=l.oxw().$implicit;l.xp6(1),l.Q6J("ngForOf",e.attrs)}}function Ge(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"form",90),l.TgZ(1,"div",91),l.TgZ(2,"label",92),l._uU(3),l.qZA(),l.TgZ(4,"div",39),l.TgZ(5,"ng-select",93),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(5).aggregationdelimiterSelected=t})("change",function(){l.CHM(e);const t=l.oxw(5);return t.changeAggregationDelimiter(t.ruleName)}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(5);l.xp6(3),l.Oqu(e.language.delimiter),l.xp6(2),l.Q6J("items",e.delimiters)("multiple",!1)("ngModel",e.aggregationdelimiterSelected)("ngModelOptions",l.DdM(7,Ne))("clearable",!1)("searchable",!0)}}function ze(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",94),l.NdJ("click",function(){const t=l.CHM(e).$implicit,i=l.oxw().index,n=l.oxw(4);return n.addItemToAggregationMappingRule(n.ruleName,i,t)}),l.TgZ(1,"i",20),l._uU(2),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw(5);l.xp6(2),l.hij("\xa0\xa0 ",i.language[i.getTitle(e)],"")}}function Ke(e,t){if(1&e&&(l.TgZ(0,"li",112),l._UZ(1,"i",77),l._uU(2),l.YNc(3,Qe,2,1,"ul",79),l.YNc(4,Ge,6,8,"form",80),l.TgZ(5,"div",96),l._UZ(6,"i",82),l._uU(7),l.qZA(),l.TgZ(8,"ul",83),l.YNc(9,ze,3,1,"li",84),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=t.index,n=l.oxw(4);l.xp6(2),l.hij("",n.language[n.getTitle(n.aggregationCurrentRuleData.name)]," Aggregation Rule "),l.xp6(1),l.Q6J("ngIf",e.attrs),l.xp6(1),l.Q6J("ngIf",n.checkAggreFieldsLength(n.ruleName,i)),l.xp6(1),l.Q6J("ngClass",l.VKq(6,Pe,!n.aggregationRuleFieldsLength)),l.xp6(2),l.hij("",n.language.addField," "),l.xp6(2),l.Q6J("ngForOf",n.aggregationRuleFields)}}function We(e,t){if(1&e&&(l.TgZ(0,"ul",110),l.YNc(1,Ke,10,8,"li",111),l.qZA()),2&e){const e=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",e.aggregationCurrentRuleData.rules)}}function Xe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",49),l.TgZ(1,"div",50),l.TgZ(2,"div",51),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).closeTab()}),l._UZ(3,"i",52),l.qZA(),l.TgZ(4,"ul",53),l.TgZ(5,"li",54),l.TgZ(6,"a",55),l._uU(7),l.qZA(),l.qZA(),l.YNc(8,Oe,3,1,"li",56),l.YNc(9,Me,3,0,"li",56),l.YNc(10,we,3,1,"li",56),l.qZA(),l.TgZ(11,"div",57),l.TgZ(12,"div",58),l.YNc(13,Fe,2,1,"ul",59),l.TgZ(14,"div"),l.TgZ(15,"div",60),l._UZ(16,"i",61),l._uU(17),l.qZA(),l.TgZ(18,"ul",62),l.YNc(19,Je,4,1,"li",63),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",64),l.YNc(21,Ve,2,1,"ul",59),l.qZA(),l.YNc(22,Be,31,10,"div",65),l.TgZ(23,"div",66),l.YNc(24,We,2,1,"ul",67),l.qZA(),l.TgZ(25,"div",68),l.TgZ(26,"button",69),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).applyAggregationRuleModalOpen()}),l._uU(27),l.qZA(),l.TgZ(28,"button",70),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).cancelAggregationRuleApply()}),l._uU(29),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(7),l.Oqu(e.language.mappingRule),l.xp6(1),l.Q6J("ngIf",e.showSubsRule),l.xp6(1),l.Q6J("ngIf",e.showKeyConfig),l.xp6(1),l.Q6J("ngIf",e.showAggregation),l.xp6(3),l.Q6J("ngIf",e.currentRuleData),l.xp6(2),l.Q6J("ngClass",l.VKq(13,Pe,!e.mappingRuleFieldsLength)),l.xp6(2),l.hij(" ",e.language.addRule," "),l.xp6(2),l.Q6J("ngForOf",e.mappingRuleFields),l.xp6(2),l.Q6J("ngIf",e.sbscbrCurrentRuleData),l.xp6(1),l.Q6J("ngIf",e.showKeyConfig),l.xp6(2),l.Q6J("ngIf",e.aggregationCurrentRuleData),l.xp6(3),l.hij(" ",e.language.apply," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function et(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",11),l.TgZ(1,"div",30),l.TgZ(2,"div",31),l.TgZ(3,"section",32),l.NdJ("cdkDropListDropped",function(t){return l.CHM(e),l.oxw().dropMappingSource(t)}),l.YNc(4,Se,8,4,"div",33),l.qZA(),l.TgZ(5,"div",34),l.TgZ(6,"button",35),l._UZ(7,"i",36),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"ul",37),l.YNc(10,ye,4,1,"li",38),l.qZA(),l.qZA(),l.TgZ(11,"div",39),l._uU(12),l.qZA(),l.qZA(),l.YNc(13,Xe,30,15,"div",40),l.qZA()}if(2&e){const e=l.oxw();l.xp6(4),l.Q6J("ngForOf",e.selectList),l.xp6(2),l.Q6J("disabled",e.showTab||!e.unselectList.length),l.xp6(2),l.hij(" ",e.language.addMappingSource," "),l.xp6(2),l.Q6J("ngForOf",e.unselectList),l.xp6(2),l.hij(" ",e.language["Please note that new mapping sources take up to 12 hours to take effect."],""),l.xp6(1),l.Q6J("ngIf",e.showTab)}}function tt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",113),l.TgZ(1,"div",114),l.TgZ(2,"button",115),l.NdJ("click",function(){return l.CHM(e),l.oxw().save()}),l._uU(3),l.qZA(),l.TgZ(4,"button",116),l.NdJ("click",function(){return l.CHM(e),l.oxw().cancelWithGet()}),l._uU(5),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(3),l.hij(" ",e.language.submit," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function it(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",117),l.TgZ(1,"h4",118),l._uU(2),l.qZA(),l.TgZ(3,"button",119),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",120),l.qZA(),l.qZA(),l.TgZ(5,"div",121),l._uU(6),l.qZA(),l.TgZ(7,"div",122),l.TgZ(8,"button",123),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(9),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(4),l.hij(" ",e.infoBody," "),l.xp6(3),l.hij(" ",e.language.Okay," ")}}function nt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",117),l.TgZ(1,"h4",118),l._uU(2),l.qZA(),l.TgZ(3,"button",119),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",120),l.qZA(),l.qZA(),l.TgZ(5,"div",121),l._uU(6),l.qZA(),l.TgZ(7,"div",122),l.TgZ(8,"button",123),l.NdJ("click",function(){return l.CHM(e),l.oxw().confirmAggregationRuleApply()}),l._uU(9),l.qZA(),l.TgZ(10,"button",124),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(11),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(4),l.hij(" ","DHCP"==e.ruleName?e.language["Endpoint history will start over for new key configurations. Proceed ?"]:e.language["Endpoint history will start over for new aggregates. Proceed ?"]," "),l.xp6(3),l.hij(" ",e.language.Okay," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}i(91704);let st=(()=>{class e{constructor(e,t,i,n,s,a,l){this.service=e,this.sso=t,this.router=i,this.dialogService=n,this.commonOrgService=s,this.translateService=a,this.titleService=l,this.pageAvailable=!1,this.load=!1,this.selectList=[],this.unselectList=[],this.edit=!1,this.showTab=!1,this.mpngRuleObj={},this.mpnPrcdnce=[],this.sbscbrRuleObj={},this.sbscbrselectList=[],this.unsbscbrselectList=[],this.aggregationRuleObj={},this.aggregationRuleFields=[],this.aggregationMatchRules={DHCP:[],AA:[],CUSTOM:[],SMx:[],DHCP_DELIMITER:"",AA_DELIMITER:"",CUSTOM_DELIMITER:"",SMx_DELIMITER:""},this.aggregationRuleFieldsLength=0,this.mappingRuleFields=["MAC Address","Serial Number","Registration Id","Phone","account","Region","Network AID","Port Type","Subscriber Info","Subscriber Description","Additional Info","B-RAS IP","Router Interface","VLAN","DSLAM Node","DSLAM Vendor"],this.customMappingRules=["Name"],this.mpngRuleObjDefault={DHCP:["dhcpCircuitId","dhcpRemoteId","dhcpClientHostName","macAddress","dhcpSubscriberId"],RADIUS:["radiusUserName"],CC:["serialNumber","subscriberName","registrationId","subscriberAccount"],AA:["macAddress","cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],CUSTOM:["cmSerialNumber","cmRegistrationId","cmAccount","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],RDNS:["cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],MAC:["cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],ASSIGNED:["assignedName"],CMS:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],FA:["cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],AXOS:["ipAddress","macAddress","cmSerialNumber"],EXA:["ipAddress","macAddress","cmSerialNumber"],SMx:["cmSerialNumber","cmRegistrationId","cmAccount","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"]},this.aggregationRuleObjDefault={AA:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],CUSTOM:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"],SMx:["cmSerialNumber","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","cmVlan","cmDslamNode","cmDslamVendor"]},this.delimiters=["_","-","/","~","#"],this.delimiterSelected="_",this.aggregationdelimiterSelected="_",this.allPrcdns=["DHCP","RADIUS","CC","AA","CUSTOM","RDNS","MAC","ASSIGNED","AXOS","EXA","SMx"],this.mappingRuleFieldsLength=0,this.sbscbrRuleFieldsLength=0,this.subscriberMatchRules=[],this.sbscbrRuleFields=["MAC Address","Serial Number","Registration Id","Phone","account","Region","Network AID","Port Type","Subscriber Info","Subscriber Description","Additional Info","B-RAS IP","Router Interface","VLAN","DSLAM Node","DSLAM Vendor"],this.sbscbrRuleObjDefault={DHCP:["ip_address","mac_address","dhcp_circuit_id","dhcp_client_host_name","dhcp_remote_id","dhcp_subscriber_id"],RADIUS:["ip_address","mac_address","radius_user_name"],CC:["ip_address","mac_address","cc_server_info_id","cc_cpe_id","serial_number","registration_id","provisioning_code","persistent_data","subscriber_type","subscriber_name","subscriber_account","sxa_cc_subscriber_id","subscriber_phone","email"],AA:["ip_address","mac_address","cmRegistrationId","cmPhone","cmRegion","cmMappedName","cmNetworkName","cmDeviceType","cmNetworkAid","cmPortType","cmSubscriberInfo","cmSubscriberDesc","cmBrasIp","cmRouterIf","cmOrgSpecific","vlan","cmDslamNode","cmDslamVendor"],CUSTOM:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],RDNS:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],MAC:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],ASSIGNED:["ip_address","mac_address","assigned_name"],CMS:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],FA:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"],SMx:["ip_address","mac_address","cm_serial_number","cm_registration_id","cm_mapped_name","cm_address","cm_phone","cm_email","cm_account","cm_region","cm_network_name","cm_device_type","cm_network_aid","cm_port_type","cm_subscriber_info","cm_subscriber_desc","cm_org_specific","cm_alt_title","cm_bras_ip","cm_router_intf","cm_vlan","cm_dslam_node","cm_dslam_vendor"]},this.sbscbrallPrcdns=["DHCP","RADIUS","CC","AA","CUSTOM","RDNS","MAC","ASSIGNED","CMS","FA"],this.title={cmSerialNumber:"Serial Number",dhcp_circuit_id:"DHCP Circuit Id",dhcp_client_host_name:"DHCP Client Hostname",dhcp_remote_id:"DHCP Remote Id",dhcp_subscriber_id:"DHCP Subscriber Id",serial_number:"Serial Number",dhcpCircuitId:"DHCP Circuit Id",dhcpRemoteId:"DHCP Remote Id",dhcpClientHostName:"DHCP Client Hostname",dhcpSubscriberId:"DHCP Subscriber Id",radiusUserName:"Radius Username",serialNumber:"Serial Number",subscriberName:"SubscriberName",registrationId:"Registration Id",subscriberAccount:"Location_ID",cmRegistrationId:"Registration Id",cmPhone:"Phone",cmRegion:"Region",cmMappedName:"Mapped Name",cmNetworkName:"Network Name",cmDeviceType:"Device Type",cmNetworkAid:"Network AID",cmPortType:"Port Type",cmSubscriberInfo:"Subscriber Info",cmSubscriberDesc:"Subscriber Description",cmBrasIp:"B-RAS IP",cmRouterIf:"Router Interface",cmOrgSpecific:"Org Specific",vlan:"VLAN",cmDslamNode:"DSLAM Node",cmDslamVendor:"DSLAM Vendor",assigned_name:"Assigned Name",DHCP:"DHCP",RADIUS:"RADIUS",CC:"Consumer Connect",AA:"Access Analyze",CUSTOM:"Custom",RDNS:"RDNS",MAC:"MAC",ASSIGNED:"ASSIGNED",CMS:"CMS",FA:"FLOW ANALYZE",ip_address:"Ip Address",mac_address:"MAC Address",cm_serial_number:"Serial Number",cm_registration_id:"Registration Id",cm_mapped_name:"Mapped Name",cm_address:"Address",cm_phone:"Phone",cm_email:"Email",cm_account:"Account",cm_region:"Region",cm_network_name:"Network Name",cm_device_type:"Device Type",cm_network_aid:"Network Aid",cm_port_type:"Port Type",cm_subscriber_info:"Subscriber Info",cm_subscriber_desc:"Subscriber Desc",cm_org_specific:"Org Specific",cm_alt_title:"Alt Title",cm_bras_ip:"B-RAS IP",cm_router_intf:"Router Interface",cm_vlan:"VLAN",cm_dslam_node:"DSLAM Node",cm_dslam_vendor:"DSLAM Vendor",radius_user_name:"Radius User Name",cc_server_info_id:"Server Info Id",cc_cpe_id:"CPE Id",registration_id:"Registration Id",provisioning_code:"Provisioning Code",persistent_data:"Persistent Data",subscriber_type:"Subscriber Type",subscriber_name:"Subscriber Name",subscriber_account:"Location_ID",sxa_cc_subscriber_id:"Subscriber Id",subscriber_phone:"Subscriber Phone",email:"Email",macAddress:"MAC Address",cmVlan:"VLAN",assignedName:"Assigned Name",cmAccount:"Account",AXOS:"AXOS",EXA:"EXA",ipAddress:"Ip Address"},this.emptyRule=[{attrs:[],delimiter:""}],this.loading=!0,this.keyConfigDefaultObj={macAddress:!1,remoteId:!1,circuitId:!1,subscriberId:!1,clientHostName:!1},this.keyConfigEditObj={},this.keyConfigEditBFRObj={},this.keyConfigs={},this.isProd=!1,this.showAggregation=!1,this.new=!0;let o=this.router.url;if(this.ORG_ID=this.sso.getOrganizationID(o),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.mappingsource} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===this.module?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.getData()}),this.commonOrgService.closeAlert(),this.isDev=this.sso.isDevCheckFromBaseURL(),this.isProd=this.sso.isProdCheckFromBaseURL(),this.module=this.sso.getRedirectModule(o),this.titleService.setTitle(`${this.language.mappingsource} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===this.module?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),"systemAdministration"!==this.module){let e=this.sso.getEntitlements();e&&!e[102]&&(this.allPrcdns=this.allPrcdns.filter(e=>!["AXOS","EXA"].includes(e)))}}ngOnInit(){this.getData()}ngAfterViewInit(){this.loaded=!0}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getListSubs&&this.getListSubs.unsubscribe(),this.saveSubs&&this.saveSubs.unsubscribe(),this.createOrgSubs&&this.createOrgSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.keyConfigSubs&&this.keyConfigSubs.unsubscribe(),this.addKeyConfigSusbs&&this.addKeyConfigSusbs.unsubscribe()}doEdit(){this.edit=!0}addItemTolist(e){this.selectList.push(e);let t=this.unselectList.filter(function(t){return t.id!==e.id});this.unselectList=t}deleteItemFromList(){}cancel(){this.edit=!1}cancelWithGet(){this.selectList=[],this.cancel(),this.getData()}submit(){this.edit=!1}addItemToMappingRule(e,t,i){var n,s;this.mpngRuleObj[e]?this.mpngRuleObj[e]&&!(null===(s=null===(n=this.mpngRuleObj[e])||void 0===n?void 0:n.rules)||void 0===s?void 0:s.length)&&this.mpngRuleObj[e].rules.push({attrs:[],delimiter:""}):this.mpngRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:[],delimiter:""}]};let a=this.mpngRuleObj[e];a.rules[t].attrs.push(i),a.rules[t].attrs&&2==a.rules[t].attrs.length&&(a.rules[t].delimiter="_"),this.mpngRuleObj[e]=a,this.currentRuleData=a;let l=this.mappingRuleFields,o=l.indexOf(i);l.splice(o,1),this.mappingRuleFields=l,this.mappingRuleFieldsLength=this.mappingRuleFields.length}addItemToSbscbrMappingRule(e,t,i){let n=this.sbscbrRuleObj[e];n.rules[t].attrs.push(i),this.sbscbrRuleObj[e]=n,this.sbscbrCurrentRuleData=n;let s=this.sbscbrRuleFields,a=s.indexOf(i);s.splice(a,1),this.sbscbrRuleFields=s,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length,i&&-1===this.subscriberMatchRules.indexOf(i)&&this.subscriberMatchRules.push(i)}addItemToAggregationMappingRule(e,t,i){let n=this.aggregationRuleObj[e];n.rules[t].attrs.push(i),n.rules[t].attrs&&2==n.rules[t].attrs.length&&(this.aggregationdelimiterSelected="_"),this.aggregationRuleObj[e]=n,this.sbscbrCurrentRuleData=n;let s=this.aggregationRuleFields,a=s.indexOf(i);s.splice(a,1),this.aggregationRuleFields=s,this.aggregationRuleFieldsLength=this.aggregationRuleFields.length,i&&-1===this.aggregationMatchRules[e].indexOf(i)&&this.aggregationMatchRules[e].push(i),this.aggregationMatchRules[`${e}_DELIMITER`]=this.aggregationdelimiterSelected}changeAggregationDelimiter(e){this.aggregationMatchRules[`${e}_DELIMITER`]=this.aggregationdelimiterSelected}getCurrentRule(e){var t;this.mpngRuleObj[e]||(this.mpngRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:[],delimiter:""}]}),this.currentRuleData=this.mpngRuleObj[e],this.showTab=!0,this.ruleName=e,document.getElementById("sxa-color-gold-"+e).style.display="block";let i=this.currentRuleData.rules,n=[...this.mpngRuleObjDefault[e]];for(let o=0;o<i.length;o++){let e=i[o].attrs,t=i[o].delimiter;if(t&&!this.delimiters.includes(t)&&(i[o].delimiter="_"),e.length)for(let i=0;i<e.length;i++){let t=n.indexOf(e[i]);-1!==t&&n.splice(t,1)}}this.mappingRuleFields=n,this.mappingRuleFieldsLength=this.mappingRuleFields.length;let s=[];n=[];let a=this.sbscbrRuleObjDefault[e]?this.sbscbrRuleObjDefault[e]:[];this.showSubsRule=!1,this.sbscbrRuleObjDefault[e]&&(this.showSubsRule=!0);for(let o=0;o<a.length;o++)-1!==this.subscriberMatchRules.indexOf(a[o])?s.push(a[o]):n.push(a[o]);this.sbscbrRuleObj[e]?this.sbscbrRuleObj[e].rules[0].attrs=s:this.sbscbrRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:s,delimiter:""}]},this.sbscbrCurrentRuleData=this.sbscbrRuleObj[e],this.sbscbrRuleFields=n,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length,s=[],n=[],Object.keys(this.aggregationRuleObjDefault).forEach(e=>{this.aggregationRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:this.aggregationMatchRules[e],delimiter:""}]}});let l=null===(t=this.aggregationRuleObjDefault[e])||void 0===t?void 0:t.slice(0);if(l){this.showAggregation=!0;let t=this.aggregationMatchRules[e]?this.aggregationMatchRules[e]:[];n=l;for(let e=0;e<t.length;e++)n.includes(t[e])&&(s.push(t[e]),n=n.filter(i=>i!==t[e]));!this.aggregationRuleObj[e]&&l?this.aggregationRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:s,delimiter:""}]}:this.aggregationRuleObj[e].rules[0].attrs=s,this.aggregationdelimiterSelected=this.aggregationMatchRules[`${e}_DELIMITER`]?this.aggregationMatchRules[`${e}_DELIMITER`]:"_",this.aggregationCurrentRuleData=this.aggregationRuleObj[e],this.latestAggreData=this.aggregationCurrentRuleData?pe.cloneDeep(this.aggregationCurrentRuleData):{},this.latestAggreDataDeLimit=this.aggregationdelimiterSelected,this.aggregationRuleFields=n,this.aggregationRuleFieldsLength=this.aggregationRuleFields.length}else this.showAggregation=!1,this.latestAggreData=void 0;this.showTab=!0,this.ruleName=e,"DHCP"==e?(this.keyConfigEditObj&&!Object.keys(this.keyConfigEditObj).length&&(this.keyConfigEditObj=pe.cloneDeep(this.keyConfigDefaultObj)),this.keyConfigEditBFRObj=pe.cloneDeep(this.keyConfigEditObj),this.showKeyConfig=!0):this.showKeyConfig=!1}deleteAttr(e,t){let i=this.currentRuleData,n=i.rules[t].attrs.indexOf(e);i.rules[t].attrs.splice(n,1),i.rules[t].attrs&&i.rules[t].attrs.length<2&&(i.rules[t].delimiter="_"),this.currentRuleData=i,this.mpngRuleObj[this.ruleName]=i,this.mappingRuleFields.push(e),this.mappingRuleFields=Object.assign([],this.mappingRuleFields),this.mappingRuleFieldsLength=this.mappingRuleFields.length}deleteSbscbrAttr(e,t){let i=this.sbscbrCurrentRuleData,n=i.rules[t].attrs.indexOf(e);i.rules[t].attrs.splice(n,1),this.sbscbrCurrentRuleData=i,this.sbscbrRuleObj[this.ruleName]=i,this.sbscbrRuleFields.push(e),this.sbscbrRuleFields=Object.assign([],this.sbscbrRuleFields),this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length;let s=this.subscriberMatchRules.indexOf(e);s>-1&&this.subscriberMatchRules.splice(s,1)}deleteAggregationAttr(e,t){let i=this.aggregationCurrentRuleData,n=i.rules[t].attrs.indexOf(e);i.rules[t].attrs.splice(n,1),i.rules[t].attrs&&i.rules[t].attrs.length<2&&(this.aggregationdelimiterSelected="_"),this.aggregationCurrentRuleData=i,this.aggregationRuleObj[this.ruleName]=i,this.aggregationRuleFields.push(e),this.aggregationRuleFields=Object.assign([],this.aggregationRuleFields),this.aggregationRuleFieldsLength=this.aggregationRuleFields.length;let s=this.aggregationMatchRules[i.name].indexOf(e);s>-1&&this.aggregationMatchRules[i.name].splice(s,1)}deleteRule(e,t){let i=this.currentRuleData,n=[];if(i.rules[t].attrs)for(let s=0;s<i.rules[t].attrs.length;s++)n.push(i.rules[t].attrs[s]);this.mappingRuleFields=[...this.mappingRuleFields,...n],i.rules.splice(t,1),this.currentRuleData=i,this.mpngRuleObj[this.ruleName]=i,this.mappingRuleFieldsLength=this.mappingRuleFields.length}deleteSbscbrRule(e,t){let i=this.sbscbrCurrentRuleData,n=[];if(i.rules[t].attrs)for(let s=0;s<i.rules[t].attrs.length;s++)n.push(i.rules[t].attrs[s]);this.sbscbrRuleFields=Array.prototype.push.apply(this.sbscbrRuleFields,n),this.sbscbrRuleFields=Object.assign([],this.sbscbrRuleFields),i.rules.splice(t,1),this.sbscbrCurrentRuleData=i,this.sbscbrRuleObj[this.ruleName]=i,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length}deleteMapping(e){let t=this.selectList;t=t.filter(function(t){return t.name!==e.name}),this.selectList=t;let i=this.unselectList;i.push(e),this.unselectList=i,this.mpngRuleObj[e.key]&&delete this.mpngRuleObj[e.key]}openTab(){this.showTab=!0}closeTab(){this.cancelAggregationRuleApply()}applyAggregationRuleModalOpen(){if(this.aggregationCurrentRuleData&&this.latestAggreData&&(JSON.stringify(this.latestAggreData)!==JSON.stringify(this.aggregationCurrentRuleData)||this.latestAggreDataDeLimit&&this.latestAggreDataDeLimit!==this.aggregationdelimiterSelected))this.closeModal(),this.modalRef=this.dialogService.open(this.aggregWarningModal,{backdrop:"static",keyboard:!1});else if(this.ruleName&&"DHCP"==this.ruleName&&!pe.isEqual(this.keyConfigEditBFRObj,this.keyConfigEditObj)&&this.mpnPrcdnce.includes("DHCP"))this.closeModal(),this.modalRef=this.dialogService.open(this.aggregWarningModal,{backdrop:"static",keyboard:!1});else{this.showTab=!1;let e=document.getElementById("sxa-color-gold-"+this.ruleName);e&&(e.style.display="none")}}confirmAggregationRuleApply(){this.showTab=!1;let e=document.getElementById("sxa-color-gold-"+this.ruleName);e&&(e.style.display="none"),this.closeModal()}cancelAggregationRuleApply(){let e="";this.aggregationCurrentRuleData&&(e=this.aggregationCurrentRuleData.key?this.aggregationCurrentRuleData.key:"",e&&this.latestAggreData&&(this.aggregationCurrentRuleData.rules[0].attrs=this.latestAggreData.rules[0].attrs,this.aggregationMatchRules[e]=this.latestAggreData.rules[0].attrs,this.aggregationMatchRules[`${e}_DELIMITER`]=this.latestAggreDataDeLimit),this.closeModal(),setTimeout(()=>{this.aggregationCurrentRuleData=void 0},0)),this.ruleName&&"DHCP"==this.ruleName&&(this.keyConfigEditObj=pe.cloneDeep(this.keyConfigEditBFRObj)),this.showTab=!1;let t=document.getElementById("sxa-color-gold-"+this.ruleName);t&&(t.style.display="none")}addRule(e,t){let i=this.mpngRuleObj[e];i.rules.push({attrs:[t],delimiter:""}),this.mpngRuleObj[e]=i,this.currentRuleData=this.mpngRuleObj[e];let n=this.mappingRuleFields,s=n.indexOf(t);n.splice(s,1),this.mappingRuleFields=n,this.mappingRuleFieldsLength=this.mappingRuleFields.length}addSbscbrRule(e,t){let i=this.sbscbrRuleObj[e];i.rules.push({attrs:[t],delimiter:""}),this.sbscbrRuleObj[e]=i,this.sbscbrCurrentRuleData=this.sbscbrRuleObj[e];let n=this.sbscbrRuleFields,s=n.indexOf(t);n.splice(s,1),this.sbscbrRuleFields=n,this.sbscbrRuleFieldsLength=this.sbscbrRuleFields.length}dropMappingSource(e){(0,he.bA)(this.selectList,e.previousIndex,e.currentIndex)}dropCurrentRuleData(e){(0,he.bA)(this.currentRuleData.rules,e.previousIndex,e.currentIndex)}dropFiledToCurrentRuleData(e,t){(0,he.bA)(this.currentRuleData.rules[t].attrs,e.previousIndex,e.currentIndex)}dropFieledToCurrentAggreRuleData(e,t){(0,he.bA)(this.aggregationCurrentRuleData.rules[t].attrs,e.previousIndex,e.currentIndex)}changeDelimiter(e,t){}checkFieldsLength(e,t,i){return this.mpngRuleObj[e].rules[t].attrs.length>1}checkSbscbrFieldsLength(e,t,i){return this.sbscbrRuleObj[e].rules[t].attrs.length>1}checkAggreFieldsLength(e,t,i){var n;let s=this.aggregationRuleObj[e];return!!(s&&(null===(n=null==s?void 0:s.rules[t])||void 0===n?void 0:n.attrs.length)>1)}getData(){let e=[],t=[],i=[];this.resetKeyConfigurations(),this.getListSubs=this.service.getList(this.ORG_ID).subscribe(n=>{if(this.loading=!1,this.new=!1,this.mpnPrcdnce=n.mappingPrecedence?n.mappingPrecedence.split(","):[],n&&Object.keys(n)){if("systemAdministration"!==this.module){let e=this.sso.getEntitlements();e&&!e[102]&&(this.mpnPrcdnce=this.mpnPrcdnce.filter(e=>!["AXOS","EXA"].includes(e)))}this.mpnPrcdnce=this.mpnPrcdnce.filter(e=>e&&"CMS"!=e.toUpperCase()),this.mpnPrcdnce=this.mpnPrcdnce.filter(e=>e&&"FA"!=e.toUpperCase()),this.mpnPrcdnce=this.mpnPrcdnce.filter(e=>e&&("AXOS"!=e.toUpperCase()||"EXA"!=e.toUpperCase()));let s=this.mpnPrcdnce.filter(e=>e&&"DHCP"==e.toUpperCase()).length;if(this.mpnPrcdnce=this.mpnPrcdnce.filter(e=>e&&"STATIC"!=e.toUpperCase()),s?this.getKeyConfigurations():this.resetKeyConfigurations(),n.nameFormat){let i=JSON.parse(n.nameFormat);if("systemAdministration"!==this.module){let e=this.sso.getEntitlements();e&&!e[102]&&(i=i.filter(e=>!["AXOS","EXA"].includes(e.name)))}for(let n=0;n<i.length;n++)if(!(i[n].name&&"CMS"==i[n].name||i[n].name&&"FA"==i[n].name)){i[n].data=[];for(let e=0;e<i[n].rules.length;e++){let t=[];for(let s=0;s<i[n].rules[e].attrs.length;s++)t.push(this.language[this.title[i[n].rules[e].attrs[s]]]||this.title[i[n].rules[e].attrs[s]]);i[n].data.push(t.join(i[n].rules[e].delimiter))}i[n].key=i[n].name,this.mpngRuleObj[i[n].name]=i[n],t.push(i[n]),e.push(i[n].name)}let s=n.nameFormat?JSON.parse(n.nameFormat):[],a=this.mpnPrcdnce;if(a.length&&!s.length)for(let n=0;n<a.length;n++)t.push({name:a[n],rules:this.emptyRule,key:a[n],data:[]}),e.push(a[n]);else if(a.length&&s.length&&a.length!=s.length){let i=a;for(let e=0;e<a.length;e++)s.filter(t=>t.name==a[e]).length&&(i=i.filter(t=>t!==a[e]));if(i.length)for(let n=0;n<i.length;n++)t.push({name:i[n],rules:this.emptyRule,key:i[n],data:[]}),e.push(i[n])}else!a.length&&!s.length&&this.resetMappingRuleObj()}else{let i=this.mpnPrcdnce;if(i.length)for(let n=0;n<i.length;n++)t.push({name:i[n],rules:this.emptyRule,key:i[n],data:[]}),e.push(i[n]);else this.resetMappingRuleObj()}t&&t.length&&(t=this.makeOrderByMapPrecedence(t,this.mpnPrcdnce)),this.selectList=t,this.selectList=[...this.selectList],t.length&&(this.new=!1);for(let t=0;t<this.allPrcdns.length;t++)-1===e.indexOf(this.allPrcdns[t])&&i.push({id:t+1,name:this.allPrcdns[t],data:["Name"],key:this.allPrcdns[t]});this.unselectList=i;let a=[];if(a=n.subscriberMatchRule?n.subscriberMatchRule.split(","):[],this.subscriberMatchRules=a,!t.length){for(let e=0;e<this.allPrcdns.length;e++)i.push({id:e+1,name:this.allPrcdns[e],data:["Name"],key:this.allPrcdns[e]});this.unselectList=i,this.unselectList=this.unselectList.filter((e,t,i)=>i.findIndex(t=>t.id==e.id)==t)}if(n.aggregationRules){let e=JSON.parse(n.aggregationRules);e=e.filter(e=>"DHCP"!=e.name);for(let t=0;t<e.length;t++){e[t].data=[];let i=[];for(let n=0;n<e[t].attrs.length;n++)i.push(e[t].attrs[n]);this.aggregationMatchRules[e[t].name]=i,this.aggregationMatchRules[`${e[t].name}_DELIMITER`]=e[t].delimiter?e[t].delimiter:""}e.length||Object.keys(this.aggregationRuleObjDefault).forEach(e=>{this.aggregationMatchRules[e]=[]}),Object.keys(this.aggregationRuleObjDefault).forEach(e=>{this.aggregationRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:this.aggregationMatchRules[e],delimiter:""}]}})}}else{for(let e=0;e<this.allPrcdns.length;e++)i.push({id:e+1,name:this.allPrcdns[e],data:["Name"],key:this.allPrcdns[e]});this.unselectList=i,this.new=!0}setTimeout(()=>{this.loading=!1},1e3)},e=>{404==e.status?(this.new=!0,this.loading=!1):this.pageErrorHandle(e)})}save(){let e=[],t=[],i=[],n=0,s=[];for(let r=0;r<this.selectList.length;r++){e.push(this.selectList[r].name);let n=pe.cloneDeep(this.mpngRuleObj[this.selectList[r].name]);n&&(delete n.data,delete n.key,n&&n.rules.length&&(n.rules=n.rules.filter(e=>e.attrs&&e.attrs.length),n.rules.length&&t.push(n)));let s=this.sbscbrRuleObj[this.selectList[r].name];s&&(delete s.data,delete s.key,i.push(s))}if(e.forEach(e=>{t.filter(t=>t.name&&e&&t.name===e).length||(s.push(e),n++)}),n&&(1!==n||"STATIC"!==s[0]))return this.infoBody=this.language["Please select at least one Mapping Rule for selected Mapping Sources"],this.infoTitle=this.language["Invalid Request"],void this.openInfoModal();if(-1!==e.indexOf("DHCP")){const e=this.keyConfigEditObj&&Object.keys(this.keyConfigEditObj).length?this.keyConfigEditObj:this.keyConfigDefaultObj;if(-1==Object.values(e).indexOf(!0))return this.infoBody=this.language["Please select at least one Unique Key in the DHCP Key Configuration"],this.infoTitle=this.language["Invalid Request"],void this.openInfoModal()}let a=Object.keys(this.aggregationRuleObj),l=[];if(a)for(let r=0;r<a.length;r++){let e={name:a[r],attrs:this.aggregationRuleObj[a[r]].rules[0].attrs,delimiter:this.aggregationMatchRules[`${a[r]}_DELIMITER`]?this.aggregationMatchRules[`${a[r]}_DELIMITER`]:""};e.attrs&&e.attrs.length&&l.push(e)}let o={mappingPrecedence:e.join(","),nameFormat:JSON.stringify(t),orgId:this.ORG_ID,subscriberMatchRule:this.subscriberMatchRules?this.subscriberMatchRules.join(","):"",aggregationRules:JSON.stringify(l),tenantId:0};if(this.loading=!0,this.new){let e=o;t.length||delete e.nameFormat,""==e.subscriberMatchRule&&delete e.subscriberMatchRule,this.saveSubs=this.service.save(e,this.ORG_ID).subscribe(e=>{if(-1!==o.mappingPrecedence.indexOf("DHCP")){let e=this.keyConfigEditObj&&Object.keys(this.keyConfigEditObj).length?this.keyConfigEditObj:this.keyConfigDefaultObj;this.addKeyConfigSusbs=this.service.addDHCPKeyConfiguration(this.ORG_ID,{macAddress:!!e.macAddress&&e.macAddress,remoteId:!!e.remoteId&&e.remoteId,circuitId:!!e.circuitId&&e.circuitId,subscriberId:!!e.subscriberId&&e.subscriberId,clientHostName:!!e.clientHostName&&e.clientHostName}).subscribe(e=>{this.closeTab(),this.cancel(),this.getData()},e=>{e.error&&e.error.error_code&&this.pageErrorHandle(e)})}else this.closeTab(),this.cancel(),this.getData()},e=>{409==e.status&&e.error&&e.error.error_code&&e.error.error_code.indexOf("already exists")>-1?this.updatePatchMappingSource(o):e.error&&e.error.error_code&&this.pageErrorHandle(e)})}else this.updatePatchMappingSource(o)}updatePatchMappingSource(e){const t=[];if(t.push(this.service.patchUpdate({mappingPrecedence:e.mappingPrecedence},this.ORG_ID)),t.push(this.service.patchUpdate({nameFormat:e.nameFormat},this.ORG_ID)),""!=e.subscriberMatchRule&&t.push(this.service.patchUpdate({subscriberMatchRule:e.subscriberMatchRule},this.ORG_ID)),e.aggregationRules&&t.push(this.service.patchUpdate({aggregationRules:e.aggregationRules},this.ORG_ID)),-1!==e.mappingPrecedence.indexOf("DHCP")){let e=this.keyConfigEditObj&&Object.keys(this.keyConfigEditObj).length?this.keyConfigEditObj:this.keyConfigDefaultObj,i={macAddress:!!e.macAddress&&e.macAddress,remoteId:!!e.remoteId&&e.remoteId,circuitId:!!e.circuitId&&e.circuitId,subscriberId:!!e.subscriberId&&e.subscriberId,clientHostName:!!e.clientHostName&&e.clientHostName};this.keyConfigs&&Object.keys(this.keyConfigs).length?(i._id=this.keyConfigs._id,t.push(this.service.updateDHCPKeyConfiguration(this.ORG_ID,i))):t.push(this.service.addDHCPKeyConfiguration(this.ORG_ID,i))}else-1===e.mappingPrecedence.indexOf("DHCP")&&this.keyConfigs&&Object.keys(this.keyConfigs).length&&t.push(this.service.deleteDHCPKeyConfiguration(this.ORG_ID));(0,m.D)(t).subscribe(e=>{this.closeTab(),this.cancel(),this.getData()},e=>{this.loading=!1,this.pageErrorHandle(e)})}getTitle(e){return this.title[e]?this.title[e]:e}trackItem(e,t){return t.name}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){let t="";400==e.status?(this.infoBody=e.error.message,this.infoTitle=this.language.Error,this.openInfoModal(),this.loading=!1):500==e.status?(this.infoBody="Internal Server Error",this.infoTitle=this.language.Error,this.openInfoModal(),this.loading=!1):(t=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1)}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}aggregationRuleNames(e){let t=[];this.aggregationMatchRules[e].forEach(e=>{t.push(this.title[e]?this.title[e]:e)});let i="";return i=t.join(this.aggregationMatchRules[`${e}_DELIMITER`]?this.aggregationMatchRules[`${e}_DELIMITER`]:"_"),i}makeOrderByMapPrecedence(e,t){return e.sort((e,i)=>t.indexOf(e.name)<t.indexOf(i.name)?-1:t.indexOf(e.name)>t.indexOf(i.name)?1:0)}changeKeyConfig(){}resetKeyConfigurations(){this.keyConfigDefaultObj={macAddress:!1,remoteId:!1,circuitId:!1,subscriberId:!1,clientHostName:!1},this.keyConfigEditObj={},this.keyConfigs={}}getKeyConfigurations(){this.keyConfigLoading=!0,this.keyConfigSubs=this.service.getDHCPKeyConfiguration(this.ORG_ID).subscribe(e=>{this.keyConfigs=e||{},this.keyConfigDefaultObj=e&&Object.keys(e).length?{macAddress:!!e.macAddress&&e.macAddress,remoteId:!!e.remoteId&&e.remoteId,circuitId:!!e.circuitId&&e.circuitId,subscriberId:!!e.subscriberId&&e.subscriberId,clientHostName:!!e.clientHostName&&e.clientHostName}:{macAddress:!1,remoteId:!1,circuitId:!1,subscriberId:!1,clientHostName:!1}},e=>{})}checkKeyConfigStatus(e){if(e){let e=[];return this.keyConfigDefaultObj.macAddress&&e.push("MAC Address"),this.keyConfigDefaultObj.remoteId&&e.push("DHCP Remote Id"),this.keyConfigDefaultObj.circuitId&&e.push("DHCP Circuit Id"),this.keyConfigDefaultObj.subscriberId&&e.push("DHCP Subscriber Id"),this.keyConfigDefaultObj.clientHostName&&e.push("DHCP Client Hostname"),e.join(", ")}return!!(this.keyConfigDefaultObj.macAddress||this.keyConfigDefaultObj.remoteId||this.keyConfigDefaultObj.circuitId||this.keyConfigDefaultObj.subscriberId||this.keyConfigDefaultObj.clientHostName)}resetMappingRuleObj(){let e=Object.keys(this.mpngRuleObj);e&&e.forEach(e=>{this.mpngRuleObj[e]={data:[],key:e,name:e,rules:[{attrs:[],delimiter:""}]}})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(me),l.Y36(r.t6),l.Y36(a.F0),l.Y36(v.FF),l.Y36(T.v),l.Y36(C.s),l.Y36(I.Dx))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-mapping-source"]],viewQuery:function(e,t){if(1&e&&(l.Gf(be,7),l.Gf(fe,7)),2&e){let e;l.iGM(e=l.CRH())&&(t.infoModal=e.first),l.iGM(e=l.CRH())&&(t.aggregWarningModal=e.first)}},decls:9,vars:4,consts:[[1,"container","loader-wrapper","position-relative"],["class","loader-wrapper-info",4,"ngIf"],["class","row",4,"ngIf"],["class","row edit-submit-wrapper my-3",4,"ngIf"],["infoModal",""],["aggregWarningModal",""],[1,"loader-wrapper-info"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row"],[1,"col-md-12","mapping-edit-btn"],[1,"btn-default","primary","my-2",3,"click"],[1,"col-md-5","mt20"],["id","accordion",4,"ngIf"],["id","accordion"],["class","card violent-bg mb-6px",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","violent-bg","mb-6px"],["data-toggle","collapse",1,"collapsed","card-link","white","h-30px",3,"href"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"ul-li-style","collapse",3,"id"],[1,"mapping-rl"],[4,"ngFor","ngForOf"],["class","aggre-rl",4,"ngIf"],[1,"sxa-color-white"],[1,"aggre-rl"],[1,"ml15-li-none"],[1,"w-nowrap"],[1,"fa","fa-th-list"],[1,"col-md-6"],[1,"mapping-src-wrapper"],["cdkDropList","",1,"added_mapping_src",3,"cdkDropListDropped"],["cdkDrag","","class","card violent-bg mb-6px",4,"ngFor","ngForOf"],["id","add_mapping_src","data-toggle","dropdown",1,"endpoint-dropdown","drop-down-container","mapping-src-btn-wrapper"],[1,"fa-custom-btn","btn-default","primary","px-3",3,"disabled"],["aria-hidden","true",1,"fa","fa-plus","add-mapping-i"],["id","main-edit-dropdown",1,"dropdown-menu","endpoint-dropdown-menu","white","drop-down"],["id","endpoint_added_RADIUS","class","endpoint-dropdown-menu-list sxa-bgcolor-violet white cursor-pointer","data-sname","RADIUS",3,"click",4,"ngFor","ngForOf"],[1,""],["class","col-md-5",4,"ngIf"],["cdkDrag","",1,"card","violent-bg","mb-6px"],[1,"card-link","white"],["class","fa fa-trash pull-right pointer","aria-hidden","true",3,"click",4,"ngIf"],["class","fas fa-pencil-alt pull-right pointer","aria-hidden","true",3,"click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-arrow-right","fa-2x","sxa-color-gold","pull-right","pointer","gold-right-pointer",2,"display","none",3,"id"],["aria-hidden","true",1,"fa","fa-trash","pull-right","pointer",3,"click"],["aria-hidden","true",1,"fas","fa-pencil-alt","pull-right","pointer",3,"click"],["id","endpoint_added_RADIUS","data-sname","RADIUS",1,"endpoint-dropdown-menu-list","sxa-bgcolor-violet","white","cursor-pointer",3,"click"],[1,"col-md-5"],[1,"rule-tabs-wrapper"],[1,"rule-tabs-close-icon",3,"click"],["id","mapping_src_rule_close_CUSTOM","data-sname","CUSTOM","aria-hidden","false",1,"fa","fa-times"],["id","myTab","role","tablist",1,"nav","mainmenu-fa","flow-config-tab"],[1,"main-menu-item"],["id","home-tab","data-toggle","tab","href","#home","role","tab","aria-controls","home","aria-selected","true",1,"nav-link","active"],["class","main-menu-item",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["cdkDropList","","id","draggable_pool_for_rules","class","draggable_mappring_ul_src ui-sortable",3,"cdkDropListDropped",4,"ngIf"],["id","add_rule","data-toggle","dropdown",1,"mx-4","mt-30px","btn-default","primary","px-3","dropdown","endpoint-dropdown","pointer",3,"ngClass"],["aria-hidden","true",1,"fa","fa-plus","add-icon"],[1,"dropdown-menu","endpoint-dropdown-menu","white"],["id","add-rules-li","class","endpoint-dropdown-menu-list sxa-bgcolor-violet white","data-sname","RADIUS",3,"click",4,"ngFor","ngForOf"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],["class","tab-pane fade key-config","id","key_config","role","tabpanel","aria-labelledby","key_config-tab",4,"ngIf"],["id","aggregationRule","role","tabpanel","aria-labelledby","aggregationRule-tab",1,"tab-pane","fade"],["id","draggable_pool_for_rules","class","draggable_mappring_ul_src ui-sortable",4,"ngIf"],[1,"my-3","text-center-mt30"],[1,"btn-default","primary","text-center",3,"click"],[1,"btn-default","btn-dft","py-1","text-center-ml15",3,"click"],["id","profile-tab","data-toggle","tab","href","#profile","role","tab","aria-controls","profile","aria-selected","false",1,"nav-link"],["id","key_config-tab","data-toggle","tab","href","#key_config","role","tab","aria-controls","key_config","aria-selected","false",1,"nav-link"],["id","aggregationRule-tab","data-toggle","tab","href","#aggregationRule","role","tab","aria-controls","aggregationRule","aria-selected","false",1,"nav-link"],["cdkDropList","","id","draggable_pool_for_rules",1,"draggable_mappring_ul_src","ui-sortable",3,"cdkDropListDropped"],["cdkDrag","","class","rule_class draggable_mapping_element sxa-color-white draggable",4,"ngFor","ngForOf"],["cdkDrag","",1,"rule_class","draggable_mapping_element","sxa-color-white","draggable"],[1,"fa","fa-ellipsis-v","mr-cur-resize"],["id","mapping_src_rule_delete_DHCP0",1,"rule_trash","fa","fa-trash","f-right-cp",3,"click"],["cdkDropList","","id","draggable_pool_attrs_DHCP0","class","ui-sortable draggable_pool_attr_ul",3,"cdkDropListDropped",4,"ngIf"],["class","delimiter-wrapper",4,"ngIf"],["data-toggle","dropdown",1,"btn-default","primary","px-3","append_mapping_src_attr","fa-custom-btn","dropdown","endpoint-dropdown","pointer",3,"ngClass"],[1,"fa","fa-plus","add-icon"],[1,"dropdown-menu","endpoint-dropdown-menu"],["class","endpoint-dropdown-menu-list sxa-bgcolor-violet white","data-sname","RADIUS",3,"click",4,"ngFor","ngForOf"],["cdkDropList","","id","draggable_pool_attrs_DHCP0",1,"ui-sortable","draggable_pool_attr_ul",3,"cdkDropListDropped"],["cdkDrag","","class","attr_class draggable sxa-color-white","data-attrname","dhcpSubscriberId",4,"ngFor","ngForOf"],["cdkDrag","","data-attrname","dhcpSubscriberId",1,"attr_class","draggable","sxa-color-white"],[1,"fa","fa-ellipsis-v","mx1-c-resize"],["data-sname","DHCP","data-rule-index","0","data-attrname","dhcpSubscriberId",1,"rule_trash","rule-trash-item","fa","fa-trash",3,"id","click"],[1,"delimiter-wrapper"],[1,"form-group","row"],["for","inputEmail3",1,"col-form-label"],["placeholder","","appendTo","body",1,"delimiter-select",3,"items","multiple","ngModel","ngModelOptions","clearable","searchable","ngModelChange","change"],["data-sname","RADIUS",1,"endpoint-dropdown-menu-list","sxa-bgcolor-violet","white",3,"click"],["id","add-rules-li","data-sname","RADIUS",1,"endpoint-dropdown-menu-list","sxa-bgcolor-violet","white",3,"click"],["data-toggle","dropdown",1,"btn-default","primary","append_mapping_src_attr","fa-custom-btn","dropdown","endpoint-dropdown","pointer",3,"ngClass"],["id","key_config","role","tabpanel","aria-labelledby","key_config-tab",1,"tab-pane","fade","key-config"],[1,"row","key-config-checkbox-group"],[1,"col-md-12"],["type","checkbox","name","macAddress","id","key_config_1",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_1",1,""],["type","checkbox","name","remoteId","id","key_config_2",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_2",1,""],["type","checkbox","id","key_config_3","name","circuitId",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_3",1,""],["type","checkbox","value","","id","key_config_4","name","subscriberId",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_4",1,""],["type","checkbox","value","","id","key_config_5","name","clientHostName",1,"",3,"ngModel","ngModelChange","change"],["for","key_config_5",1,""],["id","draggable_pool_for_rules",1,"draggable_mappring_ul_src","ui-sortable"],["class","rule_class draggable_mapping_element sxa-color-white draggable",4,"ngFor","ngForOf"],[1,"rule_class","draggable_mapping_element","sxa-color-white","draggable"],[1,"row","edit-submit-wrapper","my-3"],[1,"col-md-5","d-inline-block"],["id","mapping_src_mgr_submit",1,"btn-default","primary","mx-2","text-center",3,"click"],["id","mapping_src_mgr_cancel",1,"btn-default","btn-dft","py-1","text-center","ml-2",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.YNc(1,Ze,5,0,"div",1),l.YNc(2,Ce,6,2,"div",2),l.YNc(3,et,14,6,"div",2),l.YNc(4,tt,6,2,"div",3),l.qZA(),l.YNc(5,it,10,3,"ng-template",null,4,l.W1O),l.YNc(7,nt,12,4,"ng-template",null,5,l.W1O)),2&e&&(l.xp6(1),l.Q6J("ngIf",t.loading),l.xp6(1),l.Q6J("ngIf",!t.edit),l.xp6(1),l.Q6J("ngIf",t.edit),l.xp6(1),l.Q6J("ngIf",t.edit&&!t.showTab))},directives:[n.O5,n.sg,he.Wj,he.Zt,n.mk,s._Y,s.JL,s.F,S.w9,s.JJ,s.On,s.Wl],styles:['@charset "UTF-8";.main-menu-item[_ngcontent-%COMP%]{text-align:center;color:#7c7c7c;font-size:13px;font-weight:600;background-color:#fff;margin:0 1px 1px}.rule-tabs-wrapper[_ngcontent-%COMP%]{border:1px solid black;margin-top:-1px}.violent-bg[_ngcontent-%COMP%]{background-color:#f8f8fa;color:#1a1f22}.white[_ngcontent-%COMP%]{color:#1a1f22}#accordion[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1a1f22}.blue-bg[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff}.sxa-bgcolor-violet[_ngcontent-%COMP%]{background-color:#f8f8fa;color:#1a1f22}.endpoint-dropdown-menu-list[_ngcontent-%COMP%]{border-color:#005;margin:0 5px 5px;padding:5px;font-size:1.2em;font-style:inherit;display:block;text-align:left}@media only screen and (min-device-width: 765px) and (max-device-width: 1025px){.violent-bg[_ngcontent-%COMP%]{height:50px!important}}.endpoint-dropdown-menu[_ngcontent-%COMP%]{top:inherit;left:inherit;max-height:195px;overflow-y:auto;overflow-x:hidden;margin-top:-10px;width:85%;position:relative}#add_mapping_src[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]{margin-bottom:120px}.draggable_mapping_element[_ngcontent-%COMP%]{background-color:gray;border-color:#005;margin:0 5px 5px;padding:5px;font-size:1.2em;font-style:inherit;display:block;text-align:left;width:97%;cursor:default}.sxa-color-white[_ngcontent-%COMP%]{color:#1a1f22}.draggable_mappring_ul_src[_ngcontent-%COMP%]{overflow:auto!important;overflow-y:hidden!important;background-color:#eee;border:5px solid #eee;list-style-type:none;margin:10px;padding:5px 0 0;min-height:45px}.drop-down-container[_ngcontent-%COMP%]{position:relative}.drop-down[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;pointer-events:all!important}[data-toggle=collapse][_ngcontent-%COMP%]:after{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\f054";transform:rotate(90deg);transition:all linear .25s;float:right}[data-toggle=collapse].collapsed[_ngcontent-%COMP%]:after{transform:rotate(0)}.violent-bg[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .violent-bg[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{height:30px;padding:10px;margin-bottom:6px}.mapping-src-wrapper[_ngcontent-%COMP%]{border:1px solid black;padding:10px}.added_mapping_src[_ngcontent-%COMP%]{padding:10px}.mapping-src-btn-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:30px}.add-mapping-src-btn[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:2px 2px #000;width:100%}.gold-right-pointer[_ngcontent-%COMP%]{margin-top:-4px}.draggable_pool_attr_ul[_ngcontent-%COMP%]{margin-top:10px;overflow:auto!important;overflow-y:hidden!important;margin-left:20px;margin-right:10px}.add-icon[_ngcontent-%COMP%]{margin-right:5px}.append_mapping_src_attr[_ngcontent-%COMP%], .add-rule-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:93%;margin:10px auto;border:none!important}.attr_class[_ngcontent-%COMP%]{opacity:1;background-color:#9e9e9e!important;margin-bottom:10px;height:30px;padding:3px 3px 2px}.rule-tabs-close-icon[_ngcontent-%COMP%]{float:right;cursor:pointer;padding:10px;position:absolute;right:20px;top:-5px}.delimiter-wrapper[_ngcontent-%COMP%]{margin-left:55px;margin-right:10px}.delimiter-select[_ngcontent-%COMP%]{width:115px;margin-left:10px}.pointer[_ngcontent-%COMP%]{cursor:pointer}div.disabled[_ngcontent-%COMP%]{pointer-events:none;background:#0279FF!important;border:1px solid #0279FF!important;cursor:not-allowed;opacity:.5;color:#81bcff}.ul-li-style[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:circle!important}.ul-li-style[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:35px}.ul-li-style[_ngcontent-%COMP%]   ul.aggre-rl[_ngcontent-%COMP%]{border-top:1px solid white}.key-config[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:15px}.key-config[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .key-config-checkbox-group[_ngcontent-%COMP%]{padding-left:25px}.key-config[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .key-config-checkbox-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px;cursor:pointer}.mb-6px[_ngcontent-%COMP%]{margin-bottom:6px}.h-30px[_ngcontent-%COMP%]{height:30px}.ml15-li-none[_ngcontent-%COMP%]{margin-left:15px;list-style:none}.w-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.add-mapping-i[_ngcontent-%COMP%]{margin-right:5px;margin-top:3px}.mr-cur-resize[_ngcontent-%COMP%]{margin-right:5px;cursor:n-resize}.f-right-cp[_ngcontent-%COMP%]{float:right;margin-top:5px;cursor:pointer}.mx1-c-resize[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px;cursor:n-resize}.rule-trash-item[_ngcontent-%COMP%]{margin-top:4px;margin-right:5px;cursor:pointer;float:right}.mt-30px[_ngcontent-%COMP%]{margin-top:30px}.text-center-mt30[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.text-center-ml15[_ngcontent-%COMP%]{text-align:center;margin-left:15px}']}),e})();const at=["infoModal"],lt=["confirmModal"],ot=["closeConfirm"];function rt(e,t){1&e&&(l.TgZ(0,"div",18),l.TgZ(1,"div",19),l.TgZ(2,"div",20),l.TgZ(3,"span",21),l._uU(4,"Loading..."),l.qZA(),l.qZA(),l.qZA(),l.qZA())}function dt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",22),l.TgZ(1,"h4",23),l._uU(2),l.qZA(),l.TgZ(3,"button",24),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",25),l.qZA(),l.qZA(),l.TgZ(5,"div",26),l._uU(6),l.qZA(),l.TgZ(7,"div",27),l.TgZ(8,"button",28),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(9),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(4),l.hij(" ",e.infoBody," "),l.xp6(3),l.Oqu(e.language.Okay)}}function ct(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",22),l.TgZ(2,"h4",23),l._uU(3),l.qZA(),l.TgZ(4,"button",24),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(5,"span",25),l.qZA(),l.qZA(),l.TgZ(6,"div",26),l._UZ(7,"div",29),l.qZA(),l.TgZ(8,"div",27),l.TgZ(9,"button",28),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.mappingSourceFlag?t.openConfirmModal(!0):t.save()}),l._uU(10),l.qZA(),l.TgZ(11,"button",30),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(12),l.qZA(),l.qZA(),l.BQk()}if(2&e){const e=l.oxw();l.xp6(3),l.Oqu(e.infoTitle),l.xp6(4),l.Q6J("innerHtml",e.infoBody,l.oJD),l.xp6(3),l.Oqu(e.language.Okay),l.xp6(2),l.Oqu(e.language.Cancel)}}i(91704);let ut=(()=>{class e{constructor(e,t,i,n,s,a,l){this.router=e,this.service=t,this.sso=i,this.dialogService=n,this.commonOrgService=s,this.translateService=a,this.titleService=l,this.pageAvailable=!1,this.endpointDiscoverySelected="outbound",this.mappingSourceFlag=!1;let o=this.router.url;this.ORG_ID=this.sso.getOrganizationID(o),this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.titleService.setTitle(`${this.language.Settings} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===r?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}),this.commonOrgService.closeAlert();let r=this.sso.getRedirectModule(o);this.titleService.setTitle(`${this.language.Settings} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===r?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.getData()}ngAfterViewInit(){this.loaded=!0}ngOnDestroy(){this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.listSubs&&this.listSubs.unsubscribe(),this.createSubs&&this.createSubs.unsubscribe(),this.updateSubs&&this.updateSubs.unsubscribe()}getData(){this.listSubs=this.service.getOrg(this.ORG_ID).subscribe(e=>{this.orgData=e,e&&this.orgData&&null!=this.orgData.retentionPeriodDays&&(this.age=this.orgData.retentionPeriodDays)},e=>{this.pageErrorHandle(e)})}createData(){this.createSubs=this.service.createOrg(this.ORG_ID,{orgId:this.ORG_ID,tenantId:0}).subscribe(e=>{this.orgData=e,this.loading=!1,this.showButton=!1,this.orgData&&null!=this.orgData.retentionPeriodDays&&(this.age=this.orgData.retentionPeriodDays)},e=>{this.pageErrorHandle(e)})}changeAge(){this.showButton=!this.orgData||!this.orgData.retentionPeriodDays||this.orgData.retentionPeriodDays!=this.age}validateTimeDelay(){if(null==this.age||isNaN(this.age)||this.age<5||this.age>200)return this.infoTitle="",this.infoBody=this.language["Age Out days should be between 5 to 200"],this.closeModal(),void(this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1}));this.orgData&&this.orgData.nameFormat&&JSON.parse(this.orgData.nameFormat).length?this.openConfirmModal(!0):(this.mappingSourceFlag=!0,this.openConfirmModal(!1))}openConfirmModal(e){e?(this.infoTitle=this.language["Confirm change :"],this.infoBody=`${this.language.ageOut}: ${this.age} ${this.language.days}`,this.mappingSourceFlag=!1):(this.infoTitle=`${this.language.Info} :`,this.infoBody=this.language["There is no mapping source. Would you like to continue?"]),this.closeModal(),this.modalRef=this.dialogService.open(this.confirmModal,{backdrop:"static",keyboard:!1})}save(){this.commonOrgService.closeAlert();let e=this.orgData&&null!=this.orgData?this.orgData:{orgId:this.ORG_ID};e.retentionPeriodDays=null!=this.age?this.age:180,this.updateSubs=this.service.updateOrgPUT(this.ORG_ID,e).subscribe(e=>{this.orgData=e,this.loading=!1,this.showButton=!1,this.orgData&&this.orgData.retentionPeriodDays&&(this.age=this.orgData.retentionPeriodDays),this.closeModal()},e=>{this.closeModal(),this.pageErrorHandle(e)})}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e){let t="";400==e.status?(this.infoBody=this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle="Error",this.openInfoModal(),this.loading=!1):(401==e.status?(this.errorMessage=this.language["Access Denied"],t=this.language["Access Denied"]):(t=this.commonOrgService.pageErrorHandle(e),404==e.status&&"Invalid organization provided for update"==t&&(t=this.language["Invalid Age Out value provided for update"])),this.commonOrgService.openErrorAlert(t),this.commonOrgService.pageScrollTop(),this.loading=!1)}openInfoModal(){this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.F0),l.Y36(Z.U),l.Y36(r.t6),l.Y36(v.FF),l.Y36(T.v),l.Y36(C.s),l.Y36(I.Dx))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-settings"]],viewQuery:function(e,t){if(1&e&&(l.Gf(at,7),l.Gf(lt,7),l.Gf(ot,7)),2&e){let e;l.iGM(e=l.CRH())&&(t.infoModal=e.first),l.iGM(e=l.CRH())&&(t.confirmModal=e.first),l.iGM(e=l.CRH())&&(t.closeConfirm=e.first)}},decls:25,vars:7,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],[1,"row","my-3","p-2"],[1,"col-md-12"],[1,"fw100"],[1,"form-group","row"],["for","age",1,"col-sm-2"],[1,"error"],[1,"col-sm-6"],[1,"row"],[1,"ccl-form","col-sm-6"],["type","number","id","age","placeholder","","name","age","min","5","max","200",1,"",3,"ngModel","ngModelChange","keyup","change"],[1,"col-sm-6","pl-0"],[1,"age-out-days-text","pt-1"],["id","",1,"form-text","text-muted"],["type","button","id","apply-btn",1,"btn-default","btn-primary",3,"disabled","click"],["infoModal",""],["confirmModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[3,"innerHtml"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.YNc(1,rt,5,0,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"form",4),l.TgZ(5,"div",5),l.TgZ(6,"label",6),l._uU(7),l.TgZ(8,"span",7),l._uU(9,"*"),l.qZA(),l.qZA(),l.TgZ(10,"div",8),l.TgZ(11,"div",9),l.TgZ(12,"div",10),l.TgZ(13,"input",11),l.NdJ("ngModelChange",function(e){return t.age=e})("keyup",function(){return t.changeAge()})("change",function(){return t.changeAge()}),l.qZA(),l.qZA(),l.TgZ(14,"div",12),l.TgZ(15,"label",13),l._uU(16),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"small",14),l._uU(18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"button",15),l.NdJ("click",function(){return t.validateTimeDelay()}),l._uU(20),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(21,dt,10,3,"ng-template",null,16,l.W1O),l.YNc(23,ct,13,4,"ng-template",null,17,l.W1O)),2&e&&(l.xp6(1),l.Q6J("ngIf",t.loading),l.xp6(6),l.hij("",t.language.ageOut," "),l.xp6(6),l.Q6J("ngModel",t.age),l.xp6(3),l.Oqu(t.language.days),l.xp6(2),l.hij("(",t.language.byDefault,")"),l.xp6(1),l.Q6J("disabled",!t.showButton),l.xp6(1),l.Oqu(t.language.apply))},directives:[n.O5,s._Y,s.JL,s.F,s.qQ,s.Fd,s.wV,s.Fj,s.JJ,s.On],styles:[""]}),e})(),gt=(()=>{class e{constructor(e){this.httpClient=e,this.subnet="subnet",this.staticSubnet="staticsubnet",this.arrayToObject=(e,t)=>e.reduce((e,i)=>(e[i[t]]=i,e),{}),this.baseUrl=b.N.faAdminURL;let t=new _.WM({"Content-Type":"application/json"});this.options={headers:t},this.export=this.baseUrl+"export/"}getSubnets(e){return this.httpClient.get(`${b.N.FLOW_BASE_URL}agg/aggregationsubnet?org-id=${e}`)}addSubnet(e,t){return this.httpClient.post(`${b.N.FLOW_BASE_URL}agg/aggregationsubnet?org-id=${t}&name=${e.name}&subnets=${e.subnets}`,this.options)}importSubnets(e,t){return this.httpClient.post(`${b.N.FLOW_BASE_URL}agg/aggregationsubnet/import?org-id=${t}`,e)}deleteSubnet(e,t){return this.httpClient.request("DELETE",`${b.N.FLOW_BASE_URL}agg/aggregationsubnet?org-id=${e}`,{body:t})}updateSubnet(e,t,i){return this.httpClient.put(`${b.N.FLOW_BASE_URL}agg/aggregationsubnet?org-id=${i}`,t,this.options)}exportProcess(e){let t=[];return e.forEach(e=>{t.push({subnet:e.subnet?e.subnet:"",excluded:e.excluded?e.excluded:""})}),t}importDataProcess(e,t){return e.forEach(e=>{e.excluded=!("N"==e.excluded.toUpperCase()||"NO"==e.excluded.toUpperCase()),e.isstatic=!1,e.isv4=!0,e.action=t?"Create":"Update"}),e}checkData(e){if(Array.isArray(e[0])){let t=[];return e.forEach(e=>{t.push({subnet:e[0],excluded:e[1]})}),t}return e}trimSubnet(e){for(e=e.trim();"."===e[e.length-1];)e=e.slice(0,-1);return e}isSubnetV4(e){return 4==e.split("/")[0].split(".").length}isSubnetV6(e){return 6==e.split("/")[0].split(".").length}deleteObjectFromArray(e,t){return e.filter(e=>e._id!==t)}Export(e){return this.httpClient.post(`${b.N.FLOW_BASE_URL}agg/aggregationsubnet/export?org-id=${e}`,{})}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(_.eN))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ht=["infoModal"],pt=["deleteModal"],mt=["multiDeleteModal"],bt=["importModal"],ft=["fullImportInput"],Zt=["incImportInput"];function _t(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"div",21),l.TgZ(2,"div",22),l.TgZ(3,"span",23),l._uU(4),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Oqu(e.language.Loading)}}function xt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",24),l.TgZ(1,"div",25),l.TgZ(2,"div",26),l.TgZ(3,"div"),l.TgZ(4,"button",27),l.NdJ("click",function(){return l.CHM(e),l.oxw().create()}),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"div"),l.TgZ(7,"button",28),l.NdJ("click",function(){return l.CHM(e),l.oxw().export()}),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"div",29),l.TgZ(10,"button",30),l.NdJ("click",function(){return l.CHM(e),l.oxw().fullImportUpload()}),l._uU(11),l.qZA(),l.TgZ(12,"input",31,32),l.NdJ("change",function(t){return l.CHM(e),l.oxw().fullImport(t,!0)}),l.qZA(),l.qZA(),l.TgZ(14,"div",29),l.TgZ(15,"label",33),l._uU(16),l.qZA(),l.TgZ(17,"input",34,35),l.NdJ("change",function(t){return l.CHM(e),l.oxw().fullImport(t,!1)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",36),l.TgZ(20,"div",37),l._UZ(21,"input",38),l.TgZ(22,"button",39),l._UZ(23,"i",40),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(5),l.hij(" ",e.language.create," "),l.xp6(3),l.hij(" ",e.language.export," "),l.xp6(3),l.hij(" ",e.language.fullImport," "),l.xp6(5),l.hij("",e.language.incrementalImport," ")}}function At(e,t){if(1&e&&(l.TgZ(0,"div",59),l.TgZ(1,"span",60),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Oqu(e.language.addSubnets)}}function vt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",59),l.TgZ(1,"span",60),l._uU(2),l.qZA(),l.TgZ(3,"span",61),l.NdJ("click",function(){const t=l.CHM(e).index;return l.oxw(2).removeSubnet(t)}),l._UZ(4,"i",62),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e)}}function Tt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section"),l.TgZ(1,"div",41),l.TgZ(2,"div",42),l.TgZ(3,"form"),l.TgZ(4,"div",43),l.TgZ(5,"div",44),l.TgZ(6,"label",45),l._uU(7),l.TgZ(8,"span",46),l._uU(9,"*"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",47),l.TgZ(11,"input",48),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().createName=t})("blur",function(){l.CHM(e);const t=l.oxw();return t.removeUnwantedSpace("createName",t.createName)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",43),l.TgZ(13,"div",44),l.TgZ(14,"label",45),l._uU(15),l.TgZ(16,"span",46),l._uU(17,"*"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",47),l.YNc(19,At,3,1,"div",49),l.YNc(20,vt,5,1,"div",50),l._UZ(21,"label",51),l.TgZ(22,"input",52),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().createSubnet=t})("blur",function(){l.CHM(e);const t=l.oxw();return t.removeUnwantedSpace("createSubnet",t.createSubnet)}),l.qZA(),l.qZA(),l.TgZ(23,"button",53),l.NdJ("click",function(){return l.CHM(e),l.oxw().addSubnet()}),l._uU(24),l.qZA(),l.qZA(),l.TgZ(25,"div",54),l.TgZ(26,"div",55),l._UZ(27,"label",56),l.qZA(),l.TgZ(28,"button",57),l.NdJ("click",function(){return l.CHM(e),l.oxw().submit()}),l._uU(29),l.qZA(),l.TgZ(30,"button",58),l.NdJ("click",function(){return l.CHM(e),l.oxw().cancel()}),l._uU(31),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(7),l.hij("",e.language.name," "),l.xp6(4),l.Q6J("ngModel",e.createName),l.xp6(4),l.hij("",e.language.subnets," "),l.xp6(4),l.Q6J("ngIf",!e.createSubnetsList.length),l.xp6(1),l.Q6J("ngForOf",e.createSubnetsList),l.xp6(2),l.Q6J("ngModel",e.createSubnet),l.xp6(2),l.hij(" ",e.language.Add," "),l.xp6(5),l.hij(" ",e.language.submit," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function Ct(e,t){if(1&e&&(l.TgZ(0,"tr",70),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.s9C("id",e._id),l.xp6(2),l.Oqu(e.action),l.xp6(2),l.Oqu(e.name),l.xp6(2),l.Oqu(e.subnets),l.xp6(2),l.Oqu(e.subnets_old?e.subnets_old:"")}}function It(e,t){if(1&e&&(l.TgZ(0,"div",4),l.TgZ(1,"div",68),l.TgZ(2,"table",69),l.TgZ(3,"thead"),l.TgZ(4,"tr"),l.TgZ(5,"th"),l._uU(6),l.qZA(),l.TgZ(7,"th"),l._uU(8),l.qZA(),l.TgZ(9,"th"),l._uU(10),l.qZA(),l.TgZ(11,"th"),l._uU(12),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"tbody"),l.YNc(14,Ct,9,5,"tr",15),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(2),l.Q6J("dtOptions",e.importTableOptions),l.xp6(4),l.Oqu(e.language.action),l.xp6(2),l.Oqu(e.language.name),l.xp6(2),l.Oqu(e.language.subnets),l.xp6(2),l.AsE("",e.language.old," ",e.language.subnets,""),l.xp6(2),l.Q6J("ngForOf",e.importTableData)}}function Dt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section"),l.YNc(1,It,15,7,"div",63),l.TgZ(2,"div",64),l.TgZ(3,"div",65),l.TgZ(4,"button",66),l.NdJ("click",function(){return l.CHM(e),l.oxw().submitImport()}),l._uU(5),l.qZA(),l.TgZ(6,"button",67),l.NdJ("click",function(){return l.CHM(e),l.oxw().cancel()}),l._uU(7),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngIf",e.tablePreview),l.xp6(3),l.Q6J("disabled",e.disabledSubmitBtn()),l.xp6(1),l.hij(" ",e.language.submit," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function St(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",74),l.TgZ(1,"div",8),l.TgZ(2,"span",75),l.TgZ(3,"div",76),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw().edit(t)}),l._UZ(4,"i",77),l.qZA(),l.qZA(),l.TgZ(5,"span",75),l.TgZ(6,"input",78),l.NdJ("click",function(t){l.CHM(e);const i=l.oxw().$implicit;return l.oxw().getDeleteIds(t,i)}),l.qZA(),l.qZA(),l.TgZ(7,"span",75),l.TgZ(8,"div",79),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw().delete(t)}),l._UZ(9,"i",14),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw().$implicit,t=l.oxw();l.xp6(3),l.s9C("title",t.language.Edit),l.xp6(3),l.Gre("delete_id_",e._id,""),l.s9C("id",e._id),l.s9C("value",e._id),l.MGl("name","delete_id_",e._id,""),l.s9C("title",t.language.Select),l.xp6(2),l.s9C("title",t.language.Delete)}}function yt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",80),l.TgZ(1,"div",81),l.TgZ(2,"span",82),l.TgZ(3,"div",83),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().$implicit;return l.oxw().updateSave(t._id)}),l._UZ(4,"i",84),l.qZA(),l.qZA(),l.TgZ(5,"span",82),l.TgZ(6,"div",85),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).updateCancel()}),l._UZ(7,"i",86),l.qZA(),l.qZA(),l.qZA(),l.qZA()}}function Ot(e,t){if(1&e&&(l.TgZ(0,"div"),l._uU(1),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",e.newSubnets[0]?e.newSubnets[0]:""," ")}}function Mt(e,t){if(1&e&&(l.ynx(0),l._uU(1),l._UZ(2,"br"),l.BQk()),2&e){const e=t.$implicit;l.xp6(1),l.hij(" ",e,"")}}function wt(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"div",87),l._UZ(2,"i",88),l._UZ(3,"i",89),l._uU(4," \xa0\xa0( "),l.TgZ(5,"span",90),l._uU(6),l.qZA(),l._uU(7," ) "),l.TgZ(8,"span",91),l._uU(9),l.qZA(),l.qZA(),l.TgZ(10,"div",92),l.YNc(11,Mt,3,1,"ng-container",93),l.qZA(),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.uIk("id","collapse-btn-v4-"+e._id)("data-target","#collapse-subs-"+e._id)("aria-controls","collapse-subs-"+e._id),l.xp6(5),l.Oqu(e.newSubnets.length),l.xp6(2),l.uIk("id","collapse-address-v4-"+e._id),l.xp6(1),l.hij("\xa0\xa0",e.newSubnets[0],""),l.xp6(1),l.uIk("id","collapse-subs-"+e._id),l.xp6(1),l.Q6J("ngForOf",e.newSubnets)}}function qt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",104),l.TgZ(1,"span",105),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().index;return l.oxw(3).showEditDataInput(t,"subnet")}),l._uU(2),l.qZA(),l.TgZ(3,"span",106),l.NdJ("click",function(){l.CHM(e);const t=l.oxw().index;return l.oxw(3).removeEditSubnet(t)}),l._UZ(4,"i",107),l.qZA(),l.qZA()}if(2&e){const e=l.oxw().$implicit;l.xp6(2),l.hij(" ",e,"")}}function Rt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",108),l.TgZ(1,"div",37),l.TgZ(2,"input",109),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(4).newEditDataValue=t})("blur",function(){l.CHM(e);const t=l.oxw(4);return t.removeUnwantedSpace("newEditDataValue",t.newEditDataValue)}),l.qZA(),l.TgZ(3,"div",110),l.TgZ(4,"i",111),l.NdJ("click",function(){return l.CHM(e),l.oxw(4).modifyEditData()}),l.qZA(),l.TgZ(5,"i",112),l.NdJ("click",function(){return l.CHM(e),l.oxw(4).hideEditDataInput()}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(4);l.xp6(2),l.Q6J("ngModel",e.newEditDataValue)}}function Nt(e,t){if(1&e&&(l.TgZ(0,"ul",101),l.YNc(1,qt,5,1,"li",102),l.YNc(2,Rt,6,1,"div",103),l.qZA()),2&e){const e=t.index,i=l.oxw(3);l.xp6(1),l.Q6J("ngIf",null==(null==i.modifyDataInfo?null:i.modifyDataInfo.index)||(null==i.modifyDataInfo?null:i.modifyDataInfo.index)!=e),l.xp6(1),l.Q6J("ngIf",(null==i.modifyDataInfo?null:i.modifyDataInfo.index)==e)}}function kt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",94),l.ynx(2),l.YNc(3,Nt,3,2,"ul",95),l.BQk(),l.qZA(),l.TgZ(4,"div",96),l.TgZ(5,"div",97),l.TgZ(6,"input",98),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).editSubnet=t})("blur",function(){l.CHM(e);const t=l.oxw(2);return t.removeUnwantedSpace("editSubnet",t.editSubnet)}),l.qZA(),l.TgZ(7,"span",99),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).addEditSubnet()}),l._UZ(8,"i",100),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(3),l.Q6J("ngForOf",e.editSubnetsList),l.xp6(3),l.Q6J("ngModel",e.editSubnet)}}function Et(e,t){if(1&e&&(l.TgZ(0,"tr",70),l.TgZ(1,"td",71),l.YNc(2,St,10,9,"div",72),l.YNc(3,yt,8,0,"div",73),l.qZA(),l.TgZ(4,"td"),l._uU(5),l.qZA(),l.TgZ(6,"td"),l.YNc(7,Ot,2,1,"div",3),l.YNc(8,wt,12,8,"div",3),l.YNc(9,kt,9,2,"div",3),l.qZA(),l.qZA()),2&e){const e=t.$implicit,i=l.oxw();l.s9C("id",e._id),l.xp6(2),l.Q6J("ngIf",i.editOnValue!=e._id),l.xp6(1),l.Q6J("ngIf",i.editOnValue==e._id),l.xp6(2),l.hij(" ",e.name?e.name:""," "),l.xp6(2),l.Q6J("ngIf",i.editOnValue!=e._id&&1==e.newSubnets.length),l.xp6(1),l.Q6J("ngIf",i.editOnValue!=e._id&&e.newSubnets.length>1),l.xp6(1),l.Q6J("ngIf",i.editOnValue==e._id)}}function Pt(e,t){if(1&e&&(l.TgZ(0,"li",124),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Oqu(e.name)}}function Ut(e,t){if(1&e&&(l.TgZ(0,"ul",122),l.YNc(1,Pt,2,1,"li",123),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",e.invalidImportSubnet)}}function Ft(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",113),l.TgZ(1,"h4",114),l._uU(2),l.qZA(),l.TgZ(3,"button",115),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",116),l.qZA(),l.qZA(),l.TgZ(5,"div",117),l.TgZ(6,"p",118),l._uU(7),l.qZA(),l.TgZ(8,"div",59),l.TgZ(9,"p",118),l._uU(10),l.qZA(),l.YNc(11,Ut,2,1,"ul",119),l.qZA(),l.qZA(),l.TgZ(12,"div",120),l.TgZ(13,"button",121),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(14),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(5),l.hij("",e.invalidImportSubnet.length?e.language.Note+" - "+e.language["No subnet imported"]:""," "),l.xp6(3),l.Oqu(e.infoBody),l.xp6(1),l.Q6J("ngIf",e.invalidImportSubnet.length),l.xp6(3),l.hij(" ",e.language.Okay," ")}}function Jt(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",113),l.TgZ(2,"h4",114),l._uU(3),l.qZA(),l.TgZ(4,"button",115),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(5,"span",116),l.qZA(),l.qZA(),l.TgZ(6,"div",125),l.TgZ(7,"table",59),l.TgZ(8,"tr"),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",120),l.TgZ(12,"button",121),l.NdJ("click",function(){return l.CHM(e),l.oxw().confirmDelete()}),l._uU(13),l.qZA(),l.TgZ(14,"button",126),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(15),l.qZA(),l.qZA(),l.BQk()}if(2&e){const e=l.oxw();l.xp6(3),l.Oqu(e.infoTitle),l.xp6(7),l.Oqu(e.deleteData.name?e.deleteData.name:""),l.xp6(3),l.hij(" ",e.language.Okay," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function Ht(e,t){if(1&e&&(l.TgZ(0,"tr"),l.TgZ(1,"td"),l._uU(2),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e||"")}}function Lt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",113),l.TgZ(1,"h4",114),l._uU(2),l.qZA(),l.TgZ(3,"button",115),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",116),l.qZA(),l.qZA(),l.TgZ(5,"div",117),l.TgZ(6,"table",59),l.YNc(7,Ht,3,1,"tr",93),l.qZA(),l.qZA(),l.TgZ(8,"div",120),l.TgZ(9,"button",121),l.NdJ("click",function(){return l.CHM(e),l.oxw().confirmDeleteSecleted()}),l._uU(10),l.qZA(),l.TgZ(11,"button",126),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(12),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(5),l.Q6J("ngForOf",e.deleteSubnets),l.xp6(3),l.hij(" ",e.language.Okay," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}function jt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",113),l.TgZ(1,"h4",114),l._uU(2),l.qZA(),l.TgZ(3,"button",115),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._UZ(4,"span",116),l.qZA(),l.qZA(),l.TgZ(5,"div",125),l._UZ(6,"table",127),l.qZA(),l.TgZ(7,"div",120),l.TgZ(8,"button",121),l.NdJ("click",function(){return l.CHM(e),l.oxw().proceedImport()}),l._uU(9),l.qZA(),l.TgZ(10,"button",126),l.NdJ("click",function(){return l.CHM(e),l.oxw().closeModal()}),l._uU(11),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.infoTitle),l.xp6(4),l.Q6J("innerHtml",e.infoBody,l.oJD),l.xp6(3),l.hij(" ",e.language.Okay," "),l.xp6(2),l.hij(" ",e.language.Cancel," ")}}const $t=i(91704),Vt=[{path:"",component:g,children:[{path:"management",component:ge,data:{title:"Calix Cloud - Flow Configuration"}},{path:"mapping_source",component:st,data:{title:"Calix Cloud - Flow Configuration"}},{path:"settings",component:ut,data:{title:"Calix Cloud - Flow Configuration"}},{path:"subnets",component:(()=>{class e{constructor(e,t,i,n,s,a,l,o,r,d,c){this.commonFunctionsService=e,this.exportExcel=t,this.dataTablecreatorService=i,this.sso=n,this.router=s,this.service=a,this.dialogService=l,this.commonOrgService=o,this.translateService=r,this.titleService=d,this.common=c,this.pageAvailable=!1,this.formVisible=!1,this.buttonVisible=!0,this.currentTableRowCount=0,this.selectOptions=["No","Yes"],this.selectedSubnet="No",this.tableOptions={pagingType:"full_numbers",order:[1,"asc"],columnDefs:[{targets:[0],orderable:!1}],stateSave:!0,drawCallback:e=>{this.sortData={column:e.aaSorting[0][0]?e.aaSorting[0][0]:1,type:e.aaSorting[0][1]?e.aaSorting[0][1]:"asc"},setTimeout(()=>{this.resetDelete()},0),this.currentTableRowCount=e.aiDisplay.length,e.aoData.length<=e._iDisplayLength&&$t(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.newSubnet="",this.empty={Subnets:"",Name:""},this.add={name:"",subnets:""},this.importTableOptions={pagingType:"full_numbers",pageLength:10,order:[0,"asc"],dom:"tipr"},this.tablePreview=!1,this.fullLoader=!0,this.isFullImport=!0,this.subnetError=!1,this.isIPv4=!0,this.dtTrigger=new p.xQ,this.isRerender=!1,this.deleteIds=[],this.deleteSubnets=[],this.subnetVersions=["SubnetIPV4","SubnetIPV6"],this.subnetVersionsSelected="SubnetIPV4",this.loading=!0,this.createSubnetsList=[],this.editSubnet="",this.editSubnetsList=[],this.storageData={},this.importDeleteData=[],this.importData=[],this.importTableData=[],this.importUpdateASCreate=[],this.sortData={column:1,type:"asc"},this.modifyDataInfo={},this.newEditDataValue="",this.columnName={subnets:"Subnets",name:"Name"},this.invalidImportSubnet=[],this.disableIcImportSubmitBtn=!1,this.language=this.translateService.defualtLanguage,this.language&&(this.pageAvailable=!0),this.translateSubscribe=this.translateService.selectedLanguage.subscribe(e=>{this.language=e,this.reloadCurrentRoute(),this.titleService.setTitle(`${this.language.Subnet} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`),this.dataAvailable=!1,this.isRerender=!0,this.setTableOptions("language"),this.exportColoumnNames={subnets:this.language.subnets,name:this.language.Name}}),this.exportColoumnNames={subnets:this.language.subnets,name:this.language.Name},this.commonOrgService.closeAlert();let u=this.router.url;this.ORG_ID=this.sso.getOrganizationID(u),this.frTable=this.translateService.fr;let g=this.sso.getRedirectModule(u);this.titleService.setTitle(`${this.language.Subnet} - ${this.language.end} - ${this.language.flowconfiguration} - ${"systemAdministration"===g?this.language["System Administration"]:this.language.administration} - ${this.language["Calix Cloud"]}`)}ngOnInit(){this.removeState(),this.getSubnets(),this.tableLanguageOptions(),this.compareJSONSubs=this.dataTablecreatorService.jsonDataOfCSV.subscribe(e=>{this.invalidImportSubnet=[];try{let t=!0;(e||[]).forEach(e=>{if(this.commonFunctionsService.keysFromColumnName(e,this.exportColoumnNames),e.name&&e.name.length>64)return this.invalidImportSubnet.push(e),this.infoTitle=this.language["Invalid Value"],this.infoBody=`${this.language["Invalid Name - Name should not exceed 64 characters."]}`,t=!1,void this.openInfoModal(!0)}),t&&(this.recreateTable=e,this.compareJsonToTableData(e))}catch(t){}}),this.setStorageData()}ngAfterViewInit(){this.loaded=!0}ngOnDestroy(){this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getSubnetsSubs&&this.getSubnetsSubs.unsubscribe(),this.addSubs&&this.addSubs.unsubscribe(),this.editSubs&&this.editSubs.unsubscribe(),this.deleteSubs&&this.deleteSubs.unsubscribe(),this.fileChangeSubs&&this.fileChangeSubs.unsubscribe(),this.exportCSVSubs&&this.exportCSVSubs.unsubscribe(),this.exportPDFSubs&&this.exportPDFSubs.unsubscribe(),this.importSubs&&this.importSubs.unsubscribe(),this.compareJSONSubs&&this.compareJSONSubs.unsubscribe()}create(){this.buttonVisible=!1,this.formVisible=!0,this.reset()}getSubnets(){this.getSubnetsSubs=this.service.getSubnets(this.ORG_ID).subscribe(e=>{this.subnetResponseData=e,e&&(this.subnetData=[...this.processData(e)],this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),setTimeout(()=>{this.resetDelete()},100))},e=>{this.setTableOptions(),this.isRerender?this.rerender():this.dtTrigger.next(),this.pageErrorHandle(e)})}setTableOptions(e){this.tableOptions={pagingType:"full_numbers",order:[this.sortData.column,this.sortData.type],columnDefs:[{targets:[0],orderable:!1}],stateSave:!0,drawCallback:e=>{this.sortData={column:e.aaSorting[0][0]?e.aaSorting[0][0]:1,type:e.aaSorting[0][1]?e.aaSorting[0][1]:"asc"},setTimeout(()=>{this.resetDelete()},0),this.currentTableRowCount=e.aiDisplay.length,e.aoData.length<=e._iDisplayLength&&$t(e.nTableWrapper).find(`#${e.sTableId}_last`).addClass("disabled")}},this.tableLanguageOptions(),e&&"language"==e?setTimeout(()=>{this.rerender(),this.dataAvailable=!0,this.loading=!1},200):setTimeout(()=>{this.dataAvailable=!0,this.loading=!1},200)}rerender(){var e;null===(e=null==this?void 0:this.dtElement.dtInstance)||void 0===e||e.then(e=>{e.destroy(),this.tableOptions.order=[this.sortData.column,this.sortData.type],setTimeout(()=>{this.dtTrigger.next()},10)})}processData(e){return e.forEach(e=>{e.newSubnets=this.commonFunctionsService.splitData(e.subnets,"|"),e._id=this.uuidv4()}),e}addSubnet(){if(this.createSubnet=this.createSubnet.trim(),""!=this.createSubnet&&""!=this.createSubnet){if(!this.subnetValidatorIpv4(this.createSubnet)&&!this.subnetValidatorIpv6(this.createSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=`${this.createSubnet}`,void this.openInfoModal(!1);if(this.createSubnetsList.includes(this.createSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);this.createSubnetsList.push(this.createSubnet),this.createSubnet=""}}removeSubnet(e){this.createSubnetsList.splice(e,1)}submit(){if(this.commonOrgService.closeAlert(),this.createName=this.createName?this.createName.trim():"",!this.createName)return this.infoTitle=this.language["Name Cannot be empty"],this.infoBody="",void this.openInfoModal(!1);if(this.createName.length>64)return this.infoTitle=this.language["Invalid Value"],this.infoBody=`${this.language["Invalid Name"]} - Name should not exceed 64 characters.`,void this.openInfoModal(!1);if(this.subnetData.filter(e=>e.name==this.createName).length)return this.infoTitle="Name Cannot be duplicate",this.infoBody="",void this.openInfoModal(!1);if(this.createSubnet=this.createSubnet?this.createSubnet.trim():"",""==this.createSubnet&&!this.createSubnetsList.length)return this.infoTitle=this.language["Invalid subnet"],this.infoBody="",void this.openInfoModal(!1);let e=this.createSubnetsList;if(""!=this.createSubnet){if(!this.subnetValidatorIpv4(this.createSubnet)&&!this.subnetValidatorIpv6(this.createSubnet))return this.infoTitle=this.language["Invalid subnet"],this.infoBody=`${this.createSubnet}`,void this.openInfoModal(!1);if(e.includes(this.createSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);e=[this.createSubnet,...e]}let t=this.add;t.name=this.createName?encodeURI(this.createName).replace(/-/g,"%2D"):"",t.subnets=0!=e.length?e.join("|"):"",t.orgId=this.ORG_ID,this.loading=!0,this.addSubs=this.service.addSubnet(t,this.ORG_ID).subscribe(e=>{this.addSubnetResponse=e,this.isRerender=!0,this.cancel(),this.getSubnets()},e=>{this.pageErrorHandle(e,this.language["Create Fail!"])})}edit(e){if(this.editData=e,this.editOnValue=e._id,this.editName=e.name,this.editSubnetsList=this.commonFunctionsService.splitData(e.subnets,"|"),-1!==this.deleteIds.indexOf(e._id)){this.deleteIds.splice(this.deleteIds.indexOf(e._id),1),this.deleteSubnets.splice(this.deleteSubnets.indexOf(e.name),1);let t=$t('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=t?($t("#selectDeselectAll").prop("checked",!1),$t("#selectDeselectAll-span").show()):$t("#selectDeselectAll-span").hide():($t("#selectDeselectAll").prop("checked",!1),$t("#selectDeselectAll-span").hide())}const t=this.deleteSubnets.findIndex(t=>t==e.subnets);this.deleteSubnets.splice(t,1),this.hideEditDataInput()}updateSave(e){var t;if(this.editName&&""==this.editName)return this.infoTitle=this.language["Invalid name"],this.infoBody="",void this.openInfoModal(!1);if((null===(t=this.editName)||void 0===t?void 0:t.length)>64)return this.infoTitle=this.language["Invalid Value"],this.infoBody=`${this.language["Invalid Name"]} - Name should not exceed 64 characters.`,void this.openInfoModal(!1);if(this.editSubnet=this.editSubnet.trim(),""==this.editSubnet&&!this.editSubnetsList.length)return this.infoTitle=this.language["Invalid subnet"],this.infoBody="",void this.openInfoModal(!1);let i=this.editSubnetsList;if(""!=this.editSubnet){if(!this.subnetValidatorIpv4(this.editSubnet)&&!this.subnetValidatorIpv6(this.editSubnet))return this.infoTitle=this.language["Invalid subnet"],this.infoBody=`${this.editSubnet}`,void this.openInfoModal(!1);if(i.includes(this.editSubnet))return this.infoTitle=this.language["Invalid request"],this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);i=[this.editSubnet,...i]}let n={name:this.editName?this.editName:"",subnets:0!=i.length?i.join("|"):""};this.loading=!0,this.editSubs=this.service.updateSubnet(this.editData._id,n,this.ORG_ID).subscribe(e=>{this.updateResponse=e,this.isRerender=!0,this.cancel(),this.getSubnets(),this.editOnValue=void 0},e=>{this.pageErrorHandle(e)})}updateCancel(){this.editOnValue=void 0}validateSubnetv4(e){if(this.subnetError=!1,!e)return void(this.subnetError=!0);let t=this.service.trimSubnet(e);return t&&this.commonFunctionsService.isValidSubnetV4(t)?(this.isIPv4=!0,this.subnet=t,!0):void(this.subnetError=!0)}validateSubnetv6(e){if(this.subnetError=!1,!e)return void(this.subnetError=!0);let t=this.service.trimSubnet(e);return t&&this.commonFunctionsService.isValidSubnetV6(t)?(this.isIPv4=!1,void(this.subnet=t)):void(this.subnetError=!0)}cancel(){this.formVisible=!1,this.buttonVisible=!0,this.tablePreview=!1,this.disableIcImportSubmitBtn=!1,this.reset()}getDeleteIds(e,t){if(e.target.checked){this.deleteIds.push(t._id),this.deleteSubnets.push(t.name);let e=$t('input[name^="delete_id_"]').length;this.deleteIds.length==e?($t("#selectDeselectAll").prop("checked",!0),$t("#selectDeselectAll-span").hide()):$t("#selectDeselectAll-span").show()}else{this.deleteIds.splice(this.deleteIds.indexOf(t._id),1),this.deleteSubnets.splice(this.deleteSubnets.indexOf(t.name),1);let e=$t('input[name^="delete_id_"]').length;this.deleteIds.length?this.deleteIds.length!=e?($t("#selectDeselectAll").prop("checked",!1),$t("#selectDeselectAll-span").show()):$t("#selectDeselectAll-span").hide():($t("#selectDeselectAll").prop("checked",!1),$t("#selectDeselectAll-span").hide())}}delete(e){this.deleteData=e,this.infoTitle=this.language["Delete endpoint subnet rule?"],this.infoBody=`${e.name}`,this.closeModal(),this.modalRef=this.dialogService.open(this.deleteModal,{backdrop:"static",keyboard:!1})}confirmDelete(){this.deleteSubs=this.service.deleteSubnet(this.ORG_ID,[{name:this.deleteData.name,subnets:this.deleteData.subnets}]).subscribe(e=>{this.deleteResponse=e,this.isRerender=!0,this.getSubnets(),this.closeDeleteModal()},e=>{this.pageErrorHandle(e)})}cancelDelete(){this.deleteData=void 0}closeDeleteModal(){this.deleteData=void 0,this.closeModal()}selectDeselectAll(e){this.deleteIds=[],this.deleteSubnets=[];let t=0,i=$t('input[name^="delete_id_"]').length;var n=this;e?$t('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;$t(this).prop("checked",!0);let e=$t(this).attr("class").split(" ")[0].substring("delete_id_".length),s=n.subnetData.filter(t=>t._id===e);n.deleteIds.push(e),n.deleteSubnets.push(s[0].name),t++}):$t('input[name^="delete_id_"]').each(function(){if(t>=i)return!1;$t(this).prop("checked",!1),n.deleteIds=[],n.deleteSubnets=[],t++})}showAllInnerCheckBox(e){$t("#"+e.target.id).hide(),$t("#selectDeselectAll").prop("checked",!0),this.deleteIds=[],this.deleteSubnets=[],this.selectDeselectAll(!0)}deleteAllSelected(){this.deleteSubnets&&(this.deleteSubnets.sort(),this.deleteIds.sort(),this.infoTitle=this.language[1===this.deleteSubnets.length?"Delete selected endpoint subnet rule?":"Delete selected endpoint subnet rules?"],this.infoBody=this.deleteSubnets.join(", <br>"),this.closeModal(),this.modalRef=this.dialogService.open(this.multiDeleteModal,{backdrop:"static",keyboard:!1}))}confirmDeleteSecleted(){var e;let t=[];null===(e=this.subnetData)||void 0===e||e.forEach(e=>{this.deleteIds.includes(e._id)&&t.push({name:e.name,subnets:e.subnets})}),this.deleteSubs=this.service.deleteSubnet(this.ORG_ID,t).subscribe(e=>{this.selectedDelete=e,this.isRerender=!0,this.deleteIds=[],this.deleteSubnets=[],this.getSubnets(),this.closeMultiDeleteModal()},e=>{this.pageErrorHandle(e)})}closeMultiDeleteModal(){this.deleteIds=[],this.deleteSubnets=[],this.closeModal()}export(){let e=this.commonFunctionsService.generateExportName("subnet_rule",!0);this.exportCSVSubs=this.service.Export(this.ORG_ID).subscribe(t=>{this.exportData=this.exportDataConvertor(t),this.exportExcel.downLoadCSV(e,this.exportData&&this.exportData.length?this.exportData:[this.empty])},e=>{this.pageErrorHandle(e)})}exportDataConvertor(e){return Array.isArray(e)&&(0===e.length&&e.push({name:"",subnets:""}),e.forEach(e=>{delete(e=this.commonFunctionsService.columnNameFromKeys(e,this.exportColoumnNames))._id;for(const t in e)"boolean"==typeof e[t]&&(e[t]=1==e[t]?"Yes":"No")})),e}fullImportUpload(){this.infoTitle=this.language.fullImport,this.infoBody=this.language.fullImportPrompt,this.closeModal(),this.modalRef=this.dialogService.open(this.importModal,{backdrop:"static",keyboard:!1})}proceedImport(){$t("#fullImportUpload").click(),this.closeModal()}fullImport(e,t){if(this.isFullImport=t,"csv"!=[...e.target.files][0].name.split(".").pop())return e.target.value="",this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1,void this.cancel();this.dataTablecreatorService.getJsonFromCsv(e),e.target.value=""}disabledSubmitBtn(){return!!(!this.isFullImport&&this.disableIcImportSubmitBtn||this.isFullImport&&!this.disableSubmitFullImport||this.isFullImport&&!this.disableSubmitImport)}compareJsonToTableData(e){let t=this.subnetData.length?this.subnetData:[],i=[],n=!1;if(e.forEach(e=>{let s="Create";n=!1,t.filter(t=>t.subnets==e.subnets).length&&(n=!0,s="Update",this.isFullImport?(s="Create",e.action=s,this.importUpdateASCreate.push(e)):s="Update"),(e.subnets||e.name)&&i.push({action:s,subnets:e.subnets,name:e.name})}),!i.length)return this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1,void this.cancel();if(this.isFullImport){let e=[];t.forEach(t=>{n=!1,0==i.filter(e=>e.subnets==t.subnets).length&&e.push({action:"Delete",subnets:t.subnets,name:t.name})}),this.importDeleteData=e}let s={};i.reduce((e,t)=>(s[t.name]?s[t.name].subnets=`${s[t.name].subnets}|${t.subnets}`:s[t.name]=t,s),{}),i=Object.values(s),this.loading=!0,this.submitImport(!0,i)}submitImport(e=!1,t){this.disableIcImportSubmitBtn=!1;let i={clientIP:this.storageData.clientIp,dry_run:e,full_import:this.isFullImport,import_data:[],orgId:this.ORG_ID?this.ORG_ID:50,userId:this.sso.getUserId()},n=e?t:[];if(!e){if(this.importData.forEach(e=>{["Create","Update"].includes(e.action)&&n.push({action:this.isFullImport?"Create":e.action,subnets:e.subnets,name:e.name})}),!n.length&&this.importDeleteData.length&&(this.disableSubmitFullImport=!1,this.disableSubmitImport=!1),!n.length&&!this.importDeleteData.length)return this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1,void this.cancel();if(!this.isFullImport){const e=this.subnetData.map(e=>String(e.subnets));n=n.filter(t=>!e.includes(String(t.subnets)))}}i.import_data=n,this.importSubs=this.service.importSubnets(i,this.ORG_ID).subscribe(t=>{e?(t&&t.data&&0==t.data.length&&(this.infoTitle=this.language.noAvailableChange,this.infoBody="",this.openInfoModal(!1),this.loading=!1),this.importData=t||[],this.checkDryRunData(t),this.loading=!1):(this.cancel(),this.isRerender=!0,this.getSubnets())},t=>{400==t.status&&e?(this.infoTitle=this.language.objectNotFound,this.infoBody="",this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})):this.pageErrorHandle(t),this.loading=!1})}checkDryRunData(e){var t,i,n;let s=e?e.slice(0):[];this.enableImportSubmit=!1,this.importTableData=[];let a=(null===(t=this.subnetData)||void 0===t?void 0:t.length)?this.subnetData:[];if(s.forEach(e=>{"ok"!=e.validationResult.toLowerCase()&&(e.action=e.validationResult),"ok"==e.validationResult.toLowerCase()&&(this.enableImportSubmit=!0),e.subnets_old="";let t=a.filter(t=>t.name==e.name);t.length&&(this.isFullImport&&"Create"==e.action&&(e.action="Update"),e.subnets_old=t[0].subnets?t[0].subnets:""),this.importTableData.push(e)}),!this.isFullImport){let e=a.map(e=>String(e.subnets));this.disableIcImportSubmitBtn=!s.filter(t=>!e.includes(String(t.subnets))&&"ok"===t.validationResult).length}this.isFullImport&&this.importDeleteData.length&&this.importDeleteData.forEach(e=>{e.subnets_old="",this.importTableData.push(e)}),this.importTableData&&(this.disableSubmitFullImport=null===(i=this.importTableData)||void 0===i?void 0:i.some(e=>"Invalid subnet"!==e.validationResult),this.disableSubmitImport=null===(n=this.importTableData)||void 0===n?void 0:n.some(e=>"Not in a valid subnet"!==e.validationResult)),this.formVisible=!1,this.buttonVisible=!1,this.tablePreview=!0}reset(){this.createName="",this.createSubnet="",this.editName="",this.editSubnet="",this.createSubnetsList=[],this.editSubnetsList=[],this.editData=void 0,this.editOnValue=void 0}tableLanguageOptions(){"fr"==this.language.fileLanguage?(this.tableOptions.language=this.frTable,this.importTableOptions.language=this.frTable):"es"==this.language.fileLanguage?(this.tableOptions.language=this.translateService.es,this.importTableOptions.language=this.translateService.es):"de_DE"==this.language.fileLanguage?(this.importTableOptions.language=this.translateService.de_DE,this.tableOptions.language=this.translateService.de_DE):("en"==this.language.fileLanguage&&this.tableOptions.language||"en"==this.language.fileLanguage&&this.importTableOptions.language)&&(delete this.tableOptions.language,delete this.importTableOptions.language)}resetDelete(){this.selectDeselectAll(!1),$t("#selectDeselectAll").prop("checked",!1),$t("#selectDeselectAll-span").hide(),this.deleteIds=[],this.deleteSubnets=[]}subnetValidatorIpv4(e){if(e&&""!=e)return!!this.commonFunctionsService.isValidSubnetV4(e)}subnetValidatorIpv6(e){if(e&&""!=e)return!!this.commonFunctionsService.isValidSubnetV6(e)}addEditSubnet(){if(this.editSubnet=this.editSubnet.trim(),""!=this.editSubnet){if(!this.subnetValidatorIpv4(this.editSubnet)&&!this.subnetValidatorIpv6(this.editSubnet))return this.infoTitle="Invalid request",this.infoBody="",void this.openInfoModal(!1);if(this.editSubnetsList.includes(this.editSubnet))return this.infoTitle="Invalid request",this.infoBody=this.language["Duplicate Subnet"],void this.openInfoModal(!1);this.editSubnetsList.push(this.editSubnet),this.editSubnet=""}}removeEditSubnet(e){this.editSubnetsList.splice(e,1)}setStorageData(){const e=JSON.parse(localStorage.getItem("calix.login_data"));this.storageData.clientIp=null==e?void 0:e.clientIp,this.storageData.UserId=null==e?void 0:e.UserId}closeModal(){this.modalRef&&this.modalRef.close()}pageErrorHandle(e,t){var i,n;let s="";400==e.status||417==e.status?(this.infoBody=417==e.status&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message)?null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message:this.commonOrgService.pageInvalidRqstErrorHandle(e),this.infoTitle=t||"Error",this.openInfoModal(!1),this.loading=!1):(s=401==e.status?this.language["Access Denied"]:this.commonOrgService.pageErrorHandle(e),this.commonOrgService.openErrorAlert(s),this.commonOrgService.pageScrollTop(),this.loading=!1,setTimeout(()=>{this.commonOrgService.closeAlert()},3e3))}openInfoModal(e){e||(this.invalidImportSubnet=[]),this.closeModal(),this.modalRef=this.dialogService.open(this.infoModal,{backdrop:"static",keyboard:!1})}uuidv4(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}removeState(){this.commonOrgService.removeTableState("endpoint_subnets",this.router.url)}showEditDataInput(e,t){this.modifyDataInfo={index:e,type:t},this.newEditDataValue="",this.newEditDataValue=this.editSubnetsList[e]}hideEditDataInput(){this.modifyDataInfo={index:void 0,type:void 0}}modifyEditData(){let e=this.modifyDataInfo.index;return this.newEditDataValue=this.newEditDataValue.trim(),""==this.newEditDataValue?(this.infoTitle=this.language["Subnet cannot be empty"],this.infoBody="",void this.openInfoModal(!1)):this.subnetValidatorIpv4(this.newEditDataValue)||this.subnetValidatorIpv4(this.newEditDataValue)?this.editSubnetsList.includes(this.newEditDataValue)&&this.editSubnetsList.indexOf(this.newEditDataValue)!=e?(this.infoTitle=this.language["Duplicate Subnet"],this.infoBody=`${this.newEditDataValue}`,void this.openInfoModal(!1)):(this.editSubnetsList[e]=this.newEditDataValue,this.newEditDataValue="",void this.hideEditDataInput()):(this.infoTitle=this.language["Invalid Subnet format"],this.infoBody=`${this.newEditDataValue}`,void this.openInfoModal(!1))}removeUnwantedSpace(e,t){this[e]=this.common.trimSpaceFromNonObjectInputs(t)}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(f.i),l.Y36(x.O),l.Y36(A.L),l.Y36(r.t6),l.Y36(a.F0),l.Y36(gt),l.Y36(v.FF),l.Y36(T.v),l.Y36(C.s),l.Y36(I.Dx),l.Y36(D.i))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-subnet"]],viewQuery:function(e,t){if(1&e&&(l.Gf(ht,7),l.Gf(pt,7),l.Gf(mt,7),l.Gf(bt,7),l.Gf(ft,5),l.Gf(Zt,5),l.Gf(h.G,5)),2&e){let e;l.iGM(e=l.CRH())&&(t.infoModal=e.first),l.iGM(e=l.CRH())&&(t.deleteModal=e.first),l.iGM(e=l.CRH())&&(t.multiDeleteModal=e.first),l.iGM(e=l.CRH())&&(t.importModal=e.first),l.iGM(e=l.CRH())&&(t.fullImportInput=e.first),l.iGM(e=l.CRH())&&(t.incImportInput=e.first),l.iGM(e=l.CRH())&&(t.dtElement=e.first)}},decls:33,vars:18,consts:[[1,"container","position-relative"],["class","loader",4,"ngIf"],["class","row py-4",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-md-12","ccl-admin-table",3,"hidden"],["id","subnets-table","width","100%","datatable","",1,"row-border","hover","table-alter",3,"dtOptions","dtTrigger"],[1,"mxw-200","w-nowrap-200"],[1,"ccl-fc-table-icon","mxw-200"],[1,"d-flex","align-items-center",3,"hidden"],["type","checkbox","value","","id","selectDeselectAll",1,"",3,"hidden","disabled","change"],["id","selectDeselectAll-span",1,"checkbox-ui",2,"display","none",3,"hidden","click"],[1,"text-center","justify-content-center",3,"hidden"],["id","delete-selected-btn",1,"btn-default","primary","px-2","mx-2",3,"title","disabled","click"],[1,"far","fa-trash-alt"],[3,"id",4,"ngFor","ngForOf"],["infoModal",""],["deleteModal",""],["multiDeleteModal",""],["importModal",""],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"row","py-4"],[1,"col-md-9"],[1,"d-flex"],["id","create-btn",1,"btn-default","primary","mx-2",3,"click"],["id","export-btn",1,"btn-default","primary","mx-2",3,"click"],[1,"upload-btn-wrapper"],[1,"btn-default","primary","mx-2","px-3",3,"click"],["type","file","accept",".csv","id","fullImportUpload",2,"display","none",3,"change"],["fullImportInput",""],["for","inc-import",1,"btn-default","primary","mx-2","px-3","cursor-pointer"],["type","file","id","inc-import","accept",".csv",2,"display","none",3,"change"],["incImportInput",""],[1,"col-sm-3","align-self-end","d-none"],[1,"ccl-form"],["type","search","name","searchbox","placeholder","",1,"input-sm"],[1,"serach-but","btn-default","primary","btn-icon-md","inline"],["aria-hidden","true",1,"fa","fa-search"],[1,"row","my-3","py-3"],[1,"col-md-12"],[1,"row","form-inline"],[1,"form-group","mb-2","col-md-2","align-self-start"],["for","staticEmail2",1,""],[1,"error"],[1,"ccl-form","mx-sm-3","mb-2","align-self-end"],["type","text","id","createName","placeholder","","name","createName","trimSpace","",1,"w-250px",3,"ngModel","ngModelChange","blur"],["class","w-100",4,"ngIf"],["class","w-100",4,"ngFor","ngForOf"],["for","inputPassword2",1,"sr-only"],["type","text","id","createSubnet","placeholder","","name","createSubnet","trimSpace","",1,"form-control","w-250px",3,"ngModel","ngModelChange","blur"],["type","submit",1,"mb-2","btn-default","btn-primary","align-self-end",3,"click"],[1,"row","form-inline","my-3"],[1,"form-group","mb-2","col-md-2"],["for","staticEmail2",1,"sr-only"],["type","submit","id","submit-btn",1,"btn-default","btn-primary","mx-4",3,"click"],["type","submit","id","cancel-btn",1,"btn-default","btn-dft","py-1","ml-2",3,"click"],[1,"w-100"],[1,"w-75"],[1,"w-25",3,"click"],["aria-hidden","true",1,"fa","fa-times","primary"],["class","row",4,"ngIf"],[1,"row","my-4"],[1,"col-md-8","offset-md-4"],[1,"btn-default","primary","px-3","mx-3",3,"disabled","click"],[1,"btn-default","btn-dft","py-1","px-3",3,"click"],[1,"col-md-12","ccl-admin-table"],["id","example","datatable","",1,"row-border","hover","table-alter",3,"dtOptions"],[3,"id"],[1,"action-button","w-nowrap"],["class","editable-td text-center f-size13",4,"ngIf"],["class","save-cancel-btn-group d-flex justify-content-center",4,"ngIf"],[1,"editable-td","text-center","f-size13"],[1,"pr-2"],["id","edit-btn",1,"primary",3,"title","click"],[1,"fas","fa-pencil-alt"],["type","checkbox",3,"id","value","name","title","click"],["id","delete-btn",1,"primary",3,"title","click"],[1,"save-cancel-btn-group","d-flex","justify-content-center"],[1,"ccl-fc-table-icon"],[1,"pr-1"],["id","save-btn",1,"primary","mx-3",3,"click"],[1,"fas","fa-check"],["id","cancel-btn",1,"primary",3,"click"],[1,"fas","fa-times"],["role","button","data-toggle","collapse","aria-expanded","false",1,"collapse-btn","w-nowrap"],["id","'collapse-icon-v4-' + item._id",1,"fa","fa-chevron-right","collapse-icon"],["id","'collapse-icon-v4-' + item._id",1,"fa","fa-chevron-down","collapse-icon"],[1,"sxa-bold","f-style-italic"],[1,"collapse-address"],[1,"collapse","multi-collapse"],[4,"ngFor","ngForOf"],[1,"form-group","w-250"],["class","nav flex-column",4,"ngFor","ngForOf"],[1,"form-group","row","fw100","m-0"],[1,"ccl-form","input-group","flex-nowrap"],["type","text","name","editSubnet","placeholder","","trimSpace","",1,"w150","add-subnet-input","w-200px",3,"ngModel","ngModelChange","blur"],[1,"ccl-fc-add-icon","align-self-center","mx-2",3,"click"],[1,"fa","fa-plus"],[1,"nav","flex-column"],["class","nav-item subnet-value-size",4,"ngIf"],["class","my-2 position-relative",4,"ngIf"],[1,"nav-item","subnet-value-size"],["title","Click to edit",1,"pointer",3,"click"],["data-key","",1,"remove-subnet-btn","primary","float-r22",3,"click"],[1,"fa","fa-times"],[1,"my-2","position-relative"],["type","text","name","new-edit-subnet","placeholder","","trimSpace","",1,"pr-btn","m-w200px",3,"ngModel","ngModelChange","blur"],[1,"pos-abs-right"],[1,"fas","fa-check","primary","d-inline-flex","mr-2","pointer",3,"click"],[1,"fas","fa-times","primary","d-inline-flex","pointer",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","modal-scrll"],[1,"f-size-16px"],["class","list-two",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn-default","primary","px-3",3,"click"],[1,"list-two"],["class","text-break",4,"ngFor","ngForOf"],[1,"text-break"],[1,"modal-body"],["type","button","data-dismiss","modal",1,"btn-default","btn-dft","py-1","px-3",3,"click"],[3,"innerHtml"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.YNc(1,_t,5,1,"div",1),l.YNc(2,xt,24,4,"div",2),l.YNc(3,Tt,32,9,"section",3),l.YNc(4,Dt,8,4,"section",3),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"table",6),l.TgZ(8,"thead"),l.TgZ(9,"tr"),l.TgZ(10,"th",7),l.TgZ(11,"div",8),l.TgZ(12,"div",9),l.TgZ(13,"input",10),l.NdJ("change",function(e){return t.selectDeselectAll(e.target.checked)}),l.qZA(),l.TgZ(14,"span",11),l.NdJ("click",function(e){return t.showAllInnerCheckBox(e)}),l.qZA(),l.qZA(),l.TgZ(15,"div",12),l.TgZ(16,"button",13),l.NdJ("click",function(){return t.deleteAllSelected()}),l._UZ(17,"i",14),l._uU(18),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"th"),l._uU(20),l.qZA(),l.TgZ(21,"th"),l._uU(22),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"tbody"),l.YNc(24,Et,10,7,"tr",15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(25,Ft,15,5,"ng-template",null,16,l.W1O),l.YNc(27,Jt,16,4,"ng-template",null,17,l.W1O),l.YNc(29,Lt,13,4,"ng-template",null,18,l.W1O),l.YNc(31,jt,12,4,"ng-template",null,19,l.W1O)),2&e&&(l.xp6(1),l.Q6J("ngIf",t.loading),l.xp6(1),l.Q6J("ngIf",t.buttonVisible),l.xp6(1),l.Q6J("ngIf",t.formVisible),l.xp6(1),l.Q6J("ngIf",t.tablePreview),l.xp6(2),l.Q6J("hidden",!t.dataAvailable),l.xp6(1),l.Q6J("dtOptions",t.tableOptions)("dtTrigger",t.dtTrigger),l.xp6(5),l.Q6J("hidden",t.editOnValue),l.xp6(1),l.Q6J("hidden",t.editOnValue)("disabled",0==(null==t.subnetData?null:t.subnetData.length)||0==t.currentTableRowCount),l.xp6(1),l.Q6J("hidden",t.editOnValue),l.xp6(1),l.Q6J("hidden",t.editOnValue),l.xp6(1),l.s9C("title",t.language["Delete selected"]),l.Q6J("disabled",!(null!=t.subnetData&&t.subnetData.length&&null!=t.deleteIds&&t.deleteIds.length)),l.xp6(2),l.hij(" ",t.language.selected," "),l.xp6(2),l.Oqu(t.language.name),l.xp6(2),l.Oqu(t.language.subnets),l.xp6(2),l.Q6J("ngForOf",t.subnetData))},directives:[n.O5,h.G,n.sg,s._Y,s.JL,s.F,s.Fj,s.JJ,s.On],styles:["div[aria-expanded=true][_ngcontent-%COMP%]   .fa-chevron-right[_ngcontent-%COMP%]{display:none}div[aria-expanded=true][_ngcontent-%COMP%]   .collapse-address[_ngcontent-%COMP%]{display:none}div[aria-expanded=false][_ngcontent-%COMP%]   .fa-chevron-down[_ngcontent-%COMP%]{display:none}.modal-scrll[_ngcontent-%COMP%]{overflow-y:auto;max-height:400px}.pr-btn[_ngcontent-%COMP%]{padding-right:55px}#subnets-table[_ngcontent-%COMP%]{table-layout:fixed}.list-two[_ngcontent-%COMP%]{list-style-type:disc;margin-left:30px}.w-250px[_ngcontent-%COMP%]{width:250px}.w-200px[_ngcontent-%COMP%]{width:200px}.f-style-italic[_ngcontent-%COMP%]{font-style:italic}.float-r22[_ngcontent-%COMP%]{float:right;margin-right:22px}.w-nowrap-200[_ngcontent-%COMP%]{white-space:nowrap;max-width:200px}.w-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.f-size13[_ngcontent-%COMP%]{font-size:13px}.m-w200px[_ngcontent-%COMP%]{min-width:200px}.pos-abs-right[_ngcontent-%COMP%]{position:absolute;z-index:11;right:20px;top:10px}"]}),e})(),data:{title:"Calix Cloud - Flow Configuration"}},{path:"",redirectTo:"mapping_source",pathMatch:"full"}]}];let Bt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(Vt)],a.Bz]}),e})();var Yt=i(23830);let Qt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,s.u5,Bt,h.T,S.A0,Yt.o,he._t]]}),e})()}}]);