"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[6855],{96855:function(e,t,s){s.d(t,{a:function(){return g}});var i=s(79765),o=s(25917),a=s(1282),r=s(37716),n=s(48483),l=s(7450),c=s(39895),u=s(21693);s(65424)(a);let g=(()=>{class e{constructor(e,t,s,o){this.dateUtils=e,this.translateService=t,this.router=s,this.issueService=o,this.filterDays="7",this.filterDays$=new i.xQ,this.systemStatusData$=new i.xQ,this.commonHighChartOptions={exporting:{enabled:!1},credits:{enabled:!1},title:{text:""},responsive:{rules:[{condition:{},chartOptions:{chart:{color:"#4c4c4c"},subtitle:{text:null},navigator:{enabled:!1}}}]}},this.lineChartColors=["#b3d974","#fd9e4c","#fc6784"],this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}getNetworkAvailabilityOptions(e,t,s){let i=[],o=[],a=[];return e.length&&(e=this.sortByTimestamp(e,"time")).forEach(e=>{i.push(this.dateUtils.getChartFormatDate(e.time,"M/d/yy",!0)),o.push(e.outage),a.push(e.degrade)}),Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"line",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"},plotBorderWidth:1},colors:["#0027FF","#5ACFEA"],title:{text:null},xAxis:[{min:0,gridLineWidth:1,categories:i,tickInterval:5}],yAxis:[{min:0,allowDecimals:!0,title:{text:t&&this.language?this.language[t]:t||"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{symbol:"square",enabled:!!s},tooltip:{shared:!0,crosshairs:!0},series:[{name:`${this.language["Service Outage"]}`,data:o},{name:`${this.language["Service Degradation"]}`,data:a}],plotOptions:{series:{cursor:"pointer",marker:{enabled:!1},pointPlacement:"on",point:{events:{}}},states:{inactive:{enabled:!1}}},responsive:{rules:[{condition:{}}]}})}getCommonSubscribersChartOptions(e,t,s){let i=Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"line",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"},plotBorderWidth:1},colors:["#0027FF","#5ACFEA","#b926f0","#FF8238","#029A7C","#F7C343","#FF489D"],title:{text:null},xAxis:[{min:0,gridLineWidth:1,categories:e.categories,labels:{rotation:-25},tickmarkPlacement:"on",tickInterval:function(){let t=e.categories?e.categories.length:0,s=(Math.floor(t/(e.series?e.series.length:0)),1);return s=t<=6?1:t>6&&t<13?2:Math.floor(t/6)?Math.floor(t/6):1,s}()}],yAxis:[{min:0,softMax:1,allowDecimals:!1,title:{text:t&&this.language?this.language[t]:t||"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],lang:{noData:this.language["No Data Available"]},legend:{symbol:"square",enabled:!!s},tooltip:{shared:!0,crosshairs:!0},series:[...e.series],plotOptions:{series:{cursor:"pointer",groupPadding:.1,marker:{enabled:!1},pointPlacement:"on",point:{events:{}}},states:{inactive:{enabled:!1}}},responsive:{rules:[{condition:{}}]}});return(0,o.of)(i)}getCommonSubscribersChart30recordsOptions(e,t,s){let i=Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"line",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"},plotBorderWidth:1},colors:["#0027FF","#5ACFEA","#b926f0","#FF8238","#029A7C","#F7C343","#FF489D"],title:{text:null},xAxis:[{min:0,gridLineWidth:1,categories:e.categories,labels:{rotation:-25},tickmarkPlacement:"on",showLastLabel:!0,tickPositions:[0,5,10,15,20,25,29],tickInterval:function(){let t=e.categories?e.categories.length:0,s=(Math.floor(t/(e.series?e.series.length:0)),1);return s=t<=6?1:t>6&&t<13?2:Math.floor(t/6)?Math.floor(t/6):1,s}()}],yAxis:[{min:0,softMax:1,allowDecimals:!1,title:{text:t&&this.language?this.language[t]:t||"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],lang:{noData:this.language["No Data Available"]},legend:{symbol:"square",enabled:!!s},tooltip:{shared:!0,crosshairs:!0},series:[...e.series],plotOptions:{series:{cursor:"pointer",groupPadding:.1,marker:{enabled:!1},pointPlacement:"on",point:{events:{}}},states:{inactive:{enabled:!1}}},responsive:{rules:[{condition:{}}]}});return(0,o.of)(i)}getColumnChartOption(e,t,s){let i=Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"column",inverted:!0,style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"}},colors:["#0027FF","#5ACFEA","#fd9e4c","#CBC75F"],title:{text:this.language&&this.language["Firmware Image Count (%) / Model"]?this.language["Firmware Image Count (%) / Model"]:"Firmware Image Count (%) / Model",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"}},xAxis:{categories:[...e.categories],title:{text:"Model"}},yAxis:{opposite:!0,min:0,title:{text:null},stackLabels:{enabled:!0,style:{fontWeight:"bold"}}},legend:{enabled:!1},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{data:[...e.series]}]});return(0,o.of)(i)}sortByTimestamp(e,t){return null==e||e.sort(function(e,s){return e[t]=e[t]?parseInt(e[t]):0,s[t]=s[t]?parseInt(s[t]):0,e[t]-s[t]}),e}getOptions(e,t,s){let i=[],o=[],a=[];if(e&&e["loss-of-pon"]&&e["loss-of-pon"].length&&e["loss-of-pon"].forEach(e=>{i.push(this.dateUtils.getChartFormatDate(e.epochtime,"M/d/yy",!0)),o.push(e.count)}),e&&e["ont-us-sdber"]){let t=e["ont-us-sdber"].length;for(let s=0;s<t;s++)a.push(e["ont-us-sdber"][s].count)}return Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"line",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"},plotBorderWidth:1},colors:["#0027FF","#5ACFEA"],title:{text:null},xAxis:[{min:0,gridLineWidth:1,categories:i}],yAxis:[{min:0,allowDecimals:!1,title:{text:t?this.language[t]||t:"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{symbolRadius:100},tooltip:{shared:!0,crosshairs:!0},series:[{name:`${this.language["Service Outage"]}`,data:o},{name:`${this.language["Service Degradation"]}`,data:a}],plotOptions:{series:{cursor:"pointer",marker:{enabled:1==i.length,symbol:"circle",radius:2,states:{hover:{enabled:!0}}},pointPlacement:"on",point:{events:{}}},states:{inactive:{enabled:!1}}},responsive:{rules:[{condition:{}}]}})}getBarOptions(e,t,s){let i=[],o=[];e&&e["loss-of-pon"]&&e["loss-of-pon"].length&&e["loss-of-pon"].forEach(e=>{i.push(this.dateUtils.getChartFormatDate(e.epochtime,"M/d/yy",!0)),o.push(e.count?e.count:0)});let r=this,n=Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"column",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"}},colors:["#0027FF","#5ACFEA"],title:{text:null},xAxis:{categories:i},yAxis:[{min:0,softMax:1,allowDecimals:!1,title:{text:t?this.language[t]||t:"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{symbolRadius:100},lang:{noData:(null==o?void 0:o.length)?" ":this.language["No Data Available"]},series:[{name:`${this.language["Loss of PON Alarms"]||"Loss of PON Alarms"}`,data:o}],plotOptions:{column:{pointPadding:.2,borderWidth:0},series:{minPointLength:3,cursor:"pointer",point:{events:{click:function(){r.navigateByUrl(e,this.category,"serviceDisruption")}}}}},tooltip:{formatter:function(){return`<span style="font-size:10px">${this.point.category}</span><table><tr><td style="color:${this.series.color};padding:0">${this.series.name}: </td><td style="padding:0"> &nbsp ${a.numberFormat(this.point.y,0,"","")}</td></tr></table>`},useHTML:!0}});return 30===(null==i?void 0:i.length)&&(n.xAxis.labels={step:1,rotation:-60}),n}navigateByUrl(e,t,s){let i="",o={};if("serviceDisruption"==s){i="cco/alerts/system/history-reports";let e,s,a={date:[new Date(t),new Date(t)]},r=this.issueService.getDateParam(a,!1),n=null==r?void 0:r.split(",");n&&n.length>0&&(e=new Date(Number(n[0])),s=new Date(Number(n[1]))),o={date:[e,s],eventName:["loss-of-pon"]}}this.router.navigate([i],{state:{filters:o}})}getSubscriberOptions(e,t,s){let i=[],o=[],a=[];if(e&&e.subscriber&&e.subscriber.length&&e.subscriber.forEach(e=>{i.push(this.dateUtils.getChartFormatDate(e.epochtime,"M/d/yy",!0)),o.push(e.count)}),e&&e.serviceDegrade){let t=e.serviceDegrade.length;if(!i.length)for(let s=0;s<t;s++)i.push(this.dateUtils.getChartFormatDate(e.serviceDegrade[s].epochtime,"M/d/yy",!0));for(let s=0;s<t;s++)a.push(e.serviceDegrade[s].count)}return Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"line",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"},plotBorderWidth:1},colors:["#0027FF","#5ACFEA"],title:{text:null},xAxis:[{min:0,gridLineWidth:1,categories:i}],yAxis:[{min:0,allowDecimals:!1,title:{text:t?this.language[t]||t:"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{symbolRadius:100},tooltip:{shared:!0,crosshairs:!0,useHTML:!0},series:[{name:`${this.language["Number of Subscribers Impacted"]}`,data:o},{name:`${this.language["Service Degradation"]}`,data:a}],plotOptions:{series:{cursor:"pointer",marker:{enabled:1==i.length,symbol:"circle",radius:2,states:{hover:{enabled:!0}}},pointPlacement:"on",point:{events:{}}},states:{inactive:{enabled:!1}}},responsive:{rules:[{condition:{}}]}})}getSubscriberBarOptions(e,t,s){let i=[],o=[];e&&e.subscriber&&e.subscriber.length&&e.subscriber.forEach(e=>{i.push(this.dateUtils.getChartFormatDate(e.epochtime,"M/d/yy",!0)),o.push(e.count?e.count:0)});let r=Object.assign(Object.assign({},this.commonHighChartOptions),{credits:{enabled:!1},chart:{type:"column",style:{fontFamily:"Source Sans Pro,Regular",fontSize:"12px",color:"#4c4c4c"}},colors:["#0027FF","#5ACFEA"],title:{text:null},xAxis:{categories:i},yAxis:[{min:0,softMax:1,allowDecimals:!1,title:{text:t?this.language[t]||t:"",style:{color:"#727272"}},style:{fontFamily:"Source Sans Pro,Regular",fontSize:"13px",color:"#4c4c4c"}}],legend:{symbolRadius:100},lang:{noData:(null==o?void 0:o.length)?"":this.language["No Data Available"]},series:[{name:`${this.language["Subscribers affected by ONT or PON Alarms"]||"Subscribers affected by ONT or PON Alarms"}`,data:o}],plotOptions:{column:{pointPadding:.2,borderWidth:0},series:{minPointLength:3,cursor:"pointer",point:{events:{}}}},tooltip:{formatter:function(){return`<span style="font-size:10px">${this.point.category}</span><table><tr><td style="color:${this.series.color};padding:0">${this.series.name}: </td><td style="padding:0"> &nbsp ${a.numberFormat(this.point.y,0,"","")}</td></tr></table>`},useHTML:!0}});return 30===(null==i?void 0:i.length)&&(r.xAxis.labels={step:1,rotation:-60}),r}setFilterDays(e){this.filterDays=e,this.filterDays$.next(e)}setSystemStatusData(e){this.systemStatusData$.next(e)}loadSystemStatusData(){}setpercentage(e,t,s){return((e-t)/t*100).toFixed(s||2)}checkPositvNegativ(e){return"0"==e?"+":"-"==e.charAt(0)?"-":"+"}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(n.s),r.LFG(l.s),r.LFG(c.F0),r.LFG(u.v))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);