"use strict";(self.webpackChunkcalix=self.webpackChunkcalix||[]).push([[3505],{83505:function(e,t,i){i.d(t,{d:function(){return We}});var o=i(37716),n=i(23771),a=i(79765),r=i(92340),l=i(96045),s=i(91841),c=i(30900),d=i(49342),u=i(38048),g=i(3679),p=i(7450),h=i(38583),f=i(86640);function w(e,t){if(1&e&&(o.TgZ(0,"div",20),o.TgZ(1,"div",21),o.TgZ(2,"div",22),o.TgZ(3,"span",23),o._uU(4),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Oqu(e.language.Loading)}}function m(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",24),o.TgZ(1,"span",25),o._UZ(2,"img",26),o.qZA(),o._UZ(3,"div",27),o.TgZ(4,"button",28),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._uU(5),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(3),o.Q6J("innerHtml",e.errorInfo,o.oJD),o.xp6(2),o.Oqu(e.language.Ok)}}function v(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",29),o.TgZ(1,"span",25),o._UZ(2,"img",30),o.qZA(),o.TgZ(3,"button",31),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._UZ(4,"span"),o.qZA(),o._UZ(5,"div",27),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("innerHtml",e.successInfo,o.oJD)}}function b(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"label",6),o._uU(2),o.qZA(),o.TgZ(3,"div",7),o.TgZ(4,"label",8),o.TgZ(5,"input",32),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().workflowInputData.selectedCategories=t}),o.qZA(),o._uU(6),o.qZA(),o.TgZ(7,"label",8),o.TgZ(8,"input",33),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().workflowInputData.selectedCategories=t}),o.qZA(),o._uU(9),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.language.CategoriesApplicable),o.xp6(3),o.Q6J("ngModel",e.workflowInputData.selectedCategories),o.xp6(1),o.hij(" ",e.language.Yes," "),o.xp6(2),o.Q6J("ngModel",e.workflowInputData.selectedCategories),o.xp6(1),o.hij(" ",e.language.No," ")}}function k(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"label",6),o._uU(2),o.qZA(),o.TgZ(3,"div",7),o.TgZ(4,"label",8),o.TgZ(5,"input",34),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().workflowInputData.selectedDeviceGroup=t})("ngModelChange",function(){o.CHM(e);const t=o.oxw();return t.showform(),t.deviceaction(),t.getDeviceGroup()}),o.qZA(),o._uU(6),o.qZA(),o.TgZ(7,"label",8),o.TgZ(8,"input",35),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().workflowInputData.selectedDeviceGroup=t})("ngModelChange",function(){o.CHM(e);const t=o.oxw();return t.hideform(),t.deviceaction()}),o.qZA(),o._uU(9),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.language.Device_grp_appl),o.xp6(3),o.Q6J("disabled","In Progress"==e.workflowInputData.state)("ngModel",e.workflowInputData.selectedDeviceGroup),o.xp6(1),o.hij(" ",e.language.Yes," "),o.xp6(2),o.Q6J("disabled","In Progress"==e.workflowInputData.state)("ngModel",e.workflowInputData.selectedDeviceGroup),o.xp6(1),o.hij(" ",e.language.No," ")}}function D(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"form",36),o.TgZ(2,"label",37),o._uU(3),o.qZA(),o.TgZ(4,"div",38),o.TgZ(5,"ng-select",39),o.NdJ("add",function(t){return o.CHM(e),o.oxw().validateCategory(t)}),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("formGroup",e.filtersForm),o.xp6(2),o.Oqu(e.language.Category),o.xp6(2),o.s9C("placeholder",e.language.Category),o.Q6J("searchable",!1)("multiple",!0)("items",e.categories)}}function Z(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr",44),o.TgZ(1,"td"),o.TgZ(2,"input",45),o.NdJ("change",function(t){const i=o.CHM(e).$implicit;return o.oxw(2).bindDeviceData(t,i._id)}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"td"),o.TgZ(6,"span"),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"td"),o.TgZ(9,"span"),o._uU(10),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit;o.s9C("id",e._id),o.xp6(2),o.Q6J("value",e._id)("checked",e.checked),o.xp6(2),o.Oqu(e.name?e.name:""),o.xp6(3),o.Oqu(e.description?e.description:""),o.xp6(3),o.Oqu("dynamic"===e.type?"Dynamic":"Static")}}function y(e,t){if(1&e&&(o.TgZ(0,"div",40),o.TgZ(1,"span",41),o._uU(2),o.qZA(),o.TgZ(3,"table",42),o.TgZ(4,"thead"),o.TgZ(5,"tr"),o.TgZ(6,"th"),o._uU(7),o.qZA(),o.TgZ(8,"th"),o._uU(9),o.qZA(),o.TgZ(10,"th"),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"tbody"),o.YNc(13,Z,11,6,"tr",43),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(2),o.Oqu(e.language.Device_groups),o.xp6(1),o.Q6J("dtOptions",e.tableOptions),o.xp6(4),o.Oqu(e.language.Name),o.xp6(2),o.Oqu(e.language.description),o.xp6(2),o.Oqu(e.language.type),o.xp6(2),o.Q6J("ngForOf",e.deviceGrpData)}}function A(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr",44),o.TgZ(1,"td"),o.TgZ(2,"input",48),o.NdJ("change",function(t){const i=o.CHM(e).$implicit;return o.oxw(3).bindDeviceData(t,i._id)}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"td"),o.TgZ(6,"span"),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"td"),o.TgZ(9,"span"),o._uU(10),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit;o.s9C("id",e._id),o.xp6(2),o.Q6J("value",e._id)("checked",e.checked),o.xp6(2),o.Oqu(e.name?e.name:""),o.xp6(3),o.Oqu(e.description?e.description:""),o.xp6(3),o.Oqu("dynamic"===e.type?"Dynamic":"Static")}}function x(e,t){if(1&e&&(o.TgZ(0,"div",47),o.TgZ(1,"span",41),o._uU(2),o.qZA(),o.TgZ(3,"table",42),o.TgZ(4,"thead"),o.TgZ(5,"tr"),o.TgZ(6,"th"),o._uU(7),o.qZA(),o.TgZ(8,"th"),o._uU(9),o.qZA(),o.TgZ(10,"th"),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"tbody"),o.YNc(13,A,11,6,"tr",43),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw(2);o.xp6(2),o.Oqu(e.language.Device_groups),o.xp6(1),o.Q6J("dtOptions",e.tableOptions),o.xp6(4),o.Oqu(e.language.Name),o.xp6(2),o.Oqu(e.language.description),o.xp6(2),o.Oqu(e.language.type),o.xp6(2),o.Q6J("ngForOf",e.deviceGrpData)}}function T(e,t){if(1&e&&o.YNc(0,x,14,6,"div",46),2&e){const e=o.oxw();o.Q6J("ngIf","In Progress"==e.workflowInputData.state)}}let I=(()=>{class e{constructor(e,t,i,n,l,s,c,d){this.api=e,this.http=t,this.customTranslateService=i,this.commonOrgService=n,this.changeDetect=l,this.sso=s,this.fb=c,this.translateService=d,this.workflowDeviceData=new o.vpe,this.activeTab=new o.vpe,this.pageAvailable=!1,this.isRerender=!1,this.loading=!0,this.showdeviceform=!1,this.selectDeviceGrp=!0,this.selectedItem=[],this.errorInfo="",this.successInfo="",this.tableOptions={pagingType:"full_numbers",dom:"t",ordering:!1,columnDefs:[{targets:[1,2,3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#devicegroup-table_last").addClass("disabled")}},this.dtTrigger=new a.xQ,this.sysAdminRoute="systemAdministration",this.inputAlarms=[{label:"device_sync_failure"},{label:"post_i2c"},{label:"dhcp-server-detected"}],this.categories=[{id:"All",name:"All"}],this.filtersForm=this.fb.group({category:[]}),this.baseUrl=`${r.N.API_BASE_URL}analytics-engine/`,this.orgId=this.sso.getOrgId()}ngOnInit(){this.getDeviceGroup(),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),"No"==this.workflowInputData.selectedDeviceGroup&&this.hideform(),0!=this.workflowInputData.categories.length&&this.filtersForm.get("category").setValue(this.workflowInputData.categories),this.getCategories()}getCategories(){let e={historyReport:!1},t="";for(var i in e)null==e[i]||""==e[i]||e[i]===[]||(""!=t&&(t+="&"),t+=i+"="+encodeURIComponent(e[i]));t+="&historyReport=false",this.http.get(`${this.baseUrl}category?${t}`).subscribe(e=>{let t=[{id:"All",name:"All"}];e&&e.forEach(e=>{!e||t.push({id:e,name:e})}),this.categories=t,this.filtersForm.controls.category.setValue(["All"])})}validateCategory(e){let t=this.filtersForm.get("category").value;if("All"===e.id)t=["All"];else{let e=t.indexOf("All");e>-1&&t.splice(e,1)}this.filtersForm.get("category").setValue(t)}setTableOptions(e){this.tableOptions={pagingType:"full_numbers",rowId:"id",searching:!1,lengthChange:!1,paging:!0,pageLength:10,ordering:!1,dom:"t",columnDefs:[{targets:[1,2,3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#devicegroup-table_last").addClass("disabled")}},e&&"language"==e?setTimeout(()=>{this.rerender(),setTimeout(()=>{this.dataAvailable=!0,this.loading=!1},100)},100):setTimeout(()=>{this.dataAvailable=!0,this.loading=!1},500)}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}showform(){this.showdeviceform=!0,this.selectDeviceGrp=!0}hideform(){this.showdeviceform=!1,this.selectDeviceGrp=!1,this.workflowInputData.groups=[],this.deviceGrpData&&this.deviceGrpData.forEach(e=>{e.checked=!1})}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.translateSubscribe&&this.translateSubscribe.unsubscribe(),this.getDeviceGrpSubscribe&&this.getDeviceGrpSubscribe.unsubscribe(),this.languageSubject&&this.languageSubject.unsubscribe()}getDeviceGroup(){this.getDeviceGrpSubscribe=this.api.GetDeviceGroup(this.orgId,0,0).subscribe(e=>{if(e){let t=this.workflowInputData.groups;e.forEach(e=>{e.checked=-1!=t.indexOf(e._id)}),this.deviceGrpData="In Progress"===this.workflowInputData.state?e.filter(e=>e.checked):e,this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.sso.pageErrorHandle(e),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1,this.success=!1}go_next(){if(this.selectDeviceGrp&&this.workflowInputData.groups.length)return this.workflowInputData.levelPassed<=2&&(this.workflowInputData.levelPassed=2),this.workflowDeviceData.emit(this.workflowInputData),this.activeTab.emit("Select Operation Parameters"),!0;if("Yes"==this.workflowInputData.selectedAlarm){if(this.workflowInputData.levelPassed<=2&&(this.workflowInputData.levelPassed=2),null==this.workflowInputData.selectedCategories&&null==this.workflowInputData.selectedDeviceGroup)return this.error=!0,void(this.errorInfo="Please select at least one option.");if("Yes"==this.workflowInputData.selectedCategories){if(this.workflowInputData.categories=this.filtersForm.get("category").value,0==this.workflowInputData.categories.length)return this.error=!0,void(this.errorInfo="Please select at least one category.")}else this.workflowInputData.categories=[];return this.workflowDeviceData.emit(this.workflowInputData),this.activeTab.emit("Select Operation Parameters"),!0}return this.selectDeviceGrp||null==this.workflowInputData.selectedAlarm?(this.error=!0,this.errorInfo=null==this.workflowInputData.selectedAlarm?"Please select at least one option.":this.language["Please select at least one device group."],!1):(this.workflowInputData.levelPassed<=2&&(this.workflowInputData.levelPassed=2),this.workflowDeviceData.emit(this.workflowInputData),this.activeTab.emit("Select Operation Parameters"),!0)}go_previous(){this.workflowDeviceData.emit(this.workflowInputData),this.activeTab.emit("Start")}findObjByKeyName(e,t){for(var i=0;i<t.length;i++)if(t[i]._id===e)return t[i];return!1}findObjIndex(e,t){return t.indexOf(e)}bindDeviceData(e,t){if(e.target.checked)this.error=!1,this.findObjByKeyName(t,this.workflowInputData.groups)||this.workflowInputData.groups.push(t);else{let e=this.findObjIndex(t,this.workflowInputData.groups);-1!=e&&this.workflowInputData.groups.splice(e,1)}}deviceaction(){0!=this.workflowInputData.actions.length&&(this.workflowInputData.actions.length=0)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(l.A),o.Y36(s.eN),o.Y36(c.d),o.Y36(d.v),o.Y36(o.sBO),o.Y36(u.t6),o.Y36(g.qu),o.Y36(p.s))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-alarm-select-device-wizard"]],viewQuery:function(e,t){if(1&e&&o.Gf(n.G,5),2&e){let e;o.iGM(e=o.CRH())&&(t.dtElement=e.first)}},inputs:{workflowInputData:"workflowInputData"},outputs:{workflowDeviceData:"workflowDeviceData",activeTab:"activeTab"},decls:29,vars:16,consts:[["id","select-device",1,"tab-pane"],["class","loader",4,"ngIf"],["class","w-100 alert alert-danger mt-4 fade show",4,"ngIf"],["class","w-100 alert alert-success fade show mt-4",4,"ngIf"],[1,"wizard-form"],[1,"row"],[1,"col-3","control-label"],[1,"col-9"],[1,"radio-inline","col-2"],["type","radio","name","optradioAlarmGroup","value","Yes","id","selectedCategories",1,"mr-2",3,"disabled","ngModel","ngModelChange"],["type","radio","name","optradioAlarmGroup","value","No","id","selectedCategories",1,"mr-2",3,"disabled","ngModel","ngModelChange"],["class","row",4,"ngIf"],[4,"ngIf"],["class","pb-2 overflow-auto ",4,"ngIf"],["InProgressBlock",""],[1,"workflow-next-previous"],["type","button","id","previous",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2",3,"click"],["src","assets/img/ic_chevronleft_grey.svg"],["type","button","id","next",1,"btn-arrow","btn-arr-nxt","primary",3,"click"],["src","assets/img/ic_chevron-r-w.svg"],[1,"loader"],[1,"d-flex","justify-content-center"],[1,"spinner-border","text-primary"],[1,"sr-only"],[1,"w-100","alert","alert-danger","mt-4","fade","show"],[1,"success-img"],["src","./assets/img/error-icon.svg"],[1,"d-inline-flex",3,"innerHtml"],["id","wk-err-ok",1,"btn-default","px-3","ok-btn","float-right",3,"click"],[1,"w-100","alert","alert-success","fade","show","mt-4"],["src","./assets/img/success-icon.svg"],["type","button","id","wk-success",1,"close",3,"click"],["type","radio","name","optradioAlarmCategory","value","Yes","id","optradioAlarmCategory",1,"mr-2",3,"ngModel","ngModelChange"],["type","radio","name","optradioAlarmCategory","value","No","id","optradioAlarmCategory",1,"mr-2",3,"ngModel","ngModelChange"],["type","radio","name","optradio","value","Yes","id","show-form",1,"mr-2",3,"disabled","ngModel","ngModelChange"],["type","radio","name","optradio","value","No","id","hide-form",1,"mr-2",3,"disabled","ngModel","ngModelChange"],[3,"formGroup"],["for","Name",1,"col-form-label","select-font"],["id","current-issues-interval",1,"col-md-4","pl-0"],["formControlName","category","bindValue","id","bindLabel","name",3,"searchable","multiple","placeholder","items","add"],[1,"pb-2","overflow-auto"],[1,"net-ops-secondary-title"],["id","device-grp-table","width","100%","datatable","",1,"workflow-details-table","row-border","hover","table-alter",3,"dtOptions"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["type","checkbox","placeholder","#","name","item.name",1,"mr-3",3,"value","checked","change"],["class","overflow-auto",4,"ngIf"],[1,"overflow-auto"],["type","checkbox","placeholder","#","name","item.name","disabled","",1,"mr-3",3,"value","checked","change"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,w,5,1,"div",1),o.YNc(2,m,6,2,"div",2),o.YNc(3,v,6,1,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"section"),o.TgZ(6,"div",5),o.TgZ(7,"label",6),o._uU(8),o.qZA(),o.TgZ(9,"div",7),o.TgZ(10,"label",8),o.TgZ(11,"input",9),o.NdJ("ngModelChange",function(){return t.hideform()})("ngModelChange",function(e){return t.workflowInputData.selectedAlarm=e}),o.qZA(),o._uU(12),o.qZA(),o.TgZ(13,"label",8),o.TgZ(14,"input",10),o.NdJ("ngModelChange",function(){return t.workflowInputData.selectedCategories="No"})("ngModelChange",function(e){return t.workflowInputData.selectedAlarm=e}),o.qZA(),o._uU(15),o.qZA(),o.qZA(),o.qZA(),o.YNc(16,b,10,5,"div",11),o.YNc(17,k,10,7,"div",11),o.qZA(),o.qZA(),o.YNc(18,D,6,6,"div",12),o.YNc(19,y,14,6,"div",13),o.YNc(20,T,1,1,"ng-template",null,14,o.W1O),o.TgZ(22,"div",15),o.TgZ(23,"button",16),o.NdJ("click",function(){return t.go_previous()}),o._UZ(24,"img",17),o._uU(25),o.qZA(),o.TgZ(26,"button",18),o.NdJ("click",function(){return t.go_next()}),o._uU(27),o._UZ(28,"img",19),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",t.loading),o.xp6(1),o.Q6J("ngIf",t.error),o.xp6(1),o.Q6J("ngIf",t.success),o.xp6(5),o.Oqu(t.language.AlarmGroup),o.xp6(3),o.Q6J("disabled","In Progress"==t.workflowInputData.state)("ngModel",t.workflowInputData.selectedAlarm),o.xp6(1),o.hij(" ",t.language.Yes," "),o.xp6(2),o.Q6J("disabled","In Progress"==t.workflowInputData.state)("ngModel",t.workflowInputData.selectedAlarm),o.xp6(1),o.hij(" ",t.language.No," "),o.xp6(1),o.Q6J("ngIf","Yes"==t.workflowInputData.selectedAlarm),o.xp6(1),o.Q6J("ngIf","No"==t.workflowInputData.selectedAlarm),o.xp6(1),o.Q6J("ngIf","Yes"==t.workflowInputData.selectedCategories),o.xp6(1),o.Q6J("ngIf",t.showdeviceform),o.xp6(6),o.hij(" ",t.language.Previous,""),o.xp6(2),o.Oqu(t.language.Next))},directives:[h.O5,g._,g.Fj,g.JJ,g.On,g._Y,g.JL,g.sg,f.w9,g.u,n.G,h.sg],styles:[".f-w-600[_ngcontent-%COMP%]{font-weight:600}[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){position:relative!important;left:unset!important}table.dataTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#4c4c4c;line-height:22px;padding:10px;border-bottom:1px solid #cccccc;border-top:transparent!important;width:calc(100% / 3)!important;word-break:break-word!important}"]}),e})();var _=i(39895);function C(e,t){if(1&e&&(o.TgZ(0,"div",14),o.TgZ(1,"small"),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(2),o.hij(" ",e.language.Enter_A_Value," ")}}let P=(()=>{class e{constructor(e,t){this.translateService=e,this.router=t,this.workflowdata=new o.vpe,this.activeTab=new o.vpe,this.saveClicked=!1,this.formError=!1}ngOnInit(){this.saveClicked=!1,this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e})}ngOnDestroy(){this.languageSubject.unsubscribe()}validate(){this.formError=!1,this.workflowInputData.name||(this.formError=!0)}go_next(){this.saveClicked=!0,this.validate(),!this.formError&&(this.workflowInputData.levelPassed<=1&&(this.workflowInputData.levelPassed=1),this.workflowdata.emit(this.workflowInputData),this.router.url.endsWith("official-workflow-wizard")?this.activeTab.emit("Select Operation Parameters"):this.activeTab.emit("Select Device Groups"))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.s),o.Y36(_.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-alarm-start-wizard"]],inputs:{workflowInputData:"workflowInputData"},outputs:{workflowdata:"workflowdata",activeTab:"activeTab"},decls:23,vars:10,consts:[["id","wizardStart",1,"wizard-start"],[1,"wizard-form"],["id","wk-start-form"],[1,"form-group","ccl-form","row"],[1,"col-2","control-label"],[1,"col-10"],["id","wk-name_input","name","name_input","type","text","required","","aria-required","true","aria-describedby","name_input-error",3,"ngModel","placeholder","ngModelChange"],["id","name_input-error","class","errorMessage",4,"ngIf"],["id","wk-decription_input","name","description","type","text",3,"ngModel","placeholder","ngModelChange"],[1,"workflow-next-previous"],["type","button","disabled","","id","previous",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2"],["src","assets/img/ic_chevronleft_grey.svg"],["type","button","id","next",1,"btn-arrow","btn-arr-nxt","primary",3,"click"],["src","assets/img/ic_chevron-r-w.svg"],["id","name_input-error",1,"errorMessage"]],template:function(e,t){1&e&&(o._UZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"form",2),o.TgZ(3,"div",3),o.TgZ(4,"label",4),o._uU(5),o.qZA(),o.TgZ(6,"div",5),o.TgZ(7,"input",6),o.NdJ("ngModelChange",function(e){return t.workflowInputData.name=e}),o.qZA(),o.YNc(8,C,3,1,"div",7),o.qZA(),o.qZA(),o.TgZ(9,"div",3),o.TgZ(10,"label",4),o._uU(11),o.TgZ(12,"small"),o._uU(13),o.qZA(),o.qZA(),o.TgZ(14,"div",5),o.TgZ(15,"input",8),o.NdJ("ngModelChange",function(e){return t.workflowInputData.description=e}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"div",9),o.TgZ(17,"button",10),o._UZ(18,"img",11),o._uU(19),o.qZA(),o.TgZ(20,"button",12),o.NdJ("click",function(){return t.go_next()}),o._uU(21),o._UZ(22,"img",13),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(5),o.Oqu(t.language.Name),o.xp6(2),o.s9C("placeholder",t.language.Name),o.Q6J("ngModel",t.workflowInputData.name),o.xp6(1),o.Q6J("ngIf",t.saveClicked&&!t.workflowInputData.name),o.xp6(3),o.hij("",t.language.Description," "),o.xp6(2),o.hij(" ",t.language.optional," "),o.xp6(2),o.s9C("placeholder",t.language.Description),o.Q6J("ngModel",t.workflowInputData.description),o.xp6(4),o.hij(" ",t.language.Previous," "),o.xp6(2),o.hij("",t.language.Next," "))},directives:[g._Y,g.JL,g.F,g.Fj,g.Q7,g.JJ,g.On,h.O5],styles:[""]}),e})();var S=i(18638);function O(e,t){if(1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.qZA()),2&e){const e=t.$implicit,i=o.oxw(2);o.xp6(2),o.Oqu(e.name?e.name:""),o.xp6(2),o.Oqu(null!=e&&e.description?e.description:""),o.xp6(2),o.hij(" ","dynamic"===e.type?i.language.Dynamic:i.language.Static," ")}}function q(e,t){if(1&e&&(o.TgZ(0,"div",24),o.TgZ(1,"table",4),o.TgZ(2,"thead"),o.TgZ(3,"tr"),o.TgZ(4,"th"),o._uU(5),o.qZA(),o.TgZ(6,"th"),o._uU(7),o.qZA(),o.TgZ(8,"th"),o._uU(9),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"tbody"),o.YNc(11,O,7,3,"tr",18),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Q6J("dtOptions",e.tableRevOptions),o.xp6(4),o.Oqu(e.language.Name),o.xp6(2),o.Oqu(e.language.description),o.xp6(2),o.Oqu(e.language.Type),o.xp6(2),o.Q6J("ngForOf",e.deviceArray)}}function M(e,t){if(1&e&&(o.TgZ(0,"div",25),o.TgZ(1,"label",10),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(2),o.hij("Selected Alarm : ",null==e.workflowInputData?null:e.workflowInputData.alarmName,"")}}function N(e,t){if(1&e&&(o.TgZ(0,"div",28),o.TgZ(1,"label",29),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw().$implicit;o.xp6(2),o.hij("Service Impacting : ",e.ServiceImpacting,"")}}function E(e,t){if(1&e&&(o.TgZ(0,"div",28),o.TgZ(1,"label",29),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw().$implicit;o.xp6(2),o.hij("Service Affecting : ",e.ServiceAffecting," ")}}function F(e,t){if(1&e&&(o.TgZ(0,"div",28),o.TgZ(1,"label",30),o._uU(2),o.qZA(),o.qZA()),2&e){const e=o.oxw().$implicit,t=o.oxw();o.xp6(2),o.AsE("",t.language.Severity," : ",e.Severity," ")}}function U(e,t){if(1&e&&(o.TgZ(0,"li",26),o.YNc(1,N,3,1,"div",27),o.YNc(2,E,3,1,"div",27),o.YNc(3,F,3,2,"div",27),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.Q6J("ngIf",e.ServiceImpacting),o.xp6(1),o.Q6J("ngIf",e.ServiceAffecting),o.xp6(1),o.Q6J("ngIf",e.Severity)}}function J(e,t){if(1&e&&(o.TgZ(0,"h6"),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.hij(" ",e.language.Triggered_CPE_Alarm_discovered," ")}}function R(e,t){1&e&&(o.TgZ(0,"span"),o._uU(1,"Who all are going to be notified : "),o.qZA())}function W(e,t){if(1&e&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.hij(" ",e," ")}}function Q(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",38),o.TgZ(1,"div",53),o.TgZ(2,"label",54),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"div",55),o.TgZ(5,"label",56),o._UZ(6,"input",57),o._uU(7),o.qZA(),o.TgZ(8,"div",58),o.TgZ(9,"input",59),o.NdJ("ngModelChange",function(t){o.CHM(e);const i=o.oxw(2);return(null==i.workflowInputData?null:i.workflowInputData.execPolicy.window).frequency=t}),o.qZA(),o.TgZ(10,"span"),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(3),o.hij(" ",e.language.Daily," "),o.xp6(4),o.hij(" ",e.language.Every," "),o.xp6(2),o.Q6J("ngModel",null==e.workflowInputData?null:e.workflowInputData.execPolicy.window.frequency),o.xp6(2),o.hij(" ",e.language.Day_s," ")}}function z(e,t){if(1&e&&(o.TgZ(0,"label",61),o._uU(1),o.qZA()),2&e){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.weekdays," ")}}function G(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",60),o.TgZ(1,"label",61),o._uU(2),o.qZA(),o.TgZ(3,"div",62),o.TgZ(4,"label",56),o._UZ(5,"input",57),o._uU(6),o.qZA(),o.TgZ(7,"div",58),o.TgZ(8,"input",63),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw(2).workflowInputData.execPolicy.window.frequency=t}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA(),o.qZA(),o.qZA(),o.YNc(11,z,2,1,"label",64),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(2),o.hij(" ",e.language.Weekly," "),o.xp6(4),o.hij(" ",e.language.Recur_every," "),o.xp6(2),o.Q6J("ngModel",e.workflowInputData.execPolicy.window.frequency),o.xp6(2),o.hij(" ",e.language.weeks_on," "),o.xp6(1),o.Q6J("ngIf","weekly"===(null==e.workflowInputData?null:e.workflowInputData.execPolicy.window.type))}}function Y(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",60),o.TgZ(1,"label",61),o._uU(2),o.qZA(),o.TgZ(3,"div",65),o.TgZ(4,"label",66),o._UZ(5,"input",57),o._uU(6),o.qZA(),o.TgZ(7,"div",67),o.TgZ(8,"input",68),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw(2).workflowInputData.execPolicy.window.daysOfMonth=t}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA(),o.qZA(),o.TgZ(11,"div",67),o.TgZ(12,"input",69),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw(2).workflowInputData.execPolicy.window.frequency=t}),o.qZA(),o.TgZ(13,"span"),o._uU(14),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(2),o.hij(" ",e.language.Monthly," "),o.xp6(4),o.hij("",e.language.Day," "),o.xp6(2),o.Q6J("ngModel",e.workflowInputData.execPolicy.window.daysOfMonth),o.xp6(2),o.hij(" ",e.language.of_every,""),o.xp6(2),o.Q6J("ngModel",e.workflowInputData.execPolicy.window.frequency),o.xp6(2),o.hij(" ",e.language["month(s)"],"")}}function V(e,t){if(1&e&&(o.TgZ(0,"label",70),o._uU(1),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.hij(" ",e.language.End_by," ")}}function j(e,t){if(1&e&&(o.TgZ(0,"label",70),o._uU(1),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.hij(" ",e.language.End_after," ")}}const H=function(){return{width:"100%",height:"36px"}},L=function(){return{height:"36px"}},B=function(){return{standalone:!0}};function K(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"p-calendar",71),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw(2).customEndRange=t}),o.qZA()}if(2&e){const e=o.oxw(2);o.Akn(o.DdM(7,H)),o.Q6J("inputStyle",o.DdM(8,L))("autoZIndex",!0)("ngModel",e.customEndRange)("showIcon",!0)("ngModelOptions",o.DdM(9,B))}}function X(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",32),o.TgZ(1,"div",33),o._UZ(2,"label",72),o.qZA(),o.TgZ(3,"div",73),o.TgZ(4,"input",74),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw(2).rangeOccurrence=t}),o.qZA(),o.TgZ(5,"label",75),o._uU(6),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);o.xp6(4),o.Q6J("ngModel",e.rangeOccurrence),o.xp6(2),o.Oqu(e.language.Occurrences)}}function ee(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"form",31),o.TgZ(1,"div",32),o.TgZ(2,"div",33),o.TgZ(3,"label",34),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"div",35),o.TgZ(6,"p-calendar",36),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().startDateTime=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",32),o.TgZ(8,"div",33),o.TgZ(9,"label",37),o._uU(10),o.qZA(),o.qZA(),o.TgZ(11,"div",38),o.TgZ(12,"input",39),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().windowlength=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",32),o.TgZ(14,"div",33),o.TgZ(15,"label",37),o._uU(16),o.qZA(),o.qZA(),o.YNc(17,Q,12,4,"div",40),o.YNc(18,G,12,5,"div",41),o.YNc(19,Y,15,6,"div",41),o.qZA(),o.TgZ(20,"div",42),o.TgZ(21,"div",43),o.TgZ(22,"div",33),o.TgZ(23,"label",34),o._uU(24),o.qZA(),o.qZA(),o.TgZ(25,"div",35),o.TgZ(26,"p-calendar",44),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().custumStartDate=t}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(27,"div",42),o.TgZ(28,"div",43),o.TgZ(29,"div",33),o._UZ(30,"label",34),o.qZA(),o.TgZ(31,"div",35),o.YNc(32,V,2,1,"label",45),o.YNc(33,j,2,1,"label",46),o.YNc(34,K,1,10,"p-calendar",47),o.qZA(),o.qZA(),o.qZA(),o.YNc(35,X,7,2,"div",48),o.TgZ(36,"div",49),o.TgZ(37,"div",33),o.TgZ(38,"label",50),o._uU(39),o.qZA(),o.qZA(),o.TgZ(40,"div",51),o._UZ(41,"input",52),o.TgZ(42,"span"),o._uU(43),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(4),o.Oqu(e.language.Start_Time),o.xp6(2),o.Akn(o.DdM(31,H)),o.s9C("placeholder",e.language["Select Time"]),o.Q6J("inputStyle",o.DdM(32,L))("autoZIndex",!0)("ngModel",e.startDateTime)("showIcon",!0)("ngModelOptions",o.DdM(33,B)),o.xp6(4),o.hij(" ",e.language.Time_window,""),o.xp6(2),o.Q6J("ngModel",e.windowlength),o.xp6(4),o.Oqu(e.language.Recurrence_Pattern),o.xp6(1),o.Q6J("ngIf","daily"===(null==e.workflowInputData?null:e.workflowInputData.execPolicy.window.type)),o.xp6(1),o.Q6J("ngIf","weekly"===(null==e.workflowInputData?null:e.workflowInputData.execPolicy.window.type)),o.xp6(1),o.Q6J("ngIf","monthly"===(null==e.workflowInputData?null:e.workflowInputData.execPolicy.window.type)),o.xp6(5),o.Oqu(e.language.Start_Date),o.xp6(2),o.Akn(o.DdM(34,H)),o.s9C("placeholder",e.language["Select Date"]),o.Q6J("inputStyle",o.DdM(35,L))("autoZIndex",!0)("ngModel",e.custumStartDate)("showIcon",!0)("ngModelOptions",o.DdM(36,B)),o.xp6(6),o.Q6J("ngIf",!e.endAfter),o.xp6(1),o.Q6J("ngIf",e.endAfter),o.xp6(1),o.Q6J("ngIf",!e.endAfter),o.xp6(1),o.Q6J("ngIf",e.endAfter),o.xp6(4),o.Oqu(e.language.Prioritization),o.xp6(2),o.Q6J("checked",null==e.workflowInputData?null:e.workflowInputData.fullGroupExecute),o.xp6(2),o.Oqu(e.language.Ex_fullgrps)}}let te=(()=>{class e{constructor(e,t,i,n){this.translateService=e,this.api=t,this.router=i,this.sso=n,this.activeTab=new o.vpe,this.submitWorkflow=new o.vpe,this.tableRevOptions={searching:!1,lengthChange:!1,paging:!1,ordering:!1,dom:"t"},this.reviewData=[],this.execPolicy={},this.custumStartDate=new Date,this.customEndRange=new Date,this.endAfter=!1,this.dataAvailable=!1,this.weekdays=[],this.listofEmail=[],this.orgId=this.sso.getOrgId()}ngOnInit(){if(this.workflowInputData&&this.workflowInputData.actions.forEach(e=>{"Edge Suites Provision"===e.actionType&&(e.actionType="Edge Suites Bulk Activation")}),this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.workflowInputData&&this.workflowInputData.email&&(this.listofEmail=this.workflowInputData.email.split(",")),this.workflowInputData)if("Yes"==this.workflowInputData.selectedAlarm){if(this.dataAvailable=!0,0!=this.workflowInputData.categories.length){let e=[];this.workflowInputData.categories.forEach(t=>{e.push({name:t})}),this.deviceArray=e}}else this.getDeviceGrp();if(this.workflowInputData){if("Maintenance Window"===this.workflowInputData.execPolicy.initialTrigger.type){let e=this.workflowInputData.execPolicy.window;this.startDateTime=new Date(this.workflowInputData.startTime),this.windowlength=e.windowLength/60,this.custumStartDate=new Date(e.startDateTime),this.recurrence=e.frequency,this.workflowInputData.execPolicy.window.weekdays&&(this.weekdays=[],this.workflowInputData.execPolicy.window.weekdays.includes("SUN")&&this.weekdays.push("Sunday"),this.workflowInputData.execPolicy.window.weekdays.includes("MON")&&this.weekdays.push("Monday"),this.workflowInputData.execPolicy.window.weekdays.includes("TUE")&&this.weekdays.push("Tuesday"),this.workflowInputData.execPolicy.window.weekdays.includes("WEN")&&this.weekdays.push("Wednesday"),this.workflowInputData.execPolicy.window.weekdays.includes("THU")&&this.weekdays.push("Thursday"),this.workflowInputData.execPolicy.window.weekdays.includes("FRI")&&this.weekdays.push("Friday"),this.workflowInputData.execPolicy.window.weekdays.includes("SAT")&&this.weekdays.push("Saturday")),e.endDateTime?(this.customEndRange=new Date(e.endDateTime),this.endAfter=!1):(this.rangeOccurrence=e.recurrence,this.endAfter=!0)}else this.execPolicy=this.workflowInputData.execPolicy;this.priortize=this.workflowInputData.priortize}}ngOnDestroy(){this.languageSubject.unsubscribe()}getDeviceGrp(){this.getDeviceGrpData=this.api.GetDeviceGroup(this.orgId,0,0).subscribe(e=>{this.deviceData=e,this.deviceArray=this.deviceData.filter(e=>this.workflowInputData.groups.includes(e._id)),this.dataAvailable=!0})}go_previous(){this.activeTab.emit("Select Schedule Parameters")}submit(){this.submitWorkflow.emit(this.workflowInputData)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.s),o.Y36(l.A),o.Y36(_.F0),o.Y36(u.t6))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-alarm-workflow-wizard-review"]],inputs:{workflowInputData:"workflowInputData"},outputs:{activeTab:"activeTab",submitWorkflow:"submitWorkflow"},decls:81,vars:34,consts:[["id","review_wizrd",1,"review-wizard"],[1,"review-table-sec"],[1,"net-ops-secondary-title"],["id","Workflow_div",1,"table-responsive"],["datatable","",1,"row-border","dataTable","hover","table-alter",3,"dtOptions"],["class","table-responsive","id","devicegrp_div",4,"ngIf"],[1,"wizard-form"],[1,"w-100","row","form-group"],[1,"current-issue-menu-item","col-12","col-sm-12","col-md-3","col-lg-3"],["for","Name",1,"col-form-label","select-font"],[1,"col-form-label","select-font"],["class","current-issue-menu-item col-12 col-sm-12 col-md-12 col-lg-12","style","word-wrap: break-word;",4,"ngIf"],[1,"w-100","form-group"],[1,"current-issue-menu-item"],["class","row",4,"ngFor","ngForOf"],[1,"row","workflow-policy-sec"],[1,"col-xs-12","col-12","col-md-12","col-lg-12"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","workflow-policy",4,"ngIf"],[1,"workflow-next-previous"],["type","button","id","previous",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2",3,"click"],["src","assets/img/ic_chevronleft_grey.svg"],["type","button","disabled","","id","finish",1,"btn-default","primary","px-3",3,"click"],["id","devicegrp_div",1,"table-responsive"],[1,"current-issue-menu-item","col-12","col-sm-12","col-md-12","col-lg-12",2,"word-wrap","break-word"],[1,"row"],["class","col-sm-12 col-md-12 col-lg-3",4,"ngIf"],[1,"col-sm-12","col-md-12","col-lg-3"],[1,"select-font"],["for","Name",1,"select-font"],[1,"workflow-policy"],[1,"form-group","ccl-form","row"],[1,"col-sm-12","col-md-12","col-lg-2","col-xl-2"],["title","TimeZone as Local",1,"timelabel"],[1,"col-sm-12","col-md-12","col-lg-10","col-xl-10","calender"],["id","start_date","appendTo","body","disabled","","timeOnly","true","hourFormat","12",3,"inputStyle","autoZIndex","placeholder","ngModel","showIcon","ngModelOptions","ngModelChange"],["for","windowlength","title","",1,"timelabel"],[1,"col-sm-12","col-md-12","col-lg-10","col-xl-10","input-group"],["type","text","id","windowlength","name","windowlength","disabled","",1,"set-due-date","form-control",3,"ngModel","ngModelChange"],["class","col-sm-12 col-md-12 col-lg-10 col-xl-10 input-group",4,"ngIf"],["class","col-10 input-group",4,"ngIf"],[1,"form-group"],[1,"row","ccl-form"],["id","start_date_1","appendTo","body","dateFormat","mm-dd-yy","disabled","",3,"inputStyle","autoZIndex","placeholder","ngModel","showIcon","ngModelOptions","ngModelChange"],["class","radio-inline",4,"ngIf"],["class","radio-inline ",4,"ngIf"],["id","start_date_1","appendTo","body","placeholder","Select Date","dateFormat","mm-dd-yy","disabled","",3,"style","inputStyle","autoZIndex","ngModel","showIcon","ngModelOptions","ngModelChange",4,"ngIf"],["class","form-group ccl-form row",4,"ngIf"],[1,"form-group","row"],[1,"col-2","timelabel"],[1,"col-sm-12","col-md-12","col-lg-10","col-xl-10"],["type","checkbox","id","priortize","placeholder","#","name","range-occurrence","disabled","",1,"mr-3",3,"checked"],[1,"col-sm-12","col-md-12","col-lg-3","col-xl-3"],[1,"radio-inline","p-0"],[1,"daily-check","flex-start","col-sm-12","col-md-12","col-lg-9","col-xl-9"],[1,"radio-inline","pr-0","mb-0"],["type","radio","name","optionGroupsRadios","disabled","",1,"mr-2"],[1,"ccl-form","ml-2","number-input"],["type","number","placeholder","1","id","daily-pattern-frequence","name","daily-pattern-frequence",1,"col-md-3",3,"ngModel","ngModelChange"],[1,"col-10","input-group"],[1,"radio-inline","col-12","p-0"],[1,"daily-check","flex-start"],["type","number","placeholder","1","id","daily-pattern-frequence","name","daily-pattern-frequence",1,"col-2",3,"ngModel","ngModelChange"],["class","radio-inline col-12 p-0",4,"ngIf"],[1,"mont-list","flex-start"],[1,"radio-inline","mb-0","pr-0"],[1,"ccl-form"],["type","number","placeholder","1","id","month-pattern-frequence","disabled","","name","month-pattern-frequence",1,"",3,"ngModel","ngModelChange"],["type","number","placeholder","1","id","daysofmonth-pattern-frequence","disabled","","name","daysofmonth-pattern-frequence",1,"",3,"ngModel","ngModelChange"],[1,"radio-inline"],["id","start_date_1","appendTo","body","placeholder","Select Date","dateFormat","mm-dd-yy","disabled","",3,"inputStyle","autoZIndex","ngModel","showIcon","ngModelOptions","ngModelChange"],[1,"timelabel"],[1,"col-sm-12","col-md-12","col-lg-10","col-xl-10","workflow-oneline"],["type","number","id","range-occurrence","placeholder","#","name","range-occurrence","disabled","",1,"col-2",3,"ngModel","ngModelChange"],[1,"period-padding"]],template:function(e,t){1&e&&(o.TgZ(0,"section",0),o.TgZ(1,"div",1),o.TgZ(2,"span",2),o._uU(3),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"table",4),o.TgZ(6,"thead"),o.TgZ(7,"tr"),o.TgZ(8,"th"),o._uU(9),o.qZA(),o.TgZ(10,"th"),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"tbody"),o.TgZ(13,"tr"),o.TgZ(14,"td"),o._uU(15),o.qZA(),o.TgZ(16,"td"),o._uU(17),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"div",1),o.TgZ(19,"span",2),o._uU(20),o.qZA(),o.YNc(21,q,12,5,"div",5),o.qZA(),o.TgZ(22,"div",1),o.TgZ(23,"span",2),o._uU(24),o.qZA(),o.TgZ(25,"div",6),o.TgZ(26,"form"),o.TgZ(27,"span",2),o._uU(28,"Filter By Region"),o.qZA(),o.TgZ(29,"div",7),o.TgZ(30,"div",8),o.TgZ(31,"label",9),o._uU(32),o.qZA(),o._uU(33),o.qZA(),o.TgZ(34,"div",8),o.TgZ(35,"label",9),o._uU(36),o.qZA(),o._uU(37),o.qZA(),o.TgZ(38,"div",8),o.TgZ(39,"label",9),o._uU(40),o.qZA(),o._uU(41),o.qZA(),o.qZA(),o.TgZ(42,"span",2),o._uU(43,"Filter By Count"),o.qZA(),o.TgZ(44,"div",7),o.TgZ(45,"div",8),o.TgZ(46,"label",10),o._uU(47),o.qZA(),o.qZA(),o.TgZ(48,"div",8),o.TgZ(49,"label",10),o._uU(50),o.qZA(),o.qZA(),o.TgZ(51,"div",8),o.TgZ(52,"label",10),o._uU(53),o.ALo(54,"date"),o.qZA(),o.qZA(),o.TgZ(55,"div",8),o.TgZ(56,"label",10),o._uU(57),o.ALo(58,"date"),o.qZA(),o.qZA(),o.YNc(59,M,3,1,"div",11),o.qZA(),o.TgZ(60,"span",2),o._uU(61,"Filter By Additional Parameters"),o.qZA(),o.TgZ(62,"div",12),o.TgZ(63,"ul",13),o.YNc(64,U,4,3,"li",14),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(65,"div",15),o.TgZ(66,"div",16),o.TgZ(67,"span",2),o._uU(68),o.qZA(),o.YNc(69,J,2,1,"h6",17),o.TgZ(70,"div"),o.YNc(71,R,2,0,"span",17),o.TgZ(72,"ol",16),o.YNc(73,W,2,1,"li",18),o.qZA(),o.qZA(),o.YNc(74,ee,44,37,"form",19),o.qZA(),o.qZA(),o.qZA(),o.TgZ(75,"div",20),o.TgZ(76,"button",21),o.NdJ("click",function(){return t.go_previous()}),o._UZ(77,"img",22),o._uU(78),o.qZA(),o.TgZ(79,"button",23),o.NdJ("click",function(){return t.submit()}),o._uU(80),o.qZA(),o.qZA()),2&e&&(o.xp6(3),o.Oqu(t.language.Workflow),o.xp6(2),o.Q6J("dtOptions",t.tableRevOptions),o.xp6(4),o.Oqu(t.language.Name),o.xp6(2),o.Oqu(t.language.description),o.xp6(4),o.Oqu(null!=t.workflowInputData&&t.workflowInputData.name?null==t.workflowInputData?null:t.workflowInputData.name:""),o.xp6(2),o.hij(" ",null!=t.workflowInputData&&t.workflowInputData.description?t.workflowInputData.description:""," "),o.xp6(3),o.Oqu(t.language.Grouping),o.xp6(1),o.Q6J("ngIf",t.dataAvailable),o.xp6(3),o.Oqu(t.language.Operation_Parameters),o.xp6(8),o.Oqu(t.language.region),o.xp6(1),o.hij(" : ",null==t.workflowInputData?null:t.workflowInputData.regionName," "),o.xp6(3),o.Oqu(t.language.Location),o.xp6(1),o.hij(" : ",null==t.workflowInputData?null:t.workflowInputData.locationName," "),o.xp6(3),o.Oqu(t.language.System),o.xp6(1),o.hij(": ",null==t.workflowInputData?null:t.workflowInputData.systemName," "),o.xp6(6),o.hij(" No of Count : ",null==t.workflowInputData?null:t.workflowInputData.count," "),o.xp6(3),o.hij(" Duration (Seconds) : ",null==t.workflowInputData?null:t.workflowInputData.duration," "),o.xp6(3),o.hij(" Start Date : ",o.xi3(54,28,null==t.workflowInputData?null:t.workflowInputData.startDate,"dd/MM/yyyy")," "),o.xp6(4),o.hij(" End Date : ",o.xi3(58,31,null==t.workflowInputData?null:t.workflowInputData.endDate,"dd/MM/yyyy")," "),o.xp6(2),o.Q6J("ngIf","No"==(null==t.workflowInputData?null:t.workflowInputData.selectedCategories)),o.xp6(5),o.Q6J("ngForOf",null==t.workflowInputData?null:t.workflowInputData.additionalParams),o.xp6(4),o.Oqu(t.language.Select_Trigger),o.xp6(1),o.Q6J("ngIf","CPE Event"===(null==t.workflowInputData?null:t.workflowInputData.execPolicy.initialTrigger.type)),o.xp6(2),o.Q6J("ngIf","CPE Event"===(null==t.workflowInputData?null:t.workflowInputData.execPolicy.initialTrigger.type)),o.xp6(2),o.Q6J("ngForOf",t.listofEmail),o.xp6(1),o.Q6J("ngIf","CPE Event"!==(null==t.workflowInputData?null:t.workflowInputData.execPolicy.initialTrigger.type)),o.xp6(4),o.hij(" ",t.language.Previous," "),o.xp6(2),o.hij(" ",t.language.Finish," "))},directives:[n.G,h.O5,g._Y,g.JL,g.F,h.sg,S.f,g.JJ,g.On,g.Fj,g.wV],pipes:[h.uU],styles:[".review-table-sec[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;font-size:18px;margin-bottom:10px}.review-wizard[_ngcontent-%COMP%]{border:1px solid #ccc;padding:15px;border-radius:5px}.review-table-sec[_ngcontent-%COMP%]{margin:0}.workflow-policy-sec[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;margin-bottom:30px}.workflow-policy[_ngcontent-%COMP%]   .timelabel[_ngcontent-%COMP%]{padding-left:30px}.form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%], input[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.daily-check[_ngcontent-%COMP%]   .ccl-form.number-input[_ngcontent-%COMP%]{width:50%;margin-left:10px}.daily-check[_ngcontent-%COMP%]   .number-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:5px;color:#222}.workflow-oneline[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:9%;margin-right:5px;padding-right:5px}.mont-list[_ngcontent-%COMP%]   .ccl-form[_ngcontent-%COMP%]{width:20%;display:flex;align-items:center}.mont-list[_ngcontent-%COMP%]   .ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50%;padding-right:5px}.mont-list[_ngcontent-%COMP%]   .ccl-form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px}.mont-list[_ngcontent-%COMP%]   label.radio-inline[_ngcontent-%COMP%]{margin-right:9px}"]}),e})();var ie=i(47986),oe=i(68745),ne=i(48483),ae=i(21693),re=i(74375),le=i(20692);function se(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",31),o.TgZ(1,"span",32),o._UZ(2,"img",33),o.qZA(),o._UZ(3,"div",34),o.TgZ(4,"button",35),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._uU(5),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(3),o.Q6J("innerHtml",e.errorInfo,o.oJD),o.xp6(2),o.hij(" ",e.language.Ok," ")}}function ce(e,t){1&e&&(o.TgZ(0,"em"),o._uU(1," please enter value starting from 1 "),o.qZA())}function de(e,t){1&e&&(o.TgZ(0,"em"),o._uU(1," please enter value starting from 1 "),o.qZA())}function ue(e,t){if(1&e&&(o.TgZ(0,"div",18),o.TgZ(1,"div",36),o.TgZ(2,"label",6),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"div",37),o._UZ(5,"ng-select",38),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(3),o.Oqu(e.language.SelectAlarm),o.xp6(2),o.s9C("placeholder",e.language.SelectAlarm),o.Q6J("multiple",!0)("items",e.inputAlarms)("clearable",!1)("searchable",!0)}}function ge(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"img",49),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).addParams()}),o.qZA()}}function pe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"img",50),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().index;return o.oxw().removeAddParams(t)}),o.qZA()}}function he(e,t){1&e&&(o.TgZ(0,"em"),o._uU(1," please select a value "),o.qZA())}function fe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",51),o.TgZ(1,"label",52),o._uU(2,"Service Impacting "),o.TgZ(3,"img",50),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().index;return o.oxw().removeSingleParams(t,"Service Impacting")}),o.qZA(),o.qZA(),o.TgZ(4,"div"),o.TgZ(5,"label",53),o._UZ(6,"input",54),o._uU(7),o.qZA(),o.TgZ(8,"label",53),o._UZ(9,"input",55),o._uU(10),o.qZA(),o.qZA(),o.YNc(11,he,2,0,"em",16),o.qZA()}if(2&e){const e=o.oxw().index,t=o.oxw();let i;o.xp6(6),o.MGl("id","ServiceImpacting",e,""),o.xp6(1),o.hij(" ",t.language.Yes," "),o.xp6(2),o.MGl("id","ServiceImpacting",e,""),o.xp6(1),o.hij(" ",t.language.No," "),o.xp6(1),o.Q6J("ngIf",null==(i=t.filtersForm.get("ServiceImpacting"))||null==i.errors?null:i.errors.required)}}function we(e,t){1&e&&(o.TgZ(0,"em"),o._uU(1," please select a value "),o.qZA())}function me(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",51),o.TgZ(1,"label",52),o._uU(2,"Service Affecting "),o.TgZ(3,"img",50),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().index;return o.oxw().removeSingleParams(t,"Service Affecting")}),o.qZA(),o.qZA(),o.TgZ(4,"div"),o.TgZ(5,"label",53),o._UZ(6,"input",56),o._uU(7),o.qZA(),o.TgZ(8,"label",53),o._UZ(9,"input",57),o._uU(10),o.qZA(),o.qZA(),o.YNc(11,we,2,0,"em",16),o.qZA()}if(2&e){const e=o.oxw().index,t=o.oxw();let i;o.xp6(6),o.MGl("id","ServiceAffecting",e,""),o.xp6(1),o.hij(" ",t.language.Yes," "),o.xp6(2),o.MGl("id","ServiceAffecting",e,""),o.xp6(1),o.hij(" ",t.language.No," "),o.xp6(1),o.Q6J("ngIf",null==(i=t.filtersForm.get("ServiceAffecting"))||null==i.errors?null:i.errors.required)}}function ve(e,t){1&e&&(o.TgZ(0,"em"),o._uU(1," please select a value "),o.qZA())}function be(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",51),o.TgZ(1,"label",58),o._uU(2),o.TgZ(3,"img",50),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().index;return o.oxw().removeSingleParams(t,"Severity")}),o.qZA(),o.qZA(),o.TgZ(4,"div",59),o.TgZ(5,"ng-select",60),o.NdJ("change",function(){return o.CHM(e),o.oxw(2).changeSeverity()}),o.TgZ(6,"ng-option",61),o._uU(7),o.qZA(),o.TgZ(8,"ng-option",62),o._uU(9),o.qZA(),o.TgZ(10,"ng-option",63),o._uU(11),o.qZA(),o.TgZ(12,"ng-option",64),o._uU(13),o.qZA(),o.TgZ(14,"ng-option",65),o._uU(15),o.qZA(),o.TgZ(16,"ng-option",66),o._uU(17),o.qZA(),o.qZA(),o.YNc(18,ve,2,0,"em",16),o.qZA(),o.qZA()}if(2&e){const e=o.oxw(2);let t;o.xp6(2),o.hij("",e.language.Severity," "),o.xp6(3),o.s9C("placeholder",e.language.Severity),o.Q6J("searchable",!1),o.xp6(2),o.Oqu(e.language.All),o.xp6(2),o.Oqu(e.language.critical),o.xp6(2),o.Oqu(e.language.major),o.xp6(2),o.Oqu(e.language.minor),o.xp6(2),o.Oqu(e.language.Warning),o.xp6(2),o.Oqu(e.language.Info),o.xp6(1),o.Q6J("ngIf",null==(t=e.filtersForm.get("Severity"))||null==t.errors?null:t.errors.required)}}function ke(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",39),o.TgZ(1,"div",40),o.TgZ(2,"div",18),o.TgZ(3,"label",41),o._uU(4,"Select Parameter"),o.qZA(),o.TgZ(5,"div",42),o.TgZ(6,"ng-select",43),o.NdJ("change",function(t){const i=o.CHM(e).index;return o.oxw().selectAdditionalParam(t,i)})("add",function(t){return o.CHM(e),o.oxw().addAdditionalParam(t)}),o.qZA(),o.qZA(),o.TgZ(7,"div",44),o.YNc(8,ge,1,0,"img",45),o.YNc(9,pe,1,0,"img",46),o.qZA(),o.qZA(),o.TgZ(10,"div",47),o.YNc(11,fe,12,5,"div",48),o.YNc(12,me,12,5,"div",48),o.YNc(13,be,19,10,"div",48),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=t.index,i=o.oxw();o.xp6(1),o.Q6J("formGroupName",e),o.xp6(5),o.Q6J("clearOnBackspace",!0)("multiple",!1)("items",i.additionalParameters)("clearable",!0)("searchable",!0),o.xp6(2),o.Q6J("ngIf",e==(null==i.filtersForm||null==i.filtersForm.value.additionalParams?null:i.filtersForm.value.additionalParams.length)-1),o.xp6(1),o.Q6J("ngIf",e!=(null==i.filtersForm||null==i.filtersForm.value.additionalParams?null:i.filtersForm.value.additionalParams.length)-1),o.xp6(2),o.Q6J("ngIf",i.selectedAddParams[e]&&i.selectedAddParams[e].includes("Service Impacting")),o.xp6(1),o.Q6J("ngIf",i.selectedAddParams[e]&&i.selectedAddParams[e].includes("Service Affecting")),o.xp6(1),o.Q6J("ngIf",i.selectedAddParams[e]&&i.selectedAddParams[e].includes("Severity"))}}const De=function(e){return[e]};let Ze=(()=>{class e{constructor(e,t,i,n,l,s,c,d,u,p,h){this.translateService=e,this.customTranslateService=t,this.commonOrgService=i,this.api=n,this.router=l,this.sso=s,this.fileService=c,this.fb=d,this.http=u,this.dateUtilsService=p,this.issueService=h,this.workflowOprData=new o.vpe,this.activeTab=new o.vpe,this.inputLocations=[{label:"location1"},{label:"location2"},{label:"location3"}],this.dropdownPeriod=["Bandwidth","Data Service","Video Service","Voice Service"],this.inputOperationType=[{name:"Configuration File Download",id:"Configuration File Download"},{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}],this.configFileDnwld=["Name","Description","Software Version","Type"],this.commonHeader=["Name","Description"],this.replaceService=["Name","Description","Type"],this.actionType="Download Configuration File",this.categoryChoosed="Bandwidth",this.tableHeader=[],this.replaceProfile=!1,this.loading=!0,this.isRerender=!1,this.newOprtn=!1,this.doneActive=!1,this.newProfileShow=!1,this.selectedDevices=[],this.errorInfo="",this.successInfo="",this.IQtemp=[],this.tableOptions={pagingType:"full_numbers",dom:"t",ordering:!1,columnDefs:[{targets:[1,2,3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#opr-table_last").addClass("disabled")}},this.dtTrigger=new a.xQ,this.sysAdminRoute="systemAdministration",this.doneClicked=!1,this.groupOfCategory=["Service Attributes","Services"],this.IQSuitesData=[],this.showEditButton=!1,this.filtersForm=this.fb.group({region:[""],location:[""],system:[""],duration:["",[g.kI.min(1)]],count:["",[g.kI.min(1)]],additionalParams:this.fb.array([this.createItem()]),startDate:[""],endDate:[""],SelectedAlarm:[""]}),this.regionsDataArray=["All"],this.locationDataArray=["All"],this.systemDataArray=["All"],this.categories=[],this.baseUrl=`${r.N.API_BASE_URL}analytics-engine/`,this.ServiceAffecting="Yes",this.ServiceImpacting="Yes",this.clickedSystem="",this.inputAlarms=[{label:"device_sync_failure"},{label:"post_i2c"},{label:"dhcp-server-detected"}],this.maxDate=new Date,this.maxForStartDate=new Date,this.additionalParameters=[{label:"Service Impacting"},{label:"Service Affecting"},{label:"Severity"}],this.todayDate=new Date,this.selectedAddParams=[],this.oprData={},this.orgId=this.sso.getOrgId(),this.frTable=this.customTranslateService.fr,this.sysAdminRoute=r.N.SYS_ADMIN_ROUTE}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.tableHeader=this.configFileDnwld,this.workflowInputData&&this.workflowInputData.actions.forEach(e=>{"Edge Suites Provision"===e.actionType&&(e.actionType="Edge Suites Bulk Activation")}),this.router.url.includes("cco-foundation")?(this.oprTypeValueSelected="Download SW/FW Image",this.inputOperationType=this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1?[{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}]:[{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"}],this.optTypeValueChoose()):(this.oprTypeValueSelected="Configuration File Download",this.optTypeValueChoose(),this.inputOperationType=this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1?[{name:"Configuration File Download",id:"Configuration File Download"},{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}]:[{name:"Configuration File Download",id:"Configuration File Download"},{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"}]),this.checkSwCondition(),this.Severity="all",this.filtersForm.patchValue({region:["All"],location:["All"],system:["All"],severity:["All"]}),this.initData(),this.regionsApiLoader(),this.getCategories()}initData(){this.workflowInputData&&(this.workflowInputData.region&&(this.filtersForm.get("region").setValue(this.workflowInputData.region),this.loadLocationValue(this.workflowInputData.region)),this.workflowInputData.location&&(this.filtersForm.get("location").setValue(this.workflowInputData.location),this.loadSystemValue(this.workflowInputData.location)),this.workflowInputData.system&&this.filtersForm.get("system").setValue(this.workflowInputData.system),this.workflowInputData.count&&this.filtersForm.get("count").setValue(this.workflowInputData.count),this.workflowInputData.duration&&this.filtersForm.get("duration").setValue(this.workflowInputData.duration),0!=this.workflowInputData.additionalParams.length&&(this.addAvailableSystems(this.workflowInputData.additionalParams),this.updateSelectedValues(this.workflowInputData.additionalParams)),this.workflowInputData.startDate&&this.filtersForm.get("startDate").setValue(new Date(this.workflowInputData.startDate)),this.workflowInputData.endDate&&this.filtersForm.get("endDate").setValue(new Date(this.workflowInputData.endDate)),this.workflowInputData.alarmName&&this.filtersForm.get("SelectedAlarm").setValue(this.workflowInputData.alarmName))}createItem(e){return this.fb.group({Severity:(null==e?void 0:e.Severity)||void 0,ServiceImpacting:(null==e?void 0:e.ServiceImpacting)||void 0,ServiceAffecting:(null==e?void 0:e.ServiceAffecting)||void 0})}updateSelectedValues(e){e.forEach((e,t)=>{e.Severity&&(this.selectedAddParams[t]=this.selectedAddParams[t]?this.selectedAddParams[t]+",Severity":"Severity"),e.ServiceImpacting&&(this.selectedAddParams[t]=this.selectedAddParams[t]?this.selectedAddParams[t]+",Service Impacting":"Service Impacting"),e.ServiceAffecting&&(this.selectedAddParams[t]=this.selectedAddParams[t]?this.selectedAddParams[t]+",Service Affecting":"Service Affecting")})}removeSingleParams(e,t){let i=this.selectedAddParams[e].split(",");i=i.filter(e=>e!=t).join(),this.selectedAddParams[e]=i,"Severity"==t&&this.filtersForm.get("additionalParams").at(e).get("Severity").patchValue(void 0),"Service Impacting"==t&&this.filtersForm.get("additionalParams").at(e).get("ServiceImpacting").patchValue(void 0),"Service Affecting"==t&&this.filtersForm.get("additionalParams").at(e).get("ServiceAffecting").patchValue(void 0)}addAvailableSystems(e){for(this.paramList=this.filtersForm.get("additionalParams");0!==this.paramList.length;)this.paramList.removeAt(0);e.forEach((e,t)=>{this.paramList.push(this.createItem(e))})}removeAddParams(e){this.paramList.removeAt(e),delete this.selectedAddParams[e],this.selectedAddParams=this.selectedAddParams.filter(e=>e),this.addAvailableSystems(this.paramList.value)}addParams(){this.paramList=this.filtersForm.get("additionalParams"),this.paramList.push(this.createItem())}selectSystem(e){let t=this.filtersForm.get("system").value;this.systemName=t,"All"==t&&(this.systemName=null)}validateRegion(e){let t=this.filtersForm.get("region").value;if("All"===e)this.workflowInputData.regionName="All",t=["All"];else{this.workflowInputData.regionName=e.name;let i=t.indexOf("All");i>-1&&t.splice(i,1)}this.filtersForm.get("region").setValue(t),this.loadLocationValue("")}validateLocation(e){let t=this.filtersForm.get("location").value;if("All"===e)this.workflowInputData.locationName="All",t=["All"];else{this.workflowInputData.locationName=e.name;let i=t.indexOf("All");i>-1&&t.splice(i,1)}this.filtersForm.get("location").setValue(t),this.loadSystemValue("")}changeSeverity(){this.clickedSeverity=""}validateSystem(e){let t=this.filtersForm.get("system").value;if("All"===e)this.workflowInputData.systemName="All",t=["All"];else{this.workflowInputData.systemName=e.name;let i=t.indexOf("All");i>-1&&t.splice(i,1)}this.filtersForm.get("system").setValue(t)}addAdditionalParam(e){}selectAdditionalParam(e,t){this.selectedAddParams[t]=this.selectedAddParams[t]?this.selectedAddParams[t]+","+e.label:e.label}loadSystemValue(e){this.clickedLocation="";let t=this.filtersForm.get("region").value,i=this.filtersForm.get("location").value;if(this.systemSelected=["All"],t.length&&i.length&&-1===i.indexOf("All")){let e="";t.forEach(t=>{"All"!=t&&(e+=`&region=${t}`)});let o="";i.forEach(e=>{"All"!=e&&(o+=`&location=${e}`)}),this.http.get(`${r.N.API_BASE_URL}nfa/systems?tenant=0&org-id=${this.sso.getOrgId()}${e}${o}`).subscribe(e=>{this.systemDataArray=e,this.systemDataArray.push("All")},e=>{});let n=[];this.locationDataArray.forEach(e=>{-1!==i.indexOf(e.id)&&n.push(e.name)}),this.locationName=n}else i.length||(this.filtersForm.get("system").setValue(["All"]),this.locationName=null,this.systemName=null,this.systemDataArray=["All"])}loadLocationValue(e){this.clickedRegion="",this.locationSelected="All",this.systemSelected="All";let t=this.filtersForm.get("region").value;if(this.regionSelected=t,this.regionSelected&&this.regionSelected!=["All"]){let e="";if(t.length&&t!==["All"]){if(-1!==t.indexOf("All"))return this.regionName=null,this.locationName=null,this.systemName=null,this.locationDataArray=["All"],void(this.systemDataArray=["All"]);t.forEach(t=>{"All"!=t&&(e+=`&region=${t}`)}),this.http.get(`${r.N.API_BASE_URL}nfa/locations?tenant=0&org-id=${this.sso.getOrgId()}${e}`).subscribe(e=>{this.locationDataArray=e,this.locationDataArray.push("All")},e=>{});let i=[];this.regionsDataArray.forEach(e=>{-1!==t.indexOf(e.id)&&i.push(e.name)}),this.regionName=i}else this.filtersForm.get("location").setValue(["All"]),this.filtersForm.get("system").setValue(["All"]),this.regionName=null,this.locationName=null,this.systemName=null,this.locationDataArray=["All"],this.systemDataArray=["All"]}}regionsApiLoader(){this.regionSelected="All",this.locationSelected="All",this.systemSelected="All",this.regionsSubject=this.issueService.getRegions().subscribe(e=>{e.sort(),this.regionsDataArray=[...this.regionsDataArray,...e]},e=>{})}getCategories(){let e={historyReport:!1},t="";for(var i in e)null==e[i]||""==e[i]||e[i]===[]||(""!=t&&(t+="&"),t+=i+"="+encodeURIComponent(e[i]));t+="&historyReport=false",this.http.get(`${this.baseUrl}category?${t}`).subscribe(e=>{let t=[{id:"All",name:"All"}];e&&e.forEach(e=>{!e||t.push({id:e,name:e})}),this.categories=t})}checkSwCondition(){if(this.workflowInputData)for(let e=0;e<this.workflowInputData.actions.length;e++){if("Download SW/FW Image"==this.workflowInputData.actions[e].actionType&&"CPE Event"==this.workflowInputData.execPolicy.initialTrigger.type&&"Suspended"!=this.workflowInputData.state){this.actionType=this.workflowInputData.actions[0].actionType,this.showEditButton=!0;break}this.showEditButton=!1}}newOprtnAdd(e,t){this.newOprtn=!0,"new"===e&&(this.operationCondition="",this.categoryChoosed="Bandwidth",this.doneActive=!1,this.actionType=""),this.workflowInputData.groups.length?0!=this.workflowInputData.actions.length&&this.workflowInputData.actions[0].actionType?"edit"===e?(this.editIndex=t,this.oprTypeValueSelected=this.workflowInputData.actions[t].actionType,this.optTypeValueChoose()):(this.oprTypeValueSelected=this.workflowInputData.actions[0].actionType,this.workflowInputData.actions.findIndex(e=>"Edge Suites Bulk Activation"===e.actionType),this.router.url.includes("cco-foundation")&&(this.oprTypeValueSelected="Download SW/FW Image",this.inputOperationType=this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1?[{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}]:[{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"}]),this.optTypeValueChoose()):(this.workflowInputData.actions.findIndex(e=>"Edge Suites Bulk Activation"===e.actionType),this.router.url.includes("cco-foundation")?(this.oprTypeValueSelected="Download SW/FW Image",this.inputOperationType=this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1?[{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}]:[{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"}],this.optTypeValueChoose()):(this.oprTypeValueSelected="Configuration File Download",this.inputOperationType=this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1?[{name:"Configuration File Download",id:"Configuration File Download"},{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}]:[{name:"Configuration File Download",id:"Configuration File Download"},{name:"Download SW/FW Image",id:"Download SW/FW Image"},{name:"Reboot",id:"Reboot"},{name:"Apply Configuration Profile",id:"Apply Configuration Profile"},{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Add to Static Device Group",id:"Add Static Device Group"}],this.optTypeValueChoose())):(this.workflowInputData.actions.findIndex(e=>"Edge Suites Bulk Activation"===e.actionType),this.oprTypeValueSelected="Replace Service Profile",this.inputOperationType=this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1?[{name:"Replace Service Profile",id:"Replace Service Profile"},{name:"Edge Suites Provision",id:"Edge Suites Provision"}]:[{name:"Replace Service Profile",id:"Replace Service Profile"}],this.tableHeader=this.replaceService,this.replaceProfile=!0,this.actionType="Replace Service Profile",this.getReplaceService(this.categoryChoosed),this.getConfigFile())}ngOnDestroy(){this.languageSubject.unsubscribe(),this.getConfigFileSubscribe&&this.getConfigFileSubscribe.unsubscribe(),this.getSwImageSubscribe&&this.getSwImageSubscribe.unsubscribe(),this.getConfigProfileSubscribe&&this.getConfigProfileSubscribe.unsubscribe(),this.getStaticSubscribe&&this.getStaticSubscribe.unsubscribe(),this.getReplaceServiceSubscribe&&this.getReplaceServiceSubscribe.unsubscribe(),this.getNewProfileSubscribe&&this.getNewProfileSubscribe.unsubscribe()}setTableOptions(e){this.tableOptions={pagingType:"full_numbers",rowId:"id",searching:!1,lengthChange:!1,paging:!1,ordering:!1,dom:"t",columnDefs:[{targets:[1,2,3,4],orderable:!1},{targets:[0],orderable:!0}],order:[0,"asc"],drawCallback:e=>{e.aoData.length<=e._iDisplayLength&&$(e.nTableWrapper).find("#opr-table_last").addClass("disabled")}},e&&"language"==e?setTimeout(()=>{this.rerender(),setTimeout(()=>{this.dataAvailable=!0,this.loading=!1},100)},100):setTimeout(()=>{this.dataAvailable=!0,this.loading=!1},500)}rerender(){this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next()})}chooseCategory(){"Data Service"===this.categoryChoosed?(this.getReplaceService("Data Service"),this.newProfileShow=!1):"Voice Service"===this.categoryChoosed?(this.getReplaceService("Voice Service"),this.newProfileShow=!1):"Video Service"===this.categoryChoosed?(this.getReplaceService("Video Service"),this.newProfileShow=!1):(this.getReplaceService("Bandwidth"),this.newProfileShow=!1)}optTypeValueChoose(){this.workflowInputData&&this.workflowInputData.source&&delete this.workflowInputData.source,"Configuration File Download"===this.oprTypeValueSelected?(this.tableHeader=this.configFileDnwld,this.replaceProfile=!1,this.actionType="Download Configuration File",this.getConfigFile()):"Download SW/FW Image"===this.oprTypeValueSelected?(this.tableHeader=this.commonHeader,this.replaceProfile=!1,this.actionType="Download SW/FW Image",this.router.url.includes("/cco-foundation/foundation-operations/foundation-system-operation/workflows/workflow-wizard")&&(this.workflowInputData.fullGroupExecute=!0,this.workflowInputData.source="Foundation"),this.getSwImgFile()):"Apply Configuration Profile"===this.oprTypeValueSelected?(this.tableHeader=this.commonHeader,this.replaceProfile=!1,this.actionType="Apply Configuration Profile",this.getConfigProfile()):"Add Static Device Group"===this.oprTypeValueSelected?(this.tableHeader=this.commonHeader,this.replaceProfile=!1,this.actionType="Add to Static Device Group",this.getStaticDevice()):"Reboot"===this.oprTypeValueSelected?(this.actionType="Reboot",this.doneActive=!0,this.oprData={}):"Edge Suites Provision"===this.oprTypeValueSelected?(this.IQtemp.length=0,this.IQSuitesData.length=0,this.tableHeader=this.commonHeader,this.replaceProfile=!1,this.actionType="Edge Suites Bulk Activation",(this.sso.getEntitlementsArr().indexOf("203")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1)&&this.IQSuitesData.push({_id:"2",name:"ProtectIQ",checked:!1,description:"ProtectIQ"}),(this.sso.getEntitlementsArr().indexOf("204")>-1||this.sso.getEntitlementsArr().indexOf("205")>-1)&&this.IQSuitesData.push({_id:"1",name:"ExperienceIQ",checked:!1,description:"ExperienceIQ"})):(this.oprData={},this.tableHeader=this.replaceService,this.replaceProfile=!0,this.actionType="Replace Service Profile",this.getReplaceService(this.categoryChoosed))}bindConfigData(e,t){if(e.target.checked)if(this.oprData={},"Add to Static Device Group"===this.actionType){this.doneActive=!0;let e={};e.staticGroupId=t._id,e.actionType=this.actionType,e.profileName=t.name,this.operationCondition&&(e.conditionLogic=this.operationCondition),this.oprData=e}else if("Apply Configuration Profile"===this.actionType){this.doneActive=!0;let e={};e.profileId=t._id,e.actionType=this.actionType,e.profileName=t.name,this.operationCondition&&(e.conditionLogic=this.operationCondition),this.oprData=e}else if("Edge Suites Bulk Activation"===this.actionType){this.doneActive=!0;let e={};this.IQtemp.push(t.name),e.actionType=this.actionType,e.appType=this.IQtemp.join(","),this.router.url.includes("/cco-foundation")&&(this.workflowInputData.source="Foundation"),this.operationCondition&&(e.conditionLogic=this.operationCondition),this.oprData=e}else{this.doneActive=!0;let e={};e.fileId=t._id,e.actionType=this.actionType,e.profileName=t.name,this.operationCondition&&(e.conditionLogic=this.operationCondition),this.oprData=e}else if("Edge Suites Bulk Activation"===this.actionType){let e=this.IQtemp.indexOf(t.name);-1!=e&&this.IQtemp.splice(e,1);let i={};i.actionType=this.actionType,i.appType=this.IQtemp.join(","),i.appType||(this.doneActive=!1),this.router.url.includes("/cco-foundation")&&(this.workflowInputData.source="Foundation"),this.operationCondition&&(i.conditionLogic=this.operationCondition),this.oprData=i}}findObjIndex(e,t){for(var i=0;i<t.length;i++)if(t[i]._id===e)return i;return-1}checkErrors(e,t={}){let i=!1;return Object.keys(e.controls).forEach(i=>{const o=e.get(i);o instanceof g.NI?t[i]=o.errors:o instanceof g.cw&&(t[i]=this.checkErrors(o))}),0!=Object.keys(t).length&&Object.keys(t).forEach(e=>{t[e]instanceof Object&&(i=!0)}),i}go_next(){return this.workflowInputData.actions.length>0?(this.workflowInputData.levelPassed<=3&&(this.workflowInputData.levelPassed=3),this.workflowOprData.emit(this.workflowInputData),this.activeTab.emit("Select Schedule Parameters"),!0):this.checkErrors(this.filtersForm)?void 0:(this.workflowInputData.levelPassed<=3&&(this.workflowInputData.levelPassed=3),this.workflowInputData.region=this.filtersForm.get("region").value,this.workflowInputData.location=this.filtersForm.get("location").value,this.workflowInputData.system=this.filtersForm.get("system").value,this.workflowInputData.duration=this.filtersForm.get("duration").value,this.workflowInputData.count=this.filtersForm.get("count").value,this.workflowInputData.additionalParams=[],this.workflowInputData.additionalParams=this.filtersForm.get("additionalParams").value,this.filtersForm.get("startDate").value&&(this.workflowInputData.startDate=new Date(this.filtersForm.get("startDate").value).toUTCString()),this.filtersForm.get("endDate").value&&(this.workflowInputData.endDate=new Date(this.filtersForm.get("endDate").value).toUTCString()),this.workflowInputData.alarmName=this.filtersForm.get("SelectedAlarm").value,this.workflowOprData.emit(this.workflowInputData),this.activeTab.emit("Select Schedule Parameters"),!0)}go_previous(){this.workflowOprData.emit(this.workflowInputData),this.router.url.endsWith("official-workflow-wizard")?this.activeTab.emit("Start"):this.activeTab.emit("Select Device Groups")}deleteWrkflw(e){this.workflowInputData.actions.splice(e,1)}getConfigFile(){this.getConfigFileSubscribe=this.api.getConfigFile(this.orgId,"Configuration File").subscribe(e=>{if(e){let o=[];this.workflowInputData.actions&&this.workflowInputData.actions.forEach(e=>{o.push(e.fileId)});let n={};for(var t=0;t<e.length;t++)n[e[t]._id]=e[t];for(var i=0;i<e.length;i++)-1!=o.indexOf(e[i]._id)&&delete n[e[i]._id];this.cofigFileData=Object.values(n),this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.sso.pageErrorHandle(e),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1,this.success=!1}getSwImgFile(){this.getSwImageSubscribe=this.fileService.getSwFilesList(String(this.orgId),"",ie.r.SW_FW_Image).subscribe(e=>{if(e){let o=[];this.workflowInputData.actions&&this.workflowInputData.actions.forEach(e=>{o.push(e.fileId)});let n={};for(var t=0;t<e.length;t++)n[e[t]._id]=e[t];for(var i=0;i<e.length;i++)-1!=o.indexOf(e[i]._id)&&delete n[e[i]._id];this.swFileData=Object.values(n),this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}getConfigProfile(){this.getConfigProfileSubscribe=this.api.getConfigProfile(this.orgId).subscribe(e=>{if(e){let o=[];this.workflowInputData.actions&&this.workflowInputData.actions.forEach(e=>{o.push(e.profileId)});let n={};for(var t=0;t<e.length;t++)n[e[t]._id]=e[t];for(var i=0;i<e.length;i++)-1!=o.indexOf(e[i]._id)&&delete n[e[i]._id];this.configProFileData=Object.values(n),this.configProFileData=this.configProFileData.filter(e=>!e.innerProfileCategory),this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}getStaticDevice(){this.getStaticSubscribe=this.api.getStaticDevice(this.orgId).subscribe(e=>{if(e){let o=[];this.workflowInputData.actions&&this.workflowInputData.actions.forEach(e=>{o.push(e.staticGroupId)});let n={};for(var t=0;t<e.length;t++)n[e[t]._id]=e[t];for(var i=0;i<e.length;i++)-1!=o.indexOf(e[i]._id)&&delete n[e[i]._id];this.staticDeviceData=Object.values(n),this.staticDeviceTable=this.staticDeviceData.filter(e=>"static"===e.type),this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}getReplaceService(e){this.loading=!0,this.getReplaceServiceSubscribe=this.api.getReplaceService(this.orgId,e).subscribe(e=>{if(e){let o=[];this.workflowInputData.actions&&this.workflowInputData.actions.forEach(e=>{o.push(e.profileId)});let n={};for(var t=0;t<e.length;t++)n[e[t].id]=e[t];for(var i=0;i<e.length;i++)-1!=o.indexOf(e[i].id)&&delete n[e[i].id];this.originalProfile=Object.values(n),this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}getNewProfileData(e,t,i,o,n){this.loading=!0,this.getNewProfileSubscribe=this.api.getReplaceService(this.orgId,e,t,i,o,n).subscribe(e=>{if(e){let o=[];this.workflowInputData.actions&&this.workflowInputData.actions.forEach(e=>{o.push(e.replacedByProfileId)});let n={};for(var t=0;t<e.length;t++)n[e[t].id]=e[t];for(var i=0;i<e.length;i++)-1!=o.indexOf(e[i].id)&&delete n[e[i].id];this.NewProfile=Object.values(n),this.setTableOptions(),this.newProfileShow=!0,this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next()}},e=>{this.setTableOptions(),this.isRerender?(this.rerender(),this.isRerender=!1):this.dtTrigger.next(),this.loading=!1,this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}bindReplaceData(e,t){e.target.checked&&(this.oldProData=t,"Data Service"===this.categoryChoosed?this.getNewProfileData("Data Service",t.id,t.mode,t.framingtype):"Voice Service"===this.categoryChoosed?this.getNewProfileData("Voice Service",t.id,t.mode,null,t.voicetype):"Video Service"===this.categoryChoosed?this.getNewProfileData("Video Service",t.id,t.mode):this.getNewProfileData("Bandwidth",t.id,t.mode,t.framingtype))}bindReplaceNewData(e,t){e.target.checked&&(this.newProValue=t,this.doneActive=!0)}doneClick(){if(this.doneClicked=!0,this.newOprtn=!1,this.error=!1,"Reboot"===this.actionType){let e={};e.actionType=this.actionType,this.operationCondition&&(e.conditionLogic=this.operationCondition),this.workflowInputData.actions.push(e)}if("Replace Service Profile"===this.actionType){let e={};e.actionType=this.actionType,e.profileId=this.oldProData.id,e.replacedByProfileId=this.newProValue.id,e.profileName=this.oldProData.name+" is replaced by "+this.newProValue.name,this.operationCondition&&(e.conditionLogic=this.operationCondition),this.workflowInputData.actions.push(e)}if("Download Official Image"===this.actionType){let e={};e.actionType=this.actionType,this.workflowInputData.actions.push(e)}Object.keys(this.oprData).length&&(this.operationCondition&&(this.oprData.conditionLogic=this.operationCondition),this.showEditButton?this.workflowInputData.actions[this.editIndex]=this.oprData:this.workflowInputData.actions.push(this.oprData)),"Apply Configuration Profile"===this.oprTypeValueSelected&&this.getConfigProfile(),"Configuration File Download"===this.oprTypeValueSelected&&this.getConfigFile(),"Download SW/FW Image"===this.oprTypeValueSelected&&this.getSwImgFile(),"Add Static Device Group"===this.oprTypeValueSelected&&this.getStaticDevice(),"Replace Service Profile"===this.oprTypeValueSelected&&this.getReplaceService(this.categoryChoosed),"Replace Service Profile"===this.oprTypeValueSelected&&this.getNewProfileData(this.categoryChoosed)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.s),o.Y36(c.d),o.Y36(d.v),o.Y36(l.A),o.Y36(_.F0),o.Y36(u.t6),o.Y36(oe.I),o.Y36(g.qu),o.Y36(s.eN),o.Y36(ne.s),o.Y36(ae.v))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-alarm-wrkflow-wizard-opr-parameters"]],viewQuery:function(e,t){if(1&e&&o.Gf(n.G,5),2&e){let e;o.iGM(e=o.CRH())&&(t.dtElement=e.first)}},inputs:{workflowInputData:"workflowInputData"},outputs:{workflowOprData:"workflowOprData",activeTab:"activeTab"},decls:58,vars:37,consts:[["class","w-100 alert alert-danger mt-4 fade show",4,"ngIf"],[1,"wizard-form"],[3,"formGroup"],[1,"net-ops-secondary-title"],[1,"w-100","row","form-group"],[1,"current-issue-menu-item","col-12","col-sm-12","col-md-3","col-lg-3"],["for","Name",1,"col-form-label","select-font"],["id","current-issues-interval",1,"w-100"],["formControlName","region","bindValue","id","bindLabel","name",1,"selectboxwidth",3,"multiple","items","clearable","searchable","placeholder","add","remove"],["formControlName","location","bindValue","id","bindLabel","name",1,"selectboxwidth",3,"multiple","items","placeholder","clearable","searchable","add","remove"],["formControlName","system","bindValue","fqn","bindLabel","name",1,"selectboxwidth",3,"multiple","items","placeholder","clearable","searchable","change","add"],[1,"w-100","form-group"],[1,"form-group","ccl-form","row",3,"ngClass"],[1,"col-2","control-label"],[1,"col-md-5"],["min","1","customNeg","","id","wk-count","name","name_input","type","number","formControlName","count","aria-describedby","count-error","placeholder","Enter Number of Count"],[4,"ngIf"],["min","0","id","wk-duration_input","name","seconds_input","type","number","formControlName","duration","aria-describedby","duration-error","placeholder","Enter Duration in seconds"],[1,"form-group","ccl-form","row"],["for","startDate",1,"col-2","control-label"],["name","startDate","data-toggle","tooltip","data-placement","bottom","title","Start Date","id","startDate","formControlName","startDate","readonlyInput","true","aria-required","true","aria-describedby","startTime-error","aria-invalid","true",3,"showIcon","minDate","maxDate"],["for","endDate",1,"col-2","control-label"],["name","endDate","data-toggle","tooltip","data-placement","bottom","title","End Date","id","endDate","formControlName","endDate","readonlyInput","true","aria-required","true","aria-describedby","endTime-error","aria-invalid","true",3,"showIcon","minDate"],["class","form-group ccl-form row",4,"ngIf"],[1,"form-group"],["class","border-bottom my-2","formArrayName","additionalParams",4,"ngFor","ngForOf"],[1,"workflow-next-previous"],["type","button","id","previous",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2",3,"click"],["src","assets/img/ic_chevronleft_grey.svg"],["type","button","id","next",1,"btn-arrow","btn-arr-nxt","primary",3,"click"],["src","assets/img/ic_chevron-r-w.svg"],[1,"w-100","alert","alert-danger","mt-4","fade","show"],[1,"error-img"],["src","./assets/img/ic_error-36px.svg"],[1,"d-inline-flex",3,"innerHtml"],["id","wk-opr-err-ok",1,"btn-default","px-3","ok-btn","float-right",3,"click"],[1,"current-issue-menu-item","col-sm-12","col-md-2","col-lg-2"],["id","current-issues-interval",1,"col-sm-12","col-md-5","col-lg-5"],["formControlName","SelectedAlarm","bindValue","label","bindLabel","label",1,"selectboxwidth",3,"multiple","items","clearable","searchable","placeholder"],["formArrayName","additionalParams",1,"border-bottom","my-2"],[3,"formGroupName"],["for","Name",1,"col-2","control-label"],["id","current-issues-interval",1,"col-md-5"],["bindValue","label","bindLabel","label","placeholder","Select Parameter",1,"selectboxwidth",3,"clearOnBackspace","multiple","items","clearable","searchable","change","add"],[1,"add-remove"],["class","pointer mr-3","src","assets/img/Icon_Circle-Plus.svg",3,"click",4,"ngIf"],["class","pointer","src","assets/img/ic_minus_sign_circle.svg",3,"click",4,"ngIf"],[1,"row"],["class","form-group col ccl-form col-md-3",4,"ngIf"],["src","assets/img/Icon_Circle-Plus.svg",1,"pointer","mr-3",3,"click"],["src","assets/img/ic_minus_sign_circle.svg",1,"pointer",3,"click"],[1,"form-group","col","ccl-form","col-md-3"],[1,"control-label"],[1,"radio-inline","col-2"],["type","radio","value","Yes","formControlName","ServiceImpacting",1,"mr-2",3,"id"],["type","radio","value","No","formControlName","ServiceImpacting",1,"mr-2",3,"id"],["type","radio","value","Yes","formControlName","ServiceAffecting",1,"mr-2",3,"id"],["type","radio","value","No","formControlName","ServiceAffecting",1,"mr-2",3,"id"],["for","current-issues-interval",1,"col-md-12","select-font"],["id","current-issues-interval",1,"custom-selectbox"],["formControlName","Severity",3,"searchable","placeholder","change"],["value","All"],["value","Critical"],["value","Major"],["value","Minor"],["value","Warning"],["value","Info"]],template:function(e,t){if(1&e&&(o.YNc(0,se,6,2,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"form",2),o.TgZ(3,"span",3),o._uU(4,"Filter By Region"),o.qZA(),o.TgZ(5,"div",4),o.TgZ(6,"div",5),o.TgZ(7,"label",6),o._uU(8),o.qZA(),o.TgZ(9,"div",7),o.TgZ(10,"ng-select",8),o.NdJ("add",function(e){return t.validateRegion(e)})("remove",function(e){return t.loadLocationValue(e)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"div",5),o.TgZ(12,"label",6),o._uU(13),o.qZA(),o.TgZ(14,"div",7),o.TgZ(15,"ng-select",9),o.NdJ("add",function(e){return t.validateLocation(e)})("remove",function(e){return t.loadSystemValue(e)}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"div",5),o.TgZ(17,"label",6),o._uU(18),o.qZA(),o.TgZ(19,"div",7),o.TgZ(20,"ng-select",10),o.NdJ("change",function(e){return t.selectSystem(e)})("add",function(e){return t.validateSystem(e)}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"span",3),o._uU(22,"Filter By Count"),o.qZA(),o.TgZ(23,"div",11),o.TgZ(24,"div",12),o.TgZ(25,"label",13),o._uU(26," No of Count "),o.qZA(),o.TgZ(27,"div",14),o._UZ(28,"input",15),o.YNc(29,ce,2,0,"em",16),o.qZA(),o.qZA(),o.TgZ(30,"div",12),o.TgZ(31,"label",13),o._uU(32," Duration (Seconds) "),o.qZA(),o.TgZ(33,"div",14),o._UZ(34,"input",17),o.YNc(35,de,2,0,"em",16),o.qZA(),o.qZA(),o.TgZ(36,"div",18),o.TgZ(37,"label",19),o._uU(38,"Start Date"),o.qZA(),o.TgZ(39,"div",14),o._UZ(40,"p-calendar",20),o.qZA(),o.qZA(),o.TgZ(41,"div",18),o.TgZ(42,"label",21),o._uU(43,"End Date"),o.qZA(),o.TgZ(44,"div",14),o._UZ(45,"p-calendar",22),o.qZA(),o.qZA(),o.YNc(46,ue,6,6,"div",23),o.qZA(),o.TgZ(47,"span",3),o._uU(48,"Filter By Additional Parameters"),o.qZA(),o.TgZ(49,"div",24),o.YNc(50,ke,14,11,"div",25),o.qZA(),o.TgZ(51,"div",26),o.TgZ(52,"button",27),o.NdJ("click",function(){return t.go_previous()}),o._UZ(53,"img",28),o._uU(54),o.qZA(),o.TgZ(55,"button",29),o.NdJ("click",function(){return t.go_next()}),o._uU(56),o._UZ(57,"img",30),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){let e,i;o.Q6J("ngIf",t.error),o.xp6(2),o.Q6J("formGroup",t.filtersForm),o.xp6(6),o.Oqu(t.language.region),o.xp6(2),o.s9C("placeholder",t.language.region),o.Q6J("multiple",!0)("items",t.regionsDataArray)("clearable",!1)("searchable",!0),o.xp6(3),o.Oqu(t.language.Location),o.xp6(2),o.s9C("placeholder",t.language.Location),o.Q6J("multiple",!0)("items",t.locationDataArray)("clearable",!1)("searchable",!0),o.xp6(3),o.Oqu(t.language.System),o.xp6(2),o.s9C("placeholder",t.language.System),o.Q6J("multiple",!0)("items",t.systemDataArray)("clearable",!1)("searchable",!0),o.xp6(4),o.Q6J("ngClass",o.VKq(33,De,t.filtersForm.get("count")&&t.filtersForm.get("count").errors&&t.filtersForm.get("count").errors.min?"errorMessage":"")),o.xp6(5),o.Q6J("ngIf",null==(e=t.filtersForm.get("count"))||null==e.errors?null:e.errors.min),o.xp6(1),o.Q6J("ngClass",o.VKq(35,De,t.filtersForm.get("duration")&&t.filtersForm.get("duration").errors&&t.filtersForm.get("duration").errors.min?"errorMessage":"")),o.xp6(5),o.Q6J("ngIf",null==(i=t.filtersForm.get("duration"))||null==i.errors?null:i.errors.min),o.xp6(5),o.Q6J("showIcon",!0)("minDate",t.todayDate)("maxDate",t.filtersForm.get("endDate").value),o.xp6(5),o.Q6J("showIcon",!0)("minDate",t.filtersForm.get("startDate").value),o.xp6(1),o.Q6J("ngIf","No"==(null==t.workflowInputData?null:t.workflowInputData.selectedCategories)),o.xp6(4),o.Q6J("ngForOf",t.filtersForm.get("additionalParams").controls),o.xp6(4),o.hij(" ",t.language.Previous," "),o.xp6(2),o.hij(" ",t.language.Next," ")}},directives:[h.O5,g._Y,g.JL,g.sg,f.w9,g.JJ,g.u,h.mk,g.qQ,g.wV,g.Fj,re.v,le.v,S.f,h.sg,g.CE,g.x0,g._,f.xv],styles:["div.checkbox.switcher[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]{float:right}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;cursor:pointer}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{vertical-align:middle}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;display:inline-block;width:45px;height:25px;background:#ffffff;border:1px solid #0279ff;border-radius:50px;transition:all .3s ease-in-out;padding:5px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{position:absolute;display:block;width:20px;height:19px;background:#0279ff;border-radius:50%;transition:all .3s ease-in-out;left:2px;top:2px}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#269bff;border-color:#269bff}div.checkbox.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], div.radio.switcher[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{left:50%;background:#ffffff}form[_ngcontent-%COMP%]{width:100%}.f-w-600[_ngcontent-%COMP%]{font-weight:600}[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){position:relative!important;left:unset!important;cursor:pointer}.pr-46[_ngcontent-%COMP%]{padding-right:46px}.br-26[_ngcontent-%COMP%]{border-radius:26px}.new-profile-table[_ngcontent-%COMP%]{margin:10px 0}.profile-table[_ngcontent-%COMP%]{margin:10px 0}.delete-org-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.custom-selectbox-opr[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{z-index:1;width:100%;padding-top:10px;padding-bottom:10px;border-radius:10px!important;min-height:auto;max-height:260px;overflow-y:auto;font-size:14px;transition:.5s ease}.errorMessage[_ngcontent-%COMP%]{padding-left:0!important}"]}),e})();var ye=i(82945);const Ae=["endTime"];function xe(e,t){if(1&e&&(o.TgZ(0,"div",19),o.TgZ(1,"span",20),o._UZ(2,"img",21),o.qZA(),o._uU(3),o.TgZ(4,"ul",22),o.TgZ(5,"li"),o._uU(6),o.qZA(),o.TgZ(7,"li"),o._uU(8),o.qZA(),o.TgZ(9,"li"),o._uU(10),o.qZA(),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(3),o.hij(" ",e.language.Device_reboot," "),o.xp6(3),o.hij("1.\xa0",e.language.Changes_Wan,""),o.xp6(2),o.hij("2.\xa0",e.language.Apply_wifi,""),o.xp6(2),o.hij("3.\xa0",e.language.Apply_reboot,"")}}function Te(e,t){if(1&e&&o._uU(0),2&e){const e=t.item,i=o.oxw();o.hij(" ",i.language[e.name]," ")}}function Ie(e,t){if(1&e&&o._uU(0),2&e){const e=t.item,i=o.oxw();o.hij(" ",i.language[e.name]," ")}}function _e(e,t){if(1&e&&(o.TgZ(0,"h4",23),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.hij(" ",e.language.Triggered_CPE_Alarm_discovered," ")}}function Ce(e,t){1&e&&(o.TgZ(0,"div",30),o._uU(1," Enter Valid Email Id "),o.qZA())}function Pe(e,t){if(1&e&&(o.TgZ(0,"div",30),o._uU(1),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.hij(" ",e.language["This field is required"],"")}}const Se=function(e){return[e]};function Oe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",24),o.TgZ(1,"label",25),o._uU(2),o.qZA(),o.TgZ(3,"div",26),o.TgZ(4,"input",27,28),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().workflowInputData.email=t}),o.qZA(),o.YNc(6,Ce,2,0,"div",29),o.YNc(7,Pe,2,1,"div",29),o.qZA(),o.qZA()}if(2&e){const e=o.MAs(5),t=o.oxw(),i=o.MAs(20);o.xp6(2),o.Oqu(null==t.language?null:t.language.Email),o.xp6(1),o.Q6J("ngClass",o.VKq(5,Se,(null!=e&&null!=e.errors&&e.errors.pattern||null!=e&&null!=e.errors&&e.errors.required)&&(i.submitted||null!=e&&e.touched)?"errorMessage":"")),o.xp6(1),o.Q6J("ngModel",t.workflowInputData.email),o.xp6(2),o.Q6J("ngIf",(null==e||null==e.errors?null:e.errors.pattern)&&(i.submitted||(null==e?null:e.touched))),o.xp6(1),o.Q6J("ngIf",((null==e?null:e.touched)||i.submitted)&&(null==e||null==e.errors?null:e.errors.required))}}let qe=(()=>{class e{constructor(e,t,i){this.translateService=e,this.dateUtils=t,this.router=i,this.workflowInputData={},this.workflowOprData=new o.vpe,this.activeTab=new o.vpe,this.endtimeError=!1,this.timeWindow=60,this.dailyChecked=!0,this.weekChecked=!1,this.monthChecked=!1,this.weekScheduling=!1,this.monthScheduling=!1,this.RangeRecurrenceEndBy=!1,this.RangeRecurrenceEndAfter=!0,this.customStartDate=new Date,this.customStartRange=new Date,this.customEndRange=new Date,this.startDateTime=new Date,this.weekselected=[],this.daysOfMonth=1,this.rangeOccurrence=1,this.endBy=!1,this.endAfter=!0,this.radio=!0,this.daily_frequency=1,this.week_frequency=1,this.month_frequency=1,this.weekerror=!1,this.disablefullGroupExecute=!1,this.WindowerrorMsg=null}ngOnInit(){var e,t,i,o,n,a,r,l,s,c,d;this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.workflowInputData&&(null===(t=null===(e=this.workflowInputData)||void 0===e?void 0:e.actions)||void 0===t||t.filter(e=>{"Download SW/FW Image"===e.actionType&&this.router.url.includes("/cco-foundation/foundation-operations/foundation-system-operation/workflows/workflow-wizard")&&(this.disablefullGroupExecute=!0)}));let u=this.workflowInputData?null===(o=null===(i=this.workflowInputData)||void 0===i?void 0:i.actions)||void 0===o?void 0:o.filter(e=>"Replace Service Profile"===e.actionType||"Edge Suites Bulk Activation"===e.actionType):"",g=this.workflowInputData?null===(a=null===(n=this.workflowInputData)||void 0===n?void 0:n.actions)||void 0===a?void 0:a.filter(e=>"Download Official Image"===e.actionType):"";if((null==u?void 0:u.length)?(this.scheduleValueSelected="Time Scheduler",this.timeschedule=!0,this.inputOperationType=[{name:"Time Scheduler",id:"Time Scheduler"}]):(null==g?void 0:g.length)?(this.scheduleValueSelected="Time Scheduler",this.disablefullGroupExecute=!0,this.workflowInputData.source="Foundation",this.timeschedule=!0,this.workflowInputData.fullGroupExecute=!0,this.inputOperationType=[{name:"Time Scheduler",id:"Time Scheduler"}]):(this.scheduleValueSelected="On Discovery",this.timeschedule=!1,this.inputOperationType=[{name:"On Discovery",id:"On Discovery"}]),this.workflowInputData)if(this.workflowInputData.execPolicy==={}||void 0===(null===(l=null===(r=this.workflowInputData)||void 0===r?void 0:r.execPolicy)||void 0===l?void 0:l.initialTrigger)||"CPE Event"===(null===(d=null===(c=null===(s=this.workflowInputData)||void 0===s?void 0:s.execPolicy)||void 0===c?void 0:c.initialTrigger)||void 0===d?void 0:d.type))console.log("officialImage=>",g),!(null==u?void 0:u.length)&&!(null==g?void 0:g.length)&&(console.log("officialImage in if=>",g),this.scheduleValueSelected="On Discovery",this.timeschedule=!1);else switch(console.log("officialImage in else=>",g),this.scheduleValueSelected="Time Scheduler",this.timeschedule=!0,this.startDateTime=this.workflowInputData.execPolicy.window.startDateTime?new Date(this.workflowInputData.execPolicy.window.startDateTime):new Date,this.customStartDate=this.workflowInputData.execPolicy.window.startDateTime?new Date(this.workflowInputData.execPolicy.window.startDateTime):new Date,this.timeWindow=this.workflowInputData.execPolicy.window.windowLength?this.workflowInputData.execPolicy.window.windowLength/60:60,void 0!==this.workflowInputData.execPolicy.window.recurrence?(this.rangeOccurrence=this.workflowInputData.execPolicy.window.recurrence,this.RangeRecurrenceEndAfter=!0,this.endAfter=!0,this.endBy=!1):(this.customStartDate=this.workflowInputData.execPolicy.window.startDateTime?new Date(this.workflowInputData.execPolicy.window.startDateTime):new Date,this.customEndRange=new Date(this.workflowInputData.execPolicy.window.endDateTime),this.RangeRecurrenceEndBy=!0,this.RangeRecurrenceEndAfter=!1,this.endAfter=!1,this.endBy=!0),this.workflowInputData.execPolicy.window.type){case"weekly":console.log("weekly"),this.weekScheduling=!0,this.monthScheduling=!1,this.weekChecked=!0,this.dailyChecked=!1,this.monthChecked=!1,this.weekly="yes",this.daily="no",this.monthly="no",this.week_frequency=this.workflowInputData.execPolicy.window.frequency,this.daily_frequency=1,this.month_frequency=1,this.workflowInputData.execPolicy.window.weekdays?(this.workflowInputData.execPolicy.window.weekdays.includes("SUN")&&(this.Sunday=!0,this.weekselected.push("SUN")),this.workflowInputData.execPolicy.window.weekdays.includes("MON")&&(this.Monday=!0,this.weekselected.push("MON")),this.workflowInputData.execPolicy.window.weekdays.includes("TUE")&&(this.Tuesday=!0,this.weekselected.push("TUE")),this.workflowInputData.execPolicy.window.weekdays.includes("WEN")&&(this.Wednesday=!0,this.weekselected.push("WEN")),this.workflowInputData.execPolicy.window.weekdays.includes("THU")&&(this.Thursday=!0,this.weekselected.push("THU")),this.workflowInputData.execPolicy.window.weekdays.includes("FRI")&&(this.Friday=!0,this.weekselected.push("FRI")),this.workflowInputData.execPolicy.window.weekdays.includes("SAT")&&(this.Saturday=!0,this.weekselected.push("SAT"))):this.weekselected=[];break;case"monthly":console.log("weekly"),this.monthScheduling=!0,this.weekScheduling=!1,this.monthChecked=!0,this.dailyChecked=!1,this.weekChecked=!1,this.monthly="yes",this.weekly="no",this.daily="no",this.month_frequency=this.workflowInputData.execPolicy.window.frequency,this.daysOfMonth=this.workflowInputData.execPolicy.window.daysOfMonth[0],this.week_frequency=1,this.daily_frequency=1;break;default:console.log("daily"),this.weekScheduling=!1,this.monthScheduling=!1,this.dailyChecked=!0,this.weekChecked=!1,this.monthChecked=!1,this.daily="yes",this.monthly="no",this.weekly="no",this.week_frequency=1,this.month_frequency=1,this.daily_frequency=this.workflowInputData.execPolicy.window.frequency}}ngOnDestroy(){this.languageSubject.unsubscribe()}optionValChoose(){"Time Scheduler"===this.scheduleValueSelected?this.timeschedule=!0:(this.timeschedule=!1,this.scheduleValueSelected="On Discovery")}getRecurrenceData(e){"daily"===e.target.value?(this.weekScheduling=!1,this.monthScheduling=!1,this.dailyChecked=!0,this.weekChecked=!1,this.monthChecked=!1,this.daily="yes",this.monthly="no",this.weekly="no",this.week_frequency=1,this.month_frequency=1,this.daysOfMonth=1):"weekly"===e.target.value?(this.weekScheduling=!0,this.monthScheduling=!1,this.weekChecked=!0,this.dailyChecked=!1,this.monthChecked=!1,this.weekly="yes",this.daily="no",this.monthly="no",this.month_frequency=1,this.daily_frequency=1,this.daysOfMonth=1):(this.monthScheduling=!0,this.weekScheduling=!1,this.monthChecked=!0,this.dailyChecked=!1,this.weekChecked=!1,this.monthly="yes",this.weekly="no",this.daily="no",this.week_frequency=1,this.daily_frequency=1)}bindData(e){var t;e.target.checked?this.weekselected.push(e.target.value):this.weekselected=null===(t=this.weekselected)||void 0===t?void 0:t.filter(t=>t!=e.target.value)}go_next(){var e;if(this.customStartDate.setHours(+this.startDateTime.getHours()),this.customStartDate.setMinutes(+this.startDateTime.getMinutes()),this.customStartDate.setMilliseconds(+this.startDateTime.getMilliseconds()),"On Discovery"===this.scheduleValueSelected)this.workflowInputData.execPolicy={initialTrigger:{type:"CPE Event",cpeEvent:"CC EVENT - New CPE Discovered"}};else if("Time Scheduler"===this.scheduleValueSelected){if(!0===this.weekScheduling){if((null===(e=this.weekselected)||void 0===e?void 0:e.length)<1)return void(this.weekerror=!0);this.weekerror=!1,this.workflowInputData.execPolicy={initialTrigger:{type:"Maintenance Window"},window:{type:"weekly",startDateTime:this.customStartDate.toISOString(),windowLength:60*this.timeWindow,frequency:this.week_frequency,weekdays:this.weekselected}}}else this.workflowInputData.execPolicy=!0===this.monthScheduling?{initialTrigger:{type:"Maintenance Window"},window:{type:"monthly",startDateTime:this.customStartDate.toISOString(),windowLength:60*this.timeWindow,frequency:this.month_frequency,daysOfMonth:[this.daysOfMonth]}}:{initialTrigger:{type:"Maintenance Window"},window:{type:"daily",startDateTime:this.customStartDate.toISOString(),windowLength:60*this.timeWindow,frequency:this.daily_frequency}};if(this.RangeRecurrenceEndBy){if(this.endtimeError)return;this.workflowInputData.execPolicy.window.endDateTime=this.customEndRange?new Date(this.customEndRange).toISOString():""}else this.workflowInputData.execPolicy.window.recurrence=this.rangeOccurrence?this.rangeOccurrence:0}return this.workflowInputData.startTime=new Date(this.startDateTime).toISOString(),this.workflowInputData.levelPassed<=4&&(this.workflowInputData.levelPassed=4),this.workflowOprData.emit(this.workflowInputData),this.activeTab.emit("Review"),!0}go_previous(){this.activeTab.emit("Select Operation Parameters")}getRangeRecurrence(e){"endBy"===e.target.value?(this.RangeRecurrenceEndBy=!0,this.RangeRecurrenceEndAfter=!1,this.endBy=!0,this.endAfter=!1):(this.RangeRecurrenceEndAfter=!0,this.RangeRecurrenceEndBy=!1,this.endAfter=!0,this.endBy=!1)}validateWindow(e){console.log("event=>",e),this.WindowerrorMsg=e?0==e?this.language.Input_Number_Validation+" 0":e>1440?this.language.Input_Number_Validation2+" 1440":"":""}onSelectStartTime(e){console.log("event=>",e.target.value),Date.parse(e.target.value.toString())||(this.customStartDate=new Date)}onSelectStartOnlyTime(e){console.log("event=>",e);let t=/^\d{1,2}:\d{2}( [ap || AP]M)?$/,i=e.target.value;i.match(t)||(console.log("selected Date=>",!i.match(t)),this.startDateTime=new Date)}onSelectEndTime(e){console.log("event endtime=>",e),console.log("event starttime=>",this.customStartDate);let t=e,i=this.customStartDate;Date.parse(t.toString())?this.endtimeError=!(t.getTime()>i.getTime()):this.customEndRange=new Date}onChangeEndTime(e){console.log("event=>",e.target.value);let t=e.target.value,i=this.customStartDate;Date.parse(t)?this.endtimeError=!(new Date(t).getTime()>i.getTime()):this.customEndRange=new Date}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.s),o.Y36(ne.s),o.Y36(_.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-alarm-wrkflow-wizard-schedule-parameters"]],viewQuery:function(e,t){if(1&e&&o.Gf(Ae,5),2&e){let e;o.iGM(e=o.CRH())&&(t.endTime=e.first)}},inputs:{workflowInputData:"workflowInputData"},outputs:{workflowOprData:"workflowOprData",activeTab:"activeTab"},decls:22,vars:10,consts:[["id","workflowWizardSchedule",1,"workflow-wizard-schedule"],[1,"form-group","row"],[1,"col-xs-12","col-12","col-md-12","col-lg-12"],["class","alert alert-note ","role","alert","style","margin-right: -13px",4,"ngIf"],[1,"workflow-next-previous"],["type","button","id","previous",1,"btn-arrow","btn-arr-prev","btn-grey","mr-2",3,"click"],["src","assets/img/ic_chevronleft_grey.svg"],["type","submit","id","submit","form","email-form","id","next",1,"btn-arrow","btn-arr-nxt","primary"],["src","assets/img/ic_chevron-r-w.svg"],["id","trigger-form",1,"row","mt-4","mb-2"],["for","inputOperationType",1,"col-lg-2","col-md-2","col-sm-2","control-label"],[1,"custom-selectbox-shedule-par","col-lg-8","col-md-10","col-sm-12"],["bindLabel","name","autofocus","","placeholder","","name","trigger","id","trigger","id","trigger","bindValue","id",3,"items","ngModel","searchable","clearable","change","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],["class","f-size-18 pb-3",4,"ngIf"],["novalidate","","id","email-form",3,"ngSubmit"],["myForm","ngForm"],["class","form-group row required ccl-form",4,"ngIf"],["role","alert",1,"alert","alert-note",2,"margin-right","-13px"],[1,"success-img"],["src","./assets/img/ic_info.svg"],[1,"waring-ul","mb-0"],[1,"f-size-18","pb-3"],[1,"form-group","row","required","ccl-form"],["for","email",1,"col-2","control-label"],[1,"col-lg-8","col-md-10","col-sm-12",3,"ngClass"],["id","email","required","","aria-required","true","type","email","name","email","data-toggle","tooltip","data-placement","bottom","title","Enter Comma Separated Notification Mailing List","aria-required","true","aria-describedby","email-error","aria-invalid","true","pattern","^(\\s?[^\\s,]+@[^\\s,]+\\.[^\\s,]+\\s?,)*(\\s?[^\\s,]+@[^\\s,]+\\.[^\\s,]+)$","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","errorMessage","id","email-error",4,"ngIf"],["id","email-error",1,"errorMessage"]],template:function(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.YNc(3,xe,11,4,"div",3),o.qZA(),o.qZA(),o.TgZ(4,"div",4),o.TgZ(5,"button",5),o.NdJ("click",function(){return t.go_previous()}),o._UZ(6,"img",6),o._uU(7),o.qZA(),o.TgZ(8,"button",7),o._uU(9),o._UZ(10,"img",8),o.qZA(),o.qZA(),o.TgZ(11,"form",9),o.TgZ(12,"label",10),o._uU(13),o.qZA(),o.TgZ(14,"div",11),o.TgZ(15,"ng-select",12),o.NdJ("change",function(){return t.optionValChoose()})("ngModelChange",function(e){return t.scheduleValueSelected=e}),o.YNc(16,Te,1,1,"ng-template",13),o.YNc(17,Ie,1,1,"ng-template",14),o.qZA(),o.qZA(),o.qZA(),o.YNc(18,_e,2,1,"h4",15),o.TgZ(19,"form",16,17),o.NdJ("ngSubmit",function(){return o.CHM(e),o.MAs(20).form.valid&&t.go_next()}),o.YNc(21,Oe,8,7,"div",18),o.qZA(),o.qZA()}2&e&&(o.xp6(3),o.Q6J("ngIf",t.timeschedule),o.xp6(4),o.hij(" ",t.language.Previous," "),o.xp6(2),o.hij(" ",t.language.Next," "),o.xp6(4),o.Oqu(t.language.Trigger),o.xp6(2),o.Q6J("items",t.inputOperationType)("ngModel",t.scheduleValueSelected)("searchable",!1)("clearable",!1),o.xp6(3),o.Q6J("ngIf",!t.timeschedule),o.xp6(3),o.Q6J("ngIf",!t.timeschedule))},directives:[h.O5,g._Y,g.JL,g.F,f.w9,ye.U,g.JJ,g.On,f.bb,f.Z2,h.mk,g.Fj,g.Q7,g.c5],styles:[".f-w-600[_ngcontent-%COMP%]{font-weight:600}[type=radio][_ngcontent-%COMP%]:checked, [type=radio][_ngcontent-%COMP%]:not(:checked){position:relative!important;left:unset!important}ul.date-order[_ngcontent-%COMP%]{display:inline-flex;width:100%}ul.date-order[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:15%}.ccl-form.number-input[_ngcontent-%COMP%]{width:50%;margin-left:10px}.number-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:5px;color:#222}.radio-inline[_ngcontent-%COMP%]{cursor:pointer}.workflow-oneline[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.workflow-oneline[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:65px;margin:0 10px}.weekly-days[_ngcontent-%COMP%]{display:flex;align-items:center}.weekly-days[_ngcontent-%COMP%]   .checkbox-inline[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.days-line[_ngcontent-%COMP%]{padding-left:5px}.mont-list[_ngcontent-%COMP%]   .ccl-form[_ngcontent-%COMP%]{width:20%;display:flex;align-items:center}.mont-list[_ngcontent-%COMP%]   .ccl-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50%;padding-right:5px}.mont-list[_ngcontent-%COMP%]   .ccl-form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px}.mont-list[_ngcontent-%COMP%]   label.radio-inline[_ngcontent-%COMP%]{margin-right:9px}.ccl-form[_ngcontent-%COMP%]   .occurr-end[_ngcontent-%COMP%]{display:flex;align-items:center}.ccl-form[_ngcontent-%COMP%]   .occurr-end[_ngcontent-%COMP%]   .occur-input[_ngcontent-%COMP%]{width:11%;margin-left:10px}.ccl-form[_ngcontent-%COMP%]   .occurr-end[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:5px}.mothly-error-div[_ngcontent-%COMP%]{display:flex;align-items:start;width:auto}.mothly-error-div[_ngcontent-%COMP%]   .daily-month-error[_ngcontent-%COMP%]{width:28%;padding-right:10px;font-size:13px}.days-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-right:15px;margin:0}.days-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px}.custom-selectbox-shedule-par[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{z-index:1;width:100%;padding-top:10px;padding-bottom:10px;border-radius:10px!important;min-height:auto;max-height:260px;overflow-y:auto;font-size:14px;transition:.5s ease}.alert-note[_ngcontent-%COMP%]{color:#1a1f22;background-color:#f5faff;border-color:#f5faff}"]}),e})();function Me(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",18),o.TgZ(1,"span",19),o._UZ(2,"img",20),o.qZA(),o._UZ(3,"div",21),o.TgZ(4,"button",22),o.NdJ("click",function(){return o.CHM(e),o.oxw().closeAlert()}),o._uU(5),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(3),o.Q6J("innerHtml",e.errorInfo,o.oJD),o.xp6(2),o.hij(" ",e.language.Okay," ")}}function Ne(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"app-alarm-start-wizard",23),o.NdJ("activeTab",function(t){return o.CHM(e),o.oxw().getCurrentTab(t)})("workflowdata",function(t){return o.CHM(e),o.oxw().getStartData(t)}),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("workflowInputData",e.workflowInputData)}}function Ee(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"app-alarm-select-device-wizard",24),o.NdJ("activeTab",function(t){return o.CHM(e),o.oxw().getCurrentTab(t)})("workflowDeviceData",function(t){return o.CHM(e),o.oxw().getDeviceData(t)}),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("workflowInputData",e.workflowInputData)}}function Fe(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"app-alarm-wrkflow-wizard-opr-parameters",25),o.NdJ("activeTab",function(t){return o.CHM(e),o.oxw().getCurrentTab(t)})("workflowOprData",function(t){return o.CHM(e),o.oxw().getOptData(t)}),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("workflowInputData",e.workflowInputData)}}function Ue(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"app-alarm-wrkflow-wizard-schedule-parameters",25),o.NdJ("activeTab",function(t){return o.CHM(e),o.oxw().getCurrentTab(t)})("workflowOprData",function(t){return o.CHM(e),o.oxw().getScheduleData(t)}),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("workflowInputData",e.workflowInputData)}}function Je(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"app-alarm-workflow-wizard-review",26),o.NdJ("activeTab",function(t){return o.CHM(e),o.oxw().getCurrentTab(t)})("submitWorkflow",function(t){return o.CHM(e),o.oxw().submitWorkflow(t)}),o.qZA()}if(2&e){const e=o.oxw();o.Q6J("workflowInputData",e.workflowInputData)}}const Re=function(e){return{"step-current":e}};let We=(()=>{class e{constructor(e,t,i,o,n,a,r){this.translateService=e,this.route=t,this.api=i,this.router=o,this.fileService=n,this.sso=a,this.commonOrgService=r,this.activeTab="Start",this.editWorkFlow=!1,this.workflowInputData={orgId:0,name:"",selectedDeviceGroup:void 0,groups:[],actions:[],execPolicy:{},policy:{},description:"",fullGroupExecute:!1,bPriorNewAndFailed:!0,levelPassed:0,source:"",selectedAlarm:void 0,selectedCategories:void 0,categories:[],region:"",location:"",system:"",additionalParams:[],alarmName:[],duration:60,count:1,email:"",regionName:"All",locationName:"All",systemName:"All",startDate:null,endDate:null},this.errorInfo="",this.successInfo="",this.addProfileTab=["Start","Select Device Groups","Select Operation Parameters","Select Schedule Parameters","Review"],this.validlevels={1:"start",2:"device",3:"opr",4:"schedule",5:"review"},this.valid={Start:1,"Select Device Groups":2,"Select Operation Parameters":3,"Select Schedule Parameters":4,Review:5}}ngOnInit(){this.language=this.translateService.defualtLanguage,this.languageSubject=this.translateService.selectedLanguage.subscribe(e=>{this.language=e}),this.route.queryParams.subscribe(e=>{this.editItem_id=e.item,this.editItem_id&&this.getWorkflowById()})}ngOnDestroy(){this.languageSubject.unsubscribe(),this.editItem_id&&this.getWorkflowByIdSubscribe.unsubscribe()}getWorkflowById(){this.getWorkflowByIdSubscribe=this.api.getWorkflowById(this.editItem_id).subscribe(e=>{if(e){this.workflowInputData=e,this.workflowInputData.levelPassed=5,this.editWorkFlow=!0,this.workflowInputData.selectedDeviceGroup=0==this.workflowInputData.groups.length?"No":"Yes";for(let e=0;e<this.workflowInputData.actions.length;e++)if(!this.workflowInputData.actions[e].profileName)switch(this.workflowInputData.actions[e].actionType){case"Download SW/FW Image":this.fileService.getSwFileById(this.workflowInputData.actions[e].fileId).subscribe(t=>{this.workflowInputData.actions[e].profileName=t.name});break;case"Configuration File Download":this.fileService.deleteConfigFileById(this.workflowInputData.actions[e].fileId).subscribe(t=>{this.workflowInputData.actions[e].profileName=t.name})}this.setStepperColors()}},e=>{},()=>{})}getCurrentTab(e){this.activeTab=e,this.setStepperColors()}validateStart(){this.workflowInputData.name?this.activeTab="Select Device Groups":this.startElement.go_next()}getStartData(e){this.workflowInputData=e,this.activeTab="Select Device Groups"}getDeviceData(e){this.workflowInputData.groups=e.groups,this.activeTab="Select Operation Parameters"}getOptData(e){this.workflowInputData.actions=e.actions,this.activeTab="Select Schedule Parameters"}getScheduleData(e){this.workflowInputData.execPolicy=e.execPolicy,this.activeTab="Review"}pageErrorHandle(e){this.errorInfo=401==e.status?this.language["Access Denied"]:this.sso.pageErrorHandle(e),this.closeAlert(),this.error=!0}closeAlert(){this.error=!1,this.success=!1}submitWorkflow(e){this.workflowInputData.actions.forEach(e=>{"Edge Suites Bulk Activation"===e.actionType&&(e.actionType="Edge Suites Provision")}),setTimeout(()=>{if(this.editWorkFlow){let e={};e._id=this.editItem_id,e.name=this.workflowInputData.name,e.description=this.workflowInputData.description,e.groups=this.workflowInputData.groups,e.actions=this.workflowInputData.actions,e.execPolicy=this.workflowInputData.execPolicy,e.bPriorNewAndFailed=!0,e.fullGroupExecute=this.workflowInputData.fullGroupExecute,this.router.url.includes("/cco-foundation")&&this.workflowInputData.source&&(e.source=this.workflowInputData.source),this.router.url.endsWith("official-workflow-wizard")&&(e.source=this.workflowInputData.source),this.editAllWorkflowData=this.api.editWorkflowData(e).subscribe(e=>{this.sso.redirectByUrl(["/support/netops-management/operations/workflows","/cco/operations/cco-system-operations/workflows","./cco-foundation/foundation-configuration/configuration-workflow/workflows","/cco/operations/cco-subscriber-operations/operations/workflows"]),this.editWorkFlow=!1},e=>{this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}else{let e={};e.name=this.workflowInputData.name,e.description=this.workflowInputData.description,e.groups=this.workflowInputData.groups,e.actions=this.workflowInputData.actions,e.execPolicy=this.workflowInputData.execPolicy,e.bPriorNewAndFailed=!0,e.fullGroupExecute=this.workflowInputData.fullGroupExecute,this.router.url.includes("/cco-foundation")&&this.workflowInputData.source&&(e.source=this.workflowInputData.source),this.router.url.endsWith("official-workflow-wizard")&&(e.source=this.workflowInputData.source,e.type="Onboarding Scheduler"),this.addAllWorkflowData=this.api.AddWorkflowData(e).subscribe(e=>{this.sso.redirectByUrl(["/support/netops-management/operations/workflows","/cco/operations/cco-system-operations/workflows","./cco-foundation/foundation-configuration/configuration-workflow/workflows","/cco/operations/cco-subscriber-operations/operations/workflows"])},e=>{this.pageErrorHandle(e),this.commonOrgService.pageScrollTop()},()=>{})}},0)}setActiveTab(e){let t=this.valid[e];if("Start"==this.activeTab)this.startElement.go_next();else if("Select Device Groups"==this.activeTab){if(!this.deviceElement.go_next())return}else if("Select Operation Parameters"==this.activeTab){if(!this.oprElement.go_next())return}else if("Select Schedule Parameters"==this.activeTab&&!this.scheduleElement.go_next())return;this.activeTab=this.workflowInputData.levelPassed>=t-1?e:this.validlevels[this.workflowInputData.levelPassed+1],this.setStepperColors()}setStepperColors(){let e=this.valid[this.activeTab];for(let t=1;t<=this.workflowInputData.levelPassed;t++)$(`#wk-${this.validlevels[t]}`).removeClass("step"),$(`#wk-${this.validlevels[t]}`).removeClass("step-done"),$(`#wk-${this.validlevels[t]}`).removeClass("step-current"),e===t?$(`#wk-${this.validlevels[t]}`).addClass("step-current"):$(`#wk-${this.validlevels[t]}`).addClass("step-done")}closeWorkflow(){this.sso.redirectByUrl(["/support/netops-management/operations/workflows","","/cco-foundation/foundation-configuration/configuration-workflow/workflows","/cco/operations/cco-subscriber-operations/operations/workflows"])}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.s),o.Y36(_.gz),o.Y36(l.A),o.Y36(_.F0),o.Y36(oe.I),o.Y36(u.t6),o.Y36(d.v))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-alarm-workflow-wizard"]],viewQuery:function(e,t){if(1&e&&(o.Gf(P,5),o.Gf(I,5),o.Gf(Ze,5),o.Gf(qe,5),o.Gf(te,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.startElement=e.first),o.iGM(e=o.CRH())&&(t.deviceElement=e.first),o.iGM(e=o.CRH())&&(t.oprElement=e.first),o.iGM(e=o.CRH())&&(t.scheduleElement=e.first),o.iGM(e=o.CRH())&&(t.reviewElement=e.first)}},inputs:{activeTab:"activeTab"},decls:35,vars:35,consts:[[1,"row"],[1,"col-md-12"],["id","workflowWizard",1,"workflow-wizard"],[1,"row","justify-content-end"],[1,"col-md-1","mb-3"],["type","button","aria-label","Close",1,"close","mt-2",3,"click"],["aria-hidden","true"],[1,"stepper-ui"],["id","wk-start",1,"step",3,"title","ngClass","click"],["id","wk-device",1,"step",3,"title","ngClass","disabled","click"],["id","wk-opr",1,"step",3,"title","ngClass","disabled","click"],["id","wk-schedule",1,"step",3,"title","ngClass","disabled","click"],["id","wk-review",1,"step",3,"title","ngClass","disabled","click"],["class","w-100 alert alert-danger mt-4 fade show flex-space-between",4,"ngIf"],[3,"workflowInputData","activeTab","workflowdata",4,"ngIf"],[3,"workflowInputData","activeTab","workflowDeviceData",4,"ngIf"],[3,"workflowInputData","activeTab","workflowOprData",4,"ngIf"],[3,"workflowInputData","activeTab","submitWorkflow",4,"ngIf"],[1,"w-100","alert","alert-danger","mt-4","fade","show","flex-space-between"],[1,"success-img"],["src","./assets/img/error-icon.svg"],[1,"d-inline-flex",3,"innerHtml"],["id","wk-err-ok",1,"btn-default","primary","px-3","ok-btn",3,"click"],[3,"workflowInputData","activeTab","workflowdata"],[3,"workflowInputData","activeTab","workflowDeviceData"],[3,"workflowInputData","activeTab","workflowOprData"],[3,"workflowInputData","activeTab","submitWorkflow"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"button",5),o.NdJ("click",function(){return t.closeWorkflow()}),o._UZ(6,"span",6),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"section"),o.TgZ(8,"ul",7),o.TgZ(9,"li"),o.TgZ(10,"button",8),o.NdJ("click",function(){return t.setActiveTab("Start")}),o.TgZ(11,"span"),o._uU(12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"li"),o.TgZ(14,"button",9),o.NdJ("click",function(){return t.setActiveTab("Select Device Groups")}),o.TgZ(15,"span"),o._uU(16),o.qZA(),o.qZA(),o.qZA(),o.TgZ(17,"li"),o.TgZ(18,"button",10),o.NdJ("click",function(){return t.setActiveTab("Select Operation Parameters")}),o.TgZ(19,"span"),o._uU(20),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"li"),o.TgZ(22,"button",11),o.NdJ("click",function(){return t.setActiveTab("Select Schedule Parameters")}),o.TgZ(23,"span"),o._uU(24),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"li"),o.TgZ(26,"button",12),o.NdJ("click",function(){return t.setActiveTab("Review")}),o.TgZ(27,"span"),o._uU(28),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(29,Me,6,2,"div",13),o.YNc(30,Ne,1,1,"app-alarm-start-wizard",14),o.YNc(31,Ee,1,1,"app-alarm-select-device-wizard",15),o.YNc(32,Fe,1,1,"app-alarm-wrkflow-wizard-opr-parameters",16),o.YNc(33,Ue,1,1,"app-alarm-wrkflow-wizard-schedule-parameters",16),o.YNc(34,Je,1,1,"app-alarm-workflow-wizard-review",17),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(10),o.s9C("title",t.language.Start),o.Q6J("ngClass",o.VKq(25,Re,"Start"===t.activeTab)),o.xp6(2),o.Oqu(t.language.Start),o.xp6(2),o.s9C("title",t.language.Grouping),o.Q6J("ngClass",o.VKq(27,Re,"Select Device Groups"===t.activeTab))("disabled",null==t.workflowInputData.selectedAlarm),o.xp6(2),o.Oqu(t.language.Grouping),o.xp6(2),o.s9C("title",t.language["Operation Parameters"]),o.Q6J("ngClass",o.VKq(29,Re,"Select Operation Parameters"===t.activeTab))("disabled",null==t.workflowInputData.selectedAlarm),o.xp6(2),o.Oqu(t.language["Operation Parameters"]),o.xp6(2),o.s9C("title",t.language["Schedule Parameters"]),o.Q6J("ngClass",o.VKq(31,Re,"Select Schedule Parameters"===t.activeTab))("disabled",!t.workflowInputData.additionalParams.length),o.xp6(2),o.Oqu(t.language["Schedule Parameters"]),o.xp6(2),o.s9C("title",t.language.Review),o.Q6J("ngClass",o.VKq(33,Re,"Review"===t.activeTab))("disabled",!t.workflowInputData.additionalParams.length),o.xp6(2),o.Oqu(t.language.Review),o.xp6(1),o.Q6J("ngIf",t.error),o.xp6(1),o.Q6J("ngIf","Start"===t.activeTab),o.xp6(1),o.Q6J("ngIf","Select Device Groups"===t.activeTab),o.xp6(1),o.Q6J("ngIf","Select Operation Parameters"===t.activeTab),o.xp6(1),o.Q6J("ngIf","Select Schedule Parameters"===t.activeTab),o.xp6(1),o.Q6J("ngIf","Review"===t.activeTab))},directives:[h.mk,h.O5,P,I,Ze,qe,te],styles:['#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .stepper-main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;position:relative}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{padding:8px 20px;background:#ebeaef;color:gray;text-align:center;cursor:pointer;border-top-right-radius:20px;border-bottom-right-radius:20px;font-size:14px;border:transparent}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%]{z-index:55;border-top-left-radius:20px;border-bottom-left-radius:20px}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%]{z-index:44!important;transform:translate(-20px)}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%]{z-index:33!important;transform:translate(-40px)}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%]{z-index:22!important;transform:translate(-60px)}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{z-index:11!important;transform:translate(-80px);border-top-right-radius:20px;border-bottom-right-radius:20px}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step-active[_ngcontent-%COMP%]{background:#0279ff!important;color:#fff!important;z-index:99!important;border-radius:20px!important}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step-success[_ngcontent-%COMP%]{background:#82bf00!important;color:#fff!important;z-index:101!important;border-radius:20px!important}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:first-child{min-width:8%}.stepper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ebeaef!important;border:1px solid #ebeaef!important}@media (max-width: 1328px){#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:first-child{min-width:10%}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{padding:5px 15px;font-size:13px}}@media (max-width: 1100px){#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{padding:5px 15px;font-size:12px}}@media (max-width: 768px){.stepper-main[_ngcontent-%COMP%]{overflow-x:auto}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .stepper[_ngcontent-%COMP%]{width:1200px}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:first-child{min-width:9%}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{min-width:24%}#workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--1[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--2[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--3[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--4[_ngcontent-%COMP%], #workflowWizard.workflow-wizard[_ngcontent-%COMP%]   .step--5[_ngcontent-%COMP%]{font-size:12px;margin-left:9px;padding:10px 0 10px 9px}}.workflow-details-table[_ngcontent-%COMP%]   table.dataTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:33%}.stepper-ui[_ngcontent-%COMP%]{display:flex;list-style:none;margin:0 0 10px;padding:0;overflow:hidden}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:2px 10px 0 30px;background:#ffffff;color:#1a1f22;position:relative;height:32px;border-top:1px solid #0279ff;border-bottom:1px solid #0279ff;border-right:0px!important;border-left:0px!important;outline:none!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";width:30px;height:100%;background:transparent;position:absolute;top:0;right:-10px;transform:rotate(48deg);z-index:1;border:1px ridge transparent;border-top-color:#0279ff;border-right-color:#0279ff;border-top-right-radius:5px}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{color:#fff}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{background-color:#0279ff!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]{background-color:#82bf00;border-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{background-color:#82bf00}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled{background-color:#82bf00!important;border-color:#82bf00!important}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:after{border-top-color:#fff!important;border-right-color:#fff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:after{border-top-color:#0279ff!important;border-right-color:#0279ff!important;border-style:solid}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child   button[_ngcontent-%COMP%]{border-top-left-radius:30px;border-bottom-left-radius:30px}button[_ngcontent-%COMP%]:disabled{background:transparent!important;border:1px solid #0279ff!important;cursor:not-allowed;color:#4c4c4c}.new-workflow-title[_ngcontent-%COMP%]{font-size:42px;font-weight:300;line-height:53px;color:#1a1f22}.stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-current[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%], .stepper-ui[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.step-done[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{opacity:.8;color:#fff!important}']}),e})()}}]);